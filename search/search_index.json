{"config":{"lang":["ja"],"separator":"[\\s\\-\uff0c\u3002]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"Home","text":"<p>Note</p> <p>\u672c\u7ad9\u70b9\u662f\u7531Mkdocs\u6784\u5efa\u751f\u6210html\u6587\u4ef6\uff0c\u4f7f\u7528Github Action \u81ea\u52a8\u90e8\u7f72\u53d1\u5e03\u3002</p> <p>\u4e3a\u4e86\u52a0\u5f3a\u5b66\u4e60\u8fc7\u7a0b\u4e2d\u5bf9\u6280\u672f\u7684\u7406\u89e3\uff0c\u5c06\u6240\u5b66\u5230\u7684\u5185\u5bb9\u603b\u7ed3\uff0c\u5b58\u50a8\u5728\u5f53\u524d\u4ed3\u5e93\u4e2d\u3002</p>"},{"location":"#_1","title":"\u5bfc\u822a","text":"<p>\u4ee5\u4e0b\u5217\u51fa\u91cd\u8981\u7684\u6559\u7a0b\uff1a</p> <ul> <li>gcc</li> <li>gdb</li> <li>shell</li> <li>vim</li> </ul>"},{"location":"About/","title":"About","text":""},{"location":"About/#_1","title":"\u5173\u4e8e\u4f5c\u8005","text":"<ul> <li>\u6211\u7684Github</li> <li>\u6211\u7684\u4e2a\u4eba\u4e3b\u9875</li> </ul> <p>\u6211\u73b0\u5728\u4ece\u4e8b\u5206\u5e03\u5f0f\u4e91\u5b58\u50a8\u7814\u53d1\u5de5\u4f5c\uff0c\u8d1f\u8d23\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\u5f00\u53d1\u3002\u95f2\u6687\u4e4b\u4f59\u559c\u6b22\u5b66\u4e60\u7814\u7a76\u524d\u6cbf\u6280\u672f\uff0c\u4e3a\u4e86\u52a0\u6df1\u7406\u89e3\u3001\u4fbf\u4e8e\u65e5\u540e\u6e29\u4e60\uff0c\u4f1a\u4ece\u5b66\u4e60\u4e2d\u63d0\u53d6\u91cd\u8981\u90e8\u5206\uff0c\u7528Markdown\u6587\u4ef6\u8bb0\u5f55\u4e0b\u81ea\u5df1\u7684\u603b\u7ed3\u3002\u672c\u7ad9\u70b9\u662f\u7531Mkdocs\u6784\u5efa\u751f\u6210html\u6587\u4ef6\uff0c\u4f7f\u7528Github Action \u81ea\u52a8\u90e8\u7f72\u53d1\u5e03\u3002</p>"},{"location":"About/#skills-level","title":"Skills Level","text":"Skills Describe Level C++ \u65f6\u523b\u5173\u6ce8\u7740 C++\u65b0\u6807\u51c6\uff0c\u638c\u63e1 C++11/14/17/20 \u2b50\u2b50\u2b50\u2b50 bash \u5de5\u4f5c\u4e2d\u7528\u7684\u5f88\u591a \u2b50\u2b50\u2b50\u2b50 Python \u5e38\u7528\u4e8e\u7f16\u5199\u811a\u672c\u6765\u63d0\u9ad8\u5de5\u4f5c\u6548\u7387 \u2b50\u2b50 Rust \u559c\u6b22 rust \u751f\u547d\u5468\u671f\u7ba1\u7406 \u2b50\u2b50 gcc \u4e3b\u8981\u4f7f\u7528\u7f16\u8bd1\u5668 \u2b50\u2b50\u2b50\u2b50 gdb \u9664\u4e86\u7f16\u7801\u5c31\u662f\u8c03\u8bd5 \u2b50\u2b50\u2b50\u2b50\u2b50 make \u5de5\u4f5c\u4e2d\u4e00\u76f4\u4f7f\u7528make \u2b50\u2b50\u2b50\u2b50 Linux \u638c\u63e1\u5927\u90e8\u5206 linux \u547d\u4ee4 \u2b50\u2b50\u2b50\u2b50"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/","title":"Linux\u76ee\u5f55\u8bf4\u660e","text":"<ul> <li>\u53c2\u8003\u9e1f\u54e5\u7684Linux\u79c1\u623f\u83dc</li> </ul> <ul> <li>\u7b2c\u4e00\u90e8\u4efd\uff1aFHS \u8981\u6c42\u5fc5\u987b\u8981\u5b58\u5728\u7684\u76ee\u5f55 |\u76ee\u5f55|\u8bf4\u660e| |---|---| |/bin|\u7cfb\u7edf\u6709\u5f88\u591a\u653e\u7f6e\u53ef\u6267\u884c\u6587\u4ef6\u7684\u76ee\u5f55\uff0c\u4f46/bin\u6bd4\u8f83\u7279\u6b8a\u3002\u56e0\u4e3a/bin\u653e\u7f6e\u7684\u662f\u5728\u5355\u4eba\u7ef4\u62a4\u6a21\u5f0f\u4e0b\u8fd8\u80fd\u591f\u88ab\u64cd\u4f5c\u7684\u6307\u4ee4\u3002 \u5728/bin\u4e0b\u9762\u7684\u6307\u4ee4\u53ef\u4ee5\u88abroot\u4e0e\u4e00\u822c\u5e10\u53f7\u6240\u4f7f\u7528\uff0c\u4e3b\u8981\u6709\uff1acat, chmod, chown, date, mv, mkdir, cp, bash\u7b49\u7b49\u5e38\u7528\u7684\u6307\u4ee4\u3002| |/boot|\u8fd9\u4e2a\u76ee\u5f55\u4e3b\u8981\u5728\u653e\u7f6e\u5f00\u673a\u4f1a\u4f7f\u7528\u5230\u7684\u6587\u4ef6\uff0c\u5305\u62ecLinux\u6838\u5fc3\u6587\u4ef6\u4ee5\u53ca\u5f00\u673a\u83dc\u5355\u4e0e\u5f00\u673a\u6240\u9700\u914d\u7f6e\u6587\u4ef6\u7b49\u7b49\u3002 Linux kernel\u5e38\u7528\u7684\u6587\u4ef6\u540d\u4e3a\uff1avmlinuz\uff0c\u5982\u679c\u4f7f\u7528\u7684\u662fgrub2\u8fd9\u4e2a\u5f00\u673a\u7ba1\u7406\u7a0b\u5e8f\uff0c \u5219\u8fd8\u4f1a\u5b58\u5728/boot/grub2/\u8fd9\u4e2a\u76ee\u5f55\u5594\uff01| |/dev|\u5728Linux\u7cfb\u7edf\u4e0a\uff0c\u4efb\u4f55\u8bbe\u5907\u4e0e\u5468\u8fb9\u8bbe\u5907\u90fd\u662f\u4ee5\u6587\u4ef6\u7684\u578b\u6001\u5b58\u5728\u4e8e\u8fd9\u4e2a\u76ee\u5f55\u5f53\u4e2d\u7684\u3002 \u4f60\u53ea\u8981\u901a\u8fc7\u5b58\u53d6\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u9762\u7684\u67d0\u4e2a\u6587\u4ef6\uff0c\u5c31\u7b49\u4e8e\u5b58\u53d6\u67d0\u4e2a\u8bbe\u5907\u5570\uff5e \u6bd4\u8981\u91cd\u8981\u7684\u6587\u4ef6\u6709/dev/null, /dev/zero, /dev/tty, /dev/loop_, /dev/sd_\u7b49\u7b49| |/etc|\u7cfb\u7edf\u4e3b\u8981\u7684\u914d\u7f6e\u6587\u4ef6\u51e0\u4e4e\u90fd\u653e\u7f6e\u5728\u8fd9\u4e2a\u76ee\u5f55\u5185\uff0c\u4f8b\u5982\u4eba\u5458\u7684\u5e10\u53f7\u5bc6\u7801\u6863\u3001 \u5404\u79cd\u670d\u52a1\u7684\u542f\u59cb\u6863\u7b49\u7b49\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u7684\u5404\u6587\u4ef6\u5c5e\u6027\u662f\u53ef\u4ee5\u8ba9\u4e00\u822c\u4f7f\u7528\u8005\u67e5\u9605\u7684\uff0c \u4f46\u662f\u53ea\u6709root\u6709\u6743\u529b\u4fee\u6539\u3002FHS\u5efa\u8bae\u4e0d\u8981\u653e\u7f6e\u53ef\u53ef\u6267\u884c\u6587\u4ef6\uff08binary\uff09\u5728\u8fd9\u4e2a\u76ee\u5f55\u4e2d\u5594\u3002\u6bd4\u8f83\u91cd\u8981\u7684\u6587\u4ef6\u6709\uff1a /etc/modprobe.d/, /etc/passwd, /etc/fstab, /etc/issue \u7b49\u7b49\u3002\u53e6\u5916 FHS \u8fd8\u89c4\u8303\u51e0\u4e2a\u91cd\u8981\u7684\u76ee\u5f55\u6700\u597d\u8981\u5b58\u5728 /etc/ \u76ee\u5f55\u4e0b\u5594\uff1a/etc/opt\uff08\u5fc5\u8981\uff09\uff1a\u8fd9\u4e2a\u76ee\u5f55\u5728\u653e\u7f6e\u7b2c\u4e09\u65b9\u534f\u529b\u8f6f\u4ef6 /opt \u7684\u76f8\u5173\u914d\u7f6e\u6587\u4ef6 /etc/X11/\uff08\u5efa\u8bae\uff09\uff1a\u4e0e X Window \u6709\u5173\u7684\u5404\u79cd\u914d\u7f6e\u6587\u4ef6\u90fd\u5728\u8fd9\u91cc\uff0c\u5c24\u5176\u662f xorg.conf \u8fd9\u4e2a X Server \u7684\u914d\u7f6e\u6587\u4ef6\u3002 /etc/sgml/\uff08\u5efa\u8bae\uff09\uff1a\u4e0e SGML \u683c\u5f0f\u6709\u5173\u7684\u5404\u9879\u914d\u7f6e\u6587\u4ef6 /etc/xml/\uff08\u5efa\u8bae\uff09\uff1a\u4e0e XML \u683c\u5f0f\u6709\u5173\u7684\u5404\u9879\u914d\u7f6e\u6587\u4ef6| |/lib|\u7cfb\u7edf\u7684\u51fd\u6570\u5e93\u975e\u5e38\u7684\u591a\uff0c\u800c/lib\u653e\u7f6e\u7684\u5219\u662f\u5728\u5f00\u673a\u65f6\u4f1a\u7528\u5230\u7684\u51fd\u6570\u5e93\uff0c \u4ee5\u53ca\u5728/bin\u6216/sbin\u4e0b\u9762\u7684\u6307\u4ee4\u4f1a\u8c03\u7528\u7684\u51fd\u6570\u5e93\u800c\u5df2\u3002 \u4ec0\u4e48\u662f\u51fd\u6570\u5e93\u5462\uff1f\u4f60\u53ef\u4ee5\u5c06\u4ed6\u60f3\u6210\u662f\u201c\u5916\u6302\u201d\uff0c\u67d0\u4e9b\u6307\u4ee4\u5fc5\u987b\u8981\u6709\u8fd9\u4e9b\u201c\u5916\u6302\u201d\u624d\u80fd\u591f\u987a\u5229\u5b8c\u6210\u7a0b\u5e8f\u7684\u6267\u884c\u4e4b\u610f\u3002 \u53e6\u5916 FSH \u8fd8\u8981\u6c42\u4e0b\u9762\u7684\u76ee\u5f55\u5fc5\u987b\u8981\u5b58\u5728\uff1a/lib/modules/\uff1a\u8fd9\u4e2a\u76ee\u5f55\u4e3b\u8981\u653e\u7f6e\u53ef\u62bd\u6362\u5f0f\u7684\u6838\u5fc3\u76f8\u5173\u6a21\u5757\uff08\u9a71\u52a8\u7a0b\u5e8f\uff09\u5594\uff01| |/media|media\u662f\u201c\u5a92\u4f53\u201d\u7684\u82f1\u6587\uff0c\u987e\u540d\u601d\u4e49\uff0c\u8fd9\u4e2a/media\u4e0b\u9762\u653e\u7f6e\u7684\u5c31\u662f\u53ef\u79fb\u9664\u7684\u8bbe\u5907\u5566\uff01 \u5305\u62ec\u8f6f\u76d8\u3001\u5149\u76d8\u3001DVD\u7b49\u7b49\u8bbe\u5907\u90fd\u6682\u65f6\u6302\u8f7d\u4e8e\u6b64\u3002\u5e38\u89c1\u7684\u6587\u4ef6\u540d\u6709\uff1a/media/floppy, /media/cdrom\u7b49\u7b49\u3002| |/mnt|\u679c\u4f60\u60f3\u8981\u6682\u65f6\u6302\u8f7d\u67d0\u4e9b\u989d\u5916\u7684\u8bbe\u5907\uff0c\u4e00\u822c\u5efa\u8bae\u4f60\u53ef\u4ee5\u653e\u7f6e\u5230\u8fd9\u4e2a\u76ee\u5f55\u4e2d\u3002 \u5728\u53e4\u65e9\u65f6\u5019\uff0c\u8fd9\u4e2a\u76ee\u5f55\u7684\u7528\u9014\u4e0e/media\u76f8\u540c\u5566\uff01\u53ea\u662f\u6709\u4e86/media\u4e4b\u540e\uff0c\u8fd9\u4e2a\u76ee\u5f55\u5c31\u7528\u6765\u6682\u65f6\u6302\u8f7d\u7528\u4e86\u3002| |/opt|\u8fd9\u4e2a\u662f\u7ed9\u7b2c\u4e09\u65b9\u534f\u529b\u8f6f\u4ef6\u653e\u7f6e\u7684\u76ee\u5f55\u3002\u4ec0\u4e48\u662f\u7b2c\u4e09\u65b9\u534f\u529b\u8f6f\u4ef6\u554a\uff1f \u4e3e\u4f8b\u6765\u8bf4\uff0cKDE\u8fd9\u4e2a\u684c\u9762\u7ba1\u7406\u7cfb\u7edf\u662f\u4e00\u4e2a\u72ec\u7acb\u7684\u8ba1\u5212\uff0c\u4e0d\u8fc7\u4ed6\u53ef\u4ee5\u5b89\u88c5\u5230Linux\u7cfb\u7edf\u4e2d\uff0c\u56e0\u6b64KDE\u7684\u8f6f\u4ef6\u5c31\u5efa\u8bae\u653e\u7f6e\u5230\u6b64\u76ee\u5f55\u4e0b\u4e86\u3002 \u53e6\u5916\uff0c\u5982\u679c\u4f60\u60f3\u8981\u81ea\u884c\u5b89\u88c5\u989d\u5916\u7684\u8f6f\u4ef6\uff08\u975e\u539f\u672c\u7684distribution\u63d0\u4f9b\u7684\uff09\uff0c\u90a3\u4e48\u4e5f\u80fd\u591f\u5c06\u4f60\u7684\u8f6f\u4ef6\u5b89\u88c5\u5230\u8fd9\u91cc\u6765\u3002 \u4e0d\u8fc7\uff0c\u4ee5\u524d\u7684Linux\u7cfb\u7edf\u4e2d\uff0c\u6211\u4eec\u8fd8\u662f\u4e60\u60ef\u653e\u7f6e\u5728/usr/local\u76ee\u5f55\u4e0b\u5462\uff01| |/run|\u65e9\u671f\u7684 FHS \u89c4\u5b9a\u7cfb\u7edf\u5f00\u673a\u540e\u6240\u4ea7\u751f\u7684\u5404\u9879\u4fe1\u606f\u5e94\u8be5\u8981\u653e\u7f6e\u5230 /var/run \u76ee\u5f55\u4e0b\uff0c\u65b0\u7248\u7684 FHS \u5219\u89c4\u8303\u5230 /run \u4e0b\u9762\u3002 \u7531\u4e8e /run \u53ef\u4ee5\u4f7f\u7528\u5185\u5b58\u6765\u4eff\u771f\uff0c\u56e0\u6b64\u6027\u80fd\u4e0a\u4f1a\u597d\u5f88\u591a\uff01| |/sbin|Linux\u6709\u975e\u5e38\u591a\u6307\u4ee4\u662f\u7528\u6765\u8bbe\u7f6e\u7cfb\u7edf\u73af\u5883\u7684\uff0c\u8fd9\u4e9b\u6307\u4ee4\u53ea\u6709root\u624d\u80fd\u591f\u5229\u7528\u6765\u201c\u8bbe\u7f6e\u201d\u7cfb\u7edf\uff0c\u5176\u4ed6\u4f7f\u7528\u8005\u6700\u591a\u53ea\u80fd\u7528\u6765\u201c\u67e5\u8be2\u201d\u800c\u5df2\u3002 \u653e\u5728/sbin\u4e0b\u9762\u7684\u4e3a\u5f00\u673a\u8fc7\u7a0b\u4e2d\u6240\u9700\u8981\u7684\uff0c\u91cc\u9762\u5305\u62ec\u4e86\u5f00\u673a\u3001\u4fee\u590d\u3001\u8fd8\u539f\u7cfb\u7edf\u6240\u9700\u8981\u7684\u6307\u4ee4\u3002 \u81f3\u4e8e\u67d0\u4e9b\u670d\u52a1\u5668\u8f6f\u4ef6\u7a0b\u5e8f\uff0c\u4e00\u822c\u5219\u653e\u7f6e\u5230/usr/sbin/\u5f53\u4e2d\u3002\u81f3\u4e8e\u672c\u673a\u81ea\u884c\u5b89\u88c5\u7684\u8f6f\u4ef6\u6240\u4ea7\u751f\u7684\u7cfb\u7edf\u53ef\u6267\u884c\u6587\u4ef6\uff08system binary\uff09\uff0c \u5219\u653e\u7f6e\u5230/usr/local/sbin/\u5f53\u4e2d\u4e86\u3002\u5e38\u89c1\u7684\u6307\u4ee4\u5305\u62ec\uff1afdisk, fsck, ifconfig, mkfs\u7b49\u7b49\u3002| |/srv|srv\u53ef\u4ee5\u89c6\u4e3a\u201cservice\u201d\u7684\u7f29\u5199\uff0c\u662f\u4e00\u4e9b\u7f51\u7edc\u670d\u52a1\u542f\u52a8\u4e4b\u540e\uff0c\u8fd9\u4e9b\u670d\u52a1\u6240\u9700\u8981\u53d6\u7528\u7684\u6570\u636e\u76ee\u5f55\u3002 \u5e38\u89c1\u7684\u670d\u52a1\u4f8b\u5982WWW, FTP\u7b49\u7b49\u3002\u4e3e\u4f8b\u6765\u8bf4\uff0cWWW\u670d\u52a1\u5668\u9700\u8981\u7684\u7f51\u9875\u6570\u636e\u5c31\u53ef\u4ee5\u653e\u7f6e\u5728/srv/www/\u91cc\u9762\u3002 \u4e0d\u8fc7\uff0c\u7cfb\u7edf\u7684\u670d\u52a1\u6570\u636e\u5982\u679c\u5c1a\u672a\u8981\u63d0\u4f9b\u7ed9\u7f51\u9645\u7f51\u7edc\u4efb\u4f55\u4eba\u6d4f\u89c8\u7684\u8bdd\uff0c\u9ed8\u8ba4\u8fd8\u662f\u5efa\u8bae\u653e\u7f6e\u5230 /var/lib \u4e0b\u9762\u5373\u53ef\u3002| |/tmp|\u8fd9\u662f\u8ba9\u4e00\u822c\u4f7f\u7528\u8005\u6216\u8005\u662f\u6b63\u5728\u6267\u884c\u7684\u7a0b\u5e8f\u6682\u65f6\u653e\u7f6e\u6587\u4ef6\u7684\u5730\u65b9\u3002 \u8fd9\u4e2a\u76ee\u5f55\u662f\u4efb\u4f55\u4eba\u90fd\u80fd\u591f\u5b58\u53d6\u7684\uff0c\u6240\u4ee5\u4f60\u9700\u8981\u5b9a\u671f\u7684\u6e05\u7406\u4e00\u4e0b\u3002\u5f53\u7136\uff0c\u91cd\u8981\u6570\u636e\u4e0d\u53ef\u653e\u7f6e\u5728\u6b64\u76ee\u5f55\u554a\uff01 \u56e0\u4e3aFHS\u751a\u81f3\u5efa\u8bae\u5728\u5f00\u673a\u65f6\uff0c\u5e94\u8be5\u8981\u5c06/tmp\u4e0b\u7684\u6570\u636e\u90fd\u5220\u9664\u5537\uff01| |/usr|\u7b2c\u4e8c\u5c42 FHS \u8bbe\u7f6e\uff0c\u540e\u7eed\u4ecb\u7ecd| |/var|\u7b2c\u4e8c\u66fe FHS \u8bbe\u7f6e\uff0c\u4e3b\u8981\u4e3a\u653e\u7f6e\u53d8\u52a8\u6027\u7684\u6570\u636e\uff0c\u540e\u7eed\u4ecb\u7ecd|</li> <li>\u7b2c\u4e8c\u90e8\u4efd\uff1aFHS \u5efa\u8bae\u53ef\u4ee5\u5b58\u5728\u7684\u76ee\u5f55 |\u76ee\u5f55|\u8bf4\u660e| |---|---| |/home|\u8fd9\u662f\u7cfb\u7edf\u9ed8\u8ba4\u7684\u4f7f\u7528\u8005\u4e3b\u6587\u4ef6\u5939\uff08home directory\uff09\u3002\u5728\u4f60\u65b0\u589e\u4e00\u4e2a\u4e00\u822c\u4f7f\u7528\u8005\u5e10\u53f7\u65f6\uff0c \u9ed8\u8ba4\u7684\u4f7f\u7528\u8005\u4e3b\u6587\u4ef6\u5939\u90fd\u4f1a\u89c4\u8303\u5230\u8fd9\u91cc\u6765\u3002\u6bd4\u8f83\u91cd\u8981\u7684\u662f\uff0c\u4e3b\u6587\u4ef6\u5939\u6709\u4e24\u79cd\u4ee3\u53f7\u5594\uff1a~\uff1a\u4ee3\u8868\u76ee\u524d\u8fd9\u4e2a\u4f7f\u7528\u8005\u7684\u4e3b\u6587\u4ef6\u5939 ~dmtsai \uff1a\u5219\u4ee3\u8868 dmtsai \u7684\u4e3b\u6587\u4ef6\u5939\uff01| |<code>/lib&lt;qual&gt;</code>|\u7528\u6765\u5b58\u653e\u4e0e /lib \u4e0d\u540c\u7684\u683c\u5f0f\u7684\u4e8c\u8fdb\u5236\u51fd\u6570\u5e93\uff0c\u4f8b\u5982\u652f\u6301 64 \u4f4d\u7684 /lib64 \u51fd\u6570\u5e93\u7b49| |/root|\u7cfb\u7edf\u7ba1\u7406\u5458\uff08root\uff09\u7684\u4e3b\u6587\u4ef6\u5939\u3002\u4e4b\u6240\u4ee5\u653e\u5728\u8fd9\u91cc\uff0c\u662f\u56e0\u4e3a\u5982\u679c\u8fdb\u5165\u5355\u4eba\u7ef4\u62a4\u6a21\u5f0f\u800c\u4ec5\u6302\u8f7d\u6839\u76ee\u5f55\u65f6\uff0c \u8be5\u76ee\u5f55\u5c31\u80fd\u591f\u62e5\u6709root\u7684\u4e3b\u6587\u4ef6\u5939\uff0c\u6240\u4ee5\u6211\u4eec\u4f1a\u5e0c\u671broot\u7684\u4e3b\u6587\u4ef6\u5939\u4e0e\u6839\u76ee\u5f55\u653e\u7f6e\u5728\u540c\u4e00\u4e2a\u5206\u533a\u4e2d\u3002|</li> <li>\u7b2c\u4e09\u90e8\u4efd\uff1a\u975eFHS\u4e2d\u5b9a\u4e49\u7684\u76ee\u5f55 |\u76ee\u5f55|\u8bf4\u660e| |---|---| |/lost+found|\u8fd9\u4e2a\u76ee\u5f55\u662f\u4f7f\u7528\u6807\u51c6\u7684ext2/ext3/ext4\u6587\u4ef6\u7cfb\u7edf\u683c\u5f0f\u624d\u4f1a\u4ea7\u751f\u7684\u4e00\u4e2a\u76ee\u5f55\uff0c\u76ee\u7684\u5728\u4e8e\u5f53\u6587\u4ef6\u7cfb\u7edf\u53d1\u751f\u9519\u8bef\u65f6\uff0c \u5c06\u4e00\u4e9b\u9057\u5931\u7684\u7247\u6bb5\u653e\u7f6e\u5230\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u3002\u4e0d\u8fc7\u5982\u679c\u4f7f\u7528\u7684\u662f xfs \u6587\u4ef6\u7cfb\u7edf\u7684\u8bdd\uff0c\u5c31\u4e0d\u4f1a\u5b58\u5728\u8fd9\u4e2a\u76ee\u5f55\u4e86\uff01| |/proc|\u8fd9\u4e2a\u76ee\u5f55\u672c\u8eab\u662f\u4e00\u4e2a\u201c\u865a\u62df\u6587\u4ef6\u7cfb\u7edf\uff08virtual filesystem\uff09\u201d\u5594\uff01\u4ed6\u653e\u7f6e\u7684\u6570\u636e\u90fd\u662f\u5728\u5185\u5b58\u5f53\u4e2d\uff0c \u4f8b\u5982\u7cfb\u7edf\u6838\u5fc3\u3001\u884c\u7a0b\u4fe1\u606f\uff08process\uff09\u3001\u5468\u8fb9\u8bbe\u5907\u7684\u72b6\u6001\u53ca\u7f51\u7edc\u72b6\u6001\u7b49\u7b49\u3002\u56e0\u4e3a\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u7684\u6570\u636e\u90fd\u662f\u5728\u5185\u5b58\u5f53\u4e2d\uff0c \u6240\u4ee5\u672c\u8eab\u4e0d\u5360\u4efb\u4f55\u786c\u76d8\u7a7a\u95f4\u554a\uff01\u6bd4\u8f83\u91cd\u8981\u7684\u6587\u4ef6\u4f8b\u5982\uff1a/proc/cpuinfo, /proc/dma, /proc/interrupts, /proc/ioports, /proc/net/ \u7b49\u7b49\u3002| |/sys*|\u8fd9\u4e2a\u76ee\u5f55\u5176\u5b9e\u8ddf/proc\u975e\u5e38\u7c7b\u4f3c\uff0c\u4e5f\u662f\u4e00\u4e2a\u865a\u62df\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u4e3b\u8981\u4e5f\u662f\u8bb0\u5f55\u6838\u5fc3\u4e0e\u7cfb\u7edf\u786c\u4ef6\u4fe1\u606f\u8f83\u76f8\u5173\u7684\u4fe1\u606f\u3002 \u5305\u62ec\u76ee\u524d\u5df2\u8f7d\u5165\u7684\u6838\u5fc3\u6a21\u5757\u4e0e\u6838\u5fc3\u4fa6\u6d4b\u5230\u7684\u786c\u4ef6\u8bbe\u5907\u4fe1\u606f\u7b49\u7b49\u3002\u8fd9\u4e2a\u76ee\u5f55\u540c\u6837\u4e0d\u5360\u786c\u76d8\u5bb9\u91cf\u5594\uff01|</li> </ul>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#1-proc","title":"1 proc","text":"<p><code>/proc</code> \u76ee\u5f55 - \u53c2\u8003 - man-proc\u624b\u518c - \u5728linux\u7684\u6839\u76ee\u5f55\u4e0b\u5b58\u5728\u4e00\u4e2a/proc\u76ee\u5f55\uff0c/proc\u6587\u4ef6\u7cfb\u7edf\u662f\u4e00\u79cd\u865a\u62df\u6587\u4ef6\u7cfb\u7edf,\u4ee5\u6587\u4ef6\u7cfb\u7edf\u76ee\u5f55\u548c\u6587\u4ef6\u5f62\u5f0f,\u63d0\u4f9b\u4e00\u4e2a\u6307\u5411\u5185\u6838\u6570\u636e\u7ed3\u6784\u7684\u63a5\u53e3\uff0c\u901a\u8fc7\u5b83\u80fd\u591f\u67e5\u770b\u548c\u6539\u53d8\u5404\u79cd\u7cfb\u7edf\u5c5e\u6027.proc\u76ee\u5f55\u901a\u5e38\u60c5\u51b5\u4e0b\u662f\u7531\u7cfb\u7edf\u81ea\u52a8\u6302\u8f7d\u5728/proc\u76ee\u5f55\u4e0b\uff0c\u4f46\u662f\u6211\u4eec\u4e5f\u53ef\u4ee5\u81ea\u884c\u624b\u52a8\u6302\u8f7d\uff0e - <code>proc</code>\u76ee\u5f55\u4e0b\u7684\u5927\u90e8\u5206\u6587\u4ef6\u90fd\u662f\u53ea\u8bfb\u7684\uff0c\u90e8\u5206\u6587\u4ef6\u662f\u53ef\u5199\u7684\uff0c\u6211\u4eec\u901a\u8fc7\u8fd9\u4e9b\u53ef\u5199\u7684\u6587\u4ef6\u6765\u4fee\u6539\u5185\u6838\u7684\u4e00\u4e9b\u914d\u7f6e;</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#11-pid","title":"1.1 pid","text":"<p><code>/proc/pid</code> \u6bcf\u4e00\u4e2a<code>/proc/pid</code>\u76ee\u5f55\u4e2d\u8fd8\u5b58\u5728\u4e00\u7cfb\u5217\u76ee\u5f55\u548c\u6587\u4ef6\uff0c\u8fd9\u4e9b\u6587\u4ef6\u548c\u76ee\u5f55\u8bb0\u5f55\u7684\u90fd\u662f\u5173\u4e8epid\u5bf9\u5e94\u8fdb\u7a0b\u7684\u4fe1\u606f\uff0e\u4f8b\u5982\uff0c\u5728<code>/proc/pid</code>\u7684\u76ee\u5f55\u4e0b\u5b58\u5728\u4e00\u4e2atask\u76ee\u5f55\uff0c\u5728task\u76ee\u5f55\u4e0b\u53c8\u5b58\u5728<code>task/tid</code>\u8fd9\u6837\u7684\u76ee\u5f55\uff0c\u8fd9\u4e2a\u76ee\u5f55\u5c31\u662f\u5305\u542b\u6b64\u8fdb\u7a0b\u4e2d\u7684\u6bcf\u4e2a\u7ebf\u7a0b\u7684\u4fe1\u606f\uff0c\u5176\u4e2d\u7684tid\u662f\u5185\u6838\u7ebf\u7a0b\u7684tid;\u901a\u8fc7\u3000GETDENTS(2)\u3000\u904d\u5386/proc\u5c31\u80fd\u591f\u770b\u5230\u6240\u6709\u7684<code>/proc/pid</code>\u7684\u76ee\u5f55\uff0c\u5f53\u7136\u901a\u8fc7\u00a0<code>ls -al /proc</code>\u7684\u65b9\u5f0f\u4e5f\u53ef\u4ee5\u770b\u5230\u6240\u6709\u7684\u4fe1\u606f\uff0e</p> <p>\u6bcf\u4e00\u4e2a\u8fd0\u884c\u7684\u8fdb\u7a0b\u90fd\u5b58\u5728pid\uff0c\u5bf9\u5e94\u7684\u5728/proc\u5c31\u5b58\u5728\u4e00\u4e2a/proc/pid\u7684\u76ee\u5f55\uff0c\u8fd9\u4e2a/proc/pid\u76ee\u5f55\u4e5f\u662f\u4e00\u4e2a\u4f2a\u6587\u4ef6\u7cfb\u7edf\uff0e\u901a\u5e38\u60c5\u51b5\u4e0b\u6bcf\u4e2a/proc/pid\u662f\u5c5e\u4e8e\u8fd0\u884c\u8fdb\u7a0b\u7684\u6709\u6548\u7528\u6237\u7684UID\u548cGID.\u4f46\u662f\u5982\u679c\u4e00\u4e2a\u8fdb\u7a0b\u7684dumpable\u5c5e\u6027\u7684\u503c\u5927\u4e8e\uff11\uff0c\u4ece\u5b89\u5168\u89d2\u5ea6\u8003\u8651\uff0c/proc/pid\u7684\u5c5e\u6027\u5c31\u662froot:root.</p> <p>\u57284.11\u7684\u5185\u6838\u7248\u672c\u4e4b\u524d\uff0croot:root\u8868\u793a\u7684\u662f\u5168\u5c40UID\u548cGID (\u5728\u521d\u59cb\u5316\u7684\u7528\u6237\u7a7a\u95f4\u4e2d\u7684UID\u548cGID\u90fd\u662f0)\uff0e\u4f46\u662f\u57284.11\u4e4b\u540e\u7684\u5185\u6838\u7248\u672c\uff0c\u5982\u679c\u8fd9\u4e2a\u8fdb\u7a0b\u4e0d\u662f\u5728\u521d\u59cb\u5316\u7684\u7528\u6237\u7a7a\u95f4\u4e2d\uff0c\u5b83\u7684UID\u5374\u662f0\uff0c\u90a3\u4e48\u5bf9\u5e94\u7684/proc/pid\u7684\u6743\u9650\u4e5f\u662froot:root.\u8fd9\u5c31\u610f\u5473\u7740\u5728docker\u5bb9\u5668\u5185\uff0c\u5982\u679c\u5c06\u8fdb\u7a0b\u7684PID\u8bbe\u7f6e\u4e3a0\uff0c\u90a3\u4e48\u8fd9\u4e2a\u8fdb\u7a0b\u5728\u5bb9\u5668\u5185\u5c31\u662f\u4ee5root\u6743\u9650\u8fd0\u884c\u7684\uff0e</p> <p>\u8fdb\u7a0b\u7684dumpable\u7684\u5c5e\u6027\u53ef\u80fd\u56e0\u4e3a\u5982\u4e0b\u7684\u539f\u5148\u53d1\u751f\u6539\u53d8\uff1a</p> <ul> <li>\u901a\u8fc7\u00a0prctl\u00a0\u8bbe\u7f6e\u4e86\u00a0PR_SET_DUMPABLE\u00a0\u5c5e\u6027</li> <li>\u901a\u8fc7\u00a0<code>/proc/sys/fs/suid_dumpable</code>\u6587\u4ef6\u4fee\u6539</li> </ul> <p>\u5c06dumpable\u91cd\u7f6e\u4e3a\uff11\uff0c\u5c31\u53ef\u4ee5\u6062\u590d<code>/proc/[pid]/*</code>\u6587\u4ef6\u5230\u8fdb\u7a0b\u6709\u6548\u7684UID\u548cGID.</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#111-attr","title":"1.1.1 attr","text":"<p><code>/proc/pid/attr</code>\u662f\u4e00\u4e2a\u76ee\u5f55\uff0c\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u7684\u4f5c\u7528\u662f\u4e3a\u5b89\u5168\u6a21\u5757\u63d0\u4f9b\u4e86API.\u901a\u8fc7\u8fd9\u4e9b\u6587\u4ef6\u6211\u4eec\u53ef\u4ee5\u8bfb\u53d6\u6216\u8005\u8bbe\u7f6e\u4e00\u4e9b\u5b89\u5168\u76f8\u5173\u7684\u9009\u9879\uff0e\u8fd9\u4e2a\u76ee\u5f55\u76ee\u524d\u80fd\u591f\u652f\u6301SELinux\uff0c\u4f46\u662f\u672c\u610f\u662f\u4e3a\u4e86\u80fd\u591f\u652f\u6301\u66f4\u591a\u7684\u5176\u4ed6\u7684\u5b89\u5168\u6a21\u5757\uff0e\u4ee5\u4e0b\u5c06\u4f1a\u6f14\u793aSELinux\u5982\u4f55\u4f7f\u7528\u8fd9\u4e9b\u6587\u4ef6\uff0e PS: \u53ea\u6709\u5185\u6838\u5f00\u542f\u4e86CONFIG_SECURITY\u9009\u9879\uff0c\u624d\u80fd\u591f\u770b\u5230\u8fd9\u4e2a\u76ee\u5f55\uff0e</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#1111-current","title":"1.1.1.1 current","text":"<p><code>/proc/pid/attr/current</code> \u8fd9\u4e2a\u6587\u4ef6\u7684\u5185\u5bb9\u8bb0\u5f55\u4e86\u5f53\u524d\u8fdb\u7a0b\u7684\u5b89\u5168\u5c5e\u6027</p> <p>\u5728SELinux\u4e2d\uff0c\u8fd9\u4e2a\u6587\u4ef6\u4e3b\u8981\u662f\u7528\u4e8e\u5f97\u5230\u5f53\u524d\u8fdb\u7a0b\u7684\u5b89\u5168\u4e0a\u4e0b\u6587\uff0e\u57282.6.11\u7684\u5185\u6838\u4e4b\u524d\uff0c\u8fd9\u4e2a\u6587\u4ef6\u4e0d\u80fd\u7528\u6765\u8bbe\u7f6e\u5b89\u5168\u4e0a\u4e0b\u6587(\u5199\u64cd\u4f5c\u662f\u4e0d\u5141\u8bb8\u7684)\uff0c\u56e0\u4e3aSELinux\u9650\u5236\u4e86\u8fdb\u7a0b\u5b89\u5168\u8f6c\u6362\u4e3a\u00a0EXECVE(2)\u00a0(\u53c2\u8003\u4e0b\u65b9\u7684<code>/proc/pid/attr/exec</code>). \u4ece2.6.11\u4e4b\u540e\uff0cSELinux\u53d6\u6d88\u4e86\u8fd9\u4e2a\u9650\u5236\uff0e\u5982\u679c\u7b56\u7565\u5141\u8bb8\uff0cSELinux\u901a\u8fc7\u5411\u8fd9\u4e2a\u6587\u4ef6\u5199\u5165\u6765\u652f\u6301\u8bbe\u7f6e\u884c\u4e3a\uff0c\u867d\u7136\u8fd9\u4e2a\u64cd\u4f5c\u4ec5\u4ec5\u53ea\u662f\u4e3a\u4e86\u7ef4\u62a4\u8001\u7684\u4e0a\u4e0b\u6587\u548c\u65b0\u7684\u4e0a\u4e0b\u6587\u7684\u9694\u79bb\uff0e\u57282.6.28\u4e4b\u524d\uff0cSELinux\u4e0d\u5141\u8bb8\u591a\u7ebf\u7a0b\u7a0b\u5e8f\u7684\u7ebf\u7a0b\u901a\u8fc7\u8fd9\u4e2a\u503c\u6765\u8bbe\u7f6e\u5b89\u5168\u4e0a\u4e0b\u6587\uff0c\u56e0\u4e3a\u8fd9\u6837\u4f1a\u5bfc\u81f4\u5171\u4eab\u5185\u5b58\u7a7a\u95f4\u7684\u53bf\u57ce\u7684\u5b89\u5168\u4e0a\u4e0b\u6587\u4e0d\u4e00\u81f4\uff0e\u4ece2.6.28\u4e4b\u540e\uff0cSELinux\u53d6\u6d88\u4e86\u8fd9\u4e2a\u9650\u5236\uff0c\u5f00\u59cb\u652f\u6301\u591a\u7ebf\u7a0b\u7684\u8bbe\u7f6e\u65b9\u6cd5\uff0e\u4f46\u662f\u9700\u8981\u6ee1\u8db3\u4e00\u5b9a\u7684\u6761\u4ef6\uff0c\u65b0\u7684\u5b89\u5168\u4e0a\u4e0b\u6587\u9700\u8981\u7ed1\u5b9a\u5728\u8001\u7684\u4e0a\u4e0b\u6587\u4e0a\uff0c\u5e76\u4e14\u8fd9\u4e2a\u7ed1\u5b9a\u5173\u7cfb\u662f\u8bbe\u7f6e\u5728\u7b56\u7565\u5f53\u4e2d\u7684\uff0c\u540c\u65f6\u65b0\u7684\u5b89\u5168\u4e0a\u4e0b\u6587\u662f\u8001\u7684\u5b89\u5168\u4e0a\u4e0b\u6587\u7684\u4e00\u4e2a\u5b50\u96c6\uff0e</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#1112-exec","title":"1.1.1.2 exec","text":"<p><code>/proc/pid/attr/exec</code> \u8fd9\u4e2a\u6587\u4ef6\u4ee3\u8868\u7ed9\u8fdb\u7a0b\u7684 execve \u7684\u5c5e\u6027\uff0e</p> <p>\u5728SELinux\u4e2d\uff0c\u6709\u65f6\u5019\u9700\u8981\u652f\u6301role/domain\u7684\u8f6c\u6362,execve(2)\u4e00\u822c\u90fd\u662f\u4f5c\u4e3a\u8fd9\u79cd\u8f6c\u6362\u7684\u9996\u9009\uff0c\u56e0\u4e3a\u5b83\u63d0\u4f9b\u4e86\u5bf9\u8fdb\u7a0b\u7684\u65b0\u7684\u5b89\u5168\u6807\u7b7e\u548c\u72b6\u6001\u7ee7\u627f\u7684\u66f4\u597d\u7684\u63a7\u5236\uff0e\u5728SELinux\u4e2d\uff0c\u5982\u679c\u91cd\u7f6e\u4e86execve(2)\uff0c\u90a3\u4e48\u8fd9\u4e2a\u7a0b\u5e8f\u5c31\u4f1a\u6062\u590d\u5230execve(2)\u6240\u8bbe\u7f6e\u7684\u72b6\u6001\uff0e</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#1113-fscreate","title":"1.1.1.3 fscreate","text":"<p><code>/proc/pid/attr/fscreate</code> \u8fd9\u4e2a\u6587\u4ef6\u4ee3\u8868\u8fdb\u7a0b\u4e0e\u6587\u4ef6\u6709\u5173\u7684\u6743\u9650\uff0c\u5305\u62ec open(2) mkdir(2) symlink(2) mknod(2)</p> <p>SELinux\u901a\u8fc7\u6b64\u6587\u4ef6\u80fd\u591f\u4fdd\u8bc1\u4ee5\u4e00\u4e2a\u5b89\u5168\u7684\u65b9\u5f0f\u521b\u5efa\u6587\u4ef6\uff0c\u6240\u4ee5\u8fd9\u91cc\u4e0d\u4f1a\u5b58\u5728\u4e0d\u5b89\u5168\u7684\u8bbf\u95ee\u7684\u98ce\u9669(\u5728\u6587\u4ef6\u521b\u5efa\u548c\u6587\u4ef6\u5c5e\u6027\u8bbe\u7f6e)\uff0e\u5982\u679c\u91cd\u7f6e\u4e86execve(2),\u90a3\u4e48\u7a0b\u5e8f\u4e5f\u4f1a\u88ab\u91cd\u7f6e\uff0c\u5305\u62ec\u7a0b\u5e8f\u6240\u521b\u5efa\u7684\u6587\u4ef6\uff0e</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#1114-keycreate","title":"1.1.1.4 keycreate","text":"<p><code>/proc/pid/attr/keycreate</code> \u5982\u679c\u8fdb\u7a0b\u5c06\u5b89\u5168\u4e0a\u4e0b\u6587\u5199\u5165\u6b64\u6587\u4ef6\uff0c\u90a3\u4e48\u6240\u6709\u521b\u5efa key \u7684\u884c\u4e3a\u90fd\u4f1a\u88ab\u52a0\u8f7d\u5230\u6b64\u4e0a\u4e0b\u6587\u4e2d\uff0e\u66f4\u591a\u7684\u4fe1\u606f\u53ef\u4ee5\u53c2\u8003\u5185\u6838\u6587\u4ef6\u3000Documentation/security/keys/core.rst\uff08\u5728 Linux3.0 \u548c Linux4.13 \u4e2d\u6587\u4ef6\u662f\u3000Documentation/security/keys.txt\u3000\u5728 Linux3.0 \u4e4b\u524d\u662fDocumentation/keys.txt\uff09</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#1115-prev","title":"1.1.1.5 prev","text":"<p><code>/proc/pid/attr/prev</code> \u8fd9\u4e2a\u6587\u4ef6\u5305\u542b\u4e86\u8fdb\u7a0b\u5728\u6267\u884c\u6700\u540e\u4e00\u4e2a execve (2) \u7684\u5b89\u5168\u4e0a\u4e0b\u6587\uff0e\u6362\u53e5\u8bdd\u8bf4\uff0c\u8fd9\u4e2a\u6587\u4ef6\u7684\u5185\u5bb9\u662f <code>/proc/pid/attr/current</code> \u524d\u4e00\u4e2a\u503c</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#1116-socketcreate","title":"1.1.1.6 socketcreate","text":"<p><code>/proc/pid/attr/socketcreate</code> \u5982\u679c\u4e00\u4e2a\u8fdb\u7a0b\u5411\u8fd9\u4e2a\u6587\u4ef6\u5199\u5165\u5b89\u5168\u4e0a\u4e0b\u6587\uff0c\u90a3\u4e48\u4e4b\u540e\u6240\u6709\u7684 sockets \u7684\u521b\u5efa\u884c\u4e3a\u90fd\u4f1a\u5728\u6b64\u8fdb\u7a0b\u4e0a\u4e0b\u6587\u4e2d;</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#112-autogroup","title":"1.1.2 autogroup","text":"<p><code>/proc/pid/autogroup</code> \u53c2\u8003\u00a0sched(7)</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#113-auxv","title":"1.1.3 auxv","text":"<p><code>/proc/pid/auxv</code> \u8fd9\u4e2a\u6587\u4ef6\u5305\u542b\u4e86\u5728\u8fdb\u7a0b\u6267\u884c\u65f6\uff0c\u4f20\u9012\u7ed9\u8fdb\u7a0b\u7684 ELF \u7684\u89e3\u91ca\u5668\u7684\u4fe1\u606f\uff0e\u8fd9\u4e2a\u6587\u4ef6\u7684\u683c\u5f0f\u662f\u4e00\u4e2a\u65e0\u7b26\u53f7\u7684 long \u7c7b\u578b\u7684 ID \u52a0\u4e0a\u6bcf\u4e2a entry \u7684\u4e00\u4e2a\u65e0\u7b26\u53f7\u7684 long \u7c7b\u578b\uff0c\u8fd9\u6700\u540e\u7684\u4e00\u4e2a entry \u5305\u542b\u4e86\u4e24\u4e2a\u96f6\u3002\u53c2\u8003\u00a0getauxval(3) `</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#114-cgroup","title":"1.1.4 cgroup","text":"<p><code>/proc/pid/cgroup</code> \u53c2\u8003\u00a0cgroups(7)</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#115-clear_refs","title":"1.1.5 clear_refs","text":"<p><code>/proc/pid/clear_refs</code> \u8fd9\u662f\u4e00\u4e2a\u53ea\u5199\u6587\u4ef6\uff0c\u53ea\u6709\u8fdb\u7a0b\u7684 owner \u80fd\u591f\u5199. \u53ea\u6709\u4e0b\u9762\u8fd9\u4e9b\u503c\u80fd\u591f\u88ab\u5199\u5165\uff1a</p> <ol> <li>(Since Linux 2.6.22)\u5bf9\u8fdb\u7a0b\u6240\u6709\u7684\u76f8\u5173\u7684\u9875\u91cd\u7f6e\u6240\u6709\u7684PG_Referenced \u548cACCESSED/YOUNG\u4f4d\u3000(\u57282.6.32\u4e4b\u524d\uff0c\u4efb\u4f55\u7684\u975e\u96f6\u7684\u503c\u5199\u5165\u5230\u6b64\u6587\u4ef6\u90fd\u662f\u6709\u6548\u7684)</li> <li>(Since Linux2.6.32) \u5bf9\u8fdb\u7a0b\u6240\u6709\u7684\u533f\u540d\u9875\u91cd\u7f6e\u6240\u6709\u7684PG_Referenced\u548cACCESSED/YOUNG\u4f4d</li> <li>(Since Linux2.6.32)\u5bf9\u8fdb\u7a0b\u6240\u6709\u7684\u4e0e\u6587\u4ef6\u76f8\u5173\u7684\u9875\u91cd\u7f6e\u6240\u6709\u7684PG_Referenced\u548cACCESSED/YOUNG\u4f4d\uff0e\u6e05\u9664\u6240\u6709\u7684PG_Referenced\u548cACCESSED/YOUNG\u63d0\u4f9b\u4e86\u4e00\u4e2a\u65b9\u6cd5\u7528\u4e8e\u6d4b\u91cf\u4e00\u4e2a\u8fdb\u7a0b\u662f\u6709\u4e86\u591a\u5c11\u5185\u5b58\uff0e\u7b2c\u4e00\u4e2a\u53ef\u4ee5\u53c2\u8003\u7684\u662f/proc/[pid]/smaps\u4e2d\u7684VMAs\u4e2d\u7684\u503c\uff0e\u5f53\u6e05\u9664\u4e86PG_Referenced\u548cACCESSED/YOUNG\u3000\u7ecf\u8fc7\u4e00\u6bb5\u65f6\u95f4\u4e4b\u540e\uff0c\u518d\u6b21\u6d4b\u91cf\u8fd9\u4e2a\u503c\uff0e</li> <li>(Since Linux3.11) \u6e05\u7a7a\u6389\u8fdb\u7a0b\u6240\u6709\u7684\u9875\u7684soft-dirty\u4f4d\uff0e\u901a\u8fc7\u5411/proc/[pid]/clear_refs\u6e05\u7a7a\uff0c\u5c31\u80fd\u591f\u77e5\u9053\u54ea\u4e9b\u9875\u662f\u88ab\u6c61\u67d3\u4e86\uff0e</li> <li>\u5c06peak resident\u91cd\u7f6e\u4e3a\u8fdb\u7a0b\u5f53\u524d\u7684resident\u7684\u5927\u5c0f\uff0e</li> </ol> <p>\u5982\u679c\u5411/proc/pid/clear_refs\u5199\u5165\u5176\u4ed6\u7684\u4efb\u4f55\u503c\uff0c\u4e0d\u4f1a\u6709\u4efb\u4f55\u7684\u6548\u679c;\u53ea\u6709\u5f53\u542f\u7528\u4e86CONFGI_PROC_PAGE_MONITOR\u7684\u5185\u6838\u9009\u9879\u4e4b\uff0c\u624d\u4f1a\u51fa\u73b0/proc/pid/clear_refs\u6587\u4ef6</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#116-cmdline","title":"1.1.6 cmdline","text":"<p><code>/proc/pid/cmdline</code> \u8fd9\u4e2a\u53ea\u8bfb\u6587\u4ef6\u662f\u5305\u542b\u4e86\u8fdb\u7a0b\u6267\u884c\u7684\u5b8c\u6574\u547d\u4ee4\uff0e\u5982\u679c\u6b64\u8fdb\u7a0b\u662f\u4e00\u4e2a\u50f5\u5c38\u8fdb\u7a0b\uff0c\u90a3\u4e48\u6b21\u6587\u4ef6\u6ca1\u6709\u4efb\u4f55\u7684\u5185\u5bb9\uff0e</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#117-comm","title":"1.1.7 comm","text":"<p><code>/proc/pid/comm</code> \u6b64\u6587\u4ef6\u8bb0\u5f55\u7684\u662f\u8fdb\u7a0b\u547d\u4ee4\u7684 comm\uff0e\u5728\u540c\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u7684\u4e0d\u540c\u7ebf\u7a0b\u7684 comm \u53ef\u80fd\u4e0d\u540c\uff0c\u53ef\u4ee5\u8bbf\u95ee <code>/proc/[pid]/task/tid/comm</code> \u83b7\u53d6\u8fdb\u7a0b\u4e2d\u7684\u6bcf\u4e2a\u7ebf\u7a0b\u7684 comm. \u901a\u8fc7\u5411 <code>/proc/self/task/tid/comm</code> \u5199\u5165\u5c31\u80fd\u591f\u4fee\u6539\u81ea\u5df1\u6216\u8005\u5176\u4ed6\u7ebf\u7a0b\u7684 comm. \u5982\u679c comm \u8d85\u8fc7 TASK_COMM_LEN (16) \u5c31\u4f1a\u88ab\u622a\u65ad\uff0e</p> <p>\u8fd9\u4e2a\u6587\u4ef6\u7684\u503c\u53ef\u4ee5\u901a\u8fc7\u3000prctl(2)\u3000\u7684PR_SET_NAME\u548cPR_GET_NAME\u7684\u64cd\u4f5c\u6765\u8bbe\u7f6e\u548c\u83b7\u53d6\uff0c\u901a\u8fc7\u00a0pthread_setname_np(3)\u3000\u80fd\u591f\u8bbe\u7f6e\u7ebf\u7a0b\u7684comm</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#118-coredump_filter","title":"1.1.8 coredump_filter","text":"<p><code>/proc/pid/coredump_filter</code> \u53c2\u8003\u00a0core(5)</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#119-cpuset","title":"1.1.9 cpuset","text":"<p><code>/proc/pid/cpuset</code> \u53c2\u8003\u3000cpuset(7)</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#1110-cwd","title":"1.1.10 cwd","text":"<p><code>/proc/pid/cwd</code> \u8fd9\u662f\u4e00\u4e2a\u5f53\u524d\u7684\u8fdb\u7a0b\u7684\u5de5\u4f5c\u76ee\u5f55\uff0e\u6bd4\u5982\u5982\u679c\u60f3\u8981\u77e5\u9053 pid \u4e3a 4451 \u7684\u8fdb\u7a0b\u7684\u5de5\u4f5c\u76ee\u5f55\uff0c\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u7684\u547d\u4ee4\u67e5\u770b:  </p> <pre><code>cd /proc/4451/cwd; /bin/pwd  </code></pre> <p>\u5728bash\u73af\u5883\u4e0b\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0/bin/pwd: couldn\u2019t find directory entry in \u2018..\u2019 with matching i-node\u7684\u9519\u8bef\uff0c\u8fd9\u662f\u56e0\u4e3apwd\u901a\u5e38\u662fshell\u5185\u7f6e\u7684\uff0c\u9700\u8981\u4f7f\u7528\u8fd9\u6837\u7684\u547d\u4ee4:  </p> <pre><code>/proc/4451/cwd; pwd -P  </code></pre> <p>\u5728\u591a\u7ebf\u7a0b\u7684\u7a0b\u5e8f\u4e2d\uff0c\u5982\u679c\u4e3b\u7ebf\u7a0b\u5df2\u7ecf\u9000\u51fa\u4e86\uff0c\u90a3\u4e48cwd\u7684\u7ed3\u679c\u5c31\u662f\u7a7a. \u53d6\u6d88\u6216\u8005\u662f\u8bfb\u53d6(readlink(2))\u8fd9\u4e2a\u94fe\u63a5\u7684\u5185\u5bb9\u7684\u6743\u9650\u662f\u7531ptrace\u7684\u8bbf\u95ee\u6a21\u5f0fPTRACE_MODE_READ_FSCREDS\u6765\u63a7\u5236\u7684\uff0c\u53c2\u8003ptrace(2)\uff0e</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#12-environ","title":"1.2 environ","text":"<p><code>/proc/pid/environ</code> \u8fd9\u4e2a\u6587\u4ef6\u5305\u542b\u7684\u662f\u5f53\u7a0b\u5e8f\u4f7f\u7528 execve \u542f\u52a8\u7a0b\u5e8f\u65f6\u7684\u73af\u5883\u53d8\u91cf\u7684\u503c\uff0c\u5176\u4e2d\u7684 entries \u662f\u901a\u8fc7 0x0 \u5206\u5272\u7684\uff0c\u7ed3\u5c3e\u662f\u53ef\u80fd\u662f null\uff0e\u5982\u679c\u6211\u4eec\u9700\u8981\u67e5\u8be2\u4e00\u4e2a\u6307\u5b9a\u7684\u8fdb\u7a0b\u7684\u73af\u5883\u53d8\u91cf\uff0c\u6211\u4eec\u53ef\u4ee5\u91c7\u7528\u5982\u4e0b\u7684\u65b9\u6cd5:  </p> <pre><code>\uff03cat /proc/4451/environ | tr '\\000' '\\n'  PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin  HOSTNAME=commoncollection  LANG=C.UTF-8  JAVA_HOME=/docker-java-home/jre  JAVA_VERSION=8u212  JAVA_DEBIAN_VERSION=8u212-b01-1~deb9u1  HOME=/root  </code></pre> <p>\u5982\u679c\u6267\u884c\u4e86execve(2)\u4e4b\u540e\uff0c\u8fdb\u7a0b\u8c03\u7528\u4e86putenv(3)\u6216\u8005\u662f\u76f4\u63a5\u4fee\u6539environ(7) \uff0c\u90a3\u4e48environ\u53d8\u91cf\u7684\u503c\u662f\u65e0\u6cd5\u968f\u4e4b\u6539\u53d8\u7684\uff0e \u66f4\u8fdb\u4e00\u6b65\uff0c\u8fdb\u7a0b\u80fd\u591f\u901a\u8fc7prctl(2)\u4fee\u6539PR_SET_MM_ENV_START\u7684\u503c\u6765\u4fee\u6539\u8fd9\u4e2a\u6587\u4ef6\u6240\u5f15\u7528\u7684\u5185\u5b58\u4f4d\u7f6e\uff0e \u8bfb\u53d6\u8fd9\u4e2a\u6587\u4ef6\u7684\u6743\u9650\u662f\u7531ptrace(2)\u7684PTRACE_MODE_READ_FSCREDS\u6765\u63a7\u5236.</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#121-exe","title":"1.2.1 exe","text":"<p><code>/proc/pid/exe</code> \u5728 Linux2.2 \u7684\u5185\u6838\u53ca\u5176\u4e4b\u540e,/proc/pid/exe \u662f\u76f4\u63a5\u6267\u884c\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u7684\u7b26\u53f7\u94fe\u63a5. \u8fd9\u4e2a\u7b26\u53f7\u94fe\u63a5\u80fd\u591f\u88ab\u53d6\u6d88. \u5c1d\u8bd5\u6253\u5f00\u8fd9\u4e2a\u6587\u4ef6\u5c31\u76f8\u5f53\u4e0e\u6253\u5f00\u4e86\u4e8c\u8fdb\u5236\u6587\u4ef6, \u751a\u81f3\u53ef\u4ee5\u901a\u8fc7\u91cd\u65b0\u8f93\u5165/proc/pid/exe \u91cd\u65b0\u8fd0\u884c\u4e00\u4e2a\u5bf9\u5e94\u4e8e pid \u7684\u4e8c\u8fdb\u5236\u6587\u4ef6. \u5728\u4e00\u4e2a\u591a\u7ebf\u7a0b\u7684\u7a0b\u5e8f\u4e2d, \u5982\u679c\u4e3b\u7ebf\u7a0b\u5df2\u7ecf\u9000\u51fa\u4e86, \u5c31\u65e0\u6cd5\u8bbf\u95ee\u8fd9\u4e2a\u7b26\u53f7\u94fe\u63a5.</p> <p>\u5728Linux2.0\u53ca\u5176\u4e4b\u524d,/proc/pid/exe\u662f\u6307\u5411\u5f53\u524d\u8fdb\u7a0b\u6267\u884c\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6.\u91c7\u7528readlink()\u8bfb\u53d6\u8fd4\u56de\u5982\u4e0b\u7684\u7ed3\u679c: [device]:inode</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#122-fd","title":"1.2.2 fd","text":"<p><code>/proc/pid/fd</code> \u8fd9\u662f\u4e00\u4e2a\u5b50\u76ee\u5f55, \u5305\u542b\u4e86\u5f53\u524d\u8fdb\u7a0b\u6253\u5f00\u7684\u6bcf\u4e00\u4e2a\u6587\u4ef6. \u6bcf\u4e00\u4e2a\u6761\u76ee\u90fd\u662f\u4e00\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26, \u662f\u4e00\u4e2a\u7b26\u53f7\u94fe\u63a5, \u6307\u5411\u7684\u662f\u5b9e\u9645\u6253\u5f00\u7684\u5730\u5740.0 \u8868\u793a\u6807\u51c6\u8f93\u5165, 1 \u8868\u793a\u6807\u51c6\u8f93\u51fa, 2 \u8868\u793a\u6807\u51c6\u9519\u8bef. \u5728\u591a\u7ebf\u7a0b\u7a0b\u5e8f\u4e2d, \u5982\u679c\u4e3b\u7a0b\u5e8f\u9000\u51fa\u4e86, \u90a3\u4e48\u8fd9\u4e2a\u6587\u4ef6\u5939\u5c06\u4e0d\u80fd\u88ab\u8bbf\u95ee.</p> <p>\u7a0b\u5e8f\u80fd\u591f\u4f7f\u7528\u6587\u4ef6\u540d\u4f5c\u4e3a\u547d\u4ee4\u884c\u53c2\u6570,\u5982\u679c\u6ca1\u6709\u63d0\u4f9b\u8fd9\u6837\u7684\u53c2\u6570,\u5c31\u4e0d\u4f1a\u4ece\u6807\u51c6\u8f93\u5165\u4e2d\u8bfb\u53d6\u4fe1\u606f\u4e5f\u4e0d\u4f1a\u5c06\u6807\u51c6\u8f93\u51fa\u53d1\u9001\u5230\u6587\u4ef6\u4e2d.\u4f46\u662f\u5373\u4f7f\u6ca1\u6709\u63d0\u4f9b\u4e0e\u6587\u4ef6\u76f8\u5173\u7684\u547d\u4ee4\u884c\u53c2\u6570,\u6211\u4eec\u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528\u6807\u51c6\u7684\u8f93\u51fa\u8f93\u5165.\u4f8b\u5982\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7-i\u548c-o\u5206\u522b\u6307\u5411\u8f93\u5165\u548c\u8f93\u51fa\u6587\u4ef6.\u5982\u4e0b\u6240\u662f:  </p> <pre><code>$ foobar -i /proc/self/fd/0 -o /proc/self/fd/1 ...  </code></pre> <p>\u5728\u67d0\u4e9bUNIX\u6216\u8005\u7c7b\u4f3cUNIX\u7684\u7cfb\u7edf\u4e2d,/proc/self/fd/N\u4e0e/dev/fd/N\u5927\u81f4\u76f8\u540c.\u5927\u90e8\u5206\u7cfb\u7edf\u63d0\u4f9b/dev/stdin,/dev/stdout,/dev/stderr\u7684\u7b26\u53f7\u94fe\u63a5,\u5206\u522b\u53ea\u60f3\u7684\u662f/proc/self/fd\u4e2d\u76840,1,2.\u6240\u4ee5\u4e0a\u8ff0\u7684\u547d\u4ee4\u4e5f\u53ef\u4ee5\u5199\u4e3a:  </p> <pre><code>$ foobar -i /dev/stdin -o /dev/stdout ...  </code></pre>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#123-fdinfo","title":"1.2.3 fdinfo","text":"<p><code>/proc/pid/fdinfo/</code> \u8fd9\u662f\u4e00\u4e2a\u5b50\u76ee\u5f55, \u5305\u62ec\u4e86\u5f53\u524d\u8fdb\u7a0b\u6253\u5f00\u7684\u6240\u6709\u7684\u6587\u4ef6\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26. \u53ef\u4ee5\u8bfb\u53d6\u6bcf\u4e00\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\u7684\u5185\u5bb9\u4e00\u83b7\u53d6 i \u4fe1\u606f. \u5982\u4e0b\u6240\u793a:  </p> <pre><code>$ cat  /proc/5040/fdinfo/99  \npos:    21718  \nflags:  0100000  \nmnt_id: 27  </code></pre> <ul> <li>pos \u662f\u5341\u8fdb\u5236,\u663e\u793a\u5f53\u524d\u6587\u4ef6\u7684\u504f\u79fb\u91cf</li> <li>flag\u662f\u516b\u8fdb\u5236,\u663e\u793a\u6587\u4ef6\u7684\u8bbf\u95ee\u6a21\u5f0f\u548c\u6587\u4ef6\u72b6\u6001\u6807\u5fd7.     \u8be5\u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\u53ea\u6709\u8fdb\u7a0b\u7684\u6240\u6709\u8005\u624d\u53ef\u4ee5\u8bfb.</li> </ul>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#124-limits","title":"1.2.4 limits","text":"<p><code>/proc/pid/limits</code> \u8be5\u6587\u4ef6\u663e\u793a\u4e86\u6bcf\u4e2a\u8fdb\u7a0b\u7684\u8f6f\u4e2d\u65ad, \u786c\u4e2d\u65ad\u548c\u5ea6\u91cf\u5355\u4f4d. \u5728 Linux2.6.35 \u4e4b\u524d, \u8fd9\u4e2a\u6587\u4ef6\u4ec5\u4ec5\u53ea\u80fd\u88ab\u8fdb\u7a0b\u5b9e\u9645\u7684 UID \u8bbf\u95ee. \u5728 26.36 \u4e4b\u540e, \u8be5\u6587\u4ef6\u53ef\u4ee5\u88ab\u7cfb\u7edf\u4e2d\u6240\u6709\u7684\u7528\u6237\u8bfb\u53d6.</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#125-maps","title":"1.2.5 maps","text":"<p><code>/proc/pid/maps</code> \u5305\u542b\u4e86\u5f53\u524d\u8fdb\u7a0b\u6620\u5c04\u7684\u5185\u5b58\u533a\u57df\u4ee5\u53ca\u4ed6\u4eec\u7684\u8bbf\u95ee\u6743\u9650. \u6587\u4ef6\u683c\u5f0f\u5982\u4e0b:  </p> <pre><code>address           perms offset  dev   inode   pathname  08048000-08056000 r-xp 00000000 03:0c 64593   /usr/sbin/gpm  08056000-08058000 rw-p 0000d000 03:0c 64593   /usr/sbin/gpm  08058000-0805b000 rwxp 00000000 00:00 0  40000000-40013000 r-xp 00000000 03:0c 4165    /lib/ld-2.2.4.so  40013000-40015000 rw-p 00012000 03:0c 4165    /lib/ld-2.2.4.so  \n4001f000-40135000 r-xp 00000000 03:0c 45494   /lib/libc-2.2.4.so  40135000-4013e000 rw-p 00115000 03:0c 45494   /lib/libc-2.2.4.so  \n4013e000-40142000 rw-p 00000000 00:00 0  \nbffff000-c0000000 rwxp 00000000 00:00 0  </code></pre> <ul> <li>address,\u8868\u793a\u8fdb\u7a0b\u5360\u7528\u7684\u5730\u5740.</li> <li>perms, \u8868\u793a\u4e00\u7cfb\u5217\u6743\u9650.r=read,w=write,x=execute,s=shared,p=private(copy on write)</li> <li>offset, \u8868\u793a\u6587\u4ef6\u504f\u79fb\u91cf</li> <li>dev:\u8868\u793a\u8bbe\u5907 (\u4e3b\u8981\u8bbe\u5907,\u6b21\u8981\u8bbe\u5907)</li> <li>inode: \u8868\u793a\u8bbe\u5907\u4e0a\u9762\u7684inode\u7f16\u53f7.\u5982\u679c\u662f0,\u8868\u793a\u6ca1\u6709\u7d22\u5f15\u8282\u70b9\u4e0e\u5185\u5b58\u533a\u57df\u5173\u8054,\u5c31\u5982\u540cBSS\u6bb5\u4e00\u6837.</li> <li>pathname,\u5728Linux2.0\u4e4b\u524d,\u6ca1\u6709pathname\u5b57\u6bb5.</li> </ul>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#126-mem","title":"1.2.6 mem","text":"<p><code>/proc/pid/mem</code> \u8be5\u6587\u4ef6\u53ef\u4ee5\u901a\u8fc7 open, read, seek \u8bbf\u95ee\u8fdb\u7a0b\u7684\u5185\u5b58\u9875.</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#127-mountinfo","title":"1.2.7 mountinfo","text":"<p><code>/proc/pid/mountinfo</code> \u8fd9\u4e2a\u6587\u4ef6\u4e3b\u8981\u662f\u5305\u542b\u4e86\u6302\u8f7d\u4fe1\u606f. \u6587\u4ef6\u5185\u5bb9\u7ed3\u6784\u5982\u4e0b:  </p> <pre><code>36 35 98:0 /mnt1 /mnt2 rw,noatime master:1 - ext3 /dev/root rw,errors=continue  (1)(2)(3)(4)      (5)      (6)       (7)   (8) (9)     (10)            (11)  </code></pre> <ul> <li>mount ID,\u6302\u8f7d\u70b9\u7684\u552f\u4e00\u6807\u8bc6</li> <li>parent ID,\u5f53\u524d\u6302\u8f7d\u70b9\u7684\u7236\u6302\u8f7d\u70b9\u7684ID</li> <li>major:minor, files\u7684st_dev\u7684\u503c</li> <li>root: \u6587\u4ef6\u7cfb\u7edf\u7684\u6839\u6302\u8f7d\u70b9</li> <li>mount point: \u76f8\u5bf9\u4e8e\u8fdb\u7a0b\u6839\u76ee\u5f55\u7684\u6302\u8f7d\u70b9</li> <li>mount options: \u9884\u6302\u8f7d\u9009\u9879</li> <li>options fields:\u00a0<code>tag:[value]</code>\u7c7b\u578b\u7684\u5b57\u6bb5</li> <li>sparator: options fields\u7ed3\u675f\u6807\u5fd7</li> <li>file systemtype: \u6587\u4ef6\u7cfb\u7edf\u7684\u540d\u79f0,\u4ee5<code>type[.subtype]</code>\u7684\u65b9\u5f0f\u547d\u540d</li> <li>mount source: \u6587\u4ef6\u7279\u5b9a\u4fe1\u606f</li> <li>super options: \u8d85\u7ea7\u5757\u9009\u9879</li> </ul>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#128-mounts","title":"1.2.8 mounts","text":"<p><code>/proc/pid/mounts</code> \u5217\u51fa\u5728\u5f53\u524d\u8fdb\u7a0b\u6302\u8f7d\u7a7a\u95f4\u4e0b\u6240\u6709\u7684\u5df2\u7ecf\u6302\u8f7d\u8fc7\u7684\u6587\u4ef6. \u6587\u4ef6\u7684\u683c\u5f0f\u901a\u8fc7\u00a0fstab\u00a0\u67e5\u770b. \u5728 kernel 2.6.15 \u4e4b\u540e, \u8fd9\u4e2a\u6587\u4ef6\u662f\u8bba\u8be2\u5f0f\u7684. \u5728\u8bfb\u53d6\u6587\u4ef6\u4e4b\u540e, \u8fd9\u4e2a\u4e8b\u4ef6\u4f1a\u5bfc\u81f4 select \u6807\u8bb0\u8fd9\u4e2a\u6587\u4ef6\u662f\u53ef\u8bfb\u7684, \u5e76\u4e14 pool () \u548c epoll_wait () \u4f1a\u5c06\u6b64\u6587\u4ef6\u6807\u8bb0\u4e3a\u9047\u5230\u4e86\u9519\u8bef.</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#129-mountstas","title":"1.2.9 mountstas","text":"<p><code>/proc/pid/mountstas</code> \u8be5\u6587\u4ef6\u4f1a\u5217\u4e3e\u5728\u5f53\u524d\u8fdb\u7a0b\u6302\u8f7d\u7a7a\u95f4\u4e0b\u7684\u6240\u6709\u6302\u8f7d\u70b9\u7684\u8be6\u7ec6\u4fe1\u606f, \u5305\u62ec\u7edf\u8ba1\u4fe1\u606f, \u914d\u7f6e\u4fe1\u606f. \u6587\u4ef6\u683c\u5f0f\u5982\u4e0b:  </p> <pre><code>device    /dev/sda7    mounted     on    /home with fstype ext3 [statistics]  (             1          )               ( 2 )              (3 )      (4)  </code></pre> <ol> <li>\u8f7d\u7684\u8bbe\u5907\u540d</li> <li>\u6302\u8f7d\u70b9</li> <li>\u6587\u4ef6\u7cfb\u7edf\u7c7b\u578b</li> <li>\u53ef\u9009\u7684\u7edf\u8ba1\u548c\u914d\u7f6e\u4fe1\u606f.\u57282.6.26\u4e4b\u540e,\u4ec5NFS\u6587\u4ef6\u7cfb\u7edf\u53ef\u4ee5\u5230\u5904\u6b64\u5b57\u6bb5\u4fe1\u606f</li> </ol>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#1210-ns","title":"1.2.10 ns","text":"<p><code>/proc/pid/ns/</code> \u8fd9\u662f\u4e00\u4e2a\u5b50\u76ee\u5f55. \u6bcf\u4e00\u4e2a\u5b50\u76ee\u5f55\u53ef\u4ee5\u901a\u8fc7\u00a0setns\u00a0\u64cd\u4f5c. \u5173\u4e8e\u66f4\u591a\u7684\u64cd\u4f5c, \u53c2\u89c1 clone</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#12101-ipc","title":"1.2.10.1 ipc","text":"<p><code>/proc/pid/ns/ipc</code> \u5c06\u6587\u4ef6\u6302\u8f7d\u5728\u5176\u4ed6\u5730\u65b9\u53ef\u4ee5\u4f7f pid \u6307\u5b9a\u7684\u8fdb\u7a0b\u7684 IPC \u547d\u540d\u7a7a\u95f4\u4fdd\u6301\u6d3b\u52a8\u72b6\u6001, \u5373\u4f7f\u5728\u5f53\u524d\u547d\u540d\u7a7a\u95f4\u7684\u6240\u6709\u7684\u8fdb\u7a0b\u5168\u90e8\u90fd\u622a\u6b62\u4e86. \u6253\u5f00\u6b21\u6587\u4ef6\u5c31\u4f1a\u8fd4\u56de\u6587\u4ef6\u53e5\u67c4. \u53ea\u8981\u6587\u4ef6\u4fdd\u6301\u6253\u5f00\u72b6\u6001, \u90a3\u4e48 IPC \u7684\u547d\u540d\u7a7a\u95f4\u5c31\u53ef\u4ee5\u4fdd\u6301\u6d3b\u52a8\u72b6\u6001. \u6587\u4ef6\u63cf\u8ff0\u7b26\u53ef\u4ee5\u901a\u8fc7\u00a0setns\u00a0\u4f20\u9012.</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#12102-net","title":"1.2.10.2 net","text":"<p><code>/proc/pid/ns/net</code> \u5c06\u6587\u4ef6\u6302\u8f7d\u5728\u5176\u4ed6\u5730\u65b9\u53ef\u4ee5\u4f7f pid \u6307\u5b9a\u7684\u8fdb\u7a0b\u7684\u7f51\u7edc\u547d\u540d\u7a7a\u95f4\u4fdd\u6301\u6d3b\u52a8\u72b6\u6001, \u5373\u4f7f\u5728\u5f53\u524d\u547d\u540d\u7a7a\u95f4\u7684\u6240\u6709\u7684\u8fdb\u7a0b\u5168\u90e8\u90fd\u622a\u6b62\u4e86. \u6253\u5f00\u6b21\u6587\u4ef6\u5c31\u4f1a\u8fd4\u56de\u6587\u4ef6\u53e5\u67c4. \u53ea\u8981\u6587\u4ef6\u4fdd\u6301\u6253\u5f00\u72b6\u6001, \u90a3\u4e48\u7f51\u7edc\u7684\u547d\u540d\u7a7a\u95f4\u5c31\u53ef\u4ee5\u4fdd\u6301\u6d3b\u52a8\u72b6\u6001. \u6587\u4ef6\u63cf\u8ff0\u7b26\u53ef\u4ee5\u901a\u8fc7\u00a0setns\u00a0\u4f20\u9012.</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#12103-uts","title":"1.2.10.3 uts","text":"<p><code>/proc/pid/ns/uts</code> \u5c06\u6587\u4ef6\u6302\u8f7d\u5728\u5176\u4ed6\u5730\u65b9\u53ef\u4ee5\u4f7f pid \u6307\u5b9a\u7684\u8fdb\u7a0b\u7684 UTS \u547d\u540d\u7a7a\u95f4\u4fdd\u6301\u6d3b\u52a8\u72b6\u6001, \u5373\u4f7f\u5728\u5f53\u524d\u547d\u540d\u7a7a\u95f4\u7684\u6240\u6709\u7684\u8fdb\u7a0b\u5168\u90e8\u90fd\u622a\u6b62\u4e86. \u6253\u5f00\u6b21\u6587\u4ef6\u5c31\u4f1a\u8fd4\u56de\u6587\u4ef6\u53e5\u67c4. \u53ea\u8981\u6587\u4ef6\u4fdd\u6301\u6253\u5f00\u72b6\u6001, \u90a3\u4e48 UTS \u547d\u540d\u7a7a\u95f4\u5c31\u53ef\u4ee5\u4fdd\u6301\u6d3b\u52a8\u72b6\u6001. \u6587\u4ef6\u63cf\u8ff0\u7b26\u53ef\u4ee5\u901a\u8fc7\u00a0setns\u00a0\u4f20\u9012</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#1211-numa_maps","title":"1.2.11 numa_maps","text":"<p><code>/proc/pid/numa_maps</code> \u53c2\u89c1\u00a0numa</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#1212-oom_adj","title":"1.2.12 oom_adj","text":"<p><code>/proc/pid/oom_adj</code> \u8fd9\u4e2a\u65b9\u6cd5\u7528\u4e8e\u51b3\u5b9a\u5728\u51fa\u73b0 OOM \u7684\u60c5\u51b5\u4e0b, \u54ea\u4e2a\u8fdb\u7a0b\u88ab\u6740\u6389. \u5185\u6838\u4f7f\u7528\u8be5\u503c\u5bf9\u8fdb\u7a0b\u7684 oom_score \u7684\u503c\u8fdb\u884c\u8bbe\u5b9a,oom_score \u7684\u6709\u6548\u53d6\u503c\u533a\u95f4\u662f-17 \u81f3 15.-17 \u5c06\u4f1a\u5b8c\u5168\u6740\u6b7b\u8fd9\u4e2a\u8fdb\u7a0b. \u6b63\u6570\u4f1a\u589e\u52a0\u8fdb\u7a0b\u5f53 oom \u65f6\u88ab\u6740\u6389\u7684\u53ef\u80fd\u6027, \u8d1f\u6570\u4f1a\u51cf\u5c0f\u8fdb\u7a0b\u88ab oom \u6740\u6389\u7684\u53ef\u80fd\u6027. \u8be5\u6587\u4ef6\u7684\u9ed8\u8ba4\u503c\u662f0.\u65b0\u8fdb\u7a0b\u4f1a\u7ee7\u627f\u5176\u7236\u8fdb\u7a0b\u7684oom_adj\u8bbe\u7f6e.\u53ea\u6709\u5177\u6709CAP_SYS_RESOURCE\u6743\u9650\u7684\u8fdb\u7a0b\u624d\u80fd\u591f\u66f4\u65b0\u6b64\u6587\u4ef6. \u5728Linux2.6.36,\u63a8\u8350\u4f7f\u7528/proc/[pid]/oom_score_adj.</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#1213-oom_score","title":"1.2.13 oom_score","text":"<p><code>/proc/pid/oom_score</code> \u8be5\u6587\u4ef6\u663e\u793a\u4e86\u5982\u679c\u5185\u6838\u51fa\u73b0 oom \u60c5\u51b5\u65f6\u51b3\u5b9a\u6740\u6b7b\u8be5\u8fdb\u7a0b\u65f6\u7684\u5206\u6570. \u5206\u6570\u8d8a\u9ad8\u610f\u5473\u7740\u8fdb\u7a0b\u8d8a\u5bb9\u6613\u88ab\u6740\u6389.</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#1214-oom_adj_score","title":"1.2.14 oom_adj_score","text":"<p><code>/proc/pid/oom_adj_score</code> \u8fd9\u4e2a\u6587\u4ef6\u7528\u4e8e\u8c03\u6574\u5728\u5185\u5b58\u4e0d\u8db3\u65f6\u5e94\u8be5\u6740\u6389\u54ea\u4e2a\u8fdb\u7a0b\u7684\u5206\u6570\u5224\u65ad.</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#1215-root","title":"1.2.15 root","text":"<p><code>/proc/pid/root</code> \u8be5\u503c\u53ef\u4ee5\u7528\u4e8e\u00a0chroot\u00a0\u9884\u5148\u8bbe\u5b9a\u8fdb\u7a0b\u7684\u6839\u6587\u4ef6\u7cfb\u7edf. \u8fd9\u4e2a\u6587\u4ef6\u6307\u5411\u5f53\u524d\u8fdb\u7a0b\u7684\u6839\u76ee\u5f55. \u4f5c\u4e1a\u7c7b\u4f3c\u4e8e\u524d\u9762\u8bf4\u8fc7\u7684 exe fd/* \u7b49\u7b49. \u5728\u591a\u7ebf\u7a0b\u7684\u7a0b\u5e8f\u4e2d,\u5982\u679c\u4e3b\u7ebf\u7a0b\u63a8\u51fa\u4e86\u6b64\u7b26\u53f7\u94fe\u63a5\u7684\u5185\u5bb9\u5c06\u65e0\u6cd5\u8bbf\u95ee.</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#1216-smaps","title":"1.2.16 smaps","text":"<p><code>/proc/pid/smaps</code> \u8fd9\u4e2a\u6587\u4ef6\u663e\u793a\u4e86\u6bcf\u4e2a\u8fdb\u7a0b\u6620\u5c04\u7684\u5185\u5b58\u6d88\u8017. \u6bcf\u4e00\u4e2a\u5185\u5b58\u6d88\u8017\u90fd\u6709\u5982\u4e0b\u7684\u8bbe\u7f6e:  </p> <pre><code>08048000-080bc000 r-xp 00000000 03:02 13130      /bin/bash  \nSize:               464 kB  \nRss:                424 kB  \nShared_Clean:       424 kB  \nShared_Dirty:         0 kB  \nPrivate_Clean:        0 kB  \nPrivate_Dirty:        0 kB  </code></pre> <p>\u7b2c\u4e00\u884c\u663e\u793a\u7684\u4fe1\u606f\u4e0e/proc/[pid]/maps\u4e2d\u7684\u6620\u5c04\u4fe1\u606f\u76f8\u540c.\u5269\u4e0b\u5206\u522b\u8868\u793a\u7684\u662f,\u6620\u5c04\u7684\u5927\u5c0f,RAM\u4e2d\u5f53\u524d\u9a7b\u7559\u7684\u6620\u5c04\u5927\u5c0f,\u6620\u5c04\u4e2d\u5e72\u51c0\u548c\u810f\u5171\u4eab\u9875\u7684\u5927\u5c0f\u4ee5\u53ca\u6620\u5c04\u4e2d\u5e72\u51c0\u548c\u810f\u5171\u4eab\u79c1\u6709\u9875\u6570. \u53ea\u6709\u5728\u542f\u7528\u4e86CONFIG_MMU\u5185\u6838\u914d\u7f6e\u9009\u9879\u65f6,\u6b64\u6587\u4ef6\u624d\u4f1a\u5b58\u5728.</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#1217-stat","title":"1.2.17 stat","text":"<p><code>/proc/pid/stat</code> \u5173\u4e8e\u8fdb\u7a0b\u7684\u72b6\u6001\u4fe1\u606f. \u4e3b\u8981\u662f\u7528\u4e8e ps \u5c55\u793a. \u6587\u4ef6\u4e2d\u7684\u6bcf\u4e00\u884c\u7684\u542b\u4e49\u5982\u4e0b:</p> <ol> <li>pid %d \u8fdb\u7a0bPID</li> <li>comm %s \u53ef\u6267\u884c\u6587\u4ef6\u7684\u6587\u4ef6\u540d</li> <li>state %c \u8fdb\u7a0b\u7684\u72b6\u6001,\u4f7f\u7528RSDZTW\u5176\u4e2d\u4e00\u4e2a\u503c\u8868\u793a.R\u8868\u793a\u6b63\u5728\u8fd0\u884c,S\u8868\u793a\u56e0\u4e3a\u4e2d\u65ad\u4f11\u7720,D\u8868\u793a\u8fdb\u7a0b\u5904\u4e8e\u4e0d\u53ef\u4e2d\u65ad\u7684\u7761\u7720, When a process will go to \u2018D\u2019 state?. Z\u8868\u793a\u50f5\u5c38\u8fdb\u7a0b,T\u8868\u793a\u6b63\u5728\u88ab\u8ffd\u8e2a\u6216\u8005\u505c\u6b62,W\u8868\u793a\u73b0\u5728\u6b63\u5728\u8fdb\u884c\u53f6\u4ea4\u6362.</li> <li>ppid %d \u7236\u8fdb\u7a0bPID</li> <li>grid %d \u8fdb\u7a0b\u7ec4ID</li> <li>session %d \u8fdb\u7a0b\u7684session id</li> <li>tty_nr %d \u8fdb\u7a0b\u7684\u63a7\u5236\u7ec8\u7aef</li> <li>tpgid %d \u8fdb\u7a0b\u63a7\u5236\u7ec8\u7aef\u7684\u524d\u53f0\u8fdb\u7a0bid</li> <li>minflt %n \u8fdb\u7a0b\u56e0\u4e3a\u4e0d\u9700\u8981\u4ece\u78c1\u76d8\u52a0\u8f7d\u5185\u5b58\u9875\u800c\u9020\u6210\u7684\u6b21\u8981\u6545\u969c\u6570</li> <li>cminflt %u \u8fdb\u7a0b\u7b49\u5f85\u5b50\u8fdb\u7a0b\u9020\u6210\u7684\u6b21\u8981\u6545\u969c\u6570</li> <li>majflt %lu \u8fdb\u7a0b\u9700\u8981\u4ece\u78c1\u76d8\u52a0\u8f7d\u5185\u5b58\u9875\u9020\u6210\u7684\u6545\u969c\u6570</li> <li>cmajflt %lu \u8fdb\u7a0b\u7b49\u5f85\u5b50\u8fdb\u7a0b\u9020\u6210\u7684\u6545\u969c\u6570</li> <li>utime %lu \u8fdb\u7a0b\u5728\u7528\u6237\u6a21\u5f0f\u4e0b\u88ab\u8c03\u5ea6\u7684\u65f6\u95f4</li> <li>stime %lu \u8fdb\u7a0b\u5728\u5185\u6838\u6a21\u5f0f\u4e0b\u88ab\u8c03\u5ea6\u7684\u65f6\u95f4</li> <li>cutime %ld \u8fdb\u7a0b\u5728\u7528\u6237\u6a21\u5f0f\u4e0b\u7b49\u5f85\u5b50\u8fdb\u7a0b\u7684\u65f6\u95f4</li> <li>cstime %ld \u8fdb\u7a0b\u5728\u5185\u6838\u6a21\u5f0f\u4e0b\u7b49\u5f85\u5b50\u8fdb\u7a0b\u7684\u65f6\u95f4</li> <li>nice %ld \u53c2\u89c1 setpriority \u4f4d\u4e8e19\u5230-20\u4e4b\u95f4.</li> <li>num_threads %ld \u5f53\u524d\u8fdb\u7a0b\u7684\u7ebf\u7a0b\u6570\u91cf</li> <li>vsize %lu \u4f7f\u7528\u7684\u865a\u62df\u5185\u5b58</li> <li>rss %ld resident set szie\u7684\u7f29\u5199,\u8868\u793a\u8fdb\u7a0b\u5728\u5b9e\u9645\u5185\u5b58\u4e2d\u7684\u9875\u6570,\u4e3b\u8981\u662f\u5305\u62ec\u4e86text,data,\u6808,\u4e0d\u5305\u62ec\u6ca1\u6709\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u6216\u8005\u5df2\u7ecf\u88ab\u6362\u51fa\u53bb\u7684\u5185\u5b58\u5927\u5c0f</li> <li>rsslim %lu \u8fdb\u7a0brss\u7684\u9650\u5236</li> </ol> <p>\u8fd8\u6709\u4e00\u4e9b\u4e0d\u5e38\u89c1\u7684\u5b57\u6bb5,\u5c31\u4e0d\u505a\u8bf4\u660e\u4e86</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#1218-statm","title":"1.2.18 statm","text":"<p><code>/proc/pid/statm</code> \u63d0\u4f9b\u5185\u5b58\u7684\u4f7f\u7528\u60c5\u51b5. \u683c\u5f0f\u5982\u4e0b\u6240\u793a:  </p> <pre><code>size       (1) total program size  (same as VmSize in /proc/[pid]/status)  \nresident   (2) resident set size  (same as VmRSS in /proc/[pid]/status)  \nshare      (3) shared pages (i.e., backed by a file)  \ntext       (4) text (code)  \nlib        (5) library (unused in Linux 2.6)  \ndata       (6) data + stack  \ndt         (7) dirty pages (unused in Linux 2.6)  </code></pre>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#1219-status","title":"1.2.19 status","text":"<p><code>/proc/pid/status</code> \u4ee5\u66f4\u52a0\u53ef\u8bfb\u7684\u5f62\u5f0f\u63d0\u4f9b\u4e0e <code>/proc/pid/stat</code> \u548c <code>/proc/pid/statm</code> \u4e00\u6837\u7684\u4fe1\u606f. \u4ee5\u4e0b\u662f\u793a\u4f8b.  </p> <pre><code>$ cat /proc/$$/status  \nName:   bash  \nState:  S (sleeping)  \nTgid:   3515  \nPid:    3515  \nPPid:   3452  \nTracerPid:      0  \nUid:    1000    1000    1000    1000  \nGid:    100     100     100     100  \nFDSize: 256  \nGroups: 16 33 100  \nVmPeak:     9136 kB  \nVmSize:     7896 kB  \nVmLck:         0 kB  \nVmHWM:      7572 kB  \nVmRSS:      6316 kB  \nVmData:     5224 kB  \nVmStk:        88 kB  \nVmExe:       572 kB  \nVmLib:      1708 kB  \nVmPTE:        20 kB  \nThreads:        1  \nSigQ:   0/3067  \nSigPnd: 0000000000000000  \nShdPnd: 0000000000000000  \nSigBlk: 0000000000010000  \nSigIgn: 0000000000384004  \nSigCgt: 000000004b813efb  \nCapInh: 0000000000000000  \nCapPrm: 0000000000000000  \nCapEff: 0000000000000000  \nCapBnd: ffffffffffffffff  \nCpus_allowed:   00000001  \nCpus_allowed_list:      0  \nMems_allowed:   1  \nMems_allowed_list:      0  \nvoluntary_ctxt_switches:        150  \nnonvoluntary_ctxt_switches:     545  </code></pre>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#1220-task","title":"1.2.20 task","text":"<p><code>/proc/pid/task</code> \u8be5\u76ee\u5f55\u5305\u542b\u7684\u662f\u8fdb\u7a0b\u4e2d\u7684\u6bcf\u4e00\u4e2a\u7ebf\u7a0b. \u6bcf\u4e00\u4e2a\u76ee\u5f55\u7684\u540d\u5b57\u662f\u4ee5\u7ebf\u7a0b ID \u547d\u540d\u7684 (tid). \u5728\u6bcf\u4e00\u4e2a tid \u4e0b\u9762\u7684\u76ee\u5f55\u7ed3\u6784\u4e0e <code>/proc/pid</code> \u4e0b\u9762\u7684\u76ee\u5f55\u7ed3\u6784\u76f8\u540c. \u5bf9\u4e8e\u6240\u6709\u7ebf\u7a0b\u5171\u4eab\u7684\u5c5e\u6027, <code>task/tid</code> \u5b50\u76ee\u5f55\u4e2d\u7684\u6bcf\u4e2a\u6587\u4ef6\u5185\u5bb9\u4e0e <code>/proc/pid</code> \u76ee\u5f55\u4e2d\u7684\u76f8\u5e94\u6587\u4ef6\u5185\u5bb9\u76f8\u540c. \u4f8b\u5982\u6240\u6709\u7ebf\u7a0b\u4e2d\u7684 <code>task/tid/cwd</code> \u6587\u4ef6\u548c\u7236\u76ee\u5f55\u4e2d\u7684 <code>/proc/pid/cwd</code> \u6587\u4ef6\u5185\u5bb9\u76f8\u540c, \u56e0\u4e3a\u6240\u6709\u7684\u7ebf\u7a0b\u5171\u4eab\u4e00\u4e2a\u5de5\u4f5c\u76ee\u5f55. \u5bf9\u4e8e\u6bcf\u4e2a\u7ebf\u7a0b\u7684\u4e0d\u540c\u5c5e\u6027, <code>task/tid</code> \u4e0b\u76f8\u5e94\u6587\u4ef6\u7684\u503c\u4e5f\u4e0d\u76f8\u540c.</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#13-cmdline","title":"1.3 cmdline","text":"<p><code>/proc/cmdline</code> \uff1a\u5728\u5f15\u5bfc\u65f6\u4f20\u9012\u7ed9\u5185\u6838\u7684\u53c2\u6570</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#14-cpuinfo","title":"1.4 cpuinfo","text":"<p><code>/proc/cpuinfo</code> \uff1acpu \u548c\u7cfb\u7edf\u7ed3\u6784\u7684\u4fe1\u606f. \u5e38\u89c1\u4fe1\u606f\u5305\u62ec CPU \u7684\u6570\u91cf\u4ee5\u53ca\u5e38\u89c1\u7684\u7cfb\u7edf\u5e38\u6570.</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#15-meminfo","title":"1.5 meminfo","text":"<p><code>/proc/meminfo</code> \u6b64\u6587\u4ef6\u5305\u542b\u4e86\u7cfb\u7edf\u5f53\u524d\u5185\u5b58\u7684\u4f7f\u7528\u4fe1\u606f. free \u7528\u6765\u62a5\u544a\u7cfb\u7edf\u4e2d\u53ef\u7528\u5185\u5b58\u548c\u5df2\u4f7f\u7528\u5185\u5b58 (\u7269\u7406\u5185\u5b58\u548c\u4ea4\u6362\u5185\u5b58) \u4ee5\u53ca\u5185\u6838\u4e2d\u5171\u4eab\u5185\u5b58\u548c\u7f13\u51b2\u533a\u7684\u5927\u5c0f. \u6bcf\u4e00\u884c\u90fd\u662f\u4ee5\u00a0<code>\u53c2\u6570\u540d:\u53c2\u6570\u503c</code>\u00a0\u663e\u793a. \u683c\u5f0f\u5982\u4e0b\u6240\u793a:  </p> <pre><code>$ cat /proc/$$/status  \nName:   bash  \nState:  S (sleeping)  \nTgid:   3515  \nPid:    3515  \nPPid:   3452  \nTracerPid:      0  \nUid:    1000    1000    1000    1000  \nGid:    100     100     100     100  \nFDSize: 256  \nGroups: 16 33 100  \n.......  </code></pre>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#16-modules","title":"1.6 modules","text":"<p><code>/proc/modules</code> \uff1a\u663e\u793a\u5f53\u524d\u52a0\u8f7d\u5230\u7cfb\u7edf\u4e2d\u6240\u6709\u7684\u6a21\u5757.</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#17-mounts","title":"1.7 mounts","text":"<p><code>/proc/mounts</code> \u5728\u5185\u6838 2.4.19 \u4e4b\u524d, \u8fd9\u4e2a\u6587\u4ef6\u4f1a\u5217\u4e3e\u5f53\u524d\u7cfb\u7edf\u4e2d\u6302\u8f7d\u7684\u6240\u6709\u7684\u8282\u70b9\u4fe1\u606f. \u5728 2.4.19 \u4e4b\u540e, \u4ec5\u4ec5\u53ea\u4f1a\u5217\u4e3e\u51fa\u5f53\u524d\u8fdb\u7a0b\u5728 mount \u7684\u547d\u540d\u7a7a\u95f4\u4e0b\u7684\u6302\u8f7d\u4fe1\u606f, \u5373/proc/self/mounts \u7684\u6302\u8f7d\u4fe1\u606f, \u53c2\u89c1\u00a0fstab</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#18-net","title":"1.8 net","text":"<p><code>/proc/net</code> \u6b64\u76ee\u5f55\u4e0b\u9762\u4e2a\u4e2d\u6587\u865a\u62df\u7684\u6587\u4ef6\u7cfb\u7edf, \u4e3b\u8981\u662f\u8bb0\u5f55\u4e86\u7cfb\u7edf\u4e2d\u5404\u79cd\u4e0e\u7f51\u7edc\u6709\u5173\u7684\u4fe1\u606f. \u8fd9\u4e2a\u6587\u4ef6\u90fd\u662f\u666e\u901a ASCII \u6587\u4ef6, \u90fd\u53ef\u4ee5\u901a\u8fc7 cat \u7684\u65b9\u5f0f\u8bfb\u53d6.</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#181-arp","title":"1.8.1 arp","text":"<p><code>/proc/net/arp</code> \u6b64\u6587\u4ef6\u4e3b\u8981\u662f\u5305\u542b\u4e86\u7528\u4e8e\u5730\u5740\u89e3\u6790\u7684\u5185\u6838 ARP \u8868\u7684\u4fe1\u606f. \u793a\u4f8b\u5982\u4e0b:  </p> <pre><code>IP address     HW type   Flags     HW address          Mask   Device  192.168.0.50   0x1       0x2       00:50:BF:25:68:F3   *      eth0  192.168.0.250  0x1       0xc       00:00:00:00:00:00   *      eth0  </code></pre> <ul> <li>IP address \u662f\u4e3b\u673a\u7684IPv4\u7684\u5730\u5740</li> <li>HW type \u662f\u6765\u81ea\u4e0eRFC826\u7684\u786c\u4ef6\u7c7b\u578b\u7684\u5730\u5740</li> <li>Flags \u662fARP \u7ed3\u6784\u4e2d\u7684\u5185\u90e8\u6807\u8bc6 \u53c2\u89c1 /usr/include/linux/if_arp.h</li> <li>HW address \u662f\u6570\u636e\u94fe\u8def\u5c42\u7684\u6620\u5c04\u5730\u5740</li> </ul>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#182-dev","title":"1.8.2 dev","text":"<p><code>/proc/net/dev</code> dev \u865a\u62df\u6587\u4ef6\u7cfb\u7edf\u663e\u793a\u7f51\u7edc\u72b6\u6001\u7684\u4fe1\u606f, \u5305\u62ec\u53d1\u9001\u548c\u63a5\u53d7\u7684\u6570\u636e\u5305\u7684\u6570\u91cf, \u9519\u8bef\u548c\u51b2\u7a81\u4ee5\u53ca\u5176\u4ed6\u7684\u7edf\u8ba1\u4fe1\u606f, \u8fd9\u4e9b\u4fe1\u606f\u4e5f\u53ef\u4ee5\u901a\u8fc7 ifconfig \u67e5\u770b. \u793a\u4f8b\u5982\u4e0b:  </p> <pre><code>Inter-|   Receive                                                |  Transmit  \nface |bytes    packets errs drop fifo frame compressed multicast|bytes    packets errs drop fifo colls carrier compressed  \nlo: 2776770   11307    0    0    0     0          0         0  2776770   11307    0    0    0     0       0          0  \neth0: 1215645    2751    0    0    0     0          0         0  1782404    4324    0    0    0   427       0          0  \nppp0: 1622270    5552    1    0    0     0          0         0   354130    5669    0    0    0     0       0          0  \ntap0:    7714      81    0    0    0     0          0         0     7714      81    0    0    0     0       0  </code></pre>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#183-raw","title":"1.8.3 raw","text":"<p><code>/proc/net/raw</code> \uff1a\u5b58\u50a8\u7684\u662f RAW \u5957\u63a5\u5b57\u8868\u7684\u4fe1\u606f</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#184-snmp","title":"1.8.4 snmp","text":"<p><code>/proc/net/snmp</code>\uff1a \u4fdd\u5b58\u7684\u662f SNMP \u4ee3\u7406\u7684 IP,ICMP \u4ee5\u53ca UDP \u7684\u7ba1\u7406\u4fe1\u606f</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#185-tcp","title":"1.8.5 tcp","text":"<p><code>/proc/net/tcp</code> \uff1a\u4fdd\u5b58\u7684\u662f\u7cfb\u7edf\u4e2d\u7684 TCP \u8868\u7684\u4fe1\u606f</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#186-udp","title":"1.8.6 udp","text":"<p><code>/proc/net/udp</code> \uff1a\u4fdd\u5b58\u7684\u662f\u7cfb\u7edf\u4e2d\u7684 UDP \u8868\u7684\u4fe1\u606f</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#187-unix","title":"1.8.7 unix","text":"<p><code>/proc/net/unix</code> \uff1a\u663e\u793a\u5f53\u524d\u7cfb\u7edf\u6240\u6709\u7684 UNIX domain socket \u4ee5\u53ca\u5b83\u4eec\u7684\u72b6\u6001\u4fe1\u606f. \u793a\u4f8b\u5982\u4e0b:  </p> <pre><code>Num RefCount Protocol Flags    Type St Path  0: 00000002 00000000 00000000 0001 03  1: 00000001 00000000 00010000 0001 01 /dev/printer  </code></pre> <ul> <li>Num \u662fkernle table slot number</li> <li>Refcount \u662f\u4f7f\u7528\u8fd9\u4e2a\u5957\u63a5\u5b57\u7684\u7528\u6237\u6570</li> <li>Protocol \u5f53\u524d\u6c38\u8fdc\u662f0</li> <li>Flags \u8868\u793a\u5f53\u524d\u5185\u90e8\u5185\u6838\u6807\u5fd7 \u7528\u4e8e\u8868\u793a\u5957\u63a5\u5b57\u72b6\u6001</li> <li>Type \u5f53\u524d\u6c38\u8fdc\u662f1</li> <li>St \u5957\u63a5\u5b57\u5185\u90e8\u72b6\u6001</li> <li>Path \u662f\u5957\u63a5\u5b57\u7ed1\u5b9a\u8def\u5f84</li> </ul>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#19-stat","title":"1.9 stat","text":"<p><code>/proc/stat</code> \uff1a\u5185\u6838/\u7cfb\u7edf\u7684\u4fe1\u606f</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#110-sys","title":"1.10 sys","text":"<p><code>/proc/sys</code> \uff1a\u8be5\u76ee\u5f55\u4e0b\u6709\u5f88\u591a\u7684\u76ee\u5f55\u548c\u5b50\u76ee\u5f55, \u5176\u4e2d\u4e3b\u8981\u662f\u8bb0\u5f55\u4e86\u4e0e\u5185\u6838\u53d8\u91cf\u76f8\u5173\u7684\u4fe1\u606f.</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#111-tid","title":"1.11 tid","text":"<p><code>/proc/tid</code>\uff1a\u00a0\u6bcf\u4e00\u4e2a<code>/proc/tid</code>\u76ee\u5f55\u4e2d\u8fd8\u5b58\u5728\u4e00\u7cfb\u5217\u76ee\u5f55\u548c\u6587\u4ef6\uff0c\u8fd9\u4e9b\u6587\u4ef6\u548c\u76ee\u5f55\u8bb0\u5f55\u7684\u90fd\u662f\u6709\u5173\u7ebf\u7a0btid\u5bf9\u5e94\u7684\u4fe1\u606f\uff0c\u8fd9\u4e9b\u4fe1\u606f\u4e0e\u5177\u4f53\u7684<code>/proc/pid/task/tid</code>\u7684\u76ee\u5f55\u76f8\u540c\uff0c\u6240\u8bb0\u5f55\u7684\u4fe1\u606f\u4e5f\u662f\u76f8\u540c\u7684\uff0e\u6211\u4eec\u904d\u5386/proc\u65f6\u5e76\u4e0d\u80fd\u770b\u5230<code>/proc/tid</code>\u7684\u4fe1\u606f\uff0c\u540c\u6837\u901a\u8fc7<code>ls -al /proc</code>\u7684\u65b9\u5f0f\u4e5f\u65e0\u6cd5\u770b\u5230\uff0e\u4f46\u662f\u867d\u7136\u65e0\u6cd5\u770b\u5230\uff0c\u4f46\u662f\u5374\u53ef\u4ee5\u901a\u8fc7<code>cd /proc/tid</code>\u8fdb\u5165\u5230\u8fd9\u4e2a\u7ebf\u7a0b\u7684\u5185\u90e8;\u4f20\u7edf\u7684\u901a\u8fc7<code>ps | grep tid</code>\u662f\u65e0\u6cd5\u770b\u5230\u4fe1\u606f\u7684\uff0c\u901a\u8fc7<code>ps -T -p pid</code>\u7684\u65b9\u5f0f\u5c31\u80fd\u591f\u770b\u5230tid\u7684\u4fe1\u606f\uff0e</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#112-self","title":"1.12 self","text":"<p><code>/proc/self</code> \uff1a\u8fd9\u662f\u4e00\u4e2a link, \u5f53\u8fdb\u7a0b\u8bbf\u95ee\u6b64\u94fe\u63a5\u65f6\uff0c\u5c31\u4f1a\u8bbf\u95ee\u8fd9\u4e2a\u8fdb\u7a0b\u672c\u8eab\u7684 <code>/proc/pid</code> \u76ee\u5f55\uff0c\u5982\u4e0b\u6240\u793a\uff1a  </p> <pre><code>ls -al  /proc/self  \nlrwxrwxrwx 1 root root 0 Jun  4 17:08 /proc/self -&gt; 32193  </code></pre>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#113-thread-self","title":"1.13 thread-self","text":"<p><code>/proc/thread-self</code> \uff1a\u8fd9\u662f\u4e00\u4e2a link\uff0c\u5f53\u8bbf\u95ee\u6b21\u94fe\u63a5\u65f6\uff0c\u5c31\u4f1a\u8bbf\u95ee\u8fdb\u7a0b\u7684 <code>/proc/self/task/tid</code> \u76ee\u5f55\u3002  </p> <pre><code>ls -al /proc/thread-self  \nlrwxrwxrwx 1 root root 0 Jun  4 17:08 /proc/thread-self -&gt; 32265/task/32265  </code></pre>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#114","title":"1.14 \u5176\u5b83","text":"<p><code>/proc/[a-z]*</code>, proc\u4e0b\u9762\u8fd8\u6709\u8bb8\u591a\u5176\u4ed6\u7684\u6587\u4ef6\uff0c\u8bb0\u5f55\u4e86\u7cfb\u7edf\u4e2d\u7684\u5404\u79cd\u4fe1\u606f\uff0cLinux /proc\u3001/dev Principle\u3000\u8fd9\u7bc7\u6587\u7ae0\u5bf9proc\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u8fdb\u884c\u4e86\u8be6\u7ec6\u7684\u8bf4\u660e\uff0e</p>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#2-usr","title":"2 usr","text":""},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#-usruserusrunix-software-resource-unix-fhs","title":"- \u5f88\u591a\u8bfb\u8005\u90fd\u4f1a\u8bef\u4f1a/usr\u4e3auser\u7684\u7f29\u5199\uff0c\u5176\u5b9eusr\u662fUnix Software Resource\u7684\u7f29\u5199\uff0c \u4e5f\u5c31\u662f\u201cUnix\u64cd\u4f5c\u7cfb\u7edf\u8f6f\u4ef6\u8d44\u6e90\u201d\u6240\u653e\u7f6e\u7684\u76ee\u5f55\uff0c\u800c\u4e0d\u662f\u4f7f\u7528\u8005\u7684\u6570\u636e\u5566\uff01\u8fd9\u70b9\u8981\u6ce8\u610f\u3002 FHS\u5efa\u8bae\u6240\u6709\u8f6f\u4ef6\u5f00\u53d1\u8005\uff0c\u5e94\u8be5\u5c06\u4ed6\u4eec\u7684\u6570\u636e\u5408\u7406\u7684\u5206\u522b\u653e\u7f6e\u5230\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u7684\u6b21\u76ee\u5f55\uff0c\u800c\u4e0d\u8981\u81ea\u884c\u521b\u5efa\u8be5\u8f6f\u4ef6\u81ea\u5df1\u72ec\u7acb\u7684\u76ee\u5f55\u3002","text":"<ul> <li>\u7b2c\u4e00\u90e8\u4efd\uff1aFHS \u8981\u6c42\u5fc5\u987b\u8981\u5b58\u5728\u7684\u76ee\u5f55 |\u76ee\u5f55|\u8bf4\u660e| |---|---| |/usr/bin/|\u6240\u6709\u4e00\u822c\u7528\u6237\u80fd\u591f\u4f7f\u7528\u7684\u6307\u4ee4\u90fd\u653e\u5728\u8fd9\u91cc\uff01\u76ee\u524d\u65b0\u7684 CentOS 7 \u5df2\u7ecf\u5c06\u5168\u90e8\u7684\u4f7f\u7528\u8005\u6307\u4ee4\u653e\u7f6e\u4e8e\u6b64\uff0c\u800c\u4f7f\u7528\u94fe\u63a5\u6587\u4ef6\u7684\u65b9\u5f0f\u5c06 /bin \u94fe\u63a5\u81f3\u6b64\uff01 \u4e5f\u5c31\u662f\u8bf4\uff0c /usr/bin \u4e0e /bin \u662f\u4e00\u6a21\u4e00\u6837\u4e86\uff01\u53e6\u5916\uff0cFHS \u8981\u6c42\u5728\u6b64\u76ee\u5f55\u4e0b\u4e0d\u5e94\u8be5\u6709\u5b50\u76ee\u5f55\uff01| |/usr/lib/|\u57fa\u672c\u4e0a\uff0c\u4e0e /lib \u529f\u80fd\u76f8\u540c\uff0c\u6240\u4ee5 /lib \u5c31\u662f\u94fe\u63a5\u5230\u6b64\u76ee\u5f55\u4e2d\u7684\uff01| |/usr/local/|\u7cfb\u7edf\u7ba1\u7406\u5458\u5728\u672c\u673a\u81ea\u884c\u5b89\u88c5\u81ea\u5df1\u4e0b\u8f7d\u7684\u8f6f\u4ef6\uff08\u975edistribution\u9ed8\u8ba4\u63d0\u4f9b\u8005\uff09\uff0c\u5efa\u8bae\u5b89\u88c5\u5230\u6b64\u76ee\u5f55\uff0c \u8fd9\u6837\u4f1a\u6bd4\u8f83\u4fbf\u4e8e\u7ba1\u7406\u3002\u4e3e\u4f8b\u6765\u8bf4\uff0c\u4f60\u7684distribution\u63d0\u4f9b\u7684\u8f6f\u4ef6\u8f83\u65e7\uff0c\u4f60\u60f3\u5b89\u88c5\u8f83\u65b0\u7684\u8f6f\u4ef6\u4f46\u53c8\u4e0d\u60f3\u79fb\u9664\u65e7\u7248\uff0c \u6b64\u65f6\u4f60\u53ef\u4ee5\u5c06\u65b0\u7248\u8f6f\u4ef6\u5b89\u88c5\u4e8e/usr/local/\u76ee\u5f55\u4e0b\uff0c\u53ef\u4e0e\u539f\u5148\u7684\u65e7\u7248\u8f6f\u4ef6\u6709\u5206\u522b\u5566\uff01 \u4f60\u53ef\u4ee5\u81ea\u884c\u5230/usr/local\u53bb\u770b\u770b\uff0c\u8be5\u76ee\u5f55\u4e0b\u4e5f\u662f\u5177\u6709bin, etc, include, lib...\u7684\u6b21\u76ee\u5f55\u5594\uff01| |/usr/sbin/|\u975e\u7cfb\u7edf\u6b63\u5e38\u8fd0\u884c\u6240\u9700\u8981\u7684\u7cfb\u7edf\u6307\u4ee4\u3002\u6700\u5e38\u89c1\u7684\u5c31\u662f\u67d0\u4e9b\u7f51\u7edc\u670d\u52a1\u5668\u8f6f\u4ef6\u7684\u670d\u52a1\u6307\u4ee4\uff08daemon\uff09\u5570\uff01\u4e0d\u8fc7\u57fa\u672c\u529f\u80fd\u4e0e /sbin \u4e5f\u5dee\u4e0d\u591a\uff0c \u56e0\u6b64\u76ee\u524d /sbin \u5c31\u662f\u94fe\u63a5\u5230\u6b64\u76ee\u5f55\u4e2d\u7684\u3002| |/usr/share/|\u4e3b\u8981\u653e\u7f6e\u53ea\u8bfb\u67b6\u6784\u7684\u6570\u636e\u6587\u4ef6\uff0c\u5f53\u7136\u4e5f\u5305\u62ec\u5171\u4eab\u6587\u4ef6\u3002\u5728\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u653e\u7f6e\u7684\u6570\u636e\u51e0\u4e4e\u662f\u4e0d\u5206\u786c\u4ef6\u67b6\u6784\u5747\u53ef\u8bfb\u53d6\u7684\u6570\u636e\uff0c \u56e0\u4e3a\u51e0\u4e4e\u90fd\u662f\u6587\u5b57\u6587\u4ef6\u561b\uff01\u5728\u6b64\u76ee\u5f55\u4e0b\u5e38\u89c1\u7684\u8fd8\u6709\u8fd9\u4e9b\u6b21\u76ee\u5f55\uff1a/usr/share/man\uff1a\u7ebf\u4e0a\u8bf4\u660e\u6587\u6863 /usr/share/doc\uff1a\u8f6f\u4ef6\u6742\u9879\u7684\u6587\u4ef6\u8bf4\u660e /usr/share/zoneinfo\uff1a\u4e0e\u65f6\u533a\u6709\u5173\u7684\u65f6\u533a\u6587\u4ef6|</li> <li>\u7b2c\u4e8c\u90e8\u4efd\uff1aFHS \u5efa\u8bae\u53ef\u4ee5\u5b58\u5728\u7684\u76ee\u5f55 |\u76ee\u5f55|\u8bf4\u660e| |---|---| |/usr/games/|\u4e0e\u6e38\u620f\u6bd4\u8f83\u76f8\u5173\u7684\u6570\u636e\u653e\u7f6e\u5904| |/usr/include/|c/c++\u7b49\u7a0b\u5e8f\u8bed\u8a00\u7684\u6587\u4ef6\u5f00\u59cb\uff08header\uff09\u4e0e\u5305\u542b\u6863\uff08include\uff09\u653e\u7f6e\u5904\uff0c\u5f53\u6211\u4eec\u4ee5tarball\u65b9\u5f0f \uff08<code>*.tar.gz</code> \u7684\u65b9\u5f0f\u5b89\u88c5\u8f6f\u4ef6\uff09\u5b89\u88c5\u67d0\u4e9b\u6570\u636e\u65f6\uff0c\u4f1a\u4f7f\u7528\u5230\u91cc\u5934\u7684\u8bb8\u591a\u5305\u542b\u6863\u5594\uff01| |/usr/libexec/|\u67d0\u4e9b\u4e0d\u88ab\u4e00\u822c\u4f7f\u7528\u8005\u60ef\u7528\u7684\u53ef\u6267\u884c\u6587\u4ef6\u6216\u811a\u672c\uff08script\uff09\u7b49\u7b49\uff0c\u90fd\u4f1a\u653e\u7f6e\u5728\u6b64\u76ee\u5f55\u4e2d\u4f8b\u5982\u5927\u90e8\u5206\u7684 X \u7a97\u53e3\u4e0b\u9762\u7684\u64cd\u4f5c\u6307\u4ee4\uff0c \u5f88\u591a\u90fd\u662f\u653e\u5728\u6b64\u76ee\u5f55\u4e0b\u7684\u3002| |<code>/usr/lib&lt;qual&gt;/</code>|\u4e0e <code>/lib&lt;qual&gt;/</code>\u529f\u80fd\u76f8\u540c\uff0c\u56e0\u6b64\u76ee\u524d <code>/lib&lt;qual&gt;</code> \u5c31\u662f\u94fe\u63a5\u5230\u6b64\u76ee\u5f55\u4e2d| |/usr/src/|\u4e00\u822c\u6e90\u4ee3\u7801\u5efa\u8bae\u653e\u7f6e\u5230\u8fd9\u91cc\uff0csrc\u6709source\u7684\u610f\u601d\u3002\u81f3\u4e8e\u6838\u5fc3\u6e90\u4ee3\u7801\u5219\u5efa\u8bae\u653e\u7f6e\u5230/usr/src/linux/\u76ee\u5f55\u4e0b\u3002|</li> </ul>"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#3-var","title":"3 var","text":""},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#-usrvar-varcachelog-file-lock-file-run-filemysql","title":"- \u5982\u679c/usr\u662f\u5b89\u88c5\u65f6\u4f1a\u5360\u7528\u8f83\u5927\u786c\u76d8\u5bb9\u91cf\u7684\u76ee\u5f55\uff0c\u90a3\u4e48/var\u5c31\u662f\u5728\u7cfb\u7edf\u8fd0\u884c\u540e\u624d\u4f1a\u6e10\u6e10\u5360\u7528\u786c\u76d8\u5bb9\u91cf\u7684\u76ee\u5f55\u3002 \u56e0\u4e3a/var\u76ee\u5f55\u4e3b\u8981\u9488\u5bf9\u5e38\u6001\u6027\u53d8\u52a8\u7684\u6587\u4ef6\uff0c\u5305\u62ec\u9ad8\u901f\u7f13\u5b58\uff08cache\uff09\u3001\u767b\u5f55\u6587\u4ef6\uff08log file\uff09\u4ee5\u53ca\u67d0\u4e9b\u8f6f\u4ef6\u8fd0\u884c\u6240\u4ea7\u751f\u7684\u6587\u4ef6\uff0c \u5305\u62ec\u7a0b\u5e8f\u6587\u4ef6\uff08lock file, run file\uff09\uff0c\u6216\u8005\u4f8b\u5982MySQL\u6570\u636e\u5e93\u7684\u6587\u4ef6\u7b49\u7b49\u3002","text":"\u76ee\u5f55 \u8bf4\u660e /var/cache/ \u5e94\u7528\u7a0b\u5e8f\u672c\u8eab\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u4f1a\u4ea7\u751f\u7684\u4e00\u4e9b\u6682\u5b58\u76d8\uff1b /var/lib/ \u7a0b\u5e8f\u672c\u8eab\u6267\u884c\u7684\u8fc7\u7a0b\u4e2d\uff0c\u9700\u8981\u4f7f\u7528\u5230\u7684\u6570\u636e\u6587\u4ef6\u653e\u7f6e\u7684\u76ee\u5f55\u3002\u5728\u6b64\u76ee\u5f55\u4e0b\u5404\u81ea\u7684\u8f6f\u4ef6\u5e94\u8be5\u8981\u6709\u5404\u81ea\u7684\u76ee\u5f55\u3002 \u4e3e\u4f8b\u6765\u8bf4\uff0cMySQL\u7684\u6570\u636e\u5e93\u653e\u7f6e\u5230/var/lib/mysql/\u800crpm\u7684\u6570\u636e\u5e93\u5219\u653e\u5230/var/lib/rpm\u53bb\uff01 /var/lock/ \u67d0\u4e9b\u8bbe\u5907\u6216\u8005\u662f\u6587\u4ef6\u8d44\u6e90\u4e00\u6b21\u53ea\u80fd\u88ab\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u6240\u4f7f\u7528\uff0c\u5982\u679c\u540c\u65f6\u6709\u4e24\u4e2a\u7a0b\u5e8f\u4f7f\u7528\u8be5\u8bbe\u5907\u65f6\uff0c \u5c31\u53ef\u80fd\u4ea7\u751f\u4e00\u4e9b\u9519\u8bef\u7684\u72b6\u51b5\uff0c\u56e0\u6b64\u5c31\u5f97\u8981\u5c06\u8be5\u8bbe\u5907\u4e0a\u9501\uff08lock\uff09\uff0c\u4ee5\u786e\u4fdd\u8be5\u8bbe\u5907\u53ea\u4f1a\u7ed9\u5355\u4e00\u8f6f\u4ef6\u6240\u4f7f\u7528\u3002 \u4e3e\u4f8b\u6765\u8bf4\uff0c\u70e7\u5f55\u673a\u6b63\u5728\u70e7\u5f55\u4e00\u5757\u5149\u76d8\uff0c\u4f60\u60f3\u4e00\u4e0b\uff0c\u4f1a\u4e0d\u4f1a\u6709\u4e24\u4e2a\u4eba\u540c\u65f6\u5728\u4f7f\u7528\u4e00\u4e2a\u70e7\u5f55\u673a\u70e7\u7247\uff1f \u5982\u679c\u4e24\u4e2a\u4eba\u540c\u65f6\u70e7\u5f55\uff0c\u90a3\u7247\u5b50\u5199\u5165\u7684\u662f\u8c01\u7684\u6570\u636e\uff1f\u6240\u4ee5\u5f53\u7b2c\u4e00\u4e2a\u4eba\u5728\u70e7\u5f55\u65f6\u8be5\u70e7\u5f55\u673a\u5c31\u4f1a\u88ab\u4e0a\u9501\uff0c \u7b2c\u4e8c\u4e2a\u4eba\u5c31\u5f97\u8981\u8be5\u8bbe\u5907\u88ab\u89e3\u9664\u9501\u5b9a\uff08\u5c31\u662f\u524d\u4e00\u4e2a\u4eba\u7528\u5b8c\u4e86\uff09\u624d\u80fd\u591f\u7ee7\u7eed\u4f7f\u7528\u5570\u3002\u76ee\u524d\u6b64\u76ee\u5f55\u4e5f\u5df2\u7ecf\u632a\u5230 /run/lock \u4e2d\uff01 /var/log/ \u91cd\u8981\u5230\u4e0d\u884c\uff01\u8fd9\u662f\u767b\u5f55\u6587\u4ef6\u653e\u7f6e\u7684\u76ee\u5f55\uff01\u91cc\u9762\u6bd4\u8f83\u91cd\u8981\u7684\u6587\u4ef6\u5982/var/log/messages, /var/log/wtmp\uff08\u8bb0\u5f55\u767b\u9646\u8005\u7684\u4fe1\u606f\uff09\u7b49\u3002 /var/mail/ \u653e\u7f6e\u4e2a\u4eba\u7535\u5b50\u90ae\u4ef6\u4fe1\u7bb1\u7684\u76ee\u5f55\uff0c\u4e0d\u8fc7\u8fd9\u4e2a\u76ee\u5f55\u4e5f\u88ab\u653e\u7f6e\u5230/var/spool/mail/\u76ee\u5f55\u4e2d\uff01 \u901a\u5e38\u8fd9\u4e24\u4e2a\u76ee\u5f55\u662f\u4e92\u4e3a\u94fe\u63a5\u6587\u4ef6\u5566\uff01 /var/run/ \u67d0\u4e9b\u7a0b\u5e8f\u6216\u8005\u662f\u670d\u52a1\u542f\u52a8\u540e\uff0c\u4f1a\u5c06\u4ed6\u4eec\u7684PID\u653e\u7f6e\u5728\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u5594\uff01\u81f3\u4e8ePID\u7684\u610f\u4e49\u6211\u4eec\u4f1a\u5728\u540e\u7eed\u7ae0\u8282\u63d0\u5230\u7684\u3002 \u4e0e /run \u76f8\u540c\uff0c\u8fd9\u4e2a\u76ee\u5f55\u94fe\u63a5\u5230 /run \u53bb\u4e86\uff01 /var/spool/ \u8fd9\u4e2a\u76ee\u5f55\u901a\u5e38\u653e\u7f6e\u4e00\u4e9b\u4f2b\u5217\u6570\u636e\uff0c\u6240\u8c13\u7684\u201c\u4f2b\u5217\u201d\u5c31\u662f\u6392\u961f\u7b49\u5f85\u5176\u4ed6\u7a0b\u5e8f\u4f7f\u7528\u7684\u6570\u636e\u5566\uff01 \u8fd9\u4e9b\u6570\u636e\u88ab\u4f7f\u7528\u540e\u901a\u5e38\u90fd\u4f1a\u88ab\u5220\u9664\u3002\u4e3e\u4f8b\u6765\u8bf4\uff0c\u7cfb\u7edf\u6536\u5230\u65b0\u4fe1\u4f1a\u653e\u7f6e\u5230/var/spool/mail/\u4e2d\uff0c \u4f46\u4f7f\u7528\u8005\u6536\u4e0b\u8be5\u4fe1\u4ef6\u540e\u8be5\u5c01\u4fe1\u539f\u5219\u4e0a\u5c31\u4f1a\u88ab\u5220\u9664\u3002\u4fe1\u4ef6\u5982\u679c\u6682\u65f6\u5bc4\u4e0d\u51fa\u53bb\u4f1a\u88ab\u653e\u5230/var/spool/mqueue/\u4e2d\uff0c \u7b49\u5230\u88ab\u9001\u51fa\u540e\u5c31\u88ab\u5220\u9664\u3002\u5982\u679c\u662f\u5de5\u4f5c\u8c03\u5ea6\u6570\u636e\uff08crontab\uff09\uff0c\u5c31\u4f1a\u88ab\u653e\u7f6e\u5230/var/spool/cron/\u76ee\u5f55\u4e2d\uff01"},{"location":"Documents/A-Linux/Linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#4","title":"4 \u94fe\u63a5\u76ee\u5f55","text":"<ul> <li><code>/bin --&gt; /usr/bin</code></li> <li><code>/sbin --&gt; /usr/sbin</code></li> <li><code>/lib --&gt; /usr/lib</code></li> <li><code>/lib64 --&gt; /usr/lib64</code></li> <li><code>/var/lock --&gt; /run/lock</code></li> <li><code>/var/run --&gt; /run</code></li> </ul>"},{"location":"Documents/A-Linux/Linux%E8%B5%84%E6%BA%90/","title":"Linux \u8d44\u6e90","text":"<ul> <li>\u5185\u6838\u6587\u6863 <ul> <li>\u6587\u4ef6\u5b50\u7cfb\u7edf\u7cfb\u7edf</li> </ul> </li> <li>wiki-\u6587\u4ef6\u7cfb\u7edf<ul> <li>ext4</li> <li>xfs</li> </ul> </li> </ul>"},{"location":"Documents/A-Linux/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/","title":"\u6b63\u5219\u8868\u8fbe\u5f0f","text":"<p>\u6587\u53c2\u8003\u6863</p>"},{"location":"Documents/A-Linux/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/#1","title":"1 \u91cf\u8bcd","text":"\u5b57\u7b26 \u5339\u914d\u89c4\u5219 \u7b49\u4ef7 <code>.</code> \u5339\u914d\u4efb\u4e00\u4e2a\u5b57\u7b26 ? \u5339\u914d0-1\u6b21 {0-1} <code>*</code> \u5339\u914d0\u6b21\u4ee5\u4e0a {0,} <code>+</code> \u5339\u914d1\u6b21\u4ee5\u4e0a {1,} {n} \u5339\u914dn\u6b21 {n,} \u5339\u914d\u81f3\u5c11n\u6b21 {n,m} \u5339\u914dn-m\u6b21"},{"location":"Documents/A-Linux/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/#2","title":"2 ^\u548c$\u9996\u5c3e\u63a7\u5236\u7b26\uff0c<code>[^]</code> \u5426\u5b9a","text":"<ul> <li><code>^</code> \u6307\u5b9a\u5f00\u5934</li> <li><code>$</code> \u6307\u5b9a\u7ed3\u5c3e</li> <li><code>[^]</code>\u4e0e<code>[]</code>\u76f8\u53cd\uff0c\u8868\u793a\u9664\u4e86\u5728<code>[]</code>\u5185\u7684\u90fd\u53ef\u4ee5</li> </ul>"},{"location":"Documents/A-Linux/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/#3","title":"3 \u96c6\u5408\u548c\u8303\u56f4","text":"<p>\u7531<code>[]</code>\u5305\u88f9\u7684\u5b57\u7b26\u96c6\uff0c\u8868\u793a\u53ef\u4ee5\u5339\u914d\u5176\u4e2d\u4efb\u610f\u5b57\u7b26</p> <pre><code>- `a[bcd]e`:\u8868\u793a\u53ef\u4ee5\u5339\u914dabe\u3001ace\u3001ade\n- `a[b-d]e`:\u548c\u4e0a\u9762\u4e00\u81f4\n- `a[bcd]{2}e`:\u5339\u914d\u4ee5a\u5f00\u5934\u3001e\u7ed3\u5c3e\uff0c\u4e2d\u95f4\u7531bcd\u5176\u4e2d2\u4e2a\u5b57\u7b26\u7ec4\u5408\uff0c\u5b57\u7b26\u53ef\u4ee5\u76f8\u540c\uff0c\u5982\u5339\u914dabbe\u3001adce\n</code></pre>"},{"location":"Documents/A-Linux/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/#4","title":"4 () \u7ec4","text":"<p>\u7531 () \u5305\u88f9\u7684\u5b57\u7b26\u662f\u4e00\u4e2a\u6574\u4f53\uff0c\u5982 <code>(abc)12</code>, \u4f1a\u5339\u914d <code>abc12</code>, \u800c\u4e0d\u4f1a\u5339\u914d <code>bc12</code></p> <pre><code>\u7ec4\u8fd8\u80fd\u7ec6\u5206\u4e3a\u6355\u83b7\u7ec4\u548c\u975e\u6355\u83b7\u7ec4,\u8bed\u6cd5\u533a\u522b\u5c31\u662f\u975e\u6355\u83b7\u7ec4\u9700\u8981\u5728\u7ec4\u5de6\u62ec\u53f7\u540e\u52a0\u4e0a`?:`,\u529f\u80fd\u4e0a\u7684\u4e0d\u540c\u662f\u6355\u83b7\u7ec4\u53ef\u4ee5\u4f7f\u7528\\1,\\2,...,\\n\u6765\u4f7f\u7528\u6355\u83b7\u7ec4\u6355\u83b7\u7684\u5185\u5bb9,\u800c\u975e\u6355\u83b7\u7ec4\u4e0d\u80fd\n- \u6355\u83b7\u7ec4:`(\u5b57\u7b26)`\n- \u975e\u6355\u83b7\u7ec4:`(?:\u5b57\u7b26)`\n</code></pre> <pre><code>title: \u7ec4\u53ef\u4ee5\u7ed3\u5408\u91cf\u8bcd\u4e00\u8d77\u4f7f\u7528\n- `abcd(efg)`,\u53ea\u4f1a\u5339\u914dabcdefg\n- `abcd(efg)?`,\u4f1a\u5339\u914dabcd\u6216\u8005abcdefg\n- `&lt;(h1)&gt;[a-z]*&lt;/\\1&gt;`,\u4f1a\u5339\u914d`&lt;h1&gt;title&lt;/h1&gt;`\n</code></pre> <pre><code>title: \u6355\u83b7\u7ec4\u7684\u4f7f\u7528\n- `abcd(efg)\\1`,\u4f1a\u5339\u914dabcdefgefg,`\\1`\u8868\u793a\u7b2c\u4e00\u4e2a\u6355\u83b7\u7ec4,\u4e5f\u5c31\u662fefg\n- `(red)=(green)=\\2\\1`,\u5339\u914dred=green=greenred\n</code></pre>"},{"location":"Documents/A-Linux/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/#5","title":"5 |\u6216","text":"<p><code>|</code> \u5c31\u662f\u6216\u8005\u7684\u610f\u601d\uff0c\u5982 <code>(a|b)12</code>, \u5373\u53ef\u4ee5\u5339\u914d <code>a12</code>, \u4e5f\u53ef\u4ee5\u5339\u914d <code>b12</code></p>"},{"location":"Documents/A-Linux/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/#6","title":"6 \u8f6c\u4e49\u5e8f\u5217","text":"\u7b80\u5199 \u63cf\u8ff0 \u7b49\u4ef7 . \u9664\u6362\u884c\u7b26\u5916\u7684\u6240\u6709\u5b57\u7b26 <code>[^\\n]</code> \\w \u5339\u914d\u6240\u6709\u5b57\u6bcd\u6570\u5b57 <code>[a-zA-Z0-9_]</code> \\W \u5339\u914d\u6240\u6709\u975e\u5b57\u6bcd\u6570\u5b57\uff0c\u5373\u7b26\u53f7 <code>[^\\w]</code> \\d \u5339\u914d\u6570\u5b57 <code>[0-9]</code> \\D \u5339\u914d\u975e\u6570\u5b57 <code>[^\\d]</code> \\s \u5339\u914d\u6240\u6709\u7a7a\u683c\u5b57\u7b26 <code>[\\t\\n\\f\\r\\p{Z}]</code> \\S \u5339\u914d\u6240\u6709\u975e\u7a7a\u683c\u5b57\u7b26 <code>[^\\s]</code> \\f \u5339\u914d\u4e00\u4e2a\u6362\u9875\u7b26 <code>[form feed]</code> \\n \u5339\u914d\u4e00\u4e2a\u6362\u884c\u7b26 <code>[newline]</code> \\r \u5339\u914d\u4e00\u4e2a\u56de\u8f66\u7b26 <code>[return]</code> \\t \u5339\u914d\u4e00\u4e2a\u5236\u8868\u7b26 <code>[tab]</code> \\v \u5339\u914d\u4e00\u4e2a\u5782\u76f4\u5236\u8868\u7b26 \\p \u5339\u914d <code>CR/LF</code>, \u7528\u6765\u5339\u914d DOS \u884c\u7ec8\u6b62\u7b26 <code>\\r\\n</code>"},{"location":"Documents/A-Linux/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/#7-igm","title":"7 \u6a21\u5f0f\u4fee\u6b63\u7b26 i\u3001g\u3001m","text":"<ul> <li><code>i</code>\u5ffd\u7565\u5927\u5c0f\u5199</li> <li><code>g</code>\u5168\u5c40\u641c\u7d22\uff0c\u5339\u914d\u6240\u6709\u6ee1\u8db3\u7684\u5b57\u7b26</li> <li><code>m</code>\u591a\u884c\u5339\u914d\uff0c\u7528\u4e8e\u5339\u914d\u884c\u9996\u884c\u5c3e\u65f6\uff0c\u6bcf\u4e00\u884c\u90fd\u53ef\u4ee5\u53bb\u5339\u914d</li> </ul>"},{"location":"Documents/A-Linux/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/#8","title":"8 \u6848\u4f8b","text":""},{"location":"Documents/A-Linux/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/#81","title":"8.1 \u5339\u914d\u6ce8\u91ca","text":"<ol> <li><code>^\\s*//[\\s\\S]*?\\n</code> \uff1a\u5220\u9664\u72ec\u5360\u5355\u884c\u7684\u6ce8\u91ca (//\u6ce8\u91ca)</li> </ol>"},{"location":"Documents/A-Linux/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/#82","title":"8.2 \u5339\u914d\u7a7a\u884c","text":"<ol> <li><code>^\\s*(?=\\r?$)\\n</code></li> </ol>"},{"location":"Documents/A-Linux/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/#9","title":"9 \u53c2\u8003\u8d44\u6599","text":"<ul> <li>https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md</li> <li>https://perldoc.perl.org/perlre#Regular-Expressions</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/","title":"GCC","text":"<pre><code>GCC\u5168\u79f0\u662fGNU Compiler Collection\uff0c\u662fGNU\u7f16\u8bd1\u96c6\u3002\nCNU\u5168\u79f0\u662fGNU's Not Unix\uff0cGNU\u00a0\u662f\u4e00\u4e2a\u7c7b Unix \u64cd\u4f5c\u7cfb\u7edf\uff0c\u5305\u62ecLinux\u5185\u6838\u548c\u5176\u5b83GNU\u8f6f\u4ef6\u5305\u548c\u7531\u7b2c\u4e09\u65b9\u53d1\u5e03\u7684\u81ea\u7531\u8f6f\u4ef6\u3002\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#1-gcc","title":"1 gcc \u4ecb\u7ecd","text":"<pre><code>GCC\u548cgcc\u662f\u4e0d\u540c\u7684\u4e1c\u897f\uff0cgcc\u662f\u6307GNU c \u7f16\u8bd1\u5668\u3002g++\u662f\u6307c++\u7f16\u8bd1\u5668\u3002\n</code></pre> <ul> <li>\u529f\u80fd\uff1agcc\u4e00\u822c\u7528\u6765\u7f16\u8bd1c\u6587\u4ef6\uff0c\u4f46\u4e5f\u53ef\u4ee5\u7528\u6765\u7f16\u8bd1\u5176\u5b83\u6587\u4ef6\uff0c\u9ed8\u8ba4\u4ee5\u6587\u4ef6\u7ed3\u5c3e\u6765\u5224\u65ad:</li> <li>xxx.c\uff1a\u9ed8\u8ba4\u4ee5\u7f16\u8bd1 C \u8bed\u8a00\u7a0b\u5e8f\u7684\u65b9\u5f0f\u7f16\u8bd1\u6b64\u6587\u4ef6\uff1b</li> <li>xxx.cpp\uff1a\u9ed8\u8ba4\u4ee5\u7f16\u8bd1 C++ \u7a0b\u5e8f\u7684\u65b9\u5f0f\u7f16\u8bd1\u6b64\u6587\u4ef6\u3002</li> <li>xxx.m\uff1a\u9ed8\u8ba4\u4ee5\u7f16\u8bd1 Objective-C \u7a0b\u5e8f\u7684\u65b9\u5f0f\u7f16\u8bd1\u6b64\u6587\u4ef6\uff1b</li> <li>xxx.go\uff1a\u9ed8\u8ba4\u4ee5\u7f16\u8bd1 Go \u8bed\u8a00\u7a0b\u5e8f\u7684\u65b9\u5f0f\u7f16\u8bd1\u6b64\u6587\u4ef6\uff1b</li> <li>gcc\u4e5f\u80fd\u901a\u8fc7<code>-x</code>\u6307\u5b9a\u7f16\u8bd1\u8bed\u8a00\uff0c\u5982<code>gcc -xc++ -lstdc++ 1.cpp</code></li> </ul> <p>\u5efa\u8bae\uff1a\u867d\u7136gcc\u53ef\u4ee5\u7f16\u8bd1\u5176\u5b83\u8bed\u8a00\uff0c\u4f46\u8fd8\u662f\u4ee5gcc\u7f16\u8bd1c\u6587\u4ef6\uff0c\u4ee5g++\u7f16\u8bd1c++\u6587\u4ef6\u3002\u56e0\u4e3agcc\u8981\u7f16\u8bd1c++\u6587\u4ef6\u9700\u8981\u8bbe\u7f6e\u591a\u4e2a\u7f16\u8bd1\u9009\u9879\uff0c\u8fd9\u6837\u4e0d\u4ec5\u9ebb\u70e6\u8fd8\u53ef\u80fd\u51fa\u9519\uff0c\u5982\u4e0b\u6240\u793a</p> <pre><code>//1.cpp\n#include&lt;iostream&gt;\nusing namespace std;\nint main(){\ncout&lt;&lt;\"hello world!\"&lt;&lt;endl;\n}\n</code></pre> <ul> <li>\u4f7f\u7528gcc\u7f16\u8bd1\uff1a<code>gcc -xc++ -lstdc++ 1.cpp</code></li> <li>\u4f7f\u7528g++\u7f16\u8bd1\uff1a<code>g++ 1.cpp</code></li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#2","title":"2 \u6e90\u6587\u4ef6\u547d\u4ee4\u89c4\u8303","text":"<ul> <li>c \u6e90\u6587\u4ef6\u540e\u7f00\u4e3a\uff1a<code>.c</code></li> <li>c \u5934\u6587\u4ef6\u540e\u7f00\u4e3a\uff1a<code>.h</code></li> <li>c++\u6e90\u6587\u4ef6\u540e\u7f00\u5305\u62ec\uff1a <code>.cc .cp .cxx .cpp .CPP .c++ .C</code></li> <li>c++\u5934\u6587\u4ef6\u540e\u7f00\u5305\u62ec\uff1a<code>.h .hh .H .hp .hxx .hpp .HPP .h++ .tcc</code></li> <li>c \u9884\u5904\u7406\u6587\u4ef6\u4e3a\uff1a<code>.i</code> </li> <li>c++\u9884\u5904\u7406\u6587\u4ef6\u4e3a\uff1a<code>ii</code></li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#3-gcc","title":"3 gcc \u5e38\u7528\u6307\u4ee4","text":""},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#31-gcc4","title":"3.1 gcc\u9884\u5904\u7406\u3001\u7f16\u8bd1\u3001\u6c47\u7f16\u548c\u94fe\u63a54\u5927\u6b65\u9aa4","text":"<ul> <li>\u9884\u5904\u7406<code>-E</code>:<code>g++ -E xxx.c</code>,\u751f\u6210<code>xxx.i</code>\u9884\u5904\u7406\u6587\u4ef6</li> <li>\u7f16\u8bd1<code>-S</code>:<code>g++ -S xxx.i</code>,\u751f\u6210<code>xxx.s</code>\u6c47\u7f16\u6587\u4ef6</li> <li>\u6c47\u7f16<code>-c</code>:<code>g++ -c xxx.s</code>,\u751f\u6210<code>xxx.o</code>\u76ee\u6807\u6587\u4ef6</li> <li>\u94fe\u63a5<code>g++ xxx.o -o xxx.exe</code>,\u751f\u6210<code>xxx.exe</code>\u53ef\u6267\u884c\u6587\u4ef6\uff08\u8f93\u5165\u6587\u4ef6\u653e\u5728g++ \u4e4b\u540e\uff0c\u5176\u5b83\u9009\u9879\u5728\u8f93\u5165\u6587\u4ef6\u4e4b\u540e\uff0c\u5426\u5219\u53ef\u80fd\u4f1a\u5305\u94fe\u63a5\u9519\u8bef\uff09</li> </ul> <pre><code>$ ls\n1.cpp\n$ cat 1.cpp #include&lt;iostream&gt;\nusing namespace std;\nint main(){\ncout&lt;&lt;\"hello world!\"&lt;&lt;endl;\n}\n$ g++ -E 1.cpp\n$ ls\n1.cpp  1.i\n$ g++ -S 1.i\n$ ls\n1.cpp  1.i  1.s\n$ g++ -c 1.i\n$ ls\n1.cpp  1.i  1.o  1.s\n$ g++ 1.o -o 1.exe\n$ ls\n1.cpp  1.exe  1.i  1.o  1.s\n$ ./1.exe\nhello world!\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#32-c","title":"3.2 -c \u9009\u9879","text":"<ul> <li>\u529f\u80fd\uff1a\u7f16\u8bd1\u6216\u6c47\u7f16\u6e90\u6587\u4ef6\uff0c\u4f46\u4e0d\u94fe\u63a5\u3002\u94fe\u63a5\u9636\u6bb5\u6839\u672c\u6ca1\u6709\u5b8c\u6210\u3002\u6700\u7ec8\u8f93\u51fa\u662f\u6bcf\u4e2a\u6e90\u6587\u4ef6\u7684\u5bf9\u8c61\u6587\u4ef6\u5f62\u5f0f\u3002\u8f93\u5165\u7684\u6587\u4ef6\u53ef\u4ee5\u662f <code>.c/cc</code>\u3001<code>.i</code>\u3001 <code>.s</code> \uff0c\u8f93\u51fa\u5219\u662f <code>.o</code> \u6587\u4ef6\u3002</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#33-s","title":"3.3 -S \u9009\u9879","text":"<ul> <li>\u529f\u80fd\uff1a\u7f16\u8bd1\u4f46\u4e0d\u6c47\u7f16\u3002\u6700\u7ec8\u8f93\u51fa\u662f\u6c47\u7f16\u6587\u4ef6\u5f62\u5f0f\u3002\u8f93\u5165\u7684\u6587\u4ef6\u53ef\u4ee5\u662f <code>.c/cc</code>\u3001<code>.i</code> \uff0c\u8f93\u51fa\u5219\u662f <code>.s</code> \u6587\u4ef6\u3002</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#34-e","title":"3.4 -E \u9009\u9879","text":"<ul> <li>\u529f\u80fd\uff1a\u9884\u5904\u7406\u9636\u6bb5\u540e\u505c\u6b62\uff1b\u8f93\u51fa\u7684\u662f <code>.i</code> \u9884\u5904\u7406\u6587\u4ef6\u3002</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#35-x","title":"3.5 -x \u9009\u9879","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793a\u6307\u5b9a\u8f93\u5165\u6587\u4ef6\u7684\u8bed\u8a00\uff0c\u5982 <code>-xc</code>\uff0c<code>-xc++</code>\u3002</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#36-o","title":"3.6 \u9009\u9879-o","text":"<ul> <li>\u529f\u80fd\uff1a\u6307\u5b9a\u751f\u6210\u6587\u4ef6\u540d</li> </ul> <pre><code>gcc test.c -o test\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#37-s","title":"3.7 \u9009\u9879-s","text":"<ul> <li>\u529f\u80fd\uff1a\u5220\u9664\u6240\u6709\u7b26\u53f7\u548c\u91cd\u5b9a\u4f4d\u4fe1\u606f\u5220\u9664\u6240\u6709\u7b26\u53f7\u548c\u91cd\u5b9a\u4f4d\u4fe1\u606f\u3002</li> </ul> <pre><code>gcc -s test.c -o test\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#38-l","title":"3.8 \u9009\u9879-L\u6307\u5b9a\u9759\u6001\u5e93\u67e5\u627e\u8def\u5f84","text":"<pre><code>g++ -L~/test libprint.a test.c </code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#39-l","title":"3.9 \u9009\u9879-l\u6dfb\u52a0\u94fe\u63a5\u5e93","text":"<pre><code># \u4f18\u5148\u94fe\u63a5\u52a8\u6001\u5e93\uff0c\u627e\u4e0d\u5230\u52a8\u6001\u5e93\u518d\u5c1d\u8bd5\u94fe\u63a5\u9759\u6001\u5e93\ng++ -L~/test -lprint test.c </code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#310-static","title":"3.10 \u9009\u9879-static\u6307\u5b9a\u8fde\u63a5\u9759\u6001\u5e93\u800c\u4e0d\u662f\u52a8\u6001\u5e93","text":"<pre><code>g++ -L~/test -static -lprint test.c </code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#311-i","title":"3.11 \u9009\u9879-I\u6307\u5b9a\u5934\u6587\u4ef6\u5305\u542b\u76ee\u5f55","text":"<pre><code>g++ -I~/test/src print.c test.c\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#312-g","title":"3.12 \u9009\u9879-g\u751f\u6210\u8c03\u8bd5\u4fe1\u606f","text":"<pre><code>g++ -g test.c </code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#313","title":"3.13 \u7f16\u8bd1\u591a\u4e2a\u6587\u4ef6","text":"<p>\u5047\u8bbe\u67093\u4e2a\u6587\u4ef6\uff1amain.cpp print.cpp print.h - \u65b9\u5f0f\u4e00\uff1a\u76f4\u63a5\u751f\u4ea7\u53ef\u6267\u884c\u7a0b\u5e8f</p> <pre><code>$ ls\nmain.cpp  print.cpp  print.h\n$ g++ main.cpp print.cpp -o main.exe\n$ ls\nmain.cpp  main.exe  print.cpp  print.h\n</code></pre> <ul> <li>\u65b9\u5f0f\u4e8c\uff1a\u751f\u6210\u76ee\u6807\u6587\u4ef6\uff0c\u518d\u94fe\u63a5</li> </ul> <pre><code>$ ls\nmain.cpp  print.cpp  print.h\n$ g++ -c main.cpp\n$ g++ -c print.cpp\n$ ls\nmain.cpp  main.o  print.cpp  print.h  print.o\n$ g++ main.o print.o -o main.exe\n$ ls\nmain.cpp  main.exe  main.o  print.cpp  print.h  print.o\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#314-std","title":"3.14 -std=\u652f\u6301\u6807\u51c6\u8303\u56f4","text":"<p>\u4ee5\u4e0b\u662fgcc10.0.2\u652f\u6301\u7684c++\u6807\u51c6 - <code>-std=c++03</code> - <code>-std=c++11</code> - <code>-std=c++14</code> - <code>-std=c++17</code> - <code>-std=c++2a</code></p>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#315-save-tempsi-s-o","title":"3.15 \u9009\u9879-save-temps\u4fdd\u5b58\u4e2d\u95f4\u6587\u95f4(.i .s .o\u6587\u4ef6)","text":"<pre><code>$ ls\nmain.cpp  print.cpp  print.h\n\n$ g++ main.cpp  print.cpp -save-temps\n$ ls\na.out     main.ii  main.s     print.h   print.o  main.cpp  main.o   print.cpp  print.ii  print.s\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#4","title":"4 \u7f16\u8bd1\u9009\u9879","text":"<pre><code>\u8bb8\u591a\u9009\u9879\u90fd\u6709\u4ee5\u201c-f\u201d\u6216\u201c-W\u201d\u5f00\u5934\u7684\u957f\u540d\u79f0\uff0c\u4f8b\u5982\uff0c`-fmove-loop-invariants`\uff0c`-Wformat`\u7b49\u3002\u5176\u4e2d\u5927\u591a\u6570\u90fd\u6709\u6b63\u548c\u8d1f\u5f62\u5f0f\uff1b`-ffo`\u7684\u5426\u5b9a\u5f62\u5f0f\u662f`-fno-foo`\uff0c`-Wformat`\u7684\u5426\u5b9a\u5f62\u5f0f\u662f`-Wno-format`\u3002\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#41-file","title":"4.1 @file","text":"<ul> <li>\u529f\u80fd\uff1a\u4ece\u6307\u5b9a\u6587\u4ef6\u4e2d\u8bfb\u53d6\u547d\u4ee4\u884c\u9009\u9879, \u6587\u4ef6\u5185\u591a\u4e2a\u9009\u9879\u7528\u7a7a\u683c\u5206\u9694\uff1b\u6587\u4ef6\u672c\u8eab\u53ef\u80fd\u5305\u542b\u5176\u4ed6 <code>@\u6587\u4ef6</code> \u9009\u9879\uff1b\u4efb\u4f55\u8fd9\u6837\u7684\u9009\u9879\u90fd\u5c06\u88ab\u9012\u5f52\u5904\u7406\u3002</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#42-w","title":"4.2 -W\u7f16\u8bd1\u8b66\u544a","text":"<ul> <li><code>-Wall</code>:\u6253\u5f00\u6240\u6709\u8b66\u544a</li> <li><code>-werror</code>:\u5c06\u8b66\u544a\u8f6c\u4e3a\u9519\u8bef\uff08\u5c06\u89e6\u53d1\u7f16\u8bd1\u62a5\u9519\uff0c\u4e2d\u65ad\u7f16\u8bd1\uff09</li> <li><code>-w</code>:\u5173\u95ed\u6240\u6709\u8b66\u544a\uff08\u4e0d\u5efa\u8bae\u4f7f\u7528\uff09</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#43","title":"4.3 \u5ffd\u7565\u7279\u5b9a\u8b66\u544a","text":"<p>\u5f00\u542f\u8b66\u544a\u901a\u5e38\u662f <code>-W</code> +\u8b66\u544a\u540d\u79f0\uff0c\u5982 <code>Wimplicit</code> \u662f\u5f00\u542f\u8b66\u544a\uff0c\u800c\u5173\u95ed\u8b66\u544a\u901a\u5e38\u662f <code>-Wno-</code> +\u8b66\u544a\u540d\u79f0\uff0c\u5982 <code>Wno-implicit</code>\u3002</p>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#44-o","title":"4.4 -O\u7f16\u8bd1\u4f18\u5316","text":"<p>\u7f16\u8bd1\u5668\u63d0\u4f9b4\u4e2a\u4f18\u5316\u7b49\u7ea7<code>-O0</code>\u3001<code>-O1</code>\u3001<code>-O2</code>\u3001<code>-O3</code>\uff0c\u5176\u4e2d<code>-O0</code>\u8868\u793a\u6ca1\u6709\u4f18\u5316\uff0c<code>-O3</code>\u8868\u793a\u6700\u9ad8\u7684\u4f18\u5316\u7b49\u7ea7</p>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#45-d-u","title":"4.5 -D\u58f0\u660e\u5b8f\u3001-U\u53d6\u6d88\u5b8f","text":"<ul> <li><code>-Dmacro</code>\u6216<code>-D macro</code>:\u58f0\u660e\u5b8f\uff0c\u4f5c\u7528\u540c<code>#define macro</code></li> <li><code>-Dmacro=defn</code>\u6216<code>-D macro=defn</code>:\u58f0\u660e\u5b8f\uff0c\u4f5c\u7528\u540c<code>#define macro=defn</code></li> <li><code>-Umacro</code>\u6216<code>-U macro</code>:\u53d6\u6d88\u5b8f\uff0c\u4f5c\u7528\u540c<code>#undef macro</code></li> <li><code>-undef</code>:\u53d6\u6d88\u5bf9\u4efb\u4f55\u975e\u6807\u51c6\u5b8f\u7684\u5b9a\u4e49</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#5","title":"5 \u7f16\u8bd1\u94fe\u63a5\u9759\u6001\u5e93\u52a8\u6001\u5e93","text":"<p>Linux\u4e0a\u5e93\u547d\u540d\u683c\u5f0f,\u4ee5lib\u8d77\u59cb\uff0cxxx\u8868\u793a\u5e93\u540d\uff0c.a\u7ed3\u5c3e\u662f\u9759\u6001\u5e93\uff0c.so\u7ed3\u5c3e\u662f\u52a8\u6001\u5e93 - \u9759\u6001\u5e93: <code>libxxx.a</code> - \u52a8\u6001\u5e93: <code>libxxx.so</code></p>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#51-c","title":"5.1 c++ \u52a8\u6001\u5e93\u9759\u6001\u5e93\u540e\u7f00","text":"<ul> <li>Linux</li> <li>\u9759\u6001\u5e93:<code>xxx.a</code>(.a\u4ee3\u8868archive)</li> <li>\u52a8\u6001\u5e93:<code>xxx.so</code>(.so\u4ee3\u8868share object)</li> <li>Windows</li> <li>\u9759\u6001\u5e93:<code>xxx.lib</code></li> <li>\u52a8\u6001\u5e93:<code>xxx.dll</code></li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#52","title":"5.2 \u7f16\u8bd1\u548c\u94fe\u63a5\u9759\u6001\u5e93","text":"<ul> <li><code>-L</code>\u9009\u9879\u6307\u5b9a\u5e93\u8def\u5f84\uff0c\u4e0d\u6307\u5b9a\u9ed8\u8ba4\u7cfb\u7edf/lib,/usr/lib\u7b49\u8def\u5f84</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#521","title":"5.2.1 \u751f\u6210","text":"<ol> <li>\u5c06\u6e90\u6587\u4ef6\u751f\u6210\u76ee\u6807\u6587\u4ef6</li> <li>\u4f7f\u7528ar\u6253\u5305\u6210\u9759\u6001\u5e93</li> </ol> <pre><code>$ g++ -c print.cpp\n$ ls\nmain.cpp  print.cpp  print.h  print.o\n$ ar rcs libprint.a print.o\n$ ls\nlibprint.a  main.cpp  print.cpp  print.h  print.o\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#522","title":"5.2.2 \u4f7f\u7528","text":"<ul> <li><code>-static</code>\u6307\u5b9a\u9759\u6001\u94fe\u63a5</li> <li><code>-lxxx</code>\u6307\u5b9a\u9759\u6001\u5e93\u6216<code>libxxx.a</code></li> </ul> <p>\u6ce8\u610f\uff1a<code>-o xxx.exe</code>\u5e94\u8be5\u653e\u5165\u6700\u540e\uff0c\u5373libxxx.a\u4e0d\u5e94\u8be5\u5728xxx.exe\u540e</p> <pre><code>$ g++ -static main.cpp libprint.a -o main.exe\n$ ls\nlibprint.a  main.cpp  main.exe  print.cpp  print.h  print.o\nshuhaiwen@shuhaiwen-PC:~/code/cpp$ ./main.exe\nhello world!\n</code></pre> <pre><code>$ g++ main.cpp -o main.exe -static -L /home/shuhaiwen/code/cpp/ -lprint\n$ ls\nlibprint.a  main.cpp  main.exe  print.cpp  print.h  print.o\nshuhaiwen@shuhaiwen-PC:~/code/cpp$ ./main.exe\nhello world!\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#53","title":"5.3 \u7f16\u8bd1\u548c\u94fe\u63a5\u52a8\u6001\u5e93","text":""},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#531","title":"5.3.1 \u751f\u6210","text":"<ul> <li><code>-fpic -shared</code></li> </ul> <pre><code>$ g++ -fpic -shared print.cpp -o libprint.so\n$ ls\nlibprint.a  libprint.so  main.cpp  print.cpp  print.h\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#532","title":"5.3.2 \u4f7f\u7528","text":"<ul> <li>\u65b9\u5f0f\u4e00\uff1a\u5728\u4ee3\u7801\u5185\u4f7f\u7528<code>dlfcn.h</code>\u63d0\u4f9b\u7684\u51fd\u6570\u52a8\u6001\u5bfc\u5165\u9700\u8981\u7684\u51fd\u6570</li> <li><code>dlopen</code>:\u6253\u5f00\u52a8\u6001\u5e93</li> <li><code>dlsym</code>:\u83b7\u53d6\u5e93\u51fd\u6570</li> <li><code>dlclose</code>:\u5173\u95ed\u52a8\u6001\u5e93</li> <li>\u65b9\u5f0f\u4e8c\uff1a\u50cf\u9759\u6001\u5e93\u94fe\u63a5\u4e00\u6837\u4f7f\u7528</li> <li>\u5c06\u52a8\u6001\u5e93\u653e\u5165\u7cfb\u7edf\u5e93\u76ee\u5f55\u4e0b\uff08\u4f8b\u5982 /usr/lib\u3001/usr/lib64\u3001/lib\u3001/lib64\uff09(\u4e0d\u63a8\u8350)</li> <li>\u5728<code>.bash_profile</code>\u6587\u4ef6\u4e2d\u5bfc\u51fa<code>LD_LIBRARY_PATH</code>\uff0c\u5982<code>export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:\u52a8\u6001\u5e93\u8def\u5f84</code></li> <li>\u52a0\u4e0a\u9009\u9879<code>-Wl,-rpath=[.so\u8def\u5f84]</code>,\u6bd4\u5982<code>g++ main.cpp -o main.exe -Wl,-rpath=/home/shuhaiwen/code/cpp/ -lprint</code></li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#6","title":"6 \u6269\u5c55","text":""},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#61-ldd","title":"6.1 ldd\u547d\u4ee4\u67e5\u770b\u53ef\u6267\u884c\u7a0b\u5e8f\u4f9d\u8d56\u7684\u5171\u4eab\u5e93","text":"<pre><code>$ ldd libprint.so\n        linux-vdso.so.1 (0x00007ffd48119000)\nlibstdc++.so.6 =&gt; /lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f94c2660000)\nlibm.so.6 =&gt; /lib/x86_64-linux-gnu/libm.so.6 (0x00007f94c24dd000)\nlibgcc_s.so.1 =&gt; /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f94c24c3000)\nlibc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f94c2302000)\n/lib64/ld-linux-x86-64.so.2 (0x00007f94c2809000)\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#7-gcc","title":"7 gcc\u7f16\u8bd1\u9519\u8bef\u603b\u7ed3","text":""},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#71-xxx","title":"7.1 \u9519\u8bef\uff1a\u2018xxx\u2019\u4e0d\u662f\u4e00\u4e2a\u7c7b\u578b\u540d","text":"<ul> <li>\u5206\u6790\uff1a\u6b64\u7c7b\u9519\u8bef\u5c31\u662f\u7f16\u8bd1\u5668\u5e76\u6ca1\u6709\u627e\u5230\"xxx\"\u7c7b\u7684\u5b9a\u4e49</li> <li>\u539f\u56e0\uff1a</li> <li>\u6ca1\u6709\u5305\u542b\u5934\u6587\u4ef6</li> <li>\u591a\u4e2a\u6587\u4ef6\u4e2d\u4f7f\u7528\u4e86\u76f8\u540c\u7684\u9632\u6b62\u5934\u6587\u4ef6\u91cd\u590d\u5305\u542b\u7684\u5b8f\uff0c\u5bfc\u81f4\u67d0\u4e2a\u5934\u6587\u4ef6\u6ca1\u6709\u88ab\u5305\u542b\u8fdb\u6765</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#2-gcc","title":"2 gcc \u6807\u51c6","text":""},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#1-c","title":"1 c \u6807\u51c6\u5386\u53f2\u7248\u672c","text":"<pre><code>\u6700\u521d\u7684 ANSI C \u6807\u51c6 (X3.159-1989) \u4e8e 1989 \u5e74\u83b7\u5f97\u6279\u51c6\u5e76\u4e8e 1990 \u5e74\u53d1\u5e03\u3002\u8be5\u6807\u51c6\u4e8e 1990 \u5e74\u665a\u4e9b\u65f6\u5019\u88ab\u6279\u51c6\u4e3a ISO \u6807\u51c6 (ISO/IEC 9899:1990)\u3002\n</code></pre> <pre><code>\u6269\u5c55\u7684c\u6807\u51c6\uff0c\u6bd4\u5982gnu90\u3001gnu99\u3001gnu11\uff0c\u8fd9\u4e9b\u6807\u51c6\u65f6\u5bf9\u540c\u7ea7\u522b\u6807\u51c6\u7684\u6269\u5c55\uff0c\u6bd4\u5982gnu90\u5c31\u4f1a\u652f\u6301\u90e8\u5206c99\u3001c11\u7279\u6027\u3002gcc12.2\u9ed8\u8ba4\u5c31\u4f1a\u5f00\u542f-std=gnu17\u3002\n</code></pre> <ul> <li><code>C89/C90</code>\uff1a\uff08\u539f\u59cb\u7248\uff09\u539f\u59cb\u7684ansi c\u6807\u51c6\uff0cgcc \u9009\u9879\u4f7f\u7528<code>-ansi</code>,\u00a0<code>-std=c90</code>\u00a0or\u00a0<code>-std=iso9899:1990</code></li> <li><code>C94/C95</code>\uff1a\uff08\u4fee\u8ba2\u7248\uff09\u4e3b\u8981\u4fee\u8ba2<code>C89/C90</code>\u6807\u51c6\u4e2d\u7684\u9519\u8bef\uff0cgcc\u9009\u9879\u4f7f\u7528<code>-std=iso9899:199409</code></li> <li><code>C99</code>\uff1a\uff08\u65b0\u6807\u51c6\uff09gcc\u9009\u9879\u4f7f\u7528<code>-std=c99</code>or<code>-std=iso9899:1999</code>\uff1b1999 \u5e74\u4f5c\u4e3a ISO/IEC 9899:1999 \u53d1\u5e03\u3002\uff08\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u8fd9\u4e2a\u6807\u51c6\u7248\u672c\u7684\u8349\u7a3f\u88ab\u79f0\u4e3a C9X\u3002\uff09</li> <li><code>C11</code>\uff1a\uff08\u65b0\u6807\u51c6\uff09gcc\u9009\u9879\u4f7f\u7528<code>-std=c11</code>or<code>-std=iso9899:2011</code>\uff1b2011 \u5e74\u4f5c\u4e3a ISO/IEC 9899:2011 \u53d1\u5e03\u3002\uff08\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u8fd9\u4e2a\u6807\u51c6\u7248\u672c\u7684\u8349\u6848\u88ab\u79f0\u4e3a C1X\u3002\uff09</li> <li><code>C17</code>\uff1a<code>-std=c17</code>or<code>-std=iso9899:2017</code>\uff1b2017 \u5e74\u7f16\u5199\u4e86\u4e00\u4e2a\u96c6\u6210\u4e86\u66f4\u6b63\u7684\u7248\u672c\uff0c\u5e76\u4e8e 2018 \u5e74\u4f5c\u4e3a ISO/IEC 9899:2018 \u53d1\u5e03\uff1b\u5b83\u88ab\u79f0\u4e3a C17\uff0c\u652f\u6301\uff1b</li> <li><code>C2x</code>\uff1a\uff08\u65b0\u6807\u51c6\uff09gcc\u9009\u9879\u4f7f\u7528<code>-std=c2x</code>\uff1bC \u6807\u51c6\u7684\u53e6\u4e00\u4e2a\u7248\u672c\uff0c\u6b63\u5728\u5f00\u53d1\u4e2d\u3002</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#2-c","title":"2 c++\u6807\u51c6\u5386\u53f2\u7248\u672c","text":"<pre><code>GCC \u652f\u6301 1998 \u5e74\u53d1\u5e03\u7684\u539f\u59cb ISO C++ \u6807\u51c6\uff0c\u4ee5\u53ca 2011\u30012014\u30012017 \u5e74\u548c\u5927\u90e8\u5206 2020 \u5e74\u7684\u4fee\u8ba2\u7248\u3002\n</code></pre> <pre><code>\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528 -std=gnu++98\uff08\u5bf9\u4e8e\u5e26\u6709 GNU \u6269\u5c55\u7684 C++98\uff09\u6216 -std=gnu++11\uff08\u5bf9\u4e8e\u5e26\u6709 GNU \u6269\u5c55\u7684 C++11\uff09\u663e\u5f0f\u9009\u62e9 C++ \u8bed\u8a00\u7684\u6269\u5c55\u7248\u672c\uff0c\u6216 -std=gnu++14\uff08\u5bf9\u4e8e\u5e26\u6709 GNU \u6269\u5c55\u7684 C++14\uff09\uff0c\u6216 -std=gnu++17\uff08\u5bf9\u4e8e\u5e26\u6709 GNU \u6269\u5c55\u7684 C++17\uff09\uff0c\u6216 -std=gnu++20\uff08\u5bf9\u4e8e C+ +20 \u4e0e GNU \u6269\u5c55\uff09\u3002gcc12.2\u9ed8\u8ba4\u5f00\u542f-std=gnu++17\u3002\n</code></pre> <ul> <li><code>C++98</code>\uff1a\uff08\u539f\u59cb\u7248\uff09gcc \u9009\u9879\u4f7f\u7528<code>-ansi</code>or<code>-std=c++98</code>\uff1b\u6700\u521d\u7684 ISO C++ \u6807\u51c6\u4f5c\u4e3a ISO \u6807\u51c6 (ISO/IEC 14882:1998) \u53d1\u5e03\u3002</li> <li><code>C++03</code>\uff1a\uff08\u4fee\u8ba2\u7248\uff09gcc \u9009\u9879\u4f7f\u7528<code>-std=c++03</code>\uff1b2003 \u5e74\u53d1\u5e03\u7684\u6280\u672f\u52d8\u8bef\u8868 (ISO/IEC 14882:2003) \u5bf9<code>C++98</code>\u8fdb\u884c\u4e86\u4fee\u8ba2\u3002</li> <li><code>C++11</code>\uff1a\uff08\u65b0\u6807\u51c6\uff09gcc \u9009\u9879\u4f7f\u7528<code>-std=c++11</code>\uff1b2011 \u5e74\u53d1\u5e03\u4e3a ISO/IEC 14882:2011\u5728\u53d1\u5e03\u4e4b\u524d\uff0c\u5b83\u901a\u5e38\u88ab\u79f0\u4e3a <code>C++0x</code>\u3002</li> <li><code>C++14</code>\uff1a\uff08\u65b0\u6807\u51c6\uff09gcc \u9009\u9879\u4f7f\u7528<code>-std=c++14</code>\uff1b2014 \u5e74\u53d1\u5e03\u4e3a ISO/IEC 14882:2014\uff1b\u5728\u53d1\u5e03\u4e4b\u524d\uff0c\u5b83\u6709\u65f6\u88ab\u79f0\u4e3a<code>C++1y</code>\u3002</li> <li><code>C++17</code>\uff1a\uff08\u65b0\u6807\u51c6\uff09gcc \u9009\u9879\u4f7f\u7528<code>-std=c++17</code>\uff1b2017 \u5e74\u53d1\u5e03\u4e86 ISO/IEC 14882:2017\u3002\u5728\u53d1\u5e03\u4e4b\u524d\u901a\u5e38\u88ab\u79f0\u4e3a <code>C++1z</code>\u3002</li> <li><code>C++20</code>\uff1a\uff08\u65b0\u6807\u51c6\uff09gcc \u9009\u9879\u4f7f\u7528<code>-std=c++20</code>\uff1b 2020 \u5e74\u53d1\u5e03\u4e3a ISO/IEC 14882:2020\uff1b\u5728\u53d1\u5e03\u4e4b\u524d\uff0c\u5b83\u6709\u65f6\u88ab\u79f0\u4e3a C++2a\u3002</li> <li><code>C++23</code> \uff1a\u53c8\u88ab\u79f0\u4e3a C++2b\u3002</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#3","title":"3 \u8b66\u544a\u9009\u9879","text":"<pre><code>\u66f4\u591a\u8b66\u544a\u9009\u9879\u8bf7\u53c2\u8003\u5b98\u7f51https://gcc.gnu.org/onlinedocs/gcc-12.2.0/gcc/Warning-Options.html#Warning-Options\n</code></pre> <ul> <li><code>-fsyntax-only</code>\uff1a\u68c0\u67e5\u4ee3\u7801\u662f\u5426\u6709\u8bed\u6cd5\u9519\u8bef\uff0c\u4f46\u9664\u6b64\u4e4b\u5916\u4e0d\u8981\u505a\u4efb\u4f55\u4e8b\u60c5\u3002</li> <li><code>-fmax-errors=n</code>\uff1a\u5c06\u9519\u8bef\u6d88\u606f\u7684\u6700\u5927\u6570\u91cf\u9650\u5236\u4e3a n\uff0c\u6b64\u65f6 GCC \u4f1a\u9000\u51fa\u800c\u4e0d\u662f\u5c1d\u8bd5\u7ee7\u7eed\u5904\u7406\u6e90\u4ee3\u7801\u3002\u5982\u679c n \u4e3a 0\uff08\u9ed8\u8ba4\u503c\uff09\uff0c\u5219\u751f\u6210\u7684\u9519\u8bef\u6d88\u606f\u7684\u6570\u91cf\u6ca1\u6709\u9650\u5236\u3002\u5982\u679c\u8fd8\u6307\u5b9a\u4e86<code>-Wfatal-errors</code>\uff0c\u5219<code>-Wfatal-errors</code>\u4f18\u5148\u4e8e\u8be5\u9009\u9879\u3002</li> <li><code>-w</code>\uff1a\u7981\u6b62\u6240\u6709\u8b66\u544a\u4fe1\u606f\u3002</li> <li><code>-Werror</code>\uff1a\u5c06\u6240\u6709\u8b66\u544a\u8f6c\u6362\u4ece\u9519\u8bef\u3002</li> <li><code>-Werror=</code>\uff1a\u5c06\u6307\u5b9a\u7684\u8b66\u544a\u8f6c\u4e3a\u9519\u8bef\u3002\u4f8b\u5982<code>-Werror=switch</code> \u5c06<code>-Wswitch</code>\u63a7\u5236\u7684\u8b66\u544a\u53d8\u6210\u9519\u8bef\u3002</li> <li><code>-Wno-error=</code>\uff1a\u7528\u4e8e\u5426\u5b9a\u7279\u5b9a\u7684\u8b66\u544a\u3002\u4f8b\u5982\u4f7f\u7528\u4e86<code>-Werror</code>\uff0c\u518d\u4f7f\u7528<code>-Wno-error=switch</code>\u4f7f<code>-Wswitch</code>\u8b66\u544a\u4e0d\u662f\u9519\u8bef\uff0c\u5373\u4f7f\u4f7f\u7528\u4e86<code>-Werror</code>\u3002</li> <li><code>-Wfatal-errors</code>\uff1a\u6b64\u9009\u9879\u5bfc\u81f4\u7f16\u8bd1\u5668\u5728\u53d1\u751f\u7b2c\u4e00\u4e2a\u9519\u8bef\u65f6\u4e2d\u6b62\u7f16\u8bd1\uff0c\u800c\u4e0d\u662f\u5c1d\u8bd5\u7ee7\u7eed\u5e76\u6253\u5370\u66f4\u591a\u9519\u8bef\u6d88\u606f\u3002</li> <li><code>-Wall</code>\uff1a\u5f00\u542f\u5927\u90e8\u5206\u8b66\u544a\uff0c\u6fc0\u6d3b\u7684\u8b66\u544a\u4fe1\u606f\u5982\u4e0b\u3002</li> </ul> <pre><code>-Waddress -Warray-bounds=1 (only with -O2) -Warray-compare -Warray-parameter=2 (C and Objective-C only) -Wbool-compare -Wbool-operation -Wc++11-compat -Wc++14-compat -Wcatch-value (C++ and Objective-C++ only) -Wchar-subscripts -Wcomment -Wdangling-pointer=2 -Wduplicate-decl-specifier (C and Objective-C only) -Wenum-compare (in C/ObjC; this is on by default in C++) -Wformat -Wformat-overflow -Wformat-truncation -Wint-in-bool-context -Wimplicit (C and Objective-C only) -Wimplicit-int (C and Objective-C only) -Wimplicit-function-declaration (C and Objective-C only) -Winit-self (only for C++) -Wlogical-not-parentheses -Wmain (only for C/ObjC and unless -ffreestanding) -Wmaybe-uninitialized -Wmemset-elt-size -Wmemset-transposed-args -Wmisleading-indentation (only for C/C++) -Wmismatched-dealloc -Wmismatched-new-delete (only for C/C++) -Wmissing-attributes -Wmissing-braces (only for C/ObjC) -Wmultistatement-macros -Wnarrowing (only for C++) -Wnonnull -Wnonnull-compare -Wopenmp-simd -Wparentheses -Wpessimizing-move (only for C++) -Wpointer-sign -Wrange-loop-construct (only for C++) -Wreorder -Wrestrict -Wreturn-type -Wsequence-point -Wsign-compare (only in C++) -Wsizeof-array-div -Wsizeof-pointer-div -Wsizeof-pointer-memaccess -Wstrict-aliasing -Wstrict-overflow=1 -Wswitch -Wtautological-compare -Wtrigraphs -Wuninitialized -Wunknown-pragmas -Wunused-function -Wunused-label -Wunused-value -Wunused-variable -Wuse-after-free=3 -Wvla-parameter (C and Objective-C only) -Wvolatile-register-var -Wzero-length-bounds\n</code></pre> <ul> <li><code>-Wextra</code>or<code>-W</code>\uff1a\u5f00\u542f\u989d\u5916\u7684\u8b66\u544a\uff08\u8fd9\u4f1a\u542f\u7528\u4e00\u4e9b -Wall \u672a\u542f\u7528\u7684\u989d\u5916\u8b66\u544a\u6807\u5fd7\u3002\uff09\uff0c\u6fc0\u6d3b\u7684\u8b66\u544a\u4fe1\u606f\u4e0d\u4ec5\u5305\u62ec\u4e0b\u9762\u90e8\u5206\uff0c\u8fd8\u5305\u542b\u4ee5\u4e0b\u51e0\u79cd<ul> <li>\u4f7f\u7528 &lt;\u3001&lt;=\u3001&gt; \u6216 &gt;= \u5c06\u6307\u9488\u4e0e\u6574\u6570\u96f6\u8fdb\u884c\u6bd4\u8f83\u3002</li> <li>\uff08\u4ec5\u9650 C++\uff09\u679a\u4e3e\u6570\u548c\u975e\u679a\u4e3e\u6570\u90fd\u51fa\u73b0\u5728\u6761\u4ef6\u8868\u8fbe\u5f0f\u4e2d\u3002</li> <li>\uff08\u4ec5\u9650 C++\uff09\u6a21\u68f1\u4e24\u53ef\u7684\u865a\u57fa\u3002</li> <li>\uff08\u4ec5\u9650 C++\uff09\u4e0b\u6807\u5df2\u58f0\u660e\u4e3a\u5bc4\u5b58\u5668\u7684\u6570\u7ec4\u3002</li> <li>\uff08\u4ec5\u9650 C++\uff09\u83b7\u53d6\u5df2\u58f0\u660e\u4e3a\u5bc4\u5b58\u5668\u7684\u53d8\u91cf\u7684\u5730\u5740\u3002</li> <li>\uff08\u4ec5\u9650 C++\uff09\u57fa\u7c7b\u672a\u5728\u6d3e\u751f\u7c7b\u7684\u590d\u5236\u6784\u9020\u51fd\u6570\u4e2d\u521d\u59cb\u5316\u3002</li> </ul> </li> </ul> <pre><code>-Wclobbered -Wcast-function-type -Wdeprecated-copy (C++ only) -Wempty-body -Wenum-conversion (C only) -Wignored-qualifiers -Wimplicit-fallthrough=3 -Wmissing-field-initializers -Wmissing-parameter-type (C only) -Wold-style-declaration (C only) -Woverride-init -Wsign-compare (C only) -Wstring-compare -Wredundant-move (only for C++) -Wtype-limits -Wuninitialized -Wshift-negative-value (in C++11 to C++17 and in C99 and newer) -Wunused-parameter (only with -Wunused or -Wall) -Wunused-but-set-parameter (only with -Wunused or -Wall)\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#4_1","title":"4 \u8c03\u8bd5\u9009\u9879","text":"<pre><code>1. \u66f4\u591a\u8c03\u8bd5\u9009\u9879\u53c2\u8003\u5b98\u65b9\u6587\u6863https://gcc.gnu.org/onlinedocs/gcc-12.2.0/gcc/Debugging-Options.html#Debugging-Options\n2. \u5982\u679c\u60a8\u4f7f\u7528\u591a\u4e2a -g \u9009\u9879\uff0c\u65e0\u8bba\u6709\u65e0\u7ea7\u522b\u7f16\u53f7\uff0c\u53ea\u6709\u6700\u540e\u4e00\u4e2a\u9009\u9879\u662f\u6709\u6548\u7684\u3002\n</code></pre> <pre><code>title: -g\u548c-ggdb\u533a\u522b\uff1f\n- `-g`\uff1a\u8be5\u9009\u9879\u53ef\u4ee5\u5229\u7528\u64cd\u4f5c\u7cfb\u7edf\u7684\u201c\u539f\u751f\u683c\u5f0f\uff08native format\uff09\u201d\u751f\u6210\u8c03\u8bd5\u4fe1\u606f\u3002GDB \u53ef\u4ee5\u76f4\u63a5\u5229\u7528\u8fd9\u4e2a\u4fe1\u606f\uff0c\u5176\u5b83\u8c03\u8bd5\u5668\u4e5f\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u8c03\u8bd5\u4fe1\u606f\n- `-ggdb`\uff1a\u80fd\u4f7fGCC\u4e3aGDB\u751f\u6210\u4e13\u7528\u7684\u66f4\u4e3a\u4e30\u5bcc\u7684\u8c03\u8bd5\u4fe1\u606f\uff0c\u4f46\u662f\uff0c\u6b64\u65f6\u5c31\u4e0d\u80fd\u7528\u5176\u4ed6\u7684\u8c03\u8bd5\u5668\u6765\u8fdb\u884c\u8c03\u8bd5\u4e86 (\u5982 ddx)\n- `-g`\u751f\u6210\u7684\u8c03\u8bd5\u4fe1\u606f\u662f\u901a\u7528\u7684\uff0c\u5927\u591a\u6570\u8c03\u8bd5\u5668\u90fd\u80fd\u4f7f\u7528\uff0c\u4f46`-gdb`\u53ea\u652f\u6301GDB\u8c03\u8bd5\u5668\n</code></pre> <ul> <li><code>-g[level]</code>\u3001<code>-ggdb[level]</code>\u3001<code>-gstabs[level]</code>\u3001<code>-gxcoff[level]</code>\u3001<code>-gvms[level]</code>\uff1a<ul> <li>level\uff1a\u53ef\u90090\u30011\u30012\u30013\u7ea7\u522b\uff0c\u5982\u679c\u4e0d\u6307\u5b9alevel\uff0c\u9ed8\u8ba4\u65f62\u3002\u5982<code>-g</code>\u7b49\u4ef7\u4e8e<code>-g2</code></li> <li><code>level 0</code> \uff1a\u4e0d\u4ea7\u751f\u4efb\u4f55\u8c03\u8bd5\u4fe1\u606f\u3002<code>-g0</code> \u5426\u5b9a <code>-g</code>\uff0c\u4e5f\u5c31\u76f8\u5f53\u4e8e\u6ca1\u6709\u6307\u5b9a<code>-g</code>\u9009\u9879\u3002\uff08gdb\u8c03\u8bd5\u65f6\u63d0\u793ano debugging symbols found\uff09</li> <li><code>level 1</code> \uff1a\u4ea7\u751f\u7684\u4fe1\u606f\u6700\u5c11\uff0c\u4e0d\u5305\u542b\u5c40\u90e8\u53d8\u91cf\u548c\u4e0e\u884c\u53f7\u6709\u5173\u7684\u8c03\u8bd5\u4fe1\u606f\uff0c\u56e0\u6b64\u53ea\u80fd\u591f\u7528\u4e8e\u56de\u6eaf\u8ddf\u8e2a\u548c\u5806\u6808\u8f6c\u50a8\u4e4b\u7528\u3002\u56de\u6eaf\u8ddf\u8e2a\u6307\u7684\u662f\u76d1\u89c6\u7a0b\u5e8f\u5728\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u7684\u51fd\u6570\u8c03\u7528\u5386\u53f2\uff0c\u5806\u6808\u8f6c\u50a8\u5219\u662f\u4e00\u79cd\u4ee5\u539f\u59cb\u7684\u5341\u516d\u8fdb\u5236\u683c\u5f0f\u4fdd\u5b58\u7a0b\u5e8f\u6267\u884c\u73af\u5883\u7684\u65b9\u6cd5\uff0c\u4e24\u8005\u90fd\u662f\u7ecf\u5e38\u7528\u5230\u7684\u8c03\u8bd5\u624b\u6bb5\u3002</li> <li><code>level 2</code> \uff1a\u5141\u8bb8\u4f7f\u7528\u53ea\u6709 GDB \u53ef\u4ee5\u4f7f\u7528\u7684\u989d\u5916\u8c03\u8bd5\u4fe1\u606f\uff0c\u8c03\u8bd5\u4fe1\u606f\u5305\u62ec\u6269\u5c55\u7684\u7b26\u53f7\u8868\u3001\u884c\u53f7\u3001\u5c40\u90e8 \u6216\u5916\u90e8\u53d8\u91cf\u4fe1\u606f\u3002\uff08\u9ed8\u8ba4\u7ea7\u522b\uff09</li> <li><code>level 3</code> \uff1a\u4e0d\u4ec5\u5305\u62ec<code>level 2</code>\u7684\u6240\u6709\u5185\u5bb9\uff0c\u8fd8\u652f\u6301\u6e90\u4ee3\u7801\u4e2d\u5b9a\u4e49\u7684\u5b8f\u3002</li> </ul> </li> <li><code>-gbtf</code>\uff1aBTF \u8c03\u8bd5\u4fe1\u606f\u3002 BTF \u662f eBPF \u76ee\u6807\u7684\u9ed8\u8ba4\u8c03\u8bd5\u683c\u5f0f\u3002\u5728\u5176\u4ed6\u76ee\u6807\uff08\u5982 x86\uff09\u4e0a\uff0c\u5f53\u901a\u8fc7\u5404\u81ea\u7684\u547d\u4ee4\u884c\u9009\u9879\u663e\u5f0f\u542f\u7528\u4e24\u79cd\u8c03\u8bd5\u683c\u5f0f\u65f6\uff0c\u53ef\u4ee5\u751f\u6210 BTF \u8c03\u8bd5\u4fe1\u606f\u4ee5\u53ca DWARF \u8c03\u8bd5\u4fe1\u606f\u3002</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#5_1","title":"5 \u4f18\u5316\u9009\u9879","text":"<pre><code>\u66f4\u591a\u4f18\u5316\u9009\u9879\u53c2\u8003\u5b98\u65b9\u6587\u6863https://gcc.gnu.org/onlinedocs/gcc-12.2.0/gcc/Optimize-Options.html#Optimize-Options\n</code></pre> <ul> <li><code>-O0</code>\uff1a\u4e0d\u8fdb\u884c\u4f18\u5316\uff08\u9ed8\u8ba4\u9009\u9879\uff09</li> <li><code>-O</code>\u6216<code>-O1</code>\uff1a\u7f16\u8bd1\u5668\u4f1a\u5c1d\u8bd5\u51cf\u5c11\u4ee3\u7801\u5927\u5c0f\u548c\u6267\u884c\u65f6\u95f4\uff0c\u4f46\u4e0d\u6267\u884c\u4efb\u4f55\u9700\u8981\u5927\u91cf\u7f16\u8bd1\u65f6\u95f4\u7684\u4f18\u5316\u3002</li> <li><code>-O2</code>\uff1aGCC \u6267\u884c\u51e0\u4e4e\u6240\u6709\u652f\u6301\u7684\u4f18\u5316\uff08\u4e0d\u6d89\u53ca\u7a7a\u95f4\u901f\u5ea6\uff09\u3002</li> <li><code>-O3</code>\uff1a\u66f4\u8fd1\u4e00\u6b65\u7684\u4f18\u5316</li> <li><code>-Os</code>\uff1a\u4f18\u5316\u5927\u5c0f\u3002 -Os \u542f\u7528\u6240\u6709 -O2 \u4f18\u5316\uff0c\u9664\u4e86\u90a3\u4e9b\u7ecf\u5e38\u589e\u52a0\u4ee3\u7801\u5927\u5c0f\u7684\u4f18\u5316\uff1a</li> <li><code>-Og</code>\uff1a\u4f18\u5316\u8c03\u8bd5\u4f53\u9a8c\u3002\u5bf9\u4e8e\u751f\u6210\u53ef\u8c03\u8bd5\u4ee3\u7801\u6765\u8bf4\uff0c\u5b83\u662f\u6bd4 -O0 \u66f4\u597d\u7684\u9009\u62e9\uff0c\u56e0\u4e3a\u5728 -O0 \u5904\u7981\u7528\u4e86\u4e00\u4e9b\u6536\u96c6\u8c03\u8bd5\u4fe1\u606f\u7684\u7f16\u8bd1\u5668\u901a\u9053\u3002\u5426\u5219 -Og \u542f\u7528\u6240\u6709 -O1 \u4f18\u5316\u6807\u5fd7\uff0c\u9664\u4e86\u90a3\u4e9b\u53ef\u80fd\u5e72\u6270\u8c03\u8bd5\u7684\u6807\u5fd7\u3002\uff08\u8c03\u8bd5\u5efa\u8bae\u9009\u62e9\uff09</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#6_1","title":"6 \u73af\u5883\u53d8\u91cf","text":""},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#61-c_include_pathcplus_include_pathcpath","title":"6.1 C_INCLUDE_PATH\u3001CPLUS_INCLUDE_PATH\u3001CPATH","text":"<ul> <li><code>C_INCLUDE_PATH</code>\u3001<code>CPLUS_INCLUDE_PATH</code>\u3001<code>CPATH</code> \u73af\u5883\u53d8\u91cf\u7528\u4e8e C/C++ \u641c\u7d22 include \u76ee\u5f55  <ul> <li><code>C_INCLUDE_PATH</code> \u53ea\u5bf9\u9884\u5904\u7406 C\u8bed\u8a00\u6709\u6548\uff0c</li> <li><code>CPLUS_INCLUDE_PATH</code> \u53ea\u5bf9\u9884\u5904\u7406 C++ \u6709\u6548</li> <li><code>CPATH</code> \u5bf9\u4e24\u8005\u90fd\u6709\u6548\u3002</li> </ul> </li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/GCC/#3-c-gcc","title":"3 C++ \u6807\u51c6\u5e93\u7684\u5728 GCC \u7684\u652f\u6301","text":"<ul> <li>C++ Standards Support in GCC</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/","title":"gdb\u6559\u7a0b","text":""},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#11","title":"1.1 \u57fa\u672c\u8c03\u8bd5\u6307\u4ee4","text":"<p>(gdb)\u8868\u793a\u5df2\u8fdb\u5165\u8c03\u8bd5\u7a0b\u5e8f\uff0c\u4e0d\u4ee3\u8868\u5b9e\u9645\u6307\u4ee4\uff0c[command]\u4e2d\u8868\u793a\u6307\u4ee4\u7684\u5168\u62fc 1. \u8fdb\u5165gdb\u8c03\u8bd5\uff1a<code>gdb \u53ef\u6267\u884c\u7a0b\u5e8f</code> 2. \u8bbe\u7f6e\u53c2\u6570\u3010\u53ef\u9009\u3011\uff1a<code>set args \u53c2\u65701 \u53c2\u65702 ... \u53c2\u6570n</code> 3. \u5f00\u59cb\u6267\u884c\u7a0b\u5e8f (start \u5c06\u4f1a\u5728\u7a0b\u5e8f\u5165\u53e3 main \u51fd\u6570\u6253\u65ad\u70b9\uff0c\u518d\u8fd0\u884c run \u505c\u5728 main \u51fd\u6570\u4e0a)\uff1a<code>(gdb) start</code> 4. \u5217\u51fa\u5e26\u884c\u53f7\u7684\u6e90\u4ee3\u7801\uff08\u8fd0\u884c\u5904\u4e0a\u4e0b\u51e0\u884c\uff09\uff1a<code>(gdb) l[list]</code> 5. \u6253\u65ad\u70b9\uff1a<code>(gdb) b[break] \u884c\u53f7</code> 6. (\u91cd\u65b0)\u8fd0\u884c\u7a0b\u5e8f\u5230\u4e0b\u4e00\u4e2a\u65ad\u70b9\u5904\u505c\u6b62\uff1a<code>(gdb) r[run]</code> 7. \u7ee7\u7eed\u5230\u4e0b\u4e00\u4e2a\u65ad\u70b9\u5904\u505c\u4e0b\uff1a<code>(gdb) c[continue]</code> 8. \u5f80\u4e0b\u6267\u884c\u4e00\u884c\u4ee3\u7801\uff08\u9047\u5230\u51fd\u6570\u4e0d\u8fdb\u5165\u51fd\u6570\u5185\u90e8\uff09\uff1a<code>(gdb) n[next]</code> 9. \u5f80\u4e0b\u6267\u884c\u4e00\u884c\u4ee3\u7801\uff08\u9047\u5230\u51fd\u6570\u8fdb\u5165\u51fd\u6570\u5185\u90e8\uff09\uff1a<code>(gdb) s[step]</code> 10. \u6253\u5370\u53d8\u91cf\u503c\uff1a<code>(gdb) p[print] \u53d8\u91cf\u540d</code> 11. \u7ec8\u6b62\u8c03\u8bd5\uff1a<code>(gdb) q[quit]</code></p>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#12-break","title":"1.2 break\u65ad\u70b9","text":""},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#121","title":"1.2.1 \u6253\u65ad\u70b9","text":"<p>\u67093\u79cd\u65b9\u5f0f\u8bbe\u7f6e\u65ad\u70b9\uff1a 1. \u6839\u636e\u51fd\u6570\u540d:<code>b \u547d\u540d\u7a7a\u95f4::\u51fd\u6570\u540d</code>    1. <code>b nm::fun</code> 2. \u6839\u636e\u884c\u53f7:<code>b \u3010\u6587\u4ef6\u540d\uff08\u542b\u8def\u5f84\uff09\u3011:\u884c\u53f7</code>    1. <code>b src/test.cc:30</code> 3. \u6839\u636e\u5730\u5740:<code>b *\u5730\u5740</code>    1. <code>b *0x67aa88</code></p>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#122","title":"1.2.2 \u5220\u9664\u65ad\u70b9","text":"<ol> <li><code>delete [bp number]</code>:\u4e0d\u6307\u5b9a\u65ad\u70b9\u53f7\uff0c\u5c06\u5220\u9664\u6240\u6709\u65ad\u70b9</li> <li><code>clear [bp number]</code>:\u4e0d\u6307\u5b9a\u65ad\u70b9\u53f7\uff0c\u5c06\u5220\u9664\u6240\u6709\u65ad\u70b9</li> </ol>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#123","title":"1.2.3 \u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6\u65ad\u70b9\u4fe1\u606f","text":"<ol> <li>\u5c06\u65ad\u70b9\u4fe1\u606f\u4fdd\u5b58\u5230\u6307\u5b9a\u6587\u4ef6\uff1a<code>save breakpoints file-name-to-save</code></li> <li>\u4ece\u6307\u5b9a\u6587\u4ef6\u8bfb\u53d6\u65ad\u70b9\u4fe1\u606f\uff1a<code>source file-name-to-save</code></li> </ol>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#124-tbreak","title":"1.2.4 tbreak","text":"<ul> <li>\u529f\u80fd\uff1a\u4e00\u6b21\u6027\u65ad\u70b9\uff0c\u89e6\u53d1\u4e00\u6b21\u540e\u5c31\u4f1a\u81ea\u52a8\u5220\u9664</li> <li>\u8bed\u6cd5\uff1a<code>tbreak\u00a0args</code></li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#13","title":"1.3 \u8c03\u7528\u6307\u5b9a\u51fd\u6570","text":"<ol> <li>\u4f7f\u7528call\u6216print\u6765\u6267\u884c\u51fd\u6570:<code>(gdb) call sleep(1)</code>\u6216\u8005<code>(gdb) printf sleep(1)</code></li> </ol>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#14","title":"1.4 \u5806\u6808\u5e27","text":"<ul> <li>\u89e3\u91ca\uff1aGDB \u8c03\u8bd5\u5668\u4f1a\u6309\u7167\u65e2\u5b9a\u89c4\u5219\u5bf9\u5b83\u4eec\u8fdb\u884c\u7f16\u53f7\uff1a\u5f53\u524d\u6b63\u88ab\u8c03\u7528\u51fd\u6570\u5bf9\u5e94\u7684\u6808\u5e27\u7684\u7f16\u53f7\u4e3a 0\uff0c\u8c03\u7528\u5b83\u7684\u51fd\u6570\u5bf9\u5e94\u6808\u5e27\u7684\u7f16\u53f7\u4e3a 1\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002</li> <li>\u67e5\u770b\u5f53\u524d\u5806\u6808\u4fe1\u606f\uff1a<code>(gdb) bt</code></li> <li>\u8df3\u5230\u5806\u6808\u67d0\u4e00\u5e27\u51fd\u6570\uff1a<code>(gdb) f[frame] \u5806\u6808\u5e27\u7f16\u53f7</code></li> <li>\u57fa\u4e8e\u5f53\u524d\u5e27\u524d\u8fdb\u4e00\u4e2a\u5e27\uff08\u5373\u5e27\u7f16\u53f7+1\uff09\uff1a<code>(gbd) up [number\u9ed8\u8ba41]</code></li> <li>\u57fa\u4e8e\u5f53\u524d\u5e27\u540e\u9000\u4e00\u4e2a\u5e27\uff08\u5373\u5e27\u7f16\u53f7-1\uff09\uff1a<code>(gdb) down [number\u9ed8\u8ba41]</code></li> <li>\u67e5\u770b\u5f53\u524d\u5e27\u5b58\u50a8\u7684\u4fe1\u606f\uff1a<code>(gdb) info frame</code></li> <li>\u67e5\u770b\u5f53\u524d\u5e27\u51fd\u6570\u53c2\u6570\u503c\uff1a<code>(gdb) info args</code></li> <li>\u67e5\u770b\u5f53\u524d\u5e27\u5c40\u90e8\u53d8\u91cf\u503c\uff1a<code>(gdb) info locals</code></li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#15-info","title":"1.5 info\u67e5\u770b\u4fe1\u606f","text":"<p>info\u7b80\u5199\u662fi 1. \u6253\u5370\u6240\u6709\u51fd\u6570\u540d\u79f0\uff1a<code>(gdb) info functions</code> 2. \u6253\u5370\u5f53\u524d\u51fd\u6570\u5c40\u90e8\u53d8\u91cf\uff1a<code>(gdb) info locals</code> 3. \u6253\u5370\u5f53\u524d\u51fd\u6570\u5806\u6808\u5e27\u4fe1\u606f\uff1a<code>(gdb) info frame</code> 4. \u6253\u5370\u5bc4\u5b58\u5668\u4fe1\u606f\uff1a<code>(gdb) info registers</code> 5. \u6253\u5370\u7ebf\u7a0b\u4fe1\u606f\uff1a<code>(gdb) info threads</code> 6. \u6253\u5370\u8fdb\u7a0b\u4fe1\u606f\uff1a<code>(gdb) info inferiors</code></p>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#16","title":"1.6 \u8c03\u8bd5\u8fd0\u884c\u4e2d\u7684\u8fdb\u7a0b","text":"<ol> <li>\u5728\u7ec8\u7aef\u8f93\u5165gdb\u8fdb\u5165gdb\u6a21\u5f0f\uff1a<code>gdb</code></li> <li>\u8fde\u63a5\u8fd0\u884c\u4e2d\u7684\u8fdb\u7a0b(\u6307\u5b9a\u8fdb\u7a0bid)\uff1a<code>(gdb) attach processID</code></li> <li>\u4f7f\u7528\u5176\u5b83\u8c03\u8bd5\u6307\u4ee4</li> </ol>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#17","title":"1.7 \u8bbe\u7f6e\u8c03\u8bd5\u7a0b\u5e8f\u7684\u53c2\u6570","text":"<p>\u67093\u79cd\u65b9\u5f0f\u53ef\u4ee5\u8bbe\u7f6e\u7a0b\u5e8f\u53c2\u6570\uff1a 1. \u542f\u52a8gdb\u65f6\uff1a\u5982<code>$ gdb -args ./a.out a b c</code> 2. \u8fdb\u5165gdb\u540e\uff1a\u5982<code>(gdb) set args a b c</code> 3. run\u65f6\uff1a\u5982<code>(gdb) run a b c</code></p>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#171","title":"1.7.1 \u663e\u793a\u53c2\u6570","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>(gdb) show args</code></li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#18","title":"1.8 \u8c03\u8bd5\u591a\u8fdb\u7a0b","text":""},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#181","title":"1.8.1 \u663e\u793a\u8fdb\u7a0b","text":"<ul> <li><code>(gdb) info inferiors</code>\uff1a\u67e5\u770b\u6240\u6709\u8fdb\u7a0b</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#182","title":"1.8.2 \u5207\u6362\u8fdb\u7a0b\u8c03\u8bd5","text":"<ul> <li><code>(gdb) inferiors \u8fdb\u7a0b\u7f16\u53f7</code>\uff1a\u5207\u6362\u5230\u67d0\u4e00\u4e2a\u8fdb\u7a0b\u4e0a\u8fdb\u884c\u8c03\u8bd5</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#183","title":"1.8.3 \u7236\u5b50\u8fdb\u7a0b\u8c03\u8bd5\u5207\u6362","text":"<ul> <li><code>(gdb) set follow-fork-mode parent</code>\uff1a\u8c03\u8bd5\u7236\u8fdb\u7a0b\uff08\u9ed8\u8ba4\u884c\u4e3a\uff09</li> <li><code>(gdb) set follow-fork-mode child</code>\uff1a\u8c03\u8bd5\u5b50\u8fdb\u7a0b</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#184","title":"1.8.4 \u591a\u8fdb\u7a0b\u8fd0\u884c\u6a21\u5f0f","text":"<ul> <li><code>(gdb) set detach-on-fork on</code>\uff1a\u8c03\u8bd5\u5f53\u524d\u8fdb\u7a0b\u65f6\uff0c\u5176\u5b83\u8fdb\u7a0b\u4e5f\u4f1a\u6267\u884c</li> <li><code>(gdb) set detach-on-fork off</code>\uff1a\u8c03\u8bd5\u5f53\u524d\u8fdb\u7a0b\u65f6\uff0c\u5176\u5b83\u8fdb\u7a0b\u6682\u505c\u6267\u884c</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#185","title":"1.8.5 \u663e\u793a\u8fdb\u7a0b\u8c03\u8bd5\u6a21\u5f0f","text":"<ul> <li><code>(gdb) show detach-on-fork</code>\uff1a\u663e\u793a\u591a\u8fdb\u7a0b\u8fd0\u884c\u6a21\u5f0f<ul> <li>on\uff1a\u8868\u793a\u8c03\u8bd5\u5f53\u524d\u8fdb\u7a0b\u65f6\uff0c\u5176\u5b83\u8fdb\u7a0b\u4e5f\u4f1a\u6267\u884c</li> <li>off\uff1a\u8868\u793a\u8c03\u8bd5\u5f53\u524d\u8fdb\u7a0b\u65f6\uff0c\u5176\u5b83\u8fdb\u7a0b\u6682\u505c\u6267\u884c</li> </ul> </li> <li><code>(gdb) show follow-fork-mode</code>\uff1a\u663e\u793a\u8c03\u8bd5\u7236\u8fdb\u7a0b\u8fd8\u662f\u5b50\u8fdb\u7a0b<ul> <li>parent\uff1a\u8c03\u8bd5\u7236\u8fdb\u7a0b</li> <li>child\uff1a\u8c03\u8bd5\u5b50\u8fdb\u7a0b</li> </ul> </li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#19","title":"1.9 \u8c03\u8bd5\u591a\u7ebf\u7a0b","text":""},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#191","title":"1.9.1 \u663e\u793a\u7ebf\u7a0b","text":"<ol> <li><code>(gdb) info threads</code></li> </ol>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#192","title":"1.9.2 \u5207\u6362\u7ebf\u7a0b","text":"<ol> <li><code>(gdb) thread id</code></li> </ol>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#193","title":"1.9.3 \u5355\u8fdb\u7a0b\u4e0b\u7ebf\u7a0b\u8fd0\u884c\u6a21\u5f0f","text":"<p>\u9ed8\u8ba4\u6211\u4eec\u8c03\u8bd5\u7ebf\u7a0b\u65f6\uff0c\u6240\u6709\u7ebf\u7a0b\u90fd\u4f1a\u6267\u884c\uff0c\u5982\u679c\u6211\u4eec\u53ea\u60f3\u8981\u5f53\u524d\u7ebf\u7a0b\u6267\u884c\uff0c\u53ef\u4ee5\u5982\u4e0b\u8bbe\u7f6e\u3002 - <code>(gdb) set scheduler-locking [on|off|step]</code>     - off\uff1a\u4e0d\u9501\u5b9a\u4efb\u4f55\u7ebf\u7a0b\uff0c\u4e5f\u5c31\u662f\u6240\u6709\u7ebf\u7a0b\u90fd\u6267\u884c\u3002     - on\uff1a\u9501\u5b9a\u5f53\u524d\u7ebf\u7a0b\uff0c\u4f7f\u7528next\u3001step\u53ea\u6709\u5f53\u524d\u7ebf\u7a0b\u4f1a\u6267\u884c\u3002      - step\uff1a\u5728\u6267\u884c step \u7684\u65f6\u5019\uff0c\u53ea\u6709\u5f53\u524d\u7ebf\u7a0b\u4f1a\u6267\u884c\uff0c\u6267\u884c next \u65f6\uff0c\u6240\u6709\u7ebf\u7a0b\u90fd\u4f1a\u6267\u884c (\u8fd9\u662f\u9ed8\u8ba4\u503c)\u3002</p>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#194","title":"1.9.4 \u591a\u8fdb\u7a0b\u4e0b\u7ebf\u7a0b\u8fd0\u884c\u6a21\u5f0f","text":"<ul> <li>\u5f53\u67d0\u4e2a\u7a0b\u5e8f\u6709\u591a\u4e2a\u8fdb\u7a0b\u65f6\uff08inferior\uff09\uff0c\u4e14\u6bcf\u4e00\u4e2a\u8fdb\u7a0b\u6709\u591a\u4e2a\u7ebf\u7a0b\u65f6\uff0c\u9ed8\u8ba4\u53ea\u4f1a\u6267\u884c\u5f53\u524d\u8fdb\u7a0b\u4e0b\u7684\u7ebf\u7a0b\u3002</li> <li><code>(gdb) set schedule-multiple on</code>\uff1a\u540c\u65f6\u8fd0\u884c\u6240\u6709\u8fdb\u7a0b\u7684\u6240\u6709\u7ebf\u7a0b\uff08\u524d\u63d0scheduler-locking \u662foff\u72b6\u6001\uff0c\u6216\u8005step\u65f6\uff0c\u4e0d\u662f\u4f7f\u7528step\u547d\u4ee4\u8fd0\u884c\uff09</li> <li><code>(gdb) set schedule-multiple off</code>\uff1a\u5176\u5b83\u8fdb\u7a0b\u7684\u7ebf\u7a0b\u4e0d\u4f1a\u8fd0\u884c\uff08\u9ed8\u8ba4\u884c\u4e3a\uff09</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#195","title":"1.9.5 \u67e5\u770b\u7ebf\u7a0b\u6a21\u5f0f","text":"<ol> <li><code>(gdb) show scheduler-locking</code></li> <li><code>(gdb) show schedule-multiple</code></li> </ol>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#110-watch","title":"1.10 watch\u76d1\u542c\u53d8\u91cf","text":"<ul> <li>\u529f\u80fd\uff1a\u5f53\u4e00\u4e2a\u76d1\u542c\u7684\u53d8\u91cf\u503c\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u7a0b\u5e8f\u4f1a\u5728\u89e6\u53d1\u53d8\u91cf\u6539\u53d8\u7684\u4f4d\u7f6e\u5904\u6682\u505c\uff0c\u65b9\u4fbf\u77e5\u9053\u53d8\u91cf\u503c\u662f\u88ab\u90a3\u4e00\u6bb5\u4ee3\u7801\u4fee\u6539\u7684\u3002</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#1101","title":"1.10.1 \u6dfb\u52a0\u76d1\u542c\u70b9","text":"<ul> <li><code>(gdb) watch variable</code>\uff1a\u6307\u5b9a\u76d1\u63a7\u7684\u53d8\u91cf\u540d</li> <li><code>(gdb) watch *(data type*)address</code>\uff1a\u6307\u5b9a\u76d1\u63a7\u7684\u53d8\u91cf\u5730\u5740</li> <li>\u793a\u4f8b</li> </ul> <pre><code>(gdb) watch file_size\nHardware watchpoint 3: file_size\n(gdb) p &amp;file_size\n$1 = (uint64_t *) 0x7fffffffd228\n(gdb) watch *(uint64_t *) 0x7fffffffd228\nHardware watchpoint 2: *(uint64_t *) 0x7fffffffd228\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#1102","title":"1.10.2 \u663e\u793a\u76d1\u542c\u70b9\u5217\u8868","text":"<ul> <li><code>(gdb) info watchpoints</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>(gdb) info watchpoints\nNum     Type           Disp Enb Address            What\n2       hw watchpoint  keep y                      *(uint64_t *) 0x7fffffffd228\n3       hw watchpoint  keep y                      file_size\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#1103","title":"1.10.3 \u5220\u9664\u76d1\u542c\u70b9","text":"<pre><code>\u76d1\u542c\u70b9\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u65ad\u70b9\uff0c\u5220\u9664\u76d1\u542c\u70b9\u548c\u5220\u9664\u65ad\u70b9\u7684\u65b9\u6cd5\u4e00\u6837\u3002\n</code></pre> <ul> <li><code>(gdb) d watchpoints</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>(gdb) info b\nNum     Type           Disp Enb Address            What\n1       breakpoint     keep y   0x0000000000432273 in rocksdb::EnvNcdfsTest_Basics_Test::TestBody() at env_ncdfs_gtest.cc:79\n        breakpoint already hit 1 time\n2       hw watchpoint  keep y                      *(uint64_t *) 0x7fffffffd228\n3       hw watchpoint  keep y                      file_size\n(gdb) d 2\n(gdb) d 3\n(gdb) info watchpoints\nNo watchpoints.\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#111","title":"1.11 \u6c47\u7f16","text":""},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#1111","title":"1.11.1 \u663e\u793a\u6c47\u7f16\u4ee3\u7801","text":"<ul> <li>\u8bed\u6cd5\uff1a<ul> <li><code>disassemble position</code>\uff1a\u53ea\u663e\u793a\u6c47\u7f16\u4ee3\u7801</li> <li><code>disassemble -r position</code>\uff1a\u663e\u793a\u539f\u751f\u6307\u4ee4</li> <li><code>disassemble -m position</code>\uff1a\u6e90\u7801\u548c\u6c47\u7f16\u540c\u65f6\u663e\u793a\uff08\u4e0d\u63a8\u8350\u4f7f\u7528\uff0c\u5c06\u6765\u4f1a\u5e9f\u5f03\uff0c\u5b58\u5728inline\u51fd\u6570\u663e\u793a\u4e0d\u5168\u7684\u95ee\u9898\uff09</li> <li><code>disassemble -s position</code>\uff1a\u6e90\u7801\u548c\u6c47\u7f16\u540c\u65f6\u663e\u793a\uff08\u63a8\u8350\u4f7f\u7528\uff09</li> </ul> </li> <li>\u6307\u5b9a\u7684\u6c47\u7f16\u4f4d\u7f6eposition\u6709\u4ee5\u4e0b\u51e0\u79cd\u683c\u5f0f<ul> <li><code>function</code>\uff1a\u5982 <code>disassemble main</code></li> <li><code>addr-start,addr-end</code>\uff1a\u5982<code>disassemble 0x32c4,0x32d4</code></li> <li><code>addr-start+length</code>\uff1a\u5982<code>disassemble &amp;main+10</code>\u3001<code>disassemble $pc - 8</code></li> </ul> </li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#1112","title":"1.11.2 \u5207\u6362\u6c47\u7f16\u6307\u4ee4\u683c\u5f0f","text":"<pre><code>\u5f53\u4eca\u67092\u4e2d\u6c47\u7f16\u6307\u4ee4\u683c\u5f0f\uff1a\n1. Intel \n2. AT&amp;T\n</code></pre> <p>\u793a\u4f8b\uff1aIntel\u548cAT&amp;T\u683c\u5f0f\u6bd4\u8f83</p> <pre><code>\u529f\u80fd\uff1a\u7ed9eax\u5bc4\u5b58\u5668\u8d4b\u503c1\n\nIntel:\n      add eax, 1\n\nAT&amp;T:\n      addl $1, %eax\n</code></pre> <ul> <li>\u8bed\u6cd5\uff1a<ul> <li><code>set disassembly-flavor intel</code>\uff1a\u542f\u7528Intel\u6307\u4ee4\u683c\u5f0f</li> <li><code>set disassembly-flavor att</code>\uff1a\u542f\u7528AT&amp;T\u6307\u4ee4\u683c\u5f0f</li> </ul> </li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#1113","title":"1.11.3 \u663e\u793a\u6c47\u7f16\u6307\u4ee4\u683c\u5f0f","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>show disassembly-flavor</code></li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#112-command","title":"1.12 command","text":"<ul> <li>\u529f\u80fd\uff1a\u4e3a\u4efb\u4f55\u65ad\u70b9\uff08\u6216\u89c2\u5bdf\u70b9\u6216\u6355\u83b7\u70b9\uff09\u63d0\u4f9b\u4e00\u7cfb\u5217\u547d\u4ee4\uff0c\u4ee5\u4fbf\u5728\u7a0b\u5e8f\u56e0\u8be5\u65ad\u70b9\u800c\u505c\u6b62\u65f6\u6267\u884c\u3002\u4f8b\u5982\uff0c\u60a8\u53ef\u80fd\u60f3\u8981\u6253\u5370\u67d0\u4e9b\u8868\u8fbe\u5f0f\u7684\u503c\uff0c\u6216\u542f\u7528\u5176\u4ed6\u65ad\u70b9\u3002</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#1121-command","title":"1.12.1 \u7f16\u5199\u65ad\u70b9\u7684command\u4ee3\u7801","text":"<ul> <li>\u8bed\u6cd5\uff1a<ol> <li>\u4ee5<code>command</code>\u5f00\u59cb\uff0c\u4ee5<code>end</code>\u7ed3\u675f\u3002\uff08command\u540e\u4e0d\u52a0\u65ad\u70b9\u53f7\uff0c\u9ed8\u8ba4\u662f\u6700\u8fd1\u6dfb\u52a0\u7684\u4e00\u4e2a\u65ad\u70b9\uff09</li> <li><code>silent</code>\uff1a\u5fc5\u987b\u662f\u7b2c\u4e00\u6761\u547d\u4ee4\uff0c\u8868\u793a\u5230\u8fbe\u65ad\u70b9\u65f6\u4e0d\u6253\u5370\u65ad\u70b9\u5904\u7684\u4ee3\u7801\u4fe1\u606f\u3002</li> <li>``</li> </ol> </li> </ul> <pre><code>(gdb) commands\u00a0[list\u2026]\n\u2026\u00a0command-list\u00a0\u2026\nend\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>(gdb) command\nType commands for breakpoint(s) 1, one per line.\nEnd with a line saying just \"end\".\n&gt;silent\n&gt;set variable n = 0\n&gt;continue\n&gt;end\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#11211-silent","title":"1.12.1.1 silent\u793a\u4f8b","text":"<ul> <li>\u793a\u4f8b\uff1a\u5176\u4e2d\u7b2c\u4e00\u6761\u65f6\u4e0d\u5e26silent\u89e6\u53d1\u65ad\u70b9\uff0c\u7b2c2\u6761\u65f6\u4f7f\u7528\u4e86silent\u65f6\u7684\u6267\u884c\uff0c2\u6761command\u90fd\u4f1a\u6253\u5370i\u7684\u503c</li> </ul> <pre><code>(gdb) \n\nBreakpoint 3, rocksdb::EnvNcdfsTest_EBasics_Test::TestBody (this=0xf77970) at env_ncdfs_gtest.cc:654\n654         std::string dir = v[i];\ni = 0\n(gdb) n\ni = 0\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#11212","title":"1.12.1.2 \u8f93\u51fa\u6307\u4ee4","text":"<ul> <li>\u5b98\u65b9\u6587\u6863</li> <li><code>echo\u00a0text</code>\uff1a\u6bd4\u5982<code>echo This is some text\\n</code></li> <li><code>printf\u00a0template,\u00a0expressions\u2026</code>\uff1a\u6bd4\u5982<code>printf \"foo, bar-foo = 0x%x, 0x%x\\n\", foo, bar-foo</code></li> <li><code>output\u00a0expression</code></li> <li><code>eval\u00a0template,\u00a0expressions\u2026</code></li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#1122-command","title":"1.12.2 \u663e\u793a\u65ad\u70b9\u7684command\u4ee3\u7801","text":"<ul> <li><code>info break</code>\uff1a\u67e5\u770b\u65ad\u70b9\u4fe1\u606f\uff0c\u5982\u679c\u6709command\uff0c\u5c31\u4f1a\u663e\u793a\u51fa\u6765</li> <li>\u793a\u4f8b</li> </ul> <pre><code>(gdb) i b\nNum     Type           Disp Enb Address            What\n1       breakpoint     keep y   0x000000000043d48d in rocksdb::EnvNcdfsTest_EBasics_Test::TestBody() at env_ncdfs_gtest.cc:647\n        breakpoint already hit 1 time\n        silent\n        printf \"EnvNcdfsTest, EBasics\"\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#1123-command","title":"1.12.3 \u5220\u9664\u65ad\u70b9\u7684command\u4ee3\u7801","text":"<ul> <li>\u5728<code>command</code>\u540e\u7acb\u5373<code>end</code>\uff0c\u5c31\u4f1a\u5220\u9664\u7aef\u70b9\u7684command\u4ee3\u7801</li> <li>\u793a\u4f8b</li> </ul> <pre><code>(gdb) commands 3\nType commands for breakpoint(s) 3, one per line.\nEnd with a line saying just \"end\".\n&gt;end\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#113","title":"1.13 \u56fe\u5f62\u5316\u8c03\u8bd5\u754c\u9762","text":"<ul> <li>\u65b9\u6cd5\u4e00\uff1a\u542f\u52a8gbd\u65f6\u6307\u5b9a<code>-tui</code>\u53c2\u6570\uff0c\u5982<code>gdb -tui program</code></li> <li>\u65b9\u6cd5\u4e8c\uff1a\u8fdb\u5165\u8c03\u8bd5\u540e\uff0c\u6309<code>Crlt + X + A</code>\u7ec4\u5408\u952e</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#1131-4","title":"1.13.1 4\u79cd\u7a97\u53e3\u7c7b\u578b","text":"<ul> <li><code>src</code>\uff1a\u6e90\u7801\u7a97\u53e3</li> <li><code>cmd</code>\uff1a\u547d\u4ee4\u7a97\u53e3\uff08\u8f93\u5165gdb\u6307\u4ee4\u7684\u7a97\u53e3\uff0c\u9ed8\u8ba4\u53ea\u6253\u5f00\u8fd9\u4e2a\u7a97\u53e3\uff09</li> <li><code>asm</code>\uff1a\u6c47\u7f16\u4ee3\u7801\u7a97\u53e3</li> <li><code>regs</code>\uff1a\u5bc4\u5b58\u5668\u7a97\u53e3</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#1132-layout","title":"1.13.2 layout\u663e\u793a\u7a97\u53e3","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>(gdb) layout\u00a0name</code>\uff0c\u53ef\u4f7f\u7528\u7684name\u5982\u4e0b<ul> <li><code>next</code>\uff1a\u663e\u793a\u4e0b\u4e00\u4e2a\u7a97\u53e3</li> <li><code>prev</code>\uff1a\u663e\u793a\u4e0a\u4e00\u4e2a\u7a97\u53e3</li> <li><code>src</code>\uff1a\u663e\u793a\u6e90\u7801\u7a97\u53e3\u3001\u547d\u4ee4\u7a97\u53e3</li> <li><code>asm</code>\uff1a\u663e\u793a\u6c47\u7f16\u4ee3\u7801\u7a97\u53e3\u3001\u547d\u4ee4\u7a97\u53e3</li> <li><code>split</code>\uff1a\u663e\u793a\u6e90\u7801\u7a97\u53e3\u3001\u6c47\u7f16\u7a97\u53e3\u3001\u547d\u4ee4\u7a97\u53e3</li> <li><code>regs</code>\uff1a<ul> <li>\u5f53\u5728\u00a0<code>src</code>\u00a0\u5e03\u5c40\u65f6\uff0c\u663e\u793a\u5bc4\u5b58\u5668\u7a97\u53e3\u3001\u6e90\u7801\u7a97\u53e3\u3001\u547d\u4ee4\u7a97\u53e3</li> <li>\u5f53\u5728\u00a0<code>asm</code>\u00a0or\u00a0<code>split</code>\u00a0\u5e03\u5c40\u65f6\uff0c\u663e\u793a\u5bc4\u5b58\u5668\u7a97\u53e3\u3001\u6c47\u7f16\u7a97\u53e3\u3001\u547d\u4ee4\u7a97\u53e3</li> </ul> </li> </ul> </li> </ul> <p>When in\u00a0<code>src</code>\u00a0layout display the register, source, and command windows. When in\u00a0<code>asm</code>\u00a0or\u00a0<code>split</code>\u00a0layout display the register, assembler, and command windows.</p>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#1133-winheight","title":"1.13.3 winheight\u8c03\u6574\u7a97\u53e3\u5927\u5c0f","text":"<ul> <li>\u8bed\u6cd5\uff1a<ul> <li><code>(gdb) winheight win_name + count</code>\uff1a\u7a97\u53e3\u589e\u52a0count\u884c</li> <li><code>(gdb) winheight win_name - count</code>\uff1a\u7a97\u53e3\u51cf\u5c11count\u884c</li> <li><code>win_name</code>\u67094\u79cd\uff1a<code>src</code>\u3001<code>cmd</code>\u3001<code>asm</code>\u548c<code>regs</code></li> </ul> </li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#1134-focus-tui","title":"1.13.4 focus\u66f4\u6539\u5f53\u524d\u53ef\u6eda\u52a8\u7684 TUI \u7a97\u53e3","text":"<pre><code>\u5f53\u542f\u52a8\u591a\u4e2a\u7a97\u53e3\u65f6\uff0c\u53ea\u80fd\u6709\u4e00\u4e2a\u7a97\u53e3\u662f\u5904\u4e8e\u53ef\u6eda\u52a8\u72b6\u6001\uff0c\u5982\u679c\u6b64\u65f6\u9700\u8981\u5207\u6362\u6eda\u52a8\u7a97\u53e3\uff0c\u53ef\u4f7f\u7528focus\u547d\u4ee4\u8fdb\u884c\u5207\u6362\n</code></pre> <ul> <li>\u8bed\u6cd5\uff1a<code>(gdb) focus\u00a0name</code>\uff0c\u53ef\u4f7f\u7528\u7684name\u5982\u4e0b<ul> <li><code>next</code>\uff1a\u4f7f\u4e0b\u4e00\u4e2a\u7a97\u53e3\u6fc0\u6d3b\u6eda\u52a8</li> <li><code>prev</code>\uff1a\u4f7f\u4e0a\u4e00\u4e2a\u7a97\u53e3\u6fc0\u6d3b\u6eda\u52a8</li> <li><code>src</code>\uff1a\u4f7f\u6e90\u7801\u7a97\u53e3\u6fc0\u6d3b\u6eda\u52a8</li> <li><code>asm</code>\uff1a\u4f7f\u6c47\u7f16\u4ee3\u7801\u7a97\u53e3\u6fc0\u6d3b\u6eda\u52a8</li> <li><code>regs</code>\uff1a\u4f7f\u5bc4\u5b58\u5668\u7a97\u53e3\u6fc0\u6d3b\u6eda\u52a8</li> <li><code>cmd</code>\uff1a\u4f7f\u547d\u4ee4\u7a97\u53e3\u6fc0\u6d3b\u6eda\u52a8</li> </ul> </li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#1135-refresh","title":"1.13.5 refresh\u5237\u65b0\u7a97\u53e3","text":"<p>\u5f53\u4ee3\u7801\u4e2d\u6709\u6253\u5370\u6d88\u606f\u5230\u63a7\u5236\u53f0\u64cd\u4f5c\u65f6\uff0c\u4f1a\u6c61\u67d3\u7a97\u53e3\uff0c\u6b64\u65f6\u4f7f\u7528refresh\u53ef\u4ee5\u5237\u65b0\u7a97\u53e3\u3002 - \u8bed\u6cd5<code>(gdb) refresh</code></p>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#114","title":"1.14 \u6253\u5370\u53d8\u91cf\u503c","text":""},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#1141-stl","title":"1.14.1 \u6253\u5370STL\u6570\u636e","text":""},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#11411-python","title":"1.14.1.1 \u5b89\u88c5Python\u63d2\u4ef6","text":"<ol> <li>Python\u63d2\u4ef6\u83b7\u53d6<ol> <li>\u4ecegithub\u4e0a\u4e0b\u8f7d\u5de5\u5177libstdc++-v3/python</li> <li>\u6216\u8005\u4ecegcc\u6e90\u7801\u5305\u6839\u76ee\u5f55\u4e0blibstdc++-v3/python\uff08\u5728\u9ad8\u7248\u672cgcc\u4e0a\u6709\uff09</li> </ol> </li> <li>\u7f16\u5199<code>~/.gdbinit</code>\u6587\u4ef6,\u5176\u4e2d<code>sys.path.insert</code>\u4e2d\u8def\u5f84\u6539\u4e3a\u63d2\u4ef6\u8def\u5f84</li> </ol> <pre><code>python\nimport sys\nsys.path.insert(0, '/gcc-12.2.0/libstdc++-v3/python')\nfrom libstdcxx.v6.printers import register_libstdcxx_printers\nregister_libstdcxx_printers (None)\nend\n</code></pre> <ol> <li>\u5728\u8fdb\u5165gdb\u6a21\u5f0f\u4e0b\uff0c\u53ef\u4ee5\u4f7f\u7528<code>p \u53d8\u91cf\u540d</code>\u6765\u6253\u5370STL\u6570\u636e</li> </ol>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#1142-ptype","title":"1.14.2 ptype\u6253\u5370\u5bf9\u8c61\u7c7b\u578b","text":"<ol> <li><code>ptype \u5bf9\u8c61\u540d</code></li> <li>\u793a\u4f8b</li> </ol> <pre><code>(gdb) ptype mm\ntype = std::map&lt;unsigned long, std::map&lt;unsigned int, unsigned int&gt;&gt;\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#115","title":"1.15 \u9ad8\u7ea7\u8c03\u8bd5\u6280\u672f","text":""},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#1151-coredump","title":"1.15.1 \u8c03\u8bd5coredump\u6587\u4ef6","text":"<ol> <li><code>gdb \u53ef\u6267\u884c\u7a0b\u5e8f core\u6587\u4ef6</code></li> <li><code>bt</code>\u6216<code>where</code>\u67e5\u770b\u5806\u6808\u4fe1\u606f</li> </ol>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#1152","title":"1.15.2 \u4fee\u6539\u53d8\u91cf\u503c","text":"<ul> <li>\u8bed\u6cd5\uff1a<ul> <li><code>set var variable=expr</code>\uff0c\u6bd4\u5982\uff1a<code>set var i=1</code></li> <li><code>set {type}address=expr</code>\uff0c\u6bd4\u5982\uff1a<code>set {int}0x8047a54 = 1</code>\uff0c\u5176\u4e2d0x8047a54\u5730\u5740\u6307\u5411\u7684int\u7c7b\u578b</li> <li>\u540c\u6837\u4e5f\u53ef\u4ee5\u4fee\u6539\u5bc4\u5b58\u5668\u7684\u503c\uff0c\u6bd4\u5982\uff1a<code>set var $eax = 8</code></li> </ul> </li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#1153","title":"1.15.3 \u6761\u4ef6\u65ad\u70b9","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>break \u2026 if\u00a0cond</code></li> <li>\u793a\u4f8b\uff1a<code>break 20 if i==1</code>\uff1a\u5728\u5f53\u524d\u6587\u4ef6\u7b2c20\u884c\u4e14\u53d8\u91cf<code>i==1</code>\u65f6\uff0c\u89e6\u53d1\u65ad\u70b9</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#1154","title":"1.15.4 \u8df3\u8f6c\u6307\u5b9a\u4f4d\u7f6e","text":"<pre><code>\u8df3\u8f6c\u547d\u4ee4\u4e0d\u4f1a\u6539\u53d8\u5f53\u524d\u5806\u6808\u5e27\u3001\u5806\u6808\u6307\u9488\u3001\u4efb\u4f55\u5185\u5b58\u4f4d\u7f6e\u6216\u9664\u7a0b\u5e8f\u8ba1\u6570\u5668\u4e4b\u5916\u7684\u4efb\u4f55\u5bc4\u5b58\u5668\u7684\u5185\u5bb9\u3002\n</code></pre> <p><code>jump</code>\u7684\u7b80\u5199\u662f<code>j</code> \u8df3\u8f6c\u5230\u6307\u5b9a\u884c\uff08\u901a\u5e38\u7528\u4e8e\u9519\u8fc7\u4e86\u8c03\u8bd5\u70b9\uff0c\u9700\u8981\u56de\u6eaf\uff09</p> <pre><code># \u5148\u6253\u65ad\u70b9\uff0c\u518d\u8df3\u8f6c\n(gdb) b linenum\n(gdb) j linenum\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#1155","title":"1.15.5 \u91cd\u65b0\u52a0\u8f7d\u7a0b\u5e8f","text":"<ul> <li>\u4f7f\u7528\u573a\u666f\uff1a\u5f53\u4fee\u6539\u4e86\u6e90\u4ee3\u7801\uff0c\u7f16\u8bd1\u751f\u6210\u4e86\u65b0\u7684\u5e93\u6216\u8005\u7a0b\u5e8f\u65f6\uff0c\u91cd\u65b0\u52a0\u8f7d\u3002</li> <li>\u65b9\u6cd5\uff1a<ul> <li>\u6267\u884c <code>run</code> \u6216 <code>start</code> \u547d\u4ee4\uff0c\u91cd\u65b0\u6267\u884c\uff0c\u540c\u65f6\u4f1a\u63d0\u793a\u91cd\u65b0\u52a0\u8f7d\u5e93\u6216\u7a0b\u5e8f\u3002</li> <li>\u6216\u8005\u4f7f\u7528 <code>file \u7a0b\u5e8f/\u5e93</code> \u91cd\u65b0\u52a0\u8f7d\u3002</li> </ul> </li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/gdb%E6%95%99%E7%A8%8B/#2","title":"2 \u7b80\u5199\u6c47\u603b","text":"<ul> <li><code>run</code>&lt;=&gt;<code>r</code>\uff1a\u91cd\u65b0\u8fd0\u884c\u7a0b\u5e8f\uff0c\u5728\u7b2c\u4e00\u4e2a\u65ad\u70b9\u5904\u6682\u505c\u3002</li> <li><code>start</code>\uff1a\u91cd\u65b0\u8fd0\u884c\u7a0b\u5e8f\uff0c\u5728\u7a0b\u5e8f\u5165\u53e3main\u5904\u6682\u505c</li> <li><code>step</code>&lt;=&gt;<code>s</code>\uff1a\u5355\u6b65\u8c03\u8bd5\uff0c\u8fdb\u5165\u51fd\u6570\u5185\u90e8</li> <li><code>next</code>&lt;=&gt;<code>n</code>\uff1a\u5355\u6b65\u8c03\u8bd5\uff0c\u4e0d\u8fdb\u5165\u51fd\u6570\u5185\u90e8</li> <li><code>continue</code>&lt;=&gt;<code>c</code>\uff1a\u7ee7\u7eed\u6267\u884c\uff0c\u5728\u4e0b\u4e00\u4e2a\u65ad\u70b9\u5904\u6682\u505c</li> <li><code>jump</code>&lt;=&gt;<code>j</code>\uff1a\u8df3\u8f6c\u4ee3\u7801</li> <li><code>info</code>&lt;=&gt;<code>i</code>\uff1a\u663e\u793a\u4fe1\u606f</li> <li><code>break</code>&lt;=&gt;<code>b</code>\uff1a\u6253\u65ad\u70b9</li> <li><code>list</code>&lt;=&gt;<code>l</code>\uff1a\u663e\u793a\u5f53\u524d\u6267\u884c\u4f4d\u7f6e\u5904\u4e0a\u4e0b5\u884c\u4ee3\u7801</li> <li><code>frame</code>&lt;=&gt;<code>f</code>\uff1a\u5207\u6362\u5806\u6808</li> <li><code>delete</code>&lt;=&gt;<code>d</code>\uff1a\u5220\u9664\u65ad\u70b9</li> <li><code>print</code>&lt;=&gt;<code>p</code>\uff1a\u6253\u5370\u8868\u8fbe\u5f0f\u503c</li> <li><code>until</code>&lt;=&gt;<code>u</code>\uff1a</li> <li><code>backtrace</code>&lt;=&gt;<code>bt</code>\uff1a\u67e5\u770b\u5806\u6808\u4fe1\u606f</li> <li><code>focus</code>&lt;=&gt;<code>fs</code>\uff1a\u5207\u6362\u6fc0\u6d3b\u7a97\u53e3\u7684\u6eda\u52a8</li> <li><code>watch</code>&lt;=&gt;<code>wa</code>\uff1a</li> <li><code>awatch</code>&lt;=&gt;<code>aw</code></li> <li><code>rwatch</code>&lt;=&gt;<code>rw</code></li> <li><code>ignore</code>&lt;=&gt;<code>ig</code></li> <li><code>stepi</code>&lt;=&gt;<code>si</code></li> <li><code>tbreak</code>&lt;=&gt;<code>tb</code></li> <li><code>finish</code>&lt;=&gt;<code>fin</code></li> <li><code>nexti</code>&lt;=&gt;<code>ni</code></li> <li><code>winheight</code>&lt;=&gt;<code>win</code>\uff1a\u8df3\u8f6c\u7a97\u53e3\u5927\u5c0f</li> <li><code>directory</code>&lt;=&gt;<code>dir</code></li> <li><code>disassemble</code>&lt;=&gt;<code>disas</code> </li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/","title":"shell\u6559\u7a0b","text":"<ul> <li>Google Style</li> <li>Google Style \u4e2d\u6587</li> <li>Google Shell\u98ce\u683c\u6307\u5357</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#11-set","title":"1.1 set\u53c2\u6570\u8bbe\u7f6e","text":"<ul> <li><code>set -u</code>\uff1a\u5982\u679c\u6709\u4e0d\u5b58\u5728\u7684\u53d8\u91cf\uff0c\u6253\u5370\u9519\u8bef\u4fe1\u606f\uff0c\u5e76\u9000\u51fa</li> <li><code>set -x</code>\uff1a\u5728\u6267\u884c\u547d\u4ee4\u524d\uff0c\u6253\u5370\u6267\u884c\u7684\u547d\u4ee4</li> <li><code>set +x</code>\uff1a\u53d6\u6d88<code>set -x</code>\u7684\u6548\u679c</li> <li><code>set -e</code>\uff1a\u5982\u679c\u547d\u4ee4\u6267\u884c\u9519\u8bef\uff0c\u6253\u5370\u9519\u8bef\u4fe1\u606f\uff0c\u5e76\u9000\u51fa\uff08\u4e0d\u9002\u5408\u7ba1\u9053\uff09</li> <li><code>set -o pipefail</code>\uff1a\u5bf9<code>set -e</code>\u7684\u8865\u5145\uff0c\u7ba1\u9053\u547d\u4ee4\u6267\u884c\u9519\u8bef\uff0c\u6253\u5370\u62a5\u9519\u4fe1\u606f\uff0c\u5e76\u9000\u51fa</li> </ul> <p>\u4ee5\u4e0a\u547d\u4ee4\u53ef\u4ee5\u6574\u5408\u4e00\u8d77\u5199\uff0c\u5982<code>set -uxe</code></p>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#12-exit","title":"1.2 exit \u8bbe\u7f6e\u9000\u51fa\u7801","text":"<p>\u811a\u672c\u9ed8\u8ba4\u9000\u51fa\u7801\u662f\u6700\u540e\u4e00\u4e2ashell\u6307\u4ee4\u6267\u884c\u7ed3\u679c\uff0c\u53ef\u4ee5\u4f7f\u7528exit \u9000\u51fa\u811a\u672c\u5e76\u8fd4\u56de\u9000\u51fa\u7801\u3002 - \u793a\u4f8b</p> <pre><code>echo hello\nexit 0\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#13","title":"1.3 \u53d8\u91cf\u548c\u5e38\u91cf","text":"<p>\u547d\u540d\u89c4\u8303\uff1a\u5e38\u91cf\u5168\u5927\u5199\uff0c\u53d8\u91cf\u5c0f\u5199 - \u5e38\u91cf\uff1a<code>readonly</code>+\u5e38\u91cf\u540d - \u5220\u9664\u53d8\u91cf\uff1a<code>unset</code>+\u53d8\u91cf\u540d\uff08\u4e0d\u80fd\u5220\u9664\u5e38\u91cf\uff09 - \u8bfb\u53d8\u91cf\uff1a   - ${\u53d8\u91cf\u540d}   - $\u53d8\u91cf\u540d - \u4fee\u6539\u53d8\u91cf\u503c\uff1a\u53d8\u91cf\u540d=\u53d8\u91cf\u65b0\u503c</p> <pre><code>#!/bin/bash\n# \u53d8\u91cf\n\nstr=\"hello world!\"\necho ${str}\n\n# \u5e38\u91cf\nreadonly IVALUE=10\necho \"\u5e38\u91cf\"${IVALUE}\n\n# \u53d6\u6d88\u53d8\u91cf\nunset str\necho ${str}\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#131","title":"1.3.1 \u5c40\u90e8\u53d8\u91cf","text":"<ul> <li>\u5c40\u90e8\u53d8\u91cf\u7528<code>local</code>\u6807\u8bc6\uff0c\u4e00\u822c\u7528\u4e8e\u51fd\u6570</li> </ul> <pre><code>hello() {\nlocal str=\"hello\"\necho $str\n}\nhello\necho \"\\$str=$str\"\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#132","title":"1.3.2 \u53d8\u91cf\u66ff\u6362","text":"<ul> <li><code>${var:-word}</code> \u5982\u679c\u53d8\u91cf var \u4e3a\u7a7a\u6216\u5df2\u88ab\u5220\u9664(unset)\uff0c\u90a3\u4e48\u8fd4\u56de word\uff0c\u4f46\u4e0d\u6539\u53d8 var\u7684\u503c\u3002</li> <li><code>${var:=word}</code> \u5982\u679c\u53d8\u91cf var \u4e3a\u7a7a\u6216\u5df2\u88ab\u5220\u9664(unset)\uff0c\u90a3\u4e48\u8fd4\u56de word\uff0c\u5e76\u5c06 var \u7684\u503c\u8bbe\u7f6e\u4e3a word\u3002</li> <li><code>${var:?message}</code> \u5982\u679c\u53d8\u91cf var \u4e3a\u7a7a\u6216\u5df2\u88ab\u5220\u9664(unset)\uff0c\u90a3\u4e48\u5c06\u6d88\u606f message \u9001\u5230\u6807\u51c6\u9519\u8bef\u8f93\u51fa\uff0c\u53ef\u4ee5\u7528\u6765\u68c0\u6d4b\u53d8\u91cf var \u662f\u5426\u53ef\u4ee5\u88ab\u6b63\u5e38\u8d4b\u503c\u3002\u82e5\u6b64\u66ff\u6362\u51fa\u73b0\u5728Shell\u811a\u672c\u4e2d\uff0c\u90a3\u4e48\u811a\u672c\u5c06\u505c\u6b62\u8fd0\u884c\u3002</li> <li><code>${var:+word}</code> \u5982\u679c\u53d8\u91cf var \u88ab\u5b9a\u4e49\uff0c\u90a3\u4e48\u8fd4\u56de word\uff0c\u4f46\u4e0d\u6539\u53d8 var \u7684\u503c\u3002</li> </ul> <pre><code>$ echo ${val:-hello};echo $val\nhello\n\n$ echo ${val:=hello};echo $val\nhello\nhello\n$ echo ${val:+world};echo $val\nworld\nhello\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#133-1","title":"1.3.3 \u7279\u6b8a\u53d8\u91cf<code>($$ $1 $* $@ $# $?)</code>","text":"<pre><code>#!/bin/bash\n# \u7279\u6b8a\u53d8\u91cf\necho \"\\$0\u811a\u672c\u540d \"$0\necho \"\\$$\u811a\u672c\u8fdb\u7a0bID \"$$\necho \"\\$n\u811a\u672c\u7b2cn\u4e2a\u53c2\u6570,\\$1\u811a\u672c\u7b2c\u4e00\u4e2a\u53c2\u6570 \"$1\necho \"\\$#\u811a\u672c\u53c2\u6570\u4e2a\u6570\"$#\necho \"\\$*\u811a\u672c\u6240\u6709\u53c2\u6570 \"$*\necho \"\\$@\u811a\u672c\u6240\u6709\u53c2\u6570 \"$@\necho \"\\$?\u4e0a\u4e00\u4e2a\u811a\u672c\u6267\u884c\u7ed3\u679c\"$?\n</code></pre> <p>\u5f53<code>$*</code>\u88ab\u53cc\u5f15\u53f7\u5305\u88f9\u65f6\uff0c\u5c06\u662f\u4e00\u4e2a\u6574\u4f53\uff0c\u8fd9\u65f6\u4e0e<code>$@</code>\u6709\u70b9\u4e0d\u540c</p> <pre><code>#!/bin/bash\n# test.sh\nfor val in \"$@\"\ndo\necho val\ndone\nfor val in \"$*\"\ndo\necho val\ndone\n</code></pre> <p>\u6267\u884c\u811a\u672c\u7ed3\u679c\u5982\u4e0b<code>$*</code>\u88ab\u5f53\u6210\u4e00\u4e2a\u6574\u4f53\u88ab\u8f93\u51fa</p> <pre><code>$ ./test.sh 1 2 3 4 5\n1\n2\n3\n4\n5\n1 2 3 4 5\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#14","title":"1.4 {}\u7684\u4f7f\u7528","text":""},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#141-val1val2valn","title":"1.4.1 {val1,val2,...,valn}\u7528\u6cd5","text":"<ul> <li>\u529f\u80fd\uff1a\u5c55\u5f00\u96c6\u5408\u4e2d\u5217\u51fa\u7684\u5143\u7d20</li> </ul> <pre><code>$ echo file{1,2,3}\nfile1 file2 file3\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#142-startendstep","title":"1.4.2 {start..end..step}\u7528\u6cd5","text":"<ul> <li>\u529f\u80fd\uff1a\u5c55\u5f00\u96c6\u5408\u8303\u56f4\u4e2d\u5143\u7d20\uff0c\u5e76\u4e14\u53ef\u4ee5\u6307\u5b9a\u6b65\u957f</li> </ul> <pre><code>$ echo file{0..3}\nfile0 file1 file2 file3\n$ echo {0..10..2}\n0 2 4 6 8 10\n</code></pre> <ul> <li>\u901a\u5e38\u7528\u4e8efor in\u5faa\u73af\u4e2d</li> </ul> <pre><code>$ for i in {0..5};do echo file$i ;done\nfile0\nfile1\nfile2\nfile3\nfile4\nfile5\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#15","title":"1.5 \u7279\u6b8a\u7b26\u53f7\u4f7f\u7528","text":""},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#151","title":"1.5.1 $()\u3001``\u8bfb\u53d6\u547d\u4ee4\u7ed3\u679c","text":"<ul> <li><code>$()</code>\u548c``\u90fd\u662f\u7528\u6765\u6267\u884c\u547d\u4ee4\u540e\u63d0\u53d6\u6267\u884c\u7ed3\u679c\u5230\u53d8\u91cf\u4e2d\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ a=`echo \"hello\"`\n$ echo $a\nhello\n$ b=$(echo \"hello\")\n$ echo $b\nhello\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#152","title":"1.5.2 ${ }","text":"<ul> <li><code>${var}</code>\u53ef\u4ee5\u83b7\u53d6\u53d8\u91cf\u7684\u503c\uff0c\u4f5c\u7528\u540c<code>$var</code>\u3002\u6b64\u65f6<code>${var}</code>\u76f8\u8f83\u4e8e<code>$var</code>\u7684\u597d\u5904\u65f6\u53ef\u4ee5\u660e\u786e\u53d8\u91cf\u540dvar\u7684\u754c\u9650</li> <li>\u793a\u4f8b\uff1a\u4e0b\u9762\u793a\u4f8b\u7531\u4e8e\u53d8\u91cf\u540d\u88ab\u8ba4\u4e3a\u662fbb\uff0c\u5bfc\u81f4\u89e3\u6790\u7ed3\u679c\u9519\u8bef</li> </ul> <pre><code>$ b=\"hello\"\n[here4@web17 bin]$ echo $bb\n\n[here4@web17 bin]$ echo ${b}\nhello\n</code></pre> <ul> <li><code>${}</code>\u66f4\u9ad8\u7ea7\u7684\u7528\u6cd5\u662f\u7528\u4e8e\u5b57\u7b26\u4e32\u7684\u64cd\u4f5c\uff0c\u6bd4\u5982\u622a\u53d6\u5b50\u4e32\u3002<code>${var:1:3}</code></li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#153","title":"1.5.3 <code>$[]</code>\u548c$(())","text":"<ul> <li><code>$[]</code>\u548c<code>$(())</code>\u90fd\u53ef\u4ee5\u7528\u6765\u8ba1\u7b97<code>+-*/%</code>\uff0c\u4f46\u53ea\u80fd\u8ba1\u7b97\u6574\u6570\u3002\u4e00\u822c\u63a8\u8350\u4f7f\u7528\u540e\u8005</li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ echo $[1+4/2]\n3\n$ echo $((1+4/2))\n3\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#16","title":"1.6 \u8fd0\u7b97\u7b26","text":""},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#161","title":"1.6.1 \u7b97\u672f\u8fd0\u7b97\u7b26","text":"<ul> <li>\u6574\u5f62\u8ba1\u7b97\uff1a\u5229\u7528<code>((\u8868\u8fbe\u5f0f))</code>\u8bed\u6cd5\u8ba1\u7b97\uff0c\u6216\u8005\u4f7f\u7528linux\u4e0a\u5b89\u88c5\u7684\u53ef\u6267\u884c\u8ba1\u7b97\u6587\u4ef6\uff0c\u5982<code>expr</code></li> <li>\u6d6e\u70b9\u8fd0\u7b97\uff1a\u4f7f\u7528<code>bc</code>\u8ba1\u7b97</li> <li><code>scale</code>\u6307\u5b9a\u7cbe\u5ea6\uff0c\u5982<code>scale=6</code>,\u4ee3\u8868\u4fdd\u7559\u5c0f\u6570\u70b9\u540e6\u4f4d</li> </ul> <pre><code>#!/bin/bash\n#\u7b97\u672f\u8fd0\u7b97\n\n##\u6574\u5f62\u8fd0\u7b97\na=$((1 + 2))\n((b = 1 + 2))\necho \"a=\\$((1+2)),a=$a\"\necho \"((b=1+2))=$b\"\n\n##\u6d6e\u70b9\u578b\u8fd0\u7b97 \u4f7f\u7528echo+\u7ba1\u9053\u7ed9bc\u4f20\u8868\u8fbe\u5f0f\necho \"scale=6;3.12*4.65/3\" | bc\na=$(echo \"scale=6;3.12*4.65/3\" | bc)\necho $a\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#162","title":"1.6.2 \u5173\u7cfb\u8fd0\u7b97\u7b26","text":"<ul> <li>\u4f7f\u7528<code>[]</code>\u6216<code>[[]]</code>\uff08<code>[]</code>\u5373test\u6307\u4ee4\u7684\u7b26\u53f7\u8868\u793a\uff0c<code>[[]]</code>\u662f<code>[]</code>\u7684\u52a0\u5f3a\u7248\uff09</li> <li>\u8868\u8fbe\u5f0f\u4e0e<code>[]</code>\u4e4b\u95f4\u8981\u7a7a\u683c\u9694\u5f00</li> <li>\u6bd4\u8f83\u7b26\u5982<code>-lt -ge</code>\u9700\u8981\u4e0e\u6bd4\u8f83\u6570\u7528\u7a7a\u683c\u9694\u5f00</li> <li><code>[]</code>\u4e5f\u53ef\u4ee5\u6d4b\u8bd5\u6587\u4ef6\u5c5e\u6027\uff0c\u5177\u4f53\u8bf7\u770b<code>test</code>\u6587\u6863</li> </ul> <pre><code>#!/bin/bash\n#\u5173\u7cfb\u8fd0\u7b97\n\n##\u6574\u5f62\u6570\u503c\u6bd4\u8f83\na=1\nb=3\nif [ $a -lt $b ]; then\necho \"$a&lt;$b=true\"\nelse\necho \"$a&lt;$b=false\"\nfi\n##\u5b57\u7b26\u4e32\u6bd4\u8f83\nstr1=\"hello\"\nstr2=\"world\"\nif [ $str1 != $str2 ]; then\necho \"$str1!=$str2=true\"\nelse\necho \"$str1!=$str2=false\"\nfi\n## bool\u8fd0\u7b97\u7b26-a\u4e14\uff0c-o\u6216\uff0c!\u975e\nif [ $a -lt $b -a $str1 != $str2 ]; then\necho \"$a -lt $b -a $str1 != $str2 \u6761\u4ef6\u5168\u771f\"\nelse\necho \"\u975e\u5168\u771f\"\nfi\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#17","title":"1.7 \u5b57\u7b26\u4e32","text":""},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#171-3","title":"1.7.1 \u5b57\u7b26\u4e323\u79cd\u8868\u8fbe\u5f62\u5f0f","text":"<ul> <li><code>\u53d8\u91cf\u540d=str</code>:\u5b57\u7b26\u4e32\u4e0d\u7528\u5f15\u53f7\u5305\u88f9</li> <li>\u4e0d\u88ab\u5f15\u53f7\u5305\u56f4\u7684\u5b57\u7b26\u4e32\u4e2d\u51fa\u73b0\u53d8\u91cf\u65f6\u4e5f\u4f1a\u88ab\u89e3\u6790\uff0c\u8fd9\u4e00\u70b9\u548c\u53cc\u5f15\u53f7\" \"\u5305\u56f4\u7684\u5b57\u7b26\u4e32\u4e00\u6837\u3002</li> <li>\u5b57\u7b26\u4e32\u4e2d\u4e0d\u80fd\u51fa\u73b0\u7a7a\u683c\uff0c\u5426\u5219\u7a7a\u683c\u540e\u8fb9\u7684\u5b57\u7b26\u4e32\u4f1a\u4f5c\u4e3a\u5176\u4ed6\u53d8\u91cf\u6216\u8005\u547d\u4ee4\u89e3\u6790\u3002</li> <li><code>\u53d8\u91cf\u540d='str'</code>:\u5b57\u7b26\u4e32\u7528\u5355\u5f15\u53f7\u5305\u88f9</li> <li>\u4efb\u4f55\u5b57\u7b26\u90fd\u4f1a\u539f\u6837\u8f93\u51fa\uff0c\u5728\u5176\u4e2d\u4f7f\u7528\u53d8\u91cf\u662f\u65e0\u6548\u7684\u3002</li> <li>\u5b57\u7b26\u4e32\u4e2d\u4e0d\u80fd\u51fa\u73b0\u5355\u5f15\u53f7\uff0c\u5373\u4f7f\u5bf9\u5355\u5f15\u53f7\u8fdb\u884c\u8f6c\u4e49\u4e5f\u4e0d\u884c\u3002</li> <li><code>\u53d8\u91cf\u540d=\"str\"</code>:\u5b57\u7b26\u4e32\u7528\u53cc\u5f15\u53f7\u5305\u88f9</li> <li>\u5982\u679c\u5176\u4e2d\u5305\u542b\u4e86\u67d0\u4e2a\u53d8\u91cf\uff0c\u90a3\u4e48\u8be5\u53d8\u91cf\u4f1a\u88ab\u89e3\u6790\uff08\u5f97\u5230\u8be5\u53d8\u91cf\u7684\u503c\uff09\uff0c\u800c\u4e0d\u662f\u539f\u6837\u8f93\u51fa\u3002</li> <li>\u5b57\u7b26\u4e32\u4e2d\u53ef\u4ee5\u51fa\u73b0\u53cc\u5f15\u53f7\uff0c\u53ea\u8981\u5b83\u88ab\u8f6c\u4e49\u4e86\u5c31\u884c\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code># \u811a\u672c\u6587\u4ef6 str.sh\nurl=https://www.baidu.com/index.html\necho \"url:$url\"\necho 'url:$url'\necho url:$url\n# \u6267\u884c\u7ed3\u679c\n$ sh str.sh\nurl:https://www.baidu.com/index.html\nurl:$url\nurl:https://www.baidu.com/index.html\n</code></pre> <p>https://blog.csdn.net/ITlinuxP/article/details/79060822</p>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#172","title":"1.7.2 \u5b57\u7b26\u4e32\u957f\u5ea6","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>${#words}</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ echo $url\nhttps://www.baidu.com/index.html\n$ echo ${#url}\n32\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#173","title":"1.7.3 \u5b57\u7b26\u4e32\u62fc\u63a5","text":"<p>\u8bed\u6cd5\u5f62\u5f0f\uff1a\u5c06\u5b57\u7b26\u4e32\u7d27\u5bc6\u76f8\u8fde\uff08\u4e2d\u95f4\u4e0d\u7559\u7a7a\u683c\uff09\uff0c\u6216\u8005\u7528\u53cc\u5f15\u53f7\u5305\u88f9\uff08\u53ef\u4ee5\u7528\u7a7a\u683c\uff09 - \u793a\u4f8b:\u4e0b\u4f8b\u4e2dp3\u53d8\u91cf\u8d4b\u503c\u4e2dstr1\u548cstr2\u4e2d\u95f4\u6709\u4e2a\u7a7a\u683c\uff0c\u5bfc\u81f4str2\u88ab\u89e3\u6790\u6210\u547d\u4ee4</p> <pre><code>$ cat -n str.sh 1  str1=hello\n     2  str2=world\n     3\n4  p1=$str1$str2\n5  p2=\"$str1 str2\"\n6  p3=$str1 $str2\n7\n8  echo $p1\n9  echo $p2\n10  echo $p3\n$ sh vim.txt \nvim.txt: line 6: world: command not found\nhelloworld\nhello str2\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#174","title":"1.7.4 \u6307\u5b9a\u4f4d\u7f6e\u548c\u6570\u91cf\u622a\u53d6","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>0-</code>\u662f\u524d\u7f00\u662f\u6307\u4ece\u53f3\u5f80\u5de6\u6570\u4f4d\u7f6e</li> <li><code>${words:num_start:num_end}</code>:\u4ece\u7b2cnum_start\u4e2a\u5b57\u7b26\u5f00\u59cb\u622a\u53d6num_end\u4e2a\u5b57\u7b26</li> <li><code>${words:num_start}</code>:\u4ece\u7b2cnum_start\u4e2a\u5b57\u7b26\u5f00\u59cb\u622a\u53d6\u5230\u6700\u540e\u4e00\u4e2a\u5b57\u7b26</li> <li><code>${words:0-num_start:num_end}</code>:\u4ece\u5012\u6570\u7b2cnum_start\u4e2a\u5b57\u7b26\u5f00\u59cb\u622a\u53d6num_end\u4e2a\u5b57\u7b26</li> <li><code>${words:0-num_start}</code>:\u4ece\u5012\u6570\u7b2cnum_start\u4e2a\u5b57\u7b26\u5f00\u59cb\u622a\u53d6\u5230\u6700\u540e\u4e00\u4e2a\u5b57\u7b26</li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ echo $url\nhttps://www.baidu.com/index.html\n$ echo ${url:8:3}\nwww\n$ echo ${url:8}\nwww.baidu.com/index.html\n$ echo ${url:0-8:3}\ndex\n$ echo ${url:0-8}\ndex.html\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#175","title":"1.7.5 \u5339\u914d\u5b57\u7b26\u4e32\u622a\u53d6","text":""},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#1751","title":"1.7.5.1 \u4ece\u5de6\u5f80\u53f3\u67e5\u627e","text":"<p>\u6ce8\u610f\uff1a<code>#</code>\u8868\u793a\u4ece\u5de6\u5f80\u53f3\u6a21\u5f0f\uff0c\u5176\u4e2d<code>*</code>\u8868\u793a\u901a\u914d\u7b26 - \u8bed\u6cd5:   - <code>${str#substr}</code>:\u5339\u914d\u4ee5<code>substr</code>\u5f00\u5934\u7684\u5b57\u7b26\u4e32\uff0c\u518d\u622a\u53d6substr\u540e\u5230\u7ed3\u5c3e\u7684\u5b57\u7b26\u4e32   - <code>${str#*substr}</code>:\u5339\u914d\u7b2c\u4e00\u6b21\u51fa\u73b0<code>substr</code>\u7684\u5b57\u7b26\u4e32\uff0c\u518d\u622a\u53d6substr\u540e\u5230\u7ed3\u5c3e\u7684\u5b57\u7b26\u4e32   - <code>${str##*substr}</code>:\u5339\u914d\u6700\u540e\u4e00\u6b21\u51fa\u73b0<code>substr</code>\u7684\u5b57\u7b26\u4e32\uff0c\u518d\u622a\u53d6substr\u540e\u5230\u7ed3\u5c3e\u7684\u5b57\u7b26\u4e32 - \u793a\u4f8b</p> <pre><code>$ echo ${url}\nhttps://www.baidu.com/index.html\n$ echo ${url#https}\n://www.baidu.com/index.html\n$ echo ${url#*/}\n/www.baidu.com/index.html\n$ echo ${url##*/}\nindex.html\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#1752","title":"1.7.5.2 \u4ece\u53f3\u5f80\u5de6\u67e5\u627e","text":"<p>\u6ce8\u610f\uff1a<code>%</code>\u8868\u793a\u4ece\u5de6\u5f80\u53f3\u6a21\u5f0f\uff0c\u5176\u4e2d<code>*</code>\u8868\u793a\u901a\u914d\u7b26 - \u529f\u80fd\uff1a\u4ecewords1\u4e2d\u67e5\u627e\u9996\u6b21\u51fa\u73b0words2\u540e\u7684\u5b57\u7b26\u5230\u7ed3\u5c3e\u5b57\u7b26 - \u793a\u4f8b</p> <pre><code>\n</code></pre> <ul> <li><code>${#str}</code>\u548c<code>${str:1:3}</code>\u5206\u522b\u6c42\u5b57\u7b26\u4e32\u957f\u5ea6\u548c\u622a\u53d6\u5b57\u7b26\u4e32\u5b50\u4e32</li> <li><code>test</code>\u4e5f\u53ef\u4ee5\u64cd\u4f5c\u5b57\u7b26\u4e32\uff0c\u529f\u80fd\u66f4\u591a</li> </ul> <pre><code>#!/bin/bash\n#\u5b57\u7b26\u4e32\u64cd\u4f5c\n\nstr=\"hello\"\necho \"${str}\u957f\u5ea6=${#str}\"\necho \"${str}\u4ece\u7d22\u5f151\u5f00\u59cb3\u5b57\u7b26\u4e32=${str:1:3}\"\necho \"${str}\u4ece\u7d22\u5f151\u5f00\u59cb\u5b50\u4e32=${str:1}\"\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#18","title":"1.8 \u6570\u7ec4","text":"<p>\u6570\u7ec4\u7d22\u5f15\u4ece0\u5f00\u59cb - \u6570\u7ec4\u8d4b\u503c   - <code>array=(val1 val2 ... valn)</code>   - <code>array=([index1]=val1 [index2]=val2 [index3]=val3)</code>:index\u53ef\u4ee5\u4e0d\u662f\u8fde\u7eed\u7684\uff0c\u6bd4\u5982\uff1a<code>ages=([3]=24 [5]=19 [10]=12)</code>   - <code>array[0]=val1;array[1]=val2;...;array[n-1]=valn</code>   - \u6ce8\u610f\u4e8b\u9879\uff1a\u6570\u7ec4\u503c\u4e4b\u95f4\u7528\u7a7a\u683c\u9694\u5f00 - \u6570\u7ec4\u5927\u5c0f   - <code>${#array[@]}</code>   - <code>${#array[*]}</code> - \u6570\u7ec4\u5168\u90e8\u6570\u636e   - <code>${array[@]}</code>   - <code>${array[*]}</code> - \u67d0\u4e00\u7d22\u5f15\u6570\u636e   - <code>${array[0]}</code></p> <pre><code>#!/bin/bash\nset -xeu\n# \u6570\u7ec4\n\narray1=(1 2 3 4 5)\necho ${#array1[@]}\necho \"${array1[3]}\"\necho \"${array1[*]}\"\necho \"${array1[@]}\"\n\narray2=(\n1\n2\n3\n4\n5\n)\narray3[0]=1\narray3[3]=4\narray3[4]=5\necho \"${#array3[*]}\"\necho \"${array3[0]}\"\necho \"${array3[1]}\"\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#19","title":"1.9 \u6761\u4ef6\u8bed\u53e5","text":""},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#191-if","title":"1.9.1 if\u6761\u4ef6\u8bed\u53e5","text":"<ul> <li><code>if...then...elif...then...else...fi</code>,\u5176\u4e2d<code>if</code>\u548c<code>elif</code>\u8bed\u53e5\u5757\u7531<code>then</code>\u5f15\u5bfc</li> </ul> <pre><code>#!/bin/bash\n\nstr=\"hello\"\nif [[ -z $str ]]; then\necho \"$str\u4e3a\u7a7a\"\nelif [[ $str = \"hello\" ]]; then\necho \"${str}=hello\"\nelse\necho \"$str\u975e\u7a7a\"\nfi\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#192-case","title":"1.9.2 case\u6761\u4ef6\u8bed\u53e5","text":"<ul> <li><code>case...in...esac</code></li> <li><code>case</code>\u7531<code>esac</code>\u7ed3\u5c3e\uff08case\u53cd\u5e8f\uff09</li> <li>\u6bcf\u4e00\u4e2a\u6761\u4ef6\u7684\u8bed\u53e5\u5757<code>;;</code>\u7ed3\u675f</li> </ul> <pre><code>#!/bin/bash\n\nprintf \"\u8bf7\u8f93\u5165\u6570\u5b571\u20144\\n\"\n# -e \u5f00\u542f\u8f6c\u4e49\necho -e '\u4f60\u8f93\u5165\u7684\u6570\u5b57\u662f:\\c'\nread -r NUMBER\n\ncase $NUMBER in\n1)\necho \"\u4f60\u8f93\u5165\u7684\u6570\u5b57\u662f1\"\n;;\n2)\necho \"\u4f60\u8f93\u5165\u7684\u6570\u5b57\u662f2\"\n;;\n3)\necho \"\u4f60\u8f93\u5165\u7684\u6570\u5b57\u662f3\"\n;;\n4)\necho \"\u4f60\u8f93\u5165\u7684\u6570\u5b57\u662f4\"\n;;\n*)\necho \"\u8bf7\u8f93\u5165\u6b63\u786e\u6570\u5b57\uff0c\u4f60\u8f93\u5165\u7684\u662f$NUMBER\"\n;;\nesac\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#110","title":"1.10 \u5faa\u73af","text":"<ul> <li><code>break</code>:\u8df3\u51fa\u6574\u4e2a\u5faa\u73af\u4f53\uff08\u53c2\u8003c\uff0cjava\u7b49\u8bed\u8a00\uff09</li> <li><code>continue</code>:\u8df3\u51fa\u5f53\u524d\u5faa\u73af\uff0c\u7ee7\u7eed\u4e0b\u4e00\u5faa\u73af\uff08\u53c2\u8003c\uff0cjava\u7b49\u8bed\u8a00\uff09</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#1101-for","title":"1.10.1 for \u5faa\u73af","text":"<ul> <li><code>for ((i = 0; i &lt; 10; i++));do ... done</code></li> </ul> <pre><code>#!/bin/bash\n\narray=(\n1\n2\n3\n4\n5\n)\nfor ((i = 0; i &lt; ${#array[*]}; i++)); do\necho \"${array[i]}\"\ndone\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#1102-for-in","title":"1.10.2 for in\u5faa\u73af","text":"<ul> <li><code>for ... in ... do ... done</code></li> </ul> <pre><code>#!/bin/bash\n\narray=(\n1\n2\n3\n4\n5\n)\necho \"\u5faa\u73af\u6570\u7ec4\"\nfor i in ${array[*]}; do\necho \"$i\"\ndone\nfor i in 1 2 3 4 5; do\necho \"$i\"\ndone\necho \"\u6253\u5370\u5f53\u524d\u8def\u5f84\u4e0b\u6587\u4ef6\u540d\"\ni=0\nfor fl in ./*; do\necho \"\u6587\u4ef6$((++i))$fl\"\ndone\nif [[ $# -gt 0 ]]; then\necho \"\u4f60\u8f93\u5165\u53c2\u6570\u5982\u4e0b\uff1a\"\nfor i in \"$@\"; do\necho \"$i\"\ndone\nelse\necho \"\u4f60\u6ca1\u6709\u8f93\u5165\u4efb\u610f\u53c2\u6570\"\nfi\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#1103-while","title":"1.10.3 while\u5faa\u73af","text":"<ul> <li><code>while command do ... done</code>\uff0c\u4e0ec\u4e2d<code>while</code>\u4e00\u6837\uff0c\u5f53\u6761\u4ef6\u5047\u65f6\u9000\u51fa\u5faa\u73af</li> </ul> <pre><code>#!/bin/bash\n\necho -e \"\u8bf7\u8f93\u5165\u4efb\u610f\u6574\u5f62\u503c\uff0c\u8f93\u51650\u7ed3\u675f:\\c\"\n\nwhile read -r NUM; do\necho \"\u4f60\u8f93\u5165\u4e86$NUM\"\nif [ $NUM -eq 0 ]; then\necho \"\u9000\u51fashell\"\n#\u6216\u8005exit 0\nbreak\nfi\ndone\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#1104-until","title":"1.10.4 until\u5faa\u73af","text":"<ul> <li><code>until command do ... done</code>,\u4e0ec\u4e2d<code>do while</code>\u4e00\u6837,\u5f53\u6761\u4ef6\u771f\u65f6\u9000\u51fa\u5faa\u73af</li> </ul> <pre><code>#!/bin/bash\n\na=0\nb=4\nuntil [ $((++a)) -gt $b ]; do\necho \"$a &lt;= $b\"\ndone\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#111-breakcontinue","title":"1.11 break\u548ccontinue","text":"<ul> <li><code>break</code>\u548c<code>continue</code>\u4e0d\u540c\u4e8ec\u8bed\u8a00\uff0c\u53ef\u4ee5\u6307\u5b9a\u8df3\u51fa\u90a3\u4e00\u5c42\u5faa\u73af\uff0c\u5176\u4e2d<code>continue n+1</code>\u7b49\u4ef7\u4e8e<code>break n</code>,\u8df3\u51fa\u7b2cn\u5c42\u5faa\u73af\u3002\uff08n\u7684\u542b\u4e49\u662f\u4ece\u5f53\u524d\u5faa\u73af\u5c42\u4ece\u91cc\u5f80\u5916\u6570\uff0c\u7b2c\u51e0\u5c42\uff0c\u5f53\u524d\u5c42\u4e3a1\uff09</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#1111-break","title":"1.11.1 break","text":"<ul> <li><code>break n</code>\uff1a\u8df3\u51fa\u7b2cn\u5c42\u5faa\u73af\uff0c\u5982\u7a7a3\u5c42\u5faa\u73af\uff0c2\u8868\u793a\u8df3\u51fa\u7b2c2\u5c42\u5faa\u73af\uff0c3\u8868\u793a\u8df3\u51fa\u6700\u5916\u5c42\u5faa\u73af\uff0c1\u8868\u793a\u8df3\u51fa\u5f53\u524d\u5c42\u5faa\u73af\uff0c\u9ed8\u8ba4n\u5c31\u662f1</li> </ul> <pre><code>#!/bin/bash\n\n#\u8df3\u51fa\u5faa\u73afbreak\nfor i in 0 1 2; do\nif [ $i -gt 1 ]; then\nbreak\nelse\necho $i\nfi\ndone\n#\u8df3\u51fa\u4efb\u610f\u5c42\u5faa\u73af break n\nfor z in 0 1 2; do\nfor i in 0 1 2; do\nfor j in 0 1 2 3 4; do\nif [ $i -eq 1 ] &amp;&amp; [ $j -eq 3 ]; then\nbreak 2\nelse\necho \"$z $i $j\"\nfi\ndone\ndone\ndone\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#1112-continue","title":"1.11.2 continue","text":"<ul> <li><code>continue</code>:\u4ece\u6b64\u5faa\u73af\u4f53\u4e2d\u65ad\uff0c\u7ee7\u7eed\u4e0b\u4e00\u5faa\u73af\uff0c\u7c7b\u4f3cc</li> <li><code>continue n</code>:\u7ee7\u7eed\u5230\u7b2cn\u5c42\u5faa\u73af\uff0c\u7c7b\u4f3cbreak \uff08n-1\uff1bn&gt;1\uff09</li> </ul> <pre><code>#!/bin/bash\n\n#\u7ee7\u7eed\u4e0b\u4e00\u5faa\u73af\nfor i in 0 1 2; do\nif [ $i -eq 1 ]; then\ncontinue\nelse\necho $i\nfi\ndone\n#\u7ee7\u7eed\u5230\u4efb\u610f\u5c42\u5faa\u73af continue n\nfor z in 0 1 2 3 4; do\nfor i in 0 1 2 3 4; do\nfor j in 0 1 2 3 4; do\nif [ $z -eq $i ] &amp;&amp; [ $i -eq $j ]; then\necho \"$z $i $j\u5168\u7b49\u7ee7\u7eed\u6700\u5916\u5c42\u5faa\u73af\"\ncontinue 3\nelse\necho \"$z $i $j\"\nfi\ndone\ndone\ndone\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#112-printf","title":"1.12 printf","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>%[-wide.precision]\u8f6c\u6362\u5b57\u7b26</code><ul> <li><code>-</code>\uff1a\u5de6\u5bf9\u9f50</li> <li><code>wide</code>\uff1a\u5b57\u7b26\u6240\u5360\u7684\u603b\u5bbd\u5ea6\uff0c\u5927\u4e8e\u5b57\u7b26\u5bbd\u5ea6\u7528\u7a7a\u683c\u8865\u9f50\uff1b\u6bd4\u5982\u5b57\u7b26\u536011\u4f4d\uff0cwide\u4e3a15\u4f4d\uff0c\u5219\u8f93\u5165\u5b57\u7b26\u536015\u4f4d</li> <li><code>precision</code>\uff1a\u5728\u5b57\u7b26\u7c7b\u578b\u4e2d\u8868\u793a\u80fd\u622a\u53d6\u7684\u6700\u5927\u5b57\u7b26\u6570\uff1b\u5728\u6d6e\u70b9\u7c7b\u578b\u6570\u503c\u4e2d\u8868\u793a\u7cbe\u5ea6\uff08\u5c0f\u6570\u70b9\u540e\u591a\u5c11\u4f4d\uff09</li> <li>\u8f6c\u6362\u5b57\u7b26\uff1a\u6bd4\u5982d\u8868\u793a\u6574\u5f62\uff0cs\u8868\u793a\u5b57\u7b26\u4e32\uff0cf\u8868\u793a\u6d6e\u70b9\u578b</li> </ul> </li> <li>\u89c4\u5219\uff1a\u5fc5\u987b\u4ee5%\u5f00\u5934\uff0c\u5c3e\u90e8\u5fc5\u987b\u8981\u8f6c\u6362\u5b57\u7b26\uff08d\u3001s\u3001l\u7b49\uff09</li> </ul> <pre><code>$ printf \"%-20.5s\" \"hello world\"\nhello               $ \n$ printf \"%-20.5f\" 123545.6568486849\n123545.65685        $\n</code></pre> conversion character argument type d,\u00a0i An integer, expressed as a decimal number. o An integer, expressed as an unsigned\u00a0octal\u00a0number. x,\u00a0X An integer, expressed as an unsigned\u00a0hexadecimal\u00a0number u An integer, expressed as an unsigned decimal number. c An integer, expressed as a character. The integer corresponds to the character's\u00a0ASCII code. s A string. f A floating-point number, with a default precision of 6. e,\u00a0E A floating-point number expressed in scientific notation, with a default precision of 6. p A memory address pointer. % No conversion; a literal percent sign (\"%\") is printed instead."},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#113-read","title":"1.13 read","text":"<ul> <li>\u529f\u80fd\uff1a\u8bfb\u53d6\u7528\u6237\u8f93\u5165</li> <li>\u8bed\u6cd5\uff1a<code>read [-ers] [-a aname] [-d delim] [-i text] [-n nchars] [-N nchars] [-p prompt] [-t timeout] [-u fd] [name ...]</code></li> <li><code>-a</code> \u540e\u8ddf\u4e00\u4e2a\u53d8\u91cf\uff0c\u8be5\u53d8\u91cf\u4f1a\u88ab\u8ba4\u4e3a\u662f\u4e2a\u6570\u7ec4\uff0c\u7136\u540e\u7ed9\u5176\u8d4b\u503c\uff0c\u9ed8\u8ba4\u662f\u4ee5\u7a7a\u683c\u4e3a\u5206\u5272\u7b26\u3002</li> <li><code>-d</code> \u540e\u9762\u8ddf\u4e00\u4e2a\u6807\u5fd7\u7b26\uff0c\u5176\u5b9e\u53ea\u6709\u5176\u540e\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\u6709\u7528\uff0c\u4f5c\u4e3a\u7ed3\u675f\u7684\u6807\u5fd7\u3002</li> <li><code>-p</code> \u540e\u9762\u8ddf\u63d0\u793a\u4fe1\u606f\uff0c\u5373\u5728\u8f93\u5165\u524d\u6253\u5370\u63d0\u793a\u4fe1\u606f\u3002</li> <li><code>-e</code> \u5728\u8f93\u5165\u7684\u65f6\u5019\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4\u8865\u5168\u529f\u80fd\u3002\uff08\u4ec5\u63d0\u793a\u5f53\u524d\u76ee\u5f55\u4e0b\u5df2\u6709\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u540d\uff09</li> <li><code>-n</code> \u540e\u8ddf\u4e00\u4e2a\u6570\u5b57\uff0c\u5b9a\u4e49\u8f93\u5165\u6587\u672c\u7684\u957f\u5ea6\u3002(\u8fbe\u5230\u5b57\u7b26\u9650\u5236\u81ea\u52a8\u63d0\u4ea4)</li> <li><code>-r</code> \u5c4f\u853d\\\uff0c\u5982\u679c\u6ca1\u6709\u8be5\u9009\u9879\uff0c\u5219\\\u4f5c\u4e3a\u4e00\u4e2a\u8f6c\u4e49\u5b57\u7b26\uff0c\u6709\u7684\u8bdd \\\u5c31\u662f\u4e2a\u6b63\u5e38\u7684\u5b57\u7b26\u4e86\u3002</li> <li><code>-s</code> \u5b89\u9759\u6a21\u5f0f\uff0c\u5728\u8f93\u5165\u5b57\u7b26\u65f6\u4e0d\u518d\u5c4f\u5e55\u4e0a\u663e\u793a\uff0c\u4f8b\u5982login\u65f6\u8f93\u5165\u5bc6\u7801\u3002</li> <li><code>-t</code> \u540e\u9762\u8ddf\u79d2\u6570\uff0c\u5b9a\u4e49\u8f93\u5165\u5b57\u7b26\u7684\u7b49\u5f85\u65f6\u95f4\u3002</li> <li><code>-u</code> \u540e\u9762\u8ddffd\uff0c\u4ece\u6587\u4ef6\u63cf\u8ff0\u7b26\u4e2d\u8bfb\u5165\uff0c\u8be5\u6587\u4ef6\u63cf\u8ff0\u7b26\u53ef\u4ee5\u662fexec\u65b0\u5f00\u542f\u7684</li> <li>\u793a\u4f8b</li> </ul> <pre><code># 1........\necho \"\u8f93\u5165\u4e00\u4e2a\u503c\"\nread value\necho \"\u4f60\u8f93\u5165\u7684\u662f\uff1a$value\"\n# \u8f93\u51fa\u7ed3\u679c\u5982\u4e0b.....\n#\u8f93\u5165\u4e00\u4e2a\u503c\n#\\123\n#\u4f60\u8f93\u5165\u7684\u662f\uff1a123\n\n# 2........\necho \"\u8f93\u5165\u4e00\u4e2a\u503c\"\nread -r value\necho \"\u4f60\u8f93\u5165\u7684\u662f\uff1a$value\"\n# \u8f93\u51fa\u7ed3\u679c\u5982\u4e0b.....\n#\u8f93\u5165\u4e00\u4e2a\u503c\n#\\123\n#\u4f60\u8f93\u5165\u7684\u662f\uff1a\\123\n\n# 3........\nread -p \"\u8f93\u5165\u4e00\u4e2a\u503c\uff1a\" value\necho \"\u4f60\u8f93\u5165\u7684\u662f\uff1a$value\"\n# \u8f93\u51fa\u7ed3\u679c\u5982\u4e0b.....\n#\u8f93\u5165\u4e00\u4e2a\u503c\uff1a123 \n#\u4f60\u8f93\u5165\u7684\u662f\uff1a123\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#1131","title":"1.13.1 \u5bc6\u7801\u6a21\u5f0f","text":"<ul> <li>\u793a\u4f8b</li> </ul> <pre><code>#!/bin/bash\n\nread  -s  -p \"\u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801:\" pass\nprintf \"\\n\u60a8\u8f93\u5165\u7684\u5bc6\u7801\u662f %s \\n\" \"$pass\"\n# \u8f93\u51fa\u7ed3\u679c\u5982\u4e0b.....\n#\u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801:\n#\u60a8\u8f93\u5165\u7684\u5bc6\u7801\u662f 123456\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#1132","title":"1.13.2 \u8bfb\u53d6\u6587\u4ef6","text":"<ul> <li>\u793a\u4f8b</li> </ul> <pre><code>#!/bin/bash\n\ncount=1    # \u8d4b\u503c\u8bed\u53e5\uff0c\u4e0d\u52a0\u7a7a\u683c\ncat test.txt | while read line      # cat \u547d\u4ee4\u7684\u8f93\u51fa\u4f5c\u4e3aread\u547d\u4ee4\u7684\u8f93\u5165,read\u8bfb\u5230\u7684\u503c\u653e\u5728line\u4e2d\ndo\necho \"Line $count:$line\"\ncount=$[ $count + 1 ]          # \u6ce8\u610f\u4e2d\u62ec\u53f7\u4e2d\u7684\u7a7a\u683c\u3002\ndone\necho \"finish\"\nexit 0\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#114-select","title":"1.14 select","text":"<ul> <li>\u529f\u80fd\uff1aselect\u7528\u6765\u5c55\u793a\u4e00\u7cfb\u5217\u9009\u9879\u4f9b\u7528\u6237\u9009\u62e9</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#!/bin/bash\nselect i in mon tue wed exit\ndo\ncase $i in\nmon) echo \"Monday\";;\ntue) echo \"Tuesday\";;\nwed) echo \"Wednesday\";;\nexit) exit;;\nesac\ndone\n</code></pre> <ul> <li>\u7ed3\u679c</li> </ul> <pre><code>$ ./test.sh 1) mon\n2) tue\n3) wed\n4) exit\n#? 1\nMonday\n#? 2\nTuesday\n#? 3\nWednesday\n#? 4\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#115-getopt","title":"1.15 getopt","text":"<ul> <li>\u53c2\u8003\u535a\u5ba2</li> </ul> <pre><code>\u5f3a\u70c8\u5efa\u8bae\u4f7f\u7528getopt\uff0c\u800c\u4e0d\u662fgetops\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#116-getopts","title":"1.16 getopts","text":"<ul> <li>\u529f\u80fd\uff1a\u89e3\u6790\u4f20\u5165shell\u811a\u672c\u7684\u53c2\u6570</li> <li>\u8bed\u6cd5\uff1a<code>getopts optstring name</code><ul> <li><code>optstring</code>:\u53ef\u9009\u5b57\u7b26\uff0c\u683c\u5f0f\u67092\u79cd\uff0c\u4e00\u79cd\u53ea\u542b\u9009\u9879\uff1b\u53e6\u4e00\u79cd\u9009\u9879+\u503c\uff0c\u8fd9\u79cd\u9700\u8981\u5728\u53ef\u9009\u53c2\u6570\u540e\u52a0\u4e0a\u5192\u53f7<code>:</code><ul> <li><code>\"v\"</code>\uff1a\u89e3\u6790\u53c2\u6570<code>-v</code></li> <li><code>\"v:\"</code>\uff1a\u89e3\u6790\u53c2\u6570<code>-v value</code>\uff0c\u9009\u9879\u540e\u63a5\u503c\u6570\u636e\u3002\u8fd9\u4e2avalue\u503c\u4f1a\u88ab\u653e\u5165OTPARG\u53d8\u91cf\u4e2d</li> </ul> </li> <li><code>name</code>:\u5f53\u89e3\u6790\u5230\u4e86<code>optstring</code>\u6307\u5b9a\u7684\u9009\u9879\u540e\uff0c\u4f1a\u5c06\u9009\u9879\u503c\u653e\u5165<code>name</code>\u53d8\u91cf\u4e2d\uff0c<code>name</code>\u53d8\u91cf\u540d\u79f0\u4efb\u53d6\uff1b\u5f53\u89e3\u6790\u5931\u8d25\u65f6\uff0c\u4f1a\u5c06\u95ee\u53f7<code>?</code>\u653e\u5165<code>name</code>\u53d8\u91cf\u4e2d\u3002</li> </ul> </li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#1161-optargoptind","title":"1.16.1 \u53d8\u91cfOPTARG\u3001OPTIND","text":"<pre><code>- `OPTIND`\u8868\u793a\u7684\u662f\u4e0b\u4e00\u4e2a\u9009\u9879\u53c2\u6570\u7684\u4f4d\u7f6e\uff0c\u4e0d\u662f\u5f53\u524d\u9009\u9879\u53c2\u6570\u7684\u4f4d\u7f6e\u3002\n- `getops`\u4f1a\u6839\u636e`OPTIND`\u6765\u89e3\u6790\u54ea\u4e00\u4e2a\u4f4d\u7f6e\u7684\u53c2\u6570\uff0c\u56e0\u6b64\uff0c\u4e0d\u8981\u53bb\u4e3b\u52a8\u4fee\u6539`OPTIND`\u7684\u503c\u3002\u5f53\u7136\uff0c\u5982\u679c\u60f3\u8981\u5728\u591a\u4e2a\u5730\u65b9\u8c03\u7528getops\u65f6\uff0c\u53ef\u4ee5\u4e3b\u52a8\u4fee\u6539OPTIND\u53d8\u91cf\u503c\u3002\n</code></pre> <pre><code>- `OPTARG`\u53ea\u5728\u89e3\u6790\u53c2\u6570\u9009\u9879\u65f6\uff0c\u63d0\u53d6\u503c\u5230\u53e6\u4e00\u4e2a\u53d8\u91cf\u4e2d\u4fdd\u5b58\u3002\u89e3\u6790\u5b8c\u540e\u8fd9\u4e2aOPTARG\u53d8\u91cf\u6570\u636e\u4f1a\u6e05\u7a7a\n- `OPTIND`\u4f1a\u4fdd\u7559\u6700\u540e\u4e00\u4e2a\u53c2\u6570\u7d22\u5f15\uff0c\u6574\u4e2ashell\u751f\u547d\u5468\u671f\u90fd\u5b58\u5728\n</code></pre> <ul> <li><code>OPTARG</code>:\u89e3\u6790\u5e26\u9009\u9879\u503c\u7684\u53c2\u6570\u65f6\uff0c\u9009\u9879\u540e\u9762\u7684\u503c\u653e\u5165\u8fd9\u4e2a\u53d8\u91cf\u4e2d</li> <li><code>OPTIND</code>:\u8868\u793a\u4e0b\u4e00\u4e2a\u9009\u9879\u53c2\u6570\u7684\u7d22\u5f15\u3002\uff08\u9ed8\u8ba4\u503c\u662f1\uff0c\u5f53\u9009\u9879\u5e26\u503c\u7684\uff0c\u4e5f\u662f\u663e\u73b0\u9009\u9879\u6240\u5728\u7684\u4f4d\u7f6e\uff09</li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ cat test.sh echo \"start:$OPTIND\"\nwhile getopts \"a:bc\" opt\ndo\ncase $opt in\na)\necho \"a \u9009\u9879:$OPTIND $OPTARG\"\n;;\nb)\necho \"b \u9009\u9879:$OPTIND $OPTARG\"\n;;\nc)\necho \"c \u9009\u9879:$OPTIND $OPTARG\"\n;;\n?)\necho \"\u53c2\u6570\u89e3\u6790\u5931\u8d25\"\n;;\nesac\ndone\necho \"end:$OPTIND $OPTARG\"\n$ sh test.sh -c -a hello\nstart:1\nc \u9009\u9879:2 \na \u9009\u9879:4 hello\nend:4 \n$ sh test.sh -g\n11.sh: illegal option -- g\n\u53c2\u6570\u89e3\u6790\u5931\u8d25\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#117-shift","title":"1.17 shift","text":"<ul> <li>\u529f\u80fd\uff1a\u5c06shell\u811a\u672c\u53c2\u6570\u5411\u5de6\u79fb\u52a8\u591a\u5c11\u4f4d\uff0c\u5de6\u8fb9\u7684\u53c2\u6570\u4f1a\u88ab\u79fb\u9664</li> <li>\u8bed\u6cd5\uff1a<code>shift [n]</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ cat test.sh\necho \"start:\u53c2\u6570\u603b\u6570$#\"\nshift 2\necho \"shift:\u53c2\u6570\u603b\u6570$#\"\nfor arg in \"$@\"\ndo echo $arg\ndone\n$ sh test.sh 1 2 3 4\nstart:\u53c2\u6570\u603b\u65704\nshift:\u53c2\u6570\u603b\u65702\n3\n4\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#118-test","title":"1.18 test \u6d4b\u8bd5\u6761\u4ef6","text":""},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#1181","title":"1.18.1 (())\u63d0\u4f9b\u9ad8\u7ea7\u7b97\u672f\u8fd0\u7b97","text":"<ul> <li><code>(())</code>\u8fd0\u7b97\u652f\u6301\u6240\u6709c\u8bed\u8a00\u5b9a\u4e49\u7684\u8fd0\u7b97\uff0c\u4e14\u4e0d\u8981\u6c42\u7a7a\u683c\u5206\u5272</li> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a</li> <li><code>((expr))</code>\uff1a\u8ba1\u7b97\u8868\u8fbe\u5f0f\u5185\u5bb9</li> <li><code>$((expr))</code>\uff1a\u53d6\u8868\u8fbe\u5f0f\u8ba1\u7b97\u7ed3\u679c</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#!/bin/bash\na=$((b=1+2))\necho \"a=$a b=$b\"\nc=$((10%3))\necho \"c=$c\"\nd=$((a&gt;c?1:0))\necho \"d=$d\"\n</code></pre> <ul> <li>\u8f93\u51fa\u7ed3\u679c</li> </ul> <pre><code>a=3 b=3\na=4\nc=1\nd=1\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#1182","title":"1.18.2 []\u63d0\u4f9b\u7b80\u5355\u7684\u6570\u503c\u6bd4\u8f83\u3001\u5b57\u7b26\u4e32\u6bd4\u8f83\u3001\u6587\u4ef6\u6bd4\u8f83","text":"<ul> <li>\u6bd4\u8f83\u8fd0\u7b97\u7b26</li> <li><code>( EXPRESSION )</code>:EXPRESSION is true</li> <li><code>! EXPRESSION</code>:\u975e\u8fd0\u7b97</li> <li><code>EXPRESSION1 -a EXPRESSION2</code>:\u4e14\u8fd0\u7b97</li> <li><code>EXPRESSION1 -o EXPRESSION2</code>:\u6216\u8fd0\u7b97</li> <li>\u5b57\u7b26\u6bd4\u8f83</li> <li><code>-n STRING</code>:\u5b57\u7b26\u957f\u5ea6\u975e0</li> <li><code>STRING</code>:\u5b57\u7b26\u957f\u5ea6\u975e0</li> <li><code>-z STRING</code>:\u5b57\u7b26\u957f\u5ea6\u7b49\u4e8e0</li> <li><code>STRING1 = STRING2</code>:\u7b49\u4e8e</li> <li><code>STRING1 != STRING2</code>:\u4e0d\u7b49\u4e8e</li> <li>\u6570\u503c\u6bd4\u8f83\uff08\u6574\u6570\uff0c\u975e\u6d6e\u70b9\u6570\uff09</li> <li><code>INTEGER1 -eq INTEGER2</code>:INTEGER1 \u7b49\u4e8e INTEGER2</li> <li><code>INTEGER1 -ge INTEGER2</code>:INTEGER1 \u5927\u4e8e\u7b49\u4e8e INTEGER2</li> <li><code>INTEGER1 -gt INTEGER2</code>:INTEGER1 \u5927\u4e8e INTEGER2</li> <li><code>INTEGER1 -le INTEGER2</code>:INTEGER1 \u5c0f\u4e8e\u7b49\u4e8e INTEGER2</li> <li><code>INTEGER1 -lt INTEGER2</code>:INTEGER1 \u5c0f\u4e8e INTEGER2</li> <li><code>INTEGER1 -ne INTEGER2</code>:INTEGER1 \u4e0d\u7b49\u4e8e INTEGER2</li> <li>\u6587\u4ef6\u6bd4\u8f83</li> <li><code>FILE1 -nt FILE2</code>:FILE1 \u6bd4 FILE2 \u65b0\uff08mtime\uff09</li> <li><code>FILE1 -ot FILE2</code>:FILE1 \u6bd4 FILE2 \u65e7\uff08mtime\uff09</li> <li><code>-d FILE</code>:\u6587\u4ef6\u5b58\u5728\u4e14\u662f\u76ee\u5f55</li> <li><code>-e FILE</code>:\u6587\u4ef6\u5b58\u5728</li> <li><code>-f FILE</code>:\u6587\u4ef6\u5b58\u5728\u4e14\u662f\u4e00\u4e2a\u5e38\u89c4\u6587\u4ef6</li> <li><code>-s FILE</code>:\u6587\u4ef6\u5b58\u5728\u4e14\u6587\u4ef6\u5927\u5c0f\u5927\u4e8e0</li> <li><code>-r FILE</code>:\u6587\u4ef6\u5b58\u5728\u4e14\u5177\u6709\u53ef\u8bfb\u6743\u9650</li> <li><code>-w FILE</code>:\u6587\u4ef6\u5b58\u5728\u4e14\u5177\u6709\u53ef\u5199\u6743\u9650</li> <li><code>-x FILE</code>:\u6587\u4ef6\u5b58\u5728\u4e14\u5177\u6709\u53ef\u6267\u884c\u6743\u9650</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#1183","title":"1.18.3 [[]]\u63d0\u4f9b\u4e86\u9488\u5bf9\u5b57\u7b26\u4e32\u6a21\u5f0f\u5339\u914d\u529f\u80fd","text":"<ul> <li>\u53cc\u4e2d\u62ec\u53f7\u662f\u5355\u4e2d\u62ec\u53f7\u7684\u6269\u5c55\u7248\uff0c\u652f\u6301\u66f4\u591a\u8fd0\u7b97\u7b26</li> <li>\u6bd4\u8f83\u8fd0\u7b97\u7b26</li> <li><code>&amp;&amp;</code>:</li> <li><code>||</code>:</li> <li><code>!=</code>:</li> <li><code>=</code>\u6216<code>==</code>:</li> <li><code>&lt;</code>:</li> <li><code>&gt;</code>:</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#119","title":"1.19 \u51fd\u6570","text":"<ul> <li>\u51fd\u6570<code>()</code>\u4e2d\u4e0d\u80fd\u6709\u5f62\u53c2\uff0c\u4f46\u51fd\u6570\u5185\u90e8\u53ef\u901a\u8fc7<code>$1 $2 ... $9 ${10} ... ${n}</code>\u83b7\u53d6\u53c2\u6570,\u5f53\u53c2\u6570\u591a\u4f5910\u4e2a\u65f6\uff0c\u53c2\u6570\u8981\u7531<code>${n}</code>\u800c\u4e0d\u662f<code>$n</code>\u83b7\u53d6</li> <li>\u8c03\u7528\u51fd\u6570\u4e0d\u9700\u8981\u5e26<code>()</code>\uff0c\u4f20\u53c2\u63a5\u7740\u51fd\u6570\u540d\u540e\u5199\uff0c\u5982:<code>fun_name 1 2 \"3\"</code>,\u8868\u793a\u8c03\u7528\u51fd\u6570fun_name\u5e76\u4e14\u4f20\u7ed9\u51fd\u65703\u4e2a\u53c2\u6570</li> <li>\u51fd\u6570\u4e2d\u4e5f\u80fd\u4f7f\u7528<code>return</code>,\u4f46\u53ea\u80fd\u8fd4\u56de\u6574\u5f62\u6570\u503c\uff0c\u5982:<code>return 2</code>,\u80fd\u4e0d\u80fd<code>return \"2\"</code></li> <li><code>function</code>\u6807\u8bc6\u53ef\u6709\u53ef\u65e0\uff0c\u5982<code>function add(){}</code>\u7b49\u4ef7\u4e8e<code>add(){}</code></li> </ul> <pre><code>#!/bin/bash\n\nadd() {\n#\u8ba1\u7b97\u53c2\u6570\u603b\u548c\nall=0\nfor i in \"$@\"; do\nall=$((all + i))\ndone\nreturn $all\n}\nadd 1 2 3 4\n#$?\u83b7\u53d6\u4e0a\u4e00\u6307\u4ee4\u7ed3\u679c\uff0c\u6b64\u5904\u4e3aadd\u51fd\u6570\u8fd4\u56de\u503c\necho \"\u51fd\u6570add 1 2 3 4\u8fd4\u56de\u503c:$?\"\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#120","title":"1.20 \u6269\u5c55\u8fdb\u9636","text":""},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#1201-shell","title":"1.20.1 \u5305\u542b\u5176\u5b83shell\u6587\u4ef6","text":"<p>\u5305\u542b\u6587\u4ef6\u7c7b\u4f3c\u4e8ec\u8bed\u8a00\u4e2d\u7684include\uff0c\u53ef\u4ee5\u5c06\u5916\u90e8\u811a\u672c\u5408\u5e76\u5230\u5f53\u524d\u811a\u672c\u6587\u4ef6\u4e2d - \u65b9\u5f0f\u4e00:<code>. file.sh</code>,\u5176\u4e2d<code>.</code>\u4e0e\u6587\u4ef6\u540d\u95f4\u6709\u4e00\u7a7a\u683c - \u65b9\u5f0f\u4e8c:<code>source file.sh</code></p> <pre><code>#!/bin/bash\n\n. ./str.sh\n# \u4f7f\u7528str.sh\u4e2d\u5b9a\u4e49\u7684str\necho \"$str\"\nsource ./function.sh\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#1202-shell","title":"1.20.2 \u5236\u4f5c\u5e76\u4f7f\u7528shell\u51fd\u6570\u5e93","text":"<ol> <li>\u5c06shell\u51fd\u6570\u5199\u5165shell\u6587\u4ef6\u4e2d</li> <li>\u5728\u53e6\u4e00\u4e2ashell\u6587\u4ef6\u4e2d\u6216\u547d\u4ee4\u884c\u4e2d\u4f7f\u7528<code>source</code>\u6216<code>.</code>\u5c06\u6b65\u9aa41\u4e2d\u7684shell\u51fd\u6570\u6587\u4ef6\u5305\u542b\u8fdb\u6765</li> <li>\u5728shell\u6587\u4ef6\u4e2d\u6216\u547d\u4ee4\u884c\u4e2d\u4f7f\u7528\u51fd\u6570</li> </ol>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#1203","title":"1.20.3 \u4ea4\u4e92\u5f0f\u8f93\u5165\u7684\u81ea\u52a8\u5316","text":"<ul> <li>\u4f7f\u7528\u573a\u666f\uff1a\u5728\u81ea\u52a8\u5316\u5b89\u88c5\uff08\u4e00\u952e\u5b89\u88c5\uff09\u4e2d\uff0c\u4e0d\u80fd\u4f7f\u7528\u4ea4\u4e92\u5f0f\u6765\u8bfb\u53d6\u8f93\u5165\u503c\uff0c\u8fd9\u65f6\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u65b9\u5f0f\u6765\u5904\u7406</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#12031-echo","title":"1.20.3.1 \u4f7f\u7528echo+\u7ba1\u9053\u65b9\u5f0f","text":"<ul> <li>\u793a\u4f8b</li> </ul> <pre><code>$ cat test.sh\necho \"\u5f00\u59cb\u4ea4\u4e92\u5f0f\u8f93\u5165\"\necho \"\u9009\u62e91\uff1aY/N\uff1a\"\nread opt1\necho \"\u9009\u62e92\uff1aY/N\uff1a\"\nread opt2\necho \"\u9009\u62e93\uff1aY/N\uff1a\"\nread opt3\necho \"opt1:$opt1 opt2:$opt2 opt3:$opt3\"\n$ echo -e \"Y\\nY\\nN\"|sh 11.sh\n\u9009\u62e91\uff1aY/N\uff1a\n\u9009\u62e92\uff1aY/N\uff1a\n\u9009\u62e93\uff1aY/N\uff1a\nopt1:Y opt2:Y opt3:N\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#12032","title":"1.20.3.2 \u4f7f\u7528\u6587\u4ef6\u91cd\u5b9a\u5411\u65b9\u5f0f","text":"<ul> <li>\u793a\u4f8b</li> </ul> <pre><code>$ cat opt.txt\nY\nN\nY\n$ sh 11.sh &lt;opt.txt\n\u5f00\u59cb\u4ea4\u4e92\u5f0f\u8f93\u5165\n\u9009\u62e91\uff1aY/N\uff1a\n\u9009\u62e92\uff1aY/N\uff1a\n\u9009\u62e93\uff1aY/N\uff1a\nopt1:Y opt2:N opt3:Y\n</code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#1204-shell","title":"1.20.4 \u811a\u672c\u6267\u884c\u65b9\u5f0f\u4e0e\u662f\u5426\u4ea7\u751f\u5b50shell\u7684\u5173\u7cfb","text":"<pre><code>`source file`\u53d6\u811a\u672c\u91cc\u9762\u7684\u8bed\u53e5\u4f9d\u6b21\u5728\u5f53\u524dshell\u91cc\u9762\u6267\u884c\uff0c\u6ca1\u6709\u5efa\u7acb\u65b0\u7684\u5b50shell\n</code></pre> <ul> <li>\u53c2\u8003\u535a\u5ba2</li> <li><code>$(commond)</code>\u3001<code>bash shellfile</code>\u3001<code>./filename</code>\uff1a\u4f1a\u4ea7\u751f\u65b0\u7684\u5b50shell\uff0c\u5b50shell\u7ee7\u627f\u7236shell\u7684\u4e00\u5207\u73af\u5883\u53d8\u91cf\u3001\u5df2\u6253\u5f00\u7684\u6587\u4ef6\u6807\u8bc6\u7b26\u3001\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u7b49\u3002\u5b50shell\u7684\u4fee\u6539\u4e0d\u5f71\u54cd\u7236shell\u3002</li> <li><code>source file</code>\u3001<code>exec file</code>\uff1a\u4e0d\u4f1a\u4ea7\u751f\u5b50shell</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#1205-shell","title":"1.20.5 \u5b50shell\u5bfc\u81f4\u5c40\u90e8\u53d8\u91cf","text":"<ul> <li>\u53c2\u8003</li> <li>\u65b9\u6cd5\u4e00\uff1a<code>shopt -s lastpipe</code>\u5728bash4.2+\u7248\u672c\u4e0a\u652f\u6301</li> </ul> <pre><code>#!/usr/bin/env bash\nshopt -s lastpipe\nn=0\nprintf \"%s\\n\" {1..10} | while read i; do (( n+=i )); done\necho $n\n</code></pre> <ul> <li>\u65b9\u6cd5\u4e8c\uff1a\u4f7f\u7528\u91cd\u5b9a\u5411+EOF\u6280\u672f</li> </ul> <pre><code>n=0\nSUMMANDS=\"$(printf '%s\\n%s\\n%s\\n%s\\n%s\\n%s\\n%s\\n%s\\n%s\\n%s\\n' 1 2 3 4 5 6 7 8 9 10)\"\nwhile read i; do n=$(( n + i )); done &lt;&lt;SUMMANDS_INPUT\n$SUMMANDS\nSUMMANDS_INPUT\necho $n\n</code></pre> <ul> <li>\u793a\u4f8b2</li> </ul> <pre><code>[root@centos7 ~]# while read v1 v2;do echo \"$v1 $v2\";done&lt;&lt;end\n&gt; 1\n&gt; 2\n&gt; end\n1 2 </code></pre>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/shell/#121-nohup","title":"1.21 nohup\u91cd\u5b9a\u5411\u65e5\u5fd7\u6e05\u7a7a\u95ee\u9898","text":"<ul> <li>\u73b0\u8c61\uff1a\u5f53\u4f7f\u7528<code>nohup ./test.sh &gt; ./test.log 2&gt;&amp;1 &amp;</code> ,\u4f1a\u751f\u6210test.log\u6587\u4ef6\uff0c\u7136\u540e\u6211\u4eec\u5728\u811a\u672c\u6587\u4ef6test.sh\u4e2d\u6267\u884c\u6e05\u7a7a\u6587\u4ef6\u6307\u4ee4\uff0c\u5982<code>cp /dev/null ./test.log</code>\u6216<code>&gt; ./test.log</code>\u65f6\uff0c\u53d1\u73b0test.log\u6587\u4ef6\u5927\u5c0f\u4f9d\u7136\u6ca1\u6709\u964d\u4f4e\uff0c\u4f46test.log\u6587\u4ef6\u4e2d\u53ea\u6709\u65b0\u589e\u7684\u65e5\u5fd7\u3002</li> <li>\u89e3\u51b3\uff1a\u4f7f\u7528\u8ffd\u52a0\u65b9\u5f0f\u5199\u5165\u5230\u65e5\u5fd7\u6587\u4ef6\u4e2d\uff0c\u5982\uff1a<code>nohup ./test.sh &gt;&gt; ./test.log 2&gt;&amp;1 &amp;</code> </li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/","title":"vim\u6559\u7a0b","text":"<ul> <li>vim3\u79cd\u6a21\u5f0f</li> <li>\u547d\u4ee4\u6a21\u5f0f</li> <li>\u8f93\u5165\u6a21\u5f0f</li> <li>\u7f16\u8f91\u6a21\u5f0f   </li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#2-vim","title":"2 vim\u914d\u7f6e\u6587\u4ef6","text":""},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#21-viminfo","title":"2.1 viminfo\u6587\u4ef6","text":"<ul> <li>\u53c2\u8003</li> <li>~/.viminfo \u5b58\u5728\u5728\u7528\u6237\u76ee\u5f55\u4e0b\uff0c\u7531\u7cfb\u7edf\u81ea\u52a8\u751f\u6210\uff0c\u8bb0\u5f55 vim \u7684\u64cd\u4f5c\u5386\u53f2\u548c\u72b6\u6001\u4fe1\u606f\uff0c\u4fbf\u4e8e\u91cd\u542f Vim \u8fdb\u7a0b\u540e\u80fd\u6062\u590d\u4e4b\u524d\u7684\u5404\u79cd\u5386\u53f2\u64cd\u4f5c\u884c\u4e3a\u3002</li> <li>\u901a\u5e38\u4e0d\u6539\u53d8~/.viminfo\u6587\u4ef6</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#22-vimrc","title":"2.2 vimrc\u6587\u4ef6","text":"<p>~/.vimrc\u6587\u4ef6\u662f\u7528\u6765\u914d\u7f6evim\u529f\u80fd\u9009\u9879\u7684\uff0c\u5728vim\u542f\u52a8\u65f6\u4f1a\u9996\u5148\u52a0\u8f7d\u8fd9\u4e2a\u6587\u4ef6\uff0c\u5b8c\u6210\u914d\u7f6e\u3002\u5305\u62ec\u4e3b\u9898, \u5feb\u6377\u952e, \u63d2\u4ef6\u8bbe\u7f6e\u7b49\u7b49\u90fd\u53ef\u4ee5\u5728\u8fd9\u91cc\u9762\u8bbe\u7f6e\u3002</p>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#23-vimcolors","title":"2.3 vim/colors\u76ee\u5f55","text":"<p>~/.vim/colors\u76ee\u5f55\u662f\u7528\u6765\u5b58\u653evim\u914d\u8272\u6587\u4ef6\u7684\uff0c\u8fd9\u4e9b\u914d\u8272\u6587\u4ef6\u53ef\u4ee5\u4ece\u7f51\u4e0a\u4e0b\u8f7d\u3002\u7136\u540e\u53ef\u4ee5\u7f16\u8f91vimrc\u6587\u4ef6\uff0c\u8bbe\u7f6e<code>colorscheme \u914d\u8272\u6587\u4ef6\u540d</code>\u6765\u4f7f\u7528</p>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#3-vim","title":"3 vim\u6253\u5f00\u6587\u4ef6","text":"<ul> <li><code>vim filename</code>:\u65b0\u5efa\u6216\u6253\u5f00\u6587\u4ef6\uff0c\u5149\u6807\u5728\u884c\u9996</li> <li><code>vim + filename</code>:\u65b0\u5efa\u6216\u6253\u5f00\u6587\u4ef6\uff0c\u5149\u6807\u5728\u884c\u5c3e</li> <li><code>vim +n filename</code>:\u65b0\u5efa\u6216\u6253\u5f00\u6587\u4ef6\uff0c\u5149\u6807\u5728\u7b2cn\u884c</li> <li><code>vim r filename</code>\u6062\u590d\u4e0a\u6b21\u5f02\u5e38\u7684\u6587\u4ef6\uff08\u6709.swp\u6587\u4ef6\uff0c.swp\u6587\u4ef6\u4f1a\u4fdd\u5b58\u4e0a\u4e00\u6b21\u4fee\u6539\u4e86\uff0c\u4f46\u6ca1\u6709\u4fdd\u5b58\u7684\u6570\u636e\uff09</li> <li><code>vi +/pattern filename</code>:\u5149\u6807\u5728\u7b2c\u4e00\u6b21\u5339\u914d\u7684\u6a21\u5f0f\u5904\uff0c\u7528\u4e8e\u641c\u7d22\u5b9a\u4f4d\u6587\u4ef6\u4e2d\u67d0\u4e2a\u5b57\u6bb5</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#4","title":"4 \u547d\u4ee4\u6a21\u5f0f\u548c\u7f16\u8f91\u6a21\u5f0f","text":"<p>\u547d\u4ee4\u6a21\u5f0f\u4e0b\u53ea\u9700\u8981\u6309\u5feb\u6377\u952e\u5c31\u80fd\u6267\u884c\uff0c\u7f16\u8f91\u6a21\u5f0f\u4e0b\u9700\u8981\u6309\u56de\u8f66\u624d\u80fd\u751f\u6548</p>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#41","title":"4.1 \u8fdb\u5165\u8f93\u5165\u6a21\u5f0f","text":"\u5feb\u6377\u952e \u529f\u80fd\u63cf\u8ff0 i \u5728\u5149\u6807\u5904\u4e4b\u524d\u4e00\u4e2a\u5b57\u7b26\u63d2\u5165\u6570\u636e a \u5728\u5149\u6807\u5904\u4e4b\u540e\u4e00\u4e2a\u5b57\u7b26\u63d2\u5165\u6570\u636e I \u5728\u5149\u6807\u6240\u5728\u884c\u9996\u63d2\u5165\u6570\u636e A \u5728\u5149\u6807\u6240\u5728\u884c\u5c3e\u63d2\u5165\u6570\u636e o \u5728\u5149\u6807\u6240\u5728\u884c\u4e0b\u9762\u65b0\u63d2\u5165\u4e00\u884c O \u5728\u5149\u6807\u6240\u5728\u884c\u4e0a\u9762\u65b0\u63d2\u5165\u4e00\u884c"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#42","title":"4.2 \u9000\u51fa\u6216\u4fdd\u5b58\u6587\u4ef6","text":"\u547d\u4ee4 \u529f\u80fd :wq \u4fdd\u5b58\u5e76\u9000\u51fa Vim \u7f16\u8f91\u5668 :wq! \u4fdd\u5b58\u5e76\u5f3a\u5236\u9000\u51fa Vim \u7f16\u8f91\u5668 :q \u4e0d\u4fdd\u5b58\u5c31\u9000\u51fa Vim \u7f16\u8f91\u5668 :q! \u4e0d\u4fdd\u5b58\uff0c\u4e14\u5f3a\u5236\u9000\u51fa Vim \u7f16\u8f91\u5668 :w \u4fdd\u5b58\u4f46\u662f\u4e0d\u9000\u51fa Vim \u7f16\u8f91\u5668 :w! \u5f3a\u5236\u4fdd\u5b58\u6587\u672c :w filename \u53e6\u5b58\u5230 filename \u6587\u4ef6 x! \u4fdd\u5b58\u6587\u672c\uff0c\u5e76\u9000\u51fa Vim \u7f16\u8f91\u5668\uff0c\u66f4\u901a\u7528\u7684\u4e00\u4e2a vim \u547d\u4ee4 ZZ \u76f4\u63a5\u9000\u51fa Vim \u7f16\u8f91\u5668"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#43","title":"4.3 \u5220\u9664","text":"\u547d\u4ee4 \u529f\u80fd x \u5220\u9664\u5355\u4e2a\u5b57\u7b26\uff1b\u79fb\u52a8\u5149\u6807\u5230\u5f85\u5220\u9664\u5b57\u7b26\u4e0a\uff0c\u6309<code>x</code>\u5220\u9664 D \u5220\u9664\u5149\u6807\u4f4d\u7f6e\u5230\u884c\u5c3e\u7684\u5185\u5bb9 dd \u5220\u9664\u5355\u884c\uff1b\u79fb\u52a8\u5149\u6807\u5230\u5f85\u5220\u9664\u884c\u4e0a\uff0c\u6309<code>dd</code>\u5220\u9664 d$ \u5220\u9664\u5149\u6807\u4e4b\u540e\u5230\u884c\u5c3e\u5185\u5bb9 d^ \u5220\u9664\u884c\u9996(\u975e\u7a7a\u683c\u884c\u9996)\u5230\u5149\u6807\u4e4b\u524d\u5185\u5bb9 d0 \u5220\u9664\u884c\u9996(\u771f\u6b63\u884c\u9996\uff0c\u5305\u542b\u7a7a\u683c\u884c\u9996)\u5230\u5149\u6807\u4e4b\u524d\u5185\u5bb9 dw \u5220\u9664\u5149\u6807\u4e4b\u540e\u5230\u5f53\u524d\u5355\u8bcd\u5c3e daw \u5220\u9664\u5f53\u524d\u5355\u8bcd ndd \u5220\u9664\u5149\u6807\u6240\u5728\u884c\u540en\u884c\uff08\u5305\u62ec\u5149\u6807\u884c\uff09\uff1b\u5982<code>5dd</code>\u5c06\u5220\u9664\u5149\u6807\u540e5\u884c :m,nd \u5220\u9664\u7b2cm~n\u884c\u5185\u5bb9\uff1b\u5982<code>:3,5d</code>\u8868\u793a\u5220\u9664\u7b2c3-5\u884c dG \u5220\u9664\u5149\u6807\u884c\u4e4b\u540e\u6240\u6709\u5185\u5bb9\uff08\u5305\u62ec\u5149\u6807\u884c\uff09 :%d \u5220\u9664\u6240\u6709\u884c"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#44","title":"4.4 \u64a4\u9500","text":"<ol> <li><code>u</code>:\u64a4\u9500\uff08Undo\uff09</li> <li><code>U</code>:\u64a4\u9500\u5bf9\u6574\u884c\u7684\u64cd\u4f5c</li> <li><code>Ctrl + r</code>:\u91cd\u505a\uff08Redo\uff09\uff0c\u5373\u64a4\u9500\u7684\u64a4\u9500\u3002</li> </ol>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#45","title":"4.5 \u590d\u5236\u3001\u7c98\u8d34","text":"\u547d\u4ee4 \u529f\u80fd yy \u590d\u5236\u5149\u6807\u6240\u5728\u884c nyy \u590d\u5236\u5f53\u524d\u884c\u548c\u540en-1\u884c p\uff08\u5c0f\u5199\uff09 \u5728\u5149\u6807\u4f4d\u7f6e\u4e4b\u540e\u7c98\u8d34 P\uff08\u5927\u5199\uff09 \u5728\u5149\u6807\u4f4d\u7f6e\u4e4b\u524d\u7c98\u8d34"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#46","title":"4.6 \u79fb\u52a8","text":"\u547d\u4ee4 \u529f\u80fd gg \u79fb\u52a8\u5230\u6587\u4ef6\u5934\uff08\u884c\u9996\uff09 G \u79fb\u52a8\u5230\u6587\u4ef6\u5c3e\uff08\u884c\u9996\uff09 0 \u6216 ^ \u5149\u6807\u79fb\u5230\u5f53\u524d\u884c\u884c\u9996 $ \u5149\u6807\u79fb\u5230\u5f53\u524d\u884c\u884c\u5c3e n$ \u5149\u6807\u79fb\u52a8\u4ece\u5f53\u524d\u884c\u540en\u884c\u884c\u5c3e\uff08\u5305\u62ec\u5f53\u524d\u884c\uff09 nG \u5149\u6807\u79fb\u52a8\u5230\u7b2cn\u884c\u884c\u9996 :n \u5149\u6807\u79fb\u52a8\u5230\u7b2cn\u884c\u884c\u9996 w \u5411\u524d\u79fb\u52a8\u4e00\u4e2a\u5355\u8bcd\uff08\u5355\u8bcd\u4ee5\u7a7a\u683c\u533a\u5206\uff09 b \u5411\u540e\u79fb\u52a8\u4e00\u4e2a\u5355\u8bcd\uff08\u5355\u8bcd\u4ee5\u7a7a\u683c\u533a\u5206\uff09"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#5","title":"5 \u67e5\u627e\u66ff\u6362","text":""},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#51","title":"5.1 \u5b57\u7b26\u641c\u7d22","text":"<ul> <li>\u8fdb\u5165\u67e5\u627e\u6a21\u5f0f\u65b9\u6cd5\uff1a\u547d\u4ee4\u6a21\u5f0f\u4e0b\u6309<code>/</code>\u6216\u8005<code>:/</code>\u8fdb\u5165\u67e5\u627e\u6a21\u5f0f</li> <li>\u5927\u5c0f\u5199\u654f\u611f\u8bbe\u7f6e\uff1a</li> <li>\u518d\u6267\u884c\u67e5\u627e\u524d\u8bbe\u7f6e<code>:set ignorecase</code>,\u8981\u6062\u590d\u5927\u5c0f\u5199\u654f\u611f\uff0c\u5219\u8f93\u5165<code>:set noignorecase</code></li> <li>\u5728\u5173\u952e\u5b57\u540e\u8f93\u5165<code>\\c</code>\uff08\u5ffd\u7565\u5927\u5c0f\u5199\uff09\u6216<code>\\C</code>\uff08\u5927\u5c0f\u5199\u654f\u611f\uff09</li> </ul> \u547d\u4ee4 \u529f\u80fd <code>:/keyword</code> \u6b63\u5411\u67e5\u627e\u5173\u952e\u5b57keyword,\u6309n\u5411\u524d\u67e5\u627e\u4e00\u4e2a\uff0c\u6309N\u5411\u540e\u67e5\u627e\u4e00\u4e2a <code>:?keyword</code> \u53cd\u5411\u67e5\u627e\u5173\u952e\u5b57keyword,\u6309n\u5411\u524d\u67e5\u627e\u4e00\u4e2a\uff0c\u6309N\u5411\u540e\u67e5\u627e\u4e00\u4e2a <code>:/^keyword</code> \u5339\u914d\u884c\u9996keyword <code>:/keyword$</code> \u5339\u914d\u884c\u5c3ekeyword <code>:/\\&lt;keyword</code> \u5339\u914d\u5355\u8bcd\u4ee5keyword\u5f00\u5934 <code>:/keyword\\&gt;</code> \u5339\u914d\u5355\u8bcd\u4ee5keyword\u7ed3\u5c3e <code>:/keyword\\c</code> \u5339\u914d\u5355\u8bcd\uff0c\u5927\u5c0f\u5199\u4e0d\u654f\u611f <code>:/keyword\\C</code> \u5339\u914d\u5355\u8bcd\uff0c\u5927\u5c0f\u5199\u654f\u611f"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#52","title":"5.2 \u5b57\u7b26\u66ff\u6362","text":"<p>\u53c2\u8003\u8d44\u6599 - \u5b57\u7b26\u66ff\u6362\u7684\u8bed\u6cd5\uff1a<code>:{\u4f5c\u7528\u8303\u56f4}s/{\u76ee\u6807}/{\u66ff\u6362}/{\u66ff\u6362\u6807\u5fd7}</code>   - <code>s</code>\uff1a\u8868\u793a\u66ff\u6362\u7684\u610f\u601d   - <code>/</code>\uff1a\u7528\u4e8e\u5206\u9694\u9650\u5b9a\u533a\u57df\u7684</p>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#521","title":"5.2.1 \u5b57\u7b26\u8303\u56f4\u683c\u5f0f","text":"<ol> <li>\u7a7a\u8868\u793a\u5f53\u524d\u5149\u6807\u6240\u5728\u884c\uff0c\u5982<code>:s/new/New/g</code></li> <li><code>%</code>\uff1a\u8868\u793a\u5168\u6587\uff0c\u5982<code>:%s/new/New/g</code></li> <li>\u5728Visual\u6a21\u5f0f\u4e0b\u9009\u62e9\u533a\u57df\u540e\u8f93\u5165:\uff0cVim\u5373\u53ef\u81ea\u52a8\u8865\u5168\u4e3a <code>:'&lt;,'&gt;</code>,\u5982<code>:'&lt;,'&gt;s/foo/bar/g</code></li> <li><code>:m,n</code>\uff1a\u8868\u793a\u7b2cm-n\u884c\uff0c\u5982<code>:2,8s/New/NEW/g</code></li> </ol>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#522","title":"5.2.2 \u66ff\u6362\u6807\u5fd7","text":"<p>\u4ee5\u4e0b\u66ff\u6362\u6807\u5fd7\u53ef\u4ee5\u7ec4\u5408\u4f7f\u7528 1. \u7a7a\u8868\u793a\u53ea\u66ff\u6362\u5149\u6807\u5904\u5f00\u59cb\u5339\u914d\u7684\u7b2c\u4e00\u4e2a\u76ee\u6807\uff0c\u5982<code>:s/new/New/</code> 2. <code>g</code>:\u5168\u5c40\u66ff\u6362 3. <code>i</code>:\u5927\u5c0f\u5199\u4e0d\u654f\u611f 4. <code>I</code>:\u5927\u5c0f\u5199\u654f\u611f 5. <code>c</code>:\u66ff\u6362\u9700\u8981\u786e\u8ba4</p>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#6","title":"6 \u53ef\u89c6\u5316\u6a21\u5f0f","text":""},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#61","title":"6.1 \u8fdb\u5165\u53ef\u89c6\u5316\u6a21\u5f0f","text":"\u547d\u4ee4 \u529f\u80fd v\uff08\u5c0f\u5199\uff09 \u5b57\u7b26\u9009\u62e9\u6a21\u5f0f\uff0c\u79fb\u52a8\u5149\u6807\u9009\u4e2d\u7ecf\u8fc7\u7684\u5b57\u7b26 V\uff08\u5927\u5199\uff09 \u884c\u9009\u62e9\u6a21\u5f0f\uff0c\u4e0a\u4e0b\u79fb\u52a8\u5149\u6807\u9009\u4e2d\u7ecf\u8fc7\u7684\u884c crtl + v \u5757\u9009\u62e9\u6a21\u5f0f\uff0c\u4e0a\u4e0b\u5de6\u53f3\u79fb\u52a8\uff0c\u9009\u62e9\u7ecf\u8fc7\u7684\u533a\u5757\uff08\u77e9\u5f62\uff09"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#62","title":"6.2 \u53ef\u89c6\u5316\u6a21\u5f0f\u4e0b\u652f\u6301\u7684\u64cd\u4f5c","text":"\u547d\u4ee4 \u529f\u80fd d \u5220\u9664\u9009\u4e2d\u7684\u90e8\u5206\u6587\u672c D \u5220\u9664\u9009\u4e2d\u90e8\u5206\u6240\u5728\u7684\u884c\uff0c\u548c d \u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff0c\u5373\u4f7f\u9009\u4e2d\u6587\u672c\u4e2d\u6709\u4e9b\u5b57\u7b26\u6240\u5728\u7684\u884c\u6ca1\u6709\u90fd\u9009\u4e2d\uff0c\u5220\u9664\u65f6\u4e5f\u4f1a\u4e00\u5e76\u5220\u9664 y \u5c06\u9009\u4e2d\u90e8\u5206\u590d\u5236\u5230\u526a\u8d34\u677f\u4e2d p\uff08\u5c0f\u5199\uff09 \u5c06\u526a\u8d34\u677f\u4e2d\u7684\u5185\u5bb9\u7c98\u8d34\u5230\u5149\u6807\u4e4b\u540e P\uff08\u5927\u5199\uff09 \u5c06\u526a\u8d34\u677f\u4e2d\u7684\u5185\u5bb9\u7c98\u8d34\u5230\u5149\u6807\u4e4b\u524d u\uff08\u5c0f\u5199\uff09 \u5c06\u9009\u4e2d\u90e8\u5206\u4e2d\u7684\u5927\u5199\u5b57\u7b26\u5168\u90e8\u6539\u4e3a\u5c0f\u5199\u5b57\u7b26 U\uff08\u5927\u5199\uff09 \u5c06\u9009\u4e2d\u90e8\u5206\u4e2d\u7684\u5c0f\u5199\u5b57\u7b26\u5168\u90e8\u6539\u4e3a\u5927\u5199\u5b57\u7b26"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#7-vim","title":"7 vim\u591a\u7a97\u53e3","text":""},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#71","title":"7.1 \u5782\u76f4\u5206\u5c4f\u3001\u6c34\u5e73\u5206\u5c4f","text":"<ul> <li><code>:sp</code>\u6216<code>:split</code>\uff1a\u6c34\u5e73\u5206\u5c4f</li> <li><code>:vs</code>\u6216<code>:vsp</code>\u6216<code>:vsplit</code>\uff1a\u5782\u76f4\u5206\u5c4f</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#72","title":"7.2 \u5207\u6362\u7a97\u53e3","text":"<ul> <li><code>Ctrl + w + w</code></li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#73","title":"7.3 \u8c03\u8282\u7a97\u53e3\u5927\u5c0f","text":"<ul> <li><code>Ctrl + w + +</code>\uff1a\u7a97\u53e3\u653e\u5927</li> <li><code>Ctrl + w + -</code>\uff1a\u7a97\u53e3\u7f29\u5c0f</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#74","title":"7.4 \u9000\u51fa\u7a97\u53e3","text":"<p>\u9664\u4e86\u6b63\u5e38\u4f7f\u7528<code>:q</code>\u9000\u51fa\u7a97\u53e3\u5916\uff0c\u8fd8\u80fd\u4f7f\u7528\u547d\u4ee4\u4e00\u6b21\u9000\u51fa\u591a\u4e2a\u7a97\u53e3 - <code>:on</code>\uff1a\u9000\u51fa\u9664\u5f53\u524d\u7a97\u53e3\u5916\u6240\u6709\u7a97\u53e3</p>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#8-vim","title":"8 vim\u8bbe\u7f6e","text":""},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#81","title":"8.1 \u6587\u4ef6\u7f16\u7801","text":"<ul> <li>\u67e5\u770b\u6587\u4ef6\u7f16\u7801\u683c\u5f0f\uff1a</li> <li><code>:set encoding</code></li> <li><code>:set enc</code></li> <li>\u8bbe\u7f6e\u6587\u4ef6\u4fdd\u5b58\u7684\u7f16\u7801\u683c\u5f0f\uff1a</li> <li><code>set fileencoding=utf8</code></li> <li><code>set fenc=utf8</code></li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#82","title":"8.2 \u542f\u7528\u9f20\u6807","text":"<ul> <li><code>:set mouse=a</code> \uff1a\u5f00\u542f\u9f20\u6807\u6a21\u5f0f</li> <li><code>:set mouse=</code> \uff1a\u53d6\u6d88\u9f20\u6807\u6a21\u5f0f</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#83","title":"8.3 \u884c\u53f7","text":"<ul> <li><code>:set nu</code>\u6216<code>:set number</code>\uff1a\u663e\u793a\u884c\u53f7</li> <li><code>:set nonu</code>\u6216<code>:set nonumber</code>\uff1a\u4e0d\u663e\u793a\u884c\u53f7</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#84-tab","title":"8.4 tab\u65b9\u5f0f","text":"<ul> <li><code>:set expandtab</code>:\u4f7f\u7528\u7a7a\u683c\u6765\u66ff\u6362Tab\uff08\u5f00\u542f\u540e\uff0c\u9ed8\u8ba48\u4e2a\u7a7a\u683c\uff09</li> <li><code>:set noexpandtab</code>:\u53d6\u6d88\u4f7f\u7528\u7a7a\u683c\u4ee3\u66ffTab</li> <li><code>:set tabstop=4</code>\u6216<code>:set ts=4</code>:\u8bbe\u7f6e\u6240\u6709\u7684Tab\u6216\u7f29\u8fdb\u4e3a\u5360\u75284\u5217\u5bbd\u5ea6</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#85","title":"8.5 \u7f29\u8fdb","text":"<ul> <li><code>:set ai</code>\u6216<code>:set autoindent</code>:\u56de\u8f66\u540e\u81ea\u52a8\u7f29\u8fdb</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#86","title":"8.6 \u641c\u7d22\u9ad8\u4eae","text":"<ul> <li><code>:set hlsearch</code> : \u5f00\u542f\u9ad8\u4eae</li> <li><code>:set nohlsearch</code> \uff1a\u5173\u95ed\u9ad8\u4eae</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#87","title":"8.7 \u9ad8\u4eae\u663e\u793a\u5f53\u524d\u884c","text":"<ul> <li><code>:set cursorline</code> \uff1a\u5f53\u524d\u884c\u4e0b\u9762\u663e\u793a\u4e0b\u5212\u7ebf</li> <li><code>:set nocursorline</code> \uff1a\u53d6\u6d88</li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#88","title":"8.8 \u8bbe\u7f6e\u9ad8\u4eae\u663e\u793a\u62ec\u53f7","text":"<ul> <li><code>set showmatch</code> \uff1a\u9ad8\u4eae\u663e\u793a\u5339\u914d\u7684\u62ec\u53f7 <code>([{\u548c}])</code></li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#89","title":"8.9 \u8bbe\u7f6e\u8bed\u6cd5\u9ad8\u4eae","text":"<ul> <li><code>syntax on</code></li> </ul>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#810","title":"8.10 \u663e\u793a\u72b6\u6001\u680f","text":"<ol> <li><code>set laststatus=2</code> \uff1a\u663e\u793a\u72b6\u6001\u680f\uff08\u9ed8\u8ba4\u503c\u4e3a 1\uff0c\u8868\u793a\u65e0\u6cd5\u663e\u793a\u72b6\u6001\u680f\uff0c2 \u8868\u793a\u663e\u793a\u72b6\u6001\u680f\uff09</li> <li><code>set statusline=%F%m%r%h%w\\ [FORMAT=%{&amp;ff}]\\ [TYPE=%Y]\\ [POS=%l,%v][%p%%]\\ %{strftime(\\\"%d/%m/%y\\ -\\ %H:%M\\\")}</code> \uff1a\u8bbe\u7f6e\u72b6\u6001\u680f\u5185\u5bb9</li> <li>\u8bed\u6cd5\u683c\u5f0f\u5982\u4e0b: |\u683c\u5f0f|\u529f\u80fd| |---|---| | %F |\u5b8c\u6574\u6587\u4ef6\u8def\u5f84\u540d| | %m |\u5f53\u524d\u7f13\u51b2\u88ab\u4fee\u6539\u6807\u8bb0| | %m |\u5f53\u524d\u7f13\u51b2\u53ea\u8bfb\u6807\u8bb0| | %h |\u5e2e\u52a9\u7f13\u51b2\u6807\u8bb0| | %w |\u9884\u89c8\u7f13\u51b2\u6807\u8bb0| | %Y |\u6587\u4ef6\u7c7b\u578b| | %b |ASCII\u503c| | %B |\u5341\u516d\u8fdb\u5236\u503c| | %l |\u884c\u6570| | %v |\u5217\u6570| | %p |\u5f53\u524d\u884c\u6570\u5360\u603b\u884c\u6570\u7684\u7684\u767e\u5206\u6bd4| | %L |\u603b\u884c\u6570| | %{...} |\u8bc4\u4f30\u8868\u8fbe\u5f0f\u7684\u503c\uff0c\u5e76\u7528\u503c\u4ee3\u66ff| | <code>%{\"[fenc=\".(&amp;fenc==\"\"?&amp;enc:&amp;fenc).((exists(\"+bomb\") &amp;&amp; &amp;bomb)?\"+\":\"\").\"]\"}</code> |\u663e\u793a\u6587\u4ef6\u7f16\u7801| | %{&amp;ff} |\u663e\u793a\u6587\u4ef6\u7c7b\u578b|</li> </ol>"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#811","title":"8.11 \u6298\u53e0\u4ee3\u7801","text":"<ul> <li><code>set foldenable</code> \uff1a\u6fc0\u6d3b\u6298\u53e0\uff08\u6d4b\u8bd5\u4e0d\u4f7f\u7528\u8fd9\u4e2a\uff0c\u76f4\u63a5\u8bbe\u7f6e <code>set foldmethod=xxx</code> \u4e5f\u6fc0\u6d3b\u4e86\uff09</li> <li><code>set nofen</code> \uff1a\u53d6\u6d88\u6298\u53e0</li> <li><code>set foldmethod=xxx</code> \u6216 <code>set fdm=xxx</code> \uff1a\u53ef\u9009\u4ee5\u4e0b 6 \u79cd\u65b9\u6cd5\uff0c\u4e00\u822c\u4f7f\u7528syntax \u67096\u79cd\u65b9\u6cd5\u6765\u9009\u5b9a\u6298\u53e0\uff1a</li> <li><code>manual</code> \uff1a\u624b\u5de5\u5b9a\u4e49\u6298\u53e0</li> <li><code>indent</code> \uff1a\u66f4\u591a\u7684\u7f29\u8fdb\u8868\u793a\u66f4\u9ad8\u7ea7\u522b\u7684\u6298\u53e0</li> <li><code>expr</code> \uff1a\u7528\u8868\u8fbe\u5f0f\u6765\u5b9a\u4e49\u6298\u53e0</li> <li><code>syntax</code> \uff1a\u7528\u8bed\u6cd5\u9ad8\u4eae\u6765\u5b9a\u4e49\u6298\u53e0\uff08\u901a\u5e38\u4f7f\u7528\u8fd9\u4e2a\uff09</li> <li><code>diff</code> \uff1a\u5bf9\u6ca1\u6709\u66f4\u6539\u7684\u6587\u672c\u8fdb\u884c\u6298\u53e0</li> <li><code>marker</code> \uff1a\u5bf9\u6587\u4e2d\u7684\u6807\u5fd7\u6298\u53e0</li> </ul> <code>zc</code> \u5173\u95ed\u5f53\u524d\u6253\u5f00\u7684\u6298\u53e0 <code>zo</code> \u6253\u5f00\u5f53\u524d\u7684\u6298\u53e0 <code>zm</code> \u5173\u95ed\u6240\u6709\u6298\u53e0 <code>zM</code> \u5173\u95ed\u6240\u6709\u6298\u53e0\u53ca\u5176\u5d4c\u5957\u7684\u6298\u53e0 <code>zr</code> \u6253\u5f00\u6240\u6709\u6298\u53e0 <code>zR</code> \u6253\u5f00\u6240\u6709\u6298\u53e0\u53ca\u5176\u5d4c\u5957\u7684\u6298\u53e0 <code>zd</code> \u5220\u9664\u5f53\u524d\u6298\u53e0 <code>zE</code> \u5220\u9664\u6240\u6709\u6298\u53e0 <code>zj</code> \u79fb\u52a8\u81f3\u4e0b\u4e00\u4e2a\u6298\u53e0 <code>zk</code> \u79fb\u52a8\u81f3\u4e0a\u4e00\u4e2a\u6298\u53e0 <code>zn</code> \u7981\u7528\u6298\u53e0 <code>zN</code> \u542f\u7528\u6298\u53e0"},{"location":"Documents/A-Linux/Linux%E5%B7%A5%E5%85%B7/vim/#9-vimvimrc","title":"9 vim\u914d\u7f6e\u6587\u4ef6.vimrc","text":"<pre><code>\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\n\"\"\"=&gt;\u5168\u5c40\u914d\u7f6e&lt;=\"\"\"\n\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\n\"\u5173\u95edvi\u517c\u5bb9\u6a21\u5f0f\"\nset nocompatible\n\n\"\u8bbe\u7f6e\u5386\u53f2\u8bb0\u5f55\u6b65\u6570\"\nset history=1000\n\n\"\u5f00\u542f\u76f8\u5173\u63d2\u4ef6\"\n\"\u4fa6\u6d4b\u6587\u4ef6\u7c7b\u578b\"\nfiletype on\n\"\u8f7d\u5165\u6587\u4ef6\u7c7b\u578b\u63d2\u4ef6\"\nfiletype plugin on\n\"\u4e3a\u7279\u5b9a\u6587\u4ef6\u7c7b\u578b\u8f7d\u5165\u76f8\u5173\u7f29\u8fdb\u6587\u4ef6\"\nfiletype indent on\n\n\"\u5f53\u6587\u4ef6\u5728\u5916\u90e8\u88ab\u4fee\u6539\u65f6\uff0c\u81ea\u52a8\u66f4\u65b0\u8be5\u6587\u4ef6\"\nset autoread\n\n\"\u6fc0\u6d3b\u9f20\u6807\u7684\u4f7f\u7528\"\nset mouse=a\nset selection=exclusive\nset selectmode=mouse,key\n\n\"\u4fdd\u5b58\u5168\u5c40\u53d8\u91cf\"\nset viminfo+=!\n\n\"\u5e26\u6709\u5982\u4e0b\u7b26\u53f7\u7684\u5355\u8bcd\u4e0d\u8981\u88ab\u6362\u884c\u5206\u5272\"\nset iskeyword+=_,$,@,%,#,-\n\n\"\u901a\u8fc7\u4f7f\u7528: commands\u547d\u4ee4\uff0c\u544a\u8bc9\u6211\u4eec\u6587\u4ef6\u7684\u54ea\u4e00\u884c\u88ab\u6539\u53d8\u8fc7\"\nset report=0\n\n\"\u88ab\u5206\u5272\u7684\u7a97\u53e3\u95f4\u663e\u793a\u7a7a\u767d\uff0c\u4fbf\u4e8e\u9605\u8bfb\"\nset fillchars=vert:\\ ,stl:\\ ,stlnc:\\\n\n\n\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\n\"\"\"=&gt;\u5b57\u4f53\u548c\u989c\u8272&lt;=\"\"\"\n\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\n\"\u81ea\u52a8\u5f00\u542f\u8bed\u6cd5\u9ad8\u4eae\"\nsyntax enable\n\n\"\u8bbe\u7f6e\u5b57\u4f53\"\n\"set guifont=dejaVu\\ Sans\\ MONO\\ 10\nset guifont=Courier_New:h10:cANSI\n\n\"\u8bbe\u7f6e\u989c\u8272\"\ncolorscheme desert\n\n\"\u9ad8\u4eae\u663e\u793a\u5f53\u524d\u884c\"\nset cursorline\nhi cursorline guibg=#00ff00\nhi CursorColumn guibg=#00ff00\n\n\"\u9ad8\u4eae\u663e\u793a\u666e\u901atxt\u6587\u4ef6\uff08\u9700\u8981txt.vim\u811a\u672c\uff09\"\nau BufRead,BufNewFile *  setfiletype txt\n\n\n\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\n\"\"\"=&gt;\u4ee3\u7801\u6298\u53e0\u529f\u80fd&lt;=\"\"\"\n\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\n\"\u6fc0\u6d3b\u6298\u53e0\u529f\u80fd\"\nset foldenable\n\"set nofen\uff08\u8fd9\u4e2a\u662f\u5173\u95ed\u6298\u53e0\u529f\u80fd\uff09\"\n\n\"\u8bbe\u7f6e\u6309\u7167\u8bed\u6cd5\u65b9\u5f0f\u6298\u53e0\uff08\u53ef\u7b80\u5199set fdm=XX\uff09\"\n\"\u67096\u79cd\u6298\u53e0\u65b9\u6cd5\uff1a\n\"manual   \u624b\u5de5\u5b9a\u4e49\u6298\u53e0\"\n\"indent   \u66f4\u591a\u7684\u7f29\u8fdb\u8868\u793a\u66f4\u9ad8\u7ea7\u522b\u7684\u6298\u53e0\"\n\"expr     \u7528\u8868\u8fbe\u5f0f\u6765\u5b9a\u4e49\u6298\u53e0\"\n\"syntax   \u7528\u8bed\u6cd5\u9ad8\u4eae\u6765\u5b9a\u4e49\u6298\u53e0\"\n\"diff     \u5bf9\u6ca1\u6709\u66f4\u6539\u7684\u6587\u672c\u8fdb\u884c\u6298\u53e0\"\n\"marker   \u5bf9\u6587\u4e2d\u7684\u6807\u5fd7\u8fdb\u884c\u6298\u53e0\"\nset foldmethod=manual\n\"set fdl=0\uff08\u8fd9\u4e2a\u662f\u4e0d\u9009\u7528\u4efb\u4f55\u6298\u53e0\u65b9\u6cd5\uff09\"\n\n\"\u8bbe\u7f6e\u6298\u53e0\u533a\u57df\u7684\u5bbd\u5ea6\"\n\"\u5982\u679c\u4e0d\u4e3a0\uff0c\u5219\u5728\u5c4f\u5e55\u5de6\u4fa7\u663e\u793a\u4e00\u4e2a\u6298\u53e0\u6807\u8bc6\u5217\n\"\u5206\u522b\u7528\u201c-\u201d\u548c\u201c+\u201d\u6765\u8868\u793a\u6253\u5f00\u548c\u5173\u95ed\u7684\u6298\u53e0\nset foldcolumn=0\n\n\"\u8bbe\u7f6e\u6298\u53e0\u5c42\u6570\u4e3a3\"\nsetlocal foldlevel=3\n\n\"\u8bbe\u7f6e\u4e3a\u81ea\u52a8\u5173\u95ed\u6298\u53e0\"\nset foldclose=all\n\n\"\u7528\u7a7a\u683c\u952e\u6765\u4ee3\u66ffzo\u548czc\u5feb\u6377\u952e\u5b9e\u73b0\u5f00\u5173\u6298\u53e0\"\n\"zo O-pen a fold (\u6253\u5f00\u6298\u53e0)\n\"zc C-lose a fold (\u5173\u95ed\u6298\u53e0)\n\"zf F-old creation (\u521b\u5efa\u6298\u53e0)\n\"nnoremap &lt;space&gt; @=((foldclosed(line('.')) &lt; 0) ? 'zc' : 'zo')&lt;CR&gt;\n\n\n\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\n\"\"\"=&gt;\u6587\u5b57\u5904\u7406&lt;=\"\"\"\n\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\n\"\u4f7f\u7528\u7a7a\u683c\u6765\u66ff\u6362Tab\"\nset expandtab\n\n\"\u8bbe\u7f6e\u6240\u6709\u7684Tab\u548c\u7f29\u8fdb\u4e3a4\u4e2a\u7a7a\u683c\"\nset tabstop=4\n\n\"\u8bbe\u5b9a&lt;&lt;\u548c&gt;&gt;\u547d\u4ee4\u79fb\u52a8\u65f6\u7684\u5bbd\u5ea6\u4e3a4\"\nset shiftwidth=4\n\n\"\u4f7f\u5f97\u6309\u9000\u683c\u952e\u65f6\u53ef\u4ee5\u4e00\u6b21\u5220\u96644\u4e2a\u7a7a\u683c\"\nset softtabstop=4\nset smarttab\n\n\"\u7f29\u8fdb\uff0c\u81ea\u52a8\u7f29\u8fdb\uff08\u7ee7\u627f\u524d\u4e00\u884c\u7684\u7f29\u8fdb\uff09\"\n\"set autoindent \u547d\u4ee4\u6253\u5f00\u81ea\u52a8\u7f29\u8fdb\uff0c\u662f\u4e0b\u9762\u914d\u7f6e\u7684\u7f29\u5199\n\"\u53ef\u4f7f\u7528autoindent\u547d\u4ee4\u7684\u7b80\u5199\uff0c\u5373\u201c:set ai\u201d\u548c\u201c:set noai\u201d\n\"\u8fd8\u53ef\u4ee5\u4f7f\u7528\u201c:set ai sw=4\u201d\u5728\u4e00\u4e2a\u547d\u4ee4\u4e2d\u6253\u5f00\u7f29\u8fdb\u5e76\u8bbe\u7f6e\u7f29\u8fdb\u7ea7\u522b\nset ai\nset cindent\n\n\"\u667a\u80fd\u7f29\u8fdb\"\nset si\n\n\"\u81ea\u52a8\u6362\u884c\u201d\nset wrap\n\n\"\u8bbe\u7f6e\u8f6f\u5bbd\u5ea6\"\nset sw=4\n\n\"\u884c\u5185\u66ff\u6362\"\nset gdefault\n\n\n\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\n\"\"\"=&gt;Vim \u754c\u9762&lt;=\"\"\"\n\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\n\"\u589e\u5f3a\u6a21\u5f0f\u4e2d\u7684\u547d\u4ee4\u884c\u81ea\u52a8\u5b8c\u6210\u64cd\u4f5c\"\nset wildmenu\n\n\"\u663e\u793a\u6807\u5c3a\"\nset ruler\n\n\"\u8bbe\u7f6e\u547d\u4ee4\u884c\u7684\u9ad8\u5ea6\"\nset cmdheight=1\n\n\"\u663e\u793a\u884c\u6570\"\nset nu\n\n\"\u4e0d\u8981\u56fe\u5f62\u6309\u94ae\"\nset go=\n\n\"\u5728\u6267\u884c\u5b8f\u547d\u4ee4\u65f6\uff0c\u4e0d\u8fdb\u884c\u663e\u793a\u91cd\u7ed8\uff1b\u5728\u5b8f\u547d\u4ee4\u6267\u884c\u5b8c\u6210\u540e\uff0c\u4e00\u6b21\u6027\u91cd\u7ed8\uff0c\u4ee5\u4fbf\u63d0\u9ad8\u6027\u80fd\"\nset lz\n\n\"\u4f7f\u56de\u683c\u952e\uff08backspace\uff09\u6b63\u5e38\u5904\u7406indent, eol, start\u7b49\"\nset backspace=eol,start,indent\n\n\"\u5141\u8bb8\u7a7a\u683c\u952e\u548c\u5149\u6807\u952e\u8de8\u8d8a\u884c\u8fb9\u754c\"\nset whichwrap+=&lt;,&gt;,h,l\n\n\"\u8bbe\u7f6e\u9b54\u672f\"\nset magic\n\n\"\u5173\u95ed\u9047\u5230\u9519\u8bef\u65f6\u7684\u58f0\u97f3\u63d0\u793a\"\n\"\u5173\u95ed\u9519\u8bef\u4fe1\u606f\u54cd\u94c3\"\nset noerrorbells\n\n\"\u5173\u95ed\u4f7f\u7528\u53ef\u89c6\u54cd\u94c3\u4ee3\u66ff\u547c\u53eb\"\nset novisualbell\n\n\"\u9ad8\u4eae\u663e\u793a\u5339\u914d\u7684\u62ec\u53f7([{\u548c}])\"\nset showmatch\n\n\"\u5339\u914d\u62ec\u53f7\u9ad8\u4eae\u7684\u65f6\u95f4\uff08\u5355\u4f4d\u662f\u5341\u5206\u4e4b\u4e00\u79d2\uff09\"\nset mat=2\n\n\"\u5149\u6807\u79fb\u52a8\u5230buffer\u7684\u9876\u90e8\u548c\u5e95\u90e8\u65f6\u4fdd\u63013\u884c\u8ddd\u79bb\"\nset scrolloff=3\n\n\"\u641c\u7d22\u9010\u5b57\u7b26\u9ad8\u4eae\"\nset hlsearch\nset incsearch\n\n\"\u641c\u7d22\u65f6\u4e0d\u533a\u5206\u5927\u5c0f\u5199\"\n\"\u8fd8\u53ef\u4ee5\u4f7f\u7528\u7b80\u5199\uff08\u201c:set ic\u201d\u548c\u201c:set noic\u201d\uff09\"\nset ignorecase\n\n\"\u7528\u6d45\u8272\u9ad8\u4eae\u663e\u793a\u5f53\u524d\u884c\"\nautocmd InsertLeave * se nocul\nautocmd InsertEnter * se cul\n\n\"\u8f93\u5165\u7684\u547d\u4ee4\u663e\u793a\u51fa\u6765\uff0c\u770b\u7684\u6e05\u695a\"\nset showcmd\n\n\n\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\n\"\"\"=&gt;\u7f16\u7801\u8bbe\u7f6e&lt;=\"\"\"\n\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\n\"\u8bbe\u7f6e\u7f16\u7801\"\nset encoding=utf-8\nset fencs=utf-8,ucs-bom,shift-jis,gb18030,gbk,gb2312,cp936\n\n\"\u8bbe\u7f6e\u6587\u4ef6\u7f16\u7801\"\nset fileencodings=utf-8\n\n\"\u8bbe\u7f6e\u7ec8\u7aef\u7f16\u7801\"\nset termencoding=utf-8\n\n\"\u8bbe\u7f6e\u8bed\u8a00\u7f16\u7801\"\nset langmenu=zh_CN.UTF-8\nset helplang=cn\n\n\n\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\n\"\"\"=&gt;\u5176\u4ed6\u8bbe\u7f6e&lt;=\"\"\"\n\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\n\"\u5f00\u542f\u65b0\u884c\u65f6\u4f7f\u7528\u667a\u80fd\u81ea\u52a8\u7f29\u8fdb\"\nset smartindent\nset cin\nset showmatch\n\n\"\u5728\u5904\u7406\u672a\u4fdd\u5b58\u6216\u53ea\u8bfb\u6587\u4ef6\u7684\u65f6\u5019\uff0c\u5f39\u51fa\u786e\u8ba4\"\nset confirm\n\n\"\u9690\u85cf\u5de5\u5177\u680f\"\nset guioptions-=T\n\n\"\u9690\u85cf\u83dc\u5355\u680f\"\nset guioptions-=m\n\n\"\u7f6e\u7a7a\u9519\u8bef\u94c3\u58f0\u7684\u7ec8\u7aef\u4ee3\u7801\"\nset vb t_vb=\n\n\"\u663e\u793a\u72b6\u6001\u680f\uff08\u9ed8\u8ba4\u503c\u4e3a1\uff0c\u8868\u793a\u65e0\u6cd5\u663e\u793a\u72b6\u6001\u680f\uff09\"\nset laststatus=2\n\n\"\u72b6\u6001\u884c\u663e\u793a\u7684\u5185\u5bb9\"\nset statusline=%F%m%r%h%w\\ [FORMAT=%{&amp;ff}]\\ [TYPE=%Y]\\ [POS=%l,%v][%p%%]\\ %{strftime(\\\"%d/%m/%y\\ -\\ %H:%M\\\")}\n\n\"\u7c98\u8d34\u4e0d\u6362\u884c\u95ee\u9898\u7684\u89e3\u51b3\u65b9\u6cd5\"\nset pastetoggle=&lt;F9&gt;\n\n\"\u8bbe\u7f6e\u80cc\u666f\u989c\u8272\"\nset background=dark\n\n\"\u6587\u4ef6\u7c7b\u578b\u81ea\u52a8\u68c0\u6d4b\uff0c\u4ee3\u7801\u667a\u80fd\u8865\u5168\"\nset completeopt=longest,preview,menu\n\n\"\u5171\u4eab\u526a\u5207\u677f\"\nset clipboard+=unnamed\n\n\"\u4ece\u4e0d\u5907\u4efd\"\nset nobackup\nset noswapfile\n\n\"\u81ea\u52a8\u4fdd\u5b58\"\nset autowrite\n\n\"\u663e\u793a\u4e2d\u6587\u5e2e\u52a9\"\nif version &gt;= 603\nset helplang=cn\n            set encoding=utf-8\nendif\n\n\"\u8bbe\u7f6e\u9ad8\u4eae\u76f8\u5173\u9879\"\nhighlight Search ctermbg=black ctermfg=white guifg=white guibg=black\n\n\n\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\n\"\"\"=&gt;\u5728shell\u811a\u672c\u5f00\u5934\u81ea\u52a8\u589e\u52a0\u89e3\u91ca\u5668\u4ee5\u53ca\u4f5c\u8005\u7b49\u7248\u6743\u4fe1\u606f&lt;=\"\"\"\n\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\n\"\u65b0\u5efa.py,.cc,.sh,.java\u6587\u4ef6\uff0c\u81ea\u52a8\u63d2\u5165\u6587\u4ef6\u5934\"\nautocmd BufNewFile *.py,*.cc,*.sh,*.java exec \":call SetTitle()\"\n\"\u5b9a\u4e49\u51fd\u6570SetTitle\uff0c\u81ea\u52a8\u63d2\u5165\u6587\u4ef6\u5934\"\nfunc SetTitle()\nif expand (\"%:e\") == 'sh'\ncall setline(1, \"#!/bin/bash\")\ncall setline(2, \"#Author:shuhaiwen\")\ncall setline(3, \"#Blog:https://shuhaiwen.github.io/\")\ncall setline(4, \"#Time:\".strftime(\"%F %T\"))\ncall setline(5, \"#Name:\".expand(\"%\"))\ncall setline(6, \"#Version:V1.0\")\ncall setline(7, \"#Description:This is a production script.\")\nendif\nendfunc\n</code></pre>"},{"location":"Documents/A-Linux/%E4%BF%A1%E5%8F%B7/%E4%BF%A1%E5%8F%B7/","title":"\u4fe1\u53f7","text":""},{"location":"Documents/A-Linux/%E4%BF%A1%E5%8F%B7/%E4%BF%A1%E5%8F%B7/#1","title":"1 \u4fe1\u53f7\u8868","text":"\u7f16\u53f7 \u4fe1\u53f7\u540d\u79f0 \u7f3a\u7701\u52a8\u4f5c \u8bf4\u660e 1 SIGHUP \u7ec8\u6b62 \u7ec8\u6b62\u63a7\u5236\u7ec8\u7aef\u6216\u8fdb\u7a0b 2 SIGINT \u7ec8\u6b62 \u952e\u76d8\u4ea7\u751f\u7684\u4e2d\u65ad (Ctrl-C) 3 SIGQUIT dump \u952e\u76d8\u4ea7\u751f\u7684\u9000\u51fa 4 SIGILL dump \u975e\u6cd5\u6307\u4ee4 5 SIGTRAP dump debug \u4e2d\u65ad 6 SIGABRT\uff0fSIGIOT dump \u5f02\u5e38\u4e2d\u6b62 7 SIGBUS\uff0fSIGEMT dump \u603b\u7ebf\u5f02\u5e38/EMT \u6307\u4ee4 8 SIGFPE dump \u6d6e\u70b9\u8fd0\u7b97\u6ea2\u51fa 9 SIGKILL \u7ec8\u6b62 \u5f3a\u5236\u8fdb\u7a0b\u7ec8\u6b62 10 SIGUSR1 \u7ec8\u6b62 \u7528\u6237\u4fe1\u53f7, \u8fdb\u7a0b\u53ef\u81ea\u5b9a\u4e49\u7528\u9014 11 SIGSEGV dump \u975e\u6cd5\u5185\u5b58\u5730\u5740\u5f15\u7528 12 SIGUSR2 \u7ec8\u6b62 \u7528\u6237\u4fe1\u53f7\uff0c\u8fdb\u7a0b\u53ef\u81ea\u5b9a\u4e49\u7528\u9014 13 SIGPIPE \u7ec8\u6b62 \u5411\u67d0\u4e2a\u6ca1\u6709\u8bfb\u53d6\u7684\u7ba1\u9053\u4e2d\u5199\u5165\u6570\u636e 14 SIGALRM \u7ec8\u6b62 \u65f6\u949f\u4e2d\u65ad (\u95f9\u949f) 15 SIGTERM \u7ec8\u6b62 \u8fdb\u7a0b\u7ec8\u6b62 16 SIGSTKFLT \u7ec8\u6b62 \u534f\u5904\u7406\u5668\u6808\u9519\u8bef 17 SIGCHLD \u5ffd\u7565 \u5b50\u8fdb\u7a0b\u9000\u51fa\u6216\u4e2d\u65ad 18 SIGCONT \u7ee7\u7eed \u5982\u8fdb\u7a0b\u505c\u6b62\u72b6\u6001\u5219\u5f00\u59cb\u8fd0\u884c 19 SIGSTOP \u505c\u6b62 \u505c\u6b62\u8fdb\u7a0b\u8fd0\u884c 20 SIGSTP \u505c\u6b62 \u952e\u76d8\u4ea7\u751f\u7684\u505c\u6b62 21 SIGTTIN \u505c\u6b62 \u540e\u53f0\u8fdb\u7a0b\u8bf7\u6c42\u8f93\u5165 22 SIGTTOU \u505c\u6b62 \u540e\u53f0\u8fdb\u7a0b\u8bf7\u6c42\u8f93\u51fa 23 SIGURG \u5ffd\u7565 socket \u53d1\u751f\u7d27\u6025\u60c5\u51b5 24 SIGXCPU dump CPU \u65f6\u95f4\u9650\u5236\u88ab\u6253\u7834 25 SIGXFSZ dump \u6587\u4ef6\u5927\u5c0f\u9650\u5236\u88ab\u6253\u7834 26 SIGVTALRM \u7ec8\u6b62 \u865a\u62df\u5b9a\u65f6\u65f6\u949f 27 SIGPROF \u7ec8\u6b62 profile timer clock 28 SIGWINCH \u5ffd\u7565 \u7a97\u53e3\u5c3a\u5bf8\u8c03\u6574 29 SIGIO/SIGPOLL \u7ec8\u6b62 I/O \u53ef\u7528 30 SIGPWR \u7ec8\u6b62 \u7535\u6e90\u5f02\u5e38 31 SIGSYS\uff0fSYSUNUSED dump \u7cfb\u7edf\u8c03\u7528\u5f02\u5e38"},{"location":"Documents/A-Linux/%E4%BF%A1%E5%8F%B7/%E4%BF%A1%E5%8F%B7/#2","title":"2 \u4fe1\u53f7","text":"<p>\u6b64\u6587\u7ae0\u5185\u5bb9\u6765\u6e90\u7f51\u7edc- \u539f\u94fe\u63a5</p> <pre><code>SIGKILL\uff089\uff09\u3001SIGSTOP\uff0819\uff09\u8fd92\u4e2a\u4fe1\u53f7\u662f\u4e0d\u80fd\u88ab\u6355\u83b7\u3001\u963b\u6b62\u6216\u5ffd\u7565\n</code></pre> <p>\u4fe1\u53f7\u662f Linux \u8fdb\u7a0b\u95f4\u901a\u4fe1\u7684\u6700\u53e4\u8001\u7684\u65b9\u5f0f\u4e4b\u4e00\uff0c\u662f\u4e8b\u4ef6\u53d1\u751f\u65f6\u5bf9\u8fdb\u7a0b\u7684\u901a\u77e5\u673a\u5236\uff0c\u6709\u65f6\u4e5f\u79f0\u4e4b\u4e3a\u8f6f\u4ef6\u4e2d\u65ad\uff0c\u5b83\u662f\u5728\u8f6f\u4ef6\u5c42\u6b21\u4e0a\u5bf9\u4e2d\u65ad\u673a\u5236\u7684\u4e00\u79cd\u6a21\u62df\uff0c\u662f\u4e00\u79cd\u5f02\u6b65\u901a\u4fe1\u7684\u65b9\u5f0f\u3002\u4fe1\u53f7\u53ef\u4ee5\u5bfc\u81f4\u4e00\u4e2a\u6b63\u5728\u8fd0\u884c\u7684\u8fdb\u7a0b\u88ab\u53e6\u4e00\u4e2a\u6b63\u5728\u8fd0\u884c\u7684\u5f02\u6b65\u8fdb\u7a0b\u4e2d\u65ad\uff0c\u8f6c\u800c\u5904\u7406\u67d0\u4e00\u4e2a\u7a81\u53d1\u4e8b\u4ef6\u3002</p>"},{"location":"Documents/A-Linux/%E4%BF%A1%E5%8F%B7/%E4%BF%A1%E5%8F%B7/#21","title":"2.1 \u4ea7\u751f\u4fe1\u53f7","text":"<p>\u53d1\u5f80\u8fdb\u7a0b\u7684\u8bf8\u591a\u4fe1\u53f7\uff0c\u901a\u5e38\u90fd\u662f\u6e90\u4e8e\u5185\u6838\uff0c\u53ef\u4ee5\u5f15\u53d1\u5185\u6838\u4e3a\u8fdb\u7a0b\u4ea7\u751f\u4fe1\u53f7\u7684\u5404\u7c7b\u4e8b\u4ef6\uff1a</p> <ul> <li>\u5bf9\u4e8e\u524d\u53f0\u8fdb\u7a0b\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u8f93\u5165\u7279\u6b8a\u7684\u7ec8\u7aef\u5b57\u7b26\u6765\u7ed9\u5b83\u53d1\u9001\u4fe1\u53f7\u3002\u6bd4\u5982\u8f93\u5165Ctrl+C\u901a\u5e38\u4f1a\u7ed9\u8fdb\u7a0b\u53d1\u9001\u4e00\u4e2a\u4e2d\u65ad\u4fe1\u53f7\u3002</li> <li>\u786c\u4ef6\u53d1\u751f\u5f02\u5e38\uff0c\u5373\u786c\u4ef6\u68c0\u6d4b\u5230\u4e00\u4e2a\u9519\u8bef\u6761\u4ef6\u5e76\u901a\u77e5\u5185\u6838\uff0c\u968f\u5373\u518d\u7531\u5185\u6838\u53d1\u9001\u76f8\u5e94\u4fe1\u53f7\u7ed9\u76f8\u5173\u8fdb\u7a0b\u3002\u6bd4\u5982\u6267\u884c\u4e00\u6761\u5f02\u5e38\u7684\u673a\u5668\u8bed\u8a00\u6307\u4ee4\uff0c\u8bf8\u5982\u88ab 0 \u9664\uff0c\u6216\u8005\u5f15\u7528\u4e86\u65e0\u6cd5\u8bbf\u95ee\u7684\u5185\u5b58\u533a\u57df\u3002</li> <li>\u7cfb\u7edf\u72b6\u6001\u53d8\u5316\uff0c\u6bd4\u5982 alarm \u5b9a\u65f6\u5668\u5230\u671f\u5c06\u5f15\u8d77 SIGALRM \u4fe1\u53f7\uff0c\u8fdb\u7a0b\u6267\u884c\u7684 CPU \u65f6\u95f4\u8d85\u9650\uff0c\u6216\u8005\u8be5\u8fdb\u7a0b\u7684\u67d0\u4e2a\u5b50\u8fdb\u7a0b\u9000\u51fa\u3002</li> <li>\u8fd0\u884c kill \u547d\u4ee4\u6216\u8c03\u7528 kill \u51fd\u6570\u3002</li> </ul>"},{"location":"Documents/A-Linux/%E4%BF%A1%E5%8F%B7/%E4%BF%A1%E5%8F%B7/#22","title":"2.2 \u4fe1\u53f7\u7684\u7279\u70b9","text":"<ul> <li>\u4f7f\u7528\u7b80\u5355</li> <li>\u4e0d\u80fd\u591f\u4f20\u9012\u5927\u91cf\u4fe1\u606f</li> <li>\u6ee1\u8db3\u67d0\u4e2a\u7279\u5b9a\u6761\u4ef6\u65f6\u624d\u53d1\u9001</li> <li>\u4f18\u5148\u7ea7\u6bd4\u8f83\u9ad8</li> </ul>"},{"location":"Documents/A-Linux/%E4%BF%A1%E5%8F%B7/%E4%BF%A1%E5%8F%B7/#23","title":"2.3 \u4f7f\u7528\u4fe1\u53f7\u7684\u4e3b\u8981\u76ee\u7684","text":"<ul> <li>\u8ba9\u8fdb\u7a0b\u77e5\u9053\u5df2\u7ecf\u53d1\u751f\u4e86\u4e00\u4e2a\u7279\u5b9a\u7684\u4e8b\u60c5</li> <li>\u5f3a\u8feb\u8fdb\u7a0b\u6267\u884c\u5b83\u81ea\u5df1\u4ee3\u7801\u4e2d\u7684\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u3002</li> </ul> <p>\u67e5\u770b\u7cfb\u7edf\u5b9a\u4e49\u7684\u4fe1\u53f7\u5217\u8868\u547d\u4ee4\uff1a<code>kill -l</code></p> <p>\u5176\u4e2d\u524d31\u4e2a\u4e3a\u5e38\u89c4\u4fe1\u53f7\uff0c\u5176\u4f59\u4e3a\u5b9e\u65f6\u4fe1\u53f7\u3002</p> \u7f16\u53f7 \u4fe1\u53f7\u540d\u79f0 \u5bf9\u5e94\u4e8b\u4ef6 \u9ed8\u8ba4\u52a8\u4f5c 2 SIGINT ctrl+c\u7ec4\u5408\u952e\uff0c\u7528\u6237\u7ec8\u7aef\u5411\u6b63\u5728\u8fd0\u884c\u4e2d\u7684\u7531\u7ec8\u7aef\u542f\u52a8\u7684\u7a0b\u5e8f\u53d1\u9001\u4fe1\u53f7 \u7ec8\u6b62\u8fdb\u7a0b 9 SIGKILL \u65e0\u6761\u4ef6\u7684\u7ec8\u6b62\u8fdb\u7a0b\uff0c\u8be5\u4fe1\u53f7\u4e0d\u80fd\u591f\u88ab\u5ffd\u7565\u3001\u5904\u7406\u548c\u963b\u585e \u7ec8\u6b62\u8fdb\u7a0b\uff0c\u53ef\u4ee5\u6740\u6b7b\u4efb\u4f55\u8fdb\u7a0b 11 SIGSEGV \u6307\u793a\u8fdb\u7a0b\u8fdb\u884c\u4e86\u65e0\u6548\u7684\u5185\u5b58\u8bbf\u95ee\uff08\u6bb5\u9519\u8bef\uff09 \u7ec8\u6b62\u8fdb\u7a0b\u5e76\u4ea7\u751fcore\u6587\u4ef6 13 SIGPIPE Borken pipe\u5411\u4e00\u4e2a\u6ca1\u6709\u8bfb\u7aef\u7684\u7ba1\u9053\u5199\u6570\u636e \u7ec8\u6b62\u8fdb\u7a0b 14 SIGALRM \u5b9a\u65f6\u5668\u8d85\u65f6\uff0c\u8d85\u65f6\u7684\u65f6\u95f4\u7531\u7cfb\u7edf\u8c03\u7528alarm\u6765\u8bbe\u7f6e \u7ec8\u6b62\u8fdb\u7a0b 17 SIGCHLD \u5b50\u8fdb\u7a0b\u7ed3\u675f\u65f6\uff0c\u7236\u8fdb\u7a0b\u4f1a\u6536\u5230\u8fd9\u4e2a\u4fe1\u53f7 \u5ffd\u7565\u8fd9\u4e2a\u4fe1\u53f7 18 SIGCONT \u5982\u679c\u8fdb\u7a0b\u5df2\u7ecf\u505c\u6b62\uff0c\u5219\u4f7f\u5176\u7ee7\u7eed\u8fd0\u884c \u7ee7\u7eed/\u5ffd\u7565 19 SIGSTOP \u505c\u6b62\u8fdb\u7a0b\u7684\u6267\u884c\uff0c\u4fe1\u53f7\u4e0d\u80fd\u88ab\u5ffd\u7565\u3001\u5904\u7406\u548c\u963b\u585e \u4e3a\u7ec8\u6b62\u8fdb\u7a0b <ul> <li>\u4fe1\u53f7\u76845\u79cd\u9ed8\u8ba4\u5904\u7406\u52a8\u4f5c</li> <li>TERM \u7ec8\u6b62\u8fdb\u7a0b</li> <li>IGN \u5f53\u524d\u8fdb\u7a0b\u5ffd\u7565\u6389\u8fd9\u4e2a\u4fe1\u53f7</li> <li>CORE \u7ec8\u6b62\u8fdb\u7a0b\uff0c\u5e76\u751f\u6210\u4e00\u4e2aCore\u6587\u4ef6</li> <li>STOP \u6682\u505c\u5f53\u524d\u8fdb\u7a0b</li> <li>CONT \u7ee7\u7eed\u6267\u884c\u5f53\u524d\u88ab\u6682\u505c\u7684\u8fdb\u7a0b</li> <li>\u4fe1\u53f7\u7684\u51e0\u79cd\u72b6\u6001\uff1a\u4ea7\u751f\u3001\u672a\u51b3\u3001\u9012\u8fbe\u3002</li> </ul>"},{"location":"Documents/A-Linux/%E4%BF%A1%E5%8F%B7/%E4%BF%A1%E5%8F%B7/#3-kill","title":"3 kill \u76f8\u5173\u51fd\u6570","text":"<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;signal.h&gt;\n\nint kill(pid_t pid, int sig);\n/*\n    - \u529f\u80fd\uff1a\u7ed9\u4efb\u4f55\u7684\u8fdb\u7a0b\u6216\u8005\u8fdb\u7a0b\u7ec4pid, \u53d1\u9001\u4efb\u4f55\u7684\u4fe1\u53f7 sig\n    - \u53c2\u6570\uff1a\n        - pid \uff1a\n            &gt; 0 : \u5c06\u4fe1\u53f7\u53d1\u9001\u7ed9\u6307\u5b9a\u7684\u8fdb\u7a0b\n            = 0 : \u5c06\u4fe1\u53f7\u53d1\u9001\u7ed9\u5f53\u524d\u7684\u8fdb\u7a0b\u7ec4\n            = -1 : \u5c06\u4fe1\u53f7\u53d1\u9001\u7ed9\u6bcf\u4e00\u4e2a\u6709\u6743\u9650\u63a5\u6536\u8fd9\u4e2a\u4fe1\u53f7\u7684\u8fdb\u7a0b\n            &lt; -1 : \u8fd9\u4e2apid=\u67d0\u4e2a\u8fdb\u7a0b\u7ec4\u7684ID\u53d6\u53cd \uff08-12345\uff09\n        - sig : \u9700\u8981\u53d1\u9001\u7684\u4fe1\u53f7\u7684\u7f16\u53f7\u6216\u8005\u662f\u5b8f\u503c\uff0c0\u8868\u793a\u4e0d\u53d1\u9001\u4efb\u4f55\u4fe1\u53f7\n\n    \u4f8b\u5982\uff1akill(getppid(), 9); \u6740\u6b7b\u7236\u8fdb\u7a0b\n    kill(getpid(),9); \u53ef\u4ee5\u81ea\u6740\n*/\nint raise(int sig);\n/*\n    - \u529f\u80fd\uff1a\u7ed9\u5f53\u524d\u8fdb\u7a0b\u53d1\u9001\u4fe1\u53f7\n    - \u53c2\u6570\uff1a\n        - sig : \u8981\u53d1\u9001\u7684\u4fe1\u53f7\n    - \u8fd4\u56de\u503c\uff1a\n        - \u6210\u529f 0\n        - \u5931\u8d25 \u975e0\n    \u7b49\u4ef7\u4e8ekill(getpid(), sig);   \n*/\n\nvoid abort(void);\n/*\n    - \u529f\u80fd\uff1a \u53d1\u9001SIGABRT\u4fe1\u53f7\u7ed9\u5f53\u524d\u7684\u8fdb\u7a0b\uff0c\u6740\u6b7b\u5f53\u524d\u8fdb\u7a0b\n    \u7b49\u4ef7\u4e8ekill(getpid(), SIGABRT);\n*/\n</code></pre> <p>\u5c1d\u8bd5\u6740\u6b7b\u81ea\u5df1\u3002 while(1){ \u2026 ; kill(getpid(),9); }\u770b\u770b\u6548\u679c</p>"},{"location":"Documents/A-Linux/%E4%BF%A1%E5%8F%B7/%E4%BF%A1%E5%8F%B7/#31-alarm","title":"3.1 alarm","text":"<pre><code>#include &lt;unistd.h&gt;\nunsigned int alarm(unsigned int seconds);\n/*\n#include &lt;unistd.h&gt;\nunsigned int alarm(unsigned int seconds);\n    - \u529f\u80fd\uff1a\u8bbe\u7f6e\u5b9a\u65f6\u5668\uff08\u95f9\u949f\uff09\u3002\u51fd\u6570\u8c03\u7528\uff0c\u5f00\u59cb\u5012\u8ba1\u65f6\uff0c\u5f53\u5012\u8ba1\u65f6\u4e3a0\u7684\u65f6\u5019\uff0c\n            \u51fd\u6570\u4f1a\u7ed9\u5f53\u524d\u7684\u8fdb\u7a0b\u53d1\u9001\u4e00\u4e2a\u4fe1\u53f7\uff1aSIGALARM\n    - \u53c2\u6570\uff1a\n        seconds: \u5012\u8ba1\u65f6\u7684\u65f6\u957f\uff0c\u5355\u4f4d\uff1a\u79d2\u3002\u5982\u679c\u53c2\u6570\u4e3a0\uff0c\u5b9a\u65f6\u5668\u65e0\u6548\uff08\u4e0d\u8fdb\u884c\u5012\u8ba1\u65f6\uff0c\u4e0d\u53d1\u4fe1\u53f7\uff09\u3002\n                \u53d6\u6d88\u4e00\u4e2a\u5b9a\u65f6\u5668\uff0c\u901a\u8fc7alarm(0)\u3002\n    - \u8fd4\u56de\u503c\uff1a\n        - \u4e4b\u524d\u6ca1\u6709\u5b9a\u65f6\u5668\uff0c\u8fd4\u56de0\n        - \u4e4b\u524d\u6709\u5b9a\u65f6\u5668\uff0c\u8fd4\u56de\u4e4b\u524d\u7684\u5b9a\u65f6\u5668\u5269\u4f59\u7684\u65f6\u95f4\n\n- SIGALARM \uff1a\u9ed8\u8ba4\u7ec8\u6b62\u5f53\u524d\u7684\u8fdb\u7a0b\uff0c\u6bcf\u4e00\u4e2a\u8fdb\u7a0b\u90fd\u6709\u4e14\u53ea\u6709\u552f\u4e00\u7684\u4e00\u4e2a\u5b9a\u65f6\u5668\u3002\n    alarm(10);  -&gt; \u8fd4\u56de0\n    \u8fc7\u4e861\u79d2\n    alarm(5);   -&gt; \u8fd4\u56de9 \n*/\n</code></pre> <p>\u5b9e\u4f8b</p> <pre><code>int main(){\n\nint second = alarm(5);\nprintf(\"second = %d \\n\",second);\n\nsleep(2);\n\nsecond = alarm(2);\nprintf(\"second = %d \\n\",second);\n\nwhile(1){\n}\n\nreturn 0;\n}\n</code></pre> <p>\u8fd0\u884c\u7ed3\u679c\uff1a</p> <pre><code>second = 0 \nsecond = 3 \nAlarm clock\n</code></pre> <ul> <li>\u4ece\u4e0a\u8ff0\u7ed3\u679c\u4e2d\u53ef\u4ee5\u53d1\u73b0\uff0c\u5b9e\u9645\u4e0a\u5728\u8fdb\u7a0bsleep\u7684\u8fc7\u7a0b\u4e2d\uff0calarm\u4ecd\u7136\u5728\u6267\u884c\u3002</li> </ul> <p>\u6211\u4eec\u7a0b\u5e8f\u5b9e\u9645\u7684\u65f6\u95f4\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a</p> <ol> <li>\u5185\u6838\u65f6\u95f4\uff0c\u7cfb\u7edf\u8c03\u7528\u5c31\u9700\u8981\u5728\u5185\u6838\u4e2d\u5b8c\u6210</li> <li>\u7528\u6237\u65f6\u95f4\uff0c\u7a0b\u5e8f\u4ee3\u7801\u6267\u884c\u7684\u65f6\u95f4</li> <li>\u5176\u4ed6\u6d88\u8017\u7684\u65f6\u95f4\uff0c\u6bd4\u5982IO</li> </ol> <p>\u91cd\u70b9\uff1a</p> <ul> <li>\u5b9a\u65f6\u5668\u4e0e\u8fdb\u7a0b\u7684\u72b6\u6001\u65e0\u5173\u3002</li> <li>\u4e00\u4e2a\u8fdb\u7a0b\u53ea\u6709\u4e00\u4e2a\u5b9a\u65f6\u5668\uff01</li> </ul>"},{"location":"Documents/A-Linux/%E4%BF%A1%E5%8F%B7/%E4%BF%A1%E5%8F%B7/#32-setitimer","title":"3.2 setitimer","text":"<pre><code>#include &lt;sys/time.h&gt;\nint setitimer(int which, const struct itimerval *new_value,\n                    struct itimerval *old_value);\n/*\n    - \u529f\u80fd\uff1a\u8bbe\u7f6e\u5b9a\u65f6\u5668\uff08\u95f9\u949f\uff09\u3002\u53ef\u4ee5\u66ff\u4ee3alarm\u51fd\u6570\u3002\u7cbe\u5ea6\u5fae\u79d2us\uff0c\u53ef\u4ee5\u5b9e\u73b0\u5468\u671f\u6027\u5b9a\u65f6\n    - \u53c2\u6570\uff1a\n        - which : \u5b9a\u65f6\u5668\u4ee5\u4ec0\u4e48\u65f6\u95f4\u8ba1\u65f6\n            ITIMER_REAL: \u771f\u5b9e\u65f6\u95f4\uff0c\u65f6\u95f4\u5230\u8fbe\uff0c\u53d1\u9001 SIGALRM   \u5e38\u7528\n            ITIMER_VIRTUAL: \u7528\u6237\u65f6\u95f4\uff0c\u65f6\u95f4\u5230\u8fbe\uff0c\u53d1\u9001 SIGVTALRM\n            ITIMER_PROF: \u4ee5\u8be5\u8fdb\u7a0b\u5728\u7528\u6237\u6001\u548c\u5185\u6838\u6001\u4e0b\u6240\u6d88\u8017\u7684\u65f6\u95f4\u6765\u8ba1\u7b97\uff0c\u65f6\u95f4\u5230\u8fbe\uff0c\u53d1\u9001 SIGPROF\n\n        - new_value: \u8bbe\u7f6e\u5b9a\u65f6\u5668\u7684\u5c5e\u6027\n\n            struct itimerval {      // \u5b9a\u65f6\u5668\u7684\u7ed3\u6784\u4f53\n            struct timeval it_interval;  // \u6bcf\u4e2a\u9636\u6bb5\u7684\u65f6\u95f4\uff0c\u95f4\u9694\u65f6\u95f4\n            struct timeval it_value;     // \u5ef6\u8fdf\u591a\u957f\u65f6\u95f4\u6267\u884c\u5b9a\u65f6\u5668\n            };\n\n            struct timeval {        // \u65f6\u95f4\u7684\u7ed3\u6784\u4f53\n                time_t      tv_sec;     //  \u79d2\u6570     \n                suseconds_t tv_usec;    //  \u5fae\u79d2    \n            };\n\n        //\u4f8b\u5982\u8fc710\u79d2\u540e\uff0c\u6bcf\u4e2a2\u79d2\u5b9a\u65f6\u4e00\u6b21\n\n        - old_value \uff1a\u8bb0\u5f55\u4e0a\u4e00\u6b21\u7684\u5b9a\u65f6\u7684\u65f6\u95f4\u53c2\u6570\uff0c\u4e00\u822c\u4e0d\u4f7f\u7528\uff0c\u6307\u5b9aNULL\n\n    - \u8fd4\u56de\u503c\uff1a\n        \u6210\u529f 0\n        \u5931\u8d25 -1 \u5e76\u8bbe\u7f6e\u9519\u8bef\u53f7\n*/\n</code></pre> <p>\u5b9e\u4f8b\uff1a</p> <pre><code>#include &lt;unistd.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;stdlib.h&gt;\n\n//\u5148\u8fd0\u884c5\u79d2\uff0c\u4e4b\u540e\u6bcf\u96942\u79d2\u53d1\u9001\u4e00\u4e2a\u95f9\u949f\nstatic int times = 0;\nvoid mysignal(int num){\nprintf(\"times : %d  -- recv sifnal : %d\\n\",times++,num);\n}\n\nint main(){\n\nsignal(SIGALRM,mysignal);//\u6ce8\u518c\u4fe1\u53f7\u6355\u6349\u51fd\u6570\n\nstruct itimerval neval;\nneval.it_interval.tv_sec = 2;//\u6bcf\u9694\u4e24\u79d2\u5b9a\u65f6\u4e00\u6b21\nneval.it_interval.tv_usec = 0;//0us\n\nneval.it_value.tv_sec = 5;//\u5ef6\u8fdf5\u79d2\u5f00\u59cb\u6267\u884c\nneval.it_value.tv_usec = 0;\n\nint ret = setitimer(ITIMER_REAL,&amp;neval,NULL);\nprintf(\"\u5b9a\u65f6\u5668\u5f00\u59cb\u4e86\\n\");\n\nif(ret == -1){\nperror(\"settimer\");\nexit(0);\n}\n\ngetchar();//\u963b\u585e\n\nreturn 0;\n}\n</code></pre>"},{"location":"Documents/A-Linux/%E4%BF%A1%E5%8F%B7/%E4%BF%A1%E5%8F%B7/#4-signal","title":"4 \u4fe1\u53f7\u6355\u6349-signal","text":"<ul> <li><code>SIGKILL</code>\uff0c <code>SIGSTOP</code>\u4e0d\u80fd\u88ab\u6355\u6349\uff0c\u4e0d\u80fd\u88ab\u5ffd\u7565\u3002</li> <li>\u9488\u5bf9\u63a5\u6536\u5230\u7684\u67d0\u4e2a\u4fe1\u53f7\uff0c\u5b9a\u4e49\u4e00\u4e9b\u7279\u6b8a\u7684\u884c\u4e3a\u3002</li> </ul> <pre><code>#include &lt;signal.h&gt;\ntypedef void (*sighandler_t)(int);//\u56de\u8c03\u51fd\u6570\u5f62\u5f0f void func(int x)\nsighandler_t signal(int signum, sighandler_t handler);\n\n/*\n    - \u529f\u80fd\uff1a\u8bbe\u7f6e\u67d0\u4e2a\u4fe1\u53f7\u7684\u6355\u6349\u884c\u4e3a\n    - \u53c2\u6570\uff1a\n        - signum: \u8981\u6355\u6349\u7684\u4fe1\u53f7\n        - handler: \u6355\u6349\u5230\u4fe1\u53f7\u8981\u5982\u4f55\u5904\u7406\n            - SIG_IGN \uff1a \u5ffd\u7565\u4fe1\u53f7\n            - SIG_DFL \uff1a \u4f7f\u7528\u4fe1\u53f7\u9ed8\u8ba4\u7684\u884c\u4e3a\n            - \u56de\u8c03\u51fd\u6570 :  \u8fd9\u4e2a\u51fd\u6570\u662f\u5185\u6838\u8c03\u7528\uff0c\u7a0b\u5e8f\u5458\u53ea\u8d1f\u8d23\u5199\uff0c\u6355\u6349\u5230\u4fe1\u53f7\u540e\u5982\u4f55\u53bb\u5904\u7406\u4fe1\u53f7\u3002\n            \u56de\u8c03\u51fd\u6570\uff1a\n                - \u9700\u8981\u7a0b\u5e8f\u5458\u5b9e\u73b0\uff0c\u63d0\u524d\u51c6\u5907\u597d\u7684\uff0c\u51fd\u6570\u7684\u7c7b\u578b\u6839\u636e\u5b9e\u9645\u9700\u6c42\uff0c\u770b\u51fd\u6570\u6307\u9488\u7684\u5b9a\u4e49\n                - \u4e0d\u662f\u7a0b\u5e8f\u5458\u8c03\u7528\uff0c\u800c\u662f\u5f53\u4fe1\u53f7\u4ea7\u751f\uff0c\u7531\u5185\u6838\u8c03\u7528\n                - \u51fd\u6570\u6307\u9488\u662f\u5b9e\u73b0\u56de\u8c03\u7684\u624b\u6bb5\uff0c\u51fd\u6570\u5b9e\u73b0\u4e4b\u540e\uff0c\u5c06\u51fd\u6570\u540d\u653e\u5230\u51fd\u6570\u6307\u9488\u7684\u4f4d\u7f6e\u5c31\u53ef\u4ee5\u4e86\u3002\n\n    - \u8fd4\u56de\u503c\uff1a\n        \u6210\u529f\uff0c\u8fd4\u56de\u4e0a\u4e00\u6b21\u6ce8\u518c\u7684\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u7684\u5730\u5740\u3002\u7b2c\u4e00\u6b21\u8c03\u7528\u8fd4\u56deNULL\n        \u5931\u8d25\uff0c\u8fd4\u56deSIG_ERR\uff0c\u8bbe\u7f6e\u9519\u8bef\u53f7\n*/\n</code></pre> <p>\u53e6\u5916\u4e00\u4e2a\u5904\u7406\u51fd\u6570</p> <pre><code>int sigaction(int signum, const struct sigaction *act, struct sigaction *oldact);\n</code></pre>"},{"location":"Documents/A-Linux/%E4%BF%A1%E5%8F%B7/%E4%BF%A1%E5%8F%B7/#5","title":"5 \u4fe1\u53f7\u96c6","text":"<p>\u8bb8\u591a\u4fe1\u53f7\u76f8\u5173\u7684\u7cfb\u7edf\u8c03\u7528\u90fd\u9700\u8981\u80fd\u8868\u793a\u4e00\u7ec4\u4e0d\u540c\u7684\u4fe1\u53f7\uff0c\u591a\u4e2a\u4fe1\u53f7\u53ef\u4f7f\u7528\u4e00\u4e2a\u79f0\u4e4b\u4e3a\u4fe1\u53f7\u96c6\u7684\u6570\u636e\u7ed3\u6784\u6765\u8868\u793a\uff0c\u5176\u7cfb\u7edf\u6570\u636e\u7c7b\u578b\u4e3a sigset_t\u3002 \u5728 PCB \u4e2d\u6709\u4e24\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u4fe1\u53f7\u96c6\u3002\u4e00\u4e2a\u79f0\u4e4b\u4e3a \u201c\u963b\u585e\u4fe1\u53f7\u96c6\u201d \uff0c\u53e6\u4e00\u4e2a\u79f0\u4e4b\u4e3a\u201c\u672a\u51b3\u4fe1\u53f7\u96c6\u201d \u3002\u8fd9\u4e24\u4e2a\u4fe1\u53f7\u96c6\u90fd\u662f\u5185\u6838\u4f7f\u7528\u4f4d\u56fe\u673a\u5236\u6765\u5b9e\u73b0\u7684\u3002\u4f46\u64cd\u4f5c\u7cfb\u7edf\u4e0d\u5141\u8bb8\u6211\u4eec\u76f4\u63a5\u5bf9\u8fd9\u4e24\u4e2a\u4fe1\u53f7\u96c6\u8fdb\u884c\u4f4d\u64cd\u4f5c\u3002\u800c\u9700\u81ea\u5b9a\u4e49\u53e6\u5916\u4e00\u4e2a\u96c6\u5408\uff0c\u501f\u52a9\u4fe1\u53f7\u96c6\u64cd\u4f5c\u51fd\u6570\u6765\u5bf9 PCB \u4e2d\u7684\u8fd9\u4e24\u4e2a\u4fe1\u53f7\u96c6\u8fdb\u884c\u4fee\u6539\u3002</p> <p>\u4fe1\u53f7\u7684 \u201c\u672a\u51b3\u201d \u662f\u4e00\u79cd\u72b6\u6001\uff0c\u6307\u7684\u662f\u4ece\u4fe1\u53f7\u7684\u4ea7\u751f\u5230\u4fe1\u53f7\u88ab\u5904\u7406\u524d\u7684\u8fd9\u4e00\u6bb5\u65f6\u95f4\u3002</p> <p>\u4fe1\u53f7\u7684 \u201c\u963b\u585e\u201d \u662f\u4e00\u4e2a\u5f00\u5173\u52a8\u4f5c\uff0c\u6307\u7684\u662f\u963b\u6b62\u4fe1\u53f7\u88ab\u5904\u7406\uff0c\u4f46\u4e0d\u662f\u963b\u6b62\u4fe1\u53f7\u4ea7\u751f\u3002</p> <p>\u4fe1\u53f7\u7684\u963b\u585e\u5c31\u662f\u8ba9\u7cfb\u7edf\u6682\u65f6\u4fdd\u7559\u4fe1\u53f7\u7559\u5f85\u4ee5\u540e\u53d1\u9001\u3002\u7531\u4e8e\u53e6\u5916\u6709\u529e\u6cd5\u8ba9\u7cfb\u7edf\u5ffd\u7565\u4fe1\u53f7\uff0c\u6240\u4ee5\u4e00\u822c\u60c5\u51b5\u4e0b\u4fe1\u53f7\u7684\u963b\u585e\u53ea\u662f\u6682\u65f6\u7684\uff0c\u53ea\u662f\u4e3a\u4e86\u9632\u6b62\u4fe1\u53f7\u6253\u65ad\u654f\u611f\u7684\u64cd\u4f5c\u3002</p>"},{"location":"Documents/A-Linux/%E4%BF%A1%E5%8F%B7/%E4%BF%A1%E5%8F%B7/#51","title":"5.1 \u963b\u585e\u4fe1\u53f7\u96c6\u548c\u672a\u51b3\u4fe1\u53f7\u96c6","text":"<pre><code>1.\u7528\u6237\u901a\u8fc7\u952e\u76d8  Ctrl + C, \u4ea7\u751f2\u53f7\u4fe1\u53f7SIGINT (\u4fe1\u53f7\u88ab\u521b\u5efa)\n\n2.\u4fe1\u53f7\u4ea7\u751f\u4f46\u662f\u6ca1\u6709\u88ab\u5904\u7406 \uff08\u672a\u51b3\uff09\n    - \u5728\u5185\u6838\u4e2d\u5c06\u6240\u6709\u7684\u6ca1\u6709\u88ab\u5904\u7406\u7684\u4fe1\u53f7\u5b58\u50a8\u5728\u4e00\u4e2a\u96c6\u5408\u4e2d \uff08\u672a\u51b3\u4fe1\u53f7\u96c6\uff09\n    - SIGINT\u4fe1\u53f7\u72b6\u6001\u88ab\u5b58\u50a8\u5728\u7b2c\u4e8c\u4e2a\u6807\u5fd7\u4f4d\u4e0a\n        - \u8fd9\u4e2a\u6807\u5fd7\u4f4d\u7684\u503c\u4e3a0\uff0c \u8bf4\u660e\u4fe1\u53f7\u4e0d\u662f\u672a\u51b3\u72b6\u6001\n        - \u8fd9\u4e2a\u6807\u5fd7\u4f4d\u7684\u503c\u4e3a1\uff0c \u8bf4\u660e\u4fe1\u53f7\u5904\u4e8e\u672a\u51b3\u72b6\u6001\n\n3.\u8fd9\u4e2a\u672a\u51b3\u72b6\u6001\u7684\u4fe1\u53f7\uff0c\u9700\u8981\u88ab\u5904\u7406\uff0c\u5904\u7406\u4e4b\u524d\u9700\u8981\u548c\u53e6\u4e00\u4e2a\u4fe1\u53f7\u96c6\uff08\u963b\u585e\u4fe1\u53f7\u96c6\uff09\uff0c\u8fdb\u884c\u6bd4\u8f83\n    - \u8fd9\u4e2a\u6807\u5fd7\u4f4d\u7684\u503c\u4e3a1\uff0c \u8bf4\u660e\u4fe1\u53f7\u5904\u4e8e\u8981\u88ab\u963b\u585e\n    - \u963b\u585e\u4fe1\u53f7\u96c6\u9ed8\u8ba4\u4e0d\u963b\u585e\u4efb\u4f55\u7684\u4fe1\u53f7\n    - \u5982\u679c\u60f3\u8981\u963b\u585e\u67d0\u4e9b\u4fe1\u53f7\u9700\u8981\u7528\u6237\u8c03\u7528\u7cfb\u7edf\u7684API\n\n4.\u5728\u5904\u7406\u7684\u65f6\u5019\u548c\u963b\u585e\u4fe1\u53f7\u96c6\u4e2d\u7684\u6807\u5fd7\u4f4d\u8fdb\u884c\u67e5\u8be2\uff0c\u770b\u662f\u4e0d\u662f\u5bf9\u8be5\u4fe1\u53f7\u8bbe\u7f6e\u963b\u585e\u4e86\n    - \u5982\u679c\u6ca1\u6709\u963b\u585e\uff0c\u8fd9\u4e2a\u4fe1\u53f7\u5c31\u88ab\u5904\u7406\n    - \u5982\u679c\u963b\u585e\u4e86\uff0c\u8fd9\u4e2a\u4fe1\u53f7\u5c31\u7ee7\u7eed\u5904\u4e8e\u672a\u51b3\u72b6\u6001\uff0c\u76f4\u5230\u963b\u585e\u89e3\u9664\uff0c\u8fd9\u4e2a\u4fe1\u53f7\u5c31\u88ab\u5904\u7406\n</code></pre>"},{"location":"Documents/A-Linux/%E4%BF%A1%E5%8F%B7/%E4%BF%A1%E5%8F%B7/#52-","title":"5.2 \u81ea\u5b9a\u4e49\u4fe1\u53f7\u673a - \u51fd\u6570","text":"<pre><code>\u4ee5\u4e0b\u4fe1\u53f7\u96c6\u76f8\u5173\u7684\u51fd\u6570\u90fd\u662f\u5bf9\u81ea\u5b9a\u4e49\u7684\u4fe1\u53f7\u96c6\u8fdb\u884c\u64cd\u4f5c\u3002\n\nint sigemptyset(sigset_t *set);\n/*\n    - \u529f\u80fd\uff1a\u6e05\u7a7a\u4fe1\u53f7\u96c6\u4e2d\u7684\u6570\u636e,\u5c06\u4fe1\u53f7\u96c6\u4e2d\u7684\u6240\u6709\u7684\u6807\u5fd7\u4f4d\u7f6e\u4e3a0\n    - \u53c2\u6570\uff1aset,\u4f20\u51fa\u53c2\u6570\uff0c\u9700\u8981\u64cd\u4f5c\u7684\u4fe1\u53f7\u96c6\n    - \u8fd4\u56de\u503c\uff1a\u6210\u529f\u8fd4\u56de0\uff0c \u5931\u8d25\u8fd4\u56de-1\n*/\nint sigfillset(sigset_t *set);\n/*\n    - \u529f\u80fd\uff1a\u5c06\u4fe1\u53f7\u96c6\u4e2d\u7684\u6240\u6709\u7684\u6807\u5fd7\u4f4d\u7f6e\u4e3a1\n    - \u53c2\u6570\uff1aset,\u4f20\u51fa\u53c2\u6570\uff0c\u9700\u8981\u64cd\u4f5c\u7684\u4fe1\u53f7\u96c6\n    - \u8fd4\u56de\u503c\uff1a\u6210\u529f\u8fd4\u56de0\uff0c \u5931\u8d25\u8fd4\u56de-1\n*/\nint sigaddset(sigset_t *set, int signum);\n/*\n    - \u529f\u80fd\uff1a\u8bbe\u7f6e\u4fe1\u53f7\u96c6\u4e2d\u7684\u67d0\u4e00\u4e2a\u4fe1\u53f7\u5bf9\u5e94\u7684\u6807\u5fd7\u4f4d\u4e3a1\uff0c\u8868\u793a\u963b\u585e\u8fd9\u4e2a\u4fe1\u53f7\n    - \u53c2\u6570\uff1a\n        - set\uff1a\u4f20\u51fa\u53c2\u6570\uff0c\u9700\u8981\u64cd\u4f5c\u7684\u4fe1\u53f7\u96c6\n        - signum\uff1a\u9700\u8981\u8bbe\u7f6e\u963b\u585e\u7684\u90a3\u4e2a\u4fe1\u53f7\n    - \u8fd4\u56de\u503c\uff1a\u6210\u529f\u8fd4\u56de0\uff0c \u5931\u8d25\u8fd4\u56de-1\n*/\nint sigdelset(sigset_t *set, int signum);\n/*\n    - \u529f\u80fd\uff1a\u8bbe\u7f6e\u4fe1\u53f7\u96c6\u4e2d\u7684\u67d0\u4e00\u4e2a\u4fe1\u53f7\u5bf9\u5e94\u7684\u6807\u5fd7\u4f4d\u4e3a0\uff0c\u8868\u793a\u4e0d\u963b\u585e\u8fd9\u4e2a\u4fe1\u53f7\n    - \u53c2\u6570\uff1a\n        - set\uff1a\u4f20\u51fa\u53c2\u6570\uff0c\u9700\u8981\u64cd\u4f5c\u7684\u4fe1\u53f7\u96c6\n        - signum\uff1a\u9700\u8981\u8bbe\u7f6e\u4e0d\u963b\u585e\u7684\u90a3\u4e2a\u4fe1\u53f7\n    - \u8fd4\u56de\u503c\uff1a\u6210\u529f\u8fd4\u56de0\uff0c \u5931\u8d25\u8fd4\u56de-1\n*/\n\nint sigismember(const sigset_t *set, int signum);\n/*\n    - \u529f\u80fd\uff1a\u5224\u65ad\u67d0\u4e2a\u4fe1\u53f7\u662f\u5426\u963b\u585e\n    - \u53c2\u6570\uff1a\n        - set\uff1a\u9700\u8981\u64cd\u4f5c\u7684\u4fe1\u53f7\u96c6\n        - signum\uff1a\u9700\u8981\u5224\u65ad\u7684\u90a3\u4e2a\u4fe1\u53f7\n    - \u8fd4\u56de\u503c\uff1a\n        1 \uff1a signum\u88ab\u963b\u585e\n        0 \uff1a signum\u4e0d\u963b\u585e\n        -1 \uff1a \u5931\u8d25\n*/       \n</code></pre> <ul> <li>\u6ce8\u610f\uff1a\u4fee\u6539\u7684\u662f\u81ea\u5b9a\u4e49\u4fe1\u53f7\u96c6\uff01</li> </ul>"},{"location":"Documents/A-Linux/%E4%BF%A1%E5%8F%B7/%E4%BF%A1%E5%8F%B7/#53-pcb","title":"5.3 \u4fee\u6539 pcb \u7684\u963b\u585e\u96c6\u5408","text":"<pre><code>int sigprocmask(int how, const sigset_t *set, sigset_t *oldset);\n/*\n    - \u529f\u80fd\uff1a\u5c06\u81ea\u5b9a\u4e49\u4fe1\u53f7\u96c6\u4e2d\u7684\u6570\u636e\u8bbe\u7f6e\u5230\u5185\u6838\u4e2d\uff08\u8bbe\u7f6e\u963b\u585e\uff0c\u89e3\u9664\u963b\u585e\uff0c\u66ff\u6362\uff09\n    - \u53c2\u6570\uff1a\n        - how : \u5982\u4f55\u5bf9\u5185\u6838\u963b\u585e\u4fe1\u53f7\u96c6\u8fdb\u884c\u5904\u7406\n            SIG_BLOCK: \u5c06\u7528\u6237\u8bbe\u7f6e\u7684\u963b\u585e\u4fe1\u53f7\u96c6\u6dfb\u52a0\u5230\u5185\u6838\u4e2d\uff0c\u5185\u6838\u4e2d\u539f\u6765\u7684\u6570\u636e\u4e0d\u53d8\n                \u5047\u8bbe\u5185\u6838\u4e2d\u9ed8\u8ba4\u7684\u963b\u585e\u4fe1\u53f7\u96c6\u662fmask\uff0c mask | set\n            SIG_UNBLOCK: \u6839\u636e\u7528\u6237\u8bbe\u7f6e\u7684\u6570\u636e\uff0c\u5bf9\u5185\u6838\u4e2d\u7684\u6570\u636e\u8fdb\u884c\u89e3\u9664\u963b\u585e\n                mask &amp;= ~set\n            SIG_SETMASK:\u8986\u76d6\u5185\u6838\u4e2d\u539f\u6765\u7684\u503c\n\n        - set \uff1a\u5df2\u7ecf\u521d\u59cb\u5316\u597d\u7684\u7528\u6237\u81ea\u5b9a\u4e49\u7684\u4fe1\u53f7\u96c6\n        - oldset : \u4fdd\u5b58\u8bbe\u7f6e\u4e4b\u524d\u7684\u5185\u6838\u4e2d\u7684\u963b\u585e\u4fe1\u53f7\u96c6\u7684\u72b6\u6001\uff0c\u53ef\u4ee5\u662f NULL\n    - \u8fd4\u56de\u503c\uff1a\n        \u6210\u529f\uff1a0\n        \u5931\u8d25\uff1a-1\n            \u8bbe\u7f6e\u9519\u8bef\u53f7\uff1aEFAULT\u3001EINVAL\n*/\nint sigpending(sigset_t *set);\n/*\n    - \u529f\u80fd\uff1a\u83b7\u53d6\u5185\u6838\u4e2d\u7684\u672a\u51b3\u4fe1\u53f7\u96c6\n    - \u53c2\u6570\uff1aset,\u4f20\u51fa\u53c2\u6570\uff0c\u4fdd\u5b58\u7684\u662f\u5185\u6838\u4e2d\u7684\u672a\u51b3\u4fe1\u53f7\u96c6\u4e2d\u7684\u4fe1\u606f\u3002\n*/\n</code></pre> <p>\u6848\u4f8b\uff1a\u963b\u585e2\u30013\u53f7\u4f4d\uff0c\u8f93\u51fa\u672a\u51b3\u4fe1\u53f7\u96c6\u5408</p> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;signal.h&gt;\n\nint main(){\n\n//\u8bbe\u7f6e2\u30013\u4fe1\u53f7\u963b\u585e\nsigset_t set;\nsigemptyset(&amp;set);\n\n//\u5c062\uff0c3\u4fe1\u53f7\u6dfb\u52a0\u5230\u4fe1\u53f7\u673a\nsigaddset(&amp;set,SIGINT);\nsigaddset(&amp;set,SIGQUIT);\n\n//\u4fee\u6539\u5185\u6838\u4e2d\u7684\u963b\u585e\u4fe1\u53f7\u96c6\u3001\nsigprocmask(SIG_BLOCK,&amp;set,NULL);\n\nwhile(1){\n//\u83b7\u53d6\u5f53\u524d\u7684\u672a\u51b3\u4fe1\u53f7\u96c6\nsigset_t pendingset;\nsigemptyset(&amp;pendingset);\nsigpending(&amp;pendingset);\n\n//\u904d\u5386\u8f93\u51fa\nfor(int i=1;i&lt;32;i++){\nif(sigismember(&amp;pendingset,i) == 1){\nprintf(\"1\");\n}else if(sigismember(&amp;pendingset,i) == 0){\nprintf(\"0\");\n}else{\nperror(\"sigismember\");\nexit(0);\n}\n}\nprintf(\"\\n\");\nsleep(1);\n}\n\nreturn 0;\n}\n</code></pre> <p>\u5728\u7a0b\u5e8f\u6267\u884c\u4e2d\uff0c<code>ctrl + c</code>\u4ee5\u53ca<code>ctrl + \\</code>\u5747\u88ab\u963b\u585e\uff0c\u7a0b\u5e8f\u5c06\u4f1a\u6253\u5370\u51fa\u672a\u51b3\u4fe1\u53f7\uff0c\u5176\u4e2d2\u30013\u53f7\u4f4d\u4e3a1.</p> <p>\u6848\u4f8b\uff1a\u5b9a\u65f6\u5668\u3001\u4fe1\u53f7\u5904\u7406\u3001\u4ee5\u53ca\u963b\u585e\u7684\u7efc\u5408</p> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;sys/time.h&gt;\n\nvoid mysignal(int num){\nprintf(\"\u89e3\u9664\u963b\u585e\\n\");\n//\u6536\u5230\u4fe1\u53f7\u4e4b\u540e\u89e3\u9664\u4e24\u4e2a\u963b\u585e\nsigset_t set;\nsigemptyset(&amp;set);\n\n//\u6dfb\u52a02\uff0c3\nsigaddset(&amp;set,SIGINT);\nsigaddset(&amp;set,SIGQUIT);\n\nsigprocmask(SIG_UNBLOCK,&amp;set,NULL);\n\n\n}\n\nint main(){\n\nsignal(SIGALRM,mysignal);//\u6ce8\u518c\u4fe1\u53f7\u6355\u6349\u51fd\u6570\n//\u8bbe\u7f6e\u8ba1\u65f6\u5668\nstruct itimerval timer;\ntimer.it_value.tv_sec = 10;//\u7b49\u5f85\u65f6\u95f4\u540e\u518d\u5f00\u59cb\ntimer.it_value.tv_usec = 0;\n\ntimer.it_interval.tv_sec = 5;//\u6bcf\u4e2a\u5b9a\u671f\u65f6\u95f4\ntimer.it_interval.tv_usec = 0;\n\nsetitimer(ITIMER_REAL,&amp;timer,NULL);\n\n//\u8bbe\u7f6e2\u30013\u4fe1\u53f7\u963b\u585e\nsigset_t set;\nsigemptyset(&amp;set);\n\n//\u5c062\uff0c3\u4fe1\u53f7\u6dfb\u52a0\u5230\u4fe1\u53f7\u673a\nsigaddset(&amp;set,SIGINT);\nsigaddset(&amp;set,SIGQUIT);\n\n//\u4fee\u6539\u5185\u6838\u4e2d\u7684\u963b\u585e\u4fe1\u53f7\u96c6\u3001\nsigprocmask(SIG_BLOCK,&amp;set,NULL);\n\nwhile(1){\n//\u83b7\u53d6\u5f53\u524d\u7684\u672a\u51b3\u4fe1\u53f7\u96c6\nsigset_t pendingset;\nsigemptyset(&amp;pendingset);\nsigpending(&amp;pendingset);\n\n//\u904d\u5386\u8f93\u51fa\nfor(int i=1;i&lt;32;i++){\nif(sigismember(&amp;pendingset,i) == 1){\nprintf(\"1\");\n}else if(sigismember(&amp;pendingset,i) == 0){\nprintf(\"0\");\n}else{\nperror(\"sigismember\");\nexit(0);\n}\n}\nprintf(\"\\n\");\nsleep(1);\n}\n\nreturn 0;\n}\n</code></pre> <p>\u5f53\u6309\u4e86<code>ctrl + c</code>\u4e4b\u540e\uff0c\u4f1a\u88ab\u963b\u585e\uff0c\u672a\u51b3\u72b6\u6001\u96c6\u6253\u5370\u51fa1\uff0c\u7136\u540e\u5b9a\u65f6\u5668\u5230\u65f6\u4e4b\u540e\uff0c\u53d1\u9001\u4fe1\u53f7\u88ab\u6355\u6349\uff0c\u6253\u5370\u8bdd\u8bed\u4e4b\u540e\uff0c\u89e3\u9664\u963b\u585e\uff0c\u5185\u6838\u68c0\u6d4b\u5230\u4fe1\u53f7\u65f6<code>SIGINT</code>\uff0c\u4e4b\u540e\u5c31\u7ed3\u675f\u7a0b\u5e8f\u3002</p>"},{"location":"Documents/A-Linux/%E4%BF%A1%E5%8F%B7/%E4%BF%A1%E5%8F%B7/#6-sigaction","title":"6 \u4fe1\u53f7\u6355\u6349\u2014\u2014sigaction ()","text":"<p><code>sigaction</code>\u6bd4<code>signal</code>\u66f4\u901a\u7528\uff01\u56e0\u4e3a<code>signal</code>\u662fANSI\u7684\u6807\u51c6\uff0c\u6709\u591a\u4e2a\u7248\u672c\uff0c\u53ef\u80fd\u884c\u4e3a\u4e0d\u540c\u3002</p> <pre><code>#include &lt;signal.h&gt;\nint sigaction(int signum, const struct sigaction *act,\n                        struct sigaction *oldact);\n/*\n    - \u529f\u80fd\uff1a\u68c0\u67e5\u6216\u8005\u6539\u53d8\u4fe1\u53f7\u7684\u5904\u7406\u3002\u4fe1\u53f7\u6355\u6349\n    - \u53c2\u6570\uff1a\n        - signum : \u9700\u8981\u6355\u6349\u7684\u4fe1\u53f7\u7684\u7f16\u53f7\u6216\u8005\u5b8f\u503c\uff08\u4fe1\u53f7\u7684\u540d\u79f0\uff09\n        - act \uff1a\u6355\u6349\u5230\u4fe1\u53f7\u4e4b\u540e\u7684\u5904\u7406\u52a8\u4f5c\n        - oldact : \u4e0a\u4e00\u6b21\u5bf9\u4fe1\u53f7\u6355\u6349\u76f8\u5173\u7684\u8bbe\u7f6e\uff0c\u4e00\u822c\u4e0d\u4f7f\u7528\uff0c\u4f20\u9012NULL\n    - \u8fd4\u56de\u503c\uff1a\n        \u6210\u529f 0\n        \u5931\u8d25 -1\n\n    struct sigaction {\n    void     (*sa_handler)(int);// \u51fd\u6570\u6307\u9488\uff0c\u6307\u5411\u7684\u51fd\u6570\u5c31\u662f\u4fe1\u53f7\u6355\u6349\u5230\u4e4b\u540e\u7684\u5904\u7406\u51fd\u6570\n    void     (*sa_sigaction)(int, siginfo_t *, void *);// \u4e0d\u5e38\u7528\n    sigset_t   sa_mask;// \u4e34\u65f6\u963b\u585e\u4fe1\u53f7\u96c6\uff0c\u5728\u4fe1\u53f7\u6355\u6349\u51fd\u6570\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u4e34\u65f6\u963b\u585e\u67d0\u4e9b\u4fe1\u53f7\u3002\n    int        sa_flags;\n    // \u4f7f\u7528\u54ea\u4e00\u4e2a\u4fe1\u53f7\u5904\u7406\u5bf9\u6355\u6349\u5230\u7684\u4fe1\u53f7\u8fdb\u884c\u5904\u7406\n    // \u8fd9\u4e2a\u503c\u53ef\u4ee5\u662f0\uff0c\u8868\u793a\u4f7f\u7528sa_handler,\u4e5f\u53ef\u4ee5\u662fSA_SIGINFO\u8868\u793a\u4f7f\u7528sa_sigaction\n    void     (*sa_restorer)(void);// \u88ab\u5e9f\u5f03\u6389\u4e86\n    };\n*/\n</code></pre> <p>\u5b9e\u4f8b\uff1a\u4fe1\u53f7\u6355\u6349\u4e0e\u5904\u7406</p> <pre><code>void myalarm(int num){\nprintf(\"\u6536\u5230\u4fe1\u53f7 \uff1a%d \\n\",num);\n}\n\nint main(){\n\nstruct sigaction act;\nact.sa_flags = 0;\nact.sa_handler = myalarm;\nsigemptyset(&amp;act.sa_mask);//\u4e34\u65f6\u963b\u585e\u4fe1\u53f7\u96c6\u7f6e\u7a7a\n\n//\u6ce8\u518c\u4fe1\u53f7\u6355\u6349\nsigaction(SIGALRM,&amp;act,NULL);\n\nstruct itimerval newtime;\nnewtime.it_interval.tv_sec = 2;\nnewtime.it_interval.tv_usec = 0;\n\nnewtime.it_value.tv_sec = 5;//\u5ef6\u8fdf\u65f6\u95f4\nnewtime.it_value.tv_usec=0;\n\nint ret = setitimer(ITIMER_REAL,&amp;newtime,NULL);\nprintf(\"\u5b9a\u65f6\u5668\u5f00\u59cb\\n\");\nif(ret == -1){\nperror(\"setitimer\");\nexit(0);\n}\n\nwhile(1);\nreturn 0;\n}\n</code></pre>"},{"location":"Documents/A-Linux/%E4%BF%A1%E5%8F%B7/%E4%BF%A1%E5%8F%B7/#61","title":"6.1 \u5185\u6838\u6355\u6349\u4fe1\u53f7\u7684\u5904\u7406\u6d41\u7a0b","text":""},{"location":"Documents/A-Linux/%E4%BF%A1%E5%8F%B7/%E4%BF%A1%E5%8F%B7/#62-sigchld","title":"6.2 SIGCHLD \u4fe1\u53f7","text":"<p>SIGCHLD\u4fe1\u53f7\u4ea7\u751f\u7684\u6761\u4ef6</p> <ul> <li>\u5b50\u8fdb\u7a0b\u7ec8\u6b62\u65f6</li> <li>\u5b50\u8fdb\u7a0b\u63a5\u6536\u5230 SIGSTOP \u4fe1\u53f7\u505c\u6b62\u65f6</li> <li>\u5b50\u8fdb\u7a0b\u5904\u5728\u505c\u6b62\u6001\uff0c\u63a5\u53d7\u5230SIGCONT\u540e\u5524\u9192\u65f6</li> </ul> <p>\u4ee5\u4e0a\u6761\u4ef6\u53d1\u751f\u65f6\uff0c\u5185\u6838\u90fd\u4f1a\u7ed9\u7236\u8fdb\u7a0b\u53d1\u9001\u4fe1\u53f7\uff0c\u800c\u7236\u8fdb\u7a0b\u9ed8\u8ba4\u65f6\u963b\u585e\u4fe1\u53f7\u7684\u3002</p>"},{"location":"Documents/A-Linux/%E4%BF%A1%E5%8F%B7/%E4%BF%A1%E5%8F%B7/#621-sigchld","title":"6.2.1 \u5b9e\u4f8b\uff1a\u901a\u8fc7 SIGCHLD \u56de\u6536\u5b50\u8fdb\u7a0b","text":"<p>\u5982\u679c\u4f7f\u7528<code>wait()</code>\u56de\u6536\u5b50\u8fdb\u7a0b\u7684\u8bdd\uff0c\u7236\u8fdb\u7a0b\u4f1a\u8fdb\u5165\u963b\u585e\uff0c\u8fd9\u6837\u6548\u7387\u5f88\u4f4e\uff0c\u6bd5\u7adf\u7236\u8fdb\u7a0b\u4e5f\u8981\u6709\u81ea\u5df1\u7684\u4e8b\u60c5\u53bb\u505a\u3002</p> <p>\u53ef\u4ee5\u4f7f\u7528\u4fe1\u53f7\u6355\u6349\uff0c\u6ce8\u518c\u4fe1\u53f7\u6355\u6349\u51fd\u6570\uff0c\u5728\u5185\u90e8\u6267\u884c<code>waitpid(NOHONG)</code>\u7684\u4ee3\u7801\u6765\u56de\u6536\u5b50\u8fdb\u7a0b\u3002</p>"},{"location":"Documents/A-Linux/%E4%BF%A1%E5%8F%B7/%E4%BF%A1%E5%8F%B7/#622","title":"6.2.2 \u666e\u901a\u60c5\u51b5\u2014\u2014\u4ea7\u751f\u50f5\u5c38\u8fdb\u7a0b","text":"<pre><code>int main(){\n\n//\u521b\u5efa\u5b50\u8fdb\u7a0b\npid_t pid;\nfor(int i=0;i&lt;20;i++){\npid = fork();\nif(pid == 0){\nbreak;\n}\n}\n\nif(pid &gt; 0){\n//\u7236\u8fdb\u7a0b\n\nwhile(1){\nprintf(\"parent process\\n\");\nsleep(1);\n}\n}else if(pid == 0){\n//\u5b50\u8fdb\u7a0b\nprintf(\"child process:%d\\n\",getpid());\n}\nreturn 0;\n}\n</code></pre>"},{"location":"Documents/A-Linux/%E4%BF%A1%E5%8F%B7/%E4%BF%A1%E5%8F%B7/#623-wait","title":"6.2.3 \u4f7f\u7528 wait","text":"<pre><code>void mysigchld(int num){\nprintf(\"\u6536\u5230\u4fe1\u53f7\uff1a%d\\n\",num);\nwait(NULL);//\u56de\u6536\u8fdb\u7a0b\n}\n\nint main(){\n\n//\u521b\u5efa\u5b50\u8fdb\u7a0b\npid_t pid;\nfor(int i=0;i&lt;20;i++){\npid = fork();\nif(pid == 0){\nbreak;\n}\n}\n\nif(pid &gt; 0){\n//\u7236\u8fdb\u7a0b\n\n//\u6355\u6349\u5b50\u8fdb\u7a0b\u7684\u6b7b\u4ea1\u4fe1\u53f7\uff0c\u7136\u540e\u56de\u6536,\nstruct sigaction act;\nact.sa_flags = 0;\nact.sa_handler = mysigchld;\nsigemptyset(&amp;act.sa_mask);\n\nsigaction(SIGCHLD,&amp;act,NULL);\n\nwhile(1){\nprintf(\"parent process\\n\");\nsleep(1);\n}\n}else if(pid == 0){\n//\u5b50\u8fdb\u7a0b\nprintf(\"child process:%d\\n\",getpid());\n}\nreturn 0;\n}\n</code></pre> <p>\u6267\u884c\u4e4b\u540e\uff0c\u4f7f\u7528<code>ps aux</code>\u67e5\u770b\u53ef\u4ee5\u53d1\u73b0\uff0c\u5176\u5b9e\u4ecd\u7136\u53ef\u80fd\u4f1a\u6709\u4e00\u90e8\u5206\u8fdb\u7a0b\u6ca1\u6709\u88ab\u56de\u6536\uff0c\u53d8\u6210\u4e86\u50f5\u5c38\u8fdb\u7a0b\u3002</p> <p>\u8fd9\u5176\u5b9e\u4e0e\u4fe1\u53f7\u96c6\u6709\u5173\uff0c\u5f53\u5b50\u8fdb\u7a0b\u6b7b\u4ea1\u4e4b\u540e\uff0c\u4f1a\u4ea7\u751fSIGCHLD\u4fe1\u53f7\uff0c\u6b64\u65f6\u53ef\u80fd\u4f1a\u6709\u591a\u4e2a\u8fdb\u7a0b\u6b7b\u4ea1\uff0c\u4f46\u662f\u4fe1\u53f7\u96c6\u53ea\u80fd\u8bf4\u660e\u6709\u4fe1\u53f7\u53d1\u9001\u5230\u4e86\uff0c\u672a\u51b3\u72b6\u6001\u3002\u6709\u7684\u4fe1\u53f7\u5c31\u4f1a\u88ab\u4e22\u5f03\uff0c\u4ece\u800c\u5bfc\u81f4\u6709\u90e8\u5206\u5b50\u8fdb\u7a0b\u6ca1\u6709\u88ab\u56de\u6536\u3002</p> <p>\u6539\u8fdb\u65b9\u5f0f1\uff1a</p> <pre><code>while(1){\nwait(NULL);\n}\n</code></pre> <p>\u4f46\u662f\u4e0d\u5efa\u8bae\u8fd9\u6837\u505a\uff0c\u6bd5\u7adf\u7236\u8fdb\u7a0b\u8fd8\u8981\u53bb\u505a\u5176\u4ed6\u4e8b\u60c5\uff0c\u8fd9\u6837\u4f1a\u505c\u6ede\u5728\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u4e2d\u3002</p> <p>\u6539\u8fdb\u65b9\u5f0f2\uff1a</p> <pre><code>while(1){\nint ret = waitpid(-1,NULL,WNOHANG);//WNOHANG\u975e\u963b\u585e\u65b9\u5f0f\nif(ret &gt; 0){\nprintf(\"child process die: %d\\n\",ret);\n}else if(ret == 0){//\u8bf4\u660e\u8fd8\u6709\u5b50\u8fdb\u7a0b\u6ca1\u6709\u56de\u6536\nbreak;\n}else if(ret == -1){\n//\u6ca1\u6709\u5b50\u8fdb\u7a0b\u9700\u8981\u56de\u6536\nprintf(\"all child die\\n\");\nbreak;\n}\n}\n</code></pre> <p>\u5bf9\u4e8e\u65b9\u5f0f2\uff0c\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u90fd\u53ef\u4ee5\u6b63\u5e38\u8fd0\u884c\uff0c\u4f46\u662f\u67d0\u4e9b\u60c5\u51b5\u4e4b\u4e0b\uff0c\u4ecd\u7136\u4f1a\u4ea7\u751f\u95ee\u9898\uff0c\u4f1a\u51fa\u73b0\u6bb5\u9519\u8bef\u3002</p> <p>\u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5\u7684\u539f\u56e0\u5728\u4e8e\uff0c\u5982\u679c\u5168\u90e8\u7684\u5b50\u8fdb\u7a0b\u90fd\u8fd0\u884c\u5b8c\u4e86\uff0c\u800c\u6b64\u65f6\u7684\u7236\u8fdb\u7a0b\u7684\u4fe1\u53f7\u6355\u6349\u51fd\u6570\u8fd8\u6ca1\u6709\u6ce8\u518c\u6210\u529f\uff0c\u90a3\u4e48\u5c31\u4f1a\u51fa\u73b0\u95ee\u9898\u3002</p> <p>\u7591\u95ee\uff1a\u4e3a\u4ec0\u4e48\u4f1a\u51fa\u73b0\u95ee\u9898\uff1f\u96be\u9053\u662f\u56e0\u4e3a\u5b50\u8fdb\u7a0b\u5168\u90e8\u6b7b\u6389\u540e\uff0cOS\u53d1\u73b0\u4e0d\u4f1a\u4ea7\u751fSIGCHLD\u4fe1\u53f7\u800c\u4ea7\u751f\u9519\u8bef\u7684\u5417\uff1f\u5426\u5219\u7684\u8bdd\uff0c\u53ea\u662f\u4e0d\u4f1a\u89e6\u53d1\u800c\u5df2\uff0c\u4e3a\u4ec0\u4e48\u4f1a\u662f\u6bb5\u9519\u8bef\uff1f</p>"},{"location":"Documents/A-Linux/%E4%BF%A1%E5%8F%B7/%E4%BF%A1%E5%8F%B7/#624","title":"6.2.4 \u603b\u4f53\u89e3\u51b3\u601d\u8def","text":"<p>\u5728\u6574\u4e2a\u7a0b\u5e8f\u8fd0\u884c\u4e4b\u524d\uff0c\u5148\u963b\u585eSIGCHLD\u4fe1\u53f7\uff0c\u7136\u540e\u7b49\u7236\u8fdb\u7a0b\u6ce8\u518c\u53f7\u4fe1\u53f7\u4e4b\u540e\uff0c\u518d\u6253\u5f00SIGCHLD\u4fe1\u53f7\uff0c\u4ece\u800c\u89e3\u51b3\u95ee\u9898\u3002</p> <p>\u5fc5\u987b\u662f\u6574\u4e2a\u7a0b\u5e8f\u8fd0\u884c\u524d\uff0c\u800c\u975e\u4ea7\u751f\u5b8c\u5b50\u8fdb\u7a0b\u4e4b\u540e\uff0c\u5426\u5219\u53ef\u80fd\u9762\u4e34\u540c\u6837\u7684\u95ee\u9898\u3002</p> <pre><code>void mysigchld(int num){\nprintf(\"\u6536\u5230\u4fe1\u53f7\uff1a%d\\n\",num);\nwhile(1){\nint ret = waitpid(-1,NULL,WNOHANG);//-1\u8868\u793a\u7b49\u5f85\u4efb\u610f\u7684\u5b50\u8fdb\u7a0b\uff0cWNOHANG\u975e\u963b\u585e\u65b9\u5f0f\nif(ret &gt; 0){\nprintf(\"child process die: %d\\n\",ret);\n}else if(ret == 0){//\u8bf4\u660e\u8fd8\u6709\u5b50\u8fdb\u7a0b\u6ca1\u6709\u56de\u6536\nbreak;\n}else if(ret == -1){\n//\u6ca1\u6709\u5b50\u8fdb\u7a0b\u9700\u8981\u56de\u6536\nprintf(\"all child die\\n\");\nbreak;\n}\n}\n}\n\nint main(){\n\nsigset_t set;\nsigemptyset(&amp;set);\nsigaddset(&amp;set,SIGCHLD);\nsigprocmask(SIG_BLOCK,&amp;set,NULL);//\u963b\u585eSIGCHLD\u4fe1\u53f7\n\n//\u521b\u5efa\u5b50\u8fdb\u7a0b\npid_t pid;\nfor(int i=0;i&lt;20;i++){\npid = fork();\nif(pid == 0){\nbreak;\n}\n}\n\nif(pid &gt; 0){\n//\u7236\u8fdb\u7a0b\n//\u6355\u6349\u5b50\u8fdb\u7a0b\u7684\u6b7b\u4ea1\u4fe1\u53f7\uff0c\u7136\u540e\u56de\u6536,\nstruct sigaction act;\nact.sa_flags = 0;\nact.sa_handler = mysigchld;\nsigemptyset(&amp;act.sa_mask);\n\nsigaction(SIGCHLD,&amp;act,NULL);\n\n//\u6ce8\u518c\u5b8c\u4fe1\u53f7\u5904\u7406\u540e\uff0c\u89e3\u9664\u963b\u585e\nsigprocmask(SIG_UNBLOCK,&amp;set,NULL);\n\nwhile(1){\nprintf(\"parent process\\n\");\nsleep(1);\n}\n}else if(pid == 0){\n//\u5b50\u8fdb\u7a0b\nprintf(\"child process:%d\\n\",getpid());\n}\nreturn 0;\n}\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/Linux%E8%BF%BD%E8%B8%AA%E6%8A%80%E6%9C%AF/","title":"\u8ffd\u8e2a\u6280\u672f\u7ec4\u6210","text":"<p>\u7cfb\u7edf\u8ddf\u8e2a\u53ef\u4ee5\u5206\u4e3a\uff1a\u6570\u636e\u6e90\u3001\u6536\u96c6\u6570\u636e\u673a\u5236\u548c\u8ddf\u8e2a\u524d\u7aef(\u6536\u96c6\u548c\u5206\u6790\u6570\u636e\u7684\u4ea4\u4e92)\u3002 1. \u6570\u636e\u6e90\uff1atracepoints\u3001USDT\u3001kprobe\u3001uprobe 2. \u6536\u96c6\u6570\u636e\u673a\u5236\uff1aftrace\u3001perf\u3001eBPF 3. \u8ddf\u8e2a\u524d\u7aef\uff1a     1. ftrace \u524d\u7aef trace-cmd     2. perf \u524d\u7aef perf-tools     3. ebpf bcc</p>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/Linux%E8%BF%BD%E8%B8%AA%E6%8A%80%E6%9C%AF/#1","title":"1 \u5982\u4f55\u9009\u62e9\u8ffd\u8e2a\u5668","text":"<ul> <li>Choosing a Linux Tracer</li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/Linux%E8%BF%BD%E8%B8%AA%E6%8A%80%E6%9C%AF/#2","title":"2 \u53c2\u8003\u8d44\u6599","text":"<ul> <li>\u4f7f\u7528C\u8bed\u8a00\u4ece\u5934\u5f00\u53d1\u4e00\u4e2aHello World\u7ea7\u522b\u7684eBPF\u7a0b\u5e8f</li> <li>Exploring USDT Probes on Linux</li> <li>Linux kernel perf architecture</li> <li>Linux tracing systems &amp; how they fit together</li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/USDT/","title":"USDT","text":"<ul> <li> <p>https://www.cxyzjd.com/article/Longyu_wlz/109902171</p> </li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/USDT/#1","title":"1 \u5b89\u88c5\u4f9d\u8d56\u5305","text":"<ul> <li>rocky9 \u4e0a\uff1a <code>dnf install systemtap-sdt-devel</code></li> <li>\u5176\u5b83 linux \u7248\u5305\u540d\u53ef\u80fd\u662f <code>systemtap-sdt-dev</code></li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/USDT/#2-usdt","title":"2 \u7a0b\u5e8f\u63d2\u5165 USDT \u951a\u70b9","text":"<ul> <li>\u4ee3\u7801\uff1a</li> </ul> <pre><code>//hello-usdt.c\n#include \"sys/sdt.h\"\nint main() {\nDTRACE_PROBE(hello_usdt, hello_enter);\nint reval = 0;\nDTRACE_PROBE1(hello_usdt, hello_exit, reval);\n}\n</code></pre> <ul> <li>\u7f16\u8bd1\uff1a</li> </ul> <pre><code>\u279c  gcc hello-usdt.c -o hello-usdt\n</code></pre> <ul> <li>\u6dfb\u52a0usdt</li> </ul> <pre><code>\u279c  perf buildid-cache --add  ./hello-usdt\n</code></pre> <ul> <li>\u67e5\u770b usdt</li> </ul> <pre><code>\u279c  perf list sdt\nList of pre-defined events (to be used in -e):\n  sdt_hello_usdt:hello_enter                         [SDT event]\nsdt_hello_usdt:hello_exit                          [SDT event]\n</code></pre> <ul> <li>\u6ce8\u518c trace-point</li> </ul> <pre><code>\u279c  perf probe sdt_hello_usdt:hello_enter\nAdded new event:\n  sdt_hello_usdt:hello_enter (on %hello_enter in /home/shw/code/hello-usdt)\n\nYou can now use it in all perf tools, such as:\n\n        perf record -e sdt_hello_usdt:hello_enter -aR sleep 1\n</code></pre> <ul> <li>\u91c7\u96c6\u4fe1\u606f\uff1a\u91c7\u96c6\u4fe1\u606f\u8fc7\u7a0b\uff0c\u6267\u884c\u4e0b\u4e0a\u9762\u751f\u6210\u7684 ./hello-usdt</li> </ul> <pre><code>\u279c  perf record -e sdt_hello_usdt:hello_enter -aR sleep 4\n[ perf record: Woken up 1 times to write data ]\n[ perf record: Captured and wrote 0.178 MB perf.data ]\n</code></pre> <ul> <li>\u67e5\u770b\u91c7\u96c6\u6570\u636e</li> </ul> <pre><code>\u279c  perf script\n      hello-usdt  3337 [003]  2619.484083: sdt_hello_usdt:hello_enter: (40110a)\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/USDT/#21-bcc-usdt","title":"2.1 \u4f7f\u7528 bcc \u4fee\u6539 USDT \u5185\u5bb9","text":"<ul> <li>\u7f16\u5199 bpf\u4ee3\u7801</li> </ul> <pre><code>from bcc import BPF, USDT\n\nbpf_source = \"\"\"\n#include &lt;uapi/linux/ptrace.h&gt;\nint trace_binary_exec(struct pt_regs *ctx) {\n  u64 pid = bpf_get_current_pid_tgid();\n  bpf_trace_printk(\"New hello_usdt process running with PID: %d\", pid);\n}\n\"\"\"\n\nusdt = USDT(path = \"./hello_usdt\")\nusdt.enable_probe(probe = \"probe-main\", fn_name = \"trace_binary_exec\")\nbpf = BPF(text = bpf_source, usdt_contexts = [usdt])\nbpf.trace_print()\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/kprobe%E3%80%81uprobe%E3%80%81trancepoint%E3%80%81USDT/","title":"kprobe\u3001uprobe\u3001trancepoint\u3001USDT","text":"<ul> <li>kprobe\u548cuprobe\u5206\u522b\u662f\u5185\u6838\u6001\u548c\u7528\u6237\u6001\u4e0b\u52a8\u6001\u63d2\u6869\u6280\u672f</li> <li>trancepoint\u3001USDT\u5206\u522b\u662f\u5185\u6838\u6001\u548c\u7528\u6237\u6001\u9759\u6001\u8ddf\u8e2a\u6280\u672f</li> <li>USDT\uff1a\u7528\u6237\u6001\u9884\u5b9a\u4e49\u9759\u6001\u8ddf\u8e2a\uff08user-level statically defined tracing\uff09</li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/kprobe%E3%80%81uprobe%E3%80%81trancepoint%E3%80%81USDT/#11-kprobe","title":"1.1 kprobe","text":"<pre><code>1. kprobes\u6280\u672f\u8fd8\u6709\u53e6\u5916\u4e00\u4e2a\u63a5\u53e3\uff0c\u5373kretprobes\uff0c\u7528\u6765\u5bf9\u5185\u6838\u51fd\u6570\u8fd4\u56de\u65f6\u8fdb\u884c\u63d2\u6869\u4ee5\u83b7\u53d6\u8fd4\u56de\u503c\u3002\u5f53\u7528kprobes\u548ckretprobes\u5bf9\u540c\u4e00\u4e2a\u51fd\u6570\u8fdb\u884c\u63d2\u6869\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u65f6\u95f4\u6233\u6765\u8bb0\u5f55\u51fd\u6570\u6267\u884c\u7684\u65f6\u957f\u3002\u8fd9\u5728\u6027\u80fd\u5206\u6790\u4e2d\u662f\u4e00\u4e2a\u91cd\u8981\u7684\u6307\u6807\u3002\n2. kprobes\u53ef\u4ee5\u5bf9\u4efb\u4f55\u5185\u6838\u51fd\u6570\u8fdb\u884c\u63d2\u6869\uff0c\u5b83\u8fd8\u53ef\u4ee5\u5bf9\u51fd\u6570\u5185\u90e8\u7684\u6307\u4ee4\u8fdb\u884c\u63d2\u6869\u3002\u53ef\u4ee5\u5b9e\u65f6\u5728\u751f\u4ea7\u73af\u5883\u7cfb\u7edf\u4e2d\u542f\u7528\uff0c\u4e0d\u9700\u8981\u91cd\u542f\u7cfb\u7edf\uff0c\u4e5f\u4e0d\u9700\u8981\u4ee5\u7279\u6b8a\u65b9\u5f0f\u91cd\u542f\u5185\u6838\u3002\n</code></pre> <ul> <li>kprobe\uff1a\u5185\u6838\u6001\u63a2\u9488,\u7528\u4e8e\u5185\u6838\u8ddf\u8e2a\uff0c\u63d0\u4f9b\u4e86\u9488\u5bf9\u5185\u6838\u6001\u52a8\u6001\u63d2\u6869\u3002</li> <li>kretprobes\uff1a\u548ckprobe\u76f8\u4f3c\uff0c\u53ea\u662f\u4ed6\u5728\u51fd\u6570\u8fd4\u56de\u65f6\u89e6\u53d1\uff0c\u800ckprobe\u5728\u8fdb\u5165\u51fd\u6570\u65f6\u89e6\u53d1\u3002</li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/kprobe%E3%80%81uprobe%E3%80%81trancepoint%E3%80%81USDT/#12-uprobe","title":"1.2 uprobe","text":"<ul> <li>uprobe\uff1a\u7528\u6237\u6001\u63a2\u9488\uff0c\u7528\u4e8e\u7528\u6237\u7a0b\u5e8f\u8ddf\u8e2a\uff0c\u63d0\u4f9b\u4e86\u9488\u5bf9\u7528\u6237\u6001\u7a0b\u5e8f\u7684\u52a8\u6001\u63d2\u6869\u3002</li> <li>uretprobes\uff1a\u548cuuprobe\u76f8\u4f3c\uff0c\u53ea\u662f\u4ed6\u5728\u51fd\u6570\u8fd4\u56de\u65f6\u89e6\u53d1\uff0c\u800cuprobe\u5728\u8fdb\u5165\u51fd\u6570\u65f6\u89e6\u53d1\u3002</li> <li>\u53ef\u4ee5\u901a\u8fc7perf\u547d\u4ee4\u52a8\u6001\u63d2\u6869\uff0c\u968f\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u5728/sys/kernel/debug/tracing/uprobe_events \u6587\u4ef6\u4e2d\u627e\u5230\u65b0\u63d2\u6869\u7684uprobe\u4e8b\u4ef6</li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 perf_example]#  perf probe -x ./test for_loop\nAdded new event:\n  probe_test:for_loop  (on for_loop in /root/perf_example/test)\n\nYou can now use it in all perf tools, such as:\n\n        perf record -e probe_test:for_loop -aR sleep 1\n\n[root@centos7 perf_example]# cat /sys/kernel/debug/tracing/uprobe_events \np:probe_test/for_loop /root/perf_example/test:0x000000000000064d\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/kprobe%E3%80%81uprobe%E3%80%81trancepoint%E3%80%81USDT/#13-tracepoint","title":"1.3 tracepoint","text":"<pre><code>\u67e5\u770b\u7cfb\u7edf\u652f\u6301\u7684tracepoint\uff1f\n1. \u53ef\u4ee5\u5728/sys/kernel/debug/tracing/events \u76ee\u5f55\u4e0b\u67e5\u770b\n2. `perf list tracepoint` \u547d\u4ee4\u67e5\u770b\n</code></pre> <ul> <li>tracepoints\uff1a \u8ddf\u8e2a\u70b9\u53ef\u4ee5\u7528\u6765\u5bf9\u5185\u6838\u8fdb\u884c\u9759\u6001\u63d2\u6869\u3002\u5185\u6838\u5f00\u53d1\u8005\u5728\u5185\u6838\u51fd\u6570\u4e2d\u7684\u7279\u5b9a\u903b\u8f91\u4f4d\u7f6e\u5904\uff0c\u6709\u610f\u653e\u7f6e\u4e86\u8fd9\u4e9b\u63d2\u6869\u70b9\uff1b\u7136\u540e\u8fd9\u4e9b\u8ddf\u8e2a\u70b9\u4f1a\u88ab\u7f16\u8bd1\u5230\u5185\u6838\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u4e2d\u3002</li> <li>tracepoints\u683c\u5f0f\uff1asubsystem:eventname(\u5b50\u7cfb\u7edf:\u4e8b\u4ef6\u540d)\u6bd4\u5982kmem:kmalloc</li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 events]# ll /sys/kernel/debug/tracing/events\ntotal 0\ndrwxr-x---.   6 root root 0 Aug 18 22:29 alarmtimer\ndrwxr-x---.   3 root root 0 Aug 18 22:29 avc\ndrwxr-x---.  21 root root 0 Aug 18 22:29 block\ndrwxr-x---.   3 root root 0 Aug 18 22:29 bpf_test_run\ndrwxr-x---.   3 root root 0 Aug 18 22:29 bpf_trace\ndrwxr-x---.   6 root root 0 Aug 18 22:29 bridge\ndrwxr-x---.  15 root root 0 Aug 18 22:29 cgroup\n...\u7701\u7565...\n[root@centos7 events]# perf list tracepoint\n\nList of pre-defined events (to be used in -e):\n\n  alarmtimer:alarmtimer_cancel                       [Tracepoint event]\nalarmtimer:alarmtimer_fired                        [Tracepoint event]\nalarmtimer:alarmtimer_start                        [Tracepoint event]\nalarmtimer:alarmtimer_suspend                      [Tracepoint event]\navc:selinux_audited                                [Tracepoint event]\nblock:block_bio_backmerge                          [Tracepoint event]\nblock:block_bio_bounce                             [Tracepoint event]\nblock:block_bio_complete                           [Tracepoint event]\n...\u7701\u7565...\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/kprobe%E3%80%81uprobe%E3%80%81trancepoint%E3%80%81USDT/#14-usdt","title":"1.4 USDT","text":"<pre><code>USDT\u662f\u968fsun\u516c\u53f8\u7684DTrace\u5de5\u5177\u706b\u8d77\u6765\u7684\uff0c\u73b0\u5728\u5df1\u7ecf\u88ab\u591a\u79cd\u5e94\u7528\u7a0b\u5e8f\u652f\u6301\u4e86\u3002Linux\u5bf9USDT\u7684\u652f\u6301\uff0c\u6700\u65e9\u6765\u81eaSystemTap\u9879\u76ee\u7684\u8ddf\u8e2a\u5668\u3002BCC\u548cbpftrace\u8ddf\u8e2a\u5de5\u5177\u5efa\u7acb\u5728\u4e0a\u8ff0\u5de5\u4f5c\u57fa\u7840\u4e4b\u4e0a\uff0c\u4e24\u8005\u90fd\u652f\u6301USDT\u3002\n</code></pre> <ul> <li>USDT\uff1a\u7528\u6237\u6001\u9884\u5b9a\u4e49\u9759\u6001\u8ddf\u8e2a\uff08user-level statically defined tracing\uff0cUSDT\uff09\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7528\u6237\u7a7a\u95f4\u7248\u7684\u8ddf\u8e2a\u70b9\u673a\u5236\u3002USDT\u4e0e\u4f17\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff0c\u5b83\u4f9d\u8d56\u4e8e\u5916\u90e8\u7684\u7cfb\u7edf\u8ddf\u8e2a\u5668\u6765\u5524\u8d77\u3002\u5982\u679c\u6ca1\u6709\u5916\u90e8\u8ddf\u8e2a\u5668\uff0c\u5e94\u7528\u4e2d\u7684USDT\u70b9\u4e0d\u4f1a\u505a\u4efb\u4f55\u4e8b\uff0c\u4e5f\u4e0d\u4f1a\u5f00\u542f\u3002</li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/kprobe%E3%80%81uprobe%E3%80%81trancepoint%E3%80%81USDT/#141-usdt","title":"1.4.1 \u81ea\u5b9a\u4e49USDT","text":"<ul> <li>\u7ed9\u5e94\u7528\u7a0b\u5e8f\u6dfb\u52a0USDT\u63a2\u9488\uff0c\u6709\u4e24\u79cd\u65b9\u5f0f\u53ef\u9009\uff1a<ul> <li>\u901a\u8fc7systemtap-sdt-dev\u5305\u63d0\u4f9b\u7684\u5934\u6587\u4ef6\u548c\u5de5\u5177\uff0c</li> <li>\u6216\u8005\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684\u5934\u6587\u4ef6\u3002 \u8fd9\u4e9b\u63a2\u9488\u5b9a\u4e49\u4e86\u53ef\u4ee5\u88ab\u653e\u7f6e\u5728\u4ee3\u7801\u4e2d\u5404\u4e2a\u903b\u8f91\u4f4d\u7f6e\u4e0a\u7684\u5b8f\uff0c\u4ee5\u6b64\u751f\u6210USDT\u7684\u63a2\u9488\u3002\u5728BCC\u9879\u76ee\u7684examples/usdt-sample\u76ee\u5f55\u4e0b\u5305\u542b\u4e86USDT\u793a\u4f8b</li> </ul> </li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/kprobe%E3%80%81uprobe%E3%80%81trancepoint%E3%80%81USDT/#15-tracepointskprobe","title":"1.5 tracepoints\u548ckprobe\u6bd4\u8f83","text":"<ol> <li>\u5bf9\u5185\u6838\u5f00\u53d1\u8005\u6765\u8bf4\uff0c\u8ddf\u8e2a\u70b9\u6709\u4e00\u5b9a\u7684\u7ef4\u62a4\u6210\u672c\uff0c\u800c\u4e14\u5b83\u7684\u4f7f\u7528\u8303\u56f4\u6bd4kprobes\u8981\u7a84\u5f97\u591a\u3002</li> <li>\u4f7f\u7528\u8ddf\u8e2a\u70b9\u7684\u4e3b\u8981\u4f18\u52bf\u662f\u5b83\u7684API\u6bd4\u8f83\u7a33\u5b9a\uff1a\u57fa\u4e8e\u8ddf\u8e2a\u70b9\u7684\u5de5\u5177\uff0c\u5728\u5185\u6838\u7248\u672c\u5347\u7ea7\u540e\u4e00\u822c\u4ecd\u7136\u53ef\u4ee5\u6b63\u5e38\u5de5\u4f5c\u3002\u800c\u57fa\u4e8ekprobes\u7684\u5de5\u5177\u5728\u5185\u6838\u7248\u672c\u5347\u7ea7\u65f6\uff0c\u5982\u679c\u88ab\u8ddf\u8e2a\u7684\u51fd\u6570\u88ab\u91cd\u547d\u540d\u6216\u8005\u529f\u80fd\u6539\u53d8\uff0c\u5219\u4f1a\u5bfc\u81f4\u5176\u4e0d\u53ef\u7528\u3002\u5982\u679c\u6761\u4ef6\u5141\u8bb8\uff0c\u4f60\u5e94\u5f53\u4f18\u5148\u5c1d\u8bd5\u4f7f\u7528\u8ddf\u8e2a\u70b9\uff0c\u53ea\u6709\u5728\u6761\u4ef6\u4e0d\u6ee1\u8db3\u65f6\u624d\u4f7f\u7528kprobes\u4f5c\u4e3a\u66ff\u4ee3\u3002 </li> </ol>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ebpf/eBPF/","title":"eBPF","text":""},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ebpf/eBPF/#1","title":"1 \u672f\u8bed","text":"<ul> <li>\u9759\u6001\u63d2\u6869\uff1a\uff08\uff09</li> <li>\u7528\u6237\u6001\u9759\u6001\u8ddf\u8e2a\u63d2\u6869\uff1a\uff08USDT\uff09\uff08user level statically defined tracing\uff09</li> <li>\u52a8\u6001\u8ddf\u8e2a\u63d2\u6869\uff1a\uff08kprobe\u3001uprobe\uff09</li> <li>BFP\u5b57\u8282\u7801\uff1aBFP\u865a\u62df\u6307\u4ee4\u96c6</li> <li>JIT\uff08just in time\uff09\u7f16\u8bd1\u5668\uff1a\u5373\u65f6\u7f16\u8bd1\u5668\uff0c\u7528\u4e8e\u7f16\u8bd1BFP\u5b57\u8282\u7801\uff0c\u6bd4\u89e3\u91ca\u5668\u6548\u7387\u9ad8\uff0cJIT\u7f16\u8bd1\u7684\u4ee3\u7801\u548c\u5176\u5b83\u5185\u6838\u51fd\u6570\u4e00\u6837\u76f4\u63a5\u5728\u5904\u7406\u5668\u4e0a\u6267\u884c</li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ebpf/eBPF/#2-bpfebpf","title":"2 BPF\u548ceBPF","text":"<pre><code>1. \u4e00\u5f00\u59cb\u6269\u5c55\u7684BPF\u88ab\u79f0\u4f5ceBPF\uff0c\u4f46\u73b0\u5728BPF\u6307\u7684\u5c31\u662feBPF\uff0c\u5185\u6838\u4e2d\u5b9e\u73b0\u7684BPF\u4e5f\u662f\u5373\u652f\u6301\u7ecf\u5178\u7684BFPF\u548c\u6269\u5c55\u7684eBPF\u3002\n2. BPF\u539f\u5148\u6307\u7684\u662f\u4f2f\u514b\u5229\u5305\u8fc7\u6ee4\u5668\uff08Berkeley Packet Filter\uff09\uff0c\u4f46\u73b0\u5728\u5df2\u7ecf\u4e0d\u662f\u6307\u7f51\u7edc\u6570\u636e\u5305\u8fc7\u6ee4\u4e86\uff0c\u66f4\u5e94\u8be5\u662f\u4e00\u79cd\u6280\u672f\uff0c\u4e0d\u518d\u8ba4\u4e3a\u662fBerkeley Packet Filter\u7684\u7f29\u5199\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ebpf/eBPF/#3-bpf","title":"3 BPF","text":"<pre><code>BPF\u901a\u5e38\u88ab\u79f0\u4f5c\u865a\u62df\u673a\uff0c\u4f46JIT\u7f16\u8bd1\u7684\u4ee3\u7801\u548c\u5176\u5b83\u5185\u6838\u51fd\u6570\u4e00\u6837\uff0c\u76f4\u63a5\u8fd0\u884c\u5728\u5904\u7406\u5668\u4e0a\u3002\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ebpf/eBPF/#31-bpf","title":"3.1 BPF\u7684\u4f18\u52bf","text":"<ol> <li>BPF\u8fc7\u6ee4\u3001\u64cd\u4f5c\u6570\u636e\u76f4\u63a5\u5728\u5185\u6838\u6001\u8fdb\u884c\uff0c\u800c\u4f20\u7edf\u5de5\u5177\u5219\u5c06\u6570\u636e\u62f7\u8d1d\u5230\u7528\u6237\u6001\uff0c\u76f8\u6bd4\u8fd9\u79cd\u65b9\u5f0f\uff0cBPF\u6548\u7387\u548c\u6027\u80fd\u66f4\u597d\u3002</li> </ol>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ebpf/eBPF/#32-bpf","title":"3.2 BPF\u7684\u9650\u5236","text":"<ol> <li>BPF\u7a0b\u5e8f\u4e0d\u80fd\u968f\u610f\u8c03\u7528\u5185\u6838\u51fd\u6570\uff1b\u53ea\u80fd\u8c03\u7528\u5728API\u4e2d\u5b9a\u4e49\u7684BPF\u8f85\u52a9\u51fd\u6570\u3002\u5728\u540e\u7eed\u7248\u672c\u4e2d\u968f\u7740\u9700\u6c42\u7684\u589e\u52a0\uff0c\u5728AP1\u4e2d\u4f1a\u52a0\u5165\u66f4\u591a\u7684\u8f85\u52a9\u51fd\u6570\u3002BPF\u7a0b\u5e8f\u5728\u6267\u884c\u5faa\u73af\u65f6\u4e5f\u6709\u9650\u5236\uff1a\u5141\u8bb8BPF\u5c06\u4e00\u4e2a\u65e0\u9650\u5faa\u73af\u63d2\u5165kprobes\u662f\u4e0d\u5b89\u5168\u7684\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u7ebf\u7a0b\u53ef\u80fd\u8fd8\u6301\u6709\u91cd\u8981\u7684\u9501\uff0c\u4ece\u800c\u5bfc\u81f4\u6574\u4e2a\u7cfb\u7edf\u6b7b\u9501\u3002\u89e3\u51b3\u65b9\u6cd5\u5305\u62ec\u5faa\u73af\u5c55\u5f00\uff0c\u4ee5\u53ca\u5728\u4f7f\u7528\u5faa\u73af\u7684\u901a\u7528\u573a\u666f\u4e2d\u589e\u52a0\u7279\u5b9a\u7684\u8f85\u52a9\u51fd\u6570\u7b49\u3002Linux53\u5185\u6838\u652f\u6301BPF\u53d7\u9650\u5faa\u73af\uff0c\u8be5\u5faa\u73af\u7684\u4e0a\u9650\u53ef\u4ee5\u901a \u8fc7\u9a8c\u8bc1\u5668\u9a8c\u8bc1\u3002</li> <li>BPF\u6808\u7684\u5927\u5c0f\u8bbe\u5b9a\u4e3a\u4e0d\u80fd\u8d85\u8fc7MAXBPFSTACK\uff0c\u503c\u4e3a512\u3002\u8fd9\u4e2a\u9650\u5236\u5728\u7f16\u5199BPF\u89c2\u6d4b\u5de5\u5177\u65f6\u4f1a\u78b0\u5230\uff0c\u5c24\u5176\u662f\u5728\u5f80\u6808\u4e0a\u5b58\u653e\u591a\u4e2a\u5b57\u7b26\u7f13\u51b2\u533a\u65f6\uff1a\u4e00\u4e2achar[256]\u7f13\u5b58\u5c31\u53ef\u4ee5\u6d88\u8017\u4e00\u534a\u7684\u6808\u7a7a\u95f4\u3002\u76ee\u524d\u5e76\u6ca1\u6709\u589e\u5927\u8fd9\u4e2a\u9650\u5236\u7684\u8ba1\u5212\u3002\u89e3\u51b3\u65b9\u6cd5\u662f\u4f7f\u7528BPF\u6620\u5c04\u5b58\u50a8\u7a7a\u95f4\uff0c\u6620\u5c04\u5b58\u50a8\u7a7a\u95f4\u662f\u6709\u5927\u5c0f\u9650\u5236\u7684\u3002\u5728bpftrace\u9879\u76ee\u4e2d\uff0c\u5c06\u5b57\u7b26\u4e32\u7684\u5b58\u50a8\u4f4d\u7f6e\u4ece\u6808\u7a7a\u95f4\u8f6c\u79fb\u5230\u6620\u5c04\u7684\u5de5\u4f5c\u5df1\u7ecf\u5f00\u59cb\u3002</li> <li>BPF\u7a0b\u5e8f\u7684\u603b\u6307\u4ee4\u7684\u6570\u91cf\uff0c\u6700\u521d\u9650\u5236\u4e3a4096\u3002\u957f\u7684BPF\u7a0b\u5e8f\u6709\u65f6\u4f1a\u78b0\u5230\u8fd9\u4e2a\u9650\u5236\uff08\u5982\u679c\u6ca1\u6709LLVM\u7684\u7f16\u8bd1\u4f18\u5316\uff0c\u53ef\u80fd\u4f1a\u66f4\u65e9\u78b0\u5230\u8fd9\u4e2a\u9650\u5236\uff09\u3002Linux5\uff0e2\u5185\u6838\u6781\u5927\u5730\u63d0\u5347\u4e86\u8fd9\u4e2a\u503c\u7684\u4e0a\u9650\uff0c\u4f7f\u5f97\u5b83\u4e0d\u518d\u662f\u4e00\u4e2a\u9700\u8981\u8003\u8651\u7684\u95ee\u9898\u30023BPF\u9a8c\u8bc1\u5668\u7684\u4f5c\u7528\u662f\u63a5\u53d7\u4e00\u5207\u5b89\u5168\u7684\u7a0b\u5e8f\uff0c\u6307\u4ee4\u6570\u91cf\u9650\u5236\u4e0d\u5e94\u8be5\u6210\u4e3a\u95ee\u9898\u3002</li> </ol>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ebpf/eBPF/#33-bpf","title":"3.3 BPF\u7ed3\u6784","text":"<p>Linux BPF \u8fd0\u884c\u65f6\uff08 runtime \uff09\u7684\u5404\u6a21\u5757\u7684\u67b6\u6784\u6240\u793a\uff0c\u5b83\u5c55\u793a\u4e86 BPF \u6307\u4ee4\u5982\u4f55\u901a\u8fc7 BPF \u9a8c\u8bc1\u5668\u9a8c\u8bc1\uff0c\u518d\u7531 BPF \u865a\u62df\u673a\u6267\u884c\u3002 BPF \u865a\u62df\u673a\u7684\u5b9e\u73b0\u65e2\u5305\u62ec\u4e00\u4e2a\u89e3\u91ca\u5668\uff0e\u53c8\u5305\u62ec\u4e00\u4e2a JIT \u7f16\u8bd1\u5668\uff1aJIT \u7f16\u8bd1\u5668\u8d1f\u8d23\u751f\u6210\u5904\u7406\u5668\u53ef\u76f4\u63a5\u63a5\u6267\u884c\u7684\u673a\u5668\u6307\u4ee4\u3002\u9a8c\u8bc1\u5668\u4f1a\u62d2\u7edd\u90a3\u4e9b\u4e0d\u5b89\u5168\u7684\u64cd\u4f5c\uff0c\u8fd9\u5305\u62ec\u9488\u5bf9\u65e0\u754c\u5faa\u73af\u7684\u68c0\u67e5\uff1a BPF \u7a0b\u5e8f\u5fc5\u987b\u5728\u6709\u9650\u7684\u65f6\u95f4\u5185\u5b8c\u6210\u3002 BPF\u53ef\u4ee5\u5229\u7528\u8f85\u52a9\u51fd\u6570\u83b7\u53d6\u5185\u6838\u72b6\u6001\uff0c\u5229\u7528BPF\u6620\u5c04\u8868\u8fdb\u884c\u5b58\u50a8\u3002BPF\u7a0b\u5e8f\u5728\u7279\u5b9a\u4e8b\u4ef6\u89e6\u53d1\u65f6\u6267\u884c\uff0c\u5305\u62eckprobes\u3001uprobes\u548ctracepoint\u7b49\u4e8b\u4ef6 </p>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ebpf/eBPF/#4-bcc","title":"4 bcc","text":"<p>BCC - \u57fa\u4e8e BPF \u7684 Linux IO \u5206\u6790\u3001\u7f51\u7edc\u3001\u76d1\u63a7\u7b49\u5de5\u5177</p>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ebpf/eBPF/#41-bcc","title":"4.1 bcc \u5b89\u88c5","text":"<ul> <li>linux\u5404\u53d1\u884c\u7248\u5b89\u88c5\u6b65\u9aa4 \u4eb2\u6d4b\u4f7f\u7528yum\u5b89\u88c5\uff0c\u5404\u79cd\u95ee\u9898\uff0c\u6545\u91c7\u7528\u6e90\u7801\u5b89\u88c5\u65b9\u5f0f</li> <li>\u5b89\u88c5\u540e\uff0c\u76f8\u5173\u5de5\u5177\u4f1a\u653e\u5728<code>/usr/share/bcc/tools</code>\u76ee\u5f55\u4e0b,\u8fd9\u4e9b\u5de5\u5177\u90fd\u662f\u7528python\u7f16\u5199</li> </ul> <pre><code>[root@centos7 tools]# cd /usr/share/bcc/tools\n[root@centos7 tools]# ls\nargdist       btrfsdist    cpuunclaimed  doc         filetop         javaflow     llcstat         nodegc       perlflow   pythoncalls  rubygc      slabratetop  syncsnoop  tcpconnect  tcptracer   xfsdist\nbashreadline  btrfsslower  dbslower      drsnoop     funccount       javagc       mdflush         nodestat     perlstat   pythonflow   rubyobjnew  sofdsnoop    syscount   tcpconnlat  tplist      xfsslower\nbiolatency    cachestat    dbstat        execsnoop   funclatency     javaobjnew   memleak         offcputime   phpcalls   pythongc     rubystat    softirqs     tclcalls   tcpdrop     trace\nbiosnoop      cachetop     dcsnoop       ext4dist    funcslower      javastat     mountsnoop      offwaketime  phpflow    pythonstat   runqlat     solisten     tclflow    tcplife     ttysnoop\nbiotop        capable      dcstat        ext4slower  gethostlatency  javathreads  mysqld_qslower  oomkill      phpstat    reset-trace  runqlen     sslsniff     tclobjnew  tcpretrans  vfscount\nbitesize      cobjnew      deadlock      filelife    hardirqs        killsnoop    nfsdist         opensnoop    pidpersec  rubycalls    runqslower  stackcount   tclstat    tcpsubnet   vfsstat\nbpflist       cpudist      deadlock.c    fileslower  javacalls       lib          nfsslower       perlcalls    profile    rubyflow     shmsnoop    statsnoop    tcpaccept  tcptop      wakeuptime\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ebpf/eBPF/#411","title":"4.1.1 \u5185\u6838\u5347\u7ea7","text":"<p>\u4eceLinux\u5185\u68383.15\u5f00\u59cb\uff0c\u6dfb\u52a0\u4e86eBPF\u3002\u66f4\u591a\u7684\u529f\u80fd\u5728Linux\u5185\u68384.1\u4e2d\uff0c\u5b98\u65b9\u63a8\u8350\u4f7f\u75284.1\u4ee5\u4e0a\u5185\u6838\u7248\u672c\u3002 - \u53c2\u8003[[Linux\u8fd0\u7ef4#1 5 \u5347\u7ea7\u7cfb\u7edf\u5185\u6838]]\uff0c\u5b89\u88c5\u5185\u6838\u65f6\u9700\u8981\u5c06header\u5305\u4e5f\u5b89\u88c5\uff0c\u5426\u5219\u540e\u9762\u4f7f\u7528bcc\u5de5\u5177\u65f6\u4f1a\u62a5\u627e\u4e0d\u5230\u5185\u6838\u5934\u6587\u4ef6\u7684\u9519\u8bef\uff0c\u5982<code>yum --enablerepo=elrepo-kernel install kernel-ml kernel-mt-headers kernel-mt-tools kernel-mt-devel -y</code></p>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ebpf/eBPF/#412-gcc","title":"4.1.2 \u5b89\u88c5 gcc","text":"<ul> <li>\u53c2\u8003[[Linux\u8f6f\u4ef6\u5b89\u88c5#1 2 gcc]]</li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ebpf/eBPF/#413-cmake","title":"4.1.3 \u5b89\u88c5 cmake","text":"<ul> <li>\u53c2\u8003[[Linux\u8f6f\u4ef6\u5b89\u88c5#1 3 cmake]]</li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ebpf/eBPF/#414-llvm","title":"4.1.4 \u5b89\u88c5 llvm \u76f8\u5173\u7ec4\u4ef6","text":"<ol> <li>llvm-project\u9879\u76ee\u5730\u5740</li> <li>\u6b64\u9879\u76ee\u4e0b\u5b89\u88c5\u5305\u8f83\u591a\uff0c\u8bf7\u52a1\u5fc5\u786e\u8ba4\u4e0b\u8f7d\u7684\u662fllvm-project\uff0c\u6bd4\u5982llvm-project-14.0.6.src.tar.xz</li> <li>\u5b89\u88c5</li> </ol> <pre><code>[root@centos7 ~]# wget https://github.com/llvm/llvm-project/releases/download/llvmorg-14.0.6/llvm-project-14.0.6.src.tar.xz\n[root@centos7 ~]# tar -xf llvm-project-14.0.6.src.tar.xz\n[root@centos7 llvm-project-14.0.6.src]# mkdir build&amp;&amp;cdbuild\n[root@centos7 build]# cmake -DCMAKE_BUILD_TYPE=Release -DLLVM_ENABLE_RTTI=ON -DLLVM_ENABLE_PROJECTS=\"clang;libcxx;libcxxabi\"  -DLLVM_TARGETS_TO_BUILD=\"BPF;X86\" -G \"Unix Makefiles\" ../llvm\n[root@centos7 build]# make\n[root@centos7 build]# make install\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ebpf/eBPF/#415-bcc","title":"4.1.5 \u5b89\u88c5 bcc \u4f9d\u8d56","text":"<pre><code>yum install -y epel-release\nyum update -y\nyum groupinstall -y \"Development tools\"\nyum install -y elfutils-libelf-devel bison flex ncurses-devel\nyum install -y luajit luajit-devel  # for Lua support\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ebpf/eBPF/#416-bcc","title":"4.1.6 \u5b89\u88c5 bcc","text":"<ul> <li>\u4e0b\u8f7dbcc-src-with-submodule.tar.gz</li> <li>\u5b89\u88c5</li> </ul> <pre><code>[root@centos7 ~]# wget https://github.com/iovisor/bcc/releases/download/v0.25.0/bcc-src-with-submodule.tar.gz\n[root@centos7 ~]# tar -xzf bcc-src-with-submodule.tar.gz\n[root@centos7 ~]# cd bcc &amp;&amp; mkdir build &amp;&amp; cd build\n[root@centos7 build]# cmake ..\n[root@centos7 build]# make\n[root@centos7 build]# make install\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ebpf/eBPF/#417","title":"4.1.7 \u95ee\u9898\u6c47\u603b","text":""},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ebpf/eBPF/#4171-libbpfsrcbpfh-no-such-file-or-directory","title":"4.1.7.1 libbpf/src/bpf.h: No such file or directory","text":"<p> - \u89e3\u51b3\u529e\u6cd5\uff1a\u4ecegitlab\u4e0a\u4e0b\u8f7dbcc-src-with-submodule.tar.gz\u5b89\u88c5</p>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ebpf/eBPF/#4172-importerror-no-module-named-bc","title":"4.1.7.2 ImportError: No module named bc","text":"<ul> <li>\u95ee\u9898\u539f\u56e0\uff1a\u901a\u5e38\u662f\u540c\u65f6\u5b89\u88c5\u4e86python2\u548cpython3\uff0cmake install\u90e8\u5206python\u4f9d\u8d56\u88c5\u5230\u4e86python3\u8def\u5f84\u4e0b\uff0c\u4f46\u7cfb\u7edf\u9ed8\u8ba4\u4ee5python2\u6267\u884c</li> <li>\u89e3\u51b3\u529e\u6cd5\uff1a<ul> <li>\u65b9\u6cd5\u4e00\uff1a\u6307\u5b9apython3\u7248\u672c\uff1a\u6bd4\u5982<code>python3 opensnoop</code></li> <li>\u65b9\u6cd5\u4e8c\uff1a\u4fee\u6539python\u7684\u8f6f\u8fde\u63a5\uff0c\u6267\u884cpython3\uff0c\u800c\u4e0d\u662fpython2\uff08\u4e0b\u9762\u662f\u5177\u4f53\u64cd\u4f5c\uff09</li> </ul> </li> </ul> <pre><code># \u67e5\u8be2python\u4e8c\u8fdb\u5236\u6240\u5728\u4f4d\u7f6e\n[root@centos7 tools]# whereis python\npython: /usr/bin/python /usr/bin/python2.7 /usr/bin/python3.6 /usr/bin/python3.6m /usr/lib/python2.7 /usr/lib/python3.6 /usr/lib64/python2.7 /usr/lib64/python3.6 /etc/python /usr/include/python2.7 /usr/include/python3.6m /usr/share/man/man1/python.1.gz\n[root@centos7 tools]# cd /usr/bin\n[root@centos7 bin]# ll |grep python\nlrwxrwxrwx.   1 root root         7 Aug  1 03:10 python -&gt; python2\nlrwxrwxrwx.   1 root root         9 Aug  1 03:10 python2 -&gt; python2.7\n-rwxr-xr-x.   1 root root      7144 Jun 28 23:30 python2.7\nlrwxrwxrwx.   1 root root         9 Aug 15 04:17 python3 -&gt; python3.6\n-rwxr-xr-x.   2 root root     11328 Nov 17  2020 python3.6\n-rwxr-xr-x.   2 root root     11328 Nov 17  2020 python3.6m\n# \u5220\u9664python2\u7684\u8f6f\u8fde\u63a5\n[root@centos7 bin]# unlink python\n# \u94fe\u63a5python3\n[root@centos7 bin]# ln -s python3 python\n[root@centos7 bin]# ll |grep python\nlrwxrwxrwx.   1 root root         7 Aug 16 06:56 python -&gt; python3\nlrwxrwxrwx.   1 root root         9 Aug  1 03:10 python2 -&gt; python2.7\n-rwxr-xr-x.   1 root root      7144 Jun 28 23:30 python2.7\nlrwxrwxrwx.   1 root root         9 Aug 15 04:17 python3 -&gt; python3.6\n-rwxr-xr-x.   2 root root     11328 Nov 17  2020 python3.6\n-rwxr-xr-x.   2 root root     11328 Nov 17  2020 python3.6m\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ebpf/eBPF/#42-bcc","title":"4.2 bcc \u5de5\u5177\u4f7f\u7528","text":""},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ebpf/eBPF/#421-funccount","title":"4.2.1 funccount","text":"<pre><code>title: \u89e3\u51b3\u7684\u95ee\u9898\uff1f\n1. \u67d0\u4e2a\u5185\u6838\u6001\u6216\u7528\u6237\u6001\u51fd\u6570\u662f\u5426\u88ab\u8c03\u7528\u8fc7\uff1f\n2. \u8be5\u51fd\u6570\u6bcf\u79d2\u88ab\u8c03\u7528\u4e86\u591a\u5c11\u6b21\uff1f\n</code></pre> <pre><code>funccount \u652f\u6301\u6a21\u5f0f\u641c\u7d22\uff1b\u652f\u6301*\u901a\u914d\u7b26\uff1b\u8fd8\u53ef\u4ee5\u5c06-r\u7528\u4e8e\u6b63\u5219\u8868\u8fbe\u5f0f\u3002\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u7edf\u8ba1function\u3001 tracepoint\u548c\u4e0e\u6a21\u5f0f\u5339\u914d\u7684USDT\u63a2\u6d4b\u8c03\u7528\u51fa\u73b0\u7684\u6b21\u6570\u3002</li> <li>\u8bed\u6cd5\uff1a<code>funccount [options] eventname</code><ul> <li><code>options</code>\u5217\u8868<ul> <li><code>-d DURATION</code>\uff1a\u8ddf\u8e2a\u7684\u6301\u7eed\u65f6\u95f4\uff08\u5355\u4f4d\u79d2\uff09</li> <li><code>-i INTERVAL</code>\uff1a\u6bcf\u9694\u591a\u5c11\u79d2\u6253\u5370\u8f93\u51fa</li> <li><code>-p PID</code>\uff1a\u8ddf\u8e2a\u6307\u5b9a\u7684\u8fdb\u7a0b</li> <li><code>-c CPU</code>\uff1a\u4ec5\u5728\u6b64cpu\u4e0a\u8ddf\u8e2a</li> <li><code>-r</code>\uff1a\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f</li> </ul> </li> <li><code>pattern</code>\u7c7b\u522b<ul> <li><code>t:(\u5b50\u7cfb\u7edf:\u4e8b\u4ef6\u540d)</code>\uff1atracepoint\uff0c\u6bd4\u5982<code>funccount t:kmem:kmalloc</code></li> <li><code>u:</code>\uff1aUSDT\uff0c\u6bd4\u5982<code>funccount -p 185 u:node:gc*</code></li> <li><code>c:libc\u51fd\u6570</code>\uff1auprobe\uff08lib\u51fd\u6570\uff09\uff0c\u6bd4\u5982<code>funccount c:malloc</code></li> <li><code>\u4e8c\u8fdb\u5236\u6587\u4ef6\u5168\u8def\u5f84\u6216\u76f8\u5bf9\u8def\u5f84:\u51fd\u6570\u7b26\u53f7</code>\uff1auprobe\uff0c\u6bd4\u5982<code>funccount /root/a.out:_Z15printCallStack2v</code> </li> <li><code>\u5185\u6838\u51fd\u6570</code>\uff1akprobe\uff0c\u6bd4\u5982<code>funccount vfs_open</code></li> </ul> </li> </ul> </li> <li>\u5b98\u65b9\u793a\u4f8b</li> </ul> <pre><code># 1. Count kernel functions beginning with \"vfs_\", until Ctrl-C is hit:\n$ funccount 'vfs_*'\n# 2. Count kernel functions beginning with \"tcp_send\", until Ctrl-C is hit:\n$ funccount 'tcp_send*'\n# 3. Print kernel functions beginning with \"vfs_\", every second:\n$ funccount -i 1 'vfs_*'\n# 4. Print kernel functions beginning with \"vfs_\", for ten seconds only:\n$ funccount -d 10 'vfs_*'\n# 5. Match kernel functions beginning with \"vfs_\", using regular expressions:\n$ funccount -r '^vfs_.*'\n# 6. Count vfs calls for process ID 181 only:\n$ funccount -p 181 'vfs_*'\n# 7. Count calls to the sched_fork tracepoint, indicating a fork() performed:\n$ funccount t:sched:sched_fork\n# 8. Count all GC USDT probes in the Node process:\n$ funccount -p 185 u:node:gc*\n# 9. Count all malloc() calls in libc:\n$ funccount c:malloc\n# 10. Count kernel functions beginning with \"vfs_\" on CPU 1 only:\n$ funccount -c 1 'vfs_*'\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ebpf/eBPF/#4211","title":"4.2.1.1 \u8ddf\u8e2a\u7528\u6237\u7a0b\u5e8f\u51fd\u6570","text":"<ul> <li>\u4f7f\u7528<code>nm -s</code>\u547d\u4ee4\u67e5\u770b\u4e8c\u8fdb\u5236\u6587\u4ef6\u7684symbols\u4fe1\u606f\uff0c\u9009\u62e9\u9700\u8981\u7684\u51fd\u6570\u540d</li> <li>\u8bed\u6cd5\uff1a<code>funccount \u4e8c\u8fdb\u5236\u6587\u4ef6\u5168\u8def\u5f84\u6216\u76f8\u5bf9\u8def\u5f84:\u51fd\u6570\u540d</code></li> </ul> <pre><code>[root@centos7 ~]# funccount /root/a.out:_Z15printCallStack2v \nTracing 1 functions for \"b'/root/a.out:_Z15printCallStack2v'\"... Hit Ctrl-C to end.\n^C\nFUNC                                    COUNT\n_Z15printCallStack2v                        1\nDetaching...\n</code></pre> <ul> <li>\u4f7f\u7528\u6a21\u5f0f\u5339\u914d<code>*</code>\u6765\u8868\u793a\u6240\u6709\u51fd\u6570</li> <li>\u8bed\u6cd5\uff1a<code>funccount \u4e8c\u8fdb\u5236\u6587\u4ef6\u5168\u8def\u5f84\u6216\u76f8\u5bf9\u8def\u5f84:*</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 ~]# funccount /root/a.out:*\nTracing 15 functions for \"b'./a.out:*'\"... Hit Ctrl-C to end.\n^C\nFUNC                                    COUNT\n_Z5test3i                                   1\n_fini                                       1\n_Z5test2i                                   1\nmain                                        1\n_Z5test1i                                   1\n_init                                       1\n_start                                      1\n__libc_csu_init                             1\n_Z15printCallStack2v                        1\nderegister_tm_clones                        1\nregister_tm_clones                          1\n__do_global_dtors_aux                       1\nframe_dummy                                 1\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ebpf/eBPF/#4212-libc","title":"4.2.1.2 \u8ddf\u8e2a libc \u51fd\u6570","text":"<pre><code>\u6b64\u65b9\u5f0f\u53ea\u662f\u9488\u5bf9libc\u505a\u7684\u7279\u6b8a\u5904\u7406\uff0c\u540c\u6837\u53ef\u4ee5\u4f7f\u7528\u4e0a\u9762\u8ddf\u8e2a\u5185\u6838\u6001\u51fd\u6570\u7684\u65b9\u6cd5\n</code></pre> <ul> <li>\u8bed\u6cd5\uff1a<code>funccount c:libc\u51fd\u6570</code></li> <li>\u793a\u4f8b\uff1a\u8ddf\u8e2aopen\u51fd\u6570</li> </ul> <pre><code>[root@centos7 ~]# funccount c:open\nTracing 1 functions for \"b'c:open'\"... Hit Ctrl-C to end.\n^C\nFUNC                                    COUNT\nopen                                      247\nDetaching...\n</code></pre> <ul> <li>\u793a\u4f8b\uff1a\u6a21\u5f0f\u5339\u914d</li> </ul> <pre><code>Tracing 9 functions for \"b'c:open*'\"... Hit Ctrl-C to end.\n^C\nFUNC                                    COUNT\nopendir                                     1\nopen64                                     12\nDetaching...\n</code></pre> <ul> <li>\u793a\u4f8b\uff1a\u4f7f\u7528\u5185\u6838\u6001\u51fd\u6570\u8ddf\u8e2a\u901a\u7528\u65b9\u6cd5</li> </ul> <pre><code>[root@centos7 perf_example]# funccount /lib64/libc.so.6:opendir\nTracing 1 functions for \"b'/lib64/libc.so.6:opendir'\"... Hit Ctrl-C to end.\n^C\nFUNC                                    COUNT\nopendir                                     2\nDetaching...\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ebpf/eBPF/#4213","title":"4.2.1.3 \u8ddf\u8e2a\u5185\u6838\u51fd\u6570","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>function \u5185\u6838\u51fd\u6570</code></li> <li>\u793a\u4f8b\uff1a\u8ddf\u8e2a\u6307\u5b9a\u5185\u6838\u51fd\u6570</li> </ul> <pre><code>[root@centos7 perf_example]# funccount  vfs_open\nTracing 1 functions for \"b'vfs_open'\"... Hit Ctrl-C to end.\n^C\nFUNC                                    COUNT\nvfs_open                                    6\nDetaching...\n</code></pre> <ul> <li>\u793a\u4f8b\uff1a\u6a21\u7cca\u5339\u914d\u6a21\u5f0f</li> </ul> <pre><code>[root@centos7 perf_example]# funccount  vfs_*\nTracing 71 functions for \"b'vfs_*'\"... Hit Ctrl-C to end.\n^C\nFUNC                                    COUNT\nvfs_statx                                   1\nvfs_fstatat                                 1\nvfs_fsync_range                             3\nvfs_statfs                                  9\nvfs_write                                  37\nvfs_read                                   82\nDetaching...\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ebpf/eBPF/#4214-tracepoint","title":"4.2.1.4 \u8ddf\u8e2a tracepoint","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>funccount t:\u8ddf\u8e2a\u70b9</code></li> </ul> <pre><code>[root@centos7 events]# funccount t:vsyscall:emulate_vsyscall\nTracing 1 functions for \"b't:vsyscall:emulate_vsyscall'\"... Hit Ctrl-C to end.\n^C\nFUNC                                    COUNT\nDetaching...\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ebpf/eBPF/#4215-usdt","title":"4.2.1.5 \u8ddf\u8e2a USDT","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>funccount u:USDT\u63a2\u9488*</code></li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ebpf/eBPF/#422-stackcount","title":"4.2.2 stackcount","text":"<pre><code>title: \u89e3\u51b3\u7684\u95ee\u9898\uff1f\n1. \u67d0\u4e2a\u4e8b\u4ef6\u4e3a\u4ec0\u4e48\u4f1a\u88ab\u8c03\u7528\uff1f\u8c03\u7528\u7684\u4ee3\u7801\u8def\u5f84\u662f\u4ec0\u4e48\uff1f\n2. \u6709\u54ea\u4e9b\u4e0d\u540c\u7684\u4ee3\u7801\u8def\u5f84\u4f1a\u8c03\u7528\u8be5\u4e8b\u4ef6\uff0c\u5b83\u4eec\u7684\u8c03\u7528\u9891\u6b21\u5982\u4f55\uff1f\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u5bf9\u5bfc\u81f4\u67d0\u4e8b\u4ef6\u53d1\u751f\u7684\u51fd\u6570\u8c03\u7528\u6808\u8fdb\u884c\u8ba1\u6570\u3002</li> <li>\u8bed\u6cd5\uff1a<code>stackcount [options] eventname</code><ul> <li><code>option</code>\u5217\u8868<ul> <li><code>-s</code>\uff1a\u6808\u51fd\u6570\u663e\u793a\u5730\u5740\u504f\u79fb\u91cf</li> <li><code>-v</code>\uff1a\u6808\u51fd\u6570\u663e\u793araw\u5730\u5740</li> <li><code>-d</code>\uff1a\u5185\u6838\u51fd\u6570\u548c\u7528\u6237\u6001\u51fd\u6570\u7528--\u5206\u5272</li> <li><code>-U</code>\uff1a\u53ea\u663e\u793a\u7528\u6237\u6001\u6808</li> <li><code>-K</code>\uff1a\u53ea\u663e\u793a\u5185\u6838\u6808</li> <li><code>-T</code>\uff1a\u663e\u793a\u65f6\u95f4</li> </ul> </li> <li><code>pattern</code>\u7c7b\u522b\uff0c\u548cfunccount\u4e00\u6837<ul> <li><code>t:(\u5b50\u7cfb\u7edf:\u4e8b\u4ef6\u540d)</code>\uff1atracepoint\uff0c\u6bd4\u5982<code>stackcount t:kmem:kmalloc</code></li> <li><code>u:</code>\uff1aUSDT\uff0c\u6bd4\u5982<code>stackcount -p 185 u:node:gc*</code></li> <li><code>c:libc\u51fd\u6570</code>\uff1auprobe\uff08lib\u51fd\u6570\uff09\uff0c\u6bd4\u5982<code>stackcount c:malloc</code></li> <li><code>\u4e8c\u8fdb\u5236\u6587\u4ef6\u5168\u8def\u5f84\u6216\u76f8\u5bf9\u8def\u5f84:\u51fd\u6570\u7b26\u53f7</code>\uff1auprobe\uff0c\u6bd4\u5982<code>stackcount /root/a.out:_Z15printCallStack2v</code> </li> <li><code>\u5185\u6838\u51fd\u6570</code>\uff1akprobe\uff0c\u6bd4\u5982<code>stackcount vfs_open</code> </li> </ul> </li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 ~]# stackcount  vfs_read\nTracing 1 functions for \"vfs_read\"... Hit Ctrl-C to end.\n^C\n  vfs_read\n  __x64_sys_read\n  do_syscall_64\n  entry_SYSCALL_64_after_hwframe\n  [unknown]\n[unknown]\n1\n[root@centos7 ~]# stackcount -vs vfs_read\nTracing 1 functions for \"vfs_read\"... Hit Ctrl-C to end.\n^C\n  ffffffffba3467b1 vfs_read+0x1\n  ffffffffba346cea __x64_sys_read+0x1a\n  ffffffffbaab014b do_syscall_64+0x3b\n  ffffffffbac0009b entry_SYSCALL_64_after_hwframe+0x63\n  7f976820e75d     [unknown]\n1\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ebpf/eBPF/#423-trace","title":"4.2.3 trace","text":"<pre><code>title: \u89e3\u51b3\u7684\u95ee\u9898\uff1f\n1. \u5f53\u67d0\u4e2a\u5185\u6838\u6001/\u7528\u6237\u6001\u51fd\u6570\u88ab\u8c03\u7528\u65f6\uff0c\u8c03\u7528\u53c2\u6570\u662f\u4ec0\u4e48\uff1f\n2. \u8fd9\u4e2a\u51fd\u6570\u7684\u8fd4\u56de\u503c\u662f\u4ec0\u4e48\uff1f\u8c03\u7528\u5931\u8d25\u4e86\u5417\uff1f\n3. \u8fd9\u4e2a\u51fd\u6570\u662f\u5982\u4f55\u88ab\u8c03\u7528\u7684\uff1f\u76f8\u5e94\u7684\u7528\u6237\u6001\u6216\u5185\u6838\u6001\u51fd\u6570\u8c03\u7528\u6808\u662f\u4ec0\u4e48\uff1f\n</code></pre> <ul> <li>\u9009\u9879</li> </ul> <pre><code>  -h, --help            show this help message and exit\n  -b BUFFER_PAGES, --buffer-pages BUFFER_PAGES\n                        number of pages to use for perf_events ring buffer\n                        (default: 64)\n  -p PID, --pid PID     id of the process to trace (optional)\n  -L TID, --tid TID     id of the thread to trace (optional)\n  --uid UID             id of the user to trace (optional)\n  -v, --verbose         print resulting BPF program code before executing\n  -Z STRING_SIZE, --string-size STRING_SIZE\n                        maximum size to read from strings\n  -S, --include-self    do not filter trace's own pid from the trace\n  -M MAX_EVENTS, --max-events MAX_EVENTS\n                        number of events to print before quitting\n  -t, --timestamp       print timestamp column (offset from trace start)\n  -u, --unix-timestamp  print UNIX timestamp instead of offset from trace\n                        start, requires -t\n  -T, --time            print time column\n  -C, --print_cpu       print CPU id\n  -c CGROUP_PATH, --cgroup-path CGROUP_PATH\n                        cgroup path\n  -n NAME, --name NAME  only print process names containing this name\n  -f MSG_FILTER, --msg-filter MSG_FILTER\n                        only print the msg of event containing this string\n  -B, --bin_cmp         allow to use STRCMP with binary values\n  -s SYM_FILE_LIST, --sym_file_list SYM_FILE_LIST\n                        comma separated list of symbol files to use for symbol\n                        resolution\n  -K, --kernel-stack    output kernel stack trace\n  -U, --user-stack      output user stack trace\n  -a, --address         print virtual address in stacks\n  -I header, --include header\n                        additional header files to include in the BPF program\n                        as either full path, or relative to current working\n                        directory, or relative to default kernel header search\n                        path\n  -A, --aggregate       aggregate amount of each trace\n</code></pre> <ul> <li>\u5b98\u65b9\u793a\u4f8b\uff1a</li> </ul> <pre><code>trace do_sys_open\n        Trace the open syscall and print a default trace message when entered\ntrace kfree_skb+0x12\n        Trace the kfree_skb kernel function after the instruction on the 0x12 offset\ntrace 'do_sys_open \"%s\", arg2@user'\n        Trace the open syscall and print the filename being opened @user is\n        added to arg2 in kprobes to ensure that char * should be copied from\n        the userspace stack to the bpf stack. If not specified, previous\n        behaviour is expected.\n\ntrace 'do_sys_open \"%s\", arg2@user' -n main\n        Trace the open syscall and only print event that process names containing \"main\"\ntrace 'do_sys_open \"%s\", arg2@user' --uid 1001\n        Trace the open syscall and only print event that processes with user ID 1001\ntrace 'do_sys_open \"%s\", arg2@user' -f config\n        Trace the open syscall and print the filename being opened filtered by \"config\"\ntrace 'sys_read (arg3 &gt; 20000) \"read %d bytes\", arg3'\n        Trace the read syscall and print a message for reads &gt;20000 bytes\ntrace 'r::do_sys_open \"%llx\", retval'\n        Trace the return from the open syscall and print the return value\ntrace 'c:open (arg2 == 42) \"%s %d\", arg1, arg2'\n        Trace the open() call from libc only if the flags (arg2) argument is 42\ntrace 'c:malloc \"size = %d\", arg1'\n        Trace malloc calls and print the size being allocated\ntrace 'p:c:write (arg1 == 1) \"writing %d bytes to STDOUT\", arg3'\n        Trace the write() call from libc to monitor writes to STDOUT\ntrace 'r::__kmalloc (retval == 0) \"kmalloc failed!\"'\n        Trace returns from __kmalloc which returned a null pointer\ntrace 'r:c:malloc (retval) \"allocated = %x\", retval'\n        Trace returns from malloc and print non-NULL allocated buffers\ntrace 't:block:block_rq_complete \"sectors=%d\", args-&gt;nr_sector'\n        Trace the block_rq_complete kernel tracepoint and print # of tx sectors\ntrace 'u:pthread:pthread_create (arg4 != 0)'\n        Trace the USDT probe pthread_create when its 4th argument is non-zero\ntrace 'u:pthread:libpthread:pthread_create (arg4 != 0)'\n        Ditto, but the provider name \"libpthread\" is specified.\ntrace 'p::SyS_nanosleep(struct timespec *ts) \"sleep for %lld ns\", ts-&gt;tv_nsec'\n        Trace the nanosleep syscall and print the sleep duration in ns\ntrace -c /sys/fs/cgroup/system.slice/workload.service '__x64_sys_nanosleep' '__x64_sys_clone'\n        Trace nanosleep/clone syscall calls only under workload.service\n        cgroup hierarchy.\ntrace -I 'linux/fs.h' \\\n      'p::uprobe_register(struct inode *inode) \"a_ops = %llx\", inode-&gt;i_mapping-&gt;a_ops'\n        Trace the uprobe_register inode mapping ops, and the symbol can be found\n        in /proc/kallsyms\ntrace -I 'kernel/sched/sched.h' \\\n      'p::__account_cfs_rq_runtime(struct cfs_rq *cfs_rq) \"%d\", cfs_rq-&gt;runtime_remaining'\n        Trace the cfs scheduling runqueue remaining runtime. The struct cfs_rq is defined\n        in kernel/sched/sched.h which is in kernel source tree and not in kernel-devel\n        package.  So this command needs to run at the kernel source tree root directory\n        so that the added header file can be found by the compiler.\ntrace -I 'net/sock.h' \\\n      'udpv6_sendmsg(struct sock *sk) (sk-&gt;sk_dport == 13568)'\n        Trace udpv6 sendmsg calls only if socket's destination port is equal\n        to 53 (DNS; 13568 in big endian order)\ntrace -I 'linux/fs_struct.h' 'mntns_install \"users = %d\", $task-&gt;fs-&gt;users'\n        Trace the number of users accessing the file system of the current task\ntrace -s /lib/x86_64-linux-gnu/libc.so.6,/bin/ping 'p:c:inet_pton' -U\n        Trace inet_pton system call and use the specified libraries/executables for\n        symbol resolution.\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ebpf/eBPF/#5","title":"5 \u53c2\u8003\u8d44\u6599","text":"<ul> <li>Brendan\u535a\u5ba2</li> <li>Andrii Nakryiko \u535a\u5ba2</li> <li>https://ebpf.io/zh-cn/</li> <li>https://www.brendangregg.com/bpf-performance-tools-book.html</li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ftrace/ftrace/","title":"ftrace","text":"<ul> <li>\u53c2\u8003</li> <li>\u53c2\u80032</li> <li>\u5b98\u65b9\u6587\u6863</li> <li>\u4f7f\u7528\u811a\u672c</li> <li>\u51fd\u6570\u8c03\u7528\u6808c\u4ee3\u7801</li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ftrace/ftrace/#1-debugfs","title":"1 \u6302\u8f7ddebugfs","text":"<pre><code>\u5927\u90e8\u5206linux\u53d1\u884c\u7248\u5df2\u7ecf\u6302\u8f7d\u5230\u4e86/sys/kernel/debug\u6216/sys/kernel/tracing\u76ee\u5f55\u4e0b\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u6b64\u64cd\u4f5c\u3002\n</code></pre> <pre><code>[root@centos7 ~]# mkdir -p /debug\n[root@centos7 ~]# mount  -t  debugfs  debugfs  /debug\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ftrace/ftrace/#2","title":"2 \u6700\u5c0f\u793a\u4f8b","text":"<ol> <li>\u8fdb\u5165trace\u76ee\u5f55\uff1a<code>cd /sys/kernel/debug/tracing</code></li> <li>\u6307\u5b9a\u8ddf\u8e2a\u8d44\u6e90\uff1a<code>echo function &gt;current_tracer</code>\uff08\u8ddf\u8e2a\u51fd\u6570\uff09</li> <li>\u6253\u5f00trace\u5f00\u5173\uff1a<code>echo 1 &gt; tracing_on</code></li> <li>\u67e5\u770btrace\u5f97\u5230\u7684\u65e5\u5fd7\u4fe1\u606f\uff1a<code>cat trace |head -20</code></li> </ol> <pre><code>[root@centos7 tracing]# cd /sys/kernel/debug/tracing\n[root@centos7 tracing]# echo function &gt;current_tracer\n[root@centos7 tracing]# echo 1 &gt; tracing_on \n[root@centos7 tracing]# cat trace |head -20\n# tracer: function\n#\n# entries-in-buffer/entries-written: 102609/17086024   #P:2\n#\n#                                _-----=&gt; irqs-off/BH-disabled\n#                               / _----=&gt; need-resched\n#                              | / _---=&gt; hardirq/softirq\n#                              || / _--=&gt; preempt-depth\n#                              ||| / _-=&gt; migrate-disable\n#                              |||| /     delay\n#           TASK-PID     CPU#  |||||  TIMESTAMP  FUNCTION\n#              | |         |   |||||     |         |\n&lt;idle&gt;-0       [000] d..2.   880.780380: cpuidle_enter_state &lt;-cpuidle_enter\n        vmtoolsd-798     [001] ...1.   881.852240: sockfd_lookup_light &lt;-__sys_bind\n        vmtoolsd-798     [001] ...1.   881.852241: __fdget &lt;-sockfd_lookup_light\n        vmtoolsd-798     [001] ...1.   881.852241: __fget_light &lt;-__fdget\n        vmtoolsd-798     [001] ...1.   881.852241: __rcu_read_lock &lt;-__fget_light\n        vmtoolsd-798     [001] ...1.   881.852241: __rcu_read_unlock &lt;-__fget_light\n        vmtoolsd-798     [001] ...1.   881.852241: move_addr_to_kernel.part.0 &lt;-__sys_bind\n        vmtoolsd-798     [001] ...1.   881.852242: __check_object_size &lt;-move_addr_to_kernel.part.0\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ftrace/ftrace/#3-trace","title":"3 trace\u76ee\u5f55\u4e0b\u5173\u952e\u6587\u4ef6\u8bf4\u660e","text":""},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ftrace/ftrace/#31-available_tracers","title":"3.1 available_tracers","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793a\u53ef\u7528\u7684tracer</li> <li>\u652f\u6301\u53c2\u6570\uff1a<ul> <li><code>function_graph</code>\uff1a\u51fd\u6570\u8c03\u7528\u6808</li> <li><code>function</code>\uff1a\u51fd\u6570</li> <li><code>nop</code>\uff1a\u4e0d\u8ddf\u8e2a\u4efb\u52a1tracer</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 tracing]# cat available_tracers \nblk function_graph wakeup_dl wakeup_rt wakeup function nop\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ftrace/ftrace/#32-current_tracer","title":"3.2 current_tracer","text":"<ul> <li>\u529f\u80fd\uff1a\u8bbe\u7f6e\u6216\u663e\u793a\u5f53\u524dtracer</li> <li>\u53ef\u7528\u53c2\u6570\uff1aavailable_tracers\u63d0\u4f9b\u7684\u53c2\u6570</li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 tracing]# echo function_graph &gt; current_tracer \n[root@centos7 tracing]# cat current_tracer \nfunction_graph\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ftrace/ftrace/#33-tracing_on","title":"3.3 tracing_on","text":"<ul> <li>\u529f\u80fd\uff1a\u8bbe\u7f6e\u6216\u663e\u793a\u662f\u5426\u5f00\u542fring buffer\uff0c\u4ee5\u652f\u6301tracer</li> <li>\u53ef\u7528\u53c2\u6570\uff1a<ul> <li><code>0</code>\uff1a\u5173\u95ed</li> <li><code>1</code>\uff1a\u5f00\u542f</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 tracing]# echo 1 &gt;tracing_on \n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ftrace/ftrace/#34-tracetrace_pipe","title":"3.4 trace\u3001trace_pipe","text":"<pre><code>title: trace \u548c trace_pipe \u6709\u4ec0\u4e48\u4e0d\u540c\uff1f\n- trace\u4ecering buffer\u8bfb\u53d6\u6570\u636e\uff0c\u800c\u4e0d\u4f1a\u6e05\u9664ring buffer\u91cc\u9762\u6570\u636e\n- trace_pipe\u7c7b\u4f3c\u6d88\u8d39\u8005\uff0c\u4ecering buffer\u8bfb\u53d6\u6570\u636e\u540e\uff0cring buffer\u91cc\u9762\u7684\u6570\u636e\u4e5f\u6ca1\u4e86\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u7528\u4e8e\u4ecering buffer\u4e2d\u8bfb\u53d6tracer\u65e5\u5fd7\u4fe1\u606f</li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 tracing]# cat trace |head -20\n# tracer: function\n#\n# entries-in-buffer/entries-written: 102609/17086024   #P:2\n#\n#                                _-----=&gt; irqs-off/BH-disabled\n#                               / _----=&gt; need-resched\n#                              | / _---=&gt; hardirq/softirq\n#                              || / _--=&gt; preempt-depth\n#                              ||| / _-=&gt; migrate-disable\n#                              |||| /     delay\n#           TASK-PID     CPU#  |||||  TIMESTAMP  FUNCTION\n#              | |         |   |||||     |         |\n&lt;idle&gt;-0       [000] d..2.   880.780380: cpuidle_enter_state &lt;-cpuidle_enter\n        vmtoolsd-798     [001] ...1.   881.852240: sockfd_lookup_light &lt;-__sys_bind\n        vmtoolsd-798     [001] ...1.   881.852241: __fdget &lt;-sockfd_lookup_light\n        vmtoolsd-798     [001] ...1.   881.852241: __fget_light &lt;-__fdget\n        vmtoolsd-798     [001] ...1.   881.852241: __rcu_read_lock &lt;-__fget_light\n        vmtoolsd-798     [001] ...1.   881.852241: __rcu_read_unlock &lt;-__fget_light\n        vmtoolsd-798     [001] ...1.   881.852241: move_addr_to_kernel.part.0 &lt;-__sys_bind\n        vmtoolsd-798     [001] ...1.   881.852242: __check_object_size &lt;-move_addr_to_kernel.part.0\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ftrace/ftrace/#35-available_filter_functions","title":"3.5 available_filter_functions","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793aftrace\u5df2\u7ecf\u5904\u7406\u5e76\u53ef\u4ee5\u8ddf\u8e2a\u7684\u51fd\u6570\u3002\u53ef\u4ee5\u7528\u5728\u00a0<code>set_ftrace_filter</code>, <code>set_ftrace_notrace</code>,<code>set_graph_function</code>, or <code>set_graph_notrace</code>\u4e2d</li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 tracing]# cat available_filter_functions |wc -l\n48793\n[root@centos7 tracing]# cat available_filter_functions |grep open|head -10\nfake_panic_fops_open\nseverities_coverage_open\nmce_chrdev_open\nmtrr_open\nmicrocode_open\nmsr_open\ncpuid_open\nmemtype_seq_open\nclear_warn_once_fops_open\nopen_softirq\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ftrace/ftrace/#36-set_ftrace_filter","title":"3.6 set_ftrace_filter","text":"<ul> <li>\u529f\u80fd\uff1a\u8bbe\u7f6e\u51fd\u6570\u8fc7\u6ee4\u5668\uff0c\u53ea\u8ddf\u8e2a\u6b64\u51fd\u6570</li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ftrace/ftrace/#37-set_ftrace_notrace","title":"3.7 set_ftrace_notrace","text":"<ul> <li>\u529f\u80fd\uff1a\u8bbe\u7f6e\u51fd\u6570\u8fc7\u6ee4\u5668\uff0c\u4e0d\u8ddf\u8e2a\u6b64\u51fd\u6570</li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ftrace/ftrace/#38-set_graph_function","title":"3.8 set_graph_function","text":"<ul> <li>\u529f\u80fd\uff1a\u8bbe\u7f6efunction_graph\u8fc7\u6ee4\u5668\uff0c\u53ea\u8ddf\u8e2a\u6b64function_graph\uff08set_ftrace_filter\u4f9d\u7136\u6709\u6548\uff09</li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ftrace/ftrace/#39-set_graph_notrace","title":"3.9 set_graph_notrace","text":"<ul> <li>\u529f\u80fd\uff1a\u8bbe\u7f6efunction_graph\u8fc7\u6ee4\u5668\uff0c\u4e0d\u8ddf\u8e2a\u6b64function_graph</li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ftrace/ftrace/#310-set_ftrace_pid","title":"3.10 set_ftrace_pid","text":"<ul> <li>\u529f\u80fd\uff1a\u8bbe\u7f6e\u51fd\u6570\u8fdb\u7a0b\u8fc7\u6ee4\u5668\uff0c\u53ea\u8ddf\u8e2a\u6b64\u8fdb\u7a0b</li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ftrace/ftrace/#311-set_ftrace_notrace_pid","title":"3.11 set_ftrace_notrace_pid","text":"<ul> <li>\u529f\u80fd\uff1a\u8bbe\u7f6e\u54c8\u6851\u519c\u6237\u8fdb\u7a0b\u8fc7\u6ee4\u5668\uff0c\u4e0d\u8ddf\u8e2a\u6b64\u8fdb\u7a0b</li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ftrace/ftrace/#312-set_event_pid","title":"3.12 set_event_pid","text":"<ul> <li>\u529f\u80fd\uff1a\u8bbe\u7f6e\u4e8b\u4ef6\u8fdb\u7a0b\u8fc7\u6ee4\u5668\uff0c\u53ea\u8ddf\u8e2a\u6b64\u8fdb\u7a0b</li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ftrace/ftrace/#313-set_event_notrace_pid","title":"3.13 set_event_notrace_pid","text":"<ul> <li>\u529f\u80fd\uff1a\u8bbe\u7f6e\u4e8b\u4ef6\u8fdb\u7a0b\u8fc7\u6ee4\u5668\uff0c\u4e0d\u8ddf\u8e2a\u6b64\u8fdb\u7a0b</li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ftrace/ftrace/#4-trace","title":"4 trace\u811a\u672c","text":"<pre><code>[root@centos7 trace]# cat trace.sh \n#!/bin/bash\ntracer=\ncd /sys/kernel/debug/tracing\nfor i in $(cat available_tracers);do\nif [ \"$1\" = \"$i\" ];then\ntracer=\"$1\"\nbreak\nfi\ndone\nif [ \"$tracer\" = \"\" ];then\necho \"param not valid\"\ncat available_tracers\n  exit 1\nfi\necho  $tracer &gt; current_tracer\necho vfs_open &gt; set_ftrace_filter\necho 1 &gt; tracing_on\ntemp=$(ls)\necho 0 &gt; tracing_on\ncat trace\n</code></pre> <ul> <li>\u6267\u884c\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 trace]# sh trace.sh function_graph\n# tracer: function_graph\n#\n# CPU  DURATION                  FUNCTION CALLS\n# |     |   |                     |   |   |   |\n   1)   2.008 us    |  vfs_open();\n   1)   0.344 us    |  vfs_open();\n   1)   1.143 us    |  vfs_open();\n   1)   0.323 us    |  vfs_open();\n   1)   0.755 us    |  vfs_open();\n   1)   0.554 us    |  vfs_open();\n   1)   0.557 us    |  vfs_open();\n   1)   0.666 us    |  vfs_open();\n   1)   0.566 us    |  vfs_open();\n   1)   0.581 us    |  vfs_open();\n   1)   0.555 us    |  vfs_open();\n   1)   1.026 us    |  vfs_open();\n   1)   1.289 us    |  vfs_open();\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ftrace/trace-cmd/","title":"trace-cmd","text":"<ul> <li>trace-cmd\u4ed3\u5e93</li> <li>\u53c2\u8003\u6559\u7a0b</li> </ul> <pre><code>trace-cmd\u662fftrace\u7684\u524d\u7aef\u5de5\u5177\uff0c\u4e3b\u8981\u4e3a\u4e86\u7b80\u5316trace\u7684\u64cd\u4f5c\u3002\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ftrace/trace-cmd/#1-trace-cmd","title":"1 \u5b89\u88c5 trace-cmd","text":"<ul> <li>yum \u5b89\u88c5\uff1a<code>yum install -y trace-cmd</code></li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ftrace/trace-cmd/#2-trace-cmd","title":"2 trace-cmd \u547d\u4ee4","text":""},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ftrace/trace-cmd/#21-trace-cmd-list","title":"2.1 trace-cmd list","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793a\u53ef\u7528\u7684 tracer\u3001plugins\u3001 events \u6216 Ftrace options</li> <li>\u8bed\u6cd5\uff1a<code>trace-cmd list\u00a0[OPTIONS]</code><ul> <li><code>-e</code> \uff1a \u5217\u51fa\u53ef\u7528\u4e8b\u4ef6</li> <li><code>-s</code> \uff1a\u5217\u51fa\u53ef\u7528\u7684 event systems</li> <li><code>-t</code> \uff1a\u5217\u51fa\u53ef\u7528\u7684 tracers</li> <li><code>-p</code> \uff1a\u540c <code>-t</code> \u9009\u9879</li> <li><code>-o</code> \uff1a\u5217\u51fa\u672c\u5730\u7cfb\u7edf\u4e0a\u914d\u7f6e\u7684\u53ef\u7528 Ftrace \u9009\u9879</li> <li><code>-f [regex]</code> \uff1a\u5217\u51fa\u53ef\u7528\u7684 filter functions</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>\u279c  trace-cmd list -t\ntimerlat osnoise hwlat blk function_graph wakeup_dl wakeup_rt wakeup function nop\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ftrace/trace-cmd/#22-trace-cmd-record","title":"2.2 trace-cmd record","text":"<ul> <li>\u529f\u80fd\uff1a\u8bb0\u5f55\u547d\u4ee4\u5c06\u8bbe\u7f6e Ftrace Linux \u5185\u6838\u8ddf\u8e2a\u5668\u4ee5\u8bb0\u5f55\u547d\u4ee4\u6267\u884c\u65f6\u53d1\u751f\u7684\u6307\u5b9a\u63d2\u4ef6\u6216\u4e8b\u4ef6\u3002\u5982\u679c\u6ca1\u6709\u7ed9\u51fa\u547d\u4ee4\uff0c\u90a3\u4e48\u5b83\u4f1a\u8bb0\u5f55\u76f4\u5230\u7528\u6237\u6309\u4e0b Ctrl-C\u3002\u4f1a\u751f\u6210 trace.dat \u6587\u4ef6\u3002</li> <li>\u8bed\u6cd5\uff1a<code>trace-cmd record\u00a0[OPTIONS] [command]</code><ul> <li><code>-p tracer</code> \uff1a\u6307\u5b9a\u8ddf\u8e2a\u5668\uff0c<code>trace-cmd list -p/-t</code> \u663e\u793a\u7684\uff0c\u6bd4\u5982 functioon\u3001function_graph</li> <li><code>-e event</code> \uff1a\u6307\u5b9a\u4e8b\u4ef6\uff0c<code>trace-cmd list -e</code> \u663e\u793a\u7684\uff0c\u6bd4\u5982,</li> <li><code>-v</code> \uff1a\u4e0d\u4f7f\u7528\u67d0\u4e8b\u4ef6\uff0c\u5e38\u7528\u5728\u8fd9\u79cd\u573a\u666f\uff0c\u6bd4\u5982 \uff1a<code>-e sched -v -e \"*stat\\*\"</code></li> <li><code>-P pid</code> \uff1a\u6307\u5b9a\u8fdb\u7a0b\u53f7</li> </ul> </li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ftrace/trace-cmd/#23-trace-cmd-report","title":"2.3 trace-cmd report","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793a trace-cmd record \u4ea7\u751f\u7684\u6570\u636e</li> <li>\u8bed\u6cd5\uff1a<code>trace-cmd report [OPTIONS] [input-file]</code></li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/ftrace/trace-cmd/#24-trace-cmd-startstopshowclear","title":"2.4 trace-cmd start/stop/show/clear","text":"<ul> <li>\u529f\u80fd\uff1a<ul> <li><code>start</code> \uff1a\u5728\u8bb0\u5f55\u7684\u60c5\u51b5\u4e0b\u542f\u52a8 Ftrace Linux \u5185\u6838\u8ddf\u8e2a\u7a0b\u5e8f\uff08\u4e0e record \u7684\u533a\u522b\u5728\u4e8e\uff0c\u4e0d\u751f\u6210 trace. dat \u6587\u4ef6, \u76f4\u63a5\u5199\u5165 ring buffer\uff09</li> <li><code>show</code> \uff1a\u663e\u793a Ftrace Linux \u5185\u6838\u8ddf\u8e2a\u7f13\u51b2\u533a\u7684\u5185\u5bb9</li> <li><code>stop</code> \uff1a\u505c\u6b62 Ftrace Linux \u5185\u6838\u8ddf\u8e2a\u7a0b\u5e8f\u5199\u5165\u73af\u5f62\u7f13\u51b2\u533a</li> <li><code>clear</code> \uff1a\u6e05\u9664 Ftrace Linux \u5185\u6838\u8ddf\u8e2a\u7f13\u51b2\u533a\u7684\u5185\u5bb9</li> </ul> </li> <li>\u4f7f\u7528\u65b9\u6cd5<ol> <li>\u5148 <code>trace-cmd start [OPTIONS]</code></li> <li>\u5728 <code>trace-cmd show [OPTIONS]</code></li> <li>\u6700\u540e <code>trace-cmd stop [OPTIONS]</code></li> <li>\u53ef\u9009 <code>trace-cmd clear [OPTIONS]</code></li> </ol> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>\u279c  trace-cmd start  -p function\nplugin 'function'\n\u279c  trace-cmd show |head -20\n# tracer: function\n#\n# entries-in-buffer/entries-written: 205044/1161319   #P:4\n#\n#                                _-----=&gt; irqs-off\n#                               / _----=&gt; need-resched\n#                              | / _---=&gt; hardirq/softirq\n#                              || / _--=&gt; preempt-depth\n#                              ||| /     delay\n#           TASK-PID     CPU#  ||||   TIMESTAMP  FUNCTION\n#              | |         |   ||||      |         |\nbash-4376    [000] ...1 10839.329183: seccomp_filter_release &lt;-release_task\n            bash-4376    [000] ...1 10839.329183: __seccomp_filter_orphan &lt;-seccomp_filter_release\n            bash-4376    [000] ...1 10839.329183: __put_seccomp_filter &lt;-release_task\n            bash-4376    [000] ...1 10839.329183: proc_flush_pid &lt;-release_task\n            bash-4376    [000] ...1 10839.329183: proc_invalidate_siblings_dcache &lt;-release_task\n            bash-4376    [000] ...1 10839.329184: __rcu_read_lock &lt;-proc_invalidate_siblings_dcache\n            bash-4376    [000] ...1 10839.329184: __rcu_read_unlock &lt;-release_task\n            bash-4376    [000] ...1 10839.329184: put_pid &lt;-release_task\n            bash-4376    [000] ...1 10839.329184: put_pid.part.0 &lt;-release_task\n\u279c  trace-cmd stop\n\u279c  trace-cmd clear\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf/","title":"perf","text":"<ul> <li> <p>\u5b98\u65b9\u6587\u6863</p> </li> <li> <p>https://www.coonote.com/vim-note/perf-usage.html</p> </li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf/#1-perf","title":"1 \u5b89\u88c5 perf","text":"<ul> <li>yum\u5b89\u88c5\uff1a<code>yum install -y perf</code></li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf/#2-perf","title":"2 perf \u547d\u4ee4","text":"\u547d\u4ee4 \u63cf\u8ff0 annotate \u8bfb\u53d6perf.data\uff08\u7531perf record\u521b\u5efa\uff09\u5e76\u663e\u793a\u6ce8\u91ca\u8fc7\u7684\u4ee3\u7801 diff \u8bfb\u53d6\u4e24\u4e2aperf.data\u6587\u4ef6\u5e76\u663e\u793a\u4e24\u4efd\u5256\u6790\u4fe1\u606f\u4e4b\u95f4\u7684\u5dee\u5f02 evlist \u5217\u51fa\u4e00\u4e2aperf.data\u6587\u4ef6\u91cc\u7684\u4e8b\u4ef6\u540d\u79f0 inject \u8fc7\u6ee4\u4ee5\u52a0\u5f3a\u4e8b\u4ef6\u6d41\uff0c\u5728\u5176\u4e2d\u52a0\u5165\u989d\u5916\u7684\u4fe1\u606f kmem \u8ddf\u8e2a/\u6d4b\u91cf\u5185\u6838\u5185\u5b58\uff08slab\uff09\u5c5e\u6027\u7684\u5de5\u5177 kvm \u8ddf\u8e2a/\u6d4b\u91cfkvm\u5ba2\u6237\u673a\u64cd\u4f5c\u7cfb\u7edf\u7684\u5de5\u5177 list \u5217\u51fa\u6240\u6709\u7684\u7b26\u53f7\u4e8b\u4ef6\u7c7b\u578b\uff0c\u5176\u4e2d\u6027\u80fd\u4e8b\u4ef6\u7684\u5305\u62ec\uff1a<code>Hardware event\u3001Software event\u3001Hardware cache event\u3001tracepoint\uff1aTracepoint event</code>\u3002 Hardware Event \u662f\u7531 PMU \u786c\u4ef6\u4ea7\u751f\u7684\u4e8b\u4ef6\uff0c\u6bd4\u5982 cache \u547d\u4e2d\uff0c\u5f53\u60a8\u9700\u8981\u4e86\u89e3\u7a0b\u5e8f\u5bf9\u786c\u4ef6\u7279\u6027\u7684\u4f7f\u7528\u60c5\u51b5\u65f6\uff0c\u4fbf\u9700\u8981\u5bf9\u8fd9\u4e9b\u4e8b\u4ef6\u8fdb\u884c\u91c7\u6837\uff1b Software Event \u662f\u5185\u6838\u8f6f\u4ef6\u4ea7\u751f\u7684\u4e8b\u4ef6\uff0c\u6bd4\u5982\u8fdb\u7a0b\u5207\u6362\uff0ctick \u6570\u7b49 ; Tracepoint event \u662f\u5185\u6838\u4e2d\u7684\u9759\u6001 tracepoint \u6240\u89e6\u53d1\u7684\u4e8b\u4ef6\uff0c\u8fd9\u4e9b tracepoint \u7528\u6765\u5224\u65ad\u7a0b\u5e8f\u8fd0\u884c\u671f\u95f4\u5185\u6838\u7684\u884c\u4e3a\u7ec6\u8282\uff0c\u6bd4\u5982 slab \u5206\u914d\u5668\u7684\u5206\u914d\u6b21\u6570\uff0c\u7cfb\u7edf\u8c03\u7528\uff0cTCP\u4e8b\u4ef6\uff0c\u6587\u4ef6\u7cfb\u7edfIO\u4e8b\u4ef6\uff0c\u5757\u8bbe\u5907\u4e8b\u4ef6\u7b49\u3002 lock \u5206\u6790\u9501\u4e8b\u4ef6 probe \u5b9a\u4e49\u65b0\u7684\u52a8\u6001\u8ddf\u8e2a\u70b9 record \u8fd0\u884c\u4e00\u4e2a\u547d\u4ee4\uff0c\u6536\u96c6\u91c7\u6837\u4fe1\u606f\uff0c\u5e76\u628a\u5256\u6790\u4fe1\u606f\u8bb0\u5f55\u5728perf.data\u4e2d report \u8bfb\u53d6perf.data(\u7531perf record\u521b\u5efa)\u5e76\u663e\u793a\u5256\u6790\u4fe1\u606f sched \u8ddf\u8e2a/\u6d4b\u91cf\u8c03\u5ea6\u5668\u5c5e\u6027\uff08\u5ef6\u65f6\uff09\u7684\u5de5\u5177 script \u8bfb\u53d6perf.data\uff08\u7531perf record\u521b\u5efa\uff09\u5e76\u663e\u793a\u8ddf\u8e2a\u8f93\u51fa stat \u8fd0\u884c\u4e00\u4e2a\u547d\u4ee4\u5e76\u6536\u96c6\u6027\u80fd\u8ba1\u6570\u5668\u7edf\u8ba1\u4fe1\u606f\uff0c\u7528\u4e8e\u5206\u6790\u6307\u5b9a\u7a0b\u5e8f\u7684\u6027\u80fd\u6982\u51b5\u3002task-clock\uff1a\u4efb\u52a1\u771f\u6b63\u5360\u7528\u7684\u5904\u7406\u5668\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3ams\u3002 context-switches\uff1a\u4e0a\u4e0b\u6587\u7684\u5207\u6362\u6b21\u6570\u3002 CPU-migrations\uff1a\u5904\u7406\u5668\u8fc1\u79fb\u6b21\u6570\u3002Linux\u4e3a\u4e86\u7ef4\u6301\u591a\u4e2a\u5904\u7406\u5668\u7684\u8d1f\u8f7d\u5747\u8861\uff0c\u5728\u7279\u5b9a\u6761\u4ef6\u4e0b\u4f1a\u5c06\u67d0\u4e2a\u4efb\u52a1\u4ece\u4e00\u4e2aCPU\u8fc1\u79fb\u5230\u53e6\u4e00\u4e2aCPU\u3002 page-faults\uff1a\u7f3a\u9875\u5f02\u5e38\u7684\u6b21\u6570\u3002\u5f53\u5e94\u7528\u7a0b\u5e8f\u8bf7\u6c42\u7684\u9875\u9762\u5c1a\u672a\u5efa\u7acb\u3001\u8bf7\u6c42\u7684\u9875\u9762\u4e0d\u5728\u5185\u5b58\u4e2d\uff0c\u6216\u8005\u8bf7\u6c42\u7684\u9875\u9762\u867d\u7136\u5728\u5185\u5b58\u4e2d\uff0c\u4f46\u7269\u7406\u5730\u5740\u548c\u865a\u62df\u5730\u5740\u7684\u6620\u5c04\u5173\u7cfb\u5c1a\u672a\u5efa\u7acb\u65f6\uff0c\u90fd\u4f1a\u89e6\u53d1\u4e00\u6b21\u7f3a\u9875\u5f02\u5e38\u3002 cycles\uff1a\u6d88\u8017\u7684\u5904\u7406\u5668\u5468\u671f\u6570\u3002 instructions\uff1a\u6267\u884c\u4e86\u591a\u5c11\u6761\u6307\u4ee4\u3002IPC\u4e3a\u5e73\u5747\u6bcf\u4e2acpu cycle\u6267\u884c\u4e86\u591a\u5c11\u6761\u6307\u4ee4\u3002 branches\uff1a\u9047\u5230\u7684\u5206\u652f\u6307\u4ee4\u6570\u3002branch-misses\u662f\u9884\u6d4b\u9519\u8bef\u7684\u5206\u652f\u6307\u4ee4\u6570\u3002 timechart \u53ef\u89c6\u5316\u67d0\u4e00\u4e2a\u8d1f\u8f7d\u671f\u95f4\u7cfb\u7edf\u603b\u4f53\u6027\u80fd\u7684\u5de5\u5177 top \u7cfb\u7edf\u5256\u6790\u5de5\u5177\u3002\u5bf9\u4e8e\u4e00\u4e2a\u6307\u5b9a\u7684\u6027\u80fd\u4e8b\u4ef6(\u9ed8\u8ba4\u662fCPU\u5468\u671f)\uff0c\u663e\u793a\u6d88\u8017\u6700\u591a\u7684\u51fd\u6570\u6216\u6307\u4ee4\u3002perf top\u7c7b\u4f3clinux\u7684top\u547d\u4ee4\uff0c\u53ef\u4ee5\u6392\u5217\u5c55\u793a\u5f53\u673a\u7684\u51fd\u6570\u548c\u6307\u4ee4\u6d88\u8017\u60c5\u51b5\u3002perf top\u4e3b\u8981\u7528\u4e8e\u5b9e\u65f6\u5206\u6790\u5404\u4e2a\u51fd\u6570\u5728\u67d0\u4e2a\u6027\u80fd\u4e8b\u4ef6\u4e0a\u7684\u70ed\u5ea6\uff0c\u80fd\u591f\u5feb\u901f\u7684\u5b9a\u4f4d\u70ed\u70b9\u51fd\u6570\uff0c\u5305\u62ec\u5e94\u7528\u7a0b\u5e8f\u51fd\u6570\u3001\u6a21\u5757\u51fd\u6570\u4e0e\u5185\u6838\u51fd\u6570\uff0c\u751a\u81f3\u80fd\u591f\u5b9a\u4f4d\u5230\u70ed\u70b9\u6307\u4ee4\u3002\u9ed8\u8ba4\u7684\u6027\u80fd\u4e8b\u4ef6\u4e3acpu cycles\u3002 \u7ed3\u679c\u5c55\u793a\uff1a \u7b2c\u4e00\u5217\uff1a\u7b26\u53f7\u5f15\u53d1\u7684\u6027\u80fd\u4e8b\u4ef6\u7684\u6bd4\u4f8b\uff0c\u9ed8\u8ba4\u6307\u5360\u7528\u7684cpu\u5468\u671f\u6bd4\u4f8b\u3002 \u7b2c\u4e8c\u5217\uff1a\u7b26\u53f7\u6240\u5728\u7684DSO(Dynamic Shared Object)\uff0c\u53ef\u4ee5\u662f\u5e94\u7528\u7a0b\u5e8f\u3001\u5185\u6838\u3001\u52a8\u6001\u94fe\u63a5\u5e93\u3001\u6a21\u5757\u3002 \u7b2c\u4e09\u5217\uff1aDSO\u7684\u7c7b\u578b\u3002[.]\u8868\u793a\u6b64\u7b26\u53f7\u5c5e\u4e8e\u7528\u6237\u6001\u7684ELF\u6587\u4ef6\uff0c\u5305\u62ec\u53ef\u6267\u884c\u6587\u4ef6\u4e0e\u52a8\u6001\u94fe\u63a5\u5e93)\u3002[k]\u8868\u8ff0\u6b64\u7b26\u53f7\u5c5e\u4e8e\u5185\u6838\u6216\u6a21\u5757\u3002 \u7b2c\u56db\u5217\uff1a\u7b26\u53f7\u540d\u3002\u6709\u4e9b\u7b26\u53f7\u4e0d\u80fd\u89e3\u6790\u4e3a\u51fd\u6570\u540d\uff0c\u53ea\u80fd\u7528\u5730\u5740\u8868\u793a\u3002 <p>\u5728\u547d\u4ee4\u884c\u4f7f\u7528perf -h\u53ef\u4ee5\u663e\u793aperf\u652f\u6301\u7684\u547d\u4ee4</p> <pre><code>[root@centos7 perf_example]# perf -h\n\nusage: perf [--version] [--help] [OPTIONS] COMMAND [ARGS]\n\nThe most commonly used perf commands are:\n   annotate        Read perf.data (created by perf record) and display annotated code\n   archive         Create archive with object files with build-ids found in perf.data file\n   bench           General framework for benchmark suites\n   buildid-cache   Manage build-id cache.\n   buildid-list    List the buildids in a perf.data file\n   c2c             Shared Data C2C/HITM Analyzer.\n   config          Get and set variables in a configuration file.\n   data            Data file related processing\n   diff            Read perf.data files and display the differential profile\n   evlist          List the event names in a perf.data file\n   ftrace          simple wrapper for kernel's ftrace functionality\n   inject          Filter to augment the events stream with additional information\n   kallsyms        Searches running kernel for symbols\n   kmem            Tool to trace/measure kernel memory properties\n   kvm             Tool to trace/measure kvm guest os\n   list            List all symbolic event types\n   lock            Analyze lock events\n   mem             Profile memory accesses\n   record          Run a command and record its profile into perf.data\n   report          Read perf.data (created by perf record) and display the profile\n   sched           Tool to trace/measure scheduler properties (latencies)\n   script          Read perf.data (created by perf record) and display trace output\n   stat            Run a command and gather performance counter statistics\n   test            Runs sanity tests.\n   timechart       Tool to visualize total system behavior during a workload\n   top             System profiling tool.\n   version         display the version of perf binary\n   probe           Define new dynamic tracepoints\n   trace           strace inspired tool\n\n See 'perf help COMMAND' for more information on a specific command.\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf/#21-perf","title":"2.1 perf \u901a\u7528\u9009\u9879","text":"<ul> <li><code>-p, --pid=</code>\uff1a\u6307\u5b9a\u8bb0\u5f55\u7684\u8fdb\u7a0b\u53f7\uff08\u53ea\u91c7\u96c6\u6b64\u8fdb\u7a0b\u6570\u636e\uff09\uff08\u591a\u4e2a\u7528comma\u5206\u5272\uff09</li> <li><code>-t, --tid=</code>\uff1a\u6307\u5b9a\u8bb0\u5f55\u7684\u9650\u7a0b\u53f7</li> <li><code>-u, --uid=</code>\uff1a\u6307\u5b9a\u76d1\u63a7\u7684\u7528\u6237\uff08\u53ef\u4ee5\u662fid\uff0c\u4e5f\u53ef\u4ee5\u662fname\uff09</li> <li><code>-a, --all-cpu</code>\uff1a\u4ece\u6240\u6709cpu\u4e0a\u91c7\u96c6\u6570\u636e</li> <li><code>-e, --event=</code> \uff1a\u6307\u5b9a PMU\uff08\u5904\u7406\u5668\u76d1\u63a7\u5355\u5143\uff09\u4e8b\u4ef6, \u4e8b\u4ef6\u540e\u53ef\u4ee5\u6307\u5b9a\u7528\u6237\u6001\u3001\u5185\u6838\u6001\u7b49<ul> <li><code>-e &lt;event&gt;:u</code> \uff1a userspace</li> <li><code>-e &lt;event&gt;:k</code> \uff1a kernel</li> <li><code>-e &lt;event&gt;:h</code> \uff1a hypervisor</li> <li><code>-e &lt;event&gt;:G</code> \uff1aguest counting (in KVM guests)</li> <li><code>-e &lt;event&gt;:H</code> \uff1a host counting (not in KVM guests) `</li> </ul> </li> <li><code>-- sleep time</code> \uff1a\u6307\u5b9a perf \u6267\u884c\u591a\u5c11\u79d2 \uff08<code>--</code> \u597d\u50cf\u4e0d\u7528\u4e5f\u53ef\u4ee5\uff09</li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf/#22-perf-record","title":"2.2 perf record","text":"<ul> <li>\u529f\u80fd\uff1a\u8fd0\u884c\u547d\u4ee4\u5e76\u5c06\u5176\u914d\u7f6e\u6587\u4ef6\u8bb0\u5f55\u5230perf.data\u4e2d</li> <li>\u8bed\u6cd5\uff1a<code>perf record [-e &lt;EVENT&gt; | --event=EVENT] [-a] \u2014 &lt;command&gt; [&lt;options&gt;]</code><ul> <li><code>-g</code>\uff1a\u542f\u7528\u8c03\u7528\u56fe\uff08\u5806\u6808\u94fe/\u56de\u6eaf\uff09\u8bb0\u5f55</li> <li><code>--call-graph [fp,dwarf,lbr]</code>\uff1a-g\u9009\u9879\u7b49\u4ef7\u4e8e\u5c31\u662f<code>--call-graph fp</code><ul> <li><code>fp</code>\uff1a\u9700\u8981gcc \u7f16\u8bd1\u65f6\u6307\u5b9a--fomit-frame-pointer</li> <li><code>dwarf</code>\uff1a\u9700\u8981gcc \u7f16\u8bd1\u65f6\u6307\u5b9a-g\uff08\u4e3a\u4e86\u66f4\u597d\u7684\u663e\u793a\uff0c\u4e00\u822c\u4f7f\u7528\u6b64\u53c2\u6570\uff09</li> <li><code>lbr</code>\uff1a\u9700\u8981\u786c\u4ef6\u7ea7cpu\u652f\u6301</li> </ul> </li> <li><code>-F num</code>\uff1a\u8bb0\u5f55\u91c7\u6837\u9891\u7387</li> </ul> </li> <li>\u793a\u4f8b\uff1a\u91c7\u96c6\u6307\u5b9a\u7528\u6237\u4e0b\u6570\u636e</li> </ul> <pre><code>[root@centos7 perf_example]# perf record -u root -a -g -F 99\nWarning:\nUID switch overriding SYSTEM\n</code></pre> <ul> <li>\u793a\u4f8b\uff1a\u91c7\u96c6\u6267\u884c\u7684\u547d\u4ee4\u6570\u636e</li> </ul> <pre><code>[root@centos7 perf_example]# perf record  ls\nperf.data  perf.data.old  test  test.cc\n[ perf record: Woken up 1 times to write data ]\n[ perf record: Captured and wrote 0.013 MB perf.data (2 samples) ]\n</code></pre> <ul> <li>perf report\u663e\u793a\u622a\u56fe </li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf/#23-perf-report","title":"2.3 perf report","text":"<ul> <li>\u529f\u80fd\uff1a\u4eceperf.data\u6587\u4ef6\u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u5206\u6790\u5e76\u4ee5\u754c\u9762\u5c55\u793a</li> <li>\u8bed\u6cd5\uff1a<code>perf report [-i &lt;file&gt; | --input=file]</code><ul> <li><code>-i file</code>\uff1a\u6307\u5b9a\u89e3\u6790\u7684\u6587\u4ef6\uff08\u9ed8\u8ba4\u662fperf.data\uff09</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 perf_example]# perf record -g -a ls\n1  perf.data  perf.data.old  test  test.cc\n[ perf record: Woken up 1 times to write data ]\n[ perf record: Captured and wrote 0.146 MB perf.data (3 samples) ]\n[root@centos7 perf_example]# perf report -g -i perf.data \n</code></pre> <ul> <li>perf report\u663e\u793a\u622a\u56fe </li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf/#24-perf-script","title":"2.4 perf script","text":"<ul> <li>\u529f\u80fd\uff1a\u4eceperf.data\u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u663e\u793atrace\u8f93\u51fa\u6570\u636e</li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 perf_example]# perf script\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf/#25-perf-list","title":"2.5 perf list","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793a\u53ef\u7528\u4e8b\u4ef6</li> <li>\u53ef\u7528\u4e8b\u4ef6\u5982\u4e0b\uff1a</li> </ul> \u4e8b\u4ef6 \u529f\u80fd hw or hardware \u663e\u793a\u786c\u4ef6\u4e8b\u4ef6\uff0c\u6bd4\u5982\uff1acache-misses, etc. sw or software \u663e\u793a\u8f6f\u4ef6\u4e8b\u4ef6\uff0c\u6bd4\u5982\uff1acontext switches, etc. cache or hwcache \u663e\u793a\u786c\u4ef6\u7f13\u5b58\u4e8b\u4ef6\uff0c\u6bd4\u5982\uff1aL1-dcache-loads, etc. tracepoint \u663e\u793a\u8ddf\u8e2a\u70b9\u4e8b\u4ef6, \u6216\u8005\u4f7f\u7528subsys_glob:event_glob\u6309\u8ddf\u8e2a\u70b9\u5b50\u7cfb\u7edf\u8fdb\u884c\u8fc7\u6ee4\uff0c\u6bd4\u5982 sched, block, etc. pmu (Performance Monitoring Unit)\u663e\u793a\u5185\u6838\u63d0\u4f9b\u7684PMU\u4e8b\u4ef6 sdt (Statically Defined Tracepoint)\u663e\u793a\u9759\u6001\u5b9a\u4e49\u8ddf\u8e2a\u70b9\u4e8b\u4ef6 metric to list metrics\uff08\u5ea6\u91cf\u6307\u6807\uff0c\u6bd4\u5982 cpu\u3001\u5185\u5b58\u3001\u7f51\u7edc\u3001io\u3001\u5b58\u50a8\uff09 metricgroup to list metricgroups with metrics."},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf/#26-perf-top","title":"2.6 perf top","text":"<ul> <li>\u529f\u80fd\uff1a\u5b9e\u65f6\u751f\u6210\u5e76\u663e\u793a\u5f53\u524d\u7cfb\u7edf\u6240\u6709\u8fdb\u7a0b\u51fd\u6570\u5360\u7528\u6570\u636e</li> <li>\u8bed\u6cd5\uff1a<code>perf top [-e &lt;EVENT&gt; | --event=EVENT] [&lt;options&gt;]</code></li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf/#27-perf-stat","title":"2.7 perf stat","text":"<pre><code>branchs\u4e8b\u4ef6 \u5728AMD cpu\uff08amd 5900x\u6d4b\u8bd5\uff09\u4e0a\u4e0d\u652f\u6301\uff0c\u9700\u8981intel cpu\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u8fd0\u884c\u547d\u4ee4\u5e76\u6536\u96c6\u6027\u80fd\u8ba1\u6570\u5668\u7edf\u8ba1\u4fe1\u606f</li> <li>\u8bed\u6cd5\uff1a<code>perf stat [-e &lt;EVENT&gt; | --event=EVENT] [-a] &lt;command&gt;</code><ul> <li><code>-C, --cpu=</code> \uff1a\u7edf\u8ba1\u6307\u5b9a\u7684 cpu\uff0c\u9ed8\u8ba4\u5168\u90e8 cpu\uff0c\u683c\u5f0f\u4e3a <code>-C 0,1</code> \u6216\u8005 <code>-C 0-3</code> </li> <li><code>-G name, --cgroup name</code> \uff1a\u6307\u5b9acgroup</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 perf_example]# perf stat ls\n1  perf.data  perf.data.old  test  test.cc\n\n Performance counter stats for 'ls':\n\n              1.16 msec task-clock                #    0.713 CPUs utilized          \n0      context-switches          #    0.000 K/sec                  \n0      cpu-migrations            #    0.000 K/sec                  \n101      page-faults               #    0.087 M/sec                  \n&lt;not supported&gt;      cycles                                                      &lt;not supported&gt;      instructions                                                &lt;not supported&gt;      branches                                                    &lt;not supported&gt;      branch-misses                                               0.001629604 seconds time elapsed\n\n       0.001810000 seconds user\n       0.000000000 seconds sys\n</code></pre> <ul> <li>\u8f93\u51fa\u5217\u89e3\u91ca\uff1a\u901a\u8fc7\u6307\u5b9a -e \u9009\u9879\uff0c\u53ef\u4ee5\u589e\u52a0\u5176\u5b83\u4e8b\u4ef6\u7684\u7edf\u8ba1</li> </ul> \u4e8b\u4ef6 \u529f\u80fd Task-clock-msecs CPU \u5229\u7528\u7387\uff0c\u8be5\u503c\u9ad8\uff0c\u8bf4\u660e\u7a0b\u5e8f\u7684\u591a\u6570\u65f6\u95f4\u82b1\u8d39\u5728 CPU \u8ba1\u7b97\u4e0a\u800c\u975e IO Context-switches \u8fdb\u7a0b\u5207\u6362\u6b21\u6570\uff0c\u8bb0\u5f55\u4e86\u7a0b\u5e8f\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u53d1\u751f\u4e86\u591a\u5c11\u6b21\u8fdb\u7a0b\u5207\u6362\uff0c\u9891\u7e41\u7684\u8fdb\u7a0b\u5207\u6362\u662f\u5e94\u8be5\u907f\u514d\u7684 Cache-misses \u7a0b\u5e8f\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u603b\u4f53\u7684 cache \u5229\u7528\u60c5\u51b5\uff0c\u5982\u679c\u8be5\u503c\u8fc7\u9ad8\uff0c\u8bf4\u660e\u7a0b\u5e8f\u7684 cache \u5229\u7528\u4e0d\u597d CPU-migrations \u8868\u793a\u8fdb\u7a0b t1 \u8fd0\u884c\u8fc7\u7a0b\u4e2d\u53d1\u751f\u4e86\u591a\u5c11\u6b21 CPU \u8fc1\u79fb\uff0c\u5373\u88ab\u8c03\u5ea6\u5668\u4ece\u4e00\u4e2a CPU \u8f6c\u79fb\u5230\u53e6\u5916\u4e00\u4e2a CPU \u4e0a\u8fd0\u884c Cycles \u5904\u7406\u5668\u65f6\u949f\uff0c\u4e00\u6761\u673a\u5668\u6307\u4ee4\u53ef\u80fd\u9700\u8981\u591a\u4e2a cycles branches \u5206\u652f\u6307\u4ee4\u6570 branch misses \u5206\u652f\u9884\u6d4b\u9519\u8bef\u6b21\u6570 Instructions \u673a\u5668\u6307\u4ee4\u6570\u76ee IPC \u662f Instructions/Cycles \u7684\u6bd4\u503c\uff0c\u8be5\u503c\u8d8a\u5927\u8d8a\u597d\uff0c\u8bf4\u660e\u7a0b\u5e8f\u5145\u5206\u5229\u7528\u4e86\u5904\u7406\u5668\u7684\u7279\u6027 Cache-references cache \u547d\u4e2d\u7684\u6b21\u6570 Cache-misses cache \u5931\u6548\u7684\u6b21\u6570"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf/#28-perf-probe","title":"2.8 perf probe","text":"<pre><code>- `-x` \u65b9\u5f0f\u751f\u6210\u7684Tracepoint event\u547d\u4ee4\u683c\u5f0f\uff1aprobe_ + \u4e8c\u8fdb\u5236\u6587\u4ef6\u540d + : + \u51fd\u6570\u540d\n- \u6dfb\u52a0\u4e86\u65b0\u7684tracepoints\u4e8b\u4ef6\u540e\uff0c\u53ef\u4ee5\u7528\u5728record\u3001stat\u7b49\u547d\u4ee4\u4e0a\u9762\uff08\u901a\u8fc7-e \u6307\u5b9a\u4e8b\u4ef6\uff09\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u5b9a\u4e49\u65b0\u7684\u52a8\u6001tracepoints</li> <li>\u8bed\u6cd5\uff1a<code>perf probe [options]</code><ul> <li><code>-a, --add=</code>\uff1a\u5b9a\u4e49\u4e00\u4e2a\u65b0\u7684probe\u4e8b\u4ef6</li> <li><code>-d, --del=</code>\uff1a\u5220\u9664\u4e00\u4e2aprobe\u4e8b\u4ef6</li> <li><code>-x, --exec=PATH</code>\uff1a\u6307\u5b9a\u7528\u4e8e\u7528\u6237\u7a7a\u95f4\u8ddf\u8e2a\u7684\u53ef\u6267\u884c\u6587\u4ef6\u6216\u5171\u4eab\u5e93\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u6dfb\u52a0\u540e\u53ef\u5728/sys/kernel/debug/tracing/uprobe_events \u6587\u4ef6\u4e0b\u67e5\u770buprobe\u4e8b\u4ef6</li> </ul> </li> <li>\u793a\u4f8b\uff1a\u5c06\u6307\u5b9a\u53ef\u6267\u884c\u6587\u4ef6\u4e0b\u51fd\u6570Tracepoint event</li> </ul> <pre><code>[root@centos7 perf_example]# perf probe -x ./test for_loop\nAdded new event:\n  probe_test:for_loop  (on for_loop in /root/perf_example/test)\n\nYou can now use it in all perf tools, such as:\n\n        perf record -e probe_test:for_loop -aR sleep 1\n[root@centos7 perf_example]# perf list |grep probe_test:for_loop\nprobe_test:for_loop                                [Tracepoint event]\n[root@centos7 perf_example]# perf stat -e probe_test:for_loop -ag ./test\npid=2008\n^C./test: Interrupt\n\n Performance counter stats for 'system wide':\n\n                 7      probe_test:for_loop                                         4.556302884 seconds time elapsed\n[root@centos7 perf_example]# cat /sys/kernel/debug/tracing/uprobe_events \np:probe_test/for_loop /root/perf_example/test:0x000000000000064d\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf/#29-perf-trace","title":"2.9 perf trace","text":""},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf/#210-perf-sched","title":"2.10 perf sched","text":"<ul> <li> <p>\u53c2\u8003</p> </li> <li>\u529f\u80fd\uff1aperf sched \u5b50\u547d\u4ee4\u63d0\u4f9b\u4e86\u8bb8\u591a\u7528\u4e8e\u5206\u6790\u5185\u6838 CPU \u8c03\u5ea6\u7a0b\u5e8f\u884c\u4e3a\u7684\u5de5\u5177\u3002</li> <li>\u8bed\u6cd5\uff1a<code>perf sched {record|latency|map|replay|script|timehist}</code></li> <li>\u4f7f\u7528\u65b9\u6cd5 \uff1a<ol> <li>\u5148\u4f7f\u7528 <code>perf record</code> \u4ea7\u751f\u4e8b\u4ef6\u6570\u636e\uff0c\u5982\uff1a<code>perf sched record -- sleep 1</code> </li> <li>\u518d\u4f7f\u7528 <code>perf sched{latency|map|replay|script|timehist}</code> \u8fdb\u884c\u6570\u636e\u5206\u6790\uff0c\u5982\uff1a<code>perf sched timehist</code></li> </ol> </li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf/#2101-perf-sched-report","title":"2.10.1 perf sched report","text":"<ul> <li>\u529f\u80fd\uff1a\u8bb0\u5f55\u4efb\u610f\u5de5\u4f5c\u91cf\u7684\u8c03\u5ea6\u4e8b\u4ef6\u3002</li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf/#2102-perf-sched-script","title":"2.10.2 perf sched script","text":"<ul> <li>\u4f5c\u7528\u540c <code>perf script</code></li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf/#2103-perf-sched-latency","title":"2.10.3 perf sched latency","text":"<pre><code>title: \u4ec0\u4e48\u662f\u8c03\u5ea6\u5ef6\u8fdf\uff1f\u4e3a\u4ec0\u4e48\u4f1a\u6709\u8c03\u5ea6\u5ef6\u8fdf\uff1f\n- \u6240\u8c13\u300c\u8c03\u5ea6\u5ef6\u8fdf\u300d\uff0c\u662f\u6307\u4e00\u4e2a\u4efb\u52a1\u5177\u5907\u8fd0\u884c\u7684\u6761\u4ef6\uff08\u8fdb\u5165 CPU \u7684 runqueue\uff09\uff0c\u5230\u771f\u6b63\u6267\u884c\uff08\u83b7\u5f97 CPU \u7684\u6267\u884c\u6743\uff09\u7684\u8fd9\u6bb5\u65f6\u95f4\u3002\n- \u4e3a\u4ec0\u4e48\u4f1a\u6709\u8c03\u5ea6\u5ef6\u8fdf\u5462\uff1f\u56e0\u4e3a CPU \u8fd8\u88ab\u5176\u4ed6\u4efb\u52a1\u5360\u636e\uff0c\u8fd8\u6ca1\u6709\u7a7a\u51fa\u6765\uff0c\u800c\u4e14\u53ef\u80fd\u8fd8\u6709\u5176\u4ed6\u5728 runqueue \u4e2d\u6392\u961f\u7684\u4efb\u52a1\u3002\n- \u6392\u961f\u7684\u4efb\u52a1\u8d8a\u591a\uff0c\u8c03\u5ea6\u5ef6\u8fdf\u5c31\u53ef\u80fd\u8d8a\u957f\uff0c\u6240\u4ee5\u8fd9\u4e5f\u662f\u95f4\u63a5\u8861\u91cf CPU \u8d1f\u8f7d\u7684\u4e00\u4e2a\u6307\u6807\uff08CPU \u8d1f\u8f7d\u901a\u8fc7\u8ba1\u7b97\u5404\u4e2a\u65f6\u523b runqueue \u4e0a\u7684\u4efb\u52a1\u6570\u91cf\u83b7\u5f97\uff09\u3002\n</code></pre> <ul> <li>\u529f\u80fd\uff1aperf sched latency \u5c06\u6309\u4efb\u52a1\u6c47\u603b\u8c03\u5ea6\u7a0b\u5e8f\u5ef6\u8fdf\uff0c\u5305\u62ec\u5e73\u5747\u548c\u6700\u5927\u5ef6\u8fdf\uff1a</li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf/#2104-perf-sched-map","title":"2.10.4 perf sched map","text":"<ul> <li>\u529f\u80fd\uff1aperf sched map \u663e\u793a\u6240\u6709 CPU \u548c\u4e0a\u4e0b\u6587\u5207\u6362\u4e8b\u4ef6\uff0c\u5176\u4e2d\u7684\u5217\u8868\u793a\u6bcf\u4e2a CPU \u6b63\u5728\u505a\u4ec0\u4e48\u4ee5\u53ca\u4f55\u65f6\u3002</li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf/#2105-perf-sched-replay","title":"2.10.5 perf sched replay","text":"<ul> <li>\u529f\u80fd\uff1aperf sched replay \u5c06\u83b7\u53d6\u8bb0\u5f55\u7684\u8c03\u5ea6\u7a0b\u5e8f\u4e8b\u4ef6\uff0c\u7136\u540e\u901a\u8fc7\u751f\u6210\u5177\u6709\u7c7b\u4f3c\u8fd0\u884c\u65f6\u548c\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u7ebf\u7a0b\u6765\u6a21\u62df\u5de5\u4f5c\u8d1f\u8f7d\u3002\u7528\u4e8e\u6d4b\u8bd5\u548c\u5f00\u53d1\u8c03\u5ea6\u7a0b\u5e8f\u66f4\u6539\u548c\u914d\u7f6e\u3002\u4e0d\u8981\u592a\u76f8\u4fe1\u8fd9\u4e2a\uff08\u548c\u5176\u4ed6\uff09\u5de5\u4f5c\u8d1f\u8f7d\u91cd\u653e\u5668\uff1a\u5b83\u4eec\u53ef\u4ee5\u662f\u4e00\u4e2a\u6709\u7528\u7684\u8d1f\u8f7d\u751f\u6210\u5668\uff0c\u4f46\u5f88\u96be\u5b8c\u5168\u6a21\u62df\u771f\u5b9e\u7684\u5de5\u4f5c\u8d1f\u8f7d\u3002\u5728\u8fd9\u91cc\uff0c\u6211\u4f7f\u7528 -r -1 \u8fd0\u884c\u91cd\u64ad\uff0c\u4ee5\u91cd\u590d\u5de5\u4f5c\u8d1f\u8f7d\u3002</li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf/#2106-perf-sched-timehist","title":"2.10.6 perf sched timehist","text":"<ul> <li>\u529f\u80fd\uff1a\uff08Linux 4.10 \u65b0\u589e\uff09\u6309\u4e8b\u4ef6\u663e\u793a\u8c03\u5ea6\u7a0b\u5e8f\u5ef6\u8fdf\uff0c\u5305\u62ec\u4efb\u52a1\u7b49\u5f85\u88ab\u5524\u9192\u7684\u65f6\u95f4\uff08\u7b49\u5f85\u65f6\u95f4\uff09\u548c\u5524\u9192\u540e\u8fd0\u884c\u7684\u8c03\u5ea6\u7a0b\u5e8f\u5ef6\u8fdf\uff08sch delay\uff09\u3002</li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf/#211-perf-mem","title":"2.11 perf mem","text":"<ul> <li>\u529f\u80fd\uff1a\u5206\u6790\u5185\u5b58\u8bbf\u95ee</li> <li>\u8bed\u6cd5\uff1a<code>perf mem [&lt;options&gt;] (record [&lt;command&gt;] | report)</code></li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf/#212-perf-lock","title":"2.12 perf lock","text":"<pre><code>\u9700\u8981\u5185\u6838\u7f16\u8bd1\u5f00\u542fCONFIG_LOCKDEP \u548c CONFIG_LOCK_STAT\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u5206\u6790\u5404\u79cd\u9501\u5b9a\uff08\u5185\u6838\u9501\uff09\u884c\u4e3a\u548c\u7edf\u8ba1\u4fe1\u606f\u3002</li> <li>\u8bed\u6cd5\uff1a<code>perf lock {record|report|script|info}</code></li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf/#2121-perf-lock-record","title":"2.12.1 perf lock record","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>perf lock record &lt;command&gt;</code>\uff0c\u5982 <code>perf lock record ls</code></li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf/#2122-perf-lock-report","title":"2.12.2 perf lock report","text":""},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf/#2123-perf-lock-script","title":"2.12.3 perf lock script","text":""},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf/#2124-perf-lock-info","title":"2.12.4 perf lock info","text":""},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf/#213-perf-iostat","title":"2.13 perf iostat","text":"<ul> <li>\u8be6\u89c1 man \u624b\u518c</li> </ul> <pre><code>PERF-IOSTAT(1)                                                                                       perf Manual                                                                                      PERF-IOSTAT(1)\n\nNAME\n       perf-iostat - Show I/O performance metrics\n\nSYNOPSIS\n       perf iostat list\n       perf iostat &lt;ports&gt; \u2014 &lt;command&gt; [&lt;options&gt;]\n\nDESCRIPTION\n       Mode is intended to provide four I/O performance metrics per each PCIe root port:\n\n       \u2022   Inbound Read - I/O devices below root port read from the host memory, in MB\n\n       \u2022   Inbound Write - I/O devices below root port write to the host memory, in MB\n\n       \u2022   Outbound Read - CPU reads from I/O devices below root port, in MB\n\n       \u2022   Outbound Write - CPU writes to I/O devices below root port, in MB\n\nOPTIONS\n       &lt;command&gt;...\n           Any command you can specify in a shell.\n\n       list\n           List all PCIe root ports.\n\n       &lt;ports&gt;\n           Select the root ports for monitoring. Comma-separated list is supported.\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>EXAMPLES\n        1. List all PCIe root ports (example for 2-S platform):\n\n               $ perf iostat list\n               S0-uncore_iio_0&lt;0000:00&gt;\n               S1-uncore_iio_0&lt;0000:80&gt;\n               S0-uncore_iio_1&lt;0000:17&gt;\n               S1-uncore_iio_1&lt;0000:85&gt;\n               S0-uncore_iio_2&lt;0000:3a&gt;\n               S1-uncore_iio_2&lt;0000:ae&gt;\n               S0-uncore_iio_3&lt;0000:5d&gt;\n               S1-uncore_iio_3&lt;0000:d7&gt;\n\n        2. Collect metrics for all PCIe root ports:\n\n               $ perf iostat -- dd if=/dev/zero of=/dev/nvme0n1 bs=1M oflag=direct\n               357708+0 records in\n357707+0 records out\n               375083606016 bytes (375 GB, 349 GiB) copied, 215.974 s, 1.7 GB/s\n\n               Performance counter stats for 'system wide':\n\n                  port             Inbound Read(MB)    Inbound Write(MB)    Outbound Read(MB)   Outbound Write(MB)\n0000:00                    1                    0                    2                    3\n0000:80                    0                    0                    0                    0\n0000:17               352552                   43                    0                   21\n0000:85                    0                    0                    0                    0\n0000:3a                    3                    0                    0                    0\n0000:ae                    0                    0                    0                    0\n0000:5d                    0                    0                    0                    0\n0000:d7                    0                    0                    0                    0\n\n3. Collect metrics for comma-separated list of PCIe root ports:\n\n               $ perf iostat 0000:17,0:3a -- dd if=/dev/zero of=/dev/nvme0n1 bs=1M oflag=direct\n               357708+0 records in\n357707+0 records out\n               375083606016 bytes (375 GB, 349 GiB) copied, 197.08 s, 1.9 GB/s\n\n               Performance counter stats for 'system wide':\n\n                  port             Inbound Read(MB)    Inbound Write(MB)    Outbound Read(MB)   Outbound Write(MB)\n0000:17               358559                   44                    0                   22\n0000:3a                    3                    2                    0                    0\n\n197.081983474 seconds time elapsed\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf/#214","title":"2.14 \u6d4b\u8bd5\u4ee3\u7801","text":"<ul> <li>\u7f16\u8bd1\uff1a<code>g++ test.cc -o test</code></li> </ul> <pre><code>// test.cc\n#include &lt;cmath&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\nvoid for_loop()\n{\nfor (int i = 0; i &lt; 1000; i++)\n{\nfor (int j = 0; j &lt; 10000; j++)\n{\nint x = std::sin(i) + std::cos(j);\n}\n}\n}\n\nvoid loopsmall()\n{\nfor (int i = 0; i &lt; 10; i++)\n{\nfor_loop();\n}\n}\n\nvoid loopbig()\n{\nfor (int i = 0; i &lt; 100; i++)\n{\nfor_loop();\n}\n}\n\nint main()\n{\nprintf(\"pid=%d\\n\", getpid());\nloopbig();\nloopsmall();\n\nreturn 0;\n}\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E6%A1%88%E4%BE%8B/","title":"perf \u6027\u80fd\u5206\u6790\u6848\u4f8b","text":""},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E6%A1%88%E4%BE%8B/#1","title":"1 \u5206\u652f\u9884\u6d4b","text":"<ul> <li>\u6570\u7ec4\u6392\u5e8f\u540e\u6bd4\u6392\u5e8f\u524d\u6267\u884c\u66f4\u5feb</li> <li>\u6d4b\u8bd5\u4ee3\u7801</li> </ul> <pre><code>#include &lt;algorithm&gt;\n#include &lt;ctime&gt;\n#include &lt;iostream&gt;\n\nint main() {\n// Generate data\nconst unsigned arraySize = 32768;\nint data[arraySize];\n\nfor (unsigned c = 0; c &lt; arraySize; ++c)\ndata[c] = std::rand() % 256;\n\n// !!! With this, the next loop runs faster.\n// std::sort(data, data + arraySize);\n\n// Test\nclock_t start = clock();\nlong long sum = 0;\nfor (unsigned i = 0; i &lt; 100000; ++i) {\nfor (unsigned c = 0; c &lt; arraySize; ++c) { // Primary loop.\nif (data[c] &gt;= 128)\nsum += data[c];\n}\n}\n\ndouble elapsedTime = static_cast&lt;double&gt;(clock() - start) / CLOCKS_PER_SEC;\n\nstd::cout &lt;&lt; elapsedTime &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"sum = \" &lt;&lt; sum &lt;&lt; '\\n';\n}\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8trace%E6%8A%80%E6%9C%AF/perf/perf%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E6%A1%88%E4%BE%8B/#2","title":"2 \u7f13\u5b58","text":"<ul> <li>\u6d4b\u8bd5\u4ee3\u7801</li> </ul> <pre><code>#include &lt;cstdint&gt;\n#include &lt;cstdio&gt;\n#include &lt;string.h&gt;\nuint32_t g_num = 0;\nvoid sum_array(uint32_t *a, uint32_t *b, uint32_t num) {\nfor (uint32_t i = 0; i &lt; num; ++i) {\ng_num = g_num + a[i] + b[i];\n}\n}\n\nint main() {\nconstexpr uint32_t num = 1024;\nuint32_t a[1024], b[1024];\nmemset(a, 1, num);\nmemset(b, 1, num);\nsum_array(a, b, num);\nprintf(\"sum= [%u]\",g_num);\nreturn 0;\n}\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E3%80%81%E8%B7%9F%E8%B8%AA%E3%80%81%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/pstack/","title":"pstack","text":"<pre><code>pstack \u547d\u4ee4\u5fc5\u987b\u7531\u76f8\u5e94\u8fdb\u7a0b\u7684\u5c5e\u4e3b\u6216 root \u8fd0\u884c\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u6253\u5370\u8fdb\u7a0b\u5f53\u524d\u8c03\u7528\u6808</li> <li>\u5b89\u88c5\uff1apstack\u5de5\u5177\u5728\u5b89\u88c5gdb\u65f6\u9644\u5e26</li> <li>\u4f7f\u7528\u573a\u666f\uff1a\u901a\u5e38\u7528\u4e8e\u6392\u67e5\u5361\u6b7b\u8fdb\u7a0b\u5f53\u524d\u7684\u51fd\u6570\u8c03\u7528\u6808</li> <li>\u8bed\u6cd5\uff1a<code>pstack pid</code></li> <li>\u793a\u4f8b\uff1a\u5f53\u524d\u51fd\u6570\u8c03\u7528\u6808\u4e3a<code>main-&gt;loopbig-&gt;for_loop-&gt;sin-&gt;__sin_avx</code></li> </ul> <pre><code>[root@centos7 ~]# pstack 2826\n#0  0x00007fae01a6600d in __sin_avx () from /lib64/libm.so.6\n#1  0x000000000040072c in __gnu_cxx::__enable_if&lt;std::__is_integer&lt;int&gt;::__value, double&gt;::__type std::sin&lt;int&gt;(int) ()\n#2  0x0000000000400671 in for_loop() ()\n#3  0x00000000004006e0 in loopbig() ()\n#4  0x000000000040070b in main ()\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E3%80%81%E8%B7%9F%E8%B8%AA%E3%80%81%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/strace/","title":"strace","text":"<ul> <li>\u529f\u80fd\uff1a\u8ddf\u8e2a\u7cfb\u7edf\u8c03\u7528\u548c\u4fe1\u53f7</li> <li>\u8bed\u6cd5\uff1a</li> <li><code>strace [option] \u547d\u4ee4</code>:\u8ddf\u8e2a\u6267\u884c\u7684\u547d\u4ee4</li> <li><code>strace [option] -p pid</code>\u8ddf\u8e2a\u6307\u5b9a\u7684\u8fdb\u7a0b</li> <li>\u5e38\u7528\u9009\u9879\uff1a</li> <li><code>-c</code>:\u7edf\u8ba1\u6bcf\u4e00\u7cfb\u7edf\u8c03\u7528\u7684\u6240\u6267\u884c\u7684\u65f6\u95f4,\u6b21\u6570\u548c\u51fa\u9519\u7684\u6b21\u6570\u7b49</li> <li><code>-p [pid]</code>:\u8ddf\u8e2a\u6307\u5b9a\u7684\u8fdb\u7a0bpid</li> <li><code>-o filename</code>:\u5c06\u7ed3\u679c\u8f93\u51fa\u5230\u6587\u4ef6</li> <li><code>-t</code>:\u5728\u6bcf\u4e00\u884c\u524d\u663e\u793a\u65f6\u95f4</li> <li><code>-T</code>:\u5728\u6bcf\u4e00\u884c\u5c3e\u663e\u793a\u82b1\u8d39\u7684\u65f6\u95f4</li> <li><code>-d</code>:\u8f93\u51fastrace\u5173\u4e8e\u6807\u51c6\u9519\u8bef\u7684\u8c03\u8bd5\u4fe1\u606f.</li> <li><code>-f</code>:\u8ddf\u8e2a\u7531fork\u8c03\u7528\u6240\u4ea7\u751f\u7684\u5b50\u8fdb\u7a0b.</li> <li><code>-F</code>:\u5c1d\u8bd5\u8ddf\u8e2avfork\u8c03\u7528.\u5728-f\u65f6,vfork\u4e0d\u88ab\u8ddf\u8e2a.</li> <li><code>-e trace=file|process|network|signal|ipc|...</code>:\u53ea\u8ddf\u8e2a...\u64cd\u4f5c\u7684\u7cfb\u7edf\u8c03\u7528</li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E3%80%81%E8%B7%9F%E8%B8%AA%E3%80%81%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/valgrind/","title":"valgrind","text":"<p>valgrind\u4e00\u6b3e\u5185\u5b58\u68c0\u6d4b\u5de5\u5177\uff0c\u5305\u62ec\u5982\u4e0b\u6a21\u5757 1. Memcheck\uff1a\u662f\u4e00\u4e2a\u5185\u5b58\u9519\u8bef\u68c0\u6d4b\u5668\u3002\u5bf9\u672a\u521d\u59cb\u5316\u5185\u5b58\u7684\u4f7f\u7528\uff1b\u8bfb/\u5199\u91ca\u653e\u540e\u7684\u5185\u5b58\u5757\uff1b\u8bfb/\u5199\u8d85\u51famalloc\u5206\u914d\u7684\u5185\u5b58\u5757\uff1b\u8bfb/\u5199\u4e0d\u9002\u5f53\u7684\u6808\u4e2d\u5185\u5b58\u5757\uff1b\u5185\u5b58\u6cc4\u6f0f\uff0c\u6307\u5411\u4e00\u5757\u5185\u5b58\u7684\u6307\u9488\u6c38\u8fdc\u4e22\u5931\uff1b\u4e0d\u6b63\u786e\u7684malloc/free\u6216new/delete\u5339\u914d\uff1bmemcpy()\u76f8\u5173\u51fd\u6570\u4e2d\u7684dst\u548csrc\u6307\u9488\u91cd\u53e0 2. Cachegrind\uff1a \u662f\u4e00\u4e2a\u7f13\u5b58\u548c\u5206\u652f\u9884\u6d4b\u5206\u6790\u5668\u3002\u5b83\u53ef\u4ee5\u5e2e\u52a9\u60a8\u4f7f\u7a0b\u5e8f\u8fd0\u884c\u5f97\u66f4\u5feb\u3002\u5b83\u6a21\u62dfCPU\u4e2d\u7684\u4e00\u7ea7\u7f13\u5b58I1\uff0cDl\u548c\u4e8c\u7ea7\u7f13\u5b58\uff0c\u80fd\u591f\u7cbe\u786e\u5730\u6307\u51fa\u7a0b\u5e8f\u4e2dcache\u7684\u4e22\u5931\u548c\u547d\u4e2d\u3002\u5982\u679c\u9700\u8981\uff0c\u5b83\u8fd8\u80fd\u591f\u4e3a\u6211\u4eec\u63d0\u4f9bcache\u4e22\u5931\u6b21\u6570\uff0c\u5185\u5b58\u5f15\u7528\u6b21\u6570\uff0c\u4ee5\u53ca\u6bcf\u884c\u4ee3\u7801\uff0c\u6bcf\u4e2a\u51fd\u6570\uff0c\u6bcf\u4e2a\u6a21\u5757\uff0c\u6574\u4e2a\u7a0b\u5e8f\u4ea7\u751f\u7684\u6307\u4ee4\u6570\u3002 3. Callgrind\uff1a \u662f\u4e00\u4e2a\u8c03\u7528\u56fe\u751f\u6210\u7f13\u5b58\u5206\u6790\u5668\u3002\u5b83\u4e0e Cachegrind \u6709\u4e00\u4e9b\u91cd\u53e0\uff0c\u4f46\u4e5f\u6536\u96c6\u4e86\u4e00\u4e9b Cachegrind \u6ca1\u6709\u7684\u4fe1\u606f\u3002 4. Helgrind\uff1a\u662f\u4e00\u4e2a\u7ebf\u7a0b\u9519\u8bef\u68c0\u6d4b\u5668\u3002\u5b83\u53ef\u4ee5\u5e2e\u52a9\u60a8\u4f7f\u60a8\u7684\u591a\u7ebf\u7a0b\u7a0b\u5e8f\u66f4\u6b63\u786e\u3002\u9501\u68c0\u6d4b\u3002Helgrind\u5bfb\u627e\u5185\u5b58\u4e2d\u88ab\u591a\u4e2a\u7ebf\u7a0b\u8bbf\u95ee\uff0c\u800c\u53c8\u6ca1\u6709\u4e00\u8d2f\u52a0\u9501\u7684\u533a\u57df\uff0c\u8fd9\u4e9b\u533a\u57df\u5f80\u5f80\u662f\u7ebf\u7a0b\u4e4b\u95f4\u5931\u53bb\u540c\u6b65\u7684\u5730\u65b9\uff0c\u800c\u4e14\u4f1a\u5bfc\u81f4\u96be\u4ee5\u53d1\u6398\u7684\u9519\u8bef 5. DRD\uff1a\u4e5f\u662f\u4e00\u4e2a\u7ebf\u7a0b\u9519\u8bef\u68c0\u6d4b\u5668\u3002\u5b83\u4e0e Helgrind \u7c7b\u4f3c\uff0c\u4f46\u4f7f\u7528\u4e0d\u540c\u7684\u5206\u6790\u6280\u672f\uff0c\u56e0\u6b64\u53ef\u80fd\u4f1a\u53d1\u73b0\u4e0d\u540c\u7684\u95ee\u9898\u3002 6. Massif\uff1a\u662f\u4e00\u4e2a\u5806\u5206\u6790\u5668\u3002\u5b83\u80fd\u6d4b\u91cf\u7a0b\u5e8f\u5728\u5806\u6808\u4e2d\u4f7f\u7528\u4e86\u591a\u5c11\u5185\u5b58\uff0c\u544a\u8bc9\u6211\u4eec\u5806\u5757\uff0c\u5806\u7ba1\u7406\u5757\u548c\u6808\u7684\u5927\u5c0f,\u5b83\u53ef\u4ee5\u5e2e\u52a9\u60a8\u4f7f\u7a0b\u5e8f\u4f7f\u7528\u66f4\u5c11\u7684\u5185\u5b58\u3002 7. DHAT\uff1a\u662f\u4e00\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u5806\u5206\u6790\u5668\u3002\u5b83\u53ef\u4ee5\u5e2e\u52a9\u60a8\u4e86\u89e3\u5757\u751f\u547d\u5468\u671f\u3001\u5757\u5229\u7528\u7387\u548c\u5e03\u5c40\u6548\u7387\u4f4e\u4e0b\u7684\u95ee\u9898\u3002 8. BBV\uff1a\u662f\u4e00\u4e2a\u5b9e\u9a8c\u6027\u7684 SimPoint \u57fa\u672c\u5757\u5411\u91cf\u751f\u6210\u5668\u3002\u5b83\u5bf9\u4ece\u4e8b\u8ba1\u7b97\u673a\u4f53\u7cfb\u7ed3\u6784\u7814\u7a76\u548c\u5f00\u53d1\u7684\u4eba\u5f88\u6709\u7528\u3002</p>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E3%80%81%E8%B7%9F%E8%B8%AA%E3%80%81%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/valgrind/#1","title":"1 \u5b89\u88c5","text":"<ol> <li>\u4e0b\u8f7d\u6e90\u7801\u5305(https://valgrind.org/downloads/current.html)\uff0c\u89e3\u538b\u7f29(tar \u2013jxvf valgrind.tar.bz2)</li> <li>\u6839\u636e\u6e90\u7801\u76ee\u5f55\u4e0b\u7684README\u6587\u4ef6\uff0c\u6e90\u7801\u5b89\u88c5\uff0c\u53ef\u80fd\u9700\u8981\u5b89\u88c5<code>automake</code>\u3001<code>autoconf</code>\u5305<ol> <li><code>yum install -y autoconf automake</code></li> </ol> </li> </ol> <pre><code>To install from the GIT repository:\n\n  0. Clone the code from GIT:\n     git clone git://sourceware.org/git/valgrind.git\n     There are further instructions at\n     http://www.valgrind.org/downloads/repository.html.\n\n  1. cd into the source directory.\n\n  2. Run ./autogen.sh to setup the environment (you need the standard\n     autoconf tools to do so).\n\n  3. Continue with the following instructions...\n\nTo install from a tar.bz2 distribution:\n\n  4. Run ./configure, with some options if you wish.  The only interesting\n     one is the usual --prefix=/where/you/want/it/installed.\n\n  5. Run \"make\".\n\n  6. Run \"make install\", possibly as root if the destination permissions\n     require that.\n\n  7. See if it works.  Try \"valgrind ls -l\".  Either this works, or it\n     bombs out with some complaint.  In that case, please let us know\n     (see http://valgrind.org/support/bug_reports.html).\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E3%80%81%E8%B7%9F%E8%B8%AA%E3%80%81%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/valgrind/#2-valgrind","title":"2 valgrind \u901a\u7528\u547d\u4ee4\u884c\u9009\u9879","text":"<ul> <li>\u8bed\u6cd5:<code>valgrind [valgrind-options] your-prog [your-prog-options]</code> valgrind \u8f93\u51fa\u7684\u7b2c\u4e00\u5217\u662f\u8fdb\u7a0b\u53f7\uff0c\u7b2c2\u5217\u662f\u68c0\u6d4b\u4fe1\u606f,\u5982\u8f93\u51fa\u7ed3\u679c</li> </ul> <pre><code>==12345== some-message-from-Valgrind\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E3%80%81%E8%B7%9F%E8%B8%AA%E3%80%81%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/valgrind/#21-tool","title":"2.1 --tool","text":"<ul> <li>\u529f\u80fd\uff1a\u6307\u5b9a\u4f7f\u7528\u7684valigrind\u63d0\u4f9b\u7684\u54ea\u4e00\u79cd\u5de5\u5177\uff0c<code>memcheck</code>(\u9ed8\u8ba4)\uff0c<code>cachegrind</code>, <code>callgrind</code>, <code>helgrind</code>, <code>drd</code>, <code>massif</code>, <code>dhat</code>, <code>lackey</code></li> <li>\u683c\u5f0f\uff1a<code>--tool=&lt;toolname&gt; [default: memcheck]</code></li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E3%80%81%E8%B7%9F%E8%B8%AA%E3%80%81%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/valgrind/#22-trace-children","title":"2.2 --trace-children","text":"<pre><code>title: \u5176\u5b9e\u662f\u8ddf\u8e2aexec\u8c03\u7528\u7684\u7a0b\u5e8f\uff0c\u800c\u4e0d\u662f\u5b50\u8fdb\u7a0b\nNote that Valgrind does trace into the child of a\u00a0`fork`\u00a0(it would be difficult not to, since\u00a0`fork`\u00a0makes an identical copy of a process), so this option is arguably badly named. However, most children of\u00a0`fork`\u00a0calls immediately call\u00a0`exec`\u00a0anyway.\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u8ddf\u8e2a\u5b50\u8fdb\u7a0b\uff08exec system call\uff09\uff0c\u5728\u591a\u8fdb\u7a0b\u4e2d\u5f00\u542f</li> <li>\u683c\u5f0f\uff1a<code>--trace-children=&lt;yes|no&gt; [default: no]</code></li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E3%80%81%E8%B7%9F%E8%B8%AA%E3%80%81%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/valgrind/#23-time-stamp","title":"2.3 --time-stamp","text":"<ul> <li>\u529f\u80fd\uff1a\u6bcf\u6761\u6d88\u606f\u524d\u9762\u90fd\u4f1a\u663e\u793a\u81ea\u542f\u52a8\u4ee5\u6765\u7ecf\u8fc7\u7684\u6302\u949f\u65f6\u95f4\uff0c\u6ca1\u5b57\u6bb5\u5206\u522b\u662f\u00a0days, hours, minutes, seconds and milliseconds</li> <li>\u683c\u5f0f\uff1a<code>--time-stamp=&lt;yes|no&gt; [default: no]</code></li> <li>\u793a\u4f8b\uff1a\u4e0b\u9762257\u662f\u6beb\u79d2\uff0c\u524d\u9762\u768400\uff0c\u5206\u522b\u662f\u00a0days, hours, minutes, seconds </li> </ul> <pre><code>[root@centos7 Valgrind]# valgrind --time-stamp=yes ./a.out \n...\n==00:00:00:00.000 1597== Command: ./a.out\n==00:00:00:00.000 1597== ==00:00:00:00.257 1597== Invalid write of size 4\n==00:00:00:00.257 1597==    at 0x40054E: f() (test.cc:6)\n==00:00:00:00.257 1597==    by 0x40055E: main (test.cc:11)\n...\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E3%80%81%E8%B7%9F%E8%B8%AA%E3%80%81%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/valgrind/#24-track-fds","title":"2.4 --track-fds","text":"<ul> <li>\u529f\u80fd\uff1a</li> <li>\u683c\u5f0f\uff1a</li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E3%80%81%E8%B7%9F%E8%B8%AA%E3%80%81%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/valgrind/#25-log-fd","title":"2.5 --log-fd","text":"<ul> <li>\u529f\u80fd\uff1a\u6307\u5b9avalgrind\u5c06\u6240\u6709\u6d88\u606f\u53d1\u9001\u5230\u6307\u5b9a\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26</li> <li>\u683c\u5f0f\uff1a<code>--log-fd=&lt;number&gt; [default: 2, stderr]</code></li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E3%80%81%E8%B7%9F%E8%B8%AA%E3%80%81%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/valgrind/#26-log-file","title":"2.6 --log-file","text":"<ul> <li>\u529f\u80fd\uff1a\u6307\u5b9avalgrind\u5c06\u6240\u6709\u6d88\u606f\u5199\u5165\u5230\u6307\u5b9a\u7684\u6587\u4ef6\u4e2d</li> <li>\u683c\u5f0f\uff1a<code>--log-file=&lt;filename&gt;</code>,\u5176\u4e2d\u652f\u6301\u4ee5\u4e0b\u51e0\u4e2a\u683c\u5f0f<ul> <li><code>%p</code>\uff1a\u8868\u793a\u8fdb\u7a0bid\uff0c\u901a\u5e38\u5728\u591a\u8fdb\u7a0b\u4e2d\u5f88\u6709\u7528\uff0c\u591a\u4e2a\u8fdb\u7a0b\u7684\u6d88\u606f\u5206\u522b\u5199\u5165\u81ea\u5df1\u7684\u6587\u4ef6\u4e2d</li> <li><code>%n</code>\uff1a\u88ab\u66ff\u6362\u4e3a\u6b64\u8fdb\u7a0b\u552f\u4e00\u7684\u6587\u4ef6\u5e8f\u5217\u53f7\u3002\u8fd9\u5bf9\u4e8e\u4ece\u540c\u4e00\u6587\u4ef6\u540d\u6a21\u677f\u751f\u6210\u591a\u4e2a\u6587\u4ef6\u7684\u8fdb\u7a0b\u5f88\u6709\u7528\u3002</li> </ul> </li> </ul> <pre><code>[root@centos7 Valgrind]# valgrind --log-file=file-%p ls\n[root@centos7 Valgrind]# ll file*\n-rw-r--r--. 1 root root 915 Aug  7 20:12 file-2291\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E3%80%81%E8%B7%9F%E8%B8%AA%E3%80%81%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/valgrind/#27-log-socket","title":"2.7 --log-socket","text":"<ul> <li>\u529f\u80fd\uff1a\u5c06\u8f93\u51fa\u5199\u5165\u6307\u5b9a\u7684socket\u4e0a\uff0c\u5982\u679c\u4e0d\u6307\u5b9a\u7aef\u53e3\uff0c\u9ed8\u8ba4\u662f1500\u3002\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528valgrind-listener \u6765\u76d1\u542c\u5ba2\u6237\u7aefvalgrind\u53d1\u9001\u8fc7\u6765\u7684\u4fe1\u606f</li> <li>\u683c\u5f0f\uff1a<code>--log-socket=&lt;ip-address:port-number&gt;</code></li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E3%80%81%E8%B7%9F%E8%B8%AA%E3%80%81%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/valgrind/#28-vgdb","title":"2.8 --vgdb","text":"<pre><code>\u5177\u4f53\u64cd\u4f5c\u89c1\uff08https://valgrind.org/docs/manual/manual-core-adv.html#manual-core-adv.gdbserver\uff09\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u5141\u8bb8\u5916\u90e8 GNU GDB \u8c03\u8bd5\u5668\u5728 Valgrind \u4e0a\u8fd0\u884c\u65f6\u63a7\u5236\u548c\u8c03\u8bd5\u7a0b\u5e8f</li> <li>\u683c\u5f0f\uff1a<code>--vgdb=&lt;no|yes|full&gt; [default: yes]</code></li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E3%80%81%E8%B7%9F%E8%B8%AA%E3%80%81%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/valgrind/#29-main-stacksize","title":"2.9 --main-stacksize","text":"<ul> <li>\u529f\u80fd\uff1a\u6307\u5b9a\u4e3b\u7ebf\u7a0b\u5806\u6808\u7684\u5927\u5c0f\u3002\u9ed8\u8ba4\u4f7f\u7528\u5f53\u524dulimit\u8bbe\u7f6e\u7684\u503c</li> <li>\u683c\u5f0f\uff1a<code>--main-stacksize=&lt;number&gt; [default: use current 'ulimit' value]</code></li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E3%80%81%E8%B7%9F%E8%B8%AA%E3%80%81%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/valgrind/#210-max-threads","title":"2.10 --max-threads","text":"<ul> <li>\u529f\u80fd\uff1a\u6307\u5b9avalgrind\u652f\u6301\u7684\u6700\u5927\u7ebf\u7a0b\u6570\u3002\u9ed8\u8ba4\u662f500\u4e2a\u7ebf\u7a0b</li> <li>\u683c\u5f0f\uff1a<code>--max-threads=&lt;number&gt; [default: 500]</code></li> </ul>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E3%80%81%E8%B7%9F%E8%B8%AA%E3%80%81%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/valgrind/#211-memcheck","title":"2.11 memcheck\u5185\u5b58\u6cc4\u6f0f\u68c0\u6d4b","text":"<p>\u901a\u8fc7\u6307\u5b9a<code>--tool=memcheck</code>\uff08\u9ed8\u8ba4\uff09\u6765\u542f\u7528memcheck - \u9009\u9879   - <code>--leak-check=&lt;no|summary|yes|full&gt; [default: summary]</code>:\u5f53\u8bbe\u7f6e\u6210summary\u65f6\uff0c\u4ec5\u7edf\u8ba1\u5185\u5b58\u6cc4\u6f0f\u6570\u91cf\uff0cyes|full\u4f1a\u663e\u793a\u8be6\u7ec6\u4fe1\u606f   - <code>--show-leak-kinds=&lt;set&gt; [default: definite,possible]</code>:\u6307\u5b9a\u9700\u8981\u663e\u793a\u7684\u5185\u5b58\u6cc4\u6f0f\u7c7b\u578b     - \u53ef\u9009\u7c7b\u578b\u6709:<code>definite indirect possible reachable none all</code>;all\u76f8\u5f53\u4e8e<code>definite indirect possible reachable</code></p>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E3%80%81%E8%B7%9F%E8%B8%AA%E3%80%81%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/valgrind/#3-valgrind-listener","title":"3 valgrind-listener","text":"<ul> <li>\u529f\u80fd\uff1a\u76d1\u542c\u6765\u81eavalgrind\u901a\u8fc7socket\u53d1\u9001\u8fc7\u6765\u7684\u4fe1\u606f</li> <li>\u8bed\u6cd5\uff1a<code>valgrind-listener [options]</code><ul> <li><code>-e --exit-at-zero</code>\uff1a\u5f53\u8fde\u63a5\u7684\u8fdb\u7a0b\u6570\u56de\u843d\u5230\u96f6\u65f6\uff0c\u9000\u51fa\u3002\u6ca1\u6709\u8fd9\u4e2a\uff0c\u5b83\u5c06\u6c38\u8fdc\u8fd0\u884c\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u76f4\u5230\u4f60\u53d1\u9001\u5b83 ctrl+c\u3002</li> <li><code>--max-connect=\u6574\u6570</code>\uff1a\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u76d1\u542c\u5668\u6700\u591a\u53ef\u4ee5\u8fde\u63a5 50 \u4e2a\u8fdb\u7a0b\u3002\u6709\u65f6\uff0c\u8fd9\u4e2a\u6570\u5b57\u592a\u5c0f\u4e86\u3002\u4f7f\u7528\u6b64\u9009\u9879\u53ef\u63d0\u4f9b\u4e0d\u540c\u7684\u9650\u5236\u3002\u4f8b\u5982\u3002 --\u6700\u5927\u8fde\u63a5=100\u3002</li> <li><code>portnumber</code>\uff1a\u5c06\u5176\u4fa6\u542c\u7684\u7aef\u53e3\u4ece\u9ed8\u8ba4\u503c (1500) \u66f4\u6539\u3002\u6307\u5b9a\u7684\u7aef\u53e3\u5fc5\u987b\u5728 1024 \u5230 65535 \u7684\u8303\u56f4\u5185\u3002\u540c\u6837\u7684\u9650\u5236\u9002\u7528\u4e8e\u7531 --log-socket \u6307\u5b9a\u5230 Valgrind \u672c\u8eab\u7684\u7aef\u53e3\u53f7\u3002</li> </ul> </li> <li>\u793a\u4f8b\u6b65\u9aa4<ol> <li>\u5148\u542f\u52a8\u4e00\u4e2a\u7ec8\u7aef\uff0c\u542f\u52a8\u76d1\u542c<code>valgrind-listener</code></li> <li>\u5728\u542f\u52a8\u4e00\u4e2a\u7ec8\u7aef\uff0c\u542f\u52a8valgrind\u68c0\u67e5\uff0c\u6bd4\u5982<code>valgrind --log-socket=192.168.211.7 ls</code></li> <li>\u67e5\u770b\u7ec8\u7aef1\u662f\u5426\u63a5\u6536\u5230\u6765\u81ea\u7ec8\u7aef2\u53d1\u9001\u7684\u4fe1\u606f</li> </ol> </li> </ul> <pre><code>### \u7ec8\u7aef2\uff0c\u542f\u52a8valgrind\u68c0\u67e5ls\n[root@centos7 Valgrind]# valgrind --log-socket=192.168.211.7 ls \n### \u7ec8\u7aef1\uff0c\u542f\u52a8\u76d1\u542c\uff0c\u5f53\u7ec8\u7aef2\u6267\u884c\u547d\u4ee4\u540e\uff0c\u7ec8\u7aef1\u6536\u5230\u6d88\u606f\n[root@centos7 ~]# valgrind-listener \nvalgrind-listener started at Sun Aug  7 22:40:55 2022\n\n(1) -------------------- CONNECT --------------------\n(1)\n(1) ==2683== Memcheck, a memory error detector\n(1) ==2683== Copyright (C) 2002-2022, and GNU GPL'd, by Julian Seward et al.\n(1) ==2683== Using Valgrind-3.19.0 and LibVEX; rerun with -h for copyright info\n(1) ==2683== Command: ls\n(1) ==2683== (1) ==2683== (1) ==2683== HEAP SUMMARY:\n(1) ==2683==     in use at exit: 19,916 bytes in 10 blocks\n(1) ==2683==   total heap usage: 44 allocs, 34 frees, 56,463 bytes allocated\n(1) ==2683== (1) ==2683== LEAK SUMMARY:\n(1) ==2683==    definitely lost: 0 bytes in 0 blocks\n(1) ==2683==    indirectly lost: 0 bytes in 0 blocks\n(1) ==2683==      possibly lost: 0 bytes in 0 blocks\n(1) ==2683==    still reachable: 19,916 bytes in 10 blocks\n(1) ==2683==         suppressed: 0 bytes in 0 blocks\n(1) ==2683== Rerun with --leak-check=full to see details of leaked memory\n(1) ==2683== (1) ==2683== For lists of detected and suppressed errors, rerun with: -s\n(1) ==2683== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n(1) (0) ------------------- DISCONNECT -------------------\n(0)\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E3%80%81%E8%B7%9F%E8%B8%AA%E3%80%81%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/valgrind/#4-valgrind","title":"4 valgrind \u4f7f\u7528\u6ce8\u610f\u4e8b\u9879","text":"<ol> <li>\u60a8\u5e94\u8be5\u5728\u6b64\u5904\u8fd0\u884c\u771f\u6b63\u7684\uff08\u673a\u5668\u4ee3\u7801\uff09\u53ef\u6267\u884c\u6587\u4ef6\u3002\u4f8b\u5982\uff0c\u5982\u679c\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u662f\u7531 shell \u6216 Perl \u811a\u672c\u542f\u52a8\u7684\uff0c\u5219\u9700\u8981\u5bf9\u5176\u8fdb\u884c\u4fee\u6539\u4ee5\u5728\u771f\u6b63\u7684\u53ef\u6267\u884c\u6587\u4ef6\u4e0a\u8c03\u7528 Valgrind\u3002\u76f4\u63a5\u5728 Valgrind \u4e0b\u8fd0\u884c\u6b64\u7c7b\u811a\u672c\u5c06\u5bfc\u81f4\u60a8\u6536\u5230\u4e0e /bin/sh\u3001/usr/bin/perl \u6216\u60a8\u6b63\u5728\u4f7f\u7528\u7684\u4efb\u4f55\u89e3\u91ca\u5668\u6709\u5173\u7684\u9519\u8bef\u62a5\u544a\u3002\u8fd9\u53ef\u80fd\u4e0d\u662f\u60a8\u60f3\u8981\u7684\u5e76\u4e14\u53ef\u80fd\u4f1a\u9020\u6210\u6df7\u6dc6\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7\u63d0\u4f9b\u9009\u9879 --trace-children=yes \u6765\u5f3a\u5236\u89e3\u51b3\u6b64\u95ee\u9898\uff0c\u4f46\u4ecd\u6709\u53ef\u80fd\u9020\u6210\u6df7\u6dc6</li> </ol>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E3%80%81%E8%B7%9F%E8%B8%AA%E3%80%81%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E6%A0%88%E5%AE%9E%E7%8E%B0/","title":"\u51fd\u6570\u8c03\u7528\u6808\u5b9e\u73b0","text":"<pre><code>\u5728\u7f16\u8bd1\u65f6\u9700\u8981\u52a0\u4e0a\u9009\u9879 -g -rdynamic\n</code></pre> <ul> <li>\u53c2\u8003\u535a\u5ba2</li> <li>\u4ee3\u7801</li> </ul> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;execinfo.h&gt;\n#include &lt;malloc.h&gt;\n#include &lt;cxxabi.h&gt;\nvoid printCallStack_simple()\n{\nint size = 16;                                 // \u6700\u591a\u6253\u537016\u5c42\u8c03\u7528\u6808\n    void *buffer[size];                            // \u7528\u4e8e\u5b58\u653e\u8c03\u7528\u6808\u4fe1\u606f\n    int count = backtrace(buffer, size);           // \u83b7\u53d6\u8c03\u7528\u6808\n    char **ptr = backtrace_symbols(buffer, count); // \u5c06\u8c03\u7528\u6808\u4fe1\u606f\u8f6c\u6210\u5b57\u7b26\u4e32\n    for (int i = 0; i &lt; count; i++)\n{ // \u6253\u5370\u5b57\u7b26\u4e32\n        printf(\"%s\", ptr[i]);\n}\nfree(ptr); // \u91ca\u653e\u5206\u914d\u7684\u5185\u5b58\n}\nvoid printCallStack()\n{\nvoid *buffer[100] = {NULL};\nchar **trace = NULL;\nint size = backtrace(buffer, 100);\ntrace = backtrace_symbols(buffer, size);\nif (NULL == trace)\n{\nreturn;\n}\n\nsize_t name_size = 100;\nchar *name = (char *)malloc(name_size);\nfor (int i = 0; i &lt; size; ++i)\n{\nchar *begin_name = 0;\nchar *begin_offset = 0;\nchar *end_offset = 0;\nfor (char *p = trace[i]; *p; ++p)\n{ // \u5229\u7528\u4e86\u7b26\u53f7\u4fe1\u606f\u7684\u683c\u5f0f\n            if (*p == '(')\n{ // \u5de6\u62ec\u53f7\n                begin_name = p;\n}\nelse if (*p == '+' &amp;&amp; begin_name)\n{ // \u5730\u5740\u504f\u79fb\u7b26\u53f7\n                begin_offset = p;\n}\nelse if (*p == ')' &amp;&amp; begin_offset)\n{ // \u53f3\u62ec\u53f7\n                end_offset = p;\nbreak;\n}\n}\nif (begin_name &amp;&amp; begin_offset &amp;&amp; end_offset)\n{\n*begin_name++ = '\\0';\n*begin_offset++ = '\\0';\n*end_offset = '\\0';\nint status = -4; // 0 -1 -2 -3\n            char *ret = abi::__cxa_demangle(begin_name, name, &amp;name_size, &amp;status);\nif (0 == status)\n{\nname = ret;\nprintf(\"%s:%s+%s\\n\", trace[i], name, begin_offset);\n}\nelse\n{\nprintf(\"%s:%s()+%s\\n\", trace[i], begin_name, begin_offset);\n}\n}\nelse\n{\nprintf(\"%s\\n\", trace[i]);\n}\n}\nfree(name);\nfree(trace);\nprintf(\"----------done----------\\n\");\n}\nvoid test3(int n) { printCallStack(); }\nvoid test2(int n) { test3(3); }\nvoid test1(int n) { test2(2); }\nint main()\n{\ntest1(1);\n}\n</code></pre> <ul> <li>\u7f16\u8bd1\u6267\u884c\u7ed3\u679c</li> </ul> <pre><code>[root@centos7 ~]# g++ -g -rdynamic test_trace.cc \n[root@centos7 ~]# ./a.out \n./a.out:printCallStack2()+0x41\n./a.out:test3(int)+0x10\n./a.out:test2(int)+0x15\n./a.out:test1(int)+0x15\n./a.out:main()+0xe\n/lib64/libc.so.6:__libc_start_main()+0xf5\n./a.out() [0x400969]\n----------done----------\n</code></pre>"},{"location":"Documents/A-Linux/%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E3%80%81%E8%B7%9F%E8%B8%AA%E3%80%81%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E7%BA%BF%E7%A8%8B%E6%95%B0%E5%92%8Ccpu%E7%9A%84%E5%85%B3%E7%B3%BB/","title":"\u7a0b\u5e8f\u7ebf\u7a0b\u6570\u548ccpu\u7684\u5173\u7cfb","text":"<ul> <li>\u53c2\u8003</li> <li>\u4e00\u822c\u8ba1\u7b97\u516c\u5f0f\u4e3a\uff1a $$\u7ebf\u7a0b\u6570 = CPU \u6838\u5fc3\u6570 \\times \\left ( 1 + \\frac{IO \u8017\u65f6}{CPU \u8017\u65f6} \\right ) $$</li> </ul>"},{"location":"Documents/A-Linux/%E6%80%A7%E8%83%BD/%E5%BC%82%E6%AD%A5io/","title":"\u5f02\u6b65 io","text":""},{"location":"Documents/A-Linux/%E6%80%A7%E8%83%BD/%E5%BC%82%E6%AD%A5io/#1-posix-aio-linux-aio","title":"1 posix aio \u548c linux aio","text":"<ul> <li>\u53c2\u8003</li> </ul> <pre><code>title: posix aio \u548c linux aio\u533a\u522b\uff1f\n- posix aio\uff08glibc_aio\uff09\u662fglibc \u5728\u7528\u6237\u6001\u7528 pthread \u5b9e\u73b0\u7684\uff0c\u91c7\u7528\u591a\u7ebf\u7a0b\u6a21\u62df\u3002\n- linux aio\uff08libaio\uff09\u662f\u5728\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u6001\u5b9e\u73b0\u7684\uff0c\u53ea\u80fd\u4ee5 O_DIRECT \u65b9\u5f0f\u505a\u76f4\u63a5 IO\u3002\n</code></pre> <ul> <li>Posix aio \u7279\u70b9<ul> <li>it works with any filesystem</li> <li>it works (essentially) on any operating system (keep in mind that gnu's libc is portable)</li> <li>it works on files with buffering enabled (i.e. no O_DIRECT flag set)</li> </ul> </li> </ul>"},{"location":"Documents/A-Linux/%E6%80%A7%E8%83%BD/%E5%BC%82%E6%AD%A5io/#2-io_uring","title":"2 io_uring","text":"<ul> <li>\u53c2\u8003</li> <li>\u53c2\u80032</li> <li>\u539f\u6587An Introduction to the io_uring Asynchronous I/O Framework</li> <li>Linux \u5f02\u6b65 I/O \u6846\u67b6 io_uring\uff1a\u57fa\u672c\u539f\u7406\u3001\u7a0b\u5e8f\u793a\u4f8b\u4e0e\u6027\u80fd</li> </ul> <pre><code>*io_uring* \u662f\u00a0Linux Kernel 5.1 \u4ee5\u540e\u5f15\u5165\u7684\u65b0\u7684 AIO \u65b9\u5f0f\u3002\u7531*Block IO\u5927\u795e\u4e5f\u5373Fio\u4f5c\u8005Jens Axboe\u5f00\u53d1*\u3002`io_uring`\u00a0\u88ab\u79f0\u4e3a\u9769\u547d\u6027\u6280\u672f\uff0c**\u7edf\u4e00\u4e86 Linux \u5f02\u6b65 I/O \u6846\u67b6**\uff1bio_uring \u76f8\u6bd4\u4f20\u7edf\u7684 Linux AIO \u63d0\u5347\u5e76\u4e0d\u5927\uff0c\u53ea\u6709 **5%\u7684\u63d0\u5347**\u3002\n</code></pre> <p><code>io_uring</code>\u00a0\u4e0e\u00a0<code>linux-aio</code>\u00a0\u6709\u7740\u672c\u8d28\u7684\u4e0d\u540c\uff1a 1. \u5728\u8bbe\u8ba1\u4e0a\u662f\u771f\u6b63\u5f02\u6b65\u7684\uff08truly asynchronous\uff09\u3002\u53ea\u8981 \u8bbe\u7f6e\u4e86\u5408\u9002\u7684 flag\uff0c\u5b83\u5728\u7cfb\u7edf\u8c03\u7528\u4e0a\u4e0b\u6587\u4e2d\u5c31\u53ea\u662f\u5c06\u8bf7\u6c42\u653e\u5165\u961f\u5217\uff0c \u4e0d\u4f1a\u505a\u5176\u4ed6\u4efb\u4f55\u989d\u5916\u7684\u4e8b\u60c5\uff0c\u4fdd\u8bc1\u4e86\u5e94\u7528\u6c38\u8fdc\u4e0d\u4f1a\u963b\u585e\u3002 2. \u652f\u6301\u4efb\u4f55\u7c7b\u578b\u7684 I/O\uff1acached files\u3001direct-access files \u751a\u81f3 blocking sockets\u3002\u7531\u4e8e\u8bbe\u8ba1\u4e0a\u5c31\u662f\u5f02\u6b65\u7684\uff08async-by-design nature\uff09\uff0c\u56e0\u6b64\u65e0\u9700 poll+read/write \u6765\u5904\u7406 sockets\u3002 \u53ea\u9700\u63d0\u4ea4\u4e00\u4e2a\u963b\u585e\u5f0f\u8bfb\uff08blocking read\uff09\uff0c\u8bf7\u6c42\u5b8c\u6210\u4e4b\u540e\uff0c\u5c31\u4f1a\u51fa\u73b0\u5728 completion ring\u3002 3. \u7075\u6d3b\u3001\u53ef\u6269\u5c55\uff1a\u57fa\u4e8e\u00a0<code>io_uring</code>\u00a0\u751a\u81f3\u80fd\u91cd\u5199\uff08re-implement\uff09Linux \u7684\u6bcf\u4e2a\u7cfb\u7edf\u8c03\u7528\u3002</p>"},{"location":"Documents/A-Linux/%E6%80%A7%E8%83%BD/%E5%BC%82%E6%AD%A5io/#21-io_uring","title":"2.1 io_uring \u4f18\u52bf","text":"<pre><code>title: \u7cfb\u7edf\u8c03\u7528\u4f1a\u4ea7\u751f\u4e0a\u4e0b\u6587\u5207\u6362\u5417?\n**\u7cfb\u7edf\u8c03\u7528\u7684\u8fc7\u7a0b\u4e2d\u4f1a\u53d1\u751fCPU\u4e0a\u4e0b\u6587\u5207\u6362**\uff0c\u5148\u5207\u6362\u5230\u5185\u6838\u6001\uff0c\u6267\u884c\u5185\u6838\u6001\u4ee3\u7801\uff0c\u518d\u8df3\u8f6c\u56de\u7528\u6237\u6001\u4ee3\u7801\u3002 \u6240\u4ee5\u4e00\u6b21\u7cfb\u7edf\u8c03\u7528\u4f1a\u53d1\u751f\u4e24\u6b21CPU\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u53c8\u79f0\u7279\u6743\u6a21\u5f0f\u5207\u6362\u3002\n</code></pre> <ol> <li>\u51cf\u5c11\u7cfb\u7edf\u8c03\u7528\u3002\u5185\u6838\u6001\u548c\u7528\u6237\u6001\u5171\u4eab\u5185\u5b58\uff0c\u51cf\u5c11\u5185\u6838\u6001\u4e0e\u7528\u6237\u6001 buffer \u7684\u62f7\u8d1d\u3002</li> </ol>"},{"location":"Documents/A-Linux/%E6%80%A7%E8%83%BD/%E5%BC%82%E6%AD%A5io/#22-linux-aio","title":"2.2 \u4e0e Linux AIO \u7684\u4e0d\u540c","text":"<p><code>io_uring</code> \u4e0e <code>linux-aio</code> \u6709\u7740\u672c\u8d28\u7684\u4e0d\u540c\uff1a</p> <ol> <li>\u5728\u8bbe\u8ba1\u4e0a\u662f\u771f\u6b63\u5f02\u6b65\u7684\uff08truly asynchronous\uff09\u3002\u53ea\u8981 \u8bbe\u7f6e\u4e86\u5408\u9002\u7684 flag\uff0c\u5b83\u5728\u7cfb\u7edf\u8c03\u7528\u4e0a\u4e0b\u6587\u4e2d\u5c31\u53ea\u662f\u5c06\u8bf7\u6c42\u653e\u5165\u961f\u5217\uff0c \u4e0d\u4f1a\u505a\u5176\u4ed6\u4efb\u4f55\u989d\u5916\u7684\u4e8b\u60c5\uff0c\u4fdd\u8bc1\u4e86\u5e94\u7528\u6c38\u8fdc\u4e0d\u4f1a\u963b\u585e\u3002</li> <li>\u652f\u6301\u4efb\u4f55\u7c7b\u578b\u7684 I/O\uff1acached files\u3001direct-access files \u751a\u81f3 blocking sockets\u3002\u7531\u4e8e\u8bbe\u8ba1\u4e0a\u5c31\u662f\u5f02\u6b65\u7684\uff08async-by-design nature\uff09\uff0c\u56e0\u6b64\u65e0\u9700 poll+read/write \u6765\u5904\u7406 sockets\u3002 \u53ea\u9700\u63d0\u4ea4\u4e00\u4e2a\u963b\u585e\u5f0f\u8bfb\uff08blocking read\uff09\uff0c\u8bf7\u6c42\u5b8c\u6210\u4e4b\u540e\uff0c\u5c31\u4f1a\u51fa\u73b0\u5728 completion ring\u3002</li> <li>\u7075\u6d3b\u3001\u53ef\u6269\u5c55\uff1a\u57fa\u4e8e <code>io_uring</code> \u751a\u81f3\u80fd\u91cd\u5199\uff08re-implement\uff09Linux \u7684\u6bcf\u4e2a\u7cfb\u7edf\u8c03\u7528\u3002</li> </ol>"},{"location":"Documents/A-Linux/%E6%80%A7%E8%83%BD/%E5%BC%82%E6%AD%A5io/#23-sqcqsqecqe","title":"2.3 \u539f\u7406\u53ca\u6838\u5fc3\u6570\u636e\u7ed3\u6784\uff1aSQ/CQ/SQE/CQE","text":"<p>\u6bcf\u4e2a io_uring \u5b9e\u4f8b\u90fd\u6709\u4e24\u4e2a\u73af\u5f62\u961f\u5217\uff08ring\uff09\uff0c\u5728\u5185\u6838\u548c\u5e94\u7528\u7a0b\u5e8f\u4e4b\u95f4\u5171\u4eab\uff1a - \u63d0\u4ea4\u961f\u5217\uff1asubmission queue (SQ) - \u5b8c\u6210\u961f\u5217\uff1acompletion queue (CQ)</p> <p></p> <p>\u8fd9\u4e24\u4e2a\u961f\u5217\uff1a - \u90fd\u662f\u5355\u751f\u4ea7\u8005\u3001\u5355\u6d88\u8d39\u8005\uff0csize \u662f 2 \u7684\u5e42\u6b21\uff1b - \u63d0\u4f9b\u65e0\u9501\u63a5\u53e3\uff08lock-less access interface\uff09\uff0c\u5185\u90e8\u4f7f\u7528 \u5185\u5b58\u5c4f\u969c\u505a\u540c\u6b65\uff08coordinated with memory barriers\uff09\u3002 \u4f7f\u7528\u65b9\u5f0f\uff1a - \u8bf7\u6c42   - \u5e94\u7528\u521b\u5efa SQ entries (SQE)\uff0c\u66f4\u65b0 SQ tail\uff1b   - \u5185\u6838\u6d88\u8d39 SQE\uff0c\u66f4\u65b0 SQ head\u3002 - \u5b8c\u6210   - \u5185\u6838\u4e3a\u5b8c\u6210\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u8bf7\u6c42\u521b\u5efa CQ entries (CQE)\uff0c\u66f4\u65b0 CQ tail\uff1b   - \u5e94\u7528\u6d88\u8d39 CQE\uff0c\u66f4\u65b0 CQ head\u3002   - \u5b8c\u6210\u4e8b\u4ef6\uff08completion events\uff09\u53ef\u80fd\u4ee5\u4efb\u610f\u987a\u5e8f\u5230\u8fbe\uff0c\u5230\u603b\u662f\u4e0e\u7279\u5b9a\u7684 SQE \u76f8\u5173\u8054\u7684\u3002   - \u6d88\u8d39 CQE \u8fc7\u7a0b\u65e0\u9700\u5207\u6362\u5230\u5185\u6838\u6001\u3002</p>"},{"location":"Documents/A-Linux/%E6%80%A7%E8%83%BD/%E5%BC%82%E6%AD%A5io/#24","title":"2.4 \u5e26\u6765\u7684\u597d\u5904","text":"<p><code>io_uring</code> \u8fd9\u79cd\u8bf7\u6c42\u65b9\u5f0f\u8fd8\u6709\u4e00\u4e2a\u597d\u5904\u662f\uff1a\u539f\u6765\u9700\u8981\u591a\u6b21\u7cfb\u7edf\u8c03\u7528\uff08\u8bfb\u6216\u5199\uff09\uff0c\u73b0\u5728\u53d8\u6210\u6279\u5904\u7406\u4e00\u6b21\u63d0\u4ea4\u3002 \u8fd8\u8bb0\u5f97 Meltdown \u6f0f\u6d1e\u5417\uff1f\u5f53\u65f6\u6211\u8fd8\u5199\u4e86\u4e00\u7bc7\u6587\u7ae0 \u89e3\u91ca\u4e3a\u4ec0\u4e48\u6211\u4eec\u7684 Scylla NoSQL \u6570\u636e\u5e93\u53d7\u5f71\u54cd\u5f88\u5c0f\uff1a<code>aio</code> \u5df2\u7ecf\u5c06\u6211\u4eec\u7684 I/O \u7cfb\u7edf\u8c03\u7528\u6279\u5904\u7406\u5316\u4e86\u3002 <code>io_uring</code> \u5c06\u8fd9\u79cd\u6279\u5904\u7406\u80fd\u529b\u5e26\u7ed9\u4e86 storage I/O \u7cfb\u7edf\u8c03\u7528\u4e4b\u5916\u7684 \u5176\u4ed6\u4e00\u4e9b\u7cfb\u7edf\u8c03\u7528\uff0c\u5305\u62ec\uff1a - <code>read</code> - <code>write</code> - <code>send</code> - <code>recv</code> - <code>accept</code> - <code>openat</code> - <code>stat</code> - \u4e13\u7528\u7684\u4e00\u4e9b\u7cfb\u7edf\u8c03\u7528\uff0c\u4f8b\u5982 <code>fallocate</code></p> <p>\u6b64\u5916\uff0c<code>io_uring</code> \u4f7f\u5f02\u6b65 I/O \u7684\u4f7f\u7528\u573a\u666f\u4e5f\u4e0d\u518d\u4ec5\u9650\u4e8e\u6570\u636e\u5e93\u5e94\u7528\uff0c\u666e\u901a\u7684\u975e\u6570\u636e\u5e93\u5e94\u7528\u4e5f\u80fd\u7528\u3002\u8fd9\u4e00\u70b9\u503c\u5f97\u91cd\u590d\u4e00\u904d\uff1a</p> <p>\u867d\u7136 <code>io_uring</code> \u4e0e <code>aio</code> \u6709\u4e00\u4e9b\u76f8\u4f3c\u4e4b\u5904\uff0c\u4f46\u5b83\u7684\u6269\u5c55\u6027\u548c\u67b6\u6784\u662f\u9769\u547d\u6027\u7684\uff1a \u5b83\u5c06\u5f02\u6b65\u64cd\u4f5c\u7684\u5f3a\u5927\u80fd\u529b\u5e26\u7ed9\u4e86\u6240\u6709\u5e94\u7528\uff08\u53ca\u5176\u5f00\u53d1\u8005\uff09\uff0c\u800c \u4e0d\u518d\u4ec5\u9650\u4e8e\u662f\u6570\u636e\u5e93\u5e94\u7528\u8fd9\u4e00\u7ec6\u5206\u9886\u57df\u3002</p> <p>\u6211\u4eec\u7684 CTO Avi Kivity \u5728 the Core C++ 2019 event \u4e0a \u6709\u4e00\u6b21\u5173\u4e8e async \u7684\u5206\u4eab\u3002 \u6838\u5fc3\u70b9\u5305\u62ec\uff1a\u4ece\u5ef6\u8fdf\u4e0a\u6765\u8bf4\uff0c</p> <ol> <li>\u73b0\u4ee3\u591a\u6838\u3001\u591a CPU \u8bbe\u5907\uff0c\u5176\u5185\u90e8\u672c\u8eab\u5c31\u662f\u4e00\u4e2a\u57fa\u7840\u7f51\u7edc\uff1b</li> <li>CPU \u4e4b\u95f4\u662f\u53e6\u4e00\u4e2a\u7f51\u7edc\uff1b</li> <li>CPU \u548c\u78c1\u76d8 I/O \u4e4b\u95f4\u53c8\u662f\u4e00\u4e2a\u7f51\u7edc\u3002</li> </ol> <p>\u56e0\u6b64\u7f51\u7edc\u7f16\u7a0b\u91c7\u7528\u5f02\u6b65\u662f\u660e\u667a\u7684\uff0c\u800c\u73b0\u5728\u5f00\u53d1\u81ea\u5df1\u7684\u5e94\u7528\u4e5f\u5e94\u8be5\u8003\u8651\u5f02\u6b65\u3002 \u8fd9\u4ece\u6839\u672c\u4e0a\u6539\u53d8\u4e86 Linux \u5e94\u7528\u7684\u8bbe\u8ba1\u65b9\u5f0f\uff1a</p> <ul> <li>\u4e4b\u524d\u90fd\u662f\u4e00\u6bb5\u987a\u5e8f\u4ee3\u7801\u6d41\uff0c\u9700\u8981\u7cfb\u7edf\u8c03\u7528\u65f6\u624d\u6267\u884c\u7cfb\u7edf\u8c03\u7528\uff0c</li> <li>\u73b0\u5728\u9700\u8981\u601d\u8003\u4e00\u4e2a\u6587\u4ef6\u662f\u5426 ready\uff0c\u56e0\u800c\u81ea\u7136\u5730\u5f15\u5165 event-loop\uff0c\u4e0d\u65ad\u901a\u8fc7\u5171\u4eab buffer \u63d0\u4ea4\u8bf7\u6c42\u548c\u63a5\u6536\u7ed3\u679c\u3002</li> </ul>"},{"location":"Documents/A-Linux/%E6%80%A7%E8%83%BD/%E5%BC%82%E6%AD%A5io/#25","title":"2.5 \u4e09\u79cd\u5de5\u4f5c\u6a21\u5f0f","text":"<p>io_uring \u5b9e\u4f8b\u53ef\u5de5\u4f5c\u5728\u4e09\u79cd\u6a21\u5f0f\uff1a 1. \u4e2d\u65ad\u9a71\u52a8\u6a21\u5f0f\uff08interrupt driven\uff09    \u9ed8\u8ba4\u6a21\u5f0f\u3002\u53ef\u901a\u8fc7 io_uring_enter() \u63d0\u4ea4 I/O \u8bf7\u6c42\uff0c\u7136\u540e\u76f4\u63a5\u68c0\u67e5 CQ \u72b6\u6001\u5224\u65ad\u662f\u5426\u5b8c\u6210\u3002 2. \u8f6e\u8be2\u6a21\u5f0f\uff08polled\uff09    Busy-waiting for an I/O completion\uff0c\u800c\u4e0d\u662f\u901a\u8fc7\u5f02\u6b65 IRQ\uff08Interrupt Request\uff09\u63a5\u6536\u901a\u77e5\u3002    \u8fd9\u79cd\u6a21\u5f0f\u9700\u8981\u6587\u4ef6\u7cfb\u7edf\uff08\u5982\u679c\u6709\uff09\u548c\u5757\u8bbe\u5907\uff08block device\uff09\u652f\u6301\u8f6e\u8be2\u529f\u80fd\u3002 \u76f8\u6bd4\u4e2d\u65ad\u9a71\u52a8\u65b9\u5f0f\uff0c\u8fd9\u79cd\u65b9\u5f0f\u5ef6\u8fdf\u66f4\u4f4e\uff08\u8fde\u7cfb\u7edf\u8c03\u7528\u90fd\u7701\u4e86\uff09\uff0c \u4f46\u53ef\u80fd\u4f1a\u6d88\u8017\u66f4\u591a CPU \u8d44\u6e90\u3002    \u76ee\u524d\uff0c\u53ea\u6709\u6307\u5b9a\u4e86 O_DIRECT flag \u6253\u5f00\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\uff0c\u624d\u80fd\u4f7f\u7528\u8fd9\u79cd\u6a21\u5f0f\u3002\u5f53\u4e00\u4e2a\u8bfb \u6216\u5199\u8bf7\u6c42\u63d0\u4ea4\u7ed9\u8f6e\u8be2\u4e0a\u4e0b\u6587\uff08polled context\uff09\u4e4b\u540e\uff0c\u5e94\u7528\uff08application\uff09\u5fc5\u987b\u8c03\u7528 <code>io_uring_enter()</code> \u6765\u8f6e\u8be2 CQ \u961f\u5217\uff0c\u5224\u65ad\u8bf7\u6c42\u662f\u5426\u5df2\u7ecf\u5b8c\u6210\u3002    \u5bf9\u4e00\u4e2a io_uring \u5b9e\u4f8b\u6765\u8bf4\uff0c\u4e0d\u652f\u6301\u6df7\u5408\u4f7f\u7528\u8f6e\u8be2\u548c\u975e\u8f6e\u8be2\u6a21\u5f0f\u3002 3. \u5185\u6838\u8f6e\u8be2\u6a21\u5f0f\uff08kernel polled\uff09    \u8fd9\u79cd\u6a21\u5f0f\u4e2d\uff0c\u4f1a \u521b\u5efa\u4e00\u4e2a\u5185\u6838\u7ebf\u7a0b\uff08kernel thread\uff09\u6765\u6267\u884c SQ \u7684\u8f6e\u8be2\u5de5\u4f5c\u3002</p> <p>\u4f7f\u7528\u8fd9\u79cd\u6a21\u5f0f\u7684 io_uring \u5b9e\u4f8b\uff0c \u5e94\u7528\u65e0\u9700\u5207\u5230\u5230\u5185\u6838\u6001 \u5c31\u80fd\u89e6\u53d1\uff08issue\uff09I/O \u64cd\u4f5c\u3002 \u901a\u8fc7 SQ \u6765\u63d0\u4ea4 SQE\uff0c\u4ee5\u53ca\u76d1\u63a7 CQ \u7684\u5b8c\u6210\u72b6\u6001\uff0c\u5e94\u7528\u65e0\u9700\u4efb\u4f55\u7cfb\u7edf\u8c03\u7528\uff0c\u5c31\u80fd\u63d0\u4ea4\u548c\u6536\u5272 I/O\uff08submit and reap I/Os\uff09\u3002</p> <p>\u5982\u679c\u5185\u6838\u7ebf\u7a0b\u7684\u7a7a\u95f2\u65f6\u95f4\u8d85\u8fc7\u4e86\u7528\u6237\u7684\u914d\u7f6e\u503c\uff0c\u5b83\u4f1a\u901a\u77e5\u5e94\u7528\uff0c\u7136\u540e\u8fdb\u5165 idle \u72b6\u6001\u3002 \u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5e94\u7528\u5fc5\u987b\u8c03\u7528 <code>io_uring_enter()</code> \u6765\u5524\u9192\u5185\u6838\u7ebf\u7a0b\u3002\u5982\u679c I/O \u4e00\u76f4\u5f88\u7e41\u5fd9\uff0c\u5185\u6838\u7ebf\u6027\u662f\u4e0d\u4f1a sleep \u7684\u3002</p>"},{"location":"Documents/A-Linux/%E6%80%A7%E8%83%BD/%E5%BC%82%E6%AD%A5io/#26-io_uring-api","title":"2.6 <code>io_uring</code> \u7cfb\u7edf\u8c03\u7528 API","text":"<p>\u6709\u4e09\u4e2a\uff1a - <code>io_uring_setup(2)</code> - <code>io_uring_register(2)</code> - <code>io_uring_enter(2)</code></p> <p>\u4e0b\u9762\u5c55\u5f00\u4ecb\u7ecd\u3002\u5b8c\u6574\u6587\u6863\u89c1 manpage\u3002</p>"},{"location":"Documents/A-Linux/%E6%80%A7%E8%83%BD/%E5%BC%82%E6%AD%A5io/#261-io_uring_setup","title":"2.6.1 <code>io_uring_setup()</code>","text":"<p>\u5f02\u6b65 I/O \u9700\u8981\u5148\u8bbe\u7f6e\u4e0a\u4e0b\u6587\uff1a</p> <pre><code>int io_uring_setup(u32 entries, struct io_uring_params *p);\n</code></pre> <p>\u8fd9\u4e2a\u7cfb\u7edf\u8c03\u7528 - \u521b\u5efa\u4e00\u4e2a SQ \u548c\u4e00\u4e2a CQ\uff0c - queue size \u81f3\u5c11 <code>entries</code> \u4e2a\u5143\u7d20\uff0c - \u8fd4\u56de\u4e00\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\uff0c\u968f\u540e\u7528\u4e8e\u5728\u8fd9\u4e2a io_uring \u5b9e\u4f8b\u4e0a\u6267\u884c\u64cd\u4f5c\u3002</p> <p>SQ \u548c CQ \u5728\u5e94\u7528\u548c\u5185\u6838\u4e4b\u95f4\u5171\u4eab\uff0c\u907f\u514d\u4e86\u5728\u521d\u59cb\u5316\u548c\u5b8c\u6210 I/O \u65f6\uff08initiating and completing I/O\uff09\u62f7\u8d1d\u6570\u636e\u3002</p> <p>\u53c2\u6570 p\uff1a</p> <ul> <li>\u5e94\u7528\u7528\u6765\u914d\u7f6e io_uring\uff0c</li> <li>\u5185\u6838\u8fd4\u56de\u7684 SQ/CQ \u914d\u7f6e\u4fe1\u606f\u4e5f\u901a\u8fc7\u5b83\u5e26\u56de\u6765\u3002</li> </ul> <p>io_uring_setup() \u6210\u529f\u65f6\u8fd4\u56de\u4e00\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\uff08fd\uff09\u3002\u5e94\u7528\u968f\u540e\u53ef\u4ee5\u5c06\u8fd9\u4e2a fd \u4f20\u7ed9 mmap(2) \u7cfb\u7edf\u8c03\u7528\uff0c\u6765 map the submission and completion queues \u6216\u8005\u4f20\u7ed9 to the io_uring_register() or io_uring_enter() system calls.</p>"},{"location":"Documents/A-Linux/%E6%80%A7%E8%83%BD/%E5%BC%82%E6%AD%A5io/#262-io_uring_register","title":"2.6.2 <code>io_uring_register()</code>","text":"<p>\u6ce8\u518c\u7528\u4e8e\u5f02\u6b65 I/O \u7684\u6587\u4ef6\u6216\u7528\u6237\u7f13\u51b2\u533a\uff08files or user buffers\uff09\uff1a</p> <pre><code>int io_uring_register(unsigned int fd, unsigned int opcode, void *arg, unsigned int nr_args);\n</code></pre> <p>\u6ce8\u518c\u6587\u4ef6\u6216\u7528\u6237\u7f13\u51b2\u533a\uff0c\u4f7f\u5185\u6838\u80fd\u957f\u65f6\u95f4\u6301\u6709\u5bf9\u8be5\u6587\u4ef6\u5728\u5185\u6838\u5185\u90e8\u7684\u6570\u636e\u7ed3\u6784\u5f15\u7528\uff08internal kernel data structures associated with the files\uff09\uff0c \u6216\u521b\u5efa\u5e94\u7528\u5185\u5b58\u7684\u957f\u671f\u6620\u5c04\uff08long term mappings of application memory associated with the buffers\uff09\uff0c \u8fd9\u4e2a\u64cd\u4f5c\u53ea\u4f1a\u5728\u6ce8\u518c\u65f6\u6267\u884c\u4e00\u6b21\uff0c\u800c\u4e0d\u662f\u6bcf\u4e2a I/O \u8bf7\u6c42\u90fd\u4f1a\u5904\u7406\uff0c\u56e0\u6b64\u51cf\u5c11\u4e86 per-I/O overhead\u3002</p>"},{"location":"Documents/A-Linux/%E6%80%A7%E8%83%BD/%E5%BC%82%E6%AD%A5io/#2621-buffer","title":"2.6.2.1 \u6ce8\u518c\u7684\u7f13\u51b2\u533a\uff08buffer\uff09\u6027\u8d28","text":"<ul> <li>Registered buffers \u5c06\u4f1a\u88ab\u9501\u5b9a\u5728\u5185\u5b58\u4e2d\uff08be locked in memory\uff09\uff0c\u5e76\u8ba1\u5165\u7528\u6237\u7684 RLIMIT_MEMLOCK \u8d44\u6e90\u9650\u5236\u3002</li> <li>\u6b64\u5916\uff0c\u6bcf\u4e2a buffer \u6709 1GB \u7684\u5927\u5c0f\u9650\u5236\u3002</li> <li>\u5f53\u524d\uff0cbuffers \u5fc5\u987b\u662f\u533f\u540d\u3001\u975e\u6587\u4ef6\u540e\u7aef\u7684\u5185\u5b58\uff08anonymous, non-file-backed memory\uff09\uff0c\u4f8b\u5982 malloc(3) or mmap(2) with the MAP_ANONYMOUS flag set \u8fd4\u56de\u7684\u5185\u5b58\u3002</li> <li>Huge pages \u4e5f\u662f\u652f\u6301\u7684\u3002\u6574\u4e2a huge page \u90fd\u4f1a\u88ab pin \u5230\u5185\u6838\uff0c\u5373\u4f7f\u53ea\u7528\u5230\u4e86\u5176\u4e2d\u4e00\u90e8\u5206\u3002</li> <li>\u5df2\u7ecf\u6ce8\u518c\u7684 buffer \u65e0\u6cd5\u8c03\u6574\u5927\u5c0f\uff0c\u60f3\u8c03\u6574\u53ea\u80fd\u5148 unregister\uff0c\u518d\u91cd\u65b0 register \u4e00\u4e2a\u65b0\u7684\u3002</li> </ul>"},{"location":"Documents/A-Linux/%E6%80%A7%E8%83%BD/%E5%BC%82%E6%AD%A5io/#2622-eventfd-completion","title":"2.6.2.2 \u901a\u8fc7 <code>eventfd()</code> \u8ba2\u9605 completion \u4e8b\u4ef6","text":"<p>\u53ef\u4ee5\u7528 <code>eventfd(2)</code> \u8ba2\u9605 io_uring \u5b9e\u4f8b\u7684 completion events\u3002 \u5c06 eventfd \u63cf\u8ff0\u7b26\u901a\u8fc7\u8fd9\u4e2a\u7cfb\u7edf\u8c03\u7528\u6ce8\u518c\u5c31\u884c\u4e86\u3002</p> <p>The credentials of the running application can be registered with io_uring which returns an id associated with those credentials. Applications wishing to share a ring between separate users/processes can pass in this credential id in the SQE personality field. If set, that particular SQE will be issued with these credentials.</p>"},{"location":"Documents/A-Linux/%E6%80%A7%E8%83%BD/%E5%BC%82%E6%AD%A5io/#263-io_uring_enter","title":"2.6.3 <code>io_uring_enter()</code>","text":"<pre><code>int io_uring_enter(unsigned int fd, unsigned int to_submit, unsigned int min_complete, unsigned int flags, sigset_t *sig);\n</code></pre> <p>\u8fd9\u4e2a\u7cfb\u7edf\u8c03\u7528\u7528\u4e8e\u521d\u59cb\u5316\u548c\u5b8c\u6210\uff08initiate and complete\uff09I/O\uff0c\u4f7f\u7528\u5171\u4eab\u7684 SQ \u548c CQ\u3002 \u5355\u6b21\u8c03\u7528\u540c\u65f6\u6267\u884c\uff1a 1. \u63d0\u4ea4\u65b0\u7684 I/O \u8bf7\u6c42 2. \u7b49\u5f85 I/O \u5b8c\u6210</p> <p>\u53c2\u6570\uff1a 1. <code>fd</code> \u662f <code>io_uring_setup()</code> \u8fd4\u56de\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\uff1b 2. <code>to_submit</code> \u6307\u5b9a\u4e86 SQ \u4e2d\u63d0\u4ea4\u7684 I/O \u6570\u91cf\uff1b 3. \u4f9d\u636e\u4e0d\u540c\u6a21\u5f0f\uff1a    - \u9ed8\u8ba4\u6a21\u5f0f\uff0c\u5982\u679c\u6307\u5b9a\u4e86 <code>min_complete</code>\uff0c\u4f1a\u7b49\u5f85\u8fd9\u4e2a\u6570\u91cf\u7684 I/O \u4e8b\u4ef6\u5b8c\u6210\u518d\u8fd4\u56de\uff1b    - \u5982\u679c io_uring \u662f polling \u6a21\u5f0f\uff0c\u8fd9\u4e2a\u53c2\u6570\u8868\u793a\uff1a      1. 0\uff1a\u8981\u6c42\u5185\u6838\u8fd4\u56de\u5f53\u524d\u4ee5\u53ca\u5b8c\u6210\u7684\u6240\u6709 events\uff0c\u65e0\u963b\u585e\uff1b      2. \u975e\u96f6\uff1a\u5982\u679c\u6709\u4e8b\u4ef6\u5b8c\u6210\uff0c\u5185\u6838\u4ecd\u7136\u7acb\u5373\u8fd4\u56de\uff1b\u5982\u679c\u6ca1\u6709\u5b8c\u6210\u4e8b\u4ef6\uff0c\u5185\u6838\u4f1a poll\uff0c\u7b49\u5f85\u6307\u5b9a\u7684\u6b21\u6570\u5b8c\u6210\uff0c\u6216\u8005\u8fd9\u4e2a\u8fdb\u7a0b\u7684\u65f6\u95f4\u7247\u7528\u5b8c\u3002</p> <p>\u6ce8\u610f\uff1a\u5bf9\u4e8e interrupt driven I/O\uff0c\u5e94\u7528\u65e0\u9700\u8fdb\u5165\u5185\u6838\u5c31\u80fd\u68c0\u67e5 CQ \u7684 event completions\u3002</p> <p><code>io_uring_enter()</code> \u652f\u6301\u5f88\u591a\u64cd\u4f5c\uff0c\u5305\u62ec\uff1a - Open, close, and stat files - Read and write into multiple buffers or pre-mapped buffers - Socket I/O operations - Synchronize file state - Asynchronously monitor a set of file descriptors - Create a timeout linked to a specific operation in the ring - Attempt to cancel an operation that is currently in flight - Create I/O chains - Ordered execution within a chain - Parallel execution of multiple chains</p> <p>\u5f53\u8fd9\u4e2a\u7cfb\u7edf\u8c03\u7528\u8fd4\u56de\u65f6\uff0c\u8868\u793a\u4e00\u5b9a\u6570\u91cf\u7684 SEQ \u5df2\u7ecf\u88ab\u6d88\u8d39\u548c\u63d0\u4ea4\u4e86\uff0c\u6b64\u65f6\u53ef\u4ee5\u5b89\u5168\u7684\u91cd\u7528\u961f\u5217\u4e2d\u7684 SEQ\u3002 \u6b64\u65f6 IO \u63d0\u4ea4\u6709\u53ef\u80fd\u8fd8\u505c\u7559\u5728\u5f02\u6b65\u4e0a\u4e0b\u6587\u4e2d\uff0c\u5373\u5b9e\u9645\u4e0a SQE \u53ef\u80fd\u8fd8\u6ca1\u6709\u88ab\u63d0\u4ea4 \u2014\u2014 \u4e0d\u8fc7 \u7528\u6237\u4e0d\u7528\u5173\u5fc3\u8fd9\u4e9b\u7ec6\u8282 \u2014\u2014 \u5f53\u968f\u540e\u5185\u6838\u9700\u8981\u4f7f\u7528\u67d0\u4e2a\u7279\u5b9a\u7684 SQE \u65f6\uff0c\u5b83\u5df2\u7ecf\u590d\u5236\u4e86\u4e00\u4efd\u3002</p>"},{"location":"Documents/A-Linux/%E6%80%A7%E8%83%BD/%E5%BC%82%E6%AD%A5io/#27","title":"2.7 \u9ad8\u7ea7\u7279\u6027","text":"<p><code>io_uring</code> \u63d0\u4f9b\u4e86\u4e00\u4e9b\u7528\u4e8e\u7279\u6b8a\u573a\u666f\u7684\u9ad8\u7ea7\u7279\u6027\uff1a 1. File registration\uff08\u6587\u4ef6\u6ce8\u518c\uff09\uff1a\u6bcf\u6b21\u53d1\u8d77\u4e00\u4e2a\u6307\u5b9a\u6587\u4ef6\u63cf\u8ff0\u7684\u64cd \u4f5c\uff0c\u5185\u6838\u90fd\u9700\u8981\u82b1\u8d39\u4e00\u4e9b\u65f6\u949f\u5468\u671f\uff08cycles\uff09\u5c06\u6587\u4ef6\u63cf\u8ff0\u7b26\u6620\u5c04\u5230\u5185\u90e8\u8868\u793a\u3002 \u5bf9\u4e8e\u90a3\u4e9b\u9488\u5bf9\u540c\u4e00\u6587\u4ef6\u8fdb\u884c\u91cd\u590d\u64cd\u4f5c\u7684\u573a\u666f\uff0c<code>io_uring</code> \u652f\u6301\u63d0\u524d\u6ce8\u518c\u8fd9\u4e9b\u6587\u4ef6\uff0c\u540e\u9762\u76f4\u63a5\u67e5\u627e\u5c31\u884c\u4e86\u3002 2. Buffer registration\uff08\u7f13\u51b2\u533a\u6ce8\u518c\uff09\uff1a\u4e0e file registration \u7c7b \u4f3c\uff0cdirect I/O \u573a\u666f\u4e2d\uff0c\u5185\u6838\u9700\u8981 map/unmap memory areas\u3002<code>io_uring</code> \u652f\u6301\u63d0\u524d \u6ce8\u518c\u8fd9\u4e9b\u7f13\u51b2\u533a\uff08buffers\uff09\u3002 3. Poll ring\uff08\u8f6e\u8be2\u73af\u5f62\u7f13\u51b2\u533a\uff09\uff1a\u5bf9\u4e8e\u975e\u5e38\u5feb\u7684 \u8bbe\u5907\uff0c\u5904\u7406\u4e2d\u65ad\u7684\u5f00\u9500\u662f\u6bd4\u8f83\u5927\u7684\u3002<code>io_uring</code> \u5141\u8bb8\u7528\u6237\u5173\u95ed\u4e2d\u65ad\uff0c\u4f7f\u7528\u8f6e\u8be2\u6a21\u5f0f\u3002\u524d\u9762\u201c\u4e09\u79cd\u5de5\u4f5c\u6a21\u5f0f\u201d\u5c0f\u8282\u4e5f\u4ecb\u7ecd\u5230\u4e86\u8fd9\u4e00\u70b9\u3002 4. Linked operations\uff08\u94fe\u63a5\u64cd\u4f5c\uff09\uff1a\u5141\u8bb8\u7528\u6237\u53d1\u9001\u4e32\u8054\u7684\u8bf7\u6c42\u3002\u8fd9\u4e24 \u4e2a\u8bf7\u6c42\u540c\u65f6\u63d0\u4ea4\uff0c\u4f46\u540e\u9762\u7684\u4f1a\u7b49\u524d\u9762\u7684\u5904\u7406\u5b8c\u624d\u5f00\u59cb\u6267\u884c\u3002</p>"},{"location":"Documents/A-Linux/%E6%80%A7%E8%83%BD/%E5%BC%82%E6%AD%A5io/#3-liburing","title":"3 \u7528\u6237\u7a7a\u95f4\u5e93 <code>liburing</code>","text":"<pre><code>liburing\u662f\u4e3a\u4e86\u7b80\u5316io_uring\u7684\u4f7f\u7528\u800c\u5c01\u88c5\u7684\u5e93\uff0c\u4e5f\u662f\u7531*Block IO\u5927\u795e\u4e5f\u5373Fio\u4f5c\u8005Jens Axboe\u5f00\u53d1*\n</code></pre> <p><code>liburing</code> \u63d0\u4f9b\u4e86\u4e00\u4e2a\u7b80\u5355\u7684\u9ad8\u5c42 API\uff0c \u53ef\u7528\u4e8e\u4e00\u4e9b\u57fa\u672c\u573a\u666f\uff0c\u5e94\u7528\u7a0b\u5e8f\u907f\u514d\u4e86\u76f4\u63a5\u4f7f\u7528\u66f4\u5e95\u5c42\u7684\u7cfb\u7edf\u8c03\u7528\u3002 \u6b64\u5916\uff0c\u8fd9\u4e2a API \u8fd8\u907f\u514d\u4e86\u4e00\u4e9b\u91cd\u590d\u64cd\u4f5c\u7684\u4ee3\u7801\uff0c\u5982\u8bbe\u7f6e io_uring \u5b9e\u4f8b\u3002</p> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5728 <code>io_uring_setup()</code> \u7684 manpage \u63cf\u8ff0\u4e2d\uff0c\u8c03\u7528\u8fd9\u4e2a\u7cfb\u7edf\u8c03\u7528\u83b7\u5f97\u4e00\u4e2a ring \u6587 \u4ef6\u63cf\u8ff0\u7b26\u4e4b\u540e\uff0c\u5e94\u7528\u5fc5\u987b\u8c03\u7528 <code>mmap()</code> \u8fd9\u6837\u7684\u903b\u8f91\u9700\u8981\u4e00\u6bb5\u7565\u957f\u7684\u4ee3\u7801\uff0c\u800c\u7528 <code>liburing</code> \u7684\u8bdd\uff0c\u4e0b\u9762\u7684\u51fd\u6570\u5df2\u7ecf\u5c06\u4e0a\u8ff0\u6d41\u7a0b\u5c01\u88c5\u597d\u4e86\uff1a</p> <pre><code>int io_uring_queue_init(unsigned entries, struct io_uring *ring, unsigned flags);\n</code></pre> <p>\u4e0b\u4e00\u8282\u6765\u770b\u4e24\u4e2a\u4f8b\u5b50\u57fa\u4e8e liburing \u7684\u4f8b\u5b50\u3002</p>"},{"location":"Documents/A-Linux/%E6%80%A7%E8%83%BD/%E5%BC%82%E6%AD%A5io/#4-liburing","title":"4 \u57fa\u4e8e liburing \u7684\u793a\u4f8b\u5e94\u7528","text":"<p>\u4e0b\u8f7d\u7f16\u8bd1\uff1a</p> <pre><code>$ git clone https://github.com/axboe/liburing.git\n$ git co -b liburing-2.0 tags/liburing-2.0\n\n$ cd liburing\n$ ls examples/\nio_uring-cp  io_uring-cp.c  io_uring-test  io_uring-test.c  link-cp  link-cp.c  Makefile  ucontext-cp  ucontext-cp.c\n\n$ make -j4\n\n$ ./examples/io_uring-test &lt;file&gt;\nSubmitted=4, completed=4, bytes=16384\n\n$ ./examples/link-cp &lt;in-file&gt; &lt;out-file&gt;\n</code></pre>"},{"location":"Documents/A-Linux/%E6%80%A7%E8%83%BD/%E5%BC%82%E6%AD%A5io/#41-io_uring-test","title":"4.1 <code>io_uring-test</code>","text":"<p>\u8fd9\u4e2a\u7a0b\u5e8f\u4f7f\u7528 4 \u4e2a SQE\uff0c\u4ece\u8f93\u5165\u6587\u4ef6\u4e2d\u8bfb\u53d6\u6700\u591a 16KB \u6570\u636e\u3002</p>"},{"location":"Documents/A-Linux/%E6%80%A7%E8%83%BD/%E5%BC%82%E6%AD%A5io/#411","title":"4.1.1 \u6e90\u7801\u53ca\u6ce8\u91ca","text":"<p>\u4e3a\u65b9\u4fbf\u770b\u6e05\u4e3b\u8981\u903b\u8f91\uff0c\u5ffd\u7565\u4e86\u4e00\u4e9b\u9519\u8bef\u5904\u7406\u4ee3\u7801\uff0c\u5b8c\u6574\u4ee3\u7801\u89c1 io_uring-test.c\u3002</p> <pre><code>/* SPDX-License-Identifier: MIT */\n/*\n * Simple app that demonstrates how to setup an io_uring interface,\n * submit and complete IO against it, and then tear it down.\n *\n * gcc -Wall -O2 -D_GNU_SOURCE -o io_uring-test io_uring-test.c -luring\n */\n#include \"liburing.h\"\n\n#define QD    4 // io_uring \u961f\u5217\u957f\u5ea6\n\nint main(int argc, char *argv[]) {\nint i, fd, pending, done;\nvoid *buf;\n\n// 1. \u521d\u59cb\u5316\u4e00\u4e2a io_uring \u5b9e\u4f8b\nstruct io_uring ring;\nret = io_uring_queue_init(QD,    // \u961f\u5217\u957f\u5ea6\n&amp;ring, // io_uring \u5b9e\u4f8b\n0);    // flags\uff0c0 \u8868\u793a\u9ed8\u8ba4\u914d\u7f6e\uff0c\u4f8b\u5982\u4f7f\u7528\u4e2d\u65ad\u9a71\u52a8\u6a21\u5f0f\n\n// 2. \u6253\u5f00\u8f93\u5165\u6587\u4ef6\uff0c\u6ce8\u610f\u8fd9\u91cc\u6307\u5b9a\u4e86 O_DIRECT flag\uff0c\u5185\u6838\u8f6e\u8be2\u6a21\u5f0f\u9700\u8981\u8fd9\u4e2a flag\uff0c\u89c1\u524d\u9762\u4ecb\u7ecd\nfd = open(argv[1], O_RDONLY | O_DIRECT);\nstruct stat sb;\nfstat(fd, &amp;sb); // \u83b7\u53d6\u6587\u4ef6\u4fe1\u606f\uff0c\u4f8b\u5982\u6587\u4ef6\u957f\u5ea6\uff0c\u540e\u9762\u4f1a\u7528\u5230\n\n// 3. \u521d\u59cb\u5316 4 \u4e2a\u8bfb\u7f13\u51b2\u533a\nssize_t fsize = 0;             // \u7a0b\u5e8f\u7684\u6700\u5927\u8bfb\u53d6\u957f\u5ea6\nstruct iovec *iovecs = calloc(QD, sizeof(struct iovec));\nfor (i = 0; i &lt; QD; i++) {\nif (posix_memalign(&amp;buf, 4096, 4096))\nreturn 1;\niovecs[i].iov_base = buf;  // \u8d77\u59cb\u5730\u5740\niovecs[i].iov_len = 4096;  // \u7f13\u51b2\u533a\u5927\u5c0f\nfsize += 4096;\n}\n\n// 4. \u4f9d\u6b21\u51c6\u5907 4 \u4e2a SQE \u8bfb\u8bf7\u6c42\uff0c\u6307\u5b9a\u5c06\u968f\u540e\u8bfb\u5165\u7684\u6570\u636e\u5199\u5165 iovecs \nstruct io_uring_sqe *sqe;\noffset = 0;\ni = 0;\ndo {\nsqe = io_uring_get_sqe(&amp;ring);  // \u83b7\u53d6\u53ef\u7528 SQE\nio_uring_prep_readv(sqe,        // \u7528\u8fd9\u4e2a SQE \u51c6\u5907\u4e00\u4e2a\u5f85\u63d0\u4ea4\u7684 read \u64cd\u4f5c\nfd,         // \u4ece fd \u6253\u5f00\u7684\u6587\u4ef6\u4e2d\u8bfb\u53d6\u6570\u636e\n&amp;iovecs[i], // iovec \u5730\u5740\uff0c\u8bfb\u5230\u7684\u6570\u636e\u5199\u5165 iovec \u7f13\u51b2\u533a\n1,          // iovec \u6570\u91cf\noffset);    // \u8bfb\u53d6\u64cd\u4f5c\u7684\u8d77\u59cb\u5730\u5740\u504f\u79fb\u91cf\noffset += iovecs[i].iov_len;    // \u66f4\u65b0\u504f\u79fb\u91cf\uff0c\u4e0b\u6b21\u4f7f\u7528\ni++;\n\nif (offset &gt; sb.st_size)        // \u5982\u679c\u8d85\u51fa\u4e86\u6587\u4ef6\u5927\u5c0f\uff0c\u505c\u6b62\u51c6\u5907\u540e\u9762\u7684 SQE\nbreak;\n} while (1);\n\n// 5. \u63d0\u4ea4 SQE \u8bfb\u8bf7\u6c42\nret = io_uring_submit(&amp;ring);       // 4 \u4e2a SQE \u4e00\u6b21\u63d0\u4ea4\uff0c\u8fd4\u56de\u63d0\u4ea4\u6210\u529f\u7684 SQE \u6570\u91cf\nif (ret &lt; 0) {\nfprintf(stderr, \"io_uring_submit: %s\\n\", strerror(-ret));\nreturn 1;\n} else if (ret != i) {\nfprintf(stderr, \"io_uring_submit submitted less %d\\n\", ret);\nreturn 1;\n}\n\n// 6. \u7b49\u5f85\u8bfb\u8bf7\u6c42\u5b8c\u6210\uff08CQE\uff09\nstruct io_uring_cqe *cqe;\ndone = 0;\npending = ret;\nfsize = 0;\nfor (i = 0; i &lt; pending; i++) {\nio_uring_wait_cqe(&amp;ring, &amp;cqe);  // \u7b49\u5f85\u7cfb\u7edf\u8fd4\u56de\u4e00\u4e2a\u8bfb\u5b8c\u6210\u4e8b\u4ef6\ndone++;\n\nif (cqe-&gt;res != 4096 &amp;&amp; cqe-&gt;res + fsize != sb.st_size) {\nfprintf(stderr, \"ret=%d, wanted 4096\\n\", cqe-&gt;res);\n}\n\nfsize += cqe-&gt;res;\nio_uring_cqe_seen(&amp;ring, cqe);   // \u66f4\u65b0 io_uring \u5b9e\u4f8b\u7684\u5b8c\u6210\u961f\u5217\n}\n\n// 7. \u6253\u5370\u7edf\u8ba1\u4fe1\u606f\nprintf(\"Submitted=%d, completed=%d, bytes=%lu\\n\", pending, done, (unsigned long) fsize);\n\n// 8. \u6e05\u7406\u5de5\u4f5c\nclose(fd);\nio_uring_queue_exit(&amp;ring);\nreturn 0;\n}\n</code></pre>"},{"location":"Documents/A-Linux/%E6%80%A7%E8%83%BD/%E5%BC%82%E6%AD%A5io/#412","title":"4.1.2 \u5176\u4ed6\u8bf4\u660e","text":"<p>\u4ee3\u7801\u4e2d\u5df2\u7ecf\u6dfb\u52a0\u4e86\u6ce8\u91ca\uff0c\u8fd9\u91cc\u518d\u89e3\u91ca\u51e0\u70b9\uff1a - \u6bcf\u4e2a SQE \u90fd\u6267\u884c\u4e00\u4e2a allocated buffer\uff0c\u540e\u8005\u662f\u7528 <code>iovec</code> \u7ed3\u6784\u63cf\u8ff0\u7684\uff1b - \u7b2c 3 &amp; 4 \u6b65\uff1a\u521d\u59cb\u5316\u6240\u6709 SQE\uff0c\u7528\u4e8e\u63a5\u4e0b\u6765\u7684 <code>IORING_OP_READV</code> \u64cd\u4f5c\uff0c\u540e\u8005 \u63d0\u4f9b\u4e86 <code>readv(2)</code> \u7cfb\u7edf\u8c03\u7528\u7684\u5f02\u6b65\u63a5\u53e3\u3002 - \u64cd\u4f5c\u5b8c\u6210\u4e4b\u540e\uff0c\u8fd9\u4e2a SQE iovec buffer \u4e2d\u5b58\u653e\u7684\u662f\u76f8\u5173 <code>readv</code> \u64cd\u4f5c\u7684\u7ed3\u679c\uff1b - \u63a5\u4e0b\u6765\u8c03\u7528 <code>io_uring_wait_cqe()</code> \u6765 reap CQE\uff0c\u5e76\u901a\u8fc7 <code>cqe-&gt;res</code> \u5b57\u6bb5\u9a8c\u8bc1\u8bfb\u53d6\u7684\u5b57\u8282\u6570\uff1b - <code>io_uring_cqe_seen()</code> \u901a\u77e5\u5185\u6838\u8fd9\u4e2a CQE \u5df2\u7ecf\u88ab\u6d88\u8d39\u4e86\u3002</p>"},{"location":"Documents/A-Linux/%E6%80%A7%E8%83%BD/%E5%BC%82%E6%AD%A5io/#42-link-cp","title":"4.2 link-cp","text":"<p>link-cp \u4f7f\u7528 io_uring \u9ad8\u7ea7\u7279\u6027 SQE chaining \u7279\u6027\u6765\u590d\u5236\u6587\u4ef6\u3002</p>"},{"location":"Documents/A-Linux/%E6%80%A7%E8%83%BD/%E5%BC%82%E6%AD%A5io/#421-io-chain","title":"4.2.1 I/O chain","text":"<p>io_uring \u652f\u6301\u521b\u5efa I/O chain\u3002\u4e00\u4e2a chain \u5185\u7684 I/O \u662f\u987a\u5e8f\u6267\u884c\u7684\uff0c\u591a\u4e2a I/O chain \u53ef\u4ee5\u5e76\u884c\u6267\u884c\u3002</p> <p><code>io_uring_enter()</code> manpage \u4e2d\u5bf9 <code>IOSQE_IO_LINK</code> \u6709 \u8be6\u7ec6\u89e3\u91ca\uff1a</p> <p>When this flag is specified, it forms a link with the next SQE in the submission ring. That next SQE will not be started before this one completes. This, in effect, forms a chain of SQEs, which can be arbitrarily long. The tail of the chain is denoted by the first SQE that does not have this flag set. This flag has no effect on previous SQE submissions, nor does it impact SQEs that are outside of the chain tail. This means that multiple chains can be executing in parallel, or chains and individual SQEs. Only members inside the chain are serialized. A chain of SQEs will be broken, if any request in that chain ends in error. io_uring considers any unexpected result an error. This means that, eg, a short read will also terminate the remainder of the chain. If a chain of SQE links is broken, the remaining unstarted part of the chain will be terminated and completed with -ECANCELED as the error code. Available since 5.3.</p> <p>\u4e3a\u5b9e\u73b0\u590d\u5236\u6587\u4ef6\u529f\u80fd\uff0clink-cp \u521b\u5efa\u4e00\u4e2a\u957f\u5ea6\u4e3a 2 \u7684 SQE chain\u3002</p> <ul> <li>\u7b2c\u4e00\u4e2a SQE \u662f\u4e00\u4e2a\u8bfb\u8bf7\u6c42\uff0c\u5c06\u6570\u636e\u4ece\u8f93\u5165\u6587\u4ef6\u8bfb\u5230 buffer\uff1b</li> <li>\u7b2c\u4e8c\u4e2a\u8bf7\u6c42\uff0c\u4e0e\u7b2c\u4e00\u4e2a\u8bf7\u6c42\u662f linked\uff0c\u662f\u4e00\u4e2a\u5199\u8bf7\u6c42\uff0c\u5c06\u6570\u636e\u4ece buffer \u5199\u5165\u8f93\u51fa\u6587\u4ef6\u3002</li> </ul>"},{"location":"Documents/A-Linux/%E6%80%A7%E8%83%BD/%E5%BC%82%E6%AD%A5io/#422","title":"4.2.2 \u6e90\u7801\u53ca\u6ce8\u91ca","text":"<pre><code>/* SPDX-License-Identifier: MIT */\n/*\n * Very basic proof-of-concept for doing a copy with linked SQEs. Needs a\n * bit of error handling and short read love.\n */\n#include \"liburing.h\"\n\n#define QD    64         // io_uring \u961f\u5217\u957f\u5ea6\n#define BS    (32*1024)\n\nstruct io_data {\nsize_t offset;\nint index;\nstruct iovec iov;\n};\n\nstatic int infd, outfd;\nstatic unsigned inflight;\n\n// \u521b\u5efa\u4e00\u4e2a read-&gt;write SQE chain\nstatic void queue_rw_pair(struct io_uring *ring, off_t size, off_t offset) {\nstruct io_uring_sqe *sqe;\nstruct io_data *data;\nvoid *ptr;\n\nptr = malloc(size + sizeof(*data));\ndata = ptr + size;\ndata-&gt;index = 0;\ndata-&gt;offset = offset;\ndata-&gt;iov.iov_base = ptr;\ndata-&gt;iov.iov_len = size;\n\nsqe = io_uring_get_sqe(ring);                            // \u83b7\u53d6\u53ef\u7528 SQE\nio_uring_prep_readv(sqe, infd, &amp;data-&gt;iov, 1, offset);   // \u51c6\u5907 read \u8bf7\u6c42\nsqe-&gt;flags |= IOSQE_IO_LINK;                             // \u8bbe\u7f6e\u4e3a LINK \u6a21\u5f0f\nio_uring_sqe_set_data(sqe, data);                        // \u8bbe\u7f6e data\n\nsqe = io_uring_get_sqe(ring);                            // \u83b7\u53d6\u53e6\u4e00\u4e2a\u53ef\u7528 SQE\nio_uring_prep_writev(sqe, outfd, &amp;data-&gt;iov, 1, offset); // \u51c6\u5907 write \u8bf7\u6c42\nio_uring_sqe_set_data(sqe, data);                        // \u8bbe\u7f6e data\n}\n\n// \u5904\u7406\u5b8c\u6210\uff08completion\uff09\u4e8b\u4ef6\uff1a\u91ca\u653e SQE \u7684\u5185\u5b58\u7f13\u51b2\u533a\uff0c\u901a\u77e5\u5185\u6838\u5df2\u7ecf\u6d88\u8d39\u4e86 CQE\u3002\nstatic int handle_cqe(struct io_uring *ring, struct io_uring_cqe *cqe) {\nstruct io_data *data = io_uring_cqe_get_data(cqe);       // \u83b7\u53d6 CQE\ndata-&gt;index++;\n\nif (cqe-&gt;res &lt; 0) {\nif (cqe-&gt;res == -ECANCELED) {\nqueue_rw_pair(ring, BS, data-&gt;offset);\ninflight += 2;\n} else {\nprintf(\"cqe error: %s\\n\", strerror(cqe-&gt;res));\nret = 1;\n}\n}\n\nif (data-&gt;index == 2) {        // read-&gt;write chain \u5b8c\u6210\uff0c\u91ca\u653e\u7f13\u51b2\u533a\u5185\u5b58\nvoid *ptr = (void *) data - data-&gt;iov.iov_len;\nfree(ptr);\n}\n\nio_uring_cqe_seen(ring, cqe);  // \u901a\u77e5\u5185\u6838\u5df2\u7ecf\u6d88\u8d39\u4e86 CQE \u4e8b\u4ef6\nreturn ret;\n}\n\nstatic int copy_file(struct io_uring *ring, off_t insize) {\nstruct io_uring_cqe *cqe;\nsize_t this_size;\noff_t offset;\n\noffset = 0;\nwhile (insize) {                      // \u6570\u636e\u8fd8\u6ca1\u5904\u7406\u5b8c\nint has_inflight = inflight;      // \u5f53\u524d\u6b63\u5728\u8fdb\u884c\u4e2d\u7684 SQE \u6570\u91cf\nint depth;  // SQE \u9608\u503c\uff0c\u5f53\u524d\u8fdb\u884c\u4e2d\u7684 SQE \u6570\u91cf\uff08inflight\uff09\u8d85\u8fc7\u8fd9\u4e2a\u503c\u4e4b\u540e\uff0c\u9700\u8981\u963b\u585e\u7b49\u5f85 CQE \u5b8c\u6210\n\nwhile (insize &amp;&amp; inflight &lt; QD) { // \u6570\u636e\u8fd8\u6ca1\u5904\u7406\u5b8c\uff0cio_uring \u961f\u5217\u4e5f\u8fd8\u6ca1\u7528\u5b8c\nthis_size = BS;\nif (this_size &gt; insize)       // \u6700\u540e\u4e00\u6bb5\u6570\u636e\u4e0d\u8db3 BS \u5927\u5c0f\nthis_size = insize;\n\nqueue_rw_pair(ring, this_size, offset); // \u521b\u5efa\u4e00\u4e2a read-&gt;write chain\uff0c\u5360\u7528\u4e24\u4e2a SQE\noffset += this_size;\ninsize -= this_size;\ninflight += 2;                // \u6b63\u5728\u8fdb\u884c\u4e2d\u7684 SQE \u6570\u91cf +2\n}\n\nif (has_inflight != inflight)     // \u5982\u679c\u6709\u65b0\u521b\u5efa\u7684 SQE\uff0c\nio_uring_submit(ring);        // \u5c31\u63d0\u4ea4\u7ed9\u5185\u6838\n\nif (insize)                       // \u5982\u679c\u8fd8\u6709 data \u7b49\u5f85\u5904\u7406\uff0c\ndepth = QD;                   // \u9608\u503c\u8bbe\u7f6e SQ \u7684\u961f\u5217\u957f\u5ea6\uff0c\u5373 SQ \u961f\u5217\u7528\u5b8c\u624d\u5f00\u59cb\u963b\u585e\u7b49\u5f85 CQE\uff1b\nelse                              // data \u5904\u7406\u5df2\u7ecf\u5168\u90e8\u63d0\u4ea4\uff0c\ndepth = 1;                    // \u9608\u503c\u8bbe\u7f6e\u4e3a 1\uff0c\u5373\u53ea\u8981\u8fd8\u6709 SQE \u672a\u5b8c\u6210\uff0c\u5c31\u963b\u585e\u7b49\u5f85 CQE\n\n// \u4e0b\u9762\u8fd9\u4e2a while \u53ea\u6709 SQ \u961f\u5217\u7528\u5b8c\u6216 data \u5168\u90e8\u63d0\u4ea4\u4e4b\u540e\u624d\u4f1a\u6267\u884c\u5230\nwhile (inflight &gt;= depth) {       // \u5982\u679c\u6240\u6709 SQE \u90fd\u5df2\u7ecf\u7528\u5b8c\uff0c\u6216\u8005\u6240\u6709 data read-&gt;write \u8bf7\u6c42\u90fd\u5df2\u7ecf\u63d0\u4ea4\nio_uring_wait_cqe(ring, &amp;cqe);// \u7b49\u5f85\u5185\u6838 completion \u4e8b\u4ef6\nhandle_cqe(ring, cqe);        // \u5904\u7406 completion \u4e8b\u4ef6\uff1a\u91ca\u653e SQE \u5185\u5b58\u7f13\u51b2\u533a\uff0c\u901a\u77e5\u5185\u6838 CQE \u5df2\u6d88\u8d39\ninflight--;                   // \u6b63\u5728\u8fdb\u884c\u4e2d\u7684 SQE \u6570\u91cf -1\n}\n}\n\nreturn 0;\n}\n\nstatic int setup_context(unsigned entries, struct io_uring *ring) {\nio_uring_queue_init(entries, ring, 0);\nreturn 0;\n}\n\nstatic int get_file_size(int fd, off_t *size) {\nstruct stat st;\n\nif (fstat(fd, &amp;st) &lt; 0)\nreturn -1;\nif (S_ISREG(st.st_mode)) {\n*size = st.st_size;\nreturn 0;\n} else if (S_ISBLK(st.st_mode)) {\nunsigned long long bytes;\n\nif (ioctl(fd, BLKGETSIZE64, &amp;bytes) != 0)\nreturn -1;\n\n*size = bytes;\nreturn 0;\n}\n\nreturn -1;\n}\n\nint main(int argc, char *argv[]) {\nstruct io_uring ring;\noff_t insize;\nint ret;\n\ninfd = open(argv[1], O_RDONLY);\noutfd = open(argv[2], O_WRONLY | O_CREAT | O_TRUNC, 0644);\n\nif (setup_context(QD, &amp;ring))\nreturn 1;\nif (get_file_size(infd, &amp;insize))\nreturn 1;\n\nret = copy_file(&amp;ring, insize);\n\nclose(infd);\nclose(outfd);\nio_uring_queue_exit(&amp;ring);\nreturn ret;\n}\n</code></pre>"},{"location":"Documents/A-Linux/%E6%80%A7%E8%83%BD/%E5%BC%82%E6%AD%A5io/#423","title":"4.2.3 \u5176\u4ed6\u8bf4\u660e","text":"<p>\u4ee3\u7801\u4e2d\u5b9e\u73b0\u4e86\u4e09\u4e2a\u51fd\u6570\uff1a 1. <code>copy_file()</code>\uff1a\u9ad8\u5c42\u590d\u5236\u5faa\u73af\u903b\u8f91\uff1b\u5b83\u4f1a\u8c03\u7528 <code>queue_rw_pair(ring, this_size, offset)</code> \u6765\u6784\u9020 SQE pair\uff1b \u5e76\u901a\u8fc7\u4e00\u6b21 <code>io_uring_submit()</code> \u8c03\u7528\u5c06\u6240\u6709\u6784\u5efa\u7684 SQE pair \u63d0\u4ea4\u3002</p> <p>\u8fd9\u4e2a\u51fd\u6570\u7ef4\u62a4\u4e86\u4e00\u4e2a\u6700\u5927 DQ \u6570\u91cf\u7684 inflight SQE\uff0c\u53ea\u8981\u6570\u636e copy \u8fd8\u5728\u8fdb\u884c\u4e2d\uff1b\u5426\u5219\uff0c\u5373\u6570\u636e\u5df2\u7ecf\u5168\u90e8\u8bfb\u53d6\u5b8c\u6210\uff0c\u5c31\u5f00\u59cb\u7b49\u5f85\u548c\u6536\u5272\u6240\u6709\u7684 CQE\u3002</p> <ol> <li> <p><code>queue_rw_pair()</code> \u6784\u9020\u4e00\u4e2a read-write SQE pair.    read SQE \u7684 <code>IOSQE_IO_LINK</code> flag \u8868\u793a\u5f00\u59cb\u4e00\u4e2a chain\uff0cwrite SQE \u4e0d\u7528\u8bbe\u7f6e\u8fd9\u4e2a flag\uff0c\u6807\u5fd7\u7740\u8fd9\u4e2a chain \u7684\u7ed3\u675f\u3002 \u7528\u6237 data \u5b57\u6bb5\u8bbe\u7f6e\u4e3a\u540c\u4e00\u4e2a data \u63cf\u8ff0\u7b26\uff0c\u5e76\u4e14\u5728\u968f\u540e\u7684 completion \u5904\u7406\u4e2d\u4f1a\u7528\u5230\u3002</p> </li> <li> <p><code>handle_cqe()</code> \u4ece CQE \u4e2d\u63d0\u53d6\u4e4b\u524d\u7531 <code>queue_rw_pair()</code> \u4fdd\u5b58\u7684 data \u63cf\u8ff0\u7b26\uff0c\u5e76\u5728\u63cf\u8ff0\u7b26\u4e2d\u8bb0\u5f55\u5904\u7406\u8fdb\u5c55\uff08index\uff09\u3002</p> </li> </ol> <p>\u5982\u679c\u4e4b\u524d\u8bf7\u6c42\u88ab\u53d6\u6d88\uff0c\u5b83\u8fd8\u4f1a\u91cd\u65b0\u63d0\u4ea4 read-write pair\u3002</p> <p>\u4e00\u4e2a CQE pair \u7684\u4e24\u4e2a member \u90fd\u5904\u7406\u5b8c\u6210\u4e4b\u540e\uff08<code>index==2</code>\uff09\uff0c\u91ca\u653e\u5171\u4eab\u7684 data descriptor\u3002 \u6700\u540e\u901a\u77e5\u5185\u6838\u8fd9\u4e2a CQE \u5df2\u7ecf\u88ab\u6d88\u8d39\u3002</p>"},{"location":"Documents/A-Linux/%E6%80%A7%E8%83%BD/%E6%80%A7%E8%83%BD%E7%9F%A5%E8%AF%86/","title":"\u6027\u80fd\u77e5\u8bc6","text":""},{"location":"Documents/A-Linux/%E6%80%A7%E8%83%BD/%E6%80%A7%E8%83%BD%E7%9F%A5%E8%AF%86/#1-open-o_directo_synco_dsync","title":"1 \u6587\u4ef6 open \u6807\u5fd7 O_DIRECT\u3001O_SYNC\u3001O_DSYNC","text":"<p>https://blog.csdn.net/AXW2013/article/details/70242228 https://stackoverflow.com/questions/41257656/what-does-o-direct-really-mean</p> <ul> <li>O_DIRECT: \u65e0\u7f13\u51b2\u7684\u8f93\u5165\u3001\u8f93\u51fa\u3002</li> <li>O_SYNC\uff08fsync\uff09\uff1a\u4ee5\u540c\u6b65 IO \u65b9\u5f0f\u6253\u5f00\u6587\u4ef6\uff08\u4fdd\u8bc1data \u548c metadata \u90fd\u4f1a\u66f4\u65b0\u5230 disk\uff09\u3002</li> <li>O_DSYNC\uff08fdatasync\uff09\uff1a\u4ee5\u540c\u6b65 IO \u65b9\u5f0f\u6253\u5f00\u6587\u4ef6\uff08\u4ec5\u4ec5\u4fdd\u8bc1 data \u66f4\u65b0\u5230 disk\uff09\u3002</li> </ul>"},{"location":"Documents/A-Linux/%E6%80%A7%E8%83%BD/%E6%80%A7%E8%83%BD%E7%9F%A5%E8%AF%86/#2","title":"2 \u6027\u80fd\u5de5\u5177","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E4%B8%8B%E8%BD%BD%E5%B7%A5%E5%85%B7/","title":"Linux\u4e0b\u8f7d\u5de5\u5177","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E4%B8%8B%E8%BD%BD%E5%B7%A5%E5%85%B7/#1-dpkg","title":"1 dpkg","text":"<ul> <li>\u5e73\u53f0\uff1aUbuntu\u3001Debian</li> <li>\u7b80\u4ecb\uff1adpkg \u547d\u4ee4\u662f Debian Linux \u7cfb\u7edf\u7528\u6765\u5b89\u88c5\u3001\u521b\u5efa\u548c\u7ba1\u7406\u8f6f\u4ef6\u5305\u7684\u5b9e\u7528\u5de5\u5177\u3002</li> <li>\u547d\u4ee4\u884c\u4f7f\u7528</li> </ul> <pre><code># dpkg(\u9009\u9879)(\u53c2\u6570)\n$ dpkg --help\n\nUsage: dpkg [&lt;option&gt; ...] &lt;command&gt;\n\n\n# \u9009\u9879\n-i\uff1a\u5b89\u88c5\u8f6f\u4ef6\u5305\n-r\uff1a\u5220\u9664\u8f6f\u4ef6\u5305\n-P\uff1a\u5220\u9664\u8f6f\u4ef6\u5305\u7684\u540c\u65f6\u5220\u9664\u5176\u914d\u7f6e\u6587\u4ef6\n-L\uff1a\u663e\u793a\u4e8e\u8f6f\u4ef6\u5305\u5173\u8054\u7684\u6587\u4ef6\n-l\uff1a\u663e\u793a\u5df2\u5b89\u88c5\u8f6f\u4ef6\u5305\u5217\u8868\n--unpack\uff1a\u89e3\u5f00\u8f6f\u4ef6\u5305\n-c\uff1a\u663e\u793a\u8f6f\u4ef6\u5305\u5185\u6587\u4ef6\u5217\u8868\n--confiugre\uff1a\u914d\u7f6e\u8f6f\u4ef6\u5305\n\n\n# \u53c2\u6570\nDeb\u8f6f\u4ef6\u5305\uff1a\u6307\u5b9a\u8981\u64cd\u4f5c\u7684.deb\u8f6f\u4ef6\u5305\n</code></pre> <ul> <li>\u793a\u4f8b\u6f14\u793a\u8bf4\u660e</li> </ul> <pre><code># \u5b89\u88c5\u5305\n$ dpkg -i package.deb\n\n# \u5220\u9664\u5305\n$ dpkg -r package\n\n# \u5220\u9664\u5305\uff08\u5305\u62ec\u914d\u7f6e\u6587\u4ef6\uff09\n$ dpkg -P package\n\n# \u5217\u51fa\u4e0e\u8be5\u5305\u5173\u8054\u7684\u6587\u4ef6\n$ dpkg -L package\n\n# \u663e\u793a\u8be5\u5305\u7684\u7248\u672c\n$ dpkg -l package\n\n# \u89e3\u5f00deb\u5305\u7684\u5185\u5bb9\n$ dpkg --unpack package.deb\n\n# \u641c\u7d22\u6240\u5c5e\u7684\u5305\u5185\u5bb9\n$ dpkg -S keyword\n\n# \u5217\u51fa\u5f53\u524d\u5df2\u5b89\u88c5\u7684\u5305\n$ dpkg -l\n\n# \u5217\u51fadeb\u5305\u7684\u5185\u5bb9\n$ dpkg -c package.deb\n\n# \u914d\u7f6e\u5305\n$ dpkg --configure package\n\n# \u5217\u51fa\u5df2\u5b89\u88c5\u8f6f\u4ef6\u5305\n$ sudo dpkg-query -l\n$ sudo dpkg-query -l | less\n$ sudo dpkg-query -l | grep tmux\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E4%B8%8B%E8%BD%BD%E5%B7%A5%E5%85%B7/#2-apt","title":"2 apt","text":"<ul> <li>\u5e73\u53f0\uff1aUbuntu\u3001Debian</li> <li>\u7b80\u4ecb\uff1aapt-get \u547d\u4ee4\u662f Debian Linux \u53d1\u884c\u7248\u4e2d\u7684 APT \u8f6f\u4ef6\u5305\u7ba1\u7406\u5de5\u5177\u3002\u6240\u6709\u57fa\u4e8e Debian \u7684\u53d1\u884c\u90fd\u4f7f\u7528\u8fd9\u4e2a\u5305\u7ba1\u7406\u7cfb\u7edf\u3002deb \u5305\u53ef\u4ee5\u628a\u4e00\u4e2a\u5e94\u7528\u7684\u6587\u4ef6\u5305\u5728\u4e00\u8d77\uff0c\u5927\u4f53\u5c31\u5982\u540c Windows \u4e0a\u7684\u5b89\u88c5\u6587\u4ef6\u3002</li> <li>\u547d\u4ee4\u884c\u4f7f\u7528</li> </ul> <pre><code># apt-get(\u9009\u9879)(\u53c2\u6570)\n$ apt --help\nUsage: apt [options] command\n\n# \u9009\u9879\n-c\uff1a\u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\n\n# \u53c2\u6570\n\u7ba1\u7406\u6307\u4ee4\uff1a\u5bf9APT\u8f6f\u4ef6\u5305\u7684\u7ba1\u7406\u64cd\u4f5c\n\u8f6f\u4ef6\u5305\uff1a\u6307\u5b9a\u8981\u64cd\u7eb5\u7684\u8f6f\u4ef6\u5305\n</code></pre> <ul> <li>\u793a\u4f8b\u6f14\u793a\u8bf4\u660e</li> </ul> <pre><code># \u66f4\u65b0\u6240\u6709\u5df2\u5b89\u88c5\u7684\u8f6f\u4ef6\u5305\n$ apt-get upgrade\n\n# \u5c06\u7cfb\u7edf\u5347\u7ea7\u5230\u65b0\u7248\u672c\n$ apt-get dist-upgrade\n\n# \u66f4\u65b0\n$ apt-get update\n\n# \u5b89\u88c5\u4e00\u4e2a\u65b0\u8f6f\u4ef6\u5305\n$ apt-get install packagename\n\n# \u5378\u8f7d\u4e00\u4e2a\u5df2\u5b89\u88c5\u7684\u8f6f\u4ef6\u5305\uff08\u4fdd\u7559\u914d\u7f6e\u6587\u4ef6\uff09\n$ apt-get remove packagename\n\n# \u5378\u8f7d\u4e00\u4e2a\u5df2\u5b89\u88c5\u7684\u8f6f\u4ef6\u5305\uff08\u5220\u9664\u914d\u7f6e\u6587\u4ef6\uff09\n$ apt-get \u2013purge remove packagename\n\n# \u6765\u5220\u9664\u4f60\u5df2\u7ecf\u5220\u6389\u7684\u8f6f\u4ef6\n$ apt-get autoclean apt\n\n# \u4f1a\u628a\u5b89\u88c5\u7684\u8f6f\u4ef6\u7684\u5907\u4efd\u4e5f\u5220\u9664\n$ apt-get clean\n\n# \u5217\u51fa\u5df2\u5b89\u88c5\u8f6f\u4ef6\u5305\n$ sudo apt list --installed\n$ sudo apt list --installed | less\n$ sudo apt list --installed | grep tmux\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E4%B8%8B%E8%BD%BD%E5%B7%A5%E5%85%B7/#3-rpm","title":"3 rpm","text":"<ul> <li>\u5e73\u53f0RHEL\u3001CentOS</li> <li>\u7b80\u4ecb\uff1arpm \u547d\u4ee4\u662f RPM \u8f6f\u4ef6\u5305\u7684\u7ba1\u7406\u5de5\u5177\u3002rpm \u539f\u672c\u662f Red Hat Linux \u53d1\u884c\u7248\u4e13\u95e8\u7528\u6765\u7ba1\u7406 Linux \u5404\u9879\u5957\u4ef6\u7684\u7a0b\u5e8f\uff0c\u7531\u4e8e\u5b83\u9075\u5faa GPL \u89c4\u5219\u4e14\u529f\u80fd\u5f3a\u5927\u65b9\u4fbf\uff0c\u56e0\u800c\u5e7f\u53d7\u6b22\u8fce\u3002\u9010\u6e10\u53d7\u5230\u5176\u4ed6\u53d1\u884c\u7248\u7684\u91c7\u7528\u3002RPM \u5957\u4ef6\u7ba1\u7406\u65b9\u5f0f\u7684\u51fa\u73b0\uff0c\u8ba9 Linux \u6613\u4e8e\u5b89\u88c5\uff0c\u5347\u7ea7\uff0c\u95f4\u63a5\u63d0\u5347\u4e86 Linux \u7684\u9002\u7528\u5ea6\u3002</li> <li>\u547d\u4ee4\u884c\u4f7f\u7528</li> </ul> <pre><code># rpm(\u9009\u9879)(\u53c2\u6570)\n$ rpm --help\nUsage: rpm [OPTION...]\n\n# \u9009\u9879\n-a\uff1a\u67e5\u8be2\u6240\u6709\u5957\u4ef6\n-c\uff1a\u53ea\u5217\u51fa\u7ec4\u6001\u914d\u7f6e\u6587\u4ef6\uff0c\u672c\u53c2\u6570\u9700\u914d\u5408\"-l\"\u53c2\u6570\u4f7f\u7528\n-d\uff1a\u53ea\u5217\u51fa\u6587\u672c\u6587\u4ef6\uff0c\u672c\u53c2\u6570\u9700\u914d\u5408\"-l\"\u53c2\u6570\u4f7f\u7528\n-e&lt;\u5957\u4ef6\u6863&gt;\u6216--erase&lt;\u5957\u4ef6\u6863&gt;\uff1a\u5220\u9664\u6307\u5b9a\u7684\u5957\u4ef6\n-f&lt;\u6587\u4ef6&gt;+\uff1a\u67e5\u8be2\u62e5\u6709\u6307\u5b9a\u6587\u4ef6\u7684\u5957\u4ef6\n-h\u6216--hash\uff1a\u5957\u4ef6\u5b89\u88c5\u65f6\u5217\u51fa\u6807\u8bb0\n-i\uff1a\u663e\u793a\u5957\u4ef6\u7684\u76f8\u5173\u4fe1\u606f\n-i&lt;\u5957\u4ef6\u6863&gt;\u6216--install&lt;\u5957\u4ef6\u6863&gt;\uff1a\u5b89\u88c5\u6307\u5b9a\u7684\u5957\u4ef6\u6863\n-l\uff1a\u663e\u793a\u5957\u4ef6\u7684\u6587\u4ef6\u5217\u8868\n-p&lt;\u5957\u4ef6\u6863&gt;+\uff1a\u67e5\u8be2\u6307\u5b9a\u7684RPM\u5957\u4ef6\u6863\n-q\uff1a\u4f7f\u7528\u8be2\u95ee\u6a21\u5f0f\uff0c\u5f53\u9047\u5230\u4efb\u4f55\u95ee\u9898\u65f6\uff0crpm\u6307\u4ee4\u4f1a\u5148\u8be2\u95ee\u7528\u6237\n-R\uff1a\u663e\u793a\u5957\u4ef6\u7684\u5173\u8054\u6027\u4fe1\u606f\n-s\uff1a\u663e\u793a\u6587\u4ef6\u72b6\u6001\uff0c\u672c\u53c2\u6570\u9700\u914d\u5408\"-l\"\u53c2\u6570\u4f7f\u7528\n-U&lt;\u5957\u4ef6\u6863&gt;\u6216--upgrade&lt;\u5957\u4ef6\u6863&gt;\uff1a\u5347\u7ea7\u6307\u5b9a\u7684\u5957\u4ef6\u6863\n-v\uff1a\u663e\u793a\u6307\u4ee4\u6267\u884c\u8fc7\u7a0b\n-vv\uff1a\u8be6\u7ec6\u663e\u793a\u6307\u4ee4\u6267\u884c\u8fc7\u7a0b\uff0c\u4fbf\u4e8e\u6392\u9519\n\n# \u53c2\u6570\n\u8f6f\u4ef6\u5305\uff1a\u6307\u5b9a\u8981\u64cd\u7eb5\u7684rpm\u8f6f\u4ef6\u5305\n</code></pre> <ul> <li>\u793a\u4f8b\u6f14\u793a\u8bf4\u660e</li> </ul> <pre><code># \u5b89\u88c5\n$ rpm -ivh your-package.rpm\n\n# \u5f3a\u5236\u5b89\u88c5\n$ rpm --force -ivh your-package.rpm\n\n# \u5378\u8f7d\n$ rpm -e proftpd-1.2.8\n\n# \u5217\u51fa\u6240\u6709\u5b89\u88c5\u8fc7\u7684\u5305\n$ rpm -qa\n$ rpm -qa | grep sql\n\n# rpm\u5305\u4e2d\u7684\u6587\u4ef6\u5b89\u88c5\u5230\u90a3\u91cc\n$ rpm -ql ***.rpm\n# \u4e00\u4e2a\u6ca1\u6709\u5b89\u88c5\u8fc7\u7684\u8f6f\u4ef6\u5305\n$ rpm -qlp ***.rpm\n# \u4e00\u4e2a\u5df2\u7ecf\u5b89\u88c5\u8fc7\u7684\u8f6f\u4ef6\u5305\n$ rpm -ql ***.rpm\n\n# \u67d0\u4e2a\u7a0b\u5e8f\u662f\u54ea\u4e2a\u8f6f\u4ef6\u5305\u5b89\u88c5\n$ rpm -qf `which \u7a0b\u5e8f\u540d`   # \u8fd4\u56de\u8f6f\u4ef6\u5305\u7684\u5168\u540d\n$ rpm -qif `which \u7a0b\u5e8f\u540d`  # \u8fd4\u56de\u8f6f\u4ef6\u5305\u7684\u6709\u5173\u4fe1\u606f\n$ rpm -qlf `which \u7a0b\u5e8f\u540d`  # \u8fd4\u56de\u8f6f\u4ef6\u5305\u7684\u6587\u4ef6\u5217\u8868\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E4%B8%8B%E8%BD%BD%E5%B7%A5%E5%85%B7/#4-yum","title":"4 yum","text":"<ul> <li>\u5e73\u53f0\uff1aCentOS6\u3001CentOS7</li> <li>\u7b80\u4ecb\uff1ayum \u547d\u4ee4\u662f\u5728 Fedora \u548c RedHat \u4ee5\u53ca SUSE \u4e2d\u57fa\u4e8e rpm \u7684\u8f6f\u4ef6\u5305\u7ba1\u7406\u5668\uff0c\u5b83\u53ef\u4ee5\u4f7f\u7cfb\u7edf\u7ba1\u7406\u4eba\u5458\u4ea4\u4e92\u548c\u81ea\u52a8\u5316\u5730\u66f4\u65b0\u4e0e\u7ba1\u7406 RPM \u8f6f\u4ef6\u5305\uff0c\u80fd\u591f\u4ece\u6307\u5b9a\u7684\u670d\u52a1\u5668\u81ea\u52a8\u4e0b\u8f7d RPM \u5305\u5e76\u4e14\u5b89\u88c5\uff0c\u53ef\u4ee5\u81ea\u52a8\u5904\u7406\u4f9d\u8d56\u6027\u5173\u7cfb\uff0c\u5e76\u4e14\u4e00\u6b21\u5b89\u88c5\u6240\u6709\u4f9d\u8d56\u7684\u8f6f\u4f53\u5305\uff0c\u65e0\u987b\u7e41\u7410\u5730\u4e00\u6b21\u6b21\u4e0b\u8f7d\u3001\u5b89\u88c5\u3002</li> <li>\u547d\u4ee4\u884c\u4f7f\u7528</li> </ul> <pre><code># yum(\u9009\u9879)(\u53c2\u6570)\n$ yum --help\nLoaded plugins: fastestmirror, langpacks\nUsage: yum [options] COMMAND\n\n# \u9009\u9879\n-h\uff1a\u663e\u793a\u5e2e\u52a9\u4fe1\u606f\uff1b\n-y\uff1a\u5bf9\u6240\u6709\u7684\u63d0\u95ee\u90fd\u56de\u7b54\u201cyes\u201d\uff1b\n-c\uff1a\u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\uff1b\n-q\uff1a\u5b89\u9759\u6a21\u5f0f\uff1b\n-v\uff1a\u8be6\u7ec6\u6a21\u5f0f\uff1b\n-d\uff1a\u8bbe\u7f6e\u8c03\u8bd5\u7b49\u7ea7\uff080-10\uff09\uff1b\n-e\uff1a\u8bbe\u7f6e\u9519\u8bef\u7b49\u7ea7\uff080-10\uff09\uff1b\n-R\uff1a\u8bbe\u7f6eyum\u5904\u7406\u4e00\u4e2a\u547d\u4ee4\u7684\u6700\u5927\u7b49\u5f85\u65f6\u95f4\uff1b\n-C\uff1a\u5b8c\u5168\u4ece\u7f13\u5b58\u4e2d\u8fd0\u884c\uff0c\u800c\u4e0d\u53bb\u4e0b\u8f7d\u6216\u8005\u66f4\u65b0\u4efb\u4f55\u5934\u6587\u4ef6\u3002\n\n# \u53c2\u6570\ninstall\uff1a\u5b89\u88c5rpm\u8f6f\u4ef6\u5305\uff1b\nupdate\uff1a\u66f4\u65b0rpm\u8f6f\u4ef6\u5305\uff1b\ncheck-update\uff1a\u68c0\u67e5\u662f\u5426\u6709\u53ef\u7528\u7684\u66f4\u65b0rpm\u8f6f\u4ef6\u5305\uff1b\nremove\uff1a\u5220\u9664\u6307\u5b9a\u7684rpm\u8f6f\u4ef6\u5305\uff1b\nlist\uff1a\u663e\u793a\u8f6f\u4ef6\u5305\u7684\u4fe1\u606f\uff1b\nsearch\uff1a\u68c0\u67e5\u8f6f\u4ef6\u5305\u7684\u4fe1\u606f\uff1b\ninfo\uff1a\u663e\u793a\u6307\u5b9a\u7684rpm\u8f6f\u4ef6\u5305\u7684\u63cf\u8ff0\u4fe1\u606f\u548c\u6982\u8981\u4fe1\u606f\uff1b\nclean\uff1a\u6e05\u7406yum\u8fc7\u671f\u7684\u7f13\u5b58\uff1b\nshell\uff1a\u8fdb\u5165yum\u7684shell\u63d0\u793a\u7b26\uff1b\nresolvedep\uff1a\u663e\u793arpm\u8f6f\u4ef6\u5305\u7684\u4f9d\u8d56\u5173\u7cfb\uff1b\nlocalinstall\uff1a\u5b89\u88c5\u672c\u5730\u7684rpm\u8f6f\u4ef6\u5305\uff1b\nlocalupdate\uff1a\u663e\u793a\u672c\u5730rpm\u8f6f\u4ef6\u5305\u8fdb\u884c\u66f4\u65b0\uff1b\ndeplist\uff1a\u663e\u793arpm\u8f6f\u4ef6\u5305\u7684\u6240\u6709\u4f9d\u8d56\u5173\u7cfb\u3002\n</code></pre> <ul> <li>\u793a\u4f8b\u6f14\u793a\u8bf4\u660e</li> </ul> <pre><code># \u5b89\u88c5\n$ yum install             # \u5168\u90e8\u5b89\u88c5\n$ yum install package1    # \u5b89\u88c5\u6307\u5b9a\u7684\u5b89\u88c5\u5305package1\n$ yum groupinsall group1  # \u5b89\u88c5\u7a0b\u5e8f\u7ec4group1\n\n# \u66f4\u65b0\u548c\u5347\u7ea7\n$ yum update              # \u5168\u90e8\u66f4\u65b0\n$ yum update package1     # \u66f4\u65b0\u6307\u5b9a\u7a0b\u5e8f\u5305package1\n$ yum check-update        # \u68c0\u67e5\u53ef\u66f4\u65b0\u7684\u7a0b\u5e8f\n$ yum upgrade package1    # \u5347\u7ea7\u6307\u5b9a\u7a0b\u5e8f\u5305package1\n$ yum groupupdate group1  # \u5347\u7ea7\u7a0b\u5e8f\u7ec4group1\n\n# \u67e5\u627e\u663e\u793a\n$ yum list installed | grep mysql\n$ yum list installed mysql*\n$ yum info package1     # \u663e\u793a\u5b89\u88c5\u5305\u4fe1\u606fpackage1\n$ yum list              # \u663e\u793a\u6240\u6709\u5df2\u7ecf\u5b89\u88c5\u548c\u53ef\u4ee5\u5b89\u88c5\u7684\u7a0b\u5e8f\u5305\n$ yum list package1     # \u663e\u793a\u6307\u5b9a\u7a0b\u5e8f\u5305\u5b89\u88c5\u60c5\u51b5package1\n$ yum groupinfo group1  # \u663e\u793a\u7a0b\u5e8f\u7ec4group1\u4fe1\u606f\n\n# \u5220\u9664\u7a0b\u5e8f\n$ yum remove/erase package1  # \u5220\u9664\u7a0b\u5e8f\u5305package1\n$ yum groupremove group1     # \u5220\u9664\u7a0b\u5e8f\u7ec4group1\n$ yum deplist package1       # \u67e5\u770b\u7a0b\u5e8fpackage1\u4f9d\u8d56\u60c5\u51b5\n\n# \u6e05\u9664\u7f13\u5b58\n$ yum clean packages    # \u6e05\u9664\u7f13\u5b58\u76ee\u5f55\u4e0b\u7684\u8f6f\u4ef6\u5305\n$ yum clean headers     # \u6e05\u9664\u7f13\u5b58\u76ee\u5f55\u4e0b\u7684 headers\n$ yum clean oldheaders  # \u6e05\u9664\u7f13\u5b58\u76ee\u5f55\u4e0b\u65e7\u7684 headers\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E4%B8%8B%E8%BD%BD%E5%B7%A5%E5%85%B7/#5-dnf","title":"5 dnf","text":"<ul> <li>\u5e73\u53f0\uff1aRHEL8\u3001CentOS8</li> <li>\u7b80\u4ecb\uff1aDNF \u4f7f\u7528 libsolv \u8fdb\u884c\u4f9d\u8d56\u89e3\u6790\uff0c\u7531 SUSE \u5f00\u53d1\u548c\u7ef4\u62a4\uff0c\u65e8\u5728\u63d0\u9ad8\u6027\u80fd\u3002Yum \u4e3b\u8981\u662f\u7528 Python \u7f16\u5199\u7684\uff0c\u5b83\u6709\u81ea\u5df1\u7684\u5e94\u5bf9\u4f9d\u8d56\u89e3\u6790\u7684\u65b9\u6cd5\u3002\u5b83\u7684 API \u6ca1\u6709\u5b8c\u6574\u7684\u6587\u6863\uff0c\u5b83\u7684\u6269\u5c55\u7cfb\u7edf\u53ea\u5141\u8bb8 Python \u63d2\u4ef6\u3002Yum \u662f RPM \u7684\u524d\u7aef\u5de5\u5177\uff0c\u5b83\u7ba1\u7406\u4f9d\u8d56\u5173\u7cfb\u548c\u8d44\u6e90\u5e93\uff0c\u7136\u540e\u4f7f\u7528 RPM \u6765\u5b89\u88c5\u3001\u4e0b\u8f7d\u548c\u5220\u9664\u5305\u3002</li> </ul> <p>\u7531\u4e8e Yum \u4e2d\u8bb8\u591a\u957f\u671f\u5b58\u5728\u7684\u95ee\u9898\u4ecd\u672a\u5f97\u5230\u89e3\u51b3\uff0c\u56e0\u6b64 Yum \u5305\u7ba1\u7406\u5668\u5df2\u88ab DNF \u5305\u7ba1\u7406\u5668\u53d6\u4ee3\u3002\u8fd9\u4e9b\u95ee\u9898\u5305\u62ec\u6027\u80fd\u5dee\u3001\u5185\u5b58\u5360\u7528\u8fc7\u591a\u3001\u4f9d\u8d56\u89e3\u6790\u901f\u5ea6\u53d8\u6162\u7b49\u3002\u4e24\u4e2a\u7ba1\u7406\u5305\u5de5\u5177\u7684\u66f4\u591a\u533a\u522b\u53ef\u4ee5\u67e5\u770b\uff0cWhat is the difference between DNF and YUM? \u8fdb\u884c\u9605\u8bfb\u3002 - \u5b89\u88c5 DNF \u5305\u7ba1\u7406\u5668</p> <pre><code>#\u00a0\u4f9d\u8d56\n$ yum\u00a0install\u00a0-y\u00a0epel-release\n\n#\u00a0\u5b89\u88c5\n$\u00a0yum\u00a0install\u00a0-y\u00a0dnf\n\n#\u00a0\u68c0\u67e5\n$\u00a0dnf\u00a0\u2013version\n</code></pre> <ul> <li>\u5e38\u7528\u547d\u4ee4\u4ecb\u7ecd</li> </ul> <pre><code># \u5b89\u88c5\u8f6f\u4ef6\u5305\n$ dnf install nano\n\n# \u5347\u7ea7\u8f6f\u4ef6\u5305\n$ dnf update systemd\n\n# \u5347\u7ea7\u6240\u6709\u7cfb\u7edf\u8f6f\u4ef6\u5305\n$ dnf update\n$ dnf upgrade\n\n# \u68c0\u67e5\u7cfb\u7edf\u8f6f\u4ef6\u5305\u7684\u66f4\u65b0\n$ dnf check-update\n\n# \u5220\u9664\u8f6f\u4ef6\u5305\n$ dnf remove nano\n$ dnf erase nano\n\n# \u5220\u9664\u65e0\u7528\u5b64\u7acb\u7684\u8f6f\u4ef6\u5305\n$ dnf autoremove\n\n# \u5220\u9664\u7f13\u5b58\u7684\u65e0\u7528\u8f6f\u4ef6\u5305\n$ dnf clean all\n\n# \u67e5\u770b\u7cfb\u7edf\u4e2d\u53ef\u7528\u7684DNF\u8f6f\u4ef6\u5e93\n$ dnf repolist\n\n# \u67e5\u770b\u7cfb\u7edf\u4e2d\u53ef\u7528\u548c\u4e0d\u53ef\u7528\u7684\u6240\u6709\u7684DNF\u8f6f\u4ef6\u5e93\n$ dnf repolist all\n\n# \u5217\u51fa\u6240\u6709RPM\u5305\n$ dnf list\n\n# \u5217\u51fa\u6240\u6709\u5b89\u88c5\u4e86\u7684RPM\u5305\n$ dnf list installed\n\n# \u5217\u51fa\u6240\u6709\u53ef\u4f9b\u5b89\u88c5\u7684RPM\u5305\n$ dnf list available\n\n# \u641c\u7d22\u8f6f\u4ef6\u5e93\u4e2d\u7684RPM\u5305\n$ dnf search nano\n\n# \u67e5\u627e\u67d0\u4e00\u6587\u4ef6\u7684\u63d0\u4f9b\u8005\n$ dnf provides /bin/bash\n\n# \u67e5\u770b\u8f6f\u4ef6\u5305\u8be6\u60c5\n$ dnf info nano\n\n# \u67e5\u770b\u6240\u6709\u7684\u8f6f\u4ef6\u5305\u7ec4\n$ dnf grouplist\n\n# \u5b89\u88c5\u4e00\u4e2a\u8f6f\u4ef6\u5305\u7ec4\n$ dnf groupinstall 'Educational Software'\n\n# \u5347\u7ea7\u4e00\u4e2a\u8f6f\u4ef6\u5305\u7ec4\u4e2d\u7684\u8f6f\u4ef6\u5305\n$ dnf groupupdate 'Educational Software'\n\n# \u5220\u9664\u4e00\u4e2a\u8f6f\u4ef6\u5305\u7ec4\n$ dnf groupremove 'Educational Software'\n\n# \u91cd\u65b0\u5b89\u88c5\u7279\u5b9a\u8f6f\u4ef6\u5305\n$ dnf reinstall nano\n\n# \u56de\u6eda\u67d0\u4e2a\u7279\u5b9a\u8f6f\u4ef6\u7684\u7248\u672c\n$ dnf downgrade acpid\n\n# \u67e5\u770bDNF\u547d\u4ee4\u7684\u6267\u884c\u5386\u53f2\n$ dnf history\n\n# \u67e5\u770b\u6240\u6709\u7684DNF\u547d\u4ee4\u53ca\u5176\u7528\u9014\n$ dnf help\n\n# \u83b7\u53d6\u6709\u5173\u67d0\u6761\u547d\u4ee4\u7684\u4f7f\u7528\u5e2e\u52a9\n$ dnf help clean\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/","title":"Linix \u547d\u4ee4","text":"<p>\u4ee5\u4e0b\u6240\u6709\u547d\u4ee4\u90fd\u53ea\u63cf\u8ff0\u4e86\u5e38\u7528\u7684\u9009\u9879\uff0c\u5ffd\u7565\u4e86\u5f88\u5c11\u6d89\u53ca\u5230\u7684\u9009\u9879</p>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#1-man","title":"1 man \u624b\u518c\u6570\u5b57\u542b\u4e49","text":"<ul> <li><code>\u30101\u3011</code>:Executable programs or shell commands</li> <li><code>\u30102\u3011</code>:System calls (functions provided by the kernel)</li> <li><code>\u30103\u3011</code>:Library calls (functions within program libraries)</li> <li><code>\u30104\u3011</code>:Special files (usually found in /dev)</li> <li><code>\u30105\u3011</code>:File formats and conventions eg /etc/passwd</li> <li><code>\u30106\u3011</code>:Games</li> <li><code>\u30107\u3011</code>:Miscellaneous (including macro packages and conventions), e.g. man(7), groff(7)</li> <li><code>\u30108\u3011</code>:System administration commands (usually only for root)</li> <li><code>\u30109\u3011</code>:Kernel routines [Non standard]</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#2","title":"2 \u57fa\u672c\u64cd\u4f5c","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#21","title":"2.1 \u547d\u4ee4\u8fde\u63a5\u7b26<code>&amp;&amp;</code>\u3001<code>||</code>\u548c<code>;</code>","text":"<ul> <li><code>&amp;&amp;</code>\u8fde\u63a5\u7684\u591a\u6761\u547d\u4ee4\u4f1a\u6309\u987a\u5e8f\u6267\u884c\uff0c\u76f4\u5230\u547d\u4ee4\u51fa\u73b0\u9519\u8bef\u5c31\u505c\u6b62\u6267\u884c\u540e\u9762\u547d\u4ee4</li> <li><code>||</code>\u8fde\u63a5\u7684\u547d\u4ee4\u76f4\u5230\u6b63\u786e\u6267\u884c\u4e86\u4e00\u6761\u547d\u4ee4\u5c31\u4f1a\u7ec8\u6b62\u540e\u7eed\u547d\u4ee4\u7684\u6267\u884c</li> <li><code>;</code>\u8fde\u63a5\u7684\u547d\u4ee4\u4f1a\u6309\u987a\u5e8f\u4e00\u76f4\u6267\u884c\uff0c\u4e0d\u7ba1\u547d\u4ee4\u662f\u5426\u6709\u8bef\u90fd\u4e0d\u5f71\u54cd\u540e\u7eed\u7684\u547d\u4ee4\u6267\u884c</li> </ul> <pre><code>$ llk &amp;&amp; echo \"hello\"\nbash: llk\uff1a\u672a\u627e\u5230\u547d\u4ee4\n$ llk || echo \"hello\" || echo \"world\"\nbash: llk\uff1a\u672a\u627e\u5230\u547d\u4ee4\nhello\n\n$ llk ; echo \"hello\"\nbash: llk\uff1a\u672a\u627e\u5230\u547d\u4ee4\nhello\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#22","title":"2.2 \u6587\u4ef6\u91cd\u5b9a\u5411\u7b26","text":"<pre><code>\u91cd\u5b9a\u5411\u5230\u6587\u4ef6 `&gt;file`\u3002\u91cd\u5b9a\u5411\u5230stdout\u3001stderr\u9700\u8981 `&gt;&amp;1`\u6216`&gt;&amp;2`\uff0c\u9700\u8981\u4f7f\u7528`&amp;`\u7528\u4e8e\u533a\u5206\u662f\u6587\u4ef61\u8fd8\u662f\u6807\u51c6\u8f93\u51fa\n</code></pre> <p>\u91cd\u5b9a\u5411\u7b26<code>&gt;</code>,<code>&gt;&gt;</code>\u548c<code>&lt;</code>,<code>&lt;&lt;</code>;\u5176\u4e2d<code>&gt;&gt;</code>\u662f\u4ee5\u8ffd\u52a0\u65b9\u5f0f\u5199\u5165\u76ee\u6807\uff0c\u800c<code>&gt;</code>\u662f\u76f4\u63a5\u8986\u76d6\u76ee\u6807;<code>&lt;</code>\u5c06\u6e90\u4f5c\u4e3a\u8f93\u5165\u4f20\u7ed9\u547d\u4ee4\uff0c\u800c<code>&lt;&lt;</code>\u5c06\u591a\u6bb5\u4ee5\u5206\u9694\u7b26\u6807\u8bc6\u7684\u8303\u56f4\u6570\u636e\u4f20\u7ed9\u547d\u4ee4 - \u6587\u4ef6\u4fee\u9970\u7b26\uff1a   - <code>stdin</code>\u6807\u51c6\u8f93\u5165\u6d41\u4e3a0   - <code>stdout</code>\u6807\u51c6\u8f93\u51fa\u6d41\u4e3a1   - <code>stderr</code>\u6807\u51c6\u9519\u8bef\u6d41\u4e3a2 - <code>command 1&gt;file1 2&gt;file2</code>\u8868\u793a\u5c06command\u6267\u884c\u7ed3\u679c\u7684\u6b63\u786e\u7ed3\u679c\u91cd\u5b9a\u5411\u5230file1\uff0c\u9519\u8bef\u7ed3\u679c\u91cd\u5b9a\u5411\u5230file2(\u5982\u679c\u672a\u6307\u5b9a\u6587\u4ef6\u6807\u8bc6\u7b26\uff0c\u9ed8\u8ba4\u4e3a1\uff0c\u5373\u6807\u51c6\u8f93\u51fa\u6d41)</p> <pre><code>$ ls\ntest.sh\n$ cat -n test.sh 1  #!/bin/bash\n2\n3  echo \"hello world!\"\n4  # \u8fd9\u662f\u4e00\u6761\u9519\u8bef\u6307\u4ee4\n5  error\n     6  date\n$ bash test.sh 1&gt;1.out 2&gt;2.err\n$ cat 1.out\nhello world!\n2021\u5e74 01\u6708 14\u65e5 \u661f\u671f\u56db 17:06:17 CST\n$ cat 2.err\ntest.sh:\u884c5: error\uff1a\u672a\u627e\u5230\u547d\u4ee4\n</code></pre> <ul> <li><code>3&gt;&amp;1</code>\u7528\u6cd5</li> </ul> <pre><code>## \u521b\u5efa\u6587\u4ef6\u63cf\u8ff0\u7b263\uff0c\u5e76\u91cd\u5b9a\u5411\u52301\n$ exec 3&gt;&amp;1\n## \u5c06\u6587\u4ef6\u63cf\u8ff0\u7b261\u91cd\u5b9a\u5411\u52303,\u5373 1-&gt;3-&gt;1\n$ echo &gt;&amp;3 \"hello\"\nhello\n## \u521b\u5efa\u6587\u4ef6\u63cf\u8ff0\u7b263\uff0c\u5e76\u91cd\u5b9a\u5411\u5230/dev/null\n$ exec 3&gt;/dev/null\n## \u5c06\u6587\u4ef6\u63cf\u8ff0\u7b261\u91cd\u5b9a\u5411\u52303,\u5373 1-&gt;3-&gt;/dev/null\n$ echo &gt;&amp;3 \"hello\"\n</code></pre> <ul> <li><code>command 2&gt;file 1&gt;&amp;2</code>\u6216\u8005<code>command &gt;file 2&gt;&amp;1</code>\uff1a\u5176\u4e2d<code>1&gt;&amp;2</code>\u8868\u793a\u6807\u51c6\u8f93\u51fa\u6d41\u5408\u5e76\u5230\u6807\u51c6\u9519\u8bef\u6d41\u4e2d\uff0c<code>2&gt;&amp;1</code>\u53cd\u4e4b</li> </ul> <pre><code>$ ls\ntest.sh\n$ bash test.sh 2&gt;2.err 1&gt;&amp;2\n$ cat 2.err\nhello world!\ntest.sh:\u884c5: error\uff1a\u672a\u627e\u5230\u547d\u4ee4\n2021\u5e74 01\u6708 14\u65e5 \u661f\u671f\u56db 17:26:58 CST\n$ bash test.sh &gt;1.out 2&gt;&amp;1\n$ cat 1.out\nhello world!\ntest.sh:\u884c5: error\uff1a\u672a\u627e\u5230\u547d\u4ee4\n2021\u5e74 01\u6708 14\u65e5 \u661f\u671f\u56db 17:28:44 CST\n</code></pre> <ul> <li><code>command &lt;&lt;del data1 date2 del</code>:\u8868\u793a\u5c06del\u5206\u9694\u7b26\u8303\u56f4\u7684\u6570\u636e\u4f5c\u4e3a\u8f93\u5165</li> </ul> <pre><code>shuhaiwen@shuhaiwen-PC:~/code/sh/test$ echo &lt;&lt;del\n&gt; 123\n&gt; 456\n&gt; end\n&gt; del\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#23-echo","title":"2.3 echo","text":"<ul> <li>\u529f\u80fd\uff1a\u8f93\u51fa\u4e00\u884c\u6587\u672c</li> <li>\u8bed\u6cd5\uff1a<code>echo [option] \u6587\u672c\u5b57\u7b26</code></li> <li><code>-e</code>:\u5f00\u542f\\\u8f6c\u4e49\u7b26</li> <li><code>-n</code>:\u4e0d\u8f93\u51fa\u672b\u5c3e\u6362\u884c</li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ echo -e \"a\\nb\"\na\nb\n$ echo  \"a\\nb\"\na\\nb\n$ echo -n a\n$ echo a\na\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#24-pushd","title":"2.4 pushd","text":"<pre><code>pushd\u7528\u7684\u6808\u7ed3\u6784\u53ef\u4ee5\u7406\u89e3\u6210\u73af\u884c\u6808\uff0cpushd +N\u6216-N\u4f1a\u6539\u53d8\u6808\u9876\u548c\u6808\u5c3e\u5143\u7d20\n</code></pre> <ul> <li>\u529f\u80fd\uff1abash\u81ea\u5e26\u547d\u4ee4\uff0c\u662f\u4e00\u79cdcd\u7684\u9ad8\u7ea7\u7528\u6cd5\uff0c\u8fdb\u5165\u76ee\u5f55\u7684\u540c\u65f6\uff0c\u5c06\u76ee\u5f55\u653e\u5165\u6808\u4e2d\uff0c\u5e76\u53ef\u6307\u5b9a\u6808\u4e2d\u8def\u5f84\u8fdb\u5165</li> <li>\u8bed\u6cd5\uff1a<code>pushd [+N | -N | \u76ee\u5f55]</code><ul> <li><code>pushd \u76ee\u5f55</code>\uff1acd\u5230\u76ee\u5f55\uff0c\u4e14\u5c06\u76ee\u5f55\u653e\u5165\u6808\u4e2d</li> <li><code>pushd +N</code>\uff1a\u4ece\u6808\u9876\u8df3\u5411\u6808\u5c3e\u7b2cN+1\u76ee\u5f55\uff08N\u4ece0\u5f00\u59cb\uff0c+0\u5c31\u662f\u672c\u76ee\u5f55\uff09</li> <li><code>pushd -N</code>\uff1a\u4ece\u6808\u5c3e\u8df3\u5411\u6808\u9876\u7b2cN+1\u76ee\u5f55\uff08N\u4ece0\u5f00\u59cb\uff0c-0\u5c31\u662f\u6808\u9876\u76ee\u5f55\uff09</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>[rocksdb@centos7 libgo]$ pushd ../gcc\n~/gcc-12.1.0/gcc ~/gcc-12.1.0/libgo ~/gcc-12.1.0/zlib ~/gcc-12.1.0\n[rocksdb@centos7 gcc]$ pushd +1\n~/gcc-12.1.0/libgo ~/gcc-12.1.0/zlib ~/gcc-12.1.0 ~/gcc-12.1.0/gcc\n[rocksdb@centos7 libgo]$ pushd -0\n~/gcc-12.1.0/gcc ~/gcc-12.1.0/libgo ~/gcc-12.1.0/zlib ~/gcc-12.1.\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#25-popd","title":"2.5 popd","text":"<ul> <li>\u529f\u80fd\uff1a\u79fb\u9664\u6808\u91cc\u9762\u7684\u5143\u7d20\uff0c\u5e76\u8fdb\u5165\u76ee\u5f55</li> <li>\u8bed\u6cd5\uff1a<code>popd [+N | -N]</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>[rocksdb@centos7 zlib]$ dirs -v\n 0  ~/gcc-12.1.0/zlib\n 1  ~/gcc-12.1.0/libgo\n 2  ~/gcc-12.1.0/libgcc\n 3  ~/gcc-12.1.0\n[rocksdb@centos7 zlib]$ popd +1\n~/gcc-12.1.0/zlib ~/gcc-12.1.0/libgcc ~/gcc-12.1.0\n[rocksdb@centos7 zlib]$ popd \n~/gcc-12.1.0/libgcc ~/gcc-12.1.0\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#26-dirs","title":"2.6 dirs","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793a\u6216\u6e05\u7406pushd\u3001popd\u6240\u7528\u7684\u6808\u5143\u7d20</li> <li>\u8bed\u6cd5\uff1a<code>dirs [-clpv] [+N] [-N]</code><ul> <li><code>-l</code>\uff1a\u663e\u793a\u6808\u5143\u7d20\uff08\u5355\u884c\u8f93\u51fa\uff09\uff08\u9ed8\u8ba4\u9009\u9879\uff09</li> <li><code>-p</code>\uff1a\u663e\u793a\u6808\u5143\u7d20\uff08\u4e00\u4e2a\u5143\u7d20\u4e00\u884c\uff09</li> <li><code>-v</code>\uff1a\u663e\u793a\u6808\u5143\u7d20\uff0c\u4e0e-p\u76f8\u6bd4\u884c\u524d\u6709\u6808\u7f16\u53f7</li> <li><code>-c</code>\uff1a\u6e05\u9664\u6808\u5143\u7d20</li> </ul> </li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>[rocksdb@centos7 libgo]$ pushd -0\n~/gcc-12.1.0/gcc ~/gcc-12.1.0/libgo ~/gcc-12.1.0/zlib ~/gcc-12.1.0\n[rocksdb@centos7 gcc]$ dirs -v\n 0  ~/gcc-12.1.0/gcc\n 1  ~/gcc-12.1.0/libgo\n 2  ~/gcc-12.1.0/zlib\n 3  ~/gcc-12.1.0\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#3","title":"3 \u6587\u4ef6\u4fee\u6539\u64cd\u4f5c","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#31-chmod","title":"3.1 chmod","text":"<ul> <li><code>chmod [ugoa][+-=][rwx][file]</code></li> <li><code>u</code> \u7528\u6237user\uff0c\u8868\u73b0\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u6240\u6709\u8005</li> <li><code>g</code> \u7528\u6237\u7ec4group\uff0c\u8868\u73b0\u6587\u4ef6\u6216\u76ee\u5f55\u6240\u5c5e\u7684\u7528\u6237\u7ec4</li> <li><code>o</code> \u5176\u4ed6\u7528\u6237other</li> <li><code>a</code> \u6240\u6709\u7528\u6237all</li> <li><code>+</code> \u589e\u52a0\u6743\u9650\uff08\u9644\u52a0\uff09</li> <li><code>-</code> \u79fb\u9664\u6743\u9650</li> <li><code>=</code> \u91cd\u8d4b\u503c\u6743\u9650\uff08\u8986\u76d6\u4e4b\u524d\u7684\u6743\u9650\uff09</li> <li><code>r</code> \u8bfb\u6743\u9650</li> <li><code>w</code> \u5199\u6743\u9650</li> <li><code>x</code> \u53ef\u6267\u884c\u6743\u9650</li> </ul> <pre><code>$ ls -l\n\u603b\u7528\u91cf 0\n-rw-r--r-- 1 xxx xxx 0 1\u6708   3 13:30 1.md\n$ chmod u=x 1.md\n$ ls -l\n\u603b\u7528\u91cf 0\n---xr--r-- 1 xxx xxx 0 1\u6708   3 13:30 1.md\n\u603b\u7528\u91cf 0\n</code></pre> <pre><code>$ chmod u+r 1.md\n$ ls -l\n\u603b\u7528\u91cf 0\n-r-xr--r-- 1 xxx xxx 0 1\u6708   3 13:30 1.md\n</code></pre> <ul> <li><code>chmod [01234567][file]</code></li> <li>0 \u65e0\u6743\u9650</li> <li>1 <code>x</code>\u6743\u9650</li> <li>2 <code>w</code>\u6743\u9650</li> <li>4 <code>r</code>\u6743\u9650</li> </ul> <pre><code>$ chmod 0544 1.md\n$ ls -l\n\u603b\u7528\u91cf 0\n-r-xr--r-- 1 xxx xxx 0 1\u6708   3 13:30 1.md\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#32-chgrp","title":"3.2 chgrp","text":"<ul> <li>\u529f\u80fd:\u6539\u53d8\u6587\u4ef6\u6240\u5c5e\u7ec4</li> <li>\u8bed\u6cd5\u5f62\u5f0f:<code>chgrp [option] group file</code></li> <li><code>-R</code>\uff1a\u5982\u679c\u662f\u76ee\u5f55\uff0c\u5219\u4f1a\u9012\u5f52\u5230\u5b50\u6587\u4ef6</li> </ul> <pre><code>~/code/cpp$ ls -l 1.file \n-rw-r--r-- 1 shuhaiwen shuhaiwen 38 1\u6708  23 10:49 1.file\n~/code/cpp$ sudo chgrp root 1.file \n~/code/cpp$ ls -l 1.file \n-rw-r--r-- 1 shuhaiwen root 38 1\u6708  23 10:49 1.file\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#33-chown","title":"3.3 chown","text":"<ul> <li>\u529f\u80fd:\u6539\u53d8\u6587\u4ef6\u62e5\u6709\u8005\u6216\u62e5\u6709\u7ec4</li> <li>\u8bed\u6cd5\u5f62\u5f0f:<code>chown [option] [OWNER][:[GROUP]] file</code></li> <li><code>-R</code>\uff1a\u5982\u679c\u662f\u76ee\u5f55\uff0c\u5219\u4f1a\u9012\u5f52\u5230\u5b50\u6587\u4ef6</li> </ul> <p>\u793a\u4f8b1\uff1a\u6539\u53d8\u6587\u4ef6\u62e5\u6709\u8005</p> <pre><code>~/code/cpp$ ls -l 1.file \n-rw-r--r-- 1 shuhaiwen root 38 1\u6708  23 10:49 1.file\n~/code/cpp$ sudo chown root 1.file \n~/code/cpp$ ls -l 1.file \n-rw-r--r-- 1 root root 38 1\u6708  23 10:49 1.file\n</code></pre> <p>\u793a\u4f8b2\uff1a\u6539\u53d8\u6587\u4ef6\u62e5\u6709\u8005\u548c\u6240\u5c5e\u7ec4</p> <pre><code>~/code/cpp$ ls -l 1.txt \n-rw-r--r-- 1 shuhaiwen shuhaiwen 0 1\u6708  28 11:06 1.txt\n~/code/cpp$ sudo chown root:root 1.txt \n~/code/cpp$ ls -l 1.txt \n-rw-r--r-- 1 root root 0 1\u6708  28 11:06 1.txt\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#34-tar","title":"3.4 tar","text":"<p><code>tar</code>\u672c\u8d28\u4e0a\u53ea\u5177\u6709\u6253\u5305\u529f\u80fd\uff0c\u800c\u4e0d\u5177\u6709\u89e3\u538b\u7f29\u529f\u80fd\uff0c\u5176\u5185\u90e8\u8c03\u7528<code>gzip</code>\u6216\u5176\u5b83\u6253\u5305\u5de5\u5177\u624d\u80fd\u6267\u884c\u89e3\u538b\u7f29\u529f\u80fd</p>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#341","title":"3.4.1 \u6253\u5305\u3001\u89e3\u5305","text":"<ul> <li><code>-c</code>\u6216<code>--create</code> \u5efa\u7acb\u65b0\u7684\u5907\u4efd\u6587\u4ef6</li> <li><code>-f</code>\u6307\u5b9a\u6587\u4ef6\u540d</li> <li><code>-v</code>\u751f\u6210\u8be6\u7ec6\u6267\u884c\u4fe1\u606f</li> <li><code>-C dir</code>:\u77e5\u9053\u89e3\u538b\u540e\u5b58\u653e\u7684\u76ee\u5f55</li> <li><code>--exclude=dir</code>\uff1a\u6392\u9664\u77e5\u9053\u76ee\u5f55\u6216\u6587\u4ef6</li> </ul> <pre><code>$ tar -cvf 1.tar 1.md\n1.md\n$ ls\n1.md 1.tar\n</code></pre> <pre><code>$ ls\n1.tar\n$ tar -xvf 1.tar\n1.md\n$ ls\n1.md  1.tar\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#342","title":"3.4.2 \u89e3\u538b\u5305","text":"<ul> <li><code>-z</code>:\u4f7f\u7528gzip\u538b\u7f29\u6216\u89e3\u538b(\u540e\u7f00gz)</li> <li><code>-j</code>:\u4f7f\u7528bzip2\u538b\u7f29\u6216\u89e3\u538b(\u540e\u7f00bz2)</li> <li><code>-x</code>:\u6267\u884c\u89e3\u538b</li> </ul> <pre><code>$ tar -cvzf 1.tar.gz 1.md\n1.md\n$ ls\n1.md  1.tar.gz\n</code></pre> <pre><code>$ ls 1.tar.gz\n$ tar -xzvf 1.tar.gz\n1.md\n$ ls\n1.md  1.tar.gz\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#343","title":"3.4.3 \u67e5\u770b\u538b\u7f29\u5305\u5185\u5bb9","text":"<ul> <li><code>-t</code>\u67e5\u770b\u538b\u7f29\u5305\u5185\u5bb9</li> </ul> <pre><code>$ tar -cvf 1.tar 1.md\n1.md\n$ tar -tf 1.tar\n1.md\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#344","title":"3.4.4 \u9644\u52a0\u6587\u4ef6","text":"<ul> <li><code>-r</code>\u6216<code>--append</code> \u65b0\u589e\u6587\u4ef6\u5230\u5df2\u5b58\u5728\u7684\u5907\u4efd\u6587\u4ef6\u7684\u7ed3\u5c3e\u90e8\u5206</li> </ul> <pre><code>$ tar -cvf 1.tar 1.md\n1.md\n$ tar -tf 1.tar\n1.md\n$ tar -rvf 1.tar 2.md\n2.md\n$ tar -tvf 1.tar\n-r-xr--r-- xxx/xxx 0 2021-01-03 13:30 1.md\n-rw-r--r-- xxx/xxx 0 2021-01-03 14:16 2.md\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#35-mv","title":"3.5 mv","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>mv [option] [\u539f\u6587\u4ef6] [\u76ee\u6807\u6587\u4ef6]</code></li> <li>\u529f\u80fd\uff1a</li> <li>\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u6539\u540d:<code>mv oldname newname</code></li> <li>\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u79fb\u52a8</li> <li><code>-b</code>\u5f53\u76ee\u6807\u6587\u4ef6\u5b58\u5728\u65f6\u5907\u4efd\u76ee\u6807\u6587\u4ef6</li> <li><code>-n</code>\u5f53\u76ee\u6807\u6587\u4ef6\u5b58\u5728\u65f6\u4e0d\u8986\u76d6</li> <li><code>-f</code>\u5f53\u76ee\u6807\u6587\u4ef6\u5b58\u5728\u65f6\u8986\u76d6\uff0c\u4e0d\u63d0\u793a(\u9ed8\u8ba4)</li> <li><code>-i</code>\u5f53\u76ee\u6807\u6587\u4ef6\u5b58\u5728\u65f6\u63d0\u793a\u7528\u6237\u9009\u62e9\u662f\u5426\u8986\u76d6\uff0cy\u662f\uff0cn\u5426</li> <li><code>-u</code>\u5f53\u76ee\u6807\u6587\u4ef6\u5b58\u5728\u65f6\uff0c\u6e90\u6587\u4ef6\u6bd4\u76ee\u6807\u6587\u4ef6\u65b0\u65f6\u624d\u8986\u76d6</li> </ul> <pre><code>~/code/sh$ ls\n1.txt  2.txt\n~/code/sh$ mv -b 1.txt 2.txt\n~/code/sh$ ls\n1  2.txt  2.txt~\n</code></pre> <p>\u4e0a\u4f8b\u7531\u4e8e\u76ee\u6807\u6587\u4ef6\u5df2\u5b58\u5728\uff0c\u6307\u5b9a\u4e86<code>-b</code>\u9009\u9879\u540e\u4f1a\u751f\u6210\u5907\u4efd\u6587\u4ef62.txt~</p> <pre><code>~/code/sh$ ls\n1.txt  2.txt\n~/code/sh$ mv -n 1.txt 2.txt\n~/code/sh$ ls\n1.txt  2.txt\n</code></pre> <p>\u4e0a\u4f8b\u7531\u4e8e\u76ee\u6807\u6587\u4ef6\u5df2\u5b58\u5728\uff0c\u6307\u5b9a\u4e86<code>-n</code>\u9009\u9879\u540e\u4e0d\u4f1a\u6267\u884c\u79fb\u52a8\u64cd\u4f5c</p> <pre><code>~/code/sh$ ls\n1.txt  2.txt\n~/code/sh$ mv -f 1.txt 2.txt\n~/code/sh$ ls\n2.txt\n</code></pre> <p>\u4e0a\u4f8b\u7531\u4e8e\u76ee\u6807\u6587\u4ef6\u5df2\u5b58\u5728\uff0c\u6307\u5b9a\u4e86<code>-f</code>\u76f4\u63a5\u8986\u76d6</p> <pre><code>~/code/sh$ mv -i 1.txt 2.txt\nmv\uff1a\u662f\u5426\u8986\u76d6'2.txt'\uff1f n\n~/code/sh$ ls\n1.txt  2.txt\n</code></pre> <p>\u4e0a\u4f8b\u7531\u4e8e\u76ee\u6807\u6587\u4ef6\u5df2\u5b58\u5728\uff0c\u6307\u5b9a\u4e86<code>-i</code>\u751f\u6210\u4e86\u63d0\u793a\u4fe1\u606f\uff0c\u9009\u62e9n\u4e0d\u8986\u76d6</p>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#36-cp","title":"3.6 cp","text":"<p><code>cp</code>\u547d\u4ee4\u53c2\u6570\u548c<code>mv</code>\u4e2d\u5f88\u76f8\u4f3c,\u53ef\u4ee5\u53c2\u8003 - \u8bed\u6cd5\u5f62\u5f0f\uff1a<code>cp [option] [\u539f\u6587\u4ef6] [\u76ee\u6807\u6587\u4ef6]</code> - \u529f\u80fd\uff1a\u590d\u5236\u6587\u4ef6\u6216\u76ee\u5f55 - <code>-r</code>:\u9012\u5f52\u590d\u5236\u76ee\u5f55\u4e0b\u6240\u6709\u6587\u4ef6\uff0c\u8981\u590d\u5236\u76ee\u5f55\u5fc5\u987b\u6307\u5b9a - <code>-n</code>\u5f53\u76ee\u6807\u6587\u4ef6\u6216\u76ee\u5f55\u5b58\u5728\u65f6\u4e0d\u8986\u76d6 - <code>-f</code>\u5f53\u76ee\u6807\u6587\u4ef6\u6216\u76ee\u5f55\u5b58\u5728\u65f6\u8986\u76d6\uff0c\u4e0d\u63d0\u793a(\u9ed8\u8ba4) - <code>-i</code>\u5f53\u76ee\u6807\u6587\u4ef6\u6216\u76ee\u5f55\u5b58\u5728\u65f6\u63d0\u793a\u7528\u6237\u9009\u62e9\u662f\u5426\u8986\u76d6\uff0cy\u662f\uff0cn\u5426\uff08cp\u5b9e\u9645\u540calias\u8bbe\u7f6e\u6210cp -i\uff0c\u6240\u6709\u4e0d\u60f3\u8981\u63d0\u793a\u65f6\uff0c\u9700\u8981\u4f7f\u7528/bin/cp\uff09 - <code>-u</code>\u5f53\u76ee\u6807\u6587\u4ef6\u6216\u76ee\u5f55\u5b58\u5728\u65f6\uff0c\u6e90\u6587\u4ef6\u6bd4\u76ee\u6807\u6587\u4ef6\u65b0\u65f6\u624d\u8986\u76d6 - <code>-b</code>\u5f53\u76ee\u6807\u6587\u4ef6\u6216\u76ee\u5f55\u5b58\u5728\u65f6\u5907\u4efd\u76ee\u6807\u6587\u4ef6 - \u62f7\u8d1d\u591a\u4e2a\u6587\u4ef6\u793a\u4f8b</p> <pre><code># \u62f7\u8d1d\u591a\u4e2a\u6587\u4ef6\u5230\u540c\u4e00\u76ee\u5f55\ncp file1 file2 dir\n# \u62f7\u8d1d\u540c\u4e00\u76ee\u5f55\u4e0b\u6587\u4ef6\u5230\u53e6\u4e00\u76ee\u5f55\ncp dir1/{file1,file2} dir2\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#37-touch","title":"3.7 touch","text":"<p><code>touch</code>\u5b9e\u9645\u4e0a\u7528\u7528\u6765\u4fee\u6539\u6587\u4ef6\u65f6\u95f4\u5c5e\u6027\u7684\uff0c\u4f46\u66f4\u591a\u7684\u7528\u6765\u65b0\u5efa\u6587\u4ef6\u3002 - \u8bed\u6cd5\u5f62\u5f0f\uff1a<code>touch [option] [\u6587\u4ef6]</code> - \u529f\u80fd\uff1a   - \u6539\u53d8\u6587\u4ef6\u7684\u65f6\u95f4\u5c5e\u6027   - \u65b0\u5efa\u6587\u4ef6</p>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#38-rm","title":"3.8 rm","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>rm [option] [\u6587\u4ef6]</code></li> <li>\u529f\u80fd\uff1a\u5220\u9664\u6587\u4ef6\u6216\u76ee\u5f55</li> <li><code>-f</code>\u5f3a\u5236\u6267\u884c</li> <li><code>-r -R --recursive</code>\u9012\u5f52\u5220\u9664\u76ee\u5f55\u53ca\u76ee\u5f55\u4e0b\u6587\u4ef6</li> <li><code>-i</code>\u5220\u9664\u6587\u4ef6\u524d\u63d0\u793a</li> <li><code>-v</code>\u663e\u793a\u8be6\u7ec6\u4fe1\u606f</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#39-rmdir","title":"3.9 rmdir","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>rm [option] [\u6587\u4ef6]</code></li> <li>\u529f\u80fd\uff1a\u5220\u9664\u7a7a\u76ee\u5f55\uff0c\u4e0d\u80fd\u7528\u6765\u5220\u9664\u975e\u7a7a\u76ee\u5f55</li> <li><code>-p --parents</code>\u5220\u9664\u76ee\u5f55\u53ca\u5176\u7956\u5148\uff0c\u5982<code>rmdir -p a/b/c</code>\u7b49\u4ef7\u4e8e<code>rmdir a/b/c a/b a</code></li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#310-mkdir","title":"3.10 mkdir","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>mkdir [option] [\u6587\u4ef6]</code></li> <li>\u529f\u80fd\uff1a\u521b\u5efa\u76ee\u5f55</li> <li><code>-p</code>\u5982\u679c\u76ee\u5f55\u5b58\u5728\u5219\u4e0d\u521b\u5efa\uff0c\u4e5f\u4e0d\u4f1a\u62a5\u9519;\u5f53\u7236\u76ee\u5f55\u4e0d\u5b58\u5728\u65f6\uff0c\u521b\u5efa\u7236\u76ee\u5f55</li> <li><code>-m</code>\u6307\u5b9a\u76ee\u5f55\u6743\u9650</li> </ul> <pre><code>~/code/sh$ mkdir fd1\n~/code/sh$ mkdir -m=777 fd2\n~/code/sh$ ls -lF\ndrwxr-xr-x 2 xxx xxx 4096 1\u6708  23 15:06 fd1/\ndrwxrwxrwx 2 xxx xxx 4096 1\u6708  23 15:06 fd2/\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#311-ln","title":"3.11 ln","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>ln [option] [\u539f\u6587\u4ef6] [\u94fe\u63a5\u6587\u4ef6]</code></li> <li>\u529f\u80fd\uff1a\u4e3a\u6587\u4ef6\u6216\u76ee\u5f55\u521b\u5efa\u94fe\u63a5</li> <li><code>-b</code>\u5982\u679c\u94fe\u63a5\u540d\u5b58\u5728\uff0c\u5907\u4efd\u6b64\u6587\u4ef6\u518d\u8986\u76d6</li> <li><code>-f</code>\u5982\u679c\u94fe\u63a5\u540d\u5b58\u5728\u5f3a\u5236\u6267\u884c\uff0c\u4e0d\u63d0\u793a</li> <li><code>-i</code>\u5982\u679c\u94fe\u63a5\u540d\u5b58\u5728\u5219\u663e\u793a\u63d0\u793a\u4fe1\u606f</li> <li><code>-P</code>\u786c\u94fe\u63a5\uff08\u9ed8\u8ba4\uff09</li> <li><code>-s</code>\u7b26\u53f7\u94fe\u63a5</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#3111","title":"3.11.1 \u8f6f\u94fe\u63a5","text":"<ol> <li>\u8f6f\u94fe\u63a5\uff0c\u4ee5\u8def\u5f84\u7684\u5f62\u5f0f\u5b58\u5728\u3002\u7c7b\u4f3c\u4e8eWindows\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u7684\u5feb\u6377\u65b9\u5f0f</li> <li>\u8f6f\u94fe\u63a5\u53ef\u4ee5\u8de8\u6587\u4ef6\u7cfb\u7edf \uff0c\u786c\u94fe\u63a5\u4e0d\u53ef\u4ee5</li> <li>\u8f6f\u94fe\u63a5\u53ef\u4ee5\u5bf9\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u6587\u4ef6\u540d\u8fdb\u884c\u94fe\u63a5</li> <li>\u539f\u6587\u4ef6\u5220\u9664\uff0c\u8f6f\u94fe\u63a5\u4e5f\u5c06\u5931\u6548\uff0c\u6b64\u65f6\u5bf9\u8f6f\u94fe\u63a5\u8fdb\u884c\u5199\u64cd\u4f5c\uff0c\u539f\u6587\u4ef6\u4f1a\u518d\u6b21\u51fa\u73b0\uff0c\u4f46\u6b64\u539f\u6587\u4ef6\u7d22\u5f15\u8282\u70b9\u5df2\u7ecf\u6539\u53d8\uff0c\u4e5f\u5c31\u662f\u8bf4\u6b64\u539f\u6587\u4ef6\u4e4b\u524d\u7684\u786c\u94fe\u63a5\u5c06\u4e0d\u518d\u6307\u5411\u5b83</li> <li>\u8f6f\u94fe\u63a5\u53ef\u4ee5\u5bf9\u76ee\u5f55\u8fdb\u884c\u94fe\u63a5</li> <li>\u8f6f\u94fe\u63a5\u4e0e\u539f\u6587\u4ef6\u7d22\u5f15\u8282\u70b9\u4e0d\u540c</li> </ol>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#3112","title":"3.11.2 \u786c\u94fe\u63a5\uff1a","text":"<ol> <li>\u786c\u94fe\u63a5\uff0c\u4ee5\u6587\u4ef6\u526f\u672c\u7684\u5f62\u5f0f\u5b58\u5728\u3002\u4f46\u4e0d\u5360\u7528\u5b9e\u9645\u7a7a\u95f4\u3002\uff08\u7406\u89e3c\u4e2d\u6307\u9488\uff0c\u548c\u539f\u6587\u4ef6\u6307\u5411\u540c\u4e00\u5185\u5b58\u5730\u5740\uff09</li> <li>\u539f\u6587\u4ef6\u4e22\u5931\uff0c\u4e0d\u5f71\u54cd\u786c\u94fe\u63a5\u6570\u636e\u8bbf\u95ee</li> <li>\u4e0d\u5141\u8bb8\u7ed9\u76ee\u5f55\u521b\u5efa\u786c\u94fe\u63a5\uff08<code>-d</code>\u9009\u9879\u53ef\u5f3a\u5236\u7ed9\u76ee\u5f55\u5efa\u7acb\u786c\u94fe\u63a5\uff09</li> <li>\u786c\u94fe\u63a5\u53ea\u6709\u5728\u540c\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\u4e2d\u624d\u80fd\u521b\u5efa</li> <li>\u786c\u94fe\u63a5\u4e0e\u539f\u6587\u4ef6\u7d22\u5f15\u8282\u70b9\u76f8\u540c</li> </ol>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#312-alias","title":"3.12 alias","text":"<ul> <li>\u529f\u80fd\uff1a\u58f0\u660e\u6216\u663e\u793a\u522b\u540d</li> <li>\u8bed\u6cd5\uff1a<code>alias [-p] [name[=value] ...]</code></li> <li><code>-p</code>:\u6253\u5370\u522b\u540d\u5217\u8868\uff0c\u9ed8\u8ba4\u5c31\u6709\uff0c\u53ef\u4ee5\u4e0d\u6307\u5b9a</li> <li><code>[name[=value]</code>:\u8bbe\u7f6e\u522b\u540d</li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ alias user_ls='ls -l --color=auto'\n$ alias\nalias ll='ls -l --color=auto'\nalias user_ls='ls -l --color=auto'\n[here4@web17 fs6]$ \n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#313-unalias","title":"3.13 unalias","text":"<ul> <li>\u529f\u80fd\uff1a\u79fb\u9664\u522b\u540d</li> <li>\u8bed\u6cd5\uff1a<code>unalias [-a] [name ... ]</code></li> <li><code>-a</code>:\u79fb\u9664\u6240\u6709\u522b\u540d</li> <li><code>[name ... ]</code>:\u4ec5\u79fb\u9664\u6307\u5b9a\u522b\u540d</li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ unalias user_ls\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#4","title":"4 \u6587\u4ef6\u67e5\u627e\u64cd\u4f5c","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#41-find","title":"4.1 find","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>find [path] -name [\u6587\u4ef6\u540d] [option]</code></li> <li>\u529f\u80fd\uff1a\u67e5\u627e\u6307\u5b9a\u76ee\u5f55\u4e0b\u6587\u4ef6</li> <li><code>-name fileName</code>\uff1a\u6307\u5b9a\u67e5\u627e\u6587\u4ef6\u540d\u5982<code>find /opt -name 1.txt</code>,\u5728/opt\u76ee\u5f55\u4e0b\u67e5\u627e1.txt\u6587\u4ef6</li> <li><code>-iname fileName</code>:\u540c<code>-name</code>\u4f46\u5ffd\u7565\u5927\u5c0f\u5199</li> <li><code>-type fileType</code>:\u6307\u5b9a\u6587\u4ef6\u7c7b\u578b</li> <li><code>-size [+][-]fileSize</code>:\u6307\u5b9a\u6587\u4ef6\u5927\u5c0f\uff0c+\u5927\u4e8e\uff0c-\u5c0f\u4e8e</li> <li><code>-exec command {} \\;</code>\uff1a\u67e5\u5230\u6587\u4ef6\u540e\u5bf9\u6587\u4ef6\u6267\u884c\u547d\u4ee4\uff0c\u5982<code>find /opt -name 1.txt -exec rm -f {} \\;</code>,\u67e5\u627e1.txt\u5e76\u5220\u9664</li> <li><code>-ok command {} \\;</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code># \u5728.dir\u76ee\u5f55\u4e0b\u67e5\u627e \u4ee5file1\u6216file2\u5f00\u5934\u7684\u6587\u4ef6\nfind ./dir -name \"file[1,2]*\"\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#42-whereis","title":"4.2 whereis","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>whereis [option] [\u6587\u4ef6\u540d]</code></li> <li>\u529f\u80fd\uff1a\u67e5\u627e\u4e8c\u8fdb\u5236\u6587\u4ef6\u3001\u6e90\u7801\u6587\u4ef6\u3001man\u624b\u518c\u6587\u4ef6\u4f4d\u7f6e\uff0c\u67e5\u627e\u8def\u5f84\u5728$PATH and $MANPATH\u73af\u5883\u53d8\u91cf</li> </ul> <pre><code>~/code/cpp$ whereis rm\nrm: /usr/bin/rm /usr/share/man/man1/rm.1.gz\n~/code/cpp$ whereis gcc\ngcc: /usr/bin/gcc /usr/lib/gcc\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#43-which","title":"4.3 which","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>which [option] [\u6587\u4ef6\u540d]</code></li> <li>\u529f\u80fd\uff1a\u67e5\u627e\u53ef\u6267\u884c\u6587\u4ef6\u4f4d\u7f6e\uff0c\u67e5\u627e\u8def\u5f84\u5728$PATH\u73af\u5883\u53d8\u91cf</li> </ul> <pre><code>~/code/cpp$ which rm\n/usr/bin/rm\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#44-whatis","title":"4.4 whatis","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>whatis [option] [\u547d\u4ee4\u540d]</code></li> <li>\u529f\u80fd\uff1a\u67e5\u8be2\u4e00\u4e2a\u547d\u4ee4\u6267\u884c\u4ec0\u4e48\u529f\u80fd</li> </ul> <pre><code>fzbk@fzbk:~$ whatis rm\nrm (1)               - remove files or directories\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#5","title":"5 \u663e\u793a\u4fe1\u606f\u64cd\u4f5c","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#51-cat","title":"5.1 cat","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>cat [option] [\u6587\u4ef6]</code></li> <li>\u529f\u80fd\uff1a\u6253\u5370\u6587\u4ef6\u5185\u5bb9\u5230\u63a7\u5236\u53f0</li> <li><code>-n</code>\u548c<code>-b</code>\u8f93\u51fa\u884c\u53f7\uff0c<code>-b</code>\u4f1a\u5ffd\u7565\u7a7a\u884c</li> <li><code>-T</code>\u5c06tab\u4ee5<code>^I</code>\u7b26\u53f7\u8868\u793a</li> <li><code>-E</code>\u884c\u5c3e\u663e\u793a<code>$</code>\u7b26\u53f7</li> <li><code>-A</code>\u7b49\u4ef7\u4e8e<code>-vET</code></li> </ul> <pre><code>$ cat -n 1.txt \n     1  hello\n     2\n     3  world\n$ cat -b 1.txt \n     1  hello\n\n     2  world\n$ cat -A 1.file\nC$\nC.UTF-8$\nen_US.utf8$\nPOSIX$\nzh_CN.utf8$\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#52-ls","title":"5.2 ls","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>ls [option]</code></li> <li>\u529f\u80fd\uff1a\u5217\u51fa\u76ee\u5f55\u5185\u5bb9</li> <li><code>-a --all</code>\u5217\u51fa\u6240\u6709\u6587\u4ef6\u6216\u76ee\u5f55\uff0c\u5305\u62ec<code>.</code>\u548c<code>..</code></li> <li><code>-A</code>\u5217\u51fa\u6240\u6709\u6587\u4ef6\u6216\u76ee\u5f55\uff0c\u4e0d\u5305\u62ec<code>.</code>\u548c<code>..</code></li> <li><code>-l</code>\u4ee5\u4e00\u884c\u5217\u8868\u683c\u5f0f\u663e\u793a\uff08\u663e\u793a\u4fe1\u606f\u591a\uff09</li> <li><code>-1</code>\u6309\u884c\u663e\u793a\u6587\u4ef6</li> <li><code>-m</code>\u6309\u5217\u5217\u51fa\u6587\u4ef6\uff0c\u6587\u4ef6\u95f4\u7528<code>,</code>\u5206\u5272</li> <li><code>-i --inode</code>\u663e\u793a\u6587\u4ef6\u7684\u7d22\u5f15\u8282\u70b9\u53f7</li> <li><code>-R --recursive</code>\u5b50\u76ee\u5f55\u6587\u4ef6\u4e5f\u4f1a\u663e\u793a\u51fa\u6765</li> <li><code>-s --size</code>\u663e\u793a\u6587\u4ef6\u5927\u5c0f</li> <li><code>-F</code>\u5728\u6587\u4ef6\u6216\u76ee\u5f55\u7ed3\u5c3e\u6dfb\u52a0\u6307\u793a\u7b26(one of */=&gt;@|)</li> <li>\u6392\u5e8f\u9009\u9879<ul> <li><code>-S</code>\u6309\u6587\u4ef6\u5927\u5c0f\u6392\u5e8f\uff0c\u5927-&gt;\u5c0f</li> <li><code>-t</code>\u6309\u4fee\u6539\u65f6\u95f4\u6392\u5e8f\uff0c\u65b0-&gt;\u65e7</li> <li><code>-X</code>\u6309\u6269\u5c55\u540d\u5b57\u6bcd\u6392\u5e8f</li> </ul> </li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#53-lsof","title":"5.3 lsof","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f:<code>lsof [option] file</code></li> <li>\u529f\u80fd\uff1a\u5217\u51fa\u6253\u5f00\u6587\u4ef6\u7684\u8fdb\u7a0b\uff0c\u4e0d\u5e26\u53c2\u6570\u9ed8\u8ba4\u663e\u793a\u6240\u6709\u6253\u5f00\u8be5\u6587\u4ef6\u7684\u8fdb\u7a0b\u4fe1\u606f</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#54-locale","title":"5.4 locale","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>locale [option]</code></li> <li>\u529f\u80fd\uff1a\u7ed9\u51fa\u533a\u57df\u7279\u5b9a\u7684\u4fe1\u606f</li> <li><code>-a</code>\u663e\u793a\u53ef\u7528locale\u4fe1\u606f</li> <li><code>locale</code>\u663e\u793a\u5f53\u524dlocale\u4fe1\u606f</li> </ul> <pre><code>~/code/sh$ locale\nLANG=zh_CN.UTF-8\nLANGUAGE=zh_CN\nLC_CTYPE=\"zh_CN.UTF-8\"\nLC_NUMERIC=\"zh_CN.UTF-8\"\nLC_TIME=\"zh_CN.UTF-8\"\nLC_COLLATE=\"zh_CN.UTF-8\"\nLC_MONETARY=\"zh_CN.UTF-8\"\nLC_MESSAGES=\"zh_CN.UTF-8\"\nLC_PAPER=\"zh_CN.UTF-8\"\nLC_NAME=\"zh_CN.UTF-8\"\nLC_ADDRESS=\"zh_CN.UTF-8\"\nLC_TELEPHONE=\"zh_CN.UTF-8\"\nLC_MEASUREMENT=\"zh_CN.UTF-8\"\nLC_IDENTIFICATION=\"zh_CN.UTF-8\"\nLC_ALL=\n~/code/sh$ locale -a\nC\nC.UTF-8\nen_US.utf8\nPOSIX\nzh_CN.utf8\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#55-pwd","title":"5.5 pwd","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>pwd [option] ...</code></li> <li><code>-L</code>\uff1a\u4e0d\u7ba1\u662f\u4e0d\u662f\u7b26\u53f7\u94fe\u63a5\uff0c\u90fd\u6253\u5370\u6b64\u76ee\u5f55\uff08\u9ed8\u8ba4\uff09</li> <li><code>-P</code>\uff1a\u6253\u5370\u5b9e\u9645\u76ee\u5f55\uff0c\u5982\u679c\u662f\u7b26\u53f7\u94fe\u63a5\uff0c\u5c06\u6253\u5370\u94fe\u63a5\u76ee\u5f55\u7684\u8def\u5f84</li> <li>\u529f\u80fd\uff1a\u663e\u793a\u5f53\u524d\u8def\u5f84\u4fe1\u606f</li> </ul> <pre><code>~/code/sh$ pwd\n/home/shuhaiwen/code/sh\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#56-id","title":"5.6 id","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>id [option] username</code></li> <li><code>-u</code>:\u6253\u5370uid</li> <li><code>-g</code>:\u6253\u5370gid</li> <li><code>-G</code>:\u6253\u5370\u9644\u5c5e\u7ec4id</li> <li><code>-n</code>:\u6253\u5370\u540d\u5b57\u800c\u4e0d\u662fid</li> <li>\u529f\u80fd\uff1a\u67e5\u770b\u7528\u6237\u76f8\u5173\u4fe1\u606f</li> </ul> <pre><code>~$ id shuhaiwen\nuid=1016(shuhaiwen) gid=1016(shuhaiwen) groups=1016(shuhaiwen)\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#57-date","title":"5.7 date","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>date [+FORMAT]</code></li> <li><code>%s</code>:\u65f6\u95f4\u6233</li> <li><code>%Y</code>:\u5e74\uff0c\u59822021</li> <li><code>%m</code>:\u6708\uff0c\u8303\u56f4[00..12]</li> <li><code>%d</code>:\u5929\uff0c\u8303\u56f4[00..31]</li> <li><code>%H</code>:\u5c0f\u65f6\uff0c\u5982[00..23]</li> <li><code>%M</code>:\u5206\u949f\uff0c\u8303\u56f4[00..59]</li> <li><code>%S</code>:\u79d2\uff0c\u8303\u56f4[00..59]</li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ date +%s\n1639651517\ndate \"+%Y:%m:%d %H:%M:%S\"\n2021:12:16 18:45:44\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#58-who","title":"5.8 who","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793a\u767b\u5f55\u4fe1\u606f</li> <li>\u8bed\u6cd5\uff1a<code>who [option]</code></li> <li>\u4e0d\u5e26\u53c2\u6570\uff0c\u663e\u793a\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237</li> <li><code>-b</code>:\u4e0a\u4e00\u6b21\u7cfb\u7edf\u542f\u52a8\u7684\u65f6\u95f4</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#6","title":"6 \u5e93\u76f8\u5173","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#61-ldconfig","title":"6.1 ldconfig","text":"<ul> <li>\u529f\u80fd\uff1a\u8bbe\u7f6e\u8fd0\u884c\u65f6\u671f\u52a8\u6001\u94fe\u63a5\uff0c\u901a\u5e38\u5728\u5411/lib\u548c/usr/lib\u6dfb\u52a0\u4e86\u65b0\u52a8\u6001\u5e93\u540e\u7528\u6765\u66f4\u65b0\u52a8\u6001\u5e93</li> <li><code>sudo ldconfig</code>:\u5237\u65b0\u52a8\u6001\u94fe\u63a5\u5e93\u7f13\u5b58\u6587\u4ef6 /etc/ld.so.cache</li> <li><code>-p</code>:\u6253\u5370\u7f13\u5b58\u4e2d\u4fdd\u6301\u7684.so\u6587\u4ef6\u540d\uff0c\u7f13\u5b58\u6570\u636e\u6765\u81ea\u6587\u4ef6<code>/etc/ld.so.cache</code></li> </ul> <pre><code>$ ldconfig -p|grep bz2\n        libbz2.so.1 (libc6,x86-64) =&gt; /lib64/libbz2.so.1\n        libbz2.so (libc6,x86-64) =&gt; /lib64/libbz2.so\n$ sudo ldconfig\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#62-ldd","title":"6.2 ldd","text":"<pre><code>ldd\u4e0d\u662f\u4e00\u4e2a\u53ef\u6267\u884c\u7a0b\u5e8f\u800c\u662f\u4e00\u4e2ashell\u811a\u672c\u3002\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u6253\u5370\u52a8\u6001\u5e93\u7684\u4f9d\u8d56\u5173\u7cfb</li> </ul> <pre><code>shuhaiwen@shuhaiwen:~/code/cpp$ ldd liblocale.so\nlinux-vdso.so.1 (0x00007ffd5e582000)\nlibstdc++.so.6 =&gt; /lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f8ffeb07000)\nlibm.so.6 =&gt; /lib/x86_64-linux-gnu/libm.so.6 (0x00007f8ffe984000)\nlibgcc_s.so.1 =&gt; /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f8ffe96a000)\nlibc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f8ffe7a9000)\n/lib64/ld-linux-x86-64.so.2 (0x00007f8ffecb5000)\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#7","title":"7 \u7528\u6237\u3001\u7ec4\u589e\u5220\u6539","text":"<pre><code>\u7528\u6237\u7ec4/\u7528\u6237\u540d\u957f\u5ea6\u4e0d\u5927\u4e8e32\u5b57\u8282\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#71-etcpasswd","title":"7.1 /etc/passwd \u67e5\u770b\u6240\u6709\u7528\u6237\u540d","text":"<p>\u6240\u6709\u7528\u6237\u540d\u8bb0\u5f55\u4e0b <code>/etc/passwd</code> \u6587\u4ef6\u3002</p> <pre><code>[root@localhost ~]# cat /etc/passwd\nroot:x:0:0:root:/root:/bin/bash\nbin:x:1:1:bin:/bin:/sbin/nologin\ndaemon:x:2:2:daemon:/sbin:/sbin/nologin\nadm:x:3:4:adm:/var/adm:/sbin/nologin\nlp:x:4:7:lp:/var/spool/lpd:/sbin/nologin\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#72-etcgroup","title":"7.2 /etc/group \u67e5\u770b\u6240\u6709\u7528\u6237\u7ec4\u540d","text":"<pre><code>title: \u4e3a\u4ec0\u4e48\u7528\u6237\u5c5e\u4e8e\u67d0\u4e2a\u7528\u6237\u7ec4\uff0c\u4f46\u5728`/etc/group`\u4e2d\u663e\u793a\u7a7a\uff1f\n\u8fd9\u662f\u56e0\u4e3a\u5728useradd\u521b\u5efa\u7528\u6237\u65f6\u521d\u59cb\u7ec4\u4e0d\u4f1a\u8bb0\u5f55\u5230`/etc/group`\u4e2d\uff0c\u5982\u679cuserdd\u65f6\u6307\u5b9a-G\uff08-g\u662f\u521d\u59cb\u5316\u7ec4\uff09\u6216\u8005\u901a\u8fc7`usermod -a user -G group`\u547d\u4ee4\u6dfb\u52a0\u7684\u624d\u4f1a\u663e\u793a\u3002\n</code></pre> <p>\u6240\u6709\u7528\u6237\u7ec4\u540d\u8bb0\u5f55\u4e0b <code>/etc/group</code> \u6587\u4ef6\u3002</p> <pre><code>[root@localhost ~]# cat /etc/group\nroot:x:0:\nbin:x:1:\ndaemon:x:2:\nsys:x:3:\nadm:x:4:\n</code></pre> <p><code>/etc/group</code> \u4e2d\u6bcf\u4e00\u884c\u8868\u793a\u4e00\u4e2a\u7528\u6237\u7ec4\uff0c\u6bcf\u4e00\u884c\u8bb0\u5f55\u5206\u6210 4 \u90e8\u5206\uff0c\u7528 <code>:</code> \u5206\u9694\uff0c\u542b\u4e49\u5982\u4e0b\uff1a 1. \u7528\u6237\u7ec4\u540d 2. \u7528\u6237\u7ec4\u5bc6\u7801\uff08\u52a0\u5bc6\u663e\u793a x\uff09 3. \u7528\u6237\u7ec4gid 4. \u7528\u6237\u5217\u8868 \u5176\u4e2d\u7528\u6237\u5217\u8868\u53ef\u80fd\u5b58\u5728\u591a\u4e2a\u7528\u6237\uff0c\u7528 <code>,</code> \u5206\u4e2a\uff0c\u5982\u4e0b\uff0cgtest \u7528\u6237\u7ec4\u542b\u6709 2 \u4e2a\u7528\u6237 shw\u3001utest1\uff1a</p> <pre><code>[root@localhost ~]# cat /etc/group|grep gtest\ngtest:x:1001:shw,utest1\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#73-useradd","title":"7.3 useradd","text":"<ul> <li>\u529f\u80fd\uff1a\u589e\u52a0\u7528\u6237</li> <li>\u8bed\u6cd5\uff1a<code>useradd [option] \u7528\u6237\u540d</code></li> <li><code>-u uid</code> \uff1a\u6307\u5b9a\u7528\u6237\u7684uid</li> <li><code>-m</code>:\u521b\u5efa\u7528\u6237\u65f6\uff0c\u4f1a\u5728home\u76ee\u5f55\u4e0b\u751f\u6210\u7528\u6237\u76ee\u5f55</li> <li><code>-g groupname</code> \uff1a\u6307\u5b9a\u521d\u59cb\u5316\u7ec4\uff08\u4e0d\u4f1a\u663e\u793a\u5728/etc/group \u7b2c 4 \u90e8\u5206\u7528\u6237\u5217\u8868\u4e2d\uff09</li> <li><code>-G groupname</code> \uff1a\u5c06\u7528\u6237\u6dfb\u52a0\u5230\u9644\u52a0\u7ec4\u4e2d\uff08\u9644\u52a0\u7ec4/etc/group \u7b2c 4 \u90e8\u5206\u7528\u6237\u5217\u8868\u5c06\u4f1a\u663e\u793a\u6b64\u7528\u6237\uff09</li> <li><code>-s, --shell SHELL</code> \uff1a\u6307\u5b9a\u65b0\u7528\u6237\u767b\u5f55 shell \u7684\u540d\u79f0</li> <li>\u793a\u4f8b</li> </ul> <pre><code>root@\u5c0f\u950b\u54e5:$ useradd -m user2\nroot@\u5c0f\u950b\u54e5:$ ls /home\nuser2\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#74-passwd","title":"7.4 passwd","text":"<ul> <li>\u529f\u80fd\uff1a\u4fee\u6539\u7528\u6237\u5bc6\u7801</li> <li>\u8bed\u6cd5\uff1a<code>passwd [\u7528\u6237]</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code># root\u7528\u6237\u53ef\u4ee5\u6307\u5b9auser\n$ passwd user01\n# \u666e\u901a\u7528\u6237\u4e0d\u80fd\u6307\u5b9a\u7528\u6237\uff0c\u9ed8\u8ba4\u4fee\u6539\u6b64\u7528\u6237\n$ passwd\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#75-userdel","title":"7.5 userdel","text":"<ul> <li>\u529f\u80fd\uff1a\u5220\u9664\u7528\u6237</li> <li>\u8bed\u6cd5\uff1a<code>userdel [option] \u7528\u6237\u540d</code></li> <li><code>-r</code>:\u5220\u9664\u7528\u6237\u65f6\uff0c\u4f1a\u628ahome\u76ee\u5f55\u4e0b\u7528\u6237\u76ee\u5f55\u5220\u9664</li> <li><code>-f</code> \uff1a\u5f53\u7528\u6237\u8fd8\u5728\u767b\u5f55\u72b6\u6001\uff0c\u4f9d\u7136\u5f3a\u5236\u5220\u9664</li> <li>\u793a\u4f8b</li> </ul> <pre><code>root@\u5c0f\u950b\u54e5:$ userdel -r user2\nroot@\u5c0f\u950b\u54e5:$ ls /home\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#76-usermod","title":"7.6 usermod","text":"<ul> <li>\u529f\u80fd\uff1a\u4fee\u6539\u7528\u6237\u8d26\u53f7\uff0c\u5305\u62ec\u6dfb\u52a0\u5230\u65b0\u7528\u6237\u7ec4\u4e2d\u3002</li> <li>\u8bed\u6cd5\uff1a<code>usermod [options]</code><ul> <li><code>-u uid</code> \uff1a\u4fee\u6539\u7528\u6237 uid\uff0c\u5982``</li> <li><code>-a</code> \uff1a\uff08\u5fc5\u987b\u8981\u548c-G \u9009\u9879\u4e00\u8d77\u4f7f\u7528\uff09\u6dfb\u52a0\u7528\u6237\u5230\u9644\u52a0\u7ec4\u4e2d</li> <li><code>-G, --groups GROUP1[,GROUP2,...[,GROUPN]]]</code> \uff1a\u6307\u5b9a\u7528\u6237\u7ec4\uff0c\u6709 2 \u4e2d\u8868\u73b0\uff1a<ul> <li>\u5f53\u548c-a \u4e00\u8d77\u4f7f\u7528\u65f6\uff0c\u662f\u5c06\u7528\u6237\u6dfb\u52a0\u5230\u7528\u6237\u7ec4\u4e2d\uff08\u7c7b\u4f3c\u8ffd\u52a0\u64cd\u4f5c\uff09</li> <li>\u5f53\u5355\u72ec\u4f7f\u7528\u65f6\uff0c\u8bbe\u7f6e\u7528\u6237\u5c5e\u4e8e\u6307\u5b9a\u7684\u7ec4\uff1b\u5982\u679c\u4e4b\u524d\u7528\u6237\u5c5e\u4e8e\u67d0\u4e2a\u7ec4\uff0c\u4f46\u8fd9\u4e2a\u7ec4\u4e0d\u5728\u9009\u9879\u7684\u7ec4\u5217\u8868\u4e2d\uff0c\u90a3\u4e48\u5c31\u4f1a\u5c06\u7528\u6237\u4ece\u8fd9\u4e2a\u7528\u6237\u7ec4\u4e2d\u5220\u9664\u3002</li> </ul> </li> </ul> </li> <li>\u793a\u4f8b\uff1a\u4fee\u6539\u7528\u6237 shw \u7684 uid \u52301010</li> </ul> <pre><code>[root@localhost ~]# id shw\nuid=1000(shw) gid=1000(shw) groups=1000(shw),1001(gtest),1002(gtest1)\n[root@localhost ~]# usermod shw -u 1010\n[root@localhost ~]# id shw\nuid=1010(shw) gid=1000(shw) groups=1000(shw),1001(gtest),1002(gtest1)\n</code></pre> <ul> <li>\u793a\u4f8b\uff1a\u7528\u6237 shw \u6dfb\u52a0\u5230\u7528\u6237\u7ec4 gtest \u4e2d</li> </ul> <pre><code>[root@localhost ~]# usermod -a shw -G gtest\n[root@localhost ~]# cat /etc/group|grep gtest\ngtest:x:1001:shw\n</code></pre> <ul> <li>\u793a\u4f8b\uff1a\u539f\u5148\u7528\u6237 shw \u5c5e\u4e8e\u7528\u6237\u7ec4 gtest\u3001gtest1\uff0c\u6267\u884c\u540e\u53ea\u5c5e\u4e8e gtest1</li> </ul> <pre><code>[root@localhost ~]# cat /etc/group|grep gtest\ngtest:x:1001:shw\ngtest1:x:1002:shw\n[root@localhost ~]# usermod shw -G gtest1\n[root@localhost ~]# cat /etc/group|grep gtest\ngtest:x:1001:\ngtest1:x:1002:shw\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#77-groups","title":"7.7 groups","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793a\u7528\u4e8e\u5c5e\u4e8e\u54ea\u4e9b\u7528\u6237\u7ec4\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@localhost ~]# groups shw\nshw : shw gtest gtest1\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#78-groupadd","title":"7.8 groupadd","text":"<ul> <li>\u529f\u80fd\uff1a\u6dfb\u52a0\u7528\u6237\u7ec4</li> <li>\u8bed\u6cd5\uff1a<code>groupadd [options] \u7ec4\u540d</code></li> <li><code>-g gid</code>\uff1a\u6dfb\u52a0\u7ec4\u65f6\uff0c\u6307\u5b9a\u7ec4\u53f7\uff08\u9700\u552f\u4e00\uff0c\u9ed8\u8ba4\u7ec4\u53f7\u5728\u6700\u5927\u7ec4\u53f7\u4e0a+1\uff09</li> <li><code>-U username</code> \uff1a\u521b\u5efa\u7528\u6237\u7ec4\u65f6\u8bbe\u7f6e\u7528\u6237\u5c5e\u4e8e\u8fd9\u4e2a\u7ec4\uff0c\u591a\u4e2a\u7528\u6237\u7528 <code>,</code> \u5206\u9694</li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@localhost ~]# groupadd gtest2 -U shw,utest1\n[root@localhost ~]# cat /etc/group|grep gtest2\ngtest2:x:1012:shw,utest1\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#79-groupdel","title":"7.9 groupdel","text":"<ul> <li>\u529f\u80fd\uff1a\u5220\u9664\u7ec4</li> <li>\u8bed\u6cd5\uff1a<code>groupdel [options] \u7ec4\u540d</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>root@\u5c0f\u950b\u54e5:$ groupdel g1200\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#8","title":"8 \u7cfb\u7edf\u76f8\u5173","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#81-ps","title":"8.1 ps","text":"<ul> <li>\u529f\u80fd\uff1a\u67e5\u770b\u7cfb\u7edf\u8fdb\u7a0b\u4fe1\u606f</li> <li>\u8bed\u6cd5\u5f62\u5f0f:<code>ps [option]</code></li> <li><code>e</code>:\u663e\u793a\u6240\u6709\u8fdb\u7a0b</li> <li><code>-A</code>:\u663e\u793a\u6240\u6709\u8fdb\u7a0b</li> <li><code>-f</code>:\u663e\u793a\u5b8c\u6574\u683c\u5f0f\u5217\u8868</li> <li><code>-L</code>:\u663e\u793a\u8fdb\u7a0b\u7ebf\u7a0b</li> <li><code>-H</code>:\u4ee5\u5c42\u7ea7\u663e\u793a\uff08\u663e\u793a\u7236\u8fdb\u7a0b\uff09</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#\u663e\u793a\u7cfb\u7edf\u6240\u6709\u8fdb\u7a0b\u4fe1\u606f\nps -ef\nps -aux\n# \u663e\u793a\u7ebf\u7a0b\u4fe1\u606f\nps -aL\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#82-kill","title":"8.2 kill","text":"<ul> <li>\u529f\u80fd\uff1a\u505c\u6b62\u6307\u5b9a\u8fdb\u7a0b</li> <li>\u8bed\u6cd5\u5f62\u5f0f:<code>kill PID</code></li> </ul> <pre><code>#\u505c\u6b62\u8fdb\u7a0b\nkill 1201\n#\u663e\u793a\u4fe1\u53f7\nkill -l\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#83-pkill","title":"8.3 pkill","text":"<ul> <li>\u529f\u80fd\uff1a\u901a\u8fc7\u8fdb\u7a0b\u540dkill\u8fdb\u7a0b\u3002\uff08\u7c7b\u4f3cps\u548ckill\u7684\u7ed3\u5408\u4f53\uff09</li> <li>\u8bed\u6cd5\uff1a<code>pkill [option] \u8fdb\u7a0b\u540d</code></li> <li><code>-u</code>:\u7528\u6237\u540d</li> <li><code>-signal</code>:\u6307\u5b9a\u4fe1\u53f7\uff0c\u5982\uff0c<code>-9</code>\u3001<code>-15</code>\u3001<code>-HUP</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ pkill -u here4 -9 test_pkill\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#84-netstat","title":"8.4 netstat","text":"<ul> <li>\u529f\u80fd\uff1a\u6253\u5370\u7f51\u7edc\u3001\u8def\u7531\u7684\u4fe1\u606f</li> <li>\u8bed\u6cd5\uff1a<code>netstat [option]</code></li> <li><code>-a</code>:\u663e\u793alistening\u548cnon-listening \u5957\u63a5\u5b57</li> <li><code>-l</code>:\u4ec5\u663e\u793alistening\u5957\u63a5\u5b57</li> <li><code>-n</code>:\u663e\u793a\u6570\u5b57\u5730\u5740\uff0c\u800c\u4e0d\u662f\u5c1d\u8bd5\u786e\u5b9a\u7b26\u53f7\u4e3b\u673a\uff0c\u7aef\u53e3\u6216\u7528\u6237</li> <li><code>-p</code>:\u663e\u793a\u8fdb\u7a0bid\u548c\u8fdb\u7a0b\u540d</li> <li>\u793a\u4f8b</li> </ul> <pre><code># \u5e38\u7528\u547d\u4ee4\n$ netstat -anp\n# \u67e5\u627e\u7aef\u53e3\u662f\u5426\u88ab\u5360\u7528\n$ netstat -anp | grep \u7aef\u53e3\u53f7\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#85-ss","title":"8.5 ss","text":"<ul> <li>\u529f\u80fd\uff1a\u7edf\u8ba1\u7f51\u7edc\u4fe1\u606f\u5de5\u5177\uff0c\u540c<code>netstat</code></li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#86-uname","title":"8.6 uname","text":"<ul> <li>\u529f\u80fd\uff1a\u67e5\u8be2\u7cfb\u7edf\u4fe1\u606f</li> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>uname [option]</code></li> <li><code>-a</code>\uff1a\u6253\u5370\u7cfb\u7edf\u6240\u6709\u4fe1\u606f</li> <li><code>-s</code>\uff1a\u6253\u5370\u5185\u6838\u540d\uff08\u9ed8\u8ba4\uff09</li> <li><code>-m</code>\uff1a\u6253\u5370\u67b6\u6784\u540d</li> <li><code>-o</code>\uff1a\u6253\u5370\u64cd\u4f5c\u7cfb\u7edf\u540d</li> <li><code>-n</code>\uff1a\u6253\u5370\u7f51\u7edc\u8282\u70b9\u4e3b\u673a\u540d</li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ uname \nLinux\n$ uname -s\nLinux\n$ uname -m\nx86_64\n$ uname -o\nGNU/Linux\n$ uname -a\nLinux web17 3.10.0-327.el7.x86_64 #1 SMP Thu Nov 19 22:10:57 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n$ uname -n\nweb17\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#87-hostname","title":"8.7 hostname","text":"<ul> <li>\u529f\u80fd\uff1ais used to display the system's DNS name, and to display or set its hostname or NIS domain name.</li> </ul> <pre><code># \u663e\u793a\u4e3b\u673a\u540d\nhostname\n# \u4fee\u6539\u4e3b\u673a\u540d\nhostname newname\n# \u663e\u793aip\nhostname -i\n# \u663e\u793a\u6240\u6709ip\nhostname -I\n# \u663e\u793adns\u57df\u540d\nhostname -d\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#88-hostid","title":"8.8 hostid","text":"<ul> <li>\u529f\u80fd\uff1a\u6253\u5370host id</li> </ul> <pre><code>$ hostid\n007f0101\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#89-getconf-page_size","title":"8.9 getconf PAGE_SIZE","text":"<ul> <li>\u529f\u80fd\uff1a\u83b7\u53d6\u7cfb\u7edf\u9875\u5927\u5c0f</li> <li>\u793a\u4f8b</li> </ul> <pre><code># \u4e5f\u5927\u5c0f4KB\n$ getconf PAGE_SIZE\n4096\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#810-lsattr","title":"8.10 lsattr","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>lsattr [option] [file]</code></li> <li><code>-R</code>\uff1a\u4f1a\u5c06\u5b50\u76ee\u5f55\u5185\u7684\u6587\u4ef6\u4e5f\u5217\u51fa</li> <li>\u529f\u80fd\uff1a\u67e5\u770b\u6587\u4ef6\u6269\u5c55\u5c5e\u6027</li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ lsattr 1.file\n-------------e-- ./1.file\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#811-chattr","title":"8.11 chattr","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>chattr [option] [mode] [file]</code></li> <li><code>option</code>\uff1a<ul> <li><code>-R</code>\uff1a\u5bf9\u5b50\u76ee\u5f55\u4e5f\u751f\u6548</li> </ul> </li> <li><code>mode</code>\uff1a<code>+-=[aAcCdDeijsStTu]</code><ul> <li><code>+-=</code>\uff1a<code>+</code>\u5bf9\u5e94\u9644\u52a0\u4e00\u4e2a\u5c5e\u6027\uff0c<code>-</code>\u5bf9\u5e94\u51cf\u5c11\u4e00\u4e2a\u5c5e\u6027\uff0c<code>=</code>\u5bf9\u5e94\u6587\u4ef6\u5c5e\u6027\u88ab\u66ff\u6362</li> </ul> </li> <li>\u529f\u80fd\uff1a\u67e5\u770b\u6587\u4ef6\u6269\u5c55\u5c5e\u6027</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#812-ulimit","title":"8.12 ulimit","text":"<pre><code>\u6c38\u4e45\u4fee\u6539\u53ef\u4ee5\u8bbe\u7f6e/etc/security/limits.conf\u6587\u4ef6\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u67e5\u8be2\u6216\u4fee\u6539\u7cfb\u7edf\u9650\u5236\u8d44\u6e90\u4fe1\u606f\uff08\u4e34\u65f6\u4fee\u6539\uff09</li> <li>\u8bed\u6cd5\uff1a<code>ulimit [option]</code></li> <li><code>-a</code>:\u6253\u5370\u6240\u6709\u7cfb\u7edf\u9650\u5236\u8d44\u6e90\u4fe1\u606f</li> <li><code>-c [value]</code>:core\u6587\u4ef6\u5927\u5c0f\uff1b\u5f53\u4e0d\u6307\u5b9avalue\u65f6\uff0c\u6253\u5370\u4fe1\u606f\uff1b\u5f53\u6307\u5b9a\u4e86value\u65f6\uff0c\u4fee\u6539\u8d44\u6e90\u4fe1\u606f</li> <li><code>-f [value]</code>:\u5199\u6587\u4ef6\u5927\u5c0f</li> <li><code>...</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ ulimit -a\ncore file size          (blocks, -c) 0\ndata seg size           (kbytes, -d) unlimited\nscheduling priority             (-e) 0\nfile size               (blocks, -f) unlimited\npending signals                 (-i) 50521\nmax locked memory       (kbytes, -l) 64\nmax memory size         (kbytes, -m) unlimited\nopen files                      (-n) 1024\npipe size            (512 bytes, -p) 8\nPOSIX message queues     (bytes, -q) 819200\nreal-time priority              (-r) 0\nstack size              (kbytes, -s) 8192\ncpu time               (seconds, -t) unlimited\nmax user processes              (-u) 50521\nvirtual memory          (kbytes, -v) unlimited\nfile locks                      (-x) unlimited\n$ ulimit -c 1024\n$ ulimit -c\n1024\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#813-top","title":"8.13 top","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#8131","title":"8.13.1 \u57fa\u672c\u6309\u952e\u64cd\u4f5c","text":"<ul> <li>P\uff1a\u4ee5\u5360\u636eCPU\u767e\u5206\u6bd4\u6392\u5e8f</li> <li>M\uff1a\u4ee5\u5360\u636e\u5185\u5b58\u767e\u5206\u6bd4\u6392\u5e8f</li> <li>T\uff1a\u4ee5\u7d2f\u79ef\u5360\u7528CPU\u65f6\u95f4\u6392\u5e8f</li> <li>q\uff1a\u9000\u51fa\u547d\u4ee4\uff1a\u6309q\u952e\u9000\u51fatop\u67e5\u770b\u9875\u9762</li> <li>s\uff1a\u4fee\u6539\u5237\u65b0\u65f6\u95f4\u95f4\u9694\u3002\u6309\u4e0bs\u952e\uff0c\u7136\u540e\u6309\u4e0b\u6570\u5b57\uff0c\u5373\u53ef\u4fee\u6539\u5237\u65b0\u65f6\u95f4\u95f4\u9694\u4e3a\u4f60\u8f93\u5165\u7684\u6570\u5b57\uff0c\u5355\u4f4d\u4e3a\u79d2\u3002\u4f8b\u5982\uff1a\u6309\u4e0bs\u952e\uff0c\u5728\u6309\u6570\u5b571\u952e\uff0c\u5373\u53ef\u5b9e\u73b0\u6bcf\u79d2\u5237\u65b0\u4e00\u6b21</li> <li><code>u</code>\uff1a\u8bbe\u7f6e\u53ea\u663e\u793a\u7684\u6307\u5b9a\u7528\u6237\u4e0b\u8fdb\u7a0b\u4fe1\u606f\u3002\u6309\u4e0bu\u952e\uff0c\u518d\u8f93\u5165\u7528\u6237\u540d</li> <li><code>f</code>\uff1a\u8bbe\u7f6e\u589e\u52a0\u663e\u793a\u7684\u5185\u5bb9\u3002\u6309f\u952e\u8fdb\u5165\uff1a1.\u4e0a\u4e0b\u79fb\u5230\u5149\u6807\uff0c\u6309\u7a7a\u683c\u5f00\u542f\u6216\u5173\u95ed\u6b64\u6761\u76ee\uff1b2.\u5de6\u53f3\u952e\u9009\u4e2d\u6761\u76ee\uff0c\u5728\u4e0a\u4e0b\u79fb\u52a8\u52a8\u6307\u5b9a\u4f4d\u7f6e\uff0c\u53ef\u4ee5\u5bf9\u663e\u793a\u680f\u6392\u5e8f</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#814","title":"8.14 \u53c2\u6570\u8bf4\u660e","text":"<ul> <li><code>VIRT</code> \uff1aVirtual Memory \u865a\u62df\u5185\u5b58\uff0c\u662f\u5185\u5b58\u7684\u865a\u62df\u5730\u5740\uff0c\u6b64\u90e8\u5206\u4e2d\u90e8\u5206\u5df2\u7ecf\u6620\u5c04\u5230\u4e86\u7269\u7406\u5185\u5b58\uff0c\u6709\u4e9b\u8fd8\u6ca1\u6709\u3002</li> <li><code>RES</code> \uff1aResident Memory \u957f\u9a7b\u5185\u5b58\uff0c\u865a\u62df\u5185\u5b58\u7a7a\u95f4\u4e2d\u5df2\u7ecf\u6620\u5c04\u5230\u7269\u7406\u5185\u5b58\u7a7a\u95f4\u7684\u90a3\u90e8\u5206\u3002</li> <li><code>SHR</code> \uff1ashare Memory \u5171\u4eab\u5185\u5b58\uff0c\u6307\u4e0e\u5176\u5b83\u8fdb\u7a0b\u5171\u4eab\u52a8\u6001\u5e93\u7684\u90a3\u90e8\u5206\u5185\u5b58\u3002</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#815-free","title":"8.15 free","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793a\u7a7a\u95f2\u548c\u5df2\u4f7f\u7528\u7684\u5185\u5b58</li> <li>\u8bed\u6cd5\uff1a<code>free [options]</code> <code>-b</code>: \u4ee5Byte\u4e3a\u5355\u4f4d\u663e\u793a\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff1b <code>-k</code>: \u4ee5KB\u4e3a\u5355\u4f4d\u663e\u793a\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff1b <code>-m</code>: \u4ee5MB\u4e3a\u5355\u4f4d\u663e\u793a\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff1b <code>-g</code>: \u4ee5GB\u4e3a\u5355\u4f4d\u663e\u793a\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\u3002  <code>-o</code>: \u4e0d\u663e\u793a\u7f13\u51b2\u533a\u8c03\u8282\u5217\uff1b <code>-s [n]</code>: \u591a\u5c11\u79d2\u5237\u65b0\u4e00\u6b21 <code>-t</code>: \u663e\u793a\u5185\u5b58\u603b\u548c\u5217\uff1b</li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ free -b\n              total        used        free      shared  buff/cache   available\nMem:    67300700160  7164715008  1799909376  6971514880 58336075776 52455710720\nSwap:             0           0           0\n$ free -k\n              total        used        free      shared  buff/cache   available\nMem:       65723340     6995492     1759024     6808120    56968824    51227580\nSwap:             0           0           0\n$ free -m\n              total        used        free      shared  buff/cache   available\nMem:          64182        6831        1717        6648       55633       50026\nSwap:             0           0           0\n$ free -g\n              total        used        free      shared  buff/cache   available\nMem:             62           6           1           6          54          48\nSwap:             0           0           0\n$ free -t\n              total        used        free      shared  buff/cache   available\nMem:       65723340     6994256     1760256     6808120    56968828    51228824\nSwap:             0           0           0\nTotal:     65723340     6994256     1760256\n</code></pre> <ul> <li>\u8f93\u51fa\u4fe1\u606f\u89e3\u91ca</li> </ul> <pre><code>total   #\u8868\u793a\u7cfb\u7edf\u7684\u603b\u5185\u5b58\nused    #\u8868\u793a\u4f7f\u7528\u7684\u5185\u5b58\nfree    #\u8868\u793a\u7a7a\u95f4\u7684\u5185\u5b58\nshared  #\u8868\u793a\u5171\u4eab\u94fe\u63a5\u5e93\u4f7f\u7528\u7684\u5185\u5b58\nbuff/cache  #\u8868\u793a\u7cfb\u7edf\u7684page cache\u548cbuffer\u4f7f\u7528\u5230\u7684\u5185\u5b58\navailable   #\u8868\u793a\u5e94\u7528\u7a0b\u5e8f\u8fd8\u53ef\u4ee5\u7533\u8bf7\u5230\u7684\u5185\u5b58\n</code></pre> <p>\u5176\u4e2d\u6709\u5982\u4e0b\u5173\u7cfb $$ \u516c\u5f0f\u4e00\uff1atotal=used+free+buff/cache $$ $$ \u516c\u5f0f\u4e8c\uff1ashared \\subseteq used $$ $$ \u516c\u5f0f\u4e09\uff1aavailable \\le free+buff/cache $$</p>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#816-df","title":"8.16 df","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>df [OPTION]... [FILE]...</code></li> <li><code>-a</code> \uff1a\u5217\u51fa\u6240\u6709\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u5305\u62ec\u7cfb\u7edf\u7279\u6709\u7684 /proc \u7b49\u6587\u4ef6\u7cfb\u7edf\uff1b</li> <li><code>-h</code> \uff1a\u4ee5\u4eba\u4eec\u8f83\u6613\u9605\u8bfb\u7684 GBytes, MBytes, KBytes \u7b49\u683c\u5f0f\u81ea\u884c\u663e\u793a\uff1b</li> <li><code>-H</code> \uff1a\u4ee5 M=1000K \u53d6\u4ee3 M=1024K \u7684\u8fdb\u4f4d\u65b9\u5f0f\uff1b</li> <li><code>-T</code> \uff1a\u663e\u793a\u6587\u4ef6\u7cfb\u7edf\u7c7b\u578b, \u8fde\u540c\u8be5 partition \u7684 filesystem \u540d\u79f0 (\u4f8b\u5982 ext3) \u4e5f\u5217\u51fa\uff1b</li> <li><code>-i</code> \uff1a\u4e0d\u7528\u786c\u76d8\u5bb9\u91cf\uff0c\u800c\u4ee5 inode \u7684\u6570\u91cf\u6765\u663e\u793a</li> <li>\u529f\u80fd\uff1a(\u5168\u79f0disk full)\u5217\u51fa\u6587\u4ef6\u7cfb\u7edf\u7684\u6574\u4f53\u78c1\u76d8\u7a7a\u95f4\u4f7f\u7528\u91cf</li> <li>\u793a\u4f8b1\uff1a\u67e5\u770b\u7cfb\u7edf\u6240\u6709\u6587\u4ef6\u7cfb\u7edf\uff08\u4e0d\u5305\u62ec\u7279\u6b8a\u7684\u6587\u4ef6\u7cfb\u7edf\uff09</li> </ul> <pre><code>$ df -h\n\u6587\u4ef6\u7cfb\u7edf        \u5bb9\u91cf  \u5df2\u7528  \u53ef\u7528 \u5df2\u7528% \u6302\u8f7d\u70b9\nudev            1.9G     0  1.9G    0% /dev\ntmpfs           391M  2.8M  388M    1% /run\n/dev/sda5        15G  6.7G  7.4G   48% /\ntmpfs           2.0G  7.2M  1.9G    1% /dev/shm\ntmpfs           5.0M  4.0K  5.0M    1% /run/lock\ntmpfs           2.0G     0  2.0G    0% /sys/fs/cgroup\n/dev/sda3        11G  6.8G  3.5G   66% /recovery\n/dev/sda1       1.5G  287M  1.1G   21% /boot\n/dev/sda7        16G  2.2G   13G   15% /data\ntmpfs           391M   32K  391M    1% /run/user/1000\n</code></pre> <ul> <li>\u793a\u4f8b2\uff1a\u67e5\u770b\u6307\u5b9a\u76ee\u5f55\u6216\u6587\u4ef6</li> </ul> <pre><code>df -h /home/shw\n\u6587\u4ef6\u7cfb\u7edf        \u5bb9\u91cf  \u5df2\u7528  \u53ef\u7528 \u5df2\u7528% \u6302\u8f7d\u70b9\n/dev/sda7        16G  2.2G   13G   15% /home\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#817-du","title":"8.17 du","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>du [OPTION]... [FILE]...</code></li> <li><code>-a</code> \uff1a\u5217\u51fa\u6240\u6709\u7684\u6587\u4ef6\u4e0e\u76ee\u5f55\u5bb9\u91cf\uff0c\u56e0\u4e3a\u9ed8\u8ba4\u4ec5\u7edf\u8ba1\u76ee\u5f55\u5e95\u4e0b\u7684\u6587\u4ef6\u91cf\u800c\u5df2\u3002</li> <li><code>-h</code> \uff1a\u4ee5\u4eba\u4eec\u8f83\u6613\u8bfb\u7684\u5bb9\u91cf\u683c\u5f0f (G/M) \u663e\u793a\uff1b</li> <li><code>-c</code> \uff1a\u6253\u5370\u51fa\u603b\u7528\u91cf\u4fe1\u606f</li> <li><code>-d[depth]</code> \uff1a\u663e\u793a\u6df1\u5ea6\u4e3adepth\u7684\u5b50\u76ee\u5f55\u4fe1\u606f</li> <li><code>-s</code> \uff1a\u5217\u51fa\u603b\u91cf\u800c\u5df2\uff0c\u800c\u4e0d\u5217\u51fa\u6bcf\u4e2a\u5404\u522b\u7684\u76ee\u5f55\u5360\u7528\u5bb9\u91cf\uff1b</li> <li><code>-S</code> \uff1a\u4e0d\u5305\u62ec\u5b50\u76ee\u5f55\u4e0b\u7684\u603b\u8ba1\uff0c\u4e0e -s \u6709\u70b9\u5dee\u522b\u3002</li> <li>\u529f\u80fd\uff1a(\u5168\u79f0disk used)\u68c0\u67e5\u78c1\u76d8\u7a7a\u95f4\u4f7f\u7528\u91cf</li> <li>\u793a\u4f8b1: \u9ed8\u8ba4\u9012\u5f52\u6253\u5370\u5f53\u524d\u76ee\u5f55\u4e0b\u6240\u6709\u76ee\u5f55\u78c1\u76d8\u4f7f\u7528\u91cf</li> </ul> <pre><code>$ ls\na.out  class.cpp  network  sed.script  test_lambda.cc  test_lambda.i\n$ du\n4       ./network\n672     .\n</code></pre> <ul> <li>\u793a\u4f8b2\uff1a\u6587\u4ef6\u4e5f\u5355\u72ec\u6253\u5370\u51fa</li> </ul> <pre><code>du -a\n4       ./test_lambda.cc\n4       ./sed.script\n4       ./class.cpp\n4       ./network\n20      ./a.out\n632     ./test_lambda.i\n672     .\n</code></pre> <ul> <li>\u793a\u4f8b3\uff1a-s\u3001-S\u3001-c\u6bd4\u8f83</li> </ul> <pre><code>$ du\n4       ./network\n672     .\n$ du -s\n672     .\n$ du -S\n4       ./network\n668     .\n$ du -c\n4       ./network\n672     .\n672     \u603b\u7528\u91cf\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#9","title":"9 \u7cfb\u7edf\u6027\u80fd\u5206\u6790\u5de5\u5177","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#91-uptime","title":"9.1 uptime","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793a\u7cfb\u7edf\u5df2\u7ecf\u8fd0\u884c\u591a\u957f\u4e8b\u4ef6</li> <li>\u8bed\u6cd5\uff1a<code>uptime [options]</code><ul> <li><code>-s</code>\uff1a\u663e\u793a\u7cfb\u7edf\u4ece\u4ec0\u4e48\u65f6\u5019\u542f\u52a8\uff08\u683c\u5f0f yyyy-mm-dd HH:MM:SS\uff09</li> <li><code>-p</code> \uff1a\u4ee5\u66f4\u597d\u7684\u683c\u5f0f\u663e\u793a</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 ~]# uptime -s\n2022-08-09 18:02:48\n[root@centos7 ~]# uptime -p\nup 13 minutes\n[root@centos7 ~]# uptime\n18:16:06 up 13 min,  1 user,  load average: 0.00, 0.03, 0.04\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#92-dmseg","title":"9.2 dmseg","text":"<ul> <li>\u529f\u80fd\uff1a\u6253\u5370\u6216\u63a7\u5236\u5185\u6838\u73af\u5f62\u7f13\u51b2\u533a\uff08ring buffer\uff09</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#93-vmstat","title":"9.3 vmstat","text":"<ul> <li>\u529f\u80fd\uff1a\u6253\u5370\u865a\u62df\u5185\u5b58\u7edf\u8ba1\u4fe1\u606f</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#94-mpstat","title":"9.4 mpstat","text":"<ul> <li>\u5b89\u88c5\uff1a<code>yum install -y sysstat</code></li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#941-iostat","title":"9.4.1 iostat","text":"<ul> <li>\u5b89\u88c5\uff1a<code>yum install -y sysstat</code></li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#95-pidstat","title":"9.5 pidstat","text":"<ul> <li>\u5b89\u88c5\uff1a<code>yum install -y sysstat</code></li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#96-sar","title":"9.6 sar","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#10","title":"10 \u6587\u4ef6\u4fe1\u606f","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#101-file","title":"10.1 file","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>file [option] [\u6587\u4ef6\u540d]</code></li> <li>\u529f\u80fd\uff1a\u6253\u5370\u6587\u4ef6\u4fe1\u606f</li> </ul> <pre><code>~/code/cpp$ file 1.file\n1.file: ASCII text\n~/code/cpp$ file locale.cpp\nlocale.cpp: C++ source, ASCII text\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#102-stat","title":"10.2 stat","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>stat [OPTION]... FILE...</code></li> <li><code>-f</code>:\u663e\u793a\u6587\u4ef6\u7cfb\u7edf\u72b6\u6001\u4fe1\u606f\uff08\u9ed8\u8ba4\u663e\u793a\u6b64\u6587\u4ef6\u72b6\u6001\u4fe1\u606f\uff09</li> <li>\u529f\u80fd\uff1a\u6253\u5370\u6587\u4ef6\u72b6\u6001\u4fe1\u4fe1\u6216\u6587\u4ef6\u7cfb\u7edf\u72b6\u6001\u4fe1\u606f</li> <li>\u793a\u4f8b1:\u663e\u793a\u6587\u4ef6\u4fe1\u606f,\u90e8\u5206\u7ed3\u679c\u89e3\u91ca</li> <li><code>Size</code>:\u6587\u4ef6\u5b9e\u9645\u5927\u5c0f</li> <li><code>Blocks</code>:\u6587\u4ef6\u5360\u7528\u5757\u6570\u91cf(\u4e00\u822c\u78c1\u76d8\u4e00\u4e2ablock512)</li> <li><code>IO Block</code>:\u6bcf\u4e00\u4e2a\u5757\u7684\u5927\u5c0f\uff08\u6587\u4ef6\u7cfb\u7edf\u4e00\u4e2a\u5757\u662f4096\uff0c\u76f8\u5f53\u4e8e\u78c1\u76d8\u5757\u5927\u5c0f*8\uff09</li> <li><code>Links</code>:\u786c\u94fe\u63a5\u6570</li> </ul> <pre><code>$ stat docker_id.txt\n  File: docker_id.txt\n  Size: 64              Blocks: 8          IO Block: 4096   regular file\nDevice: 810h/2064d      Inode: 54253       Links: 1\nAccess: (0644/-rw-r--r--)  Uid: ( 1000/     shw)   Gid: ( 1000/     shw)\nAccess: 2021-10-20 18:53:25.215949300 +0800\nModify: 2021-10-20 18:53:13.225949300 +0800\nChange: 2021-10-20 18:53:13.225949300 +0800\n Birth: -\n</code></pre> <ul> <li>\u793a\u4f8b2:\u663e\u793a\u6587\u4ef6\u7cfb\u7edf\u4fe1\u606f\uff0c\u90e8\u5206\u89e3\u91ca\u5982\u4e0b</li> <li><code>File</code>:\u6587\u4ef6\u540d\u3002</li> <li><code>ID</code>:\u5341\u516d\u8fdb\u5236\u6587\u4ef6\u7cfb\u7edfID\u3002</li> <li><code>Namelen</code>:\u6587\u4ef6\u540d\u79f0\u6700\u5927\u7684\u957f\u5ea6\u3002</li> <li><code>Fundamental block size</code>:\u6587\u4ef6\u7cfb\u7edf\u4e0a\u6bcf\u4e2a\u5757\u5927\u5c0f\u3002</li> <li><code>Blocks</code>:<ul> <li><code>Total</code>:\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u603b\u5757\u6570\u3002</li> <li><code>Free</code>:\u6587\u4ef6\u7cfb\u7edf\u4e2d\u53ef\u7528\u7684\u5757\u6570\u3002</li> <li><code>Available</code> - \u975eroot\u7528\u6237\u53ef\u7528\u7684\u53ef\u7528\u5757\u6570\u3002</li> </ul> </li> <li><code>Inodes</code>:<ul> <li><code>Total</code>:\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u603b\u7d22\u5f15\u8282\u70b9\u6570\u3002</li> <li><code>Free</code>:\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7a7a\u95f2\u7d22\u5f15\u8282\u70b9\u7684\u6570\u91cf\u3002</li> </ul> </li> </ul> <pre><code>$ stat -f docker_id.txt\n  File: \"docker_id.txt\"\nID: fedc9aa3bd65bc57 Namelen: 255     Type: ext2/ext3\nBlock size: 4096       Fundamental block size: 4096\nBlocks: Total: 65793553   Free: 64015674   Available: 60656135\nInodes: Total: 16777216   Free: 16722700\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#103-readlink","title":"10.3 readlink","text":"<ul> <li>\u529f\u80fd\uff1a\u67e5\u8be2\u6587\u4ef6\u7b26\u53f7\u94fe\u63a5<ul> <li>\u8bed\u6cd5\uff1a<code>readlink [option] file</code><ul> <li>\u7a7a\u9009\u9879\uff1a\u67e5\u8be2\u6587\u4ef6\u7684\u94fe\u63a5\u8def\u5f84</li> <li><code>-f</code>\uff1a\u67e5\u8be2\u6700\u7ec8\u7b26\u53f7\u94fe\u63a5\u8def\u5f84</li> </ul> </li> </ul> </li> </ul> <pre><code>$ readlink /usr/bin/java\n/etc/alternatives/java\n$ readlink -f /usr/bin/java\n/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.222.b03-1.el7.aarch64/jre/bin/java\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#11","title":"11 \u8fdc\u7a0b\u64cd\u4f5c","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#111-ssh","title":"11.1 ssh\u670d\u52a1\u5b89\u88c5","text":"<ol> <li>\u5b89\u88c5ssh\uff1a<code>yum install -y openssh-server openssh-clients</code></li> <li>\u4fee\u6539\u914d\u7f6e\uff1a<code>vi /etc/ssh/sshd_config</code><ol> <li>Port\u53c2\u6570\uff1assh\u7aef\u53e3\u914d\u7f6e\u53c2\u6570</li> <li>HostKey\u53c2\u6570\uff1a\u52a0\u5bc6\u7c7b\u578b\uff0c\u4e00\u822c\u4fdd\u7559rsa\u7c7b\u578b\uff0c\u5176\u5b83\u7684\u6ce8\u91ca</li> </ol> </li> <li>ssh-keygen -t rsa -f /etc/ssh/ssh_host_rsa_key</li> <li>\u542f\u52a8ssh<code>/usr/sbin/sshd -D &amp;</code></li> <li>\u4e92\u4fe1</li> </ol> <pre><code>$ cd ~/.ssh\n$ ssh-keygen -t rsa -f ~/.ssh/id_rsa\n$ cp id_rsa.pub authorized_keys\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#112-ssh","title":"11.2 ssh","text":"<ul> <li>\u529f\u80fd\uff1a\u7528\u4e8e\u8fdc\u7a0b\u767b\u5f55,\u5728\u8fdc\u7a0b\u4e3b\u673a\u4e0a\u6267\u884c\u547d\u4ee4</li> <li>\u8bed\u6cd5:<code>ssh [option] [user@]hostname [command]</code></li> <li><code>-l login_name</code>:\u6307\u5b9a\u767b\u5f55\u7528\u6237\u540d\uff0c\u7b49\u4ef7<code>user@hostname</code>\u4e2d\u7684user</li> <li><code>-p port</code>:\u6307\u5b9assh\u7aef\u53e3\u53f7\uff0c\u9ed8\u8ba422</li> <li>\u793a\u4f8b</li> </ul> <pre><code># \u5728\u8fdc\u7a0b\u4e3b\u673a192.168.32.32\u4e0a\u7684\u7528\u6237shw\u4e0a\u6267\u884cls ~\u547d\u4ee4\nssh shw@192.168.32.32 ls ~\n# \u7528-l\u6307\u5b9a\u767b\u5f55\u7684\u7528\u6237\u540d\uff0c\u4ee5\u7528\u6237shw\u767b\u5f55\u8fdc\u7a0b\u4e3b\u673a192.168.32.32\nssh 192.168.32.32 -l shw\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#113-ssh-keygen","title":"11.3 ssh-keygen","text":"<ul> <li>\u8bed\u6cd5:<code>ssh-keygen [option]</code></li> <li>\u529f\u80fd:\u7528\u4e8e\u4e3assh\u751f\u6210\u3001\u7ba1\u7406\u548c\u8f6c\u6362\u8ba4\u8bc1\u5bc6\u94a5\uff0c\u5b83\u652f\u6301RSA\u548cDSA\u4e24\u79cd\u8ba4\u8bc1\u5bc6\u94a5</li> <li><code>-t [rsa|dsa]</code>:\u6307\u5b9a\u5bc6\u94a5\u7c7b\u578brsa(\u9ed8\u8ba4)\u6216dsa</li> <li><code>-f file</code>:\u6307\u5b9a\u751f\u6210\u5bc6\u94a5\u7684\u6587\u4ef6\u540d</li> <li><code>-b number</code>:\u6307\u5b9a\u5bc6\u94a5\u957f\u5ea6\uff08\u6700\u5c0f1024bit\uff09</li> <li>\u793a\u4f8b</li> </ul> <pre><code>ssh-keygen -t dsa -f key.file -b 1024\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#114-scp","title":"11.4 scp","text":"<ul> <li>\u8bed\u6cd5:<code>scp [option] \u6e90\u6587\u4ef6 \u76ee\u6807\u8def\u5f84</code></li> <li>\u6e90\u6587\u4ef6\u8def\u5f84:<code>[user1@]host1:]dir1/[file1]</code>\uff08[]\u8868\u793a\u53ef\u6709\u53ef\u65e0\uff09</li> <li>\u76ee\u6807\u8def\u5f84:<code>[user2@]host2:]dir2/[file2]</code></li> <li>\u529f\u80fd\uff1a\u4e3b\u673a\u4e4b\u95f4\u590d\u5236\u6587\u4ef6\u548c\u76ee\u5f55(\u7c7b\u4f3ccp)</li> <li><code>-r</code>:\u9012\u5f52\u590d\u5236\u6574\u4e2a\u76ee\u5f55</li> <li><code>-p</code>:\u4fdd\u7559\u539f\u6587\u4ef6\u7684\u4fee\u6539\u65f6\u95f4\uff0c\u8bbf\u95ee\u65f6\u95f4\u548c\u8bbf\u95ee\u6743\u9650</li> <li><code>-P port</code>:\u6307\u5b9assh\u7aef\u53e3\u53f7\uff0c\u9ed8\u8ba4ssh\u7aef\u53e3\u53f7\u662f22\uff0c\u5982\u679c\u73af\u5883\u4e2dssh\u7aef\u53e3\u53f7\u4e0d\u662f22\uff0c\u901a\u8fc7-P\u6765\u6307\u5b9a\u4e00\u4e2a\u7aef\u53e3\u53f7</li> <li>\u793a\u4f8b:\u4ece\u672c\u5730\u590d\u5236\u5230\u672c\u5730</li> </ul> <pre><code># \u672c\u5730\u590d\u5236\u672c\u5730\uff0c\u5e76\u4e14\u4fee\u6539\u590d\u5236\u7684\u6587\u4ef6\nscp ~/test.txt ~/test/test.txt.bak\n</code></pre> <ul> <li>\u793a\u4f8b:\u4ece\u672c\u5730\u590d\u5236\u5230\u8fdc\u7a0b</li> </ul> <pre><code>#\u5c06\u672c\u5730\u7528\u6237\u76ee\u5f55\u4e0b\u7684test.txt\u6587\u4ef6\u590d\u5236\u5230\u8fdc\u7a0b\u4e3b\u673a10.10.10.10\u4e0a\u7528\u6237\u4e3auser1\u7684\u76ee\u5f55\u4e0b\nscp ~/test.txt user1@192.168.10.10:/home/user1/dir\n</code></pre> <ul> <li>\u793a\u4f8b:\u4ece\u8fdc\u7a0b\u590d\u5236\u5230\u672c\u5730</li> </ul> <pre><code>scp user1@192.168.10.10:/home/urer1/test.txt /home/user1/dir\n</code></pre> <ul> <li>\u793a\u4f8b:\u4ece\u8fdc\u7a0b\u590d\u5236\u5230\u8fdc\u7a0b</li> </ul> <pre><code>scp user1@192.168.10.10:/home/urer1/test.txt user1@192.168.10.11:/home/user1/dir\n</code></pre> <pre><code>\u8fdc\u7a0b\u8bed\u6cd5 `\u7528\u6237\u540d@IP\u5730\u5740:\u8def\u5f84`\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#115-rz","title":"11.5 rz","text":"<pre><code>XShell\u3001SecureCRT \u6216 PuTTY \u5de5\u5177\u652f\u6301rz\u3001sz\u529f\u80fd\u3002\n</code></pre> <p>- rz \u547d\u4ee4 (Receive ZMODEM)\uff0c\u4f7f\u7528 ZMODEM \u534f\u8bae\uff0c\u5c06\u672c\u5730\u6587\u4ef6\u6279\u91cf\u4e0a\u4f20\u5230\u8fdc\u7a0b Linux/Unix \u670d\u52a1\u5668\uff0c\u6ce8\u610f\u4e0d\u80fd\u4e0a\u4f20\u6587\u4ef6\u5939\u3002 \u00a0\u00a0- \u4f7f\u7528\u65b9\u6cd5\uff1a\u8f93\u5165 rz\uff0c\u518d\u6309\u56de\u8f66\uff0c\u4f1a\u5f39\u51fa\u6587\u4ef6\u9009\u62e9\u6846\uff0c\u9009\u62e9\u6587\u4ef6\u4e0a\u4f20\u3002</p>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#116-sz","title":"11.6 sz","text":"<ul> <li>sz \u547d\u4ee4\u662f\u5229\u7528 ZModem \u534f\u8bae\u6765\u4ece Linux \u670d\u52a1\u5668\u4f20\u9001\u6587\u4ef6\u5230\u672c\u5730\uff0c\u4e00\u6b21\u53ef\u4ee5\u4f20\u9001\u4e00\u4e2a\u6216\u591a\u4e2a\u6587\u4ef6\u3002</li> <li>\u4f7f\u7528\u65b9\u6cd5\uff1asz + \u6587\u4ef6\u540d\uff0c\u518d\u6309\u56de\u8f66\uff0c\u4f1a\u5f39\u51fa\u6587\u4ef6\u9009\u62e9\u6846\uff0c\u9009\u62e9\u4e0b\u8f7d\u76ee\u5f55\u3002</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#12","title":"12 \u5e38\u7528\u529f\u80fd\u6307\u4ee4","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#121-sort","title":"12.1 sort","text":"<ul> <li>\u529f\u80fd\uff1a\u6392\u5e8f\u6587\u672c\u5185\u5bb9</li> <li>\u8bed\u6cd5\uff1a<code>sort [option] file</code><ul> <li><code>-r</code>:\u964d\u5e8f\u6392\u5e8f</li> <li><code>-f</code>:\u5ffd\u7565\u5927\u5c0f\u5199\u6392\u5e8f \uff08\u5c0f\u5199\u8f6c\u5927\u5199\u6392\u5e8f\uff09</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ sort sort.file\nAb\nab\n$ sort -f sort.file\nAb\nab\n$ sort -r sort.file\nab\nAb\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#122-uniq","title":"12.2 uniq","text":"<ul> <li>\u529f\u80fd\uff1a\u53bb\u9664\u8fde\u7eed\u91cd\u590d\u884c\uff0c\u7edf\u8ba1\u975e\u91cd\u590d\u884c</li> <li>\u8bed\u6cd5\uff1a<code>uniq [option] file</code><ul> <li><code>-c</code>:\u53bb\u9664\u91cd\u590d\u884c\uff0c\u5728\u884c\u9996\u6253\u5370\u91cd\u590d\u884c\u7684\u884c\u6570</li> <li><code>-i</code>:\u6bd4\u8f83\u65f6\uff0c\u4e0d\u8003\u8651\u5927\u5c0f\u5199</li> <li><code>-d</code>:\u53ea\u6253\u5370\u91cd\u590d\u884c\uff08\u5355\u884c\uff09</li> <li><code>-D</code>:\u53ea\u6253\u5370\u91cd\u590d\u884c\uff08\u6bcf\u4e00\u884c\u90fd\u6253\u5370\uff09</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ cat uniq.file\nwww.baidu.com\nwww.gitee.com\nwww.google.com\nwww.google.com\nwww.gitee.com\nwww.gitee.com\nwww.github.com\nwww.gitee.com\nwww.google.com\n$ uniq uniq.file\nwww.baidu.com\nwww.gitee.com\nwww.google.com\nwww.gitee.com\nwww.github.com\nwww.gitee.com\nwww.google.com\n$ uniq -dc uniq.file\n      2 www.google.com\n      2 www.gitee.com\n$ uniq -D uniq.file\nwww.google.com\nwww.google.com\nwww.gitee.com\nwww.gitee.com\n$ sort uniq.file |uniq -c\n      1 www.baidu.com\n      4 www.gitee.com\n      1 www.github.com\n      3 www.google.com\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#123-seq","title":"12.3 seq","text":"<ul> <li>\u529f\u80fd\uff1a\u6307\u5b9a\u9996\u4f4d\u6570\u5b57\u548c\u6b65\u957f\uff0c\u8f93\u51fa\u6570\u503c</li> <li>\u8bed\u6cd5\uff1a<code>seq [option] [first] [step] last</code></li> <li><code>-f \u5206\u9694\u7b26</code>:\u6307\u5b9a\u8f93\u51fa\u7ed3\u679c\u95f4\u7684\u5206\u5272\u7b26\uff08\u9ed8\u8ba4\\n\uff09</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code># \u6307\u5b9a\u9996\u6570\u5b571\uff0c\u5c3e\u6570\u5b5710\uff0c\u6b65\u957f2\uff0c\u8f93\u51fa\u7ed3\u679c\u88ab\\n\u5206\u5272\n$ seq 1 2 10\n1\n3\n5\n7\n9\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#124-truncate","title":"12.4 truncate","text":"<ul> <li>\u529f\u80fd\uff1a\u5c06\u6587\u4ef6\u7684\u5927\u5c0f\u7f29\u5c0f\u6216\u6269\u5c55\u5230\u6307\u5b9a\u7684\u5927\u5c0f</li> <li>\u8bed\u6cd5\uff1a<code>truncate [option] file</code></li> <li><code>-s size</code>:\u6307\u5b9a\u7f29\u5c0f\u6216\u6269\u5927\u6587\u4ef6\u7684\u5927\u5c0f</li> <li>\u793a\u4f8b</li> </ul> <pre><code># \u5c06file1\u6587\u4ef6\u5927\u5c0f\u53d8\u62101M\ntruncate -s 1M file1\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#125-dd","title":"12.5 dd","text":"<ul> <li>\u529f\u80fd\uff1a\u7528\u4e8e\u590d\u5236\u6587\u4ef6\u5e76\u5bf9\u539f\u6587\u4ef6\u7684\u5185\u5bb9\u8fdb\u884c\u8f6c\u6362\u548c\u683c\u5f0f\u5316\u5904\u7406</li> <li>\u8bed\u6cd5</li> <li><code>if=\u8f93\u5165\u6587\u4ef6</code>\uff1a\u6307\u5b9a\u8f93\u5165\u6587\u4ef6</li> <li><code>of=\u8f93\u51fa\u6587\u4ef6</code>\uff1a\u6307\u5b9a\u8f93\u51fa\u6587\u4ef6</li> <li><code>bs=n[c,w,b,k,M,G]</code>\uff1a\u6307\u5b9a\u5757\u5927\u5c0f(c=1byte,w=2byte,b=512byte,kB =1000, K =1024, MB =10001000, M =10241024, xM =M GB =100010001000, G =102410241024, and so on for T, P, E, Z, Y.)</li> <li><code>count=n</code>\uff1a\u6307\u5b9a\u88ab\u590d\u5236\u5757\u6570\u91cf</li> <li>\u793a\u4f8b</li> </ul> <pre><code># \u8f93\u5165\u6587\u4ef6/dev/zero \u8f93\u51fa\u6587\u4ef6outfile \ndd if=/dev/zero of=outfile bs=1k count=1\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#126-shuf","title":"12.6 shuf","text":"<ul> <li>\u529f\u80fd\uff1a\u751f\u6210\u968f\u673a\u6570</li> <li>\u8bed\u6cd5\uff1a</li> <li><code>-i LO-HI</code>:\u6307\u5b9a\u968f\u673a\u6570\u751f\u6210\u7684\u533a\u95f4\uff0c\u59821-10\uff0c\u751f\u6210\u5927\u4e8e\u7b49\u4e8e1\u5c0f\u4e8e\u7b49\u4e8e10\u7684\u6570</li> <li><code>-n number</code>:\u751f\u6210\u51e0\u884c\u6570\u636e</li> <li><code>-r</code>:\u8868\u793a\u751f\u6210\u7684\u6570\u636e\u53ef\u4ee5\u91cd\u590d\uff08\u9ed8\u8ba4\u4e0d\u53ef\u4ee5\u91cd\u590d\uff09\uff0c\u5f53\u751f\u6210\u6570\u53ef\u7528\u603b\u6570\u5c0f\u4e8e\u9700\u8981\u751f\u6210\u6570\u7684\u6570\u91cf\u65f6\uff0c\u9700\u8981\u6253\u5f00\uff0c\u5426\u5219\u751f\u6210\u4e0d\u4e86\u88ab-n\u6307\u5b9a\u7684\u6570\u636e\u91cf</li> <li>\u793a\u4f8b</li> </ul> <pre><code># \u8f93\u51fa\u657010\uff0c\u8f93\u51fa\u8303\u56f4 1-3 \uff0c\u6570\u636e\u53ef\u91cd\u590d\n$ shuf -n 10 -i 1-3 -r\n2\n3\n2\n1\n1\n1\n3\n3\n3\n1\n# \u8f93\u51fa\u657010\uff0c\u8f93\u51fa\u8303\u56f4 1-3\uff0c\u6570\u636e\u4e0d\u53ef\u91cd\u590d\uff08\u4ec5\u8f93\u51fa3\u4e2a\uff0c\u56e0\u4e3a\u6570\u636e\u4e0d\u53ef\u91cd\u590d\uff09\n$ shuf -n 10 -i 1-3\n1\n3\n2\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#127-xargs","title":"12.7 xargs","text":"<ul> <li>\u529f\u80fd\uff1a\u4ece\u547d\u4ee4\u884c\u6807\u51c6\u8f93\u51fa\u4e2d\u83b7\u53d6\u53c2\u6570\u4f20\u9012\u7ed9\u547d\u4ee4\u6267\u884c(xargs\u4e00\u822c\u4e0e\u7ba1\u9053\u7ed3\u5408\u4f7f\u7528)</li> <li>\u8bed\u6cd5\uff1a</li> <li><code>-I \u66ff\u6362\u5b57\u7b26</code>\uff1a\u6307\u5b9a\u66ff\u6362\u5b57\u7b26\uff0c\u9ed8\u8ba4\u662f{}\u6216()</li> <li><code>-d \u5206\u5272\u7b26</code>\uff1a\u6307\u5b9axargs\u5206\u89e3\u8f93\u5165\u5b57\u7b26\uff0c\u9ed8\u8ba4\u662f\u6362\u884c</li> <li><code>-n number</code>\uff1a\u6307\u5b9a\u6bcf\u884c\u591a\u5c11\u9879</li> <li><code>-L number</code>\uff1a\u6307\u5b9a\u4e00\u6b21\u8bfb\u591a\u5c11\u884c</li> <li>\u793a\u4f8b</li> </ul> <pre><code># \u5c06find\u67e5\u8be2\u7ed3\u679c\u7528{}\u66ff\u6362\uff0cls -l {}\u5217\u51fa\u67e5\u627e\u6587\u4ef6\u5c5e\u6027\nshw@shw-PC:~$ find code -name sed*|xargs -I {} ls -l {}\n-rw-r--r-- 1 shw shw 25 7\u6708  10 17:00 code/sed.script\nshw@shw-PC:~$ find code -name sed*|xargs -I {} cp {} {}.tmp\nshw@shw-PC:~$ ls code\nsed.script  sed.script.tmp\n# \u4ee5a\u4f5c\u4e3a\u5206\u9694\u7b26\uff0c\u4f7f\u7528xargs\u9ed8\u8ba4\u7684echo\u8f93\u51fa\nshw@shw-PC:~$ echo -n \"1a2a3\"|xargs -da\n1 2 3\n# -n \u6307\u5b9a\u6bcf\u884c\u591a\u5c11\u9879\u4f5c\u4e3a\u4e00\u4e2a\u53c2\u6570\nshw@shw-PC:~$ echo -n \"1a2a3a4\"|xargs -da -n2\n1 2\n3 4\n# -L\u6307\u5b9a\u4e00\u6b21\u8bfb\u53d6\u591a\u5c11\u884c\u4f5c\u4e3a\u4e00\u4e2a\u53c2\u6570\nshw@shw-PC:~$ echo -e \"1\\n2\\n3\\n4\"|xargs -L2\n1 2\n3 4\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#128-basename","title":"12.8 basename","text":"<ul> <li>\u529f\u80fd\uff1a\u8ba1\u7b97\u7ed9\u5b9a\u8def\u5f84\u7684\u6587\u4ef6\u540d</li> <li>\u8bed\u6cd5\uff1a<code>basename [-a|-s suffix] path</code>\u6216<code>basename path [suffix]</code><ul> <li><code>-a</code>\uff1a\u53ef\u4ee5\u6709\u591a\u4e2a\u8def\u5f84</li> <li><code>-s suffix</code>\uff1a\u53bb\u9664\u540e\u7f00</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>shw@shw-PC:~$ basename /usr/bin/sort\nsort\nshw@shw-PC:~$ basename include/stdio.h .h\nstdio\nshw@shw-PC:~$ basename -s .h include/stdio.h\nstdio\nshw@shw-PC:~$ basename -a any/str1 any/str2\nstr1\nstr2      </code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#129-dirname","title":"12.9 dirname","text":"<pre><code>1. \u5f53\u8def\u5f84\u4e0a\u6ca1\u6709/\u65f6\uff0c\u663e\u793a.\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u53bb\u9664\u7ed9\u5b9a\u8def\u5f84\u7684\u6587\u4ef6\u540d\u90e8\u5206</li> <li>\u8bed\u6cd5\uff1a<code>dirname [OPTION] NAME...</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>shw@shw-PC:~$ dirname /usr/bin/\n/usr\nshw@shw-PC:~$ dirname dir1/str dir2/str\ndir1\ndir2\nshw@shw-PC:~$ dirname stdio.h\n.\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#13","title":"13 \u8fd0\u7ef4\u5de5\u5177","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%91%BD%E4%BB%A4/#131-fio-io","title":"13.1 fio IO\u538b\u529b\u6d4b\u8bd5\u5de5\u5177","text":"<ul> <li>\u5b98\u65b9\u6587\u6863</li> <li>\u7b80\u5355\u6559\u7a0b1</li> <li>\u7b80\u5355\u6559\u7a0b2</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%B8%B8%E8%AF%86/","title":"Linux\u5e38\u8bc6","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%B8%B8%E8%AF%86/#1-linux","title":"1 linux\u5feb\u6377\u64cd\u4f5c","text":"<ul> <li><code>Ctrl + r</code>\uff1a\u9006\u5411\u641c\u7d22\u547d\u4ee4\u5386\u53f2</li> <li><code>Ctrl + g</code>\uff1a\u53d6\u6d88\u641c\u7d22</li> <li><code>Esc</code>\uff1a\u53ea\u663e\u793a\u5339\u914d\u7684\u547d\u4ee4\u5230\u547d\u4ee4\u884c\uff0c\u4f46\u4e0d\u6267\u884c</li> <li><code>Enter</code>\uff1a\u6267\u884c\u5339\u914d\u7684\u547d\u4ee4</li> <li><code>Ctrl + z</code>\uff1a\u6302\u8d77\u547d\u4ee4\uff08\u901a\u5e38\u7528\u4e8evim\u7f16\u8f91\u6587\u4ef6\uff0c\u4e34\u65f6\u9000\u51fa\u7f16\u8f91\uff09</li> <li><code>fg</code>\uff1a\u5728\u547d\u4ee4\u884c\u8f93\u5165<code>fg</code>\u5e76\u6267\u884c\uff0c\u5c06\u8fd4\u56de\u88ab\u6302\u8d77\u7684\u4efb\u52a1</li> <li><code>Ctrl + u</code>\uff1a\u5220\u9664\u5149\u6807\u5230\u5f00\u5934\u7684\u5b57\u7b26\uff08\u5728\u547d\u4ee4\u884c\u4e0b\uff09</li> <li><code>Ctrl + k</code>\uff1a\u5220\u9664\u5149\u6807\u5230\u672b\u5c3e\u7684\u5b57\u7b26\uff08\u5728\u547d\u4ee4\u884c\u4e0b\uff09</li> <li><code>Esc + .</code>\uff1a\u83b7\u5f97\u4e0a\u4e00\u6761\u547d\u4ee4\u4e2d\u7684\u53c2\u6570\uff0c\u6bd4\u5982\u4e0a\u4e00\u6761\u547d\u540d\u662f<code>ls /home</code>\uff0c\u83b7\u5f97\u7684\u53c2\u6570\u5c31\u662f<code>/home</code></li> <li>Bang (!) \u547d\u4ee4</li> <li><code>!!</code>\uff1a\u6267\u884c\u4e0a\u4e00\u6761\u547d\u4ee4</li> <li><code>!blah</code>\uff1a\u6267\u884c\u6700\u8fd1\u7684\u4ee5 blah \u5f00\u5934\u7684\u547d\u4ee4\uff0c\u5982 !ls</li> <li><code>!blah:p</code>\uff1a\u4ec5\u6253\u5370\u8f93\u51fa\uff0c\u800c\u4e0d\u6267\u884c</li> <li><code>!$</code>\uff1a\u4e0a\u4e00\u6761\u547d\u4ee4\u7684\u6700\u540e\u4e00\u4e2a\u53c2\u6570\uff0c\u4e0e Alt + . \u76f8\u540c</li> <li><code>!$:p</code>\uff1a\u6253\u5370\u8f93\u51fa !$ \u7684\u5185\u5bb9</li> <li><code>!*</code>\uff1a\u4e0a\u4e00\u6761\u547d\u4ee4\u7684\u6240\u6709\u53c2\u6570</li> <li><code>!*:p</code>\uff1a\u6253\u5370\u8f93\u51fa !* \u7684\u5185\u5bb9</li> <li><code>^blah</code>\uff1a\u5220\u9664\u4e0a\u4e00\u6761\u547d\u4ee4\u4e2d\u7684 blah</li> <li><code>^blah^foo</code>\uff1a\u5c06\u4e0a\u4e00\u6761\u547d\u4ee4\u4e2d\u7684 blah \u66ff\u6362\u4e3a foo</li> <li><code>^blah^foo^</code>\uff1a\u5c06\u4e0a\u4e00\u6761\u547d\u4ee4\u4e2d\u6240\u6709\u7684 blah \u90fd\u66ff\u6362\u4e3a foo</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%B8%B8%E8%AF%86/#2","title":"2 \u91cd\u8981\u7684\u73af\u5883\u53d8\u91cf","text":"<ul> <li><code>HOME</code>:\u5f53\u524d\u7528\u6237\u4e3b\u76ee\u5f55</li> <li><code>PATH</code>:\u5b9a\u4e49\u53ef\u6267\u884c\u7a0b\u5e8f\u6216\u811a\u672c\u6240\u5728\u8def\u5f84</li> <li><code>SHELL</code>:\u7528\u6237\u4f7f\u7528\u7684 Shell \u89e3\u91ca\u5668\u540d\u79f0,\u5982<code>/bin/bash</code></li> <li><code>$PS1</code> : \u547d\u4ee4\u884c\u63d0\u793a\u7b26 </li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%B8%B8%E8%AF%86/#3-locale","title":"3 \u8bbe\u7f6elocale","text":"<p>\u4f7f\u7528<code>locale -a</code>\u547d\u4ee4\uff0c\u83b7\u53d6\u53ef\u4ee5\u4f7f\u7528\u7684locale\u3002 - \u5f53\u524d\u547d\u4ee4\u884c\u751f\u6548\uff1a\u5728\u547d\u4ee4\u884c\u6267\u884c<code>export LANG=\"zh_CN.utf8\"</code>\u3002\uff08\u6ce8\u610f\uff1a\u5176\u4e2d<code>zh_CN.utf8</code>\u53ea\u662f\u5176\u4e2d\u4e00\u79cdlocale\uff09 - \u5355\u4e2a\u7528\u6237\u751f\u6548\uff1a\u5728\u7528\u6237\u73af\u5883\u53d8\u91cf\u914d\u7f6e\u6587\u4ef6\uff0c\u5982<code>~/.bash_profile</code>\u6587\u4ef6\u91cc\u9762\u5199\u5165<code>export LANG=\"zh_CN.utf8\"</code> - \u6240\u6709\u7528\u6237\u751f\u6548\uff1a\u5728\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u914d\u7f6e\u6587\u4ef6\uff0c\u5982<code>/etc/profile</code>\u6587\u4ef6\u91cc\u9762\u5199\u5165<code>export LANG=\"zh_CN.utf8\"</code></p>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%B8%B8%E8%AF%86/#4-1","title":"4 \u76ee\u5f55\u7684\u786c\u94fe\u63a5\u6570\u4e3a\u4ec0\u4e48\u4e0d\u662f1\uff1f","text":"<ul> <li>\u8ba1\u7b97\u516c\u5f0f\uff1a$$\u76ee\u5f55\u94fe\u63a5\u603b\u6570=1+\u5b50\u76ee\u5f55\u6570$$</li> </ul> <pre><code>title: info \u76ee\u5f55\u7684\u786c\u94fe\u63a5\u6570\u4e3a\u4ec0\u4e48\u4e0d\u662f1\uff1f\n\u56e0\u4e3a\u5728\u76ee\u5f55\u4e0b\u5b58\u5728\u9690\u85cf\u6587\u4ef6. \u548c..\uff0c.\u662f\u786c\u94fe\u63a5\u6307\u5411\u5f53\u524d\u76ee\u5f55\uff0c\u6240\u4ee5\u5f53\u524d\u76ee\u5f55\u786c\u94fe\u63a5\u6570\u53d8\u4e3a2\uff1b\u5982\u679c\u542b\u5b50\u76ee\u5f55\uff0c\u800c\u7236\u76ee\u5f55\u56e0\u4e3a\u5b50\u76ee\u5f55\u7684..\u548c\u7236\u76ee\u5f55\u81ea\u5df1\u7684.\uff0c\u6240\u4ee5\u7236\u76ee\u5f55\u786c\u94fe\u63a5\u6570\u662f3\u3002\uff08\u4f7f\u7528`ls -l`\u67e5\u770b\u76ee\u5f55\u786c\u94fe\u63a5\u6570\uff09\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%B8%B8%E8%AF%86/#5-ls-l","title":"5 ls -l \u76ee\u5f55\u5927\u5c0f","text":"<ul> <li>https://www.pianshen.com/article/45281509680/</li> <li>https://www.jianshu.com/p/1c22dcb17a2e</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%B8%B8%E8%AF%86/#6","title":"6 \u6587\u4ef6\u9632\u8bef\u5220","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%B8%B8%E8%AF%86/#61-ln","title":"6.1 \u65b9\u6cd5\u4e00: ln \u786c\u94fe\u63a5\u5907\u4efd","text":"<ul> <li>\u793a\u4f8b</li> </ul> <pre><code>ln src dest.link </code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%B8%B8%E8%AF%86/#62-chattr","title":"6.2 \u65b9\u6cd5\u4e8c: chattr \u7981\u6b62\u5220\u9664","text":"<p>\u6ce8\u610f\uff1a\u9700\u8981 root \u6743\u9650 - \u793a\u4f8b</p> <pre><code>chattr +i file\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%B8%B8%E8%AF%86/#7-kill","title":"7 \u50f5\u6b7b\u8fdb\u7a0b\u600e\u4e48kill","text":"<ol> <li>\u5982\u679c\u7236\u8fdb\u7a0b\u53f7\u4e0d\u662f1\uff0c\u76f4\u63a5kill -9 \u6740\u4e86\u7236\u8fdb\u7a0b</li> <li>\u5982\u679c\u7236\u8fdb\u7a0b\u53f7\u662f1\uff0c\u53ea\u80fd\u91cd\u542f\u673a\u5668</li> </ol>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%B8%B8%E8%AF%86/#8-core","title":"8 \u67e5\u8be2core\u6587\u4ef6\u7531\u54ea\u4e2a\u7a0b\u5e8f\u4ea7\u751f","text":"<ul> <li>\u901a\u8fc7file\u67e5\u8be2</li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ file core.657636 \ncore.657636: ELF 64-bit LSB core file x86-64, version 1 (SYSV), SVR4-style, from '/home/here4/.vscode-server/extensions/ms-vscode.cpptools-1.6.0/bin/cpptools'\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%B8%B8%E8%AF%86/#9-linux","title":"9 Linux\u73af\u5883\u53d8\u91cf","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%B8%B8%E8%AF%86/#91","title":"9.1 \u73af\u5883\u53d8\u91cf\u6587\u4ef6\u52a0\u8f7d\u987a\u5e8f","text":"<ul> <li>\u53c2\u8003</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%B8%B8%E8%AF%86/#92-path","title":"9.2 PATH","text":"<p>PATH\u73af\u5883\u53d8\u91cf\u5192\u53f7<code>:</code>\u4f5c\u7528\u662f\u4f5c\u4e3a\u5206\u5272\u7b26,\u5982<code>PATH=/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games:/sbin:/usr/sbin</code>\u3002</p> <p>\u6ce8\u610f\uff1a\u4f46\u8fd9\u5e76\u4e0d\u610f\u5473\u7740\u5176\u5b83\u73af\u5883\u53d8\u91cf\u4e5f\u662f\u4ee5\u5192\u53f7:\u6765\u4f5c\u4e3a\u5206\u9694\u7b26\uff0c\u5176\u5b83\u4e5f\u53ef\u4ee5\u6709\u5206\u53f7;\u7b49\u7b49\u6765\u4f5c\u4e3a\u5206\u9694\u7b26\uff0c\u53ea\u8981\u4f7f\u7528\u5b83\u7684\u80fd\u6309\u89c4\u5219\u6b63\u786e\u89e3\u6790\u5373\u53ef</p>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%B8%B8%E8%AF%86/#921","title":"9.2.1 \u5173\u4e8e\u73af\u5883\u53d8\u91cf\u7684\u6307\u4ee4","text":"<ul> <li><code>env</code>\uff1a\u663e\u793a\u5f53\u524d\u7cfb\u7edf\u73af\u5883\u53d8\u91cf</li> <li><code>export</code>\uff1a\u5bfc\u5165\u73af\u5883\u53d8\u91cf\uff08\u4e34\u65f6\uff0c\u53ea\u5bf9\u5f53\u524dshell\u6709\u6548\uff09</li> <li><code>set</code>\uff1a\u663e\u793ashell\u53d8\u91cf</li> <li><code>unset</code>\uff1a\u6e05\u9664\u73af\u5883\u53d8\u91cf</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%B8%B8%E8%AF%86/#922-etcprofileprofile","title":"9.2.2 \u73af\u5883\u53d8\u91cf\u6587\u4ef6/etc/profile\u548c~/.profile","text":"<ul> <li>\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u6587\u4ef6<code>/etc/profile</code></li> <li>\u7528\u6237\u73af\u5883\u53d8\u91cf\u6587\u4ef6<code>~/.profile</code></li> </ul> <p>\u8bfb\u53d6\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u65b9\u5f0f\uff1a 1. \u9996\u5148\u8bfb\u5165\u7684\u662f\u5168\u5c40\u73af\u5883\u53d8\u91cf\u8bbe\u5b9a\u6863/etc/profile\uff0c\u7136\u540e\u6839\u636e\u5176\u5185\u5bb9\u8bfb\u53d6\u989d\u5916\u7684\u8bbe\u5b9a\u7684\u6587\u6863\uff0c\u5982/etc/profile.d\u548c/etc/inputrc 2. \u7136\u540e\u6839\u636e\u4e0d\u540c\u4f7f\u7528\u8005\u5e10\u53f7\uff0c\u53bb\u5176\u5bb6\u76ee\u5f55\u8bfb\u53d6~/.bash_profile\uff0c\u5982\u679c\u8fd9\u8bfb\u53d6\u4e0d\u4e86\u5c31\u8bfb\u53d6~/.bash_login\uff0c\u8fd9\u4e2a\u4e5f\u8bfb\u53d6\u4e0d\u4e86\u624d\u4f1a\u8bfb\u53d6~/.profile\uff0c\u8fd9\u4e09\u4e2a\u6587\u6863\u8bbe\u5b9a\u57fa\u672c\u4e0a\u662f\u4e00\u6837\u7684, \u8bfb\u53d6\u6709\u4f18\u5148\u5173\u7cfb. 3. \u7136\u540e\u5728\u6839\u636e\u7528\u6237\u5e10\u53f7\u8bfb\u53d6~/.bashrc</p>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%B8%B8%E8%AF%86/#923-etcprofile","title":"9.2.3 \u7cfb\u7edf\u53d8\u91cf\u6587\u4ef6/etc/profile","text":"<ul> <li><code>/etc/profile</code>\u6587\u4ef6\u4e2d\u5bfc\u51fa\u4e86PATH\u53d8\u91cf</li> </ul> <pre><code>$ cat /etc/profile\n# /etc/profile: system-wide .profile file for the Bourne shell (sh(1))\n# and Bourne compatible shells (bash(1), ksh(1), ash(1), ...).\n\nif [ \"`id -u`\" -eq 0 ]; then\nPATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\"\nelse\nPATH=\"/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games:/sbin:/usr/sbin\"\nfi\nexport PATH\n\nif [ \"$PS1\" ]; then\nif [ \"$BASH\" ] &amp;&amp; [ \"$BASH\" != \"/bin/sh\" ]; then\n# The file bash.bashrc already sets the default PS1.\n# PS1='\\h:\\w\\$ '\nif [ -f /etc/bash.bashrc ]; then\n. /etc/bash.bashrc\n    fi\nelse\nif [ \"`id -u`\" -eq 0 ]; then\nPS1='# '\nelse\nPS1='$ '\nfi\nfi\nfi\n\nif [ -d /etc/profile.d ]; then\nfor i in /etc/profile.d/*.sh; do\nif [ -r $i ]; then\n. $i\nfi\ndone\nunset i\nfi\ntty | egrep -q tty[1-6] &amp;&amp; export LC_ALL=C\n</code></pre> <ul> <li>\u4f46\u8fd9\u4e2a\u6587\u4ef6\u4e5f\u53ef\u4ee5\u5bfc\u51fa\u5176\u5b83\u53d8\u91cf\uff0c\u5982\u4e0b\u4f8b\u5bfc\u51fa\u81ea\u5b9a\u4e49\u53d8\u91cf<code>HELLO</code></li> </ul> <pre><code>shuhaiwen@shuhaiwen:/etc$ cat /etc/profile\n# /etc/profile: system-wide .profile file for the Bourne shell (sh(1))\n# and Bourne compatible shells (bash(1), ksh(1), ash(1), ...).\n\nif [ \"`id -u`\" -eq 0 ]; then\nPATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\"\nelse\nPATH=\"/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games:/sbin:/usr/sbin\"\nfi\nexport PATH\nexport HELLO=hello world\n\n# \u7701\u7565\u4e0b\u9762\u90e8\u5206\n...\n</code></pre> <ul> <li>\u8981\u4f7f\u65b0\u589e\u52a0\u7684\u53d8\u91cf\u751f\u6548\uff0c\u4f7f\u7528source\u547d\u4ee4</li> </ul> <pre><code>$ source /etc/profile\n$ echo $HELLO\nhello\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%B8%B8%E8%AF%86/#924-profilebashrc","title":"9.2.4 \u7528\u6237\u53d8\u91cf\u6587\u4ef6~/.profile\u4e0e~/.bashrc","text":"<p>~/.profile\u53ef\u4ee5\u8bbe\u5b9a\u672c\u7528\u6237\u4e13\u6709\u7684\u8def\u5f84\uff0c\u73af\u5883\u53d8\u91cf\uff0c\u7b49\uff0c\u5b83\u53ea\u80fd\u767b\u5165\u7684\u65f6\u5019\u6267\u884c\u4e00\u6b21. ~/.bashrc\u4e5f\u662f\u67d0\u7528\u6237\u4e13\u6709\u8bbe\u5b9a\u6587\u6863\uff0c\u53ef\u4ee5\u8bbe\u5b9a\u8def\u5f84\uff0c\u547d\u4ee4\u522b\u540d\uff0c\u6bcf\u6b21shell script\u7684\u6267\u884c\u90fd\u4f1a\u4f7f\u7528\u5b83\u4e00\u6b21\u3002</p> <p>\u7528\u6237\u53d8\u91cf\u6587\u4ef6\u53ea\u5bf9\u5f53\u524d\u7528\u6237\u6709\u6548\uff0c\u4f7f\u7528\u548c\u7cfb\u7edf\u53d8\u91cf\u6587\u4ef6/etc/profile\u4e00\u6837\u3002\u8bbe\u7f6e\u540e\u4f9d\u7136\u9700\u8981\u7528<code>source</code>\u547d\u4ee4\u8fdb\u884c\u66f4\u65b0</p>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%B8%B8%E8%AF%86/#93-export","title":"9.3 export\u4e34\u65f6\u5bfc\u5165\u73af\u5883\u53d8\u91cf","text":"<p>\u4f7f\u7528export\u5411PATH\u4e2d\u5bfc\u5165\u53d8\u91cfhello</p> <pre><code>$ export PATH=hello:$PATH\n$ echo $PATH\nhello:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games:/sbin:/usr/sbin\n</code></pre> <p>\u4f46\u8fd9\u53ea\u5bf9\u5f53\u524dshell\u6709\u6548\uff0c\u6253\u5f00\u53e6\u4e00\u4e2abash\uff0c\u518d\u6b21\u6253\u5370PATH,hello\u4e0d\u5b58\u5728\u4e86</p> <pre><code>~$ echo $PATH\n/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games:/sbin:/usr/sbin\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%B8%B8%E8%AF%86/#94-ld_library_path","title":"9.4 LD_LIBRARY_PATH","text":"<p><code>LD_LIBRARY_PATH</code>\u662f\u7a0b\u5e8f\u52a0\u8f7d\u52a8\u6001\u94fe\u63a5\u5e93(.so)\u6587\u4ef6\u67e5\u627e\u7684\u8def\u5f84\u3002\u5982\u679c\u4f60\u7684\u7a0b\u5e8f\u9700\u8981\u52a0\u8f7d\u975e\u9ed8\u8ba4\u52a0\u8f7d\u8def\u5f84\u7684.so\u6587\u4ef6\u65f6\uff0c\u4f60\u5fc5\u987b\u8981\u5c06\u5176\u8def\u5f84\u901a\u8fc7<code>LD_LIBRARY_PATH</code>\u5bfc\u51fa\u5426\u5219\u7a0b\u5e8f\u4f1a\u62a5\u627e\u4e0d\u5230\u5e93\u9519\u8bef</p>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%B8%B8%E8%AF%86/#10","title":"10 \u5982\u4f55\u591a\u4e2a\u8fdb\u7a0b\u76d1\u63a7\u540c\u4e00\u4e2a\u7aef\u53e3\u53f7","text":"<p>\u6ce8\u610f\uff1alinux\u4e0b\u662f\u4ee5\u534f\u8bae\u3001ip\u3001\u7aef\u53e3\u6765\u7ed1\u5b9a\u7aef\u53e3\u7684\u3002 1. \u4f7f\u7528\u4e0d\u540c\u7684\u7f51\u7edc\u534f\u8bae\uff08\u5982TCP\u3001UDP\uff09\uff0c\u5219ip\u5730\u5740\u3001\u7aef\u53e3\u53f7\u53ef\u4ee5\u76f8\u540c 2. \u5728Linux Kernel 3.9\u7248\u672c\u4e4b\u540e\uff0c\u901a\u8fc7SO_REUSEPORT\u9009\u9879\uff0c\u5219\u53ef\u4ee5\u6709\u76f8\u540c\u534f\u8bae\u3001ip\u3001\u7aef\u53e3\u53f7 3. \u5728\u591a\u7f51\u5361\u4e0b\uff0c\u4e0d\u540c\u7f51\u5361\u5bf9\u5e94\u4e0d\u540c\u7684ip\u5730\u5740\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7684ip\u5730\u5740\u7ed1\u5b9a\u76f8\u540c\u7684\u7aef\u53e3\u53f7</p>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%B8%B8%E8%AF%86/#11","title":"11 \u78c1\u76d8\u5206\u533a\u548c\u903b\u8f91\u5377","text":"<ul> <li>\u53c2\u8003</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%B8%B8%E8%AF%86/#12-history","title":"12 history\u5386\u53f2\u547d\u4ee4","text":"<pre><code>title: \u6709\u7684linux\u73af\u5883\u4e0a\u53ea\u80fd\u67e5\u8be2\u51e0\u6761\u5386\u53f2\u8bb0\u5f55\uff0c\u6709\u7684\u53ef\u4ee5\u67e5\u8be2\u5230\u4e0a\u767e\u6761\uff0c\u8fd9\u65f6\u4e3a\u4ec0\u4e48\u5462\uff1f\n\u539f\u56e0\u662f\u7cfb\u7edf\u8bbe\u7f6e\u7684HISTFILESIZE\u3001HISTSIZE\u8fc7\u5c0f\uff0c\u6216\u8005history\u529f\u80fd\u88ab\u5173\u95ed\u7684\u539f\u56e0\u3002\n</code></pre> <ol> <li>\u68c0\u67e5history\u529f\u80fd\u662f\u5426\u5173\u95ed</li> </ol> <pre><code>## \u663e\u793aon\u8868\u793a\u5df2\u542f\u52a8\n[root@centos7 ~]# set -o | grep history\nhistory         on\n## \u5982\u679c\u663e\u793aoff\uff0c\u7f16\u8f91/etc/profile,\u6dfb\u52a0\u5982\u4e0b\u547d\u4ee4\nset -o history\n</code></pre> <ol> <li>\u68c0\u67e5HISTFILE \u3001HISTSIZE\u3001HISTFILESIZE\u53d8\u91cf\u503c</li> </ol> <pre><code># \u5982\u4e0b\u68c0\u6d4b\u663e\u793a\u4e00\u5207\u6b63\u5e38\n[root@centos7 ~]# echo $HISTFILE\n/root/.bash_history\n[root@centos7 ~]# echo $HISTSIZE\n1000\n[root@centos7 ~]# echo $HISTFILESIZE\n1000\n</code></pre> <ul> <li>\u5982\u679cHISTFILE\u663e\u793a\u7a7a\uff0c\u5219\u7f16\u8f91<code>/etc/profile</code>\u6587\u4ef6\uff0c\u5728\u672b\u5c3e\u52a0\u5165<code>HISTFILE=$HOME/.bash_history</code></li> <li>\u5982\u679cHISTSIZE\u8fc7\u5c0f\uff0c\u5219\u7f16\u8f91<code>/etc/profile</code>\u6587\u4ef6\uff0c\u5728\u672b\u5c3e\u52a0\u5165<code>HISTSIZE=1000</code>,\u6570\u503c\u4efb\u610f\uff0c\u6700\u5927\u652f\u63011000\uff0c\u8868\u793a\u7f13\u5b58\u547d\u4ee4\u6570\u91cf</li> <li>\u5982\u679cHISTFILESIZE\u8fc7\u5c0f\uff0c\u5219\u7f16\u8f91<code>/etc/profile</code>\u6587\u4ef6\uff0c\u5728\u672b\u5c3e\u52a0\u5165<code>HISTFILESIZE=1000</code>,\u6570\u503c\u4efb\u610f\uff0c\u6700\u5927\u652f\u63011000\uff0c\u8868\u793a\u7f13\u5b58\u6587\u4ef6\u6700\u5927\u652f\u6301\u4fdd\u5b58\u7684\u547d\u4ee4\u6570\u91cf</li> <li>\u4fee\u6539\u540e\u52a0\u8f7d\u73af\u5883\u53d8\u91cf<code>source ~/.bash_profile</code></li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%B8%B8%E8%AF%86/#13","title":"13 \u7cfb\u7edf\u7ea7\u77e5\u8bc6","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E5%B8%B8%E8%AF%86/#131-namespace","title":"13.1 namespace \u7684\u6982\u5ff5","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E6%B5%8B%E8%AF%95/","title":"Linux\u6d4b\u8bd5","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E6%B5%8B%E8%AF%95/#1-crontab","title":"1 crontab\u5f00\u542f\u5b9a\u65f6\u4efb\u52a1","text":"<ul> <li>\u5b88\u62a4\u8fdb\u7a0bcron\u4f1a\u8bfb\u53d6crontab\u6587\u4ef6\uff0c\u5b9a\u65f6\u7684\u6267\u884c\u4efb\u52a1</li> <li>\u8bed\u6cd5:<code>crontab [ -u user ] [ -i ] { -e | -l | -r }</code></li> <li><code>-u user</code>:\u6307\u5b9a\u8981\u64cd\u4f5c\u54ea\u4e2a\u7528\u6237\u7684crontab\u6587\u4ef6\uff0c\u5ffd\u7565\u65f6\u9ed8\u8ba4\u5f53\u524d\u7528\u6237</li> <li><code>-l</code>:\u663e\u793acrontab\u6587\u4ef6</li> <li><code>-e</code>:\u7f16\u8f91crontab\u6587\u4ef6</li> <li><code>-r</code>:\u5220\u9664crontab\u6587\u4ef6</li> <li><code>-i</code>:\u914d\u5408<code>-r</code>\u65f6\u663e\u793a\u786e\u8ba4yes\u3001no\u9009\u62e9</li> <li><code>crontab</code>\u6587\u4ef6\u8bed\u6cd5</li> <li><code>* * * * * myCommand</code><ul> <li>\u7b2c1\u5217\u5206\u949f0\uff5e59</li> <li>\u7b2c2\u5217\u5c0f\u65f60\uff5e23\uff080\u8868\u793a\u5b50\u591c\uff09</li> <li>\u7b2c3\u5217\u65e51\uff5e31</li> <li>\u7b2c4\u5217\u67081\uff5e12</li> <li>\u7b2c5\u5217\u661f\u671f0\uff5e7\uff080\u548c7\u8868\u793a\u661f\u671f\u5929\uff09</li> <li>\u7b2c6\u5217\u8981\u8fd0\u884c\u7684\u547d\u4ee4</li> <li><code>myCommand</code>:\u8981\u6267\u884c\u7684\u547d\u4ee4\u6216\u811a\u672c</li> </ul> </li> <li>\u793a\u4f8b\uff1a<code>3,15 8-11 * * 1 /bin/bash /home/shw/shell/crontab/task.sh</code>\u8868\u793a\u6bcf\u5468\u4e00\u4e0a\u53488\u70b9\u523011\u70b9\u7684\u7b2c3\u548c\u7b2c15\u5206\u949f\u6267\u884c\u547d\u4ee4\u811a\u672c</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E6%B5%8B%E8%AF%95/#2-linux","title":"2 Linux\u6a21\u62df\u7f51\u7edc\u4e22\u5305\u4e0e\u5ef6\u8fdf","text":"<ul> <li>\u53c2\u8003\u8d44\u6599</li> <li>\u51c6\u5907\u5de5\u5177</li> <li><code>tc</code>\u5de5\u5177</li> <li><code>netem</code></li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E6%B5%8B%E8%AF%95/#3-nmon","title":"3 nmon\u7cfb\u7edf\u8d44\u6e90\u76d1\u63a7\u5de5\u5177","text":"<ul> <li>\u53c2\u8003\u8d44\u6599</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E6%B5%8B%E8%AF%95/#4-iftop","title":"4 iftop \u76d1\u63a7\u7f51\u7edc\u6d41\u91cf","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E6%B5%8B%E8%AF%95/#41","title":"4.1 \u547d\u4ee4\u884c\u53c2\u6570\u89e3\u91ca","text":"<ul> <li><code>-i interface</code>:\u6307\u5b9a\u8981\u76d1\u63a7\u7684\u7f51\u5361\u63a5\u53e3</li> <li><code>-B</code>:\u4ee5byte\u800c\u4e0d\u662fbit\u4f5c\u4e3a\u5355\u4f4d(\u9ed8\u8ba4bit)</li> <li><code>-b</code>:\u4e0d\u663e\u793a\u6d41\u91cf\u6761\u578b\u56fe</li> <li><code>-n</code>:\u663e\u793aip\uff0c\u800c\u4e0d\u662fhostname</li> <li><code>-P</code>:\u663e\u793a\u7aef\u53e3\u4fe1\u606f</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E6%B5%8B%E8%AF%95/#42","title":"4.2 \u4ea4\u4e92\u547d\u4ee4\u89e3\u91ca","text":"<ol> <li><code>\u6309\u952et</code>:\u5207\u6362\u4e3b\u673a\u63a5\u6536\u548c\u53d1\u9001\u663e\u793a\u7684\u6a21\u5f0f\uff1a\u4e24\u884c\u663e\u793a\u3001\u4e00\u884c\u663e\u793a\u3001\u53ea\u663e\u793a\u53d1\u9001\u6d41\u91cf\u3001\u53ea\u663e\u793a\u53d1\u9001\u6d41\u91cf\uff1b</li> <li><code>\u6309\u952en</code>:\u5207\u6362\u663e\u793ahostname\u548cip</li> <li><code>\u6309\u952ep</code>:\u5207\u6362\u662f\u5426\u663e\u793aport</li> <li><code>\u6309\u952eb</code>:\u5207\u6362\u662f\u5426\u663e\u793a\u6d41\u91cf\u6761\u578b\u56fe</li> <li><code>\u6309\u952eq</code>:\u9000\u51fa</li> </ol>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E6%B5%8B%E8%AF%95/#43","title":"4.3 \u8f93\u51fa\u4fe1\u606f\u89e3\u91ca","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E6%B5%8B%E8%AF%95/#5-fio-io","title":"5 fio \u8bfb\u5199io\u6027\u80fd\u6d4b\u8bd5\u5de5\u5177","text":"<ul> <li>\u5b98\u65b9\u8d44\u6599</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E6%B5%8B%E8%AF%95/#51-fio","title":"5.1 fio \u53c2\u6570\u9009\u9879","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E6%B5%8B%E8%AF%95/#511-io-type","title":"5.1.1 I/O type","text":"<ul> <li><code>direct=bool</code>:\u9ed8\u8ba4true\uff1b\u5f53true\u65f6\uff0c\u4e0d\u4f7f\u7528\u7cfb\u7edf\u7f13\u5b58\uff0c\u540cLinux\u4e0bO_DIRECT\u3002</li> <li><code>buffered=bool</code>:\u9ed8\u8ba4false\uff1b\u4e0e<code>direct</code>\u76f8\u53cd\uff1b</li> <li><code>readwrite=str \u6216 rw=str</code>:\u6267\u884cIO\u65b9\u5f0f,\u53ef\u9009\u503c\u5982\u4e0b</li> <li><code>read</code>:\u987a\u5e8f\u8bfb</li> <li><code>write</code>:\u987a\u5e8fxie</li> <li><code>randread</code>:\u968f\u673a\u8bfb</li> <li><code>randwrite</code>:\u968f\u673a\u5199</li> <li><code>rw \u6216 readwrite</code>:\u987a\u5e8f\u8bfb\u5199</li> <li><code>randrw</code>:\u968f\u673a\u8bfb\u5199</li> <li><code>trim</code>:</li> <li><code>trimwrite</code>:</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E6%B5%8B%E8%AF%95/#512-block-size","title":"5.1.2 Block size","text":"<ul> <li><code>blocksize=int[,int][,int] \u6216 bs=int[,int][,int]</code>:\u8bbe\u7f6eblocksize\uff0c\u6307\u5b9a\u5927\u5c0f\uff0c\u9ed8\u8ba44096</li> <li><code>bs=256k</code>:means 256k for reads, writes and trims.</li> <li><code>bs=8k,32k</code>\uff1bmeans 8k for reads, 32k for writes and trims.</li> <li><code>bs=8k,32k,</code>:means 8k for reads, 32k for writes, and default for trims.</li> <li><code>bs=,8k</code>:means default for reads, 8k for writes and trims.</li> <li><code>bs=,8k,</code>:means default for reads, 8k for writes, and default for trims.</li> <li><code>blocksize_range=irange[,irange][,irange] \u6216 bsrange=irange[,irange][,irange]</code>:\u8bbe\u7f6eblocksize\uff0c\u6307\u5b9a\u5927\u5c0f\u533a\u95f4\uff0c\u5b9e\u9645\u7684blocksize\u4e00\u5b9a\u662f\u6700\u5c0f\u503c\u7684\u6574\u6570\u500d\uff0c\u9017\u53f7\u5206\u5272\u89c4\u5219\u540cblocksize</li> <li><code>bsrange=1k-4k,2k-8k</code>:</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E6%B5%8B%E8%AF%95/#513-io-size","title":"5.1.3 I/O size","text":"<ul> <li><code>size=int</code>:\u6bcf\u4e00\u4e2ajob\uff08\u7ebf\u7a0b\uff09\u6587\u4ef6io\u603b\u5927\u5c0f\uff08\u6ce8\u610f\u662f\u6bcf\u4e00\u4e2a\u7ebf\u7a0b\uff09\uff0c\u5355\u4e2a\u6587\u4ef6\u5927\u5c0f\u7b49\u4e8e<code>nrfiles/size</code></li> <li><code>filesize=irange(int)</code>:\u8bbe\u7f6e\u5355\u4e2a\u6587\u4ef6\u7684\u5927\u5c0f\uff0c\u53ef\u4ee5\u7ed9\u5b9a\u4e00\u4e2a\u533a\u95f4</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E6%B5%8B%E8%AF%95/#514-io-engine","title":"5.1.4 I/O engine","text":"<p>io\u5f15\u64ce\u4f5c\u7528\u662f\u4f7f\u7528\u54ea\u79cdio\u7c7b\u578b\u53bb\u6267\u884cio\u64cd\u4f5c\uff0c\u6bd4\u5982\u540c\u6b65psync\u3001\u5f02\u6b65libaio\u3002</p> <ul> <li>\u53c2\u8003(https://fio.readthedocs.io/en/latest/fio_doc.html#i-o-engine)</li> <li><code>ioengine=str</code>:io\u65b9\u5f0f</li> <li><code>psync</code>:Basic pread(2) or pwrite(2) I/O. Default on all supported operating systems except for Windows.</li> <li><code>sync</code>:Basic read(2) or write(2) I/O. lseek(2) is used to position the I/O location. See fsync and fdatasync for syncing write I/Os.</li> <li><code>libaio</code>:Linux native asynchronous I/O. Note that Linux may only support queued behavior with non-buffered I/O (set direct=1 or buffered=0). This engine defines engine specific options.</li> <li><code>mmap</code>:File is memory mapped with mmap(2) and data copied to/from using memcpy(3).</li> <li><code>...</code></li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E6%B5%8B%E8%AF%95/#515-io-depth","title":"5.1.5 I/O depth","text":"<p>io\u6df1\u5ea6\u7528\u4e8e\u5f02\u6b65io\uff08\u5982libaio\uff09\uff0c\u4e14direct=1\uff08\u5373\u4e0d\u901a\u8fc7\u7cfb\u7edf\u7f13\u5b58\uff09\u662f\u624d\u6709\u6548\u3002\u5bf9\u5e94\u6bcf\u4e00\u5757\u8bbe\u5907\uff0cdepth\u90fd\u6709\u4e00\u4e2a\u6700\u4f18\u503c\uff0c\u5e76\u4e0d\u662fdepth\u8d8a\u5927\u8d8a\u597d\u3002 - <code>iodepth=int</code>:\u8bbe\u7f6eio\u6df1\u5ea6\uff0c\u9ed8\u8ba41</p>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E6%B5%8B%E8%AF%95/#516-filedirectory","title":"5.1.6 file\u3001directory","text":"<ul> <li><code>directory=str</code>:\u8bbe\u7f6e\u6587\u4ef6\u751f\u6210\u7684\u76ee\u5f55</li> <li><code>filename=str</code>:\u8bbe\u7f6e\u6587\u4ef6\u540d\u524d\u7f00\uff08\u9ed8\u8ba4\u662fjob name + thread number + file number\uff09</li> <li><code>name</code>:\u8bbe\u7f6ejob\u7684\u540d\u79f0</li> <li><code>nrfiles=int</code>:\u6bcf\u4e00\u4e2ajob\uff08\u7ebf\u7a0b\uff09\u6587\u4ef6\u6570\uff0c\u5355\u4e2a\u6587\u4ef6\u5927\u5c0f\u53ef\u4ee5\u7531<code>size/nrfiles</code>\u8ba1\u7b97</li> <li><code>openfiles=int</code>:\u540c\u65f6\u6253\u5f00\u6587\u4ef6\u7684\u6570\u91cf\uff0c\u9ed8\u8ba4\u7b49\u4e8enrfiles\uff0c\u901a\u5e38\u8bbe\u7f6e\u4e3a1</li> <li><code>unlink=bool</code>:\u6267\u884c\u5b8cjob\u540e\u662f\u5426\u5220\u9664\u6d4b\u8bd5\u6587\u4ef6</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E6%B5%8B%E8%AF%95/#517-threadprocessjob","title":"5.1.7 thread\u3001process\u3001job","text":"<ul> <li><code>thread</code>:fio\u9ed8\u8ba4\u4f7f\u7528fork\u521b\u5efa\u8fdb\u7a0b\uff0c\u6b64\u9009\u9879\u5728linux\u4e0b\u4f1a\u91c7\u7528pthread_create\u5e38\u89c1\u7ebf\u7a0b</li> <li><code>nice=int</code>:\u8bbe\u7f6e\u8fdb\u7a0b\u7684\u4f18\u5148\u7ea7\uff0c\u540clinux\u4e0bnice</li> <li><code>prio=int</code>:\u8bbe\u7f6e\u5f53\u524djob\u7684io\u7684\u4f18\u5148\u7ea7\uff0c\u540clinux\u4e0bionice\uff0c\u8303\u56f40-7\uff0clinux\u4e0b\u9ed8\u8ba44</li> <li><code>group_reporting</code>:\u6309group\u8f93\u51fa\u6d4b\u8bd5\u4fe1\u606f\uff0c\u5982\u679c\u6ca1\u6709\u6b64\u53c2\u6570\uff0c\u9ed8\u8ba4\u662f\u4ee5job\uff08\u7ebf\u7a0b\uff09\u4e3a\u5355\u4f4d\u8f93\u51fa\u4fe1\u606f\uff0c\u8fd9\u6837\u5728\u591ajob\u60c5\u51b5\u4e0b\uff0c\u53ef\u8bfb\u6027\u5dee</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E6%B5%8B%E8%AF%95/#52","title":"5.2 \u547d\u4ee4\u884c\u8bbe\u7f6e\u53c2\u6570","text":"<ul> <li><code>--output=filename</code>:fio\u6267\u884c\u7684\u8f93\u51fa\u4fe1\u606f\u5230\u6587\u4ef6\uff0c\u800c\u4e0d\u662f\u63a7\u5236\u53f0</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E6%B5%8B%E8%AF%95/#53-fiotypeunit","title":"5.3 fio\u53c2\u6570type\u548cunit","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E6%B5%8B%E8%AF%95/#531","title":"5.3.1 \u65f6\u95f4\u5355\u4f4d","text":"<p>\u65f6\u95f4\u5355\u4f4d\u9ed8\u8ba4\u662f\u79d2<code>s</code>,\u4e14\u4e0d\u533a\u5206\u5927\u5c0f\u5199 - <code>D or d</code> \u2013 means days - <code>H or h</code>\u2013 means hours - <code>M or m</code> \u2013 means minutes - <code>s or sec</code> means seconds (default) - <code>ms or msec</code> means milliseconds - <code>us or usec</code> means microseconds</p>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E6%B5%8B%E8%AF%95/#532","title":"5.3.2 \u5927\u5c0f\u5355\u4f4d","text":"<p>fio\u53ef\u4ee5\u901a\u8fc7<code>kb_base</code>\u6765\u8bbe\u7f6e\u91c7\u75281000\u62161024\u4f5c\u4e3akb\u57fa\u6570; - <code>kb_base=int</code>:\u8bbe\u7f6e\u63091000\u62161024\u6765\u89e3\u91cak,\u9ed8\u8ba4\u662f1024 - \u5f53<code>kb_base=1000</code>\u65f6:   - K \u2013 means kilo (K) or 1000   - M \u2013 means mega (M) or $1000^2$   - G \u2013 means giga (G) or $1000^3$   - T \u2013 means tera (T) or $1000^4$   - P \u2013 means peta (P) or $1000^5$ - \u5f53<code>kb_base=1024</code>\u65f6:   - Ki \u2013 means kibi (Ki) or 1024   - Mi \u2013 means mebi (Mi) or $1024^2$   - Gi \u2013 means gibi (Gi) or $1024^3$   - Ti \u2013 means tebi (Ti) or $1024^4$   - Pi \u2013 means pebi (Pi) or $1024^5$ - \u793a\u4f8b</p> <pre><code>Examples with kb_base=1000:\n\n4 KiB: 4096, 4096b, 4096B, 4ki, 4kib, 4kiB, 4Ki, 4KiB\n1 MiB: 1048576, 1mi, 1024ki\n1 MB: 1000000, 1m, 1000k\n1 TiB: 1099511627776, 1ti, 1024gi, 1048576mi\n1 TB: 1000000000, 1t, 1000m, 1000000k\n\nExamples with kb_base=1024 (default):\n\n4 KiB: 4096, 4096b, 4096B, 4k, 4kb, 4kB, 4K, 4KB\n1 MiB: 1048576, 1m, 1024k\n1 MB: 1000000, 1mi, 1000ki\n1 TiB: 1099511627776, 1t, 1024g, 1048576m\n1 TB: 1000000000, 1ti, 1000mi, 1000000ki\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E6%B5%8B%E8%AF%95/#533-bool","title":"5.3.3 bool\u7c7b\u578b","text":"<p>bool\u53ef\u9009\u503c\u6709\uff1a - <code>true or 1</code>\uff1a\u8868\u793a\u771f - <code>false or 0</code>\uff1a\u8868\u793a\u5047</p>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E6%B5%8B%E8%AF%95/#54-fio","title":"5.4 fio\u914d\u7f6e\u6587\u4ef6","text":"<p>fio\u6587\u4ef6\u57fa\u672c\u683c\u5f0f\u5982\u4e0b\uff0c[global]\u8868\u793a\u591a\u4e2ajob\u5171\u4eab\u7684\u53c2\u6570</p> <pre><code>; -- start job file --\n[global]\nrw=randread\nsize=128m\n\n[job1]\n\n[job2]\n\n; -- end job file --\n</code></pre> <ul> <li>\u53c2\u6570\u5982\u4e0b\uff1a</li> <li><code>stonewall</code>:\u6307\u793a\u7b49\u5f85\u4e0a\u4e00\u4e2ajob\u5b8c\u6210\u540e\uff0c\u624d\u6267\u884c\u5f53\u524djob\u3002\uff08\u9ed8\u8ba4\u591a\u4e2ajob\u540c\u65f6\u6267\u884c\uff09</li> <li><code>exitall</code>:\u5f53\u591a\u4e2ajob\u540c\u65f6\u5de5\u4f5c\u65f6\uff0c\u53ea\u8981\u6709\u4e00\u4e2ajob\u5b8c\u6210\u4e86\uff0c\u5c31\u4f1a\u7ec8\u6b62\u6240\u6709job\u3002\uff08\u9ed8\u8ba4\u662f\u7ee7\u7eed\u6267\u884c\uff09</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E6%B5%8B%E8%AF%95/#541","title":"5.4.1 \u6ce8\u91ca","text":"<p>\u884c\u9996\u662f<code>;</code>\u6216<code>#</code>\u65f6\uff0c\u8868\u793a\u8fd9\u884c\u662f\u6ce8\u91ca\uff1b\u5982\uff1a<code>#\u6ce8\u91ca\u884c</code>\u6216<code>;\u6ce8\u91ca\u884c</code></p>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E6%B5%8B%E8%AF%95/#542","title":"5.4.2 \u793a\u4f8b","text":"<pre><code>[global]\nioengine=psync\ndirect=1\ngroup_reporting\nruntime=300\nopenfiles=1\niodepth=1\nfile_service_type=sequential\n\nsize=3000M\nnrfiles=1000\nrw=write\nbs=4K\n\n[4K-write-psync-3000M-1-1]\nname=fio_write_4K1_1\nnumjobs=8\ndirectory=/fiotest/4K_3M\n\n[4K-write-psync-3000M-1-2]\nname=fio_write_4K1_2\nnumjobs=8\ndirectory=/fiotest/4K_3M_2\n\n[4K-write-psync-3000M-1-3]\nname=fio_write_4K1_3\nnumjobs=8\ndirectory=/fiotest/4K_3M_3\nstonewall\n\n[4K-write-psync-3000M-1-4]\nname=fio_write_4K1_4\nnumjobs=8\ndirectory=/fiotest/4K_3M_4\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E7%A0%94%E5%8F%91/","title":"Linux \u7814\u53d1","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E7%A0%94%E5%8F%91/#1","title":"1 \u73af\u5883\u53d8\u91cf","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E7%A0%94%E5%8F%91/#11-cc","title":"1.1 \u6dfb\u52a0\u7cfb\u7edf\u5168\u5c40 C/C++\u5934\u6587\u4ef6\u3001\u5e93\u8def\u5f84","text":"<p>\u7cfb\u7edf\u9ed8\u8ba4include\u76ee\u5f55\u662f<code>/usr/include</code>\u76ee\u5f55\u3002\u9ed8\u8ba4\u7684lib\u5e93\u52a0\u8f7d\u8def\u5f84\u662f<code>/usr/local/bin</code>\u76ee\u5f55</p>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E7%A0%94%E5%8F%91/#12-cpath","title":"1.2 CPATH","text":"<p>\u4fee\u6539CPATH\u73af\u5883\u53d8\u91cf\uff08\u5728/etc/profile\u6216~/.bash_profile\u91cc\u9762\uff09\uff0c\u6dfb\u52a0\u65b0\u7684\u5934\u6587\u4ef6\u5305\u542b\u76ee\u5f55\uff0c\u91cd\u65b0\u8fde\u63a5\u7ec8\u7aef\u751f\u6548\uff0cgcc\u7f16\u8bd1\u5668\u4f1a\u5728\u6b64\u76ee\u5f55\u4e0b\u67e5\u627e\u5934\u6587\u4ef6\u3002 - \u793a\u4f8b\uff1a<code>export CPATH=$CPATH:/opt/rocksdb-7.6/include</code> - \u67e5\u770b\u5934\u6587\u4ef6\u641c\u7d22\u76ee\u5f55\uff1a\u4f7f\u7528\u6b64\u65b9\u5f0f\u53ef\u4ee5\u67e5\u5230\u521a\u521a\u6dfb\u52a0\u7684/opt/rocksdb-7.6/include\u7684\u76ee\u5f55</p> <pre><code># \u67e5\u770bgcc\u9884\u5904\u7406C\u65f6\u7684\u7684\u641c\u7d22\u76ee\u5f55\uff1a\n[rocksdb@centos7 ~]$ echo | gcc -x c -v -E -\n# \u67e5\u770bgcc\u9884\u5904\u7406C++\u65f6\u7684\u7684\u641c\u7d22\u76ee\u5f55\uff1a\n[rocksdb@centos7 ~]$ echo | gcc -x c++ -v -E -\n# \u67e5\u770bclang\u9884\u5904\u7406C++\u65f6\u7684\u641c\u7d22\u76ee\u5f55\uff1a\n[rocksdb@centos7 ~]$ echo | clang -x c++ -v -E -\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E7%A0%94%E5%8F%91/#13-ld_library_path","title":"1.3 LD_LIBRARY_PATH","text":"<p>\u4fee\u6539LD_LIBRARY_PATH\u73af\u5883\u53d8\u91cf\uff0c\u6dfb\u52a0\u65b0\u7684\u5e93\u76ee\u5f55\uff0c\u91cd\u65b0\u8fde\u63a5\u7ec8\u7aef\u751f\u6548\u3002 - \u793a\u4f8b\uff1a<code>export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/opt/rocksdb-7.6/lib</code></p>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E7%A0%94%E5%8F%91/#14-ld_preload","title":"1.4 LD_PRELOAD \u5f71\u54cd\u7a0b\u5e8f\u8fd0\u884c\u65f6\u52a8\u6001\u5e93\u7684\u94fe\u63a5","text":"<ul> <li>\u52a8\u6001\u5e93\u52a0\u8f7d\u987a\u5e8f\uff1aLD_PRELOAD&gt;LD_LIBRARY_PATH&gt;/etc/ld.so.cache&gt;/lib&gt;/usr/lib</li> <li>\u4f7f\u7528\u5b9e\u4f8b\uff1a<code>LD_PRELOAD=\u52a8\u6001\u5e93\u8def\u5f84 \u5f85\u6267\u884c\u7a0b\u5e8f\u8def\u5f84\u548c\u540d</code>\uff0c\u5982<code>LD_PRELOAD=/home/user01/libxxx.so /home/user01/test</code>,\u8fd9\u65f6test\u7a0b\u5e8f\u4f1a\u4f18\u5148\u52a0\u8f7d<code>/home/user01/libxxx.so</code>\u8fd9\u4e2a\u52a8\u6001\u5e93</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E7%A0%94%E5%8F%91/#2-cfilt","title":"2 c++filt","text":"<ul> <li>\u529f\u80fd\uff1a\u7ffb\u8bd1c++\u6216java\u7b26\u53f7\u5230\u6807\u51c6\u53ef\u8bfb\u540d\u79f0</li> <li>\u8bed\u6cd5\uff1a<code>c++filt [option] symbol</code></li> <li><code>-p</code>:\u5f53\u5904\u7406\u7684symbol\u65f6\u51fd\u6570\u65f6\uff0c\u4e0d\u6253\u5370\u51fd\u6570\u53c2\u6570</li> <li><code>-_</code>:\u5220\u9664\u540d\u79f0\u524d\u7684\u4e0b\u5212\u7ebf\u3002On some systems, both the C and C++ compilers put an underscore in front of every name. For example, the C name \"foo\" gets the low-level name \"_foo\". This option removes the initial underscore.</li> <li><code>-n</code>:\u4e0d\u5220\u9664\u540d\u79f0\u524d\u7684\u4e0b\u5212\u7ebf</li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ c++filt _ZN2ns3fooIdbEEvT_T0_\nvoid ns::foo&lt;double, bool&gt;(double, bool)\n$ c++filt -_ _ZN2ns3fooIdbEEvT_T0_\n_ZN2ns3fooIdbEEvT_T0_\n$ c++filt -n _ZN2ns3fooIdbEEvT_T0_\nvoid ns::foo&lt;double, bool&gt;(double, bool)\n$ c++filt -p _ZN2ns3fooIdbEEvT_T0_\nns::foo&lt;double, bool&gt;\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E7%A0%94%E5%8F%91/#3-nm","title":"3 nm","text":"<ul> <li>\u529f\u80fd\uff1a\u67e5\u770bobj\u6587\u4ef6\u7b26\u53f7\u4fe1\u606f,\u5305\u62ec<code>lib\uff0cso\uff0co</code></li> <li>\u8bed\u6cd5\u5f62\u5f0f:<code>nm [option] filename</code></li> <li>\u53c2\u8003\u8d44\u6599</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E7%A0%94%E5%8F%91/#31","title":"3.1 \u67e5\u770b\u5bfc\u51fa\u7b26\u53f7(\u5305\u542b\u51fd\u6570\u53c2\u6570\u4fe1\u606f)","text":"<pre><code>nm -n -C xxx.so\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E7%A0%94%E5%8F%91/#32-so","title":"3.2 \u67e5\u770b.so\u6587\u4ef6\u5bfc\u51fa\u51fd\u6570","text":"<pre><code>nm -D xxx.so | awk '{if($2==\"T\"){print $3}}'\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E7%A0%94%E5%8F%91/#4-objdump","title":"4 objdump","text":"<ul> <li>\u529f\u80fd\uff1aobjdump\u5de5\u5177\u7528\u6765\u663e\u793a\u4e8c\u8fdb\u5236\u6587\u4ef6\u7684\u4fe1\u606f\u3002</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E7%A0%94%E5%8F%91/#41","title":"4.1 \u5e38\u7528\u53c2\u6570\u8bf4\u660e","text":"<ul> <li>-f \u663e\u793a\u6587\u4ef6\u5934\u4fe1\u606f</li> <li>-D \u53cd\u6c47\u7f16\u6240\u6709section (-d\u53cd\u6c47\u7f16\u7279\u5b9asection)</li> <li>-h \u663e\u793a\u76ee\u6807\u6587\u4ef6\u5404\u4e2asection\u7684\u5934\u90e8\u6458\u8981\u4fe1\u606f</li> <li>-x \u663e\u793a\u6240\u6709\u53ef\u7528\u7684\u5934\u4fe1\u606f\uff0c\u5305\u62ec\u7b26\u53f7\u8868\u3001\u91cd\u5b9a\u4f4d\u5165\u53e3\u3002-x \u7b49\u4ef7\u4e8e -a -f -h -r -t \u540c\u65f6\u6307\u5b9a\u3002</li> <li>-i \u663e\u793a\u5bf9\u4e8e -b \u6216\u8005 -m \u9009\u9879\u53ef\u7528\u7684\u67b6\u6784\u548c\u76ee\u6807\u683c\u5f0f\u5217\u8868\u3002</li> <li>-r \u663e\u793a\u6587\u4ef6\u7684\u91cd\u5b9a\u4f4d\u5165\u53e3\u3002\u5982\u679c\u548c-d\u6216\u8005-D\u4e00\u8d77\u4f7f\u7528\uff0c\u91cd\u5b9a\u4f4d\u90e8\u5206\u4ee5\u53cd\u6c47\u7f16\u540e\u7684\u683c\u5f0f\u663e\u793a\u51fa\u6765\u3002</li> <li>-R \u663e\u793a\u6587\u4ef6\u7684\u52a8\u6001\u91cd\u5b9a\u4f4d\u5165\u53e3\uff0c\u4ec5\u4ec5\u5bf9\u4e8e\u52a8\u6001\u76ee\u6807\u6587\u4ef6\u6709\u610f\u4e49\uff0c\u6bd4\u5982\u67d0\u4e9b\u5171\u4eab\u5e93\u3002</li> <li>-S \u5c3d\u53ef\u80fd\u53cd\u6c47\u7f16\u51fa\u6e90\u4ee3\u7801\uff0c\u5c24\u5176\u5f53\u7f16\u8bd1\u7684\u65f6\u5019\u6307\u5b9a\u4e86-g\u8fd9\u79cd\u8c03\u8bd5\u53c2\u6570\u65f6\uff0c\u6548\u679c\u6bd4\u8f83\u660e\u663e\u3002\u9690\u542b\u4e86-d\u53c2\u6570\u3002</li> <li>-t \u663e\u793a\u6587\u4ef6\u7684\u7b26\u53f7\u8868\u5165\u53e3\u3002\u7c7b\u4f3c\u4e8enm -s\u63d0\u4f9b\u7684\u4fe1\u606f</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E7%A0%94%E5%8F%91/#5-readelf","title":"5 readelf","text":"<ul> <li>\u53c2\u8003\u535a\u5ba2 ELF\u6587\u4ef6\u6709\u4e09\u79cd\u7c7b\u578b\uff1a</li> <li>REL (Relocatable file)\u53ef\u91cd\u5b9a\u4f4d\u7684\u5bf9\u8c61\u6587\u4ef6,\u7531\u6c47\u7f16\u5668\u6c47\u7f16\u751f\u6210\u7684 .o \u6587\u4ef6</li> <li>EXEC (Executable file)\u53ef\u6267\u884c\u7684\u5bf9\u8c61\u6587\u4ef6\uff0c\u5982window\u4e0a.exe\u6587\u4ef6</li> <li>DYN (Shared object file)\u53ef\u88ab\u5171\u4eab\u7684\u5bf9\u8c61\u6587\u4ef6\uff0c.so\u6587\u4ef6</li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 perf_example]# readelf -h /lib64/libm.so.6\nELF Header:\n  Magic:   7f 45 4c 46 02 01 01 03 00 00 00 00 00 00 00 00 Class:                             ELF64\n  Data:                              2's complement, little endian\n  Version:                           1 (current)\nOS/ABI:                            UNIX - GNU\n  ABI Version:                       0\nType:                              DYN (Shared object file)\nMachine:                           Advanced Micro Devices X86-64\n  Version:                           0x1\n  Entry point address:               0x5350\n  Start of program headers:          64 (bytes into file)\nStart of section headers:          1134704 (bytes into file)\nFlags:                             0x0\n  Size of this header:               64 (bytes)\nSize of program headers:           56 (bytes)\nNumber of program headers:         7\nSize of section headers:           64 (bytes)\nNumber of section headers:         35\nSection header string table index: 34\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E7%A0%94%E5%8F%91/#6-strings","title":"6 strings","text":"<ul> <li>\u529f\u80fd\uff1a\u6253\u5370\u6587\u4ef6\u91cc\u9762\u7684\u53ef\u6253\u5370\u5b57\u7b26\u3002\uff08\u53ef\u4ee5\u6253\u5370\u666e\u901a\u6587\u672c\u6587\u4ef6\uff0c\u4f46\u4e00\u822c\u7528\u4e8e\u4e8c\u8fdb\u5236\u6587\u4ef6\u4e2d\uff09</li> <li>\u8bed\u6cd5\uff1a<code>string [option] file</code><ul> <li><code>-a</code>\uff1a\u626b\u63cf\u6574\u4e2a\u6587\u4ef6\uff0c\u65e0\u8bba\u5b83\u5305\u542b\u54ea\u4e9bsection\uff0c\u6216\u8005\u8fd9\u4e9bsection\u662f\u5426\u5df2\u52a0\u8f7d\u6216\u521d\u59cb\u5316\u3002\uff08\u9ed8\u8ba4\u9009\u9879\uff09</li> <li><code>-d</code>\uff1a\u4ec5\u4ec5\u6253\u5370\u5728\u6587\u4ef6\u4e2d\u5df2\u52a0\u8f7d\u6216\u521d\u59cb\u5316\u7684section\u7684\u53ef\u6253\u5370\u5b57\u7b26</li> <li><code>-n num</code>\uff1a\u6307\u5b9a\u6253\u5370\u7684\u5b57\u7b26\u5e8f\u5217\u6700\u5c0f\u957f\u5ea6\uff08\u9ed8\u8ba4\u662f4byte\uff09</li> <li><code>-f</code>\uff1a\u5728\u8f93\u51fa\u7684\u6bcf\u884c\u5b57\u7b26\u524d\u6253\u5370\u6240\u5c5e\u7684\u6587\u4ef6</li> <li><code>-t radix</code>\uff1a\u5728\u6bcf\u4e2a\u5b57\u7b26\u4e32\u4e4b\u524d\u6253\u5370\u5728\u6587\u4ef6\u4e2d\u7684\u504f\u79fb\u91cf</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 ~]# strings -fd -t x a.out \na.out:     238 /lib64/ld-linux-x86-64.so.2\na.out:     31f |k       C\na.out:     5c9 libstdc++.so.6\na.out:     5d8 __gmon_start__\na.out:     5e7 __cxa_demangle\na.out:     5f6 libm.so.6\na.out:     600 libgcc_s.so.1\na.out:     60e libc.so.6\na.out:     618 puts\na.out:     61d printf\na.out:     624 malloc\n...\u4e2d\u95f4\u7701\u7565...\na.out:     975 UH-h `\na.out:     9a5 UH-h `\na.out:     e2a []A\\A]A^A_\na.out:     e63 %s:%s+%s\na.out:     e6d %s:%s()+%s\na.out:     e79 ----------done----------\na.out:     f57 ;*3$\"\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E7%A0%94%E5%8F%91/#7","title":"7 \u4ee3\u7801\u4e2d\u6253\u5370\u51fd\u6570\u8c03\u7528\u6808\u4fe1\u606f","text":"<ul> <li>\u8d44\u6599</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E7%A0%94%E5%8F%91/#8-core","title":"8 \u4fee\u6539 core \u6587\u4ef6\u914d\u7f6e","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E7%A0%94%E5%8F%91/#81-core","title":"8.1 \u4fee\u6539 core \u6587\u4ef6\u751f\u6210\u4f4d\u7f6e","text":"<p><code>/proc/sys/kernel/core_pattern</code> \u7528\u6765\u914d\u7f6e core dump \u6587\u4ef6\u751f\u6210\u4f4d\u7f6e\u3001\u6587\u4ef6\u540d\u3002 - \u793a\u4f8b\uff1a<code>echo \"/tmp/core-%e-%p-%t\" &gt; /proc/sys/kernel/core_pattern</code>,\u5176\u4e2d<code>/tmp</code>\u662f\u751f\u6210\u6587\u4ef6\u6240\u5728\u7684\u6587\u4ef6\u5939\uff08\u4efb\u610f\u6709\u6743\u9650\u7684\u4f4d\u7f6e\uff09\uff0c<code>core-%e-%p-%t</code>\u662f\u751f\u6210core\u6587\u4ef6\u540d\u7684\u683c\u5f0f - \u6587\u4ef6\u540d\u683c\u5f0f\u5982\u4e0b</p> <pre><code>%p - insert pid into filename \u6dfb\u52a0pid\n%u - insert current uid into filename \u6dfb\u52a0\u5f53\u524duid\n%g - insert current gid into filename \u6dfb\u52a0\u5f53\u524dgid\n%s - insert signal that caused the coredump into the filename \u6dfb\u52a0\u5bfc\u81f4\u4ea7\u751fcore\u7684\u4fe1\u53f7\n%t - insert UNIX time that the coredump occurred into filename \u6dfb\u52a0core\u6587\u4ef6\u751f\u6210\u65f6\u7684unix\u65f6\u95f4\n%h - insert hostname where the coredump happened into filename \u6dfb\u52a0\u4e3b\u673a\u540d\n%e - insert coredumping executable name into filename \u6dfb\u52a0\u547d\u4ee4\u540d\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E7%A0%94%E5%8F%91/#82-core","title":"8.2 \u4fee\u6539 core \u6587\u4ef6\u5927\u5c0f","text":"<ul> <li>\u4e34\u65f6\u4fee\u6539\uff1a\uff08\u5f53\u524d shell \u53ca\u5b50 shell \u6709\u6548\uff09\u4f7f\u7528 <code>ulimit -c unlimited</code> \u4f7f core \u6587\u4ef6\u5927\u5c0f\u65e0\u9650\u5236\u3002</li> <li>\u4fee\u6539\u00a0/etc/security/limits.conf \u914d\u7f6e\u6587\u4ef6, \u7f16\u8f91\u5982\u4e0b</li> </ul> <pre><code>*       soft core      unlimited\n*       hard core      unlimited\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E7%A0%94%E5%8F%91/#9","title":"9 \u4fee\u6539\u7cfb\u7edf\u9650\u5236\u8d44\u6e90","text":"<pre><code>/etc/security/limits.d\u4e0b\u6309\u7167\u5b57\u6bcd\u987a\u5e8f\u6392\u5217\u7684\u914d\u7f6e\u6587\u4ef6\u4f1a\u8986\u76d6 /etc/security/limits.conf\u4e2d\u7684 domain\u76f8\u540c\u7684\u7684\u914d\u7f6e\n</code></pre> <p>limits.conf \u6587\u4ef6\u7684\u5168\u8def\u5f84\u662f <code>/etc/security/limits.conf</code>\uff0c\u662f conf-pamlimits \u6a21\u5757\u7684\u914d\u7f6e\u6587\u4ef6\u3002 \u6bcf\u4e00\u884c\u5185\u5bb9\u683c\u5f0f\u5982\u4e0b\uff1a</p> <pre><code>&lt;domain&gt;      &lt;type&gt;  &lt;item&gt;         &lt;value&gt;\n</code></pre> <ul> <li><code>&lt;domain&gt;</code> \uff1a\u8868\u793a\u7684\u662f\u4f5c\u7528\u8303\u56f4\uff0c\u53ef\u4ee5\u662f\u7528\u6237\u3001\u7528\u6237\u7ec4</li> <li><code>user_name</code> \uff1a\u7528\u6237\u540d</li> <li><code>@group_name</code> \uff1a\u7528\u6237\u7ec4\u540d</li> <li><code>*</code> \uff1a\u6240\u7528\u7528\u6237</li> <li><code>%</code> \uff1a\uff08\u6bd4\u8f83\u590d\u6742\uff0c\u4e0d\u89e3\u91ca\uff09</li> <li><code>&lt;type&gt;</code> \uff1a\u6709\u8f6f\u9650\u5236\u548c\u786c\u9650\u5236\u533a\u522b\uff0c\u8f6f\u9650\u5236\u4e0d\u80fd\u8d85\u8fc7\u786c\u9650\u5236\uff0c\u8f6f\u9650\u5236\u53ef\u4ee5\u6709\u666e\u901a\u7528\u6237\u4fee\u6539\uff0c\u800c\u786c\u9650\u5236\u53ea\u80fd\u7531 root \u7528\u6237\u4fee\u6539\u3002\u53ef\u9009\u503c\u5982\u4e0b</li> <li><code>soft</code> \uff1a\u8f6f\u9650\u5236</li> <li><code>hard</code> \uff1a\u786c\u9650\u5236</li> <li><code>-</code> \uff1a\u8f6f\u9650\u5236\u548c\u786c\u9650\u5236</li> <li><code>&lt;item&gt;</code> \uff1a\u8d44\u6e90\u9879 \u00a0 - core - limits the core file size (KB) \u00a0 - data - max data size (KB) \u00a0 - fsize - maximum filesize (KB) \u00a0 - memlock - max locked-in-memory address space (KB) \u00a0 - nofile - max number of open file descriptors \u00a0 - rss - max resident set size (KB) \u00a0 - stack - max stack size (KB) \u00a0 - cpu - max CPU time (MIN) \u00a0 - nproc - max number of processes \u00a0 - as - address space limit (KB) \u00a0 - maxlogins - max number of logins for this user \u00a0 - maxsyslogins - max number of logins on the system \u00a0 - priority - the priority to run user process with \u00a0 - locks - max number of file locks the user can hold \u00a0 - sigpending - max number of pending signals \u00a0 - msgqueue - max memory used by POSIX message queues (bytes) \u00a0 - nice - max nice priority allowed to raise to values: <code>[-20, 19]</code> \u00a0 - rtprio - max realtime priority</li> <li><code>&lt;value&gt;</code> \uff1a\u53ef\u4ee5\u7531\u65e0\u9650\u5236\u6216\u65e0\u9650\u5927\uff0c\u6216\u5177\u4f53\u7684\u503c\u3002priority\u00a0and\u00a0nice\u4e0d\u80fd\u4f7f\u7528 <code>unlimited</code></li> <li><code>unlimited</code> \uff1a \u65e0\u9650\u5236</li> <li>\u5176\u5b83\u6570\u503c</li> <li>\u793a\u4f8b</li> </ul> <pre><code>*               soft    core            0\n*               hard    nofile          512\n@student        hard    nproc           20\n@faculty        soft    nproc           20\n@faculty        hard    nproc           50\nftp             hard    nproc           0\n@student        -       maxlogins       4\n:123            hard    cpu             5000\n@500:           soft    cpu             10000\n600:700         hard    locks           10\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/","title":"Linux\u8f6f\u4ef6\u5b89\u88c5","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/#1","title":"1 \u91cd\u8981\u914d\u7f6e\u5b89\u88c5","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/#11","title":"1.1 \u5b89\u88c5\u4e2d\u6587\u624b\u518c","text":"<pre><code>sudo apt-get install manpages-zh\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/#2-gcc","title":"2 gcc","text":"<pre><code>\u5982\u679c\u65e0\u5916\u7f51\u8bbf\u95ee\u6743\u9650\uff0c\u7b2c3\u6b65\uff1a\u4e0b\u8f7d\u5b89\u88c5\u4f9d\u8d56\u5305\u5931\u8d25\uff0c\u53ef\u4ee5\u53bbhttp://gcc.gnu.org/pub/gcc/infrastructure/ \u4e0b\u8f7d\uff0c\u5177\u4f53\u4e0b\u8f7d\u4ec0\u4e48\uff0c./contrib/download_prerequisites\u6587\u4ef6\u91cc\u9762\u90fd\u6709\n</code></pre> <ul> <li>\u4e0b\u8f7d\u5730\u5740 \u4e3b\u8981\u8bbe\u8ba1\u4ee5\u4e0b\u64cd\u4f5c,\u4ee5gcc-10.2.0\u4e3a\u4f8b</li> <li>\u9996\u5148\u4fdd\u8bc1\u73af\u5883\u4e2d\u5df2\u7ecf\u6709g++\u3001gcc\u5de5\u5177\uff1a<code>yum install -y gcc gcc-c++</code></li> <li>\u89e3\u538b\u5305\uff1a<code>tar -xzvf gcc-10.2.0.tar.gz</code></li> <li>\u4e0b\u8f7d\u5b89\u88c5\u4f9d\u8d56\u6027\uff1a<code>cd gcc-10.2.0;./contrib/download_prerequisites</code></li> <li>\u521b\u5efa\u7f16\u8bd1\u6587\u4ef6\u5939\uff1a<code>mkdir build &amp;&amp; cd build</code></li> <li>\u914d\u7f6e\u7f16\u8bd1\u9009\u9879(\u81ea\u5b9a\u4e49\u5b89\u88c5\u8def\u5f84)\uff1a<code>../configure --prefix=/opt/gcc-10.2.0 --enable-checking=release --enable-languages=c,c++ --disable-multilib</code></li> <li>\u7f16\u8bd1\uff1a<code>make</code></li> <li>\u5b89\u88c5\uff1a<code>sudo make install</code></li> <li>\u521b\u5efa\u7b26\u53f7\u94fe\u63a5 \u6ce8\u610f\uff1a\u5728\u6b65\u9aa44\u914d\u7f6e\u9009\u9879\u4e2d\u6307\u5b9a\u4e86\u5b89\u88c5\u8def\u5f84/opt/gcc-10.2.0\uff0c\u8fd9\u4e2a\u8def\u5f84\u53ef\u4ee5\u4efb\u610f\uff0c\u4fbf\u4e8e\u540e\u671f\u5220\u9664</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/#21","title":"2.1 \u4e0b\u8f7d\u5b89\u88c5\u4f9d\u8d56\u6587\u4ef6\u5931\u8d25\u95ee\u9898","text":"<ul> <li>\u95ee\u9898\uff1a\u6587\u4ef6gmp-6.1.0.tar.bz2 isl-0.18.tar.bz2 mpc-1.0.3.tar.gz mpfr-3.1.4.tar.bz2\u4e0b\u8f7d\u5931\u8d25</li> <li>\u89e3\u51b3\u65b9\u6cd5\uff1a</li> <li>\u624b\u52a8\u4e0b\u8f7d\u5e76\u653e\u5165gcc-10.2.0\u6587\u4ef6\u5939\u4e2d</li> <li>\u518d\u6b21\u6267\u884c<code>./contrib/download_prerequisites</code></li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/#22-gcc","title":"2.2 \u914d\u7f6e\u7f16\u8bd1\u9009\u9879(\u81ea\u5b9a\u4e49\u5b89\u88c5\u4f4d\u7f6e)\u540e\u7b26\u53f7\u94fe\u63a5gcc\u65b9\u6cd5","text":"<p>\u6ce8\u610f\uff1a\u4ee5\u4e0b\u5185\u5bb9\u7528<code>src</code>\u4ee3\u66ff\u5b89\u88c5\u8def\u5f84<code>/opt/gcc-10.2.0</code> 1. \u6267\u884c\u6b65\u9aa42\u65f6\uff0c\u6307\u5b9agcc\u5b89\u88c5\u4f4d\u7f6e\uff1a<code>../configure --prefix=/opt/gcc-10.2.0</code>\u6307\u5b9a\u4e86gcc\u5b89\u88c5\u4f4d\u7f6e\u5728<code>/opt/gcc-10.2.0</code>\u4e0b 2. \u5728\u6267\u884c\u5b8c\u6b65\u9aa45,6\u6216\uff0c\u521b\u5efa\u7b26\u53f7\u94fe\u63a5,\u5728<code>/opt/gcc-10.2.0/bin</code>\u4e0b\u65b0\u5efa<code>gcc-ln.sh</code>\u6587\u4ef6\uff0c\u8f93\u5165\u4ee5\u4e0b\u5185\u5bb9</p> <pre><code>#!/bin/bash\n#\u5c06/opt/gcc-10.2.0/bin/\u4e0b\u4e8c\u8fdb\u5236\u6587\u4ef6 \u7b26\u53f7\u94fe\u63a5\u5230/usr/local/bin\u4e0b\uff0c\u5e76\u4e14\u90fd\u52a0\u4e0a\u540e\u7f00-10\uff0c\nfor file in *; do\nsudo ln -s /opt/gcc-12.1.0/bin/${file} /usr/local/bin/${file}\ndone\n</code></pre> <ol> <li>\u6267\u884c<code>gcc-ln.sh</code>\u6587\u4ef6</li> </ol> <pre><code>chmod u+x gcc-ln.sh\n</code></pre> <ol> <li>\u4f7f\u7528gcc-10 \u6216g++-10\u6307\u4ee4\u6765\u7f16\u8bd1c\u6216c++\u6587\u4ef6</li> </ol> <pre><code>$ g++-10 1.cpp\n$ ./a.out\nhello world!\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/#23-gcc","title":"2.3 \u5220\u9664gcc","text":"<p>\u56e0\u4e3a\u5b89\u88c5\u65f6\u6307\u5b9a\u4e86\u5b89\u88c5\u4f4d\u7f6e\uff0c\u4e5f\u4f7f\u7528\u4e86\u7b26\u53f7\u94fe\u63a5\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u56e0\u6b64\u53ea\u9700\u8981\u5220\u9664\u5b89\u88c5\u6587\u4ef6<code>/opt/gcc-10.2.0</code>\uff0c\u540c\u65f6\u521b\u5efa\u7684\u4e8c\u8fdb\u5236\u7b26\u53f7\u94fe\u63a5\u4e5f\u4f1a\u6d88\u5931</p>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/#3-cmake","title":"3 cmake","text":"<ul> <li>cmake\u9879\u76ee\u5730\u5740</li> <li>\u4e0b\u8f7d\u6e90\u7801\u5305\uff0c\u6bd4\u5982cmake-3.24.0.tar.gz</li> <li>\u5b89\u88c5</li> </ul> <pre><code>[root@centos7 ~]# wget https://github.com/Kitware/CMake/releases/download/v3.24.0/cmake-3.24.0.tar.gz\n[root@centos7 ~]# tar -xzf cmake-3.24.0.tar.gz\n[root@centos7 ~]# cd cmake-3.24.0\n[root@centos7 cmake-3.24.0]# ./bootstrap \n[root@centos7 cmake-3.24.0]# make\n[root@centos7 cmake-3.24.0]# make install\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/#4-cheat","title":"4 cheat","text":"<pre><code>title: cheat\u662f\u4ec0\u4e48\uff1f\n\u5141\u8bb8\u60a8\u5728\u547d\u4ee4\u884c\u4e0a\u521b\u5efa\u548c\u67e5\u770b\u4ea4\u4e92\u5f0f\u5907\u5fd8\u5355\u3002\u5b83\u7684\u8bbe\u8ba1\u76ee\u7684\u662f\u5e2e\u52a9\u63d0\u9192 * nix \u7cfb\u7edf\u7ba1\u7406\u5458\u4ed6\u4eec\u7ecf\u5e38\u4f7f\u7528\u7684\u547d\u4ee4\u7684\u9009\u9879\uff0c\u4f46\u662f\u9891\u7387\u4e0d\u8db3\u4ee5\u8bb0\u4f4f\u3002\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/#41-linux","title":"4.1 Linux\u5b89\u88c5","text":"<ul> <li>\u9879\u76ee\u5730\u5740\uff1a<ul> <li>https://github.com/cheat/cheat</li> <li>https://github.com/cheat/cheatsheets</li> </ul> </li> <li>\u5b98\u65b9\u5b89\u88c5\u6587\u6863</li> <li>\u5b89\u88c5\u6b65\u9aa4\uff1a</li> <li>\u4e0b\u8f7dcheat\u5b89\u88c5</li> </ul> <pre><code>cd /tmp \\\n&amp;&amp; wget https://github.com/cheat/cheat/releases/download/4.2.5/cheat-linux-amd64.gz \\\n&amp;&amp; gunzip cheat-linux-amd64.gz \\\n&amp;&amp; chmod +x cheat-linux-amd64 \\\n&amp;&amp; sudo mv cheat-linux-amd64 /usr/local/bin/cheat\n</code></pre> <ol> <li>\u914d\u7f6echeat\uff1a\u9996\u6b21\u4f7f\u7528cheat\uff0c\u5982\u9996\u6b21\u4f7f\u7528<code>cheat netstat</code>\uff0c\u4f1a\u63d0\u793a\u751f\u6210cheat\u914d\u7f6e\u6587\u4ef6\u548c\u4e0b\u8f7dcheatsheets</li> </ol> <pre><code>[root@centos7 ~]# cheat netstat\nA config file was not found. Would you like to create one now? [Y/n]: Y\nWould you like to download the community cheatsheets? [Y/n]: Y\nCloning community cheatsheets to /root/.config/cheat/cheatsheets/community.\n\u6b63\u514b\u9686\u5230 '/root/.config/cheat/cheatsheets/community'...\n</code></pre> <ol> <li>\u53ef\u4ee5\u9009\u62e9\u81ea\u5b9a\u4e49cheat\u914d\u7f6econf.yml</li> </ol>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/#5","title":"5 \u538b\u7f29\u8f6f\u4ef6\u5b89\u88c5","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/#51-zipunzip","title":"5.1 zip\u3001unzip","text":"<ul> <li>zip\uff1a<code>yum install -y zip</code></li> <li>unzip\uff1a<code>yum install -y unzip</code></li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/#52-bzip2","title":"5.2 bzip2","text":"<ul> <li><code>yum install -y bzip2</code></li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/","title":"Linux\u8fd0\u7ef4","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#1-linuxcentosubuntu","title":"1 \u67e5\u770blinux\u662fcentos\u6216ubuntu","text":"<ol> <li>\u6267\u884c<code>lsb_release -a</code>,ubuntu\u7248\u672c\u4f1a\u663e\u793a\u4fe1\u606f\uff0ccentos\u7248\u663e\u793a\u9519\u8bef</li> <li>\u6267\u884c<code>cat /etc/redhat-release</code>,centos\u7248\u4f1a\u663e\u793a\u4fe1\u606f\uff0cubuntu\u7248\u4f1a\u663e\u793a\u9519\u8bef</li> </ol>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#2","title":"2 \u67e5\u770b\u673a\u5668\u91cd\u542f\u8bb0\u5f55","text":"<ol> <li>\u6267\u884c\uff1a<code>last reboot</code></li> </ol> <pre><code>$ last reboot\nreboot   system boot  4.19.12-1.el7.el Tue Apr 19 18:10 - 19:12  (01:02)    \nreboot   system boot  4.19.12-1.el7.el Sun Apr 17 21:41 - 19:12 (1+21:31)   \nreboot   system boot  4.19.12-1.el7.el Sun Apr 17 04:28 - 19:12 (2+14:44)   \nreboot   system boot  4.19.12-1.el7.el Sat Apr 16 20:39 - 19:12 (2+22:33)   \nreboot   system boot  4.19.12-1.el7.el Fri Apr 15 06:56 - 19:12 (4+12:16)   \nreboot   system boot  4.19.12-1.el7.el Thu Apr 14 19:43 - 19:12 (4+23:29)   \nreboot   system boot  4.19.12-1.el7.el Sun Sep  5 00:29 - 19:41 (221+19:11) \nreboot   system boot  4.19.12-1.el7.el Sat Sep  4 05:26 - 19:41 (222+14:15) \nreboot   system boot  4.19.12-1.el7.el Wed Sep  1 08:12 - 19:41 (225+11:28) \nreboot   system boot  4.19.12-1.el7.el Tue Aug 31 03:17 - 19:41 (226+16:23) \nreboot   system boot  4.19.12-1.el7.el Thu Aug 26 22:11 - 19:41 (230+21:29) \nreboot   system boot  4.19.12-1.el7.el Thu Aug 26 17:06 - 19:41 (231+02:34) \nreboot   system boot  4.19.12-1.el7.el Thu Aug 26 16:43 - 19:41 (231+02:58) \nreboot   system boot  4.19.12-1.el7.el Fri Aug 20 11:30 - 19:41 (237+08:11) </code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#3-hostid","title":"3 \u4fee\u6539\u7cfb\u7edfhostid","text":"<ul> <li>\u793a\u4f8b</li> </ul> <pre><code>15ac1f1d\necho -ne '\\x1d\\x1f\\xac\\x15' &gt; /etc/hostid\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#4-hostname","title":"4 \u4fee\u6539hostname","text":"<ul> <li>\u4e34\u65f6\u4fee\u6539\uff1a<code>hostname \u4e3b\u673a\u540d</code>\uff0c\u673a\u5668\u91cd\u542f\u5931\u6548</li> <li>\u6c38\u4e45\u4fee\u6539\uff1a\u7f16\u8f91/etc/hostname\u6587\u4ef6,<code>echo \u4e3b\u673a\u540d &gt; /etc/hostname</code></li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#5","title":"5 \u5347\u7ea7\u7cfb\u7edf\u5185\u6838","text":"<p>centos7\u9ed8\u8ba4\u5185\u6838\u7248\u672c\u662f3.10\uff0c\u6b64\u7248\u672c\u5185\u6838\u5b58\u5728\u6f0f\u6d1e\uff0ck8s\u4e2d\u5efa\u8bae\u4f7f\u75284\u4ee5\u4e0a\u5185\u6838\u7248\u672c</p> <pre><code># 1.\u67e5\u770b\u5f53\u524d\u5185\u6838\u7248\u672c\n[root@k8s ~]# uname -r\n3.10.0-1160.el7.x86_64\n# 2.\u6dfb\u52a0yum\u6e90\u4ed3\u5e93\n[root@k8s ~]# mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup \n[root@k8s ~]# curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo \n[root@k8s ~]# curl -o /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo\n[root@k8s ~]# rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org\n[root@k8s ~]# yum install -y https://www.elrepo.org/elrepo-release-7.0-4.el7.elrepo.noarch.rpm\n# 3.\u66f4\u65b0yum\u6e90\u4ed3\u5e93\uff08\u8fd9\u6b65\u66f4\u65b0\u8f83\u591a\uff0c\u901f\u5ea6\u6bd4\u8f83\u6162\uff09\n[root@k8s ~]# yum -y update\n# 4.\u4e0b\u8f7d\u5185\u6838\n# 4.1\u67e5\u770b\u53ef\u7528\u7684\u7cfb\u7edf\u5185\u6838\u5305\uff0clt\u8868\u957f\u671f\u652f\u6301\u7248\uff0cmt\u8868\u793a\u5f53\u524d\u7a33\u5b9a\u7248\n[root@k8s ~]# yum --disablerepo=\"*\" --enablerepo=\"elrepo-kernel\" list available\n# 4.2\u5b89\u88c5\u5185\u6838\uff0c\u6ce8\u610f\u5148\u8981\u67e5\u770b\u53ef\u7528\u5185\u6838\uff0c\u6211\u5b89\u88c5\u7684\u662f5.18.10\u7248\u672c\u7684\u5185\u6838 (\u53ef\u80fd\u6709\u4e9b\u9700\u8981\u5b89\u88c5header\u5305\uff08\u5185\u6838include\u6587\u4ef6\uff09\u7b49\uff0c\u8bf7\u81ea\u884c\u9009\u62e9\u5b89\u88c5)\uff0ckernel-mt-headers kernel-mt-tools kernel-mt-devel\n[root@k8s ~]# yum --enablerepo=elrepo-kernel install kernel-ml -y \n# 4.3\u67e5\u770b\u76ee\u524d\u53ef\u7528\u5185\u6838\n[root@k8s ~]# awk -F\\' '$1==\"menuentry \" {print i++ \" : \" $2}' /etc/grub2.cfg\n0 : CentOS Linux (5.18.10-1.el7.elrepo.x86_64) 7 (Core)\n1 : CentOS Linux (3.10.0-1160.el7.x86_64) 7 (Core)\n2 : CentOS Linux (0-rescue-338bf7be5ccb4bd4a9cd9e4ea1e91ad9) 7 (Core)\n\n# 5.\u4f7f\u7528\u5e8f\u53f7\u4e3a0\u7684\u5185\u6838\uff0c\u5e8f\u53f70\u662f\u524d\u9762\u67e5\u51fa\u6765\u7684\u53ef\u7528\u5185\u6838\u7f16\u53f7\n[root@k8s ~]# grub2-set-default 0\n\n# 6.\u751f\u6210 grub \u914d\u7f6e\u6587\u4ef6\u5e76\u91cd\u542f\n[root@k8s ~]# grub2-mkconfig -o /boot/grub2/grub.cfg\n# 7.\u91cd\u542f\u673a\u5668\n[root@k8s ~]# reboot\n# 8.\u67e5\u770b\u5185\u6838\n[root@k8s ~]# uname -r\n5.18.9-1.el7.elrepo.x86_64\n# 9.\u5b89\u88c5\u5185\u6838\u5934\u6587\u4ef6\n[root@centos7 ~]# yum install \"kernel-devel-uname-r == $(uname -r)\"\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#6","title":"6 \u5220\u9664\u5185\u6838","text":"<pre><code>[root@centos7 ~]# uname -r\n5.18.15-1.el7.elrepo.x86_64\n[root@centos7 ~]# awk -F\\' '$1==\"menuentry \" {print i++ \" : \" $2}' /etc/grub2.cfg\n0 : CentOS Linux (5.18.15-1.el7.elrepo.x86_64) 7 (Core)\n1 : CentOS Linux (3.10.0-1160.71.1.el7.x86_64) 7 (Core)\n2 : CentOS Linux (3.10.0-1160.el7.x86_64) 7 (Core)\n3 : CentOS Linux (0-rescue-338bf7be5ccb4bd4a9cd9e4ea1e91ad9) 7 (Core)\n[root@centos7 ~]# rpm -qa | grep kernel\nkernel-tools-3.10.0-1160.71.1.el7.x86_64\nkernel-ml-5.18.15-1.el7.elrepo.x86_64\nkernel-3.10.0-1160.el7.x86_64\nkernel-3.10.0-1160.71.1.el7.x86_64\nkernel-tools-libs-3.10.0-1160.71.1.el7.x86_64\n\n## \u5220\u9664\u5185\u68383.10.0\u76842\u4e2a\u5185\u6838\n[root@centos7 ~]# yum remove kernel-3.10.0-1160.71.1.el7.x86_64 -y\n[root@centos7 ~]# yum remove kernel-3.10.0-1160.el7.x86_64 -y\n[root@centos7 ~]# reboot\n[root@centos7 ~]# awk -F\\' '$1==\"menuentry \" {print i++ \" : \" $2}' /etc/grub2.cfg\n0 : CentOS Linux (5.18.15-1.el7.elrepo.x86_64) 7 (Core)\n1 : CentOS Linux (0-rescue-338bf7be5ccb4bd4a9cd9e4ea1e91ad9) 7 (Core)\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#7-sudo","title":"7 \u666e\u901a\u7528\u6237\u4f7f\u7528 sudo","text":"<ul> <li>\u53c2\u8003</li> <li>\u6b65\u9aa4</li> </ul> <pre><code># \u7f16\u8f91/etc/sudoers\u6587\u4ef6\nvi /etc/sudoers\n# \u5728\u6dfb\u52a0root ALL=(ALL) ALL\u90a3\u4e00\u5217\u4e0b\u9762\u6dfb\u52a0 \"\u7528\u6237\u540d ALL=(ALL) ALL\"\nroot ALL=(ALL) ALL\nuser ALL=(ALL) ALL\n# wq!\u4fdd\u5b58\u9000\u51fa\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#8-linux","title":"8 Linux \u7ed9\u8f6f\u4ef6\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf","text":"<ol> <li>\u6253\u5f00\u73af\u5883\u53d8\u91cf\u914d\u7f6e\u6587\u4ef6</li> </ol> <pre><code>sudo vim /etc/profile\n</code></pre> <ol> <li>\u65b0\u589e\u73af\u5883\u53d8\u91cf</li> </ol> <pre><code># \u5728 export PATH \u4e0b\u4e00\u884c\u65b0\u589e\u5982\u4e0b\u547d\u4ee4,(\u5047\u8bbe\u5c06vscode\u53ef\u6267\u884c\u6587\u4ef6\u8def\u5f84\u8bbe\u4e3a\u73af\u5883\u53d8\u91cf)\nexport VSCODE=/opt/apps/com.visualstudio.code/files/share/code/bin\nexport PATH=$PATH:$VSCODE\n# /opt/apps/com.visualstudio.code/files/share/code/bin\u662fvscode\u53ef\u6267\u884c\u6587\u4ef6\u8def\u5f84\n</code></pre> <ol> <li>\u66f4\u65b0\u914d\u7f6e\u6587\u4ef6</li> </ol> <pre><code>source /etc/profile\n</code></pre> <ol> <li>\u76f4\u63a5\u4f7f\u7528\u547d\u4ee4\u6253\u5f00\u8f6f\u4ef6</li> </ol> <pre><code># code\u662f/opt/apps/com.visualstudio.code/files/share/code/bin\u8def\u5f84\u4e0b\u7684\u53ef\u6267\u884c\u6587\u4ef6\u540d\ncode .\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#9-shell-bash-complete","title":"9 shell \u8865\u5168 bash-complete","text":"<ul> <li>shell \u8865\u5168\u529f\u80fd\uff1a\u662f\u5f53\u5728\u547d\u4ee4\u884c\u952e\u5165\u547d\u4ee4\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u5355\u51fb tab \u6765\u81ea\u52a8\u8865\u5168\uff0c\u6216\u53cc\u51fb tab \u663e\u793a\u6240\u6709\u5339\u914d\u9879\u3002</li> <li>\u5b9e\u73b0\u65b9\u6cd5\uff1a\u901a\u8fc7 linux \u81ea\u5e26\u7684 complete\uff0c\u914d\u7f6e\u76f8\u5e94\u7684\u89c4\u5219\u5373\u53ef</li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ complete -W \"one two three\" test_complete\n$ test_complete [TAB][TAB]\none    three  two    </code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#91-complete","title":"9.1 complete \u8bed\u6cd5\u89c4\u5219","text":"<ul> <li>\u53c2\u8003</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#10-man","title":"10 \u8bbe\u7f6e man \u624b\u518c\u641c\u7d22\u8def\u5f84","text":"<ul> <li>\u4f7f\u7528\u573a\u666f\uff1a\u5f53\u6211\u4eec\u624b\u52a8\u5b89\u88c5\u8f6f\u4ef6\u65f6\uff0c\u53ef\u80fd\u9700\u8981\u5c06\u8f6f\u4ef6\u81ea\u5e26\u7684 man \u6587\u4ef6\u5e76\u6ca1\u6709\u5728 man \u9ed8\u8ba4\u641c\u7d22\u8def\u5f84\u91cc\uff0c\u7ed3\u679c\u662f\u5bfc\u81f4 man \u5931\u6548</li> <li>\u65b9\u6cd5\uff1a</li> <li>\u4fee\u6539 man \u914d\u7f6e\u6587\u4ef6\uff0c\u5982 ubuntu \u4e0b\u662f <code>/etc/manpath.config</code>\uff0cdebian \u4e0b\u662f <code>/etc/man_db.conf</code></li> <li>\u65b0\u589e\u4e00\u884c <code>MANDATORY_MANPATH /your/man/path</code>, \u5982 <code>MANDATORY_MANPATH /home/shw/tools/share/man</code></li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#11-ps1","title":"11 \u8bbe\u7f6e PS1 \u53d8\u91cf","text":"<ul> <li>\u53c2\u8003\u8d44\u6599</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#12-curl","title":"12 curl","text":"<ul> <li>\u529f\u80fd\uff1a\u7528\u4e8e\u7f51\u7edc\u95f4\u4f20\u8f93\u6570\u636e\u7684\u5de5\u5177\uff0c\u652f\u6301\u7684\u534f\u8bae\u6709\uff1aHTTP, HTTPS, FTP, FTPS, SCP, SFTP, TFTP, DICT, TELNET, LDAP or FILE</li> <li>\u8bed\u6cd5\uff1a<code>curl [option] urls</code></li> <li>\u65e0\u9009\u9879\uff1a\u663e\u793a\u76ee\u6807url\u6570\u636e\uff0c\u5982<code>curl https://www.baidu.com/</code>,\u5c06\u8f93\u51fa\u7f51\u9875\u6e90\u7801</li> <li><code>-o file</code>\u6216<code>&gt;&gt; file</code>\uff1a\u6307\u5b9a\u8f93\u51fa\u6587\u4ef6\uff0c\u5373\u91cd\u5b9a\u5411\u5230\u6307\u5b9a\u6587\u4ef6</li> <li><code>-s/--silent</code>\uff1a\u4e0d\u663e\u793a\u8fdb\u7a0b\u6761\u548c\u9519\u8bef\u4fe1\u606f</li> <li><code>-X/--request &lt;command&gt;</code>\uff1ahttp\u4e2d\u8bf7\u6c42\u65b9\u5f0f\uff0c\u5982<code>GET\u3001PUT\u3001POST</code>\uff0c\u9ed8\u8ba4GET\u65b9\u6cd5</li> <li><code>-H/--header &lt;header&gt;</code>\uff1a\u6307\u5b9ahttp\u5934\u90e8\u5185\u5bb9</li> <li><code>-d/--data &lt;data&gt;</code>\uff1a\u6307\u5b9ahttp\u4e2dbody\u6d88\u606f\u4f53\u5185\u5bb9</li> <li><code>-T/--upload-file &lt;file&gt;</code>\uff1a\u4e0a\u4f20\u6587\u4ef6\uff0c\u5982\u679c\u7528\u4e8eftp\uff0c\u5728url\u540e\u6709<code>/</code>\u8868\u793a\u7684\u662f\u76ee\u5f55\uff0c\u5426\u5219\u5f53\u6210\u6587\u4ef6\u540d\uff0c\u5982\u679c\u6587\u4ef6\u5b58\u5728\uff0c\u5219\u8986\u76d6\uff0c\u5982\u679c\u6307\u5b9a\u4e86<code>-a</code>\uff0c\u5219\u8ffd\u52a0\u5199\u3002\u5982\u679c\u7528\u6237http\uff0c\u5219\u91c7\u7528put\u65b9\u6cd5</li> <li><code>curl -u username:password URL</code>\uff1a\u5728\u8bbf\u95ee\u9700\u8981\u6388\u6743\u7684\u9875\u9762\u65f6\uff0c\u8f93\u5165\u7528\u6237\u540d\u548c\u5bc6\u7801</li> <li><code>curl -u username URL</code>\uff1a\u540c\u4e0a\uff0c\u4ec5\u8f93\u5165\u7528\u6237\u540d\uff0c\u540e\u6839\u636e\u63d0\u793a\u8f93\u5165\u5bc6\u7801</li> <li><code>-C -</code>\uff1a\u65ad\u70b9\u7eed\u4f20\uff0c\u5f53\u4e0a\u4e00\u6b21\u4e0b\u8f7d\u4efb\u52a1\u5c1a\u672a\u5b8c\u6210\u800c\u5f02\u5e38\u7ec8\u6b62\uff0c\u4f7f\u7528\u6b64\u9009\u9879\u53ef\u4ee5\u63a5\u7740\u4e0a\u4e00\u6b21\u8fdb\u7a0b\u7ee7\u7eed\u4e0b\u8f7d</li> <li><code>-i</code>\uff1a\u53c2\u6570\u6253\u5370\u51fa\u670d\u52a1\u5668\u56de\u5e94\u7684 HTTP \u6807\u5934</li> <li>\u793a\u4f8b\uff1a\u9009\u9879<code>-o</code></li> </ul> <pre><code>$ curl https://www.baidu.com/ &gt;&gt;baidu.html\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100  2443  100  2443    0     0  22172      0 --:--:-- --:--:-- --:--:-- 22412\n$ curl https://www.baidu.com/ -o baidu.html\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100  2443  100  2443    0     0  19924      0 --:--:-- --:--:-- --:--:-- 20190\n</code></pre> <ul> <li>\u793a\u4f8b\uff1a-T -a</li> </ul> <pre><code># \u5c06\u672c\u5730baidu.html\u8ffd\u52a0\u5199\u5165ftp://192.168.1.59/\u4e0b\u76841.txt\u4e2d\n$ curl -aT baidu.html ftp://192.168.1.59/1.txt\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100  2443    0     0  100  2443      0   7437 --:--:-- --:--:-- --:--:--  7448\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#13","title":"13 \u65e5\u5fd7\u6587\u4ef6\u91cc\u9762\u67e5\u627e\u5173\u952e\u5b57","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#131-headtail","title":"13.1 head\u548ctail\u67e5\u770b\u65e5\u5fd7\u9996\u4f4d\u884c","text":"<ul> <li>\u67e5\u770b\u65e5\u5fd7 \u524d n\u884c\uff1a</li> <li>\u8bed\u6cd5\uff1a<code>cat \u6587\u4ef6\u540d | head -n \u6570\u91cf</code></li> <li>\u793a\u4f8b\uff1a<code>cat log.log | head -n 200</code></li> <li>\u67e5\u770b\u65e5\u5fd7 \u5c3e n\u884c\uff1a</li> <li>\u8bed\u6cd5\uff1a<code>cat \u6587\u4ef6\u540d | tail -n \u6570\u91cf</code></li> <li>\u793a\u4f8b\uff1a<code>cat log.log | tail -n 200</code></li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#132-grep","title":"13.2 grep \u67e5\u627e\u65e5\u5fd7\u5173\u952e\u5b57","text":"<ol> <li>\u65b9\u6cd51\uff1a</li> <li>\u8bed\u6cd5\uff1a<code>cat \u6587\u4ef6\u540d | grep \"\u5173\u952e\u8bcd\"</code></li> <li>\u793a\u4f8b\uff1a<code>cat log.log | grep \"train\"</code></li> <li>\u65b9\u6cd52\uff1a</li> <li>\u8bed\u6cd5\uff1a<code>grep -i \"\u5173\u952e\u8bcd\" \u6587\u4ef6\u540d</code></li> <li>\u793a\u4f8b\uff1a<code>grep -i \"train\" log.log</code></li> </ol>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#14-chrony","title":"14 chrony\u65f6\u95f4\u540c\u6b65","text":"<pre><code># \u5b89\u88c5chrony\n[root@k8s ~]# yum install -y chrony\n# \u5f00\u673a\u81ea\u542f\uff0c\u542f\u52a8chronyd\u670d\u52a1\uff0c\u67e5\u770b\u670d\u52a1\u72b6\u6001\n[root@k8s ~]# systemctl enable chronyd\n[root@k8s ~]# systemctl start chronyd\n[root@k8s ~]# systemctl status chronyd\n# \u6d4b\u8bd5\u65f6\u95f4\n[root@k8s ~]# date\nSun Jul  3 11:28:18 CST 2022\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#15-ssh","title":"15 ssh\u4e92\u4fe1","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#16","title":"16 \u9632\u706b\u5899","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#161","title":"16.1 \u4e0d\u5173\u95ed\u9632\u706b\u5899\u66b4\u9732\u6307\u5b9a\u7aef\u53e3\u4f9b\u5916\u7f51\u8bbf\u95ee","text":"<p>\u5728\u5f00\u542f\u9632\u706b\u5899\u65f6\uff0c\u5982\u679c\u60f3\u8981\u5916\u7f51\u8bbf\u95ee\u4e3b\u673a\uff0c\u9700\u8981\u5728\u9632\u706b\u5899\u914d\u7f6e\u4e2d\u5c06\u6b64\u8bbf\u95ee\u7aef\u53e3\u516c\u5f00\uff0c\u5426\u5219\u8bbf\u95ee\u4f1a\u5931\u8d25\u3002\u6bd4\u5982\u4f60\u7684\u673a\u5668\u4f5c\u4e3aweb\u670d\u52a1\u5668\uff0c\u9700\u8981\u914d\u7f6e\u9632\u706b\u5899\u5f00\u653e80\u7aef\u53e3\u516c\u7f51\u624d\u80fd\u8bbf\u95ee\u3002</p>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#17-systemd","title":"17 systemd","text":"<ul> <li>\u5b98\u7f51</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#171-systemctl","title":"17.1 systemctl\u7ba1\u7406\u7a0b\u5e8f","text":"<ul> <li>\u8d44\u6599</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#1711-systemctl-status","title":"17.1.1 systemctl status \u72b6\u6001\u7c7b\u578b","text":"<pre><code>\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u6709\u67d0\u4e9b\u670d\u52a1\u53ea\u9700\u8981\u521d\u59cb\u5316\u4e00\u4e0b\u5c31\u53ef\u4ee5\u4e86\uff1b\u4e0d\u9700\u8981\u5728\u670d\u52a1\u5668\u4e2d\u542f\u52a8\u4e00\u4e2a\u5b88\u62a4\u8fdb\u7a0b\u3002\u8fd9\u79cd\u670d\u52a1\u521d\u59cb\u5316\u5b8c\u6210\u540e\u5c31\u76f4\u63a5\u63a8\u51fa\uff0c\u5176\u670d\u52a1\u7684\u72b6\u6001\u5c31\u662factive\uff08exited\uff09\u3002\n</code></pre> <p>\u4f7f\u7528systemctl \u67e5\u770b\u670d\u52a1\u7684\u72b6\u6001\uff0c\u8fd4\u56de\u7684\u72b6\u6001\u6709\u4ee5\u4e0b\u51e0\u79cd\uff1a 1. <code>loaded</code>\uff1a\u7cfb\u7edf\u670d\u52a1\u5df2\u7ecf\u521d\u59cb\u5316\u5b8c\u6210\uff0c\u52a0\u8f7d\u8fc7\u914d\u7f6e 2. <code>active(running)</code>\uff1a\u6b63\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u7a0b\u5e8f\u6b63\u5728\u7cfb\u7edf\u4e2d\u6267\u884c\uff0c vsftpd\u5c31\u662f\u8fd9\u79cd\u6a21\u5f0f 3. <code>atcive(exited)</code> \uff1a\u4ec5\u6267\u884c\u4e00\u6b21\u5c31\u6b63\u5e38\u7ed3\u675f\u7684\u670d\u52a1\uff0c \u76ee\u524d\u5e76\u6c92\u6709\u4efb\u4f55\u7a0b\u5e8f\u5728\u7cfb\u7d71\u4e2d\u6267\u884c 4. <code>atcive(waiting)</code>\uff1a\u6b63\u5728\u6267\u884c\u5f53\u4e2d\uff0c\u4e0d\u8fc7\u8fd8\u5728\u7b49\u5f85\u5176\u4ed6\u7684\u4e8b\u4ef6\u624d\u80fd\u7ee7\u7eed\u5904\u7406 5. <code>inactive</code> \uff1a\u670d\u52a1\u5173\u95ed 6. <code>enbaled</code> \uff1a\u670d\u52a1\u5f00\u673a\u542f\u52a8 7. <code>disabled</code> \uff1a\u670d\u52a1\u5f00\u673a\u4e0d\u81ea\u542f 8. <code>static</code> \uff1a\u670d\u52a1\u5f00\u673a\u542f\u52a8\u9879\u4e0d\u53ef\u88ab\u7ba1\u7406 9. <code>failed</code> \uff1a\u7cfb\u7edf\u914d\u7f6e\u9519\u8bef</p>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#18-pkg-config","title":"18 pkg-config","text":"<ul> <li>\u529f\u80fd\uff1a\u83b7\u53d6\u5df2\u5b89\u88c5\u5e93\u7684\u5143\u4fe1\u606f\uff08\u6bd4\u5982\u9700\u8981\u94fe\u63a5\u7684lib\u5e93\uff0c\u5305\u542b\u7684\u5934\u6587\u4ef6\u4fe1\u606f\uff09\u3002\u9700\u8981\u914d\u7f6e\u5e93\u4fe1\u606f\u76f8\u5173\u6587\u4ef6(.pc\u6587\u4ef6)\uff0c\u7136\u540epkg-config\u53bb\u89e3\u6790</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#181-pkg-config","title":"18.1 pkg-config\u4f7f\u7528","text":"<p>\u4f7f\u7528\u65b9\u5f0f\uff1a\u9996\u5148\u8981\u5148\u5b9a\u4e49.pc\u6587\u4ef6\uff0c\u7136\u540e\u5c06.pc\u6587\u4ef6\u6240\u5728\u76ee\u5f55\u5199\u5165PKG_CONFIG_PATH\u53d8\u91cf\u4e2d\uff0c\u5e76\u5bfc\u51fa\uff0c\u5982<code>export PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/local/lib/pkgconfig</code>,\u8fd9\u6837<code>pkg-config</code>\u547d\u4ee4\u624d\u80fd\u627e\u5230.pc\u6587\u4ef6 - \u8bed\u6cd5\uff1a<code>pkg-config [option] \u5e93\u540d\u79f0</code> - \u53ef\u9009\u53c2\u6570\uff1a   - <code>[--cflags]</code>:\u663e\u793a\u5982\u5934\u6587\u4ef6\u5305\u542b\u7684\u4fe1\u606f\uff0c\u5982<code>-I${libdir}/glib/include</code>   - <code>[--libs]</code>:\u663e\u793a\u5e93\u94fe\u63a5\u4fe1\u606f\uff0c\u5982<code>-L${libdir} -lgobject-1.3</code>   - ... - \u793a\u4f8b\uff1a<code>pkg-config --cflags --libs fuse</code>:\u83b7\u53d6libfuse\u7684\u94fe\u63a5\u548c\u5934\u6587\u4ef6\u5305\u542b\u4fe1\u606f</p>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#182-pc","title":"18.2 .pc\u6587\u4ef6\u89c4\u5219","text":"<p>.pc\u6587\u4ef6\u4e2d\u6bcf\u884c\u5177\u67092\u4e2d\u542b\u4e49\uff1a1.\u4ee5=\u8d4b\u503c\u7684\u53d8\u91cf\uff0c\u5982\u4e0b\u9762\u793a\u4f8b\u4e2dprefix\u53d8\u91cf\uff1b2.\u4ee5:\u6807\u8bc6\u7684\u9884\u5b9a\u4e49\u7684\u5173\u952e\u5b57\uff0c\u5982\u4e0b\u9762\u793a\u4f8b\u4e2dName\u5173\u952e\u5b57 - \u5173\u952e\u5b57\u5982\u4e0b\uff1a   - <code>Name</code>\uff1a\u5305\u540d\uff1b\uff08\u7279\u70b9\uff1a\u7b80\u6d01\uff0c\u53ef\u8bfb\uff1b\u4e0d\u662fpkg-config\u547d\u4ee4\u4e2d\u7684\u5e93\u540d\uff09   - <code>Description</code>\uff1a\u5305\u540d\u7684\u63cf\u8ff0\u4fe1\u606f\u3002\uff08\u7b80\u6d01\u660e\u4e86\uff09   - <code>URL</code>\uff1a\u53ef\u4ee5\u4e3a\u4f7f\u7528\u8005\u83b7\u5f97\u66f4\u591a\u4fe1\u606f\u6216\u4e0b\u8f7d\u672c\u5305\u7684\u7f51\u5740   - <code>Version</code>\uff1a\u5305\u7684\u7248\u672c\u4fe1\u606f   - <code>Requires</code>\uff1a\u63d0\u4f9b\u4f9d\u8d56\u5305\u7684\u68c0\u6d4b\u529f\u80fd\u3002\u6bcf\u4e00\u4e2a\u4f9d\u8d56\u5305\u4ee5<code>,</code>\u533a\u5206\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528=, &lt;, &gt;, &gt;=, &lt;=\u6765\u6307\u5b9a\u7248\u672c\uff1b\u5982<code>Requires: glib-2.0 = 1.3.1</code>   - <code>Conflicts</code>\uff1a\u63d0\u4f9b\u51b2\u7a81\u5305\u7684\u68c0\u6d4b\u529f\u80fd\u3002\u6bcf\u4e00\u4e2a\u51b2\u7a81\u5305\u4ee5<code>,</code>\u533a\u5206\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528=, &lt;, &gt;, &gt;=, &lt;=\u6765\u6307\u5b9a\u7248\u672c\uff0c\u4e5f\u53ef\u4ee5\u91cd\u590d\u6307\u5b9a\u4e0d\u540c\u7248\u672c\u7684\u5305\uff1b\u5982Conflicts: foobar=4.8 foobar &lt;= 4.5<code>-</code>Libs<code>\uff1a\u4f7f\u7528\u672c\u5305\u9700\u8981\u7684\u94fe\u63a5\u4fe1\u606f\uff0c\u5982</code>Libs: -L${libdir} -lgobject-1.3<code>-</code>Libs.private<code>\uff1a\u79c1\u6709\u5e93\u7684\u94fe\u63a5\u4fe1\u606f\u3002\u9759\u6001\u94fe\u63a5\u9700\u8981\u4f7f\u7528\u3002\u5982</code>Libs.private: -lm<code>\u3002Private libraries are libraries which are not exposed through your library, but are needed in the case of static linking.   -</code>Cflags<code>\uff1a\u4e00\u4e9b\u7f16\u8bd1\u9009\u9879\uff0c\u5305\u62ec\u5934\u6587\u4ef6\u5305\u542b\u8def\u5f84\uff0c\u5982</code>Cflags: -I${includedir}/glib-2.0 -I${libdir}/glib/include` - \u793a\u4f8b</p> <pre><code>##This is a comment\nprefix=/home/hp/unst   # this defines a variable\nexec_prefix=${prefix}  # defining another variable in terms of the first\nlibdir=${exec_prefix}/lib\nincludedir=${prefix}/include\n\nName: GObject                            # human-readable name\nDescription: Object/type system for GLib # human-readable description\nVersion: 1.3.1\nURL: http://www.gtk.org\nRequires: glib-2.0 = 1.3.1\nConflicts: foobar &lt;= 4.5\nLibs: -L${libdir} -lgobject-1.3\nLibs.private: -lm\nCflags: -I${includedir}/glib-2.0 -I${libdir}/glib/include\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#19","title":"19 \u67e5\u770b\u7cfb\u7edf\u76f8\u5173\u4fe1\u606f","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#191","title":"19.1 \u67e5\u770b\u5185\u5b58\u4fe1\u606f","text":"<pre><code>cat /proc/meminfo\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#192-procpid","title":"19.2 \u67e5\u770b\u67d0\u4e00\u8fdb\u7a0b\u7cfb\u7edf\u8d44\u6e90\u5360\u7528\u4fe1\u606f<code>/proc/[PID]</code>","text":"<ul> <li>\u5728<code>/proc/[PID]</code>\u76ee\u5f55\u4e0b\u6709\u4ee5\u4e0b\u6587\u4ef6(PID\u662f\u8fdb\u7a0b\u53f7)</li> </ul> <pre><code>$ ls  /proc/1958076\nattr       clear_refs       cpuset   fd       limits     mem         net        oom_score      projid_map  setgroups  statm    timers\nautogroup  cmdline          cwd      fdinfo   loginuid   mountinfo   ns         oom_score_adj  root        smaps      status   uid_map\nauxv       comm             environ  gid_map  map_files  mounts      numa_maps  pagemap        sched       stack      syscall  wchan\ncgroup     coredump_filter  exe      io       maps       mountstats  oom_adj    personality    sessionid   stat       task\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#1921-io","title":"19.2.1 \u67e5\u770bio\u4fe1\u606f","text":"<pre><code>$ cat /proc/1958076/io\nrchar: 21911\nwchar: 1420\nsyscr: 53\nsyscw: 5\nread_bytes: 0\nwrite_bytes: 4096\ncancelled_write_bytes: 0\n</code></pre> <ul> <li>\u53c2\u6570\u89e3\u91ca\u5982\u4e0b\uff1a</li> <li><code>rchar</code>:\u8bfb\u51fa\u7684\u603b\u5b57\u8282\u6570\uff0cread\u6216\u8005pread()\u4e2d\u7684\u957f\u5ea6\u53c2\u6570\u603b\u548c\uff08pagecache\u4e2d\u7edf\u8ba1\u800c\u6765\uff0c\u4e0d\u4ee3\u8868\u5b9e\u9645\u78c1\u76d8\u7684\u8bfb\u5165\uff09</li> <li><code>wchar</code>:\u5199\u5165\u7684\u603b\u5b57\u8282\u6570\uff0cwrite\u6216\u8005pwrite\u4e2d\u7684\u957f\u5ea6\u53c2\u6570\u603b\u548c</li> <li><code>syscr</code>:read()\u6216\u8005pread()\u603b\u7684\u8c03\u7528\u6b21\u6570 </li> <li><code>syscw</code>:write()\u6216\u8005pwrite()\u603b\u7684\u8c03\u7528\u6b21\u6570 </li> <li><code>read_bytes</code>:\u5b9e\u9645\u4ece\u78c1\u76d8\u4e2d\u8bfb\u53d6\u7684\u5b57\u8282\u603b\u6570 (\u8fd9\u91ccif=/dev/zero \u6240\u4ee5\u6ca1\u6709\u5b9e\u9645\u7684\u8bfb\u5165\u5b57\u8282\u6570)</li> <li><code>write_bytes</code>:\u5b9e\u9645\u5199\u5165\u5230\u78c1\u76d8\u4e2d\u7684\u5b57\u8282\u603b\u6570</li> <li><code>cancelled_write_bytes</code>:\u7531\u4e8e\u622a\u65adpagecache\u5bfc\u81f4\u5e94\u8be5\u53d1\u751f\u800c\u6ca1\u6709\u53d1\u751f\u7684\u5199\u5165\u5b57\u8282\u6570\uff08\u53ef\u80fd\u4e3a\u8d1f\u6570\uff09</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#1922-status","title":"19.2.2 \u67e5\u770b\u8fdb\u7a0b\u7684\u72b6\u6001status","text":"<ul> <li>\u53c2\u6570\u89e3\u91ca\u5982\u4e0b\uff1a</li> <li><code>VmHWM</code>:\u7269\u7406\u5185\u5b58\u5360\u7528\u7684\u5cf0\u503c</li> <li><code>VmRSS</code>:\u5360\u7528\u7684\u7269\u7406\u5185\u5b58</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#193","title":"19.3 \u5224\u65ad\u56fa\u6001\u786c\u76d8\u548c\u673a\u68b0\u786c\u76d8","text":"<ol> <li>\u4f7f\u7528<code>lsblk -d</code>\u67e5\u770b\u5757\u8bbe\u5907\u540d</li> <li>\u4f7f\u7528<code>cat /sys/block/[\u5757\u8bbe\u5907\u540d]/queue/rotational</code></li> <li>\u8f93\u51fa0\u8868\u793a\u8bbe\u5907\u4e0d\u53ef\u65cb\u8f6c\uff08\u5373\u56fa\u6001\u786c\u76d8\uff09</li> <li>\u8f93\u51fa1\u8868\u793a\u8bbe\u5907\u53ef\u4ee5\u65cb\u8f6c\uff08\u5373\u673a\u68b0\u786c\u76d8\uff09</li> <li>\u793a\u4f8b\uff1asdf\u662f\u673a\u68b0\u786c\u76d8\uff0csdg\u662f\u56fa\u6001\u786c\u76d8</li> </ol> <pre><code>$ lsblk -d\nNAME MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT\nsda    8:0    0   1.1T  0 disk \nsdb    8:16   0   1.1T  0 disk \nsdc    8:32   0   1.1T  0 disk \nsdd    8:48   0   1.1T  0 disk \nsde    8:64   0   1.1T  0 disk \nsdf    8:80   0   1.1T  0 disk \nsdg    8:96   0 447.1G  0 disk \nsdh    8:112  0 447.1G  0 disk \nsr0   11:0    1  1024M  0 rom  \n$ cat /sys/block/sdf/queue/rotational\n1\n$ cat /sys/block/sdg/queue/rotational\n0\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#194-linux","title":"19.4 \u67e5\u770blinux\u53d1\u884c\u7248\u672c","text":"<ul> <li><code>lsb_release -a</code></li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#195","title":"19.5 \u67e5\u8be2\u64cd\u4f5c\u7cfb\u7edf\u4fe1\u606f","text":"<ul> <li><code>uname -a</code></li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#20-ip","title":"20 \u67e5\u770bip","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#201-hostname","title":"20.1 hostname","text":"<pre><code>shw@\u5c0f\u950b\u54e5:~$ hostname -I\n172.22.227.232\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#202-ip","title":"20.2 ip","text":"<pre><code>shw@\u5c0f\u950b\u54e5:~$ ip addr show\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/Linux%E8%BF%90%E7%BB%B4/#203-ifconfig","title":"20.3 ifconfig","text":"<pre><code>shw@\u5c0f\u950b\u54e5:~$ ifconfig\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/","title":"grep\u3001sed\u3001awk\u3001cut","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#1-grep","title":"1 grep","text":"<ul> <li>\u529f\u80fd\uff1a\u6253\u5370\u5339\u914d\u884c</li> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a</li> <li><code>grep [OPTIONS] PATTERN [FILE...]</code></li> <li><code>grep [OPTIONS] [-e PATTERN | -f FILE] [FILE...]</code></li> <li>\u53c2\u6570\u9009\u9879</li> <li>\u57fa\u7840\u64cd\u4f5c<ul> <li><code>-i</code>:\u5ffd\u7565\u5927\u5c0f\u5199</li> <li><code>-w</code>:\u5339\u914d\u6574\u4e2a\u5355\u8bcd\uff0c\u5982\u5339\u914dmain\uff0cmain111\u5219\u4e0d\u4f1a\u5339\u914d\u5230</li> <li><code>-x</code>:\u5339\u914d\u6574\u884c</li> <li><code>-m num</code>:\u6700\u5927\u5339\u914d\u884c\u6570\u91cf\uff0c\u6bd4\u5982\u5f53\u4e00\u4e2a\u6587\u4ef6\u539f\u672c\u670910\u4e2a\u5339\u914d\u884c\u65f6\uff0c\u8bbe\u7f6enum=5\uff0c\u5219\u53ea\u4f1a\u6253\u53705\u6761\u5339\u914d\u540e</li> <li><code>-A num</code>:\u540c\u65f6\u6253\u5370\u5339\u914d\u884c\u540enum\u884c</li> <li><code>-B num</code>:\u540c\u65f6\u6253\u5370\u5339\u914d\u884c\u524dnum\u884c</li> <li><code>-v</code>:\u53cd\u5411\u5339\u914d\uff0c\u8f93\u51fa\u975e\u5339\u914d\u884c\u5185\u5bb9\uff08\u6b63\u5e38\u662f\u6253\u5370\u5339\u914d\u884c\uff0c\u6307\u5b9a\u4e86-v\u5219\u6253\u5370\u975e\u5339\u914d\u884c\uff09</li> <li><code>-c</code>:\u7edf\u8ba1\u5339\u914d\u884c\u6570\u91cf,\u4e0e-v\u4e00\u540c\u4f7f\u7528\u5219\u7edf\u8ba1\u975e\u5339\u914d\u884c\u6570\uff0c\u5982<code>grep -cv main test.cc</code></li> <li><code>-n</code>:\u8f93\u51fa\u5339\u914d\u884c\u7684\u884c\u53f7</li> </ul> </li> <li>\u591a\u6587\u4ef6\u7ea7\u64cd\u4f5c<ul> <li><code>-l</code>:\u5f53\u67e5\u627e\u591a\u4e2a\u6587\u4ef6\u65f6\uff0c\u6253\u5370\u5339\u914d\u7684\u6587\u4ef6\u540d</li> <li><code>-L</code>:\u5f53\u67e5\u627e\u591a\u4e2a\u6587\u4ef6\u65f6\uff0c\u6253\u5370\u975e\u5339\u914d\u7684\u6587\u4ef6\u540d</li> </ul> </li> <li>\u76ee\u5f55\u7ea7\u64cd\u4f5c<ul> <li><code>-r</code>\u6216<code>-R</code>:\u6307\u5b9a\u76ee\u5f55\u641c\u7d22\u800c\u975e\u6587\u4ef6\uff0c\u5982<code>grep --include=*.cc --exclude=test1.cc main -r test</code>,\u5728test\u76ee\u5f55\u4e0b\uff0c\u5305\u542b*.cc\u6587\u4ef6\uff0c\u6392\u9664test1.cc\uff0c\u5339\u914dmain</li> <li><code>--include=GLOB</code>:\u5305\u542b\u7684\u6587\u4ef6\uff0c\u53ef\u4ee5\u4f7f\u7528\u6a21\u5f0f\u5339\u914d</li> <li><code>--exclude=GLOB</code>:\u6392\u9664\u7684\u6587\u4ef6\uff0c\u53ef\u4ee5\u4f7f\u7528\u6a21\u5f0f\u5339\u914d</li> <li><code>--exclude-dir=DIR</code>:\u6392\u9664\u7684\u5b50\u76ee\u5f55\uff0c\u901a\u5e38\u5728\u6307\u5b9a\u76ee\u5f55\u4e0b\u6709\u5b50\u76ee\u5f55\uff0c\u4e14\u4e0d\u60f3\u8981\u5339\u914d\u65f6</li> </ul> </li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#2-pgrep","title":"2 pgrep","text":"<ul> <li>\u529f\u80fd\uff1a\u57fa\u4e8e\u7ed9\u5b9a\u6761\u4ef6\u6765\u67e5\u627e\u6b63\u5728\u8fd0\u884c\u7684\u7a0b\u5e8f\u7684\u8fdb\u7a0bID\u3002\uff08\u7c7b\u4f3cps\u548cgrep\u7684\u7ec4\u5408\u4f53\uff09</li> <li>\u8bed\u6cd5\uff1a<code>pgrep [option] PATTERN</code></li> <li><code>-u \u7528\u6237\u540d</code>:\u6307\u5b9a\u6240\u5c5e\u7528\u6237</li> <li><code>-G \u7528\u6237\u7ec4</code>:\u6307\u5b9a\u6240\u5c5e\u7ec4</li> <li><code>-l</code>:\u5217\u51fa\u8fdb\u7a0b\u540d</li> <li><code>-d</code>:\u6307\u5b9a\u8f93\u51fa\u7ed3\u679c\u5206\u5272\u7b26\uff0c\u9ed8\u8ba4\u4e00\u884c\u4e00\u4e2a\u7ed3\u679c</li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ ps -ef|grep here4|grep sshd\nroot     2868240    5518  0 15:01 ?        00:00:00 sshd: here4 [priv]\nhere4    2868262 2868240  0 15:01 ?        00:00:00 sshd: here4@pts/9\nroot     3315145    5518  0 17:36 ?        00:00:00 sshd: here4 [priv]\nhere4    3315159 3315145  0 17:36 ?        00:00:00 sshd: here4@pts/10\nhere4    3466706 3315177  0 18:25 pts/10   00:00:00 grep --color=auto sshd\n$ pgrep -u here4 sshd\n2868262\n3315159\n$ pgrep -l -u here4 sshd\n2868262 sshd\n3315159 sshd\n$ pgrep -l -d ',' -u here4 sshd\n2868262 sshd,3315159 sshd\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#3-awk","title":"3 awk","text":"<ul> <li>\u5b98\u65b9\u6587\u6863</li> <li>\u7b80\u5355\u6559\u7a0b</li> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a\u7ba1\u9053\u53ef\u4ee5\u53d6\u4ee3files</li> <li><code>awk [option] script files</code></li> <li><code>awk [option] -f scriptfile files</code></li> <li>\u529f\u80fd\uff1a\u5904\u7406\u6587\u672c</li> <li><code>-F \u5206\u9694\u7b26</code>:\u6307\u5b9a\u5206\u5272\u7b26\uff08\u9ed8\u8ba4\u6bcf\u884c\u6309\u7a7a\u683c\u5206\u5272\uff09\uff0c\u5206\u9694\u7b26\u53ef\u4ee5\u7528\u5355\u5f15\u53f7\u5305\u88f9\uff0c-F\u4e0e\u5206\u9694\u7b26\u95f4\u53ef\u4ee5\u95f4\u9694\u5f00\uff0c\u4e5f\u53ef\u4ee5\u8fde\u5728\u4e00\u8d77\uff0c\u5982\uff0c<code>-F ':'</code>\u6216<code>-F:</code></li> <li><code>-f scriptfile</code>:\u6307\u5b9a\u811a\u672c\u6587\u4ef6\u53d6\u4ee3script</li> <li><code>-v \u53d8\u91cf\u540d=\u53d8\u91cf\u503c</code>:\u8d4b\u503c\u4e00\u4e2a\u7528\u6237\u5b9a\u4e49\u53d8\u91cf</li> <li>\u793a\u4f8b</li> </ul> <pre><code># \u5bf9test.txt\u6587\u672c\u6bcf\u884c\u6309\u7a7a\u683c\u6216TAB\u5206\u5272\uff0c\u6253\u5370\u7b2c1\u9879\u548c\u7b2c3\u9879\u7684\u503c\nawk '{print $1,$3}' test.txt\n# \u5bf9test.txt\u6587\u672c\u6bcf\u884c\u6309;\u5206\u5272\uff0c\u6253\u5370\u7b2c1\u9879\u548c\u7b2c3\u9879\u7684\u503c\nawk -F; '{print $1,$3}' test.txt\n# -F; \u6216\u8005-F ';'\nawk -F ';' '{print $1,$3}' test.txt\n#\u7528awk\u811a\u672c\u5206\u6790test.txt,test.awk\u811a\u672c\u4f5c\u7528\u4e0e\u4e0a\u9762\u4e2d\u7684script\u4e00\u81f4\nawk -f test.awk test.txt\n</code></pre> <ul> <li>\u6982\u5ff5</li> <li>\u6587\u4ef6\u7684\u4e00\u884c\u79f0\u4e3a awk \u7684\u4e00\u4e2a\u8bb0\u5f55</li> <li>\u4f7f\u7528\u7279\u5b9a\u5206\u9694\u7b26\u5206\u5f00\u7684\u5355\u8bcd\u79f0\u4e3a\u5b57\u6bb5</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#31-awk","title":"3.1 awk \u8fd0\u7b97\u7b26","text":"\u8fd0\u7b97\u7b26 \u63cf\u8ff0 <code>= += -= *= /= %= ^= **=</code> \u8d4b\u503c ?: C\u6761\u4ef6\u8868\u8fbe\u5f0f <code>|</code> &amp;&amp; \u903b\u8f91\u4e0e ~ \u548c !~ \u5339\u914d\u6b63\u5219\u8868\u8fbe\u5f0f\u548c\u4e0d\u5339\u914d\u6b63\u5219\u8868\u8fbe\u5f0f <code>&lt; &lt;= &gt; &gt;= != ==</code> \u5173\u7cfb\u8fd0\u7b97\u7b26 \u7a7a\u683c \u8fde\u63a5 + - \u52a0\uff0c\u51cf * / % \u4e58\uff0c\u9664\u4e0e\u6c42\u4f59 + - ! \u4e00\u5143\u52a0\uff0c\u51cf\u548c\u903b\u8f91\u975e <code>^</code> \u6c42\u5e42 ++ -- \u589e\u52a0\u6216\u51cf\u5c11\uff0c\u4f5c\u4e3a\u524d\u7f00\u6216\u540e\u7f00 <code>$</code> \u5b57\u6bb5\u5f15\u7528 in \u6570\u7ec4\u6210\u5458"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#32-awk","title":"3.2 awk\u5185\u5efa\u53d8\u91cf","text":"\u53d8\u91cf \u63cf\u8ff0 $n \u5f53\u524d\u8bb0\u5f55\u7684\u7b2cn\u4e2a\u5b57\u6bb5\uff0c\u5b57\u6bb5\u95f4\u7531FS\u5206\u9694 $0 \u5b8c\u6574\u7684\u8f93\u5165\u8bb0\u5f55 ARGC \u547d\u4ee4\u884c\u53c2\u6570\u7684\u6570\u76ee ARGIND \u547d\u4ee4\u884c\u4e2d\u5f53\u524d\u6587\u4ef6\u7684\u4f4d\u7f6e(\u4ece0\u5f00\u59cb\u7b97) ARGV \u5305\u542b\u547d\u4ee4\u884c\u53c2\u6570\u7684\u6570\u7ec4 CONVFMT \u6570\u5b57\u8f6c\u6362\u683c\u5f0f(\u9ed8\u8ba4\u503c\u4e3a%.6g)ENVIRON\u73af\u5883\u53d8\u91cf\u5173\u8054\u6570\u7ec4 ERRNO \u6700\u540e\u4e00\u4e2a\u7cfb\u7edf\u9519\u8bef\u7684\u63cf\u8ff0 FIELDWIDTHS \u5b57\u6bb5\u5bbd\u5ea6\u5217\u8868(\u7528\u7a7a\u683c\u952e\u5206\u9694) FILENAME \u5f53\u524d\u6587\u4ef6\u540d FNR \u5404\u6587\u4ef6\u5206\u522b\u8ba1\u6570\u7684\u884c\u53f7 FS \u5b57\u6bb5\u5206\u9694\u7b26(\u9ed8\u8ba4\u662f\u4efb\u4f55\u7a7a\u683c) IGNORECASE \u5982\u679c\u4e3a\u771f\uff0c\u5219\u8fdb\u884c\u5ffd\u7565\u5927\u5c0f\u5199\u7684\u5339\u914d NF \u4e00\u6761\u8bb0\u5f55\u7684\u5b57\u6bb5\u7684\u6570\u76ee NR \u5df2\u7ecf\u8bfb\u51fa\u7684\u8bb0\u5f55\u6570\uff0c\u5c31\u662f\u884c\u53f7\uff0c\u4ece1\u5f00\u59cb OFMT \u6570\u5b57\u7684\u8f93\u51fa\u683c\u5f0f(\u9ed8\u8ba4\u503c\u662f%.6g) OFS \u8f93\u51fa\u5b57\u6bb5\u5206\u9694\u7b26\uff0c\u9ed8\u8ba4\u503c\u4e0e\u8f93\u5165\u5b57\u6bb5\u5206\u9694\u7b26\u4e00\u81f4\u3002 ORS \u8f93\u51fa\u8bb0\u5f55\u5206\u9694\u7b26(\u9ed8\u8ba4\u503c\u662f\u4e00\u4e2a\u6362\u884c\u7b26) RLENGTH \u7531match\u51fd\u6570\u6240\u5339\u914d\u7684\u5b57\u7b26\u4e32\u7684\u957f\u5ea6 RS \u8bb0\u5f55\u5206\u9694\u7b26(\u9ed8\u8ba4\u662f\u4e00\u4e2a\u6362\u884c\u7b26) RSTART \u7531match\u51fd\u6570\u6240\u5339\u914d\u7684\u5b57\u7b26\u4e32\u7684\u7b2c\u4e00\u4e2a\u4f4d\u7f6e SUBSEP \u6570\u7ec4\u4e0b\u6807\u5206\u9694\u7b26(\u9ed8\u8ba4\u503c\u662f/034)"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#33-awk","title":"3.3 awk \u952e\u503c\u6570\u7ec4","text":"<p>awk\u652f\u6301\u6570\u7ec4\uff0c\u4f46key\u662f\u5b57\u7b26\u4e32</p>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#34-awk-printprintf","title":"3.4 awk \u4e2dprint\u548cprintf\u7684\u533a\u522b","text":"<ul> <li>print\u5728\u663e\u793a\u591a\u4e2a\u7ed3\u679c\u7684\u65f6\u5019\u4ee5\u9017\u53f7\u5206\u9694\uff0c\u7ed3\u679c\u5c06\u8fd9\u51e0\u90e8\u5206\u7684\u5185\u5bb9\u81ea\u52a8\u4f7f\u7528\u5206\u9694\u7b26\u8fdb\u884c\u5206\u9694\uff0c\u4e14\u4e0d\u9700\u8981\u6dfb\u52a0\u6362\u884c\u7b26\\n</li> <li>printf\u53ef\u4ee5\u66f4\u52a0\u7075\u6d3b\u7684\u63a7\u5236\u67d0\u4e00\u4e2a\u5b57\u6bb5\u7684\u8f93\u51fa\u683c\u5f0f\uff0c\u901a\u8fc7\u4f7f\u7528\u8bf8\u5982%-12s,%3.1f\u7b49\u683c\u5f0f\u5316\u65b9\u6cd5</li> </ul> <pre><code>$ echo -e \"hello world bob\\ngood bye tim\"|awk '{print $1,$3}'\nhello bob\ngood tim\n$ echo -e \"hello world bob\\ngood bye tim\"|awk '{printf\"%s %s\\n\",$1,$3}'\nhello bob\ngood tim\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#35-awk","title":"3.5 awk\u811a\u672c\u8bed\u6cd5","text":"<p>\u6ce8\u610f\uff1a\u5f53\u591a\u6761\u8bed\u53e5\u5199\u5728\u540c\u4e00\u884c\u4e0a\u65f6\uff0c\u53ef\u4ee5\u7528\u5206\u53f7\u6765\u65ad\u5f00\u8bed\u53e5\u3002 awk\u811a\u672c\u52063\u90e8\u5206\uff1a - BEGIN{ \u8fd9\u91cc\u9762\u653e\u7684\u662f\u6267\u884c\u524d\u7684\u8bed\u53e5 } - END{\u8fd9\u91cc\u9762\u653e\u7684\u662f\u5904\u7406\u5b8c\u6240\u6709\u7684\u884c\u540e\u8981\u6267\u884c\u7684\u8bed\u53e5 } - {\u8fd9\u91cc\u9762\u653e\u7684\u662f\u5904\u7406\u6bcf\u4e00\u884c\u65f6\u8981\u6267\u884c\u7684\u8bed\u53e5}</p>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#36-nr","title":"3.6 NR\u7684\u4f7f\u7528","text":"<pre><code>$ cat awk.file \nTom \u7537  19\nJim \u7537 20\nalice \u5973 19\nalma \u5973 18\n$ awk 'NR==1,NR==3{print $0}' awk.file \nTom \u7537  19\nJim \u7537 20\nalice \u5973 19\n$ awk 'NR==2{print $0}' awk.file \nJim \u7537 20\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#37-awk-if","title":"3.7 awk if\u6761\u4ef6\u8bed\u53e5","text":"<p>\u6ce8\u610f\uff1aif\u8bed\u6cd5\u4e0ec\u8bed\u8a00\u4e2dif\u5b8c\u5168\u76f8\u540c - \u8bed\u6cd5\uff1a\u5f53\u6709\u591a\u6761\u8bed\u53e5\u65f6\uff0c\u53ef\u4ee5\u7528\u82b1\u62ec\u53f7\u5305\u88f9</p> <pre><code>if (condition_1)\naction_1\nelse if (condition_2)\naction_2\nelse\naction_3\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>$ awk 'BEGIN {num = 11; if (num % 2 == 0) printf \"%d \u662f\u5076\u6570\\n\", num;else printf \"%d \u662f\u5947\u6570\\n\", num}'\n10 \u662f\u5076\u6570\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#38-awk-forwhile","title":"3.8 awk for\u548cwhile\u5faa\u73af","text":"<p>\u6ce8\u610f\uff1afor\u548cwhile\u8bed\u6cd5\u4e0ec\u8bed\u8a00\u4e2dfor\u548cwhile\u5b8c\u5168\u76f8\u540c - \u8bed\u6cd5 - \u793a\u4f8b</p> <pre><code>$ awk 'BEGIN { for (i = 1; i &lt;= 5; ++i) print i }'\n1\n2\n3\n4\n5\n$ awk 'BEGIN { i=0;while (++i&lt;5) print i }'\n1\n2\n3\n4\n$ awk 'BEGIN { i=0;do{print i} while(++i&lt;5)}'\n0\n1\n2\n3\n4\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#39-awk-breakcontinue","title":"3.9 awk break\u548ccontinue","text":"<p>\u6ce8\u610f\uff1abreak\u548ccontinue\u8bed\u6cd5\u4e0ec\u8bed\u8a00\u4e2dbreak\u548ccontinue\u5b8c\u5168\u76f8\u540c - \u793a\u4f8b</p> <pre><code>$ awk 'BEGIN { i=0;do{if(i==3) break;else print i} while(++i&lt;5)}'\n0\n1\n2\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#4-sed","title":"4 sed","text":"<ul> <li>\u5b98\u65b9\u6587\u6863</li> <li>\u53c2\u8003\u6587\u6863</li> <li>\u529f\u80fd\uff1a\u6d41\u6587\u672c\u5904\u7406\u3002sed\u6bcf\u6b21\u5904\u7406\u4e00\u884c\u6587\u672c\uff0c\u653e\u5165\u4e34\u65f6\u7f13\u51b2\u533a\u4e2d\uff0c\u5904\u7406\u5b8c\u540e\uff0c\u8f93\u51fa\u5230\u6807\u51c6\u8f93\u51fa\u6d41\u4e0a\uff08\u91cd\u5b9a\u5411\u6539\u53d8\u8f93\u51fa\u76ee\u6807\uff09\u3002</li> <li>\u8bed\u6cd5\uff1a<code>sed [\u9009\u9879]... {\u811a\u672c(\u5982\u679c\u6ca1\u6709\u5176\u4ed6\u811a\u672c)} [\u8f93\u5165\u6587\u4ef6]</code></li> <li>\u9009\u9879\u53c2\u6570\uff1a<ul> <li><code>-e script</code>:\u7528\u4e8e\u4e32\u8054\u591a\u4e2a\u5339\u914d\u6a21\u5f0f\uff0c\u5c06\u811a\u672c\u6307\u4ee4\u6dfb\u52a0\u5230\u5df2\u6709\u6307\u4ee4\u4e2d</li> <li><code>-f scriptFile</code>:\u6307\u5b9a\u5339\u914d\u6a21\u5f0f\u7684\u811a\u672c\u6587\u4ef6</li> <li><code>-n</code>:\u4e0d\u4ea7\u751f\u547d\u4ee4\u8f93\u51fa\uff0c\u4f7f\u7528print\u547d\u4ee4\u6765\u5b8c\u6210\u8f93\u51fa,\u901a\u5e38\u4e0ep\u4e00\u8d77\u4f7f\u7528</li> <li><code>-i[suffix]</code>:\u76f4\u63a5\u4fee\u6539\u6587\u4ef6,-i\u540e\u9762\u53ef\u4ee5\u5e26\u4e0a\u540e\u7f00\uff0c\u8868\u793a\uff0c\u4fee\u6539\u539f\u6587\u4ef6\u5148\u5907\u4efd\uff0c\u5907\u4efd\u6587\u4ef6\u540d\u5728\u539f\u6587\u4ef6\u540d+\u540e\u7f00</li> <li><code>-r</code>:\u652f\u6301\u6269\u5c55\u6b63\u5219\u8868\u8fbe\u5f0f</li> </ul> </li> <li>\u811a\u672c\u7b26\u53f7<ul> <li><code>s/pattern/replacement/flags</code>:\u66ff\u6362\u5b57\u7b26\uff0cflags\u53ef\u9009\u53c2\u6570</li> <li><code>g</code>\uff1a\u5168\u5c40\u5339\u914d\uff0c\u9ed8\u8ba4\u53ea\u5339\u914d\u7b2c\u4e00\u6b21\u51fa\u73b0</li> <li><code>number</code>\uff1a\u5339\u914d\u7b2cnumber\u6b21\u5339\u914d\u7684</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code># \u5f85\u5904\u7406\u6570\u636e\u53ef\u4ee5\u6765\u81ea\u7ba1\u9053\uff0c\u4e5f\u53ef\u4ee5\u5728\u547d\u4ee4\u884c\u672b\u5c3e\u6307\u5b9a\u6587\u4ef6\u8def\u5f84\n# s \u7528hi\u53d6\u4ee3hello\n$ echo \"hello world\"|sed \"s/hello/hi/\"\nhi world\n# \u591a\u4e2a\u6307\u4ee4\u7528;\u5206\u5272\n$ echo \"hello world\"|sed -e \"s/hello/hi/;s/world/boy/\"\nhi boy\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#41-i","title":"4.1 -i\u4fee\u6539\u6587\u672c","text":"<pre><code>-i\u540e\u53ef\u4ee5\u52a0\u4e0a\u5907\u4efd\u6587\u4ef6\u540d\u7684\u540e\u7f00\uff0c\u8fd9\u6837\u4f1a\u5728\u539f\u6587\u4ef6\u76ee\u5f55\u4e0b\u751f\u6210\u5907\u4efd\u6587\u4ef6\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>$ cat file\nhello world!\nI'm happy!\n$ sed -i.bak \"s/hello/hi/\" file\n$ ls\nfile  file.bak\n$ cat file\nhi world!\nI'm happy!\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#42-e","title":"4.2 -e\u6dfb\u52a0\u591a\u4e2a\u5339\u914d\u6a21\u5f0f","text":"<pre><code>$ sed -e \"s/hello/hi/\" -e \"s/happy/fine/\" file\nhi world!\nI'm fine!\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#43-f","title":"4.3 -f\u6307\u5b9a\u811a\u672c\u6587\u4ef6","text":"<pre><code># -f\u6307\u5b9a\u811a\u672c\u6587\u4ef6\n$ cat sed.script \ns/hello/hi/\ns/world/boy/\n$ echo \"hello world\"|sed -f sed.script \nhi boy\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#44-np","title":"4.4 -n\u4e0ep\u914d\u5408\u4f7f\u7528\u6253\u5370\u5339\u914d\u884c","text":"<pre><code># -n\u4e0ep\u914d\u5408\u4f7f\u7528\uff0c\u53ea\u6253\u5370p\u6307\u5b9a\u7684\u5185\u5bb9\n$ cat sed.test\nhello world\nI'm a coder\n$ sed -n 's/world/man/p' sed.test\nhello man\n$ sed  's/world/man/' sed.test\nhello man\nI'm a coder\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#45","title":"4.5 \u9009\u9879\u7edf\u8ba1","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#451","title":"4.5.1 \u547d\u4ee4\u96c6","text":"\u7b26\u53f7 \u529f\u80fd a\\ \u5728\u5f53\u524d\u884c\u4e0b\u9762\u63d2\u5165\u6587\u672c\u3002 i\\ \u524d\u884c\u4e0a\u9762\u63d2\u5165\u6587\u672c\u3002 c\\ \u628a\u9009\u5b9a\u7684\u884c\u6539\u4e3a\u65b0\u7684\u6587\u672c\u3002 d \u5220\u9664\uff0c\u5220\u9664\u9009\u62e9\u7684\u884c\u3002 D \u5220\u9664\u6a21\u677f\u5757\u7684\u7b2c\u4e00\u884c\u3002 s \u66ff\u6362\u6307\u5b9a\u5b57\u7b26 h \u62f7\u8d1d\u6a21\u677f\u5757\u7684\u5185\u5bb9\u5230\u5185\u5b58\u4e2d\u7684\u7f13\u51b2\u533a\u3002 H \u8ffd\u52a0\u6a21\u677f\u5757\u7684\u5185\u5bb9\u5230\u5185\u5b58\u4e2d\u7684\u7f13\u51b2\u533a\u3002 g \u83b7\u5f97\u5185\u5b58\u7f13\u51b2\u533a\u7684\u5185\u5bb9\uff0c\u5e76\u66ff\u4ee3\u5f53\u524d\u6a21\u677f\u5757\u4e2d\u7684\u6587\u672c\u3002 G \u83b7\u5f97\u5185\u5b58\u7f13\u51b2\u533a\u7684\u5185\u5bb9\uff0c\u5e76\u8ffd\u52a0\u5230\u5f53\u524d\u6a21\u677f\u5757\u6587\u672c\u7684\u540e\u9762\u3002 l \u5217\u8868\u4e0d\u80fd\u6253\u5370\u5b57\u7b26\u7684\u6e05\u5355\u3002 n \u8bfb\u53d6\u4e0b\u4e00\u4e2a\u8f93\u5165\u884c\uff0c\u7528\u4e0b\u4e00\u4e2a\u547d\u4ee4\u5904\u7406\u65b0\u7684\u884c\u800c\u4e0d\u662f\u7528\u7b2c\u4e00\u4e2a\u547d\u4ee4\u3002 N \u8ffd\u52a0\u4e0b\u4e00\u4e2a\u8f93\u5165\u884c\u5230\u6a21\u677f\u5757\u540e\u9762\u5e76\u5728\u4e8c\u8005\u95f4\u5d4c\u5165\u4e00\u4e2a\u65b0\u884c\uff0c\u6539\u53d8\u5f53\u524d\u884c\u53f7\u7801\u3002 p \u6253\u5370\u6a21\u677f\u5757\u7684\u884c\u3002 P (\u5927\u5199) \u6253\u5370\u6a21\u677f\u5757\u7684\u7b2c\u4e00\u884c\u3002 q \u9000\u51faSed\u3002 b lable \u5206\u652f\u5230\u811a\u672c\u4e2d\u5e26\u6709\u6807\u8bb0\u7684\u5730\u65b9\uff0c\u5982\u679c\u5206\u652f\u4e0d\u5b58\u5728\u5219\u5206\u652f\u5230\u811a\u672c\u7684\u672b\u5c3e\u3002 r file \u4ecefile\u4e2d\u8bfb\u884c\u3002 t label if\u5206\u652f\uff0c\u4ece\u6700\u540e\u4e00\u884c\u5f00\u59cb\uff0c\u6761\u4ef6\u4e00\u65e6\u6ee1\u8db3\u6216\u8005T\uff0ct\u547d\u4ee4\uff0c\u5c06\u5bfc\u81f4\u5206\u652f\u5230\u5e26\u6709\u6807\u53f7\u7684\u547d\u4ee4\u5904\uff0c\u6216\u8005\u5230\u811a\u672c\u7684\u672b\u5c3e\u3002 T label \u9519\u8bef\u5206\u652f\uff0c\u4ece\u6700\u540e\u4e00\u884c\u5f00\u59cb\uff0c\u4e00\u65e6\u53d1\u751f\u9519\u8bef\u6216\u8005T\uff0ct\u547d\u4ee4\uff0c\u5c06\u5bfc\u81f4\u5206\u652f\u5230\u5e26\u6709\u6807\u53f7\u7684\u547d\u4ee4\u5904\uff0c\u6216\u8005\u5230\u811a\u672c\u7684\u672b\u5c3e\u3002 w file \u5199\u5e76\u8ffd\u52a0\u6a21\u677f\u5757\u5230file\u672b\u5c3e W file \u5199\u5e76\u8ffd\u52a0\u6a21\u677f\u5757\u7684\u7b2c\u4e00\u884c\u5230file\u672b\u5c3e ! \u8868\u793a\u540e\u9762\u7684\u547d\u4ee4\u5bf9\u6240\u6709\u6ca1\u6709\u88ab\u9009\u5b9a\u7684\u884c\u53d1\u751f\u4f5c\u7528 = \u6253\u5370\u5f53\u524d\u884c\u53f7\u7801\u3002 # \u628a\u6ce8\u91ca\u6269\u5c55\u5230\u4e0b\u4e00\u4e2a\u6362\u884c\u7b26\u4ee5\u524d\u3002"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#452","title":"4.5.2 \u66ff\u6362\u96c6","text":"\u7b26\u53f7 \u529f\u80fd g \u8868\u793a\u884c\u5185\u5168\u9762\u66ff\u6362\u3002\uff08\u9ed8\u8ba4\u6bcf\u884c\u53ea\u5339\u914d\u7b2c\u4e00\u4e2a\uff09 ng \u8868\u793a\u6bcf\u884c\u53ea\u5339\u914d\u524d\u9762n\u4e2a\u3002\uff08\u6bd4\u59822g\uff0c\u6bcf\u884c\u53ea\u5339\u914d\u524d\u97622\u4e2a\uff09 i \u5ffd\u7565\u5927\u5c0f\u5199 p \u8868\u793a\u6253\u5370\u884c\u3002 w \u8868\u793a\u628a\u884c\u5199\u5165\u4e00\u4e2a\u6587\u4ef6\u3002 x \u8868\u793a\u4e92\u6362\u6a21\u677f\u5757\u4e2d\u7684\u6587\u672c\u548c\u7f13\u51b2\u533a\u4e2d\u7684\u6587\u672c\u3002 y \u8868\u793a\u628a\u4e00\u4e2a\u5b57\u7b26\u7ffb\u8bd1\u4e3a\u53e6\u5916\u7684\u5b57\u7b26\uff08\u4f46\u662f\u4e0d\u7528\u4e8e\u6b63\u5219\u8868\u8fbe\u5f0f\uff09 \\1 \u5b50\u4e32\u5339\u914d\u6807\u8bb0 &amp; \u5df2\u5339\u914d\u5b57\u7b26\u4e32\u6807\u8bb0"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#453","title":"4.5.3 \u5339\u914d\u6a21\u5f0f\u96c6","text":"<pre><code>sed \u80fd\u4f7f\u7528gnu\u6b63\u5219\u8868\u8fbe\u5f0f,\u5c24\u5176\u53ef\u4ee5\u914d\u5408\u6355\u83b7\u7ec4\u53ef\u4ee5\u5b9e\u73b0\u66f4\u5f3a\u5927\u7684\u529f\u80fd\n</code></pre> \u7b26\u53f7 \u529f\u80fd \u793a\u4f8b ^ \u5339\u914d\u884c\u5f00\u59cb /^hello/\u5339\u914d\u6240\u6709\u4ee5hello\u5f00\u5934\u7684\u884c\u3002 $ \u5339\u914d\u884c\u7ed3\u675f /world$/\u5339\u914d\u6240\u6709\u4ee5worlld\u7ed3\u5c3e\u7684\u884c\u3002 . \u5339\u914d\u4e00\u4e2a\u975e\u6362\u884c\u7b26\u7684\u4efb\u610f\u5b57\u7b26 /h..ld/\u5339\u914dh\u540e\u63a52\u4e2a\u4efb\u610f\u5b57\u7b26\uff0c\u6700\u540e\u662fld\u7684\u5b57\u7b26\u4e32\u3002 * \u5339\u914d0\u4e2a\u6216\u591a\u4e2a\u5b57\u7b26 <code>/*world/</code>\u5339\u914d\u6240\u6709\u6a21\u677f\u662f\u4e00\u4e2a\u6216\u591a\u4e2a\u7a7a\u683c\u540e\u7d27\u8ddfworld\u7684\u884c\u3002 [] \u5339\u914d\u4e00\u4e2a\u6307\u5b9a\u8303\u56f4\u5185\u7684\u5b57\u7b26 /[hH]ello/\u5339\u914dhello\u6216Hello\u3002 [^] \u5339\u914d\u4e00\u4e2a\u4e0d\u5728\u6307\u5b9a\u8303\u56f4\u5185\u7684\u5b57\u7b26 <code>/[^A-RT-Z]ed/</code>\u5339\u914d\u4e0d\u5305\u542bA-R\u548cT-Z\u7684\u4e00\u4e2a\u5b57\u6bcd\u5f00\u5934\uff0c\u7d27\u8ddfed\u7684\u884c\u3002 <code>\\(..\\)</code> \u5339\u914d\u5b50\u4e32\uff0c\u4fdd\u5b58\u5339\u914d\u7684\u5b57\u7b26\uff08\u9700\u8981\u8f6c\u4e49\uff09 <code>s/\\(love\\)able/\\1rs/</code>\uff0cloveable\u88ab\u66ff\u6362\u6210lovers\u3002 &amp; \u4fdd\u5b58\u641c\u7d22\u5b57\u7b26\u7528\u6765\u66ff\u6362\u5176\u4ed6\u5b57\u7b26 s/love/I &amp; you/\uff0clove\u8fd9\u6210<code>I love you</code>\u3002 \\&lt; \u5339\u914d\u5355\u8bcd\u7684\u5f00\u59cb /\\&lt;love/\u5339\u914d\u5305\u542b\u4ee5love\u5f00\u5934\u7684\u5355\u8bcd\u7684\u884c\u3002 &gt; \u5339\u914d\u5355\u8bcd\u7684\u7ed3\u675f /love&gt;/\u5339\u914d\u5305\u542b\u4ee5love\u7ed3\u5c3e\u7684\u5355\u8bcd\u7684\u884c\u3002 x{m} \u91cd\u590d\u5b57\u7b26x\uff0cm\u6b21 /0{5}/\u5339\u914d\u5305\u542b5\u4e2a0\u7684\u884c\u3002 x{m,} \u91cd\u590d\u5b57\u7b26x\uff0c\u81f3\u5c11m\u6b21 /0{5,}/\u5339\u914d\u81f3\u5c11\u67095\u4e2a0\u7684\u884c\u3002 x{m,n} \u91cd\u590d\u5b57\u7b26x\uff0c\u81f3\u5c11m\u6b21\uff0c\u4e0d\u591a\u4e8en\u6b21 /0{5,10}/\u5339\u914d5~10\u4e2a0\u7684\u884c"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#46-pattern","title":"4.6 pattern\u5339\u914d\u6a21\u5f0f\u89c4\u5219","text":"<ul> <li><code>/pattern/</code>:\u5339\u914dpattern\u5bb9\u884c</li> <li><code>/pattern1/,/pattern2/</code>:\u5339\u914dpattern1\u548cpattern2\u884c\u4e4b\u95f4\u5185\u5bb9\uff08\u5305\u62ec\u5339\u914d\u884c\uff09</li> <li><code>startline,/pattern/</code>:\u5339\u914dstartline\u884c\u5230pattern\u884c\u4e4b\u95f4\u5185\u5bb9\u3002\uff08\u5982\u679cpattern\u6ca1\u6709\u5339\u914d\uff0c\u5c31\u4f1a\u76f4\u63a5\u5339\u914d\u5230\u6700\u540e\u4e00\u884c\uff1b\u5982\u679cstartline\u8d85\u51fa\u4e86\u6700\u5927\u884c\uff0c\u5c31\u5339\u914d\u5931\u8d25\uff09</li> <li><code>/pattern/,endline</code>:\u5339\u914dpattern\u884c\u5230endline\u884c\u4e4b\u95f4\u5185\u5bb9\u3002\uff08\u5982\u679cpattern\u884c\u6ca1\u6709\u5339\u914d\u5230\uff0c\u5339\u914d\u5c31\u5931\u8d25\uff1b\u5982\u679cendline\u6bd4pattern\u5339\u914d\u6240\u5728\u884c\u5c0f\uff0c\u53ea\u4f1a\u6253\u5370pattern\u5339\u914d\u7684\u884c\uff09</li> <li><code>linenum</code>:\u5339\u914d\u7b2clinenum\u884c</li> <li><code>startline,endline</code>:\u5339\u914dstartline\u5230endline\u4e4b\u95f4\u7684\u884c</li> <li><code>startline,+N</code>:\u5339\u914dstartline\u53ca\u5176\u540eN\u884c</li> <li><code>s/pattern/replacement/</code>:\u66ff\u6362\u5b57\u7b26</li> <li>\u793a\u4f8b</li> </ul> <pre><code>shw@shu:~$ cat -n /etc/passwd\n     1  root:x:0:0:root:/root:/bin/bash\n     2  daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin\n     3  bin:x:2:2:bin:/bin:/usr/sbin/nologin\n     4  sys:x:3:3:sys:/dev:/usr/sbin/nologin\n     5  sync:x:4:65534:sync:/bin:/bin/sync\n     6  games:x:5:60:games:/usr/games:/usr/sbin/nologin\n     7  man:x:6:12:man:/var/cache/man:/usr/sbin/nologin\n     8  lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin\n     9  mail:x:8:8:mail:/var/mail:/usr/sbin/nologin\n    10  news:x:9:9:news:/var/spool/news:/usr/sbin/nologin\n    11  uucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin\nshw@shu:~$ sed -n \"6,10p\" /etc/passwd\ngames:x:5:60:games:/usr/games:/usr/sbin/nologin\nman:x:6:12:man:/var/cache/man:/usr/sbin/nologin\nlp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin\nmail:x:8:8:mail:/var/mail:/usr/sbin/nologin\nnews:x:9:9:news:/var/spool/news:/usr/sbin/nologin\nshw@shu:~$ sed -n \"6p\" /etc/passwd\ngames:x:5:60:games:/usr/games:/usr/sbin/nologin\nshw@shu:~$ sed -n \"6,+2p\" /etc/passwd\ngames:x:5:60:games:/usr/games:/usr/sbin/nologin\nman:x:6:12:man:/var/cache/man:/usr/sbin/nologin\nlp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin\nshw@shu:~$ sed -n \"/games/,8p\" /etc/passwd\ngames:x:5:60:games:/usr/games:/usr/sbin/nologin\nman:x:6:12:man:/var/cache/man:/usr/sbin/nologin\nlp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin\nshw@shu:~$ sed -n \"8,/news/p\" /etc/passwd\nlp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin\nmail:x:8:8:mail:/var/mail:/usr/sbin/nologin\nnews:x:9:9:news:/var/spool/news:/usr/sbin/nologin\nshw@shu:~$ sed -n \"/^games/,/news/p\" /etc/passwd\ngames:x:5:60:games:/usr/games:/usr/sbin/nologin\nman:x:6:12:man:/var/cache/man:/usr/sbin/nologin\nlp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin\nmail:x:8:8:mail:/var/mail:/usr/sbin/nologin\nnews:x:9:9:news:/var/spool/news:/usr/sbin/nologin\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#47","title":"4.7 \u67e5\u8be2","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#471-p","title":"4.7.1 p\u6253\u5370\u5339\u914d\u884c","text":"<ul> <li>\u6a21\u5f0f\u8bed\u6cd5\uff1a<code>/pattern/p</code></li> </ul> <pre><code>$ echo \"hello world\"|sed -n \"/^hello/p\"\nhello world\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#48","title":"4.8 \u4fee\u6539","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#481-s","title":"4.8.1 s\u66ff\u4ee3\u5339\u914d\u9879","text":"<ul> <li>\u793a\u4f8b1\uff1a\u66ff\u6362\u5339\u914d\u9879</li> </ul> <pre><code>$ echo \"hello world\"|sed 's/hello/hi/'\nhi world\n</code></pre> <ul> <li>\u793a\u4f8b2\uff1a\u5220\u9664\u5339\u914d\u9879</li> </ul> <pre><code># \u5229\u7528\u7a7a\u5b57\u7b26\u53bb\u66ff\u6362\n$ echo \"hello world\"|sed 's/hello//'\nworld\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#49-c","title":"4.9 c\u6539\u53d8\u5339\u914d\u884c","text":"<ul> <li>\u793a\u4f8b</li> </ul> <pre><code>$ echo -e \"hello boy\\nworld\"|sed \"/hello/c HELLO BOY\"\nHELLO BOY\nworld\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#410","title":"4.10 \u589e\u52a0","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#4101-a","title":"4.10.1 a\u5339\u914d\u884c\u540e\u8ffd\u52a0\u884c","text":"<ul> <li>\u5339\u914d\u6a21\u5f0f\u8bed\u6cd5\uff1a<code>/pattern/a\u5339\u914d\u884c\u540e\u8ffd\u52a0\u4e00\u884c</code></li> </ul> <pre><code>$ echo hello world\"|sed \"/^hello/a I am studying sed\"\nI am studying sed\nhello world\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#4102-i","title":"4.10.2 i\u5339\u914d\u884c\u524d\u8ffd\u52a0\u884c","text":"<ul> <li>\u5339\u914d\u6a21\u5f0f\u8bed\u6cd5\uff1a<code>/pattern/i\u5339\u914d\u884c\u524d\u8ffd\u52a0\u4e00\u884c</code></li> </ul> <pre><code>$ echo hello world\"|sed \"/^hello/i I am studying sed\"\nI am studying sed\nhello world\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#4103-r","title":"4.10.3 r\u5c06\u53e6\u4e00\u4e2a\u6587\u4ef6\u5185\u5bb9\u8ffd\u52a0\u5230\u5339\u914d\u884c\u540e\u9762","text":"<ul> <li>\u5339\u914d\u6a21\u5f0f\u8bed\u6cd5\uff1a<code>/pattern/r\u6587\u4ef6\u540d</code></li> </ul> <pre><code>$ cat file\nhello world\nI am studying sed\n$ echo \"hello world\"|sed \"/^hello/r file\"\nhello world\nhello world\nI am studying sed\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#4104-w","title":"4.10.4 w\u5c06\u5339\u914d\u5185\u5bb9\u4fdd\u5b58\u5230\u6307\u5b9a\u6587\u4ef6","text":"<ul> <li>\u5339\u914d\u6a21\u5f0f\u8bed\u6cd5\uff1a<code>/pattern/w\u6587\u4ef6\u540d</code></li> </ul> <pre><code>$ echo \"hello world\"|sed \"/^hello/w file\"\nhello world\n$ cat file\nhello world\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#411","title":"4.11 \u5220\u9664","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#4111","title":"4.11.1 \u5220\u9664\u5339\u914d\u884c","text":"<pre><code>$ echo -e \"hello\\nworld\"|sed '/he/d'\nworld\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#4112","title":"4.11.2 \u5220\u9664\u6307\u5b9a\u884c","text":"<pre><code># \u5220\u96641-2\u884c\n$ echo -e \"hello\\nworld\\nboy\"|sed '1,2d'\nboy\n# \u5220\u9664\u7b2c1\u884c\n$ echo -e \"hello\\nworld\\nboy\"|sed '1d'\nworld\nboy\n# \u5220\u9664\u7b2c2\u884c\n$ echo -e \"hello\\nworld\\nboy\"|sed '2d'\nhello\nboy\n# \u5220\u9664\u4ece\u7b2c\u4e00\u884c\u5230\u6700\u540e\u4e00\u884c\n$ echo -e \"hello\\nworld\\nboy\"|sed '1,$d'\n# \u5220\u9664\u6700\u540e\u4e00\u884c\n$ echo -e \"hello\\nworld\\nboy\"|sed '$d'\nhello\nworld\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#4113","title":"4.11.3 \u5220\u9664\u7a7a\u767d\u884c","text":"<pre><code>$ echo -e \"hello\\n\\nworld\"\nhello\n\nworld\n$ echo -e \"hello\\n\\nworld\"|sed '/^$/d'\nhello\nworld\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#412","title":"4.12 {}\u547d\u4ee4\u7ec4","text":"<ul> <li>\u529f\u80fd\uff1a\u5f53\u547d\u4ee4\u662f\u53e6\u4e00\u4e2a\u5339\u914d\u6a21\u5f0f\u65f6\uff0c\u9700\u8981\u4f7f\u7528{}\u5305\u88f9\u547d\u540d</li> <li>\u793a\u4f8b\uff1a<code>/\u7537/p</code>\u662f\u53e6\u4e00\u4e2a\u5339\u914d\u6a21\u5f0f\uff0c\u9700\u8981\u7528<code>{}</code>\u5305\u88f9</li> </ul> <pre><code>$ sed -n '2,4{/\u7537/p}' awk.file \nJim \u7537 20\n$ sed -n '2,4/\u7537/p' awk.file \nsed\uff1a-e \u8868\u8fbe\u5f0f #1\uff0c\u5b57\u7b26 4\uff1a\u672a\u77e5\u7684\u547d\u4ee4\uff1a\u201c/\u201d\n$ echo -e \"hello world\\nboy\"|sed -n '1,${/hello/{p;q}}'\nhello world\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#413","title":"4.13 \u591a\u884c\u547d\u4ee4","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#4131","title":"4.13.1 \u91c7\u7528\u591a\u884c\u547d\u4ee4\u65b9\u5f0f","text":"<ul> <li>\u5728\u8f93\u5165\u7b2c1\u6761\u547d\u4ee4\u540e\uff0c\u6309\u56de\u8f66\u6362\u884c\uff0c\u8f93\u5165\u7b2c2\u6761\u547d\u4ee4\uff0c\u4ee5'\u7ed3\u5c3e\u8f93\u5165</li> </ul> <pre><code>$ seq 6|sed '1d\n&gt; 3d\n&gt; 5d'\n2\n4\n6\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#4132","title":"4.13.2 \u4f7f\u7528;\u5355\u884c\u591a\u6761\u547d\u4ee4","text":"<pre><code>\u5728\u4f7f\u7528a\u3001c\u3001i \uff08\u884c\u53f7\u63d2\u5165\u3001\u6539\u53d8\u884c\u3001\u884c\u524d\u63d2\u5165\uff09\u65f6\uff0c\u4e0d\u80fd\u4f7f\u7528\u6b64\u65b9\u5f0f\uff0c\u4f1a\u88ab\u89e3\u6790\u6210\u5355\u6761\u547d\u4ee4\u3002\u5982\u4e0b\u547d\u4ee4`Hello ; 2d`\u88ab\u5f53\u6210\u4e86\u4e00\u6761\u8bed\u53e5\n```shell\n$ seq 2 | sed '1aHello ; 2d'\n1\nHello ; 2d\n2\n```\n</code></pre> <pre><code>$ seq 6 |sed \"1d;3s/./333/;5d\"\n2\n333\n4\n6\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#4133-e","title":"4.13.3 \u4f7f\u7528-e\u6307\u5b9a\u591a\u6761\u547d\u4ee4\u65b9\u5f0f","text":"<pre><code>$ seq 6 |sed -e 1d -e 3d -e 5s/./555/\n2\n4\n555\n6\n</code></pre> <ul> <li>\u4f5c\u7528\uff1a\u9488\u5bf9\u5339\u914d\u884c\u518d\u6267\u884csed\u547d\u4ee4</li> </ul> <pre><code># 2\u8868\u793a\u5339\u914d\u7b2c2\u884c\uff1b{s/world/boy/;p}\u662f\u5bf9\u7b2c2\u884c\u7684\u7279\u6b8a\u5904\u7406\uff0c\u7528boy\u66ff\u6362\u5339\u914d\u7684world\uff1bp\u8868\u793a\u6253\u5370\u66ff\u6362\u540e\u7684\u5185\u5bb9\n$ echo -e \"hello\\nworld\"|sed -n \"2{s/world/boy/;p}\"\nboy\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#414","title":"4.14 \u9ad8\u9636\u4f7f\u7528\u6280\u5de7","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#4141","title":"4.14.1 \u5728\u5339\u914d\u884c\u9996\u6dfb\u52a0\u5b57\u7b26","text":"<ul> <li>\u4f7f\u7528<code>&amp;</code>\u8868\u793a\u5339\u914d\u7684\u4efb\u610f\u5185\u5bb9</li> </ul> <pre><code>$ echo \"hello world\"|sed \"s/hello/#&amp;/\"\n#hello world\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#4142","title":"4.14.2 \u5339\u914d\u7684\u5b57\u7b26\u4e32&amp;","text":"<pre><code>$ echo -e \"hello world\"|sed 's/hello/[&amp;]/'\n[hello] world\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#4143","title":"4.14.3 \u5339\u914d\u5b50\u4e32","text":"<p>\u5b50\u4e32\u662f<code>\\(...\\)</code>\u8fd9\u91cc\u5339\u914d\u7684\uff0c\u7531<code>\\1</code>,<code>\\2</code>\u7b49\u6765\u8868\u793a\u7b2c1\u989d\u5b50\u4e32\uff0c\u7b2c2\u4e2a\u5b50\u4e32</p> <pre><code>$ echo -e \"hello world\"|sed 's/\\(hello\\) \\(world\\)/\\2 \\1/'\nworld hello\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#4144-n","title":"4.14.4 \u4f7f\u7528n\u6bcf\u9694\u591a\u5c11\u884c\u8df3\u8fc7","text":"<pre><code># 1\u4e2an\u8868\u793a\u6bcf\u96941\u884c\uff0c2\u4e2an\u8868\u793a\u6bcf\u96942\u884c\uff0c\u6267\u884c\u540e\u9762\u7684\u6307\u4ee4s/./x/ \uff0c\u5373\u7528x\u66ff\u6362\u4efb\u4e00\u4e2a\u5339\u914d\u7684\u5b57\u7b26\n$ seq 6 | sed 'n;n;s/./x/'\n1\n2\nx\n4\n5\nx\n$ seq 6 | sed 'n;s/./x/'\n1\nx\n3\nx\n5\nx\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/grep%E3%80%81sed%E3%80%81awk%E3%80%81cut/#5-cut","title":"5 cut","text":"<ul> <li>\u529f\u80fd\uff1a\u4ee5\u884c\u4e3a\u5355\u4f4d\uff0c\u63d0\u53d6\u6307\u5b9a\u6570\u636e</li> <li>\u8bed\u6cd5\uff1a<code>cut option file</code></li> <li><code>-b [\u533a\u57df\u89c4\u5219]</code>:\u9009\u62e9\u6307\u5b9a\u5b57\u8282</li> <li><code>-c [\u533a\u57df\u89c4\u5219]</code>:\u9009\u62e9\u6307\u5b9a\u5b57\u7b26\uff1b\u4e0e-b\u4e0d\u540c\u5728\u4e8e\uff0c\u5f53\u5b57\u7b26\u662f\u591a\u5b57\u8282\u65f6\uff0c\u6bd4\u5982\u6c49\u5b57\uff0c\u4e00\u4e2a\u6c49\u5b57\u5c31\u662f\u4e00\u4e2a\u5b57\u7b26\uff0c\u800c-b\u53ea\u4f1a\u4ee58bit\u4f5c\u4e3a\u8ba1\u6570\u5355\u4f4d\u3002</li> <li><code>-d [\u5206\u5272\u7b26]</code>:\u6307\u5b9a\u5206\u9694\u7b26\uff0c\u9ed8\u8ba4\u4ee5<code>tab</code>\u5206\u5272</li> <li><code>-f [\u533a\u57df\u89c4\u5219]</code>\uff1a\u4e0e<code>-d</code>\u7ed3\u5408\u4f7f\u7528\uff0c\u6307\u5b9a\u7684\u5206\u5272\u533a\u57df</li> <li><code>\u533a\u57df\u89c4\u5219</code>\uff1a<ul> <li><code>M</code>:\u7b2cM\u4e2a\u5b57\u8282\u3001\u5b57\u7b26\u3001\u533a\u57df\uff0c\u4ece1\u5f00\u59cb</li> <li><code>M,N,...</code>:\u7b2cM\u548cN\u4e2a\u5b57\u8282\u3001\u5b57\u7b26\u3001\u533a\u57df(\u591a\u4e2a\u7528,\u5206\u5272)</li> <li><code>M-N</code>:\u7b2cM\u5230N\u4e2a\u5b57\u8282\u3001\u5b57\u7b26\u3001\u533a\u57df</li> <li><code>-N</code>\u884c\u9996\u5230\u7b2cN\u4e2a\u5b57\u8282\u3001\u5b57\u7b26\u3001\u533a\u57df</li> <li><code>M-</code>\u7b2cM\u4e2a\u5b57\u8282\u3001\u5b57\u7b26\u3001\u533a\u57df\u5230\u884c\u5c3e</li> </ul> </li> <li>\u793a\u4f8b1\uff1a<code>-b</code>\u793a\u4f8b\uff0c<code>-c</code>\u4e0e\u4e4b\u60f3\u540c</li> </ul> <pre><code># \u9009\u62e9\u7b2c2\u4e2a\u5b57\u8282\n$ echo \"hello world\"|cut -b 2\ne\n# \u9009\u62e9\u4ece\u7b2c2\u5b57\u8282\u5f00\u59cb\uff0c\u76f4\u5230\u884c\u5c3e\u7684\u533a\u57df\n$ echo \"hello world\"|cut -b 2-\nello world\n# \u9009\u62e9\u4ece\u884c\u9996\u5230\u7b2c2\u5b57\u8282\u7684\u533a\u57df\n$ echo \"hello world\"|cut -b -2\nhe\n# \u9009\u62e9\u4ece\u7b2c2\u5b57\u8282\u5230\u7b2c6\u5b57\u8282\u7684\u533a\u57df\n$ echo \"hello world\"|cut -b 2-6\nello # \u9009\u62e9\u7b2c2\u548c\u7b2c3\u4e2a\u5b57\u8282\n$ echo \"hello world\"|cut -b 2,3\nel\n</code></pre> <ul> <li>\u793a\u4f8b2\uff1a<code>-d</code>\u5206\u9694\u7b26</li> </ul> <pre><code>$ echo \"hello world boy,girl\"|cut -d\" \" -f 2\nworld\n$ echo \"hello world boy,girl\"|cut -d\" \" -f 3\nboy,girl\n$ echo \"hello world boy,girl\"|cut -d\" \" -f 2\nworld\n$ echo \"hello world boy,girl\"|cut -d\",\" -f 2\ngirl\n$ echo \"hello world boy,girl\"|cut -d\",\" -f 1\nhello world boy\n$ echo \"hello world boy,girl\"|cut -d\" \" -f -2\nhello world\n$ echo \"hello world boy,girl\"|cut -d\" \" -f 2-\nworld boy,girl\n$ echo \"hello world boy,girl\"|cut -d\" \" -f 1,3\nhello boy,girl\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/yum/","title":"yum","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/yum/#1-rpm","title":"1 rpm","text":"<pre><code>rpm\u5305\u91cc\u9762\u662f\u5df2\u7ecf\u7f16\u8bd1\u597d\u5e76\u6253\u5305\u6210\u4e00\u5b9a\u76ee\u5f55\u5c42\u7ea7\u7684\u6587\u4ef6\uff0c\u5b89\u88c5\u8fc7\u7a0b\u5c31\u662f\u5c06\u5305\u91cc\u9762\u7684\u6587\u4ef6\u62f7\u8d1d\u5230\u5b89\u88c5\u76ee\u5f55\u4e0b\n</code></pre> <ul> <li>\u529f\u80fd\uff1arpm\u5305\u7ba1\u7406</li> <li>\u8bed\u6cd5\uff1a</li> <li>\u67e5\u8be2\u5305\u4fe1\u606f\uff1a <code>rpm {-q|--query} [select-options] [query-options]</code></li> <li>\u5b89\u88c5\u5305\uff1a<code>rpm {-i|--install} [install-options] PACKAGE_FILE ...</code></li> <li>\u66f4\u65b0\u5305\uff1a<code>rpm {-U|--upgrade} [install-options] PACKAGE_FILE ...</code></li> <li>\u66f4\u65b0\u6216\u5b89\u88c5\uff1a<code>rpm {-F|--freshen} [install-options] PACKAGE_FILE ...</code></li> <li>\u5378\u8f7d\u5305\uff1a<code>rpm {-e|--erase} [--allmatches] [--justdb] [--nodeps] [--noscripts] [--notriggers] [--test] PACKAGE_NAME ...</code></li> <li><code>-v</code>:\u663e\u793a\u8be6\u7ec6\u4fe1\u606f\uff0c\u5305\u62ec\u8fdb\u5ea6</li> <li><code>-h</code>:\u901a\u5e38\u4e0e<code>-v</code>\u4e00\u8d77\u4f7f\u7528\uff0c\u83b7\u5f97\u66f4\u597d\u7684\u663e\u793a\u6548\u679c</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/yum/#11-rpm","title":"1.1 rpm\u5b89\u88c5","text":"<pre><code>-vh \u53ef\u4ee5\u663e\u793a\u8be6\u7ec6\u7684\u8fc7\u7a0b\u3001\u8fdb\u5ea6\u4fe1\u606f\n</code></pre> <ul> <li><code>rpm -i file</code>\uff1a\u5b89\u88c5\uff08\u4e0d\u4f1a\u663e\u793a\u8be6\u7ec6\u5b89\u88c5\u4fe1\u606f\uff09</li> <li><code>rpm -ivh *.rpm</code>:\u5b89\u88c5\uff08\u663e\u793a\u8be6\u7ec6\u5b89\u88c5\u4fe1\u606f\u3001\u8fdb\u5ea6\u4fe1\u606f\uff09</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/yum/#111","title":"1.1.1 \u5f3a\u5236\u5b89\u88c5","text":"<ul> <li><code>rpm -ivh *.rpm --nodeps --force</code>:\u5f3a\u5236\u5b89\u88c5\uff0c\u4e0d\u8003\u8651\u4f9d\u8d56</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/yum/#112","title":"1.1.2 \u6307\u5b9a\u5b89\u88c5\u4f4d\u7f6e","text":"<ul> <li><code>rpm -ivh *.rpm --prefix=\u5b89\u88c5\u8def\u5f84</code></li> </ul> <pre><code>\u901a\u5e38\u6307\u5b9a\u5b89\u88c5\u76ee\u5f55\u4e0d\u4f7f\u7528rpm\u6765\u64cd\u4f5c\uff0c\u5bb9\u6613\u4ea7\u751f\u9519\u8bef\uff0c\u5efa\u8bae\u4f7f\u7528[rpm2cpio\u548ccpio](#rpm2cpio\u548ccpio)\u547d\u4ee4\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/yum/#12-rpm","title":"1.2 rpm\u66f4\u65b0","text":"<ul> <li><code>rpm -Uvh *.rpm</code>:\u5982\u679c\u6ca1\u6709,\u5219\u5b89\u88c5\uff0c\u5426\u5219\u66f4\u65b0</li> <li><code>rpm -Fvh \u5305\u5168\u540d</code>:\u5982\u679c\u6ca1\u6709\u5219\u4e0d\u5b89\u88c5\uff0c\u5426\u5219\u66f4\u65b0</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/yum/#13-rpm","title":"1.3 rpm\u5378\u8f7d","text":"<ul> <li><code>rpm -e \u8f6f\u4ef6\u540d</code></li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/yum/#14-rpm","title":"1.4 \u67e5\u8be2rpm\u5305\u662f\u5426\u5b89\u88c5","text":"<ul> <li><code>rpm -q \u5305\u540d</code>\uff1a\u67e5\u8be2\u5b89\u88c5\u5305\u7684\u7b80\u8981\u4fe1\u606f</li> <li><code>rpm -qi \u5305\u540d</code>:\u67e5\u770b\u4e00\u4e2a\u5305\u7684\u8be6\u7ec6\u4fe1\u606f</li> <li><code>rpm -qf \u6587\u4ef6\u540d</code>:\u67e5\u770b\u4e00\u4e2a\u6587\u4ef6\u662f\u7531\u54ea\u4e2a\u5305\u5b89\u88c5\u7684</li> <li><code>rpm -ql \u5305\u540d</code>:\u67e5\u770b\u4e00\u4e2a\u5305\u5b89\u88c5\u4e86\u54ea\u4e9b\u6587\u4ef6</li> <li><code>rpm -qa</code>:\u67e5\u770b\u7cfb\u7edf\u4e2d\u5b89\u88c5\u4e86\u54ea\u4e9b\u5305</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>$ rpm -q gcc\ngcc-4.8.5-44.el7.x86_64\n$ rpm -qi gcc\nName        : gcc\nVersion     : 4.8.5\nRelease     : 44.el7\nArchitecture: x86_64\nInstall Date: Fri 27 Aug 2021 03:28:38 PM CST\nGroup       : Development/Languages\nSize        : 39226437\nLicense     : GPLv3+ and GPLv3+ with exceptions and GPLv2+ with exceptions and LGPLv2+ and BSD\nSignature   : RSA/SHA256, Thu 15 Oct 2020 02:49:36 AM CST, Key ID 24c6a8a7f4a80eb5\nSource RPM  : gcc-4.8.5-44.el7.src.rpm\nBuild Date  : Wed 30 Sep 2020 10:42:39 AM CST\nBuild Host  : x86-02.bsys.centos.org\nRelocations : (not relocatable)\nPackager    : CentOS BuildSystem &lt;http://bugs.centos.org&gt;\nVendor      : CentOS\nURL         : http://gcc.gnu.org\nSummary     : Various compilers (C, C++, Objective-C, Java, ...)\nDescription :\nThe gcc package contains the GNU Compiler Collection version 4.8.\nYou,ll need this package in order to compile C code.\n$ rpm -qf /usr/bin/gcc\ngcc-4.8.5-44.el7.x86_64\n$ rpm -ql gcc\n/usr/bin/c89\n/usr/bin/c99\n/usr/bin/cc\n/usr/bin/gcc\n/usr/bin/gcc-ar\n/usr/bin/gcc-nm\n/usr/bin/gcc-ranlib\n...\n$ rpm -qa\ngeoipupdate-2.5.0-1.el7.x86_64\nsetup-2.8.71-11.el7.noarch\npython-IPy-0.75-6.el7.noarch\npython-pycurl-7.19.0-19.el7.x86_64\n...\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/yum/#15-rpm","title":"1.5 rpm\u5305\u4e0b\u8f7d\u5730\u5740","text":"<ol> <li>https://centos.pkgs.org/</li> <li>http://www.rpmfind.net/linux/rpm2html/search.php    rpmfind:    http://rpmfind.net/linux/RPM/index.html</li> </ol> <p>pkgs:    https://pkgs.org/</p> <p>fedora koji:    https://koji.fedoraproject.org/koji/index</p> <p>pbone:    http://rpm.pbone.net/</p> <p>\u6e90\u7801\uff1a    https://src.fedoraproject.org/projects/rpms/%2A</p> <p>CentOS    CentOS7.7    https://vault.centos.org/7.7.1908/os/Source/SPackages/</p> <p>https://vault.centos.org/7.7.1908/updates/Source/SPackages/</p> <p>CentOS7.8    https://vault.centos.org/7.8.2003/os/Source/SPackages/</p> <p>https://vault.centos.org/7.8.2003/updates/Source/SPackages/</p> <p>CentOS7.9    https://vault.centos.org/7.9.2009/os/Source/SPackages/</p> <p>https://vault.centos.org/7.9.2009/updates/Source/SPackages/</p> <p>CentOS8.2    https://vault.centos.org/8.2.2004/AppStream/Source/SPackages/</p> <p>https://vault.centos.org/8.2.2004/BaseOS/Source/SPackages/</p> <p>CentOS8.3    https://vault.centos.org/8.3.2011/AppStream/Source/SPackages/</p> <p>https://vault.centos.org/8.3.2011/BaseOS/Source/SPackages/</p>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/yum/#16-rpm","title":"1.6 rpm\u5305\u5236\u4f5c","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/yum/#17","title":"1.7 \u4e3b\u8981\u6d41\u7a0b","text":"<ol> <li>\u914d\u7f6e.spec\u6587\u4ef6</li> <li>\u6267\u884c<code>rpmbuild [option] .spec\u6587\u4ef6</code></li> </ol>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/yum/#171","title":"1.7.1 \u8bbe\u7f6e\u6253\u5305\u65f6\u4e0d\u5220\u9664\u8c03\u8bd5\u4fe1\u606f","text":"<p>\u5728spec\u6587\u4ef6\u4e2d\u6dfb\u52a0<code>%define __strip /bin/true</code></p>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/yum/#2-rpm2cpiocpio","title":"2 rpm2cpio\u548ccpio","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/yum/#21-rpm2cpio","title":"2.1 rpm2cpio","text":"<pre><code>rpm2cpio \u4e5f\u662frpm\u5305\u9644\u52a0\u7684\uff0c\u610f\u5473\u7740\u53ea\u8981rpm\u5de5\u5177\uff0c\u5c31\u4f1a\u6709rpm2cpio\n```shell\n$ rpm -qf /usr/bin/rpm2cpio\nrpm-4.11.3-45.el7.x86_64\n$ rpm -qf /usr/bin/rpm\nrpm-4.11.3-45.el7.x86_64\n```\n</code></pre> <ul> <li>\u8bed\u6cd5\uff1a<ul> <li><code>rpm2cpio rpm\u5305 &gt; cpio\u6587\u4ef6</code>\uff1a\u5c06rpm\u5305\u8f6c\u6210cpio\u6587\u4ef6</li> <li><code>rpm2cpio rpm\u5305|cpio -idvm</code>\uff1a\u5148\u5c06rpm\u5305\u8f6c\u6210cpio\u6587\u4ef6\uff0c\u518d\u6267\u884ccpio\u63d0\u53d6\u5f52\u6863\u6587\u4ef6\u5185\u5bb9\uff08\u5e38\u7528\uff09</li> </ul> </li> <li>\u793a\u4f8b\uff1a\u76f4\u63a5\u751f\u6210cpio\u6587\u4ef6</li> </ul> <pre><code>$ ls\ntest.rpm\n$ rpm2cpio test.rpm &gt; test.cpio\n$ ls test.cpio\ntest.cpio\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/yum/#22-cpio","title":"2.2 cpio","text":"<ul> <li>\u8bed\u6cd5\uff1a<ul> <li><code>rpm2cpio rpm\u5305|cpio -idvm</code>\uff1a\u5e38\u7528\u547d\u4ee4\uff0c\u5728\u5f53\u524d\u76ee\u5f55\u5b89\u88c5rpm\u5305\u5185\u5bb9</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ rpm2cpio test.rpm |cpio -idvm\n./usr/local/include/nccode\n./usr/local/include/nccode/blockdata.h\n./usr/local/include/nccode/codingmodule.h\n./usr/local/include/nccode/codingparam.h\n./usr/local/include/nccode/nccode_define.h\n./usr/local/include/nccode/nccode_enums.h\n./usr/local/include/nccode/nccode_memorypool.h\n./usr/local/include/nccode/segmentdata.h\n./usr/local/include/nccode/storagecodingmodule.h\n./usr/local/lib64/libjerasure.so\n./usr/local/lib64/libnc_code.so\n11061 blocks\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/yum/#3-yum","title":"3 yum","text":"<ul> <li>\u53c2\u8003\u6559\u7a0b</li> <li>\u529f\u80fd\uff1a\u57fa\u4e8erpm\u5305\u7684\u7ba1\u7406\u5de5\u5177</li> <li>\u8bed\u6cd5\uff1a<code>yum [options] [command] [package ...]</code></li> <li>\u90e8\u5206command\u529f\u80fd\u63cf\u8ff0</li> </ul> \u8bed\u6cd5 \u529f\u80fd yum install package1 [...] \u5b89\u88c5\u5305\uff08\u53ef\u4ee5\u540c\u65f6\u5b89\u88c5\u591a\u4e2a\u5305\uff09 yum remove package1 [...] \u5378\u8f7d\u5b89\u88c5\u5305\uff08\u53ef\u4ee5\u540c\u65f6\u6307\u5b9a\u591a\u4e2a\u5305\uff09 yum update [package1] [...] \u5347\u7ea7\u5305\u540c\u65f6\u4e5f\u5347\u7ea7\u8f6f\u4ef6\u548c\u7cfb\u7edf\u5185\u6838\uff08\u4e0d\u6307\u5b9a\u5305\u540d\uff0c\u9ed8\u8ba4\u5347\u7ea7\u6240\u6709\u5305\uff09 yum upgrade [package1] [...] \u53ea\u5347\u7ea7\u5305\uff0c\u4e0d\u5347\u7ea7\u8f6f\u4ef6\u548c\u7cfb\u7edf\u5185\u6838\uff08\u4e0d\u6307\u5b9a\u5305\u540d\uff0c\u9ed8\u8ba4\u5347\u7ea7\u6240\u6709\u5305\uff09 yum check-update [package1] [...] \u53ea\u5347\u7ea7\u5305\uff0c\u4e0d\u5347\u7ea7\u8f6f\u4ef6\u548c\u7cfb\u7edf\u5185\u6838\uff08\u4e0d\u6307\u5b9a\u5305\u540d\uff0c\u9ed8\u8ba4\u5347\u7ea7\u6240\u6709\u5305\uff09 yum list \u663e\u793a\u7cfb\u7edf\u4e2d\u5df2\u7ecf\u5b89\u88c5\u548c\u53ef\u4ee5\u5b89\u88c5\u5305\u7684\u4fe1\u606f yum list [...] \u663e\u793a\u6307\u5b9a\u5305\u7684\u4fe1\u606f yum info package \u663e\u793a\u6307\u5b9a\u5305\u4fe1\u606f\uff08\u6bd4list\u66f4\u8be6\u7ec6\uff09 yum deplist package \u663e\u793a\u5305\u7684\u4f9d\u8d56 yum repolist \u663e\u793a\u914d\u7f6e\u7684\u5b89\u88c5\u6e90"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/yum/#-option","title":"- \u90e8\u5206option\u529f\u80fd\u63cf\u8ff0","text":"\u547d\u4ee4 \u529f\u80fd -y \u5b89\u88c5\u8fc7\u7a0b\u786e\u8ba4\u90fd\u662fy -t \u5ffd\u7565\u5b89\u88c5\u8fc7\u7a0b\u9519\u8bef -v \u663e\u793a\u5b89\u88c5\u8fc7\u7a0b\u8be6\u7ec6\u4fe1\u606f"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/yum/#31-so","title":"3.1 \u67e5\u627eso\u5c5e\u4e8e\u54ea\u4e00\u4e2a\u5305","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>yum provides .so\u540d</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ yum provides libcrypto.so.10\n\u5df2\u52a0\u8f7d\u63d2\u4ef6\uff1afastestmirror, priorities\nLoading mirror speeds from cached hostfile\n1:openssl-libs-1.0.1e-42.el7_1.9.i686 : A general purpose cryptography library with TLS implementation\n\u6e90    \uff1abase\n\u5339\u914d\u6765\u6e90\uff1a\n\u63d0\u4f9b    \uff1alibcrypto.so.10\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/yum/#32","title":"3.2 \u4ec5\u4e0b\u8f7d\u5305\u4e0d\u5b89\u88c5","text":"<pre><code>&lt;font color=#ED7001&gt;yum-plugin-downloadonly&lt;/font&gt; \u65b9\u5f0f\u9ed8\u8ba4\u4f1a\u4e0b\u8f7d\u4f9d\u8d56\uff0c\u800c`yumdownloader`\u9700\u8981&lt;font color=#ED7001&gt;--resolve&lt;/font&gt;\u6765\u6307\u5b9a\u4e0b\u8f7d\u4f9d\u8d56\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/yum/#321-yum-plugin-downloadonly","title":"3.2.1 \u65b9\u6cd5\u4e00\uff1a\u4f7f\u7528yum-plugin-downloadonly\u63d2\u4ef6","text":"<ol> <li>\u5b89\u88c5\u5de5\u5177\uff1a<code>yum install -y yum-plugin-downloadonly</code></li> <li>\u4f7f\u7528\u4ec5\u4e0b\u8f7d\u547d\u4ee4\uff1a<code>yum -y install --downloadonly --downloaddir=\u4e0b\u8f7d\u76ee\u5f55 \u5305\u540d</code><ol> <li><code>--downloadonly</code>\uff1a\u8868\u793a\u53ea\u4e0b\u8f7d</li> <li><code>--downloaddir=\u4e0b\u8f7d\u76ee\u5f55</code>\uff1a\u6307\u5b9arpm\u5305\u4e0b\u8f7d\u5230\u54ea\u4e2a\u4f4d\u7f6e</li> </ol> </li> </ol>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/yum/#322-yumdownloader","title":"3.2.2 \u65b9\u6cd5\u4e8c\uff1a\u4f7f\u7528yumdownloader\u5de5\u5177","text":"<ol> <li>\u4e0b\u8f7d\u5de5\u5177\uff1a<code>yum install yum-utils</code></li> <li>\u4f7f\u7528yumdownloader\u4e0b\u8f7drpm\u5305\uff1a<code>yumdownloader --resolve --destdir=\u4e0b\u8f7d\u76ee\u5f55 rpm\u5305</code><ol> <li><code>--resolve</code>\uff1a\u8868\u793a\u4e0b\u8f7d\u4f9d\u8d56\u5305</li> <li><code>--destdir=\u4e0b\u8f7d\u76ee\u5f55</code>\uff1a\u6307\u5b9arpm\u5305\u4e0b\u8f7d\u5230\u54ea\u4e2a\u4f4d\u7f6e</li> </ol> </li> </ol>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/yum/#323","title":"3.2.3 \u65b9\u6cd5\u4e09\uff08\u63a8\u8350\uff09\uff1a\u81ea\u52a8\u4e0b\u8f7d\u6240\u6709\u4f9d\u8d56\uff0c\u4e0d\u7ba1\u672c\u673a\u662f\u5426\u5df2\u7ecf\u5b89\u88c5\u4e86\u76f8\u5e94\u7684\u5e93","text":"<ol> <li>\u4e0b\u8f7d\u5de5\u5177\uff1a<code>yum install yum-utils</code></li> <li>\u6267\u884c\u547d\u4ee4\uff1a<code>repotrack rpm\u5305</code></li> </ol>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/yum/#33-yum","title":"3.3 yum\u6e90\u914d\u7f6e","text":"<ul> <li>\u4e00\u822c\u6211\u4eec\u5728<code>/etc/yum.repos.d/</code>\u76ee\u5f55\u4e0b\u65b0\u5efa.repo\u4ed3\u5e93\u6587\u4ef6</li> <li>\u914d\u7f6eyum\u6e90\u540e\uff0c\u518d\u6267\u884c\u5982\u4e0b\u6307\u4ee4</li> <li><code>yum clean all</code></li> <li><code>yum makecache</code></li> <li><code>yum list</code></li> <li>\u53c2\u8003\u8d44\u6599</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/yum/#4-apt","title":"4 apt","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/","title":"\u78c1\u76d8\u7ba1\u7406","text":"<ul> <li>\u88f8\u78c1\u76d8\u5230\u53ef\u4f7f\u7528\u9700\u8981\u7ecf\u8fc73\u4e2a\u6b65\u9aa4\uff1a\u5206\u533a --&gt; \u683c\u5f0f\u5316 --&gt; \u6302\u8f7d</li> <li>\u53c2\u8003</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/#1","title":"1 \u56de\u73af\u8bbe\u5907","text":"<ul> <li>\u53c2\u8003</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/#2-df","title":"2 df","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>df [OPTION]... [FILE]...</code></li> <li><code>-a</code> \uff1a\u5217\u51fa\u6240\u6709\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u5305\u62ec\u7cfb\u7edf\u7279\u6709\u7684 /proc \u7b49\u6587\u4ef6\u7cfb\u7edf\uff1b</li> <li><code>-h</code> \uff1a\u4ee5\u4eba\u4eec\u8f83\u6613\u9605\u8bfb\u7684 GBytes, MBytes, KBytes \u7b49\u683c\u5f0f\u81ea\u884c\u663e\u793a\uff1b</li> <li><code>-H</code> \uff1a\u4ee5 M=1000K \u53d6\u4ee3 M=1024K \u7684\u8fdb\u4f4d\u65b9\u5f0f\uff1b</li> <li><code>-T</code> \uff1a\u663e\u793a\u6587\u4ef6\u7cfb\u7edf\u7c7b\u578b, \u8fde\u540c\u8be5 partition \u7684 filesystem \u540d\u79f0 (\u4f8b\u5982 ext3) \u4e5f\u5217\u51fa\uff1b</li> <li><code>-i</code> \uff1a\u4e0d\u7528\u786c\u76d8\u5bb9\u91cf\uff0c\u800c\u4ee5 inode \u7684\u6570\u91cf\u6765\u663e\u793a</li> <li>\u529f\u80fd\uff1a(\u5168\u79f0disk full)\u5217\u51fa\u6587\u4ef6\u7cfb\u7edf\u7684\u6574\u4f53\u78c1\u76d8\u7a7a\u95f4\u4f7f\u7528\u91cf</li> <li>\u793a\u4f8b1\uff1a\u67e5\u770b\u7cfb\u7edf\u6240\u6709\u6587\u4ef6\u7cfb\u7edf\uff08\u4e0d\u5305\u62ec\u7279\u6b8a\u7684\u6587\u4ef6\u7cfb\u7edf\uff09</li> </ul> <pre><code>$ df -h\n\u6587\u4ef6\u7cfb\u7edf        \u5bb9\u91cf  \u5df2\u7528  \u53ef\u7528 \u5df2\u7528% \u6302\u8f7d\u70b9\nudev            1.9G     0  1.9G    0% /dev\ntmpfs           391M  2.8M  388M    1% /run\n/dev/sda5        15G  6.7G  7.4G   48% /\ntmpfs           2.0G  7.2M  1.9G    1% /dev/shm\ntmpfs           5.0M  4.0K  5.0M    1% /run/lock\ntmpfs           2.0G     0  2.0G    0% /sys/fs/cgroup\n/dev/sda3        11G  6.8G  3.5G   66% /recovery\n/dev/sda1       1.5G  287M  1.1G   21% /boot\n/dev/sda7        16G  2.2G   13G   15% /data\ntmpfs           391M   32K  391M    1% /run/user/1000\n</code></pre> <ul> <li>\u793a\u4f8b2\uff1a\u67e5\u770b\u6307\u5b9a\u76ee\u5f55\u6216\u6587\u4ef6</li> </ul> <pre><code>df -h /home/shw\n\u6587\u4ef6\u7cfb\u7edf        \u5bb9\u91cf  \u5df2\u7528  \u53ef\u7528 \u5df2\u7528% \u6302\u8f7d\u70b9\n/dev/sda7        16G  2.2G   13G   15% /home\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/#3-du","title":"3 du","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>du [OPTION]... [FILE]...</code></li> <li><code>-a</code> \uff1a\u5217\u51fa\u6240\u6709\u7684\u6587\u4ef6\u4e0e\u76ee\u5f55\u5bb9\u91cf\uff0c\u56e0\u4e3a\u9ed8\u8ba4\u4ec5\u7edf\u8ba1\u76ee\u5f55\u5e95\u4e0b\u7684\u6587\u4ef6\u91cf\u800c\u5df2\u3002</li> <li><code>-h</code> \uff1a\u4ee5\u4eba\u4eec\u8f83\u6613\u8bfb\u7684\u5bb9\u91cf\u683c\u5f0f (G/M) \u663e\u793a\uff1b</li> <li><code>-c</code> \uff1a\u6253\u5370\u51fa\u603b\u7528\u91cf\u4fe1\u606f</li> <li><code>-d[depth]</code> \uff1a\u663e\u793a\u6df1\u5ea6\u4e3adepth\u7684\u5b50\u76ee\u5f55\u4fe1\u606f</li> <li><code>-s</code> \uff1a\u5217\u51fa\u603b\u91cf\u800c\u5df2\uff0c\u800c\u4e0d\u5217\u51fa\u6bcf\u4e2a\u5404\u522b\u7684\u76ee\u5f55\u5360\u7528\u5bb9\u91cf\uff1b</li> <li><code>-S</code> \uff1a\u4e0d\u5305\u62ec\u5b50\u76ee\u5f55\u4e0b\u7684\u603b\u8ba1\uff0c\u4e0e -s \u6709\u70b9\u5dee\u522b\u3002</li> <li>\u529f\u80fd\uff1a(\u5168\u79f0disk used)\u68c0\u67e5\u78c1\u76d8\u7a7a\u95f4\u4f7f\u7528\u91cf</li> <li>\u793a\u4f8b1: \u9ed8\u8ba4\u9012\u5f52\u6253\u5370\u5f53\u524d\u76ee\u5f55\u4e0b\u6240\u6709\u76ee\u5f55\u78c1\u76d8\u4f7f\u7528\u91cf</li> </ul> <pre><code>$ ls\na.out  class.cpp  network  sed.script  test_lambda.cc  test_lambda.i\n$ du\n4       ./network\n672     .\n</code></pre> <ul> <li>\u793a\u4f8b2\uff1a\u6587\u4ef6\u4e5f\u5355\u72ec\u6253\u5370\u51fa</li> </ul> <pre><code>du -a\n4       ./test_lambda.cc\n4       ./sed.script\n4       ./class.cpp\n4       ./network\n20      ./a.out\n632     ./test_lambda.i\n672     .\n</code></pre> <ul> <li>\u793a\u4f8b3\uff1a-s\u3001-S\u3001-c\u6bd4\u8f83</li> </ul> <pre><code>$ du\n4       ./network\n672     .\n$ du -s\n672     .\n$ du -S\n4       ./network\n668     .\n$ du -c\n4       ./network\n672     .\n672     \u603b\u7528\u91cf\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/#4-lsblk","title":"4 lsblk","text":"<ul> <li>\u529f\u80fd\uff1a\u5217\u51fa\u78c1\u76d8\u8bbe\u5907</li> <li>\u8bed\u6cd5\uff1a<code>lsblk [option]</code></li> <li><code>-a</code>:\u4f1a\u5217\u51fa\u6240\u6709\u8bbe\u5907\uff0c\u5305\u62ec\u7a7a\u8bbe\u5907\uff08\u9ed8\u8ba4\u4e0d\u5217\u51fa\u7a7a\u8bbe\u5907\uff09</li> <li><code>-p</code>:\u663e\u793a\u8bbe\u5907\u7684\u5168\u8def\u5f84</li> <li>\u793a\u4f8b1:\u663e\u793a\u6240\u6709\u5757\u8bbe\u5907</li> </ul> <pre><code>$ lsblk\nNAME MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\nsda    8:0    0  256G  0 disk\nsdb    8:16   0  256G  0 disk /\n$ lsblk -a\nNAME  MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\nram0    1:0    0   64M  0 disk\nram1    1:1    0   64M  0 disk\nram2    1:2    0   64M  0 disk\nram3    1:3    0   64M  0 disk\nram4    1:4    0   64M  0 disk\nram5    1:5    0   64M  0 disk\nram6    1:6    0   64M  0 disk\nram7    1:7    0   64M  0 disk\nram8    1:8    0   64M  0 disk\nram9    1:9    0   64M  0 disk\nram10   1:10   0   64M  0 disk\nram11   1:11   0   64M  0 disk\nram12   1:12   0   64M  0 disk\nram13   1:13   0   64M  0 disk\nram14   1:14   0   64M  0 disk\nram15   1:15   0   64M  0 disk\nloop0   7:0    0        0 loop\nloop1   7:1    0        0 loop\nloop2   7:2    0        0 loop\nloop3   7:3    0        0 loop\nloop4   7:4    0        0 loop\nloop5   7:5    0        0 loop\nloop6   7:6    0        0 loop\nloop7   7:7    0        0 loop\nsda     8:0    0  256G  0 disk\nsdb     8:16   0  256G  0 disk /\n</code></pre> <ul> <li>\u793a\u4f8b2:\u663e\u793a\u5757\u8bbe\u5907\u5168\u8def\u5f84</li> </ul> <pre><code>$ lsblk -p\nNAME     MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\n/dev/sda   8:0    0  256G  0 disk\n/dev/sdb   8:16   0  256G  0 disk /\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/#5-fdisk","title":"5 fdisk","text":"<pre><code>1. \u4e3b\u5206\u533a+\u6269\u5c55\u5206\u533a=4\n2. \u4e3b\u5206\u533a\u53ef\u4ee5\u521b\u5efa\u6587\u4ef6\u7cfb\u7edf\n3. \u6269\u5c55\u5206\u533a\u4e0d\u80fd\u76f4\u63a5\u521b\u5efa\u6587\u4ef6\u7cfb\u7edf\uff0c\u8fd8\u9700\u8981\u518d\u5206\u4e3a\u903b\u8f91\u5206\u533a\uff0c\u7136\u540e\u5728\u903b\u8f91\u5206\u533a\u521b\u5efa\u6587\u4ef6\u7cfb\u7edf\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u5bf9\u78c1\u76d8\u8fdb\u884c\u5206\u533a</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/#51-fdisk-l","title":"5.1 fdisk -l\u67e5\u770b\u78c1\u76d8\u5206\u533a\u4fe1\u606f","text":"<pre><code>fdisk -l \u663e\u793a\u7684Boot\u90a3\u4e00\u680f\u6709\u4e2a`*`\u8868\u793a\u662f\u5f15\u5bfc\u5206\u533a\n</code></pre> <ul> <li>\u793a\u4f8b\uff1a\u67092\u5757\u78c1\u76d8sda\u3001sdb\uff1bsdb\u8fd8\u6ca1\u6709\u8fdb\u884c\u5206\u533a\uff0csda\u5206\u4e867\u4e2a\u533a</li> </ul> <pre><code>$ fdisk -l\nDisk /dev/sda: 64 GiB, 68719476736 bytes, 134217728 sectors\nDisk model: VMware Virtual S\nUnits: sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisklabel type: dos\nDisk identifier: 0xad40246b\n\nDevice     Boot     Start       End  Sectors  Size Id Type\n/dev/sda1  *         2048   3147775  3145728  1.5G 83 Linux\n/dev/sda2         3147776  98566143 95418368 45.5G  5 Extended\n/dev/sda3        98566144 121634815 23068672   11G 83 Linux\n/dev/sda4       121634816 134215679 12580864    6G 82 Linux swap / Solaris\n/dev/sda5         3149824  34605055 31455232   15G 83 Linux\n/dev/sda6        34607104  66062335 31455232   15G 83 Linux\n/dev/sda7        66064384  98566143 32501760 15.5G 83 Linux\n\nPartition table entries are not in disk order.\n\n\nDisk /dev/sdb: 5 GiB, 5368709120 bytes, 10485760 sectors\nDisk model: VMware Virtual S\nUnits: sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisklabel type: dos\nDisk identifier: 0x92c2fc7a\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/#52-fdisk","title":"5.2 fdisk\u5185\u90e8\u64cd\u4f5c","text":"<pre><code>fdisk\u7684\u6240\u6709\u64cd\u4f5c\u90fd\u4f1a\u5148\u4fdd\u5b58\u5728\u5185\u5b58\u4e2d\uff0c\u5f53\u8f93\u5165`w`\u540e\u624d\u4f1a\u771f\u6b63\u7684\u533a\u6267\u884c\uff0c\u8f93\u5165`q`\u5219\u653e\u5f03\u4e4b\u524d\u7684\u64cd\u4f5c\n</code></pre> <p>\u901a\u8fc7\u5728\u547d\u4ee4\u884c\u8f93\u5165<code>fdisk \u78c1\u76d8\u540d</code>\uff08\u6bd4\u5982 fdisk /dev/sda\uff09\u8fdb\u5165\u67d0\u4e00\u4e2a\u78c1\u76d8\u5206\u533a\u64cd\u4f5c\u754c\u9762 - \u547d\u4ee4\uff1a   - <code>m</code>:\u6253\u5370\u53ef\u9009\u53c2\u6570\u5e2e\u52a9\u4fe1\u606f   - <code>n</code>:\u521b\u5efa\u5206\u533a   - <code>d</code>:\u5220\u9664\u5206\u533a   - <code>t</code>:\u6539\u53d8\u5206\u533a\u7c7b\u578b   - <code>p</code>:\u6253\u5370\u5206\u533a\u4fe1\u606f   - <code>F</code>:\u6253\u5370\u672a\u5206\u533a\u7a7a\u95f4\u4fe1\u606f   - <code>w</code>:\u5c06\u4e4b\u524d\u64cd\u4f5c\u5199\u5165\u78c1\u76d8\u9000\u51fa\uff08\u6267\u884c\u5206\u533a\uff09   - <code>q</code>:\u653e\u5f03\u4e4b\u524d\u6240\u6709\u64cd\u4f5c\u5e76\u9000\u51fa\uff08\u653e\u5f03\u5206\u533a\uff09</p>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/#6-mkfs","title":"6 mkfs","text":"<pre><code>\u5728\u5df2\u7ecf\u683c\u5f0f\u5316\u6587\u4ef6\u7cfb\u7edf\u7684\u5206\u533a\u4e0a\uff0c\u4f7f\u7528`mkfs -f `\u5f3a\u5236\u8986\u76d6\n</code></pre> <ul> <li>\u8bed\u6cd5\uff1a<code>mkfs [-t \u6587\u4ef6\u7cfb\u7edf\u683c\u5f0f] \u8bbe\u5907\u6587\u4ef6\u540d</code></li> <li>\u529f\u80fd\uff1a\u521b\u5efa\u6587\u4ef6\u7cfb\u7edf(\u5728\u5206\u533a\u540e\u7684\u8bbe\u5907\u53ea\u540e\u6267\u884c)</li> <li>\u6280\u5de7\uff1a\u67e5\u770b\u652f\u6301\u7684\u6587\u4ef6\u7cfb\u7edf\u540d,<code>mkfs [TAB][TAB]</code>\u5728\u8f93\u5165mkfs\u65f6\u53cc\u51fbtab\u952e\u4f1a\u663e\u793a\u6240\u6709\u652f\u6301\u6587\u4ef6\u7cfb\u7edf</li> </ul> <pre><code>$ mkfs\nmkfs           mkfs.cramfs    mkfs.ext3      mkfs.jfs       mkfs.nilfs2    mkfs.vfat      \nmkfs.bfs       mkfs.exfat     mkfs.ext4      mkfs.minix     mkfs.ntfs      mkfs.xfs       \nmkfs.btrfs     mkfs.ext2      mkfs.fat       mkfs.msdos     mkfs.reiserfs\n</code></pre> <ul> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>$ mkfs -t ext4 /dev/sdb1\nmke2fs 1.44.5 (15-Dec-2018)\nCreating filesystem with 624744 4k blocks and 156480 inodes\nFilesystem UUID: 9a8d4992-6c3e-4a94-8f30-11615bfac5dd\nSuperblock backups stored on blocks: 32768, 98304, 163840, 229376, 294912\n\nAllocating group tables: done                            \nWriting inode tables: done                            \nCreating journal (16384 blocks): done\nWriting superblocks and filesystem accounting information: done </code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/#7-mountumount","title":"7 mount\u3001umount","text":"<ul> <li>\u8bed\u6cd5\uff1a</li> <li><code>mount -t [\u6587\u4ef6\u7cfb\u7edf\u540d] \u5206\u533a\u8bbe\u5907\u540d[/dev/sda1] \u6302\u8f7d\u76ee\u5f55[/dev/mount_dir]</code></li> <li><code>umount \u5206\u533a\u8bbe\u5907\u540d[/dev/sda1]</code></li> <li>\u529f\u80fd\uff1a\u6302\u8f7d\u3001\u5378\u8f7d\u6587\u4ef6\u7cfb\u7edf</li> <li>\u793a\u4f8b:\u6302\u8f7d</li> </ul> <pre><code>$ mount -t ext4 /dev/sdb1 /home/shw/mount1\n$ df -h|grep /dev/sdb1\n/dev/sdb1       2.3G  7.2M  2.2G    1% /home/shw/mount1\n$ df -hT /home/shw/mount1\n\u6587\u4ef6\u7cfb\u7edf       \u7c7b\u578b  \u5bb9\u91cf  \u5df2\u7528  \u53ef\u7528 \u5df2\u7528% \u6302\u8f7d\u70b9\n/dev/sdb1      ext4  2.3G  7.2M  2.2G    1% /home/shw/mount1\n</code></pre> <ul> <li>\u793a\u4f8b\uff1a\u5378\u8f7d</li> </ul> <pre><code>$ umount /dev/sdb1\n$ df -hT /home/shw/mount1\n\u6587\u4ef6\u7cfb\u7edf       \u7c7b\u578b  \u5bb9\u91cf  \u5df2\u7528  \u53ef\u7528 \u5df2\u7528% \u6302\u8f7d\u70b9\n/dev/sda7      ext4   16G  2.2G   13G   16% /home\n$ df -h|grep /dev/sdb1\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/#71","title":"7.1 \u6c38\u4e45\u6302\u8f7d\u78c1\u76d8","text":"<ul> <li>\u7f16\u8f91/etc/fstab \u6587\u4ef6\uff0c\u63d2\u5165\u6302\u8f7d\u4fe1\u606f\u3002</li> </ul> <pre><code>#  \u8bbe\u5907         \u6302\u8f7d\u70b9  \u6587\u4ef6\u7cfb\u7edf\u7c7b\u578b   \u6302\u8f7d\u53c2\u6570   \u662f\u5426\u5907\u4efd  \u662f\u5426\u68c0\u6d4b\n/dev/sda       /data1      xfs       defaults      0       0\n</code></pre> <p>linux \u6c38\u4e45\u6302\u8f7d\u78c1\u76d8\u91cd\u542f\u540e\u751f\u6548\u3002</p>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/","title":"\u7f51\u7edc\u7ba1\u7406","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#1","title":"1 \u5de5\u5177\u5b89\u88c5","text":"<pre><code># ifconfig\n$ yum install -y net-tools\n# ip\u3001ss\u3001tc\n$ yum install -y iproute\n# ping\n$ yum install -y iputils\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#2-ip","title":"2 ip","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793a/\u64cd\u4f5c\u8def\u7531\u3001\u7f51\u7edc\u8bbe\u5907\u3001\u63a5\u53e3\u548c\u96a7\u9053</li> <li>\u8bed\u6cd5\uff1a</li> </ul> <pre><code>ip [ OPTIONS ] OBJECT { COMMAND | help }\n\nOBJECT := { link | address | addrlabel | route | rule | neigh | ntable | tunnel | tuntap | maddress | mroute |\nmrule | monitor | xfrm | netns | l2tp | tcp_metrics | token | macsec }\n\nOPTIONS := { -V[ersion] | -h[uman-readable] | -s[tatistics] | -d[etails] | -r[esolve] | -iec | -f[amily] {\ninet | inet6 | link } | -4 | -6 | -I | -D | -B | -0 | -l[oops] { maximum-addr-flush-attempts } |\n-o[neline] | -rc[vbuf] [size] | -t[imestamp] | -ts[hort] | -n[etns] name | -N[umeric] | -a[ll] |\n-c[olor] | -br[ief] | -j[son] | -p[retty] }\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#21-ip-addr","title":"2.1 ip addr\u663e\u793a\u7f51\u5361\u4fe1\u606f","text":"<ul> <li>\u8bed\u6cd5:</li> <li>\u663e\u793a\u6240\u6709\u7f51\u5361\u4fe1\u606f\uff1a<code>ip addr [show]</code></li> <li>\u663e\u793a\u6307\u5b9a\u7f51\u5361\u4fe1\u606f\uff1a<code>ip addr show [dev] \u7f51\u5361\u540d</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>~$ ip addr show eth0\n6: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000\nlink/ether 00:15:5d:37:d1:0f brd ff:ff:ff:ff:ff:ff\n    inet 172.26.11.86/20 brd 172.26.15.255 scope global eth0\n       valid_lft forever preferred_lft forever\n    inet6 fe80::215:5dff:fe37:d10f/64 scope link\n       valid_lft forever preferred_lft forever\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#22-ip-route","title":"2.2 ip route \u8def\u7531\u8868\u7ba1\u7406","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#221","title":"2.2.1 \u4e3b\u673a\u8def\u7531\u3001\u7f51\u7edc\u8def\u7531\u3001\u9ed8\u8ba4\u8def\u7531","text":"<ul> <li>\u4e3b\u673a\u8def\u7531\u5c31\u662fx.x.x.x/32\uff0c\u610f\u601d\u662f\u4ec5\u4ec5\u5230x.x.x.x\u7684\u62a5\u6587\u542c\u6211\u7684\u3002</li> <li>\u7f51\u7edc\u8def\u7531\u5c31\u662fx.x.x.x/n,\u610f\u601d\u662f\u5230x.x.x.x/n\u7684\u62a5\u6587\u542c\u6211\u7684\u3002</li> <li>\u9ed8\u8ba4\u8def\u7531\u662f0.0.0.0/0\uff0c\u610f\u601d\u662f\u5b9e\u5728\u6ca1\u4eba\u8981\u7684\u62a5\u6587\u542c\u6211\u7684\u3002</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#2211","title":"2.2.1.1 \u663e\u793a\u8def\u7531","text":"<ul> <li>\u8bed\u6cd5\uff1a</li> <li><code>ip route</code></li> <li><code>ip route show</code></li> <li><code>ip route list</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ ip route\ndefault via 172.26.0.1 dev eth0\n172.26.0.0/20 dev eth0 proto kernel scope link src 172.26.3.81\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#222","title":"2.2.2 \u6dfb\u52a0\u8def\u7531","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#223","title":"2.2.3 \u5220\u9664\u8def\u7531","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>ip route del [ip/\u63a9\u7801|default]</code></li> <li>\u793a\u4f8b1\uff1a\u5220\u9664\u6307\u5b9a\u8def\u7531</li> </ul> <pre><code>$ route -n\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n0.0.0.0         172.26.0.1      0.0.0.0         UG    0      0        0 eth0\n172.26.0.0      0.0.0.0         255.255.240.0   U     0      0        0 eth0\n$ sudo ip route del 172.26.0.0/255.255.240.0\n$ route -n\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n0.0.0.0         172.26.0.1      0.0.0.0         UG    0      0        0 eth0\n</code></pre> <ul> <li>\u793a\u4f8b2\uff1a\u5220\u9664\u9ed8\u8ba4\u8def\u7531\uff0cip+\u63a9\u7801</li> </ul> <pre><code>$ route -n\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n0.0.0.0         172.26.0.1      0.0.0.0         UG    0      0        0 eth0\n$ sudo ip route del 0.0.0.0/0.0.0.0\n$ route -n\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n</code></pre> <ul> <li>\u793a\u4f8b3\uff1a\u5220\u9664\u9ed8\u8ba4\u8def\u7531\uff0cdefault</li> </ul> <pre><code>$ route -n\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n0.0.0.0         172.26.0.1      0.0.0.0         UG    0      0        0 eth0\n$ sudo ip route del default\n$ route -n\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#23-ip-link","title":"2.3 ip link \u7f51\u7edc\u8bbe\u5907\u914d\u7f6e","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#231","title":"2.3.1 \u542f\u505c\u7f51\u5361","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>ip link set \u7f51\u5361\u540d [down|up]</code></li> <li>\u793a\u4f8b1\uff1a\u505c\u6b62\u7f51\u5361</li> </ul> <pre><code>$ sudo ip link set eth0 down\n$ ip addr show eth0\n4: eth0: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc mq state DOWN group default qlen 1000\nlink/ether 00:15:5d:37:d4:16 brd ff:ff:ff:ff:ff:ff\n    inet 172.26.3.81/20 brd 172.26.15.255 scope global eth0\n       valid_lft forever preferred_lft forever\n</code></pre> <ul> <li>\u793a\u4f8b2\uff1a\u542f\u52a8\u7f51\u5361\uff0c\u53ef\u80fd\u9700\u8981\u91cd\u65b0\u6dfb\u52a0\u8def\u7531</li> </ul> <pre><code>$ sudo ip link set eth0 up\n$ ip addr show eth0\n4: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000\nlink/ether 00:15:5d:37:d4:16 brd ff:ff:ff:ff:ff:ff\n    inet 172.26.3.81/20 brd 172.26.15.255 scope global eth0\n       valid_lft forever preferred_lft forever\n    inet6 fe80::215:5dff:fe37:d416/64 scope link\n       valid_lft forever preferred_lft forever\n</code></pre>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#3-route","title":"3 route","text":"<ul> <li>\u53c2\u8003\u8d44\u6599</li> </ul>"},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#4-nslookup","title":"4 nslookup","text":""},{"location":"Documents/A-Linux/%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#41","title":"4.1 \u57df\u540d\u89e3\u6790","text":"<pre><code>$ nslookup baidu.com\n\u670d\u52a1\u5668:  public1.114dns.com\nAddress:  114.114.114.114\n\n\u975e\u6743\u5a01\u5e94\u7b54:\n\u540d\u79f0:    baidu.com\nAddresses:  220.181.38.251\n          220.181.38.148\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/","title":"C++","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#1","title":"1 \u6570\u636e\u7c7b\u578b","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#11","title":"1.1 \u57fa\u672c\u7c7b\u578b\u5360\u5b57\u8282\u6570","text":"\u7c7b\u578b\u8bf4\u660e\u7b26           \u7b49\u4ef7\u7c7b\u578b           \u6309\u6570\u636e\u6a21\u578b\u7684\u4f4d\u5bbd           C++ \u6807\u51c6           LP32           ILP32           LLP64           LP64          short short int  \u81f3\u5c11 16 16 16 16 16 short int signed short signed short int unsigned short unsigned short int unsigned short int int int  \u81f3\u5c11 16 16 32 32 32 signed signed int unsigned unsigned int unsigned int long long int  \u81f3\u5c11 32 32 32 32 64 long int signed long signed long int unsigned long unsigned long int unsigned long int long long long long int (C++11)  \u81f3\u5c11 64 64 64 64 64 long long int signed long long signed long long int unsigned long long unsigned long long int (C++11) unsigned long long int"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#12-podplain-old-data","title":"1.2 POD\uff08Plain Old Data\uff09\u7b80\u5355\u65e7\u6570\u636e","text":"<ul> <li>\u53c2\u8003</li> <li>\u53c2\u8003</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#13-trivialtype","title":"1.3 TrivialType \u5e73\u51e1\u7c7b\u578b","text":"<ul> <li>\u53c2\u8003</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#14","title":"1.4 \u805a\u5408\u4f53","text":"<p>\u805a\u5408\u4f53\u662f\u4e0b\u5217\u7c7b\u578b\u4e4b\u4e00\uff1a</p> <ul> <li>\u6570\u7ec4\u7c7b\u578b</li> <li>\u7b26\u5408\u4ee5\u4e0b\u6761\u4ef6\u7684\u7c7b\u7c7b\u578b\uff08\u5e38\u4e3a struct \u6216 union\uff09</li> <li>\u6ca1\u6709\u79c1\u6709\u6216\u53d7\u4fdd\u62a4\u7684\u76f4\u63a5 (C++17 \u8d77) \u975e\u9759\u6001\u6570\u636e\u6210\u5458</li> <li>\u6ca1\u6709\u7528\u6237\u58f0\u660e\u7684\u6784\u9020\u51fd\u6570 (C++11 \u524d)</li> <li>\u6ca1\u6709\u7528\u6237\u63d0\u4f9b\u7684\u6784\u9020\u51fd\u6570\uff08\u5141\u8bb8\u663e\u5f0f\u9884\u7f6e\u6216\u5f03\u7f6e\u7684\u6784\u9020\u51fd\u6570\uff09(C++11 \u8d77)(C++17 \u524d)</li> <li>\u6ca1\u6709\u7528\u6237\u63d0\u4f9b\u3001\u7ee7\u627f\u6216 explicit \u7684\u6784\u9020\u51fd\u6570\uff08\u5141\u8bb8\u663e\u5f0f\u9884\u7f6e\u6216\u5f03\u7f6e\u7684\u6784\u9020\u51fd\u6570\uff09(C++17 \u8d77)(C++20 \u524d)</li> <li>\u6ca1\u6709\u7528\u6237\u58f0\u660e\u6216\u7ee7\u627f\u7684\u6784\u9020\u51fd\u6570 (C++20 \u8d77)</li> <li>\u6ca1\u6709\u865a\u3001\u79c1\u6709\u6216\u53d7\u4fdd\u62a4 (C++17 \u8d77) \u7684\u57fa\u7c7b</li> <li>\u6ca1\u6709\u865a\u6210\u5458\u51fd\u6570</li> <li>\u6ca1\u6709\u9ed8\u8ba4\u6210\u5458\u521d\u59cb\u5316\u5668 (C++11 \u8d77)(C++14 \u524d)</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#15","title":"1.5 \u4f4d\u57df","text":"<ul> <li>\u53c2\u8003: https://learn.microsoft.com/zh-cn/cpp/cpp/cpp-bit-fields?view=msvc-170</li> <li>\u5b9a\u4e49\uff1a\u58f0\u660e\u5177\u6709\u4ee5\u4f4d\u4e3a\u5355\u4f4d\u7684\u660e\u786e\u5927\u5c0f\u7684\u7c7b\u6570\u636e\u6210\u5458\u3002\u76f8\u90bb\u7684\u4f4d\u57df\u6210\u5458\u53ef\u4ee5\u6253\u5305\u6210\u5171\u4eab\u548c\u8de8\u8fc7\u5404\u4e2a\u5b57\u8282\u3002</li> <li>\u8bed\u6cd5\uff1a</li> <li><code>\u7c7b\u578b \u6807\u8bc6\u7b26(\u53ef\u9009) \u5c5e\u6027(\u53ef\u9009) : \u5927\u5c0f</code></li> <li><code>\u7c7b\u578b \u6807\u8bc6\u7b26(\u53ef\u9009) \u5c5e\u6027(\u53ef\u9009) : \u5927\u5c0f \u82b1\u62ec\u53f7\u6216\u7b49\u53f7\u521d\u59cb\u5316\u5668 (C++20 \u8d77)</code></li> <li>\u89c4\u5219\uff1a</li> <li>\u89c4\u5219 1\uff1a\u4f4d\u57df\u7684\u7c7b\u578b\u53ea\u80fd\u662f\u6574\u578b\u6216\u679a\u4e3e\u7c7b\u578b\u3002</li> <li>\u89c4\u5219 2\uff1a\u4f4d\u57df\u4e0d\u80fd\u662f\u9759\u6001\u6570\u636e\u6210\u5458\u3002</li> <li>\u5206\u7c7b</li> <li>\u6709\u540d\u4f4d\u57df\uff1a\u6709\u6807\u8bc6\u7b26\uff08\u53d8\u91cf\u540d\uff09</li> <li>\u65e0\u540d\u4f4d\u57df\uff1a\u6ca1\u6709\u6807\u8bc6\u7b26\uff08\u53d8\u91cf\u540d\uff09\uff0c\u5927\u5c0f\u8d77\u5230\u4e00\u4e2a\u586b\u5145\u4f4d\u7684\u4f5c\u7528</li> <li>\u4f4d\u57df\u5927\u5c0f\uff1a\u53ea\u80fd\u662f 0 \u6216\u5927\u4e8e 0 \u7684\u6574\u6570</li> <li>\u7b49\u4e8e 0\uff1a\u53ea\u80fd\u7528\u5728\u65e0\u540d\u4f4d\u57df\u4e2d\uff0c\u8868\u793a\u4e0b\u4e2a\u4f4d\u57df\u5e94\u8be5\u5728\u5206\u914d\u5355\u5143\u7684\u8fb9\u754c\u5f00\u59cb\u3002</li> <li>\u5927\u4e8e 0\uff1a\u8868\u793a\u4f4d\u57df\u5c06\u5360\u6709\u7684\u4f4d\u6570</li> </ul> <pre><code>#include &lt;iostream&gt;\n\nstruct S1\n{\n// \u4e09\u4f4d\u7684\u65e0\u7b26\u53f7\u4f4d\u57df\uff0c\u5141\u8bb8\u7684\u503c\u6709 0...7\nunsigned int b : 3;\n};\nstruct S2\n{\n// \u901a\u5e38\u4f1a\u5360\u7528 2 \u4e2a\u5b57\u8282\uff1a\n// 3 \u4f4d\uff1ab1 \u7684\u503c\n// 2 \u4f4d\uff1a\u4e0d\u4f7f\u7528\n// 6 \u4f4d\uff1ab2 \u7684\u503c\n// 2 \u4f4d\uff1ab3 \u7684\u503c\n// 3 \u4f4d\uff1a\u4e0d\u4f7f\u7528\nunsigned char b1 : 3, : 2, b2 : 6, b3 : 2;\n};\nstruct S3\n{\n// \u901a\u5e38\u4f1a\u5360\u7528 2 \u4e2a\u5b57\u8282\uff1a\n// 3 \u4f4d\uff1ab1 \u7684\u503c\n// 5 \u4f4d\uff1a\u4e0d\u4f7f\u7528\n// 6 \u4f4d\uff1ab2 \u7684\u503c\n// 2 \u4f4d\uff1ab3 \u7684\u503c\nunsigned char b1 : 3;\nunsigned int :0; // \u5f00\u59cb\u65b0\u5b57\u8282,\u8fb9\u754c\u5927\u5c0f4\nunsigned char b2 : 3;//\u4ece\u7b2c5\u5b57\u8282\u5f00\u59cb\nunsigned char :0; // \u5f00\u59cb\u65b0\u5b57\u8282\uff0c\u8fb9\u754c\u5927\u5c0f1\nunsigned char b3 : 1;//\u4ece\u7b2c6\u5b57\u8282\u5f00\u59cb\n};\nint main()\n{\nS1 s = {0b00000111};\nstd::cout &lt;&lt; s.b &lt;&lt; '\\n';// \u8f93\u51fa 7\ns.b=0b00001101; // \u8d85\u8fc73bit\u7684\u503c\u5b58\u50a8\u4e0d\u4e0b\nstd::cout &lt;&lt; s.b &lt;&lt; '\\n'; // \u8f93\u51fa5\uff0c\uff080b00000101\uff09\u6b63\u5f0f\u6765\u8bf4\u662f\u7531\u5b9e\u73b0\u5b9a\u4e49\u7684\u884c\u4e3a\n\nstd::cout &lt;&lt; sizeof(S2) &lt;&lt; '\\n'; // \u8f93\u51fa 2\n\nstd::cout &lt;&lt; sizeof(S3) &lt;&lt; '\\n'; // \u8f93\u51fa 6\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#2","title":"2 \u6307\u9488","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#21","title":"2.1 \u6307\u9488\u6982\u8ff0","text":"<p>\u6307\u9488 <code>p</code> \u662f\u4e5f\u662f\u4e00\u4e2a\u53d8\u91cf\uff0c\u53d8\u91cf <code>p</code> \u5b58\u7684\u662f\u4e00\u6bb5\u5730\u5740\u6570\u636e\uff08\u5730\u5740\u53ef\u80fd 4 \u4f4d\uff0c\u4e5f\u53ef\u80fd 8 \u4f4d\uff09\uff0c<code>*p</code> \u7684\u4f5c\u7528\u662f\u5f97\u5230 p \u7684\u503c\uff08\u5730\u5740\uff09\u6240\u6307\u5411\u7684\u6570\u636e\uff0c<code>&amp;p</code> \u53ef\u4ee5\u83b7\u5f97\u53d8\u91cf <code>p</code> \u7684\u5730\u5740\u3002</p> <ul> <li>\u6307\u9488\u662f\u53d8\u91cf\uff1a\u6307\u9488\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u53d8\u91cf\uff0c\u6709\u81ea\u5df1\u7684\u5730\u5740\u548c\u503c\uff0c\u4e0e\u666e\u901a\u53d8\u91cf\u552f\u4e00\u4e0d\u540c\u662f\u5b58\u50a8\u7684\u503c\u662f\u5730\u5740\u3002</li> <li>\u6307\u9488\u5b58\u7684\u662f\u5730\u5740</li> </ul> <pre><code>  string* str = new string(\"\u4f60\u597d\");\ncout &lt;&lt; \"new a string object :\" &lt;&lt; endl;\ncout &lt;&lt; \"\u6307\u9488str\u5730\u5740\uff1a\"&lt;&lt;&amp;str&lt;&lt;\"\u6307\u9488str\u503c\uff1a\"&lt;&lt;str&lt;&lt;\"\u6307\u9488str\u503c\u6307\u5411\u7684\u503c\uff1a\"&lt;&lt;*str&lt;&lt;endl;\n</code></pre> <ul> <li>\u53ef\u80fd\u7684\u5730\u5740\u503c\u5982\u4e0b</li> </ul> \u5730\u5740 \u53d8\u91cf\u540d \u503c 0F001100 pstr 0F001110 0F001110 <code>*pstr</code> Hello World &amp;pstr 0F001100 0F001200 str Hello World"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#211-int-pp","title":"2.1.1 \u6307\u9488\u7684\u6307\u9488 int** pp","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#212-delete-null","title":"2.1.2 delete \u6307\u9488\u540e\u6307\u9488\u8d4b\u503c null\uff1f","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#22-const","title":"2.2 const \u548c\u6307\u9488\u7684\u5173\u7cfb","text":"<p>\u6ce8\uff1a\u4ee5\u4e0b\u4e3e\u4f8b\u4ee5 int \u4f5c\u4e3a\u7c7b\u578b, \u4e14 new \u7684\u6570\u636e\u672a\u4f5c delete \u5904\u7406</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#221","title":"2.2.1 \u901f\u8bb0\u6280\u5de7","text":"<pre><code>const int* p;//const\u6307\u5411\u7684\u662f*p,*p\u5c31\u662fp\u6307\u5411\u7684\u6570\u636e\uff0c\u6545\u6307\u5411\u6570\u636e\u4e0d\u80fd\u6539\u53d8\nint const* p;//\u540c\u4e0a\nint* const p=NULL;//const\u6307\u5411\u7684\u662fp\uff0cp\u662f\u6307\u9488\uff0c\u6545p\u4e0d\u80fd\u6539\u53d8\uff0c\u4f46p\u6307\u5411\u6570\u636e\u53ef\u4ee5\u6539\u53d8\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#222-const-int","title":"2.2.2 \u7c7b\u578b\u4e00\uff1aconst \u548c int","text":"<pre><code>//\u7c7b\u578b\u4e00\nconst int i1 = 2;//\u3010\u2160\u3011\n// i1 = 3;//error\n\nint const i2 = 2;//\u3010\u2161\u3011\u7b49\u4ef7\u4e8e\u3010\u2160\u3011\n//i2 = 3;//error \n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#223-const-int","title":"2.2.3 \u7c7b\u578b\u4e8c\uff1aconst \u548c int \u548c *","text":"<pre><code>    int* tpi = new  int(1);\nint** tppi = new int* (new int(1));\n\n//\u7c7b\u578b\u4e8c\nconst int* pi_11{ new int(2) };//\u3010\u2162\u3011pi_11\u6307\u5411\u7684\u503c\u4e3a\u5e38\u91cf\n//(*pi_11) = 3;//error\npi_11 = tpi;//success\n\nint const* pi_12{ new int(2) };//\u3010\u2163\u3011\u7b49\u4ef7\u4e8e\u3010\u2162\u3011\n//(*pi_12) = 3;//error\npi_12 = tpi;//success\n*tpi = 3;\nint* const pi_13{ new int(2) };//\u2164\u3011pi_13\u6307\u9488\u4e3a\u5e38\u91cf\n(*pi_13) = 3;//success\n//pi_13 = tpi;//error\n\nconst int* const pi{ new int(2) };//\u3010\u2165\u3011pi\u6307\u9488\u4e3a\u5e38\u91cf\uff0c\u4e14pi\u6307\u5411\u7684\u503c\u4e5f\u4e3a\u5e38\u91cf\n//pi = tpi;//error\n//(*pi) = 3;//error\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#224-const-int","title":"2.2.4 \u7c7b\u578b\u4e09\uff1aconst \u548c int \u548c **","text":"<pre><code>    int* tpi = new  int(1);\nint** tppi = new int* (new int(1));\nconst int* pi_11{ new int(2) };\n//\u7c7b\u578b\u4e09\nint* const* const ppi1{ new int* (new int(2)) };//\u3010\u2166\u3011ppi1\u6307\u9488\u4e3a\u5e38\u91cf\uff0c\u4e14ppi1\u6307\u9488\u7684\u6307\u9488\u4e3a\u5e38\u91cf\n//ppi1 = tppi;//error\n//(*ppi1) = tpi;//error\n(*(*ppi1)) = 3;//success\n\nconst int* const* const ppi2{ new int* (new int(2)) };//\u3010\u2167\u3011ppi2\u6307\u9488\u4e3a\u5e38\u91cf\uff0c\u4e14ppi2\u6307\u9488\u7684\u6307\u9488\u4e3a\u5e38\u91cf,\u4e14ppi2\u6307\u9488\u7684\u6307\u9488\u6307\u5411\u7684\u503c\u4e5f\u4e3a\u5e38\u91cf\n//ppi2 = tppi;//error\n//(*ppi2) = tpi;//error\n//(*(*ppi2)) = 3;//error\nint const * const* const ppi3{ new int* (new int(2)) };//\u3010\u2168\u3011\u7b49\u4ef7\u4e8e\u3010\u2167\u3011\n\nint** const ppi4{ new int* (new int(2)) };//\u3010\u2169\u3011ppi5\u4e8c\u7ea7\u6307\u9488\u4e3a\u5e38\u91cf\n//ppi4 = tppi;//error\n(*ppi4) = tpi;//success\n(*(*ppi4)) = 2;//sucess\n\nconst int** ppi5{ new const int* (new int(2)) };//\u3010\u2169\u2160\u3011ppi5\u6307\u9488\u7684\u6307\u9488\u6307\u5411\u7684\u503c\u4e3a\u5e38\u91cf\nppi5 = &amp;pi_11;//success\n(*ppi5) = pi_11;//success\n//(*(*ppi5)) = 2;//error\n\nint const** ppi6{ new const int* (new int(2)) };//\u3010\u2169\u2161\u3011\u7b49\u4ef7\u4e8e\u3010\u2169\u2160\u3011\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#23-c","title":"2.3 c++ \u5f15\u7528\u548c\u6307\u9488\u8fd0\u7528\u591a\u6001\u7279\u6027","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#231","title":"2.3.1 \u6307\u9488\u65b9\u5f0f","text":"<p>\u5c06\u5b50\u7c7b\u5bf9\u8c61\u8d4b\u7ed9\u57fa\u7c7b\u6307\u9488</p> <pre><code>class A\n{\npublic:\nvirtual void operator ()()\n{\ncout&lt;&lt; \"A\";\n};\n};\nclass B:public A {\nvirtual void operator ()()\n{\ncout &lt;&lt; \"B\";\n};\n};\nint main()\n{\nA* aP = new B();\n(*aP)();\ndelete aP;\naP = nullptr;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u6267\u884c<code>(*aP)();</code>\u4e4b\u540e\u6253\u5370\u51fa B\uff0c\u800c\u4e0d\u662f A, \u8bf4\u660e\u662f\u6267\u884c\u4e86\u5b50\u7c7b\u65b9\u6cd5\u3002</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#232","title":"2.3.2 \u5f15\u7528\u65b9\u5f0f","text":"<p>\u5c06\u5b50\u7c7b\u5bf9\u8c61\u8d4b\u7ed9\u57fa\u7c7b\u5f15\u7528</p> <pre><code>class A\n{\npublic:\nvirtual void operator ()()\n{\ncout&lt;&lt; \"A\";\n};\n};\nclass B:public A {\nvirtual void operator ()()\n{\ncout &lt;&lt; \"B\";\n};\n};\nint main()\n{\nB b;\nA&amp; aRef = b;\naRef();\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u6267\u884c<code>aRef ();</code>\u4e4b\u540e\u6253\u5370\u51fa B\uff0c\u800c\u4e0d\u662f A\uff0c\u8bf4\u660e\u662f\u6267\u884c\u4e86\u5b50\u7c7b\u65b9\u6cd5\u3002</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#24","title":"2.4 \u6307\u9488\u5f15\u7528","text":"<ul> <li><code>*&amp;</code> \uff1a\u6307\u9488\u7684\u5f15\u7528</li> <li><code>**&amp;</code> \uff1a\u6307\u9488\u7684\u6307\u9488\u7684\u5f15\u7528</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#3","title":"3 \u6570\u7ec4","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#31","title":"3.1 \u4e8c\u7ef4\u6570\u7ec4","text":"<p>\u4e8c\u7ef4\u6570\u7ec4\u53ef\u4ee5\u4ece\u6808\u4e2d\u521b\u5efa</p> <pre><code>int m=10,n=5;\nint arr[m][n];//\u521b\u5efa10\u884c5\u5217\u6570\u7ec4\n</code></pre> <p>\u4e5f\u53ef\u4ee5\u4ece\u5806\u4e2d\u521b\u5efa</p> <pre><code>int m=10,n=5;\nint ** arr;\narr=new int* [m];//\u4e8c\u7ef4\u6570\u7ec4\u5b9e\u8d28\u4e0a\u662f\u4e00\u4e2a\u6570\u7ec4\u5143\u7d20\u662f\u53e6\u4e00\u4e2a\u6570\u7ec4\uff0c\u800c\u6570\u7ec4\u53ef\u7528\u6307\u9488\u66ff\u6362\nfor(int i=0;i&lt;m;++i)\n{\narr[i]=new int[n];//\u6bcf\u4e00\u4e2a\u6570\u7ec4\u5143\u7d20\u9879\u90fd\u662f\u4e00\u4e2a\u6570\u7ec4\n}\n</code></pre> <p>\u4ece\u5806\u4e2d\u91ca\u653e</p> <pre><code>for(int i=0;i&lt;m;++i)\n{\ndelete[] arr[i];//\u5220\u9664\u5185\u90e8\u6570\u7ec4\n}\ndelete[] p;//\u5220\u9664\u5916\u5c42\u6570\u7ec4\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#4","title":"4 \u7c7b","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#41","title":"4.1 \u7c7b\u6210\u5458\u53d8\u91cf","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#411","title":"4.1.1 \u521d\u59cb\u5316","text":"<p>\u7c7b\u6210\u5458\u53d8\u91cf\u6709 3 \u4e2d\u521d\u59cb\u5316\u65b9\u5f0f\uff1a 1. \u58f0\u660e\u65f6\u521d\u59cb\u5316 2. \u521d\u59cb\u5316\u5217\u8868 3. \u6784\u9020\u51fd\u6570\u521d\u59cb\u5316 - \u793a\u4f8b</p> <pre><code>class A\n{\npublic:\n// 1.\u58f0\u660e\u65f6\u521d\u59cb\u5316\nint a = 1;\n// 2.\u521d\u59cb\u5316\u5217\u8868\nA(int a_):a(a_){}\n// 3.\u6784\u9020\u51fd\u6570\u521d\u59cb\u5316\nA(int a_, bool b){ a = a_; }\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#412","title":"4.1.2 \u4f4d\u57df","text":"<p>[[\u6570\u636e\u7c7b\u578b]] \u4f4d\u57df\u662f\u4e00\u79cd\u53ef\u4ee5\u6bd4 bit \u7ea7\u522b\u7684\u6570\u636e\u7c7b\u578b\uff0c\u53ea\u80fd\u53c8\u5728\u7c7b\u3001\u7ed3\u6784\u4f53\u4e2d\uff0c\u53ef\u4ee5\u8fdb\u5360\u7528\u67d0\u4e9b bit \u4f4d\uff0c\u800c\u4e0d\u662f\u591a\u4e2a byte\u3002 - \u58f0\u660e\u89c4\u5219\uff1a<code>declarator:constant-expression</code></p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#42","title":"4.2 \u5d4c\u5957\u7c7b","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#421","title":"4.2.1 \u5d4c\u5957\u7c7b\u58f0\u660e\u5b9a\u4e49","text":"<p>\u5d4c\u5957\u7c7b\u6709 2 \u4e2d\u5199\u6cd5\uff1a 1. \u5728\u7c7b\u4e2d\u58f0\u660e\uff0c\u7c7b\u5916\u5b9a\u4e49 2. \u5728\u7c7b\u4e2d\u58f0\u660e\u65f6\u5b9a\u4e49 - \u793a\u4f8b</p> <pre><code>class A\n{\npublic:\n    // 1.\u5d4c\u5957\u7c7b\u5728\u7c7b\u4e2d\u58f0\u660e\n    class A1;\n    // 2.\u7c7b\u4e2d\u58f0\u660e\u65f6\u5b9a\u4e49\n    class A2{};\n}\uff1b\n// 1.\u5d4c\u5957\u7c7b\u5728\u7c7b\u5916\u5b9a\u4e49\nclass A::A1\n{\npublic:\n    A();\n    ~A(){}\n};\n// \u7c7b\u6784\u9020\u5b9a\u4e49\nA::A1::A1(){}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#43","title":"4.3 \u7c7b\u8bbe\u8ba1\u9677\u9631","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#431-1","title":"4.3.1 1. \u7c7b\u6210\u5458\u662f\u4e00\u4e2a\u57fa\u7c7b\u6307\u9488\uff0c\u6df1\u62f7\u8d1d\u907f\u514d\u4e22\u5931\u5b50\u7c7b\u6570\u636e","text":"<pre><code>class A\n{\npublic:\nvirtual ~A(){}\npublic:\nstring str_A;\n};\nclass B :public A\n{\npublic:\nstring str_B;\n};\nclass C\n{\npublic:\nC() :m_a(nullptr) {\n\n}\nC(const C&amp; in)\n{\nif (in.m_a != nullptr)\n{\nm_a = new A();\n*m_a = *in.m_a;\n}\nelse\nm_a = nullptr; }\nC&amp; operator=(const C&amp; in)\n{\nif (&amp;in == this)\nreturn *this;\nif (m_a != nullptr)\ndelete m_a;\nif (in.m_a != nullptr)\n{\nm_a = new A();\n*m_a = *in.m_a;\n}\nelse\nm_a = nullptr; return *this;\n}\npublic:\nA* m_a;\n};\n</code></pre> <ul> <li>\u95ee\u9898\u5206\u6790\uff1a\u4e0a\u9762\u4f8b\u5b50\u4e2d\u770b\u4f3c\u5f88\u5b8c\u7f8e\uff0c\u5bf9 C \u4e2d\u7684\u6307\u9488 m_a \u8fdb\u884c\u4e86\u6df1\u62f7\u8d1d\uff0c\u7136\u800c m_a \u5931\u53bb\u4e86\u5bf9\u5b50\u7c7b\u7684\u6570\u636e\u62f7\u8d1d\u3002\u5f53 m_a \u662f B \u6307\u9488\u8d4b\u7ed9 A \u6307\u9488\u65f6\uff0c\u8fd9\u65f6\u62f7\u8d1d\u6784\u9020\u548c\u8d4b\u503c\u8fd0\u7b97\u7b26\u4e2d <code>*m_a = *in.m_a;</code>\u53ea\u4f1a\u53bb\u8c03 A \u7684\u8d4b\u503c\u8fd0\u7b97\u7b26\uff0c\u800c\u4e0d\u4f1a\u53bb\u8c03 B \u7684\uff0c\u8fd9\u6837\uff0cm_a \u4e2d B \u6570\u636e\u5c31\u4e22\u5931\u4e86\u3002</li> <li>\u89e3\u51b3\u65b9\u6cd5\uff1a\u901a\u8fc7 static_cast \u6216 dynamic_cast \u5224\u65ad\u5177\u4f53\u5b50\u7c7b\u7c7b\u578b, \u5728\u5bf9\u5b50\u7c7b\u8d4b\u503c\uff08\u8c03\u7528\u5b50\u7c7b\u7684\u8d4b\u503c\u8fd0\u7b97\u7b26\uff09\u3002</li> </ul> <pre><code>class C\n{\npublic:\nC() :m_a(nullptr) {\n\n}\nC(const C&amp; in)\n{\nif (in.m_a != nullptr)\n{\nif (dynamic_cast&lt;B*&gt;(in.m_a))\n{\nB* pb = new B(*dynamic_cast&lt;B*&gt;(in.m_a));\nm_a = pb;\n}\nelse\n{\nm_a = new A;\n*m_a = *in.m_a;\n}\n/*  m_a = new A();\n              *m_a = *in.m_a;*/\n}\nelse\nm_a = nullptr;\n\n}\nC&amp; operator=(const C&amp; in)\n{\nif (&amp;in == this)\nreturn *this;\nif (m_a != nullptr)\ndelete m_a;\nif (in.m_a != nullptr)\n{\nif (dynamic_cast&lt;B*&gt;(in.m_a))\n{\nB* pb = new B(*dynamic_cast&lt;B*&gt;(in.m_a));\nm_a = pb;\n}\nelse\n{\nm_a = new A;\n*m_a = *in.m_a;\n}\n/* m_a = new A();\n             *m_a = *in.m_a;*/\n}\nelse\nm_a = nullptr;\n\nreturn *this;\n}\n~C()\n{\nif (m_a != nullptr)\n{\ndelete m_a;\nm_a = nullptr;\n}\n}\npublic:\nA* m_a;\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#432-2","title":"4.3.2 2. \u7c7b\u6210\u5458\u6307\u9488\u53d8\u91cf\u8bbe\u8ba1\u6210\u79c1\u6709\uff0c\u907f\u514d\u758f\u5ffd\u5bfc\u81f4\u7684\u5185\u5b58\u6cc4\u6f0f","text":"<pre><code>class A\n{\n\n};\nclass B\n{\npublic:\nB() :m_a(nullptr) {}\n~B() {\nif (m_a != nullptr)\n{\ndelete m_a;\nm_a = nullptr;\n}\n}\npublic:\nA* m_a;\n};\nint main()\n{\nB b;\n{\nA* a1 = new A;\nb.m_a = a1;\n}\n{\nA* a2 = new A;\nb.m_a = a2;\n}\n\n}\n</code></pre> <ul> <li>\u95ee\u9898\u5206\u6790\uff1a\u4e0a\u9762 B \u7c7b\u5b9a\u4e49\u770b\u4f3c\u5b8c\u7f8e\uff0cB \u751f\u547d\u5468\u671f\u7ed3\u675f\u81ea\u52a8\u5220\u9664 m_a \u5185\u5b58, \u4f46\u4e0d\u6b63\u5f53\u7684\u7ed9 m_a \u8d4b\u503c\u5bfc\u81f4\u4e86\u610f\u5916\u7684\u5185\u5b58\u6cc4\u6f0f\u3002main \u51fd\u6570\u4e2d a1 \u9996\u5148\u8d4b\u7ed9\u4e86b.m_a, \u610f\u56fe\u5c06 a1 \u7684\u63a7\u5236\u6743\u4ea4\u7ed9 b\uff0c\u786e\u5b9e b \u63a5\u7ba1\u4e86 a1\uff0c\u5f53 b \u751f\u547d\u5468\u671f\u7ed3\u675f\u4e5f\u53ef\u4ee5\u901a\u8fc7\u6790\u6784\u5220\u9664 a1 \u6307\u9488, \u5f53 a2 \u53c8\u8d4b\u7ed9b.m_a \u65f6\uff0cm_a \u75db\u5feb\u7684\u7ed3\u675f\u4e86 a2\uff0c\u4ece\u800c\u653e\u5f03\u4e86 a1 \u7684\u63a7\u5236\u6743, \u4f7f a1 \u5185\u5b58\u6cc4\u6f0f\u3002</li> <li>\u89e3\u51b3\u65b9\u6cd5\uff1a\u5c06\u6210\u5458\u6307\u9488\u8bbe\u4e3a\u79c1\u6709\uff0c\u8bbf\u95ee\u901a\u8fc7\u6210\u5458\u51fd\u6570\u3002</li> </ul> <pre><code>class A\n{\n\n};\nclass B\n{\npublic:\nB() :m_a(nullptr) {}\n~B()\n{\nif (m_a != nullptr)\n{\ndelete m_a;\nm_a = nullptr;\n}\n}\nvoid setValue(A* a)\n{\nif (m_a != nullptr)\n{\ndelete m_a;\nm_a = nullptr;\n}\nm_a = a;\n}\nA* getValue()\n{\nreturn m_a;\n}\nprivate:\nA* m_a;\n};\nint main()\n{\nB b;\n{\nA* a1 = new A;\nb.setValue(a1);\n}\n{\nA* a2 = new A;\nb.setValue(a2);\n}\n\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#433","title":"4.3.3 \u7c7b\u4e2d\u6210\u5458\u53d8\u91cf\u4e3a\u7c7b\u81ea\u8eab","text":"<p>\u7c7b\u4e2d\u6210\u5458\u53d8\u91cf\u4e3a\u7c7b\u81ea\u8eab\u65f6\u600e\u4e48\u5199\uff1f</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#4331-1","title":"4.3.3.1 1. \u6307\u9488\uff0c\u667a\u80fd\u6307\u9488\u53ef\u4ee5\uff0c\u5bf9\u8c61\u4e0d\u53ef\u4ee5","text":"<p>\u5148\u770b\u4ee5\u4e0b\u4ee3\u7801\uff0c\u4e00\u822c\u6210\u5458\u58f0\u660e\u60c5\u51b5</p> <pre><code>class A\n{\npublic:\n    A();\n    ~A();\n    A* m_pa; //\u6b63\u5e38\n    A m_a;   //error:uses 'B', which is being define   \n    shared_ptr&lt;A&gt; m_spa; //\u6b63\u5e38\n}\uff1b\n</code></pre> <p>\u89e3\u91ca\uff1a 1. A m_a; \u4e0d\u80fd\u901a\u8fc7\u7f16\u8bd1\uff0c\u7531\u9519\u8bef\u4fe1\u606f\u53ef\u77e5\uff0cm_a \u5b9e\u4f8b\u5316\u65f6\u7c7b A \u6b63\u5728\u5b9a\u4e49\u4e2d\uff08\u5373\u8fd8\u6ca1\u6709\u5b9a\u4e49\uff09\uff0c\u7f16\u8bd1\u5668\u65e0\u6cd5\u77e5\u9053\u7c7b A \u5360\u591a\u5c11\u7a7a\u95f4\uff0c\u56e0\u6b64\u4e0d\u80fd\u7f16\u8bd1\u901a\u8fc7\u3002 2. A* m_pa\uff1b\u548c shared_ptr&lt;A&gt; m_spa; \u80fd\u6b63\u5e38\u901a\u8fc7\u7f16\u8bd1\uff0c\u56e0\u4e3a m_pa \u662f\u6307\u9488\u5b58\u7684\u662f\u5730\u5740\uff0c\u53ea\u5360 4 \u5b57\u8282\u5927\u5c0f\uff0c\u53ef\u4ee5\u660e\u786e\u786e\u5b9a\u3002</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#4332-2","title":"4.3.3.2 2. \u6307\u9488\u548c\u667a\u80fd\u6307\u9488\u600e\u4e48\u8d4b\u503c\uff1f","text":"<ol> <li>\u4e0d\u80fd\u5728\u5bf9\u8c61\u672a\u751f\u6210\u65f6\u6267\u884c\u5bf9\u8c61\u7684\u8d4b\u503c\u64cd\u4f5c</li> </ol> <pre><code>class A\n{\npublic:\n    A(){m_pa = new A;}\n    A(int){}\n    A(char) { init(); }\n    ~A();\n    A* m_pa;\n    shared_ptr&lt;A&gt; m_spa;\n    void init() {\n        m_pa = new A;\n        m_spa.reset(m_pa);\n    }\n};\n\nA a1; //error\u8c03\u7528A();\nA a2(2);//\u6b63\u5e38;\nA a2('a');//error\u8c03\u7528A(char);\na2.init();//\u6b63\u5e38\n</code></pre> <p>\u89e3\u91ca 2. A a1\uff1b\u4f1a\u62a5\u9519\u662f\u56e0\u4e3a A \u8c03\u7528\u6784\u9020 A () \u65f6\uff0c\u6267\u884c\u4e86\u8bed\u53e5 m_pa = new A; \u800c\u6b64\u65f6 A \u7684\u5927\u5c0f\u672a\u77e5 new \u591a\u5c11\u5185\u5b58\u65e0\u6cd5\u786e\u5b9a\uff0c\u6545\u62a5\u9519\uff1b 3. A a2 (2); \u6b63\u5e38\u6267\u884c\uff0c\u56e0\u4e3a\u4ed6\u6267\u884c\u4e86\u6784\u9020 A (int){}\uff0c\u672a\u5bf9 m_pa \u64cd\u4f5c\uff1b 4. A a2 ('a'); \u4f1a\u62a5\u9519\u662f\u56e0\u4e3a\u6784\u9020 A (char) \u95f4\u63a5\u8c03\u7528\u5bf9 m_pa \u7684\u8d4b\u503c\u64cd\u4f5c\uff0c\u7406\u7531\u4e0e 1 \u4e00\u6837\uff1b 5. a2.init (); \u6b63\u5e38\u6267\u884c\u662f\u56e0\u4e3a\u6b64\u65f6 A \u7684\u5927\u5c0f\u5df2\u77e5\uff0c\u53ef\u4ee5\u6267\u884c\u8d4b\u503c\u64cd\u4f5c 6. \u667a\u80fd\u6307\u9488\u9075\u5faa\u6307\u9488\u4e00\u6837\u7684\u539f\u5219</p> <p>\u603b\u7ed3\uff1a\u6307\u9488\u6210\u5458\u4e0d\u80fd\u5728\u7c7b\u5b9e\u4f8b\u5316\u9636\u6bb5\u76f4\u63a5\u6216\u95f4\u63a5\u8fdb\u884c\u64cd\u4f5c</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#44","title":"4.4 \u91cd\u8f7d\u8fd0\u7b97\u7b26","text":"<pre><code>#include&lt;iostream&gt;\nusing namespace std;\nstruct S\n{\nint val;\nS(const S&amp; s):val(s.val){}\nS():val(0){}\nS(int i) :val(i) {}\nS&amp; operator =(const S&amp; s)\n{\nif (&amp;s == this)\nreturn *this;\nval = s.val;\nreturn *this;\n}\n//++\u524d\u7f6e\nS operator ++(){\nprintf(\"\u524d\u7f6e++\");\n++val;\nreturn *this;\n}\n//\u540e\u7f6e++\nS operator ++(int){\nprintf(\"\u540e\u7f6e++\");\nS s(*this);\n++val;\nreturn s;\n}\n//\u8f6c\u6362\u51fd\u6570\noperator int&amp;()\n{\nreturn val;\n}//S\u5bf9\u8c61\u8f6c\u6362int\u5f15\u7528\noperator int()\n{\nreturn val;\n}//S\u5bf9\u8c61\u8f6c\u6362int\u503c\noperator int*()\n{\nreturn &amp;val;\n}//S\u5bf9\u8c61\u8f6c\u6362int*\nfriend ostream&amp; operator &lt;&lt; (ostream&amp; output,const S &amp; s)\n{\noutput &lt;&lt; s.val;\nreturn output;\n}\nbool operator &lt;(const S&amp; s)\n{\nreturn val &lt; s.val ? true:false;\n}\nvoid operator()(int i)//\u51fd\u6570\u5bf9\u8c61\uff0c\u53c2\u6570\uff0c\u8fd4\u56de\u503c\u4efb\u610f\n{\nval = i;\n}\nint&amp; operator[](int i)//\u6b64\u7c7b\u4e0d\u542b\u6570\u7ec4\u7c7b\u578b\uff0c\u6545\u8bbe\u8ba1\u76f4\u63a5\u8fd4\u56de\u4e86val\u6210\u5458\n{\nreturn val;\n}\nvoid* operator new(size_t t)// \u6ce8\u610f\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u548c\u8fd4\u56de\u503c\u90fd\u662f\u56fa\u5b9a\u7684\n{\n//return malloc(t);\nreturn ::operator new(t);\n}\nvoid operator delete(void* ptr) // \u91cd\u8f7d\u4e86new\u5c31\u9700\u8981\u91cd\u8f7ddelete\n{\n//free(ptr);\n::operator delete(ptr);\n}  };\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#45","title":"4.5 \u7c7b\u8bbe\u8ba1\u5e38\u8bc6","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#451-1-8","title":"4.5.1 1. \u7c7b\u4e2d\u9ed8\u8ba4 8 \u4e2a\u51fd\u6570","text":"<pre><code>class A\n{\npublic:\n// \u9ed8\u8ba4\u6784\u9020\u51fd\u6570;\nA();\n// \u9ed8\u8ba4\u62f7\u8d1d\u6784\u9020\u51fd\u6570\nA(const A&amp;);\n// \u9ed8\u8ba4\u6790\u6784\u51fd\u6570\n~A();\n// \u9ed8\u8ba4\u91cd\u8f7d\u8d4b\u503c\u8fd0\u7b97\u7b26\u51fd\u6570\nA&amp; operator = (const A&amp;);\n// \u9ed8\u8ba4\u91cd\u8f7d\u53d6\u5740\u8fd0\u7b97\u7b26\u51fd\u6570\nA* operator &amp; ();\n// \u9ed8\u8ba4\u91cd\u8f7d\u53d6\u5740\u8fd0\u7b97\u7b26const\u51fd\u6570\nconst A* operator &amp; () const;\n// \u9ed8\u8ba4\u79fb\u52a8\u6784\u9020\u51fd\u6570\nA(A&amp;&amp;);\n// \u9ed8\u8ba4\u91cd\u8f7d\u79fb\u52a8\u8d4b\u503c\u64cd\u4f5c\u7b26\nA&amp; operator = (const A&amp;&amp;);\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#452-1","title":"4.5.2 1. \u58f0\u660e\u4e86\u4efb\u4f55\u6784\u9020\u51fd\u6570\uff0c\u7f16\u8bd1\u5668\u4e0d\u4f1a\u63d0\u4f9b\u9ed8\u8ba4\u6784\u9020\u51fd\u6570","text":"<ul> <li>\u5206\u6790\uff1a\u4ee5\u4e0b\u4ee3\u7801\u4e2d\u81ea\u5b9a\u4e49\u4e86 Box \u7684\u6784\u9020\uff0c\u5c06\u4f1a\u4f7f\u9ed8\u8ba4\u6784\u9020\u51fd\u6570 <code>Box(){}</code> \u5931\u6548, \u56e0\u6b64\u4ee3\u7801 <code>Box box3</code> \u5c06\u663e\u5f0f\u5931\u8d25\u3002</li> </ul> <pre><code>class Box {\npublic:\nBox(int width, int length, int height)\n: m_width(width), m_length(length), m_height(height){}\nprivate:\nint m_width;\nint m_length;\nint m_height;\n\n};\n\nint main(){\n\nBox box1(1, 2, 3);\nBox box2{ 2, 3, 4 };\nBox box3; // C2512: no appropriate default constructor available\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#453-init","title":"4.5.3 \u63d0\u4f9b Init \u6210\u5458\u51fd\u6570","text":"<ol> <li>\u5982\u679c\u7c7b\u4e2d\u9700\u8981\u52a0\u8f7d\u7c7b\u5916\u529f\u80fd\u6a21\u5757\uff0c\u9700\u8981\u5b9a\u4e49\u4e00\u4e2a Init \u6210\u5458\u51fd\u6570\uff0c\u5c06\u521d\u59cb\u5316\uff08\u52a0\u8f7d\uff09\u6b65\u9aa4\u5728 Init \u51fd\u6570\u5185\u5b9e\u73b0\uff0c\u66b4\u9732 public\uff0c\u5171\u4f7f\u7528\u65f6\u4e3b\u52a8\u8c03\u7528\uff0c\u8fd9\u6837\uff0c\u80fd\u6839\u636e Init \u51fd\u6570\u7684\u8fd4\u56de\u503c\u5224\u65ad\u7ed3\u679c\uff1b\u5982\u679c\u653e\u5728\u6784\u9020\u4e2d\uff0c\u6211\u4eec\u5e76\u4e0d\u80fd\u77e5\u9053\u8fd9\u4e9b\u6a21\u5757\u662f\u5426\u52a0\u8f7d\u6210\u529f\u3002</li> <li>\u6784\u9020\u51fd\u6570\u91cc\u9762\u53ea\u9488\u5bf9\u6210\u5458\u53d8\u91cf\u8d4b\u9ed8\u8ba4\u503c\uff08\u901a\u5e38\u4e3a 0 \u503c\u3001NULL \u503c\uff09\u3002</li> </ol>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#5","title":"5 \u7c7b\u578b\u8f6c\u6362","text":"<ul> <li><code>static_cast</code> \uff1a\u9002\u7528\u4e8e\u4f8b\u5982 short \u8f6c int\u3001int \u8f6c double \u6216 <code>void*</code> \u4e0e <code>T*</code> \u8f6c\u6362</li> <li><code>dynamic_cast</code> \uff1a\u9002\u7528\u4e8e\u542b\u7c7b\u7ee7\u627f\u5173\u7cfb\u7684\u6307\u9488\u5f15\u7528\u8f6c\u6362</li> <li><code>reinterpret_cast</code> \uff1a\u4ece\u4e8c\u8fdb\u5236\u4f4d\u91cd\u65b0\u89e3\u91ca\u7c7b\u578b\u7684\u8f6c\u6362\uff0c\u53ef\u4ee5\u5c06 2 \u4e2a\u6beb\u65e0\u5173\u8054\u7684\u4eba\u7c7b\u578b\u8fdb\u884c\u8f6c\u6362</li> <li><code>bit_cast</code> \uff1a\u4ece\u4e8c\u8fdb\u5236\u4f4d\u91cd\u65b0\u89e3\u91ca\u7c7b\u578b\u7684\u8f6c\u6362\uff0c\u4f46\u8f6c\u6362\u524d\u540e\u5bf9\u8c61\u90fd\u542b\u6709\u76f8\u540c\u7684 bit \u4f4d\uff0c\u5982\uff084 \u4f4d float \u53ef\u4ee5\u8f6c 4 \u4f4d int\uff0c\u4f46\u4e0d\u80fd\u8f6c 8 \u4f4d long\uff09</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;bit&gt;\nint main()\n{\nusing namespace std;\ndouble f = 1.23;\nint i_s = static_cast&lt;int&gt;(f);//i=1\n//reinterpret_cast\u53ea\u80fd\u8f6c&amp;\u6216*\nint i_r1 = reinterpret_cast&lt;int&amp;&gt;(f);//i_r1=2061584302\nint i_r2 = (*reinterpret_cast&lt;int*&gt;(&amp;f));//i_r2=2061584302\n\n//reinterpret_cast\u548cbit_cast\u6bd4\u8f83\nlong long l_r = reinterpret_cast&lt;long long&amp;&gt;(f); //l_r=4608218246714312622\nlong long l_b = bit_cast&lt;long long&gt;(f);//l_b=4608218246714312622\n//double d = bit_cast&lt;double&gt;(i_r1);//error,4\u4f4dint\u4e0d\u80fd\u8f6c8\u4f4ddouble\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#6","title":"6 \u521d\u59cb\u5316","text":"<ul> <li>\u53c2\u8003</li> <li>\u521d\u59cb\u5316\u8bed\u6cd5</li> <li><code>( \u8868\u8fbe\u5f0f\u5217\u8868 )</code> : \u62ec\u53f7\u4e2d\u7684\u4ee5\u9017\u53f7\u5206\u9694\u7684\u542b\u6709\u4efb\u610f\u8868\u8fbe\u5f0f\u548c\u82b1\u62ec\u53f7\u521d\u59cb\u5316\u5668\u5217\u8868\u7684\u5217\u8868</li> <li><code>= \u8868\u8fbe\u5f0f</code> : \u7b49\u53f7\u540e\u9762\u8ddf\u7740\u4e00\u4e2a\u8868\u8fbe\u5f0f</li> <li><code>{ \u521d\u59cb\u5316\u5668\u5217\u8868 }</code> : \u82b1\u62ec\u53f7\u521d\u59cb\u5316\u5668\u5217\u8868\uff1a\u4ee5\u9017\u53f7\u5206\u9694\u4e14\u53ef\u4ee5\u4e3a\u7a7a\u7684\u542b\u6709\u8868\u8fbe\u5f0f\u548c\u5176\u4ed6\u82b1\u62ec\u53f7\u521d\u59cb\u5316\u5668\u5217\u8868\u7684\u5217\u8868</li> <li>\u521d\u59cb\u5316\u7c7b\u578b\u6709\uff1a</li> <li>\u503c\u521d\u59cb\u5316\uff0c\u4f8b\u5982 <code>std::string s{};</code></li> <li>\u76f4\u63a5\u521d\u59cb\u5316\uff0c\u4f8b\u5982 <code>std::string s(\"hello\");</code></li> <li>\u590d\u5236\u521d\u59cb\u5316\uff0c\u4f8b\u5982 <code>std::string s = \"hello\";</code></li> <li>\u5217\u8868\u521d\u59cb\u5316\uff0c\u4f8b\u5982 <code>std::string s{'a', 'b', 'c'};</code></li> <li>\u805a\u5408\u521d\u59cb\u5316\uff0c\u4f8b\u5982 <code>char a[3] = {'a', 'b'};</code></li> <li>\u5f15\u7528\u521d\u59cb\u5316\uff0c\u4f8b\u5982 <code>char&amp; c = a[0];</code></li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#61-c03","title":"6.1 \u503c\u521d\u59cb\u5316 (C++03 \u8d77)","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#62","title":"6.2 \u76f4\u63a5\u521d\u59cb\u5316\u3001\u590d\u5236\u521d\u59cb\u5316","text":"<ul> <li>\u76f4\u63a5\u521d\u59cb\u5316\u8bed\u6cd5\uff1a</li> </ul> <pre><code>T \u5bf9\u8c61 ( \u5b9e\u53c2\u5217\u8868 );\nT \u5bf9\u8c61 { \u5b9e\u53c2\u5217\u8868 };      (C++11 \u8d77)\nT ( \u5b9e\u53c2\u5217\u8868 )\nstatic_cast&lt; T &gt;( \u5176\u4ed6\u5bf9\u8c61 )\nnew T(\u5b9e\u53c2\u5217\u8868)\n\u7c7b::\u7c7b() : \u6210\u5458(\u5b9e\u53c2\u5217\u8868) { ... }\n[\u5b9e\u53c2](){ ... }       (C++11 \u8d77)\n</code></pre> <ul> <li>\u590d\u5236\u521d\u59cb\u5316\u8bed\u6cd5\uff1a</li> </ul> <pre><code>\u76ee\u6807\u7c7b\u578b \u5bf9\u8c61 = \u5176\u4ed6\u5bf9\u8c61; \u76ee\u6807\u7c7b\u578b \u5bf9\u8c61 = {\u5176\u4ed6\u5bf9\u8c61} ;  (C++11 \u524d)\n\u51fd\u6570(\u5176\u4ed6\u5bf9\u8c61)\nreturn \u5176\u4ed6\u5bf9\u8c61;\nthrow \u5bf9\u8c61;\ncatch (\u76ee\u6807\u7c7b\u578b \u5bf9\u8c61)\n\u76ee\u6807\u7c7b\u578b \u6570\u7ec4[\u5143\u7d20\u4e2a\u6570] = {\u5176\u4ed6\u5bf9\u8c61\u5e8f\u5217};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#63","title":"6.3 \u5217\u8868\u521d\u59cb\u5316","text":"<ul> <li>\u5b9a\u4e49\uff1a\u4ece <code>{}</code> \u5217\u8868\u521d\u59cb\u5316\u5bf9\u8c61</li> <li>\u76f4\u63a5\u5217\u8868\u521d\u59cb\u5316</li> </ul> <pre><code>T \u5bf9\u8c61 { \u5b9e\u53c21, \u5b9e\u53c22, ... }; (1) \nT { \u5b9e\u53c21, \u5b9e\u53c22, ... } (2) \nnew T { \u5b9e\u53c21, \u5b9e\u53c22, ... } (3) \n\u7c7b { T \u6210\u5458 { \u5b9e\u53c21, \u5b9e\u53c22, ... }; };  (4) \n\u7c7b::\u7c7b() : \u6210\u5458{\u5b9e\u53c21, \u5b9e\u53c22, ...} {... (5) \n</code></pre> <ul> <li>\u590d\u5236\u5217\u8868\u521d\u59cb\u5316</li> </ul> <pre><code>T \u5bf9\u8c61 = {\u5b9e\u53c21, \u5b9e\u53c22, ...}; (6) \u51fd\u6570( { \u5b9e\u53c21, \u5b9e\u53c22, ... } ) (7) return { \u5b9e\u53c21, \u5b9e\u53c22, ... } ;  (8) \u5bf9\u8c61[ { \u5b9e\u53c21, \u5b9e\u53c22, ... } ] (9) \u5bf9\u8c61 = { \u5b9e\u53c21, \u5b9e\u53c22, ... }  (10)    U( { \u5b9e\u53c21, \u5b9e\u53c22, ... } )  (11)    \u7c7b { T \u6210\u5458 = { \u5b9e\u53c21, \u5b9e\u53c22, ... }; };    (12)    </code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#64","title":"6.4 \u805a\u5408\u521d\u59cb\u5316","text":"<ul> <li>\u5b9a\u4e49\uff1a\u805a\u5408\u521d\u59cb\u5316\u5bf9\u805a\u5408\u4f53\u8fdb\u884c\u521d\u59cb\u5316</li> <li>\u8bed\u6cd5</li> </ul> <pre><code>T \u5bf9\u8c61 = {\u5b9e\u53c21, \u5b9e\u53c22, ...}; (1) T \u5bf9\u8c61 {\u5b9e\u53c21, \u5b9e\u53c22, ... };  (2) (C++11 \u8d77)\nT \u5bf9\u8c61 = { .\u6307\u6d3e\u7b26 = \u5b9e\u53c21 , .\u6307\u6d3e\u7b26 { \u5b9e\u53c22 } ... };   (3) (C++20 \u8d77)\nT \u5bf9\u8c61 { .\u6307\u6d3e\u7b26 = \u5b9e\u53c21 , .\u6307\u6d3e\u7b26 { \u5b9e\u53c22 } ... }; (4) (C++20 \u8d77)\nT \u5bf9\u8c61 (\u5b9e\u53c21, \u5b9e\u53c22, ...);   (5) (C++20 \u8d77)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#65","title":"6.5 \u9759\u6001\u521d\u59cb\u5316\u548c\u52a8\u6001\u521d\u59cb\u5316","text":"<ul> <li>\u53c2\u8003</li> <li>\u9759\u6001\u521d\u59cb\u5316\uff0c\u9002\u7528\u4e8e\u9759\u6001\u5b58\u50a8\u671f\u7684\u53d8\u91cf\uff0c\u5728 main \u51fd\u6570\u4e4b\u524d\u5c31\u521d\u59cb\u5316\u4e86</li> <li>\u52a8\u6001\u521d\u59cb\u5316\uff1a\u5728\u8fd0\u884c\u65f6\u521d\u59cb\u5316\u3002\uff08\u9759\u6001\u521d\u59cb\u5316\u4e4b\u5916\u7684\u5168\u90e8\u90fd\u662f\u52a8\u6001\u521d\u59cb\u5316\uff09</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#7","title":"7 \u79fb\u52a8\u8bed\u4e49","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#71","title":"7.1 \u7c7b\u79fb\u52a8\u8bed\u4e49","text":"<ul> <li>\u6761\u4ef6\uff1a</li> <li>\u5b9e\u73b0\u79fb\u52a8\u6784\u9020</li> <li>\u91cd\u8f7d\u79fb\u52a8\u8d4b\u503c\u8fd0\u7b97\u7b26</li> <li>\u793a\u4f8b</li> </ul> <pre><code>template&lt;class T&gt;\nclass A\n{\npublic:\nA() = default;\n//1.1\u62f7\u8d1d\u6784\u9020\u51fd\u6570\uff0c\u67092\u79cd\u65b9\u5f0f\uff0c\u540c\u4e00\u7c7b\u4e2d\u53ea\u80fd\u5b58\u5728\u4e00\u79cd\nA(const A&amp; val) {//\u65b9\u5f0f\u4e00\ncout &lt;&lt; \"\u62f7\u8d1d\u6784\u9020: A(const A&amp; val)\" &lt;&lt; endl;\n}\n//A(const A&lt;T&gt;&amp; val) {//\u65b9\u5f0f\u4e8c\n//    cout &lt;&lt; \"\u62f7\u8d1d\u6784\u9020: A(const A&lt;T&gt;&amp; val)\" &lt;&lt; endl;\n//}\n\n//1.2\u6a21\u677f\u62f7\u8d1d\u6784\u9020\u51fd\u6570\ntemplate&lt;class T1&gt;\nA(const A&lt;T1&gt;&amp; val) {\ncout &lt;&lt; \"\u6a21\u677f\u62f7\u8d1d\u6784\u9020: A(const A&lt;T1&gt;&amp; val)\" &lt;&lt; endl;\n}\n\n//2.1\u91cd\u8f7d\u8d4b\u503c\u8fd0\u7b97\u7b26\uff0c\u67094\u79cd\u65b9\u5f0f\uff0c\u540c\u4e00\u7c7b\u4e2d\u53ea\u80fd\u5b58\u5728\u4e00\u79cd\nA&amp; operator =(const A&amp; val) {//\u65b9\u5f0f\u4e00\ncout &lt;&lt; \"\u91cd\u8f7d\u8d4b\u503c\u8fd0\u7b97\u7b26: A operator =(const A&amp; val)\" &lt;&lt; endl;\nreturn *this;\n}\n//A&amp; operator =(const A&lt;T&gt;&amp; val) {//\u65b9\u5f0f\u4e8c\n//    cout &lt;&lt; \"\u91cd\u8f7d\u8d4b\u503c\u8fd0\u7b97\u7b26: A&amp; operator =(const A&lt;T&gt;&amp; val)\" &lt;&lt; endl;\n//    return *this;\n//}\n//A&lt;T&gt;&amp; operator =(const A&amp; val) {//\u65b9\u5f0f\u4e09\n//    cout &lt;&lt; \"\u91cd\u8f7d\u8d4b\u503c\u8fd0\u7b97\u7b26:  A&lt;T&gt;&amp; operator =(const A&amp; val)\" &lt;&lt; endl;\n//    return *this;\n//}\n//A&lt;T&gt;&amp; operator =(const A&lt;T&gt;&amp; val) {//\u65b9\u5f0f\u56db\n//    cout &lt;&lt; \"\u91cd\u8f7d\u8d4b\u503c\u8fd0\u7b97\u7b26:  A&lt;T&gt;&amp; operator =(const A&lt;T&gt;&amp; val)\" &lt;&lt; endl;\n//    return *this;\n//}\n\n//2.2\u6a21\u677f\u91cd\u8f7d\u8d4b\u503c\u8fd0\u7b97\u7b26\ntemplate&lt;class T1&gt;\nA&lt;T&gt;&amp; operator =(const A&lt;T1&gt;&amp; val) {\ncout &lt;&lt; \"\u6a21\u677f\u91cd\u8f7d\u8d4b\u503c\u8fd0\u7b97\u7b26:  A&lt;T&gt;&amp; operator =(const A&lt;T1&gt;&amp; val)\" &lt;&lt; endl;\nreturn *this;\n}\n\n//3.1\u79fb\u52a8\u62f7\u8d1d\u6784\u9020\u51fd\u6570\uff0c\u67092\u79cd\u65b9\u5f0f\uff0c\u540c\u4e00\u7c7b\u4e2d\u53ea\u80fd\u5b58\u5728\u4e00\u79cd\nA(A&amp;&amp; val) {//\u65b9\u5f0f\u4e00\ncout &lt;&lt; \"\u79fb\u52a8\u62f7\u8d1d\u6784\u9020: A(A&amp;&amp; val)\" &lt;&lt; endl;\n}\n//A(A&lt;T&gt;&amp;&amp; val) {//\u65b9\u5f0f\u4e8c\n//    cout &lt;&lt; \"\u79fb\u52a8\u62f7\u8d1d\u6784\u9020: A(A&lt;T&gt;&amp;&amp; val)\" &lt;&lt; endl;\n//}\n\n//3.2 \u6a21\u677f\u79fb\u52a8\u62f7\u8d1d\u6784\u9020\u51fd\u6570\ntemplate&lt;class T1&gt;\nA(A&lt;T1&gt;&amp;&amp; val) {\ncout &lt;&lt; \"\u6a21\u677f\u79fb\u52a8\u62f7\u8d1d\u6784\u9020: A(A&lt;T1&gt;&amp;&amp; val)\" &lt;&lt; endl;\n}\n\n//4.1\u79fb\u52a8\u8d4b\u503c\u8fd0\u7b97\u7b26\uff0c\u67094\u79cd\u65b9\u5f0f\uff0c\u540c\u4e00\u7c7b\u4e2d\u53ea\u80fd\u5b58\u5728\u4e00\u79cd\nA&amp; operator =(A&amp;&amp; val) {\ncout &lt;&lt; \"\u79fb\u52a8\u8d4b\u503c\u8fd0\u7b97\u7b26: A&amp; operator =(A&amp;&amp; val)\" &lt;&lt; endl;\nreturn *this;\n}\n/*A&lt;T&gt;&amp; operator =(A&amp;&amp; val) {\n        cout &lt;&lt; \"\u79fb\u52a8\u8d4b\u503c\u8fd0\u7b97\u7b26: A&amp; operator =(A&amp;&amp; val)\" &lt;&lt; endl;\n        return *this;\n    }\n    A&amp; operator =(A&lt;T&gt;&amp;&amp; val) {\n        cout &lt;&lt; \"\u79fb\u52a8\u8d4b\u503c\u8fd0\u7b97\u7b26: A&amp; operator =(A&amp;&amp; val)\" &lt;&lt; endl;\n        return *this;\n    }\n    A&lt;T&gt;&amp; operator =(A&lt;T&gt;&amp;&amp; val) {\n        cout &lt;&lt; \"\u79fb\u52a8\u8d4b\u503c\u8fd0\u7b97\u7b26: A&amp; operator =(A&amp;&amp; val)\" &lt;&lt; endl;\n        return *this;\n    }*/\n\n//\u6a21\u677f\u79fb\u52a8\u8d4b\u503c\u8fd0\u7b97\u7b26\ntemplate&lt;class T1&gt;\nA&amp; operator =(A&lt;T1&gt;&amp;&amp; val) {\ncout &lt;&lt; \"\u6a21\u677f\u79fb\u52a8\u8d4b\u503c\u8fd0\u7b97\u7b26: A&amp; operator =(A&lt;T1&gt;&amp;&amp; val)\" &lt;&lt; endl;\nreturn *this;\n}\nprivate:\nvector&lt;T&gt; mv_value;\n};\n\nint main()\n{\nA&lt;int&gt; ai1;\nA&lt;int&gt; ai2(ai1);\nai1 = ai2;\nA&lt;double&gt; ad1(ai1);\nA&lt;double&gt; ad2 = ai1;\nad2 = ai1;\nA&lt;int&gt; ai3(std::move(ai1));//ai1\u4e0d\u518d\u4f7f\u7528   \nA&lt;double&gt; ad3(std::move(ai3));//ai3\u4e0d\u518d\u4f7f\u7528\nai3 = std::move(ai2);//ai2\u4e0d\u518d\u4f7f\u7528\nA&lt;int&gt; ai4;\nad3 = std::move(ai4);//ai4\u4e0d\u518d\u4f7f\u7528\nad3 = std::move(ad1);//ad1\u4e0d\u518d\u4f7f\u7528\n}\n//\u63a7\u5236\u53f0\u8f93\u51fa\u7ed3\u679c\uff1a\n\u62f7\u8d1d\u6784\u9020: A(const A&amp; val)\n\u91cd\u8f7d\u8d4b\u503c\u8fd0\u7b97\u7b26: A operator =(conSst A&amp; val)\n\u6a21\u677f\u62f7\u8d1d\u6784\u9020: A(const A&lt;T1&gt;&amp; val)\n\u6a21\u677f\u62f7\u8d1d\u6784\u9020: A(const A&lt;T1&gt;&amp; val)\n\u6a21\u677f\u91cd\u8f7d\u8d4b\u503c\u8fd0\u7b97\u7b26:  A&lt;T&gt;&amp; operator =(const A&lt;T1&gt;&amp; val)\n\u79fb\u52a8\u62f7\u8d1d\u6784\u9020: A(A&amp;&amp; val)\n\u6a21\u677f\u79fb\u52a8\u62f7\u8d1d\u6784\u9020: A(A&lt;T1&gt;&amp;&amp; val)\n\u79fb\u52a8\u8d4b\u503c\u8fd0\u7b97\u7b26: A&amp; operator =(A&amp;&amp; val)\n\u6a21\u677f\u79fb\u52a8\u8d4b\u503c\u8fd0\u7b97\u7b26: A&amp; operator =(A&lt;T1&gt;&amp;&amp; val)\n\u79fb\u52a8\u8d4b\u503c\u8fd0\u7b97\u7b26: A&amp; operator =(A&amp;&amp; val)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#72","title":"7.2 \u5de6\u503c\u5f15\u7528\u548c\u53f3\u503c\u5f15\u7528\u8c03\u7528\u89c4\u5219","text":"<ul> <li>\u975e\u6a21\u677f\u51fd\u6570</li> <li>\u5f53\u4ec5\u5b9e\u73b0 <code>T&amp;</code> \u65f6\uff0c\u53ea\u63a5\u53d7\u5de6\u503c</li> <li>\u5f53\u53ea\u5b9e\u73b0 <code>T&amp;&amp;</code> \u65f6, \u53ea\u63a5\u53d7\u53f3\u503c</li> <li>\u5f53\u4ec5\u5b9e\u73b0 <code>const T&amp;</code> \u65f6\uff0c\u53ef\u63a5\u53d7\u5de6\u503c\u3001\u5e38\u5de6\u503c\u548c\u53f3\u503c</li> <li>\u5f53\u540c\u65f6\u5b9e\u73b0 <code>T&amp;</code> \u548c <code>T&amp;&amp;</code> \u548c <code>const T&amp;</code> \u65f6\uff0c<code>T&amp;</code> \u4f18\u5148\u63a5\u53d7\u5de6\u503c\uff0c<code>const T&amp;</code> \u4f18\u5148\u63a5\u53d7\u5e38\u5de6\u503c\uff0c<code>T&amp;&amp;</code> \u4f18\u5148\u63a5\u53d7\u53f3\u503c</li> <li>\u6a21\u677f\u51fd\u6570</li> <li>\u5f53\u4ec5\u5b9e\u73b0 <code>T&amp;</code> \u65f6\uff0c\u53ea\u63a5\u53d7\u5de6\u503c</li> <li>\u5f53\u53ea\u5b9e\u73b0 <code>T&amp;&amp;</code> \u65f6, \u53ef\u63a5\u53d7\u5de6\u503c\u3001\u5e38\u5de6\u503c\u548c\u53f3\u503c</li> <li>\u5f53\u4ec5\u5b9e\u73b0 <code>const T&amp;</code> \u65f6\uff0c\u53ef\u63a5\u53d7\u5de6\u503c\u3001\u5e38\u5de6\u503c\u548c\u53f3\u503c</li> <li>\u5f53\u540c\u65f6\u5b9e\u73b0 <code>T&amp;</code> \u548c <code>T&amp;&amp;</code> \u548c <code>const T&amp;</code> \u65f6\uff0c<code>T&amp;</code> \u4f18\u5148\u63a5\u53d7\u5de6\u503c\uff0c<code>const T&amp;</code> \u4f18\u5148\u63a5\u53d7\u5e38\u5de6\u503c\uff0c<code>T&amp;&amp;</code> \u63a5\u53d7\u53f3\u503c</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#if 0\ntemplate&lt;class T&gt;\nvoid Test(const T&amp;) {\n    cout &lt;&lt; \"\u6a21\u677f: const T&amp;\" &lt;&lt; endl;\n}\ntemplate&lt;class T&gt;\nvoid Test(T&amp;){\n    cout &lt;&lt; \"\u6a21\u677f: T&amp;\" &lt;&lt; endl;\n}\ntemplate&lt;class T&gt;\nvoid Test(T&amp;&amp;) {\n    cout &lt;&lt; \"\u6a21\u677f: T&amp;&amp;\" &lt;&lt; endl;\n}\n#endif\n#if 1\nvoid Test(int&amp;&amp;){\ncout &lt;&lt; \"int&amp;&amp;\" &lt;&lt; endl;\n}\nvoid Test(const int&amp;) {\ncout &lt;&lt; \"const int&amp;\" &lt;&lt; endl;\n}\nvoid Test(int&amp;) {\ncout &lt;&lt; \"int&amp;\" &lt;&lt; endl;\n}\n#endif\nint main()\n{\nconst int t1 = 1;\nint t2 = 2;\nTest(t1);\nTest(t2);\nTest(2);\nTest(std::move(t2));\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#8","title":"8 \u53ef\u53d8\u53c2\u6570","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#81","title":"8.1 \u53ef\u53d8\u53c2\u6570\u666e\u901a\u51fd\u6570","text":"<ul> <li>\u53d8\u53c2\u51fd\u6570\u58f0\u660e\u5f62\u5f0f\uff1a<code>return_type function_name(parameter_type format, ...);</code> \u6216 <code>return_type function_name(parameter_type format ...);</code>, \u9017\u53f7\u53ef\u7701\u7565\u3002</li> <li>\u53d8\u53c2\u51fd\u6570\u5217\u8868\u4e0d\u80fd\u662f\u5f15\u7528\u7c7b\u578b</li> <li>\u53d8\u53c2\u51fd\u6570\u53c2\u6570\u5217\u8868\u4e2d\u7684\u7c7b\u578b\u5e76\u4e0d\u4ee3\u8868\u6240\u6709\u53c2\u6570\u7c7b\u578b\uff0c\u53ea\u9650\u5236\u7b2c\u4e00\u4e2a\u53c2\u6570\u7c7b\u578b\u3002</li> <li>\u53d8\u53c2\u51fd\u6570\u53c2\u6570\u5217\u8868\u4e2d\u7ed9\u51fa\u7684\u7c7b\u578b\u53ef\u4ee5\u662f\u4efb\u610f\u7c7b\u578b\uff0c\u4f46\u5fc5\u987b\u80fd\u591f\u63d0\u4f9b\u8db3\u591f\u4fe1\u606f\u8ba9\u5c55\u5f00\u53c2\u6570\u5305\u65f6\u77e5\u9053\u53c2\u6570\u7c7b\u578b\u4ee5\u53ca\u53c2\u6570\u4e2a\u6570\u3002</li> </ul> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdarg.h&gt;\n//\u8fd9\u4e2anum\u4f5c\u7528\u662f\u63d0\u4f9b\u51fa\u53c2\u6570\u4e2a\u6570\u7684\u4f5c\u7528\uff0c\u4f46\u65e0\u6cd5\u63d0\u4f9b\u53c2\u6570\u7c7b\u578b\u4f5c\u7528\ndouble average(int num,...)\n{\n\nva_list valist;\ndouble sum = 0.0;\nint i;\n\n/* \u4e3a num \u4e2a\u53c2\u6570\u521d\u59cb\u5316 valist */\nva_start(valist, num);\n\n/* \u8bbf\u95ee\u6240\u6709\u8d4b\u7ed9 valist \u7684\u53c2\u6570 \u4e0b\u4e00\u4e2a\u53c2\u6570\u7c7b\u578b\u662fint\u578b */\nfor (i = 0; i &lt; num; i++)\n{\nsum += va_arg(valist, int);\n}\n/* \u7ed3\u675f\u5e76\u6e05\u7406\u4e3a valist \u4fdd\u7559\u7684\u5185\u5b58 */\nva_end(valist);\n\nreturn sum/num;\n}\n//\u8fd9\u4e2afmt\u80fd\u63d0\u4f9b\u53c2\u6570\u4e2a\u6570\u8fd8\u80fd\u63d0\u4f9b\u53c2\u6570\u7c7b\u578b\uff08fmt\u5177\u6709\u4e00\u5b9a\u89c4\u5219\uff09\nvoid simple_printf(const char* fmt...) // C \u98ce\u683c \"const char* fmt, ...\" \u4ea6\u5408\u6cd5\n{\nva_list args;\nva_start(args, fmt);\n\nwhile (*fmt != '\\0') {\nif (*fmt == 'd') {\nint i = va_arg(args, int);\nstd::cout &lt;&lt; i &lt;&lt; '\\n';\n} else if (*fmt == 'c') {\n// \u6ce8\u610f\u81ea\u52a8\u8f6c\u6362\u5230\u6574\u6570\u7c7b\u578b\nint c = va_arg(args, int);\nstd::cout &lt;&lt; static_cast&lt;char&gt;(c) &lt;&lt; '\\n';\n} else if (*fmt == 'f') {\ndouble d = va_arg(args, double);\nstd::cout &lt;&lt; d &lt;&lt; '\\n';\n}\n++fmt;\n}\n\nva_end(args);\n}\n\nint main()\n{\nprintf(\"Average of 2, 3, 4, 5 = %f\\n\", average(4, 2,3,4,5));\nprintf(\"Average of 5, 10, 15 = %f\\n\", average(3, 5,10,15));\nsimple_printf(\"dcff\", 3, 'a', 1.999, 42.5); }\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#82","title":"8.2 \u53ef\u53d8\u53c2\u6570\u6a21\u677f\u51fd\u6570","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#821","title":"8.2.1 \u53ef\u53d8\u6a21\u677f\u51fd\u6570","text":"<ul> <li>\u4e0b\u9762\u662f\u4e00\u4e2a\u6700\u7b80\u5355\u7684\u53d8\u53c2\u6a21\u677f\u51fd\u6570\uff0c\u5229\u7528 <code>sizeof...</code> \u8fd0\u7b97\u7b26\u8fd4\u56de\u53c2\u6570\u4e2a\u6570\u3002</li> </ul> <pre><code>template&lt;typename ...T&gt;\nsize_t count(T...args)\n{\nreturn sizeof...(args);\n}\nint main()\n{\nauto num=count(1,\"2\",false);//num==3\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#822","title":"8.2.2 \u9012\u5f52\u5c55\u5f00\u53c2\u6570\u5305","text":"<ul> <li>\u9012\u5f52\u5c55\u5f00\u53c2\u6570\u5305\u7684\u91cd\u70b9\u662f\u63d0\u4f9b\u4e00\u4e2a\u9012\u5f52\u7ec8\u6b62\u51fd\u6570\u3002</li> </ul> <pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\ntemplate &lt;typename T&gt;\nvoid fun(const T&amp; t) {\nconst std::type_info&amp; tpif = typeid(T);\ncout &lt;&lt; \"value:\" &lt;&lt; t &lt;&lt; \"\u7684\u7c7b\u578b\u662f\" &lt;&lt; tpif.name() &lt;&lt; '\\n';\n}\ntemplate &lt;typename T, typename ... Args&gt;\nvoid fun(const T&amp; t, Args ... args) {\nconst std::type_info&amp; tpif = typeid(T);\ncout &lt;&lt; \"value:\" &lt;&lt; t &lt;&lt; \"\u7684\u7c7b\u578b\u662f\" &lt;&lt; tpif.name() &lt;&lt; '\\n';\nfun(args...);//\u9012\u5f52\u89e3\u51b3\uff0c\u5229\u7528\u6a21\u677f\u63a8\u5bfc\u673a\u5236\uff0c\u6bcf\u6b21\u53d6\u51fa\u7b2c\u4e00\u4e2a\uff0c\u7f29\u77ed\u53c2\u6570\u5305\u7684\u5927\u5c0f\u3002\n}\nint main() {\nfun(\"1\", false, 2);\n}\n//\u8f93\u51fa\u7ed3\u679c\n//value:1\u7684\u7c7b\u578b\u662fchar [2]\n//value:0\u7684\u7c7b\u578b\u662fbool\n//value:2\u7684\u7c7b\u578b\u662fint\n</code></pre> <ul> <li>\u9012\u5f52\u7ec8\u6b62\u51fd\u6570\u53c2\u6570\u4e2a\u6570\u6ca1\u6709\u9650\u5236\uff0c\u53ef\u4ee5\u65e0\u53c2\uff0c\u4e5f\u53ef\u4ee5\u591a\u53c2\u3002</li> </ul> <p>\u6ce8\u610f\uff1a\u5efa\u8bae\u53c2\u6570\u8d8a\u5c11\u8d8a\u597d\uff0c\u5f53\u8bbe\u8ba1 0 \u53c2\u65f6\uff0c\u8bbe\u8ba1\u7684\u53d8\u53c2\u51fd\u6570\u624d\u53ef\u4ee5\u5339\u914d 0 \u53c2\u8f93\u5165\uff0c\u7ec8\u6b62\u51fd\u6570\u53c2\u6570\u4e3a n \u4e2a\uff0c\u4ee3\u8868\u4f60\u51fd\u6570\u8f93\u5165\u7684\u53c2\u6570\u6700\u5c11\u4e3a n \u4e2a</p> <pre><code>//0\u53c2\u5b9e\u73b0\u9012\u5f52\u7ec8\u6b62\u51fd\u6570\nvoid fun() {\n\n}\n//\u591a\u53c2\u5b9e\u73b0\u9012\u5f52\u7ec8\u6b62\u51fd\u6570\ntemplate &lt;typename T1,typename T2&gt;\nvoid fun(const T1&amp; t1,const T2&amp; t2) {\nconst std::type_info&amp; tpif1 = typeid(T1);\nconst std::type_info&amp; tpif2 = typeid(T2);\ncout &lt;&lt; \"value:\" &lt;&lt; t1 &lt;&lt; \"\u7684\u7c7b\u578b\u662f\" &lt;&lt; tpif1.name() &lt;&lt; '\\n';\ncout &lt;&lt; \"value:\" &lt;&lt; t2 &lt;&lt; \"\u7684\u7c7b\u578b\u662f\" &lt;&lt; tpif2.name() &lt;&lt; '\\n';\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#823","title":"8.2.3 \u9017\u53f7\u8868\u8fbe\u5f0f\u5c55\u5f00\u53c2\u6570\u5305","text":"<pre><code>#include&lt;iostream&gt;\nusing namespace std;\nvoid print(T t)\n{\ncout &lt;&lt; t &lt;&lt; endl;\n}\n\ntemplate &lt;class ...Args&gt;\nvoid expand(Args... args)\n{\nbool temp[] = { (print(args), true)... };\n}\nint main()\n{\nexpand(1,2,\"1\");\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#824","title":"8.2.4 \u6298\u53e0\u8868\u8fbe\u5f0f\u5c55\u5f00\u53c2\u6570\u5305","text":"<ul> <li>c++17 \u6298\u53e0\u8868\u8fbe\u5f0f\u6bd4\u9017\u53f7\u8868\u8fbe\u5f0f\u65b9\u5f0f\u66f4\u597d</li> </ul> <pre><code>#include&lt;iostream&gt;\n#include&lt;type_traits&gt;\nusing namespace std;\n//\u6298\u53e0\u8868\u8fbe\u5f0f \ntemplate&lt;typename ...T&gt;\nrequires (is_arithmetic_v&lt;T&gt;&amp;&amp;...)\nauto sum(T...args)-&gt;decltype((... + args))\n{\nreturn (... + args);\n}\n\n//\u4e0d\u5efa\u8bae\u9017\u53f7\u8868\u8fbe\u5f0f\nvoid sum_(double&amp; all, const double val2)\n{\nall += val2;\n}\n//c++14 \u5f00\u59cbauto\u63a8\u5bfc\u8fd4\u56de\u7c7b\u578b\u4e0d\u518d\u9700\u8981\u5c3e\u968f\u58f0\u660e\ntemplate&lt;typename T&gt;\nconcept arithmetic = is_arithmetic_v&lt;T&gt;;\ntemplate&lt;arithmetic...T&gt;\nauto sum1(T...args)\n{\ndouble val = 0.0;\nbool temp[] = { (sum_(val, args), true)...};\nreturn val;\n}\nint main() {\nauto val = sum(1, 2.2); val\u88ab\u63a8\u5bfc\u4e3adouble\nauto val1 = sum1(1, 2.3);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#83","title":"8.3 \u53ef\u53d8\u53c2\u6570\u6a21\u677f\u7c7b","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#831","title":"8.3.1 \u9012\u5f52\u5c55\u5f00\u53c2\u6570\u5305","text":"<ul> <li>\u9012\u5f52\u5c55\u5f00\u4e00\u822c\u9700\u8981 3 \u4e2a\u7c7b\uff0c\u4e00\u4e2a\u524d\u5411\u58f0\u660e\uff0c\u4e00\u4e2a\u9012\u5f52\u7ec8\u6b62\uff0c\u4e00\u4e2a\u57fa\u672c\u5b9a\u4e49</li> </ul> <pre><code>//\u524d\u5411\u58f0\u660e\ntemplate&lt;typename... Args&gt;\nstruct Sum;\n\n//\u57fa\u672c\u5b9a\u4e49\ntemplate&lt;typename First, typename... Rest&gt;\nstruct Sum&lt;First, Rest...&gt;\n{\nenum { value = Sum&lt;First&gt;::value + Sum&lt;Rest...&gt;::value };\n};\n\n//\u9012\u5f52\u7ec8\u6b62\ntemplate&lt;typename Last&gt;\nstruct Sum&lt;Last&gt;\n{\nenum { value = sizeof (Last) };\n};\nint main()\n{\nauto sz=Sum&lt;int, float&gt;::value;//sz==8\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#9","title":"9 \u5b58\u50a8\u6301\u7eed\u6027","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#91","title":"9.1 \u81ea\u52a8\u5b58\u50a8\u6301\u7eed\u6027","text":"<ul> <li>\u51fd\u6570\u7c7b\u5b9a\u4e49\u7684\u5c40\u90e8\u53d8\u91cf</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#92","title":"9.2 \u9759\u6001\u5b58\u50a8\u6301\u7eed\u6027","text":"<ul> <li>\u5728\u51fd\u6570\u5916\u5b9a\u4e49\u7684\u53d8\u91cf</li> <li>static \u4fee\u9970\u7684\u53d8\u91cf</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#93","title":"9.3 \u7ebf\u7a0b\u5b58\u50a8\u6301\u7eed\u6027","text":"<ul> <li>thread_local \u4fee\u9970\u7684\u53d8\u91cf</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#94","title":"9.4 \u52a8\u6001\u5b58\u50a8\u6301\u7eed\u6027","text":"<ul> <li>new \u58f0\u660e\u7684\u53d8\u91cf</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#10","title":"10 \u94fe\u63a5\u6027","text":"<ul> <li>\u793a\u4f8b</li> </ul> <pre><code>static int sta_i;//\u9759\u6001\u5b58\u50a8\u671f\uff0c\u5185\u90e8\u94fe\u63a5\u6027\nint ext_i;//\u9759\u6001\u5b58\u50a8\u671f\uff0c\u5916\u90e8\u94fe\u63a5\u6027\nvoid fun()\n{\nstatic int l_a;//\u9759\u6001\u5b58\u50a8\u671f\uff0c\u65e0\u94fe\u63a5\u6027\nint l_b;\n}\nint main()\n{\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#101","title":"10.1 \u5916\u90e8\u94fe\u63a5\u6027","text":"<ul> <li>\u7279\u70b9\uff1a\u53ef\u88ab\u6240\u6709\u6587\u4ef6\u8bbf\u95ee</li> <li>\u793a\u4f8b\uff1a</li> <li>\u5168\u5c40\u53d8\u91cf</li> <li>\u5168\u5c40\u51fd\u6570</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#102","title":"10.2 \u5185\u90e8\u94fe\u63a5\u6027","text":"<ul> <li>\u7279\u70b9\uff1a\u53ea\u80fd\u5728\u672c\u6587\u4ef6\u88ab\u8bbf\u95ee</li> <li>\u793a\u4f8b\uff1a</li> <li><code>static</code> \u4fee\u9970\u7684\u53d8\u91cf\u3001\u51fd\u6570</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#103","title":"10.3 \u65e0\u94fe\u63a5\u6027","text":"<ul> <li>\u7279\u70b9: \u53ea\u5728\u672c\u51fd\u6570\u4f5c\u7528\u57df\u88ab\u8bbf\u95ee</li> <li>\u793a\u4f8b\uff1a</li> <li><code>static</code> \u4fee\u9970\u7684\u5c40\u90e8\u53d8\u91cf</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B/#104","title":"10.4 \u51fd\u6570\u4e0e\u94fe\u63a5\u6027","text":"<ul> <li>\u5916\u90e8\u94fe\u63a5\u6027\u51fd\u6570\uff1a\u51fd\u6570\u9ed8\u8ba4\u94fe\u63a5\u6027\u662f\u5916\u90e8\u7684\uff0c\u53ef\u4ee5\u5728\u51fd\u6570\u58f0\u660e\u5904\u4f7f\u7528 <code>extern</code> \u4fee\u9970\uff08\u53ef\u9009\uff09\uff0c\u6307\u660e\u51fd\u6570\u5b9a\u4e49\u5728\u5176\u5b83\u5730\u65b9\uff0c\u5c31\u5982\u540c <code>extern</code> \u4fee\u9970\u7684\u53d8\u91cf\u4e00\u6837\u3002</li> <li>\u5185\u90e8\u94fe\u63a5\u6027\u51fd\u6570\uff1a\u5728\u51fd\u6570\u7684\u58f0\u660e\u548c\u5b9a\u4e49\u90fd\u4f7f\u7528 <code>static</code> \u4fee\u9970\uff0c\u8868\u660e\u51fd\u6570\u53ea\u80fd\u5728\u5f53\u524d\u6587\u4ef6\u88ab\u4f7f\u7528\uff0c\u4e0d\u80fd\u88ab\u5176\u5b83\u6587\u4ef6\u94fe\u63a5\u3002</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E7%94%A8API/","title":"C++\u5e38\u7528API","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E7%94%A8API/#1","title":"1 \u5b57\u7b26\u4e32\u64cd\u4f5c","text":"<ul> <li><code>strlen</code></li> <li>\u529f\u80fd\uff1a\u8fd4\u56de\u7ed9\u5b9a\u5b57\u7b26\u4e32\u7684\u957f\u5ea6</li> <li>\u5934\u6587\u4ef6\uff1a<code>&lt;string.h&gt;</code></li> <li>\u8bed\u6cd5\uff1a<code>size_t strlen( const char *str );</code></li> <li><code>strcpy</code></li> <li>\u529f\u80fd\uff1a\u590d\u5236\u4e00\u4e2a\u5b57\u7b26\u4e32\u7ed9\u53e6\u4e00\u4e2a</li> <li>\u5934\u6587\u4ef6\uff1a<code>&lt;string.h&gt;</code></li> <li>\u8bed\u6cd5\uff1a<code>char *strcpy( char *dest, const char *src );</code></li> <li><code>strncpy</code></li> <li>\u529f\u80fd\uff1a\u4ece\u4e00\u4e2a\u5b57\u7b26\u4e32\u590d\u5236\u4e00\u5b9a\u6570\u91cf\u7684\u5b57\u7b26\u5230\u53e6\u4e00\u4e2a</li> <li>\u5934\u6587\u4ef6\uff1a<code>&lt;string.h&gt;</code></li> <li>\u8bed\u6cd5\uff1a<code>char *strncpy( char *dest, const char *src, size_t count );</code></li> <li><code>strcat</code></li> <li>\u529f\u80fd\uff1a\u8fde\u63a5\u4e24\u4e2a\u5b57\u7b26\u4e32</li> <li>\u5934\u6587\u4ef6\uff1a<code>&lt;string.h&gt;</code></li> <li>\u8bed\u6cd5\uff1a<code>char *strcat( char *dest, const char *src );</code></li> <li><code>strcmp</code></li> <li>\u529f\u80fd\uff1a\u6bd4\u8f83\u4e24\u4e2a\u5b57\u7b26\u4e32</li> <li>\u5934\u6587\u4ef6\uff1a<code>&lt;string.h&gt;</code></li> <li>\u8bed\u6cd5\uff1a<code>int strcmp( const char *lhs, const char *rhs );</code></li> <li><code>strncmp</code></li> <li>\u529f\u80fd\uff1a\u6bd4\u8f83\u4e24\u4e2a\u5b57\u7b26\u4e32\u7684\u4e00\u5b9a\u6570\u91cf\u5b57\u7b26</li> <li>\u5934\u6587\u4ef6\uff1a<code>&lt;string.h&gt;</code></li> <li>\u8bed\u6cd5\uff1a<code>int strncmp( const char *lhs, const char *rhs, size_t count );</code></li> <li><code>strchr</code></li> <li>\u529f\u80fd\uff1a\u67e5\u627e\u5b57\u7b26\u7684\u9996\u6b21\u51fa\u73b0</li> <li>\u5934\u6587\u4ef6\uff1a<code>&lt;string.h&gt;</code></li> <li>\u8bed\u6cd5\uff1a<code>char *strchr( const char *str, int ch );</code></li> <li><code>strrchr</code></li> <li>\u529f\u80fd\uff1a\u67e5\u627e\u5b57\u7b26\u7684\u6700\u540e\u4e00\u6b21\u51fa\u73b0</li> <li>\u5934\u6587\u4ef6\uff1a<code>&lt;string.h&gt;</code></li> <li>\u8bed\u6cd5\uff1a<code>char *strrchr( const char *str, int ch );</code></li> <li><code>strspn</code></li> <li>\u529f\u80fd\uff1a\u8fd4\u56de\u7531\u53e6\u4e00\u4e2a\u5b57\u7b26\u4e32\u4e2d\u7684\u5b57\u7b26\u5206\u5272\u7684\u6700\u5927\u8d77\u59cb\u6bb5\u957f\u5ea6(\u7531src\u7ec4\u6210\u7684\u5b57\u7b26\u5728dest\u4e2d\u8fde\u7eed\u6700\u5927\u957f\u5ea6)</li> <li>\u5934\u6587\u4ef6\uff1a<code>&lt;string.h&gt;</code></li> <li>\u8bed\u6cd5\uff1a<code>size_t strspn( const char *dest, const char *src );</code></li> <li><code>strcspn</code></li> <li>\u529f\u80fd\uff1a\u8fd4\u56de\u53e6\u4e00\u4e2a\u5b57\u7b26\u4e32\u6240\u4e0d\u5177\u6709\u7684\u5b57\u7b26\u5206\u5272\u7684\u6700\u5927\u8d77\u59cb\u6bb5\u957f\u5ea6(\u7531\u4e0d\u542bsrc\u7ec4\u6210\u7684\u5b57\u7b26\u5728dest\u4e2d\u8fde\u7eed\u6700\u5927\u957f\u5ea6)</li> <li>\u5934\u6587\u4ef6\uff1a<code>&lt;string.h&gt;</code></li> <li>\u8bed\u6cd5\uff1a<code>size_t strcspn( const char *dest, const char *src );</code></li> <li><code>strpbrk</code></li> <li>\u529f\u80fd\uff1a\u67e5\u627e\u4e00\u4e2a\u5b57\u7b26\u4e32\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\u5b57\u7b26\u5728\u53e6\u4e00\u4e2a\u5b57\u7b26\u4e32\u4e2d\u7684\u9996\u4e2a\u4f4d\u7f6e</li> <li>\u5934\u6587\u4ef6\uff1a<code>&lt;string.h&gt;</code></li> <li>\u8bed\u6cd5\uff1a<code>char* strpbrk( const char* dest, const char* breakset );</code></li> <li><code>strstr</code></li> <li>\u529f\u80fd\uff1a\u67e5\u627e\u5b50\u4e32\u5b57\u7b26\u7684\u9996\u6b21\u51fa\u73b0</li> <li>\u5934\u6587\u4ef6\uff1a<code>&lt;string.h&gt;</code></li> <li>\u8bed\u6cd5\uff1a<code>char *strstr( const char* str, const char* substr );</code></li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E7%94%A8API/#2","title":"2 \u5b57\u7b26\u8f6c\u6362","text":"<ul> <li><code>atoi</code></li> <li>\u529f\u80fd\uff1a\u5c06\u5b57\u8282\u5b57\u7b26\u4e32\u8f6c\u6362\u6210\u6574\u6570\u503c</li> <li>\u5934\u6587\u4ef6\uff1a<code>&lt;stdlib.h&gt;</code></li> <li>\u8bed\u6cd5\uff1a<code>int atoi( const char *str );</code></li> <li><code>strtol</code></li> <li>\u529f\u80fd\uff1a\u5c06\u5b57\u8282\u5b57\u7b26\u4e32\u8f6c\u6362\u6210\u6574\u6570\u503c</li> <li>\u5934\u6587\u4ef6\uff1a<code>&lt;stdlib.h&gt;</code></li> <li>\u8bed\u6cd5\uff1a<code>long strtol( const char *str, char **str_end, int base );</code></li> <li><code>tolower</code></li> <li>\u529f\u80fd\uff1a\u5c06\u5b57\u7b26\u8f6c\u6362\u6210\u5c0f\u5199</li> <li>\u5934\u6587\u4ef6\uff1a<code>&lt;ctype.h&gt;</code></li> <li>\u8bed\u6cd5\uff1a<code>int tolower( int ch );</code></li> <li><code>toupper</code></li> <li>\u529f\u80fd\uff1a\u5c06\u5b57\u7b26\u8f6c\u6362\u6210\u5927\u5199</li> <li>\u5934\u6587\u4ef6\uff1a<code>&lt;ctype.h&gt;</code></li> <li>\u8bed\u6cd5\uff1a<code>int toupper( int ch );</code></li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E7%94%A8API/#3","title":"3 \u5185\u5b58\u64cd\u4f5c","text":"<ul> <li><code>memset</code></li> <li>\u529f\u80fd\uff1a\u4ee5\u5b57\u7b26\u586b\u5145\u7f13\u51b2\u533a</li> <li>\u5934\u6587\u4ef6\uff1a<code>&lt;string.h&gt;</code></li> <li>\u8bed\u6cd5\uff1a<code>void *memset( void *dest, int ch, size_t count );</code></li> <li><code>memcmp</code></li> <li>\u529f\u80fd\uff1a\u6bd4\u8f83\u4e24\u5757\u7f13\u51b2\u533a</li> <li>\u5934\u6587\u4ef6\uff1a<code>&lt;string.h&gt;</code></li> <li>\u8bed\u6cd5\uff1a<code>int memcmp( const void* lhs, const void* rhs, size_t count );</code></li> <li><code>memchr</code></li> <li>\u529f\u80fd\uff1a\u67e5\u627e\u5b57\u7b26</li> <li>\u5934\u6587\u4ef6\uff1a<code>&lt;string.h&gt;</code></li> <li>\u8bed\u6cd5\uff1a <code>void* memchr( const void* ptr, int ch, size_t count );</code></li> <li><code>memcpy</code></li> <li>\u529f\u80fd\uff1a\u5c06\u4e00\u4e2a\u7f13\u51b2\u533a\u590d\u5236\u5230\u53e6\u4e00\u4e2a</li> <li>\u5934\u6587\u4ef6\uff1a<code>&lt;string.h&gt;</code></li> <li>\u8bed\u6cd5\uff1a<code>void* memcpy( void *dest, const void *src, size_t count );</code></li> <li><code>memmove</code></li> <li>\u529f\u80fd\uff1a\u5c06\u4e00\u4e2a\u7f13\u51b2\u533a\u79fb\u52a8\u5230\u53e6\u4e00\u4e2a</li> <li>\u5934\u6587\u4ef6\uff1a<code>&lt;string.h&gt;</code></li> <li>\u8bed\u6cd5\uff1a<code>void* memmove( void* dest, const void* src, size_t count );</code></li> </ul> <pre><code>title: memcpy\u4e0ememmove\u533a\u522b\nmemcpy\u6ca1\u6709\u8003\u8651\u5185\u5b58\u91cd\u53e0\u95ee\u9898\uff0c\u800cmenmove\u89e3\u51b3\u4e86\u5185\u5b58\u91cd\u53e0\u95ee\u9898\uff0c\u4e14\u540c\u6837\u9ad8\u6548\u3002\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E7%94%A8API/#4-basic_string","title":"4 basic_string\u6210\u5458\u51fd\u6570","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E7%94%A8API/#5","title":"5 \u6587\u4ef6\u5904\u7406","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/","title":"C++\u5e38\u8bc6","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#1","title":"1 \u4f4d\u8fd0\u7b97","text":"<ul> <li>\u6309\u4f4d\u6216\u8fd0\u7b97(|)\uff1a2\u6570\u6309\u4f4d\u5176\u4e2d\u4efb\u610f\u4e00\u4e2a\u4e3a1\u5f971,2\u6570\u90fd\u4e3a0\u5f970</li> <li>\u6309\u4f4d\u4e0e\u8fd0\u7b97(&amp;)\uff1a2\u6570\u6309\u4f4d\u90fd\u4e3a1\u5f971\uff0c\u5426\u5219\u5f970</li> <li>\u6309\u4f4d\u5f02\u6216\u8fd0\u7b97(^)\uff1a2\u6570\u6309\u4f4d\u4e0d\u540c\u5f971\uff0c\u76f8\u540c\u5f970</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#2","title":"2 \u9884\u5904\u7406\u3001\u7f16\u8bd1\u3001\u6c47\u7f16\u3001\u94fe\u63a5","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#3-5","title":"3 5 \u5927\u5185\u5b58\u533a","text":"<pre><code>title: \u6210\u5458\u53d8\u91cf\u5e76\u4e0d\u80fd\u51b3\u5b9a\u81ea\u8eab\u7684\u5b58\u50a8\u7a7a\u95f4\u4f4d\u7f6e\u3002\u51b3\u5b9a\u5b58\u50a8\u4f4d\u7f6e\u7684\u5bf9\u8c61\u7684\u521b\u5efa\u65b9\u5f0f\u3002\n- \u5982\u679c\u5bf9\u8c61\u662f\u51fd\u6570\u5185\u7684\u975e\u9759\u6001\u5c40\u90e8\u53d8\u91cf\uff0c\u5219\u5bf9\u8c61\uff0c\u5bf9\u8c61\u7684\u6210\u5458\u53d8\u91cf\u4fdd\u5b58\u5728\u6808\u533a\u3002   \n- \u5982\u679c\u5bf9\u8c61\u662f\u5168\u5c40\u53d8\u91cf\uff0c\u5219\u5bf9\u8c61\uff0c\u5bf9\u8c61\u7684\u6210\u5458\u53d8\u91cf\u4fdd\u5b58\u5728\u9759\u6001\u533a\u3002   \n- \u5982\u679c\u5bf9\u8c61\u662f\u51fd\u6570\u5185\u7684\u9759\u6001\u5c40\u90e8\u53d8\u91cf\uff0c\u5219\u5bf9\u8c61\uff0c\u5bf9\u8c61\u7684\u6210\u5458\u53d8\u91cf\u4fdd\u5b58\u5728\u9759\u6001\u533a\u3002   \n- \u5982\u679c\u5bf9\u8c61\u662fnew\u51fa\u6765\u7684\uff0c\u5219\u5bf9\u8c61\uff0c\u5bf9\u8c61\u7684\u6210\u5458\u53d8\u91cf\u4fdd\u5b58\u5728\u5806\u533a\u3002\n</code></pre> <ol> <li>\u6808\u533a\uff08stack\uff09 --\u7f16\u8bd1\u5668\u81ea\u52a8\u5206\u914d\u91ca\u653e\uff0c\u4e3b\u8981\u5b58\u653e\u51fd\u6570\u7684\u53c2\u6570\u503c\uff0c\u5c40\u90e8\u53d8\u91cf\u503c\u7b49\uff1b</li> <li>\u5806\u533a\uff08heap\uff09 --\u7531\u7a0b\u5e8f\u5458\u5206\u914d\u91ca\u653e\uff1b</li> <li>\u5168\u5c40\u533a\u6216\u9759\u6001\u533a --\u5b58\u653e\u5168\u5c40\u53d8\u91cf\u548c\u9759\u6001\u53d8\u91cf\uff1b\u7a0b\u5e8f\u7ed3\u675f\u65f6\u7531\u7cfb\u7edf\u91ca\u653e\uff0c\u5206\u4e3a\u5168\u5c40\u521d\u59cb\u5316\u533a\u548c\u5168\u5c40\u672a\u521d\u59cb\u5316\u533a\uff1b</li> <li>\u5b57\u7b26\u5e38\u91cf\u533a --\u5e38\u91cf\u5b57\u7b26\u4e32\u653e\u4e8e\u6b64\u5904\uff0c\u7a0b\u5e8f\u7ed3\u675f\u65f6\u7531\u7cfb\u7edf\u91ca\u653e\uff1b</li> <li>\u7a0b\u5e8f\u4ee3\u7801\u533a--\u5b58\u653e\u51fd\u6570\u4f53\u7684\u4e8c\u8fdb\u5236\u4ee3\u7801\u3002</li> </ol>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#4","title":"4 \u5185\u5b58\u5bf9\u9f50","text":"<p>\u89c4\u5219\u5982\u4e0b\uff0c\u8be6\u89e3\uff1a 1. \u5bf9\u4e8e\u7ed3\u6784\u4f53\u7684\u5404\u4e2a\u6210\u5458\uff0c\u7b2c\u4e00\u4e2a\u6210\u5458\u7684\u504f\u79fb\u91cf\u662f0\uff0c\u6392\u5217\u5728\u540e\u9762\u7684\u6210\u5458\u5176\u5f53\u524d\u504f\u79fb\u91cf\u5fc5\u987b\u662f\u5f53\u524d\u6210\u5458\u7c7b\u578b\u7684\u6574\u6570\u500d 2. \u7ed3\u6784\u4f53\u5185\u6240\u6709\u6570\u636e\u6210\u5458\u5404\u81ea\u5185\u5b58\u5bf9\u9f50\u540e\uff0c\u7ed3\u6784\u4f53\u672c\u8eab\u8fd8\u8981\u8fdb\u884c\u4e00\u6b21\u5185\u5b58\u5bf9\u9f50\uff0c\u4fdd\u8bc1\u6574\u4e2a\u7ed3\u6784\u4f53\u5360\u7528\u5185\u5b58\u5927\u5c0f\u662f\u7ed3\u6784\u4f53\u5185\u6700\u5927\u6570\u636e\u6210\u5458\u7684\u6700\u5c0f\u6574\u6570\u500d 3. \u5982\u679c\u7ed3\u6784\u4f53\uff08\u8054\u5408\u4f53\uff09\u4e2d\u8fd8\u6709\u7ed3\u6784\u4f53\uff08\u8054\u5408\u4f53\uff09\uff0c\u5b50\u7ed3\u6784\u4f53\u4e5f\u6309\u76f8\u540c\u89c4\u5219\u5904\u7406 4. \u5148\u5904\u7406\u5b50\u6210\u5458\u7ed3\u6784\uff0c\u518d\u5904\u7406\u57fa\u672c\u6210\u5458\uff1b\u5b50\u6210\u5458\u7ed3\u6784\u4e2d\u6700\u5927\u6210\u5458\u57fa\u672c\u6570\u636e\u5927\u5c0f\u4f5c\u4e3a\u7c7b\u5bf9\u9f50\u5927\u5c0f\u3002 5. \u5982\u7a0b\u5e8f\u4e2d\u6709#pragma pack(n)\u9884\u7f16\u8bd1\u6307\u4ee4\uff0c\u5219\u6240\u6709\u6210\u5458\u5bf9\u9f50\u4ee5n\u5b57\u8282\u4e3a\u51c6(\u5373\u504f\u79fb\u91cf\u662fn\u7684\u6574\u6570\u500d)\uff0c\u4e0d\u518d\u8003\u8651\u5f53\u524d\u7c7b\u578b\u4ee5\u53ca\u6700\u5927\u7ed3\u6784\u4f53\u5185\u7c7b\u578b\u3002</p> <pre><code>\u865a\u51fd\u6570\u8868\u6307\u9488\u4e5f\u53c2\u4e0e\u5185\u5b58\u5bf9\u9f50\uff0c\u5185\u5b58\u5730\u5740\u5728\u9996\u4f4d\uff0c\u5e76\u4e14\u9075\u5b88\u4e0a\u8ff0\u89c4\u5219\u3002\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#5","title":"5 \u5927\u7aef\u3001\u5c0f\u7aef","text":"<p>\u5927\u7aef\uff1a\u4f4e\u5730\u5740\u5b58\u6570\u636e\u9ad8\u4f4d \u5c0f\u7aef\uff1a\u4f4e\u5730\u5740\u5b58\u6570\u636e\u4f4e\u4f4d \u5224\u65ad\u7b97\u6cd5\uff1a</p> <pre><code>bool checkCPU()\n{//true \u5c0f\u7aef\uff0cfasle \u5927\u7aef\nunion MyUnion\n{\nint i;\nchar c;\n}u;\nu.i=1;\nreturn u.c == 1;\n}\n</code></pre> <p>\u6216\u8005</p> <pre><code>    int ix = 0x12345678;\nstd::cout &lt;&lt; (0x78 == *((char*)&amp;ix) ? \"\u5c0f\u7aef\" : \"\u5927\u7aef\") &lt;&lt; std::endl;\n</code></pre> <pre><code>\u5728x86\u4e0a\u662f\u5c0f\u7aef\uff0c\u7f51\u7edc\u4e0a\u662f\u5927\u7aef\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#6","title":"6 \u9017\u53f7\u8fd0\u7b97\u7b26","text":"<p>\u89c4\u5219\u5982\u4e0b\uff1a 1. \u9017\u53f7\u8fd0\u7b97\u7b26\u4f18\u5148\u7ea7\u6700\u4f4e 2. \u4ece\u5de6\u5f80\u53f3\u4f9d\u6b21\u8ba1\u7b97 3. \u6700\u540e\u4e00\u4e2a\u8ba1\u7b97\u503c\u4f5c\u4e3a\u9017\u53f7\u8868\u8fbe\u5f0f\u7684\u8fd4\u56de\u503c \u793a\u4f8b1\u5982\u4e0b\uff1a</p> <pre><code>int x, y, z;\nx = y = 1;\nz = x++, y++, ++y;\nprintf(\"%d,%d,%d\\n\", x, y, z); // 2,3,1\n</code></pre> <p>\u89e3\u91ca\u5982\u4e0b\uff1a 4. \u7531\u4e8e\u89c4\u52191\uff0c<code>z=x++</code>\u4f18\u5148\u6267\u884c\uff0c<code>x++</code>\u7ed3\u679c\u662f1\uff0cx\u53d8\u62102\uff0cz\u7ed3\u679c\u662f1; 5. \u518d\u8ba1\u7b97y++,\u6700\u540e++y,y\u7ed3\u679c\u662f3\uff0c\u6574\u4e2a\u8868\u8fbe\u5f0f\u7ed3\u679c\u662f++y\u7684\u7ed3\u679c\uff0c\u5373\u4e5f\u662f3\u3002</p> <p>\u793a\u4f8b2\u5982\u4e0b\uff1a</p> <pre><code>int a, b;\na = 1, a + 1, a++;\nb = (a = 1, a + 1, a++);\nprintf(\"%d,%d\\n\", a, b);// 2,1\n</code></pre> <p>\u89e3\u91ca\u5982\u4e0b\uff1a 1. \u5c0f\u62ec\u53f7\u8fd0\u7b97\u7b26&gt;\u7b49\u53f7\u8fd0\u7b97\u7b26&gt;\u9017\u53f7\u8fd0\u7b97\u7b26\uff0c\u5148\u8fdb\u884c<code>a=1</code>\u8fd0\u7b97\uff0c<code>a+1</code>\u7ed3\u679c\u4e0d\u5f71\u54cda\u7684\u503c\uff0c\u518d\u8ba1\u7b97<code>a++</code>\u540e\uff0ca\u7b49\u4e8e2\uff0c<code>a++</code>\u8868\u8fbe\u5f0f\u8fd4\u56de1\uff0c\u6839\u636e\u89c4\u52193\uff0c<code>a++</code>\u7ed3\u679c\u4f5c\u4e3a<code>(a = 1, a + 1, a++)</code>\u8868\u8fbe\u5f0f\u7684\u7ed3\u679c\uff0c\u5373<code>b=1</code>\u3002</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#7-return","title":"7 \u8fd4\u56de\u5fd8\u8bb0return\u4f1a\u8fd4\u56de\u4ec0\u4e48","text":"<p>\u5f53\u4e00\u4e2a\u6709\u8fd4\u56de\u503c\u51fd\u6570\uff0c\u4f46\u5e76\u6ca1\u6709return\u8fd4\u56de\u503c\u65f6\uff0c\u4f1a\u5c06\u5bc4\u5b58\u5668rax\uff08eax ax al\uff09\u4e2d\u7684\u4fdd\u5b58\u7684\u503c\u8fd4\u56de\u3002</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#8-virtual","title":"8 \u865a\u51fd\u6570virtual","text":"<p>\u865a\u51fd\u6570\u8981\u4e48\u5b9a\u4e49</p> <pre><code>virtual void test(){};\n</code></pre> <p>\u8981\u4e48\u662f\u7eaf\u865a\u51fd\u6570</p> <pre><code>virtual void test()=0;\n</code></pre> <p>\u4f46\u4e0d\u80fd\u53ea\u58f0\u660e</p> <pre><code>virtual void test();//\u9519\u8bef\u7684\n</code></pre> <p>virtual\u51fd\u6570\u662f\u52a8\u6001\u7ed1\u5b9a\uff0c\u800c\u7f3a\u7701\u53c2\u6570\u503c\u5374\u662f\u9759\u6001\u7ed1\u5b9a\uff0c\u4e0b\u4f8b\u8f93\u51fa\u7ed3\u679cB-&gt;1\u3002</p> <pre><code>#include&lt;iostream&gt;\nusing namespace std;\nclass A\n{\npublic:\nvirtual void func(int val = 1)\n{ std::cout&lt;&lt;\"A-&gt;\"&lt;&lt;val &lt;&lt;std::endl;}\nvirtual void test()\n{ func();}\n};\nclass B : public A\n{\npublic:\nvoid func(int val=0)\n{std::cout&lt;&lt;\"B-&gt;\"&lt;&lt;val &lt;&lt;std::endl;}\n};\nint main(int argc ,char* argv[])\n{\nB*p = new B;\np-&gt;test();\nreturn 0;\n}\n</code></pre> <pre><code>title: \u4e3a\u4ec0\u4e48C++\u4e0d\u652f\u6301\u5185\u8054\u6210\u5458\u51fd\u6570\u4e3a\u865a\u51fd\u6570\uff1f\n\u5185\u8054\u51fd\u6570\u5c31\u662f\u4e3a\u4e86\u5728\u4ee3\u7801\u4e2d\u76f4\u63a5\u5c55\u5f00\uff0c\u51cf\u5c11\u51fd\u6570\u8c03\u7528\u82b1\u8d39\u7684\u4ee3\u4ef7\uff0c\u865a\u51fd\u6570\u662f\u4e3a\u4e86\u5728\u7ee7\u627f\u540e\u5bf9\u8c61\u80fd\u591f\u51c6\u786e\u7684\u6267\u884c\u81ea\u5df1\u7684\u52a8\u4f5c\uff0c\u8fd9\u662f\u4e0d\u53ef\u80fd\u7edf\u4e00\u7684\u3002\uff08\u518d\u8bf4\u4e86\uff0cinline\u51fd\u6570\u5728\u7f16\u8bd1\u65f6\u88ab\u5c55\u5f00\uff0c\u865a\u51fd\u6570\u5728\u8fd0\u884c\u65f6\u624d\u80fd\u52a8\u6001\u7684\u7ed1\u5b9a\u51fd\u6570\n</code></pre> <pre><code>title: \u4e3a\u4ec0\u4e48C++\u4e0d\u652f\u6301\u9759\u6001\u6210\u5458\u51fd\u6570\u4e3a\u865a\u51fd\u6570\uff1f\n\u8fd9\u4e5f\u5f88\u7b80\u5355\uff0c\u9759\u6001\u6210\u5458\u51fd\u6570\u5bf9\u4e8e\u6bcf\u4e2a\u7c7b\u6765\u8bf4\u53ea\u6709\u4e00\u4efd\u4ee3\u7801\uff0c\u6240\u6709\u7684\u5bf9\u8c61\u90fd\u5171\u4eab\u8fd9\u4e00\u4efd\u4ee3\u7801\uff0c\u4e5f\u6ca1\u6709\u52a8\u6001\u90a6\u5b9a\u7684\u5fc5\u8981\u6027\u3002\n</code></pre> <pre><code>title: \u4e3a\u4ec0\u4e48C++\u4e0d\u652f\u6301\u53cb\u5143\u51fd\u6570\u4e3a\u865a\u51fd\u6570\uff1f\nC++\u4e0d\u652f\u6301\u53cb\u5143\u51fd\u6570\u7684\u7ee7\u627f\uff0c\u5bf9\u4e8e\u6ca1\u6709\u7ee7\u627f\u7279\u6027\u7684\u51fd\u6570\u6ca1\u6709\u865a\u51fd\u6570\u7684\u8bf4\u6cd5\u3002\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#81","title":"8.1 \u7eaf\u865a\u51fd\u6570","text":"<ol> <li>\u5b9a\u4e49\u4e86\u7eaf\u865a\u51fd\u6570\u7684\u7c7b\u662f\u62bd\u8c61\u7c7b\uff0c\u6d3e\u751f\u7684\u5177\u4f53\u7c7b\u9700\u8981\u5b9e\u73b0</li> <li>\u7eaf\u865a\u51fd\u6570\u662f\u53ea\u58f0\u660e\u672a\u5b9a\u4e49\u7684\uff0c\u5f62\u5982<code>virtual ~Base()=0;</code></li> <li>\u6790\u6784\u51fd\u6570\u4e5f\u53ef\u4ee5\u662f\u7eaf\u865a\u7684</li> </ol>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#82","title":"8.2 \u865a\u51fd\u6570\u8868","text":"<p>\u8be6\u89c1https://cloud.tencent.com/developer/article/1599283</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#821","title":"8.2.1 \u6982\u8ff0","text":"<p>\u865a\u51fd\u6570\u8868\u5c31\u662f\u5b58\u653e\u7740\u5f53\u524d\u7c7b\u4e2d\u6240\u6709\u865a\u51fd\u6570\u5730\u5740\u7684\u8868\u3002 \u5728\u5b9e\u4f8b\u5316\u4e00\u4e2a\u5177\u6709\u865a\u51fd\u6570\u7684\u7c7b\u65f6\uff0c\u8fd9\u4e2a\u8868\u4e5f\u88ab\u5206\u914d\u5230\u8fd9\u4e2a\u5b9e\u4f8b\u5bf9\u8c61\u7684\u5185\u5b58\u4e2d\uff0c\u901a\u8fc7\u865a\u51fd\u6570\u8868\u53ef\u4ee5\u627e\u5230\u6240\u8981\u8c03\u7528\u7684\u865a\u51fd\u6570\u7684\u4f4d\u7f6e\u3002 1. \u7c7b\u6709\u865a\u51fd\u6570\uff0c\u7c7b\u5c31\u4f1a\u6709\u4e00\u4e2a\u6307\u9488\u6307\u5411\u865a\u51fd\u6570\u8868\u3002 2. \u5728\u591a\u7ee7\u627f\u5b50\u7c7b\u91cc\uff0c\u6bcf\u4e00\u4e2a\u7236\u7c7b\u542b\u6709\u865a\u51fd\u6570\uff0c\u5b50\u7c7b\u4f1a\u5206\u522b\u751f\u6210\u4e00\u4e2a\u865a\u51fd\u6570\u8868\u6307\u9488\u6307\u5411\u4e0d\u540c\u7684\u865a\u51fd\u6570\u8868\u3002 3. \u865a\u51fd\u6570\u8868\u7ed3\u6784\u4e0a\u5982\u4e00\u4e2a\u6570\u7ec4\uff0c\u5b58\u50a8\u865a\u51fd\u6570\u6307\u9488\u3002 4. \u865a\u51fd\u6570\u8868\u6307\u9488\u5927\u5c0f\u753132/64\u4f4d\u7a0b\u5e8f\u5f71\u54cd\uff0c\u5927\u5c0f\u53604/8\u5b57\u8282\u3002 5. \u865a\u51fd\u6570\u8868\u5728\u7c7b\u5185\u5b58\u7684\u9996\u4f4d\u5730\u5740\u4e0a\u3002 6. \u5982\u679c\u5b50\u7c7b\u6ca1\u6709\u91cd\u5199\u865a\u51fd\u6570\uff0c\u5b50\u7c7b\u7236\u7c7b\u865a\u51fd\u6570\u8868\u4e2d\u6307\u5411\u76f8\u540c\u7684\u865a\u51fd\u6570\u5730\u5740\u3002</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#822","title":"8.2.2 \u83b7\u53d6\u865a\u51fd\u6570\u8868\u65b9\u5f0f","text":"<pre><code>class Base {\npublic:\nvirtual void a() { cout &lt;&lt; \"Base a()\" &lt;&lt; endl; }\nvirtual void b() { cout &lt;&lt; \"Base b()\" &lt;&lt; endl; }\nvirtual void c() { cout &lt;&lt; \"Base c()\" &lt;&lt; endl; }\n};\n\nclass Derive : public Base {\npublic:\nvirtual void b() { cout &lt;&lt; \"Derive b()\" &lt;&lt; endl; }\n};\nDerive* p = new Derive;\nlong* tmp = (long*)p;             // \u5148\u5c06p\u5f3a\u5236\u8f6c\u6362\u4e3along\u7c7b\u578b\u6307\u9488tmp\n// \u7531\u4e8etmp\u662f\u865a\u51fd\u6570\u8868\u6307\u9488\uff0c\u90a3\u4e48*tmp\u5c31\u662f\u865a\u51fd\u6570\u8868\nlong* vptr = (long*)(*tmp);//vptr\u5c31\u662f\u865a\u51fd\u6570\u8868\uff08\u6570\u7ec4\u7ed3\u6784\uff09\u7684\u9996\u5730\u5740\ntypedef void(*vpFun)();//\u5b9a\u4e49\u865a\u51fd\u6570\u6307\u9488\nfor (int i = 0; i &lt; 3; i++) {//3\u4e2a\u865a\u51fd\u6570\nprintf(\"vptr[%d] : %p\\n\", i, vptr[i]);//\u6570\u7ec4\u5f62\u5f0f\u8bbf\u95ee\u8868\u4e2d\u4e0b\u4e00\u4e2a\u865a\u51fd\u6570\u5730\u5740\nvpFun fun=(vpFun)vptr[i];\nfun();//\u8c03\u7528\u865a\u51fd\u6570\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#823","title":"8.2.3 \u865a\u51fd\u6570\u8868\u5185\u5b58\u5e03\u5c40","text":"<ol> <li>\u6d3e\u751f\u7c7b\u5bf9\u8c61\u5728\u9996\u5730\u5740\u5b58\u653e\u865a\u51fd\u6570\u8868\u6307\u9488\uff1b</li> <li>\u865a\u51fd\u6570\u8868\u7c7b\u4f3c\u6570\u7ec4\uff0c\u6bcf\u4e00\u4e2a\u6570\u7ec4\u5143\u7d20\u662f\u865a\u51fd\u6570\u7684\u6307\u9488\uff1b</li> <li>\u865a\u51fd\u6570\u8868\u4e2d\u5148\u6309\u7236\u7c7b\u865a\u51fd\u6570\u58f0\u660e\u987a\u5e8f\u6392\u5217\uff0c\u5982\u679c\u6d3e\u751f\u7c7b\u91cd\u5199\u4e86\u865a\u51fd\u6570\uff0c\u865a\u51fd\u6570\u6307\u9488\u5c31\u6307\u5411\u6d3e\u751f\u7c7b\u7684\u865a\u51fd\u6570\u5730\u5740\uff1b</li> <li>\u6d3e\u751f\u7c7b\u589e\u52a0\u7684\u865a\u51fd\u6570\uff0c\u653e\u5728\u865a\u51fd\u6570\u8868\u672b\u5c3e\uff1b</li> <li>\u5728\u591a\u91cd\u7ee7\u627f\u60c5\u51b5\u4e0b\uff0c\u4f1a\u6709\u591a\u4e2a\u865a\u51fd\u6570\u8868\uff08\u524d\u63d0\u6bcf\u4e00\u4e2a\u7236\u7c7b\u90fd\u662f\u7531\u865a\u51fd\u6570\u7684\uff0c\u6ca1\u865a\u51fd\u6570\u4e0d\u4ea7\u751f\uff09\uff1b</li> <li>\u5728\u591a\u91cd\u7ee7\u627f\u4e0b\u6309\u7ee7\u627f\u987a\u5e8f\uff08\u5982class A : public B,public C{};\u5219\u7b2c\u4e00\u4e2a\u865a\u51fd\u6570\u6307\u9488\u6307\u5411B\uff0c\u7b2c\u4e8c\u4e2a\u6307\u5411C\uff09\uff1b</li> <li>\u5728\u591a\u91cd\u7ee7\u627f\u4e0b\uff0c\u6d3e\u751f\u7c7b\u65b0\u589e\u7684\u865a\u51fd\u6570\uff0c\u653e\u5728\u7b2c\u4e00\u4e2a\u865a\u51fd\u6570\u8868\u672b\u5c3e\u3002</li> </ol> <p>\u53c2\u8003https://www.shuzhiduo.com/A/MAzAp8Ged9/</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#9","title":"9 \u6784\u9020\u51fd\u6570\u4e0e\u6790\u6784\u51fd\u6570","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#91","title":"9.1 \u6784\u9020\u6790\u6784\u987a\u5e8f","text":"<p>\u77e5\u8bc6\u70b9\uff1a 1. \u5148\u8c03\u7528\u57fa\u7c7b\u6784\u9020\uff0c\u518d\u8c03\u7528\u672c\u8eab\uff1b\u5148\u8c03\u7528\u672c\u8eab\u6790\u6784\uff0c\u518d\u8c03\u7528\u57fa\u7c7b\u6790\u6784\u3002 2. \u5982\u679c\u7c7b\u542b\u6709\u6210\u5458\uff0c\u6309\u6210\u5458\u51fa\u73b0\u7684\u987a\u5e8f\u5148\u8c03\u7528\u6210\u5458\u6784\u9020\u3002</p> <pre><code>\u4e0d\u5efa\u8bae\u5728\u6784\u9020\u51fd\u6570\u4e2d\u629b\u51fa\u5f02\u5e38\u3002\u6784\u9020\u51fd\u6570\u629b\u51fa\u5f02\u5e38\u65f6\uff0c\u6790\u6784\u51fd\u6570\u5c06\u4e0d\u4f1a\u88ab\u6267\u884c\uff0c\u9700\u8981\u624b\u52a8\u7684\u53bb\u91ca\u653e\u5185\u5b58\uff1b\n\u6790\u6784\u51fd\u6570\u4e0d\u5e94\u8be5\u629b\u51fa\u5f02\u5e38\u3002\u5f53\u6790\u6784\u51fd\u6570\u4e2d\u4f1a\u6709\u4e00\u4e9b\u53ef\u80fd\u53d1\u751f\u5f02\u5e38\u65f6\uff0c\u90a3\u4e48\u5c31\u5fc5\u987b\u8981\u628a\u8fd9\u79cd\u53ef\u80fd\u53d1\u751f\u7684\u5f02\u5e38\u5b8c\u5168\u5c01\u88c5\u5728\u6790\u6784\u51fd\u6570\u5185\u90e8\uff0c\u51b3\u4e0d\u80fd\u8ba9\u5b83\u629b\u51fa\u51fd\u6570\u4e4b\u5916\u3002\u56e0\u4e3a\u5982\u679c\u5bf9\u8c61\u629b\u51fa\u5f02\u5e38\u4e86\uff0c\u5f02\u5e38\u5904\u7406\u6a21\u5757\u4e3a\u4e86\u7ef4\u62a4\u7cfb\u7edf\u5bf9\u8c61\u6570\u636e\u7684\u4e00\u81f4\u6027\uff0c\u907f\u514d\u8d44\u6e90\u6cc4\u9732\uff0c\u6709\u5fc5\u8981\u8c03\u7528\u6790\u6784\u51fd\u6570\u91ca\u653e\u8d44\u6e90\uff0c\u8fd9\u65f6\u5982\u679c\u6790\u6784\u8fc7\u7a0b\u53c8\u51fa\u73b0\u5f02\u5e38\uff0c\u90a3\u4e48\u8c01\u6765\u4fdd\u8bc1\u65b0\u5bf9\u8c61\u7684\u8d44\u6e90\u91ca\u653e\u5462\uff1f\u524d\u9762\u7684\u5f02\u5e38\u8fd8\u6ca1\u5904\u7406\u5b8c\u53c8\u6765\u4e86\u65b0\u7684\u5f02\u5e38\uff0c\u8fd9\u6837\u53ef\u80fd\u4f1a\u9677\u5165\u65e0\u9650\u7684\u9012\u5f52\u5d4c\u5957\u4e2d\u3002\u6240\u4ee5\uff0c\u4ece\u6790\u6784\u51fd\u6570\u629b\u51fa\u5f02\u5e38\uff0cC++\u8fd0\u884c\u65f6\u7cfb\u7edf\u4f1a\u5904\u4e8e\u65e0\u6cd5\u51b3\u65ad\u7684\u5883\u9047\uff0c\u56e0\u6b64C++\u8bed\u8a00\u62c5\u4fdd\uff0c\u5f53\u5904\u4e8e\u8fd9\u4e00\u70b9\u65f6\uff0c\u4f1a\u8c03\u7528 terminate()\u6765\u6740\u6b7b\u8fdb\u7a0b\u3002\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#92","title":"9.2 \u6784\u9020\u51fd\u6570\u3001\u6790\u6784\u51fd\u6570\u6ce8\u610f\u4e8b\u9879","text":"<ol> <li>\u6784\u9020\u51fd\u6570\u4e0d\u80fd\u662f\u865a\u51fd\u6570</li> <li>\u9700\u8981\u7ee7\u627f\u7684\u7c7b\u6790\u6784\u51fd\u6570\u6700\u597d\u8bbe\u7f6e\u4e3a\u865a\u7684</li> </ol> <pre><code>title: \u4e3a\u4ec0\u4e48\u6784\u9020\u51fd\u6570\u4e0d\u80fd\u662f\u865a\u51fd\u6570\uff1f\n1. \u865a\u51fd\u6570\u8868\u6307\u9488\u662f\u5b58\u5728\u5bf9\u8c61\u4e2d\u7684\uff0c\u6784\u9020\u51fd\u6570\u8fd8\u6ca1\u8c03\u7528\uff0c\u7c7b\u5bf9\u8c61\u8fd8\u6ca1\u6709\uff0c\u4e5f\u5c31\u65e0\u6cd5\u4f7f\u7528\u865a\u51fd\u6570\u8868\uff0c\u8fd9\u6837\u662f\u77db\u76fe\u7684\u3002\n2. \u865a\u51fd\u6570\u7684\u4f5c\u7528\u662f\u4f7f\u8fd0\u884c\u65f6\u8c03\u7528\u51fd\u6570\uff0c\u4f46\u6784\u9020\u51fd\u6570\u6784\u9020\u7684\u7c7b\u5bf9\u8c61\u662f\u5728\u7f16\u8bd1\u671f\u5c31\u786e\u5b9a\u7684\uff0c\u6240\u4ee5\u6784\u9020\u51fd\u6570\u4e0d\u9700\u8981\u865a\u7684\u3002\n</code></pre> <pre><code>title: \u865a\u6790\u6784\u51fd\u6570\u4f5c\u7528\n\u53ef\u4ee5\u901a\u8fc7delete\u7236\u7c7b\u800c\u8c03\u7528\u6d3e\u751f\u7c7b\u7684\u6790\u6784\uff0c\u4ece\u800c\u907f\u514d\u5185\u5b58\u6cc4\u6f0f\uff0c\u8d44\u6e90\u91ca\u653e\u4e0d\u5e72\u51c0\u3002\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#93","title":"9.3 \u6784\u9020\u51fd\u6570\u521d\u59cb\u5316\u5217\u8868","text":"<ul> <li>\u6210\u5458\u521d\u59cb\u5316\u987a\u5e8f\u6309\u7c7b\u4e2d\u51fa\u73b0\u987a\u5e8f\u8fdb\u884c\uff0c\u4e0e\u521d\u59cb\u5316\u5217\u8868\u987a\u5e8f\u65e0\u5173\u3002</li> <li>\u9700\u8981\u5728\u521d\u59cb\u5316\u5217\u8868\u4e2d\u8fdb\u884c\u521d\u59cb\u5316\u7684\u60c5\u51b5</li> <li>\u975estatic const\u6210\u5458</li> <li>\u5f15\u7528\u6210\u5458</li> <li>\u6210\u5458\u5bf9\u8c61\u4e0d\u542b\u9ed8\u8ba4\u6784\u9020\u51fd\u6570</li> </ul> <p>\u793a\u4f8bhttps://www.nowcoder.com/questionTerminal/da5c9884bc824b72a345c8fdfb53b79b</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#10-cstaticconst","title":"10 C++\u4e2d\u6210\u5458\u51fd\u6570\u80fd\u5426\u540c\u65f6\u7528static\u548cconst\u8fdb\u884c\u4fee\u9970\uff1f","text":"<p>\u4e0d\u884c\uff01\u8fd9\u662f\u56e0\u4e3aC++\u7f16\u8bd1\u5668\u5728\u5b9e\u73b0const\u7684\u6210\u5458\u51fd\u6570\u7684\u65f6\u5019\u4e3a\u4e86\u786e\u4fdd\u8be5\u51fd\u6570\u4e0d\u80fd\u4fee\u6539\u7c7b\u7684\u4e2d\u53c2\u6570\u7684\u503c\uff0c\u4f1a\u5728\u51fd\u6570\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u9690\u5f0f\u7684\u53c2\u6570const this*\u3002\u4f46\u5f53\u4e00\u4e2a\u6210\u5458\u4e3astatic\u7684\u65f6\u5019\uff0c\u8be5\u51fd\u6570\u662f\u6ca1\u6709this\u6307\u9488\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4\u6b64\u65f6const\u7684\u7528\u6cd5\u548cstatic\u662f\u51b2\u7a81\u7684\u3002</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#11-constconst","title":"11 const\u51fd\u6570\u4e0e\u540c\u540d\u7684\u975econst\u51fd\u6570\u662f\u91cd\u8f7d\u51fd\u6570","text":"<p>\u7c7b\u7684const\u5bf9\u8c61\u53ea\u80fd\u8c03\u7528const\u51fd\u6570\uff0c\u975econst\u5bf9\u8c61\u53ef\u4ee5\u8c03\u7528const\u51fd\u6570\u548c\u975econst\u6210\u5458\u51fd\u6570</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#111-const-const","title":"11.1 const \u5bf9\u8c61\u4e0d\u80fd\u8c03\u7528\u975econst\u6210\u5458\u51fd\u6570","text":"<pre><code>int main()\n{\nclass A\n{\npublic:\nA() :i(0){}\nA(int j) :i(j) {}\nvirtual ~A() {}\nvoid fun1() {};\nvoid fun2() const{};\nint i;\n};\nconst A a;\na.fun1();//error\na.fun2();//successful\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#12-this","title":"12 this","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#121-thisconst","title":"12.1 this\u662f\u4e00\u4e2aconst\u6307\u9488","text":"<ul> <li>\u4e3a\u4ec0\u4e48<code>this</code>\u9700\u8981\u662f<code>const</code>\u5462\uff1f\u5047\u8bbe<code>this</code>\u4e0d\u662f<code>const</code>\uff0c\u5219<code>this</code>\u53ef\u4ee5\u88ab\u8d4b\u503c\u5982<code>this=NULL;</code>,\u663e\u7136\u8fd9\u662f\u4e0d\u80fd\u51fa\u73b0\u7684</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#13-privateprotectedpublic","title":"13 private\u3001protected\u3001public","text":"<ul> <li>\u6210\u5458\u5173\u7cfb</li> <li>private\u3001protected\u6210\u5458\u5728\u7c7b\u5916\u90fd\u4e0d\u53ef\u8bbf\u95ee</li> <li>protected\u5728\u6d3e\u751f\u7c7b\u4e2d\u53ef\u8bbf\u95ee\uff0cprivate\u6d3e\u751f\u7c7b\u4e2d\u4e0d\u53ef\u8bbf\u95ee</li> <li>\u7ee7\u627f\u5173\u7cfb</li> <li>public\u7ee7\u627f\uff0c\u6d3e\u751f\u7c7b\u7ee7\u627f\u7684\u6210\u5458\u53ef\u89c1\u6027\u4e0e\u7236\u7c7b\u4e00\u81f4\uff1b</li> <li>protected\u7ee7\u627f\uff0c\u5c06\u57fa\u7c7b\u7684\u516c\u6709\u6210\u5458\u548c\u4fdd\u62a4\u6210\u5458\u53d8\u6210\u81ea\u5df1\u7684\u4fdd\u62a4\u6210\u5458</li> <li>private\u7ee7\u627f\uff0c\u5c06\u57fa\u7c7b\u7684\u516c\u6709\u6210\u5458\u548c\u4fdd\u62a4\u6210\u5458\u53d8\u6210\u81ea\u5df1\u7684\u79c1\u6709\u6210\u5458\u3002</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#14","title":"14 \u53cb\u5143","text":"<ol> <li>\u53cb\u5143\u5173\u7cfb\u662f\u5355\u5411\u7684\uff0c\u5373A\u662fB\u7684\u53cb\u5143\uff0c\u4f46B\u4e0d\u662fA\u7684\u53cb\u5143\u3002</li> <li>\u53cb\u5143\u5173\u7cfb\u4e0d\u80fd\u88ab\u7ee7\u627f\uff0c\u5373\u7236\u7c7bA\u662fB\u7684\u53cb\u5143\uff0c\u4f46\u5b50\u7c7bC\u4e0d\u662fB\u7684\u53cb\u5143\u3002</li> </ol>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#15-overridefinalimportmodule","title":"15 override\u3001final\u3001import\u3001module","text":"<ul> <li><code>override</code>\uff1a\u7528\u4e8e\u8bf4\u660e\u865a\u51fd\u6570\u91cd\u5199</li> <li><code>final</code>\uff1a\u7528\u4e8e\u7c7b\u8868\u793a\u6b64\u7c7b\u5c06\u4e0d\u518d\u80fd\u88ab\u7ee7\u627f\uff1b\u7528\u4e8e\u865a\u51fd\u6570\u8868\u793a\u6b64\u865a\u51fd\u6570\u4e0d\u518d\u88ab\u91cd\u5199\u3002</li> <li>\u793a\u4f8b1</li> </ul> <pre><code>struct Base\n{\nvirtual void foo();\n};\n\nstruct A : Base\n{\nvirtual void foo() final; // A::foo is final\nvoid bar() final; // Error: non-virtual function cannot be final\n};\n\nstruct B final : A // struct B is final\n{\nvoid foo(); // Error: foo cannot be overridden as it's final in A\n};\n\nstruct C : B // Error: B is final\n{\n};\n</code></pre> <ul> <li>\u793a\u4f8b2</li> </ul> <pre><code>struct A\n{\nvirtual void foo();\nvoid bar();\n};\n\nstruct B : A\n{\nvoid foo() const override; // Error: B::foo does not override A::foo\n// (signature mismatch)\nvoid foo() override; // OK: B::foo overrides A::foo\nvoid bar() override; // Error: A::bar is not virtual\n};\n</code></pre> <pre><code>override\u3001final\u3001import\u3001module\u4e0d\u662f\u4fdd\u7559\u5b57\uff08\u5173\u952e\u5b57\uff09\uff0c\u800c\u662f\u6807\u8bc6\u7b26\u3002\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#16","title":"16 \u8fd4\u56de\u51fd\u6570\u7684\u51fd\u6570","text":"<ul> <li>\u8fd4\u56de\u51fd\u6570\u7684\u51fd\u6570</li> </ul> <pre><code>int (*F(int))(int , int);\n</code></pre> <ul> <li>\u8fd4\u56de\u51fd\u6570\u7684\u51fd\u6570\u6307\u9488</li> </ul> <pre><code>//F\u662f\u51fd\u6570\u6307\u9488\uff0c\u51fd\u6570\u542b1\u4e2aint\u53c2\u6570\uff0c\u8fd4\u56de\u503c\u662f\u4e00\u4e2a\u51fd\u6570\u6307\u9488\uff0c\u8fd9\u4e2a\u51fd\u6570\u6307\u9488\u542b2\u4e2aint\u53c2\u6570\uff0c\u8fd4\u56de\u503c\u662fint\nint (*(*F)(int))(int , int);\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#17","title":"17 \u51fd\u6570\u8c03\u7528\u6808","text":"<p>\u7a0b\u5e8f\u5728\u8fd0\u884c\u671f\u95f4\uff0c\u5185\u5b58\u4e2d\u6709\u4e00\u5757\u533a\u57df\uff0c\u7528\u6765\u5b9e\u73b0\u7a0b\u5e8f\u7684\u51fd\u6570\u8c03\u7528\u673a\u5236\u3002\u8fd9\u5757\u533a\u57df\u662f\u4e00\u5757LIFO\u7684\u6570\u636e\u7ed3\u6784\u533a\u57df\uff0c\u6211\u4eec\u53ef\u4ee5\u53eb\u51fd\u6570\u6808\uff08\u8c03\u7528\u6808\uff09\u3002\u6bcf\u4e2a\u672a\u9000\u51fa\u7684\u51fd\u6570\u90fd\u4f1a\u5728\u51fd\u6570\u6808\u4e2d\u62e5\u6709\u4e00\u5757\u6570\u636e\u533a\uff0c\u6211\u4eec\u53eb\u51fd\u6570\u7684\u6808\u5e27\u3002\u51fd\u6570\u7684\u8c03\u7528\u6808\u5e27\u4e2d\uff0c\u4fdd\u5b58\u4e86\u76f8\u5e94\u7684\u51fd\u6570\u7684\u4e00\u4e9b\u91cd\u8981\u4fe1\u606f\uff1a\u51fd\u6570\u4e2d\u4f7f\u7528\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u51fd\u6570\u7684\u53c2\u6570\uff0c\u53e6\u5916\u8fd8\u6709\u4e00\u4e9b\u7ef4\u62a4\u51fd\u6570\u6808\u6240\u9700\u8981\u7684\u6570\u636e\uff0c\u6bd4\u5982EBP\u6307\u9488\uff0c\u51fd\u6570\u7684\u8fd4\u56de\u5730\u5740\u3002 - \u5165\u6808\u987a\u5e8f   1. \u53c2\u6570   2. \u8fd4\u56de\u5730\u5740   3. \u5c40\u90e8\u53d8\u91cf</p> <p>\u53c2\u8003https://zhuanlan.zhihu.com/p/59479513</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#18-const","title":"18 const\u5e38\u91cf\u7684\u7f16\u8bd1\u5668\u4f18\u5316","text":"<p>\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>const int a = 1;\nconst int* p = &amp;a;\nauto q = const_cast&lt;int*&gt;(p);\ncout &lt;&lt; a &lt;&lt; endl;\n*q = 2;\ncout &lt;&lt; a &lt;&lt; endl;\ncout &lt;&lt; *q &lt;&lt; endl;\n\nvolatile const int b = 1;\nvolatile const int* t = &amp;b;\nauto r = const_cast&lt;int*&gt;(t);\ncout &lt;&lt; b &lt;&lt; endl;\n*r = 2;\ncout &lt;&lt; b &lt;&lt; endl;\ncout &lt;&lt; *r &lt;&lt; endl;\n</code></pre> <p>\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a</p> <pre><code>1\n1\n2\n1\n2\n2\n</code></pre> <p>\u89e3\u91ca\uff1a 1. \u901a\u8fc7p\u786e\u5b9e\u95f4\u63a5\u4fee\u6539\u4e86a\u5185\u5b58\u5730\u5740\u4e0a\u7684\u6570\u636e\uff0c\u4f46\u7531\u4e8e\u7f16\u8bd1\u5668\u4f18\u5316\uff0ca\u5728\u7f16\u8bd1\u9636\u6bb5\u5176\u5728\u4e0a\u4e0b\u6587\u4e2d\u5df2\u7ecf\u88ab\u66ff\u6362\uff0c\u7b49\u540c\u4e8e \u5b8f\uff0c\u56e0\u6b64a\u8f93\u51fa\u4f9d\u7136\u662f1\u3002 2. \u7ed9const\u524d\u52a0\u4e0avolatile\uff0c\u7f16\u8bd1\u5668\u5c06\u4e0d\u4f1a\u5bf9a\u8fdb\u884c\u4f18\u5316\uff0c\u56e0\u6b64a\u7684\u503c\u88ab\u6539\u53d8\u4e86\u3002</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#19","title":"19 \u5e38\u91cf\u6298\u53e0","text":"<p>\u6982\u5ff5\uff1a\u5e38\u91cf\u6298\u53e0\u8bf4\u7684\u662f\uff0c\u5728\u7f16\u8bd1\u9636\u6bb5\uff0c\u5bf9\u8be5\u53d8\u91cf\u8fdb\u884c\u503c\u66ff\u6362\uff0c\u540c\u65f6\uff0c\u8be5\u5e38\u91cf\u62e5\u6709\u81ea\u5df1\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u5e76\u975e\u50cf\u5b8f\u5b9a\u4e49\u4e00\u6837\u4e0d\u5206\u914d\u7a7a\u95f4\u3002 \u5982\u4e0b\u793a\u4f8b\u8f93\u51fa\u7ed3\u679c\uff1aa = 10, *p = 20</p> <pre><code>#include &lt;iostream&gt; using namespace std;\nint main(void)\n{\nconst int a = 10;\nint* p = (int*)(&amp;a);\n*p = 20;\ncout &lt;&lt; \"a = \" &lt;&lt; a &lt;&lt; \", *p = \" &lt;&lt; *p &lt;&lt; endl;\nreturn 0;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#20-static","title":"20 static","text":"<ol> <li>\u9759\u6001\u51fd\u6570\u548c\u5168\u5c40\u9759\u6001\u53d8\u91cf\u7684\u4f5c\u7528\u57df\u662f\u5f53\u524d\u6587\u4ef6</li> <li>\u9759\u6001\u51fd\u6570\u548c\u5168\u5c40\u9759\u6001\u53d8\u91cf\u4f1a\u8986\u76d6\u5916\u90e8\u540c\u540d\u51fd\u6570\u6216\u53d8\u91cf</li> <li>\u9759\u6001\u53d8\u91cf\u6216\u51fd\u6570\u653e\u5728\u5934\u6587\u4ef6\u4f1a\u5bfc\u81f4\u5305\u542b\u5b83\u7684\u6587\u4ef6\u90fd\u6709\u76f8\u540c\u7684\u62f7\u8d1d\uff08\u529f\u80fd\u4e00\u81f4\uff0c\u4f46\u5730\u5740\u4e0d\u4e00\u6837\uff09</li> </ol> <pre><code>\u975e\u9759\u6001\u51fd\u6570\u9ed8\u8ba4\u662fextern\u7684\n</code></pre> <pre><code>\u9759\u6001\u51fd\u6570\u548c\u9759\u6001\u53d8\u91cf\u53ef\u4ee5\u8fbe\u5230\u907f\u514d\u94fe\u63a5\u65f6\u62a5\u91cd\u590d\u94fe\u63a5\u9519\u8bef\u3002\n</code></pre> <pre><code>title: \u662f\u5426\u5728\u5934\u6587\u4ef6\u5b9a\u4e49\u9759\u6001\u51fd\u6570\u6216\u9759\u6001\u53d8\u91cf\uff1f\n\u5728\u5934\u6587\u4ef6\u653e\u9759\u6001\u51fd\u6570\u6216\u9759\u6001\u53d8\u91cf\u6ca1\u6709\u5b9e\u9645\u610f\u4e49\uff0c\u5982\u679c\u5176\u4ed6\u6587\u4ef6\u5305\u542b\u4e86\u8fd9\u4e2a\u5934\u6587\u4ef6\uff0c\u8fd9\u4e9b\u6587\u4ef6\u90fd\u4f1a\u6709\u4e00\u4efd\u8fd9\u4e2a\u62f7\u8d1d\uff0c\u8fd9\u548cinline\u4e00\u6837\uff0c\u653e\u5165\u6e90\u6587\u4ef6\u624d\u80fd\u771f\u6b63\u8fbe\u5230\u539f\u672c\u7684\u76ee\u7684\u3002\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#21","title":"21 \u7981\u6b62\u7c7b\u5728\u6808\u6216\u5806\u4e0a\u5206\u914d\u5185\u5b58\u7684\u65b9\u6cd5","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#211","title":"21.1 \u7981\u6b62\u6808\u4e0a\u5206\u914d","text":"<p>\u539f\u7406\uff1a\u6808\u4e0a\u6784\u9020\u5bf9\u8c61\u65f6\uff0c\u7f16\u8bd1\u5668\u4f1a\u575a\u6301\u7c7b\u6790\u6784\u662f\u5426\u53ef\u8bbf\u95ee\uff1b\u6545\u5c06\u6790\u6784\u8bbe\u4e3a<code>private</code>\u6216<code>protected</code>;\u7c7b\u4e2d\u5b9e\u73b0\u4e13\u95e8\u8c03\u7528\u6790\u6784\u7684\u51fd\u6570</p> <pre><code>class A\n{\nprotected:\nA(){}\n~A(){}\npublic:\nstatic A* create()\n{\nreturn new A();\n}\nvoid destory()\n{\ndelete this;\n}\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#212","title":"21.2 \u7981\u6b62\u5806\u4e0a\u5206\u914d","text":"<p>\u539f\u7406\uff1a\u5728\u5806\u4e0a\u5206\u914d\u5185\u5b58\u4f1a\u8c03\u7528\u7c7b\u4e2doperate new,\u91cd\u5199operate new\u5e76\u5c06\u5176\u8bbe\u4e3a\u79c1\u7528\u3002</p> <pre><code>class A\n{\nprivate:\nvoid* operator new(size_t t){}     // \u6ce8\u610f\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u548c\u8fd4\u56de\u503c\u90fd\u662f\u56fa\u5b9a\u7684\nvoid operator delete(void* ptr){}  // \u91cd\u8f7d\u4e86new\u5c31\u9700\u8981\u91cd\u8f7ddelete\npublic:\nA(){}\n~A(){}\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#22","title":"22 \u6570\u7ec4","text":"<ol> <li>\u4e0d\u80fd\u4f5c\u81ea\u589e\u3001\u81ea\u51cf\u7b49\u64cd\u4f5c\uff0c\u5982++\u3001--\uff0c\u4f46\u80fd+n\u6216-n</li> <li>\u6570\u7ec4\u540d\u6307\u4ee3\u6570\u7ec4\u9996\u5730\u5740</li> <li>\u6570\u7ec4\u4f5c\u4e3a\u53c2\u6570\u4f1a\u81ea\u52a8\u8f6c\u6362\u4e3a\u6307\u9488\uff0c\u4e0d\u7ba1\u6570\u7ec4\u5143\u7d20\u591a\u5c11\u4e2a\u3002</li> <li>\u6570\u7ec4\u57511\uff0c\u770b\u793a\u4f8b</li> </ol> <pre><code>int a[5]={1,2,3,4,5};\nint *ptr=(int *)(&amp;a+1);\nprintf(\"%d\",*(ptr-1));\n</code></pre> <p>\u89e3\u91ca\u5982\u4e0b\uff1a\u8fd9\u91cc &amp;a+1 \u5e76\u4e0d\u662f\u6570\u7ec4\u7684\u9996\u5730\u5740a+1\uff0c\u56e0\u4e3a &amp;a \u662f\u6307\u5411\u6570\u7ec4\u7684\u6307\u9488\uff0c\u5176\u7c7b\u578b\u4e3aint( )[5]\u3002\u800c\u6307\u9488\u52a01\u8981\u6839\u636e\u6307\u9488\u7c7b\u578b\u52a0\u4e0a\u4e00\u5b9a\u7684\u503c\uff0c\u4e0d\u540c\u7c7b\u578b\u7684\u6307\u9488+1\u4e4b\u540e\u589e\u52a0\u7684\u5927\u5c0f\u4e0d\u540c\uff0ca\u662f\u957f\u5ea6\u4e3a5\u7684int\u6570\u7ec4\u6307\u9488\uff0c\u6240\u4ee5\u8981\u52a05 * sizeof(int)\uff0c\u6240\u4ee5ptr\u6307\u5411\u7684\u4f4d\u7f6e\u662fa+5\u3002\u4f46\u662fptr\u4e0e\uff08&amp;a+1\uff09\u7c7b\u578b\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u6240\u4ee5ptr-1\u53ea\u4f1a\u51cf\u53bbsizeof(int)\u3002</p> <pre><code>title: \u6570\u7ec4\u662fconst\u6307\u9488\nchar a[]\u7b49\u4ef7\u4e8echar *const a,\u8fd9\u4e5f\u662f\u4e3a\u4ec0\u4e48\u6570\u7ec4\u4e0d\u80fd\u81ea\u52a0\u81ea\u51cf\u7684\u539f\u56e0\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#221","title":"22.1 \u6570\u7ec4\u6307\u9488\u3001\u6307\u9488\u6570\u7ec4","text":"<ul> <li>\u6570\u7ec4\u6307\u9488\uff1a\u4e00\u4e2a\u6307\u9488\u6307\u5411\u6570\u7ec4</li> <li>\u6307\u9488\u6570\u7ec4\uff1a\u4e00\u4e2a\u6570\u7ec4\u5b58\u50a8\u7684\u662f\u6307\u9488</li> </ul> <pre><code>char (*p_Arr)[]={'a',1,2};//\u6570\u7ec4\u6307\u9488\nchar *Arr_p[]={\"helle\",\"world\"};//\u6307\u9488\u6570\u7ec4\n</code></pre> <pre><code>title: \u6570\u7ec4\u6307\u9488\u3001\u6307\u9488\u6570\u7ec4\u5224\u65ad\u6280\u5de7\n1. \u9996\u5148 `[]`\u4f18\u5148\u7ea7\u5927\u4e8e`*`\n2. char `*Arr_p[]`\u4e2d\u5148`Arr_p[]`\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u6570\u7ec4\u5143\u7d20\u662f`char*`\n3. char `(*p_Arr)[]`\u4e2d\u5148`*p_Arr`\u662f\u4e00\u4e2a\u6307\u9488\uff0c\u6307\u5411`char []`\u6570\u7ec4\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#23","title":"23 \u91ce\u6307\u9488\u3001\u60ac\u7a7a\u6307\u9488","text":"<ul> <li>\u91ce\u6307\u9488\uff1a\u662f\u6307\u5411\u201c\u5783\u573e\u201d\u5185\u5b58\u7684\u6307\u9488\uff0c\u4ea7\u751f\u539f\u56e0\u5982\u4e0b</li> <li>\u6307\u9488\u521b\u5efa\u65f6\u672a\u521d\u59cb\u5316\uff0c\u6307\u9488\u4f1a\u6307\u5411\u4e00\u4e2a\u4e0d\u5408\u6cd5\u7684\u5185\u5b58</li> <li>delete\u6307\u9488\u540e\uff0c\u672a\u8bbe\u7f6e\u6307\u9488\u4e3aNULL</li> <li>\u6307\u9488\u64cd\u4f5c\u8d85\u8d8a\u4e86\u53d8\u91cf\u7684\u4f5c\u7528\u57df\u8303\u56f4</li> <li>\u60ac\u7a7a\u6307\u9488\uff1a\u6307\u9488\u6307\u5411\u4e00\u5757\u5df2\u88ab\u91ca\u653e\u4e86\u7684\u5185\u5b58\uff0c\u5982\u5c40\u90e8\u53d8\u91cf\u6307\u9488\u8d4b\u503c\u7ed9\u5168\u5c40\u6307\u9488\uff0c\u51fa\u4e86\u5c40\u90e8\u53d8\u91cf\u4f5c\u7528\u57df\uff0c\u5168\u5c40\u6307\u9488\u6307\u5411\u7684\u5185\u5b58\u5df2\u88ab\u91ca\u653e\u3002</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#24-new-malloc","title":"24 new \u548c malloc \u7684\u5bf9\u6bd4","text":"<ol> <li>new/delete\u662fC++\u64cd\u4f5c\u7b26(\u8fd0\u7b97\u7b26)\uff0cmalloc/free\u662fC/C++\u51fd\u6570\u3002</li> <li>\u4f7f\u7528new\u64cd\u4f5c\u7b26\u7533\u8bf7\u5185\u5b58\u5206\u914d\u65f6\u65e0\u987b\u6307\u5b9a\u5185\u5b58\u5757\u7684\u5927\u5c0f\uff0c\u7f16\u8bd1\u5668\u4f1a\u6839\u636e\u7c7b\u578b\u4fe1\u606f\u81ea\u884c\u8ba1\u7b97\uff0c\u800cmalloc\u5219\u9700\u8981\u663e\u5f0f\u5730\u6307\u51fa\u6240\u9700\u5185\u5b58\u7684\u5927\u5c0f\u3002</li> <li>new/delete\u4f1a\u8c03\u7528\u5bf9\u8c61\u7684\u6784\u9020\u51fd\u6570/\u6790\u6784\u51fd\u6570\u4ee5\u5b8c\u6210\u5bf9\u8c61\u7684\u6784\u9020/\u6790\u6784\uff0c\u800cmalloc\u53ea\u8d1f\u8d23\u5206\u914d\u7a7a\u95f4\u3002</li> <li>new \u64cd\u4f5c\u7b26\u5185\u5b58\u5206\u914d\u6210\u529f\u65f6\uff0c\u8fd4\u56de\u7684\u662f\u5bf9\u8c61\u7c7b\u578b\u7684\u6307\u9488\uff0c\u7c7b\u578b\u4e25\u683c\u4e0e\u5bf9\u8c61\u5339\u914d\uff0c\u65e0\u987b\u8fdb\u884c\u7c7b\u578b\u8f6c\u6362\uff0c\u6545new\u662f\u7b26\u5408\u7c7b\u578b\u5b89\u5168\u6027\u7684\u64cd\u4f5c\u7b26\u3002\u800cmalloc\u5185\u5b58\u5206\u914d\u6210\u529f\u5219\u662f\u8fd4\u56devoid * \uff0c\u9700\u8981\u901a\u8fc7\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\u5c06 void* \u6307\u9488\u8f6c\u6362\u6210\u6211\u4eec\u9700\u8981\u7684\u7c7b\u578b\u3002</li> <li>\u6548\u7387\u4e0a\uff1amalloc\u7684\u6548\u7387\u9ad8\u4e00\u70b9\uff0c\u56e0\u4e3a\u53ea\u5206\u914d\u4e86\u7a7a\u95f4\u3002</li> <li>operator new /operator delete \u53ef\u4ee5\u88ab\u91cd\u8f7d\uff0c\u800c malloc/free \u5e76\u4e0d\u5141\u8bb8\u91cd\u8f7d\u3002</li> </ol>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#25","title":"25 \u5185\u5b58\u6cc4\u6f0f\u68c0\u6d4b\u5de5\u5177","text":"<ol> <li>valgrind</li> <li>mtrace</li> </ol>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#26-main","title":"26 main\u51fd\u6570\u6267\u884c\u524d\u64cd\u4f5c","text":"<ol> <li>\u5168\u5c40\u5bf9\u8c61\u7684\u6784\u9020\u51fd\u6570\u5728main\u51fd\u6570\u4e4b\u524d\u8c03\u7528\uff0c\u6790\u6784\u51fd\u6570\u5728main\u51fd\u6570\u4e4b\u540e\u8c03\u7528\u3002</li> <li>\u5c40\u90e8\u6808\u5bf9\u8c61\u5728\u5b9a\u4e49\u7684\u65f6\u5019\u8c03\u7528\u6784\u9020\u51fd\u6570\uff0c\u51fa\u4e86\u53ef\u89c1\u8303\u56f4\u7684\u65f6\u5019\u8c03\u7528\u6790\u6784\u51fd\u6570\u3002</li> <li>\u5806\u5bf9\u8c61\u5728new\u7684\u65f6\u5019\u8c03\u7528\u6784\u9020\u51fd\u6570\uff0cdelete\u7684\u65f6\u5019\u8c03\u7528\u6790\u6784\u3002</li> <li>\u5168\u5c40\u9759\u6001\u5bf9\u8c61\u548c\u5168\u5c40\u5bf9\u8c61\u4e00\u6837\u3002</li> <li>\u5c40\u90e8\u9759\u6001\u5bf9\u8c61\u5728\u5b9a\u4e49\u7684\u65f6\u5019\u8c03\u7528\u6784\u9020\uff0cmain\u51fd\u6570\u4e4b\u540e\u8c03\u7528\u6790\u6784</li> </ol>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#27","title":"27 \u7f16\u8bd1\u65f6\u591a\u6001\u6027\uff0c\u8fd0\u884c\u65f6\u591a\u6001\u6027","text":"<ol> <li>\u7f16\u8bd1\u65f6\u591a\u6001\u6027\uff08\u9759\u6001\u591a\u6001\uff09\uff1a\u901a\u8fc7\u91cd\u8f7d\u51fd\u6570\u5b9e\u73b0\uff1a\u5148\u671f\u8054\u7f16early binding.</li> <li>\u8fd0\u884c\u65f6\u591a\u6001\u6027\uff08\u52a8\u6001\u591a\u6001\uff09\uff1a\u901a\u8fc7\u865a\u51fd\u6570\u5b9e\u73b0\uff1a\u6ede\u540e\u8054\u7f16late binding.</li> </ol>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#28","title":"28 \u6a21\u677f\u7684\u5b9e\u73b0\u539f\u7406","text":"<p>\u6a21\u677f\u662f\u7f16\u8bd1\u5668\u652f\u6301\u5b9e\u73b0\u7684\u3002\u7f16\u8bd1\u5668\u8bc6\u522b\u5177\u4f53\u5316\u6a21\u677f\u540e\u751f\u6210\u76f8\u5e94\u7684\u7c7b\u6216\u51fd\u6570\uff0c\u5f53\u6ca1\u6709\u4e00\u4e2a\u6a21\u677f\u88ab\u5b9e\u4f8b\u5316\u65f6\uff0c\u7f16\u8bd1\u5668\u4e5f\u4e0d\u4f1a\u4ea7\u751f\u4efb\u4f55\u7c7b\u6216\u51fd\u6570\u3002</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#29","title":"29 \u5f02\u5e38\u673a\u5236","text":"<ul> <li>\u53c2\u8003 1 https://blog.csdn.net/lyrebing/article/details/36186721</li> <li>\u53c2\u8003 2 https://www.jianshu.com/p/dc61f1dc0ec8</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#30-io","title":"30 IO\u7f13\u5b58\u533a","text":"<ul> <li>\u7f13\u51b2\u533a(buffer)\uff0c\u5b83\u662f\u5185\u5b58\u7a7a\u95f4\u7684\u4e00\u90e8\u5206\u3002 \u4e5f\u5c31\u662f\u8bf4\uff0c\u5728\u5185\u5b58\u7a7a\u95f4\u4e2d\u9884\u7559\u4e86\u4e00\u5b9a\u7684\u5b58\u50a8\u7a7a\u95f4\uff0c\u8fd9\u4e9b\u5b58\u50a8\u7a7a\u95f4\u7528\u6765\u7f13\u51b2\u8f93\u5165\u6216\u8f93\u51fa\u7684\u6570\u636e\uff0c\u8fd9\u90e8\u5206\u9884\u7559\u7684\u7a7a\u95f4\u5c31\u53eb\u505a\u7f13\u51b2\u533a\uff0c\u663e\u7136\u7f13\u51b2\u533a\u662f\u5177\u6709\u4e00\u5b9a\u5927\u5c0f\u7684\u3002 </li> <li>\u7f13\u51b2\u533a\u6839\u636e\u5176\u5bf9\u5e94\u7684\u662f\u8f93\u5165\u8bbe\u5907\u8fd8\u662f\u8f93\u51fa\u8bbe\u5907\uff0c\u5206\u4e3a\u8f93\u5165\u7f13\u51b2\u533a\u548c\u8f93\u51fa\u7f13\u51b2\u533a\u3002</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#301","title":"30.1 \u7f13\u51b2\u533a\u7684\u5237\u65b0\u6761\u4ef6","text":"<ol> <li>\u7f13\u51b2\u533a\u6ee1\u65f6</li> <li>\u6267\u884cflush\u8bed\u53e5</li> <li>\u6267\u884cendl\u8bed\u53e5</li> <li>\u5173\u95ed\u6587\u4ef6</li> </ol>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#302-cache-buffer","title":"30.2 Cache\uff08\u7f13\u5b58\uff09\u548c Buffer\uff08\u7f13\u51b2\uff09\u533a\u522b","text":"<ol> <li>cache \u662f\u4e3a\u4e86\u5f25\u8865\u9ad8\u901f\u8bbe\u5907\u548c\u4f4e\u901f\u8bbe\u5907\u7684\u9e3f\u6c9f\u800c\u5f15\u5165\u7684\u4e2d\u95f4\u5c42\uff0c\u6700\u7ec8\u8d77\u5230\u52a0\u5feb\u8bbf\u95ee\u901f\u5ea6\u7684\u4f5c\u7528\u3002\u800c buffer \u7684\u4e3b\u8981\u76ee\u7684\u8fdb\u884c\u6d41\u91cf\u6574\u5f62\uff0c\u628a\u7a81\u53d1\u7684\u5927\u6570\u91cf\u8f83\u5c0f\u89c4\u6a21\u7684 I/O \u6574\u7406\u6210\u5e73\u7a33\u7684\u5c0f\u6570\u91cf\u8f83\u5927\u89c4\u6a21\u7684 I/O\uff0c\u4ee5\u51cf\u5c11\u54cd\u5e94\u6b21\u6570\uff08\u6bd4\u5982\u4ece\u7f51\u4e0a\u4e0b\u7535\u5f71\uff0c\u4f60\u4e0d\u80fd\u4e0b\u4e00\u70b9\u70b9\u6570\u636e\u5c31\u5199\u4e00\u4e0b\u786c\u76d8\uff0c\u800c\u662f\u79ef\u6512\u4e00\u5b9a\u91cf\u7684\u6570\u636e\u4ee5\u540e\u4e00\u6574\u5757\u4e00\u8d77\u5199\uff0c\u4e0d\u7136\u786c\u76d8\u90fd\u8981\u88ab\u4f60\u73a9\u574f\u4e86\uff09</li> <li>A buffer is something that has yet to be \"written\" to disk.A cache is something that has been \"read\" from the disk and stored for later use.</li> <li>buffer\u662f\u7528\u4e8e\u5b58\u653e\u5c06\u8981\u8f93\u51fa\u5230disk\uff08\u5757\u8bbe\u5907\uff09\u7684\u6570\u636e\uff0c\u800ccache\u662f\u5b58\u653e\u4ecedisk\u4e0a\u8bfb\u51fa\u7684\u6570\u636e\u3002\u4e8c\u8005\u90fd\u662f\u4e3a\u63d0\u9ad8IO\u6027\u80fd\u800c\u8bbe\u8ba1\u7684\u3002 \u53c2\u8003https://www.zhihu.com/question/26190832</li> </ol>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#31-strcpymemcpy","title":"31 strcpy\u548cmemcpy\u533a\u522b","text":"<ol> <li>\u590d\u5236\u7684\u5185\u5bb9\u4e0d\u540c\u3002strcpy\u53ea\u80fd\u590d\u5236\u5b57\u7b26\u4e32\uff0c\u800cmemcpy\u53ef\u4ee5\u590d\u5236\u4efb\u610f\u5185\u5bb9\uff0c\u4f8b\u5982\u5b57\u7b26\u6570\u7ec4\u3001\u6574\u578b\u3001\u7ed3\u6784\u4f53\u3001\u7c7b\u7b49\u3002</li> <li>\u590d\u5236\u7684\u65b9\u6cd5\u4e0d\u540c\u3002strcpy\u4e0d\u9700\u8981\u6307\u5b9a\u957f\u5ea6\uff0c\u5b83\u9047\u5230\u88ab\u590d\u5236\u5b57\u7b26\u7684\u4e32\u7ed3\u675f\u7b26\"\\0\"\u624d\u7ed3\u675f\uff0c\u6240\u4ee5\u5bb9\u6613\u6ea2\u51fa\u3002memcpy\u5219\u662f\u6839\u636e\u5176\u7b2c3\u4e2a\u53c2\u6570\u51b3\u5b9a\u590d\u5236\u7684\u957f\u5ea6\u3002</li> <li>\u7528\u9014\u4e0d\u540c\u3002\u901a\u5e38\u5728\u590d\u5236\u5b57\u7b26\u4e32\u65f6\u7528strcpy\uff0c\u800c\u9700\u8981\u590d\u5236\u5176\u4ed6\u7c7b\u578b\u6570\u636e\u65f6\u5219\u4e00\u822c\u7528memcpy</li> </ol>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E5%B8%B8%E8%AF%86/#32","title":"32 \u8fd0\u7b97\u7b26\u4f18\u5148\u7ea7","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E6%8A%80%E6%9C%AF%E6%9C%AF%E8%AF%AD/","title":"C++\u6280\u672f\u672f\u8bed","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E6%8A%80%E6%9C%AF%E6%9C%AF%E8%AF%AD/#1-sfinae","title":"1 SFINAE","text":"<ul> <li>\u89e3\u91ca\uff1aSubstitution Failure Is Not An Error(\u66ff\u6362\u5931\u8d25\u4e0d\u662f\u9519\u8bef)</li> <li>\u4f7f\u7528\u573a\u666f\uff1a\u5728\u6a21\u677f\u91cd\u8f7d\u96c6\u4e2d\uff0c\u5339\u914d\u4e00\u4e2a\u5931\u8d25\u65f6\u4f1a\u5c1d\u8bd5\u4e0b\u4e00\u4e2a\u91cd\u8f7d\uff0c\u76f4\u5230\u6240\u6709\u90fd\u5339\u914d\u5931\u8d25\uff0c\u8fd9\u65f6\u624d\u662f\u9519\u8bef</li> <li>\u793a\u4f8b</li> </ul> <pre><code>/*\n The compiler will try this overload since it's less generic than the variadic.\n T will be replace by int which gives us void f(const int&amp; t, int::iterator* b = nullptr);\n int doesn't have an iterator sub-type, but the compiler doesn't throw a bunch of errors.\n It simply tries the next overload. \n*/\ntemplate &lt;typename T&gt; void f(const T&amp; t, typename T::iterator* it = nullptr) { }\n\n// The sink-hole.\nvoid f(...) { }\n\nf(1); // Calls void f(...) { }\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E6%8A%80%E6%9C%AF%E6%9C%AF%E8%AF%AD/#2-raii","title":"2 RAII","text":"<pre><code>\u7b80\u5355\u7684\u8bf4\uff0cRAII\u673a\u5236\u5c31\u662f\u4e00\u79cd\u5bf9\u8d44\u6e90\u7533\u8bf7\u3001\u91ca\u653e\u8fd9\u79cd\u6210\u5bf9\u64cd\u4f5c\u7684\u5c01\u88c5\uff0c\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u5b9e\u73b0\u5728\u5c40\u90e8\u4f5c\u7528\u57df\u5185\u7533\u8bf7\u8d44\u6e90\u7136\u540e\u81ea\u52a8\u9500\u6bc1\u8d44\u6e90\uff0c\u800c\u4e0d\u9700\u8981\u624b\u52a8\u9500\u6bc1\u3002\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E6%8A%80%E6%9C%AF%E6%9C%AF%E8%AF%AD/#3-raii","title":"3 \u4ec0\u4e48\u662f RAII","text":"<p>RAII\uff08Resource\u00a0Acquisition\u00a0Is\u00a0Initialization\uff09\uff08\u8d44\u6e90\u83b7\u5f97\u5373\u521d\u59cb\u5316\uff09\u662f\u7531 c++\u4e4b\u7236 Bjarne Stroustrup \u63d0\u51fa\u7684\uff0c\u4ed6\u8bf4\uff1a\u4f7f\u7528\u5c40\u90e8\u5bf9\u8c61\u6765\u7ba1\u7406\u8d44\u6e90\u7684\u6280\u672f\u79f0\u4e3a\u8d44\u6e90\u83b7\u53d6\u5373\u521d\u59cb\u5316\uff1b\u8fd9\u91cc\u7684\u8d44\u6e90\u4e3b\u8981\u662f\u6307\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u6709\u9650\u7684\u4e1c\u897f\u5982\u5185\u5b58\u3001\u7f51\u7edc\u5957\u63a5\u5b57\u7b49\u7b49\uff0c\u5c40\u90e8\u5bf9\u8c61\u662f\u6307\u5b58\u50a8\u5728\u6808\u7684\u5bf9\u8c61\uff0c\u5b83\u7684\u751f\u547d\u5468\u671f\u662f\u7531\u64cd\u4f5c\u7cfb\u7edf\u6765\u7ba1\u7406\u7684\uff0c\u65e0\u9700\u4eba\u5de5\u4ecb\u5165\uff1b</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E6%8A%80%E6%9C%AF%E6%9C%AF%E8%AF%AD/#4-raii","title":"4 RAII \u539f\u7406","text":"<ul> <li>\u8d44\u6e90\u7684\u4f7f\u7528\u4e00\u822c\u7ecf\u5386\u4e09\u4e2a\u6b65\u9aa4\uff1a</li> <li>\u83b7\u53d6\u8d44\u6e90</li> <li>\u4f7f\u7528\u8d44\u6e90</li> <li>\u9500\u6bc1\u8d44\u6e90</li> <li>\u539f\u7406\uff1a</li> <li>\u5229\u7528 C++\u7c7b\u6784\u9020\u6765\u83b7\u53d6\u8d44\u6e90\u3002</li> <li>\u5229\u7528 C++\u7c7b\u6790\u6784\u91ca\u653e\u8d44\u6e90\u3002</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%2B%2B%E8%B5%84%E6%BA%90/","title":"C++\u8d44\u6e90","text":"<ul> <li>C++ Standards Support in GCC</li> <li>https://zh.cppreference.com/</li> <li>https://cplusplus.com/</li> <li>\u5fae\u8f6fC++\u6587\u6863\uff1a\u9488\u5bf9Visual Studio\u63d0\u4f9b\u7684C++\u5b66\u4e60\u6587\u6863</li> <li>C++ISO\u6807\u51c6\u5b98\u7f51\uff1a\u63d0\u4f9b\u6700\u65b0c++\u8d44\u8baf\uff0c\u6807\u51c6\u8fdb\u884c\u72b6\u6001\u3002</li> <li>MODERNES C++</li> <li>\u7b97\u6cd5Learn-Algorithms</li> <li>CppGuide</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/C%E5%92%8CC%2B%2B%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/","title":"C \u548c C++\u8bed\u6cd5\u5bf9\u6bd4","text":"<ol> <li>\u7ed3\u6784\u4f53\u9700\u8981\u4f7f\u7528 struct \u6765\u58f0\u660e\u7ed3\u6784\u4f53\u53d8\u91cf</li> <li>\u679a\u4e3e\u9700\u8981\u4f7f\u7528 enum \u6765\u58f0\u660e\u679a\u4e3e\u53d8\u91cf</li> <li>C \u4e2d\u6ca1\u6709\u5f15\u7528\u7c7b\u578b</li> <li>C \u4e0d\u652f\u6301\u5c01\u88c5\u3001\u7ee7\u627f\u3001\u591a\u6001</li> <li>C \u4e2d\u6ca1\u6709 class\uff0c\u53ea\u6709 struct</li> <li>C \u662f\u9762\u5411\u8fc7\u7a0b\u7684\u8bed\u8a00\uff0c\u800c C++\u662f\u9762\u5411\u5bf9\u8c61\u7684\u8bed\u8a00</li> <li>C \u662f\u4f7f\u7528 malloc/free\uff0c\u6ca1\u6709\u6709new/delete</li> <li>C \u4e0d\u652f\u6301\u6a21\u677f</li> </ol>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B%E7%9A%84%E5%A5%87%E6%80%AA%E7%9F%A5%E8%AF%86%E7%82%B9/","title":"c++\u7684\u5947\u602a\u77e5\u8bc6\u70b9","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B%E7%9A%84%E5%A5%87%E6%80%AA%E7%9F%A5%E8%AF%86%E7%82%B9/#1","title":"1 \u8bed\u8a00\u6807\u51c6","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B%E7%9A%84%E5%A5%87%E6%80%AA%E7%9F%A5%E8%AF%86%E7%82%B9/#11-cv","title":"1.1 \u51fd\u6570\u548c\u5f15\u7528\u6700\u9876\u5c42\u4e0d\u80fd\u7528cv\u9650\u5b9a","text":"<p>\u9996\u5148\u770b\u4e0b\u9762\u793a\u4f8b\u4ee3\u7801</p> <pre><code>typedef void F();\ntypedef int&amp; rint;\ntypedef int* pint;\nstruct S {\nconst int&amp; cri;//=&gt;const int&amp; cri\nconst pint pi;//=&gt;const int* pi\nconst rint ri;//=&gt;int&amp; ri\nconst F f; // =&gt;void f();\n};\n</code></pre> <p>::: tip <code>const rint ri</code>\u548c<code>const F f</code>\u5c55\u5f00\u540e<code>const</code>\u88ab\u5ffd\u7565\u4e86,\u8fd9\u662f\u4e3a\u4f55\uff1f \u56e0\u4e3a\u51fd\u6570\u548c\u5f15\u7528\u4e0d\u662f\u5bf9\u8c61\u7c7b\u578b\uff0c\u6240\u4ee5\u4e0d\u80fd\u88abcv\u9650\u5b9a\u7b26\u9650\u5b9a ::: ::: tip \u4e3a\u4ec0\u4e48<code>const int&amp; cri</code>\u4e2d<code>const</code>\u5374\u4fdd\u5b58\u4e0b\u6765\u4e86\uff1f \u56e0\u4e3a<code>const</code>\u9650\u5b9a\u7684\u662f\u5f15\u7528\u7684\u5bf9\u8c61\uff0c\u5373\u4f8b\u5982<code>int i=2;const int &amp; ir=i;</code>\uff0c<code>const</code>\u9650\u5b9a\u7684\u662f\u4e0d\u80fd\u6539\u53d8<code>i</code>\u7684\u6570\u636e\uff1b<code>const rint ri</code>\u5c55\u5f00\u5b9e\u9645\u7b49\u4ef7\u4e8e<code>int&amp; const ri</code>,\u8fd9\u4e0e<code>const int&amp;</code>\u662f\u5b8c\u5168\u4e0d\u540c\u7684\uff0c\u5c31\u50cf<code>const int*p</code>\u548c<code>int* const p</code>\uff0c\u4f46\u5f15\u7528\u65f6\u4e0d\u5141\u8bb8\u5199\u6210<code>int&amp; const ri</code>,\u6240\u4ee5\u7f16\u8bd1\u5668\u9047\u5230<code>const rint ri</code>\u8fd9\u79cd\u60c5\u51b5\u4f1a\u81ea\u52a8\u4f18\u5316\uff0c\u5c06<code>const</code>\u53bb\u9664\u6389\u3002\u53c2\u8003stackoverflow :::</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B%E7%9A%84%E5%A5%87%E6%80%AA%E7%9F%A5%E8%AF%86%E7%82%B9/#2-type_trait","title":"2 type_trait","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B%E7%9A%84%E5%A5%87%E6%80%AA%E7%9F%A5%E8%AF%86%E7%82%B9/#21-why-stdis_const_vis-false","title":"2.1 why std::is_const_vis false? <p>\u770b\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801\uff0c<code>std::is_const_v&lt;const int*&gt;</code>\u662f false \u4f46\u662f<code>std::is_const_v&lt;int* const&gt;</code>\u662f true\u3002</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nint main()\n{\n    std::cout &lt;&lt; std::boolalpha\n        &lt;&lt; std::is_const_v&lt;int&gt; &lt;&lt; '\\n' // false\n        &lt;&lt; std::is_const_v&lt;const int&gt; &lt;&lt; '\\n' // true\n        &lt;&lt; std::is_const_v&lt;const int*&gt; /*false*/\n        &lt;&lt; \" because the pointer itself can be changed but not the int pointed at\\n\"\n        &lt;&lt; std::is_const_v&lt;int* const&gt; /*true*/\n        &lt;&lt; \" because the pointer itself can't be changed but the int pointed at can\\n\"\n        &lt;&lt; std::is_const_v&lt;const int&amp;&gt; &lt;&lt; '\\n' // false\n        &lt;&lt; std::is_const_v&lt;std::remove_reference_t&lt;const int&amp;&gt;&gt; &lt;&lt; '\\n' // true\n        ;\n}\n</code></pre> <p>\u89e3\u91ca\u8fd9\u79cd\u60c5\u51b5\u8981\u4ece<code>is_const_v</code>\u6e90\u7801\u4e2d\u627e\u5bfb\uff0c\u6e90\u7801\u5982\u4e0b\uff1a</p> <pre><code>template &lt;class&gt;\n_INLINE_VAR constexpr bool is_const_v = false; // determine whether type argument is const qualified\n\ntemplate &lt;class _Ty&gt;\n_INLINE_VAR constexpr bool is_const_v&lt;const _Ty&gt; = true;\n</code></pre> <p>\u6e90\u7801\u4e2d<code>is_const_v&lt;const _Ty&gt;</code>\uff0cconst\u662f\u7528\u6765\u9650\u5b9a<code>_Ty</code>\u7684\uff0c\u5728<code>const int* p</code>\u4e2d<code>_Ty</code>\u7b49\u4ef7\u4e8e<code>p</code>,<code>const</code>\u9650\u5b9a\u7684\u5374\u662fp\u6240\u6307\u5411\u7684\u503c\u3002\u6240\u4ee5<code>std::is_const_v&lt;const int*&gt;</code>\u662ffalse\u3002\u518d\u6765\u770b\u770b<code>is_const_v&lt;int* const&gt;</code>\u662ftrue,\u8fd9\u4e2a<code>const</code>\u9650\u5b9a\u7684\u624d\u662fint\u6307\u9488\u3002 \u6307\u9488\u4e0econst\u7684\u5173\u7cfb\u5206\u6790\u5728\u8fd9</p>","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B%E7%9A%84%E5%A5%87%E6%80%AA%E7%9F%A5%E8%AF%86%E7%82%B9/#3","title":"3 \u51fd\u6570","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B%E7%9A%84%E5%A5%87%E6%80%AA%E7%9F%A5%E8%AF%86%E7%82%B9/#31","title":"3.1 \u51fd\u6570\u4e2d\u5b9a\u4e49\u7c7b\u6216\u7ed3\u6784 <pre><code>//1.\u51fd\u6570\u4e2d\u5b9a\u4e49\u7c7b\u6216\u7ed3\u6784\nvoid func() {\n    struct MyStruct\n    {\n        int a;\n    };\n    MyStruct s{2};\n    cout &lt;&lt;\"s.a=\" &lt;&lt;s.a &lt;&lt; endl;\n}\nint main()\n{\n    func();//s.a=2\n}\n</code></pre>","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B%E7%9A%84%E5%A5%87%E6%80%AA%E7%9F%A5%E8%AF%86%E7%82%B9/#32","title":"3.2 \u51fd\u6570\u7c7b\u578b\u3001\u51fd\u6570\u6307\u9488 <ul> <li>\u5199\u6cd5\uff1a\u51fd\u6570\u7c7b\u578b\u662f\u75312\u90e8\u5206\u7ec4\u6210\uff0c\u51fd\u6570\u8fd4\u56de\u503c\u7c7b\u578b\u548c\u53c2\u6570\u7c7b\u578b\u3002(\u5c06\u51fd\u6570\u58f0\u660e\u5f0f\u7684\u51fd\u6570\u540d\u548c\u53c2\u6570\u540d\u53bb\u6389\u5c31\u662f\u51fd\u6570\u7c7b\u578b\u7684\u5199\u6cd5)</li> </ul> <pre><code>int func(int, int) {\n    return 0;\n}\nint main()\n{  \n    cout&lt;&lt; typeid(func).name();//\u8f93\u51fa\u7ed3\u679c int __cdecl(int,int) \uff0c\u8fd9\u5c31\u662f\u51fd\u6570\u7684\u7c7b\u578b\uff0c\u5176\u4e2d__cdecl\u662f\u4e00\u79cd\u51fd\u6570\u58f0\u660e\u65b9\u5f0f\uff0c\u5c06\u5f71\u54cd\u51fd\u6570\u540d\u7b26\u53f7\u8868\u793a\n    //decltype(func) objFunc=func;//error,func\u662f\u4e00\u4e2a\u51fd\u6570\u6307\u9488\uff0c\u4e0d\u80fd\u7ed9\u4e00\u4e2a\u51fd\u6570\u5bf9\u8c61\n    decltype(func)* pFunc = func;\n\n    using pFunc1 = int(*)(int, int);\n    using objFunc1 = int(int, int);\n\n    typedef int objFunc2(int, int);\n    typedef int(*pFunc2)(int, int);\n}\n</code></pre>","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B%E7%9A%84%E5%A5%87%E6%80%AA%E7%9F%A5%E8%AF%86%E7%82%B9/#33","title":"3.3 \u51fd\u6570\u5f15\u7528 <ul> <li>\u51fd\u6570\u5f15\u7528\u548c\u51fd\u6570\u6307\u9488\u7c7b\u4f3c\uff0c\u51fd\u6570\u5f15\u7528\u9700\u8981\u58f0\u660e\u65f6\u521d\u59cb\u5316(\u548c\u5f15\u7528\u53d8\u91cf\u4e00\u6837)</li> </ul> <pre><code>int fun(int i)\n{\n    return i;\n}\nint main()\n{\n    int(&amp;pFun)(int)=fun;\n    pFun(2);//==2\n}\n</code></pre>","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B%E7%9A%84%E5%A5%87%E6%80%AA%E7%9F%A5%E8%AF%86%E7%82%B9/#34","title":"3.4 \u51fd\u6570\u53ea\u58f0\u660e\u4e0d\u5b9a\u4e49\u53ef\u4ee5\u4f7f\u7528\u5417 <p>\u4e00\u822c\u60c5\u51b5\u4e0b\u51fd\u6570\u53ea\u58f0\u660e\u4e0d\u5b9a\u4e49\u65f6\u51fd\u6570\u662f\u4e0d\u80fd\u7528\u7684\uff0c\u4f46\u5f53\u5904\u4e8e\u4e0d\u6c42\u503c\u8bed\u5883\u4e0b\uff0c\u662f\u53ef\u4ee5\u4f7f\u7528\u7684\u3002\u4f8b\u5982\uff0c<code>decltype</code>\u63a8\u5bfc\u6570\u636e\u7c7b\u578b\u65f6\uff0c\u662f\u4e0d\u9700\u8981\u8ba1\u7b97\u8868\u8fbe\u5f0f\u7684\u503c\u7684\u3002</p> <pre><code>template&lt;class T&gt;\nT Func() {\n    cout &lt;&lt; \"done\" &lt;&lt; endl;\n    return T();\n}\ntemplate&lt;class T&gt;\nT Func1();\nint main()\n{\n    decltype(Func&lt;int&gt;()) a=2;\n    decltype(Func1&lt;int&gt;()) a1 = 2;//\u6b63\u786e\uff0c\u56e0\u4e3adecltype\u4e0d\u9700\u8981\u6267\u884c\u8868\u8fbe\u5f0f\uff0c\u56e0\u6b64\u51fd\u6570\u662f\u5426\u5b9a\u4e49\u65e0\u6240\u8c13\n    //Func1&lt;int&gt;();//\u7f16\u8bd1\u4e0d\u8fc7\uff0c\u56e0\u4e3a\u6ca1\u6709\u5b9a\u4e49\uff0c\u65e0\u6cd5\u6267\u884c  \n}\n</code></pre>","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B%E7%9A%84%E5%A5%87%E6%80%AA%E7%9F%A5%E8%AF%86%E7%82%B9/#4","title":"4 \u7c7b","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B%E7%9A%84%E5%A5%87%E6%80%AA%E7%9F%A5%E8%AF%86%E7%82%B9/#41","title":"4.1 \u533f\u540d\u7c7b <ul> <li>\u533f\u540d\u7c7b\u5c31\u662f\u5ffd\u7565\u7c7b\u540d\uff0c\u5728\u5b9a\u4e49\u7c7b\u65f6\u76f4\u63a5\u5b9a\u4e49\u7c7b\u5b9e\u4f8b\u3002</li> <li>\u4f7f\u7528\u573a\u666f\uff1a\u8bbe\u8ba1\u7684\u7c7b\u53ea\u9002\u7528\u5f53\u524d\u4f5c\u7528\u57df\uff0c\u4e14\u4e0d\u60f3\u5728\u5176\u5b83\u5730\u65b9\u88ab\u5b9e\u4f8b\u5316\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main()\n{\n    class\n    {\n    public:\n        void fun()\n        {\n            cout &lt;&lt; \"hello world\" &lt;&lt; endl;\n        }\n    } x;\n    x.fun();\n}\n</code></pre>","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B%E7%9A%84%E5%A5%87%E6%80%AA%E7%9F%A5%E8%AF%86%E7%82%B9/#42","title":"4.2 \u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\u5982\u4f55\u5b9e\u73b0 <p>\u5728\u7c7b\u4e2d\u5b9e\u73b0\u8f6c\u6362\u51fd\u6570\uff0c\u5f62\u5982<code>operator Type ();</code></p> <pre><code>class A\n{\npublic:\n    A() :m_a(0) {}\n    A(const int&amp; a) { m_a = a; }\n    //\u7528\u6237\u5b9a\u4e49\u8f6c\u6362\u51fd\u6570 int\u8f6c\u6362\u51fd\u6570,\u5f53\u6307\u5b9a\u4e86explicit\u65f6\uff0c\u8f6c\u6362\u9700\u663e\u5f0f\u8f6c\u6362\n    explicit operator int() {\n        return this-&gt;m_a;\n    }\n    //or\n    //operator int&amp; () {\n    //    return this-&gt;m_a;\n    //}\n    operator int* () {\n        return &amp;this-&gt;m_a;\n    }\n    operator bool() {\n        if (m_a &gt; 0)\n            return true; \n        else \n            return false; \n    }\nprivate:\n    int m_a;\n};\nint main()\n{\n    A a(2);\n    bool b = a;//\u9690\u5f0f\u8c03\u7528 operator bool \n    if (a) {}//if \u5757\u4e2d\u9ed8\u8ba4bool\uff0c\u6545\u4e5f\u662f\u663e\u5f0f\u8c03\u7528operator bool\n    //int\u8f6c\u6362\u51fd\u6570\n    int i = (int)(a);//\u663e\u5f0f\u8c03\u7528 operator int \n    int i1 = a;//\u7531\u4e8e\u672a\u663e\u5f0f\u6307\u5b9aint\uff0c\u9690\u5f0f\u8c03\u7528 operator bool \n    i = static_cast&lt;int&gt;(a);//\u663e\u5f0f\u8c03\u7528 operator int \n    int* pi = (int*)(a);//\u663e\u5f0f\u8c03\u7528 operator int* \n}\n</code></pre>","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B%E7%9A%84%E5%A5%87%E6%80%AA%E7%9F%A5%E8%AF%86%E7%82%B9/#43-a","title":"4.3 \u7c7b\u6210\u5458\u6307\u9488<code>A::*</code>\u7684\u4f7f\u7528 <ul> <li>\u8bed\u6cd5\u5206\u6790</li> <li>\u6210\u5458\u53d8\u91cf\u6307\u9488<code>T A::*</code><ul> <li><code>A::*</code>\uff1a\u6307\u7c7b\u578b<code>A</code>\u7684\u6210\u5458\u53d8\u91cf\u6307\u9488\u6216\u6210\u5458\u51fd\u6570</li> <li><code>T</code>\u662fA\u7c7b\u4e2d\u6210\u5458\u53d8\u91cf\u7c7b\u578b\uff0c\u5982<code>char* A::* pclav=&amp;A::m_pa</code>\uff0c\u8868\u793apclav\u662f\u7c7bA\u4e2d<code>char*</code>\u7c7b\u578b\u7684\u6307\u9488\uff0c\u4e14\u5f53\u524d\u88abA::m_a\u7684\u6307\u9488\u8d4b\u503c</li> </ul> </li> <li><code>.*</code>\u548c<code>-&gt;*</code>\u4f7f\u7528\u7c7b\u6210\u5458\u6307\u9488\u6307\u5411\u7684\u6210\u5458<ul> <li>\u5982<code>pa-&gt;*pclav</code>\uff0c<code>a.*pclav</code>\u7b49\u4ef7\u4e8e<code>pa-&gt;m_pa</code>\u548c<code>a.m_pa</code>\uff0c\u5176\u4e2dpa\u662fA\u6307\u9488\u5b9e\u4f8b\uff0ca\u662f\u7c7b\u578b\u5bf9\u8c61\u5b9e\u4f8b</li> </ul> </li> <li>\u6210\u5458\u51fd\u6570\u6307\u9488<code>typedef Ret (A::* pFun)(Args);</code><ul> <li><code>Ret</code>\u662f\u51fd\u6570\u8fd4\u56de\u503c\u7c7b\u578b</li> <li><code>Args</code>\u662f\u51fd\u6570\u53c2\u6570\u7c7b\u578b</li> </ul> </li> <li>\u529f\u80fd\uff1a\u7528\u6765\u91cd\u5b9a\u5411\u67d0\u4e00\u7c7b\u6210\u5458\u53d8\u91cf\u6216\u6210\u5458\u51fd\u6570</li> <li>\u793a\u4f8b</li> </ul> <pre><code>class A {\npublic:\n    A() :a1(1), a2(2), a3(3) {\n        pa1 = new int(5);\n        pa2 = new int(6);\n    }\n    ~A() {\n        if (pa1 != nullptr) {\n            delete pa1;\n            pa1 = nullptr;\n        }\n        if (pa2 != nullptr) {\n            delete pa2;\n            pa2 = nullptr;\n        }\n    }\n    int a1;\n    int a2;\n    int a3;\n\n    int* pa1;\n    int* pa2;\n};\n\n\nclass B {\npublic:\n    int b;\n};\ntemplate &lt;class T&gt;\nvoid fun1(int T::*) {\n    cout &lt;&lt; \"\";\n}\nint main() {\n    //1. \u7c7b\u6210\u5458\u53d8\u91cf\u6307\u9488\n    fun1(&amp;A::a2);\n    fun1&lt;A&gt;(0);\n    fun1&lt;A&gt;(NULL);\n    fun1&lt;A&gt;(nullptr);\n\n    int A::* p1 = &amp;A::a1;\n    int A::* p2 = &amp;A::a2;\n    int A::* p3 = &amp;A::a3;\n    A* pa = new A;\n    pa-&gt;*p1 = 5;\n    pa-&gt;*p2 = 6;\n    pa-&gt;*p3 = 7;\n\n    int* A::* pp1 = &amp;A::pa1;\n    delete pa-&gt;pa1;\n    pa-&gt;*pp1 = new int(3);\n    //2. \u7c7b\u6210\u5458\u51fd\u6570\u6307\u9488\n    typedef int(A::* pFun)();\n    pFun fun = &amp;A::sum;\n    (pa-&gt;*fun)();\n    A a;\n    (a.*fun)();\n}\n</code></pre>","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B%E7%9A%84%E5%A5%87%E6%80%AA%E7%9F%A5%E8%AF%86%E7%82%B9/#44","title":"4.4 \u6210\u5458\u51fd\u6570\u5f15\u7528\u9650\u5b9a <ul> <li>\u529f\u80fd\uff1a\u9650\u5b9a\u6210\u5458\u51fd\u6570\u53ea\u80fd\u4ece\u5de6\u503c\u6216\u53f3\u503c\u8c03\u7528</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\nstruct Test {\n    //\u5f15\u7528\u9650\u5b9a\u53ea\u80fd\u7528\u5728\u975e\u9759\u6001\u6210\u5458\u51fd\u6570\u4e2d\n    //static void TestSRef()&amp; {\n    //    std::cout &lt;&lt; \" work only if object was a lvalue\\n\";\n    //}\n    void TestLRef()&amp; {\n        std::cout &lt;&lt; \"\u5de6\u503c\"&lt;&lt;std::endl;\n    }\n    void TestRRef()&amp;&amp; {\n        std::cout &lt;&lt; \" work only if object was a rvalue\\n\";\n    }\n};\n\nint main() {\n    Test t;\n    t.TestLRef();     //ok\n    //t.TestRRef();     //\u4e0d\u80fd\u7f16\u8bd1\n\n    //Test{}.TestLRef();//\u4e0d\u80fd\u7f16\u8bd1\n    Test{}.TestRRef();//ok\n}\n</code></pre>","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B%E7%9A%84%E5%A5%87%E6%80%AA%E7%9F%A5%E8%AF%86%E7%82%B9/#45","title":"4.5 \u7c7b\u6210\u5458\u5f15\u7528\u53d8\u91cf <ul> <li>\u89c4\u5219\uff1a<ul> <li>\u5fc5\u987b\u8981\u5b9a\u4e49\u6709\u53c2\u6784\u9020\u51fd\u6570\uff0c\u4e14\u4e0d\u80fd\u4f7f\u7528\u9ed8\u8ba4\u6784\u9020\u51fd\u6570</li> <li>\u975econst\u5f15\u7528\uff0c\u6784\u9020\u51fd\u6570\u7684\u53c2\u6570\u9700\u8981\u65f6\u5f15\u7528\u6216\u6307\u9488\u7c7b\u578b</li> <li>\u521d\u59cb\u5316\u5f15\u7528\u6210\u5458\uff0c\u53ea\u80fd\u5728\u5217\u8868\u521d\u59cb\u5316\u4e2d\u6267\u884c</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>struct A\n{\n    A() = default;     // OK\n    A(int v1,int&amp; v2) : crv(v1),rv(v2) {} // OK\n    const int&amp; crv = 42; // OK\n    int&amp; rv;\n};\n\u00a0\nA a1;    // \u9519\u8bef\uff1a\u4e34\u65f6\u91cf\u5230\u5f15\u7528\u7684\u975e\u826f\u6784\u7ed1\u5b9a\nint v1=2\nA a2(1,v1); // OK\uff08\u5ffd\u7565\u9ed8\u8ba4\u6210\u5458\u521d\u59cb\u5316\u5668\uff09\u7136\u800c a2.v1 \u662f\u60ac\u5782\u5f15\u7528\n</code></pre>","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B%E7%9A%84%E5%A5%87%E6%80%AA%E7%9F%A5%E8%AF%86%E7%82%B9/#46-using","title":"4.6 \u7c7b\u4e2d\u5de7\u7528<code>using</code>","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B%E7%9A%84%E5%A5%87%E6%80%AA%E7%9F%A5%E8%AF%86%E7%82%B9/#461","title":"4.6.1 \u6539\u53d8\u57fa\u7c7b\u6210\u5458\u79c1\u7528\u6027","text":"<pre><code>class Base {\nprotected:\nvoid print(double d) {\nprintf(\"Base\");\n}\ndouble d;\n};\nclass Derived : public Base{\npublic:\n//\u4f7f\u7ee7\u627fBase\u4e2d\u4fdd\u62a4\u6210\u5458\u5e76\u5728Derived\u4e2d\u6210\u516c\u6709\u6210\u5458\nusing Base::print;\nusing Base::d;\nvoid print() {\nprintf(\"Derived\");\n}\n};\nint main() {\nDerived d;\n//\u901a\u8fc7Derived\u76f4\u63a5\u8bbf\u95ee\nd.print(1.1);//success\nd.d;//success\n//\u4ee5\u4e0b\u7f16\u8bd1\u9519\u8bef\uff0c\u901a\u8fc7\u57fa\u7c7b\u4f5c\u7528\u57df\u7b26\u8bbf\u95ee\u4e0d\u4e86\u57fa\u7c7b\u4fdd\u62a4\u6210\u5458\nd.Base::print(1.1);//error\nd.Base::d;//error\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B%E7%9A%84%E5%A5%87%E6%80%AA%E7%9F%A5%E8%AF%86%E7%82%B9/#462","title":"4.6.2 \u7ee7\u627f\u57fa\u7c7b\u6784\u9020","text":"<pre><code>class Base {\npublic:\nBase() :m_i(1), m_d(1.1) {}\nBase(int i, double d):m_i(i),m_d(d) {}\nprivate:\nint m_i;\ndouble m_d;\n};\nclass Derived : public Base {\npublic:\n//\u58f0\u660e\u4f7f\u7528Base\u4e2d\u6784\u9020\u51fd\u6570\nusing Base::Base;\n};\nint main() {\n//\u8c03\u7528Base::Base(1,1.1)\uff0c\u5982\u679cDerived\u6ca1\u6709\u58f0\u660eusing Base::Base;\u5c06\u4f1a\u7f16\u8bd1\u62a5\u9519\nDerived d(1,1.1);\n\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B%E7%9A%84%E5%A5%87%E6%80%AA%E7%9F%A5%E8%AF%86%E7%82%B9/#47","title":"4.7 \u4f4d\u57df <ul> <li>\u4f4d\u57df\u662f\u4e00\u79cd\u4f7f\u7528bit\u4f4d\u7684\u6280\u672f\uff0c\u53ef\u4ee5\u538b\u7f29\u6570\u636e\u5927\u5c0f,\u7528\u4e8e\u7ed3\u6784\u4f53\u6216\u7c7b\u4e2d</li> <li>\u8bed\u6cd5\u5f62\u5f0f:<code>\u7c7b\u578b\u8bf4\u660e\u7b26 \u4f4d\u57df\u540d\uff1a\u4f4d\u57df\u957f\u5ea6</code></li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>#include\"stdio.h\"\n#include\"string.h\"\n// \u5b9e\u9645\u5360\u752832\u4e2abit\uff08\u5360\u7528\u4e00\u4e2a32\u4f4dint\u578b\uff09\uff0c\u4f46\u6570\u636e\u53ea\u586b\u5145\u4e86\u524d\u976215\u4e2abit\nstruct  bit_struct\n{\n    int  bit1:3;//\u53603bit\uff0cbit0-bit2\n\n    int  bit2:5;//\u53605bit\uff0cbit3-bit7\n\n    int  bit3:7;//\u53607bit\uff0cbit8-bit14\n\n};\n\nint main()\n{\n    bit_struct val;\n    memset(&amp;val,0,sizeof(val));\n    val.bit1=3;\n    val.bit2=15;\n    val.bit3=63;\n    printf(\"sizeof bit_struct [%d] val.bit1=[%x] val.bit2 [%x] val.bit3 [%x] val [%x]\",sizeof(bit_struct),val.bit1,val.bit2,val.bit3,*(int*)(&amp;val));\n}\n</code></pre> <ul> <li>\u8f93\u51fa\u7ed3\u679c\uff1a</li> </ul> <pre><code>sizeof bit_struct [4] val.bit1=[3] val.bit2 [f] val.bit3 [3f] val [3f7b]\n</code></pre>","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B%E7%9A%84%E5%A5%87%E6%80%AA%E7%9F%A5%E8%AF%86%E7%82%B9/#5-union","title":"5 \u533f\u540d\u8054\u5408\u4f53<code>union</code>","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>union { \u6210\u5458\u8bf4\u660e };</code></li> <li>\u529f\u80fd\uff1a\u533f\u540d\u8054\u5408\u4f53\u7684\u6210\u5458\u88ab\u6ce8\u5165\u5230\u5176\u5916\u56f4\u4f5c\u7528\u57df\u4e2d</li> <li>\u6ce8\u610f\u4e8b\u9879\uff1a</li> <li>\u8054\u5408\u4f53\u5185\u6210\u5458\u540d\u4e0d\u80fd\u4e0e\u5916\u5c42\u4f5c\u7528\u57df\u4e2d\u5176\u5b83\u58f0\u660e\u7684\u540d\u79f0\u76f8\u540c</li> <li>\u5b83\u4eec\u4e0d\u80fd\u6709\u6210\u5458\u51fd\u6570\uff0c\u4e0d\u80fd\u6709\u9759\u6001\u6570\u636e\u6210\u5458\uff0c\u4e14\u6240\u6709\u6570\u636e\u6210\u5458\u5fc5\u987b\u4e3a\u516c\u5f00\u3002</li> <li>\u4ec5\u5141\u8bb8\u975e\u9759\u6001\u6570\u636e\u6210\u5458\u548c static_assert \u58f0\u660e</li> <li>\u547d\u540d\u7a7a\u95f4\u4f5c\u7528\u57df\u7684\u533f\u540d\u8054\u5408\u4f53\u5fc5\u987b\u58f0\u660e\u4e3a static\uff0c\u9664\u975e\u5b83\u4eec\u51fa\u73b0\u4e8e\u65e0\u540d\u547d\u540d\u7a7a\u95f4</li> <li>\u5168\u5c40\u533f\u540d\u8054\u5408\u4f53\u5fc5\u987b\u58f0\u660e\u4e3a static</li> <li>\u793a\u4f8b</li> </ul> <pre><code>namespace nm {\nclass A {\npublic:\nunion\n{\nint i;\ndouble d;\n};\n};\nstatic union\n{\nfloat f=2.3;\n};\n}\nstatic union\n{\nint i1;\n};\n}\nint main() {\n\nnm::A a;\na.i = 2;\nnm::f = 1.2;\ni1=3;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B%E7%9A%84%E5%A5%87%E6%80%AA%E7%9F%A5%E8%AF%86%E7%82%B9/#6","title":"6 \u533f\u540d\u547d\u540d\u7a7a\u95f4","text":"<ul> <li>\u533f\u540d\u547d\u540d\u7a7a\u95f4\u4e5f\u79f0\u65e0\u540d\u547d\u540d\u7a7a\u95f4\uff0c\u4f5c\u7528\u7c7b\u4f3c\u4e8e\u5168\u5c40static\uff0c\u5c06\u547d\u540d\u7a7a\u95f4\u5185\u7684\u6570\u636e\u9650\u5b9a\u5728\u672c\u6587\u4ef6\u5185\uff0c\u5916\u90e8\u6587\u4ef6\u65e0\u6cd5\u901a\u8fc7extern\u94fe\u63a5</li> <li>\u793a\u4f8b</li> </ul> <pre><code>//test3.cpp\nstatic void bar(){}\n\nnamespace //\u533f\u540d\u7684\u547d\u540d\u7a7a\u95f4\n{\nfloat bar2;\nint foo;\n}\n\n//test4.cpp\nextern int foo;\nextern void bar();\nextern float bar2; int main()\n{\nbar();                    //\u5916\u90e8\u7684bar()\u88ab\u58f0\u660e\u4e3astatic,\u8fd9\u91cc\u94fe\u63a5\u4e0d\u5230\u7b26\u53f7.\u4e0d\u80fd\u8bbf\u95ee\nbar2 = 0.1f;          //\u5916\u90e8\u7684\u533f\u540d\u7a7a\u95f4\u54e9,\u8fd9\u91cc\u4e5f\u4e0d\u80fd\u8bbf\u95ee.\nfoo = 0xFF;\nreturn 0;\n};//\u5982\u679c\u5c06test4\u7684\u76ee\u6807\u548ctest3\u7684\u76ee\u6807\u8fdb\u884c\u94fe\u63a5,\u5b9e\u9645\u4e0a\u662f\u627e\u4e0d\u5230\u8fd9\u4e9b\u7b26\u53f7\u7684.\u94fe\u63a5\u4f1a\u5931\u8d25.\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B%E7%9A%84%E5%A5%87%E6%80%AA%E7%9F%A5%E8%AF%86%E7%82%B9/#7-newplacement-new","title":"7 \u5e03\u7f6enew\uff08Placement new\uff09","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>new (address) type (initializer)</code></li> <li>\u529f\u80fd\uff1a\u4f7f\u7528\u9884\u5148\u5206\u914d\u7684\u5185\u5b58\u7a7a\u95f4\u53bb\u5206\u914d\u7ed9\u5f85\u5206\u914d\u5bf9\u8c61</li> <li>\u6ce8\u610f\u4e8b\u9879\uff1a\u4fdd\u8bc1\u9884\u5148\u5206\u914d\u7684\u5185\u5b58\u5927\u5c0f\u5927\u4e8e\u5f85\u5206\u914d\u5bf9\u8c61\u6240\u9700\u5185\u5b58\u5927\u5c0f</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include&lt;iostream&gt; using namespace std;\nint main()\n{\n// initial value of X \nint X = 10;\n\ncout &lt;&lt; \"Before placement new :\" &lt;&lt; endl;\ncout &lt;&lt; \"X : \" &lt;&lt; X &lt;&lt; endl;\ncout &lt;&lt; \"&amp;X : \" &lt;&lt; &amp;X &lt;&lt; endl;\n\n// \u5c06X\u7684\u5185\u5b58\u5206\u914d\u7ed9mem\uff0c\u5373mem==&amp;X \nint* mem = new (&amp;X) int{ 100 };\n\ncout &lt;&lt; \"\\nAfter placement new :\" &lt;&lt; endl;\ncout &lt;&lt; \"X : \" &lt;&lt; X &lt;&lt; endl;\ncout &lt;&lt; \"mem : \" &lt;&lt; mem &lt;&lt; endl;\ncout &lt;&lt; \"&amp;X : \" &lt;&lt; &amp;X &lt;&lt; endl;\n\nreturn 0;\n}\n</code></pre> <ul> <li>\u8f93\u51fa\u7ed3\u679c</li> </ul> <pre><code>Before placement new :\nX : 10\n&amp;X : 010FF8C8\n\nAfter placement new :\nX : 100\nmem : 010FF8C8\n&amp;X : 010FF8C8\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B%E7%9A%84%E5%A5%87%E6%80%AA%E7%9F%A5%E8%AF%86%E7%82%B9/#8","title":"8 *&amp;\u7684\u4f7f\u7528","text":"<ul> <li><code>*&amp;</code>\uff1a\u6307\u9488\u7684\u5f15\u7528\uff0c\u529f\u80fd\u548c\u4f5c\u7528\u4e0e<code>**</code>\u6307\u9488\u7684\u6307\u9488\u7c7b\u578b\u76f8\u4f3c</li> <li>\u89e3\u91ca\uff1a<code>*&amp;</code>\u6307\u9488\u7684\u5f15\u7528\uff0c\u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u5f15\u7528\uff0c\u5e38\u89c1\u7684\u5f15\u7528\u662f\u76f4\u63a5\u6307\u5411\u5bf9\u8c61\uff0c\u800c\u8fd9\u4e2a\u5f15\u7528\u662f\u6307\u5411\u6307\u9488\uff0c\u5177\u6709\u5f15\u7528\u6240\u6709\u529f\u80fd\uff0c\u56e0\u6b64\u5728\u4e00\u5b9a\u573a\u5408\u53ef\u4ee5\u66ff\u4ee3\u6307\u9488\u7684\u6307\u9488<code>**</code>\u4f7f\u7528\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code>void pass_by_point(int* p)\n{\n//Allocate memory for int and store the address in p\np = new int;\n}\nvoid pass_by_point_point(int** p)\n{\n//Allocate memory for int and store the address in p\n*p = new int;\n}\nvoid pass_by_point_reference(int*&amp; p)\n{\np = new int;\n}\n\nint main()\n{\nint* p1 = NULL;\nint* p2 = NULL;\nint* p3 = NULL;\n\npass_by_point(p1); //p1 is null\npass_by_point_point(&amp;p2); pass_by_point_reference(p3); return 0;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B%E7%9A%84%E5%A5%87%E6%80%AA%E7%9F%A5%E8%AF%86%E7%82%B9/#9-extern","title":"9 extern\u6570\u7ec4","text":"<ul> <li>\u58f0\u660e\uff1a<code>char g_arr[1024];</code></li> <li>\u5916\u90e8\u58f0\u660e\uff1a<code>extern char g_arr[];</code></li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%AE%9E%E7%94%A8%E5%A4%84%E7%90%86%E6%8A%80%E5%B7%A7/","title":"\u5b9e\u7528\u5904\u7406\u6280\u5de7","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%AE%9E%E7%94%A8%E5%A4%84%E7%90%86%E6%8A%80%E5%B7%A7/#1","title":"1 \u5185\u5b58\u6cc4\u6f0f\u68c0\u6d4b\u65b9\u6cd5","text":"<p>\u4e0b\u9762\u4ee3\u7801\u4e2d<code>#define _CRTDBG_MAP_ALLOC</code>\u5b8f\u4f5c\u7528\u662f\u8ba9\u5185\u5b58\u6cc4\u6f0f\u4fe1\u606f\u66f4\u5b8c\u5584\uff0c\u53ea\u9002\u5408malloc\u5206\u914d\u5185\u5b58\uff0c\u7528new\u4e0d\u4ea7\u751f\u989d\u5916\u4fe1\u606f</p> <pre><code>#define _CRTDBG_MAP_ALLOC\n#include &lt;stdlib.h&gt;\n#include &lt;crtdbg.h&gt;\n\nint main()\n{\n//\u65b9\u6cd5\u4e00:\u5728\u7a0b\u5e8f\u5f00\u59cb\u4f4d\u7f6e\u52a0\u4e0a _CrtSetDbgFlag(_CRTDBG_ALLOC_MEM_DF | _CRTDBG_LEAK_CHECK_DF);\n_CrtSetDbgFlag(_CRTDBG_ALLOC_MEM_DF | _CRTDBG_LEAK_CHECK_DF);\nint* i1 = new int(1);\nint* i2 = (int*)malloc(4);\n//\u65b9\u6cd5\u4e8c\uff1a\u5728\u7a0b\u5e8f\u7ed3\u675f\u4f4d\u7f6e\u52a0\u4e0a _CrtDumpMemoryLeaks();\n_CrtDumpMemoryLeaks();\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%AE%9E%E7%94%A8%E5%A4%84%E7%90%86%E6%8A%80%E5%B7%A7/#2","title":"2 \u5982\u4f55\u628a\u51fd\u6570\u5b58\u8fdb\u5bb9\u5668\u4e2d","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%AE%9E%E7%94%A8%E5%A4%84%E7%90%86%E6%8A%80%E5%B7%A7/#21-1","title":"2.1 1.\u9488\u5bf9\u51fd\u6570\u58f0\u660e\u51fd\u6570\u6307\u9488","text":"<p>\u4f5c\u7528\uff1a\u51fd\u6570\u6307\u9488\u662f\u7528\u6765\u4f5c\u4e3a\u5bb9\u5668\u7684\u6a21\u677f\u7c7b\u578b - \u5047\u8bbe\u8981\u5b9a\u4e49\u7684\u51fd\u6570\u5982\u4e0b</p> <pre><code>string* fun1(int)\n{\nreturn new string(\"fun1\");\n}\n</code></pre> <ul> <li>\u5bf9\u5e94\u51fd\u6570\u6307\u9488\u58f0\u660e\u5982\u4e0b</li> </ul> <pre><code>typedef string* (*pf)(int);\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%AE%9E%E7%94%A8%E5%A4%84%E7%90%86%E6%8A%80%E5%B7%A7/#22-2","title":"2.2 2.\u5b9a\u4e49\u5bb9\u5668\u7c7b\u578b","text":"<p>\u6ce8\u610f\uff1a\u5bb9\u5668\u662f\u51fd\u6570\u6307\u9488\u7c7b\u578b</p> <pre><code>//\u5411\u91cf\u7c7b\u578b\nvector&lt;pf&gt; v;\n//map\u7c7b\u578b\nmap&lt;string, pf&gt; mpf;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%AE%9E%E7%94%A8%E5%A4%84%E7%90%86%E6%8A%80%E5%B7%A7/#23-3lambda","title":"2.3 3.\u5c06\u51fd\u6570\u540d\u6216lambda\u8868\u8fbe\u5f0f\u5b58\u5165\u5bb9\u5668","text":"<ul> <li>map\u63d2\u5165\u51fd\u6570\u65b9\u6cd5</li> </ul> <pre><code>//map\u4e2d\u63d2\u5165\u51fd\u6570\nmpf.insert(make_pair(\"1\", fun1));\n//map\u4e2d\u63d2\u5165lambda\u8868\u8fbe\u5f0f\nmpf.insert(make_pair(\"3\", [](int)-&gt;string* {return new string(\"fun3\"); }));\n</code></pre> <ul> <li>vector\u63d2\u5165\u51fd\u6570\u65b9\u6cd5</li> </ul> <pre><code>v.push_back(fun1);\nv.push_back([](int)-&gt;string* {return new string(\"fun3\"); });\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%AE%9E%E7%94%A8%E5%A4%84%E7%90%86%E6%8A%80%E5%B7%A7/#24-4","title":"2.4 4.\u4f7f\u7528\u5bb9\u5668\u7c7b\u51fd\u6570","text":"<ul> <li>map\u4e2d\u51fd\u6570\u4f7f\u7528</li> </ul> <pre><code>    if (it != mpf.end)\n{\nstring* pstr = it-&gt;second(1);\ndelete pstr;\n}\n</code></pre> <ul> <li>vector\u4e2d\u51fd\u6570\u4f7f\u7528</li> </ul> <pre><code>v[0](1);\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%AE%9E%E7%94%A8%E5%A4%84%E7%90%86%E6%8A%80%E5%B7%A7/#25","title":"2.5 \u5b8c\u6574\u6d4b\u8bd5\u4ee3\u7801","text":"<pre><code>#include &lt;map&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\nusing namespace std;\ntypedef string* (*pf)(int);\nvector&lt;pf&gt; v;\nmap&lt;string, pf&gt; mpf;\n\nstring* fun1(int)\n{\nreturn new string(\"fun1\");\n}\nstring* fun2(int)\n{\nreturn new string(\"fun2\");\n}\nint setFun()\n{\nv.push_back(fun1);\nv.push_back([](int)-&gt;string* {return new string(\"fun3\"); });\nmpf.insert(make_pair(\"1\", fun1));\nmpf.insert(make_pair(\"2\", fun2));\nmpf.insert(make_pair(\"3\", [](int)-&gt;string* {return new string(\"fun3\"); }));\nreturn 1;\n}\n\nint main(int argc, char* argv[])\n{\nsetFun();\nmap&lt;string, pf&gt;::iterator it= mpf.find(\"3\");\nif (it != mpf.end)\n{\nstring* pstr = it-&gt;second(1);\ndelete pstr;\n}\nv[0](1);\n\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%AE%9E%E7%94%A8%E5%A4%84%E7%90%86%E6%8A%80%E5%B7%A7/#3","title":"3 \u5982\u4f55\u8bbe\u8ba1\u4e00\u4e2a\u7c7b\u4ec5\u6709\u4e00\u4e2a\u5b9e\u4f8b","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%AE%9E%E7%94%A8%E5%A4%84%E7%90%86%E6%8A%80%E5%B7%A7/#4-c","title":"4 C++\u53ef\u4ee5\u5728\u5934\u6587\u4ef6\u4e2d\u653e\u5168\u5c40\u53d8\u91cf\u5417","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%AE%9E%E7%94%A8%E5%A4%84%E7%90%86%E6%8A%80%E5%B7%A7/#5","title":"5 \u5224\u65ad\u6587\u672c\u7f16\u7801\u683c\u5f0f","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%AE%9E%E7%94%A8%E5%A4%84%E7%90%86%E6%8A%80%E5%B7%A7/#51-utf-8","title":"5.1 utf-8 \u683c\u5f0f\u8868\u793a\u5b57\u7b26\u8303\u56f4","text":"Unicode/UCS-4 bit \u6570 UTF-8 byte \u6570 0000~007F 0~7 0XXX XXXX 1 0080~07FF 8~11 110X XXXX 10XX XXXX 2 0800~FFFF 12~16 1110XXXX 10XXXXXX 10XXXXXX 3 10000~1FFFFF 17~21 11110XXX 10XXXXXX 10XXXXXX 10XXXXXX 4"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%AE%9E%E7%94%A8%E5%A4%84%E7%90%86%E6%8A%80%E5%B7%A7/#52-utf-8-utf-8","title":"5.2 \u5229\u7528 utf-8 \u7f16\u7801\u7279\u6027\u6765\u5224\u65ad\u6587\u672c\u662f\u5426\u662f utf-8 \u7f16\u7801","text":"<pre><code>bool IsUTF8(const void* pBuffer, long size)\n{\nbool IsUTF8 = true;\nunsigned char* start = (unsigned char*)pBuffer;\nunsigned char* end = (unsigned char*)pBuffer + size;\nwhile (start &lt; end)\n{\nif (*start &lt; 0x80) // (10000000): \u503c\u5c0f\u4e8e0x80\u7684\u4e3aASCII\u5b57\u7b26\n{\nstart++;\n}\nelse if (*start &lt; (0xC0)) // (11000000): \u503c\u4ecb\u4e8e0x80\u4e0e0xC0\u4e4b\u95f4\u7684\u4e3a\u65e0\u6548UTF-8\u5b57\u7b26\n{\nIsUTF8 = false;\nbreak;\n}\nelse if (*start &lt; (0xE0)) // (11100000): \u6b64\u8303\u56f4\u5185\u4e3a2\u5b57\u8282UTF-8\u5b57\u7b26\n{\nif (start &gt;= end - 1)\n{\nbreak;\n}\n\nif ((start[1] &amp; (0xC0)) != 0x80)\n{\nIsUTF8 = false;\nbreak;\n}\n\nstart += 2;\n}\nelse if (*start &lt; (0xF0)) // (11110000): \u6b64\u8303\u56f4\u5185\u4e3a3\u5b57\u8282UTF-8\u5b57\u7b26\n{\nif (start &gt;= end - 2)\n{\nbreak;\n}\n\nif ((start[1] &amp; (0xC0)) != 0x80 || (start[2] &amp; (0xC0)) != 0x80)\n{\nIsUTF8 = false;\nbreak;\n}\n\nstart += 3;\n}\nelse\n{\nIsUTF8 = false;\nbreak;\n}\n}\n\nreturn IsUTF8;\n}\nbool CConvertCharset::IsUTF8File(const char* pFileName)\n{\nFILE *f = NULL;\nfopen_s(&amp;f, pFileName, \"rb\");\nif (NULL == f)\n{\nreturn false;\n}\n\nfseek(f, 0, SEEK_END);\nlong lSize = ftell(f);\nfseek(f, 0, SEEK_SET);  //\u6216rewind(f);\n\nchar *pBuff = new char[lSize + 1];\nmemset(pBuff, 0, lSize + 1);\nfread(pBuff, lSize, 1, f);\nfclose(f);\n\nbool bIsUTF8 = IsUTF8Text(pBuff, lSize);\ndelete []pBuff;\npBuff = NULL;\n\nreturn bIsUTF8;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%AE%9E%E7%94%A8%E5%A4%84%E7%90%86%E6%8A%80%E5%B7%A7/#6","title":"6 \u65e0\u62f7\u8d1d\u7c7b\u7684\u5b9e\u73b0","text":"<ol> <li>\u7f16\u5199\u4e00\u4e2a\u57fa\u7c7b\uff0c\u5c06\u62f7\u8d1d\u6784\u9020\uff0c\u62f7\u8d1d\u590d\u5236\u79c1\u6709\u5316</li> <li>\u7c7b\u79c1\u6709\u57fa\u7c7b\u4e0a\u9762\u7684\u7c7b\u3002</li> </ol> <pre><code>class noncopyable\n{\nprotected:\nnoncopyable() {}\n~noncopyable() {}\nprivate:\nnoncopyable(const noncopyable&amp;);\nconst noncopyable&amp; operator=(const noncopyable&amp;);\n};\nclass A : private noncopyable\n{\n\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81%E7%BC%96%E7%A0%81%E5%B8%B8%E7%94%A8%E6%8A%80%E5%B7%A7/","title":"\u5f00\u6e90\u4ee3\u7801\u7f16\u7801\u5e38\u7528\u6280\u5de7","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81%E7%BC%96%E7%A0%81%E5%B8%B8%E7%94%A8%E6%8A%80%E5%B7%A7/#1-dowhile-0","title":"1 do{...}while (0) \u7684\u610f\u4e49\u548c\u7528\u6cd5","text":"<ul> <li>\u53c2\u8003\u8d44\u6599</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81%E7%BC%96%E7%A0%81%E5%B8%B8%E7%94%A8%E6%8A%80%E5%B7%A7/#2-void-val","title":"2 (void) val \u7684\u610f\u4e49\u548c\u7528\u6cd5","text":"<ul> <li>\u529f\u80fd\uff1a\u5728\u4e0d\u4f7f\u7528\u51fd\u6570\u7684\u53c2\u6570\u65f6\uff0c\u4f7f\u7528void\u4fee\u9970\u53c2\u6570\u53ef\u4ee5\u4f7f\u7f16\u8bd1\u5668\u4e0d\u8b66\u544a</li> <li>\u793a\u4f8b</li> </ul> <pre><code>int fun(int a)\n{\n(void)a;\nreturn 0;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81%E7%BC%96%E7%A0%81%E5%B8%B8%E7%94%A8%E6%8A%80%E5%B7%A7/#3-include","title":"3 include \u5b9e\u73b0\u6587\u4ef6","text":"<ul> <li>\u4f5c\u7528\uff1a\u901a\u5e38\u7528\u4e8e\u65e2\u53ef\u4ee5\u5c06\u5b9e\u73b0\u4e0e\u58f0\u660e\u5206\u5f00\uff08\u52a8\u6001\u5e93\u573a\u666f\uff09\uff0c\u53c8\u53ef\u4ee5\u5b9e\u73b0\u548c\u58f0\u660e\u5728\u540c\u4e00\u4e2a\u5934\u6587\u4ef6\uff08\u4fbf\u4e8e\u4f7f\u7528\u8005\u76f4\u63a5\u5305\u542b\u5934\u6587\u4ef6\uff0c\u800c\u4e0d\u9700\u8981\u94fe\u63a5\u52a8\u6001\u5e93\uff09\u3002 <p>\u4e00\u4e0b\u4ee5 asio \u4e2d\u7c7b endpoint \u5b9e\u73b0\u4ee3\u7801\u6765\u8bb2\u89e3</p> </li> <li><code>endpoint. hpp</code> \u6587\u4ef6</li> </ul> <pre><code>class endpoint\n{\n... \u7701\u7565\nASIO_DECL endpoint(int family,\nunsigned short port_num) ASIO_NOEXCEPT;\n... \u7701\u7565\n}\n\n#if defined(ASIO_HEADER_ONLY)\n# include \"asio/ip/detail/impl/endpoint.ipp\"\n#endif // defined(ASIO_HEADER_ONLY)\n</code></pre> <ul> <li><code>endpoint.ipp</code></li> </ul> <pre><code>endpoint::endpoint(int family, unsigned short port_num) ASIO_NOEXCEPT\n: data_()\n{\n... \u7701\u7565\n}\n</code></pre> <ul> <li><code>ASIO_HEADER_ONLY</code> \u5b9a\u4e49\u5982\u4e0b</li> </ul> <pre><code>// Default to a header-only implementation. The user must specifically request\n// separate compilation by defining either ASIO_SEPARATE_COMPILATION or\n// ASIO_DYN_LINK (as a DLL/shared library implies separate compilation).\n#if !defined(ASIO_HEADER_ONLY)\n# if !defined(ASIO_SEPARATE_COMPILATION)\n#  if !defined(ASIO_DYN_LINK)\n#   define ASIO_HEADER_ONLY 1\n#  endif // !defined(ASIO_DYN_LINK)\n# endif // !defined(ASIO_SEPARATE_COMPILATION)\n#endif // !defined(ASIO_HEADER_ONLY)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E7%BC%96%E8%AF%91%E5%99%A8%E7%94%9F%E6%88%90%E7%9A%84%E7%AC%A6%E5%8F%B7/","title":"\u7f16\u8bd1\u5668\u751f\u6210\u7684\u7b26\u53f7","text":"<ul> <li>\u7f16\u8bd1\u5668\u751f\u6210\u7684\u7b26\u53f7</li> <li>dll \u5bfc\u51fa\u51fd\u6570\u540d\u7684\u90a3\u4e9b\u4e8b</li> <li>1. \u4f7f\u7528\u4f20\u7edf\u7684\u6a21\u5757\u5b9a\u4e49\u6587\u4ef6 (.def)</li> <li>2. Visual C++ \u63d0\u4f9b\u7684\u65b9\u4fbf\u65b9\u6cd5</li> <li>3. \u4f7f\u7528\u4f20\u7edf\u7684\u6a21\u5757\u5b9a\u4e49\u6587\u4ef6 (.def)</li> <li>4. Visual C++ \u63d0\u4f9b\u7684\u65b9\u4fbf\u65b9\u6cd5</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E7%BC%96%E8%AF%91%E5%99%A8%E7%94%9F%E6%88%90%E7%9A%84%E7%AC%A6%E5%8F%B7/#1-dll","title":"1 dll \u5bfc\u51fa\u51fd\u6570\u540d\u7684\u90a3\u4e9b\u4e8b","text":"<p>\u5173\u952e\u5b57\uff1a\u3000VC++ \u3000DLL \u5bfc\u51fa\u51fd\u6570\u3000 \u7ecf\u5e38\u4f7f\u7528VC6\u7684Dependency\u67e5\u770bDLL\u5bfc\u51fa\u51fd\u6570\u7684\u540d\u5b57\uff0c\u4f1a\u53d1\u73b0\u6709DLL\u5bfc\u51fa\u51fd\u6570\u7684\u540d\u5b57\u6709\u65f6\u5927\u4e0d\u76f8\u540c\uff0c\u5bfc\u81f4\u4e0d\u540c\u7684\u539f\u56e0\u5927\u591a\u662f\u548c\u7f16\u8bd1DLL\u65f6\u5019\u6307\u5b9aDLL\u5bfc\u51fa\u51fd\u6570\u7684\u754c\u5b9a\u7b26\u6709\u5173\u7cfb\u3002 VC++\u652f\u6301\u4e24\u79cd\u8bed\u8a00\uff1a\u5373C/C++\uff0c\u8fd9\u4e5f\u662f\u9020\u6210DLL\u5bfc\u51fa\u51fd\u6570\u5dee\u5f02\u7684\u6839\u6e90 \u6211\u4eec\u7528VS2008\u65b0\u5efa\u4e2aDLL\u5de5\u7a0b\uff0c\u5de5\u7a0b\u540d\u4e3a\"TestDLL\" \u628a\u9ed8\u8ba4\u7684\u6e90\u6587\u4ef6\u540e\u7f00 .CPP\u6539\u4e3a.C\uff08C\u6587\u4ef6\uff09 \u8f93\u5165\u6d4b\u8bd5\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>int _stdcall MyFunction(int iVariant)\n{\nreturn 0;\n}\n</code></pre> <p>\u4e3a\u4e86\u5bfc\u51fa\u4e0a\u9762\u8fd9\u4e2a\u51fd\u6570\uff0c\u6211\u4eec\u6709\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u6cd5\uff1a</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E7%BC%96%E8%AF%91%E5%99%A8%E7%94%9F%E6%88%90%E7%9A%84%E7%AC%A6%E5%8F%B7/#2-def","title":"2 \u4f7f\u7528\u4f20\u7edf\u7684\u6a21\u5757\u5b9a\u4e49\u6587\u4ef6 (.def)","text":"<p>\u65b0\u5efa\u4e00\u4e2a\u540e\u7f00\u4e3a.def \u7684\u6587\u672c\u6587\u4ef6 (\u8fd9\u91cc\u5efa\u4e00\u4e2a TestDll.Def)\uff0c\u6587\u4ef6\u5185\u5bb9\u4e3a\uff1a</p> <pre><code>LIBRARY TestDll\nEXPORTS\nMyFunction\n</code></pre> <p>\u5728 Link \u65f6\u6307\u5b9a\u8f93\u5165\u4f9d\u8d56\u6587\u4ef6\uff1a/DEF:\"TestDll.Def\"</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E7%BC%96%E8%AF%91%E5%99%A8%E7%94%9F%E6%88%90%E7%9A%84%E7%AC%A6%E5%8F%B7/#3-visual-c","title":"3 Visual C++ \u63d0\u4f9b\u7684\u65b9\u4fbf\u65b9\u6cd5","text":"<p>\u5728 01 \u884c\u7684 int \u524d\u52a0\u5165 <code>__declspec(dllexport)</code> \u5173\u952e\u5b57 \u901a\u8fc7\u4ee5\u4e0a\u4e24\u79cd\u65b9\u6cd5\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5bfc\u51faMyFunction\u51fd\u6570\u3002 \u6211\u4eec\u7528Dependency\u67e5\u770b\u5bfc\u51fa\u7684\u51fd\u6570\uff1a \u7b2c\u4e00\u79cd\u65b9\u6cd5\u5bfc\u51fa\u7684\u51fd\u6570\u4e3a\uff1aMyFunction \u7b2c\u4e8c\u79cd\u65b9\u6cd5\u5bfc\u51fa\u7684\u51fd\u6570\u4e3a\uff1a<code>_MyFunction@4</code> __stdcall\u4f1a\u4f7f\u5bfc\u51fa\u51fd\u6570\u540d\u5b57\u524d\u9762\u52a0\u4e00\u4e2a\u4e0b\u5212\u7ebf\uff0c\u540e\u9762\u52a0\u4e00\u4e2a@\u518d\u52a0\u4e0a\u53c2\u6570\u7684\u5b57\u8282\u6570\uff0c\u6bd4\u5982_MyFunction@4\u7684\u53c2\u6570\uff08int iVariant\uff09\u5c31\u662f4\u4e2a\u5b57\u8282 __fastcall\u4e0e __stdcall\u7c7b\u4f3c\uff0c\u4e0d\u8fc7\u524d\u9762\u6ca1\u6709\u4e0b\u5212\u7ebf\uff0c\u800c\u662f\u4e00\u4e2a@\uff0c\u6bd4\u5982@MyFunction@4 __cdecl\u5219\u662f\u59cb\u51fd\u6570\u540d\u3002 \u5c0f\u7ed3\uff1a\u5982\u679c\u8981\u5bfc\u51faC\u6587\u4ef6\u4e2d\u7684\u51fd\u6570\uff0c\u5e76\u4e14\u4e0d\u8ba9\u7f16\u8bd1\u5668\u6539\u52a8\u51fd\u6570\u540d\uff0c\u7528def\u6587\u4ef6\u5bfc\u51fa\u51fd\u6570\u3002 \u4e0b\u9762\u6211\u4eec\u6765\u770b\u4e00\u4e0bC++\u6587\u4ef6 \u6211\u4eec\u7528VS2008\u65b0\u5efa\u4e2aDLL\u5de5\u7a0b\uff0c\u5de5\u7a0b\u540d\u4e3a\"TestDLL\" \u9ed8\u8ba4\u7684\u6e90\u6587\u4ef6\u540e\u7f00\u4e3a .CPP \uff08\u5373C++\u6587\u4ef6\uff09\u3002 \u8f93\u5165\u6d4b\u8bd5\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>int _stdcall MyFunction(int iVariant)\n{\nreturn 0;\n}\n</code></pre> <p>\u4e3a\u4e86\u5bfc\u51fa\u4e0a\u9762\u8fd9\u4e2a\u51fd\u6570\uff0c\u6211\u4eec\u6709\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u6cd5\uff1a</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E7%BC%96%E8%AF%91%E5%99%A8%E7%94%9F%E6%88%90%E7%9A%84%E7%AC%A6%E5%8F%B7/#4-def","title":"4 \u4f7f\u7528\u4f20\u7edf\u7684\u6a21\u5757\u5b9a\u4e49\u6587\u4ef6 (.def)","text":"<p>\u65b0\u5efa\u4e00\u4e2a \u540e\u7f00\u4e3a.def\u7684\u6587\u672c\u6587\u4ef6(\u8fd9\u91cc\u5efa\u4e00\u4e2aTestDll.Def)\uff0c\u6587\u4ef6\u5185\u5bb9\u4e3a\uff1a LIBRARY TestDll EXPORTS MyFunction \u5728 Link \u65f6\u6307\u5b9a\u8f93\u5165\u4f9d\u8d56\u6587\u4ef6\uff1a/DEF:\"TestDll.Def\"</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E7%BC%96%E8%AF%91%E5%99%A8%E7%94%9F%E6%88%90%E7%9A%84%E7%AC%A6%E5%8F%B7/#5-visual-c","title":"5 Visual C++ \u63d0\u4f9b\u7684\u65b9\u4fbf\u65b9\u6cd5","text":"<p>\u572801\u884c\u7684int \u524d\u52a0\u5165 __declspec(dllexport) \u5173\u952e\u5b57 \u901a\u8fc7\u4ee5\u4e0a\u4e24\u79cd\u65b9\u6cd5\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5bfc\u51faMyFunction\u51fd\u6570\u3002 \u6211\u4eec\u7528Dependency\u67e5\u770b\u5bfc\u51fa\u7684\u51fd\u6570\uff1a \u7b2c\u4e00\u79cd\u65b9\u6cd5\u5bfc\u51fa\u7684\u51fd\u6570\u4e3a\uff1a MyFunction \u7b2c\u4e8c\u79cd\u65b9\u6cd5\u5bfc\u51fa\u7684\u51fd\u6570\u4e3a\uff1a ?MyFunction@@YGHH@Z \u53ef\u4ee5\u770b\u5230 \u7b2c\u4e8c\u79cd\u65b9\u6cd5\u5f97\u5230\u7684 \u5bfc\u51fa\u51fd\u6570\u540d \u5e76\u4e0d\u662f\u6211\u4eec\u60f3\u8981\u7684\uff0c\u5982\u679c\u5728exe\u4e2d\u7528\u663e\u793a\u65b9\u6cd5\uff08LoadLibrary\u3001GetProcAddress\uff09\u8c03\u7528 MyFunction \u80af\u5b9a\u4f1a\u5931\u8d25\u3002 \u4f46\u662f\u7528\u5f15\u5165\u5e93 (<code>*.LIB</code>) \u7684\u65b9\u5f0f\u8c03\u7528\uff0c\u5219\u7f16\u8bd1\u5668\u81ea\u52a8\u5904\u7406\u8f6c\u6362\u51fd\u6570\u540d\uff0c\u6240\u4ee5\u603b\u662f\u6ca1\u6709\u95ee\u9898\u3002 \u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u7684\u65b9\u6cd5\u662f\uff1a \u7528VC \u63d0\u4f9b\u7684\u9884\u5904\u7406\u6307\u793a\u7b26 \"#pragma\" \u6765\u6307\u5b9a\u94fe\u63a5\u9009\u9879\u3002 \u5982\u4e0b\uff1a <code>#pragma comment(linker, \"/EXPORT:MyFunction=?MyFunction@@YGHH@Z\")</code> \u8fd9\u65f6\uff0c\u5c31\u4f1a\u53d1\u73b0\u5bfc\u51fa\u7684\u51fd\u6570\u540d\u5b57\u8868\u4e2d\u5df2\u7ecf\u6709\u4e86\u6211\u4eec\u60f3\u8981\u7684MyFunction\u3002\u4f46\u6211\u4eec\u53d1\u73b0\u539f\u6765\u7684\u90a3\u4e2a ?MyFunction@@YGHH@Z \u51fd\u6570\u8fd8\u5728\uff0c\u8fd9\u65f6\u5c31\u53ef\u4ee5\u628a __declspec() \u4fee\u9970\u53bb\u6389\uff0c\u53ea\u9700\u8981 pragma \u6307\u4ee4\u5373\u53ef\u3002 \u800c\u4e14\u8fd8\u53ef\u4ee5\u4f7f\u5982\u4e0b\u5f62\u5f0f\uff1a <code>#pragma comment(linker, \"/EXPORT:MyFunction=_MyFunction@4,PRIVATE\")</code> PRIVATE \u7684\u4f5c\u7528\u4e0e\u5176\u5728 def \u6587\u4ef6\u4e2d\u7684\u4f5c\u7528\u4e00\u6837\u3002\u66f4\u591a\u7684#pragram\u8bf7\u67e5\u770bMSDN\u3002 \u5c0f\u7ed3\uff1a\u5982\u679c\u8981\u5bfc\u51faC++\u6587\u4ef6\u4e2d\u7684\u51fd\u6570\uff0c\u5e76\u4e14\u4e0d\u8ba9\u7f16\u8bd1\u5668\u6539\u52a8\u51fd\u6570\u540d\uff0c\u7528def\u6587\u4ef6\u5bfc\u51fa\u51fd\u6570\u3002 \u540c\u65f6\u53ef\u4ee5\u7528#pragma\u6307\u4ee4\uff08C \u4e2d\u4e5f\u53ef\u4ee5\u7528\uff09\u3002 \u603b\u7ed3\uff1a C++\u7f16\u8bd1\u5668\u5728\u751f\u6210DLL\u65f6\uff0c\u4f1a\u5bf9\u5bfc\u51fa\u7684\u51fd\u6570\u8fdb\u884c\u540d\u5b57\u6539\u7f16\uff0c\u5e76\u4e14\u4e0d\u540c\u7684\u7f16\u8bd1\u5668\u4f7f\u7528\u7684\u6539\u7f16\u89c4\u5219\u4e0d\u4e00\u6837\uff0c\u56e0\u6b64\u6539\u7f16\u540e\u7684\u540d\u5b57\u4e5f\u662f\u4e0d\u540c\u7684\uff08\u4e00\u822c\u6d89\u53ca\u5230C++ \u4e2d\u7684\u91cd\u8f7d\u7b49\uff09\u3002 \u5982\u679c\u5229\u7528\u4e0d\u540c\u7f16\u8bd1\u5668\u5206\u522b\u751f\u6210DLL\u548c\u8bbf\u95eeDLL\u7684exe\u7a0b\u5e8f\uff0c\u540e\u8005\u5728\u8bbf\u95ee\u8be5DLL\u7684\u5bfc\u51fa\u51fd\u6570\u65f6\u5c31\u4f1a\u51fa\u73b0\u95ee\u9898\u3002\u5982\u4e0a\u4f8b\u4e2d\u51fd\u6570MyFunction\u5728C++\u7f16\u8bd1\u5668\u6539\u7f16\u540e\u7684\u540d\u5b57\u662f?MyFunction@@YGHH@Z\u3002\u6211\u4eec\u5e0c\u671b\u7f16\u8bd1\u540e\u7684\u540d\u5b57\u4e0d\u53d1\u751f\u6539\u53d8\uff0c\u8fd9\u91cc\u6709\u51e0\u79cd\u65b9\u6cd5\u3002 \u7b2c\u4e00\u79cd\u65b9\u6cd5\u662f\u901a\u8fc7\u4e00\u4e2a\u79f0\u4e3a\u6a21\u5757\u5b9a\u4e49\u6587\u4ef6DEF\u6765\u89e3\u51b3\u3002 LIBRARY TestDll EXPORTS MyFunction LIBRARY \u7528\u6765\u6307\u5b9a\u52a8\u6001\u94fe\u63a5\u5e93\u5185\u90e8\u540d\u79f0\u3002\u8be5\u540d\u79f0\u4e0e\u751f\u6210\u7684\u52a8\u6001\u94fe\u63a5\u5e93\u540d\u4e00\u5b9a\u8981\u5339\u914d\uff0c\u8fd9\u53e5\u4ee3\u7801\u4e0d\u662f\u5fc5\u987b\u7684\u3002 EXPORTS\u8bf4\u660e\u4e86DLL\u5c06\u8981\u5bfc\u51fa\u7684\u51fd\u6570\uff0c\u4ee5\u53ca\u4e3a\u8fd9\u4e9b\u5bfc\u51fa\u51fd\u6570\u6307\u5b9a\u7684\u7b26\u53f7\u540d\u3002 \u7b2c\u4e8c\u79cd\u662f\u5b9a\u4e49\u5bfc\u51fa\u51fd\u6570\u65f6\u52a0\u4e0a\u9650\u5b9a\u7b26\uff1aextern \"C\" \u5982\uff1a<code>#define DLLEXPORT_API extern \"C\" _declspec(dllexport)</code> \u4f46extern \"C\"\u53ea\u89e3\u51b3\u4e86C\u548cC++\u8bed\u65b9\u4e4b\u95f4\u8c03\u7528\u7684\u95ee\u9898(extern \"C\" \u662f\u544a\u8bc9\u7f16\u8bd1\u5668\uff0c\u8ba9\u5b83\u6309C\u7684\u65b9\u5f0f\u7f16\u8bd1)\uff0c\u5b83\u53ea\u80fd\u7528\u4e8e\u5bfc\u51fa\u5168\u5c40\u51fd\u6570\u8fd9\u79cd\u60c5\u51b5 \u800c\u4e0d\u80fd\u5bfc\u51fa\u4e00\u4e2a\u7c7b\u7684\u6210\u5458\u51fd\u6570\u3002 \u540c\u65f6\u5982\u679c\u5bfc\u51fa\u51fd\u6570\u7684\u8c03\u7528\u7ea6\u5b9a\u53d1\u751f\u6539\u53d8\uff0c\u5373\u4f7f\u4f7f\u7528 extern \"C\"\uff0c\u7f16\u8bd1\u540e\u7684\u51fd\u6570\u540d\u8fd8\u662f\u4f1a\u53d1\u751f\u6539\u53d8\u3002\u4f8b\u5982\u4e0a\u9762\u6211\u4eec\u52a0\u5165_stdcall \u5173\u952e\u5b57\u8bf4\u660e\u8c03\u7528\u7ea6\u5b9a\uff08\u6807\u51c6\u8c03\u7528\u7ea6\u5b9a\uff0c\u4e5f\u5c31\u662f WINAPI \u8c03\u7528\u7ea6\u5b9a\uff09\u3002</p> <pre><code>#define DLLEXPORT_API extern \"C\" _declspec(dllexport)\nDLLEXPORT_API int _stdcall MyFunction(int iVariant)\n{\nreturn 0;\n}\n</code></pre> <p>\u7f16\u8bd1\u540e\u51fd\u6570\u540dMyFunction\u6539\u7f16\u6210\u4e86_MyFunction@4 \u901a\u8fc7\u7b2c\u4e00\u79cd\u65b9\u6cd5\u6a21\u5757\u5b9a\u4e49\u6587\u4ef6\u7684\u65b9\u5f0fDLL\u7f16\u8bd1\u540e\u5bfc\u51fa\u51fd\u6570\u540d\u4e0d\u4f1a\u53d1\u751f\u6539\u53d8\u3002 DLL(\u52a8\u6001\u5e93)\u5bfc\u51fa\u51fd\u6570\u540d\u4e71\u7801\u542b\u4e49 C++\u7f16\u8bd1\u65f6\u51fd\u6570\u540d\u4fee\u9970\u7ea6\u5b9a\u89c4\u5219\uff1a   __stdcall\u8c03\u7528\u7ea6\u5b9a\uff1a   1\u3001\u4ee5\"?\"\u6807\u8bc6\u51fd\u6570\u540d\u7684\u5f00\u59cb\uff0c\u540e\u8ddf\u51fd\u6570\u540d\uff1b   2\u3001\u51fd\u6570\u540d\u540e\u9762\u4ee5\"@@YG\"\u6807\u8bc6\u53c2\u6570\u8868\u7684\u5f00\u59cb\uff0c\u540e\u8ddf\u53c2\u6570\u8868\uff1b   3\u3001\u53c2\u6570\u8868\u4ee5\u4ee3\u53f7\u8868\u793a\uff1a - X--void - D--char - E--unsigned char - F--short * H--int - I--unsigned int - J--long - K--unsigned long - M--float - N--double - <code>_N--bool</code>   PA--\u8868\u793a\u6307\u9488\uff0c\u540e\u9762\u7684\u4ee3\u53f7\u8868\u660e\u6307\u9488\u7c7b\u578b\uff0c\u5982\u679c\u76f8\u540c\u7c7b\u578b\u7684\u6307\u9488\u8fde\u7eed\u51fa\u73b0\uff0c\u4ee5\"0\"\u4ee3\u66ff\uff0c\u4e00\u4e2a\"0\"\u4ee3\u8868\u4e00\u6b21\u91cd\u590d\uff1b   4\u3001\u53c2\u6570\u8868\u7684\u7b2c\u4e00\u9879\u4e3a\u8be5\u51fd\u6570\u7684\u8fd4\u56de\u503c\u7c7b\u578b\uff0c\u5176\u540e\u4f9d\u6b21\u4e3a\u53c2\u6570\u7684\u6570\u636e\u7c7b\u578b,\u6307\u9488\u6807\u8bc6\u5728\u5176\u6240\u6307\u6570\u636e\u7c7b\u578b\u524d\uff1b</p> <p>5\u3001\u53c2\u6570\u8868\u540e\u4ee5\"@Z\"\u6807\u8bc6\u6574\u4e2a\u540d\u5b57\u7684\u7ed3\u675f\uff0c\u5982\u679c\u8be5\u51fd\u6570\u65e0\u53c2\u6570\uff0c\u5219\u4ee5\"Z\"\u6807\u8bc6\u7ed3\u675f\u3002   \u5176\u683c\u5f0f\u4e3a <code>?functionname@@YG*****@Z\"\u6216\"?functionname@@YG*XZ</code>\uff0c   - \u4f8b\u5982</p> <pre><code>int Test1(char *var1, unsigned long)-----\"?Test1@@YGHPADK@Z\" void Test2()-----\"?Test2@@YGXXZ\"\n</code></pre> <p>__cdecl\u8c03\u7528\u7ea6\u5b9a\uff1a   \u89c4\u5219\u540c\u4e0a\u9762\u7684_stdcall\u8c03\u7528\u7ea6\u5b9a\uff0c\u53ea\u662f\u53c2\u6570\u8868\u7684\u5f00\u59cb\u6807\u8bc6\u7531\u4e0a\u9762\u7684\"@@YG\"\u53d8\u4e3a\"@@YA\"\u3002   __fastcall\u8c03\u7528\u7ea6\u5b9a\uff1a   \u89c4\u5219\u540c\u4e0a\u9762\u7684_stdcall\u8c03\u7528\u7ea6\u5b9a\uff0c\u53ea\u662f\u53c2\u6570\u8868\u7684\u5f00\u59cb\u6807\u8bc6\u7531\u4e0a\u9762\u7684\"@@YG\"\u53d8\u4e3a\"@@YI\"\u3002   \u5982\u679c\u8981\u7528DEF\u6587\u4ef6\u8f93\u51fa\u4e00\u4e2a\"C++\"\u7c7b\uff0c\u5219\u628a\u8981\u8f93\u51fa\u7684\u6570\u636e\u548c\u6210\u5458\u7684\u4fee\u9970\u540d\u90fd\u5199\u5165.def\u6a21\u5757\u5b9a\u4e49\u6587\u4ef6   \u6240\u4ee5... \u901a\u8fc7def\u6587\u4ef6\u6765\u5bfc\u51faC++\u7c7b\u662f\u5f88\u9ebb\u70e6\u7684,\u5e76\u4e14\u8fd9\u4e2a\u4fee\u9970\u540d\u662f\u4e0d\u53ef\u907f\u514d\u7684</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/C%2B%2B%E8%B0%83java%E5%A1%AB%E5%9D%91/","title":"C++\u8c03java\u586b\u5751","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/C%2B%2B%E8%B0%83java%E5%A1%AB%E5%9D%91/#1-jni_createjavavm","title":"1 \u4f7f\u7528JNI_CreateJavaVM\u51fa\u73b0\u9519\u8bef","text":"<ul> <li>\u539f\u56e0\uff1a\u53ef\u80fd\u4ec5\u4ec5\u53ea\u628ajvm.dll\u653e\u5165\u5de5\u7a0b\u4e2d\u4f46\u4f7f\u7528JNI\u8fd8\u9700\u8981jre\u4e2d\u5176\u5b83\u4e1c\u897f\u3002</li> <li>\u89e3\u51b3\u65b9\u6cd5\uff1a\u76f4\u63a5\u4f7f\u7528LoadLibrary\u52a0\u8f7djre\u5b89\u88c5\u7684\u8def\u5f84\u4e0bjvm.dll\u5417\uff0c\u800c\u4e0d\u662f\u62f7\u8d1d\u5230\u5f53\u524d\u9879\u76ee\u3002</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/C%2B%2B%E8%B0%83java%E5%A1%AB%E5%9D%91/#2-jni_createjavavm0xfffffffd","title":"2 \u4f7f\u7528 JNI_CreateJavaVM\u8fd4\u56de0xFFFFFFFD","text":"<ul> <li>\u539f\u56e0\uff1a\u6b64\u9519\u8bef\u662f\u6307JNI\u7248\u672c\u53f7\u9519\u8bef</li> <li>\u89e3\u51b3\u65b9\u6cd5\uff1a\u5728\u7ed9JavaVMInitArgs\u53d8\u91cf\u8bbe\u7f6eversion\u503c\u65f6\uff0c\u4f7f\u7528\u7cfb\u7edf\u63d0\u4f9b\u7684JNI_VERSION_1_1,JNI_VERSION_1_2,JNI_VERSION_1_4,JNI_VERSION_1_6\u5b8f\uff0c\u4e14\u4f60\u4f7f\u7528\u7684\u7248\u672c\u8981\u5927\u4e8e\u6216\u7b49\u4e8e\u4f60\u6307\u5b9a\u7684\u7248\u672c</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/jni%20%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E/","title":"jni \u63a5\u53e3\u8bf4\u660e","text":"<ul> <li>jni \u5b98\u65b9 api \u6587\u6863</li> <li>jni \u5f00\u53d1\u6307\u5357</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/jni%20%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E/#1-jnigetstringchars","title":"1 JNI\u4e2dGetStringChars","text":"<ul> <li>JNI\u4e2dGetStringChars\u51fd\u6570\u4e2d\u7684isCopy</li> <li>\u5b9a\u4e49\uff1a <code>const char * GetStringUTFChars(JNIEnv *env, jstring string, jboolean *isCopy)</code><ul> <li><code>isCopy</code> \uff1a\u5f53\u51fd\u6570\u6267\u884c\u5b8c\u540e\uff0c<code>isCopy ==JNI_TRUE</code> \u8868\u793a\u5f97\u5230\u7684\u5b57\u7b26\u4e32\u662f java.lang.String \u7684\u62f7\u8d1d\uff1b<code>isCopy ==JNI_FALSE</code> \u8868\u793a\u5f97\u5230\u7684\u5b57\u7b26\u4e32\u662f java.lang.String \u5f15\u7528\uff0c\u672c\u5730\u4ee3\u7801\u51b3\u4e0d\u80fd\u4fee\u6539\u5b57\u7b26\u4e32\u7684\u5185\u5bb9\uff0c\u5426\u5219JVM\u4e2d\u7684\u539f\u59cb\u5b57\u7b26\u4e32\u4e5f\u4f1a\u88ab\u4fee\u6539\uff0c\u8fd9\u4f1a\u6253\u7834JAVA\u8bed\u8a00\u4e2d\u5b57\u7b26\u4e32\u4e0d\u53ef\u53d8\u7684\u89c4\u5219\u3002</li> </ul> </li> <li>\u6ce8\u610f\uff1a<ul> <li>\u901a\u5e38\u6211\u4eec\u4e0d\u5173\u6ce8 isCopy \u7684\u503c\uff0c\u53ef\u4ee5\u4f20NULL\u3002</li> <li>\u5728\u4e0d\u518d\u4f7f\u7528\u8fd4\u56de\u7684\u5b57\u7b26\u4e32\uff0c\u9700\u8981\u8c03\u7528 <code>ReleaseStringUTFChars</code> \u8fdb\u884c\u91ca\u653e\u3002</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>JNIEXPORT jstring JNICALL Java_com_study_jnilearn_Sample_sayHello(JNIEnv *env, jclass cls, jstring j_str)\n{\nconst char *c_str = NULL;\nchar buff[128] = {0};\njboolean isCopy; // \u8fd4\u56deJNI_TRUE\u8868\u793a\u539f\u5b57\u7b26\u4e32\u7684\u62f7\u8d1d\uff0c\u8fd4\u56deJNI_FALSE\u8868\u793a\u8fd4\u56de\u539f\u5b57\u7b26\u4e32\u7684\u6307\u9488\nc_str = (*env)-&gt;GetStringUTFChars(env, j_str, &amp;isCopy);\nprintf(\"isCopy:%d\\n\", isCopy);\nif (c_str == NULL)\n{\nreturn NULL;\n}\nprintf(\"C_str: %s \\n\", c_str);\nsprintf(buff, \"hello %s\", c_str);\n(*env)-&gt;ReleaseStringUTFChars(env, j_str, c_str);\nreturn (*env)-&gt;NewStringUTF(env, buff);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/jni%20%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E/#2","title":"2 \u83b7\u53d6\u5b9e\u4f8b\u53d8\u91cf","text":"<ul> <li>\u6d89\u53ca\u63a5\u53e3\uff1a<ol> <li><code>jclass GetObjectClass(JNIEnv *env, jobject obj);</code> \uff1a\u4ece\u5bf9\u8c61\u83b7\u53d6\u7c7b\u540d</li> <li><code>jfieldID GetFieldID(JNIEnv *env, jclass clazz, const char *name, const char *sig);</code> \uff1a\u4ece\u5bf9\u8c61\u4e2d\u83b7\u53d6\u5c5e\u6027\u5b57\u6bb5\u7684id</li> <li><code>_NativeType_\u00a0_Get&lt;type&gt;Field_(JNIEnv *env, jobject obj, jfieldIfieldID)</code> \uff1a\u6839\u636e\u5bf9\u8c61\u548c\u5c5e\u6027 id \u83b7\u53d6\u76f8\u5e94\u7684\u5c5e\u6027\u503c</li> </ol> </li> <li>\u4e0d\u540c\u7c7b\u578b\u83b7\u53d6\u503c\u51fd\u6570\u5982\u4e0b | <code>Get&lt;type&gt;Field Routine Name</code> | Native Type | | --------------------------- | ----------- | | <code>GetObjectField()</code> | jobject | | <code>GetBooleanField()</code> | jboolean | | <code>GetByteField()</code> | jbyte | | <code>GetCharField()</code> | jchar | | <code>GetShortField()</code> | jshort | | <code>GetIntField()</code> | jint | | <code>GetLongField()</code> | jlong | | <code>GetFloatField()</code> | jfloat | | <code>GetDoubleField()</code> | jdouble |</li> <li>\u793a\u4f8b</li> </ul> <pre><code>JNIEXPORT void JNICALL Java_com_study_jnilearn_AccessField_accessInstanceField(JNIEnv *env, jclass cls, jobject obj)\n{\njclass clazz;\njfieldID fid;\njstring j_str;\njstring j_newStr;\nconst char *c_str = NULL;\n\n// 1.\u83b7\u53d6AccessField\u7c7b\u7684Class\u5f15\u7528\nclazz = (*env)-&gt;GetObjectClass(env, obj);\nif (clazz == NULL)\n{\nreturn;\n}\n\n// 2. \u83b7\u53d6AccessField\u7c7b\u5b9e\u4f8b\u53d8\u91cfstr\u7684\u5c5e\u6027ID\nfid = (*env)-&gt;GetFieldID(env, clazz, \"str\", \"Ljava/lang/String;\");\nif (clazz == NULL)\n{\nreturn;\n}\n\n// 3. \u83b7\u53d6\u5b9e\u4f8b\u53d8\u91cfstr\u7684\u503c\nj_str = (jstring)(*env)-&gt;GetObjectField(env, obj, fid);\n\n// 4. \u5c06unicode\u7f16\u7801\u7684java\u5b57\u7b26\u4e32\u8f6c\u6362\u6210C\u98ce\u683c\u5b57\u7b26\u4e32\nc_str = (*env)-&gt;GetStringUTFChars(env, j_str, NULL);\nif (c_str == NULL)\n{\nreturn;\n}\nprintf(\"In C---&gt;ClassField.str = %s\\n\", c_str);\n(*env)-&gt;ReleaseStringUTFChars(env, j_str, c_str);\n\n// 5. \u4fee\u6539\u5b9e\u4f8b\u53d8\u91cfstr\u7684\u503c\nj_newStr = (*env)-&gt;NewStringUTF(env, \"This is C String\");\nif (j_newStr == NULL)\n{\nreturn;\n}\n\n(*env)-&gt;SetObjectField(env, obj, fid, j_newStr);\n\n// 6.\u5220\u9664\u5c40\u90e8\u5f15\u7528\n(*env)-&gt;DeleteLocalRef(env, clazz);\n(*env)-&gt;DeleteLocalRef(env, j_str);\n(*env)-&gt;DeleteLocalRef(env, j_newStr);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/jni%20%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E/#3","title":"3 \u83b7\u53d6\u9759\u6001\u53d8\u91cf","text":"<ul> <li>\u6d89\u53ca\u63a5\u53e3\uff1a<ul> <li><code>jclass FindClass(JNIEnv *env, const char *name);</code> \uff1a\u901a\u8fc7\u7c7b\u7b7e\u540d\u627e\u5230\u7c7b</li> <li><code>jfieldID GetStaticFieldID(JNIEnv *env, jclass clazz, const char *name, const char *sig);</code> \uff1a\u901a\u8fc7\u7c7b\u3001\u5b57\u6bb5\u5c5e\u6027\u540d\u3001\u5b57\u6bb5\u7c7b\u578b\u7b7e\u540d\u627e\u5230\u5b57\u6bb5id</li> <li><code>_NativeType_\u00a0_GetStatic&lt;type&gt;Field_ (JNIEnv *env, jclass clazz, jfieldID fieldID);</code> \uff1a\u6839\u636e\u7c7b\u548c\u5b57\u6bb5 id \u83b7\u53d6\u76f8\u5e94\u7684\u5b57\u6bb5\u503c</li> </ul> </li> <li>\u4e0d\u540c\u7c7b\u578b\u83b7\u53d6\u9759\u6001\u503c\u51fd\u6570\u5982\u4e0b</li> </ul> <code>GetStatic&lt;type&gt;Field Routine Name</code> Native Type <code>GetStaticObjectField()</code> jobject <code>GetStaticBooleanField()</code> jboolean <code>GetStaticByteField()</code> jbyte <code>GetStaticCharField()</code> jchar <code>GetStaticShortField()</code> jshort <code>GetStaticIntField()</code> jint <code>GetStaticLongField()</code> jlong <code>GetStaticFloatField()</code> jfloat <code>GetStaticDoubleField()</code> jdouble <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>JNIEXPORT void JNICALL Java_com_study_jnilearn_AccessField_accessStaticField(JNIEnv *env, jclass cls)\n{\njclass clazz;\njfieldID fid;\njint num;\n\n// 1.\u83b7\u53d6ClassField\u7c7b\u7684Class\u5f15\u7528\nclazz = (*env)-&gt;FindClass(env, \"com/study/jnilearn/ClassField\");\nif (clazz == NULL)\n{ // \u9519\u8bef\u5904\u7406\nreturn;\n}\n\n// 2.\u83b7\u53d6ClassField\u7c7b\u9759\u6001\u53d8\u91cfnum\u7684\u5c5e\u6027ID\nfid = (*env)-&gt;GetStaticFieldID(env, clazz, \"num\", \"I\");\nif (fid == NULL)\n{\nreturn;\n}\n\n// 3.\u83b7\u53d6\u9759\u6001\u53d8\u91cfnum\u7684\u503c\nnum = (*env)-&gt;GetStaticIntField(env, clazz, fid);\nprintf(\"In C---&gt;ClassField.num = %d\\n\", num);\n\n// 4.\u4fee\u6539\u9759\u6001\u53d8\u91cfnum\u7684\u503c\n(*env)-&gt;SetStaticIntField(env, clazz, fid, 80);\n\n// \u5220\u9664\u5c5e\u90e8\u5f15\u7528\n(*env)-&gt;DeleteLocalRef(env, clazz);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/jni%20%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E/#4","title":"4 \u6570\u7ec4","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/jni%20%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E/#41","title":"4.1 \u83b7\u53d6\u6570\u7ec4\u957f\u5ea6","text":"<ul> <li><code>jsize GetArrayLength(JNIEnv *env, jarray array);</code> : \u8fd4\u56de\u6570\u7ec4\u957f\u5ea6</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/jni%20%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E/#42","title":"4.2 \u57fa\u672c\u7c7b\u578b\u6570\u7ec4","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/jni%20%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E/#421","title":"4.2.1 \u83b7\u53d6\u57fa\u672c\u7c7b\u578b\u6570\u7ec4","text":"<ul> <li>\u83b7\u53d6\u6570\u7ec4\u7684\u5143\u7d20\u6709 2 \u79cd\u65b9\u6cd5\uff1a</li> <li><code>NativeType\u00a0*Get&lt;PrimitiveType&gt;ArrayElements(JNIEnv *env, ArrayType\u00a0array, jboolean *isCopy);</code> \uff1a\u8fd4\u56de\u6570\u7ec4\u9996\u5730\u5740<ol> <li><code>env</code>: the JNI interface pointer.</li> <li><code>array</code>: a Java string object.</li> <li><code>isCopy</code>: a pointer to a boolean.</li> </ol> </li> <li><code>void\u00a0Get&lt;PrimitiveType&gt;ArrayRegion(JNIEnv *env,\u00a0ArrayType\u00a0array, jsize start, jsize len,\u00a0NativeType\u00a0*buf);</code> \uff1a\u83b7\u53d6\u57fa\u672c\u7c7b\u578b\u6570\u7ec4\u533a\u95f4<ol> <li><code>env</code>: the JNI interface pointer.</li> <li><code>array</code>: a Java array.</li> <li><code>start</code>: the starting index.</li> <li><code>len</code>: the number of elements to be copied.</li> <li><code>buf</code>: the destination buffer.</li> </ol> </li> <li><code>Get&lt;PrimitiveType&gt;ArrayElements</code> \u51fd\u6570\u7c07\u5982\u4e0b\uff1a</li> </ul> <code>Get&lt;PrimitiveType&gt;ArrayElements Routines</code> Array Type Native Type <code>GetBooleanArrayElements()</code> jbooleanArray jboolean <code>GetByteArrayElements()</code> jbyteArray jbyte <code>GetCharArrayElements()</code> jcharArray jchar <code>GetShortArrayElements()</code> jshortArray jshort <code>GetIntArrayElements()</code> jintArray jint <code>GetLongArrayElements()</code> jlongArray jlong <code>GetFloatArrayElements()</code> jfloatArray jfloat <code>GetDoubleArrayElements()</code> jdoubleArray jdouble <ul> <li><code>Get&lt;PrimitiveType&gt;ArrayRegion</code> \u51fd\u6570\u7c07\u5982\u4e0b\uff1a</li> </ul> <code>Get&lt;PrimitiveType&gt;ArrayRegion Routine</code> Array Type Native Type <code>GetBooleanArrayRegion()</code> jbooleanArray jboolean <code>GetByteArrayRegion()</code> jbyteArray jbyte <code>GetCharArrayRegion()</code> jcharArray jchar <code>GetShortArrayRegion()</code> jshortArray jhort <code>GetIntArrayRegion()</code> jintArray jint <code>GetLongArrayRegion()</code> jlongArray jlong <code>GetFloatArrayRegion()</code> jfloatArray jloat <code>GetDoubleArrayRegion()</code> jdoubleArray jdouble"},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/jni%20%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E/#422","title":"4.2.2 \u91ca\u653e\u57fa\u672c\u7c7b\u578b\u6570\u7ec4","text":"<ul> <li><code>void Release&lt;PrimitiveType&gt;ArrayElements (JNIEnv *env, ArrayType array,\u00a0NativeType\u00a0*elems, jint mode);</code> \uff1a\u91ca\u653e\u6570\u7ec4</li> <li><code>env</code>: the JNI interface pointer.</li> <li><code>array</code>: a Java array object.</li> <li><code>elems</code>: a pointer to array elements.</li> <li><code>mode</code>: the release mode.</li> <li><code>Release&lt;PrimitiveType&gt;ArrayElements</code>\u51fd\u6570\u7c07\u5982\u4e0b\uff1a</li> </ul> <code>Release&lt;PrimitiveType&gt;ArrayElements Routines</code> Array Type Native Type <code>ReleaseBooleanArrayElements()</code> jbooleanArray jboolean <code>ReleaseByteArrayElements()</code> jbyteArray jbyte <code>ReleaseCharArrayElements()</code> jcharArray jchar <code>ReleaseShortArrayElements()</code> jshortArray jshort <code>ReleaseIntArrayElements()</code> jintArray jint <code>ReleaseLongArrayElements()</code> jlongArray jlong <code>ReleaseFloatArrayElements()</code> jfloatArray jfloat <code>ReleaseDoubleArrayElements()</code> jdoubleArray jdouble"},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/jni%20%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E/#423","title":"4.2.3 \u8bbe\u7f6e\u57fa\u672c\u7c7b\u578b\u6570\u7ec4\u5143\u7d20\u503c","text":"<p>\u4e3b\u8981\u6709 2 \u79cd\u65b9\u6cd5\uff1a 1. \u76f4\u63a5\u4f7f\u7528 <code>void\u00a0Set&lt;PrimitiveType&gt;ArrayRegion(JNIEnv *env,\u00a0ArrayType\u00a0array, jsize start, jsize len,\u00a0const\u00a0NativeType\u00a0*buf);</code> \u51fd\u6570\u7c07     1. <code>env</code> : the JNI interface pointer.     2. <code>array</code> : a Java array.     3. <code>start</code> : the starting index.     4. <code>len</code> : the number of elements to be copied.     5. <code>buf</code> : the source buffer. 2. \u5148\u4f7f\u7528 <code>Get&lt;PrimitiveType&gt;ArrayElements</code> \u5f97\u5230\u6570\u7ec4\u6307\u9488\uff0c\u518d\u4f7f\u7528 <code>Set&lt;PrimitiveType&gt;ArrayRegion</code> \u51fd\u6570\u7c07\uff0c\u6700\u540e\u4f7f\u7528 <code>Release&lt;PrimitiveType&gt;ArrayElements</code> \u91ca\u653e</p> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>void JNICALL Java_com_test_vediochat_h264_H264Android_test(JNIEnv *env, jobject thiz, jintArray javaArray, jbyteArray array2)\n{\n//\u65b9\u6cd5\u4e00\n/*\n       jint temp1 = 45,temp2 = 20;\n       (*env)-&gt;SetIntArrayRegion(env,javaArray,1,1,&amp;temp1);\n       (*env)-&gt;SetIntArrayRegion(env,javaArray,2,1,&amp;temp2);\n    */\n\n//\u65b9\u6cd5\u4e8c\uff1a\njint *tempSize = (jint *)(*env)-&gt;GetIntArrayElements(env, javaArray, 0);\ntempSize[2] = 65;\ntempSize[3] = 75;\n(*env)-&gt;SetIntArrayRegion(env, javaArray, 0, 3, tempSize);\n(*env)-&gt;ReleaseIntArrayElements(env, javaArray, tempSize, 0);\n}\n</code></pre> <ul> <li><code>Set&lt;PrimitiveType&gt;ArrayRegion</code> \u51fd\u6570\u7c07\u5982\u4e0b | <code>Set&lt;PrimitiveType&gt;ArrayRegion Routine</code> | Array Type | Native Type | | ------------------------------------- | ------------- | ----------- | | <code>SetBooleanArrayRegion()</code> | jbooleanArray | jboolean | | <code>SetByteArrayRegion()</code> | jbyteArray | jbyte | | <code>SetCharArrayRegion()</code> | jcharArray | jchar | | <code>SetShortArrayRegion()</code> | jshortArray | jshort | | <code>SetIntArrayRegion()</code> | jintArray | jint | | <code>SetLongArrayRegion()</code> | jlongArray | jlong | | <code>SetFloatArrayRegion()</code> | jfloatArray | jfloat | | <code>SetDoubleArrayRegion()</code> | jdoubleArray | jdouble |</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/jni%20%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E/#43","title":"4.3 \u5bf9\u8c61\u6570\u7ec4","text":"<pre><code>\u5bf9\u8c61\u53ea\u80fd\u4ece\u6570\u7ec4\u4e2d\u4e00\u4e2a\u4e00\u4e2a\u7684\u8bbf\u95ee\uff0c\u548c\u57fa\u672c\u7c7b\u578b\u8fd4\u56de\u6570\u7ec4\u9996\u5730\u5740\u4e0d\u540c\u3002\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/jni%20%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E/#431","title":"4.3.1 \u83b7\u53d6\u5bf9\u8c61\u7c7b\u578b\u6570\u7ec4","text":"<ul> <li><code>jobject GetObjectArrayElement(JNIEnv *env, jobjectArray array, jsize index);</code>\uff1a\u83b7\u53d6\u6307\u5b9a\u7d22\u5f15\u7684\u5bf9\u8c61</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/jni%20%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E/#432","title":"4.3.2 \u8bbe\u7f6e\u5bf9\u8c61\u7c7b\u578b\u6570\u7ec4\u5143\u7d20\u503c","text":"<ul> <li><code>void SetObjectArrayElement(JNIEnv *env, jobjectArray array, jsize index, jobject value)</code>\uff1a\u8bbe\u7f6e\u6307\u5b9a\u7d22\u5f15\u7684\u5bf9\u8c61<ol> <li><code>env</code>: the JNI interface pointer.</li> <li><code>array</code>: a Java array.</li> <li><code>index</code>: array index.</li> <li><code>value</code>: the new value.</li> </ol> </li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/jni/","title":"jni","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/jni/#1-javah-cc","title":"1 javah \u547d\u4ee4\u751f\u6210 C/C++\u5934\u6587\u4ef6","text":"<p>http://luori366.github.io/JNI_doc/jni_header.html - \u793a\u4f8b\uff1a - <code>-d</code> \uff1a\u6307\u5b9a\u751f\u6210\u7684\u5934\u6587\u4ef6\u6240\u5728\u76ee\u5f55 - <code>-o</code> \uff1a\u6307\u5b9a\u751f\u6210\u7684\u6587\u4ef6\u540d\u3002\uff08-o \u6216 -d \u4e24\u4e2a\u9009\u9879\u53ea\u80fd\u9009\u62e9\u4e00\u4e2a\u3002\uff09 - <code>-jni</code> \uff1a\uff08\u9ed8\u8ba4\u9009\u9879\uff09\u4f7f javah \u521b\u5efa\u4e00\u8f93\u51fa\u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u5305\u542b JNI \u98ce\u683c\u7684\u672c\u5730\u65b9\u6cd5\u51fd\u6570\u539f\u578b\u3002 - <code>-classpath</code> \uff1ajava \u6e90\u6587\u4ef6\u6240\u5728\u76ee\u5f55\u3002 - \u5e38\u7528\u683c\u5f0f\uff1a<code>javah -d \u76ee\u6807\u6587\u4ef6\u8def\u5f84 -jni -classpath \u6e90\u6587\u4ef6\u6839\u76ee\u5f55 \u6e90\u6587\u4ef6\u5305\u540d\u8def\u5f84</code> - \u793a\u4f8b</p> <pre><code>javah -d . -jni -classpath /home/user/android-4.4/packages/inputmethods/PinyinIME/src com.android.inputmethod.pinyin.PinyinDecoderService #\u751f\u6210\u7684\u5934\u6587\u4ef6\u662f\u8fd9\u6837\u7684\uff1acom_android_inputmethod_pinyin_PinyinDecoderService.h #\u6e90\u6587\u4ef6\u5305\u540d\u8def\u5f84\u53ef\u4ee5\u67e5\u770b\u6e90\u6587\u4ef6\u7684\u884c\u9996\uff0c\u6bd4\u5982PinyinDecoderService\u4e2d\u662f\u8fd9\u6837\u7684 #package com.android.inputmethod.pinyin;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/jni/#2-jni","title":"2 jni \u5f15\u7528\u7c7b\u578b","text":"<p>\u53c2\u8003 \u5f3a\u70c8\u5efa\u8bae</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/jni/#21","title":"2.1 \u5c40\u90e8\u5f15\u7528","text":"<pre><code>\u5c40\u90e8\u5f15\u7528\u5728native\u65b9\u6cd5\uff08c/c++\u65b9\u6cd5\uff09\u8c03\u7528\u671f\u95f4\u6709\u6548\u3002\u5b83\u4eec\u5728native\u65b9\u6cd5\u8fd4\u56de\u540e\u81ea\u52a8\u91ca\u653e\u3002\u6bcf\u4e2a\u672c\u5730\u5f15\u7528\u90fd\u4f1a\u8017\u8d39\u4e00\u5b9a\u6570\u91cf\u7684Java\u865a\u62df\u673a\u8d44\u6e90\u3002\u7a0b\u5e8f\u5458\u9700\u8981\u786e\u4fdd\u672c\u673a\u65b9\u6cd5\u4e0d\u4f1a\u8fc7\u5ea6\u5206\u914d\u5c40\u90e8\u5f15\u7528\u3002\u5c3d\u7ba1\u5728\u672c\u673a\u65b9\u6cd5\u8fd4\u56deJava\u540e\u4f1a\u81ea\u52a8\u91ca\u653e\u672c\u5730\u5f15\u7528\uff0c\u4f46\u8fc7\u5ea6\u5206\u914d\u672c\u5730\u5f15\u7528\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5728\u6267\u884c\u672c\u673a\u65b9\u6cd5\u671f\u95f4VM\u8017\u5c3d\u5185\u5b58\u3002\n</code></pre> <ul> <li>\u5c40\u90e8\u5f15\u7528\u6765\u6e90\uff1a</li> <li>NewLocalRef</li> <li>FindClass\u3001NewObject\u3001GetObjectClass \u548c NewCharArray \u7b49</li> <li>\u7279\u70b9\uff1a\u5c40\u90e8\u5f15\u7528\u5728\u51fd\u6570\u8fd4\u56de\u5230 java \u5c42\u65f6\uff0c\u5982\u679c Java \u5c42\u6ca1\u6709\u5bf9\u8fd4\u56de\u7684\u5c40\u90e8\u5f15\u7528\u4f7f\u7528\u7684\u8bdd\uff0c\u5c40\u90e8\u5f15\u7528\u5c31\u4f1a\u88ab JVM \u81ea\u52a8\u91ca\u653e\u3002</li> <li>\u539f\u5219\uff1a\u5bf9\u8c61\u7684\u5c40\u90e8\u5f15\u7528\u4f7f\u7528\u5b8c\u5c31\u8c03\u7528 <code>DeleteLocalRef</code> \u5220\u9664\u3002</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/jni/#211","title":"2.1.1 \u9700\u8981\u91ca\u653e\u7684\u51fd\u6570","text":"<pre><code>title: \u4ec0\u4e48\u7c7b\u578b\u9700\u8981\u91ca\u653e\uff1f\n1. \u7ee7\u627f\u81eajobject\u7684\uff0c\u8981\u4e48\u6709\u4e13\u6709\u51fd\u6570\u91ca\u653e\u5982jstring\uff0cjarray\uff0c\u5177\u4f53\u5982ReleaseStringUTFChars\u3001ReleaseByteArrayElements\n2. \u7ee7\u627f\u81eajobject\u7684\u5176\u5b83\u7c7b\u578b\uff08\u9664\u4e0a\u9762\u6240\u8bf4\uff09\uff0c\u7528DeleteLocalRef\u91ca\u653e\n</code></pre> <ul> <li><code>NewLocalRef</code></li> <li><code>FindClass\u3001NewObject\u3001GetObjectClass\u3001NewCharArray</code> \u7b49</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/jni/#212","title":"2.1.2 \u4e0d\u9700\u8981\u91ca\u653e\u7684\u51fd\u6570","text":"<pre><code>title: \u4ec0\u4e48\u7c7b\u578b\u4e0d\u7528\u8c03\u7528\u91ca\u653e\uff1f\n1. \u4e0d\u7ee7\u627f\u81eajobject\u7684\u5176\u5b83\u7c7b\u578b\u90fd\u4e0d\u7528\u8c03\u7528DeleteLocalRef\uff0c\u5982jfieldID\u3001jmethodID\n2. JNI \u57fa\u672c\u6570\u636e\u7c7b\u578b\u662f\u4e0d\u9700\u8981\u91ca\u653e\u7684\uff0c\u5982 jint\u3001jlong\u3001jchar \u7b49\u7b49\n</code></pre> <ul> <li><code>GetFieldID</code></li> <li><code>GetMethodID</code></li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/jni/#213","title":"2.1.3 \u5c40\u90e8\u5f15\u7528\u8868","text":"<ul> <li>\u5c40\u90e8\u5f15\u7528\u662f\u662f\u6709\u6570\u91cf\u9650\u5236\u7684\uff0c\u56e0\u6b64\u5c3d\u91cf\u518d\u4f7f\u7528\u5b8c\u4e4b\u540e\u91ca\u653e</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/jni/#214","title":"2.1.4 \u5c40\u90e8\u5f15\u7528\u91ca\u653e\u89c4\u5219","text":"<ol> <li>\u7a0b\u5e8f\u5458\u53ef\u4ee5\u624b\u52a8\u8c03\u7528 <code>DeleteLocalRef</code> \u53bb\u91ca\u653e</li> <li>c\u5c42\u65b9\u6cd5\u6267\u884c\u5b8c\u6210\u8fd4\u56dejava\u5c42\u7684\u65f6\u5019,jvm\u4f1a\u904d\u5386\u5c40\u90e8\u5f15\u7528\u8868\u53bb\u91ca\u653e</li> <li>\u4f7f\u7528<code>PushLocalFrame/PopLocalFrame</code>\u521b\u5efa/\u9500\u6bc1\u5c40\u90e8\u5f15\u7528\u6808\u5e27\u7684\u65f6\u5019,\u5728PopLocalFrame\u91cc\u4f1a\u91ca\u653e\u5e27\u5185\u521b\u5efa\u7684\u5f15\u7528</li> <li>\u5982\u679c\u4f7f\u7528<code>AttachCurrentThread</code>\u9644\u52a0\u539f\u751f\u7ebf\u7a0b,\u5728\u8c03\u7528<code>DetachCurrentThread</code>\u7684\u65f6\u5019\u4f1a\u91ca\u653e\u8be5\u7ebf\u7a0b\u521b\u5efa\u7684\u5c40\u90e8\u5f15\u7528</li> </ol>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/jni/#215","title":"2.1.5 \u4f7f\u7528\u5c40\u90e8\u5f15\u7528\u5e27\u6808","text":"<ul> <li><code>jint PushLocalFrame(JNIEnv *env, jint capacity);</code> \uff1a\u521b\u5efa\u4e00\u4e2a\u5177\u4f53\u5927\u5c0f\u7684\u5c40\u90e8\u5f15\u7528\u5e27\u3002<ul> <li><code>capacity</code> \uff1a\u8bbe\u7f6e\u5e27\u5927\u5c0f</li> </ul> </li> <li><code>jobject PopLocalFrame(JNIEnv *env, jobject result);</code> \uff1a\u6e05\u9664\u5f53\u524d\u5c40\u90e8\u5f15\u7528\u5e27\u3002<ul> <li><code>result</code> \uff1a\u5f53\u4e0d\u4e3a NULL \u65f6\uff0c\u8fd4\u56de\u524d\u4e00\u4e2a\u5e27\uff0c\u901a\u5e38\u4e0d\u9700\u8981\uff0c\u4f7f\u7528 NULL \u5373\u53ef\u3002</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>void func(JNIEnv *env) {\nenv-&gt;PushLocalFrame(4);\n...\njstring jstr1 = env-&gt;NewStringUTF(str1.c_str());\njstring jstr2 = env-&gt;NewStringUTF(str2.c_str());\njstring jstr3 = env-&gt;NewStringUTF(str3.c_str());\njstring jstr4 = env-&gt;NewStringUTF(str4.c_str());\n...\nenv-&gt;PopLocalFrame(NULL);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/jni/#22","title":"2.2 \u5168\u5c40\u5f15\u7528","text":"<p>\u5168\u5c40\u5f15\u7528\u6765\u6e90\uff1a - \u8c03\u7528 NewGlobalRef \u57fa\u4e8e\u5c40\u90e8\u5f15\u7528\u521b\u5efa - \u91ca\u653e\uff1a<code>DeleteGlobalRef</code></p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/jni/#23","title":"2.3 \u5f31\u5168\u5c40\u5f15\u7528","text":"<p>\u5f31\u5168\u5c40\u5f15\u7528\u6765\u6e90\uff1a - \u8c03\u7528 NewWeakGlobalRef \u57fa\u4e8e\u5c40\u90e8\u5f15\u7528\u6216\u5168\u5c40\u5f15\u7528\u521b\u5efa - \u91ca\u653e\uff1a<code>DeleteWeakGlobalRef</code></p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/jni/#3","title":"3 \u6570\u636e\u7c7b\u578b","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/jni/#31","title":"3.1 \u7c7b\u578b\u5bf9\u6bd4","text":"Java Type Native Type Description boolean jboolean unsigned 8 bits byte jbyte signed 8 bits char jchar unsigned 16 bits short jshort signed 16 bits int jint signed 32 bits long jlong signed 64 bits float jfloat 32 bits double jdouble 64 bits void void N/A"},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/jni/#32","title":"3.2 \u7c7b\u578b\u7b7e\u540d","text":"Type Signature Java Type Z boolean B byte C char S short I int J long F float D double L fully-qualified-class ; fully-qualified-class <code>[ type</code> <code>type[]</code> ( arg-types ) ret-type method type <ul> <li>\u793a\u4f8b\uff1ajava \u51fd\u6570\u7b7e\u540d</li> </ul> <pre><code>long f (int n, String s, int[] arr); //has the following type signature:\n(ILjava/lang/String;[I)J\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/jni/#4","title":"4 \u51fd\u6570","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/JNI/jni/#41","title":"4.1 \u8fd4\u56de\u5bf9\u8c61","text":"<ol> <li>\u5f53\u8fd4\u56de\u7684\u5bf9\u8c61\u65f6 NULL \u65f6\uff0c\u76f4\u63a5 return NULL \u5373\u53ef\uff0cjava \u5c42\u5224\u65ad\u8fd4\u56de\u65f6\u662f\u5426 <code>==null</code>\u3002</li> <li>\u8fd4\u56de\u5c40\u90e8\u5f15\u7528\u5bf9\u8c61\uff0cjava \u5c42\u5728\u8c03\u7528 native \u65b9\u6cd5\u65f6\u6301\u6709\uff0c\u5219\u63a5\u7ba1\u6b64\u5bf9\u8c61\u7684\u751f\u547d\u5468\u671f\u3002</li> <li>\u793a\u4f8b</li> </ol> <pre><code>JNIEXPORT jstring JNICALL Java_JNIString_strMethod(JNIEnv *env, jclass jcls, jstring jstr)\n{\nint i;\nchar str2[128];\nif(jstr == NULL)    // \u5224\u65ad\u4f20\u9012\u8fc7\u6765\u7684\u5bf9\u8c61\u662f\u5426\u4e3aNULL\n{\nprintf(\"null\\n\");\nreturn NULL;    // \u6b64\u5916\uff0c\u4e5f\u53ef\u4ee5\u8fd4\u56deNULL\uff0cJava\u5f97\u5230\u7684\u5c06\u662fnull\n}\nconst char *str = env-&gt;GetStringUTFChars(jstr, NULL);   // must be const\n// const jchar * GetStringChars(JNIEnv *env, jstring string, jboolean *isCopy);\nprintf(\"%s\\n\", str);\nstrcpy(str2,str);\nenv-&gt;ReleaseStringUTFChars(jstr, str);\nreturn env-&gt;NewStringUTF(str2);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20C%20API/","title":"UNIX C API","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20C%20API/#1-forkvfork","title":"1 fork\u548cvfork\u5f02\u540c","text":"<ul> <li>\u6267\u884c\u987a\u5e8f</li> <li><code>fork</code>\uff1a\u7236\u8fdb\u7a0b\u548c\u5b50\u8fdb\u7a0b\u6267\u884c\u5148\u540e\u987a\u5e8f\u4e0d\u786e\u5b9a\uff0c\u53d6\u51b3\u4e8e\u5185\u6838\u8c03\u5ea6\u7b97\u6cd5\u3002</li> <li><code>vfork</code>\uff1a\u5b50\u8fdb\u7a0b\u5148\u6267\u884c<code>exec</code>\u51fd\u6570\u7c07\u6216<code>exit</code>,\u5b50\u8fdb\u7a0b\u9000\u51fa\u518d\u6267\u884c\u7236\u8fdb\u7a0b\u3002</li> <li>\u5185\u5b58\u7a7a\u95f4\uff1a</li> <li><code>fork</code>\uff1a\u5b50\u8fdb\u7a0b\u590d\u5236\u7236\u8fdb\u7a0b\u7684\u6570\u636e\u7a7a\u95f4\u3001\u5806\u3001\u6808\uff0c\u5171\u4eab\u4ee3\u7801\u6bb5\uff0c\u5b50\u8fdb\u7a0b\u6539\u53d8\u6570\u636e\u4e0d\u4f1a\u54cd\u7236\u8fdb\u7a0b\u3002</li> <li><code>vfork</code>\uff1a\u5b50\u8fdb\u7a0b\u5e76\u4e0d\u5b8c\u5168\u590d\u5236\u7236\u8fdb\u7a0b\u5730\u5740\u7a7a\u95f4\uff0c\u5b50\u8fdb\u7a0b\u4e0e\u7236\u8fdb\u7a0b\u5171\u4eab\u6570\u636e\u7a7a\u95f4\uff0c\u5b50\u8fdb\u7a0b\u6539\u53d8\u6570\u636e\u4f1a\u5f71\u54cd\u7236\u8fdb\u7a0b\u3002</li> <li><code>vfork</code>\u76ee\u7684\u662f\u521b\u5efa\u4e00\u4e2a\u65b0\u8fdb\u7a0b\uff0c\u518d\u8ba9\u65b0\u8fdb\u7a0b\u901a\u8fc7exec\u51fd\u6570\u7c07\u53bb\u6267\u884c\u4e00\u4e2a\u65b0\u7a0b\u5e8f\u3002</li> </ul> <pre><code>title: \u5199\u65f6\u590d\u5236\u6280\u672f(copy on write)\n\u7531\u4e8e\u5728fork\u4e4b\u540e\uff0c\u5f80\u5f80\u5b50\u8fdb\u7a0b\u76f4\u63a5\u4f7f\u7528exec\u51fd\u6570\u7c07\u53bb\u6267\u884c\u53e6\u4e00\u6bb5\u4ee3\u7801\uff0c\u4e0d\u9700\u8981\u4f7f\u7528\u5230\u7236\u8fdb\u7a0b\u7684\u6570\u636e\u6bb5\u3001\u5806\u6808\uff0c\u590d\u5236\u8fd9\u4e9b\u4e0d\u4f7f\u7528\u7684\u533a\u57df\u4f1a\u5bfc\u81f4\u4e0d\u5fc5\u8981\u7684\u5f00\u9500\uff0c\u5199\u65f6\u590d\u5236\u6280\u672f\u53ef\u4ee5\u89e3\u51b3\u6b64\u7c7b\u95ee\u9898\u3002\n\u5f53\u4efb\u610f\u4e00\u4e2a\u8fdb\u7a0b\u4fee\u6539\u4e86\u8fd9\u4e9b\u6570\u636e\u65f6\uff0c\u5219\u5185\u6838\u624d\u4e3a\u8fd9\u5757\u6570\u636e\u5206\u914d\u4e00\u4e2a\u5730\u5740\uff0c\u5236\u4f5c\u4e00\u4e2a\u526f\u672c\u3002\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20C%20API/#11-waitwaitpid","title":"1.1 wait\u548cwaitpid\u5f02\u540c","text":"<ul> <li><code>wait</code>\u4f7f\u5176\u8c03\u7528\u8005\u963b\u585e\uff0c<code>waitpid</code>\u7531\u53c2\u6570\u63a7\u5236\u662f\u5426\u963b\u585e\u3002</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20C%20API/#2","title":"2 \u89e3\u6790\u547d\u4ee4\u884c\u53c2\u6570","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20C%20API/#21-getopt","title":"2.1 getopt\u83b7\u53d6\u547d\u4ee4\u884c\u53c2\u6570","text":"<ul> <li>\u529f\u80fd\uff1a\u89e3\u6790\u547d\u4ee4\u884c\u53c2\u6570</li> <li>\u8bed\u6cd5\uff1a<code>int getopt(int argc, char * const argv[],const char *optstring);</code></li> <li><code>argc</code>:main\u51fd\u6570\u7684argc</li> <li><code>argv</code>:main\u51fd\u6570\u7684argv</li> <li><code>optstring</code>:\u89e3\u6790\u7684\u9009\u9879\u5b57\u6bcd,\u4e14\u6700\u540e\u9700\u5c3e\u968f\u5192\u53f7<code>:</code>\uff08\u9009\u9879\u4ee5<code>-</code>\u52a0\u5b57\u6bcd\u7684\u77ed\u9009\u9879\u7ec4\u5408\uff0c\u540e\u518d\u63a5\u4e00\u4e2a\u957f\u9009\u9879\uff0c\u5982<code>./test -n 1 -t 2</code>,optstring \u5219\u8bbe\u7f6e\u6210<code>nt:</code>\uff09</li> <li>\u8fd4\u56de\u503c\uff1a\u89e3\u6790\u5230\u53c2\u6570\u8fd4\u56de\u77ed\u9009\u9879\uff0c\u89e3\u6790\u5230\u4e0d\u5b58\u5728\u7684\u9009\u9879\u8fd4\u56de\u5192\u53f7<code>:</code>\uff0c\u89e3\u6790\u5b8c\u8fd4\u56de-1</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(int argc, char *argv[])\n{\nint flags, opt;\nint nsecs, tfnd;\n\nnsecs = 0;\ntfnd = 0;\nflags = 0;\nwhile ((opt = getopt(argc, argv, \"nt:\")) != -1)\n{\nswitch (opt)\n{\ncase 'n':\nflags = 1;\nbreak;\ncase 't':\nnsecs = atoi(optarg);\ntfnd = 1;\nbreak;\ndefault: /* '?' */\nfprintf(stderr, \"Usage: %s [-t nsecs] [-n] name\\n\",\nargv[0]);\nexit(EXIT_FAILURE);\n}\n}\n\nprintf(\"flags=%d; tfnd=%d; optind=%d\\n\", flags, tfnd, optind);\n\nif (optind &gt;= argc)\n{\nfprintf(stderr, \"Expected argument after options\\n\");\nexit(EXIT_FAILURE);\n}\n\nprintf(\"name argument = %s\\n\", argv[optind]);\n\n/* Other code omitted */\n\nexit(EXIT_SUCCESS);\n}\n</code></pre> <ul> <li>\u8f93\u51fa\u7ed3\u679c</li> </ul> <pre><code>$ ./test_getopt -t 123 -n 567\nflags=1; tfnd=1; optind=4\nname argument = 567\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20C%20API/#22-getopt_long","title":"2.2 getopt_long","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20C%20API/#3-flocklockffcntl","title":"3 flock\uff0clockf\uff0cfcntl","text":"<p>https://www.cnblogs.com/starrysky77/p/9974130.html</p> <ul> <li>flock \u5bf9\u5e94fuse flock</li> <li>lockf \u5bf9\u5e94fuse lock</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20io/","title":"UNIX io","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20io/#1-dupdup2","title":"1 dup\u548cdup2","text":"<ul> <li>\u529f\u80fd\uff1a\u590d\u5236\u6587\u4ef6\u63cf\u8ff0\u7b26</li> <li>\u8bed\u6cd5\uff1a</li> <li><code>int dup (int __fd)</code>:\u590d\u5236fd\u6587\u4ef6\u63cf\u8ff0\u7b26\u4fe1\u606f\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\uff08\u5f53\u524d\u6700\u5c0f\u53ef\u7528\u6587\u4ef6\u63cf\u8ff0\u7b26\u53f7\uff09</li> <li><code>int dup2 (int __fd, int __fd2)</code>:\u590d\u5236fd\u63cf\u8ff0\u7b26\u5230fd2\uff0c\u5982\u679cfd2\u5df2\u6253\u5f00\u5c31\u5148\u5173\u95ed\u518d\u590d\u5236</li> <li>\u533a\u522b\uff1adup2\u53ef\u4ee5\u6307\u5b9a\u88ab\u590d\u5236\u7684\u63cf\u8ff0\u7b26\u53f7\uff0c\u800cdup\u7531\u7cfb\u7edf\u5206\u914d</li> <li>\u793a\u4f8b\uff1adup2</li> </ul> <pre><code>#include&lt;unistd.h&gt;\n#include&lt;fcntl.h&gt;\n#include&lt;stdio.h&gt;\nint main()\n{\nint fd_new=100;\nint fd=open(\"file1\",O_RDWR);\nprintf(\"fd=%d\\n\",fd);\nprintf(\"ret=%d\",dup2(fd,fd_new));\nprintf(\"fd_new=%d\\n\",fd_new);\nwrite(fd_new,\"hello\",5);\nclose(fd_new);\n}\n//\u8f93\u51fa:\n//fd=3\n//ret=100fd_new=100\n</code></pre> <ul> <li>\u793a\u4f8b\uff1adup</li> </ul> <pre><code>#include&lt;unistd.h&gt;\n#include&lt;fcntl.h&gt;\n#include&lt;stdio.h&gt;\nint main()\n{\nint fd=open(\"file1\",O_RDWR);\nprintf(\"fd=%d\\n\",fd);\nint fd_new=dup(fd);\nprintf(\"fd_new=%d\\n\",fd_new);\nwrite(fd_new,\"hello\",5);    }\n//\u8f93\u51fa\uff1a\n//fd=3\n//fd_new=4\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20io/#2-fcntl","title":"2 fcntl","text":"<ul> <li>\u529f\u80fd\uff1a\u7528\u6765\u64cd\u4f5c\u6587\u4ef6\u63cf\u8ff0\u7b26\u7684\u4e00\u4e9b\u7279\u6027\uff08\u6bd4\u5982\u6539\u53d8open\u65f6\u8bbe\u7f6e\u7684flag\u4fe1\u606f\uff09</li> <li>\u8bed\u6cd5\uff1a<code>int fcntl (int __fd, int __cmd, ...);</code></li> <li><code>fd</code>:\u6587\u4ef6\u63cf\u8ff0\u7b26</li> <li><code>cmd</code>:\u6587\u4ef6\u63cf\u8ff0\u7b26\u8981\u64cd\u4f5c\u7684\u6307\u4ee4<ul> <li><code>F_DUPFD</code>:\u7528\u6765\u67e5\u627e\u5927\u4e8e\u6216\u7b49\u4e8e\u53c2\u6570arg\u7684\u6700\u5c0f\u4e14\u4ecd\u672a\u4f7f\u7528\u7684\u6587\u4ef6\u63cf\u8ff0\u8bcd\uff0c\u5e76\u4e14\u590d\u5236\u53c2\u6570fd\u7684\u6587\u4ef6\u63cf\u8ff0\u8bcd\u3002\u6267\u884c\u6210\u529f\u5219\u8fd4\u56de\u65b0\u590d\u5236\u7684\u6587\u4ef6\u63cf\u8ff0\u8bcd</li> <li><code>F_GETFD</code>:\u83b7\u53d6close-on-exec\u65d7\u6807\u3002\u82e5\u6b64\u65d7\u6807\u7684FD_CLOEXEC\u4f4d\u4e3a0\uff0c\u4ee3\u8868\u5728\u8c03\u7528exec()\u76f8\u5173\u51fd\u6570\u65f6\u6587\u4ef6\u5c06\u4e0d\u4f1a\u5173\u95ed</li> <li><code>F_SETFD</code>:\u8bbe\u7f6eclose-on-exec\u65d7\u6807\u3002\u8be5\u65d7\u6807\u4ee5\u53c2\u6570arg \u7684FD_CLOEXEC\u4f4d\u51b3\u5b9a</li> <li><code>F_GETFL</code>:\u53d6\u5f97\u6587\u4ef6\u63cf\u8ff0\u8bcd\u72b6\u6001\u65d7\u6807\uff0c\u6b64\u65d7\u6807\u4e3aopen\uff08\uff09\u7684\u53c2\u6570flags</li> <li><code>F_SETFL</code>:\u8bbe\u7f6e\u6587\u4ef6\u63cf\u8ff0\u8bcd\u72b6\u6001\u65d7\u6807\uff0c\u53c2\u6570arg\u4e3a\u65b0\u65d7\u6807\uff0c\u4f46\u53ea\u5141\u8bb8O_APPEND\u3001O_NONBLOCK\u548cO_ASYNC\u4f4d\u7684\u6539\u53d8\uff0c\u5176\u4ed6\u4f4d\u7684\u6539\u53d8\u5c06\u4e0d\u53d7\u5f71\u54cd</li> <li><code>F_GETLK</code>:\u53d6\u5f97\u6587\u4ef6\u9501\u5b9a\u7684\u72b6\u6001</li> <li><code>F_SETLK</code>:\u8bbe\u7f6e\u6587\u4ef6\u9501\u5b9a\u7684\u72b6\u6001\uff08\u975e\u963b\u585e\uff09\u3002\u6b64\u65f6flcok \u7ed3\u6784\u7684l_type \u503c\u5fc5\u987b\u662fF_RDLCK\u3001F_WRLCK\u6216F_UNLCK\u3002\u5982\u679c\u65e0\u6cd5\u5efa\u7acb\u9501\u5b9a\uff0c\u5219\u8fd4\u56de-1</li> <li><code>F_SETLKW</code>:\u8bbe\u7f6e\u6587\u4ef6\u9501\u5b9a\u7684\u72b6\u6001\uff08\u963b\u585e\uff09\u3002\u4e0e F_SETLK \u4f5c\u7528\u76f8\u540c\uff0c\u4f46\u662f\u65e0\u6cd5\u5efa\u7acb\u9501\u5b9a\u65f6\uff0c\u6b64\u8c03\u7528\u4f1a\u4e00\u76f4\u7b49\u5230\u9501\u5b9a\u52a8\u4f5c\u6210\u529f\u4e3a\u6b62</li> </ul> </li> <li><code>\u53ef\u9009\u53c2\u6570</code>:\u6839\u636e\u4e0d\u540c\u7684\u53c2\u6570<code>cmd</code>\u51b3\u5b9a</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20io/#21","title":"2.1 \u8bbe\u7f6e\u6587\u4ef6\u72b6\u6001","text":"<ul> <li>\u793a\u4f8b\uff1a\u8986\u76d6\u5199\u6539\u4e3a\u8ffd\u52a0\u5199</li> </ul> <pre><code>#include&lt;fcntl.h&gt;\n#include&lt;unistd.h&gt;\nint main()\n{\nchar buf[1024]={0};\nint fd=open(\"file1\",O_RDWR);\nif(fd&lt;0)\nreturn 0;\nint sz=0;\nunsigned int flag=fcntl(fd,F_GETFL);\n//\u7ed9\u6587\u4ef6\u589e\u52a0\u8ffd\u52a0\u6a21\u5f0f\uff0c\u53d6\u4ee3open\u65f6\u8bbe\u7f6e\u7684\u8986\u76d6\u5199\u6a21\u5f0f\nflag=fcntl(fd,F_SETFL,flag|O_APPEND);\nsz=write(fd,\" world\",6);\nclose(fd);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20io/#22-fdclose-on-exec","title":"2.2 \u6269\u5c55\uff1afd\u7684close on exec","text":"<ul> <li>\u53c2\u8003\u8d44\u6599</li> <li>\u529f\u80fd\uff1a\u5f53\u7236\u8fdb\u7a0bfork\u5b50\u8fdb\u7a0b\u65f6\uff0c\u4f7f\u5b50\u8fdb\u7a0b\u4e0d\u7ee7\u627f\u7236\u8fdb\u7a0b\u4e2d\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\uff08\u9ed8\u8ba4\u7ee7\u627f\uff09,\u53ef\u4ee5\u5728<code>open</code>\u4e2d\u8bbe\u7f6e\u4e5f\u53ef\u4ee5\u901a\u8fc7<code>fcntl</code>\u8bbe\u7f6e</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include&lt;fcntl.h&gt;\n#include&lt;unistd.h&gt;\nint main()\n{\nchar buf[1024]={0};\n//\u5728open\u65f6\u8bbe\u7f6eFD_CLOEXEC\nint fd=open(\"file1\",O_RDWR|FD_CLOEXEC);\nif(fd&lt;0)\nreturn 0;\nint sz=0;\nunsigned int flag=fcntl(fd,F_GETFD);\n//\u901a\u8fc7fcntl\u8bbe\u7f6eFD_CLOEXEC\nflag=fcntl(fd,F_SETFD,FD_CLOEXEC);\nsz=write(fd,\" world\",6);\nclose(fd);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20io/#3-ioctl","title":"3 ioctl","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20io/#4-io","title":"4 io\u590d\u7528\u6a21\u5f0f","text":"<ul> <li><code>select</code>\u6709\u63cf\u8ff0\u7b26\u9650\u5236\uff0c\u76ee\u524d\u6700\u591a\u6709FD_SETSIZE=1024\u4e0a\u9650\uff1b<code>pool</code>\u5219\u6ca1\u6709\u6b64\u9650\u5236</li> <li><code>select</code>\u548c<code>poll</code>\u91c7\u7528\u8f6e\u8be2\u65b9\u5f0f\uff0c\u6548\u7387\u4f4e\uff1b<code>epoll</code>\u91c7\u7528\u4e8b\u4ef6\u901a\u77e5\u673a\u5236</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20io/#41-select","title":"4.1 select","text":"<ul> <li>\u529f\u80fd\uff1a\u7528\u6765\u7b49\u5f85\u6587\u4ef6\u63cf\u8ff0\u8bcd\u72b6\u6001\u7684\u6539\u53d8</li> <li>\u8bed\u6cd5\uff1a<code>int select (int nfds, fd_set *readfds,fd_set *writefds,fd_set *exceptfds,timeval *timeout);</code></li> <li><code>nfd</code>:\u662f<code>readfds</code>\u548c<code>writefds</code>\u6587\u4ef6\u63cf\u8ff0\u7b26\u96c6\u5408\u4e2d\u6700\u5927\u503c+1</li> <li><code>readfds</code>:\u53ef\u8bfb\u6587\u4ef6\u63cf\u8ff0\u7b26\u96c6</li> <li><code>writefds</code>:\u53ef\u5199\u6587\u4ef6\u63cf\u8ff0\u7b26\u96c6</li> <li><code>exceptfds</code>:\u5f02\u5e38\u6587\u4ef6\u63cf\u8ff0\u7b26\u96c6</li> <li><code>timeout</code>:\u8bbe\u7f6e\u76d1\u89c6\u7684\u7b49\u5f85\u4e8b\u4ef6\uff1b\u5f53NULL\u65f6\uff0c\u8868\u793a\u4f1a\u4e00\u76f4\u963b\u585e\u7b49\u5f85\uff1b\u5f53\u8d85\u8fc7timeout\u65f6\u4f1a\u8fd4\u56de\uff1b\u5f53timeout\u8bbe\u7f6e\u4e3a0\u65f6\uff0c\u4f1a\u7acb\u5373\u8fd4\u56de</li> <li>\u8fd4\u56de\u503c\uff1a\u6267\u884c\u6210\u529f\uff0c\u8fd4\u56de\u6587\u4ef6\u63cf\u8ff0\u8bcd\u72b6\u6001\u5df2\u6539\u53d8\u7684\u4e2a\u6570\uff0c\u5982\u679c\u8fd4\u56de0\u4ee3\u8868\u5728\u63cf\u8ff0\u8bcd\u72b6\u6001\u6539\u53d8\u524d\u5df2\u8d85\u8fc7timeout\u65f6\u95f4\uff0c\u5f53\u6709\u9519\u8bef\u53d1\u751f\u65f6\u5219\u8fd4\u56de-1</li> <li>\u5173\u8054\u63a5\u53e3</li> <li><code>FD_SET(fd, fdsetp)</code>\uff1a\u5411fdsetp\u4e2d\u6dfb\u52a0fd</li> <li><code>FD_CLR(fd, fdsetp)</code>\uff1a\u4ecefdsetp\u79fb\u9664fd</li> <li><code>FD_ISSET(fd, fdsetp)</code>\uff1a\u6d4b\u8bd5fd\u662f\u5426\u662ffdsetp\u4e2d\u4e14\u72b6\u6001\u6539\u53d8\u4e86\u7684\uff08\u7528\u4e8e\u5224\u65ad\u54ea\u4e00\u4e2a\u63cf\u8ff0\u7b26\u72b6\u6001\u53d8\u4e86\uff09</li> <li><code>FD_ZERO(fdsetp)</code>\uff1a\u6e05\u7a7afdsetp\u96c6\u5408</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include&lt;sys/select.h&gt;\n#include&lt;unistd.h&gt;\n#include&lt;stdio.h&gt;\nint main()\n{\ntimeval tv;\nfd_set rfds;//\u4f5c\u4e3a\u8bfb\u63cf\u8ff0\u7b26\u96c6\u5408\nFD_ZERO(&amp;rfds);//\u6e05\u96f6\u63cf\u8ff0\u7b26\u96c6\u5408\nint fd=0;\nFD_SET(fd, &amp;rfds);//\u8bbe\u7f6e\u76d1\u542c\u6807\u51c6\u8f93\u5165\ntv.tv_sec = 5;//\u8bbe\u7f6e\u6700\u5927\u7b49\u5f85\u65f6\u957f\u4e3a5\u79d2\nint ret=select(fd+1,&amp;rfds,NULL,NULL,&amp;tv);//\u7b49\u5f85\u63cf\u8ff0\u7b26\u53ef\u8bfb\nif (ret&lt;0)\n{\nperror(\"select\");\nreturn -1;\n}\nelse if (ret==0)\n{\nprintf(\"timeout\\n\");\n}\nelse\n{\nprintf(\"read\\n\");\n}\nreturn 0;   }\n//\u8f93\u51fa\n//ret=1\n//read\n//write data is hello world!\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20io/#42-poll","title":"4.2 poll","text":"<ul> <li>\u529f\u80fd\uff1a\u7528\u6765\u7b49\u5f85\u6587\u4ef6\u63cf\u8ff0\u8bcd\u72b6\u6001\u7684\u6539\u53d8</li> <li>\u8bed\u6cd5\uff1a<code>int poll(struct pollfd fds[], nfds_t nfds, int timeout);</code></li> <li><code>fds</code>:\u6587\u4ef6\u63cf\u8ff0\u7b26\u4fe1\u606f\u96c6\u5408</li> <li><code>nfds</code>:fds\u96c6\u4e2d\u6700\u5927\u63cf\u8ff0\u7b26+1</li> <li><code>timeout</code>:\u963b\u585e\u7b49\u5f85\u65f6\u95f4\uff1b-1\u4e00\u76f4\u7b49\u5f85\uff1b0\u4f1a\u7acb\u5373\u8fd4\u56de\uff1b\u5927\u4e8e0\u8868\u793a\u4f1a\u963b\u585e\u7b49\u5f85\u6700\u591a\u591a\u5c11\u6beb\u79d2</li> <li>\u8fd4\u56de\u503c\uff1a\u6267\u884c\u6210\u529f\uff0c\u8fd4\u56de\u6587\u4ef6\u63cf\u8ff0\u8bcd\u72b6\u6001\u5df2\u6539\u53d8\u7684\u4e2a\u6570\uff0c\u5982\u679c\u8fd4\u56de0\u4ee3\u8868\u5728\u63cf\u8ff0\u8bcd\u72b6\u6001\u6539\u53d8\u524d\u5df2\u8d85\u8fc7timeout\u65f6\u95f4\uff0c\u5f53\u6709\u9519\u8bef\u53d1\u751f\u65f6\u5219\u8fd4\u56de-1</li> <li>pollfd\u7ed3\u6784\u5982\u4e0b</li> </ul> <pre><code>/* Data structure describing a polling request.  */\nstruct pollfd\n{\nint fd;         /* File descriptor to poll.  */\nshort int events;       /* Types of events poller cares about.  */\nshort int revents;      /* Types of events that actually occurred.  */\n};\n</code></pre> <ul> <li>\u4e8b\u4ef6\u7c7b\u578b\u5982\u4e0b\uff1a</li> </ul> <pre><code>/* Event types that can be polled for.  These bits may be set in `events'\n   to indicate the interesting event types; they will appear in `revents'\n   to indicate the status of the file descriptor.  */\n#define POLLIN      0x001       /* There is data to read.  */\n#define POLLPRI     0x002       /* There is urgent data to read.  */\n#define POLLOUT     0x004       /* Writing now will not block.  */\n\n#if defined __USE_XOPEN || defined __USE_XOPEN2K8\n/* These values are defined in XPG4.2.  */\n# define POLLRDNORM 0x040       /* Normal data may be read.  */\n# define POLLRDBAND 0x080       /* Priority data may be read.  */\n# define POLLWRNORM 0x100       /* Writing now will not block.  */\n# define POLLWRBAND 0x200       /* Priority data may be written.  */\n#endif\n\n#ifdef __USE_GNU\n/* These are extensions for Linux.  */\n# define POLLMSG    0x400\n# define POLLREMOVE 0x1000\n# define POLLRDHUP  0x2000\n#endif\n\n/* Event types always implicitly polled for.  These bits need not be set in\n   `events', but they will appear in `revents' to indicate the status of\n   the file descriptor.  */\n#define POLLERR     0x008       /* Error condition.  */\n#define POLLHUP     0x010       /* Hung up.  */\n#define POLLNVAL    0x020       /* Invalid polling request.  */\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>#include&lt;sys/poll.h&gt;\n#include&lt;stdio.h&gt;\nint main()\n{\nstruct pollfd fds[2];\nfds[0].fd = 0;\nfds[0].events = POLLIN;\nfds[1].fd = 1;\nfds[1].events = POLLOUT;\nint ret=poll(fds, 2, -1);\nprintf(\"ret=%d\\n\", ret);\nfor (size_t i = 0; i &lt; 2; i++)\n{\nif (fds[i].revents &amp; POLLIN)\n{\nprintf(\"i=%lu fd=%d, POLLIN\\n\", i,fds[i].fd);\n}\nif (fds[i].revents &amp; POLLOUT)\n{\nprintf(\"i=%lu fd=%d, POLLOUT\\n\", i,fds[i].fd);\n}\n}\nreturn 0;\n}\n//\u8f93\u51fa\n//ret=1\n//i=1 fd=1, POLLOUT\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20io/#43-epoll","title":"4.3 epoll","text":"<ul> <li>\u53c2\u8003 epoll\u5e93\u63d0\u4f9b\u4e863\u4e2a\u7cfb\u7edf\u51fd\u6570\uff1a</li> <li><code>epoll_create</code>:\u521b\u5efaepoll\u5b9e\u4f8b,\u8fd4\u56de\u7684epoll\u5b9e\u4f8b\u9700\u8981\u4f7f\u7528close\u5173\u95ed</li> <li><code>epoll_ctl</code>\uff1a\u7ba1\u7406epoll\u5b9e\u4f8b</li> <li><code>epoll_wait</code>:\u7b49\u5f85\u53d1\u751f\u5728epoll\u5b9e\u4f8b\u4e0a\u7684\u4e8b\u4ef6</li> </ul> <p>epoll\u7684\u4e8b\u4ef6\u7c7b\u5982\u4e0b:</p> <pre><code>typedef union epoll_data\n{\nvoid *ptr;\nint fd;\nuint32_t u32;\nuint64_t u64;\n} epoll_data_t;\n\nstruct epoll_event\n{\nuint32_t events;  /* Epoll events */\nepoll_data_t data;    /* User data variable */\n} __EPOLL_PACKED;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20io/#431-ltet","title":"4.3.1 LT\u3001ET \u6a21\u5f0f","text":"<ul> <li>LT (Level Trigger)\uff1a\u6c34\u5e73\u89e6\u53d1\uff0c\u4e00\u4e2a\u4e8b\u4ef6\u53ea\u8981\u6709\uff0c\u5c31\u4f1a\u4e00\u76f4\u89e6\u53d1\u3002\uff08\u9ed8\u8ba4\uff09</li> <li>ET (Edge Trigger)\uff1a\u8fb9\u7f18\u89e6\u53d1\uff0c\u53ea\u6709\u4e00\u4e2a\u4e8b\u4ef6\u4ece\u65e0\u5230\u6709\u624d\u4f1a\u89e6\u53d1\u3002\uff08\u8bbe\u7f6e ev.events=EPOLLET\uff09</li> </ul> <pre><code>title: socker\u8bfb\u5199\u4e8b\u4ef6\u7406\u89e3LT\u3001ET\u6a21\u5f0f\n- \u4ee5 socket \u7684\u8bfb\u4e8b\u4ef6\u4e3a\u4f8b\uff0c\u5bf9\u4e8e\u6c34\u5e73\u6a21\u5f0f\uff0c\u53ea\u8981 socket \u4e0a\u6709\u672a\u8bfb\u5b8c\u7684\u6570\u636e\uff0c\u5c31\u4f1a\u4e00\u76f4\u4ea7\u751f POLLIN \u4e8b\u4ef6\uff1b\n- \u800c\u5bf9\u4e8e\u8fb9\u7f18\u6a21\u5f0f\uff0csocket \u4e0a\u7b2c\u4e00\u6b21\u6709\u6570\u636e\u4f1a\u89e6\u53d1\u4e00\u6b21\uff0c\u540e\u7eed socket \u4e0a\u5b58\u5728\u6570\u636e\u4e5f\u4e0d\u4f1a\u518d\u89e6\u53d1\uff0c\u9664\u975e\u628a\u6570\u636e\u8bfb\u5b8c\u540e\uff0c\u518d\u6b21\u4ea7\u751f\u6570\u636e\u624d\u4f1a\u7ee7\u7eed\u89e6\u53d1\u3002\n- \u5bf9\u4e8e socket \u5199\u4e8b\u4ef6\uff0c\u5982\u679c socket \u7684 TCP \u7a97\u53e3\u4e00\u76f4\u4e0d\u9971\u548c\uff0c\u4f1a\u4e00\u76f4\u89e6\u53d1 POLLOUT \u4e8b\u4ef6\uff1b\n- \u800c\u5bf9\u4e8e\u8fb9\u7f18\u6a21\u5f0f\uff0c\u53ea\u4f1a\u89e6\u53d1\u4e00\u6b21\uff0c\u9664\u975e TCP \u7a97\u53e3\u7531\u4e0d\u9971\u548c\u53d8\u6210\u9971\u548c\u518d\u4e00\u6b21\u53d8\u6210\u4e0d\u9971\u548c\uff0c\u624d\u4f1a\u518d\u6b21\u89e6\u53d1 POLLOUT \u4e8b\u4ef6\u3002\n</code></pre> <ul> <li>\u4f7f\u7528 ET \u6a21\u5f0f\u9700\u8981\u6ce8\u610f\u6b63\u786e\u7684\u8bfb\u5199\u65b9\u5f0f\u4e3a:  <ul> <li>\u8bfb\uff1a\u53ea\u8981\u53ef\u8bfb\uff0c\u5c31\u4e00\u76f4\u8bfb\uff0c\u76f4\u5230\u8fd4\u56de 0\uff0c\u6216\u8005 errno = EAGAIN  </li> <li>\u5199\uff1a\u53ea\u8981\u53ef\u5199\uff0c\u5c31\u4e00\u76f4\u5199\uff0c\u76f4\u5230\u6570\u636e\u53d1\u9001\u5b8c\uff0c\u6216\u8005 errno = EAGAIN</li> </ul> </li> <li>\u6b63\u786e\u7684\u8bfb \uff1a</li> </ul> <pre><code>n = 0;  while ((nread = read(fd, buf + n, BUFSIZ-1)) &gt; 0) {  n += nread;\n}  if (nread == -1 &amp;&amp; errno != EAGAIN) {  perror(\"read error\");  }\n</code></pre> <ul> <li>\u6b63\u786e\u7684\u5199 \uff1a</li> </ul> <pre><code>int nwrite, data_size = strlen(buf);  n = data_size;  while (n &gt; 0) {  nwrite = write(fd, buf + data_size - n, n);  if (nwrite &lt; n) {  if (nwrite == -1 &amp;&amp; errno != EAGAIN) {  perror(\"write error\");  }  break;  }  n -= nwrite;  }\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20io/#432-epoll_create","title":"4.3.2 epoll_create","text":"<ul> <li>\u529f\u80fd\uff1a\u521b\u5efaepoll\u5b9e\u4f8b</li> <li>\u8bed\u6cd5\uff1a</li> <li><code>int epoll_create(int size);</code><ul> <li><code>size</code>:\u4eceLinux 2.6.8\u540e\uff0c\u53ef\u4ee5\u5ffd\u7565\uff0c\u4f46\u5fc5\u987b\u6307\u5b9a\u4e00\u4e2a\u5927\u4e8e0\u7684\u6570</li> </ul> </li> <li><code>int epoll_create1(int flags);</code><ul> <li><code>flags</code> : \u5f53 flags <code>==</code> 0 \u65f6\u548c epoll_create \u76f8\u540c\uff1bflags \u8fd8\u53ef\u4ee5\u8bbe\u7f6e EPOLL_CLOEXEC</li> </ul> </li> <li>\u8fd4\u56de\u503c\uff1a\u6210\u529f\u65f6\uff0c\u8fd4\u56de\u5f15\u7528\u5230epoll\u5b9e\u4f8b\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\uff0c\u8fd9\u4e2a\u63cf\u8ff0\u7b26\u4f1a\u5728\u540e\u7eedepoll\u64cd\u4f5c\u4e0a\u4f7f\u7528\uff1b\u9519\u8bef\u65f6\uff0c\u8fd4\u56de-1</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20io/#433-epoll_ctl","title":"4.3.3 epoll_ctl","text":"<ul> <li>\u529f\u80fd\uff1a\u7ba1\u7406epoll\u5b9e\u4f8b</li> <li>\u8bed\u6cd5\uff1a<code>int epoll_ctl(int epfd, int op, int fd, struct epoll_event *event);</code></li> <li><code>epfd</code>:epoll_create\u8fd4\u56de\u7684epoll\u5b9e\u4f8b</li> <li><code>op</code>:\u53ef\u90093\u79cd\u9009\u9879<ul> <li><code>EPOLL_CTL_ADD</code> 1 / Add a file descriptor to the interface. /</li> <li><code>EPOLL_CTL_DEL</code> 2 / Remove a file descriptor from the interface. /</li> <li><code>EPOLL_CTL_MOD</code> 3 / Change file descriptor epoll_event structure. /</li> </ul> </li> <li><code>fd</code>:\u9700\u8981\u64cd\u4f5c\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26</li> <li><code>event</code>:\u6307\u5b9a\u4e8b\u4ef6\u4fe1\u606f</li> <li>\u8fd4\u56de\u503c\uff1a\u6210\u529f\u8fd4\u56de0\uff1b\u5931\u8d25\u8fd4\u56de-1</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20io/#434-epoll_wait","title":"4.3.4 epoll_wait","text":"<ul> <li>\u529f\u80fd\uff1a\u7b49\u5f85io\u4e8b\u4ef6\u7684\u53d1\u751f</li> <li>\u8bed\u6cd5\uff1a</li> <li><code>int epoll_wait(int epfd, struct epoll_event *events,int maxevents, int timeout);</code><ul> <li><code>epfd</code>:<code>epoll_create</code>\u8fd4\u56de\u7684\u63cf\u8ff0\u7b26</li> <li><code>events</code>:\u5982\u679c\u6709\u4e8b\u4ef6\u5230\u6765\uff0c\u5b58\u50a8\u4e8b\u4ef6</li> <li><code>timeout</code>:\u963b\u585e\u7b49\u5f85\u65f6\u95f4\uff1b-1\u4e00\u76f4\u7b49\u5f85\uff1b0\u4f1a\u7acb\u5373\u8fd4\u56de\uff1b\u5927\u4e8e0\u8868\u793a\u4f1a\u963b\u585e\u7b49\u5f85\u6700\u591a\u591a\u5c11\u6beb\u79d2</li> <li>\u8fd4\u56de\u503c\uff1a\u5927\u4e8e0\uff0c\u8868\u793a\u5230\u6765\u7684\u4e8b\u4ef6\u6570\uff1b\u7b49\u4e8e0\uff0c\u8868\u793a\u6ca1\u6709\u4e8b\u4ef6\u53d1\u9001\uff1b\u5c0f\u4e8e0\uff0c\u8868\u793a\u53d1\u9001\u9519\u8bef</li> </ul> </li> <li><code>int epoll_pwait(int epfd, struct epoll_event *events,int maxevents, int timeout,const sigset_t *sigmask);</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;sys/epoll.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;errno.h&gt;\n\nusing namespace std;\n\n#define MAXLINE 5\n#define OPEN_MAX 100\n#define LISTENQ 20\n#define SERV_PORT 5000\n#define INFTIM 1000\n\nvoid setnonblocking(int sock)\n{\nint opts;\nopts=fcntl(sock,F_GETFL);\nif(opts&lt;0)\n{\nperror(\"fcntl(sock,GETFL)\");\nexit(1);\n}\nopts = opts|O_NONBLOCK;\nif(fcntl(sock,F_SETFL,opts)&lt;0)\n{\nperror(\"fcntl(sock,SETFL,opts)\");\nexit(1);\n}\n}\n\nint main(int argc, char* argv[])\n{\nint i, maxi, listenfd, connfd, sockfd,epfd,nfds, portnumber;\nssize_t n;\nchar line[MAXLINE];\nsocklen_t clilen;\n\nif ( 2 == argc )\n{\nif( (portnumber = atoi(argv[1])) &lt; 0 )\n{\nfprintf(stderr,\"Usage:%s portnumber/a/n\",argv[0]);\nreturn 1;\n}\n}\nelse\n{\nfprintf(stderr,\"Usage:%s portnumber/a/n\",argv[0]);\nreturn 1;\n}\n\n//\u58f0\u660eepoll_event\u7ed3\u6784\u4f53\u7684\u53d8\u91cf,ev\u7528\u4e8e\u6ce8\u518c\u4e8b\u4ef6,\u6570\u7ec4\u7528\u4e8e\u56de\u4f20\u8981\u5904\u7406\u7684\u4e8b\u4ef6 \nstruct epoll_event ev,events[20];\n//\u751f\u6210\u7528\u4e8e\u5904\u7406accept\u7684epoll\u4e13\u7528\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26 \nepfd=epoll_create(256);\nstruct sockaddr_in clientaddr;\nstruct sockaddr_in serveraddr;\nlistenfd = socket(AF_INET, SOCK_STREAM, 0);\n//\u628asocket\u8bbe\u7f6e\u4e3a\u975e\u963b\u585e\u65b9\u5f0f \n//setnonblocking(listenfd); \n//\u8bbe\u7f6e\u4e0e\u8981\u5904\u7406\u7684\u4e8b\u4ef6\u76f8\u5173\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26 \nev.data.fd=listenfd;\n//\u8bbe\u7f6e\u8981\u5904\u7406\u7684\u4e8b\u4ef6\u7c7b\u578b \nev.events=EPOLLIN|EPOLLET;\n//ev.events=EPOLLIN; \n//\u6ce8\u518cepoll\u4e8b\u4ef6 \nepoll_ctl(epfd,EPOLL_CTL_ADD,listenfd,&amp;ev);\nbzero(&amp;serveraddr, sizeof(serveraddr));\nserveraddr.sin_family = AF_INET;\nchar *local_addr=\"127.0.0.1\";\ninet_aton(local_addr,&amp;(serveraddr.sin_addr));//htons(portnumber); \nserveraddr.sin_port=htons(portnumber);\nbind(listenfd,(sockaddr *)&amp;serveraddr, sizeof(serveraddr));\nlisten(listenfd, LISTENQ);\nmaxi = 0;\nfor ( ; ; ) {\n//\u7b49\u5f85epoll\u4e8b\u4ef6\u7684\u53d1\u751f \nnfds=epoll_wait(epfd,events,20,500);\n//\u5904\u7406\u6240\u53d1\u751f\u7684\u6240\u6709\u4e8b\u4ef6 \nfor(i=0;i&lt;nfds;++i)\n{\nif(events[i].data.fd==listenfd)//\u5982\u679c\u65b0\u76d1\u6d4b\u5230\u4e00\u4e2aSOCKET\u7528\u6237\u8fde\u63a5\u5230\u4e86\u7ed1\u5b9a\u7684SOCKET\u7aef\u53e3\uff0c\u5efa\u7acb\u65b0\u7684\u8fde\u63a5\u3002 \n{\nconnfd = accept(listenfd,(sockaddr *)&amp;clientaddr, &amp;clilen);\nif(connfd&lt;0){\nperror(\"connfd&lt;0\");\nexit(1);\n}\n//setnonblocking(connfd); \nchar *str = inet_ntoa(clientaddr.sin_addr);\ncout &lt;&lt; \"accapt a connection from \" &lt;&lt; str &lt;&lt; endl;\n//\u8bbe\u7f6e\u7528\u4e8e\u8bfb\u64cd\u4f5c\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26 \nev.data.fd=connfd;\n//\u8bbe\u7f6e\u7528\u4e8e\u6ce8\u6d4b\u7684\u8bfb\u64cd\u4f5c\u4e8b\u4ef6 \nev.events=EPOLLIN|EPOLLET;\n//ev.events=EPOLLIN; \n//\u6ce8\u518cev \nepoll_ctl(epfd,EPOLL_CTL_ADD,connfd,&amp;ev);\n}\nelse if(events[i].events&amp;EPOLLIN)//\u5982\u679c\u662f\u5df2\u7ecf\u8fde\u63a5\u7684\u7528\u6237\uff0c\u5e76\u4e14\u6536\u5230\u6570\u636e\uff0c\u90a3\u4e48\u8fdb\u884c\u8bfb\u5165\u3002 \n{\ncout &lt;&lt; \"EPOLLIN\" &lt;&lt; endl;\nif ( (sockfd = events[i].data.fd) &lt; 0)\ncontinue;\nif ( (n = read(sockfd, line, MAXLINE)) &lt; 0) {\nif (errno == ECONNRESET) {\nclose(sockfd);\nevents[i].data.fd = -1;\n} else\nstd::cout&lt;&lt;\"readline error\"&lt;&lt;std::endl;\n} else if (n == 0) {\nclose(sockfd);\nevents[i].data.fd = -1;\n}\nline[n] = '/0';\ncout &lt;&lt; \"read \" &lt;&lt; line &lt;&lt; endl;\n//\u8bbe\u7f6e\u7528\u4e8e\u5199\u64cd\u4f5c\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26 \nev.data.fd=sockfd;\n//\u8bbe\u7f6e\u7528\u4e8e\u6ce8\u6d4b\u7684\u5199\u64cd\u4f5c\u4e8b\u4ef6 \nev.events=EPOLLOUT|EPOLLET;\n//\u4fee\u6539sockfd\u4e0a\u8981\u5904\u7406\u7684\u4e8b\u4ef6\u4e3aEPOLLOUT \nepoll_ctl(epfd,EPOLL_CTL_MOD,sockfd,&amp;ev); }\nelse if(events[i].events&amp;EPOLLOUT) // \u5982\u679c\u6709\u6570\u636e\u53d1\u9001 \n{\nsockfd = events[i].data.fd;\nwrite(sockfd, line, n);\n//\u8bbe\u7f6e\u7528\u4e8e\u8bfb\u64cd\u4f5c\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26 \nev.data.fd=sockfd;\n//\u8bbe\u7f6e\u7528\u4e8e\u6ce8\u6d4b\u7684\u8bfb\u64cd\u4f5c\u4e8b\u4ef6 \nev.events=EPOLLIN|EPOLLET;\n//\u4fee\u6539sockfd\u4e0a\u8981\u5904\u7406\u7684\u4e8b\u4ef6\u4e3aEPOLIN \nepoll_ctl(epfd,EPOLL_CTL_MOD,sockfd,&amp;ev);\n}\n}\n}\nreturn 0;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20io/#5-mmapmunmap","title":"5 mmap\u548cmunmap","text":"<ul> <li>\u529f\u80fd\uff1a\u4e00\u79cd\u5c06\u6587\u4ef6\u6216\u8bbe\u5907\u6620\u5c04\u6216\u89e3\u9664\u6620\u5c04\u5230\u5185\u5b58\u4e2d\u7684\u6280\u672f</li> <li>\u4f18\u70b9\uff1a</li> <li>\u8bfb\u5199\u6587\u4ef6\u907f\u514d\u4e86 read() \u548c write() \u7cfb\u7edf\u8c03\u7528\uff0c\u4e5f\u907f\u514d\u4e86\u6570\u636e\u7684\u62f7\u8d1d\u3002</li> <li>\u9664\u4e86\u6f5c\u5728\u7684\u9875\u9519\u8bef\uff0c\u8bfb\u5199 map \u540e\u7684\u6587\u4ef6\u4e0d\u5f15\u8d77\u7cfb\u7edf\u8c03\u7528\u6216\u8005\u4e0a\u4e0b\u6587\u5207\u6362\u3002\u5c31\u50cf\u8bbf\u95ee\u5185\u5b58\u4e00\u6837\u7b80\u5355\u3002</li> <li>\u591a\u4e2a\u8fdb\u7a0b map \u540c\u4e00\u4e2a\u5bf9\u8c61\uff0c\u53ef\u4ee5\u5171\u4eab\u6570\u636e\u3002</li> <li>\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u6307\u9488\u6765\u8df3\u8f6c\u5230\u6587\u4ef6\u67d0\u4e2a\u4f4d\u7f6e\uff0c\u4e0d\u5fc5\u4f7f\u7528 lseek() \u7cfb\u7edf\u8c03\u7528\u3002</li> <li>\u52a3\u52bf</li> <li>\u5185\u5b58\u6d6a\u8d39\u3002\u7531\u4e8e\u5fc5\u987b\u8981\u4f7f\u7528\u6574\u6570\u9875\u7684\u5185\u5b58\u3002</li> <li>\u5bfc\u81f4\u96be\u4ee5\u627e\u5230\u8fde\u7eed\u7684\u5185\u5b58\u533a\u57df</li> <li>\u521b\u5efa\u548c\u7ef4\u62a4\u6620\u5c04\u548c\u76f8\u5173\u7684\u6570\u636e\u7ed3\u6784\u7684\u989d\u5916\u5f00\u9500\u3002\u5728\u5927\u6587\u4ef6\u548c\u9891\u7e41\u8bbf\u95ee\u7684\u6587\u4ef6\u4e2d\uff0c\u8fd9\u4e2a\u5f00\u9500\u76f8\u6bd4 read write \u7684 copy \u5f00\u9500\u5c0f\u3002</li> <li>\u53c2\u8003\u8d44\u6599</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;sys/mman.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#define handle_error(msg) \\\n    do { perror(msg); exit(EXIT_FAILURE); } while (0)\nint\nmain(int argc, char *argv[])\n{\nchar *addr;\nint fd;\nstruct stat sb;\noff_t offset, pa_offset;\nsize_t length;\nssize_t s;\nif (argc &lt; 3 || argc &gt; 4) {\nfprintf(stderr, \"%s file offset [length]\\n\", argv[0]);\nexit(EXIT_FAILURE);\n}\nfd = open(argv[1], O_RDONLY);\nif (fd == -1)\nhandle_error(\"open\");\nif (fstat(fd, &amp;sb) == -1)           /* To obtain file size */\nhandle_error(\"fstat\");\noffset = atoi(argv[2]);\npa_offset = offset &amp; ~(sysconf(_SC_PAGE_SIZE) - 1);\n/* offset for mmap() must be page aligned */\nif (offset &gt;= sb.st_size) {\nfprintf(stderr, \"offset is past end of file\\n\");\nexit(EXIT_FAILURE);\n}\nif (argc == 4) {\nlength = atoi(argv[3]);\nif (offset + length &gt; sb.st_size)\nlength = sb.st_size - offset;\n/* Canaqt display bytes past end of file */\n} else {    /* No length arg ==&gt; display to end of file */\nlength = sb.st_size - offset;\n}\naddr = mmap(NULL, length + offset - pa_offset, PROT_READ,\nMAP_PRIVATE, fd, pa_offset);\nif (addr == MAP_FAILED)\nhandle_error(\"mmap\");\ns = write(STDOUT_FILENO, addr + offset - pa_offset, length);\nmunmap(addr, length + offset - pa_offset);\nif (s != length) {\nif (s == -1)\nhandle_error(\"write\");\nfprintf(stderr, \"partial write\");\nexit(EXIT_FAILURE);\n}\nexit(EXIT_SUCCESS);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20io/#51-mmap","title":"5.1 mmap","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>void *mmap (void *addr, size_t len, int prot,int flags, int fd, __off_t offset)</code></li> <li><code>addr</code>:\u4e00\u822c\u8bbe\u7f6eNULL\u5373\u53ef\uff0cmmap\u6267\u884c\u6210\u529f\u4f1a\u8fd4\u56de\u4e00\u4e2a\u6267\u884c\u539f\u6587\u4ef6\u6570\u636e\u7684\u5730\u5740</li> <li><code>len</code>:\u6587\u4ef6\u957f\u5ea6</li> <li><code>prot</code>:\u6307\u5b9a\u6620\u5c04\u5185\u5b58\u4fdd\u62a4\u65b9\u5f0f\uff0c\u6ce8\u610f\u4e0d\u80fd\u4e0e\u6587\u4ef6\u8bbf\u95ee\u65b9\u5f0f\u51b2\u7a81,\u6bd4\u5982\u6587\u4ef6\u4ee5\u8bfb\u6253\u5f00\uff0cprot\u5219\u4e0d\u80fd\u662fPROT_WRITE<ul> <li><code>PROT_READ</code>:  0x1     / Page can be read. /</li> <li><code>PROT_WRITE</code>: 0x2     / Page can be written. /</li> <li><code>PROT_EXEC</code>:  0x4     / Page can be executed. /</li> <li><code>PROT_NONE</code>:  0x0     / Page can not be accessed. /</li> </ul> </li> <li><code>flag</code>:\u6307\u5b9a\u6620\u5c04\u7684\u7c7b\u578b<ul> <li><code>MAP_SHARED</code>:\u548c\u5176\u4ed6\u8fdb\u7a0b\u5171\u4eab\u8fd9\u4e2a\u6587\u4ef6\u3002\u5f80\u5185\u5b58\u4e2d\u5199\u5165\u76f8\u5f53\u4e8e\u5f80\u6587\u4ef6\u4e2d\u5199\u5165\u3002\u4f1a\u5f71\u54cd\u6620\u5c04\u4e86\u8fd9\u4e2a\u6587\u4ef6\u7684\u5176\u4ed6\u8fdb\u7a0b</li> <li><code>MAP_PRIVATE</code>:\u4efb\u4f55\u5185\u5b58\u4e2d\u7684\u6539\u52a8\u5e76\u4e0d\u53cd\u6620\u5230\u6587\u4ef6\u4e4b\u4e2d,\u4e5f\u4e0d\u53cd\u6620\u5230\u5176\u4ed6\u6620\u5c04\u4e86\u8fd9\u4e2a\u6587\u4ef6\u7684\u8fdb\u7a0b\u4e4b\u4e2d\u3002\u5982\u679c\u53ea\u9700\u8981\u8bfb\u53d6\u67d0\u4e2a\u6587\u4ef6\u800c\u4e0d\u6539\u53d8\u6587\u4ef6\u5185\u5bb9\uff0c\u53ef\u4ee5\u4f7f\u7528\u8fd9\u79cd\u6a21\u5f0f</li> </ul> </li> <li><code>fd</code>:\u6253\u5f00\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\uff08mmap\u4e4b\u540e\u5f15\u7528\u6280\u672f+1\uff0c\u56e0\u6b64\u53ef\u4ee5close\u5173\u95ed\uff09</li> <li><code>offset</code>:\u6587\u4ef6\u504f\u79fb\u957f\u5ea6</li> <li>\u8fd4\u56de\u503c\uff1a\u6210\u529f\uff0c\u8fd4\u56de\u5185\u5b58\u6620\u5c04\u5730\u5740\uff1b\u5931\u8d25\u8fd4\u56deMAP_FAILED\uff08-1\uff09</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20io/#52-munmap","title":"5.2 munmap","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>int munmap (void *addr, size_t len);</code></li> <li><code>addr</code>:\u6620\u5c04\u7684\u5185\u5b58\u5730\u5740\uff08\u5bf9\u5e94mmap\u7684\u8fd4\u56de\u503c\uff09</li> <li><code>len</code>:\u5185\u5b58\u5b57\u8282\u957f\u5ea6\uff08\u5bf9\u5e94mmap\u7684len\u53c2\u6570\uff09</li> <li>\u8fd4\u56de\u503c\uff1a\u6210\u529f\u8fd4\u56de0\uff0c\u5931\u8d25\u8fd4\u56de-1</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/","title":"UNIX net","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#1","title":"1 \u5957\u63a5\u5b57\u5730\u5740\u7ed3\u6784","text":"<ul> <li>sockaddr\u3001sockaddr_in\u3001sockaddr_in6\u7684\u533a\u522b\u53ca\u8f6c\u6362</li> </ul> <pre><code>title\uff1a\u5957\u63a5\u5b57\u5730\u5740\u7ed3\u6784\u533a\u522b\u5bf9\u6bd4\n1. sockaddr\u3001sockaddr_in\u3001sockaddr_in6\u9996\u90e8\u90fd\u542b2\u4e2a\u5b57\u8282\u957f\u5ea6\u7684address family\u5b57\u6bb5\uff0c\u901a\u8fc7\u6b64\u5b57\u6bb5\uff0c\u53ef\u4ee5\u5224\u65ad\u7c7b\u578b\u662fAF_INET\u3001\u8fd8\u662fAF_INET6\u3002\n2. sockaddr\u5185\u5b58\u536016\u5b57\u8282\uff0csockaddr_in\u536016\u5b57\u8282\uff0csockaddr_in6\u536028\u5b57\u8282\u3002\n3. \u901a\u5e38\u5728\u4f7f\u7528bind\u3001connect\u51fd\u6570\u7ed1\u5b9asockadd\u7ed3\u6784\u6307\u9488\u65f6\uff0c\u5f3a\u5236\u5c06sockaddr_in\u3001sockaddr_in6\u8f6c\u6210sockadd\u7ed3\u6784\u6307\u9488\uff0c\u867d\u7136\u5b83\u4eec\u5185\u5b58\u5927\u5c0f\u4e0d\u540c\uff0c\u4f46\u5185\u90e8\u5b9e\u73b0\u4f1a\u6839\u636esockaddr:\uff1asa_family\u6765\u5224\u65ad\u5230\u5e95\u662fsockaddr_in6\uff0c\u8fd8\u662fsockaddr_in\u3002\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>int bind(int socket_fd, sockaddr* p_addr, int add_size)\n{\nif (p_addr-&gt;sa_family == AF_INET)\n{\nsockaddr_in* p_addr_in = (sockaddr_in*)p_addr;\n//...\n}\nelse if (p_addr-&gt;sa_family == AF_INET6)\n{\nsockaddr_in6* p_addr_in = (sockaddr_in6*)p_addr;\n//...\n}\nelse\n{\n//...\n}\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#11-sockaddr","title":"1.1 \u901a\u7528\u5957\u63a5\u5b57\u5730\u5740\u7ed3\u6784 sockaddr","text":"<ul> <li>\u5934\u6587\u4ef6\uff1a<code>sys/socket.h</code></li> </ul> <pre><code>struct sockaddr\n{\n__SOCKADDR_COMMON(sa_); /* Common data: address family and length.  */\nchar sa_data[14];       /* Address data.  */\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#12-ipv4-sockaddr_in","title":"1.2 ipv4 \u5957\u63a5\u5b57\u5730\u5740\u7ed3\u6784 sockaddr_in","text":"<ul> <li>\u5934\u6587\u4ef6\uff1a<code>netinet/in.h</code></li> </ul> <pre><code>struct sockaddr_in\n{\n__SOCKADDR_COMMON(sin_);\nin_port_t sin_port;      /* Port number.  */\nstruct in_addr sin_addr; /* Internet address.  */\n\n/* Pad to size of `struct sockaddr'.  */\nunsigned char sin_zero[sizeof(struct sockaddr) - __SOCKADDR_COMMON_SIZE - sizeof(in_port_t) - sizeof(struct in_addr)];\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#13-ipv6-sockaddr_in6","title":"1.3 ipv6 \u5957\u63a5\u5b57\u5730\u5740\u7ed3\u6784 sockaddr_in6","text":"<ul> <li>\u5934\u6587\u4ef6\uff1a<code>netinet/in.h</code></li> </ul> <pre><code>struct sockaddr_in6\n{\n__SOCKADDR_COMMON(sin6_);\nin_port_t sin6_port;       /* Transport layer port  */\nuint32_t sin6_flowinfo;    /* IPv6 flow information */\nstruct in6_addr sin6_addr; /* IPv6 address */\nuint32_t sin6_scope_id;    /* IPv6 scope-id */\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#2","title":"2 \u5b57\u8282\u6392\u5e8f","text":"<pre><code>- \u7f51\u7edc\u5b57\u8282\u5e8f\u7edf\u4e00\u89c4\u5b9a\u662f\u5927\u7aef\uff1b\u4e3b\u673a\u5b57\u8282\u5e8f\u53ef\u4ee5\u662f\u5927\u7aef\uff0c\u4e5f\u53ef\u4ee5\u662f\u5c0f\u7aef\uff0c\u7531\u64cd\u4f5c\u7cfb\u7edf\u51b3\u5b9a\u3002\n</code></pre> <ul> <li>\u5934\u6587\u4ef6\uff1a<code>netinet/in.h</code></li> </ul> <pre><code>// h \u8868\u793ahost n \u8868\u793anetwork s \u8868\u793ashort=16\u4f4d l \u8868\u793along=32\u4f4d\nuint32_t htonl(uint32_t hostlong);\nuint16_t htons(uint16_t hostshort);//\u4e3b\u673a\u5b57\u8282\u5e8f\u8f6c\u7f51\u7edc\u5b57\u8282\u5e8f\nuint32_t ntohl(uint32_t netlong);\nuint16_t ntohs(uint16_t netshort);//\u7f51\u7edc\u5b57\u8282\u5e8f\u8f6c\u4e3b\u673a\u5b57\u8282\u5e8f\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#3","title":"3 \u5730\u5740\u8f6c\u6362\u51fd\u6570","text":"<pre><code>\u5e94\u8be5\u5c3d\u91cf\u9009\u62e9 ipv4\u548cipv6\u901a\u7528\u5730\u5740\u8f6c\u6362inet_pton\u3001inet_ntop\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#31-ipv4","title":"3.1 ipv4 \u5b57\u7b26\u4e32\u548c\u7f51\u7edc\u5b57\u8282\u5e8f\u5730\u5740\u8f6c\u6362","text":"<ul> <li>\u5934\u6587\u4ef6\uff1a<code>arpa/inet.h</code></li> </ul> <pre><code>int inet_aton(const char *cp, struct in_addr *inp);//ipv4\u5b57\u7b26\u4e32(\u5982127.0.0.1)\u8f6c\u5230in_addr\u7ed3\u6784\n\nin_addr_t inet_addr(const char *cp);//ipv4\u5b57\u7b26\u4e32\u8f6c32\u4f4d\u7684\u7f51\u7edc\u5b57\u8282\u5e8f\u5730\u5740\n\nin_addr_t inet_network(const char *cp);\n\nchar *inet_ntoa(struct in_addr in);//32\u4f4d\u7684\u7f51\u7edc\u5b57\u8282\u5e8f\u5730\u5740\u8f6cipv4\u5b57\u7b26\u4e32\n\nstruct in_addr inet_makeaddr(int net, int host);\n\nin_addr_t inet_lnaof(struct in_addr in);\n\nin_addr_t inet_netof(struct in_addr in);\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#32-ipv4-ipv6","title":"3.2 ipv4 \u548c ipv6 \u901a\u7528\u5730\u5740\u8f6c\u6362","text":"<ul> <li>\u8bed\u6cd5\uff1a</li> <li><code>int inet_pton(int af, const char *src, void *dst);</code>:\u6587\u672c\u683c\u5f0fip\u5730\u5740\u8f6c2\u8fdb\u5236\u5f62\u5f0f<ul> <li><code>af</code>:\u8868\u793aip\u534f\u8bae\u65cf ,\u5fc5\u987b\u662fAF_INET \u6216 AF_INET6</li> <li><code>src</code>:ip\u5b57\u7b26\u4e32\u8868\u793a\uff0c\u5982ipv4 127.0.0.1; ipv6 0:0:0:0:0:0:0:1</li> <li><code>dst</code>:ip\u5730\u5740\u7ed3\u6784\uff0cipv4\u662fin_addr \uff1bipv6 \u662fin6_addr</li> </ul> </li> <li><code>const char *inet_ntop(int af, const void *src,char *dst, socklen_t size);</code>\uff1a2\u8fdb\u5236\u5f62\u5f0fip\u5730\u5740\u8f6c\u6587\u672c\u683c\u5f0f<ul> <li><code>af</code>:\u8868\u793aip\u534f\u8bae\u65cf ,\u5fc5\u987b\u662fAF_INET \u6216 AF_INET6</li> <li><code>src</code>:ip\u5730\u5740\u7ed3\u6784\uff0cipv4\u662fin_addr \uff1bipv6 \u662fin6_addr</li> <li><code>dst</code>:ip\u5b57\u7b26\u4e32\u8868\u793a\uff0c\u5982ipv4 127.0.0.1; ipv6 0:0:0:0:0:0:0:1</li> <li><code>size</code>:dst\u53c2\u6570\u5b57\u7b26\u4e32\u7684\u5927\u5c0f\uff0cipv4\u65f6=INET_ADDRSTRLEN \uff1bipv6\u65f6=INET6_ADDRSTRLEN</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;arpa/inet.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char *argv[])\n{\nunsigned char buf[sizeof(struct in6_addr)];\nint domain, s;\nchar str[INET6_ADDRSTRLEN];\n\nif (argc != 3)\n{\nfprintf(stderr, \"Usage: %s {i4|i6|&lt;num&gt;} string\\n\", argv[0]);\nexit(EXIT_FAILURE);\n}\n\ndomain = (strcmp(argv[1], \"i4\") == 0) ? AF_INET : (strcmp(argv[1], \"i6\") == 0) ? AF_INET6\n: atoi(argv[1]);\n\ns = inet_pton(domain, argv[2], buf);\nprintf(\"inet_pton(%d, %s, %s) = %d\\n\", domain, argv[2], buf, s);\nif (s &lt;= 0)\n{\nif (s == 0)\nfprintf(stderr, \"Not in presentation format\");\nelse\nperror(\"inet_pton\");\nexit(EXIT_FAILURE);\n}\n\nif (inet_ntop(domain, buf, str, INET6_ADDRSTRLEN) == NULL)\n{\nperror(\"inet_ntop\");\nexit(EXIT_FAILURE);\n}\nprintf(\"inet_ntop(%d, %s, %s, %d) = %s\\n\", domain, buf, str, INET6_ADDRSTRLEN, str);\nprintf(\"%s\\n\", str);\n\nexit(EXIT_SUCCESS);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#4-socket","title":"4 socket \u63a5\u53e3","text":"<p> - \u5ba2\u6237\u7aef\u793a\u4f8b</p> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;sys/socket.h&gt;\n\nint main(){\n//\u521b\u5efa\u5957\u63a5\u5b57\nint sock = socket(AF_INET, SOCK_STREAM, 0);\n\n//\u5411\u670d\u52a1\u5668\uff08\u7279\u5b9a\u7684IP\u548c\u7aef\u53e3\uff09\u53d1\u8d77\u8bf7\u6c42\nstruct sockaddr_in serv_addr;\nmemset(&amp;serv_addr, 0, sizeof(serv_addr));  //\u6bcf\u4e2a\u5b57\u8282\u90fd\u75280\u586b\u5145\nserv_addr.sin_family = AF_INET;  //\u4f7f\u7528IPv4\u5730\u5740\nserv_addr.sin_addr.s_addr = inet_addr(\"127.0.0.1\");  //\u5177\u4f53\u7684IP\u5730\u5740\nserv_addr.sin_port = htons(1234);  //\u7aef\u53e3\nconnect(sock, (struct sockaddr*)&amp;serv_addr, sizeof(serv_addr));\n\n//\u8bfb\u53d6\u670d\u52a1\u5668\u4f20\u56de\u7684\u6570\u636e\nchar buffer[40];\nread(sock, buffer, sizeof(buffer)-1);\n\nprintf(\"Message form server: %s\\n\", buffer);\n\n//\u5173\u95ed\u5957\u63a5\u5b57\nclose(sock);\n\nreturn 0;\n}\n</code></pre> <ul> <li>\u670d\u52a1\u7aef\u793a\u4f8b</li> </ul> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n\nint main(){\n//\u521b\u5efa\u5957\u63a5\u5b57\nint serv_sock = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\n\n//\u5c06\u5957\u63a5\u5b57\u548cIP\u3001\u7aef\u53e3\u7ed1\u5b9a\nstruct sockaddr_in serv_addr;\nmemset(&amp;serv_addr, 0, sizeof(serv_addr));  //\u6bcf\u4e2a\u5b57\u8282\u90fd\u75280\u586b\u5145\nserv_addr.sin_family = AF_INET;  //\u4f7f\u7528IPv4\u5730\u5740\nserv_addr.sin_addr.s_addr = inet_addr(\"127.0.0.1\");  //\u5177\u4f53\u7684IP\u5730\u5740\nserv_addr.sin_port = htons(1234);  //\u7aef\u53e3\nbind(serv_sock, (struct sockaddr*)&amp;serv_addr, sizeof(serv_addr));\n\n//\u8fdb\u5165\u76d1\u542c\u72b6\u6001\uff0c\u7b49\u5f85\u7528\u6237\u53d1\u8d77\u8bf7\u6c42\nlisten(serv_sock, 20);\n\n//\u63a5\u6536\u5ba2\u6237\u7aef\u8bf7\u6c42\nstruct sockaddr_in clnt_addr;\nsocklen_t clnt_addr_size = sizeof(clnt_addr);\nint clnt_sock = accept(serv_sock, (struct sockaddr*)&amp;clnt_addr, &amp;clnt_addr_size);\n\n//\u5411\u5ba2\u6237\u7aef\u53d1\u9001\u6570\u636e\nchar str[] = \"Hello World!\";\nwrite(clnt_sock, str, sizeof(str));\n\n//\u5173\u95ed\u5957\u63a5\u5b57\nclose(clnt_sock);\nclose(serv_sock);\n\nreturn 0;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#41-socket","title":"4.1 socket","text":"<ul> <li>\u529f\u80fd\uff1a\u521b\u5efa\u5957\u63a5\u5b57</li> <li>\u4f7f\u7528\u8fd4\u56de\uff1a\u5ba2\u6237\u7aef\u3001\u670d\u52a1\u7aef</li> <li>\u8bed\u6cd5\uff1a<code>int socket(int domain, int type, int protocol)</code></li> <li><code>domain</code>:\u901a\u4fe1\u57df,\u5982\uff1aAF_INET\u3001AF_INET6\u3001AF_UNIX</li> <li><code>type</code>:\u5957\u63a5\u5b57\u7c7b\u578b\uff0c\u5982\uff1aSOCK_STREAM\u3001SOCK_DGRAM\u3001SOCK_RAW</li> <li><code>protocal</code>:\u901a\u4fe1\u534f\u8bae\uff0c\u901a\u5e38\u6307\u5b9a0\u5c31\u53ef\u4ee5\uff0c\u8fd9\u6837\u7cfb\u7edf\u4f1a\u6839\u636edomain\u548ctype\u91c7\u7528\u9ed8\u8ba4\u503c</li> <li>\u8fd4\u56de\u503c\uff1a\u6210\u529f\u8fd4\u56de\u5957\u63a5\u5b57\u63cf\u8ff0\u7b26\uff0c\u5931\u8d25\u8fd4\u56de-1</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#42-connect","title":"4.2 connect","text":"<ul> <li>\u529f\u80fd\uff1a\u8fde\u63a5\u5957\u63a5\u5b57</li> <li>\u4f7f\u7528\u8303\u56f4\uff1a\u5ba2\u6237\u7aef</li> <li>\u8bed\u6cd5\uff1a<code>int connect(int socket, const struct sockaddr *address,socklen_t address_len);</code></li> <li><code>socket</code>:scoket\u63a5\u53e3\u521b\u5efa\u7684\u5957\u63a5\u5b57\u63cf\u8ff0\u7b26</li> <li><code>address</code>:\u9700\u8981\u8fde\u63a5\u7684\u5957\u63a5\u5b57\u5730\u5740</li> <li><code>address_len</code>:address\u7ed3\u6784\u7684\u957f\u5ea6</li> <li>\u8fd4\u56de\u503c\uff1a\u6210\u529f0\uff1b\u662f\u5931\u8d25-1</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#43-bind","title":"4.3 bind","text":"<ul> <li>\u529f\u80fd\uff1a\u7ed1\u5b9a\u5957\u63a5\u5b57</li> <li>\u4f7f\u7528\u8303\u56f4\uff1a\u670d\u52a1\u7aef</li> <li>\u8bed\u6cd5\uff1a<code>int bind(int sockfd, const struct sockaddr *addr,socklen_t addrlen);</code></li> <li><code>socket</code>:scoket\u63a5\u53e3\u521b\u5efa\u7684\u5957\u63a5\u5b57\u63cf\u8ff0\u7b26</li> <li><code>address</code>:\u9700\u8981\u8fde\u63a5\u7684\u5957\u63a5\u5b57\u5730\u5740</li> <li><code>address_len</code>:address\u7ed3\u6784\u7684\u957f\u5ea6</li> <li>\u8fd4\u56de\u503c\uff1a\u6210\u529f0\uff1b\u662f\u5931\u8d25-1</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#44-listen","title":"4.4 listen","text":"<ul> <li>\u529f\u80fd\uff1a\u5728\u5957\u63a5\u5b57\u4e0a\u7684\u76d1\u542c\u8fde\u63a5\u8bf7\u6c42</li> <li>\u4f7f\u7528\u8303\u56f4\uff1a\u670d\u52a1\u7aef</li> <li>\u8bed\u6cd5\uff1a<code>int listen(int sockfd, int backlog);</code></li> <li><code>sockfd</code>:\u521b\u5efa\u5e76\u7ed1\u5b9a\u540e\u7684\u5957\u63a5\u5b57\u63cf\u8ff0\u7b26</li> <li><code>backlog</code>:\u961f\u5217\u4e2d\u6700\u5927\u63cf\u8ff0\u7b26\u6570\u91cf</li> <li>\u8fd4\u56de\u503c\uff1a\u6210\u529f0\uff1b\u662f\u5931\u8d25-1</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#45-accept","title":"4.5 accept","text":"<ul> <li>\u529f\u80fd\uff1a\u63a5\u6536\u5957\u63a5\u5b57\u8fde\u63a5\u8bf7\u6c42</li> <li>\u4f7f\u7528\u8303\u56f4\uff1a\u670d\u52a1\u7aef</li> <li>\u8bed\u6cd5\uff1a<code>int accept(int socket, struct sockaddr *restrict address,socklen_t *restrict address_len);</code></li> <li><code>socket</code>:scoket\u63a5\u53e3\u521b\u5efa\u7684\u5957\u63a5\u5b57\u63cf\u8ff0\u7b26</li> <li><code>address</code>:\u5b58\u50a8\u5bf9\u65b9\u5957\u63a5\u5b57\u4fe1\u606f\uff0c\u53ef\u4ee5\u4e3aNULL</li> <li><code>address_len</code>:address\u7ed3\u6784\u7684\u957f\u5ea6</li> <li>\u8fd4\u56de\u503c\uff1a\u6210\u529f\u8fd4\u56de\u65b0\u7684\u5957\u63a5\u5b57\uff0c\u4f9b\u8bfb\u5199\uff1b\u5931\u8d25-1</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#5","title":"5 \u6d88\u606f\u8bfb\u5199\u63a5\u53e3","text":"<pre><code>- `send`\u51fd\u6570\u5728\u672c\u8d28\u4e0a\u5e76\u4e0d\u662f\u5411\u7f51\u7edc\u4e0a\u53d1\u9001\u6570\u636e\uff0c\u800c\u662f\u5c06**\u5e94\u7528\u5c42\u53d1\u9001\u7f13\u51b2\u533a\u7684\u6570\u636e\u62f7\u8d1d\u5230\u5185\u6838\u7f13\u51b2\u533a**\u4e2d\uff0c\u81f3\u4e8e\u6570\u636e\u4ec0\u4e48\u65f6\u5019\u4f1a\u4ece\u7f51\u5361\u7f13\u51b2\u533a\u4e2d\u771f\u6b63\u5730\u53d1\u5230\u7f51\u7edc\u4e2d\uff0c\u8981\u6839\u636eTCP/IP\u534f\u8bae\u6808\u7684\u884c\u4e3a\u6765\u786e\u5b9a\u3002\u5982\u679c`socket`\u8bbe\u7f6e\u4e86`TCP_NODELAY`\u9009\u9879\uff08\u5373**\u7981\u7528nagel\u7b97\u6cd5**\uff09\u3002\u5b58\u653e\u5230\u5185\u6838\u7f13\u51b2\u533a\u7684\u6570\u636e\u5c31\u4f1a\u88ab\u7acb\u5373\u53d1\u9001\u51fa\u53bb\uff0c\u53cd\u4e4b\uff0c\u4e00\u6b21\u653e\u5165\u5185\u6838\u7f13\u51b2\u533a\u7684\u6570\u636e\u5305\u5982\u679c\u592a\u5c0f\uff0c\u5219\u7cfb\u7edf\u4f1a\u5728\u591a\u4e2a\u5c0f\u7684\u6570\u636e\u5305\u51d1\u6210\u4e00\u4e2a\u8db3\u591f\u5927\u7684\u6570\u636e\u5305\u4e4b\u540e\u624d\u4f1a\u5c06\u6570\u636e\u53d1\u9001\u51fa\u53bb\u3002\n- `recv`\u51fd\u6570\u5728\u672c\u8d28\u4e0a\u5e76\u4e0d\u662f\u4ece\u7f51\u7edc\u4e0a\u6536\u53d6\u6570\u636e\uff0c\u800c\u662f**\u5c06\u5185\u6838\u7f13\u51b2\u533a\u4e2d\u7684\u6570\u636e\u62f7\u8d1d\u5230\u5e94\u7528\u7a0b\u5e8f\u7684\u7f13\u51b2\u533a**\u4e2d\u3002\u5728\u62f7\u8d1d\u5b8c\u6210\u540e\u4f1a\u5c06\u5185\u6838\u7f13\u51b2\u533a\u4e2d\u7684\u8be5\u90e8\u5206\u6570\u636e\u79fb\u9664\u3002\n</code></pre> <ul> <li><code>recv</code>\u548c<code>send</code>\u901a\u5e38\u7528\u4e8eTCP\uff1b<code>recvfrom</code>\u548c<code>sendto</code>\u901a\u5e38\u7528\u4e8eUDP</li> <li>\u5f53<code>recv</code>\u4e2dflag\u53c2\u6570\u4e3a0\u65f6\uff0c\u7b49\u4ef7\u4e8e<code>read</code>;\u5f53<code>send</code>\u4e2dflag\u53c2\u6570\u4e3a0\u65f6\uff0c\u7b49\u4ef7\u4e8e<code>write</code>;</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#51-recv","title":"5.1 recv \u51fd\u6570","text":"<pre><code>ssize_t recv(int sockfd, void *buf, size_t len, int flags);\nssize_t recvfrom(int sockfd, void *buf, size_t len, int flags,\nstruct sockaddr *src_addr, socklen_t *addrlen);\nssize_t recvmsg(int sockfd, struct msghdr *msg, int flags);\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#52-send","title":"5.2 send \u51fd\u6570","text":"<pre><code>ssize_t send(int sockfd, const void *buf, size_t len, int flags);\nssize_t sendto(int sockfd, const void *buf, size_t len, int flags,\nconst struct sockaddr *dest_addr, socklen_t addrlen);\nssize_t sendmsg(int sockfd, const struct msghdr *msg, int flags);\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#6","title":"6 \u963b\u585e\u548c\u975e\u963b\u585e\u6a21\u5f0f","text":"<pre><code>\u975e\u963b\u585e\u6a21\u5f0f\u4e00\u822c\u7528\u4e8e\u9700\u8981\u652f\u6301**\u9ad8\u5e76\u53d1\u591aQPS**\u7684\u573a\u666f\uff08\u5982\u670d\u52a1\u5668\u7a0b\u5e8f\uff09\n</code></pre> <ul> <li>send/recv\u963b\u585e\u548c\u975e\u963b\u585e</li> <li>\u975e\u963b\u585e\u6a21\u5f0f\u4e0bsend\u548crecv\u51fd\u6570\u7684\u8fd4\u56de\u503c\u603b\u7ed3\uff1a</li> </ul> \u8fd4\u56de\u503cn \u8fd4\u56de\u503c\u7684\u542b\u4e49 \u5927\u4e8e0 \u6210\u529f\u53d1\u9001<code>send</code>\u6216\u63a5\u6536<code>recv</code>n\u5b57\u8282 \u7b49\u4e8e0 \u5bf9\u7aef\u5173\u95ed\u8fde\u63a5 \u5c0f\u4e8e0 \u51fa\u9519\uff0c\u88ab\u4fe1\u53f7\u4e2d\u65ad\uff0c\u5bf9\u7aefTCP\u7a97\u53e3\u592a\u5c0f\u5bfc\u81f4\u6570\u636e\u53d1\u9001\u4e0d\u51fa\u53bb\u6216\u8005\u5f53\u524d\u7f51\u5361\u7f13\u51b2\u533a\u5df2\u65e0\u6570\u636e\u53ef\u63a5\u6536 <p>\u8fd4\u56de\u503c\u5927\u4e8e 0\u3002\u5f53 <code>send/recv</code> \u51fd\u6570\u7684\u8fd4\u56de\u503c\u5927\u4e8e 0 \u65f6\uff0c\u8868\u793a\u53d1\u9001\u6216\u63a5\u6536\u591a\u5c11\u5b57\u8282\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u4e00\u5b9a\u8981\u5224\u65ad <code>send</code> \u51fd\u6570\u7684\u8fd4\u56de\u503c\u662f\u4e0d\u662f\u6211\u4eec\u671f\u671b\u53d1\u9001\u7684\u5b57\u8282\u6570\uff0c\u800c\u4e0d\u662f\u7b80\u5355\u5224\u65ad\u5176\u8fd4\u56de\u503c\u5927\u4e8e 0\u3002 - \u963b\u585e\u6a21\u5f0f\u4e0b\u6b63\u786e\u7684\u53d1\u9001\u793a\u4f8b</p> <pre><code>//\u4e0d\u63a8\u8350\u7684\u65b9\u5f0f\nint n = send(socket, buf, buf_length, 0);\nif(n == buf_length)\n{\nprintf(\"send data successfully\\n\");\n}\n\n//\u63a8\u8350\u7684\u65b9\u5f0f\nbool SendData(const char* buf, int buf_length)\n{\n//\u5df2\u7ecf\u53d1\u9001\u7684\u5b57\u8282\u6570\nint sent_bytes = 0;\nint ret = 0;\nwhile(true)\n{\nret = send(m_hSocket, buf + sent_bytes, buf_length - sent_bytes, 0);\nif(ret == -1)\n{\nif(errno == EWOULDBLOCK)\n{\n//\u4e25\u8c28\u7684\u505a\u6cd5\uff1a\u5982\u679c\u53d1\u9001\u4e0d\u51fa\u53bb\uff0c\u5219\u5e94\u8be5\u7f13\u5b58\u5c1a\u672a\u53d1\u9001\u51fa\u53bb\u7684\u6570\u636e\nbreak;\n}\nelse if(errno == EINTR)\ncontinue;\nelse\nreturn false;\n}\nelse if(ret == 0)\nreturn false;\nsent_bytes += ret;\nif(sent_bytes == buf_length)\nbreak;\n}\nreturn true;\n}\n</code></pre> <ul> <li>\u4e0b\u8868\u8868\u793a\u7684\u662f\u975e\u963b\u585e\u6a21\u5f0f\u4e0b\uff0c<code>socket</code>\u7684<code>send</code>\u548c<code>recv</code>\u8fd4\u56de\u503c\uff0c\u5bf9\u4e8e\u963b\u585e\u6a21\u5f0f\u4e0b\u7684<code>socket</code>\uff0c\u5982\u679c\u8fd4\u56de\u503c\u4e3a-1\uff0c\u5219\u4e00\u5b9a\u8868\u793a\u51fa\u9519\u3002</li> </ul> \u8fd4\u56de\u503c\u548c\u9519\u8bef\u7801 send\u51fd\u6570 recv\u51fd\u6570 \u8fd4\u56de-1\uff0c\u9519\u8bef\u7801\u662fEWOULDBLOCK\u6216EAGAIN TCP\u7a97\u53e3\u592a\u5c0f\uff0c\u6570\u636e\u6682\u65f6\u53d1\u9001\u4e0d\u51fa\u53bb \u5728\u5f53\u524d\u7f13\u51b2\u533a\u4e2d\u65e0\u53ef\u8bfb\u6570\u636e \u8fd4\u56de-1\uff0c\u9519\u8bef\u7801\u662fEINTR \u88ab\u4fe1\u53f7\u4e2d\u65ad\uff0c\u9700\u8981\u91cd\u8bd5 \u88ab\u4fe1\u53f7\u4e2d\u65ad\uff0c\u9700\u8981\u91cd\u8bd5 \u8fd4\u56de-1\uff0c\u9519\u8bef\u7801\u4e0d\u662f\u4ee5\u4e0a3\u79cd \u51fa\u9519 \u51fa\u9519 <p>\u963b\u585e\u7684 <code>socket</code> \u51fd\u6570\u5728\u8c03\u7528 <code>send</code>\uff0c<code>recv</code>\uff0c<code>connect</code>\uff0c<code>accept</code> \u7b49\u51fd\u6570\u65f6\uff0c\u5982\u679c\u7279\u5b9a\u7684\u6761\u4ef6\u4e0d\u6ee1\u8db3\uff0c\u5c31\u4f1a\u963b\u585e\u5176\u8c03\u7528\u7ebf\u7a0b\u76f4\u81f3\u8d85\u65f6\uff0c\u975e\u963b\u585e\u7684 <code>socket</code> \u6070\u6070\u76f8\u53cd\u3002</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#7","title":"7 \u5176\u5b83","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#71-getsockopt","title":"7.1 getsockopt","text":"<ul> <li>\u529f\u80fd\uff1a\u83b7\u53d6socket\u9009\u9879</li> <li>\u8bed\u6cd5\uff1a<code>int getsockopt(int socket, int level, int option_name,void *restrict option_value, socklen_t *restrict option_len);</code></li> <li><code>socket</code>:socket\u63cf\u8ff0\u7b26</li> <li><code>level</code>:\u6307\u5b9a\u534f\u8bae\u5c42\uff0c\u5982\u64cd\u4f5csocket\u9009\u9879\uff0c\u4e3a<code>SOL_SOCKET</code>;\u64cd\u4f5cTCP\u9009\u9879\uff0c\u4e3a<code>IPPROTO_TCP</code>;</li> <li><code>option_name</code>:\u64cd\u4f5c\u7684\u9009\u9879\u540d\u79f0</li> <li><code>option_value</code>:\u6267\u884c\u540e\u83b7\u53d6\u7684<code>option_name</code>\u9009\u9879\u7684\u6570\u636e</li> <li><code>option_len</code>:\u6267\u884c\u540e\u83b7\u53d6\u7684<code>option_value</code>\u7ed3\u6784\u7684\u5b9e\u9645\u5927\u5c0f</li> <li><code>level</code>\u7684\u53ef\u9009\u53c2\u6570\u6709\u5982\u4e0b</li> <li><code>SOL_SOCKET</code>:\u5957\u63a5\u5b57\u534f\u8bae</li> <li><code>IPPROTO_TCP</code>:Transmission Control Protocol</li> <li><code>IPPROTO_UDP</code>:User Datagram Protocol</li> <li><code>IPPROTO_IP</code>:Dummy protocol for TCP</li> <li><code>IPPROTO_ICMP</code>:Internet Control Message Protocol</li> <li><code>...</code></li> <li><code>option_name</code>\u7684\u53ef\u9009\u53c2\u6570\u6709\u5982\u4e0b</li> <li><code>SOL_SOCKET</code>\u534f\u8bae\u5982\u4e0b<ul> <li><code>SO_RCVTIMEO</code>:\u63a5\u53d7\u8d85\u65f6</li> <li><code>SO_SNDTIMEO</code>:\u53d1\u9001\u8d85\u65f6</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>struct timeval  tv;\ngetsockopt(sockfd, SOL_SOCKET, SO_RCVTIMEO, (char *)&amp;tv, (socklen_t *)&amp;sin_size);\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#72-setsockopt","title":"7.2 setsockopt","text":"<ul> <li>\u529f\u80fd\uff1a\u8bbe\u7f6esocket\u9009\u9879</li> <li>\u8bed\u6cd5\uff1a<code>int setsockopt(int socket, int level, int option_name,const void *option_value, socklen_t option_len);</code></li> <li><code>socket</code>:socket\u63cf\u8ff0\u7b26</li> <li><code>level</code>:\u6307\u5b9a\u534f\u8bae\u5c42\uff0c\u5982\u64cd\u4f5csocket\u9009\u9879\uff0c\u4e3a<code>SOL_SOCKET</code>;\u64cd\u4f5cTCP\u9009\u9879\uff0c\u4e3a<code>IPPROTO_TCP</code>;</li> <li><code>option_name</code>:\u64cd\u4f5c\u7684\u9009\u9879\u540d\u79f0</li> <li><code>option_value</code>:\u8bbe\u7f6e<code>option_name</code>\u9009\u9879\u9700\u8981\u7684\u6570\u636e</li> <li><code>option_len</code>:\u6307\u5b9a<code>option_value</code>\u7ed3\u6784\u7684\u5927\u5c0f</li> <li>\u793a\u4f8b</li> </ul> <pre><code>struct timeval  tv;\ntv.tv_sec = 5;\ntv.tv_usec = 0;\nsetsockopt(sockfd, SOL_SOCKET, SO_RCVTIMEO, (char *)&amp;tv, sizeof(tv));\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#73-getprotoent","title":"7.3 getprotoent","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#74-getaddrinfofreeaddrinfogethostbynamegethostbyaddr","title":"7.4 getaddrinfo\u3001freeaddrinfo\u3001gethostbyname\u3001gethostbyaddr","text":"<ul> <li>gethostbyname()\u3001getaddrinfo()\u51fd\u6570\u57fa\u672c\u60c5\u51b5</li> <li>getaddrinfo\u8be6\u89e3</li> </ul> <pre><code>getaddrinfo\u51fd\u6570\u5c06\u4e3b\u673a\u540d\u3001\u4e3b\u673a\u5730\u5740\u3001\u670d\u52a1\u540d\u548c\u7aef\u53e3\u7684\u5b57\u7b26\u4e32\u8868\u793a\u8f6c\u6362\u6210\u5957\u63a5\u5b57\u5730\u5740\u7ed3\u6784\u4f53\u3002\u5b83\u662f\u5df2\u5f03\u7528\u7684getgostbyname\u548cgetservbyname\u51fd\u6570\u7684\u65b0\u7684\u66ff\u4ee3\u54c1\u3002\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#741-getaddrinfo","title":"7.4.1 getaddrinfo","text":"<ul> <li>man \u624b\u518c\u793a\u4f8b\u4ee3\u7801</li> <li>\u529f\u80fd\uff1a\u901a\u8fc7\u57df\u540d\u6216\u7aef\u53e3\u670d\u52a1\u540d\u5f97\u5230\u4e00\u7cfb\u5217\u6ee1\u8db3\u8981\u6c42\u7684 addrinfo \u7ed3\u6784\u3002</li> <li>\u8bed\u6cd5\u7ed3\u6784<ul> <li><code>__name</code> : \u4e00\u4e2a\u4e3b\u673a\u540d\u6216\u8005\u5730\u5740\u4e32 (IPv4 \u7684\u70b9\u5206\u5341\u8fdb\u5236\u4e32\u6216\u8005 IPv6 \u7684 16 \u8fdb\u5236\u4e32)\u3002</li> <li><code>__service</code> \uff1a\u670d\u52a1\u540d\u53ef\u4ee5\u662f\u5341\u8fdb\u5236\u7684\u7aef\u53e3\u53f7\uff0c\u4e5f\u53ef\u4ee5\u662f\u5df2\u5b9a\u4e49\u7684\u670d\u52a1\u540d\u79f0\uff0c\u5982 ftp\u3001http \u7b49\u3002</li> <li><code>__req</code> \uff1a\u53ef\u4ee5\u662f\u4e00\u4e2a\u7a7a\u6307\u9488\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u6307\u5411\u67d0\u4e2a addrinfo \u7ed3\u6784\u4f53\u7684\u6307\u9488\uff0c\u8c03\u7528\u8005\u5728\u8fd9\u4e2a\u7ed3\u6784\u4e2d\u586b\u5165\u5173\u4e8e\u671f\u671b\u8fd4\u56de\u7684\u4fe1\u606f\u7c7b\u578b\u7684\u6697\u793a\u3002</li> <li><code>__pai</code> \uff1a\u672c\u51fd\u6570\u901a\u8fc7 <code>__pai</code> \u6307\u9488\u53c2\u6570\u8fd4\u56de\u4e00\u4e2a\u6307\u5411 addrinfo \u7ed3\u6784\u4f53\u94fe\u8868\u7684\u6307\u9488\u3002</li> </ul> </li> </ul> <pre><code>int getaddrinfo (const char *__restrict __name,\nconst char *__restrict __service,\nconst struct addrinfo *__restrict __req,\nstruct addrinfo **__restrict __pai);\n</code></pre> <ul> <li><code>__name</code> \u5185\u5bb9\u53ef\u4ee5\u5728 <code>/etc/hosts</code> \u6587\u4ef6\u67e5\u770b</li> <li><code>__service</code> \u5185\u5bb9\u53ef\u7528\u5728 <code>/etc/services</code> \u6587\u4ef6\u67e5\u770b</li> <li>\u793a\u4f8b</li> </ul> <pre><code>\u279c  cat /etc/hosts 127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4\n::1         localhost localhost.localdomain localhost6 localhost6.localdomain6\n140.82.113.4 github.com\n\u279c  cat /etc/services |tail -2\ncloudcheck      45514/tcp                ASSIA CloudCheck WiFi Management System\nspremotetablet  46998/tcp                Capture handwritten signatures\n</code></pre> <ul> <li><code>addrinfo</code> \u7ed3\u6784</li> </ul> <pre><code>/* Structure to contain information about address of a service provider. \u00a0*/\nstruct addrinfo\n{\nint ai_flags; \u00a0 \u00a0 \u00a0 \u00a0 /* Input flags. \u00a0*/\nint ai_family; \u00a0 \u00a0 /* Protocol family for socket. \u00a0*/\nint ai_socktype; \u00a0 \u00a0 \u00a0/* Socket type. \u00a0*/\nint ai_protocol; \u00a0 \u00a0 \u00a0/* Protocol for socket. \u00a0*/\nsocklen_t ai_addrlen; \u00a0 \u00a0/* Length of socket address. \u00a0*/\nstruct sockaddr *ai_addr; \u00a0 /* Socket address for socket. \u00a0*/\nchar *ai_canonname; \u00a0 \u00a0 \u00a0/* Canonical name for service location. \u00a0*/\nstruct addrinfo *ai_next; \u00a0 /* Pointer to next in list. \u00a0*/\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#742-freeaddrinfo","title":"7.4.2 freeaddrinfo","text":"<ul> <li>\u529f\u80fd\uff1a\u91ca\u653e getaddrinfo \u6267\u884c\u6210\u529f\u540e\u7b2c\u56db\u4e2a\u53c2\u6570\u7684\u5185\u5b58\u3002</li> <li>\u8bed\u6cd5</li> </ul> <pre><code>void freeaddrinfo (struct addrinfo *__ai);\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#743","title":"7.4.3 \u793a\u4f8b","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#7431-ip","title":"7.4.3.1 \u6839\u636e\u4e3b\u673a\u540d\u83b7\u53d6 IP \u5730\u5740","text":"<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;arpa/inet.h&gt;\n\nint main(int argc, char **argv)\n{\nif (argc != 2) {\nprintf(\"Usag: ./a.out hostname|ip\\n\");\nexit(1);\n}\nstruct addrinfo hints;\nstruct addrinfo *res, *cur;\nint ret;\nstruct sockaddr_in *addr;\nchar ipbuf[16];\nint port;\n\nmemset(&amp;hints, 0, sizeof(struct addrinfo));\nhints.ai_family = AF_INET; /* Allow IPv4 */\nhints.ai_flags = AI_PASSIVE; /* For wildcard IP address */\nhints.ai_protocol = 0; /* Any protocol */\nhints.ai_socktype = SOCK_DGRAM;\nret = getaddrinfo(argv[1], NULL,&amp;hints,&amp;res);\nif (ret &lt; 0) {\nfprintf(stderr, \"%s\\n\", gai_strerror(ret));\nexit(1);\n}\n\nfor (cur = res; cur != NULL; cur = cur-&gt;ai_next) {\naddr = (struct sockaddr_in *)cur-&gt;ai_addr;\nprintf(\"ip: %s\\n\", inet_ntop(AF_INET, &amp;addr-&gt;sin_addr, ipbuf, 16));\nprintf(\"port: %d\\n\", inet_ntop(AF_INET, &amp;addr-&gt;sin_port, (void *)&amp;port, 2));\n//printf(\"port: %d\\n\", ntohs(addr-&gt;sin_port));\n\n}\nfreeaddrinfo(res);\nexit(0);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#7432","title":"7.4.3.2 \u6839\u636e\u4e3b\u673a\u540d\u548c\u7aef\u53e3\u53f7\u83b7\u53d6\u5730\u5740\u4fe1\u606f","text":"<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdarg.h&gt;\n#include &lt;string.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;time.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;sys/socket.h&gt;\nvoid main()\n{ struct addrinfo *ailist, *aip; struct addrinfo hint; struct sockaddr_in *sinp; char *hostname = \"localhost\";\nchar buf[INET_ADDRSTRLEN]; char *server = \"6543\"; /* \u8fd9\u662f\u670d\u52a1\u7aef\u53e3\u53f7 */\nconst char *addr; int ilRc;\nhint.ai_family = AF_UNSPEC; /* hint \u7684\u9650\u5b9a\u8bbe\u7f6e */\nhint.ai_socktype = 0; /* \u8fd9\u91cc\u53ef\u662f\u8bbe\u7f6e socket type . \u6bd4\u5982 SOCK\u2014\u2014DGRAM */\nhint.ai_flags = AI_PASSIVE; /* flags \u7684\u6807\u5fd7\u5f88\u591a \u3002\u5e38\u7528\u7684\u6709AI_CANONNAME; */\nhint.ai_protocol = 0; /* \u8bbe\u7f6e\u534f\u8bae \u4e00\u822c\u4e3a0\uff0c\u9ed8\u8ba4 */ hint.ai_addrlen = 0; /* \u4e0b\u9762\u4e0d\u53ef\u4ee5\u8bbe\u7f6e\uff0c\u4e3a0\uff0c\u6216\u8005\u4e3aNULL */\nhint.ai_canonname = NULL; hint.ai_addr = NULL; hint.ai_next = NULL;\nilRc = getaddrinfo(hostname, server, &amp;hint, &amp;ailist); if (ilRc &lt; 0) { printf(\"str_error = %s\\n\", gai_strerror(errno)); return; }\n\n/* \u663e\u793a\u83b7\u53d6\u7684\u4fe1\u606f */\nfor (aip = ailist; aip != NULL; aip = aip-&gt;ai_next)\n{ sinp = (struct sockaddr_in *)aip-&gt;ai_addr;\naddr = inet_ntop(AF_INET, &amp;sinp-&gt;sin_addr, buf, INET_ADDRSTRLEN); printf(\" addr = %s, port = %d\\n\", addr?addr:\"unknow \", ntohs(sinp-&gt;sin_port)); }\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#7433","title":"7.4.3.3 \u7531\u5185\u6838\u5206\u914d\u968f\u673a\u7aef\u53e3\uff08\u518d\u4e5f\u4e0d\u62c5\u5fc3\u7aef\u53e3\u88ab\u5360\u4e86\uff09","text":"<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;arpa/inet.h&gt;\n\n#define MAX_CONN_COUNT 10\n#define INVALID_SOCKET (~0) \n\nint main(int argc, char **argv)\n{\nint motionListenPort = 0;\nint motion_sock = 0;\nint    err;\nint    maxconn;\nchar familyDesc[32];\nstruct sockaddr_storage motion_sock_addr;\nsocklen_t alen;\nstruct addrinfo *addrs = NULL, *addr, hints;\nint ret;\nint tries = 0;\n\nmemset(&amp;hints, 0, sizeof(struct addrinfo));\nhints.ai_family = AF_INET; /* Allow IPv4 */\nhints.ai_flags = AI_PASSIVE; /* For wildcard IP address */\nhints.ai_protocol = 0; /* Any protocol */\nhints.ai_socktype = SOCK_STREAM;\nret = getaddrinfo(NULL, \"0\", &amp;hints, &amp;addrs);\nif (ret &lt; 0)\n{\nfprintf(stderr, \"%s\\n\", gai_strerror(ret));\nexit(1);\n}\n\nfor (addr = addrs; addr != NULL; addr = addr-&gt;ai_next) {\n/* Create the socket. */\nif ((motion_sock = socket(addr-&gt;ai_family, SOCK_STREAM, 0)) == INVALID_SOCKET)\n{\nfprintf(stderr, \"Error:could not create socket for the motion\\n\");\ncontinue;\n}\n\n/* Bind it to a kernel assigned port on localhost and get the assigned port via getsockname(). */\nif (bind(motion_sock, addr-&gt;ai_addr, addr-&gt;ai_addrlen) &lt; 0)\n{\nfprintf(stderr, \"Error: could not bind socket for the motion\\n\");\nclose(motion_sock);\nmotion_sock = INVALID_SOCKET;\ncontinue;\n}\n\nalen = sizeof(motion_sock_addr);\nif (getsockname(motion_sock, (struct sockaddr *) &amp;(motion_sock_addr), &amp;alen) &lt; 0)\n{\nfprintf(stderr, \"could not get address of socket for the motion\\n\");\nclose(motion_sock);\nmotion_sock = INVALID_SOCKET;\ncontinue;\n}\n\n/* Resolve the motion listen port. */\nswitch(motion_sock_addr.ss_family)\n{\ncase AF_INET:\n{\nstruct sockaddr_in *motion_addr = (struct sockaddr_in *) &amp;motion_sock_addr;\nmotionListenPort = ntohs(motion_addr-&gt;sin_port);\nstrcpy(familyDesc, \"IPv4\");\nfprintf(stdout, \"motionListenPort=%d, familyDesc = %s\\n\", motionListenPort, familyDesc);\nbreak;\n}\ncase AF_INET6:\n{\nstruct sockaddr_in6 *motion_addr = (struct sockaddr_in6 *) &amp;motion_sock_addr;\nmotionListenPort = ntohs(motion_addr-&gt;sin6_port);\nstrcpy(familyDesc, \"IPv6\");\nfprintf(stdout, \"motionListenPort=%d, familyDesc = %s\\n\", motionListenPort, familyDesc);\nbreak;\n}\ndefault:\n{\nfprintf(stderr, \"Error:unrecognized address family \\\"%d\\\" for the motion\\n\", motion_sock_addr.ss_family);\ncontinue;\n}\n}\n\n/* \u76d1\u542c */\nmaxconn = MAX_CONN_COUNT;\nerr = listen(motion_sock, maxconn);\nif (err &lt; 0)\n{\nfprintf(stderr, \"could not listen on socket for the motion\\n\");\nclose(motion_sock);\nmotion_sock = INVALID_SOCKET;\ncontinue;\n}\n}\n\nif (motion_sock == INVALID_SOCKET)\ngoto listen_failed;\n\n/* XXXXXX    socket\u901a\u4fe1\u8fc7\u7a0b */\n\n\nfreeaddrinfo(addrs);\nclose(motion_sock);\nreturn 0;\n\nlisten_failed:\nfprintf(stderr, \"Error: failed to listen for the motion\\n\");\nif (addrs)\nfreeaddrinfo(addrs);\n\nif (motion_sock != INVALID_SOCKET)\nclose(motion_sock);\nmotion_sock = INVALID_SOCKET;\nreturn -1;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#7434-ioctl-ip","title":"7.4.3.4 \u4f7f\u7528 ioctl \u83b7\u53d6\u6307\u5b9a\u7f51\u5361 IP \u5730\u5740","text":"<pre><code>#include &lt;arpa/inet.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define ETH_NAME    \"eth0\"\n\nint main()\n\n{\nint sock;\nstruct sockaddr_in sin;\nstruct ifreq ifr;\nsock = socket(AF_INET, SOCK_DGRAM, 0);\nif (sock == -1)\n{\nperror(\"socket\");\nreturn -1;        }\n\nstrncpy(ifr.ifr_name, ETH_NAME, IFNAMSIZ);\nifr.ifr_name[IFNAMSIZ - 1] = 0;\nif (ioctl(sock, SIOCGIFADDR, &amp;ifr) &lt; 0)\n{\nperror(\"ioctl\");\nreturn -1;\n}\n\nmemcpy(&amp;sin, &amp;ifr.ifr_addr, sizeof(sin));\nfprintf(stdout, \"eth0: %s\\n\", inet_ntoa(sin.sin_addr));\n\nreturn 0;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#7435-ping-hostname-ip","title":"7.4.3.5 \u4f7f\u7528 ping \u6307\u4ee4\uff0c\u6839\u636e hostname \u83b7\u53d6 ip \u5730\u5740","text":"<p>\u672c\u4f8b\u672a\u7528 getaddrinfo\uff0c\u800c\u662f\u91c7\u7528shell\u6307\u4ee4\u65b9\u6cd5\uff08\u4e0d\u63a8\u8350\uff09\u3002</p> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;sys/ioctl.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;net/if.h&gt;\n#include &lt;net/if_arp.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;string.h&gt;\n\n\n//\u4f7f\u7528ping\u6307\u4ee4\uff0c\u6839\u636ehostname\u83b7\u53d6ip\u5730\u5740\nint getIpAddrByHostname(char *hostname, char* ip_addr, size_t ip_size)\n{\nchar command[256];\nFILE *f;\nchar *ip_pos;\n\nsnprintf(command, 256, \"ping -c1 %s | head -n 1 | sed 's/^[^(]*(\\\\([^)]*\\\\).*$/\\\\1/'\", hostname);\nfprintf(stdout, \"%s\\n\", command);\nif ((f = popen(command, \"r\")) == NULL)\n{\nfprintf(stderr, \"could not open the command, \\\"%s\\\", %s\\n\", command, strerror(errno));\nreturn -1;\n}\n\nfgets(ip_addr, ip_size, f);\nfclose(f);\n\nip_pos = ip_addr;\nfor (;*ip_pos &amp;&amp; *ip_pos!= '\\n'; ip_pos++);\n*ip_pos = 0;\n\nreturn 0;\n}\n\nint main()\n{\nchar addr[64] = {0};\ngetIpAddrByHostname(\"localhost\", addr, INET_ADDRSTRLEN);\nfprintf(stdout, \"localhost: %s\\n\", addr);\nreturn 0;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#744-gethostbyname","title":"7.4.4 gethostbyname","text":"<ul> <li>gethostbyname () \u51fd\u6570\u8be6\u89e3</li> <li>\u529f\u80fd\uff1a\u7528\u57df\u540d\u6216\u8005\u4e3b\u673a\u540d\u83b7\u53d6\u5730\u5740\uff0c\u53ea\u80fd\u8fd4\u56de ipv4 \u5730\u5740\u3002</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#745-gethostbyaddr","title":"7.4.5 gethostbyaddr","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#8","title":"8 \u4e13\u7528\u540d\u8bcd\u89e3\u6790","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20net/#81-outofband-data","title":"8.1 \u5e26\u5916\u6570\u636e (out\u2014of\u2014band data)","text":"<ul> <li>\u5e26\u5916\u6570\u636e(out\u2014of\u2014band data)\uff1a\u6709\u65f6\u4e5f\u79f0\u4e3a\u52a0\u901f\u6570\u636e(expedited data)\uff0c\u662f\u6307\u8fde\u63a5\u53cc\u65b9\u4e2d\u7684\u4e00\u65b9\u53d1\u751f\u91cd\u8981\u4e8b\u60c5\uff0c\u60f3\u8981\u8fc5\u901f\u5730\u901a\u77e5\u5bf9\u65b9\u3002\u8fd9\u79cd\u901a\u77e5\u5728\u5df2\u7ecf\u6392\u961f\u7b49\u5f85\u53d1\u9001\u7684\u4efb\u4f55\u201c\u666e\u901a\u201d(\u6709\u65f6\u79f0\u4e3a\u201c\u5e26\u5185\u201d)\u6570\u636e\u4e4b\u524d\u53d1\u9001\u3002\u5e26\u5916\u6570\u636e\u8bbe\u8ba1\u4e3a\u6bd4\u666e\u901a\u6570\u636e\u6709\u66f4\u9ad8\u7684\u4f18\u5148\u7ea7\u3002\u5e26\u5916\u6570\u636e\u662f\u6620\u5c04\u5230\u73b0\u6709\u7684\u8fde\u63a5\u4e2d\u7684\uff0c\u800c\u4e0d\u662f\u5728\u5ba2\u6237\u673a\u548c\u670d\u52a1\u5668\u95f4\u518d\u7528\u4e00\u4e2a\u8fde\u63a5\u3002</li> <li>\u5e26\u5916\u6570\u636e\u7684\u53d1\u9001\u548c\u63a5\u6536\uff1asend(sockfd,\"a\",1,MSG_OOB);recv(sockfd,&amp;outofband,1,MSG_OOB);</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20system%20info/","title":"UNIX \u7cfb\u7edf\u4fe1\u606f","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20system%20info/#1","title":"1 \u4e3b\u673a\u540d\u79f0","text":"<ul> <li>\u5934\u6587\u4ef6:<code>unistd.h</code></li> <li>\u8bed\u6cd5:</li> <li><code>long gethostid(void);</code>\uff1a\u83b7\u53d6\u4e3b\u673aid</li> <li><code>int sethostid(long hostid);</code>\uff1a\u8bbe\u7f6e\u4e3b\u673aid</li> <li><code>int gethostname(char *name, size_t len);</code>\u83b7\u53d6\u4e3b\u673a\u540d</li> <li><code>int sethostname(const char *name, size_t len);</code>\u8bbe\u7f6e\u4e3b\u673a\u540d</li> <li>\u793a\u4f8b1\uff1a\u83b7\u53d6\u4e3b\u673a\u540d\u548cid</li> </ul> <pre><code>#include&lt;unistd.h&gt;\n#include&lt;stdio.h&gt;\nint main()\n{\nlong hostId = gethostid();\nchar hostname[1024];\ngethostname(hostname, sizeof(hostname));\nprintf(\"hostname: %s\\n\", hostname);\nprintf(\"hostid: %ld\\n\", hostId);\nreturn 0;\n}\n</code></pre> <ul> <li>\u793a\u4f8b2\uff1a\u8bbe\u7f6e\u4e3b\u673a\u540d\u548cid\uff08\u9700root\u7528\u6237\uff09</li> </ul> <pre><code>#include&lt;unistd.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdio.h&gt;\nint main()\n{\nint ret=0;\nchar hostname[1024]={0};\nsprintf(hostname, \"%s\",\"hostname\");\nret=sethostname(hostname, strlen(hostname));\nprintf(\"alter ret %d hostname: %s\\n\", ret,hostname);\nret=sethostid(hostId);\nprintf(\"alter ret %d hostid: %ld\\n\", ret,hostId);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20system%20info/#2","title":"2 \u83b7\u53d6\u914d\u7f6e\u4fe1\u606f","text":"<ul> <li><code>sysconf</code>\u548c<code>confstr</code>\u4e0d\u540c\u5728\u4e8e<code>sysconf</code>\u8fd4\u56de\u7684\u662f\u6574\u578b\u503c\uff0c<code>confstr</code>\u8fd4\u56de\u7684\u662f\u5b57\u7b26\u4e32\u503c</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20system%20info/#21-sysconf","title":"2.1 sysconf","text":"<ul> <li>\u529f\u80fd\uff1a\u83b7\u53d6\u7cfb\u7edf\u914d\u7f6e\u4fe1\u606f</li> <li>\u8bed\u6cd5\uff1a<code>long int sysconf (int name);</code></li> <li><code>name</code>:\u7cfb\u7edf\u53d8\u91cf\u540d\uff0c\u5728<code>bits/confname.h</code>\u4e2d\u5b9a\u4e49,\u4ee5<code>_SC</code>\u5f00\u5934\uff0c\u5982\u4e0b<ul> <li><code>_SC_PAGE_SIZE</code>:\u9875\u5927\u5c0f</li> <li><code>_SC_ARG_MAX</code>:exec\u51fd\u6570\u53c2\u6570\u6700\u5927\u957f\u5ea6</li> <li><code>_SC_HOST_NAME_MAX</code>:hostname\u7684\u6700\u5927\u957f\u5ea6</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include&lt;unistd.h&gt;\n#include&lt;stdio.h&gt;\nint main()\n{\nprintf(\"arg_max: %ld\\n\", sysconf(_SC_ARG_MAX));\nprintf(\"chars_max: %ld\\n\", sysconf(_SC_CHILD_MAX));\nprintf(\"clock_res: %ld\\n\", sysconf(_SC_CLK_TCK));\nprintf(\"data_seg_max: %ld\\n\", sysconf(_SC_DELAYTIMER_MAX));\nprintf(\"exec_max: %ld\\n\", sysconf(_SC_EXPR_NEST_MAX));\nprintf(\"fd_max: %ld\\n\", sysconf(_SC_OPEN_MAX));\nprintf(\"proc_max: %ld\\n\", sysconf(_SC_NPROCESSORS_CONF));\nreturn 0;\n}\n// \u8f93\u51fa\u7ed3\u679c\n// arg_max: 2097152\n// chars_max: 50521\n// clock_res: 100\n// data_seg_max: 2147483647\n// exec_max: 32\n// fd_max: 4096\n// proc_max: 8\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20system%20info/#22-confstr","title":"2.2 confstr","text":"<ul> <li>\u529f\u80fd\uff1a\u83b7\u53d6\u914d\u7f6e\u9879\u7684\u5b57\u7b26\u4e32\u53d8\u91cf\u503c</li> <li>\u8bed\u6cd5\uff1a<code>size_t confstr (int name, char *buf, size_t len);</code></li> <li><code>name</code>:\u7cfb\u7edf\u53d8\u91cf\u540d\uff0c\u5728<code>bits/confname.h</code>\u4e2d\u5b9a\u4e49,\u4ee5<code>_CS</code>\u5f00\u5934\uff0c\u5982\u4e0b<ul> <li><code>_CS_GNU_LIBC_VERSION</code>:</li> <li><code>_CS_PATH</code>:</li> </ul> </li> <li><code>buf</code>:\u5b58\u653e\u67e5\u8be2\u7ed3\u679c\u7684\u7f13\u5b58</li> <li><code>len</code>:<code>buf</code>\u7684\u5927\u5c0f</li> <li>\u8fd4\u56de\u503c\uff1a\u6210\u529f\u8fd4\u56de\u67e5\u8be2\u7ed3\u679c\u7684\u5927\u5c0f\uff08\u7ed3\u679c\u4e3a\u7a7a=0\uff09\uff0c\u5931\u8d250</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include&lt;unistd.h&gt;\n#include&lt;stdio.h&gt;\nint main()\n{\nchar buf[1024]={0};\nconfstr(_CS_PATH, buf, sizeof(buf));\nprintf(\"path: %s\\n\", buf);\nprintf(\"libc_version: %s\\n\", buf);\nconfstr(_CS_GNU_LIBPTHREAD_VERSION, buf, sizeof(buf));\nprintf(\"libpthread_version: %s\\n\", buf);\nreturn 0;\n}\n// \u8f93\u51fa\u7ed3\u679c\n// path: /bin:/usr/bin\n// libc_version: /bin:/usr/bin\n// libpthread_version: NPTL 2.31\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20system%20info/#23-pathconffpathconf","title":"2.3 pathconf\u548cfpathconf","text":"<ul> <li>\u529f\u80fd\uff1a\u83b7\u53d6\u6587\u4ef6\u7684\u914d\u7f6e\u503c</li> <li>\u8bed\u6cd5\uff1a</li> <li><code>long fpathconf(int fd, int name);</code><ul> <li><code>fd</code>:\u6587\u4ef6\u63cf\u8ff0\u7b26</li> <li><code>name</code>:\u914d\u7f6e\u53d8\u91cf\u540d</li> </ul> </li> <li><code>long pathconf(char *path, int name);</code><ul> <li><code>path</code>:\u6587\u4ef6\u8def\u5f84</li> <li><code>name</code>:\u914d\u7f6e\u53d8\u91cf\u540d</li> </ul> </li> <li>name\u9009\u9879\u5982\u4e0b<ul> <li><code>_PC_LINK_MAX</code>:returns the maximum number of links to the file. </li> <li><code>_PC_MAX_CANON</code>:returns the maximum length of a formatted input line, where fd or path must refer to a terminal. </li> <li><code>_PC_MAX_INPUT</code>:returns the maximum length of an input line, where fd or path must refer to a terminal.</li> <li><code>_PC_NAME_MAX</code>:returns the maximum length of a filename in the directory path or fd that the process is allowed to create.</li> <li><code>_PC_PATH_MAX</code>:returns the maximum length of a relative pathname when path or fd is the current working directory.</li> <li><code>_PC_PIPE_BUF</code>:returns the size of the pipe buffer, where fd must refer to a pipe or FIFO and path must refer to a FIFO.</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include&lt;unistd.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;sys/types.h&gt;\n#include&lt;sys/stat.h&gt;\n#include&lt;fcntl.h&gt;\nint main()\n{\nprintf(\"path_max: %ld\\n\", pathconf(\"/\", _PC_PATH_MAX));\nprintf(\"pipe_max: %ld\\n\", pathconf(\"/\", _PC_PIPE_BUF));\nint fd=open(\"/\", O_RDONLY);\nprintf(\"fd_max: %ld\\n\", fpathconf(fd, _PC_NAME_MAX));\nprintf(\"link_max: %ld\\n\", pathconf(\"/\", _PC_LINK_MAX));\nreturn 0;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20system%20info/#24-getpagesize","title":"2.4 getpagesize","text":"<ul> <li>\u529f\u80fd\uff1a\u83b7\u53d6\u9875\u5927\u5c0f,\u7b49\u4ef7\u4e8e<code>sysconf(_SC_PAGESIZE)</code></li> <li>\u8bed\u6cd5\uff1a<code>int getpagesize (void);</code></li> <li>\u8fd4\u56de\u503c\uff1a\u9875\u5927\u5c0f</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include&lt;unistd.h&gt;\n#include&lt;stdio.h&gt;\nint main()\n{\nint pagesize = sysconf(_SC_PAGESIZE);\nprintf(\"pagesize: %d\\n\", pagesize);\nint pagesize1 = getpagesize();\nprintf(\"pagesize1: %d\\n\", pagesize1);\nreturn 0;\n}\n// \u8f93\u51fa\u7ed3\u679c\uff1a\n// pagesize: 4096\n// pagesize1: 4096\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20system%20info/#25-getdtablesize","title":"2.5 getdtablesize","text":"<ul> <li>\u529f\u80fd\uff1a\u83b7\u53d6\u8fdb\u7a0b\u4e2d\u6587\u4ef6\u63cf\u8ff0\u7b26\u8868\u7684\u5927\u5c0f</li> <li>\u8bed\u6cd5\uff1a<code>int getdtablesize(void);</code></li> <li>\u8fd4\u56de\u503c\uff1a\u8fdb\u7a0b\u53ef\u4ee5\u6253\u5f00\u7684\u6700\u5927\u6587\u4ef6\u6570</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include&lt;unistd.h&gt;\n#include&lt;stdio.h&gt;\nint main()\n{\nint tablesize=getdtablesize();\nprintf(\"tablesize: %d\\n\", tablesize);\nreturn 0;\n}\n// \u8f93\u51fa\u7ed3\u679c\uff1a\n// tablesize: 4096\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20system%20info/#3","title":"3 \u83b7\u53d6\u7f51\u7edc\u4fe1\u606f","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20system%20info/#32-getifaddrs","title":"3.2 getifaddrs","text":"<ul> <li>\u529f\u80fd\uff1a\u83b7\u53d6\u7f51\u7edc\u63a5\u53e3\u5730\u5740\uff0c\u8c03\u7528\u540e\u9700\u8981\u4f7f\u7528<code>freeifaddrs</code>\u91ca\u653e</li> <li>\u8bed\u6cd5\uff1a</li> <li><code>int getifaddrs(struct ifaddrs **ifap);</code></li> <li><code>void freeifaddrs(struct ifaddrs *ifa);</code></li> <li>ifaddrs\u7ed3\u6784\u5982\u4e0b</li> </ul> <pre><code>struct ifaddrs {\nstruct ifaddrs  *ifa_next;    /* Next item in list */\nchar            *ifa_name;    /* Name of interface */\nunsigned int     ifa_flags;   /* Flags from SIOCGIFFLAGS */\nstruct sockaddr *ifa_addr;    /* Address of interface */\nstruct sockaddr *ifa_netmask; /* Netmask of interface */\nunion {\nstruct sockaddr *ifu_broadaddr;\n/* Broadcast address of interface */\nstruct sockaddr *ifu_dstaddr;\n/* Point-to-point destination address */\n} ifa_ifu;\n#define              ifa_broadaddr ifa_ifu.ifu_broadaddr\n#define              ifa_dstaddr   ifa_ifu.ifu_dstaddr\nvoid            *ifa_data;    /* Address-specific data */\n};\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;arpa/inet.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;ifaddrs.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\nint main(int argc, char *argv[])\n{\nstruct ifaddrs *ifaddr, *ifa;\nint family, s;\nchar host[NI_MAXHOST];\nif (getifaddrs(&amp;ifaddr) == -1)\n{\nperror(\"getifaddrs\");\nexit(EXIT_FAILURE);\n}\n/* Walk through linked list, maintaining head pointer so we\n       can free list later */\nfor (ifa = ifaddr; ifa != NULL; ifa = ifa-&gt;ifa_next)\n{\nif (ifa-&gt;ifa_addr == NULL)\ncontinue;\nfamily = ifa-&gt;ifa_addr-&gt;sa_family;\n/* Display interface name and family (including symbolic\n           form of the latter for the common families) */\nprintf(\"%s  address family: %d%s\\n\",\nifa-&gt;ifa_name, family,\n(family == AF_PACKET) ? \" (AF_PACKET)\" : (family == AF_INET) ? \" (AF_INET)\"\n: (family == AF_INET6)  ? \" (AF_INET6)\"\n: \"\");\n/* For an AF_INET* interface address, display the address */\n\nif (family == AF_INET || family == AF_INET6)\n{\ns = getnameinfo(ifa-&gt;ifa_addr,\n(family == AF_INET) ? sizeof(struct sockaddr_in) : sizeof(struct sockaddr_in6),\nhost, NI_MAXHOST, NULL, 0, NI_NUMERICHOST);\nif (s != 0)\n{\nprintf(\"getnameinfo() failed: %s\\n\", gai_strerror(s));\nexit(EXIT_FAILURE);\n}\nprintf(\"\\taddress: &lt;%s&gt;\\n\", host);\n}\n}\nfreeifaddrs(ifaddr);\nexit(EXIT_SUCCESS);\n}\n</code></pre> <ul> <li>\u8f93\u51fa\u7ed3\u679c</li> </ul> <pre><code>lo  address family: 17 (AF_PACKET)\nbond0  address family: 17 (AF_PACKET)\ndummy0  address family: 17 (AF_PACKET)\ntunl0  address family: 17 (AF_PACKET)\nsit0  address family: 17 (AF_PACKET)\neth0  address family: 17 (AF_PACKET)\nlo  address family: 2 (AF_INET)\naddress: &lt;127.0.0.1&gt;\neth0  address family: 2 (AF_INET)\naddress: &lt;172.27.198.233&gt;\nlo  address family: 10 (AF_INET6)\naddress: &lt;::1&gt;\neth0  address family: 10 (AF_INET6)\naddress: &lt;fe80::215:5dff:fefa:8b75%eth0&gt;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20system%20info/#4","title":"4 \u83b7\u53d6\u8fdb\u7a0b\u4fe1\u606f","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20system%20info/#41-getpidgetppidgetpgrpgetpgid","title":"4.1 getpid\u3001getppid\u3001getpgrp\u3001getpgid","text":"<pre><code>/* Get the process ID of the calling process.  */\nextern __pid_t getpid (void) __THROW;\n\n/* Get the process ID of the calling process's parent.  */\nextern __pid_t getppid (void) __THROW;\n\n/* Get the process group ID of the calling process.  */\nextern __pid_t getpgrp (void) __THROW;\n\n/* Get the process group ID of process PID.  */\nextern __pid_t getpgid (__pid_t __pid) __THROW;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20system%20info/#5","title":"5 \u8d44\u6e90\u9650\u5236","text":"<ul> <li>\u529f\u80fd\uff1a\u83b7\u53d6\u6216\u8bbe\u7f6e\u8d44\u6e90\u9650\u503c</li> <li>rlimit\u7ed3\u6784\u5982\u4e0b\uff1a</li> </ul> <pre><code>struct rlimit {\nrlim_t rlim_cur;  /* Soft limit (\u4e0d\u80fd\u5927\u4e8erlim_max)*/\nrlim_t rlim_max;  /* Hard limit (rlim_cur\u7684\u4e0a\u9650) */\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20system%20info/#51-getrlimit","title":"5.1 getrlimit","text":"<ul> <li>\u529f\u80fd\uff1a\u83b7\u53d6\u8d44\u6e90\u9650\u5236</li> <li>\u8bed\u6cd5\uff1a<code>int getrlimit(int resource, struct rlimit *rlim);</code></li> <li><code>resource</code>:\u64cd\u4f5c\u7684\u8d44\u6e90\u9650\u5236\uff0c\u4ee5<code>RLIMIT_</code>\u5f00\u5934<ul> <li><code>RLIMIT_AS</code>:The maximum size of the process's virtual memory (address space) in bytes. 32\u4f4d\u673a\u5668\u6b64\u503c\u4e0d\u5927\u4e8e2GiB</li> <li><code>RLIMIT_CORE</code>:core\u6587\u4ef6\u5927\u5c0f\u7684\u6700\u5927\u503c. When 0 no core dump files are created. When nonzero, larger dumps are truncated to this size.</li> <li><code>RLIMIT_CPU</code>:CPU\u65f6\u95f4\u9650\u5236\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5f53\u8fdb\u7a0b\u8fbe\u5230\u8f6f\u9650\u5236\u65f6\uff0c\u5c06\u53d1\u9001\u4e00\u4e2aSIGXCPU\u4fe1\u53f7\u3002\u6b64\u4fe1\u53f7\u7684\u9ed8\u8ba4\u64cd\u4f5c\u662f\u7ec8\u6b62\u8fdb\u7a0b\u3002\u4f46\u662f\uff0c\u53ef\u4ee5\u6355\u83b7\u4fe1\u53f7\uff0c\u5904\u7406\u7a0b\u5e8f\u53ef\u4ee5\u5c06\u63a7\u5236\u6743\u8fd4\u56de\u4e3b\u7a0b\u5e8f\u3002\u5982\u679c\u8fdb\u7a0b\u7ee7\u7eed\u6d88\u8017CPU\u65f6\u95f4\uff0c\u5b83\u5c06\u6bcf\u79d2\u53d1\u9001\u4e00\u6b21SIGXCPU\uff0c\u76f4\u5230\u8fbe\u5230\u786c\u9650\u5236\uff0c\u6b64\u65f6\u5b83\u5c06\u88ab\u53d1\u9001SIGKILL\u3002\uff08\u540e\u4e00\u70b9\u63cf\u8ff0\u4e86Linux\u884c\u4e3a\u3002\u5b9e\u73b0\u5728\u5904\u7406\u8fbe\u5230\u8f6f\u9650\u5236\u540e\u7ee7\u7eed\u6d88\u8017CPU\u65f6\u95f4\u7684\u8fdb\u7a0b\u65f6\u4f1a\u6709\u6240\u4e0d\u540c\u3002\u9700\u8981\u6355\u83b7\u6b64\u4fe1\u53f7\u7684\u4fbf\u643a\u5f0f\u5e94\u7528\u7a0b\u5e8f\u5e94\u5728\u7b2c\u4e00\u6b21\u6536\u5230SIGXCPU\u65f6\u6267\u884c\u6709\u5e8f\u7ec8\u6b62\u3002</li> <li><code>RLIMIT_DATA</code>:The maximum size of the process's data segment (initialized data, uninitialized data, and heap). </li> <li><code>RLIMIT_FSIZE</code>:\u8fdb\u7a0b\u53ef\u80fd\u521b\u5efa\u7684\u6700\u5927\u6587\u4ef6\u5927\u5c0f\u3002</li> <li><code>RLIMIT_LOCKS (Early Linux 2.4 only)</code>:\u6b64\u8fdb\u7a0b\u53ef\u4ee5\u4f7f\u7528flock(2) locks and fcntl(2) leases \u7684\u6570\u91cf</li> <li><code>RLIMIT_NICE (since Linux 2.6.12, but see BUGS below)</code>:Specifies a ceiling to which the process's nice value can be raised using setpriority(2) or nice(2). The actual ceiling for the nice value is calculated as 20 - rlim_cur. (This strangeness occurs because negative numbers cannot be specified as resource limit values, since they typically have special meanings. For example, RLIM_INFINITY typically is the same as -1.)</li> <li><code>RLIMIT_NOFILE</code>:\u8fdb\u7a0b\u53ef\u4ee5\u6253\u5f00\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u6570\u91cf. Attempts (open(2), pipe(2), dup(2), etc.) to exceed this limit yield the error EMFILE. (Historically, this limit was named RLIMIT_OFILE on BSD.)</li> <li><code>RLIMIT_NPROC</code>:\u53ef\u4ee5\u4e3a\u8c03\u7528\u8fdb\u7a0b\u7684\u771f\u5b9e\u7528\u6237ID\u521b\u5efa\u7684\u6700\u5927\u8fdb\u7a0b\u6570\uff08\u6216\u8005\u66f4\u51c6\u786e\u5730\u8bf4\uff0c\u5728Linux\u4e0a\u662f\u7ebf\u7a0b\u6570\uff09</li> <li><code>RLIMIT_STACK</code>:\u8fdb\u7a0b\u5806\u6808\u7684\u6700\u5927\u5927\u5c0f\uff0c\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\u3002Upon reaching this limit, a SIGSEGV signal is generated. To handle this signal, a process must employ an alternate signal stack (sigaltstack(2)).</li> </ul> </li> <li><code>rlim</code>:\u83b7\u53d6\u5230\u7684\u8d44\u6e90\u9650\u503c</li> <li>\u8fd4\u56de\u503c\uff1a\u6210\u529f\u8fd4\u56de0\uff0c\u5931\u8d25\u8fd4\u56de-1</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;sys/time.h&gt;\n#include &lt;sys/resource.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char *argv[])\n{\nstruct rlimit rlim;\ngetrlimit(RLIMIT_NOFILE, &amp;rlim);\nprintf(\"RLIMIT_NOFILE %lu\\n\", rlim.rlim_cur);\ngetrlimit(RLIMIT_CORE, &amp;rlim);\nprintf(\"RLIMIT_CORE %lu\\n\", rlim.rlim_cur);\ngetrlimit(RLIMIT_DATA, &amp;rlim);\nprintf(\"RLIMIT_DATA %lu\\n\", rlim.rlim_cur);\ngetrlimit(RLIMIT_STACK, &amp;rlim);\nprintf(\"RLIMIT_STACK %lu\\n\", rlim.rlim_cur);\ngetrlimit(RLIMIT_AS, &amp;rlim);\nprintf(\"RLIMIT_AS %lu\\n\", rlim.rlim_cur);\ngetrlimit(RLIMIT_RSS, &amp;rlim);\nprintf(\"RLIMIT_RSS %lu\\n\", rlim.rlim_cur);\ngetrlimit(RLIMIT_MEMLOCK, &amp;rlim);\nprintf(\"RLIMIT_MEMLOCK %lu\\n\", rlim.rlim_cur);\ngetrlimit(RLIMIT_NPROC, &amp;rlim);\nprintf(\"RLIMIT_NPROC %lu\\n\", rlim.rlim_cur);\nreturn 0;\n}\n// \u8f93\u51fa\u7ed3\u679c\n// RLIMIT_NOFILE 4096\n// RLIMIT_CORE 0\n// RLIMIT_DATA 18446744073709551615\n// RLIMIT_STACK 8388608\n// RLIMIT_AS 18446744073709551615\n// RLIMIT_RSS 18446744073709551615\n// RLIMIT_MEMLOCK 65536\n// RLIMIT_NPROC 50521\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20system%20info/#52-setrlimit","title":"5.2 setrlimit","text":"<ul> <li>\u529f\u80fd\uff1a\u8bbe\u7f6e\u8d44\u6e90\u9650\u5236</li> <li>\u8bed\u6cd5\uff1a<code>int setrlimit(int resource, const struct rlimit *rlim);</code></li> <li><code>resource</code>:\u8be6\u89c1<code>getrlimit</code></li> <li><code>rlim</code>:\u8bbe\u7f6e\u7684\u8d44\u6e90\u9650\u503c</li> <li>\u8fd4\u56de\u503c\uff1a\u6210\u529f\u8fd4\u56de0\uff0c\u5931\u8d25\u8fd4\u56de-1</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;sys/time.h&gt;\n#include &lt;sys/resource.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char *argv[])\n{\nstruct rlimit rlim;\nprintf(\"RLIMIT_CORE %lu\\n\", rlim.rlim_cur);\ngetrlimit(RLIMIT_DATA, &amp;rlim);\nrlim.rlim_cur = 1024*1024;\nrlim.rlim_max = 2*1024*1024;\nsetrlimit(RLIMIT_CORE, &amp;rlim);//\u6ce8\u91ca\u6389\u8fd9\u884c\uff0c\u5c06\u4e0d\u4f1a\u4ea7\u751fcore\u6587\u4ef6\ngetrlimit(RLIMIT_CORE, &amp;rlim);\nprintf(\"RLIMIT_CORE %lu\\n\", rlim.rlim_cur);\nabort();\nreturn 0;\n}\n</code></pre> <ul> <li>\u8f93\u51fa\u5206\u6790:\u539f\u5148\u8fdb\u7a0b\u4e0d\u4f1a\u5c1d\u8bd5core\u6587\u4ef6\uff0c\u8bbe\u7f6e\u540e\uff0c\u5f02\u5e38\u7ec8\u6b62\u4ea7\u751f\u4e86core\u6587\u4ef6</li> </ul> <pre><code>RLIMIT_CORE 0\nRLIMIT_CORE 1048576\nAborted (core dumped)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20system%20info/#53-prlimit","title":"5.3 prlimit","text":"<ul> <li>\u529f\u80fd\uff1a\u540c\u65f6\u8bbe\u7f6e\u4e00\u4e2a\u65b0\u7684\u8d44\u6e90\u9650\u503c\u548c\u83b7\u53d6\u65e7\u7684\u8d44\u6e90\u9650\u5236\uff0c\u662f<code>getrlimit</code>\u548c<code>setrlimit</code>\u7684\u7ed3\u5408\u4f53</li> <li>\u8bed\u6cd5\uff1a<code>int prlimit(pid_t pid, int resource, const struct rlimit *new_limit,struct rlimit *old_limit);</code></li> <li><code>pid</code>:\u8981\u64cd\u4f5c\u7684\u8fdb\u7a0bid\u3002\u5f53pid==0\u65f6\uff0c\u5c31\u662f\u64cd\u4f5c\u8c03\u7528\u8fdb\u7a0b\uff1b\u5f53\u64cd\u4f5c\u5176\u5b83\u8fdb\u7a0b\u65f6\uff0c\u9700\u8981\u786e\u4fdd\u672c\u8fdb\u7a0b\u5177\u6709CAP_SYS_RESOURCE\u80fd\u529b\uff0c\u5426\u5219\u5931\u8d25</li> <li><code>new_limit</code>:\u9700\u8981\u8bbe\u7f6e\u7684\u65b0\u7684\u8d44\u6e90\u9650\u503c\uff1b\u5f53<code>new_limit==NULL</code>\u65f6\uff0c\u4e0d\u8bbe\u7f6e\u65b0\u7684\u9650\u503c</li> <li><code>old_limit</code>:\u83b7\u5f97\u7684\u65e7\u7684\u8d44\u6e90\u9650\u503c\uff1b\u5f53<code>old_limit!=NULL</code>\u65f6\uff0c\u624d\u4f1a\u8d4b\u503c</li> <li>\u8fd4\u56de\u503c\uff1a\u6210\u529f\u8fd4\u56de0\uff0c\u5931\u8d25\u8fd4\u56de-1</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#define _GNU_SOURCE\n#define _FILE_OFFSET_BITS 64\n#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/resource.h&gt;\n#define errExit(msg)\ndo\n{\nperror(msg);\nexit(EXIT_FAILURE);\n\n} while (0) int main(int argc, char *argv[])\n{\nstruct rlimit old, new;\nstruct rlimit *newp;\npid_t pid;\nif (!(argc == 2 || argc == 4))\n{\nfprintf(stderr, \"Usage: %s &lt;pid&gt; [&lt;new-soft-limit&gt; &lt;new-hard-limit&gt;]\\n\",argv[0]);\nexit(EXIT_FAILURE);\n}\npid = atoi(argv[1]); /* PID of target process */\nnewp = NULL;\nif (argc == 4)\n{\nnew.rlim_cur = atoi(argv[2]);\nnew.rlim_max = atoi(argv[3]);\nnewp = &amp;new;\n}\n/* Set CPU time limit of target process; retrieve and display\nprevious limit */\nif (prlimit(pid, RLIMIT_CPU, newp, &amp;old) == -1)\nerrExit(\"prlimit-1\");\nprintf(\"Previous limits: soft=%lld; hard=%lld\\n\",(long long)old.rlim_cur, (long long)old.rlim_max);\n/* Retrieve and display new CPU time limit */\nif (prlimit(pid, RLIMIT_CPU, NULL, &amp;old) == -1)\nerrExit(\"prlimit-2\");\nprintf(\"New limits: soft=%lld; hard=%lld\\n\",(long long)old.rlim_cur, (long long)old.rlim_max);\nexit(EXIT_FAILURE);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20system%20info/#6","title":"6 \u8fdb\u7a0b\u4f18\u5148\u7ea7","text":"<ul> <li>\u8fdb\u7a0b\u4f18\u5148\u7ea7\u8303\u56f4\u533a\u95f4<code>[0,{NZERO}*2-1]</code>,<code>NZERO</code>\u76ee\u524d\u662f20\uff1b\u540c\u65f6\u8fdb\u7a0b\u7684\u9ed8\u8ba4\u4f18\u5148\u7ea7\u4e5f\u662f<code>NZERO</code></li> <li>\u8bbe\u7f6e\u4f4e\u4f18\u5148\u7ea7\u9700\u8981\u8d85\u7ea7\u7528\u6237\u6743\u9650\uff0c\u5426\u5219\u4f1a\u6267\u884c\u5931\u8d25\uff0cerrno\u662fEPERM(-1)</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20system%20info/#61-nice","title":"6.1 nice","text":"<ul> <li>\u529f\u80fd\uff1a\u6539\u53d8\u8fdb\u7a0b\u7684\u4f18\u5148\u7ea7</li> <li>\u8bed\u6cd5\uff1a<code>int nice(int incr);</code></li> <li><code>incr</code>:\u5728\u539f\u4f18\u5148\u7ea7\u4e0a\u504f\u79fb\u591a\u5c11\uff0c\u8ba1\u7b97\u540e\u603b\u548c\u4e0d\u80fd\u8d85\u8fc7[0,{NZERO}*2-1]\u8fd9\u4e2a\u8303\u56f4\uff0c\u5982\u539f\u4f18\u5148\u7ea7\u662f<code>NZERO</code>\uff0cincr\u533a\u95f4\u662f[-20,19]</li> <li>\u8fd4\u56de\u503c\uff1a\u6210\u529f\uff0c\u8fd4\u56de\u4fee\u6539\u540e\u7684\u8fdb\u7a0b\u4f18\u5148\u7ea7,\u8303\u56f4 <code>[-NZERO,NZERO-1]</code>\uff0c\u53ef\u4ee5\u4e3a\u8d1f\uff0c\u56e0\u6b64\u5224\u65ad\u662f\u5426\u6267\u884c\u6210\u529f\uff0c\u9700\u8981\u67e5\u770berrno\u662f\u5426==0</li> <li>\u793a\u4f8b\uff1a\u6ce8\u610f\u5728root\u7528\u6237\u4e0b\u6267\u884c\u548c\u666e\u901a\u7528\u6237\u4e0b\u6267\u884c\u7ed3\u679c\u4e0d\u540c</li> </ul> <pre><code>#include&lt;unistd.h&gt;\n#include&lt;limits.h&gt;\n#include&lt;sys/resource.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;errno.h&gt;\n#include&lt;error.h&gt;\nint main()\n{\nprintf(\"%d\\n\",getpriority(PRIO_PROCESS,0));\nprintf(\"nice %d\\n\",nice(-20));\nprintf(\"errno %d \\n\",errno);\nprintf(\"%d\\n\",getpriority(PRIO_PROCESS,0));\n}\n// \u8f93\u51fa\u7ed3\u679c\n// 0\n// nice -20\n// errno 0 \n// -20\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20system%20info/#62-getpriority","title":"6.2 getpriority","text":"<ul> <li>\u529f\u80fd\uff1a\u83b7\u53d6\u8fdb\u7a0b\u3001\u8fdb\u7a0b\u7ec4\u3001\u7528\u6237\u7684\u4f18\u5148\u7ea7</li> <li>\u8bed\u6cd5\uff1a<code>int getpriority(int which, id_t who);</code></li> <li><code>which</code>:\u6307\u5b9a\u64cd\u4f5c\u7684\u662f\u8fdb\u7a0b\u3001\u8fdb\u7a0b\u7ec4\u6216\u7528\u6237<ul> <li><code>PRIO_PROCESS</code>:\u8fdb\u7a0b</li> <li><code>PRIO_PGRP</code>:\u8fdb\u7a0b\u7ec4</li> <li><code>PRIO_USER</code>:\u7528\u6237</li> </ul> </li> <li><code>who</code>:\u4f9d\u636e<code>which</code>\u53c2\u6570\uff0c\u662f\u8fdb\u7a0bid(getpid)\u3001\u8fdb\u7a0b\u7ec4id(getpgid)\uff0c\u8fd8\u662f\u7528\u6237id(getuid)</li> <li>\u8fd4\u56de\u503c\uff1a\u6210\u529f\u8fd4\u56de\u4f18\u5148\u7ea7\uff0c\u533a\u95f4<code>[-NZERO,NZERO-1]</code>,\u5931\u8d25\u8fd4\u56de-1\uff0c\u4f46\u540c\u65f6\u9700\u8981\u901a\u8fc7errno\u6765\u5224\u65ad\u662f\u5426\u662f\u6267\u884c\u5931\u8d25</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include&lt;unistd.h&gt;\n#include&lt;sys/resource.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;errno.h&gt;\nint main()\n{\nprintf(\"%d\\n\",getpriority(PRIO_PROCESS,0));\nsetpriority(PRIO_PROCESS,0,-10);\nprintf(\"%d\\n\",getpriority(PRIO_PROCESS,0));\nsetpriority(PRIO_PROCESS,0,20);\nprintf(\"%d\\n\",getpriority(PRIO_PROCESS,0));\n\n}\n// \u8f93\u51fa\u7ed3\u679c\n// 0\n// -10\n// 19\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20system%20info/#63-setpriority","title":"6.3 setpriority","text":"<ul> <li>\u529f\u80fd\uff1a\u8bbe\u7f6e\u8fdb\u7a0b\u3001\u8fdb\u7a0b\u7ec4\u3001\u7528\u6237\u7684\u4f18\u5148\u7ea7</li> <li>\u8bed\u6cd5\uff1a<code>int setpriority(int which, id_t who, int value);</code></li> <li><code>which</code>:\u540c<code>getpriority</code></li> <li><code>who</code>:\u540c<code>getpriority</code></li> <li><code>value</code>:\u8bbe\u7f6e\u7684\u4f18\u5148\u7ea7\uff0c\u5b9e\u9645\u8bbe\u7f6e\u7684\u662f<code>value + NZERO</code>\u7684\u503c,\u5373<code>value</code>\u53ef\u53d6\u503c\u533a\u95f4\u662f[-NZERO,NZEROs],\u8fd9\u4e2a\u4e0d\u540c\u4e8e<code>nice</code>\u51fd\u6570\u7684</li> <li>\u793a\u4f8b\uff1a\u89c1<code>getpriority</code></li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20system%20info/#7","title":"7 \u5185\u5b58\u7ba1\u7406","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20system%20info/#71-malloc_trim","title":"7.1 malloc_trim","text":"<ul> <li>\u529f\u80fd\uff1a\u91ca\u653e\u5728\u5806\u9876\u7684\u5df2\u7ecffree\u4e86\u7684\u5185\u5b58</li> <li>\u5934\u6587\u4ef6\uff1a<code>#include &lt;malloc.h&gt;</code></li> <li>\u8bed\u6cd5\uff1a<code>int malloc_trim(size_t pad);</code>:</li> <li><code>pad</code>:\u901a\u5e38\u8bbe\u7f6e0\uff0c\u8868\u793a\u91ca\u653e\u6240\u6709\u80fd\u91ca\u653e\u7684\u5185\u5b58\u5230\u7cfb\u7edf\u4e2d</li> <li>\u8fd4\u56de\u503c:\u8fd4\u56de1\u8868\u793a\u6210\u529f\u91ca\u653e\u5185\u5b58\u5230\u7cfb\u7edf\uff0c\u8fd4\u56de0\u8868\u793a\u6ca1\u6709\u91ca\u653e</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;malloc.h&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nint getVmRSS()\n{\nint ret = 0;\npid_t cur_pid = getpid();\nFILE *fl1 = NULL;\nchar command[256] = {0};\nchar buf[256] = {0};\nsprintf(command, \"cat /proc/%u/status|grep VmRSS|awk '{print $2}'\", cur_pid);\nfl1 = popen(command, \"r\");\nif (fl1 != NULL)\n{\nwhile (feof(fl1) == 0 &amp;&amp; buf != NULL)\n{\nfread(buf, 1, 256, fl1);\n}\npclose(fl1);\n}\nelse\n{\nret = -1;\n}\nuint32_t vmrss = atoi(buf);\nreturn vmrss;\n}\n\nint main(int argc, char *argv[])\n{\nmallopt(M_MMAP_THRESHOLD, 128 * 1024);\nif (argc &lt; 2)\n{\nprintf(\"\u9700\u8981\u4e00\u4e2a\u53c2\u6570\\n\");\nreturn 1;\n}\nint MEMORY_SIZE = atoi(argv[1]);\nvector&lt;char *&gt; Array;\nprintf(\"befor new current VmRSS [%u]\\n\", getVmRSS());\nfor (int j = 0; j &lt; 2064; j++)\n{\nchar *Buff = new char[MEMORY_SIZE];\nfor (int i = 0; i &lt; MEMORY_SIZE; i++)\nBuff[i] = i;\nArray.push_back(Buff);\n}\nprintf(\"end new current VmRSS [%u]\\n\", getVmRSS());\nsleep(2);\nfor (int j = 0; j &lt; 2064; j++)\ndelete[] Array[j];\nprintf(\" delete current VmRSS [%u]\\n\", getVmRSS());\nsleep(2);\nmalloc_trim(0);\nprintf(\" malloc_trim current VmRSS [%u]\\n\", getVmRSS());\n}\n</code></pre> <ul> <li>\u7ed3\u679c</li> </ul> <pre><code>$ g++ test.cc\n$ ./a.out 65535\nbefor new current VmRSS [1280]\nend new current VmRSS [133292]\ndelete current VmRSS [132676]\nmalloc_trim current VmRSS [1356]\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/UNIX%20system%20info/#72-mallopt","title":"7.2 mallopt","text":"<ul> <li>\u529f\u80fd\uff1a\u8bbe\u7f6e\u5185\u5b58\u5206\u914d\u7684\u53c2\u6570</li> <li>\u8bed\u6cd5\uff1a<code>int mallopt(int param, int value);</code></li> <li><code>param</code>:<ul> <li><code>M_MMAP_MAX</code>:</li> <li><code>M_MMAP_THRESHOLD</code>:\u8bbe\u7f6e\u5206\u914d\u5185\u5b58\u65f6\u91c7\u7528mmap\u7684\u9608\u503c;\u5927\u4e8e\u7b49\u4e8e\u65f6\u7528mmap\u5206\u914d\u5185\u5b58\uff0c\u5c0f\u4e8e\u65f6\u7528sbrk\u5206\u914d\u5185\u5b58</li> <li><code>M_TRIM_THRESHOLD</code> : \u8bbe\u7f6e\u8c03\u7528 sbrk \u91ca\u653e\u5df2\u7ecf free \u7684\u5806\u9876\u5185\u5b58\u5230\u7cfb\u7edf\u7684\u9608\u503c\uff1b\u5927\u4e8e\u7b49\u4e8e\u65f6\u91ca\u653e\u5185\u5b58</li> </ul> </li> <li><code>value</code>:\u5bf9\u5e94<code>param</code>\u7684\u503c</li> <li>\u8fd4\u56de\u503c:</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/malloc%20%E9%80%89%E9%A1%B9/","title":"malloc \u9009\u9879","text":"<p>https://blog.csdn.net/u013920085/article/details/52847464</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/malloc%20%E9%80%89%E9%A1%B9/#1-mallopt","title":"1 mallopt","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/malloc%20%E9%80%89%E9%A1%B9/#11-m_mmap_threshold","title":"1.1 M_MMAP_THRESHOLD","text":"<ul> <li>M_MMAP_THRESHOLD\u7528\u4e8e\u8bbe\u7f6emmap\u5206\u914d\u9608\u503c\uff0c\u9ed8\u8ba4\u503c\u4e3a128KB\uff0cptmalloc\u9ed8\u8ba4\u5f00\u542f\u52a8\u6001\u8c03\u6574mmap\u5206\u914d\u9608\u503c\u548cmmap\u6536\u7f29\u9608\u503c\u3002</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/malloc%20%E9%80%89%E9%A1%B9/#12-m_trim_threshold","title":"1.2 M_TRIM_THRESHOLD","text":"<p>M_TRIM_THRESHOLD\u7528\u4e8e\u8bbe\u7f6emmap\u6536\u7f29\u9608\u503c\uff0c\u9ed8\u8ba4\u503c\u4e3a128KB\u3002\u81ea\u52a8\u6536\u7f29\u53ea\u4f1a\u5728free\u65f6\u624d\u53d1\u751f\uff0c\u5982\u679c\u5f53\u524dfree\u7684chunk\u5927\u5c0f\u52a0\u4e0a\u524d\u540e\u80fd\u5408\u5e76chunk\u7684\u5927\u5c0f\u5927\u4e8e64KB\uff0c\u5e76\u4e14top chunk\u7684\u5927\u5c0f\u8fbe\u5230mmap\u6536\u7f29\u9608\u503c\uff0c\u5bf9\u4e8e\u4e3b\u5206\u914d\u533a\uff0c\u8c03\u7528malloc_trim()\u8fd4\u56de\u4e00\u90e8\u5206\u5185\u5b58\u7ed9\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5bf9\u4e8e\u975e\u4e3b\u5206\u914d\u533a\uff0c\u8c03\u7528heap_trim()\u8fd4\u56de\u4e00\u90e8\u5206\u5185\u5b58\u7ed9\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5728\u53d1\u751f\u5185\u5b58\u6536\u7f29\u65f6\uff0c\u8fd8\u662f\u4ece\u65b0\u8bbe\u7f6emmap\u5206\u914d\u9608\u503c\u548cmmap\u6536\u7f29\u9608\u503c\u3002</p> <p>\u8fd9\u4e2a\u9009\u9879\u4e00\u822c\u4e0eM_MMAP_THRESHOLD\u9009\u9879\u4e00\u8d77\u4f7f\u7528\uff0cM_MMAP_THRESHOLD\u7528\u4e8e\u8bbe\u7f6emmap\u5206\u914d\u9608\u503c\uff0c\u5bf9\u4e8e\u957f\u65f6\u95f4\u8fd0\u884c\u7684\u7a0b\u5e8f\uff0c\u9700\u8981\u5bf9\u8fd9\u4e24\u4e2a\u9009\u9879\u8fdb\u884c\u8c03\u4f18\uff0c\u5c3d\u91cf\u4fdd\u8bc1\u5728ptmalloc\u4e2d\u7f13\u5b58\u7684\u7a7a\u95f2chunk\u80fd\u591f\u5f97\u5230\u91cd\u7528\uff0c\u5c3d\u91cf\u5c11\u7528mmap\u5206\u914d\u4e34\u65f6\u7528\u7684\u5185\u5b58\u3002\u4e0d\u505c\u5730\u4f7f\u7528\u7cfb\u7edf\u8c03\u7528mmap\u5206\u914d\u5185\u5b58\uff0c\u7136\u540e\u5f88\u5feb\u53c8free\u6389\u8be5\u5185\u5b58\uff0c\u8fd9\u6837\u662f\u5f88\u6d6a\u8d39\u7cfb\u7edf\u8d44\u6e90\u7684\uff0c\u5e76\u4e14\u8fd9\u6837\u5206\u914d\u7684\u5185\u5b58\u7684\u901f\u5ea6\u6bd4\u4eceptmalloc\u7684\u7a7a\u95f2chunk\u4e2d\u5206\u914d\u5185\u5b58\u6162\u5f97\u591a\uff0c\u7531\u4e8e\u9700\u8981\u9875\u5bf9\u9f50\u5bfc\u81f4\u7a7a\u95f4\u5229\u7528\u7387\u964d\u4f4e\uff0c\u5e76\u4e14\u64cd\u4f5c\u7cfb\u7edf\u8c03\u7528mmap()\u5206\u914d\u5185\u5b58\u662f\u4e32\u884c\u7684\uff0c\u5728\u53d1\u751f\u7f3a\u9875\u5f02\u5e38\u65f6\u52a0\u8f7d\u65b0\u7684\u7269\u7406\u9875\uff0c\u9700\u8981\u5bf9\u65b0\u7684\u7269\u7406\u9875\u505a\u6e050\u64cd\u4f5c\uff0c\u5927\u5927\u5f71\u54cd\u6548\u7387\u3002</p> <p>M_TRIM_THRESHOLD\u7684\u503c\u5fc5\u987b\u8bbe\u7f6e\u4e3a\u9875\u5927\u5c0f\u5bf9\u9f50\uff0c\u8bbe\u7f6e\u4e3a-1\u4f1a\u5173\u95ed\u5185\u5b58\u6536\u7f29\u8bbe\u7f6e\u3002</p> <p>\u6ce8\u610f\uff1a\u8bd5\u56fe\u5728\u7a0b\u5e8f\u5f00\u59cb\u8fd0\u884c\u65f6\u5206\u914d\u4e00\u5757\u5927\u5185\u5b58\uff0c\u5e76\u9a6c\u4e0a\u91ca\u653e\u6389\uff0c\u4ee5\u671f\u671b\u6765\u89e6\u53d1\u5185\u5b58\u6536\u7f29\uff0c\u8fd9\u662f\u4e0d\u53ef\u80fd\u7684\uff0c\u56e0\u4e3a\u8be5\u5185\u5b58\u9a6c\u4e0a\u5c31\u8fd4\u56de\u7ed9\u64cd\u4f5c\u7cfb\u7edf\u4e86\u3002</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/malloc%20%E9%80%89%E9%A1%B9/#121-m_mmap_max","title":"1.2.1 M_MMAP_MAX","text":"<p>M_MMAP_MAX\u7528\u4e8e\u8bbe\u7f6e\u8fdb\u7a0b\u4e2d\u7528mmap\u5206\u914d\u7684\u5185\u5b58\u5757\u7684\u6700\u5927\u9650\u5236\uff0c\u9ed8\u8ba4\u503c\u4e3a64K(cat /proc/sys/vm/max_map_count)\uff0c\u56e0\u4e3a\u6709\u4e9b\u7cfb\u7edf\u7528mmap\u5206\u914d\u7684\u5185\u5b58\u5757\u592a\u591a\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u7684\u6027\u80fd\u4e0b\u964d\u3002</p> <p>\u5982\u679c\u5c06M_MMAP_MAX\u8bbe\u7f6e\u4e3a0\uff0cptmalloc\u5c06\u4e0d\u4f1a\u4f7f\u7528mmap\u5206\u914d\u5927\u5757\u5185\u5b58\u3002</p> <p>Ptmalloc\u4e3a\u4f18\u5316\u9501\u7684\u7ade\u4e89\u5f00\u9500\uff0c\u505a\u4e86PER_THREAD\u7684\u4f18\u5316\uff0c\u4e5f\u63d0\u4f9b\u4e86\u4e24\u4e2a\u9009\u9879\uff0cM_ARENA_TEST\u548cM_ARENA_MAX\uff0c\u7531\u4e8ePER_THREAD\u7684\u4f18\u5316\u9ed8\u8ba4\u6ca1\u6709\u5f00\u542f\uff0c\u8fd9\u91cc\u6682\u4e0d\u5bf9\u8fd9\u4e24\u4e2a\u9009\u9879\u505a\u4ecb\u7ecd\u3002</p> <p>\u53e6\u5916\uff0cptmalloc\u6ca1\u6709\u63d0\u4f9b\u5173\u95edmmap\u5206\u914d\u9608\u503c\u52a8\u6001\u8c03\u6574\u673a\u5236\u7684\u9009\u9879\uff0cmmap\u5206\u914d\u9608\u503c\u52a8\u6001\u8c03\u6574\u65f6\u9ed8\u8ba4\u5f00\u542f\u7684\uff0c\u5982\u679c\u8981\u5173\u95edmmap\u5206\u914d\u9608\u503c\u52a8\u6001\u8c03\u6574\u673a\u5236\uff0c\u53ef\u4ee5\u8bbe\u7f6eM_TRIM_THRESHOLD\uff0cM_MMAP_THRESHOLD\uff0cM_TOP_PAD\u548cM_MMAP_MAX\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\u3002\u4f46\u662f\u5f3a\u70c8\u5efa\u8bae\u4e0d\u8981\u5173\u95ed\u8be5\u673a\u5236\uff0c\u8be5\u673a\u5236\u4fdd\u8bc1\u4e86ptmalloc\u5c3d\u91cf\u91cd\u7528\u7f13\u5b58\u4e2d\u7684\u7a7a\u95f2\u5185\u5b58\uff0c\u4e0d\u7528\u6bcf\u6b21\u5bf9\u76f8\u5bf9\u5927\u4e00\u4e9b\u7684\u5185\u5b58\u4f7f\u7528\u7cfb\u7edf\u8c03\u7528mmap\u53bb\u5206\u914d\u5185\u5b58\u3002 - \u793a\u4f8b</p> <pre><code>mallopt(M_MMAP_MAX, 0); // \u7981\u6b62malloc\u8c03\u7528mmap\u5206\u914d\u5185\u5b58_**\nmallopt(M_TRIM_THRESHOLD, 0); // \u7981\u6b62\u5185\u5b58\u7f29\u8fdb\uff0csbrk\u7533\u8bf7\u7684\u5185\u5b58\u91ca\u653e\u540e\u4e0d\u4f1a\u5f52\u8fd8\u7ed9\u64cd\u4f5c\u7cfb\u7edf_**\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/UNIX%20C%20API/malloc%20%E9%80%89%E9%A1%B9/#2-malloc_trim","title":"2 malloc_trim","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E4%BF%A1%E5%8F%B7/","title":"\u4fe1\u53f7","text":"<ul> <li><code>signal</code>:\u5173\u8054\u81ea\u5b9a\u4e49\u4fe1\u53f7\u5904\u7406\u51fd\u6570</li> <li><code>raise</code>:\u4e3b\u52a8\u89e6\u53d1\u67d0\u4e2a\u4fe1\u53f7</li> <li><code>void signalHandler(int)</code>:\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u683c\u5f0f</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include&lt;signal.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;unistd.h&gt;\nvoid signalHandler(int sigNum){\nprintf(\"signal is [%d]\\n\", sigNum);\nexit(sigNum);\n}\n\nint main(){\nsignal(SIGINT, signalHandler);\nint i = 0;\nwhile (1)\n{\n++i;\nprintf(\"sleep 2 s\\n\");\nsleep(2);\nif(i&gt;3){\nraise(SIGINT);\n}\n}\nreturn 0;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%85%B3%E9%94%AE%E5%AD%97/","title":"C++\u5173\u952e\u5b57","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%85%B3%E9%94%AE%E5%AD%97/#delctype","title":"delctype","text":"<ul> <li>\u529f\u80fd\uff1a\u901a\u8fc7\u8868\u8fbe\u5f0f\u6216\u5bf9\u8c61\u6765\u8bc6\u522b\u7c7b\u578b</li> <li>\u793a\u4f8b</li> </ul> <pre><code>struct A { double x; };\nconst A* a;\n\ndecltype(a-&gt;x) y;       // y \u7684\u7c7b\u578b\u662f double\uff08\u5176\u58f0\u660e\u7c7b\u578b\uff09\ndecltype((a-&gt;x)) z = y; // z \u7684\u7c7b\u578b\u662f const double&amp;\uff08\u5de6\u503c\u8868\u8fbe\u5f0f\uff09\n\ntemplate&lt;typename T, typename U&gt;\nauto add(T t, U u) -&gt; decltype(t + u) // \u8fd4\u56de\u7c7b\u578b\u4f9d\u8d56\u4e8e\u6a21\u677f\u5f62\u53c2\n{                                     // C++14 \u5f00\u59cb\u53ef\u4ee5\u63a8\u5bfc\u8fd4\u56de\u7c7b\u578b\nreturn t+u;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%85%B3%E9%94%AE%E5%AD%97/#constexpr","title":"constexpr","text":"<ul> <li>\u529f\u80fd\uff1a\u5728\u7f16\u8bd1\u671f\u8ba1\u7b97\u51fd\u6570\u6216\u8868\u8fbe\u5f0f\u7684\u503c</li> <li>\u4f7f\u7528\u573a\u666f\uff1a\u5982\u679c\u80fd\u5728\u7f16\u8bd1\u671f\u5c31\u80fd\u786e\u5b9a\u7684\u503c\uff0c\u53ef\u4ee5\u4f7f\u7528constepr\u3002</li> <li>\u6761\u4ef6</li> <li>\u5176\u8868\u8fbe\u5f0f\u6216\u51fd\u6570\u7684\u53c2\u6570\u5fc5\u987b\u662f\u5b57\u9762\u91cf\u503c\uff0c\u6bd4\u5982\u6570\u503c1\uff0c2\uff0c3\uff0c\u6216\u5b57\u7b26\u4e32\u201c1234\u201d</li> <li>\u8868\u8fbe\u5f0f\u6216\u51fd\u6570\u53c2\u6570\u4e5f\u662fconstexpr\u8868\u8fbe\u5f0f\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;stdexcept&gt;\n\n// C++11 constexpr \u51fd\u6570\u4f7f\u7528\u9012\u5f52\u800c\u975e\u8fed\u4ee3\n// \uff08C++14 constexpr \u51fd\u6570\u53ef\u4f7f\u7528\u5c40\u90e8\u53d8\u91cf\u548c\u5faa\u73af\uff09\nconstexpr int factorial(int n)\n{\nreturn n &lt;= 1? 1 : (n * factorial(n - 1));\n}\n\n// \u5b57\u9762\u7c7b\nclass conststr {\nconst char* p;\nstd::size_t sz;\npublic:\ntemplate&lt;std::size_t N&gt;\nconstexpr conststr(const char(&amp;a)[N]): p(a), sz(N - 1) {}\n\n// constexpr \u51fd\u6570\u901a\u8fc7\u629b\u5f02\u5e38\u6765\u63d0\u793a\u9519\u8bef\n// C++11 \u4e2d\uff0c\u5b83\u4eec\u5fc5\u987b\u7528\u6761\u4ef6\u8fd0\u7b97\u7b26 ?: \u8fd9\u4e48\u505a\nconstexpr char operator[](std::size_t n) const\n{\nreturn n &lt; sz ? p[n] : throw std::out_of_range(\"\");\n}\nconstexpr std::size_t size() const { return sz; }\n};\n\n// C++11 constexpr \u51fd\u6570\u5fc5\u987b\u628a\u4e00\u5207\u653e\u5728\u5355\u6761 return \u8bed\u53e5\u4e2d\n// \uff08C++14 \u65e0\u6b64\u8981\u6c42\uff09\nconstexpr std::size_t countlower(conststr s, std::size_t n = 0,\nstd::size_t c = 0)\n{\nreturn n == s.size() ? c :\n'a' &lt;= s[n] &amp;&amp; s[n] &lt;= 'z' ? countlower(s, n + 1, c + 1) :\ncountlower(s, n + 1, c);\n}\n\n// \u8f93\u51fa\u8981\u6c42\u7f16\u8bd1\u65f6\u5e38\u91cf\u7684\u51fd\u6570\uff0c\u7528\u4e8e\u6d4b\u8bd5\ntemplate&lt;int n&gt;\nstruct constN\n{\nconstN() { std::cout &lt;&lt; n &lt;&lt; '\\n'; }\n};\n\nint main()\n{\nstd::cout &lt;&lt; \"4! = \" ;\nconstN&lt;factorial(4)&gt; out1; // \u5728\u7f16\u8bd1\u65f6\u8ba1\u7b97\n\nvolatile int k = 8; // \u4e0d\u5141\u8bb8\u4f7f\u7528 volatile \u8005\u4f18\u5316\nstd::cout &lt;&lt; k &lt;&lt; \"! = \" &lt;&lt; factorial(k) &lt;&lt; '\\n'; // \u8fd0\u884c\u65f6\u8ba1\u7b97\n\nstd::cout &lt;&lt; \"the number of lowercase letters in \\\"Hello, world!\\\" is \";\nconstN&lt;countlower(\"Hello, world!\")&gt; out2; // \u9690\u5f0f\u8f6c\u6362\u5230 conststr\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%85%B3%E9%94%AE%E5%AD%97/#mutable","title":"mutable","text":"<ul> <li>\u529f\u80fd\uff1a\u4f7f\u5b9a\u4e49\u4e3aconst\u7684\u5bf9\u8c61\u5185\u7684\u6210\u5458\u80fd\u88ab\u4fee\u6539</li> <li>\u4f7f\u7528\u573a\u666f\uff1a\u5982\u679cA\u4e2d\u6709\u4e00\u4e2a\u6210\u5458m\u88ab\u58f0\u660e\u4e3amutable\uff0c\u5f53<code>const A a;</code>\u65f6\uff0c\u4f7f<code>a.m=value</code>\u80fd\u6267\u884c</li> <li>\u793a\u4f8b</li> </ul> <pre><code>int main()\n{\nint n1 = 0;           // \u975e const \u5bf9\u8c61\nconst int n2 = 0;     // const \u5bf9\u8c61\nint const n3 = 0;     // const \u5bf9\u8c61\uff08\u540c n2\uff09\nvolatile int n4 = 0;  // volatile \u5bf9\u8c61\nconst struct\n{\nint n1;\nmutable int n2;\n} x = {0, 0};      // \u5e26 mutable \u6210\u5458\u7684 const \u5bf9\u8c61\n\nn1 = 1; // ok\uff0c\u53ef\u4fee\u6539\u5bf9\u8c61\n//  n2 = 2; // \u9519\u8bef\uff1a\u4e0d\u53ef\u4fee\u6539\u5bf9\u8c61\nn4 = 3; // ok\uff0c\u5f53\u505a\u526f\u6548\u5e94\n//  x.n1 = 4; // \u9519\u8bef\uff1aconst \u5bf9\u8c61\u7684\u6210\u5458\u4e3a const\nx.n2 = 4; // ok\uff0cconst \u5bf9\u8c61\u7684 mutable \u6210\u5458\u4e0d\u662f const\n\nconst int&amp; r1 = n1; // \u7ed1\u5b9a\u5230\u975e const \u5bf9\u8c61\u7684 const \u5f15\u7528\n//  r1 = 2; // \u9519\u8bef\uff1a\u8bd5\u56fe\u901a\u8fc7\u5230 const \u7684\u5f15\u7528\u4fee\u6539\nconst_cast&lt;int&amp;&gt;(r1) = 2; // ok\uff0c\u4fee\u6539\u975e const \u5bf9\u8c61 n1\n\nconst int&amp; r2 = n2; // \u7ed1\u5b9a\u5230 const \u5bf9\u8c61\u7684 const \u5f15\u7528\n//  r2 = 2; // \u9519\u8bef\uff1a\u8bd5\u56fe\u901a\u8fc7\u5230 const \u7684\u5f15\u7528\u4fee\u6539\n//  const_cast&lt;int&amp;&gt;(r2) = 2; // \u672a\u5b9a\u4e49\u884c\u4e3a\uff1a\u8bd5\u56fe\u4fee\u6539 const \u5bf9\u8c61 n2\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%85%B3%E9%94%AE%E5%AD%97/#volatile","title":"volatile","text":"<ul> <li>\u529f\u80fd\uff1a\u7981\u6b62\u7f16\u8bd1\u5668\u7684\u4f18\u5316</li> <li>\u4f7f\u7528\u573a\u666f\uff1a</li> <li>static volatile \u5bf9\u8c61\u6a21\u4eff\u6620\u5c04\u4e8e\u5185\u5b58\u7684 I/O \u7aef\u53e3\uff0c\u800c static const volatile \u5bf9\u8c61\u6a21\u4eff\u6620\u5c04\u4e8e\u5185\u5b58\u7684\u8f93\u5165\u7aef\u53e3</li> <li>sig_atomic_t \u7c7b\u578b\u7684 static volatile \u5bf9\u8c61\u7528\u4e8e\u4e0e signal \u5904\u7406\u4ea4\u6d41</li> <li>\u542b\u6709\u5bf9 setjmp \u5b8f\u8c03\u7528\u7684\u51fd\u6570\u4e2d\u7684\u5c40\u90e8 volatile \u53d8\u91cf\uff0c\u662f\u5728 longjmp \u8fd4\u56de\u540e\u4ec5\u6709\u4fdd\u8bc1\u6062\u590d\u5176\u503c\u7684\u5c40\u90e8\u53d8\u91cf</li> <li>volatile \u53d8\u91cf\u53ef\u7528\u4e8e\u7981\u7528\u67d0\u4e9b\u4f18\u5316\u5f62\u5f0f\uff0c\u4f8b\u5982\u7981\u7528\u6b7b\u5b58\u50a8\u6d88\u9664\uff0c\u6216\u4e3a\u5fae\u57fa\u51c6\u7981\u7528\u5e38\u91cf\u6298\u53e0</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\nint main(void)\n{\nclock_t t = clock();\ndouble d = 0.0;\nfor (int n = 0; n &lt; 10000; ++n)\nfor (int m = 0; m &lt; 10000; ++m)\nd += d * n * m; // \u8bfb\u5199\u975e volatile \u5bf9\u8c61\nprintf(\"Modified a non-volatile variable 100m times. \"\n\"Time used: %.2f seconds\\n\",\n(double)(clock() - t)/CLOCKS_PER_SEC);\n\nt = clock();\nvolatile double vd = 0.0;\nfor (int n = 0; n &lt; 10000; ++n)\nfor (int m = 0; m &lt; 10000; ++m) {\ndouble prod = vd * n * m; // \u8bfb volatile \u5bf9\u8c61\nvd += prod; // \u8bfb\u5199 volatile \u5bf9\u8c61\n} printf(\"Modified a volatile variable 100m times. \"\n\"Time used: %.2f seconds\\n\",\n(double)(clock() - t)/CLOCKS_PER_SEC);\n}\n//\u53ef\u80fd\u7684\u8f93\u51fa\n//Modified a non-volatile variable 100m times. Time used: 0.00 seconds\n//Modified a volatile variable 100m times. Time used: 0.79 seconds\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%85%B3%E9%94%AE%E5%AD%97/#const-volatile","title":"const volatile","text":"<ul> <li>\u529f\u80fd\uff1a\u7981\u6b62\u7531\u4ee3\u7801\u4e2d\u6539\u53d8\u503c\uff08\u5141\u8bb8\u7531\u5916\u90e8\u6761\u4ef6\uff0c\u5982\u786c\u4ef6\u6539\u53d8\uff09\uff0c\u540c\u65f6\u58f0\u660e<code>volatile</code>\u7981\u6b62\u7f16\u8bd1\u5668\u7684\u4f18\u5316\uff08\u5373\u6bcf\u4e00\u6b21\u8bfb\u53d6\u6570\u636e\u90fd\u8981\u539f\u5185\u5b58\u5730\u5740\u53bb\u8bfb\uff09</li> <li>\u4f7f\u7528\u573a\u666f\uff1a\u4e0d\u5141\u8bb8\u7531\u7a0b\u5e8f\u5458\u901a\u8fc7\u4ee3\u7801\u53bb\u6539\u53d8\u503c\uff0c\u4f46\u53ef\u80fd\u7531\u786c\u4ef6\u7b49\u5916\u90e8\u6539\u53d8\u7684\u503c\uff0c\u56e0\u6b64\u53c8\u4e0d\u80fd\u8ba9\u7f16\u8bd1\u5668\u53bb\u4f18\u5316\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u8bfb\u51fa\u7684\u503c\u662f\u672a\u66f4\u65b0\u7684\u539f\u59cb\u503c\u3002</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%85%B3%E9%94%AE%E5%AD%97/#noexcept","title":"noexcept","text":"<ul> <li>\u529f\u80fd\uff1a</li> <li>\u4f5c\u4e3a\u8fd0\u7b97\u7b26<code>noexcept( \u8868\u8fbe\u5f0f )</code>\uff1a\u8fd0\u7b97\u7b26\u8fdb\u884c\u7f16\u8bd1\u65f6\u68c0\u67e5\uff0c\u82e5\u8868\u8fbe\u5f0f\u58f0\u660e\u4e3a\u4e0d\u629b\u51fa\u4efb\u4f55\u5f02\u5e38\u5219\u8fd4\u56de true</li> <li>\u4f5c\u4e3a\u8bf4\u660e\u7b26\uff1a\u6307\u5b9a\u51fd\u6570\u662f\u5426\u629b\u51fa\u5f02\u5e38</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;utility&gt;\n#include &lt;vector&gt;\n\nvoid may_throw();\nvoid no_throw() noexcept;//\u8bf4\u660e\u7b26\nauto lmay_throw = []{};\nauto lno_throw = []() noexcept {};\nclass T{\npublic:\n~T(){} // \u6790\u6784\u51fd\u6570\u59a8\u788d\u4e86\u79fb\u52a8\u6784\u9020\u51fd\u6570\n// \u590d\u5236\u6784\u9020\u51fd\u6570\u4e3a noexcept\n};\nclass U{\npublic:\n~U(){} // \u6790\u6784\u51fd\u6570\u59a8\u788d\u4e86\u79fb\u52a8\u6784\u9020\u51fd\u6570\n// \u590d\u5236\u6784\u9020\u51fd\u6570\u4e3a noexcept(false)\nstd::vector&lt;int&gt; v;\n};\nclass V{\npublic:\nstd::vector&lt;int&gt; v;\n};\n\nint main()\n{\nT t;\nU u;\nV v;\n//\u4ee5\u4e0bnoexcept\u4f5c\u4e3a\u8fd0\u7b97\u7b26\nstd::cout &lt;&lt; std::boolalpha\n&lt;&lt; \"Is may_throw() noexcept? \" &lt;&lt; noexcept(may_throw()) &lt;&lt; '\\n'\n&lt;&lt; \"Is no_throw() noexcept? \" &lt;&lt; noexcept(no_throw()) &lt;&lt; '\\n'\n&lt;&lt; \"Is lmay_throw() noexcept? \" &lt;&lt; noexcept(lmay_throw()) &lt;&lt; '\\n'\n&lt;&lt; \"Is lno_throw() noexcept? \" &lt;&lt; noexcept(lno_throw()) &lt;&lt; '\\n'\n&lt;&lt; \"Is ~T() noexcept? \" &lt;&lt; noexcept(std::declval&lt;T&gt;().~T()) &lt;&lt; '\\n'\n// \u6ce8\uff1a\u4ee5\u4e0b\u5404\u9879\u6d4b\u8bd5\u4e5f\u8981\u6c42 ~T() \u4e3a noexcept\n// \u56e0\u4e3a noexccept \u4e2d\u7684\u8868\u8fbe\u5f0f\u6784\u9020\u5e76\u9500\u6bc1\u4e86\u4e34\u65f6\u91cf\n&lt;&lt; \"Is T(rvalue T) noexcept? \" &lt;&lt; noexcept(T(std::declval&lt;T&gt;())) &lt;&lt; '\\n'\n&lt;&lt; \"Is T(lvalue T) noexcept? \" &lt;&lt; noexcept(T(t)) &lt;&lt; '\\n'\n&lt;&lt; \"Is U(rvalue U) noexcept? \" &lt;&lt; noexcept(U(std::declval&lt;U&gt;())) &lt;&lt; '\\n'\n&lt;&lt; \"Is U(lvalue U) noexcept? \" &lt;&lt; noexcept(U(u)) &lt;&lt; '\\n'  &lt;&lt; \"Is V(rvalue V) noexcept? \" &lt;&lt; noexcept(V(std::declval&lt;V&gt;())) &lt;&lt; '\\n'\n&lt;&lt; \"Is V(lvalue V) noexcept? \" &lt;&lt; noexcept(V(v)) &lt;&lt; '\\n';  }\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%85%B3%E9%94%AE%E5%AD%97/#operator","title":"operator","text":"<ul> <li>\u529f\u80fd</li> <li>\u91cd\u8f7d\u8fd0\u7b97\u7b26</li> <li>\u7528\u6237\u5b9a\u4e49\u8f6c\u6362\u51fd\u6570</li> <li>\u4f7f\u7528\u573a\u666f</li> <li>\u5f53\u9700\u8981\u5bf9\u7c7b\u4e2d\u67d0\u4e00\u8fd0\u7b97\u7b26\u7279\u6b8a\u5904\u7406\u65f6</li> <li>\u5f53\u9700\u8981\u5bf9\u7c7b\u8fdb\u884c\u7c7b\u578b\u8f6c\u6362\u65f6\uff0c\u6bd4\u5982\uff0c\u7c7b\u578bA\u8f6c\u7c7b\u578bB</li> <li>\u6ce8\u610f</li> <li>\u5f53\u91cd\u8f7d\u8fd0\u7b97\u7b26\u65f6\uff0c\u8fd4\u56de\u503c\u7c7b\u578b\u5728\u5173\u952e\u5b57operator\u4e4b\u524d\uff1b\u5f53\u8fdb\u884c\u7c7b\u578b\u8f6c\u6362\u65f6\uff0c\u8fd4\u56de\u7c7b\u578b\u5728operator\u5173\u952e\u5b57\u4e4b\u540e\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code>class A {\npublic:\nA() :m_a(0) {}\nA(const int&amp; a) { m_a = a; }\n//\u7528\u6237\u5b9a\u4e49\u8f6c\u6362\u51fd\u6570 int\u8f6c\u6362\u51fd\u6570\noperator int () {\nreturn this-&gt;m_a;\n}\n//or\n//operator int&amp; () {\n//    return this-&gt;m_a;\n//}\noperator int*() {\nreturn &amp;this-&gt;m_a;\n}\n\n//\u91cd\u8f7d \u53d6\u5730\u5740\u7b26&amp;\nA* operator &amp;() {\nreturn this;\n}\nprivate:\nint m_a;\n};\nint main()\n{\nA a(2);\n//int\u8f6c\u6362\u51fd\u6570\nint i = (int)(a);\ni = static_cast&lt;int&gt;(a);\n//int*\u8f6c\u6362\u51fd\u6570\nint* pi = (int*)(a);\n//\u4f7f\u7528\u91cd\u8f7d\u8fd0\u7b97\u7b26&amp;\nA* pa = &amp;a;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%88%AB%E5%90%8D/","title":"\u522b\u540d","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%88%AB%E5%90%8D/#11-typedef-typename-define-namespace-using","title":"1.1 typedef typename <code>#define</code> namespace using \u533a\u522b","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%88%AB%E5%90%8D/#12-1typedef","title":"1.2 1.\u5173\u952e\u5b57typedef\u5b9a\u4e49\u522b\u540d","text":"<pre><code>//\u4f8b1\uff1a\u5b9a\u4e49\u53d8\u91cf\u522b\u540d\ntypedef unsigned int  size_t; //size_t\u662funsigned int\u7684\u522b\u540d\nsize_t i=2; //\u7b49\u4ef7\u4e8e unsigned int i=2;\n//\u4f8b2:\u5b9a\u4e49\u7ed3\u6784\u522b\u540d\ntypedef struct SA\n{\n\n}Sa,*Spa; //C\u7ed3\u6784\u5199\u6cd5\uff0cSA\u7ed3\u6784\u7684\u4e00\u4e2a\u6307\u9488\u5bf9\u8c61\u522b\u540dSpa\uff0c\u548c\u4e00\u4e2a\u5bf9\u8c61\u522b\u540dSa\nSa s;\nSpa* sp;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%88%AB%E5%90%8D/#13-2typename","title":"1.3 2.typename","text":"<ol> <li>\u7528\u4e8e\u6a21\u677f\u58f0\u660e</li> </ol> <pre><code>template&lt;typename T&gt;\nclass S{};\n</code></pre> <ol> <li>\u7528\u4e8e\u6a21\u677f\u7c7b\u5d4c\u5957\u4ece\u5c5e\u547d\u540d\u65f6\uff0c\u5f3a\u8c03\u8fd9\u662f\u4e00\u4e2a\u7c7b\u578b</li> </ol> <pre><code>//\u4f8b1\uff1a\ntemplate&lt;typename C&gt;\nvoid f(const C&amp; container, typename C::iterator iter);\n//\u4f8b2\uff1a\ntemplate&lt;typename C&gt;\nclass S\n{\ntypename C::iterator iter1;//\u58f0\u660e\u4e00\u4e2a C::iterator \u7684\u6210\u5458 iter1\nusing iter2=typename C::iterator; \u5b9a\u4e49\u522b\u540d iter2 \uff0c\u7c7b\u578b\u662fC::iterator\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%88%AB%E5%90%8D/#14-3define","title":"1.4 3.\u6587\u672c\u66ff\u6362\u5b8fdefine","text":"<pre><code>#define PI 3.1415926 //\u7528PI\u4ee3\u66ff3.1415926\ndouble db = PI; //db=3.1415926\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%88%AB%E5%90%8D/#15-4using","title":"1.5 4.using","text":"<ol> <li>\u7528\u4e8e\u547d\u540d\u7a7a\u95f4</li> </ol> <pre><code>//\u4f8b1\uff1a\nusing namespace std;//\u547d\u540d\u7a7a\u95f4std\u5185\u7684\u6210\u5458\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\ncout &lt;&lt;\"Hello World!\";//true\nint i;\ncin &gt;&gt; i;//true\n//\u4f8b2\uff1a\nusing namespace std::cout;//\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u547d\u540d\u7a7a\u95f4std\u5185\u7684cout\u6210\u5458\ncout &lt;&lt;\"Hello World!\";//true\nint i;\ncin &gt;&gt; i;//error\nstd::cin &gt;&gt; i;//true\n</code></pre> <ol> <li>\u7528\u4e8e\u7c7b\u6210\u5458</li> <li>\u7528\u4e8e\u5c06\u57fa\u7c7b\u6210\u5458\u5f15\u5165\u5230\u6d3e\u751f\u7c7b\u7684\u5b9a\u4e49\u4e2d\uff0c\u4f8b\u5982\u5c06\u57fa\u7c7b\u7684\u53d7\u4fdd\u62a4\u6210\u5458\u66b4\u9732\u4e3a\u6d3e\u751f\u7c7b\u7684\u516c\u5f00\u6210\u5458</li> <li>\u7528\u4e8e\u7ee7\u627f\u6784\u9020\u51fd\u6570</li> </ol> <pre><code>struct B {\nB(){ std::cout &lt;&lt; \"B\u6784\u9020\\n\"; }\nprotected:\nvoid g(char) { std::cout &lt;&lt; \"B::g\\n\"; }\nint m; // B::m \u4e3a\u53d7\u4fdd\u62a4\n};\n\nstruct D : B {\nusing B::m; // D::m \u4e3a\u516c\u5f00\nusing B::g; // D::g(char)\u53d8\u6210\u516c\u5f00\nvoid g(int) { std::cout &lt;&lt; \"D::g\\n\"; } // g(int) \u4e0e g(char) \u5747\u4f5c\u4e3a D \u6210\u5458\u53ef\u89c1\nusing B::B;//\u7ee7\u627fB\u7684\u6784\u9020\n};\nint main(int argc, char* argv[])\n{\n\nD d;// print: B\u6784\u9020 \u3010d\u8c03\u7528\u57fa\u7c7bB\u7684\u6784\u9020\u3011\nd.m; //\u3010\u7c7b\u5916\u53ef\u8bbf\u95ee\uff0cm\u4ece\u57fa\u7c7b\u7684\u4fdd\u62a4\u53d8\u516c\u6709\u3011\nd.g(1); //print: D::g \nd.g('c');//print: B::g\n}\n</code></pre> <ol> <li>\u7528\u4e8e\u7c7b\u578b\u522b\u540d\u4e0e\u522b\u540d\u6a21\u677f\u58f0\u660e </li> </ol> <pre><code>    template&lt;typename T&gt;\nusing myVec=vector&lt;T&gt;;\nmyVec&lt;int&gt; vec;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%88%AB%E5%90%8D/#16-5namespace","title":"1.6 5.namespace \u4f7f\u7528\u5728\u547d\u540d\u7a7a\u95f4\u4e0a","text":"<p>\u8bed\u6cd5: * namespace \u522b\u540d = \u547d\u540d\u7a7a\u95f4\u540d; (1)  * namespace \u522b\u540d = ::\u547d\u540d\u7a7a\u95f4\u540d;   (2)  * namespace \u522b\u540d = \u5d4c\u5957\u540d::\u547d\u540d\u7a7a\u95f4\u540d;    (3) </p> <pre><code>namespace Q {\nnamespace V { // V \u662f Q \u7684\u6210\u5458\uff0c\u4e14\u5b8c\u5168\u5728 Q \u5185\u5b9a\u4e49\n// namespace Q::V { // C++17 \u4e2d\u5bf9\u4e0a\u8ff0\u4e8c\u884c\u7684\u66ff\u4ee3\u5199\u6cd5\nclass C { void m(); }; // C \u662f V \u7684\u6210\u5458\u4e14\u5b8c\u5168\u5b9a\u4e49\u4e8e V \u5185\n// C::m \u4ec5\u58f0\u660e\nvoid f(); // f \u662f V \u7684\u6210\u5458\uff0c\u4f46\u53ea\u5728\u6b64\u58f0\u660e\n}\nvoid V::f() // V \u7684\u6210\u5458 f \u7684 V \u5916\u5b9a\u4e49\n// f \u7684\u5916\u56f4\u547d\u540d\u7a7a\u95f4\u4ecd\u662f\u5168\u5c40\u547d\u540d\u7a7a\u95f4\u3001Q \u4e0e Q::V\n{\nextern void h(); // \u8fd9\u58f0\u660e ::Q::V::h\n}\nvoid V::C::m() // V::C::m \u7684\u547d\u540d\u7a7a\u95f4\uff08\u53ca\u7c7b\uff09\u5916\u5b9a\u4e49\n// \u5916\u56f4\u547d\u540d\u7a7a\u95f4\u662f\u5168\u5c40\u547d\u540d\u7a7a\u95f4\u3001Q \u4e0e Q::V\n{\n}\n}\n\nint main(int argc, char* argv[])\n{\nnamespace nm1 = ::Q::V;\nnamespace nm2 = Q::V;\nnamespace nm3 = Q;\n}\n</code></pre> <ul> <li>\u6211\u7684GitHub </li> <li>\u6211\u7684CSDN</li> <li>\u6211\u7684Gitee</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%8A%A8%E6%80%81%E5%BA%93%E5%92%8C%E9%9D%99%E6%80%81%E5%BA%93/","title":"\u52a8\u6001\u5e93\u548c\u9759\u6001\u5e93","text":"<p>3\u79cd\u5e93\u52a0\u8f7d\u65b9\u5f0f - \u52a8\u6001\u5e93\u9759\u6001\u52a0\u8f7d - \u52a8\u6001\u5e93\u52a8\u6001\u52a0\u8f7d - \u9759\u6001\u5e93\u52a0\u8f7d</p> <pre><code>title: linux\u548cwindows\u4e0b\u9759\u6001\u5e93\u52a8\u6001\u5e93\u540e\u7f00\n- windows\uff1a\n  - \u9759\u6001\u5e93:xxx.lib\n  - \u52a8\u6001\u5e93:xxx.dll\n- Linux:Linux\u4e0a\u5e93\u547d\u540d\u683c\u5f0f,\u4ee5lib\u8d77\u59cb\uff0cxxx\u8868\u793a\u5e93\u540d\uff0c.a\u7ed3\u5c3e\u662f\u9759\u6001\u5e93\uff0c.so\u7ed3\u5c3e\u662f\u52a8\u6001\u5e93\n  - \u9759\u6001\u5e93:libxxx.a(.a\u4ee3\u8868achieve)\n  - \u52a8\u6001\u5e93:libxxx.so(.so\u4ee3\u8868share object)\n</code></pre> <pre><code>title: windows\u4e0b\u751f\u6210dll\u65f6\u4f1a\u9644\u5e26lib\n\u5728\u751f\u6210\u52a8\u6001\u5e93\u65f6\u4e5f\u4f1a\u751f\u6210\u4e00\u4e2alib\u6587\u4ef6\uff0c\u4f46\u8fd9\u4e2alib\u6587\u4ef6\u4e0e\u9759\u6001\u5e93lib\u6587\u4ef6\u5185\u5bb9\u662f\u4e0d\u4e00\u6837\u7684\u3002\u6b64\u65f6\u7684lib\u6587\u4ef6\u79f0\u5bfc*\u52a8\u6001\u5e93\u5165\u5e93*,\u4e3b\u8981\u542b\u52a8\u52a8\u6001\u5e93\u63a5\u53e3\u5165\u53e3\u7b49\u4fe1\u606f\uff0c\u800c\u51fd\u6570\u4e3b\u8981\u5b9e\u73b0\u8fd8\u662f\u5728\u52a8\u6001\u5e93dll\u6587\u4ef6\u4e2d\u3002\u800c\u9759\u6001\u5e93lib\u7c7b\u4f3c\u4e8e\u5c06\u53ef\u6267\u884c\u7a0b\u5e8f\u6253\u5305\uff0c\u91cc\u9762\u662f\u542b\u6709\u5b8c\u5b8c\u6574\u6574\u7684\u5b9e\u73b0\u3002\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%8A%A8%E6%80%81%E5%BA%93%E5%92%8C%E9%9D%99%E6%80%81%E5%BA%93/#11","title":"1.1 \u52a8\u6001\u5e93\u9759\u6001\u52a0\u8f7d","text":"<p>\u7279\u70b9\uff1a\u4f7f\u7528lib\u548cdll,\u4e0d\u4f7f\u7528\u5e93\u51fd\u6570\u8c03\u7528dll\u6765\u5bfc\u5165\u63a5\u53e3\u5b9e\u73b0\u3002</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%8A%A8%E6%80%81%E5%BA%93%E5%92%8C%E9%9D%99%E6%80%81%E5%BA%93/#111-dlllib","title":"1.1.1 \u7b2c\u4e00\u6b65\uff1a\u751f\u6210dll\u3001lib","text":"<ol> <li>\u65b0\u5efavs\u9879\u76ee</li> <li>\u6dfb\u52a0.h .cpp\u6587\u4ef6</li> <li>\u8bbe\u7f6evs\u9879\u76ee\u5c5e\u6027</li> <li>\u66f4\u6539\u914d\u7f6e\u5c5e\u6027\u4e3a\u52a8\u6001\u6001\u5e93\uff0c\u9009\u62e9\uff0c\u9879\u76ee-&gt;\u5c5e\u6027-&gt;\u5e38\u89c4-&gt;\u914d\u7f6e\u7c7b\u578b-&gt;\u52a8\u6001\u5e93(dll)</li> <li>\u6dfb\u52a0\u7f16\u8bd1\u5b8f\uff0c\u9009\u62e9\uff0c\u201c\u9879\u76ee-&gt;\u5c5e\u6027-&gt;C/C++ -&gt;\u9884\u5904\u7406\u5668-&gt;\u9884\u5904\u7406\u5668\u5b9a\u4e49\u201d\u4e2d\u6dfb\u52a0 APIEXPORT \u5b8f</li> <li> <p>\u751f\u6210\u89e3\u51b3\u65b9\u6848</p> </li> <li> <p>add.h\u6587\u4ef6\u5185\u5bb9</p> </li> </ol> <pre><code>#pragma once\n\n#ifdef APIEXPORT\n#define EXTERN_API extern \"C\" __declspec(dllexport)\n#else\n#define EXTERN_API extern \"C\" __declspec(dllimport)\n#endif\n\nEXTERN_API int add(int elm1, int elm2);\n</code></pre> <ul> <li>add.cpp\u6587\u4ef6\u5185\u5bb9</li> </ul> <pre><code>#include \"add.h\"\n\nint add(int elm1, int elm2)\n{\nreturn elm1+ elm2;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%8A%A8%E6%80%81%E5%BA%93%E5%92%8C%E9%9D%99%E6%80%81%E5%BA%93/#112-dlllib","title":"1.1.2 \u7b2c\u4e8c\u6b65\uff1a\u52a0\u8f7ddll\u3001lib","text":"<ol> <li>\u65b0\u5efavs\u9879\u76ee</li> <li>\u6dfb\u52a0\u4e3b\u7a0b\u5e8f\u5165\u53e3\u51fd\u6570.cpp\u6587\u4ef6(\u5305\u542bmain\u51fd\u6570\u7684\u6e90\u6587\u4ef6)</li> <li>\u6dfb\u52a0\u7b2c\u4e00\u6b65\u751f\u6210dll\u4e2d\u7684.h\u6587\u4ef6.dll\u6587\u4ef6.lib\u6587\u4ef6</li> <li>.h .lib\u53ef\u968f\u610f\u653e\u7f6e\uff0c\u4f7f\u7528\u65f6\uff0c\u6307\u5b9a\u6b63\u786e\u7684\u8def\u5f84\u5373\u53ef</li> <li> <p>\u653e\u7f6e.dll\u6587\u4ef6\u5728\u548c.exe\u6587\u4ef6\u540c\u4e00\u76ee\u5f55\u4e0b</p> </li> <li> <p>main.cpp\u6587\u4ef6\u5185\u5bb9</p> </li> </ol> <pre><code>//\u52a8\u6001\u5e93\u9759\u6001\u52a0\u8f7d\n#include &lt;iostream&gt;\n#include \"add.h\"//\u5305\u542b\u5934\u6587\u4ef6\n#pragma comment(lib,\"../Debug/libMathFunctions.lib\")//\u6307\u5b9a.lib\u6587\u4ef6\u7684\u4f4d\u7f6e\nint main()\n{\nstd::cout&lt;&lt;add(1, 2);\nreturn 0;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%8A%A8%E6%80%81%E5%BA%93%E5%92%8C%E9%9D%99%E6%80%81%E5%BA%93/#12","title":"1.2 \u52a8\u6001\u5e93\u52a8\u6001\u52a0\u8f7d","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%8A%A8%E6%80%81%E5%BA%93%E5%92%8C%E9%9D%99%E6%80%81%E5%BA%93/#121-dlllib","title":"1.2.1 \u7b2c\u4e00\u6b65\uff1a\u751f\u6210dll\u3001lib","text":"<p>\u6b64\u6b65\u9aa4\u53c2\u8003\u52a8\u6001\u5e93\u9759\u6001\u52a0\u8f7d\u4e2d\u7b2c\u4e00\u6b65\uff1a\u751f\u6210dll\u3001lib</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%8A%A8%E6%80%81%E5%BA%93%E5%92%8C%E9%9D%99%E6%80%81%E5%BA%93/#122-dll","title":"1.2.2 \u7b2c\u4e8c\u6b65\uff1a\u52a0\u8f7ddll","text":"<ol> <li>\u65b0\u5efavs\u9879\u76ee</li> <li> <p>\u6dfb\u52a0\u4e3b\u7a0b\u5e8f\u5165\u53e3\u51fd\u6570.cpp\u6587\u4ef6(\u5305\u542bmain\u51fd\u6570\u7684\u6e90\u6587\u4ef6)</p> <ol> <li>\u4f7f\u7528Windows\u5e93\u51fd\u6570\u52a0\u8f7ddll</li> <li>LoadLibraryA \u52a0\u8f7ddll</li> <li>GetProcAddress \u83b7\u53d6\u51fd\u6570\u5730\u5740</li> <li>FreeLibrary \u91ca\u653e\u53e5\u67c4</li> </ol> </li> <li> <p>main.cpp\u6587\u4ef6\u5185\u5bb9</p> </li> </ol> <pre><code>//\u52a8\u6001\u5e93\u52a8\u6001\u52a0\u8f7d\n#include &lt;iostream&gt;\n#include &lt;Windows.h&gt;\nint main()\n{\nHINSTANCE h = LoadLibraryA(\"libMathFunctions.dll\");//\u7b2c\u4e00\u6b65\ntypedef int(*FunPtr)(int a, int b);//\u5b9a\u4e49\u51fd\u6570\u6307\u9488\nif (h == NULL)\n{\nFreeLibrary(h);\nprintf(\"load lib error\\n\");\n}\nelse\n{\nFunPtr funPtr = (FunPtr)GetProcAddress(h, \"add\");//\u7b2c\u4e8c\u6b65\nif (funPtr != NULL)\n{\nint result = funPtr(8, 3);\nprintf(\"8 + 3 =%d\\n\", result);\n}\nelse\n{\nprintf(\"get process error\\n\");\nprintf(\"%d\", GetLastError());\n}\nFreeLibrary(h);//\u7b2c\u4e09\u6b65\n}\nreturn 0;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%8A%A8%E6%80%81%E5%BA%93%E5%92%8C%E9%9D%99%E6%80%81%E5%BA%93/#13","title":"1.3 \u9759\u6001\u5e93\u52a0\u8f7d","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%8A%A8%E6%80%81%E5%BA%93%E5%92%8C%E9%9D%99%E6%80%81%E5%BA%93/#131-lib","title":"1.3.1 \u7b2c\u4e00\u6b65\uff1a\u751f\u6210lib","text":"<ol> <li>\u65b0\u5efavs\u9879\u76ee</li> <li>\u6dfb\u52a0.h .cpp\u6587\u4ef6</li> <li>\u8bbe\u7f6evs\u9879\u76ee\u5c5e\u6027</li> <li>\u66f4\u6539\u914d\u7f6e\u5c5e\u6027\u4e3a\u52a8\u6001\u6001\u5e93\uff0c\u9009\u62e9\uff0c\u9879\u76ee-&gt;\u5c5e\u6027-&gt;\u5e38\u89c4-&gt;\u914d\u7f6e\u7c7b\u578b-&gt;\u9759\u6001\u5e93(lib)</li> <li> <p>\u751f\u6210\u89e3\u51b3\u65b9\u6848</p> </li> <li> <p>add.h\u6587\u4ef6</p> </li> </ol> <pre><code>#pragma once\nint add(int elm1, int elm2);\n</code></pre> <ul> <li>add.cpp\u6587\u4ef6</li> </ul> <pre><code>#include \"add.h\"\nint add(int elm1, int elm2)\n{\nreturn elm1 + elm2;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%8A%A8%E6%80%81%E5%BA%93%E5%92%8C%E9%9D%99%E6%80%81%E5%BA%93/#132-lib","title":"1.3.2 \u7b2c\u4e8c\u6b65\uff1a\u52a0\u8f7dlib","text":"<ol> <li>\u65b0\u5efavs\u9879\u76ee</li> <li>\u6dfb\u52a0\u4e3b\u7a0b\u5e8f\u5165\u53e3\u51fd\u6570.cpp\u6587\u4ef6(\u5305\u542bmain\u51fd\u6570\u7684\u6e90\u6587\u4ef6)</li> <li>\u6dfb\u52a0\u7b2c\u4e00\u6b65\u751f\u6210lib\u4e2d\u7684.lib\u6587\u4ef6.h\u6587\u4ef6</li> <li>.lib .h\u6587\u4ef6\u53ef\u968f\u610f\u653e\u7f6e\uff0c\u4f7f\u7528\u65f6\uff0c\u6307\u5b9a\u6b63\u786e\u7684\u8def\u5f84\u5373\u53ef</li> </ol> <p>main.cpp\u6587\u4ef6</p> <pre><code>//\u9759\u6001\u5e93\u52a0\u8f7d\n#include &lt;iostream&gt;\n#include \"math/add.h\"\n#pragma comment(lib,\"../Debug/libMathFunctions.lib\")\nint main()\n{\nstd::cout &lt;&lt; add(1, 2);\nreturn 0;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%8A%A8%E6%80%81%E5%BA%93%E5%92%8C%E9%9D%99%E6%80%81%E5%BA%93/#133","title":"1.3.3 \u6ce8\u610f\u4e8b\u9879","text":"<ol> <li>\u52a8\u6001\u5e93\u9700\u8981\u4f7f\u7528__declspec(dllexport)\u5bfc\u51fa\u548c __declspec(dllimport)\u52a0\u8f7d</li> <li>\u9759\u6001\u5e93\u4e0d\u9700\u8981__declspec(dllexport)\u548c __declspec(dllimport)</li> </ol>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%AE%8F/","title":"\u5b8f","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%AE%8F/#1-object-like-macro","title":"1 \u5b8f\u5bf9\u8c61 (object-like-macro)","text":"<ul> <li>\u4f7f\u7528\u573a\u666f\uff1a</li> <li>\u5b8f\u5bf9\u8c61\u5e38\u7528\u4e8e\u5b9a\u4e49\u5e38\u91cf\u548c\u7c7b\u578b\u522b\u540d</li> <li>\u5b8f\u51fd\u6570\u4e5f\u80fd\u5b9a\u4e49\u4e0d\u5e26\u53c2\u6570\u7684\u51fd\u6570\uff0c\u7ed3\u6784 (\u4f46\u8fd9\u610f\u4e49\u4e0d\u5927)</li> </ul> <pre><code>#define PI 3.14\n#define FLOAT_64 double\n#define CLASS_B class B{};\nCLASS_B\n#undef CLASS_B\nint main(){\nB b;\nFLOAT_64 f64=PI;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%AE%8F/#2-function-like-macro","title":"2 \u5b8f\u51fd\u6570 (Function-like-macro)","text":"<ul> <li>\u4f7f\u7528\u573a\u666f\uff1a</li> <li>\u5b8f\u51fd\u6570\u5e38\u7528\u4e8e\u5b9a\u4e49\u8868\u8fbe\u5f0f</li> <li>\u5b8f\u51fd\u6570\u4e5f\u53ef\u5b9a\u4e49\u5e26\u53c2\u6570\u51fd\u6570\uff0c\u751a\u81f3\u7528\u6765\u5b9a\u4e49\u6a21\u677f\u7ed3\u6784\u4f53</li> </ul> <pre><code>//\u5b8f\u51fd\u6570\u5b9a\u4e49\u8868\u8fbe\u5f0f\n#define EQUAL(a,b) ((a)==(b))\n//\u5b8f\u51fd\u6570\u5b9a\u4e49\u6a21\u677f\u7c7b\n#define CLASS_A(X) template&lt;class T=X&gt; \\\nclass A{\\\nusing VALUE_TYPE=T;\\\npublic:\\\nVALUE_TYPE value;\\\n};\nCLASS_A(int)\n#undef CLASS_A\n\nint main(){\nA&lt;&gt; as1{2};\nA&lt;double&gt; as2{ 1.1 };\nEQUAL(1,2);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%AE%8F/#3","title":"3 \u53ef\u53d8\u51fd\u6570\u5b8f","text":"<ul> <li>\u53c2\u8003</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%AE%8F/#31-__va_args__","title":"3.1 \u4f7f\u7528__VA_ARGS__ \u5b8f","text":"<ul> <li>\u53ef\u53d8\u53c2\u6570\u8868\u793a\uff0c\u6709 2 \u79cd\u65b9\u5f0f\uff0c\u5206\u4e3a\u65e0\u540d\u3001\u522b\u540d\uff1a<ul> <li>\u65e0\u540d\u53ef\u53d8\u53c2\u6570\uff0c\u7528 <code>...</code> \u8868\u793a\uff0c\u5982: <code>#define debug(...) printf(__VA_ARGS__)</code></li> <li>\u53ef\u53d8\u53c2\u6570\u522b\u540d\uff0c\u5982\uff1a<code>#define debug(args...) printf(args)</code></li> </ul> </li> <li>\u53ef\u53d8\u53c2\u6570\u5c55\u5f00\uff0c\u4e5f\u6309\u65e0\u540d\u3001\u522b\u540d\u6765\u533a\u5206\uff1a<ul> <li>\u65e0\u540d\u53ef\u53d8\u53c2\u6570\u5c55\u5f00\uff0c\u7528 <code>__VA_ARGS__</code> \u5c55\u5f00\u3002\uff08\u793a\u4f8b\u89c1\u4e0a\u9762\uff09</li> <li>\u53ef\u53d8\u53c2\u6570\u522b\u540d, \u76f4\u63a5\u4f7f\u7528\u53c2\u6570\u522b\u540d\u5373\u53ef\u3002\uff08\u793a\u4f8b\u89c1\u4e0a\u9762\uff09</li> </ul> </li> <li>\u62fc\u63a5\u7b26 <code>##</code> \u89e3\u51b3\u53ef\u53d8\u53c2\u6570\u65e0\u53c2\u4f20\u5165\uff0c\u53ef\u53d8\u53c2\u6570\u53c2\u6570\u524d\u9017\u53f7 <code>,</code> \u5bfc\u81f4\u62a5\u9519\u95ee\u9898\uff0c\u5982\uff1a</li> </ul> <pre><code>#include &lt;stdio.h&gt;\n// \u6ca1\u6709##arg\uff0c\u5f53\u4f7f\u7528debug(\"hello, world\");\u65f6\uff0c\u4f1a\u5c55\u5f00\u4e3aprintf(\"hello, world\",);\u5bfc\u81f4\u62a5\u9519\n#define debug(format, args...) printf(format, ##args)\nint main(void)\n{\nint year = 2018\uff1b\ndebug(\"hello, world\");  //\u53ea\u6709format\u53c2\u6570\uff0c\u6ca1\u6709args\u53ef\u53d8\u53c2\u6570\n}\n</code></pre> <ul> <li>\u793a\u4f8b\uff1a\u5229\u7528\u5b8f\u51fd\u6570\u5904\u7406 jni \u79cd C \u548c C++\u76f8\u540c\u63a5\u53e3\u4e0d\u540c\u8c03\u7528\u89c4\u5219\u95ee\u9898 </li> </ul> <pre><code>#ifdef __cplusplus\n#define JNIEnv_FUNCTION_ADAPTER(fun, env, args...) env-&gt;fun(args);\n#else\n#define JNIEnv_FUNCTION_ADAPTER(fun, env, args...) (*env)-&gt;fun(env, ##args);\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%AE%8F/#4-stringizing","title":"4 \u5b57\u7b26\u4e32\u5316 (Stringizing)","text":"<ul> <li>\u6ce8\u610f\u4e8b\u9879\uff1a</li> <li>\u5f53\u5b8f\u4f7f\u7528 <code>#</code> \u65f6\uff0c\u4e0d\u80fd\u5c06\u5b8f\u5c55\u5f00\uff0c\u5982\u4e0b\u4f8b\u4e2d <code>str(foo)</code> \u4e0d\u4f1a\u5c55\u5f00\u5b8f <code>foo</code>\uff0c\u56e0\u4e3a <code>#</code> \u4f1a\u76f4\u63a5\u5c06 <code>foo</code> \u5b57\u7b26\u4e32\u5316\u3002\u5f53\u8fd9\u79cd\u60c5\u51b5\u65f6\uff0c\u53ef\u4ee5\u501f\u52a9\u53e6\u4e00\u5c42\u5b8f (\u4e0d\u542b <code>#</code>) \u6765\u5c55\u5f00\uff0c\u5982\u4e0b\u4f8b\u4e2d <code>xstr</code> \u5b8f\u53ef\u4ee5\u5148\u5c06 <code>foo</code> \u5c55\u5f00\u3002</li> </ul> <pre><code>#define xstr(s) str(s)\n#define str(s) #s\n#define foo 4\nstr (foo)\n\u2192 \"foo\"\nxstr (foo)\n\u2192 xstr (4)\n\u2192 str (4)\n\u2192 \"4\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%AE%8F/#5-concatenation","title":"5 \u62fc\u63a5 (Concatenation)","text":"<ul> <li>\u6ce8\u610f\u4e8b\u9879</li> <li><code>##</code> \u5148\u8d77\u5230\u5206\u5272\u6807\u8bc6\u7684\u4f5c\u7528\uff0c\u518d\u62fc\u63a5\u5176\u5b83\u7b26\u53f7\uff0c\u5982\u4e0b\u4f8b\u4e2d <code>CON_A2</code> \u628a <code>NAME_</code> \u5f53\u6210\u56fa\u5b9a\u7f16\u7801\uff0c\u800c <code>##NAME</code> \u4f1a\u88ab\u8bc6\u522b\u4e3a <code>a</code> \u4e14\u548c\u524d\u9762 <code>NAME_</code> \u62fc\u63a5\u5728\u4e00\u8d77\uff0c\u8f6c\u6362\u4e3a <code>NAME_a</code></li> </ul> <pre><code>#define CON_A1(NAME) int NAME_NAME\n#define CON_A2(NAME) int NAME_##NAME\n#define CON_A3(NAME) int NAME\n#define CON_A4(NAME) int NAME##_NAME\n#define CON_A5(NAME) int NAME##_##NAME\n\nint main() {\nCON_A1(a);//-&gt;NAME_NAME\nCON_A2(a);//-&gt;NAME_a\nCON_A3(a);//-&gt;a\nCON_A4(a);//-&gt;a_NAME\nCON_A5(a);//-&gt;a_a\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%AE%8F/#6","title":"6 \u9884\u8bbe\u5b8f","text":"<ul> <li>Predefined-Macros</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%AE%8F/#7","title":"7 \u7528\u4e8e\u8c03\u8bd5\u65e5\u5fd7\u76f8\u5173\u5b8f","text":"<ul> <li><code>__FILE__</code> : \u663e\u793a\u5f53\u524d\u6587\u4ef6\u540d\uff0c\u5982 <code>/usr/local/include/myheader.h</code></li> <li><code>__LINE__</code> : \u663e\u793a\u6240\u5728\u884c\u53f7, \u5982 <code>100</code></li> <li><code>__FUNCTION__</code> \u6216 <code>__func__</code> : \u663e\u73b0\u6240\u5728\u51fd\u6570\u540d</li> <li><code>__DATE__</code> : \u663e\u793a\u5f53\u524d\u65f6\u671f\uff0c\u5982 <code>Feb 12 1996</code></li> <li><code>__TIME__</code> : \u663e\u793a\u5f53\u524d\u65f6\u95f4\uff0c\u5982 <code>23:59:01</code></li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%AE%8F/#71","title":"7.1 \u7248\u672c\u76f8\u5173\u5b8f","text":"<p><code>__cplusplus</code> : \u4f7f\u7528 c++\u7f16\u8bd1\u5668\uff0c\u5c31\u4f1a\u5b9a\u4e49\u8fd9\u4e2a\u5b8f\uff0c\u4e0d\u540c\u7248\u672c\u503c\u5982\u4e0b - 199711L(C++11 \u524d) - 201103L(C++11) - 201402L(C++14) - 201703L(C++17)\uff0c\u6216 - 202002L(C++20)     (\u5b8f\u5e38\u91cf)</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%AE%8F/#8","title":"8 \u4fee\u6539\u884c\u53f7\u6216\u6587\u4ef6\u540d","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>#line linenum filename</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;stdio.h&gt;\n\n#line 100 \"macro-new.c\" // \u66f4\u6539\u4e0b\u4e00\u884c\u7684\u884c\u53f7\u548c\u6e90\u6587\u4ef6\u540d\nint main()              // line 100\n{\nprintf(\"%d\\n\", __LINE__); // line 102\nprintf(\"%d\\n\", __LINE__); // line 103\nprintf(\"%s\\n\", __FILE__);\nreturn 0;\n}\n</code></pre> <ul> <li>\u8f93\u51fa</li> </ul> <pre><code>102\n103\nmacro-new.c\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%AE%8F/#8_1","title":"8 \u5b98\u65b9\u6587\u6863","text":"<ul> <li>gcc \u5b8f\u6587\u6863</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%AE%B9%E5%99%A8/","title":"\u5bb9\u5668","text":"<pre><code>\u4ee5\u4e0b2\u70b9\u80fd\u5426\u542f\u7528\uff0c\u5b8c\u5168\u7531\u7528\u6237\u5b9a\u4e49\u7684\u6570\u636e\u7ed3\u6784\u5b9e\u73b0\u5b8c\u6210\u5ea6\u51b3\u5b9a\u3002\n1. \u8981\u60f3\u8981*\u6df1\u62f7\u8d1d*\uff0c\u8bf7\u786e\u4fdd\u6570\u636e\u7ed3\u6784\u5df2\u5b9e\u73b0**\u62f7\u8d1d\u6784\u9020\u3001\u62f7\u8d1d\u8d4b\u503c**\u3002\n2. \u8981\u60f3\u4f7f\u7528*move*\u8bed\u53e5\uff0c\u8bf7\u786e\u4fdd\u6570\u636e\u7ed3\u6784\u5df2\u5b9e\u73b0**\u79fb\u52a8\u6784\u9020\u3001\u79fb\u52a8\u8d4b\u503c**\u3002\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%AE%B9%E5%99%A8/#1-span","title":"1 span","text":"<ul> <li>\u529f\u80fd\uff1a<code>span</code>\u80fd\u6307\u5411c\u6570\u7ec4\uff0carry\uff0cvector\u7c7b\u578b\u6570\u636e\uff0c\u662f\u4e00\u79cd\u5bf9\u539f\u6570\u636e\u7684\u89c6\u56fe\u8868\u793a\uff0c\u7c7b\u4f3c\u4e8e<code>string_view</code>\uff0c\u4e0e<code>string_view</code>\u4e0d\u540c\u7684\u662f\uff0c<code>span</code>\u80fd\u66f4\u6539\u6307\u5411\u7684\u6570\u636e\u7684\u503c\uff0c\u800c<code>string_view</code>\u53ea\u6709\u53ea\u8bfb\u7279\u6027\u3002</li> <li>\u6ce8\u610f\u4e8b\u9879\uff1a</li> <li><code>span</code>\u5927\u5c0f\u5728\u521d\u59cb\u5316\u65f6\u786e\u5b9a\uff0c\u52a8\u6001\u6539\u53d8\u6307\u5411\u5bb9\u5668\uff08vector\uff09\u5927\u5c0f\u4e0d\u4f1a\u4f5c\u7528\u5728<code>span</code>\u4e0a\uff0c\u4f46\u6570\u636e\u7684\u6539\u53d8\u4f1a\u5f71\u54cd<code>span</code>\uff0c\u56e0\u4e3a<code>span</code>\u901a\u8fc7\u6307\u9488\u6307\u5411\u5bb9\u5668</li> <li>\u5f53\u6307\u5b9a<code>span</code>\u5927\u5c0f\u65f6\uff0c\u4e00\u5b9a\u8981\u4e0e\u6307\u5411\u7684\u5bb9\u5668\u5927\u5c0f\u76f8\u540c\uff0c\u5426\u5219\u4f1a\u7f16\u8bd1\u62a5\u9519</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;span&gt;\n#include &lt;vector&gt;\n#include &lt;array&gt;\ntemplate&lt;typename T,size_t sz=std::dynamic_extent&gt;\nvoid print(const std::span&lt;T, sz&gt;&amp; s)\n{\nfor (auto it=s.begin();it!=s.end();++it)\n{\nstd::cout &lt;&lt; *it &lt;&lt; \" \";\n}\nstd::cout&lt;&lt;std::endl;\n}\nint main()\n{\n//span\u521d\u59cb\u5316\nstd::vector&lt;int&gt; v_i = { 1,2,3 };\nint carr_i[]= { 1,2,3 };\nstd::array&lt;int,3&gt; arr_i= { 1,2,3 };\nstd::span&lt;int&gt; sp_v = v_i;\nstd::span&lt;int, 3&gt; sp_carr = carr_i;\nstd::span&lt;int, 3&gt; sp_arr = arr_i;\n//\u5207\u5206\u5b50\u89c6\u56fe\nprint(sp_v.subspan(1, 1));\nprint(sp_v.first(2));\nprint(sp_v.last(2));\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%B1%9E%E6%80%A7/","title":"C++\u5c5e\u6027","text":"<pre><code>- gcc \u548c clang \u7f16\u8bd1\u5668\u4e0d\u4ec5\u652f\u6301`__attribute__ GNU\u6269\u5c55\u5c5e\u6027\uff0c\u5404\u79cd\u7f16\u8bd1\u5668\u53c8\u72ec\u81ea\u652f\u6301\u7684\u6269\u5c55\u5c5e\u6027\u3002\n- GCC \u548c Clang \u652f\u6301\u628a\u76f8\u5f53\u4e00\u90e8\u5206 __attribute__ \u8868\u793a\u7684\u5c5e\u6027\u6539\u5199\u6210 [[]] \uff0c\u4f46 MSVC \u51e0\u4e4e\u4e0d\u652f\u6301\u628a __declspec \u6539\u5199\u6210 [[]] \u3002\n- `__attribute__ ` \uff1a\u662f GNU \u6269\u5c55\u7684\u5c5e\u6027\u8bed\u6cd5\u5143\u7d20\uff0c\u6709\u4e9b\u7f16\u8bd1\u5668\u53ef\u80fd\u4f1a\u628a\u5b83\u5f53\u6210\u666e\u901a\u7684\u6807\u8bc6\u7b26\uff0c\u4ea7\u751f\u5404\u79cd\u610f\u60f3\u4e0d\u5230\u7684\u9519\u8bef\u3002gcc \u548c clang \u7f16\u8bd1\u5668\u652f\u6301\u3002\n- ` __declspec` : windows \u5e73\u53f0 MSVC \u7f16\u8bd1\u5668\u5bf9\u5c5e\u6027\u7684\u6269\u5c55\u3002\n- `[[\u5c5e\u6027]]` \uff1a C++11 \u4e2d\u52a0\u5165\u4e86\u6807\u51c6\u5316\u7684\u5c5e\u6027\u5199\u6cd5 [[]] \uff0c\u8bed\u6cd5\u4e0a\u5927\u81f4\u53ef\u4ee5\u51fa\u73b0\u5728\u4e0a\u9762\u7684\u6269\u5c55\u5c5e\u6027\u80fd\u51fa\u73b0\u7684\u5730\u65b9\u3002 C++17 \u5f00\u59cb\u6807\u51c6\u8981\u6c42\u5ffd\u7565\u4e0d\u652f\u6301\u7684\u5c5e\u6027\u3002 C2x \u5728\u6700\u8fd1\u5f15\u5165\u4e86 [[]] \u548c\u4e00\u4e9b C++ \u7684\u6807\u51c6\u5c5e\u6027\u3002\n</code></pre> <ul> <li>\u53c2\u8003</li> <li>\u529f\u80fd\uff1a\u4e3a\u7c7b\u578b\u3001\u5bf9\u8c61\u3001\u4ee3\u7801\u7b49\u5f15\u5165\u7531\u5b9e\u73b0\u5b9a\u4e49\u7684\u5c5e\u6027\uff0c\u8fd9\u4e9b\u5c5e\u6027\u626e\u6f14\u8fd9\u9650\u5236\u6216\u8bf4\u660e\u88ab\u4fee\u9970\u7269\u7684\u4f5c\u7528\u3002\u5c5e\u6027\u4e3a\u5404\u79cd\u7531\u5b9e\u73b0\u5b9a\u4e49\u7684\u8bed\u8a00\u6269\u5c55\uff08\u4f8b\u5982 GNU \u4e0e IBM \u7684\u8bed\u8a00\u6269\u5c55<code>__attribute__((...))</code>\uff0c\u5fae\u8f6f\u7684\u8bed\u8a00\u6269\u5c55<code>__declspec()</code> \u7b49\uff09\u63d0\u4f9b\u4e86\u7edf\u4e00\u5316\u7684\u8bed\u6cd5</li> <li>\u8bed\u6cd5\uff1a</li> <li><code>[[ \u5c5e\u6027\u5217\u8868 ]]</code>        (C++11 \u8d77)</li> <li><code>[[ using \u5c5e\u6027\u547d\u540d\u7a7a\u95f4 : \u5c5e\u6027\u5217\u8868 ]]</code>     (C++17 \u8d77)</li> <li>\u8bed\u6cd5\u793a\u4f8b</li> <li>1) \u7b80\u5355\u5c5e\u6027\uff0c\u4f8b\u5982 <code>[[noreturn]]</code></li> <li>2) \u6709\u547d\u540d\u7a7a\u95f4\u7684\u5c5e\u6027\uff0c\u4f8b\u5982 <code>[[gnu::unused]]</code></li> <li>3) \u6709\u5b9e\u53c2\u7684\u5c5e\u6027\uff0c\u4f8b\u5982 <code>[[deprecated(\"because\")]]</code></li> <li>4) \u65e2\u6709\u547d\u540d\u7a7a\u95f4\u53c8\u6709\u5b9e\u53c2\u5217\u8868\u7684\u5c5e\u6027</li> <li>\u89c4\u5219</li> <li>\u89c4\u52191\uff1a\u82e5<code>using: namespace</code>\u51fa\u73b0\u5728\u5c5e\u6027\u5217\u8868\u5f00\u7aef\uff0c\u5219\u5c5e\u6027\u5217\u8868\u4e2d\u7684\u5176\u4ed6\u5c5e\u6027\u5747\u4e0d\u5f97\u6307\u5b9a\u547d\u540d\u7a7a\u95f4\uff1a\u7531<code>using</code>\u6240\u6307\u5b9a\u7684\u547d\u540d\u7a7a\u95f4\u4f1a\u5e94\u7528\u5230\u6240\u6709\u8fd9\u4e9b\u5c5e\u6027</li> <li>\u89c4\u52192\uff1a\u6240\u6709\u5b9e\u73b0\u6240\u672a\u77e5\u7684\u5c5e\u6027\u5747\u88ab\u5ffd\u7565\uff0c\u4e14\u4e0d\u4ea7\u751f\u9519\u8bef\u3002 (C++17 \u8d77)</li> <li>\u793a\u4f8b</li> </ul> <pre><code>// \u89c4\u52192\uff1a\u4ee5\u4e0b\u5c5e\u6027\u4e0d\u662f\u6807\u51c6\u4e2d\u5b9a\u4e49\u7684\uff0c\u4e14\u672a\u77e5\uff0c\u5c06\u5ffd\u7565\u5c5e\u6027\u58f0\u660e\n[[using CC: opt(1), debug]] // \u540c [[CC::opt(1), CC::debug]]\n// \u89c4\u52191\uff1a\u4e0d\u9075\u5faa\u89c4\u52191\n[[using CC: CC::opt(1)]] // \u9519\u8bef\uff1a\u4f7f\u7528\u524d\u7f00\u7684\u5c5e\u6027\u4e0e\u4f5c\u7528\u57df\u5c5e\u6027\u6807\u8bb0\u4e00\u8d77\u4f7f\u7528\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%B1%9E%E6%80%A7/#1","title":"1 \u73b0\u6709\u6807\u51c6\u5c5e\u6027\u5217\u8868","text":"attribute \u529f\u80fd <code>[[noreturn]]</code>(C++11) \u6307\u793a\u51fd\u6570\u4e0d\u8fd4\u56de <code>[[carries_dependency]]</code>(C++11) \u6307\u793a\u91ca\u653e\u6d88\u8d39 std::memory_order \u4e2d\u7684\u4f9d\u8d56\u94fe\u4f20\u5165\u548c\u4f20\u51fa\u8be5\u51fd\u6570\u3002 <code>[[deprecated]]</code>(C++14)\u3001<code>[[deprecated(\"\u539f\u56e0\")]]</code>(C++14) \u6307\u793a\u5141\u8bb8\u4f7f\u7528\u58f0\u660e\u6709\u6b64\u5c5e\u6027\u7684\u540d\u79f0\u6216\u5b9e\u4f53\uff0c\u4f46\u56e0 \u539f\u56e0 \u800c\u4e0d\u9f13\u52b1\u4f7f\u7528\u3002 <code>[[fallthrough]]</code>(C++17) \u6307\u793a\u4ece\u524d\u4e00 case \u6807\u53f7\u76f4\u843d\u662f\u6709\u610f\u7684\uff0c\u800c\u5728\u53d1\u751f\u76f4\u843d\u65f6\u7ed9\u51fa\u8b66\u544a\u7684\u7f16\u8bd1\u5668\u4e0d\u5e94\u8be5\u4e3a\u6b64\u8bca\u65ad\u3002 <code>[[nodiscard]]</code>(C++17)\u3001<code>[[nodiscard(\"\u539f\u56e0\")]]</code>(C++20) \u9f13\u52b1\u7f16\u8bd1\u5668\u5728\u8fd4\u56de\u503c\u88ab\u820d\u5f03\u65f6\u53d1\u5e03\u8b66\u544a\u3002 <code>[[maybe_unused]]</code>(C++17) \u538b\u5236\u7f16\u8bd1\u5668\u5728\u672a\u4f7f\u7528\u5b9e\u4f53\u4e0a\u7684\u8b66\u544a\uff0c\u82e5\u5b58\u5728\u3002 <code>[[likely]]</code>(C++20) <code>[[unlikely]]</code>(C++20) \u6307\u793a\u7f16\u8bd1\u5668\u5e94\u8be5\u9488\u5bf9\u901a\u8fc7\u67d0\u8bed\u53e5\u7684\u6267\u884c\u8def\u5f84\u6bd4\u4efb\u4f55\u5176\u4ed6\u6267\u884c\u8def\u5f84\u66f4\u53ef\u80fd\u6216\u66f4\u4e0d\u53ef\u80fd\u7684\u60c5\u51b5\u8fdb\u884c\u4f18\u5316\u3002 <code>[[no_unique_address]]</code>(C++20) \u6307\u793a\u975e\u9759\u6001\u6570\u636e\u6210\u5458\u4e0d\u9700\u8981\u62e5\u6709\u4e0d\u540c\u4e8e\u5176\u7c7b\u7684\u6240\u6709\u5176\u4ed6\u975e\u9759\u6001\u6570\u636e\u6210\u5458\u7684\u5730\u5740\u3002 <code>[[optimize_for_synchronized]]</code>(TM TS) \u6307\u793a\u5e94\u8be5\u9488\u5bf9\u6765\u81ea synchronized \u8bed\u53e5\u7684\u8c03\u7528\u6765\u4f18\u5316\u8be5\u51fd\u6570\u5b9a\u4e49"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%B1%9E%E6%80%A7/#2-c11","title":"2 C++11","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%B1%9E%E6%80%A7/#21-noreturn","title":"2.1 noreturn","text":"<ul> <li>\u529f\u80fd\uff1a\u6307\u793a\u51fd\u6570\u4e0d\u8fd4\u56de\u3002</li> <li>\u89c4\u5219\uff1a</li> <li>\u89c4\u52191\uff1a\u6b64\u5c5e\u6027\u4ec5\u5e94\u7528\u5230\u51fd\u6570\u58f0\u660e\u4e2d\u6b63\u5728\u58f0\u660e\u7684\u51fd\u6570\u540d\u3002\u82e5\u62e5\u6709\u6b64\u5c5e\u6027\u7684\u51fd\u6570\u5b9e\u9645\u4e0a\u8fd4\u56de\uff0c\u5219\u884c\u4e3a\u672a\u5b9a\u4e49\u3002</li> <li>\u89c4\u5219 2\uff1a\u82e5\u51fd\u6570\u7684\u4efb\u4f55\u58f0\u660e\u6307\u5b9a\u6b64\u5c5e\u6027\uff0c\u5219\u5176\u9996\u4e2a\u58f0\u660e\u5fc5\u987b\u6307\u5b9a\u5b83\u3002\u82e5\u51fd\u6570\u5728\u4e00\u4e2a\u7ffb\u8bd1\u5355\u5143\u4e2d\u58f0\u660e\u4e3a\u5e26 <code>[[noreturn]]</code> \u5c5e\u6027\uff0c\u800c\u540c\u4e00\u51fd\u6570\u5728\u53e6\u4e00\u7ffb\u8bd1\u5355\u5143\u4e2d\u58f0\u660e\u4e3a\u4e0d\u5e26 <code>[[noreturn]]</code> \u5c5e\u6027\uff0c\u5219\u7a0b\u5e8f\u975e\u826f\u6784\uff1b\u4e0d\u8981\u6c42\u8bca\u65ad\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code>[[ noreturn ]] void f() {\nthrow \"error\";\n// OK\n}\nvoid q [[ noreturn ]] (int i) {\n// \u82e5\u4ee5 &lt;= 0 \u7684\u53c2\u6570\u8c03\u7528\u5219\u884c\u4e3a\u672a\u5b9a\u4e49\nif (i &gt; 0) {\nthrow \"positive\";\n}\n}\n// void h() [[noreturn]]; // \u9519\u8bef\uff1a\u5c5e\u6027\u5e94\u7528\u5230 h \u7684\u51fd\u6570\u7c7b\u578b\uff0c\u800c\u975e h \u81ea\u8eab\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%B1%9E%E6%80%A7/#3-c14","title":"3 C++14","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%B1%9E%E6%80%A7/#4-c17","title":"4 C++17","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%B1%9E%E6%80%A7/#5-c20","title":"5 C++20","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%B1%9E%E6%80%A7/#51-no_unique_address","title":"5.1 no_unique_address","text":"<ul> <li>\u529f\u80fd\uff1a\u5141\u8bb8\u6b64\u6210\u5458\u4e0e\u5176\u7c7b\u7684\u5176\u4ed6\u975e\u9759\u6001\u6570\u636e\u6210\u5458\u6216\u57fa\u7c7b\u5b50\u5bf9\u8c61\u91cd\u53e0\u3002\u8fd9\u8868\u793a\u82e5\u8be5\u6210\u5458\u62e5\u6709\u7a7a\u7c7b\u578b\uff08\u4f8b\u5982\u65e0\u72b6\u6001\u5206\u914d\u5668\uff09\uff0c\u5219\u7f16\u8bd1\u5668\u53ef\u5c06\u5b83\u4f18\u5316\u4e3a\u4e0d\u5360\u7a7a\u95f4\uff0c\u6b63\u5982\u540c\u5047\u5982\u5b83\u662f\u7a7a\u57fa\u7c7b\u4e00\u6837\u3002\u82e5\u8be5\u6210\u5458\u975e\u7a7a\uff0c\u5219\u5176\u4e2d\u7684\u4efb\u4f55\u5c3e\u968f\u586b\u5145\u7a7a\u95f4\u4ea6\u53ef\u590d\u7528\u4e8e\u5b58\u50a8\u5176\u4ed6\u6570\u636e\u6210\u5458\u3002</li> <li>\u4f18\u70b9\uff1a\u538b\u7f29\u7c7b\u5927\u5c0f\uff0c\u964d\u4f4e\u5185\u5b58\u5360\u7528</li> <li>\u89c4\u5219</li> <li>\u89c4\u52191\uff1a\u7c7b\u4e2d\u5fc5\u987b\u6709\u4e00\u4e2a\u5b57\u8282\u7684\u5927\u5c0f</li> <li>\u89c4\u52192\uff1a\u76f8\u540c\u7c7b\u578b\u7684\u7a7a\u7c7b\u5bf9\u8c61\u4e0d\u80fd\u5171\u4eab\u540c\u4e00\u5730\u5740</li> </ul> <pre><code>#include&lt;iostream&gt;\nstruct Empty{\nvoid print(){std::cout&lt;&lt;\"hello\"&lt;&lt;std::endl;}\n};\nstruct Empty2{\nvoid print(){std::cout&lt;&lt;\"hello\"&lt;&lt;std::endl;}\n};\nstruct A{\nint i;\nEmpty t;\n};\nstruct B{\nint i;\n[[no_unique_address]] Empty t;\n};\nstruct C{\n[[no_unique_address]] Empty t;\n};\nstruct D{\nchar c;\n[[no_unique_address]] Empty t1,t2;\n};\nstruct E{\nchar c[2];\n[[no_unique_address]] Empty t1,t2;\n};\nstruct F{\nchar c;\n[[no_unique_address]] Empty t1;\n[[no_unique_address]] Empty2 t3;\n};\nint main() {\nusing namespace std;\ncout&lt;&lt;\"sizeof(Empty):\"&lt;&lt;sizeof(Empty)    /*\u7a7a\u7c7b\u5927\u5c0f\u4e3a1*/\n&lt;&lt;\" sizeof(A):\"&lt;&lt;sizeof(A)               /*4+1+3\uff08\u5185\u5b58\u5bf9\u9f50\uff09==8*/\n&lt;&lt;\" sizeof(B):\"&lt;&lt;sizeof(B)               /*no_unique_address\u58f0\u660e\u7684t\u4e0ei\u5171\u4eab\u5185\u5b58*/\n&lt;&lt;\" sizeof(C):\"&lt;&lt;sizeof(C)               /*\u89c4\u52191\uff1a\u4e0d\u9075\u5faa\u89c4\u52191\uff0c\u4e0d\u80fd\u5171\u4eab\uff0c\u7c7b\u5927\u5c0f==1*/\n&lt;&lt;\" sizeof(D):\"&lt;&lt;sizeof(D)               /*\u89c4\u52192\uff1a\u4e0d\u9075\u5faa\u89c4\u52192\uff0ct1\u3001t2\u76f8\u540c\u7c7b\u578b\uff0c\u4e0d\u80fd\u5171\u4eab\u540c\u4e00\u5730\u5740*/\n&lt;&lt;\" sizeof(E):\"&lt;&lt;sizeof(E)               /*\u89c4\u52192\uff1at1\u4e0ec[0]\u5171\u4eab\u5730\u5740\uff0ct2\u4e0ec[1]\u5171\u4eab\u5730\u5740\uff0c\u4f46\u6d4b\u8bd5\u53d1\u73b0\u7f16\u8bd1\u5668\uff0c\u6ca1\u6709\u4f18\u5316\u5171\u4eab\uff0c\u7406\u8bba\u5e94\u8be5==2\uff0c\u4f46\u5b9e\u9645==3*/\n&lt;&lt;\" sizeof(F):\"&lt;&lt;sizeof(F)&lt;&lt;endl;        /*\u89c4\u52192\uff1a\u9075\u5faa\u89c4\u52192*/\n}\n// \u8f93\u51fa\uff1asizeof(Empty):1 sizeof(A):8 sizeof(B):4 sizeof(C):1 sizeof(D):2 sizeof(E):3 sizeof(F):1\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%B1%9E%E6%80%A7/#52-likelyunlikely","title":"5.2 likely\u3001unlikely","text":"<ul> <li>\u529f\u80fd\uff1a\u6307\u793a\u7f16\u8bd1\u5668\u5bf9\u66f4\u53ef\u80fd\u53d1\u751f\uff08likely\uff09\u548c\u66f4\u4e0d\u53ef\u80fd\u53d1\u751f\uff08unlikely\uff09\u8fdb\u884c\u4f18\u5316\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\nint f1(int i)\n{\nif (i &lt; 0) [[unlikely]] {\nreturn 0;\n}\nreturn 1;\n}\nint f2(int i)\n{\nswitch(i) {\ncase 1: [[fallthrough]];\n[[likely]] case 2: return 1;\n}\nreturn 2;\n}\nint main()\n{\nstd::cout &lt;&lt; f1(-1) &lt;&lt; std::endl;\nstd::cout &lt;&lt; f2(1) &lt;&lt; std::endl;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%BC%82%E5%B8%B8/","title":"C++\u5f02\u5e38","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%BC%82%E5%B8%B8/#1-throw","title":"1 \u7528throw\u629b\u51fa\u5f02\u5e38","text":"<p>\u5728\u9700\u8981\u629b\u5f02\u5e38\u7684\u5730\u65b9\u4f7f\u7528throw - throw +\u57fa\u672c\u7c7b\u578b - throw +\u5bf9\u8c61\u6216\u6307\u9488</p> <pre><code>class badMesg\n{\npublic:\nvoid operator ()() {\ncout &lt;&lt; \"\u5f02\u5e38badMesg\" &lt;&lt; endl;\n}\n};\nbool fun(int val)\n{\nif (val == 0)\nthrow \"\u5f02\u5e380\";\nelse if (val == 1)\nthrow 1;\nelse if (val == 2)\nthrow badMesg();\nelse if (val == 3)\nthrow new badMesg();\nreturn true;\n\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%BC%82%E5%B8%B8/#2-try-catch","title":"2 \u7528try catch\u8bed\u53e5\u6355\u83b7\u5f02\u5e38","text":"<pre><code>int main(int argc, char* argv[])\n{\nvector&lt;int&gt; vi{ 0,1,2,3 };\nfor (auto&amp; elm : vi)\n{\ntry {\nbool b = fun(elm);\n}\ncatch (const char* m)\n{\ncout &lt;&lt; m &lt;&lt; endl;\n}\ncatch (int&amp; m)\n{\ncout &lt;&lt; m &lt;&lt; endl;;\n}\ncatch (badMesg &amp; m)\n{\nm();\n//m.operator();\n}\ncatch (badMesg * m)\n{\ncout &lt;&lt; \"\u6307\u9488:\";\n(*m)();\n//m-&gt;operator();\n}\n\n}\n}\n</code></pre> <p>\u4ee5\u4e0a\u4ee3\u7801\u6267\u884c\u6216\u6253\u5370\u51fa\u5982\u4e0b\u4fe1\u606f</p> <pre><code>\u5f02\u5e380\n1\n\u5f02\u5e38badMesg\n\u6307\u9488:\u5f02\u5e38badMesg\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E5%BC%82%E5%B8%B8/#3-exception","title":"3 \u7ee7\u627fexception\u7c7b\u5b9e\u73b0\u81ea\u5df1\u7684\u5f02\u5e38\u7c7b","text":"<ol> <li>\u7ee7\u627f<code>exception</code>\u7c7b</li> <li>\u91cd\u5199<code>what</code>\u65b9\u6cd5</li> </ol> <pre><code>class myException:public exception\n{\nconst char* what(){return \"\u629b\u51famyException\u5f02\u5e38\";}\n};\nbool fun(int val)\n{\nif (val == 0)\nthrow myException();\nelse if (val == 1)\nthrow new myException();\nreturn true;\n\n}\nint main(int argc, char* argv[])\n{\nvector&lt;int&gt; vi{ 0,1,2,3 };\nfor (auto&amp; elm : vi)\n{\ntry {\nbool b = fun(elm);\n}\ncatch (exception&amp; e)\n{\ncout &lt;&lt; e.what() &lt;&lt; endl;\n}\ncatch (exception* e)\n{\ncout &lt;&lt; e-&gt;what() &lt;&lt; endl;\n}\n}\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E5%BA%93/","title":"\u65f6\u95f4\u65e5\u671f\u5e93","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E5%BA%93/#1-c","title":"1 c\u98ce\u683c\u5e93","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E5%BA%93/#11-tmtime_tclock_ttimespec","title":"1.1 \u7c7b\u578b<code>tm</code>\u3001<code>time_t</code>\u3001<code>clock_t</code>\u3001<code>timespec</code>","text":"<ul> <li><code>tm</code>\u662f\u4e00\u4e2a\u7528\u4e8e\u4fdd\u5b58\u5e74\u3001\u6708\u3001\u65e5\u3001\u65f6\u3001\u5206\u3001\u79d2\u8fd9\u4e9b\u72ec\u7acb\u6570\u636e\u7684\u7ed3\u6784\u3002</li> </ul> <pre><code>struct tm\n{\nint tm_sec;   // seconds after the minute - [0, 60] including leap second\nint tm_min;   // minutes after the hour - [0, 59]\nint tm_hour;  // hours since midnight - [0, 23]\nint tm_mday;  // day of the month - [1, 31]\nint tm_mon;   // months since January - [0, 11]\nint tm_year;  // years since 1900\nint tm_wday;  // days since Sunday - [0, 6]\nint tm_yday;  // days since January 1 - [0, 365]\nint tm_isdst; // daylight savings time flag\n};\n</code></pre> <ul> <li><code>time_t</code>\u662f\u4e00\u4e2a\u8db3\u4ee5\u8868\u793a\u65f6\u95f4\uff08UNIX\u65f6\u95f4\uff0c\u6216\u79f0POSIX\u65f6\u95f4\uff09\u7684\u7b97\u672f\u7c7b\u578b\uff0c\u4ece\u7eaa\u5143\u65f6\u95f4\uff08UTC1970\u5e741\u67081\u65e50\u65f60\u52060\u79d2\uff09\u7b97\u8d77\u7f29\u8fdb\u8fc7\u7684\u65f6\u95f4\uff0c\u5355\u4f4ds</li> </ul> <pre><code>typedef long long time_t;\n</code></pre> <ul> <li><code>clock_t</code>\u662f\u4e00\u4e2a\u8db3\u4ee5\u8868\u793a\u5b9e\u73b0\u5b9a\u4e49\u8303\u56f4\u548c\u7cbe\u5ea6\u7684\u8fdb\u7a0b\u8fd0\u884c\u65f6\u95f4\u7684\u7b97\u672f\u7c7b\u578b</li> </ul> <pre><code>typedef long clock_t;\n</code></pre> <ul> <li><code>timespec</code>\u662f\u4e00\u4e2a\u4fdd\u6709\u65f6\u957f\u7684\u7ed3\u6784\u4f53\uff0c\u62c6\u5206\u6210\u79d2\u548c\u7eb3\u79d2</li> </ul> <pre><code>struct timespec\n{\ntime_t tv_sec;  // Seconds - &gt;= 0\nlong   tv_nsec; // Nanoseconds - [0, 999999999]\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E5%BA%93/#12","title":"1.2 \u65f6\u95f4\u64cd\u4f5c\u51fd\u6570","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E5%BA%93/#121-difftime","title":"1.2.1 difftime","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>double difftime( std::time_t time_end, std::time_t time_beg );</code></li> <li>\u529f\u80fd\uff1a\u8ba1\u7b972\u4e2a\u65f6\u95f4\u5dee\uff0c\u7ed3\u679c\u662fdouble\u7c7b\u578b\uff0c\u4ee5\u79d2\u4e3a\u5355\u4f4d</li> </ul> <pre><code>#include&lt;ctime&gt;\n//window\u7279\u6709\u5e93\n#include&lt;Windows.h&gt;\nint main()\n{\nstd::time_t t_start = std::time(NULL);\nSleep(2000);//\u4f11\u77202\u79d2\nprintf(\"\u65f6\u95f4\u5dee%lfs\",std::difftime(std::time(NULL), t_start));\n}\n//\u8f93\u51fa\u7ed3\u679c\n//\u65f6\u95f4\u5dee2.000000s\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E5%BA%93/#122-time","title":"1.2.2 time","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>std::time_t time( std::time_t* arg );</code></li> <li>\u529f\u80fd\uff1a\u8ba1\u7b97\u5f53\u524d\u65e5\u5386\u65f6\u95f4\uff0c\u4fdd\u5b58\u4e3a<code>std::time_t</code>\u683c\u5f0f\uff0c\u5c06\u7ed3\u679c\u5b58\u5165arg\u6240\u6307\u5185\u5b58\uff0c\u5e76\u8fd4\u56de\u7ed3\u679c</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include&lt;ctime&gt;\nint main()\n{\nstd::time_t t_start = std::time(NULL);\nprintf(\"\u672c\u5730\u683c\u5f0f\u5316\u5f53\u524d\u65f6\u95f4:%s\",std::asctime(std::localtime(&amp;t_start)));\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E5%BA%93/#123-clock","title":"1.2.3 clock","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>std::clock_t clock();</code></li> <li>\u529f\u80fd\uff1a\u8fd4\u56de\u8fdb\u7a0b\u4ece\u5173\u8054\u5230\u7a0b\u5e8f\u6267\u884c\u7684\u5b9e\u73b0\u5b9a\u4e49\u65f6\u671f\u5f00\u59cb\uff0c\u6240\u7528\u7684\u7c97\u7565\u5904\u7406\u5668\u65f6\u95f4,\u5355\u4f4dms</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;chrono&gt;\n#include &lt;ctime&gt;\n#include &lt;thread&gt;\n\n// \u51fd\u6570 f() \u505a\u4e00\u4e9b\u8017\u65f6\u5de5\u4f5c\nvoid f()\n{\nvolatile double d = 0;\nfor(int n=0; n&lt;10000; ++n)\nfor(int m=0; m&lt;10000; ++m)\nd += d*n*m;\n}\n\nint main()\n{\nstd::clock_t c_start = std::clock();\nauto t_start = std::chrono::high_resolution_clock::now();\nstd::thread t1(f);\nstd::thread t2(f); // \u5728\u4e8c\u4e2a\u7ebf\u7a0b\u4e0a\u8c03\u7528 f()\nt1.join();\nt2.join();\nstd::clock_t c_end = std::clock();\nauto t_end = std::chrono::high_resolution_clock::now();\n\nstd::cout &lt;&lt; std::fixed &lt;&lt; std::setprecision(2) &lt;&lt; \"CPU time used: \"\n&lt;&lt; 1000.0 * (c_end-c_start) / CLOCKS_PER_SEC &lt;&lt; \" ms\\n\"\n&lt;&lt; \"Wall clock time passed: \"\n&lt;&lt; std::chrono::duration&lt;double, std::milli&gt;(t_end-t_start).count()\n&lt;&lt; \" ms\\n\";\n}\n//\u8f93\u51fa\u53ef\u80fd\u7ed3\u679c\n//CPU time used: 1590.00 ms\n//Wall clock time passed: 808.23 ms\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E5%BA%93/#13","title":"1.3 \u683c\u5f0f\u8f6c\u6362\u51fd\u6570","text":"<ul> <li><code>localtime</code>\u4e0e<code>gmtime</code>\u6bd4\u8f83</li> <li>\u76f8\u540c\u70b9\uff1a\u5c06<code>time_t</code>\u683c\u5f0f\u65f6\u95f4\u8f6c\u6362\u4e3a<code>tm</code>\u683c\u5f0f\u65f6\u95f4</li> <li>\u4e0d\u540c\u70b9\uff1a\u6839\u636e\u4e0d\u540c\u65f6\u533a\u6765\u8f6c\u6362</li> <li><code>asctime</code>\u4e0e<code>ctime</code>\u6bd4\u8f83</li> <li>\u76f8\u540c\u70b9:\u8f6c\u6362\u6210<code>Www Mmm dd hh:mm:ss yyyy\\n</code>\u683c\u5f0f\u7684c\u5b57\u7b26\u4e32\u8868\u793a</li> <li>\u4e0d\u540c\u70b9\uff1a<code>asctime</code>\u5165\u53c2\u662f<code>tm</code>\u6307\u9488\uff0c<code>ctime</code>\u5165\u53c2\u662f<code>time_t</code>\u6307\u9488</li> <li><code>strftime</code>\u4e0e<code>wcsftime</code>\u6bd4\u8f83</li> <li>\u76f8\u540c\u70b9\uff1a\u6309\u5165\u53c2\u7684format\u6307\u5b9a\u683c\u5f0f\u6765\u683c\u5f0f\u5316\u65f6\u95f4</li> <li>\u4e0d\u540c\u70b9\uff1a<code>strftime</code>\u8f6c\u6362\u7a84\u5b57\u8282\u5b57\u7b26\u4e32\uff0c<code>wcsftime</code>\u8f6c\u6362\u5bbd\u5b57\u8282\u5b57\u7b26\u4e32</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E5%BA%93/#131-localtime","title":"1.3.1 localtime","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>std::tm* localtime( const std::time_t *time );</code></li> <li>\u529f\u80fd\uff1a\u8f6c\u6362<code>time_t</code>\u683c\u5f0f\u65f6\u95f4\u4e3a\u4ee5\u672c\u5730\u65f6\u95f4\u8868\u793a\u7684<code>tm</code>\u683c\u5f0f\u65f6\u95f4</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include&lt;ctime&gt;\nint main()\n{\nstd::time_t t_start = std::time(NULL);\nstd::tm* t=std::localtime(&amp;t_start);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E5%BA%93/#132-gmtime","title":"1.3.2 gmtime","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>std::tm* gmtime( const std::time_t* time );</code></li> <li>\u529f\u80fd\uff1a\u8f6c\u6362<code>time_t</code>\u683c\u5f0f\u65f6\u95f4\u4e3a\u4ee5UTC\u65f6\u95f4\u8868\u793a\u7684<code>tm</code>\u683c\u5f0f\u65f6\u95f4</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include&lt;ctime&gt;\nint main()\n{\nstd::time_t t_start = std::time(NULL);\nstd::tm* t=std::gmtime(&amp;t_start);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E5%BA%93/#133-asctime","title":"1.3.3 asctime","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>char* asctime( const std::tm* time_ptr );</code></li> <li>\u529f\u80fd\uff1a\u8f6c\u6362<code>tm</code>\u683c\u5f0f\u65f6\u95f4\u4e3a\u5b57\u7b26\u4e32\u8868\u793a\uff0c\u536025\u5b57\u7b26\uff0c\u683c\u5f0f\u4e3a<code>Www Mmm dd hh:mm:ss yyyy\\n</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include&lt;ctime&gt;\n#include &lt;ctime&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\nstd::time_t result = std::time(NULL);\nstd::cout &lt;&lt; std::asctime(std::localtime(&amp;result));\n}\n//\u8f93\u51fa\u53ef\u80fd\u7ed3\u679c\n//Wed Dec 23 09:25:25 2020\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E5%BA%93/#134-ctime","title":"1.3.4 ctime","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>char* ctime( const std::time_t* time );</code></li> <li>\u529f\u80fd\uff1a\u5148\u8f6c\u6362<code>time_t</code>\u683c\u5f0f\u65f6\u95f4\uff0c\u518d\u8f6c\u6362<code>tm</code>\u683c\u5f0f\u65f6\u95f4\u4e3a\u5b57\u7b26\u4e32\u8868\u793a\uff0c\u683c\u5f0f\u4e3a<code>Www Mmm dd hh:mm:ss yyyy\\n</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;ctime&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\nstd::time_t result = std::time(NULL);\nstd::cout &lt;&lt; std::ctime(std::localtime(&amp;result));\n}\n//\u8f93\u51fa\u53ef\u80fd\u7ed3\u679c\n//Wed Dec 23 09:39:11 2020\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E5%BA%93/#135-strftime","title":"1.3.5 strftime","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>std::size_t strftime( char* str, std::size_t count, const char* format, const std::tm* time );</code></li> <li>\u529f\u80fd\uff1a\u6309\u7167\u683c\u5f0f\u5b57\u7b26\u4e32 format \uff0c\u8f6c\u6362\u6765\u81ea\u7ed9\u5b9a\u7684\u65e5\u5386\u65f6\u95f4 time \u7684\u65e5\u671f\u548c\u65f6\u95f4\u4fe1\u606f\uff0c\u4e3a\u7a7a\u7ec8\u6b62\u591a\u5b57\u8282\u5b57\u7b26\u4e32 str \u3002\u6700\u591a\u5199\u5165 count \u5b57\u8282\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;ctime&gt;\n#include &lt;iostream&gt;\n#include &lt;locale&gt;\n\nint main()\n{\nstd::locale::global(std::locale(\"zh_CN\"));\nstd::time_t t = std::time(NULL);\nchar mbstr[100];\nif (std::strftime(mbstr, sizeof(mbstr), \"%A %c\", std::localtime(&amp;t))) {\nstd::cout &lt;&lt; mbstr &lt;&lt; '\\n';\n}\n}\n//\u8f93\u51fa\u53ef\u80fd\u7ed3\u679c\n//\u661f\u671f\u4e09 2020/12/23 9:48:22\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E5%BA%93/#136-wcsftime","title":"1.3.6 wcsftime","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>std::size_t wcsftime( wchar_t* str, std::size_t count, const wchar_t* format, const std::tm* time );</code></li> <li>\u540c<code>strtime</code>\uff0c<code>wcsftime</code>\u6309\u683c\u5f0f\u8f6c\u6210\u5bbd\u5b57\u7b26\u8868\u793a\u5b57\u7b26\u4e32</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E5%BA%93/#137-mktime","title":"1.3.7 mktime","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>std::time_t mktime( std::tm* time );</code></li> <li>\u529f\u80fd\uff1a\u8f6c\u6362<code>tm</code>\u683c\u5f0f\u65f6\u95f4\u4e3a<code>time_t</code>\u683c\u5f0f\u65f6\u95f4</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;ctime&gt;\n#include &lt;iostream&gt;\nint main()\n{\nstd::time_t tt = std::time(NULL);\nstd::cout &lt;&lt; \"std::time\u7ed3\u679c:\" &lt;&lt; tt &lt;&lt; std::endl;\nstd::tm* t = std::localtime(&amp;tt);\nstd::time_t tt1=std::mktime(t);\nstd::cout &lt;&lt; \"std::mktime\u7ed3\u679c:\" &lt;&lt; tt1 &lt;&lt; std::endl;\n}\n//\u8f93\u51fa\u53ef\u80fd\u7ed3\u679c\n//std::time\u7ed3\u679c:1608689575\n//std::mktime\u7ed3\u679c:1608689575\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E5%BA%93/#2","title":"2 \u65f6\u95f4\u6233\u8f6c\u683c\u5f0f\u5316\u65f6\u95f4","text":"<ul> <li>\u793a\u4f8b</li> </ul> <pre><code>#include&lt;string&gt;\n#include&lt;stdio.h&gt;\n#include&lt;time.h&gt;\nusing namespace std;\nstring get_current_time()\n{\ntime_t cur_time;  struct tm *p;  time(&amp;cur_time);\np=localtime(&amp;cur_time);  char s[100];  strftime(s, sizeof(s), \"%Y-%m-%d %H:%M:%S\", p);  return string(s);\n}\n\nint main()\n{\nprintf(\"date is %s\\n\",get_current_time().c_str());\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E5%BA%93/#3","title":"3 \u8ba1\u65f6\u5668\u51fd\u6570","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E5%BA%93/#31","title":"3.1 \u6807\u51c6\u5e93","text":"<ul> <li><code>time()</code>\u7cbe\u5ea6s</li> <li><code>clock()</code>\u7cbe\u5ea6ms</li> </ul> <pre><code>using namespace std;\nvoid run()\n{\nfor (int num=999999,i=0;i&lt;num;i++)\n{\ni* i;\n}\n}\nint main()\n{\n//clock \u5355\u4f4d ms\nclock_t ct_start = clock();\nrun();\nclock_t ct_end = clock();\nprintf(\"clock time:%fms\\n\", double(ct_end - ct_start));\n//time \u5355\u4f4ds\ntime_t tm_start= time(NULL);\nrun();\ntime_t tm_end = time(NULL);\nprintf(\"time time:%fs\\n\", double(tm_start - tm_end));\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E5%BA%93/#32-windows","title":"3.2 windows\u5e73\u53f0","text":"<ul> <li><code>QueryPerformanceCounter</code>\u7cbe\u5ea6&lt;0.1ms</li> </ul> <pre><code>#include &lt;Windows.h&gt;\nint main()\n{\nLARGE_INTEGER t1,t2,tc;\n//\u67e5\u8be2\u6027\u80fd\u8ba1\u6570\u5668\u7684\u9891\u7387n/s\nQueryPerformanceFrequency(&amp;tc);\n//\u67e5\u8be2\u6027\u80fd\u8ba1\u6570\u5668\u5f53\u524d\u503c\nQueryPerformanceCounter(&amp;t1);\nSleep(1500);\nQueryPerformanceCounter(&amp;t2);\nprintf(\"Use Time:%lfs\\n\",(t2.QuadPart - t1.QuadPart)*1.0/tc.QuadPart);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E5%BA%93/#33-linux","title":"3.3 linux\u5e73\u53f0","text":"<ul> <li><code>gettimeofday</code>\u7cbe\u5ea6\u5fae\u79d2\u03bcs</li> </ul> <pre><code>#include&lt;stdio.h&gt;\n#include&lt;sys/time.h&gt;\n#include&lt;unistd.h&gt;\nint main()\n{\ntimeval start,end;\nunsigned  long diff;\ngettimeofday(&amp;start,NULL);\nprintf(\"start tv_sec:%d\\n\",start.tv_sec);\nprintf(\"start tv_usec:%d\\n\",start.tv_usec);\ngettimeofday(&amp;end,NULL);\nprintf(\"end tv_sec:%d\\n\",end.tv_sec);\nprintf(\"end tv_usec:%d\\n\",end.tv_usec);\ndiff = 1000000 * (end.tv_sec-start.tv_sec)+ end.tv_usec-start.tv_usec;\nprintf(\"thedifference is %ld\u03bcs\\n\",diff);\n}\n//\u53ef\u80fd\u7684\u8f93\u51fa\n//start tv_sec:1609380544\n//start tv_usec:665505\n//end tv_sec:1609380544\n//end tv_usec:665522\n//thedifference is 17\u03bcs\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%A8%A1%E6%9D%BF/","title":"\u6a21\u677f","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%A8%A1%E6%9D%BF/#1","title":"1 \u4e3b\u6a21\u677f","text":"<p>\u5982\u679c\u8981\u5bf9\u6a21\u677f\u8fdb\u884c\u7279\u5316\uff0c\u90a3\u4e48\u5fc5\u987b\u5148\u8981\u58f0\u660e\u4e3b\u6a21\u677f</p> <pre><code>template&lt;class T&gt; class X; // \u4e3b\u6a21\u677f\uff08\u58f0\u660e\u6216\u8005\u5b9a\u4e49\u90fd\u53ef\u4ee5\uff09\ntemplate&lt;&gt; class X&lt;int&gt; { /*...*/ }; //\u6a21\u677f\u7279\u5316\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%A8%A1%E6%9D%BF/#2","title":"2 \u6a21\u677f\u5f62\u53c2\u4e0e\u5b9e\u53c2","text":"<ul> <li>\u7c7b\u578b \u540d\u5b57(\u53ef\u9009) (1) </li> <li>\u7c7b\u578b \u540d\u5b57(\u53ef\u9009) = \u9ed8\u8ba4\u503c   (2) </li> <li>\u7c7b\u578b ... \u540d\u5b57(\u53ef\u9009) (3)</li> </ul> <p>\u6ce8\u610f\uff1a\u6a21\u677f\u5f62\u53c2\u7684\u540d\u5b57\u662f\u53ef\u4ee5\u7701\u7565\u7684</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%A8%A1%E6%9D%BF/#21","title":"2.1 \u975e\u7c7b\u578b\u6a21\u677f\u5f62\u53c2","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%A8%A1%E6%9D%BF/#211","title":"2.1.1 \u57fa\u672c\u7c7b\u578b\u548c\u679a\u4e3e\u7c7b\u578b\u5f62\u53c2","text":"<pre><code>enum EN {\nEN_1=0\n};\ntemplate&lt;typename T,int sz&gt;\nclass A\n{\npublic:\nT array[sz];\n};\ntemplate&lt;EN en&gt;\nclass A1\n{\npublic:\nvoid fun()\n{\nswitch (en)\n{\ncase EN_1:\nprintf(\"EN_1\");\nbreak;\ndefault:\nbreak;\n}\n}\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%A8%A1%E6%9D%BF/#212","title":"2.1.2 \u51fd\u6570\u6307\u9488\u5f62\u53c2","text":"<pre><code>void print1(int i)\n{\nprintf(\"%d\", i);\n}\ntemplate&lt;void(*f)(int)&gt;\nvoid fun1(int i)\n{\nf(i);\n}\n\ntemplate&lt;typename T&gt;\nvoid print2(T i)\n{\nprintf(\"%d\", i);\n}\n\ntemplate&lt;typename T,void(*f)(T)&gt;\nvoid fun2(T i)\n{\nf(i);\n}\nint main()\n{\nfun1&lt;print1&gt;(1);\nfun2&lt;int, print1&gt;(2);\nfun2&lt;int, print2&gt;(3.3);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%A8%A1%E6%9D%BF/#22","title":"2.2 \u53c2\u8003\u8d44\u6599","text":"<ul> <li>\u6a21\u677f\u5f62\u53c2\u4e0e\u5b9e\u53c2</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%A8%A1%E6%9D%BF/#3","title":"3 \u7c7b\u6a21\u677f","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%A8%A1%E6%9D%BF/#31","title":"3.1 \u6a21\u677f\u5177\u4f53\u5316","text":"<ul> <li>\u9690\u5f0f\u5b9e\u4f8b\u5316</li> <li>\u89e3\u91ca\uff1a\u5f53\u4f7f\u7528\u5177\u4f53\u7684\u6a21\u677f\u65f6\uff0c\u5982\u6709\u8bed\u53e5<code>vector&lt;int&gt; vi;</code>,\u5219\u7f16\u8bd1\u5668\u4f1a\u9690\u5f0f\u751f\u6210<code>vector&lt;int&gt;</code>\u7684\u5b9a\u4e49\uff0c\u5e76\u5b9e\u4f8b\u5316<code>vi</code>\u5bf9\u8c61</li> <li>\u663e\u5f0f\u5b9e\u4f8b\u5316</li> <li>\u5173\u952e\u5b57:<code>template</code></li> <li>\u89e3\u91ca\uff1a\u901a\u8fc7<code>template</code>\u5173\u952e\u5b57\u76f4\u63a5\u544a\u8bc9\u7f16\u8bd1\u5668\u8981\u751f\u6210\u5177\u4f53\u7684\u7c7b\uff0c\u5982<code>template class vector&lt;int&gt;;</code>,\u6b64\u65f6\u7f16\u8bd1\u5668\u4f1a\u751f\u6210<code>vector&lt;int&gt;</code>\u7684\u5177\u4f53\u7c7b\u7684\u58f0\u660e\u3002</li> <li>\u663e\u5f0f\u5177\u4f53\u5316</li> <li>\u5173\u952e\u5b57:<code>template&lt;&gt;</code></li> <li>\u89e3\u91ca\uff1a\u4e3a\u67d0\u4e00\u7c7b\u578b\u7279\u5316\u7684\u7c7b\uff0c\u5f62\u5982<code>template&lt;&gt; class_name&lt;type_name&gt;</code></li> <li>\u90e8\u5206\u5177\u4f53\u5316</li> <li>\u89e3\u91ca\uff1a\u5982\u591a\u4e2a\u6a21\u677f\u53c2\u6570\u7684\u60c5\u51b5\u4e0b\uff0c\u53ea\u5177\u4f53\u5316\u5176\u4e2d\u90e8\u5206\uff0c\u5f62\u5982<code>template&lt;class T&gt; class_name&lt;type_name,T&gt;</code></li> </ul> <p>\u663e\u5f0f\u5b9e\u4f8b\u5316\u548c\u9690\u5f0f\u5b9e\u4f8b\u5316\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff0c\u9690\u5f0f\u5b9e\u4f8b\u5316\u9700\u8981\u58f0\u660e\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5982\u4e0a\u9762\u63d0\u53ca\u7684<code>vi</code></p> <pre><code>// \u4e00\u822c\u6a21\u677f\ntemplate&lt;class T1,class T2&gt;\nclass A {\npublic:\nvoid print() { cout &lt;&lt; \"A&lt;T1,T2&gt;\" &lt;&lt; endl; }\n};\n// \u663e\u5f0f\u5177\u4f53\u5316\ntemplate&lt;&gt;\nclass A&lt;int,int&gt; {\npublic:\nvoid print() { cout &lt;&lt; \"A&lt;int,int&gt;\" &lt;&lt; endl; }\n};\n// \u90e8\u5206\u5177\u4f53\u5316\ntemplate&lt;class T&gt;\nclass A&lt;T,int&gt; {\npublic:\nvoid print() { cout &lt;&lt; \"A&lt;T,int&gt;\" &lt;&lt; endl; }\n};\n// \u663e\u5f0f\u5b9e\u4f8b\u5316\ntemplate class A&lt;string, float&gt;;\nint main()\n{\n//\u9690\u5f0f\u5b9e\u4f8b\u5316\nA&lt;float,float&gt; af;\naf.print();//A&lt;T1,T2&gt; \u8c03\u7528\u4e00\u822c\u6a21\u677f\nA&lt;int,int&gt; ai;\nai.print();//A&lt;int,int&gt; \u8c03\u7528\u5177\u4f53\u5316\u6a21\u677fA&lt;int,int&gt;\nA&lt;float, int&gt; afi;\nafi.print();//A&lt;T,int&gt; \u8c03\u7528\u90e8\u5206\u5177\u4f53\u5316\u6a21\u677fA&lt;T,int&gt;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%A8%A1%E6%9D%BF/#32","title":"3.2 \u7c7b\u6a21\u677f\u7c7b\u578b","text":"<ul> <li>\u975e\u7c7b\u578b\u53c2\u6570\u6a21\u677f</li> <li>\u9ed8\u8ba4\u6a21\u677f\u53c2\u6570</li> <li>\u89e3\u91ca\uff1a\u53ef\u4ee5\u4e3a\u4efb\u4f55\u79cd\u7c7b\u7684\u6a21\u677f\u5f62\u53c2\uff08\u7c7b\u578b\u3001\u975e\u7c7b\u578b\u6216\u6a21\u677f\uff09\u6307\u5b9a\u9ed8\u8ba4\u5b9e\u53c2\uff0c\u5982<code>template&lt;typename T1, typename T2 = int&gt; class A;</code></li> <li>\u6a21\u677f\u4f5c\u4e3a\u53c2\u6570</li> </ul> <pre><code>template&lt;typename T&gt;\nclass A1 {\npublic:\nusing _TYPE = T;\n_TYPE m_a;\n//A1():m_a(){}\nA1() = default;\nA1(const T&amp; a):m_a(a){}\nA1&amp; operator =(A1&amp; a)\n{\nm_a=a.m_a;\nreturn *this;\n}\n};\n//\u6a21\u677f\u4f5c\u4e3a\u53c2\u6570\ntemplate&lt;template&lt;typename T&gt;class A&gt;\nclass B {\npublic:\n};\n\n//\u975e\u7c7b\u578b\u53c2\u6570\u6a21\u677f\uff0c\u9ed8\u8ba4\u6a21\u677f\u53c2\u6570\ntemplate&lt;typename T,int n=2&gt;\nclass D\n{\npublic:\nD() :value(){}\nT value[n];\n};\nint main()\n{\nD&lt;string,3&gt; arr;\nB&lt;A1&gt; b1;\n\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%A8%A1%E6%9D%BF/#33","title":"3.3 \u6210\u5458\u51fd\u6570\u6a21\u677f","text":"<ul> <li>\u6a21\u677f\u7c7b\u4e2d\u51fd\u6570\u6a21\u677f</li> <li>\u666e\u901a\u7c7b\u4e2d\u51fd\u6570\u6a21\u677f</li> </ul> <pre><code>//\u7c7b\u6a21\u677f\u4e2d\u51fd\u6570\u6a21\u677f\ntemplate&lt;typename T&gt;\nclass E\n{\npublic:\nusing _TYPE = T;\n_TYPE _value;\n//\u7c7b\u5185\u5b9e\u73b0\ntemplate&lt;typename U&gt;\nvoid func1(U u){}\n//\u7c7b\u5185\u58f0\u660e\ntemplate&lt;typename U&gt;\nvoid func2(U u);\ntemplate&lt;typename X&gt;\nclass cl {\npublic:\nX x;\n};\ncl&lt;T&gt; c1_T;\ncl&lt;int&gt; cl_i;\n};\n//\u7c7b\u5916\u5b9e\u73b0 (\u53cc\u5c42template)\ntemplate&lt;typename T&gt;\ntemplate&lt;typename U&gt;\nvoid E&lt;T&gt;::func2(U u){}\n//\u666e\u901a\u7c7b\u4e2d\u51fd\u6570\u6a21\u677f\nclass F {\npublic:\n//\u7c7b\u5185\u5b9e\u73b0\ntemplate&lt;typename T&gt;\nvoid fun1(T t){}\n//\u7c7b\u5185\u58f0\u660e\ntemplate&lt;typename T&gt;\nvoid fun2(T t);\n};\n//\u7c7b\u5916\u5b9e\u73b0\ntemplate&lt;typename T&gt;\nvoid F::fun2(T t){}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%A8%A1%E6%9D%BF/#34","title":"3.4 \u6a21\u677f\u7c7b\u4e2d\u81ea\u8eab\u7c7b\u6307\u9488","text":"<pre><code>template&lt;typename T&gt;\nclass G\n{ public:\nG() :pg2(nullptr),pg1(nullptr) {}\nG* pg1;//\u9ed8\u8ba4\u4e0eG&lt;T&gt;\u7c7b\u578b\u76f8\u540c\nG&lt;T&gt;* pg2;//\u7b49\u4ef7\u4e0a\u5f0f\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%A8%A1%E6%9D%BF/#35","title":"3.5 \u53cb\u5143\u6a21\u677f\u7c7b\u548c\u53cb\u5143\u6a21\u677f\u51fd\u6570","text":"<ul> <li>\u77e5\u8bc6\u70b9\uff1a</li> <li>\u53cb\u5143\u6a21\u677f\u7c7b\u4e0d\u9700\u8981\u524d\u7f6e\u58f0\u660e</li> </ul> <pre><code>template&lt;typename T&gt;\nclass H\n{\nT val;\npublic:\nvoid setValue(T v) { val = v; }\nH():val(T()){}\n//\u53cb\u5143\u6a21\u677f\u7c7b\ntemplate&lt;typename U&gt;\nfriend class L;\n//\u53cb\u5143\u51fd\u6570\ntemplate&lt;typename ...U&gt;\nfriend auto sum(U... args)-&gt;decltype((args.val + ...));\n};\ntemplate&lt;typename T&gt;\nclass L\n{\n\n};\n\ntemplate&lt;typename...T&gt;\nauto sum(T...args)-&gt;decltype((args.val + ...))\n{\n//c++17\u6298\u53e0\u8868\u8fbe\u5f0f\u8bed\u6cd5\nreturn (args.val + ...);\n}\nint main()\n{\nH&lt;int&gt; h1;\nh1.setValue(2);\nH&lt;int&gt; h2;\nh2.setValue(3);\nsum(h1,h2);//\u8f93\u51fa5\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%A8%A1%E6%9D%BF/#4","title":"4 \u51fd\u6570\u6a21\u677f","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%A8%A1%E6%9D%BF/#41","title":"4.1 \u6a21\u677f\u5177\u4f53\u5316","text":"<ul> <li>\u9690\u5f0f\u5b9e\u4f8b\u5316</li> <li>\u89e3\u91ca\uff1a\u5f53\u4f7f\u7528\u5177\u4f53\u7684\u6a21\u677f\u65f6\uff0c\u5982\u6709\u8bed\u53e5<code>int a=2,b=1; swap(a,b);</code>,\u5219\u7f16\u8bd1\u5668\u4f1a\u9690\u5f0f\u751f\u6210<code>void swap(int&amp;,int&amp;)</code>\u7684\u5b9a\u4e49</li> <li>\u663e\u5f0f\u5b9e\u4f8b\u5316</li> <li>\u5173\u952e\u5b57:<code>template</code></li> <li>\u89e3\u91ca\uff1a\u901a\u8fc7<code>template</code>\u5173\u952e\u5b57\u76f4\u63a5\u544a\u8bc9\u7f16\u8bd1\u5668\u8981\u751f\u6210\u5177\u4f53\u7684\u51fd\u6570\uff0c\u5982<code>template void swap(int&amp;,int&amp;)</code>,\u6b64\u65f6\u7f16\u8bd1\u5668\u4f1a\u751f\u6210<code>void swap(int&amp;,int&amp;)</code>\u7684\u51fd\u6570\u5b9a\u4e49\u3002</li> <li>\u663e\u5f0f\u5177\u4f53\u5316</li> <li>\u5173\u952e\u5b57:<code>template&lt;&gt;</code></li> <li>\u89e3\u91ca\uff1a\u4e3a\u67d0\u4e00\u7c7b\u578b\u7279\u5316\u7684\u51fd\u6570\uff0c\u5f62\u5982<code>template&lt;&gt; ret_type fun_name(type_name)</code></li> <li>\u90e8\u5206\u5177\u4f53\u5316</li> <li>\u89e3\u91ca\uff1a\u5982\u591a\u4e2a\u6a21\u677f\u53c2\u6570\u7684\u60c5\u51b5\u4e0b\uff0c\u53ea\u5177\u4f53\u5316\u5176\u4e2d\u90e8\u5206\uff0c\u5f62\u5982<code>template&lt;class T&gt; ret_type fun_name(type_name,T)</code></li> </ul> <pre><code>template&lt;class T1,class T2&gt;\nvoid print(T1&amp; t1, T2&amp; t2) {\ncout &lt;&lt;\"\u4e00\u822c\u6a21\u677f\" &lt;&lt;endl;\n}\ntemplate&lt; class T&gt;\nvoid print(int&amp; t1, T&amp; t2) {\ncout &lt;&lt; \"\u90e8\u5206\u5177\u4f53\u5316\"&lt;&lt; endl;\n}\ntemplate&lt;&gt;\nvoid print(int&amp; t1, int&amp; t2) {\ncout &lt;&lt; \"\u663e\u5f0f\u5177\u4f53\u5316\" &lt;&lt; endl;\n}\n//\u663e\u5f0f\u5b9e\u4f8b\u5316\ntemplate void print&lt;double,double&gt;(double&amp;, double&amp;);//\u5728\u4e0d\u8c03\u7528\u6b64\u51fd\u6570\u65f6\uff0c\u6b64\u51fd\u6570\u5df2\u88ab\u58f0\u660e\nint main()\n{\nfloat f = 1.1;\ndouble d = 2.1;\nint i = 1;\nprint(i, f);//\u90e8\u5206\u5177\u4f53\u5316\nprint(i, i);//\u663e\u5f0f\u5177\u4f53\u5316\nprint(f, f);//\u4e00\u822c\u6a21\u677f\nprint(d, d);//\u4e00\u822c\u6a21\u677f\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%A8%A1%E6%9D%BF/#5","title":"5 \u522b\u540d\u6a21\u677f","text":"<ul> <li>\u529f\u80fd\uff1a\u7b80\u5316\u590d\u6742\u6a21\u677f\uff0c\u7279\u6b8a\u5316\u6a21\u677f\u53c2\u6570</li> </ul> <pre><code>#include&lt;array&gt;\ntemplate&lt;class T&gt;\nusing arr10 = array&lt;T, 10&gt;;\nint main()\n{\narr10&lt;int&gt; arr{1,2,3};\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%A8%A1%E6%9D%BF/#6","title":"6 \u53d8\u91cf\u6a21\u677f","text":"<ul> <li>\u529f\u80fd\uff1a\u53d8\u91cf\u6a21\u677f\u5b9a\u4e49\u4e00\u65cf\u53d8\u91cf\u6216\u9759\u6001\u6570\u636e\u6210\u5458</li> </ul> <pre><code>// \u5168\u5c40\u4f5c\u7528\u57df\ntemplate &lt;class&gt;\n_INLINE_VAR constexpr bool is_lvalue_reference_v = false; // determine whether type argument is an lvalue reference\n\ntemplate &lt;class _Ty&gt;\n_INLINE_VAR constexpr bool is_lvalue_reference_v&lt;_Ty&amp;&gt; = true;\n\ntemplate &lt;class&gt;\n_INLINE_VAR constexpr bool is_rvalue_reference_v = false; // determine whether type argument is an rvalue reference\n\ntemplate &lt;class _Ty&gt;\n_INLINE_VAR constexpr bool is_rvalue_reference_v&lt;_Ty&amp;&amp;&gt; = true;\ntemplate&lt;class T&gt;\nconstexpr T PI = T(3.1415926);\n\n//\u7c7b\u4f5c\u7528\u57df\nstruct limits {\ntemplate&lt;typename T&gt;\nstatic const T min; // \u9759\u6001\u6570\u636e\u6210\u5458\u6a21\u677f\u7684\u58f0\u660e\n};\ntemplate&lt;typename T&gt;\nconst T limits::min = { }; // \u9759\u6001\u6570\u636e\u6210\u5458\u6a21\u677f\u7684\u5b9a\u4e49\n\ntemplate&lt;class T&gt;\nclass X {\npublic:\nstatic T s; // \u7c7b\u6a21\u677f\u7684\u975e\u6a21\u677f\u9759\u6001\u6570\u636e\u6210\u5458\u7684\u58f0\u660e\nconst static T s1=0; // \u5e38\u91cf\u53ef\u4ee5\u76f4\u63a5\u521d\u59cb\u5316\n};\ntemplate&lt;class T&gt;\nT X&lt;T&gt;::s = 0; // \u7c7b\u6a21\u677f\u7684\u975e\u6a21\u677f\u9759\u6001\u6570\u636e\u6210\u5458\u7684\u5b9a\u4e49\nint main()\n{\nbool b1 = is_lvalue_reference_v&lt;int&gt;;//false\nbool b2 = is_lvalue_reference_v&lt;int&amp;&gt;;//true\nbool b3 = is_rvalue_reference_v&lt;int&gt;;//false\nbool b4 = is_rvalue_reference_v&lt;int&amp;&amp;&gt;;//true\nint i=PI&lt;int&gt;;\nfloat f = PI&lt;float&gt;;\nint i1=limits::min&lt;int&gt;;\nint i2 = X&lt;int&gt;::s;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%A8%A1%E6%9D%BF/#7-typenametemplate","title":"7 \u5f85\u51b3\u540d\u7684typename\u548ctemplate\u6d88\u9664\u6b67\u4e49\u7b26","text":"<p>\u5728\u4e00\u4e9b\u6e90\u7801\u4e2d\u53ef\u80fd\u6709\u8fd9\u6837\u7684\u8bed\u6cd5<code>using _Ty2 = typename _Select&lt;is_function_v&lt;_Ty1&gt;&gt;::template _Apply&lt;add_pointer&lt;_Ty1&gt;, remove_cv&lt;_Ty1&gt;&gt;;</code>,\u5176\u4e2d\u7684<code>typename</code>\u548c<code>template</code>\u5230\u5e95\u8d77\u7740\u4ec0\u4e48\u4f5c\u7528\u5462\uff1f \u89e3\u91ca\u5982\u4e0b\uff1a - <code>typename</code>\u5728\u6b64\u7528\u4e8e\u8bf4\u660e\u8fd9\u8fd9<code>_Select&lt;is_function_v&lt;_Ty1&gt;&gt;</code>\u662f\u4e00\u4e2a\u7c7b\u578b - <code>template</code>\u5728\u6b64\u8bf4\u660e<code>_Apply</code>\u662f\u4e00\u4e2a\u6a21\u677f</p> <p><code>typename</code>\u793a\u4f8b</p> <pre><code>struct A { // A \u62e5\u6709\u5d4c\u5957\u53d8\u91cf X \u548c\u5d4c\u5957\u7c7b\u578b struct X\nstruct X {};\nint X;\n};\nstruct B {\nstruct X { }; // B \u62e5\u6709\u5d4c\u5957\u7c7b\u578b struct X\n};\ntemplate&lt;class T&gt; void f(T t) {\ntypename T::X x;\n}\nvoid foo() {\nA a;\nB b;\nf(b); // OK\uff1a\u5b9e\u4f8b\u5316 f&lt;B&gt;\uff0cT::X \u6307\u4ee3 B::X\nf(a); // \u9519\u8bef\uff1a\u4e0d\u80fd\u5b9e\u4f8b\u5316 f&lt;A&gt;\uff1a\n// \u56e0\u4e3a A::X \u7684\u6709\u9650\u5b9a\u540d\u5b57\u67e5\u627e\u627e\u5230\u4e86\u6570\u636e\u6210\u5458\n}\n</code></pre> <p><code>template</code>\u793a\u4f8b</p> <pre><code>template&lt;typename T&gt;\nstruct S {\ntemplate&lt;typename U&gt; void foo(){}\n};\n\ntemplate&lt;typename T&gt;\nvoid bar()\n{\nS&lt;T&gt; s;\ns.foo&lt;T&gt;(); // \u9519\u8bef\uff1a&lt; \u88ab\u5256\u6790\u4e3a\u5c0f\u4e8e\u8fd0\u7b97\u7b26\ns.template foo&lt;T&gt;(); // OK\n}\n</code></pre> <p>\u5173\u952e\u8bcd template \u4ec5\u53ef\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u7528\u4e8e\u8fd0\u7b97\u7b26 ::\uff08\u4f5c\u7528\u57df\u89e3\u6790\uff09\u3001-&gt;\uff08\u901a\u8fc7\u6307\u9488\u7684\u6210\u5458\u8bbf\u95ee\uff09\u548c .\uff08\u6210\u5458\u8bbf\u95ee\uff09\u4e4b\u540e\uff0c\u4e0b\u5217\u8868\u8fbe\u5f0f\u662f\u6240\u6709\u5408\u6cd5\u793a\u4f8b\uff1a</p> <pre><code>T::template foo&lt;X&gt;();\ns.template foo&lt;X&gt;();\nthis-&gt;template foo&lt;X&gt;();\ntypename T::template iterator&lt;int&gt;::value_type v;\n</code></pre> <p>\u66f4\u8be6\u7ec6\u8d44\u6599\u53ef\u53c2\u8003cppreference</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/","title":"\u6b63\u5219\u8868\u8fbe\u5f0f","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/#1","title":"1 \u6982\u8ff0","text":"<ul> <li>\u6b63\u5219\u8868\u8fbe\u5f0f</li> <li><code>regex</code>\uff1a<code>basic_regex&lt;char&gt;</code>\u7684\u7279\u5316</li> <li><code>wregex</code>\uff1a<code>basic_regex&lt;wchar_t&gt;</code>\u7684\u7279\u5316</li> <li>\u5339\u914d\u4e00\u4e2a\u7ed3\u679c</li> <li><code>regex_match</code>\uff1a\u5b8c\u5168\u5339\u914d</li> <li><code>regex_search</code>\uff1a\u5c40\u90e8\u5339\u914d</li> <li>\u5339\u914d\u6240\u6709\u7ed3\u679c<code>regex_iterator</code>\uff1a\u8fed\u4ee3\u4e00\u4e2a\u5b57\u7b26\u5e8f\u5217\u4e2d\u7684\u6240\u6709\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d</li> <li><code>cregex_iterator</code> <code>regex_iterator&lt;const char*&gt;</code></li> <li><code>wcregex_iterator</code>regex_iterator` <li><code>sregex_iterator</code> <code>regex_iterator&lt;std::string::const_iterator&gt;</code></li> <li><code>wsregex_iterator</code>regex_iterator` <li>\u5339\u914d\u7ed3\u679c</li> <li><code>std::cmatch</code>\uff1a  <code>std::match_results&lt;const char*&gt;</code></li> <li><code>std::wcmatch</code>\uff1a<code>std::match_results&lt;const wchar_t*&gt;</code></li> <li><code>std::smatch</code>\uff1a  <code>std::match_results&lt;std::string::const_iterator&gt;</code></li> <li><code>std::wsmatch</code>\uff1a<code>std::match_results&lt;std::wstring::const_iterator&gt;</code></li>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/#2-regex","title":"2 regex","text":"<p>regex\u53ef\u4ee5\u8bbe\u7f6e\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u4e5f\u53ef\u9009\u8bbe\u7f6e\u5339\u914d\u6a21\u5f0f\uff0c\u5982\u5ffd\u7565\u5927\u5c0f\u5199\uff0c\u591a\u4e2a\u6a21\u5f0f\u7528<code>|</code>\u5206\u9694\u3002 - \u793a\u4f8b</p> <pre><code>std::regex r(\"[AWSD]\\\\d{2};\",regex::icase|regex::egrep);\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/#3-regex_match","title":"3 regex_match","text":"<p><code>regex_match</code>\u8981\u6c42\u5b8c\u5168\u5339\u914d\uff0c\u4e0e<code>regex_search</code>\u5c40\u90e8\u5339\u914d\u4e0d\u540c\u3002\u5982\u4e00\u4e2a\u6b63\u5219<code>regex r(\"[AWSD]\\\\d{2};\")</code>\u548c\u4e00\u4e2a\u5f85\u5339\u914d\u6570<code>string str(\"12;A32;\")</code>,<code>regex_match</code>\u8fd4\u56defalse\uff0c<code>regex_search</code>\u8fd4\u56detrue\u3002 - \u793a\u4f8b\u4ee3\u7801</p> <pre><code>#include&lt;regex&gt;\n#include&lt;iostream&gt;\nusing namespace std;\nint main()\n{\nstd::regex r(\"[AWSD]\\\\d{2};\");\nstring str(\"12;A32;B45;WW200;S10;D100\");\nsmatch m;\n//\u65b9\u5f0f1\uff1a\u5982\u679c\u4e0d\u9700\u8981m\uff0c\u53ea\u9700\u8981\u77e5\u9053\u662f\u5426\u5339\u914d\nbool b = regex_match(str, r);\n//\u65b9\u5f0f2\nregex_match(str, m, r);\n//\u65b9\u5f0f3\nregex_match(str.cbegin(),str.cend(), m, r);\n//\u8bbf\u95eem\u4e2d\u4fdd\u5b58\u7684\u5339\u914d\u7ed3\u679c\n//\u65b9\u5f0f1\nif (!m.empty())\ncout &lt;&lt; m[0].str() &lt;&lt; endl;\n//\u65b9\u5f0f2\nfor (auto pos = m.begin(); pos != m.end(); ++pos)\ncout &lt;&lt; pos-&gt;str() &lt;&lt; endl;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/#4-regex_search","title":"4 regex_search","text":"<p>\u4f7f\u7528\u540c<code>regex_match</code></p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/#5-regex_iterator","title":"5 regex_iterator","text":"<pre><code>#include&lt;regex&gt;\n#include&lt;iostream&gt;\nusing namespace std;\nint main()\n{\nstd::regex r(\"[AWSD]\\\\d{2};\");\nstring str(\"12;A32;B45;WW200;S10;D100\");\nstd::sregex_iterator pos(str.begin(), str.end(), r);\nstd::sregex_iterator end;\nfor (; pos != end; ++pos)\n{\ncout &lt;&lt; pos-&gt;str() &lt;&lt; endl;\n}\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E7%BA%BF%E7%A8%8B/","title":"c++\u7ebf\u7a0b","text":"<p>\u7ebf\u7a0b\u53ef\u4ee5\u603b\u7ed3\u62102\u90e8\u5206\uff0c\u4e00\u4e2a\u662f\u5982\u4f55\u542f\u52a8\u7ebf\u7a0b\uff0c\u53e6\u4e00\u4e2a\u662f\u5982\u4f55\u4fdd\u8bc1\u7ebf\u7a0b\u5b89\u5168</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E7%BA%BF%E7%A8%8B/#1","title":"1 \u542f\u52a8\u7ebf\u7a0b","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E7%BA%BF%E7%A8%8B/#11-thread","title":"1.1 thread","text":"<ul> <li>\u5934\u6587\u4ef6:<code>#include&lt;thread&gt;</code></li> </ul> <p>thread\u662f\u4e00\u4e2a\u7c7b\uff0c\u6784\u9020thread\u5bf9\u8c61\u65f6\u4f20\u5165\u51fd\u6570\u4ee5\u53ca\u53c2\u6570\uff0cthread\u4f1a\u542f\u52a8\u4e00\u4e2a\u7ebf\u7a0b</p> <pre><code>#include&lt;thread&gt;\n#include&lt;iostream&gt;\nusing namespace std;\nint add(int x, int y)\n{\ncout &lt;&lt; \"x + y = \" &lt;&lt; x + y &lt;&lt; endl;\nreturn x + y;\n}\n\nint main()\n{\nthread t(add, 2, 3);\nt.join();\n}\n</code></pre> <p>thread\u7c7b\u6709\u51e0\u4e2a\u91cd\u8981\u7684\u6210\u5458\u51fd\u6570 - <code>thread::join()</code>\uff1a\u963b\u585e\u7b49\u5f85\u7ebf\u7a0b\u6267\u884c\u5b8c\u6210 - <code>thread::detach</code>\uff1a\u5378\u79bb\u7ebf\u7a0b\u5230\u540e\u53f0\u6267\u884c\uff08\u4e3b\u7ebf\u7a0b\u65e0\u6cd5\u63a7\u5236\u7ebf\u7a0b\u4e86\uff09 - <code>thread::get_id</code>\uff1a\u83b7\u53d6\u7ebf\u7a0bid - <code>thread::joinable()</code>\uff1a\u5224\u65adthread\u662f\u5426\u6709\u4e00\u4e2a\u5173\u8054\u7ebf\u7a0b\uff08d\u5f53thread\u5bf9\u8c61\u7531\u9ed8\u8ba4\u6784\u9020\u521b\u5efa\u65f6\u5c31\u662f\u4e00\u4e2a\u6ca1\u6709\u5173\u8054\u7ebf\u7a0b\u7684thread\uff0c\u8fd9\u4e5f\u662f\u6ca1\u610f\u4e49\u7684\uff09</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E7%BA%BF%E7%A8%8B/#12-future","title":"1.2 future","text":"<ul> <li>\u5934\u6587\u4ef6:<code>#include&lt;future&gt;</code></li> <li>\u6765\u6e90\uff1a</li> <li><code>async</code>   1.2. - <code>packaged_task</code></li> </ul> <pre><code>c++11\u4e0d\u4ec5\u589e\u52a0\u4e86thread\u8fd8\u589e\u52a0\u4e86future\uff0c\u8fd9\u4f7f\u5f97\u53ef\u4ee5\u83b7\u5f97\u7ebf\u7a0b\u6267\u884c\u7ed3\u679c\uff08\u5373\u7ebf\u7a0b\u51fd\u6570\u8fd4\u56de\u503c\uff09\uff0c\u800c\u8fd9\u5728thread\u4e2d\u662f\u65e0\u6cd5\u76f4\u63a5\u83b7\u53d6\u8fd4\u56de\u503c\u7684\uff08\u5728\u4ee5\u524d\u7684\u65b9\u6848\u4e2d\u5f80\u5f80\u628a\u9700\u8981\u7684\u7ed3\u679c\u4ee5\u53c2\u6570\u5f62\u5f0f\u4f20\u7ed9\u51fd\u6570\uff09\u3002future\u7531async\u6216packaged_task\u4ea7\u751f\u3002\n</code></pre> <ul> <li>future\u6709\u4ee5\u4e0b\u51e0\u4e2a\u91cd\u8981\u51fd\u6570</li> <li><code>future::get()</code>\uff1a\u83b7\u53d6future\u4fdd\u6709\u7684\u7ebf\u7a0b\u51fd\u6570\u8fd4\u56de\u503c(\u963b\u585e\u76f4\u5230\u7ebf\u7a0b\u6267\u884c\u5b8c\u6210)</li> <li><code>future::wait()</code>\uff1a\u963b\u585e\u76f4\u5230\u7ebf\u7a0b\u5b8c\u6210</li> <li><code>future::wait_for()</code>\uff1a\u963b\u585e\u4e00\u6bb5\u65f6\u95f4\uff0c\u4f46\u5e76\u4e0d\u4fdd\u8bc1\u7ebf\u7a0b\u80fd\u591f\u6267\u884c\u5b8c</li> <li><code>future::wait_until()</code>\uff1a\u963b\u585e\u76f4\u5230\u67d0\u4e00\u65f6\u95f4\uff0c\u4f46\u5e76\u4e0d\u4fdd\u8bc1\u7ebf\u7a0b\u80fd\u591f\u6267\u884c\u5b8c</li> <li><code>future::valid()</code>\u5224\u65adfuture\u662f\u5426\u6301\u6709\u7ebf\u7a0b\u51fd\u6570\u72b6\u6001</li> <li><code>future::share()</code>\uff1a\u4ea7\u751f\u4e00\u4e2a<code>shared_future</code>,\u5e76\u4f7f\u5f53\u524d<code>future</code>\u5931\u6548</li> </ul> <p><code>shared_future</code>\u4e0e<code>future</code>\u4e0d\u540c\u5728\u4e8e\uff0c<code>future</code>\u53ea\u80fd\u4f7f\u7528\u4e00\u6b21<code>get</code>\u51fd\u6570\u5c31\u4f1a\u4f7f<code>future</code>\u6301\u6709\u7684\u72b6\u6001\u5931\u6548\uff08\u5373\u518d\u6b21\u8c03\u7528get\u5c06\u4f1a\u5931\u8d25\uff09\uff0c\u8c03\u7528<code>valid</code>\u4f1a\u8fd4\u56de<code>false</code>;\u800c<code>shared_future</code>\u80fd\u591f\u591a\u6b21\u4f7f\u7528<code>get</code>\u6765\u83b7\u53d6\u7ebf\u7a0b\u51fd\u6570\u6267\u884c\u5b8c\u8fd4\u56de\u503c\u3002</p> <pre><code>#include&lt;future&gt;\n#include&lt;iostream&gt;\nusing namespace std;\nint add(int x, int y)\n{\ncout &lt;&lt; \"x + y = \" &lt;&lt; x + y &lt;&lt; endl;\nreturn x + y;\n}\n\nint main()\n{\nfuture&lt;int&gt; fi(async(add, 2, 3));\nint iv=fi.get();\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E7%BA%BF%E7%A8%8B/#121-async","title":"1.2.1 async","text":"<p><code>async</code>\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u7528\u4e8e\u542f\u52a8\u4e00\u4e2a\u7ebf\u7a0b\u5e76\u8fd4\u56de\u4e00\u4e2a<code>future</code>\uff0c\u76f8\u5f53\u4e8e\u628a\u7ebf\u7a0b\u7684\u6267\u884c\u6743\u4ea4\u7ed9\u4e86<code>future</code></p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E7%BA%BF%E7%A8%8B/#122-packaged_task","title":"1.2.2 packaged_task","text":"<p><code>packaged_task</code>\u662f\u4e00\u4e2a\u7c7b\uff0c\u4e00\u822c\u7528\u4e8e\u7ebf\u7a0b\u6c60\u4e2d\uff0c\u5b83\u5e76\u4e0d\u542f\u52a8\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u4f46\u4ed6\u4f1a\u8fd4\u56de\u4e00\u4e2a<code>future</code>,<code>packaged_task</code>\u5185\u90e8\u5b9e\u73b0\u4e86<code>()</code>\u8fd0\u7b97\u7b26\uff0c\u4e00\u822c\u5728\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u4e2d\u53bb\u6267\u884c\uff0c\u5728\u53e6\u4e00\u7ebf\u7a0b\u8c03\u7528<code>packaged_task::get_future()</code>\u8fd4\u56de\u7684<code>future</code>\u5bf9\u8c61\u53bb\u83b7\u53d6\u7ebf\u7a0b<code>packaged_task()</code>(\u51fd\u6570\u5bf9\u8c61)\u6267\u884c\u7ed3\u679c</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E7%BA%BF%E7%A8%8B/#13-this_thread","title":"1.3 this_thread","text":"<p>\u547d\u540d\u7a7a\u95f4<code>this_thread</code>\u63d0\u4f9b\u4e86\u4e00\u4e9b\u4fbf\u4e8e\u64cd\u4f5c\u7ebf\u7a0b\u7684\u51fd\u6570 - <code>this_thread::get_id()</code> - <code>this_thread::sleep_for(dur)</code> - <code>this_thread::sleep_until(tp)</code> - <code>this_thread::yield()</code>\uff1a\u653e\u5f03\u5f53\u524d\u7ebf\u7a0b\u7684\u65f6\u95f4\u7247\uff08\u76f8\u5f53\u4e8e\u544a\u8bc9cpu\u53bb\u6267\u884c\u4e0b\u4e00\u7ebf\u7a0b\uff0c\u6211\u8fd9\u4e0d\u6267\u884c\uff09\uff0c\u7528\u4e8e\u8f6e\u8be2\u7b49\u5f85\u67d0\u4e00\u4efb\u52a1\u5b8c\u6210\u65f6\u80fd\u53d1\u6325\u91cd\u8981\u4f5c\u7528</p> <pre><code>while(!readyFlag)\n{\nthis_thread::yield();\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E7%BA%BF%E7%A8%8B/#14","title":"1.4 \u603b\u7ed3","text":"<ul> <li>\u771f\u6b63\u53ef\u4ee5\u542f\u52a8\u4e00\u4e2a\u7ebf\u7a0b\u7684\u662f<code>async</code>\uff08\u51fd\u6570\uff09\u548c<code>thread</code>\uff08\u7c7b\uff09</li> <li><code>future</code>\u4f7f\u83b7\u53d6\u7ebf\u7a0b\u51fd\u6570\u6267\u884c\u7ed3\u679c\u66f4\u65b9\u4fbf</li> <li><code>packaged_task</code>\u4e00\u822c\u7528\u4e8e\u7ebf\u7a0b\u6c60\u5b9e\u73b0</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E7%BA%BF%E7%A8%8B/#2","title":"2 \u7ebf\u7a0b\u9501","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E7%BA%BF%E7%A8%8B/#21-mutexlock","title":"2.1 mutex\u548clock","text":"<ul> <li><code>mutex</code>\uff1a\u4e92\u65a5\u91cf\u53ef\u4ee5\u76f4\u63a5\u9501\u4f4f\uff0c\u4f46\u901a\u5e38\u4f1a\u901a\u8fc7lock_guard\u6765\u9501</li> <li><code>recursive_mutex</code>:\u540c<code>mutex</code>\uff0c\u4e00\u822c\u4f7f\u7528\u5faa\u73af\u4e2d\uff0c\u5982\u4e00\u4e2a\u51fd\u6570\u8c03\u7528\u53e6\u4e00\u4e2a\u51fd\u6570\uff0c\u8fd92\u4e2a\u51fd\u6570\u90fd\u6301\u6709\u76f8\u540c\u7684metux\uff0c\u8fd9\u662f<code>recursive_mutex</code>\u5c31\u80fd\u907f\u514d\u6b7b\u5faa\u73af\u95ee\u9898</li> <li><code>lock_guard</code>\uff1a\u6301\u6709mutex\uff0c\u9501\u4f4f\u5e76\u81ea\u52a8\u91ca\u653e\u9501</li> <li><code>unique_lock</code>:\u540c<code>lock_guard</code>\uff0c\u4f46\u591a\u4e86\u4e9b\u5176\u5b83\u63a7\u5236\u51fd\u6570\uff0c\u6bd4\u5982\u53ef\u4ee5\u4e3b\u52a8\u8c03\u7528<code>unique_lock::unlock()</code>\u89e3\u9501</li> </ul> <pre><code>#include&lt;mutex&gt;\n#include&lt;iostream&gt;\nusing namespace std;\nint add(int x, int y)\n{\ncout &lt;&lt; \"x + y = \" &lt;&lt; x + y &lt;&lt; endl;\nreturn x + y;\n}\n\nint main()\n{\n//metux\n{\nmutex mt;\n{\nmt.lock();\nadd(2, 3);\nmt.unlock();\n}\n{\nlock_guard&lt;mutex&gt; lg(mt);\nadd(2, 3);\n}\n{\nunique_lock&lt;mutex&gt; ulg(mt);\nadd(2, 3);\nulg.unlock();\n}\n}\n\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E7%BA%BF%E7%A8%8B/#22-condition_variable","title":"2.2 condition_variable","text":"<p><code>condition_variable</code>\u6761\u4ef6\u53d8\u91cf\uff0c\u987e\u540d\u601d\u4e49\u5c31\u662f\u7528\u6765\u5f53\u8fbe\u5230\u67d0\u4e00\u6761\u4ef6\u65f6\u624d\u53bb\u6267\u884c\u67d0\u4e00\u64cd\u4f5c\u3002 - <code>condition_variable</code>\u4e0e<code>unique_lock</code>\u4e00\u540c\u4f7f\u7528 - <code>condition_variable</code>\u6709\u51e0\u4e2a\u91cd\u8981\u51fd\u6570   - <code>condition_variable::notify_one()</code>\uff1a\u5524\u9192\u4e00\u4e2a\u7b49\u5f85\u7ebf\u7a0b   - <code>condition_variable::notify_notify_all</code>\uff1a\u5524\u9192\u6240\u6709\u7b49\u5f85\u7ebf\u7a0b   - <code>condition_variable::wait(unique_lock,bool);</code>\uff1a\u7b49\u5f85\u6761\u4ef6\u6ee1\u8db3 - \u793a\u4f8b\u5982\u4e0b</p> <pre><code>#include&lt;future&gt;\n#include&lt;thread&gt;\n#include&lt;condition_variable&gt;\n#include&lt;mutex&gt;\n#include&lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n//condition_variable\n{\nmutex mt;\nbool b = false;\ncondition_variable cv;\nfuture&lt;void&gt; fv = async([&amp;cv,&amp;mt,&amp;b] {\nunique_lock&lt;mutex&gt; ug(mt);\ncv.wait(ug, [&amp;b] {              return b;\n});\ncout &lt;&lt; \"hello world!\" &lt;&lt; endl; });\nthread t([&amp;cv, &amp;mt, &amp;b] {\nunique_lock&lt;mutex&gt; ug(mt);\ncv.notify_one();\nb = true;\ncout &lt;&lt; \"notify\" &lt;&lt; endl;\n});     fv.get();\nt.join();\n}\n}\n</code></pre> <p>\u8f93\u51fa\u7ed3\u679c</p> <pre><code>notify\nhello world!\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E7%BA%BF%E7%A8%8B/#23-atomic","title":"2.3 atomic","text":"<p><code>atomic</code>\u7528\u6765\u5904\u7406\u539f\u5b50\u64cd\u4f5c\uff0c\u6bd4\u5982\u5bf9\u4e00\u4e2a\u6570\u636e\u8bfb\u5199\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\uff0c\u6216\u8005\u4f5c\u4e3a\u4e00\u4e2a\u6761\u4ef6\u5728\u67d0\u4e9b\u573a\u5408\u53ef\u4ee5\u53d6\u4ee3<code>condition_variable</code>\u3002</p> <pre><code>#include&lt;atomic&gt;\n#include&lt;iostream&gt;\nusing namespace std;\nint main()\n{\n//atomic\n{\natomic&lt;bool&gt; b(false);\nb.store(true);\nwhile (b.load())\n{\ncout &lt;&lt; \"hello world\" &lt;&lt; endl;\n}\n}\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E7%BA%BF%E7%A8%8B/#3","title":"3 \u7ebf\u7a0b\u6c60","text":"<ul> <li>\u5b9e\u73b0\u4ee3\u7801</li> </ul> <pre><code>#include&lt;functional&gt;\n#include&lt;type_traits&gt;\n#include&lt;memory&gt;\n#include&lt;mutex&gt;\n#include&lt;future&gt;\n#include&lt;atomic&gt;\n#include&lt;condition_variable&gt;\n#include&lt;thread&gt;\n#include&lt;queue&gt;\n#include&lt;vector&gt;\nclass ThreadPool\n{\nprivate:\nusing task = std::function&lt;void()&gt;;\nprivate:\nint m_tNum;//\u7ebf\u7a0b\u6c60\u5927\u5c0f\nint m_tunusedNum;//\u53ef\u7528\u7ebf\u7a0b\u6570\nstd::queue&lt;task&gt; m_tasks;//\u4efb\u52a1\u961f\u5217\nstd::vector&lt;std::thread&gt; m_threads;//\u7ebf\u7a0b\u5bb9\u5668\nstd::mutex m_m;\nstd::condition_variable m_cv;\nstd::atomic&lt;bool&gt; m_stop{ false };\npublic:\nThreadPool(const unsigned int&amp; sz);\n~ThreadPool();\ntemplate&lt;typename F, typename ...Args&gt;\nauto addTask(F&amp;&amp; f, Args&amp;&amp; ...args)-&gt;std::future&lt;typename std::result_of_t&lt;F(Args...)&gt;&gt;;\nprivate:\nvoid createThreadPool(const unsigned int&amp; sz);\n};\nThreadPool::ThreadPool(const unsigned int&amp; sz) :m_tNum(sz)\n{\n//\u521b\u5efa\u7ebf\u7a0b\ncreateThreadPool(sz);\n}\nThreadPool::~ThreadPool()\n{\nm_stop.store(true);\nm_cv.notify_all();\nfor (auto&amp; t : m_threads)\n{\nif (t.joinable())\nt.join();\n}\n\n}\nvoid ThreadPool::createThreadPool(const unsigned int&amp; sz)\n{\nfor (size_t i = 0; i &lt; sz; ++i)\n{\nm_threads.emplace_back([this]() {\nwhile (true)\n{\ntask t;\n{\nstd::unique_lock&lt;std::mutex&gt; lg(m_m);\n//\u6fc0\u6d3b\u6761\u4ef6\uff1a1.\u7ebf\u7a0b\u6c60\u4e0d\u518d\u4f7f\u7528\u30022.\u4efb\u52a1\u961f\u5217\u4e0d\u4e3a\u7a7a\u3002\nm_cv.wait(lg, [this]()-&gt;bool {\nreturn m_stop.load() || !m_tasks.empty();\n});\n//\u7ebf\u7a0b\u6c60\u4e0d\u518d\u4f7f\u7528\uff0c\u7ec8\u7ed3\u6b64\u7ebf\u7a0b\nif (m_stop.load())\nreturn;\n//\u4ece\u4efb\u52a1\u961f\u5217\u53d6\u51fa\u4efb\u52a1\uff0c\u5e76\u6267\u884c\nt = m_tasks.front();\nm_tasks.pop();\n}\n//\u6267\u884c\u4efb\u52a1\nt();\n}\n});\n}\n}\n\ntemplate&lt;typename F, typename ...Args&gt;\nauto ThreadPool::addTask(F&amp;&amp; f, Args&amp;&amp; ...args)-&gt;std::future&lt;typename std::result_of_t&lt;F(Args...)&gt;&gt;\n{\nusing RET_TYPE = typename std::result_of_t&lt;F(Args...)&gt;;\n//\u521b\u5efa\u667a\u80fd\u6307\u9488\u4fdd\u5b58 packaged_task\u7c7b\u578b\u5bf9\u8c61,packaged_task\u6301\u6709ET_TYPE()\u51fd\u6570\nauto sh_task = std::make_shared&lt;std::packaged_task&lt;RET_TYPE()&gt;&gt;(std::bind(std::forward&lt;F&gt;(f), std::forward&lt;Args&gt;(args)...));\n//\u5c06\u65b0\u4efb\u52a1\u653e\u5165\u4efb\u52a1\u961f\u5217\u4e2d\n{\nstd::unique_lock&lt;std::mutex&gt; lg(m_m);\n//\u5c06\u4efb\u52a1\u653e\u5165void()\u51fd\u6570\u4e2d\uff0c\u518d\u653e\u5165\u4efb\u52a1\u961f\u5217\u4e2d\nm_tasks.emplace([sh_task] {\n(*sh_task)();\n});\n}\n//\u5524\u9192\u4e00\u4e2a\u7ebf\u7a0b\nm_cv.notify_one();\nreturn sh_task-&gt;get_future();\n}\n</code></pre> <ul> <li>\u6d4b\u8bd5\u4ee3\u7801</li> </ul> <pre><code>#include&lt;iostream&gt;\nusing namespace std;\nint main() {\nThreadPool pool(5);\nvector&lt;future&lt;int&gt;&gt; res;\nfor (size_t i = 0; i &lt; 5; i++)\n{\nres.emplace_back(pool.addTask([](int j) {\nprintf(\"\u51fd\u6570%d,\u7ebf\u7a0bID %d\\n\",j,this_thread::get_id());\nreturn j*j;\n},i));\n}\nfor (auto &amp; elm:res)\n{\ncout &lt;&lt; elm.get() &lt;&lt; endl;\n}   }\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E7%BA%BF%E7%A8%8B/#2-linux-pthread","title":"2 Linux pthread","text":"<ul> <li>\u6ce8\u610f\u4e8b\u9879</li> <li>\u5728\u7f16\u8bd1\u4ee3\u7801\u65f6\u9700\u8981\u52a0\u4e0a<code>-pthread</code>\u9009\u9879</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E7%BA%BF%E7%A8%8B/#1_1","title":"1 \u7ebf\u7a0b","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E7%BA%BF%E7%A8%8B/#11","title":"1.1 \u7ebf\u7a0b\u521b\u5efa","text":"<pre><code>\u7ebf\u7a0b\u51fd\u6570\u4e00\u5b9a\u8981\u58f0\u660e\u79f0`void* fun(void*)`\u7c7b\u578b\n</code></pre> <ul> <li>\u7ebf\u7a0b\u521b\u5efa\u4f7f\u7528\u51fd\u6570</li> <li><code>pthread_self()</code>:\u83b7\u53d6\u5f53\u524d\u7ebf\u7a0bid</li> <li><code>int pthread_create(pthread_t *thread, const pthread_attr_t *attr,void *(*start_routine) (void *), void *arg)</code>:\u521b\u5efa\u4e00\u4e2a\u7ebf\u7a0b,\u7ebf\u7a0b\u51fd\u6570\u53ef\u4ee5\u662f\u9759\u6001\u7c7b\u6210\u5458\u51fd\u6570\uff0c\u53ef\u4ee5\u662f\u666e\u901a\u51fd\u6570\uff0c\u4f46\u4e0d\u80fd\u662f\u7c7b\u975e\u9759\u6001\u6210\u5458\u51fd\u6570</li> <li><code>int pthread_join(pthread_t thread, void **retval)</code>:\u963b\u585e\u7b49\u5f85\u7ebf\u7a0b\u7ed3\u675f\uff0cretval\u53ef\u4ee5\u63a5\u6536\u7ebf\u7a0b\u9000\u51fa\u65f6\u8fd4\u56de\u7684\u6570\u636e<ul> <li><code>retval</code>:\u975eNULL\u5219\u542b\u6709\u7531<code>pthread_exit</code>\u6216\u51fd\u6570\u53d6\u6d88\u643a\u5e26\u7684\u8fd4\u56de\u503c</li> </ul> </li> <li><code>int pthread_detach(pthread_t thread)</code>:\u5206\u79bb\u7ebf\u7a0b\uff0c\u8ba9\u5176\u540e\u53f0\u8fd0\u884c</li> <li><code>void pthread_exit(void *retval)</code>:\u7ec8\u6b62\u5f53\u524d\u7ebf\u7a0b<ul> <li><code>retval</code>:\u8fd4\u56de\u7684\u503c\uff0c\u53ef\u4ee5\u5728pthread_join\u7b2c2\u4e2a\u53c2\u6570\u83b7\u53d6</li> </ul> </li> <li>\u8bbe\u7f6e\u7ebf\u7a0b\u521b\u5efa\u5c5e\u6027</li> <li><code>int pthread_attr_init(pthread_attr_t *attr);</code>:\u521d\u59cb\u5316\u7ebf\u7a0b\u521b\u5efa\u5c5e\u6027\uff08<code>attr</code>\u53ef\u6709<code>pthread_attr_</code>\u5f00\u5934\u51fd\u6570\u8bbe\u7f6e\uff09</li> <li><code>int pthread_attr_destroy(pthread_attr_t *attr);</code>:\u91ca\u653e\u7ebf\u7a0b\u521b\u5efa\u5c5e\u6027</li> <li><code>pthread_exit</code>\uff1a\u7ebf\u7a0b\u9000\u51fa\uff0c\u53ef\u643a\u5e26\u9000\u51fa\u6570\u636e\uff0cpthread_join\u4e2d\u4f4e\u4e2a\u53c2\u6570\u83b7\u53d6</li> <li>\u7ebf\u7a0b\u53d6\u6d88\u51fd\u6570</li> <li><code>int pthread_cancel(pthread_t thread)</code>:\u53d6\u6d88\u7ebf\u7a0b<ul> <li><code>thread</code>:\u5f85\u53d6\u6d88\u7684\u7ebf\u7a0bid</li> </ul> </li> <li><code>int pthread_setcancelstate(int state, int *oldstate)</code>:\u8bbe\u7f6e\u7ebf\u7a0b\u662f\u5426\u53ef\u4ee5\u88ab\u53d6\u6d88\u7684\u72b6\u6001\uff0c\u51b3\u5b9a<code>pthread_cancel</code>\u53d1\u9001\u7684\u53d6\u6d88\u7ebf\u7a0b\u662f\u5426\u6709\u6548<ul> <li><code>state</code>:\u65b0\u72b6\u6001\uff0c\u53ef\u9009\u503c\u6709\uff1a<code>PTHREAD_CANCEL_ENABLE</code>\uff08\u53ef\u4ee5\u88ab\u53d6\u6d88\uff0c\uff09\u3001<code>PTHREAD_CANCEL_DISABLE</code>\uff08\u4e0d\u53ef\u4ee5\u88ab\u53d6\u6d88\uff09</li> <li><code>oldstate</code>:\u539f\u72b6\u6001</li> </ul> </li> <li><code>int pthread_setcanceltype(int type, int *oldtype)</code>:\u8bbe\u7f6e\u7ebf\u7a0b\u7684\u53d6\u6d88\u6a21\u5f0f<ul> <li><code>type</code>:\u65b0\u7c7b\u578b\uff0c\u53ef\u9009\u62e9\u6709\uff1a<code>PTHREAD_CANCEL_DEFERRED</code>\uff08\u5ef6\u8fdf\u53d6\u6d88\uff0c\u5728\u4e0b\u4e00\u4e2a\u53d6\u6d88\u70b9\u5904\uff09\u3001<code>PTHREAD_CANCEL_ASYNCHRONOUS</code>\uff08\u7acb\u5373\u53d6\u6d88\uff09</li> <li><code>oldtype</code>:\u539f\u7c7b\u578b</li> </ul> </li> <li><code>void pthread_testcancel(void)</code>:\u521b\u5efa\u7ebf\u7a0b\u53d6\u6d88\u70b9\uff0c\u5728<code>pthread_setcanceltype</code>\u8bbe\u7f6e\u7684<code>PTHREAD_CANCEL_ASYNCHRONOUS</code>\u7c7b\u578b\u4ee5\u53ca\u6709\u7ebf\u7a0b\u53d6\u6d88\u4e8b\u4ef6\u65f6\u9000\u51fa\u7ebf\u7a0b</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;pthread.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;ctype.h&gt;\n\n#define handle_error_en(en, msg) \\\n    do                           \\\n    {                            \\\n        errno = en;              \\\n        perror(msg);             \\\n        exit(EXIT_FAILURE);      \\\n    } while (0)\n\n#define handle_error(msg)   \\\n    do                      \\\n    {                       \\\n        perror(msg);        \\\n        exit(EXIT_FAILURE); \\\n    } while (0)\n\nstruct thread_info\n{                        /* Used as argument to thread_start() */\npthread_t thread_id; /* ID returned by pthread_create() */\nint thread_num;      /* Application-defined thread # */\nchar *argv_string;   /* From command-line argument */\n};\n\n/* Thread start function: display address near top of our stack,\n   and return upper-cased copy of argv_string */\n\nstatic void *\nthread_start(void *arg)\n{\nstruct thread_info *tinfo = arg;\nchar *uargv, *p;\n\nprintf(\"Thread %d: top of stack near %p; argv_string=%s\\n\",\ntinfo-&gt;thread_num, &amp;p, tinfo-&gt;argv_string);\n\nuargv = strdup(tinfo-&gt;argv_string);\nif (uargv == NULL)\nhandle_error(\"strdup\");\n\nfor (p = uargv; *p != '\\0'; p++)\n*p = toupper(*p);\n\nreturn uargv;\n}\n\nint main(int argc, char *argv[])\n{\nint s, tnum, opt, num_threads;\nstruct thread_info *tinfo;\npthread_attr_t attr;\nint stack_size;\nvoid *res;\n\n/* The \"-s\" option specifies a stack size for our threads */\n\nstack_size = -1;\nwhile ((opt = getopt(argc, argv, \"s:\")) != -1)\n{\nswitch (opt)\n{\ncase 's':\nstack_size = strtoul(optarg, NULL, 0);\nbreak;\n\ndefault:\nfprintf(stderr, \"Usage: %s [-s stack-size] arg...\\n\",\nargv[0]);\nexit(EXIT_FAILURE);\n}\n}\n\nnum_threads = argc - optind;\n\n/* Initialize thread creation attributes */\n\ns = pthread_attr_init(&amp;attr);\nif (s != 0)\nhandle_error_en(s, \"pthread_attr_init\");\n\nif (stack_size &gt; 0)\n{\ns = pthread_attr_setstacksize(&amp;attr, stack_size);\nif (s != 0)\nhandle_error_en(s, \"pthread_attr_setstacksize\");\n}\n\n/* Allocate memory for pthread_create() arguments */\n\ntinfo = calloc(num_threads, sizeof(struct thread_info));\nif (tinfo == NULL)\nhandle_error(\"calloc\");\n\n/* Create one thread for each command-line argument */\n\nfor (tnum = 0; tnum &lt; num_threads; tnum++)\n{\ntinfo[tnum].thread_num = tnum + 1;\ntinfo[tnum].argv_string = argv[optind + tnum];\n\n/* The pthread_create() call stores the thread ID into\n           corresponding element of tinfo[] */\n\ns = pthread_create(&amp;tinfo[tnum].thread_id, &amp;attr,\n&amp;thread_start, &amp;tinfo[tnum]);\nif (s != 0)\nhandle_error_en(s, \"pthread_create\");\n}\n\n/* Destroy the thread attributes object, since it is no\n       longer needed */\n\ns = pthread_attr_destroy(&amp;attr);\nif (s != 0)\nhandle_error_en(s, \"pthread_attr_destroy\");\n\n/* Now join with each thread, and display its returned value */\n\nfor (tnum = 0; tnum &lt; num_threads; tnum++)\n{\ns = pthread_join(tinfo[tnum].thread_id, &amp;res);\nif (s != 0)\nhandle_error_en(s, \"pthread_join\");\n\nprintf(\"Joined with thread %d; returned value was %s\\n\",\ntinfo[tnum].thread_num, (char *)res);\nfree(res); /* Free memory allocated by thread */\n}\n\nfree(tinfo);\nexit(EXIT_SUCCESS);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E7%BA%BF%E7%A8%8B/#12","title":"1.2 \u7ebf\u7a0b\u5c5e\u6027","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E7%BA%BF%E7%A8%8B/#2_1","title":"2 \u9501","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E7%BA%BF%E7%A8%8B/#21","title":"2.1 \u4e92\u65a5\u91cf","text":"<ul> <li>\u4e92\u65a5\u91cf\uff1a<code>pthread_mutex_t</code></li> <li>\u76f8\u5173\u51fd\u6570</li> <li><code>int pthread_mutex_init(pthread_mutex_t *restrict mutex,const pthread_mutexattr_t *restrict attr);</code>:\u521d\u59cb\u5316\u4e92\u65a5\u91cf\uff0cattr\u53ef\u4ee5\u4e3aNULL</li> <li><code>int pthread_mutex_lock(pthread_mutex_t *mutex);</code>:\u52a0\u9501</li> <li><code>int pthread_mutex_trylock(pthread_mutex_t *mutex);</code>:\u5c1d\u8bd5\u52a0\u9501</li> <li><code>int thread_mutex_unlock(pthread_mutex_t *mutex);</code>:\u89e3\u9501</li> <li><code>int pthread_mutex_destroy(pthread_mutex_t *mutex);</code>:\u9500\u6bc1\u4e92\u65a5\u91cf</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E7%BA%BF%E7%A8%8B/#22","title":"2.2 \u81ea\u65cb\u9501","text":"<ul> <li>\u7279\u70b9\uff1a\u7b49\u5f85\u9501\u65f6\uff0c\u5904\u4e8e\u5fd9\u7b49\u5f85\u72b6\u6001\uff0c\u8017\u8d39cpu\uff0c\u9002\u5408\u5728\u9501\u5360\u7528\u65f6\u95f4\u7279\u522b\u77ed\u7684\u573a\u666f\u4e0b\u4f7f\u7528</li> <li>\u81ea\u65cb\u9501\uff1a<code>pthread_spinlock_t</code></li> <li>\u76f8\u5173\u51fd\u6570</li> <li><code>int pthread_spin_init(pthread_spinlock_t *lock, int pshared);</code>:\u521d\u59cb\u5316\u81ea\u65cb\u9501</li> <li><code>int pthread_spin_lock(pthread_spinlock_t *lock);</code>:\u52a0\u81ea\u65cb\u9501</li> <li><code>int pthread_spin_trylock(pthread_spinlock_t *lock);</code>:\u5c1d\u8bd5\u52a0\u81ea\u65cb\u9501</li> <li><code>int pthread_spin_unlock(pthread_spinlock_t *lock);</code>:\u89e3\u81ea\u65cb\u9501</li> <li><code>int pthread_spin_destroy(pthread_spinlock_t *lock);</code>:\u9500\u6bc1\u81ea\u65cb\u9501</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E7%BA%BF%E7%A8%8B/#23","title":"2.3 \u6761\u4ef6\u53d8\u91cf","text":"<pre><code>pthread_cond_wait \u9700\u8981\u4f20\u5165\u4e00\u4e2a\u5df2\u7ecf\u52a0\u9501\u7684mutex\uff0c\u5f53\u963b\u585e\u65f6\uff0cmutex\u53c8\u88ab\u89e3\u9501\u3002\u5982\u679c\u63a5\u6536\u5230\u4fe1\u53f7\uff0cmutex\u53c8\u88ab\u52a0\u9501\uff0c\u6240\u4ee5pthread_cond_wait\u4e4b\u540e\u8fd8\u9700\u8981\u89e3\u9501\u3002\npthread_cond_signal \u6267\u884c\u524d\u4e5f\u9700\u8981\u5148\u5148\u52a0\u9501\uff0c\u6267\u884c\u5b8c\u518d\u89e3\u9501\n</code></pre> <ul> <li>\u6761\u4ef6\u53d8\u91cf\uff1a<code>pthread_cond_t</code></li> <li>\u76f8\u5173\u51fd\u6570</li> <li><code>int pthread_cond_init(pthread_cond_t *restrict cond,const pthread_condattr_t *restrict attr);</code>:\u521d\u59cb\u5316\u6761\u4ef6\u53d8\u91cf\uff0csttr\u53ef\u4e3aNULL</li> <li><code>int pthread_cond_timedwait(pthread_cond_t *restrict cond,pthread_mutex_t *restrict mutex,const struct timespec *restrict abstime);</code>:\u7b49\u5f85\u6307\u5b9a\u7684\u65f6\u95f4\uff0c\u65e0\u8bba\u662f\u5426\u88ab\u5524\u9192\u90fd\u5c06\u8fd4\u56de</li> <li><code>int pthread_cond_wait(pthread_cond_t *restrict cond,pthread_mutex_t *restrict mutex);</code>:\u963b\u585e\u7b49\u5f85\u88ab\u5524\u9192</li> <li><code>int pthread_cond_broadcast(pthread_cond_t *cond);</code>:\u5524\u9192\u6240\u6709\u963b\u585e\u5728\u6b64cond\u4e0a\u7684\u7ebf\u7a0b</li> <li><code>int pthread_cond_signal(pthread_cond_t *cond);</code>:\u5524\u9192\u4e00\u4e2a\u963b\u585e\u5728\u6b64cond\u4e0a\u7684\u7ebf\u7a0b</li> <li><code>int pthread_cond_destroy(pthread_cond_t *cond);</code>:\u9500\u6bc1\u6761\u4ef6\u53d8\u91cf</li> <li>pthread_cond_wait \u793a\u4f8b</li> </ul> <pre><code>pthread_mutex_lock(&amp;mut);\n\nwhile (!buffer_is_set())\npthread_cond_wait(&amp;cond, &amp;mut);\n\nconsume_buffer();\n\npthread_mutex_unlock(&amp;mut);\n</code></pre> <ul> <li>pthread_cond_signal \u4f2a\u4ee3\u7801</li> </ul> <pre><code> pthread_lock(&amp;mut);\n\nsetting_buffer(); /* Now buffer_is_set() will return true */\n\npthread_cond_signal(&amp;cond);\n\npthread_unlock(&amp;mut);\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E7%BA%BF%E7%A8%8B/#24","title":"2.4 \u8bfb\u5199\u9501","text":"<p>https://www.cnblogs.com/dins/p/pthread-rwlock-t.html - \u8bfb\u5199\u9501\uff1a<code>pthread_rwlock_t</code> - \u76f8\u5173\u51fd\u6570   - <code>int pthread_rwlock_init(pthread_rwlock_t * rwlock, const pthread_rwlockattr_t * attr);</code>:\u521d\u59cb\u5316\u8bfb\u5199\u9501   - <code>int pthread_rwlock_rdlock(pthread_rwlock_t *rwlock);</code>:\u52a0\u8bfb\u9501   - <code>int pthread_rwlock_wrlock(pthread_rwlock_t *rwlock);</code>:\u52a0\u5199\u9501   - <code>int pthread_rwlock_unlock(pthread_rwlock_t *rwlock);</code>:\u89e3\u8bfb\u5199\u9501   - <code>int pthread_rwlock_destroy(pthread_rwlock_t *rwlock);</code>:\u9500\u6bc1\u8bfb\u5199\u9501</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E8%AF%B4%E6%98%8E%E7%AC%A6/","title":"\u8bf4\u660e\u7b26","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E8%AF%B4%E6%98%8E%E7%AC%A6/#1-final","title":"1 final","text":"<ul> <li>\u529f\u80fd\uff1a</li> <li>\u9650\u5236\u865a\u51fd\u6570\u4e0d\u80fd\u5728\u6d3e\u751f\u7c7b\u4e2d\u91cd\u5199</li> <li>\u9650\u5236\u7c7b\u4e0d\u80fd\u88ab\u7ee7\u627f</li> <li>\u793a\u4f8b</li> </ul> <pre><code>struct Base\n{\nvirtual void foo();\n};\n\nstruct A : Base\n{\nvoid foo() final; // Base::foo is overridden and A::foo is the final override\nvoid bar() final; // Error: bar cannot be final as it is non-virtual\n};\n\nstruct B final : A // struct B is final\n{\nvoid foo() override; // Error: foo cannot be overridden as it is final in A\n};\n\nstruct C : B // Error: B is final\n{\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E8%AF%B4%E6%98%8E%E7%AC%A6/#2-override","title":"2 override","text":"<ul> <li>\u529f\u80fd\uff1a\u6307\u793a\u865a\u51fd\u6570\u91cd\u5199\u81ea\u57fa\u7c7b\u865a\u51fd\u6570</li> <li>\u793a\u4f8b</li> </ul> <pre><code>struct A\n{\nvirtual void foo();\nvoid bar();\n};\nstruct B : A\n{\nvoid foo() const override; // Error: B::foo does not override A::foo\n// (signature mismatch)\nvoid foo() override; // OK: B::foo overrides A::foo\nvoid bar() override; // Error: A::bar is not virtual\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E8%AF%B4%E6%98%8E%E7%AC%A6/#3-alignasalignof","title":"3 alignas\u548calignof","text":"<ul> <li>\u529f\u80fd\uff1a</li> <li><code>alignas</code>\u6307\u5b9a\u5185\u5b58\u5bf9\u9f50\u5b57\u8282\u6570</li> <li><code>alignof</code>\u8ba1\u7b97\u5185\u5b58\u5bf9\u9f50\u5b57\u8282\u6570(\u6ce8\uff1aalignof\u4e0d\u662f\u8bf4\u660e\u7b26\uff0c\u662f\u8fd0\u7b97\u7b26)</li> <li>\u793a\u4f8b</li> </ul> <pre><code>struct alignas(128) G1 {\nfloat f;\n};\nstruct G2\n{\nchar c1;\nG1 g;\nchar c2;\n};\nint main()\n{\nprintf(\"sizeof(G1)=%d  alignof(G1)=%d\\n\", sizeof(G1), alignof(G1));\nprintf(\"sizeof(G2)=%d  alignof(G2)=%d\\n\", sizeof(G2), alignof(G2));\nreturn 0;\n}\n//\u8f93\u51fa\u7ed3\u679c\n//sizeof(G1)=128  alignof(G1)=128\n//sizeof(G2)=384  alignof(G2)=128\n</code></pre> <ul> <li>\u4e0a\u4f8b\u4e2dG1\u548cG2\u7ed3\u6784\u7684\u5185\u5b58\u5e03\u5c40</li> </ul> <pre><code>1&gt;class G1  size(128):\n1&gt;  +---\n1&gt; 0    | f\n1&gt;  +---\n1&gt;class G2  size(384):\n1&gt;  +---\n1&gt; 0    | c1\n1&gt;      | &lt;alignment member&gt; (size=127)\n1&gt;128   | G1 g\n1&gt;256   | c2\n1&gt;      | &lt;alignment member&gt; (size=127)\n1&gt;  +---\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E8%AF%B4%E6%98%8E%E7%AC%A6/#4-explicit","title":"4 explicit","text":"<ul> <li>\u529f\u80fd\uff1a\u4f7f\u6784\u9020\u51fd\u6570\u6216\u8f6c\u6362\u51fd\u6570\u4e3a\u663e\u5f0f\uff0c\u5373\u5b83\u4e0d\u80fd\u7528\u4e8e\u9690\u5f0f\u8f6c\u6362\u548c\u590d\u5236\u521d\u59cb\u5316\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code>struct A\n{\nA(int) { }      // \u8f6c\u6362\u6784\u9020\u51fd\u6570\nA(int, int) { } // \u8f6c\u6362\u6784\u9020\u51fd\u6570 (C++11)\noperator bool() const { return true; }\nA&amp; operator =(int) { return *this; }\n};\n\nstruct B\n{\nexplicit B(int) { }\nexplicit B(int, int) { }\nexplicit operator bool() const { return true; }\n};\n\nint main()\n{\nA a1 = 1;      // OK\uff1a\u590d\u5236\u521d\u59cb\u5316\u9009\u62e9 A::A(int)\nA a2(2);       // OK\uff1a\u76f4\u63a5\u521d\u59cb\u5316\u9009\u62e9 A::A(int)\nA a3{ 4, 5 };   // OK\uff1a\u76f4\u63a5\u5217\u8868\u521d\u59cb\u5316\u9009\u62e9 A::A(int, int)\nA a4 = { 4, 5 }; // OK\uff1a\u590d\u5236\u5217\u8868\u521d\u59cb\u5316\u9009\u62e9 A::A(int, int)\nA a5 = (A)1;   // OK\uff1a\u663e\u5f0f\u8f6c\u578b\u8fdb\u884c static_cast\nif (a1);      // OK\uff1aA::operator bool()\nbool na1 = a1; // OK\uff1a\u590d\u5236\u521d\u59cb\u5316\u9009\u62e9 A::operator bool()\nbool na2 = static_cast&lt;bool&gt;(a1); // OK\uff1astatic_cast \u8fdb\u884c\u76f4\u63a5\u521d\u59cb\u5316\n\n//  B b1 = 1;      // \u9519\u8bef\uff1a\u590d\u5236\u521d\u59cb\u5316\u4e0d\u8003\u8651 B::B(int)\nB b2(2);       // OK\uff1a\u76f4\u63a5\u521d\u59cb\u5316\u9009\u62e9 B::B(int)\nB b3{ 4, 5 };   // OK\uff1a\u76f4\u63a5\u5217\u8868\u521d\u59cb\u5316\u9009\u62e9 B::B(int, int)\n//  B b4 = {4, 5}; // \u9519\u8bef\uff1a\u590d\u5236\u5217\u8868\u521d\u59cb\u5316\u4e0d\u8003\u8651 B::B(int,int)\nB b5 = (B)1;   // OK\uff1a\u663e\u5f0f\u8f6c\u578b\u8fdb\u884c static_cast\nif (b2);      // OK\uff1aB::operator bool()\n//  bool nb1 = b2; // \u9519\u8bef\uff1a\u590d\u5236\u521d\u59cb\u5316\u4e0d\u8003\u8651 B::operator bool()\nbool nb2 = static_cast&lt;bool&gt;(b2); // OK\uff1astatic_cast \u8fdb\u884c\u76f4\u63a5\u521d\u59cb\u5316\n}\n</code></pre> <ul> <li><code>explicit</code>+\u5e38\u91cf\u8868\u8fbe\u5f0f(C++20)</li> <li>\u793a\u4f8b</li> </ul> <pre><code>//c++20\u524d\ntemplate&lt;class T&gt;\nstruct wrapper {\ntemplate&lt;class U, std::enable_if_t&lt;std::is_convertible_v&lt;U, T&gt;&gt;* = nullptr&gt;\nwrapper(U const&amp; u) : t_(u) {}\n\ntemplate&lt;class U, std::enable_if_t&lt;!std::is_convertible_v&lt;U, T&gt;&gt;* = nullptr&gt;\nexplicit wrapper(U const&amp; u) : t_(u) {}\n\nT t_;\n};\n//C++20\u540e\ntemplate&lt;class T&gt; struct wrapper { template&lt;class U&gt; explicit(!std::is_convertible_v&lt;U, T&gt;) wrapper(U const&amp; u) : t_(u) {} T t_; };\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E9%9A%8F%E6%9C%BA%E6%95%B0/","title":"\u968f\u673a\u6570","text":"<p>\u6ce8\uff1a\u8ba1\u7b97\u673a\u6ca1\u6709\u771f\u6b63\u7684\u968f\u673a</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E9%9A%8F%E6%9C%BA%E6%95%B0/#1-c","title":"1 c\u968f\u673a\u6570","text":"<p>c\u968f\u673a\u6570\u9700\u8981\u5148\u5206\u914d\u4e00\u4e2a\u968f\u673a\u6570\u79cd\u5b50\u7ed9<code>srand</code>\uff0c\u968f\u673a\u6570\u751f\u6210\u5b8c\u5168\u53d6\u51b3\u4e8e\u8fd9\u4e2a\u79cd\u5b50\uff0c\u5982\u679c\u8fd9\u4e2a\u79cd\u5b50\u76f8\u540c\uff0c\u6bcf\u6b21\u542f\u52a8\u7a0b\u5e8f\uff0c\u968f\u673a\u7684\u7ed3\u679c\u90fd\u4f1a\u4e00\u6837\uff0c\u901a\u5e38\u6211\u4eec\u4f7f\u7528\u65f6\u95f4\u6570\u636e\u6765\u4f5c\u4e3a\u8fd9\u4e2a\u79cd\u5b50\u3002 \u6b65\u9aa4\u5982\u4e0b\uff1a 1. <code>void srand(unsigned int __seed)</code> \u521d\u59cb\u968f\u673a\u6570\u79cd\u5b50 2. <code>int rand()</code> \u83b7\u53d6\u968f\u673a\u6570</p> <pre><code>#include &lt;cstdlib&gt;\n#include &lt;ctime&gt;\n#include &lt;stdio.h&gt;\nint main()\n{\nusing namespace std;\nsrand(time(NULL));\nfor (size_t i = 0; i &lt; 10; i++)\n{\nprintf(\"\u968f\u673a\u65701\uff1a%d\\n\", rand());\n}\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E9%9A%8F%E6%9C%BA%E6%95%B0/#2-c","title":"2 c++\u968f\u673a\u6570","text":"<p>c++\u6807\u51c6\u5e93\u63d0\u4f9b\u5f15\u64ce\u548c\u5206\u5e03\u6765\u6ee1\u8db3\u5927\u90e8\u5206\u968f\u673a\u6570\u7684\u9700\u6c42 - \u5934\u6587\u4ef6<code>random</code> - \u6b65\u9aa4\uff1a   1. \u521b\u5efa\u5f15\u64ce   2. \u8bbe\u7f6e\u968f\u673a\u6570\u79cd\u5b50   3. \u521b\u5efa\u5206\u5e03   4. \u751f\u6210\u968f\u673a\u6570</p> <p>\u4e0e c \u968f\u673a\u6570\u6bd4\u8f83\uff1a\u6b65\u9aa4 1 \u548c 2 \u5bf9\u5e94 c \u968f\u673a\u6570\u7684\u6b65\u9aa4 1\uff0c\u6b65\u9aa4 3 \u53ef\u4ee5\u6ca1\u6709\uff0c\u4f46\u5efa\u8bae\u91c7\u7528\uff0c\u6b65\u9aa4 4 \u5bf9\u5e94 c \u968f\u673a\u6570\u7684\u6b65\u9aa4 2\u3002 - \u793a\u4f8b\u4ee3\u7801</p> <pre><code>#include&lt;random&gt;\n#include&lt;iostream&gt;\n#include&lt;ctime&gt;\nusing namespace std;\nint main()\n{\n//1.\u521b\u5efa\u5f15\u64ce\ndefault_random_engine eg;\n//2.\u8bbe\u7f6e\u968f\u673a\u6570\u79cd\u5b50\neg.seed(time(NULL));\n\n//3.\u9009\u62e9\u5206\u5e03\nuniform_int_distribution&lt;int&gt; di(10, 20);\n//4.\u751f\u6210\u968f\u673a\u6570\nstd::cout &lt;&lt; \"uniform_int_distribution\u968f\u673a\u6570\" &lt;&lt; endl;\nfor (size_t i = 0; i &lt; 10; ++i)\n{\nstd::cout &lt;&lt; \"\u968f\u673a\u6570\" &lt;&lt; i &lt;&lt; \"=\" &lt;&lt; di(eg) &lt;&lt; endl;\n}\nstd::cout &lt;&lt; \"******************\" &lt;&lt; endl;\nstd::cout &lt;&lt; \"default_random_engine\u968f\u673a\u6570\" &lt;&lt; endl;\nfor (size_t i = 0; i &lt; 10; ++i)\n{\nstd::cout &lt;&lt; \"\u968f\u673a\u6570\" &lt;&lt; i &lt;&lt; \"=\" &lt;&lt; eg() &lt;&lt; endl;\n}\nstd::cout &lt;&lt; \"******************\" &lt;&lt; endl;\n}\n</code></pre> <ul> <li>\u53ef\u80fd\u7ed3\u679c</li> </ul> <pre><code>uniform_int_distribution\u968f\u673a\u6570\n\u968f\u673a\u65700=14\n\u968f\u673a\u65701=20\n\u968f\u673a\u65702=12\n\u968f\u673a\u65703=16\n\u968f\u673a\u65704=17\n\u968f\u673a\u65705=17\n\u968f\u673a\u65706=13\n\u968f\u673a\u65707=20\n\u968f\u673a\u65708=17\n\u968f\u673a\u65709=13\n******************\ndefault_random_engine\u968f\u673a\u6570\n\u968f\u673a\u65700=3159708447\n\u968f\u673a\u65701=2335960522\n\u968f\u673a\u65702=2934329899\n\u968f\u673a\u65703=3967235533\n\u968f\u673a\u65704=208943683\n\u968f\u673a\u65705=96685374\n\u968f\u673a\u65706=2652946313\n\u968f\u673a\u65707=1264354277\n\u968f\u673a\u65708=628896870\n\u968f\u673a\u65709=1091072451\n******************\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E9%9A%8F%E6%9C%BA%E6%95%B0/#21","title":"2.1 \u5f15\u64ce","text":"<ul> <li>\u5f15\u64ce\u662f\u968f\u673a\u6570\u7684\u6e90\u5934\uff0c\u662ffunction object\uff08\u51fd\u6570\u5bf9\u8c61\uff09\uff0c\u80fd\u591f\u4ea7\u751f\u968f\u673a\u7684\u65e0\u6b63\u8d1f\u503c\uff0c\u5e76\u5747\u5300\u7684\u5206\u5e03\u5728\u9884\u5b9a\u4e49\u7684\u6700\u5c0f\u6700\u5927\u503c\u4e4b\u95f4</li> <li>\u5f15\u64ce\u53ef\u8bbe\u7f6e\u79cd\u5b50\u6765\u4f7f\u4ea7\u751f\u4e0d\u540c\u7684\u968f\u673a\u6570</li> <li>\u5f15\u64ce\u6709\u591a\u79cd\uff0c\u5982</li> <li><code>default_random_engine</code></li> <li><code>linear_congruential_engine</code></li> <li><code>mersenne_twister_engine</code></li> <li><code>subtract_with_carry_engine</code></li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E9%9A%8F%E6%9C%BA%E6%95%B0/#22","title":"2.2 \u5206\u5e03","text":"<ul> <li>\u5c06\u5f15\u64ce\u4ea7\u751f\u7684\u968f\u673a\u503c\u8f6c\u6362\u4e3a\u7b26\u5408\u7ed9\u5b9a\u7684\u5206\u5e03\u5728\u67d0\u4e00\u533a\u95f4\u7684\u968f\u673a\u6570\u3002</li> <li>\u5206\u5e03\u6709\u5f88\u591a\uff0c\u5982</li> <li><code>uniform_int_distribution</code></li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E9%9A%8F%E6%9C%BA%E6%95%B0/#3","title":"3 \u53c2\u8003\u8d44\u6599","text":"<p>c++\u968f\u673a\u6570\u6d89\u53ca\u4e86\u8bb8\u591a\u4e0d\u540c\u5b9e\u73b0\u7684\u5f15\u64ce\u548c\u5206\u5e03\uff0c\u8be6\u7ec6\u8d44\u6599\u8bf7\u53c2\u8003cppreference</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8/","title":"\u9884\u5904\u7406\u5668","text":"<pre><code>`module`\u00a0\u548c\u00a0`import`\u00a0\u6307\u4ee4\u4e5f\u662f\u9884\u5904\u7406\u6307\u4ee4\u3002(C++20 \u8d77)\n</code></pre> <p>\u9884\u5904\u7406\u5668\u6709\u4e00\u4e0b\u51e0\u7c7b - \u6709\u6761\u4ef6\u7f16\u8bd1\u6e90\u6587\u4ef6\u7684\u67d0\u4e9b\u90e8\u5206\uff08\u7531\u00a0<code>#if\u3001#ifdef\u3001#ifndef\u3001#else\u3001#elif\u3001#elifdef\u3001#elifndef\u00a0(C++23 \u8d77)\u00a0\u548c\u00a0#endif</code>\u00a0\u6307\u4ee4\u63a7\u5236\uff09\u3002 - \u66ff\u6362 \u6587\u672c\u5b8f\uff0c\u540c\u65f6\u53ef\u80fd\u5bf9\u6807\u8bc6\u7b26\u8fdb\u884c\u62fc\u63a5\u6216\u52a0\u5f15\u53f7\uff08\u7531\u00a0<code>#define</code>\u00a0\u548c\u00a0<code>#undef</code>\u00a0\u6307\u4ee4\u4e0e\u00a0<code>#\u00a0\u548c\u00a0##</code>\u00a0\u8fd0\u7b97\u7b26\u63a7\u5236\uff09\u3002 - \u5305\u542b \u5176\u4ed6\u6587\u4ef6\uff08\u7531\u00a0<code>#include</code>\u00a0\u6307\u4ee4\u63a7\u5236\u5e76\u4ee5\u00a0<code>__has_include</code>\u00a0\u68c0\u67e5\u00a0(C++17 \u8d77)\uff09\u3002 - \u5bfc\u81f4\u9519\u8bef\u6216\u8b66\u544a(C++23 \u8d77)\uff08\u7531\u6307\u4ee4\u00a0<code>#error</code>\u00a0\u6216\u00a0<code>#warning</code>\u00a0(C++23 \u8d77)\u00a0\u63a7\u5236\uff09\u3002 - \u7531\u5b9e\u73b0\u5b9a\u4e49\u7684\u884c\u4e3a\uff08\u7531\u00a0<code>#pragma</code>\u00a0\u6307\u4ee4\u548c\u00a0<code>_Pragma</code>\u00a0\u8fd0\u7b97\u7b26\u00a0(C++11 \u8d77) \u63a7\u5236\uff09\u3002 - \u5bf9\u9884\u5904\u7406\u5668\u53ef\u7528\u7684\u6587\u4ef6\u540d\u548c\u884c\u4fe1\u606f\uff08\u7531\u00a0<code>#line</code>\u00a0\u6307\u4ee4\u63a7\u5236\uff09</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8/#1","title":"1 \u6761\u4ef6\u5305\u542b","text":"<pre><code>- `#if\u3001#elif\u3001#else`\u662f\u4e00\u7ec4\u3002\n- `#ifdef\u3001#ifndef\u3001#elifdef\u3001#elifndef\u3001#endif`\u662f\u4e00\u7ec4\u3002\n</code></pre> <ul> <li>\u8bed\u6cd5\u5982\u4e0b\uff1a</li> </ul> \u8bed\u6cd5 \u6ce8\u91ca <code>#if</code> \u8868\u8fbe\u5f0f <code>#if 0</code> \u8fd9\u4e2a\u6761\u4ef6\u662f\u5047 <code>#elif</code> \u8868\u8fbe\u5f0f <code>#else</code> <code>#ifdef</code> \u6807\u8bc6\u7b26 \u7b49\u4ef7\u4e8e <code>#if defined</code> <code>#ifndef</code> \u6807\u8bc6\u7b26 \u7b49\u4ef7\u4e8e <code>#if !defined</code> <code>#elifdef</code> \u6807\u8bc6\u7b26 (C++23 \u8d77) \u7b49\u4ef7\u4e8e<code>#elif defined</code> <code>#elifndef</code> \u6807\u8bc6\u7b26 (C++23 \u8d77) \u7b49\u4ef7\u4e8e <code>#elif !defined</code> <code>#endif</code> <ul> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>#define ABCD 2\n#include &lt;iostream&gt;\n\nint main()\n{\n\n#ifdef ABCD\nstd::cout &lt;&lt; \"1: yes\\n\";\n#else\nstd::cout &lt;&lt; \"1: no\\n\";\n#endif\n\n#ifndef ABCD\nstd::cout &lt;&lt; \"2: no1\\n\";\n#elif ABCD == 2\nstd::cout &lt;&lt; \"2: yes\\n\";\n#else\nstd::cout &lt;&lt; \"2: no2\\n\";\n#endif\n\n#if !defined(DCBA) &amp;&amp; (ABCD &lt; 2*4-3)\nstd::cout &lt;&lt; \"3: yes\\n\";\n#endif\n\n\n// \u6ce8\u610f\u82e5\u7f16\u8bd1\u5668\u4e0d\u652f\u6301 C++23 \u7684 #elifdef/#elifndef \u6307\u4ee4\u5219\u4f1a\u9009\u62e9\u201c\u4e0d\u671f\u5f85\u201d\u5757\uff08\u89c1\u540e\u8ff0\uff09\u3002\n#ifdef CPU\nstd::cout &lt;&lt; \"4: no1\\n\";\n#elifdef GPU\nstd::cout &lt;&lt; \"4: no2\\n\";\n#elifndef RAM\nstd::cout &lt;&lt; \"4: yes\\n\"; // \u671f\u5f85\u7684\u5757\n#else\nstd::cout &lt;&lt; \"4: no!\\n\"; // \u7531\u4e8e\u8df3\u8fc7\u672a\u77e5\u7684\u6307\u4ee4\u4e0d\u671f\u5f85\u5730\u9009\u62e9\u6b64\u5757\n// \u5e76\u76f4\u63a5\u4ece \"#ifdef CPU\" \u201c\u8df3\u201d\u5230\u6b64 \"#else\" \u5757\n#endif\n\n// \u4e3a\u4fee\u590d\u6b64\u95ee\u9898\uff0c\u6211\u4eec\u53ef\u4ee5\u6761\u4ef6\u6027\u5730\u4ec5\u82e5\u652f\u6301 C++23 \u6307\u4ee4 #elifdef/#elifndef\n// \u624d\u5b9a\u4e49 ELIFDEF_SUPPORTED \u5b8f\u3002\n#if 0\n#elifndef UNDEFINED_MACRO\n#define ELIFDEF_SUPPORTED\n#else\n#endif\n\n#ifdef ELIFDEF_SUPPORTED\n#ifdef CPU\nstd::cout &lt;&lt; \"4: no1\\n\";\n#elifdef GPU\nstd::cout &lt;&lt; \"4: no2\\n\";\n#elifndef RAM\nstd::cout &lt;&lt; \"4: yes\\n\"; // \u671f\u5f85\u7684\u5757\n#else\nstd::cout &lt;&lt; \"4: no3\\n\";\n#endif\n#else // \u4e0d\u652f\u6301 #elifdef \u65f6\u4f7f\u7528\u7d2f\u8d58\u7684\u65e7 `#elif defined`\n#ifdef CPU\nstd::cout &lt;&lt; \"4: no1\\n\";\n#elif defined GPU\nstd::cout &lt;&lt; \"4: no2\\n\";\n#elif !defined RAM\nstd::cout &lt;&lt; \"4: yes\\n\"; // \u671f\u5f85\u7684\u5757\n#else\nstd::cout &lt;&lt; \"4: no3\\n\";\n#endif\n#endif\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8/#2","title":"2 \u6587\u672c\u66ff\u6362\u5b8f","text":"<ul> <li>\u8bed\u6cd5: | \u8bed\u6cd5 | \u6ce8\u91ca | | ------------------------------------ | ---------- | | <code>#define</code> \u6807\u8bc6\u7b26 \u66ff\u6362\u5217\u8868(\u53ef\u9009) | | | <code>#define</code> \u6807\u8bc6\u7b26(\u5f62\u53c2) \u66ff\u6362\u5217\u8868(\u53ef\u9009) | | | <code>#define</code> \u6807\u8bc6\u7b26(\u5f62\u53c2, ... )\u66ff\u6362\u5217\u8868(\u53ef\u9009) | (C++11 \u8d77) | | <code>#define</code> \u6807\u8bc6\u7b26( ... )\u66ff\u6362\u5217\u8868(\u53ef\u9009) | (C++11 \u8d77) | | <code>#undef</code> \u6807\u8bc6\u7b26* | |</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B/%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8/#3","title":"3 \u6e90\u6587\u4ef6\u5305\u542b","text":"<pre><code>`#include`\u53ea\u662f\u628a\u5176\u5b83\u6587\u4ef6*\u5b8c\u6574\u7684\u62f7\u8d1d\u5230*\u5f53\u524d\u6587\u4ef6\u4e2d\u3002\uff08\u5728#include\u884c\u7684\u4f4d\u7f6e\u66ff\u6362\uff09\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u5c06\u5176\u4ed6\u6e90\u6587\u4ef6\u5305\u542b\u5230\u5f53\u524d\u6e90\u6587\u4ef6\u4e2d\u7d27\u968f\u6307\u4ee4\u4e4b\u540e\u7684\u4e00\u884c\u3002</li> <li> <p>\u8bed\u6cd5\uff1a | \u8bed\u6cd5 | \u6ce8\u91ca | | ------------------------------------------------------------ | ---------- | | <code>#include &lt; h\u5b57\u7b26\u5e8f\u5217 &gt;</code> \u6362\u884c | | | <code>#include \" q\u5b57\u7b26\u5e8f\u5217 \"</code> \u6362\u884c | | | <code>#include</code> \u8bb0\u53f7\u5e8f\u5217 \u6362\u884c | | | <code>__has_include ( \" q\u5b57\u7b26\u5e8f\u5217 \" )</code> \u548c <code>__has_include ( &lt; h\u5b57\u7b26\u5e8f\u5217 &gt; )</code> | (C++17 \u8d77) \u00a0\u68c0\u67e5\u4e00\u4e2a\u5934\u6216\u6e90\u6587\u4ef6\u662f\u5426\u53ef\u4ee5\u88ab\u5305\u542b\u3002| | <code>__has_include ( \u5b57\u7b26\u4e32\u5b57\u9762\u91cf )</code> \u548c <code>__has_include ( &lt; h\u8bb0\u53f7\u5e8f\u5217 &gt; )</code> | (C++17 \u8d77) |</p> </li> <li> <p>\u793a\u4f8b</p> </li> </ul> <pre><code>#if __has_include(&lt;optional&gt;)\n#  include &lt;optional&gt;\n#  define has_optional 1\ntemplate&lt;class T&gt; using optional_t = std::optional&lt;T&gt;;\n#elif __has_include(&lt;experimental/optional&gt;)\n#  include &lt;experimental/optional&gt;\n#  define has_optional -1\ntemplate&lt;class T&gt; using optional_t = std::experimental::optional&lt;T&gt;;\n#else\n#  define has_optional 0\n#  include &lt;utility&gt;\ntemplate&lt;class V&gt; class optional_t {\nV v_{}; bool has_{false};\npublic:\noptional_t() = default;\noptional_t(V&amp;&amp; v) : v_(v), has_{true} {}\nV value_or(V&amp;&amp; alt) const&amp; { return has_ ? v_ : alt; }\n/*...*/\n};\n#endif\n\n#include &lt;iostream&gt;\n\nint main()\n{\nif (has_optional &gt; 0)\nstd::cout &lt;&lt; \"&lt;optional&gt; \u5b58\u5728\\n\";\nelse if (has_optional &lt; 0)\nstd::cout &lt;&lt; \"&lt;experimental/optional&gt; \u5b58\u5728\\n\";\nelse\nstd::cout &lt;&lt; \"&lt;optional&gt; \u4e0d\u5b58\u5728\\n\";\n\noptional_t&lt;int&gt; op;\nstd::cout &lt;&lt; \"op = \" &lt;&lt; op.value_or(-1) &lt;&lt; '\\n';\nop = 42;\nstd::cout &lt;&lt; \"op = \" &lt;&lt; op.value_or(-1) &lt;&lt; '\\n';\n}\n</code></pre> <ul> <li>\u53ef\u80fd\u7684\u8f93\u51fa</li> </ul> <pre><code>&lt;optional&gt; \u5b58\u5728\nop = -1\nop = 42\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/addressof/","title":"std::addressof","text":"<ul> <li>\u529f\u80fd\uff1a\u83b7\u53d6\u4f20\u5165\u5bf9\u8c61\u6216\u51fd\u6570\u7684\u5730\u5740</li> <li>\u4f7f\u7528\u573a\u666f</li> <li>\u83b7\u53d6\u51fd\u6570\u6307\u9488\uff0c\u4f46\u51fd\u6570\u4e0d\u80fd\u6709\u91cd\u8f7d(\u5373\u540c\u540d\u51fd\u6570)</li> <li>\u5f53\u5bf9\u8c61\u5df2\u5b9e\u73b0\u4e86<code>operator&amp;</code>\u53d6\u5730\u5740\u8fd0\u7b97\u7b26\u65f6\uff0c\u4e14\u6b64\u53d6\u5730\u5740\u8fd4\u56de\u7684\u4e0d\u662f\u8be5\u5bf9\u8c61\u5b9e\u9645\u5730\u5740\u65f6</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;memory&gt;\nvoid fun() {\nprintf(\"fun\");\n}\nint main()\n{\nint i = 2;\nauto pFun=std::addressof(fun);\npFun();\nauto pi=std::addressof(i);\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790\uff1a</li> <li><code>addressof</code>\u51fd\u6570\u67092\u79cd\u91cd\u8f7d\uff0c\u4e00\u79cd\u9488\u5bf9\u5bf9\u8c61\u7c7b\u578b\uff0c\u4e00\u79cd\u9488\u5bf9\u975e\u5bf9\u8c61\u7c7b\u578b<ul> <li>\u9488\u5bf9\u5bf9\u8c61\u7248\uff1a\u5c06\u4f20\u5165\u5bf9\u8c61\u5148\u5f3a\u5236\u8f6c\u6362char&amp;\uff0c\u5728\u53d6char&amp;\u5730\u5740\uff0c\u6700\u540e\u5f3a\u5236\u8f6c\u6362T*,\u8fd9\u6837\u5c31\u4e0d\u4f1a\u8c03\u7528\u5bf9\u8c61\u7684\u91cd\u8f7d\u7248\u672c<code>operator&amp;</code></li> <li>\u9488\u5bf9\u975e\u5bf9\u8c61\u7248\uff0c\u76f4\u63a5\u53d6\u5730\u5740\u5373\u53ef</li> </ul> </li> <li>\u5c06<code>addressof(const _Ty&amp;&amp;)</code>\u53f3\u503c\u91cd\u8f7d\u5220\u9664\uff0c\u7981\u6b62\u4e34\u65f6\u5bf9\u8c61\u7684\u4f20\u5165</li> </ul> <pre><code>//\u4ee5\u4e0b\u662f\u53ef\u80fd\u7684\u5b9e\u73b0\u65b9\u5f0f\n//\u901a\u8fc7enable_if\u6765\u51b3\u5b9a\u8c03\u7528\u54ea\u4e00\u4e2aaddressof\u7684\u5b9e\u73b0\n//\u51fd\u65701 \u5f53T\u662f\u5bf9\u8c61\u65f6\uff0c\u8c03\u7528\u8fd9\u4e2a\u5b9e\u73b0\uff0c\u8fd4\u56de\u7c7b\u578b\u662fT*\ntemplate&lt;class T&gt;\ntypename std::enable_if&lt;std::is_object&lt;T&gt;::value, T*&gt;::type  addressof(T&amp; arg) noexcept\n{\nreturn reinterpret_cast&lt;T*&gt;(\n&amp;const_cast&lt;char&amp;&gt;(\nreinterpret_cast&lt;const volatile char&amp;&gt;(arg)));\n}\n//\u51fd\u65702 \u5f53T\u662f\u975e\u5bf9\u8c61\u7c7b\u578b\u65f6\uff0c\u8c03\u7528\u8fd9\u4e2a\u5b9e\u73b0\ntemplate&lt;class T&gt;\ntypename std::enable_if&lt;!std::is_object&lt;T&gt;::value, T*&gt;::type addressof(T&amp; arg) noexcept\n{\nreturn &amp;arg;\n}\n//\u5220\u9664\u53f3\u503c\u91cd\u8f7d\uff0c\u7981\u6b62\u4e34\u65f6\u5bf9\u8c61\u7684\u4f20\u5165\uff0c\u5373addressof(2)\u8fd9\u79cd\u7c7b\u578b\u4f1a\u7f16\u8bd1\u62a5\u9519\ntemplate &lt;class _Ty&gt;\nconst _Ty* addressof(const _Ty&amp;&amp;) = delete;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/addressof/#1-operator","title":"1 \u4e0e\u53d6\u5730\u5740\u8fd0\u7b97\u7b26<code>operator&amp;</code>\u6bd4\u8f83","text":"<ul> <li>\u533a\u522b\uff1a\u5f53\u5bf9\u8c61\u5b9e\u73b0\u4e86\u81ea\u5b9a\u4e49\u7684<code>operator&amp;</code>\u53d6\u5730\u5740\u8fd0\u7b97\u7b26\u65f6\uff0c\u4e14\u8fd4\u56de\u7684\u5730\u5740\u4e0d\u662f\u672c\u5bf9\u8c61\u7684\u5b9e\u9645\u5730\u5740\uff0c\u8fd9\u65f6\u8fd0\u7528<code>&amp;T</code>\u5c06\u4f1a\u5f97\u5230\u975e\u9884\u671f\u7684T\u7c7b\u578b\u5bf9\u8c61\u5730\u5740\uff0c\u800c<code>addressof</code>\u5c06\u59cb\u7ec8\u8fd4\u56de\u5b9e\u9645\u7684\u5bf9\u8c61\u5730\u5740</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n\ntemplate&lt;class T&gt;\nstruct Ptr {\nT* pad; // \u589e\u52a0\u586b\u5145\u4ee5\u663e\u793a\u2018 this \u2019\u548c\u2018 data \u2019\u7684\u533a\u522b\nT* data;\nPtr(T* arg) : pad(nullptr), data(arg) {\nstd::cout &lt;&lt; \"Ctor this = \" &lt;&lt; this &lt;&lt; std::endl;\n}\n\n~Ptr() { delete data; }\nT** operator&amp;() { return &amp;data; }\n};\n\ntemplate&lt;class T&gt;\nvoid f(Ptr&lt;T&gt;* p) {\nstd::cout &lt;&lt; \"Ptr   overload called with p = \" &lt;&lt; p &lt;&lt; '\\n';\n}\n\nvoid f(int** p) {\nstd::cout &lt;&lt; \"int** overload called with p = \" &lt;&lt; p &lt;&lt; '\\n';\n}\n\nint main() {\nPtr&lt;int&gt; p(new int(42));\nf(&amp;p);                 // \u8c03\u7528 int** \u91cd\u8f7d\nf(std::addressof(p));  // \u8c03\u7528 Ptr&lt;int&gt;* \u91cd\u8f7d\uff0c\uff08 = this \uff09\n}\n</code></pre> <ul> <li>\u8f93\u51fa\u7ed3\u679c</li> </ul> <pre><code>Ctor this = 00EFFB80\nint** overload called with p = 00EFFB84\nPtr   overload called with p = 00EFFB80\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/bind/","title":"bind","text":"<ul> <li>\u5305\u542b\u6587\u4ef6:<code>#include &lt;functional&gt;</code></li> <li>\u529f\u80fd\uff1a\u51fd\u6570\u6a21\u677f bind \u751f\u6210 f \u7684\u8f6c\u53d1\u8c03\u7528\u5305\u88c5\u5668</li> <li>\u7ed1\u5b9a\u666e\u901a\u51fd\u6570</li> <li>\u7ed1\u5b9a\u7c7b\u6210\u5458\u51fd\u6570</li> <li>\u7ed1\u5b9a\u7c7b\u6210\u5458\u53d8\u91cf</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/bind/#1","title":"1 \u7ed1\u5b9a\u666e\u901a\u51fd\u6570","text":"<ul> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;functional&gt;\nint sum(int a,int b){\nreturn a+b;\n}\nint main(){\nstd::bind&lt;int&gt;(sum,1,2);//\u663e\u5f0f\u8fd4\u56de\u7c7b\u578b\nstd::bind(sum,1,2);//\u9690\u5f0f\u8fd4\u56de\u7c7b\u578b\n\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/bind/#2","title":"2 \u7ed1\u5b9a\u7c7b\u6210\u5458\u51fd\u6570\u548c\u7c7b\u6210\u5458\u53d8\u91cf","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a</li> <li>\u6210\u5458\u51fd\u6570\uff1a<code>bind(&amp;A::fun, &amp;obj, parm1, parm2)</code></li> <li>\u6210\u5458\u53d8\u91cf\uff1a<code>bind(&amp;A::i, &amp;obj)</code></li> <li>\u6ce8\u610f\u4e8b\u9879</li> <li>\u7ed1\u5b9a\u6210\u5458\u9700\u8981\u63d0\u4f9b\u5177\u4f53\u7684\u5bf9\u8c61</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include&lt;functional&gt;\n#include&lt;iostream&gt;\nclass A\n{\npublic:\nvoid fun(int i,int&amp; ir)\n{\nstd::cout &lt;&lt; \"i=\" &lt;&lt; i &lt;&lt; \" ir=\" &lt;&lt; ir &lt;&lt; std::endl;\n}\nint i;\n};\nint main() {\nA a;\nint i = 3;\nauto f1=std::bind(&amp;A::fun, &amp;a, 2, std::ref(i));\n//\u4f7f\u7528\u5360\u4f4d\u7b26\nauto f2 = std::bind(&amp;A::fun, std::placeholders::_1, std::placeholders::_2, std::placeholders::_3);\nf1();\nf2(a, 3, std::ref(i));\nauto f3=std::bind(&amp;A::i, &amp;a);\nauto f4 = std::bind(&amp;A::i, std::placeholders::_1);\na.i = 3;\nauto val1=f3();\nauto val21=f4(a);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/bind/#3","title":"3 \u6e90\u7801\u5206\u6790","text":"<ul> <li>bind\u51fd\u6570\u6a21\u677f\u539f\u578b\u67092\u4e2a\uff0c\u4e00\u4e2a\u5339\u914d\u9690\u5f0f\u8fd4\u56de\u7c7b\u578b\uff0c\u4e00\u4e2a\u5339\u914d\u663e\u5f0f\u8fd4\u56de\u7c7b\u578b</li> <li>\u4f7f\u7528<code>forward</code>\u8f6c\u53d1\u53c2\u6570\uff08\u7ed1\u5b9a\u7684\u51fd\u6570\uff0c\u4ee5\u53ca\u7ed1\u5b9a\u7684\u51fd\u6570\u7684\u53c2\u6570\uff09</li> <li>\u8c03\u7528<code>bind</code>\u51fd\u6570\u8fd4\u56de\u503c<code>_Binder</code>\u7c7b\u578b</li> </ul> <pre><code>// FUNCTION TEMPLATE bind (implicit return type)\ntemplate &lt;class _Fx, class... _Types&gt;\n_NODISCARD _CONSTEXPR20 _Binder&lt;_Unforced, _Fx, _Types...&gt; bind(_Fx&amp;&amp; _Func, _Types&amp;&amp;... _Args) {\nreturn _Binder&lt;_Unforced, _Fx, _Types...&gt;(_STD forward&lt;_Fx&gt;(_Func), _STD forward&lt;_Types&gt;(_Args)...);\n}\n\n// FUNCTION TEMPLATE bind (explicit return type)\ntemplate &lt;class _Ret, class _Fx, class... _Types&gt;\n_NODISCARD _CONSTEXPR20 _Binder&lt;_Ret, _Fx, _Types...&gt; bind(_Fx&amp;&amp; _Func, _Types&amp;&amp;... _Args) {\nreturn _Binder&lt;_Ret, _Fx, _Types...&gt;(_STD forward&lt;_Fx&gt;(_Func), _STD forward&lt;_Types&gt;(_Args)...);\n}\n</code></pre> <ul> <li><code>Binder</code>\u7c7b\u91cd\u8f7d\u4e86<code>operator ()</code>\u5b9e\u73b0\u51fd\u6570\u5bf9\u8c61\uff0c\u56e0\u6b64\u53ef\u4ee5bind\u8fd4\u56de\u7684\u5bf9\u8c61\u53ef\u4ee5\u4ee5\u51fd\u6570\u5f62\u5f0f\u8c03\u7528</li> </ul> <pre><code>template &lt;class _Ret, class _Fx, class... _Types&gt;\nclass _Binder : public _Binder_result_type&lt;_Ret, _Fx&gt;::type { // wrap bound callable object and arguments\nprivate:\nusing _Seq    = index_sequence_for&lt;_Types...&gt;;\nusing _First  = decay_t&lt;_Fx&gt;;\nusing _Second = tuple&lt;decay_t&lt;_Types&gt;...&gt;;\n\n_Compressed_pair&lt;_First, _Second&gt; _Mypair;\n\npublic:\nconstexpr explicit _Binder(_Fx&amp;&amp; _Func, _Types&amp;&amp;... _Args)\n: _Mypair(_One_then_variadic_args_t{}, _STD forward&lt;_Fx&gt;(_Func), _STD forward&lt;_Types&gt;(_Args)...) {}\n\n#define _CALL_BINDER                                                                  \\\n    _Call_binder(_Invoker_ret&lt;_Ret&gt;{}, _Seq{}, _Mypair._Get_first(), _Mypair._Myval2, \\\n        _STD forward_as_tuple(_STD forward&lt;_Unbound&gt;(_Unbargs)...))\n\ntemplate &lt;class... _Unbound&gt;\n_CONSTEXPR20 auto operator()(_Unbound&amp;&amp;... _Unbargs) noexcept(noexcept(_CALL_BINDER)) -&gt; decltype(_CALL_BINDER) {\nreturn _CALL_BINDER;\n}\n\ntemplate &lt;class... _Unbound&gt;\n_CONSTEXPR20 auto operator()(_Unbound&amp;&amp;... _Unbargs) const noexcept(noexcept(_CALL_BINDER))\n-&gt; decltype(_CALL_BINDER) {\nreturn _CALL_BINDER;\n}\n\n#undef _CALL_BINDER\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/declval/","title":"declval","text":"<ul> <li>\u5934\u6587\u4ef6\uff1a<code>utility</code></li> <li>\u529f\u80fd\uff1adeclval\u662f\u4e00\u4e2a\u6a21\u677f\u51fd\u6570\uff0c\u5e38\u4e0e<code>decltype</code>\u4e00\u8d77\u4f7f\u7528\uff0c\u4ee4\u5728 <code>decltype</code> \u8868\u8fbe\u5f0f\u4e2d\u4e0d\u5fc5\u7ecf\u8fc7\u6784\u9020\u51fd\u6570\u5c31\u80fd\u4f7f\u7528\u6210\u5458\u51fd\u6570</li> <li>\u6ce8\u610f\uff1a\u56e0\u4e3a<code>declval</code>\u53ea\u6709\u58f0\u660e\u6ca1\u6709\u5b9a\u4e49\uff0c\u56e0\u6b64\u53ea\u80fd\u7528\u5728\u4e0d\u6c42\u503c\u8bed\u5883\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528\u5728<code>decltype</code>\u4e2d</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;utility&gt;\n#include &lt;iostream&gt;\n\nstruct Default { int foo() const { return 1; } };\n\nstruct NonDefault\n{\nNonDefault() = delete;\nstring m_str;\nint foo() const { return 1; }\n};\n\nint main()\n{\ndecltype(Default().foo()) n1 = 1;                   // n1 \u7684\u7c7b\u578b\u662f int\n//  decltype(NonDefault().foo()) n2 = n1;               // \u9519\u8bef\uff1a\u65e0\u9ed8\u8ba4\u6784\u9020\u51fd\u6570\ndecltype(std::declval&lt;NonDefault&gt;().foo()) n2 = n1; // n2 \u7684\u7c7b\u578b\u662f int\ndecltype(std::declval&lt;NonDefault&gt;().m_str) n3;      //n3\u7684\u7c7b\u578b\u662fstring\ndecltype(std::declval&lt;Default&gt;()) n4=Default();     //n4\u662fDefault&amp;&amp;\u7c7b\u578b\uff0cdeclval\u8fd4\u56de\u7684\u5c31\u662f\u53f3\u503c\u5f15\u7528\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790\uff1a\u6a21\u677f\u51fd\u6570<code>declval</code>\uff08\u53ea\u58f0\u660e\u4e0d\u5b9a\u4e49\uff09\u6700\u7ec8\u8fd4\u56de\u7684\u662f_Ty\u53f3\u503c\u5f15\u7528\u7c7b\u578b</li> </ul> <pre><code>// STRUCT TEMPLATE _Add_reference\ntemplate &lt;class _Ty, class = void&gt;\nstruct _Add_reference { // add reference (non-referenceable type)\nusing _Lvalue = _Ty;\nusing _Rvalue = _Ty;\n};\n//\u5177\u4f53\u5316\u7248\u672c\uff0c\u5339\u914d&lt;_Ty,void&gt;\u7c7b\u578b\u6216\u7701\u7565\u7b2c\u4e8c\u53c2\u6570&lt;_Ty&gt;\ntemplate &lt;class _Ty&gt;\nstruct _Add_reference&lt;_Ty, std::void_t&lt;_Ty&amp;&gt;&gt; { // (referenceable type)\nusing _Lvalue = _Ty&amp;;\nusing _Rvalue = _Ty&amp;&amp;;\n};\ntemplate &lt;class _Ty&gt;\nusing add_rvalue_reference_t = typename _Add_reference&lt;_Ty&gt;::_Rvalue;\n\n// FUNCTION TEMPLATE declval\ntemplate &lt;class _Ty&gt;\nadd_rvalue_reference_t&lt;_Ty&gt; declval() noexcept;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/enable_shared_from_this/","title":"enable_shared_from_this","text":"<ul> <li>\u53c2\u8003</li> <li>enable_shared_from_this\u662f\u6a21\u677f\u7c7b\uff0c\u5f53\u4e00\u4e2a\u7c7b\u7ee7\u627f\u6b64\u7c7b\u65f6\uff0c\u53ef\u4ee5\u8c03\u7528<code>shared_from_this()</code>\u51fd\u6570\u8fd4\u56de\u6b64\u7c7b\u7684shared\u6307\u9488\uff0c\u4f5c\u7528\u76f8\u5f53\u4e8e\u4e00\u4e2ashared\u6307\u9488\u8d4b\u503c\u7ed9\u53e6\u4e00\u4e2ashared\u6307\u9488\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;memory&gt;\n#include &lt;iostream&gt;\n\nstruct Good : std::enable_shared_from_this&lt;Good&gt; // \u6ce8\uff1a\u516c\u5f00\u7ee7\u627f\n{\nstd::shared_ptr&lt;Good&gt; getptr() {\nreturn shared_from_this();\n}\n};\n\nstruct Best : std::enable_shared_from_this&lt;Best&gt; // \u6ce8\uff1a\u516c\u5f00\u7ee7\u627f\n{\nstd::shared_ptr&lt;Best&gt; getptr() {\nreturn shared_from_this();\n}\n// \u65e0\u516c\u5f00\u6784\u9020\u51fd\u6570\uff0c\u4ec5\u5de5\u5382\u51fd\u6570\uff0c\u6545\u65e0\u6cd5\u4ee4 getptr \u8fd4\u56de nullptr \u3002\n[[nodiscard]] static std::shared_ptr&lt;Best&gt; create() {\n// \u4e0d\u4f7f\u7528 std::make_shared&lt;Best&gt; \uff0c\u56e0\u4e3a\u6784\u9020\u51fd\u6570\u4e3a\u79c1\u6709\u3002\nreturn std::shared_ptr&lt;Best&gt;(new Best());\n}\nprivate:\nBest() = default;\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/forward/","title":"std::forward","text":"<ul> <li>\u5934\u6587\u4ef6\uff1a<code>utility</code></li> <li>\u529f\u80fd\uff1a</li> <li>\u8f6c\u53d1\u5de6\u503c\u4e3a\u5de6\u503c\u6216\u53f3\u503c</li> <li>\u8f6c\u53d1\u53f3\u503c\u4e3a\u53f3\u503c\u5e76\u7981\u6b62\u53f3\u503c\u7684\u8f6c\u53d1\u4e3a\u5de6\u503c</li> <li>\u6e90\u7801\u5206\u6790:</li> <li><code>forward</code>\u67092\u4e2a\u5b9e\u73b0\uff0c\u5b9e\u73b0\u4e00\u529f\u80fd\u662f\u8f6c\u53d1\u5de6\u503c\u4e3a\u5de6\u503c\u6216\u53f3\u503c\uff0c\u5b9e\u73b0\u4e8c\u529f\u80fd\u662f\u8f6c\u53d1\u53f3\u503c\u4e3a\u53f3\u503c\u5e76\u7981\u6b62\u53f3\u503c\u7684\u8f6c\u53d1\u4e3a\u5de6\u503c\u3002\u5728\u5b9e\u73b0\u4e8c\u4e2d\u6709\u4e00\u9759\u6001\u68c0\u67e5<code>static_assert(!is_lvalue_reference_v&lt;_Ty&gt;, \"bad forward call\");</code>,\u5176\u4f5c\u7528\u662f\u5224\u65ad\u6a21\u677f\u53c2\u6570\u7c7b\u578b<code>_Ty</code>\u662f\u5426\u662f\u5de6\u503c\uff0c<code>is_lvalue_reference_v</code>\u67092\u4e2a\u5b9a\u4e49\uff0c\u5b9a\u4e49\u4e8c<code>template &lt;class _Ty&gt; _INLINE_VAR constexpr bool is_lvalue_reference_v&lt;_Ty&amp;&gt; = true;</code>\u4f1a\u63a5\u53d7\u5de6\u503c\u7c7b\u578b\uff0c\u5b9a\u4e49\u4e00<code>template &lt;class&gt; _INLINE_VAR constexpr bool is_lvalue_reference_v = false; // determine</code>\u4f1a\u63a5\u53d7\u53f3\u503c\uff0c\u56e0\u6b64\u5f53\u8f6c\u53d1\u53f3\u503c\u4e3a\u5de6\u503c\u7f16\u8bd1\u5668\u4f1a\u53d1\u51fa\u8b66\u544a</li> </ul> <pre><code>// STRUCT TEMPLATE is_lvalue_reference\ntemplate &lt;class&gt;\n_INLINE_VAR constexpr bool is_lvalue_reference_v = false; // determine whether type argument is an lvalue reference\n\ntemplate &lt;class _Ty&gt;\n_INLINE_VAR constexpr bool is_lvalue_reference_v&lt;_Ty&amp;&gt; = true;\n\n// FUNCTION TEMPLATE forward\ntemplate &lt;class _Ty&gt;\n_NODISCARD constexpr _Ty&amp;&amp; forward(\nremove_reference_t&lt;_Ty&gt;&amp; _Arg) noexcept { // forward an lvalue as either an lvalue or an rvalue\nreturn static_cast&lt;_Ty&amp;&amp;&gt;(_Arg);\n}\n\ntemplate &lt;class _Ty&gt;\n_NODISCARD constexpr _Ty&amp;&amp; forward(remove_reference_t&lt;_Ty&gt;&amp;&amp; _Arg) noexcept { // forward an rvalue as an rvalue\nstatic_assert(!is_lvalue_reference_v&lt;_Ty&gt;, \"bad forward call\");\nreturn static_cast&lt;_Ty&amp;&amp;&gt;(_Arg);\n}\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>#include&lt;iostream&gt;\nusing namespace std;\nvoid PrintV(int&amp; t) {\n++t;\ncout &lt;&lt; \"lvalue\" &lt;&lt; endl;\n}\n\nvoid PrintV(int&amp;&amp; t) {\ncout &lt;&lt; \"rvalue\" &lt;&lt; endl;\n}\n\ntemplate&lt;typename T&gt;\nvoid Test(T&amp;&amp; t) {\n\nPrintV(t);\nPrintV(std::forward&lt;T&gt;(t));\n\nPrintV(std::move(t));\n}\n\nint main() {\nTest(1); // lvalue rvalue rvalue\nint a = 1;\nTest(a); // lvalue lvalue rvalue\nTest(std::forward&lt;int&gt;(a)); // lvalue rvalue rvalue\nTest(std::forward&lt;int&amp;&gt;(a)); // lvalue lvalue rvalue\nTest(std::forward&lt;int&amp;&amp;&gt;(a)); // lvalue rvalue rvalue\nTest(std::forward&lt;int&gt;(2)); // lvalue rvalue rvalue\n//Test(std::forward&lt;int&amp;&gt;(2)); // error\u7f16\u8bd1\u9519\u8befbad forward call\nTest(std::forward&lt;int&amp;&amp;&gt;(2)); // lvalue rvalue rvalue    \nreturn 0;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/function/","title":"std::function","text":"<ul> <li>\u5934\u6587\u4ef6\uff1a <code>functional</code></li> <li>\u529f\u80fd\uff1a\u7c7b\u6a21\u677f std::function \u662f\u901a\u7528\u591a\u6001\u51fd\u6570\u5c01\u88c5\u5668\u3002 std::function \u7684\u5b9e\u4f8b\u80fd\u5b58\u50a8\u3001\u590d\u5236\u53ca\u8c03\u7528\u4efb\u4f55\u53ef\u8c03\u7528 (Callable) \u76ee\u6807\u2014\u2014\u51fd\u6570\u3001 lambda \u8868\u8fbe\u5f0f\u3001 bind \u8868\u8fbe\u5f0f\u6216\u5176\u4ed6\u51fd\u6570\u5bf9\u8c61\uff0c\u8fd8\u6709\u6307\u5411\u6210\u5458\u51fd\u6570\u6307\u9488\u548c\u6307\u5411\u6570\u636e\u6210\u5458\u6307\u9488</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;functional&gt;\nstruct Foo {\nFoo(int num) : num_(num) {}\nvoid print_add(int i) const { std::cout &lt;&lt; num_ + i &lt;&lt; '\\n'; }\nint num_;\n};\n\nvoid print_num(int i)\n{\n\n}\n\nstruct PrintNum {\nvoid operator()(int i) const\n{\nstd::cout &lt;&lt; i &lt;&lt; '\\n';\n}\n};\n\nint main()\n{\nprint_num(2);\n// \u5b58\u50a8\u81ea\u7531\u51fd\u6570\nstd::function&lt;void(int)&gt; f_display = print_num;\nf_display(-9);\n\n// \u5b58\u50a8 lambda\nstd::function&lt;void()&gt; f_display_42 = []() { print_num(42); };\nf_display_42();\n\n// \u5b58\u50a8\u5230 std::bind \u8c03\u7528\u7684\u7ed3\u679c\nstd::function&lt;void()&gt; f_display_31337 = std::bind(print_num, 31337);\nf_display_31337();\n\n// \u5b58\u50a8\u5230\u6210\u5458\u51fd\u6570\u7684\u8c03\u7528\nstd::function&lt;void(const Foo&amp;, int)&gt; f_add_display = &amp;Foo::print_add;\nconst Foo foo(314159);\nf_add_display(foo, 1);\nf_add_display(314159, 1);\n\n// \u5b58\u50a8\u5230\u6570\u636e\u6210\u5458\u8bbf\u95ee\u5668\u7684\u8c03\u7528\nstd::function&lt;int(Foo const&amp;)&gt; f_num = &amp;Foo::num_;\nstd::cout &lt;&lt; \"num_: \" &lt;&lt; f_num(foo) &lt;&lt; '\\n';\n\n// \u5b58\u50a8\u5230\u6210\u5458\u51fd\u6570\u53ca\u5bf9\u8c61\u7684\u8c03\u7528\nusing std::placeholders::_1;\nstd::function&lt;void(int)&gt; f_add_display2 = std::bind(&amp;Foo::print_add, foo, _1);\nf_add_display2(2);\n\n// \u5b58\u50a8\u5230\u6210\u5458\u51fd\u6570\u548c\u5bf9\u8c61\u6307\u9488\u7684\u8c03\u7528\nstd::function&lt;void(int)&gt; f_add_display3 = std::bind(&amp;Foo::print_add, &amp;foo, _1);\nf_add_display3(3);\n\n// \u5b58\u50a8\u5230\u51fd\u6570\u5bf9\u8c61\u7684\u8c03\u7528\nstd::function&lt;void(int)&gt; f_display_obj = PrintNum();\nf_display_obj(18);\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790:</li> <li>\u6a21\u677f\u7c7b<code>function</code>\u901a\u8fc7<code>_Get_function_impl</code>\u6a21\u677f\u7c7b\u4f5c\u4e2d\u8f6c\uff0c\u7ee7\u627f\u81ea\u6a21\u677f\u7c7b<code>_Func_class</code>\uff0c\u5176\u4e2d<code>_Get_function_impl</code>\u7684\u5b9a\u4e49\u7531\u76f4\u63a5\u5b9a\u4e49\u7684\u6a21\u677f\u7c7b\u548c\u5b8f\u51fd\u6570\u5c55\u5f00\u7684\u6a21\u677f\u7c7b\u8fd92\u90e8\u5206\u7ec4\u6210\u3002\u5f53<code>function</code>\u63a5\u6536\u51fd\u6570\u7c7b\u578b\u6a21\u677f\u53c2\u6570\u65f6\u4f1a\u5339\u914d\u5b8f\u51fd\u6570\u5c55\u5f00\u7684<code>_Get_function_impl</code>\u7c7b\uff0c\u800c\u5f53\u6a21\u677f\u53c2\u6570\u662f\u975e\u51fd\u6570\u7c7b\u578b\u65f6\uff0c\u4f1a\u5339\u914d\u76f4\u63a5\u5b9a\u4e49\u7684<code>_Get_function_impl</code>\uff0c\u4e14\u9759\u6001\u68c0\u67e5\u62a5\u9519\u3002</li> <li><code>_Func_class</code>\u4e2d\u5b9a\u4e49\u4e86\u4e00\u4e2a\u51fd\u6570\u5bf9\u8c61\uff0c\u56e0\u6b64<code>function</code>\u5b9e\u4f8b\u5bf9\u8c61\u53ef\u4ee5\u50cf\u51fd\u6570\u822c\u4f7f\u7528<code>()</code>\u8c03\u7528\u3002</li> </ul> <pre><code>//\u53ea\u622a\u53d6\u90e8\u5206\u91cd\u8981\u4ee3\u7801\uff0c\u5176\u5b83\u5982\u91cd\u8f7d\u8d4b\u503c\u8fd0\u7b97\u7b26\u7b49\u529f\u80fd\u51fd\u6570\u4e0d\u5206\u6790\n\n// STRUCT TEMPLATE _Get_function_impl\ntemplate &lt;class _Tx&gt;\nstruct _Get_function_impl {\nstatic_assert(_Always_false&lt;_Tx&gt;, \"std::function does not accept non-function types as template arguments.\");\n};\n\n#define _GET_FUNCTION_IMPL(CALL_OPT, X1, X2, X3)                                                  \\\n    template &lt;class _Ret, class... _Types&gt;                                                        \\\n    struct _Get_function_impl&lt;_Ret CALL_OPT(_Types...)&gt; { /* determine type from argument list */ \\\n        using type = _Func_class&lt;_Ret, _Types...&gt;;                                                \\\n    };\n\n_NON_MEMBER_CALL(_GET_FUNCTION_IMPL, X1, X2, X3)\n#undef _GET_FUNCTION_IMPL\n\n\n// CLASS TEMPLATE function\ntemplate &lt;class _Fty&gt;\nclass function : public _Get_function_impl&lt;_Fty&gt;::type { // wrapper for callable objects\nprivate:\nusing _Mybase = typename _Get_function_impl&lt;_Fty&gt;::type;\n\npublic:\nfunction() noexcept {}\n\nfunction(nullptr_t) noexcept {}\n\nfunction(const function&amp; _Right) {\nthis-&gt;_Reset_copy(_Right);\n}\n\n#if _USE_FUNCTION_INT_0_SFINAE\ntemplate &lt;class _Fx, typename _Mybase::template _Enable_if_callable_t&lt;_Fx&amp;, function&gt; = 0&gt;\n#else // ^^^ _USE_FUNCTION_INT_0_SFINAE // !_USE_FUNCTION_INT_0_SFINAE vvv\ntemplate &lt;class _Fx, class = typename _Mybase::template _Enable_if_callable_t&lt;_Fx&amp;, function&gt;&gt;\n#endif // _USE_FUNCTION_INT_0_SFINAE\nfunction(_Fx _Func) {\nthis-&gt;_Reset(_STD move(_Func));\n}\n\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/hash/","title":"std::hash","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/hash/#1-hash","title":"1 hash \u7ed3\u6784\u7ec4\u6210","text":"<p>hash\u7c7b\u7684\u5b9e\u73b0\u4e3b\u8981\u7531\u4ee5\u4e0b3\u7c7b\u7ec4\u6210 - hash\u6a21\u677f\u7c7b\u524d\u7f6e\u58f0\u660e - hash\u9519\u8bef\u7f16\u8bd1\u8b66\u544a\u8f85\u52a9\u7c7b - hash\u6a21\u677f\u7c7b\u5177\u4f53\u5316</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/hash/#2","title":"2 \u6e90\u7801\u5206\u6790","text":"<p>\u6e90\u7801\u5982\u4e0b</p> <pre><code>// \u524d\u7f6e\u58f0\u660e\uff0c\u4e3a\u4e86\u540e\u9762_Conditionally_enabled_hash\u4f7f\u7528\ntemplate &lt;class _Kty&gt;\nstruct hash;\n//\u8f85\u52a9\u7c7b\uff0c\u7528\u4e8e\u5bf9\u4f7f\u7528hash\u7684\u7c7b\u68c0\u67e5\ntemplate &lt;class _Kty, bool _Enabled&gt;\nstruct _Conditionally_enabled_hash { // conditionally enabled hash base\n_CXX17_DEPRECATE_ADAPTOR_TYPEDEFS typedef _Kty _ARGUMENT_TYPE_NAME;\n_CXX17_DEPRECATE_ADAPTOR_TYPEDEFS typedef size_t _RESULT_TYPE_NAME;\n//\u91cd\u8f7d\u8fd0\u7b97\u7b26(),\u5e76\u5728\u5185\u90e8\u8c03\u7528hash\u4e2d\u7684_Do_hash\u51fd\u6570\n_NODISCARD size_t operator()(const _Kty&amp; _Keyval) const\nnoexcept(noexcept(hash&lt;_Kty&gt;::_Do_hash(_Keyval))) /* strengthened */ {\nreturn hash&lt;_Kty&gt;::_Do_hash(_Keyval);\n}\n};\n//\u5bf9\u6ca1\u5177\u4f53\u5316hash\u7684\u7c7b\u5220\u9664\u6784\u9020\uff0c\u4f7f\u65e0\u6cd5\u5b9e\u4f8b\u5316\uff0c\u4ea7\u751f\u7f16\u8bd1\u8b66\u544a\ntemplate &lt;class _Kty&gt;\nstruct _Conditionally_enabled_hash&lt;_Kty, false&gt; { // conditionally disabled hash base\n_Conditionally_enabled_hash()                                   = delete;\n_Conditionally_enabled_hash(const _Conditionally_enabled_hash&amp;) = delete;\n_Conditionally_enabled_hash(_Conditionally_enabled_hash&amp;&amp;)      = delete;\n_Conditionally_enabled_hash&amp; operator=(const _Conditionally_enabled_hash&amp;) = delete;\n_Conditionally_enabled_hash&amp; operator=(_Conditionally_enabled_hash&amp;&amp;) = delete;\n};\n//\u5229\u7528\u7c7b\u578b\u7279\u6027is_const_v is_integral_v \u7b49\u9650\u5236\u6b64\u7c7b\u53ef\u4ee5\u5bf9\u6570\u503c\u7c7b\u578b\u5982bool char int long\u7b49\u8fdb\u884chash\uff0c\u5f53\u4e3afalse\u65f6\u5339\u914d_Conditionally_enabled_hash&lt;_Kty, false&gt;\uff0c\u56e0\u6b64\u7c7b\u4e2d\u6784\u9020\u7b49\u51fd\u6570\u88ab\u5220\u9664\uff0c\u65e0\u6cd5\u5b9e\u4f8b\uff0c\u5c31\u4f1a\u62a5\u9519\uff0c\u5f53\u4e3atrue\u65f6\u5339\u914d _Conditionally_enabled_hash\n// STRUCT TEMPLATE hash\ntemplate &lt;class _Kty&gt;\nstruct hash\n: _Conditionally_enabled_hash&lt;_Kty,\n!is_const_v&lt;_Kty&gt; &amp;&amp; !is_volatile_v&lt;_Kty&gt; &amp;&amp; (is_enum_v&lt;_Kty&gt; || is_integral_v&lt;_Kty&gt; || is_pointer_v&lt;_Kty&gt;)&gt; {\n// hash functor primary template (handles enums, integrals, and pointers)\n//_Do_hash\u51fd\u6570\u4f9b\u5339\u914d\u7684_Conditionally_enabled_hash\u7c7b\u4e2d\u91cd\u8f7d\u7684\u8fd0\u7b97\u7b26()\u8c03\u7528\nstatic size_t _Do_hash(const _Kty&amp; _Keyval) noexcept {\n//_Hash_representation\u662fhash\u7684\u8ba1\u7b97\u8fc7\u7a0b\nreturn _Hash_representation(_Keyval);\n}\n};\n//hash\u5177\u4f53\u5316\uff0c\u6807\u51c6\u5e93\u6709float double\u7b49\u7b49\ntemplate &lt;&gt;\nstruct hash&lt;float&gt; {\n_CXX17_DEPRECATE_ADAPTOR_TYPEDEFS typedef float _ARGUMENT_TYPE_NAME;\n_CXX17_DEPRECATE_ADAPTOR_TYPEDEFS typedef size_t _RESULT_TYPE_NAME;\n_NODISCARD size_t operator()(const float _Keyval) const noexcept {\nreturn _Hash_representation(_Keyval == 0.0F ? 0.0F : _Keyval); // map -0 to 0\n}\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/hash/#3-hash","title":"3 \u81ea\u5b9a\u4e49hash","text":"<p>\u81ea\u5b9a\u4e49hash\u7684\u5b9e\u73b0\u67092\u79cd\u65b9\u5f0f\uff0c\u4e00\u79cd\u662f\u5b9a\u4e49\u72ec\u7acb\u7684\u51fd\u6570\u5bf9\u8c61\uff0c\u53e6\u4e00\u79cd\u662f\u5177\u4f53\u5316<code>hash</code>\uff0c\u4f7f\u6ce8\u5165\u5982<code>std::hash</code>\u4e2d</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/hash/#31","title":"3.1 \u65b9\u5f0f\u4e00:\u72ec\u7acb\u51fd\u6570\u5bf9\u8c61","text":"<pre><code>// \u81ea\u5b9a\u4e49\u6563\u5217\u51fd\u6570\u80fd\u662f\u72ec\u7acb\u51fd\u6570\u5bf9\u8c61\uff1a\nstruct MyHash\n{\nstd::size_t operator()(S const&amp; s) const {\nstd::size_t h1 = std::hash&lt;std::string&gt;{}(s.first_name);\nstd::size_t h2 = std::hash&lt;std::string&gt;{}(s.last_name);\nreturn h1 ^ (h2 &lt;&lt; 1); // \u6216\u4f7f\u7528 boost::hash_combine \uff08\u89c1\u8ba8\u8bba\uff09\n}\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/hash/#32-stdhash","title":"3.2 \u65b9\u5f0f\u4e8c:\u6ce8\u5165<code>std::hash</code>\u4e2d","text":"<pre><code>// std::hash \u7684\u81ea\u5b9a\u4e49\u7279\u5316\u80fd\u6ce8\u5165 namespace std\nnamespace std\n{\ntemplate&lt;&gt; struct hash&lt;S&gt;\n{\ntypedef S argument_type;\ntypedef std::size_t result_type;\nresult_type operator()(argument_type const&amp; s) const\n{\nresult_type const h1 ( std::hash&lt;std::string&gt;{}(s.first_name) );\nresult_type const h2 ( std::hash&lt;std::string&gt;{}(s.last_name) );\nreturn h1 ^ (h2 &lt;&lt; 1); // \u6216\u4f7f\u7528 boost::hash_combine \uff08\u89c1\u8ba8\u8bba\uff09\n}\n};\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/ignore/","title":"std::ignore","text":"<ul> <li>\u5934\u6587\u4ef6\uff1a <code>tuple</code></li> <li>\u529f\u80fd\uff1a\u4f7f\u503c\u5747\u53ef\u8d4b\u7ed9\u800c\u65e0\u6548\u679c\u7684\u672a\u6307\u5b9a\u7c7b\u578b\u7684\u5bf9\u8c61\u3002\u76ee\u7684\u662f\u4ee4 std:: tie \u5728\u89e3\u5305 std:: tuple \u65f6\u4f5c\u4e3a\u4e0d\u4f7f\u7528\u7684\u53c2\u6570\u7684\u5360\u4f4d\u7b26\u4f7f\u7528\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;set&gt;\n#include &lt;tuple&gt;\n\nint main()\n{\nstd::set&lt;std::string&gt; set_of_str;\nbool inserted = false;\nstd::tie(std::ignore, inserted) = set_of_str.insert(\"Test\");\nif (inserted) {\nstd::cout &lt;&lt; \"Value was inserted successfully\\n\";\n}\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790\uff1astd:: ignore \u662f\u4e00\u4e2a_Ignore \u7c7b\u5bf9\u8c61\uff0c<code>_Ignore</code> \u4ee5\u6a21\u677f\u5f62\u5f0f\u91cd\u8f7d\u4e86\u8d4b\u503c\u8fd0\u7b97\u7b26\uff0c\u4ec5\u4ec5\u7528\u6765\u63a5\u6536\u4efb\u610f\u7c7b\u578b\u6570\u636e\uff0c\u4f46\u4e0d\u4f7f\u7528\u5176\u6570\u636e\u3002</li> </ul> <pre><code>// STRUCT _Ignore\nstruct _Ignore { // struct that ignores assignments\ntemplate &lt;class _Ty&gt;\nconstexpr const _Ignore&amp; operator=(const _Ty&amp;) const noexcept /* strengthened */ {\n// do nothing\nreturn *this;\n}\n};\n\n_INLINE_VAR constexpr _Ignore ignore{};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/initializer_list/","title":"std::initializer_list","text":"<ul> <li>\u5934\u6587\u4ef6\uff1ainitializer_list</li> <li>\u529f\u80fd</li> <li>\u4ee5\u82b1\u62ec\u53f7{}\u521d\u59cb\u5316\u5bf9\u8c61</li> <li>\u4ee5\u82b1\u62ec\u53f7{}\u4e3a\u8d4b\u503c\u7684\u53f3\u8fd0\u7b97\u6570</li> <li>\u4ee5\u82b1\u62ec\u53f7{}\u7ed1\u5b9a\u5230auto</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;initializer_list&gt;\n\ntemplate &lt;class T&gt;\nstruct S {\nstd::vector&lt;T&gt; v;\nS(std::initializer_list&lt;T&gt; l) : v(l) {\nstd::cout &lt;&lt; \"constructed with a \" &lt;&lt; l.size() &lt;&lt; \"-element list\\n\";\n}\nvoid append(std::initializer_list&lt;T&gt; l) {\nv.insert(v.end(), l.begin(), l.end());\n}\nstd::pair&lt;const T*, std::size_t&gt; c_arr() const {\nreturn {&amp;v[0], v.size()};  // \u5728 return \u8bed\u53e5\u4e2d\u590d\u5236\u5217\u8868\u521d\u59cb\u5316\n// \u8fd9\u4e0d\u4f7f\u7528 std::initializer_list\n}\n};\n\ntemplate &lt;typename T&gt;\nvoid templated_fn(T) {}\n\nint main()\n{\nS&lt;int&gt; s = {1, 2, 3, 4, 5}; // \u590d\u5236\u521d\u59cb\u5316\ns.append({6, 7, 8});      // \u51fd\u6570\u8c03\u7528\u4e2d\u7684\u5217\u8868\u521d\u59cb\u5316\n\nstd::cout &lt;&lt; \"The vector size is now \" &lt;&lt; s.c_arr().second &lt;&lt; \" ints:\\n\";\n\nfor (auto n : s.v)\nstd::cout &lt;&lt; n &lt;&lt; ' ';\nstd::cout &lt;&lt; '\\n';\n\nstd::cout &lt;&lt; \"Range-for over brace-init-list: \\n\";\n\nfor (int x : {-1, -2, -3}) // auto \u7684\u89c4\u5219\u4ee4\u6b64\u5e26\u8303\u56f4 for \u5de5\u4f5c\nstd::cout &lt;&lt; x &lt;&lt; ' ';\nstd::cout &lt;&lt; '\\n';\n\nauto al = {10, 11, 12};   // auto \u7684\u7279\u6b8a\u89c4\u5219\n\nstd::cout &lt;&lt; \"The list bound to auto has size() = \" &lt;&lt; al.size() &lt;&lt; '\\n';\n\n//    templated_fn({1, 2, 3}); // \u7f16\u8bd1\u9519\u8bef\uff01\u201c {1, 2, 3} \u201d\u4e0d\u662f\u8868\u8fbe\u5f0f\uff0c\n// \u5b83\u65e0\u7c7b\u578b\uff0c\u6545 T \u65e0\u6cd5\u63a8\u5bfc\ntemplated_fn&lt;std::initializer_list&lt;int&gt;&gt;({1, 2, 3}); // OK\ntemplated_fn&lt;std::vector&lt;int&gt;&gt;({1, 2, 3});           // \u4e5f OK\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790\uff1ainitializer_list\u4e2d\u7684\u6784\u9020\u67092\u4e2a\u53c2\u6570\uff0c\u5206\u522b\u662f\u6570\u7ec4\u9996\u5c3e\u5730\u5740\uff0c\u6709begin\uff0cend\u65b9\u6cd5\uff0c\u5206\u522b\u8fd4\u56de\u9996\u5c3e\u6307\u9488\uff0c\u8fd8\u6709\u4e00\u4e2asize\u65b9\u6cd5\uff0c\u901a\u8fc7\u9996\u5c3e\u6307\u9488\u76f8\u51cf\u5f97\u5230\u6570\u7ec4\u5927\u5c0f\u3002\u731c\u6d4b\uff1a\u5728\u4f7f\u7528\u82b1\u62ec\u53f7\u65f6\uff0c\u82b1\u62ec\u53f7\u91cc\u81ea\u52a8\u6784\u9020\u4e00\u4e2a\u6570\u7ec4\uff0c\u518d\u5c06\u6570\u7ec4\u9996\u5c3e\u6307\u9488\u4f20\u7ed9initializer_list\u7684\u6784\u9020\u4e2d\u3002</li> </ul> <pre><code>template &lt;class _Elem&gt;\nclass initializer_list {\npublic:\nusing value_type      = _Elem;\nusing reference       = const _Elem&amp;;\nusing const_reference = const _Elem&amp;;\nusing size_type       = size_t;\n\nusing iterator       = const _Elem*;\nusing const_iterator = const _Elem*;\n\nconstexpr initializer_list() noexcept : _First(nullptr), _Last(nullptr) {}\n\nconstexpr initializer_list(const _Elem* _First_arg, const _Elem* _Last_arg) noexcept\n: _First(_First_arg), _Last(_Last_arg) {}\n\n_NODISCARD constexpr const _Elem* begin() const noexcept {\nreturn _First;\n}\n\n_NODISCARD constexpr const _Elem* end() const noexcept {\nreturn _Last;\n}\n\n_NODISCARD constexpr size_t size() const noexcept {\nreturn static_cast&lt;size_t&gt;(_Last - _First);\n}\n\nprivate:\nconst _Elem* _First;\nconst _Elem* _Last;\n};\n</code></pre> <ul> <li>\u6ce8\u610f\uff1a\u5f53\u7c7b\u4e2d\u6ca1\u6709\u5b9a\u4e49initializer_list \u4e3a\u53c2\u6570\u7684\u6784\u9020\u51fd\u6570\u65f6\uff0c\u4f1a\u9ed8\u8ba4\u4f7f\u7528\u76f8\u5e94\u7684\u6784\u9020\u51fd\u6570\uff0c\u56e0\u6b64\u82b1\u62ec\u53f7{}\u53ef\u4ee5\u5728\u6ca1\u6709\u5b9e\u73b0initializer_list\u65f6\u4e5f\u53ef\u6b63\u786e\u89e3\u6790\u3002</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/lambda/","title":"lambda","text":"<p>lambda\u75314\u90e8\u5206\u7ec4\u6210\uff0c\u5982\u4e0b\uff1a - <code>[]</code>\u6355\u83b7\u5217\u8868 - <code>()</code>\u53c2\u6570\u5217\u8868 - <code>-&gt;</code>\u8fd4\u56de\u503c\u7c7b\u578b - <code>{}</code>\u51fd\u6570\u4f53</p> <p>\u793a\u4f8b\u4ee3\u7801</p> <pre><code>int x=0,y=0;\nauto f = [x,&amp;y](const std::string&amp;str)-&gt;int{...};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/lambda/#1","title":"1 \u8bed\u6cd5\u5f62\u5f0f","text":"<pre><code>[capture list] (parameter list) -&gt; return type\n{\n   function body;\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/lambda/#2","title":"2 \u6355\u83b7\u5217\u8868[ ]","text":"<ul> <li>\u4f5c\u7528\uff1a\u5f15\u5165\u5916\u90e8\u53d8\u91cf\u4f9blambda\u51fd\u6570\u4e2d\u4f7f\u7528</li> <li><code>[=]</code> : by value \u53ea\u8bfb\u6570\u636e\uff0c\u4e0d\u80fd\u4fee\u6539</li> <li><code>[&amp;]</code> : by reference \u53ef\u4ee5\u4fee\u6539\u6570\u636e</li> <li><code>[x,&amp;y]</code> \u6307\u5b9a lambda \u51fd\u6570\u5185\u80fd\u4f7f\u7528\u7684\u53d8\u91cf x by value\uff0cy by reference </li> <li><code>[=,&amp;y]</code> \u6307\u5b9a y by reference \u4f20\u8fdb\u6765\uff0c\u5176\u5b83\u4ee5 by value \u4f20\u8fdb\u6765</li> </ul> <pre><code>\u6ce8\uff1a[&amp;y,=] -&gt;\u4e0d\u80fd\u8fd9\u6837\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/lambda/#3","title":"3 \u53c2\u6570\u5217\u8868( )","text":"<ul> <li>\u6709\u53c2\u65f6\uff0c\u5982<code>[ ](char c){...};</code></li> <li>\u65e0\u53c2\u60c5\u51b5\u53ef\u4ee5\u4e0d\u5199\uff0c\u4e5f\u53ef\u4ee5\u5199<code>()</code>,\u5982<code>[ ](){...};</code>\u6216<code>[ ]{...};</code></li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/lambda/#4-","title":"4 \u8fd4\u56de\u7c7b\u578b-&gt;","text":"<ul> <li>\u6709\u8fd4\u56de\u503c\u65f6\uff0c\u5982<code>[ ]()-&gt;int{...};</code></li> <li>\u65e0\u8fd4\u56de\u503c\u65f6 \uff0c\u53ef\u4e0d\u5199,\u5982<code>[ ](){...};</code>\u6216<code>[ ]()-&gt;void{...};</code> </li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/lambda/#5","title":"5 \u793a\u4f8b","text":"<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nint main()\n{\nint x = 1;\nint y = 1;\nauto f = [x,&amp;y](const std::string&amp;str)-&gt;int{\nstd::cout &lt;&lt; \"\u6267\u884clambda\" &lt;&lt; std::endl;\nstd::cout &lt;&lt; str &lt;&lt; std::endl;\n// x++;  //by value\u4e0d\u53ef\u4fee\u6539\ny++;    //by reference \u53ef\u4fee\u6539\nreturn 1;\n};\nstd::cout &lt;&lt; \"\u8fd8\u672a\u8c03\u7528lambda\" &lt;&lt; std::endl &lt;&lt; std::endl; std::cout &lt;&lt; f(\"\u4f60\u597d\")&lt;&lt;std::endl;\nstd::cin.get();\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/move/","title":"std::move","text":"<ul> <li>\u5934\u6587\u4ef6\uff1a<code>utility</code></li> <li>\u529f\u80fd\uff1a\u5c06\u5de6\u503c\u8f6c\u6362\u4e3a\u53f3\u503c\u5f15\u7528</li> <li>\u6e90\u7801\u5206\u6790:\u5c06<code>move</code>\u7b80\u5316,\u5927\u81f4\u5f62\u5982<code>T&amp;&amp; move(T&amp;&amp; _Arg){return static_cast&lt;T&amp;&amp;&gt;(_Arg)};</code>,\u6574\u4e2a\u6e90\u7801\u6700\u4e3b\u8981\u7684\u4ee3\u7801\u6bb5\u5c31\u662f<code>static_cast&lt;remove_reference_t&lt;_Ty&gt;&amp;&amp;&gt;(_Arg)</code>,\u901a\u8fc7\u5f3a\u5236\u8f6c\u6362\uff0c\u5c06\u8f93\u5165\u6570\u636e\u8f6c\u4e3a\u53f3\u503c\u5f15\u7528\uff0c\u8f93\u5165\u7684\u6570\u636e\u53ef\u4ee5\u662f\u5de6\u503c\u3001\u5de6\u503c\u5f15\u7528\u3001\u53f3\u503c\u3001\u53f3\u503c\u5f15\u7528\u3002<code>move</code>\u5e76\u4e0d\u4f1a\u5c06\u6570\u636e\u4eceA\u642c\u79fb\u5230B\uff0c\u8fdb\u884c\u6570\u636e\u642c\u79fb\u7684\u662f\u7c7b\u7684\u79fb\u52a8\u8d4b\u503c\u51fd\u6570\u6216\u79fb\u52a8\u6784\u9020\u51fd\u6570\uff0c\u6216\u5b9e\u73b0\u7684\u79fb\u52a8\u8bed\u4e49\u7684\u5176\u5b83\u51fd\u6570\uff0c<code>move</code>\u4ec5\u4ec5\u662f\u5c06\u8f93\u5165\u7684\u6570\u636e\u5f3a\u5236\u8f6c\u4e3a\u53f3\u503c\u5f15\u7528\u7c7b\u578b\u3002</li> </ul> <pre><code>`std::move`\u5e76\u4e0d\u4f1a\u642c\u79fb\u6570\u636e\uff0c\u642c\u79fb\u6570\u636e\u7684\u64cd\u4f5c\u662f\u7531\u79fb\u52a8\u62f7\u8d1d\u6784\u9020\u6216\u79fb\u52a8\u8d4b\u503c\u8fd0\u7b97\u7b26\u5904\u7406\u7684\u3002\n</code></pre> <ul> <li>\u6e90\u7801</li> </ul> <pre><code>// STRUCT TEMPLATE remove_reference\ntemplate &lt;class _Ty&gt;\nstruct remove_reference {\nusing type                 = _Ty;\nusing _Const_thru_ref_type = const _Ty;\n};\n\n// FUNCTION TEMPLATE move\ntemplate &lt;class _Ty&gt;\nusing remove_reference_t = typename remove_reference&lt;_Ty&gt;::type;\n\ntemplate &lt;class _Ty&gt;\n_NODISCARD constexpr remove_reference_t&lt;_Ty&gt;&amp;&amp; move(_Ty&amp;&amp; _Arg) noexcept { // forward _Arg as movable\nreturn static_cast&lt;remove_reference_t&lt;_Ty&gt;&amp;&amp;&gt;(_Arg);\n}\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>int main()\n{\nstring a = \"hello\";\nstring&amp; b = a;\nstd::move(a);//\u5de6\u503c\uff1aa\u7684\u6570\u636e\u5e76\u4e0d\u4f1a\u4e22\u5931\nstd::move(b);//\u5de6\u503c\u5f15\u7528\uff1ab\u7684\u6570\u636e\u5e76\u4e0d\u4f1a\u4e22\u5931\nstring c=std::move(b);//\u5c06b\u8f6c\u4e3a\u53f3\u503c\u5f15\u7528\u540e\uff0c\u518d\u8d4b\u7ed9c\uff0c\u4f1a\u8c03\u7528c\u7684\u79fb\u52a8\u62f7\u8d1d\uff0c\u5728c\u7684\u79fb\u52a8\u62f7\u8d1d\u6784\u9020\u4e2d\uff0c\u4f1a\u5c06b\u6570\u636e\u642c\u79fb\u5230c\uff0c\u5bfc\u81f4b\u6570\u636e\u4e22\u5931\nstring d=std::move(std::move(a));//\u5de6\u503c-&gt;\u53f3\u503c\u5f15\u7528\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/nullptr_t/","title":"std::nullptr_t","text":"<ul> <li>\u5934\u6587\u4ef6\uff1a <code>cstddef</code></li> <li>\u529f\u80fd\uff1astd::nullptr_t \u662f\u7a7a\u6307\u9488\u5b57\u9762\u91cf nullptr \u7684\u7c7b\u578b\u3002\u5b83\u662f\u65e2\u975e\u6307\u9488\u7c7b\u578b\u4ea6\u975e\u6307\u5411\u6210\u5458\u6307\u9488\u7c7b\u578b\u7684\u72ec\u7acb\u7c7b\u578b</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;cstddef&gt;\n#include &lt;iostream&gt;\n\nvoid f(int*)\n{\nstd::cout &lt;&lt; \"Pointer to integer overload\\n\";\n}\n\nvoid f(double*)\n{\nstd::cout &lt;&lt; \"Pointer to double overload\\n\";\n}\n\nvoid f(std::nullptr_t)\n{\nstd::cout &lt;&lt; \"null pointer overload\\n\";\n}\n\nint main()\n{\nint* pi {}; double* pd {};\n\nf(pi);\nf(pd);\nf(nullptr); // \u65e0 void f(nullptr_t) \u53ef\u80fd\u6709\u6b67\u4e49\n// f(0);    // \u6b67\u4e49\u8c03\u7528\uff1a\u4e09\u4e2a\u51fd\u6570\u5168\u90e8\u4e3a\u5019\u9009\n// f(NULL); // \u82e5 NULL \u662f\u6574\u6570\u7a7a\u6307\u9488\u5e38\u91cf\u5219\u4e3a\u6b67\u4e49\n// \uff08\u5982\u5728\u5927\u90e8\u5206\u5b9e\u73b0\u4e2d\u7684\u60c5\u51b5\uff09\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790:</li> <li>\u5229\u7528<code>decltype</code>\u6765\u8bc6\u522b<code>nullptr</code>\u7c7b\u578b\uff0c\u5728\u5229\u7528<code>typedef</code>\u5b9a\u4e49\u7c7b\u578b\u522b\u540d<code>nullptr_t</code></li> <li><code>#define nullptr _VSTD::__get_nullptr_t()</code>\u7528\u6765\u83b7\u53d6<code>nullptr_t</code>\u7684\u5b9e\u4f8b,<code>__get_nullptr_t</code>\u51fd\u6570\u5185\u90e8\u8c03\u7528<code>nullptr_t(int __nat::*)</code>\u6784\u9020\u51fd\u6570\u5e76\u8fd4\u56de<code>nullptr_t</code>\u7684\u5b9e\u4f8b</li> <li><code>nullptr_t</code>\u7c7b\u4e2d\u5b9a\u4e49\u4e86\u7c7b\u578b\u8f6c\u6362\u51fd\u6570<code>operator _Tp* () const {return 0;}</code>,\u4e00\u6b21<code>nullptr</code>\u53ef\u4ee5\u9690\u5f0f\u8f6c\u6362\u4e3a\u4efb\u610f\u7c7b\u578b\u6307\u9488\uff0c\u4e14\u6307\u5411<code>0</code>,\u5373\u7a7a\u6307\u9488\u3002</li> <li><code>nullptr_t</code>\u4e2d\u91cd\u8f7d\u4e86\u5224\u7b49\u8fd0\u7b97\u7b26\uff0c\u4e14\u5c06\u5176\u4f5c\u4e3a\u53cb\u5143\uff0c\u56e0\u6b64\u3002</li> </ul> <pre><code>// -*- C++ -*-\n//===--------------------------- __nullptr --------------------------------===//\n//\n// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.\n// See https://llvm.org/LICENSE.txt for license information.\n// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception\n//\n//===----------------------------------------------------------------------===//\n\n#ifndef _LIBCPP_NULLPTR\n#define _LIBCPP_NULLPTR\n\n#include &lt;__config&gt;\n\n#if !defined(_LIBCPP_HAS_NO_PRAGMA_SYSTEM_HEADER)\n#pragma GCC system_header\n#endif\n\n#ifdef _LIBCPP_HAS_NO_NULLPTR\n\n_LIBCPP_BEGIN_NAMESPACE_STD\n\nstruct _LIBCPP_TEMPLATE_VIS nullptr_t\n{\nvoid* __lx;\n\nstruct __nat {int __for_bool_;};\n\n_LIBCPP_INLINE_VISIBILITY _LIBCPP_CONSTEXPR nullptr_t() : __lx(0) {}\n_LIBCPP_INLINE_VISIBILITY _LIBCPP_CONSTEXPR nullptr_t(int __nat::*) : __lx(0) {}\n\n_LIBCPP_INLINE_VISIBILITY _LIBCPP_CONSTEXPR operator int __nat::*() const {return 0;}\n\ntemplate &lt;class _Tp&gt;\n_LIBCPP_INLINE_VISIBILITY _LIBCPP_CONSTEXPR\noperator _Tp* () const {return 0;}\n\ntemplate &lt;class _Tp, class _Up&gt;\n_LIBCPP_INLINE_VISIBILITY\noperator _Tp _Up::* () const {return 0;}\n\nfriend _LIBCPP_INLINE_VISIBILITY _LIBCPP_CONSTEXPR bool operator==(nullptr_t, nullptr_t) {return true;}\nfriend _LIBCPP_INLINE_VISIBILITY _LIBCPP_CONSTEXPR bool operator!=(nullptr_t, nullptr_t) {return false;}\n};\n\ninline _LIBCPP_INLINE_VISIBILITY _LIBCPP_CONSTEXPR nullptr_t __get_nullptr_t() {return nullptr_t(0);}\n\n#define nullptr _VSTD::__get_nullptr_t()\n\n_LIBCPP_END_NAMESPACE_STD\n\n#else  // _LIBCPP_HAS_NO_NULLPTR\n\nnamespace std\n{\ntypedef decltype(nullptr) nullptr_t;\n}\n\n#endif  // _LIBCPP_HAS_NO_NULLPTR\n\n#endif  // _LIBCPP_NULLPTR\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/ref/","title":"std::ref","text":"<ul> <li>\u5934\u6587\u4ef6\uff1a<code>&lt;functional&gt;</code></li> <li>\u529f\u80fd:\u8f6c\u6362\u5de6\u503c\u6216\u5de6\u503c\u5f15\u7528\u5230\u5de6\u503c\u5f15\u7528</li> <li>\u4f7f\u7528\u573a\u666f\uff1a\u4f5c\u4e3a<code>bind</code>\u7ed1\u5b9a\u51fd\u6570\u65f6\uff0c\u4f20\u9012\u5de6\u503c\u5f15\u7528\u4f5c\u4e3a\u53c2\u6570\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;functional&gt;\n#include &lt;iostream&gt;\n\nvoid f(int&amp; n1, int&amp; n2, const int&amp; n3)\n{\nstd::cout &lt;&lt; \"In function: \" &lt;&lt; n1 &lt;&lt; ' ' &lt;&lt; n2 &lt;&lt; ' ' &lt;&lt; n3 &lt;&lt; '\\n';\n++n1; // \u589e\u52a0\u5b58\u50a8\u4e8e\u51fd\u6570\u5bf9\u8c61\u7684 n1 \u526f\u672c\n++n2; // \u589e\u52a0 main() \u7684 n2\n// ++n3; // \u7f16\u8bd1\u9519\u8bef\n}\n\nint main()\n{\nint n1 = 1, n2 = 2, n3 = 3;\nstd::function&lt;void()&gt; bound_f = std::bind(f, n1, std::ref(n2), std::cref(n3));\nn1 = 10;\nn2 = 11;\nn3 = 12;\nstd::cout &lt;&lt; \"Before function: \" &lt;&lt; n1 &lt;&lt; ' ' &lt;&lt; n2 &lt;&lt; ' ' &lt;&lt; n3 &lt;&lt; '\\n';\nbound_f();\nstd::cout &lt;&lt; \"After function: \" &lt;&lt; n1 &lt;&lt; ' ' &lt;&lt; n2 &lt;&lt; ' ' &lt;&lt; n3 &lt;&lt; '\\n';\n}\n</code></pre> <ul> <li>\u8f93\u51fa\u7ed3\u679c</li> </ul> <pre><code>Before function: 10 11 12\nIn function: 1 11 12\nAfter function: 10 12 12\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790</li> <li><code>ref</code>\u6a21\u677f\u51fd\u6570\u67093\u4e2a\u7248\u672c\uff1b</li> <li>\u53f3\u503c\u5f15\u7528\u53c2\u6570\u7248\u88ab\u5220\u9664\uff0c\u56e0\u6b64<code>ref</code>\u5339\u914d\u53f3\u503c\u65f6\u4f1a\u7f16\u8bd1\u671f\u62a5\u9519\uff1b</li> <li><code>ref</code>\u8fd4\u56de\u7c7b\u578b\u662f<code>reference_wrapper</code>\uff0c\u8fd9\u4e2a\u7c7b\u5b9e\u73b0\u4e86\u8f6c\u6362\u51fd\u6570\uff0c\u7528\u4e8e\u9690\u5f0f\u8f6c\u6362<code>_Ty&amp;</code>\u7c7b\u578b</li> </ul> <pre><code>// \u5339\u914d\u5de6\u503c\u53c2\u6570\ntemplate &lt;class _Ty&gt;\n_NODISCARD _CONSTEXPR20 reference_wrapper&lt;_Ty&gt; ref(_Ty&amp; _Val) noexcept {\nreturn reference_wrapper&lt;_Ty&gt;(_Val);\n}\n\ntemplate &lt;class _Ty&gt;\nvoid ref(const _Ty&amp;&amp;) = delete;\n//\u5339\u914dreference_wrapper\u4f5c\u4e3a\u53c2\u6570\ntemplate &lt;class _Ty&gt;\n_NODISCARD _CONSTEXPR20 reference_wrapper&lt;_Ty&gt; ref(reference_wrapper&lt;_Ty&gt; _Val) noexcept {\n//\u6b64\u5904ref\u4f1a\u8c03\u7528ref(_Ty&amp; _Val)\u7248\u672c\nreturn _STD ref(_Val.get());\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/reference/","title":"reference","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/reference/#1-reference-collapsing","title":"1 \u5f15\u7528\u574d\u7f29(reference collapsing)","text":"<ul> <li>\u89c4\u5219\uff1a\u53f3\u503c\u5f15\u7528\u7684\u53f3\u503c\u5f15\u7528\u574d\u7f29\u6210\u53f3\u503c\u5f15\u7528\uff0c\u6240\u6709\u5176\u4ed6\u7ec4\u5408\u5747\u574d\u7f29\u6210\u5de6\u503c\u5f15\u7528</li> <li>\u793a\u4f8b</li> </ul> <pre><code>int main()\n{\ntypedef int&amp; lref;\ntypedef int&amp;&amp; rref;\nint n=2;\nlref&amp; r1 = n; // r1 \u7684\u7c7b\u578b\u662f int&amp;\nlref&amp;&amp; r2 = n; // r2 \u7684\u7c7b\u578b\u662f int&amp;\nrref&amp; r3 = n; // r3 \u7684\u7c7b\u578b\u662f int&amp;\nrref&amp;&amp; r4 = 1; // r4 \u7684\u7c7b\u578b\u662f int&amp;&amp;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/reference/#2","title":"2 \u4e07\u80fd\u5f15\u7528&amp;&amp;","text":"<ul> <li>\u529f\u80fd\uff1a\u6a21\u677fT&amp;&amp;\u6216\u5173\u952e\u5b57auto&amp;&amp;\u63a5\u6536\u5de6\u503c\u6216\u53f3\u503c\uff0c\u5e76\u81ea\u52a8\u63a8\u5bfc\u5de6\u503c\u5f15\u7528\u6216\u53f3\u503c\u5f15\u7528\u7c7b\u578b</li> <li>\u5b9e\u73b0\u65b9\u6cd5\uff1a\u901a\u8fc7\u5f15\u7528\u574d\u7f29\u7279\u6027\uff0c\u53f3\u503c\u5f15\u7528\u7684\u53f3\u503c\u5f15\u7528\u4f9d\u7136\u662f\u53f3\u503c\u5f15\u7528\uff0c\u5de6\u503c\u6216\u5de6\u503c\u5f15\u7528\u7684\u53f3\u503c\u5f15\u7528\u662f\u5de6\u503c\u5f15\u7528</li> <li>\u793a\u4f8b</li> </ul> <pre><code>template&lt;class T&gt;\nbool test(T&amp;&amp; t)\n{\nreturn true;\n}\nint&amp;&amp; test1(int&amp; n) {\nreturn move(n);\n}\nint main()\n{\nint n=2;\ntest(2);//test\u51fd\u6570\u4e2dt\u7684\u7c7b\u578b\u662f int&amp;&amp;\ntest(n);//test\u51fd\u6570\u4e2dt\u7684\u7c7b\u578b\u662f int&amp;\nauto&amp;&amp; i1 = test1(n);// i1\u7684\u7c7b\u578b\u662f int&amp;&amp;\nauto&amp;&amp; i2 = n;// i2\u7684\u7c7b\u578b\u662f int&amp;\nauto&amp;&amp; i3 = 3;// i3\u7684\u7c7b\u578b\u662f int&amp;&amp;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/reference_wrapper/","title":"std::reference_wrapper","text":"<ul> <li>\u5934\u6587\u4ef6\uff1a <code>&lt;functional&gt;</code></li> <li>\u529f\u80fd\uff1a<code>std::reference_wrapper</code> \u662f\u5305\u88c5\u5f15\u7528\u4e8e\u53ef\u590d\u5236\u3001\u53ef\u8d4b\u503c\u5bf9\u8c61\u7684\u7c7b\u6a21\u677f\u3002\u5b83\u5e38\u7528\u4f5c\u5c06\u5f15\u7528\u5b58\u50a8\u5165\u65e0\u6cd5\u6b63\u5e38\u4fdd\u6709\u5f15\u7528\u7684\u6807\u51c6\u5bb9\u5668\uff08\u7c7b\u4f3c <code>std::vector</code> \uff09\u7684\u673a\u5236\u3002</li> <li>\u6e90\u7801\u5206\u6790</li> </ul> <pre><code>template &lt;class _Ty&gt;\nclass reference_wrapper\n#if !_HAS_CXX20\n: public _Weak_types&lt;_Ty&gt;\n#endif // !_HAS_CXX20\n{\npublic:\n//\u9759\u6001\u65ad\u8a00_Ty\u662f\u5426\u662f\u51fd\u6570\u6216\u5bf9\u8c61\nstatic_assert(is_object_v&lt;_Ty&gt; || is_function_v&lt;_Ty&gt;,\n\"reference_wrapper&lt;T&gt; requires T to be an object type or a function type.\");\n\nusing type = _Ty;\n//_Uty&amp;&amp;\u662f\u6a21\u677f\u4e07\u80fd\u5f15\u7528\uff0c\u6784\u9020\u9690\u5f0f\u63a5\u53d7_Uty\u7c7b\u578b\u7684\u6570\u636e\ntemplate &lt;class _Uty, enable_if_t&lt;conjunction_v&lt;negation&lt;is_same&lt;_Remove_cvref_t&lt;_Uty&gt;, reference_wrapper&gt;&gt;,\n_Refwrap_has_ctor_from&lt;_Ty, _Uty&gt;&gt;,\nint&gt; = 0&gt;\n_CONSTEXPR20 reference_wrapper(_Uty&amp;&amp; _Val) noexcept(noexcept(_Refwrap_ctor_fun&lt;_Ty&gt;(_STD declval&lt;_Uty&gt;()))) {\n_Ty&amp; _Ref = static_cast&lt;_Uty&amp;&amp;&gt;(_Val);\n_Ptr      = _STD addressof(_Ref);//\u5c06\u6570\u636e\u6307\u9488\u4fdd\u5b58\n}\n//\u9690\u5f0f\u7c7b\u578b\u8f6c\u6362\uff0c\u7528\u4e8e\u9690\u5f0f\u8f6c\u6362_Ty\u7c7b\u578b\n_CONSTEXPR20 operator _Ty&amp;() const noexcept {\nreturn *_Ptr;\n}\n//\u4f5c\u7528\u540c\u9690\u5f0f\u7c7b\u578b\u8f6c\u6362\uff0c\u5f97\u5230\u4fdd\u5b58\u7684\u6570\u636e\n_NODISCARD _CONSTEXPR20 _Ty&amp; get() const noexcept {\nreturn *_Ptr;\n}\n\nprivate:\n_Ty* _Ptr{};\n\npublic:\ntemplate &lt;class... _Types&gt;\n_CONSTEXPR20 auto operator()(_Types&amp;&amp;... _Args) const\nnoexcept(noexcept(_STD invoke(*_Ptr, static_cast&lt;_Types&amp;&amp;&gt;(_Args)...))) // strengthened\n-&gt; decltype(_STD invoke(*_Ptr, static_cast&lt;_Types&amp;&amp;&gt;(_Args)...)) {\nreturn _STD invoke(*_Ptr, static_cast&lt;_Types&amp;&amp;&gt;(_Args)...);\n}\n};\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;functional&gt;\n#include&lt;vector&gt;\nint main(){\nstd::vector&lt;std::reference_wrapper&lt;int&gt;&gt; v;\nint i1 = 1, i2 = 2;\nv.emplace_back(i1);\nv.emplace_back(i2); //\u73b0\u5728v\u4e2d{1\uff0c2}\ni1 = 3;//\u73b0\u5728v\u4e2d{3\uff0c2}\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/static_assert%E5%92%8Cassert/","title":"static_assert\u548cassert","text":"<ul> <li>\u529f\u80fd:</li> <li>static_assert\u8fdb\u884c\u7f16\u8bd1\u65f6\u65ad\u8a00\u68c0\u67e5</li> <li>\u533a\u522b\uff1a</li> <li>static_assert\u662f\u5173\u952e\u5b57\uff0c\u800cassert\u662f\u5b8f</li> <li>assert\u8fdb\u884c\u8fd0\u884c\u671f\u68c0\u67e5\uff0c\u800cstatic_assert\u5728\u7f16\u8bd1\u671f\u68c0\u67e5</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include&lt;assert.h&gt;\nint main()\n{\n//assert\u4e0d\u4f1a\u5728\u7f16\u8bd1\u671f\u62a5\u9519\uff0c\u53ea\u6709\u8fd0\u884c\u7a0b\u5e8f\u65f6\uff0c\u6267\u884c\u5230\u8fd9\u4e00\u6b65\u91c7\u53d6\u68c0\u67e5assert\u4e2d\u8868\u8fbe\u5f0f\u7684\u503c\nassert(1 + 2 &lt; 2);\n//static_assert\u4f1a\u5728\u7f16\u8bd1\u671f\u68c0\u67e5\uff0c\u5982vs\u4f1a\u7acb\u5373\u62a5\u9519\u63d0\u793a\nstatic_assert(1 + 2 &lt; 2, \"1+2&gt;2\");    }\n</code></pre> <ul> <li>assert\u6e90\u7801\u5206\u6790:\u5f53\u5728\u7a0b\u5e8f\u4e2d\u5b9a\u4e49NDEBUG\u5b8f\u65f6\uff0cassert\u5b8f\u8f89\u5c55\u5f00\u6210<code>(void)0</code>,\u8fd9\u53ef\u4ee5\u4f7fassert\u4e0d\u4ea7\u751f\u4efb\u4f55\u65ad\u8a00\u4f5c\u7528\u3002assert\u5c55\u5f00\u540e\u5148\u6267\u884c<code>!!(expression)</code>\u8868\u8fbe\u5f0f\uff0c\u5982\u679c\u771f\uff0c\u5219\u5f97<code>(void)true</code>,\u5426\u5219\uff0c\u6267\u884c<code>(_wassert(_CRT_WIDE(#expression), _CRT_WIDE(__FILE__), (unsigned)(__LINE__)), 0)</code>,\u5176\u4e2d<code>_wassert</code>\u51fd\u6570\u4f5c\u7528\u662f\u5c06\u9519\u8bef\u4fe1\u606f\u6253\u5370\u5728\u63a7\u5236\u53f0\uff0c\u5e76\u8c03\u7528<code>std::abort()</code>\u7ec8\u6b62\u7a0b\u5e8f\u3002<code>,0</code>\u7684\u4f5c\u7528\u662f\u5229\u7528\u9017\u53f7\u8868\u8fbe\u5f0f\u7684\u7279\u6027\u4f7fassert\u5b8f\u6267\u884c\u540e\u4ea7\u751f<code>(void)0</code>\u7ed3\u679c</li> </ul> <pre><code>#ifdef NDEBUG\n\n#define assert(expression) ((void)0)\n\n#else\n\n_ACRTIMP void __cdecl _wassert(\n_In_z_ wchar_t const* _Message,\n_In_z_ wchar_t const* _File,\n_In_   unsigned       _Line\n);\n\n#define assert(expression) (void)(                                                       \\\n            (!!(expression)) ||                                                              \\\n            (_wassert(_CRT_WIDE(#expression), _CRT_WIDE(__FILE__), (unsigned)(__LINE__)), 0) \\\n        )\n\n#endif\n</code></pre> <p>\u6ce8\u610f\uff1a<code>(void)0</code>\u7684\u4f5c\u7528\u4f7f\u8868\u8fbe\u5f0f\u4ec5\u4ec5\u53ef\u6267\u884c\uff0c\u5374\u4e0d\u80fd\u4f5c\u4e3a\u5de6\u503c\u6216\u53f3\u503c\uff0c\u5982<code>int i=(void)(1+2);</code>\u5c06\u4f1a\u62a5\u9519\uff0c\u8868\u8fbe\u5f0f<code>1+2</code>\u4f1a\u6267\u884c\u5f97\u52303\uff0c\u4f46\u8fd9\u4e2a\u503c\u7ecf\u8fc7<code>void</code>\u5f3a\u5236\u8f6c\u4e3a\u4e0d\u5b8c\u6574\u7c7b\u578b\uff0c\u56e0\u6b64\u4e0d\u80fd\u7ed9<code>int</code>\u53d8\u91cf\u3002</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/tie/","title":"std::tie","text":"<ul> <li>\u5934\u6587\u4ef6\uff1a<code>tuple</code></li> <li>\u529f\u80fd\uff1a\u89e3\u6784pair\u548ctuple\u7c7b\u578b\u6570\u636e,\u53ef\u4ee5\u4e0estd::ignore\u914d\u5408\u4f7f\u7528\uff0c\u89e3\u6784\u540e\u53d8\u91cf\u662f\u89e3\u6784\u524d\u6570\u636e\u7684\u5f15\u7528</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;tuple&gt;\nusing namespace std;\nint main()\n{\nint a1 = 0, a2 = 0;\nauto tp = tie(a1, a2) = pair&lt;int, int&gt;(1, 2);\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790\uff1atie\u662f\u4e00\u4e2a\u6a21\u677f\u51fd\u6570\uff0c\u53c2\u6570\u662f\u5f15\u7528\u7c7b\u578b\uff0c\u8fd4\u56de\u503c\u4e00\u4e2atuple\u7c7b\u578b\uff0c\u5176\u4e2d\u5b58\u50a8\u4e86\u5f15\u7528\u6570\u636e\uff0c\u6b63\u56e0\u4e3a\u6b64\uff0c\u5f53tie\u51fd\u6570\u6267\u884c\u65f6\uff0c\u8fd4\u56detuple\u503c\u4f5c\u4e3a\u5de6\u503c\uff0c\u901a\u8fc7\u8c03\u7528tuple\u7684\u8d4b\u503c\u8fd0\u7b97\u7b26\u64cd\u4f5c\uff0c\u53f3\u503c\u7684\u6570\u636e\u4f7ftuple\u4e2d\u5b58\u50a8\u7684\u6570\u636e\u53d8\u5316\uff0c\u4ece\u800c\u4f7ftie\u53c2\u6570\u6570\u636e\u53d8\u5316\u3002\uff08\u53d8\u5316\u7684\u4e3b\u8981\u539f\u56e0\u662ftie\u53c2\u6570\u548c\u8fd4\u56de\u503ctuple\u4e2d\u6570\u636e\u90fd\u662f\u5f15\u7528\u7c7b\u578b\uff09</li> </ul> <pre><code>// FUNCTION TEMPLATE tie\ntemplate &lt;class... _Types&gt;\n_NODISCARD constexpr tuple&lt;_Types&amp;...&gt; tie(_Types&amp;... _Args) noexcept { // make tuple from elements\nusing _Ttype = tuple&lt;_Types&amp;...&gt;;\nreturn _Ttype(_Args...);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/","title":"type_traits","text":"<p>c++ \u7c7b\u578b\u7279\u6027\uff08type_traits\uff09\u5b9a\u4e49\u4e00\u4e2a\u7f16\u8bd1\u65f6\u57fa\u4e8e\u6a21\u677f\u7684\u7ed3\u6784\uff0c\u4ee5\u67e5\u8be2\u6216\u4fee\u6539\u7c7b\u578b\u7684\u5c5e\u6027 - \u6ce8\u610f\u4e8b\u9879\uff1a\u5728<code>type_traits</code>\u7684\u5b9e\u73b0\u4e2d\uff0c\u6709\u5f88\u591a\u9700\u8981\u7f16\u8bd1\u5668\u652f\u6301\uff0c\u4ec5\u4ec5\u5229\u7528\u8bed\u8a00\u7279\u6027\u5b9e\u73b0\u4e0d\u4e86\uff0c\u5982   - <code>is_enum</code>   - <code>is_union</code>   - <code>is_class</code></p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#1","title":"1 \u7c7b\u578b\u7c7b\u522b\u5224\u65ad","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#11-is_void","title":"1.1 is_void","text":"<ul> <li>\u529f\u80fd\uff1a\u68c0\u67e5\u662f\u5426\u4e3a void \u7c7b\u578b</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nint main()\n{\ndecltype(1, 2.2) d;\nstd::cout &lt;&lt; std::boolalpha;\nstd::cout &lt;&lt; std::is_void&lt;void&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_void&lt;int&gt;::value &lt;&lt; '\\n';\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790:</li> <li>\u79fb\u9664\u7c7b\u578bcv\u9650\u5b9a\u7b26</li> <li>\u4f7f\u7528is_same\u5224\u65ad\u662f\u5426\u662fvoid</li> </ul> <pre><code>template &lt;class _Ty&gt;\n_INLINE_VAR constexpr bool is_void_v = is_same_v&lt;remove_cv_t&lt;_Ty&gt;, void&gt;;\n\ntemplate &lt;class _Ty&gt;\nstruct is_void : bool_constant&lt;is_void_v&lt;_Ty&gt;&gt; {};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#12-is_null_pointer","title":"1.2 is_null_pointer","text":"<ul> <li>\u529f\u80fd\uff1a\u68c0\u67e5\u7c7b\u578b\u662f\u5426\u4e3a std::nullptr_t</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n//is_null_pointer\nint main()\n{\nstd::cout &lt;&lt; std::boolalpha\n&lt;&lt; std::is_null_pointer&lt; decltype(nullptr) &gt;::value &lt;&lt; ' '\n&lt;&lt; std::is_null_pointer&lt; int* &gt;::value &lt;&lt; '\\n'\n&lt;&lt; std::is_pointer&lt; decltype(nullptr) &gt;::value &lt;&lt; ' '\n&lt;&lt; std::is_pointer&lt;int*&gt;::value &lt;&lt; '\\n';\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790\uff1a\u539f\u7406\u540cis_void</li> </ul> <pre><code>template &lt;class _Ty&gt;\n_INLINE_VAR constexpr bool is_null_pointer_v =\nis_same_v&lt;remove_cv_t&lt;_Ty&gt;, nullptr_t&gt;; // determine whether _Ty is cv-qualified nullptr_t\n\ntemplate &lt;class _Ty&gt;\nstruct is_null_pointer : bool_constant&lt;is_null_pointer_v&lt;_Ty&gt;&gt; {};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#13-is_integral","title":"1.3 is_integral","text":"<ul> <li>\u529f\u80fd\uff1a\u68c0\u67e5\u7c7b\u578b\u662f\u5426\u4e3a\u6574\u578b( bool \u3001 char \u3001 char8_t \u3001 char16_t \u3001 char32_t \u3001 wchar_t \u3001 short \u3001 int \u3001 long \u3001 long long)</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nclass A {};\n\nenum E : int {};\n\ntemplate &lt;class T&gt;\nT f(T i)\n{\nstatic_assert(std::is_integral&lt;T&gt;::value, \"Integral required.\");\nreturn i;\n}\n\nint main() {\nstd::cout &lt;&lt; std::boolalpha;\nstd::cout &lt;&lt; std::is_integral&lt;A&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_integral&lt;E&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_integral&lt;float&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_integral&lt;int&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_integral&lt;bool&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; f(123) &lt;&lt; '\\n';\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790:\u539f\u7406\u540cis_void;\u5176\u4e2d_Is_any_of_v\u95f4\u63a5\u4f7f\u7528\u4e86disjunction_v</li> </ul> <pre><code>template &lt;class _Ty, class... _Types&gt;\n_INLINE_VAR constexpr bool _Is_any_of_v = // true if and only if _Ty is in _Types\ndisjunction_v&lt;is_same&lt;_Ty, _Types&gt;...&gt;;\n\ntemplate &lt;class _Ty&gt;\n_INLINE_VAR constexpr bool is_integral_v = _Is_any_of_v&lt;remove_cv_t&lt;_Ty&gt;, bool, char, signed char, unsigned char,\nwchar_t,\n#ifdef __cpp_char8_t\nchar8_t,\n#endif // __cpp_char8_t\nchar16_t, char32_t, short, unsigned short, int, unsigned int, long, unsigned long, long long, unsigned long long&gt;;\n\ntemplate &lt;class _Ty&gt;\nstruct is_integral : bool_constant&lt;is_integral_v&lt;_Ty&gt;&gt; {};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#14-is_floating_point","title":"1.4 is_floating_point","text":"<ul> <li>\u529f\u80fd\uff1a\u68c0\u67e5\u7c7b\u578b\u662f\u5426\u662f\u6d6e\u70b9\u7c7b\u578b( float \u3001 double \u3001 long double)</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nclass A {};\n\nint main() {\nstd::cout &lt;&lt; std::boolalpha;\nstd::cout &lt;&lt; std::is_floating_point&lt;A&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_floating_point&lt;float&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_floating_point&lt;float&amp;&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_floating_point&lt;double&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_floating_point&lt;double&amp;&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_floating_point&lt;int&gt;::value &lt;&lt; '\\n';\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790:\u539f\u7406\u540cis_integral</li> </ul> <pre><code>template &lt;class _Ty&gt;\n_INLINE_VAR constexpr bool is_floating_point_v = _Is_any_of_v&lt;remove_cv_t&lt;_Ty&gt;, float, double, long double&gt;;\n\ntemplate &lt;class _Ty&gt;\nstruct is_floating_point : bool_constant&lt;is_floating_point_v&lt;_Ty&gt;&gt; {};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#15-is_array","title":"1.5 is_array","text":"<ul> <li>\u529f\u80fd\uff1a\u68c0\u67e5\u7c7b\u578b\u662f\u5426\u662f\u6570\u7ec4\u7c7b\u578b</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;array&gt;\n#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nclass A {};\n\nint main()\n{\nstd::cout &lt;&lt; std::boolalpha;\nstd::cout &lt;&lt; std::is_array&lt;A&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_array&lt;A[]&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_array&lt;A[3]&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_array&lt;float&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_array&lt;int&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_array&lt;int[]&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_array&lt;int[3]&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_array&lt;std::array&lt;int, 3&gt;&gt;::value &lt;&lt; '\\n';\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790:\u9488\u5bf9\u6570\u7ec4\u7279\u70b9\uff0c\u76f4\u63a5\u5177\u4f53\u5316<code>_Ty[]</code>\u6765\u5339\u914d\u6570\u7ec4\uff0c\u5176\u5b83\u663e\u7136\u5c31\u4e0d\u662f\u6570\u7ec4</li> </ul> <pre><code>template &lt;class&gt;\n_INLINE_VAR constexpr bool is_array_v = false; // determine whether type argument is an array\n\ntemplate &lt;class _Ty, size_t _Nx&gt;\n_INLINE_VAR constexpr bool is_array_v&lt;_Ty[_Nx]&gt; = true;\n\ntemplate &lt;class _Ty&gt;\n_INLINE_VAR constexpr bool is_array_v&lt;_Ty[]&gt; = true;\n\ntemplate &lt;class _Ty&gt;\nstruct is_array : bool_constant&lt;is_array_v&lt;_Ty&gt;&gt; {};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#16-is_enum","title":"1.6 is_enum","text":"<ul> <li>\u529f\u80fd\uff1a\u68c0\u67e5\u7c7b\u578b\u662f\u5426\u662f\u679a\u4e3e\u7c7b\u578b\uff08enum class\u6216enum\u5747\u53ef\uff09</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nclass A {};\n\nenum E {};\n\nenum class Ec : int {};\nint main()\n{\nstd::cout &lt;&lt; std::boolalpha;\nstd::cout &lt;&lt; std::is_enum&lt;A&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_enum&lt;E&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_enum&lt;Ec&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_enum&lt;int&gt;::value &lt;&lt; '\\n';\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790:\u9700\u8981\u7f16\u8bd1\u5668\u652f\u6301</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#17-is_union","title":"1.7 is_union","text":"<ul> <li>\u529f\u80fd\uff1a\u68c0\u67e5\u7c7b\u578b\u662f\u5426\u4e3a\u8054\u5408\u4f53\u7c7b\u578b</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nstruct A {};\n\ntypedef union {\nint a;\nfloat b;\n} B;\n\nstruct C {\nB d;\n};\n\nint main() {\nstd::cout &lt;&lt; std::boolalpha;\nstd::cout &lt;&lt; std::is_union&lt;A&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_union&lt;B&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_union&lt;C&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_union&lt;int&gt;::value &lt;&lt; '\\n';\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790:\u9700\u8981\u7f16\u8bd1\u5668\u652f\u6301</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#18-is_class","title":"1.8 is_class","text":"<ul> <li>\u529f\u80fd\uff1a\u68c0\u67e5\u7c7b\u578b\u662f\u5426\u975e\u8054\u5408\u7c7b\u7c7b\u578b\uff08\u4e0d\u80fd\u662funion\uff0cenum class\uff09</li> <li>\u793a\u4f8b </li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nstruct A {};\n\nclass B {};\n\nenum class C {};\n\nint main() {\nstd::cout &lt;&lt; std::boolalpha;\nstd::cout &lt;&lt; std::is_class&lt;A&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_class&lt;B&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_class&lt;C&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_class&lt;int&gt;::value &lt;&lt; '\\n';\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790:\u5148<code>is_union</code>\u6392\u9664\u662f\u8054\u5408\u4f53\uff0c\u518d\u4f7f\u7528<code>int T::*</code>\u4f5c\u4e3a\u7c7b\u6210\u5458\u6307\u9488\u6765\u786e\u4fdd<code>T</code>\u662f\u4e00\u4e2a\u7c7b\uff0c<code>decltype</code>\u662f\u4e0d\u6c42\u503c\u8bed\u5883\uff0c\u6240\u6709\u6a21\u677f\u51fd\u6570<code>test</code>\u4e0d\u9700\u8981\u5b9e\u73b0</li> </ul> <pre><code>namespace detail {\ntemplate &lt;class T&gt;\nstd::integral_constant&lt;bool, !std::is_union&lt;T&gt;::value&gt; test(int T::*);\n\ntemplate &lt;class&gt;\nstd::false_type test(...);\n}\n\ntemplate &lt;class T&gt;\nstruct is_class : decltype(detail::test&lt;T&gt;(nullptr))\n{};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#19-is_function","title":"1.9 is_function","text":"<ul> <li>\u529f\u80fd\uff1a</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nstruct A {\nint fun() const&amp;;\n};\n\ntemplate&lt;typename&gt;\nstruct PM_traits {};\n\ntemplate&lt;class T, class U&gt;\nstruct PM_traits&lt;U T::*&gt; {\nusing member_type = U;\n};\n\nint f();\n\nint main() {\nstd::cout &lt;&lt; std::boolalpha;\nstd::cout &lt;&lt; std::is_function&lt;A&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_function&lt;int(int)&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_function&lt;decltype(f)&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_function&lt;int&gt;::value &lt;&lt; '\\n';\n\nusing T = PM_traits&lt;decltype(&amp;A::fun)&gt;::member_type; // T \u4e3a int() const&amp;\nstd::cout &lt;&lt; std::is_function&lt;T&gt;::value &lt;&lt; '\\n';\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790:</li> <li>\u501f\u52a9\u8bed\u8a00\u7279\u6027\uff1a\u51fd\u6570\u548c\u5f15\u7528\u4e0d\u80fd\u88abcv\u9650\u5b9a</li> <li>\u5148\u4f7f\u7528<code>is_const_v</code>\u6765\u5224\u65ad<code>_Ty</code>\u662f\u5426\u80fd\u589e\u52a0<code>const</code>\u9650\u5b9a\uff08\u7528\u4e8e\u9650\u5b9a<code>_Ty</code>\u5728\u51fd\u6570\u548c\u5f15\u7528\u4e4b\u95f4\uff09</li> <li>\u518d\u5229\u7528<code>is_reference_v</code>\u5224\u65ad\u662f\u5426\u662f<code>\u5f15\u7528</code>\uff08\u6392\u9664\u6389\u4e86\u5f15\u7528\uff0c\u53ea\u5269\u4e0b\u51fd\u6570\u4e86\uff09</li> </ul> <pre><code>template &lt;class _Ty&gt;\n_INLINE_VAR constexpr bool is_function_v = // only function types and reference types can't be const qualified\n!is_const_v&lt;const _Ty&gt; &amp;&amp; !is_reference_v&lt;_Ty&gt;;\n\ntemplate &lt;class _Ty&gt;\nstruct is_function : bool_constant&lt;is_function_v&lt;_Ty&gt;&gt; {};\n</code></pre> <ul> <li>\u6269\u5c55\uff1a\u4ee5\u4e0a\u5b9e\u73b0\u5f88\u5de7\u5999\uff0c\u8fd8\u6709\u66f4\u52a1\u5b9e\u7684\u65b9\u6cd5\u89c1cppreference.com</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#110-is_pointer","title":"1.10 is_pointer","text":"<ul> <li>\u529f\u80fd\uff1a\u68c0\u67e5 T \u662f\u5426\u4e3a\u6307\u5411\u5bf9\u8c61\u6307\u9488\u6216\u6307\u5411\u51fd\u6570\u6307\u9488\uff08\u4f46\u4e0d\u662f\u6307\u5411\u6210\u5458/\u6210\u5458\u51fd\u6570\u6307\u9488\uff09</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nclass A {};\n\nint main() {\nstd::cout &lt;&lt; std::boolalpha;\nstd::cout &lt;&lt; std::is_pointer&lt;A&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_pointer&lt;A *&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_pointer&lt;A &amp;&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_pointer&lt;int&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_pointer&lt;int *&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_pointer&lt;int **&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_pointer&lt;int[10]&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_pointer&lt;std::nullptr_t&gt;::value &lt;&lt; '\\n';\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790:</li> <li>\u9488\u5bf9cv\u9650\u5b9a\u548c\u6307\u9488\u5177\u4f53\u5316\u4e0d\u540c\u7248\u672c</li> </ul> <pre><code>template &lt;class&gt;\n_INLINE_VAR constexpr bool is_pointer_v = false; // determine whether _Ty is a pointer\n\ntemplate &lt;class _Ty&gt;\n_INLINE_VAR constexpr bool is_pointer_v&lt;_Ty*&gt; = true;\n\ntemplate &lt;class _Ty&gt;\n_INLINE_VAR constexpr bool is_pointer_v&lt;_Ty* const&gt; = true;\n\ntemplate &lt;class _Ty&gt;\n_INLINE_VAR constexpr bool is_pointer_v&lt;_Ty* volatile&gt; = true;\n\ntemplate &lt;class _Ty&gt;\n_INLINE_VAR constexpr bool is_pointer_v&lt;_Ty* const volatile&gt; = true;\n\ntemplate &lt;class _Ty&gt;\nstruct is_pointer : bool_constant&lt;is_pointer_v&lt;_Ty&gt;&gt; {};\n</code></pre> <ul> <li>\u5176\u5b83\u5b9e\u73b0:</li> <li>\u53bb\u9664cv\u9650\u5b9a\uff0c\u518d\u5177\u4f53\u5316\u6307\u9488\u7248\u672c</li> </ul> <pre><code>template&lt;class T&gt;\nstruct is_pointer_helper : std::false_type {};\n\ntemplate&lt;class T&gt;\nstruct is_pointer_helper&lt;T*&gt; : std::true_type {};\n\ntemplate&lt;class T&gt;\nstruct is_pointer : is_pointer_helper&lt; typename std::remove_cv&lt;T&gt;::type &gt; {};\n</code></pre> <ul> <li>\u4e0a\u97622\u4e2a\u7248\u672c\u5206\u6790\uff1a\u672c\u8d28\u90fd\u662f\u56f4\u7ed5\u6307\u9488\u548ccv\u9650\u5b9a\uff0c\u4e00\u4e2a\u662f\u79fb\u9664cv\u9650\u5b9a\uff0c\u4e00\u4e2a\u662f\u589e\u52a0cv\u9650\u5b9a\u7684\u5177\u4f53\u5316\u6a21\u677f</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#111-is_referenceis_lvalue_referenceis_rvalue_reference","title":"1.11 is_reference\u3001is_lvalue_reference\u548cis_rvalue_reference","text":"<ul> <li>\u529f\u80fd\uff1a\u68c0\u67e5\u7c7b\u578b\u662f\u5426\u4e3a\u5f15\u7528\u6216\u5de6\u503c\u5f15\u7528\u6216\u53f3\u503c\u5f15\u7528</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nclass A {};\n\nint main() {\nstd::cout &lt;&lt; std::boolalpha;\nstd::cout &lt;&lt; std::is_lvalue_reference&lt;A&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_lvalue_reference&lt;A&amp;&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_lvalue_reference&lt;A&amp;&amp;&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_rvalue_reference&lt;A&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_rvalue_reference&lt;A&amp;&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_rvalue_reference&lt;A&amp;&amp;&gt;::value &lt;&lt; '\\n';\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790\uff1a</li> <li>\u5177\u4f53\u5316<code>T&amp;</code>\u6216<code>T&amp;&amp;</code>\u6765\u5b9e\u73b0</li> </ul> <pre><code>// STRUCT TEMPLATE is_lvalue_reference\ntemplate &lt;class&gt;\n_INLINE_VAR constexpr bool is_lvalue_reference_v = false; // determine whether type argument is an lvalue reference\n\ntemplate &lt;class _Ty&gt;\n_INLINE_VAR constexpr bool is_lvalue_reference_v&lt;_Ty&amp;&gt; = true;\n\ntemplate &lt;class _Ty&gt;\nstruct is_lvalue_reference : bool_constant&lt;is_lvalue_reference_v&lt;_Ty&gt;&gt; {};\n\n// STRUCT TEMPLATE is_rvalue_reference\ntemplate &lt;class&gt;\n_INLINE_VAR constexpr bool is_rvalue_reference_v = false; // determine whether type argument is an rvalue reference\n\ntemplate &lt;class _Ty&gt;\n_INLINE_VAR constexpr bool is_rvalue_reference_v&lt;_Ty&amp;&amp;&gt; = true;\n\ntemplate &lt;class _Ty&gt;\nstruct is_rvalue_reference : bool_constant&lt;is_rvalue_reference_v&lt;_Ty&gt;&gt; {};\n\n// STRUCT TEMPLATE is_reference\ntemplate &lt;class&gt;\n_INLINE_VAR constexpr bool is_reference_v = false; // determine whether type argument is a reference\n\ntemplate &lt;class _Ty&gt;\n_INLINE_VAR constexpr bool is_reference_v&lt;_Ty&amp;&gt; = true;\n\ntemplate &lt;class _Ty&gt;\n_INLINE_VAR constexpr bool is_reference_v&lt;_Ty&amp;&amp;&gt; = true;\n\ntemplate &lt;class _Ty&gt;\nstruct is_reference : bool_constant&lt;is_reference_v&lt;_Ty&gt;&gt; {};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#112-is_member_object_pointer","title":"1.12 is_member_object_pointer","text":"<ul> <li>\u529f\u80fd\uff1a\u68c0\u67e5\u7c7b\u578b\u662f\u5426\u4e3a\u6307\u5411\u975e\u9759\u6001\u6210\u5458\u5bf9\u8c61\u7684\u6307\u9488</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nint main() {\nclass cls {};\nstd::cout &lt;&lt; (std::is_member_object_pointer&lt;int(cls::*)&gt;::value\n? \"T is member object pointer\"\n: \"T is not a member object pointer\") &lt;&lt; '\\n';\nstd::cout &lt;&lt; (std::is_member_object_pointer&lt;int(cls::*)()&gt;::value\n? \"T is member object pointer\"\n: \"T is not a member object pointer\") &lt;&lt; '\\n';\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790\uff1a\u7531\u4e8e<code>T U::*</code>\u65e2\u80fd\u5339\u914d\u7c7b\u6210\u5458\u5bf9\u8c61\u53c8\u80fd\u5339\u914d\u7c7b\u6210\u5458\u51fd\u6570\uff0c\u6240\u4ee5\u5728\u6b64\u57fa\u7840\u4e0a\u518d\u5224\u65ad\u662f\u5426\u662f\u51fd\u6570\u3002</li> <li>\u5148\u53bb\u9664cv\u9650\u5b9a\u7b26</li> <li>\u518d\u5177\u4f53\u5316<code>_Ty1 _Ty2::*</code>\u7248\u672c<code>_Is_member_object_pointer</code></li> <li>\u6700\u540e\u518d\u4f7f\u7528<code>is_function_v</code>\u6392\u9664\u7c7b\u6210\u5458\u51fd\u6570</li> </ul> <pre><code>template &lt;class&gt;\nstruct _Is_member_object_pointer {\nstatic constexpr bool value = false;\n};\n\ntemplate &lt;class _Ty1, class _Ty2&gt;\nstruct _Is_member_object_pointer&lt;_Ty1 _Ty2::*&gt; {\nstatic constexpr bool value = !is_function_v&lt;_Ty1&gt;;\nusing _Class_type           = _Ty2;\n};\ntemplate &lt;class _Ty&gt;\n_INLINE_VAR constexpr bool is_member_object_pointer_v = _Is_member_object_pointer&lt;remove_cv_t&lt;_Ty&gt;&gt;::value;\n\ntemplate &lt;class _Ty&gt;\nstruct is_member_object_pointer : bool_constant&lt;is_member_object_pointer_v&lt;_Ty&gt;&gt; {};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#113-is_member_function_pointer","title":"1.13 is_member_function_pointer","text":"<ul> <li>\u529f\u80fd\uff1a\u68c0\u67e5\u7c7b\u578b\u662f\u5426\u4e3a\u6307\u5411\u975e\u9759\u6001\u6210\u5458\u51fd\u6570\u7684\u6307\u9488</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;type_traits&gt;\nclass A {\npublic:\nvoid member() { }\n};\n\nint main()\n{\ndecltype(&amp;A::member) pfun;//void(A::* pfun)()\nstd::is_member_function_pointer&lt;int&gt;::value;//false\nstd::is_member_function_pointer&lt;int (A::*)(int)&gt;::value;//true\nstd::is_member_function_pointer&lt;decltype(&amp;A::member)&gt;::value;//true\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790:\u7531\u4e8e<code>T U::*</code>\u65e2\u80fd\u5339\u914d\u7c7b\u6210\u5458\u5bf9\u8c61\u53c8\u80fd\u5339\u914d\u7c7b\u6210\u5458\u51fd\u6570\uff0c\u6240\u4ee5\u5728\u6b64\u57fa\u7840\u4e0a\u518d\u5224\u65ad\u662f\u5426\u662f\u51fd\u6570\u3002</li> <li>\u5177\u4f53\u5316<code>T U::*</code>\u7248\u6a21\u677f\u4e14\u518d\u7ee7\u627f\u81ea<code>is_function</code>\u6765\u5224\u65ad\u662f\u7c7b\u6210\u5458\u5bf9\u8c61\u8fd8\u662f\u7c7b\u6210\u5458\u51fd\u6570</li> </ul> <pre><code>template&lt; class T &gt;\nstruct is_member_function_pointer_helper : std::false_type {};\n\ntemplate&lt; class T, class U&gt;\nstruct is_member_function_pointer_helper&lt;T U::*&gt; : std::is_function&lt;T&gt; {};\n\ntemplate&lt; class T &gt;\nstruct is_member_function_pointer\n: is_member_function_pointer_helper&lt; typename std::remove_cv&lt;T&gt;::type &gt; {};\n</code></pre> <ul> <li>\u6269\u5c55\uff1a\u5728\u4e0a\u9762\u7684\u6e90\u7801\u4e2d\u4f7f\u7528\u4e86<code>Ret T::*</code>\u65e2\u80fd\u5339\u914d\u7c7b\u6210\u5458\u5bf9\u8c61\u53c8\u80fd\u5339\u914d\u7c7b\u6210\u5458\u51fd\u6570\u7684\u539f\u7406\uff0c\u5176\u5b9e\u6211\u4eec\u4e5f\u53ef\u4ee5\u4f7f\u7528<code>Ret (T::*)(Args...)</code>\uff08\u7c7b\u6210\u5458\u51fd\u6570\u6307\u9488\u8bed\u6cd5\uff09\u6765\u5b9e\u73b0\uff0c\u4ee3\u7801\u5982\u4e0b</li> </ul> <pre><code>#include &lt;type_traits&gt;\ntemplate&lt; class T &gt;\nstruct is_member_function_pointer_helper : std::false_type {};\n\ntemplate&lt; class Ret, class U, class...Args&gt;\nstruct is_member_function_pointer_helper&lt;Ret(U::*)(Args...)&gt; : std::true_type {};\n\ntemplate&lt; class T &gt;\nstruct is_member_function_pointer\n: is_member_function_pointer_helper&lt; typename std::remove_cv&lt;T&gt;::type &gt; {};\nclass A {\npublic:\nvoid member() { }\n};\n\nint main()\n{\nis_member_function_pointer&lt;int A::*&gt;::value;//false\nis_member_function_pointer&lt;int (A::*)(int,int)&gt;::value;//true\nis_member_function_pointer&lt;decltype(&amp;A::member)&gt;::value;//true\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#114-is_member_pointer","title":"1.14 is_member_pointer","text":"<ul> <li>\u529f\u80fd\uff1a\u68c0\u67e5\u7c7b\u578b\u662f\u5426\u4e3a\u6307\u5411\u975e\u9759\u6001\u6210\u5458\u51fd\u6570\u6216\u5bf9\u8c61\u7684\u6307\u9488\u7c7b\u578b</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nint main() {\nclass cls {};\nstd::cout &lt;&lt; (std::is_member_pointer&lt;int(cls::*)&gt;::value\n? \"T is member pointer\"\n: \"T is not a member pointer\") &lt;&lt; '\\n';\nstd::cout &lt;&lt; (std::is_member_pointer&lt;int&gt;::value\n? \"T is member pointer\"\n: \"T is not a member pointer\") &lt;&lt; '\\n';\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790:\u5728\u6709\u4e86is_member_object_pointer\u548cis_member_function_pointer\u540e\uff0c\u76f4\u63a5\u5229\u7528\u6216\u8fd0\u7b97\u5224\u65ad\u5373\u53ef</li> </ul> <pre><code>template &lt;class _Ty&gt;\n_INLINE_VAR constexpr bool is_member_pointer_v = is_member_object_pointer_v&lt;_Ty&gt; || is_member_function_pointer_v&lt;_Ty&gt;;\nstruct is_member_pointer : bool_constant&lt;is_member_pointer_v&lt;_Ty&gt;&gt; {}; // determine whether _Ty is a pointer to member\n</code></pre> <ul> <li>\u6269\u5c55\uff1a\u4e0a\u9762\u6216\u64cd\u4f5c\u4e5f\u53ef\u4ee5\u4f7f\u7528<code>disjunction_v</code>\u6765\u4ee3\u66ff\uff0c\u5982\u4e0b</li> </ul> <pre><code>template &lt;class _Ty&gt;\nconstexpr bool is_member_pointer_v = std::disjunction_v&lt;std::is_member_object_pointer&lt;_Ty&gt;,std::is_member_function_pointer&lt;_Ty&gt;&gt;;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#115-is_arithmetic","title":"1.15 is_arithmetic","text":"<ul> <li>\u529f\u80fd\uff1a\u68c0\u67e5\u7c7b\u578b\u662f\u5426\u4e3a\u7b97\u672f\u7c7b\u578b\uff08\u5373\u6574\u6570\u7c7b\u578b\u6216\u6d6e\u70b9\u7c7b\u578b\uff09</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nclass A {};\n\nint main() {\nstd::cout &lt;&lt; std::boolalpha;\nstd::cout &lt;&lt; \"A:           \" &lt;&lt;  std::is_arithmetic&lt;A&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"bool:        \" &lt;&lt;  std::is_arithmetic&lt;bool&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"int:         \" &lt;&lt;  std::is_arithmetic&lt;int&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"int const:   \" &lt;&lt;  std::is_arithmetic&lt;int const&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"int &amp;:       \" &lt;&lt;  std::is_arithmetic&lt;int&amp;&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"int *:       \" &lt;&lt;  std::is_arithmetic&lt;int*&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"float:       \" &lt;&lt;  std::is_arithmetic&lt;float&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"float const: \" &lt;&lt;  std::is_arithmetic&lt;float const&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"float &amp;:     \" &lt;&lt;  std::is_arithmetic&lt;float&amp;&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"float *:     \" &lt;&lt;  std::is_arithmetic&lt;float*&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"char:        \" &lt;&lt;  std::is_arithmetic&lt;char&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"char const:  \" &lt;&lt;  std::is_arithmetic&lt;char const&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"char &amp;:      \" &lt;&lt;  std::is_arithmetic&lt;char&amp;&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"char *:      \" &lt;&lt;  std::is_arithmetic&lt;char*&gt;::value &lt;&lt; '\\n';\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790:\u5229\u7528is_integral\u548cis_floating_point\u8fdb\u884c\u6216\u8fd0\u7b97</li> </ul> <pre><code>template &lt;class _Ty&gt;\n_INLINE_VAR constexpr bool is_arithmetic_v = // determine whether _Ty is an arithmetic type\nis_integral_v&lt;_Ty&gt; || is_floating_point_v&lt;_Ty&gt;;\n\ntemplate &lt;class _Ty&gt;\nstruct is_arithmetic : bool_constant&lt;is_arithmetic_v&lt;_Ty&gt;&gt; {};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#116-is_fundamental","title":"1.16 is_fundamental","text":"<ul> <li>\u529f\u80fd\uff1a\u68c0\u67e5\u662f\u5426\u662f\u57fa\u7840\u7c7b\u578b\uff08\u7b97\u672f\u7c7b\u578b+void+nullptr_t\uff09</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nclass A {};\n\nint main() {\nstd::cout &lt;&lt; std::boolalpha;\nstd::cout &lt;&lt; \"A\\t\"      &lt;&lt; std::is_fundamental&lt;A&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"int\\t\"    &lt;&lt; std::is_fundamental&lt;int&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"int&amp;\\t\"   &lt;&lt; std::is_fundamental&lt;int&amp;&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"int*\\t\"   &lt;&lt; std::is_fundamental&lt;int*&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"float\\t\"  &lt;&lt; std::is_fundamental&lt;float&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"float&amp;\\t\" &lt;&lt; std::is_fundamental&lt;float&amp;&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"float*\\t\" &lt;&lt; std::is_fundamental&lt;float*&gt;::value &lt;&lt; '\\n';\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790:\u5229\u7528is_arithmetic\u548cis_void\u548cis_null_pointer\u8fdb\u884c\u6216\u8fd0\u7b97</li> </ul> <pre><code>template &lt;class _Ty&gt;\n_INLINE_VAR constexpr bool is_fundamental_v = is_arithmetic_v&lt;_Ty&gt; || is_void_v&lt;_Ty&gt; || is_null_pointer_v&lt;_Ty&gt;;\n\ntemplate &lt;class _Ty&gt;\nstruct is_fundamental : bool_constant&lt;is_fundamental_v&lt;_Ty&gt;&gt; {}; // determine whether _Ty is a fundamental type\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#117-is_object","title":"1.17 is_object","text":"<ul> <li>\u529f\u80fd\uff1a\u68c0\u67e5\u662f\u5426\u662f\u5bf9\u8c61\u7c7b\u578b\uff08\u5373\u4efb\u4f55\u51fd\u6570\u3001\u5f15\u7528\u6216 void \u7c7b\u578b\u5916\u7684\u53ef\u6709 cv \u9650\u5b9a\u7684\u7c7b\u578b\uff09</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nint main() {\nclass cls {};\nstd::cout &lt;&lt; std::boolalpha;\nstd::cout &lt;&lt; std::is_object&lt;int&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_object&lt;int&amp;&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_object&lt;cls&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_object&lt;cls&amp;&gt;::value &lt;&lt; '\\n';\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790:\u5229\u7528\u51fd\u6570\u548c\u5f15\u7528\u6700\u9876\u5c42\u4e0d\u80fd\u7528cv\u9650\u5b9a\u7684\u8bed\u8a00\u7279\u6765\u6392\u9664\u51fd\u6570\u4e0e\u5f15\u7528\uff0c\u518d\u6392\u9664void  </li> </ul> <pre><code>template &lt;class _Ty&gt;\n_INLINE_VAR constexpr bool is_object_v = // only function types and reference types can't be const qualified\nis_const_v&lt;const _Ty&gt; &amp;&amp; !is_void_v&lt;_Ty&gt;;\n\ntemplate &lt;class _Ty&gt;\nstruct is_object : bool_constant&lt;is_object_v&lt;_Ty&gt;&gt; {};\n</code></pre> <p>\u6269\u5c55\uff1a\u4ee5\u4e0a\u5b9e\u73b0\u8fd8\u53ef\u8fd9\u6837</p> <pre><code>template&lt; class T&gt;\nstruct is_object : std::integral_constant&lt;bool,\nstd::is_scalar&lt;T&gt;::value ||\nstd::is_array&lt;T&gt;::value  ||\nstd::is_union&lt;T&gt;::value  ||\nstd::is_class&lt;T&gt;::value&gt; {};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#2","title":"2 \u7c7b\u578b\u5c5e\u6027\u5224\u65ad","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#21-is_const","title":"2.1 is_const","text":"<ul> <li>\u529f\u80fd\uff1a\u68c0\u67e5\u7c7b\u578b\u662f\u5426\u4e3a const \u9650\u5b9a\uff08\u5373 const \u6216 const volatile \uff09</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nint main() {\nstd::cout &lt;&lt; std::boolalpha\n&lt;&lt; std::is_const_v&lt;int&gt; &lt;&lt; '\\n' // false\n&lt;&lt; std::is_const_v&lt;const int&gt; &lt;&lt; '\\n' // true\n&lt;&lt; std::is_const_v&lt;const int*&gt; /*false*/\n&lt;&lt; \" because the pointer itself can be changed but not the int pointed at\\n\"\n&lt;&lt; std::is_const_v&lt;int* const&gt; /*true*/ &lt;&lt; \" because the pointer itself can't be changed but the int pointed at can\\n\"\n&lt;&lt; std::is_const_v&lt;const int&amp;&gt; &lt;&lt; '\\n' // false\n&lt;&lt; std::is_const_v&lt;std::remove_reference_t&lt;const int&amp;&gt;&gt; &lt;&lt; '\\n' // true\n;\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790\uff1a\u5177\u4f53\u5316<code>const</code>\u7248\u672c\u7684is_const_v\u7528\u4e8e\u5339\u914d<code>const</code></li> </ul> <pre><code>template &lt;class&gt;\n_INLINE_VAR constexpr bool is_const_v = false; // determine whether type argument is const qualified\n\ntemplate &lt;class _Ty&gt;\n_INLINE_VAR constexpr bool is_const_v&lt;const _Ty&gt; = true;\n\ntemplate &lt;class _Ty&gt;\nstruct is_const : bool_constant&lt;is_const_v&lt;_Ty&gt;&gt; {};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#22-is_volatile","title":"2.2 is_volatile","text":"<ul> <li>\u529f\u80fd\uff1a\u68c0\u67e5\u7c7b\u578b\u662f\u5426\u4e3a volatile \u9650\u5b9a</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nint main() {\nstd::cout &lt;&lt; std::boolalpha;\nstd::cout &lt;&lt; std::is_volatile&lt;int&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_volatile&lt;volatile int&gt;::value  &lt;&lt; '\\n';\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790\uff1a\u539f\u7406\u540cis_const</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#23-extent","title":"2.3 extent","text":"<ul> <li>\u529f\u80fd\uff1a\u83b7\u53d6\u6570\u7ec4\u7c7b\u578b\u5728\u6307\u5b9a\u7ef4\u5ea6\u7684\u5927\u5c0f</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nint main()\n{\nstd::cout &lt;&lt; std::extent&lt;int[3]&gt;::value &lt;&lt; '\\n'; // &lt; \u9ed8\u8ba4\u7ef4\u5ea6\u4e3a 0\nstd::cout &lt;&lt; std::extent&lt;int[3][4], 0&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::extent&lt;int[3][4], 1&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::extent&lt;int[3][4], 2&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::extent&lt;int[]&gt;::value &lt;&lt; '\\n';\n\nconst auto ext = std::extent&lt;int[9]&gt;{};\nstd::cout &lt;&lt; ext &lt;&lt; '\\n'; // &lt; \u9690\u5f0f\u8f6c\u6362\u5230 std::size_t\n\nconst int ints[] = { 1,2,3,4 };\nstd::cout &lt;&lt; std::extent&lt;decltype(ints)&gt;::value &lt;&lt; '\\n'; // &lt; \u6570\u7ec4\u5927\u5c0f \n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790:</li> <li><code>extent</code>\u7ee7\u627f\u81ea<code>integral_constant</code></li> <li><code>extent_v</code>\u5229\u7528\u7ee7\u627f\u9012\u5f52\u5c55\u5f00\uff0c\u6700\u7ec8\u5f53\u5c55\u5f00\u5230\u7ef4\u5ea6\u4e3a0\u65f6\u7ed3\u675f</li> </ul> <pre><code>template &lt;class _Ty, unsigned int _Ix = 0&gt;\n_INLINE_VAR constexpr size_t extent_v = 0; // determine extent of dimension _Ix of array _Ty\n\ntemplate &lt;class _Ty, size_t _Nx&gt;\n_INLINE_VAR constexpr size_t extent_v&lt;_Ty[_Nx], 0&gt; = _Nx;\n\ntemplate &lt;class _Ty, unsigned int _Ix, size_t _Nx&gt;\n_INLINE_VAR constexpr size_t extent_v&lt;_Ty[_Nx], _Ix&gt; = extent_v&lt;_Ty, _Ix - 1&gt;;\n\ntemplate &lt;class _Ty, unsigned int _Ix&gt;\n_INLINE_VAR constexpr size_t extent_v&lt;_Ty[], _Ix&gt; = extent_v&lt;_Ty, _Ix - 1&gt;;\n\ntemplate &lt;class _Ty, unsigned int _Ix = 0&gt;\nstruct extent : integral_constant&lt;size_t, extent_v&lt;_Ty, _Ix&gt;&gt; {};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#231-rank","title":"2.3.1 rank","text":"<ul> <li>\u529f\u80fd\uff1a\u8ba1\u7b97\u6307\u5b9a\u6570\u7ec4\u7684\u7ef4\u5ea6\uff0c\u5f53\u975e\u6570\u7ec4\u65f6\u7ed3\u679c\u4e3a0</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nint main()\n{\nstd::cout &lt;&lt; std::rank&lt;int[1][2][3]&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::rank&lt;int[][2][3][4]&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::rank&lt;int&gt;::value &lt;&lt; '\\n';\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790:</li> <li><code>rank</code>\u7ee7\u627f\u81ea<code>integral_constant</code></li> <li><code>rank_v</code>\u9012\u5f52\u5c55\u5f00\u6570\u7ec4\u7ef4\u5ea6\uff0c\u5e76+1</li> </ul> <pre><code>template &lt;class _Ty&gt;\n_INLINE_VAR constexpr size_t rank_v = 0; // determine number of dimensions of array _Ty\n\ntemplate &lt;class _Ty, size_t _Nx&gt;\n_INLINE_VAR constexpr size_t rank_v&lt;_Ty[_Nx]&gt; = rank_v&lt;_Ty&gt; + 1;\n\ntemplate &lt;class _Ty&gt;\n_INLINE_VAR constexpr size_t rank_v&lt;_Ty[]&gt; = rank_v&lt;_Ty&gt; + 1;\n\ntemplate &lt;class _Ty&gt;\nstruct rank : integral_constant&lt;size_t, rank_v&lt;_Ty&gt;&gt; {};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#3","title":"3 \u7c7b\u578b\u5173\u7cfb\u5224\u65ad","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#31-is_same","title":"3.1 is_same","text":"<ul> <li>\u529f\u80fd\uff1a\u68c0\u67e5\u4e24\u4e2a\u7c7b\u578b\u662f\u5426\u76f8\u540c</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\nint main()\n{\nstd::cout &lt;&lt; std::boolalpha;\n// 'int' \u4e3a\u9690\u5f0f\u7684 'signed'\nstd::cout &lt;&lt; std::is_same&lt;int, int&gt;::value &lt;&lt; \"\\n\";          // true\nstd::cout &lt;&lt; std::is_same&lt;int, unsigned int&gt;::value &lt;&lt; \"\\n\"; // false\nstd::cout &lt;&lt; std::is_same&lt;int, signed int&gt;::value &lt;&lt; \"\\n\";   // true\n\n// \u4e0d\u540c\u4e8e\u5176\u4ed6\u7c7b\u578b\uff0c 'char' \u65e2\u975e 'unsigned' \u4ea6\u975e 'signed'\nstd::cout &lt;&lt; std::is_same&lt;char, char&gt;::value &lt;&lt; \"\\n\";          // true\nstd::cout &lt;&lt; std::is_same&lt;char, unsigned char&gt;::value &lt;&lt; \"\\n\"; // false\nstd::cout &lt;&lt; std::is_same&lt;char, signed char&gt;::value &lt;&lt; \"\\n\";   // false\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790\uff1a<code>is_same_v</code>\u662f\u6a21\u677f\u53d8\u91cf\u542b2\u4e2a\u6a21\u677f\u53c2\u6570\uff0c<code>is_same_v&lt;_Ty, _Ty&gt;</code>\u5339\u914d\u540c\u4e00\u7c7b\u578b\u7c7b\u578b\u7684\u6a21\u677f\u53c2\u6570\uff0c<code>is_same</code>\u7ee7\u627f<code>bool_constant</code>,\u4f7f\u5176\u542b\u6709value\u6210\u5458\u53d8\u91cf\u3002</li> </ul> <pre><code>template &lt;class, class&gt;\n_INLINE_VAR constexpr bool is_same_v = false; // determine whether arguments are the same type\ntemplate &lt;class _Ty&gt;\n_INLINE_VAR constexpr bool is_same_v&lt;_Ty, _Ty&gt; = true;\n\ntemplate &lt;class _Ty1, class _Ty2&gt;\nstruct is_same : bool_constant&lt;is_same_v&lt;_Ty1, _Ty2&gt;&gt; {};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#32-is_base_of","title":"3.2 is_base_of","text":"<ul> <li>\u529f\u80fd\uff1a\u5224\u65adA\u662f\u5426\u662fB\u7684\u57fa\u7c7b(\u57fa\u672c\u7c7b\u578b\u5982std::is_base_of::value\u662ffalse) <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>template&lt; class Base, class Derived &gt; struct is_base_of;</code></li> <li>\u793a\u4f8b</li> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nclass A {};\n\nclass B : A {};\n\nclass C {};\n\nint main() {\nstd::cout &lt;&lt; std::boolalpha;\nstd::cout &lt;&lt; \"a2b: \" &lt;&lt; std::is_base_of&lt;A, B&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"b2a: \" &lt;&lt; std::is_base_of&lt;B, A&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"c2b: \" &lt;&lt; std::is_base_of&lt;C, B&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"same type: \" &lt;&lt; std::is_base_of&lt;C, C&gt;::value &lt;&lt; '\\n';\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790\uff1a<code>is_base_of</code>\u7ee7\u627f<code>integral_constant</code>\uff0c\u5148\u540e\u5224\u65ad<code>is_class</code>\uff0c\u518d\u901a\u8fc7<code>test_pre_is_base_of</code>\u6765\u6d4b\u8bd5<code>D*</code>\u662f\u5426\u80fd\u8f6c\u6362\u6210<code>B*</code>,\u4e0d\u80fd\u5c31\u4f1a\u8f6c\u6362\u6210<code>void*</code></li> </ul> <pre><code>namespace details {\ntemplate &lt;typename B&gt;\nstd::true_type  test_pre_ptr_convertible(const volatile B*);\ntemplate &lt;typename&gt;\nstd::false_type test_pre_ptr_convertible(const volatile void*);\n\ntemplate &lt;typename, typename&gt;\nauto test_pre_is_base_of(...) -&gt; std::true_type;\ntemplate &lt;typename B, typename D&gt;\nauto test_pre_is_base_of(int) -&gt;\ndecltype(test_pre_ptr_convertible&lt;B&gt;(static_cast&lt;D*&gt;(nullptr)));\n}\n\ntemplate &lt;typename Base, typename Derived&gt;\nstruct is_base_of :\nstd::integral_constant&lt;\nbool,\nstd::is_class&lt;Base&gt;::value &amp;&amp; std::is_class&lt;Derived&gt;::value &amp;&amp;\ndecltype(details::test_pre_is_base_of&lt;Base, Derived&gt;(0))::value\n&gt; { };\n</code></pre> <ul> <li>\u6269\u5c55\u77e5\u8bc6</li> <li><code>is_base_of&lt;A,A&gt;::value</code>\u4e5f\u662fture\uff1f\u6e90\u7801\u4e2d<code>test_pre_ptr_convertible&lt;B&gt;(static_cast&lt;D*&gt;(nullptr))</code>\u8fd9\u4e00\u6bb5D\u4e0eB\u4e00\u6837\u5f53\u7136\u6ca1\u95ee\u9898\u3002</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#33-is_convertible","title":"3.3 is_convertible","text":"<ul> <li>\u529f\u80fd\uff1a\u5224\u65ad\u662f\u5426\u53ef\u4ee5\u7531A\u8f6c\u6362\u5230B</li> <li>\u89c4\u5219\uff1a</li> <li>\u5b50\u7c7b\u6307\u9488\u6216\u5f15\u7528\u53ef\u8f6c\u57fa\u7c7b\u6307\u9488\u6216\u5f15\u7528</li> <li>A\u5b9e\u73b0\u4e86\u8f6c\u6362B\u51fd\u6570\uff0c\u5219A\u53ef\u4ee5\u8f6cB\uff0c(\u4f46A\u7684\u6307\u9488\u6216\u5f15\u7528\u4e0d\u80fd\u8f6cB\u7684\u5f15\u7528\u6216\u6307\u9488)</li> <li>B\u5b9e\u73b0\u4e86\u5b8c\u7f8e\u6784\u9020\u51fd\u6570<code>template&lt;class T&gt; B(T&amp;&amp;){...}</code>\uff0c\u4efb\u4f55\u7c7b\u578b\uff08\u5305\u62ec\u6307\u9488\u548c\u5f15\u7528\uff09\u90fd\u53ef\u4ee5\u8f6c\u6362\u6210B</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nclass E { public: template&lt;class T&gt; E(T&amp;&amp;) { } };\nclass A {};\nclass B : public A {};\nclass C {};\nclass D { public: operator C() { return c; }  C c; };\nint main()\n{\nbool b2ap = std::is_convertible&lt;B*, A*&gt;::value;//true \u5b50\u7c7b\u8f6c\u57fa\u7c7b \u6307\u9488\nbool b2ar = std::is_convertible&lt;B&amp;, A&amp;&gt;::value;//true \u5b50\u7c7b\u8f6c\u57fa\u7c7b \u5f15\u7528\nbool a2b = std::is_convertible&lt;A*, B*&gt;::value;//false \u57fa\u7c7b\u4e0d\u80fd\u5411\u4e0b\u8f6c\u5b50\u7c7b\nbool b2c = std::is_convertible&lt;B*, C*&gt;::value;//false B C\u6ca1\u6709\u7ee7\u627f\u5173\u7cfb\nbool d2c = std::is_convertible&lt;D, C&gt;::value;//true D\u5b9e\u73b0\u4e86\u8f6c\u6362C\u51fd\u6570\nbool d2cp = std::is_convertible&lt;D&amp;, C&amp;&gt;::value;//false \u8f6c\u6362\u51fd\u6570\u4e0d\u80fd\u7528\u5728\u6307\u9488\u548c\u5f15\u7528\u4e0a   \nbool everything2e = std::is_convertible&lt;A, E&gt;::value; //true \u5b8c\u7f8e\u8f6c\u53d1\u6784\u9020\u51fd\u6570\u4f7f\u7c7b\u80fd\u4ece\u4efb\u4f55\u7c7b\u578b\u8f6c\u6362\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#4","title":"4 \u7c7b\u578b\u4fee\u6539","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#41-add_pointer","title":"4.1 add_pointer","text":"<ul> <li>\u529f\u80fd\uff1a\u5bf9\u7ed9\u5b9a\u7c7b\u578b\u6dfb\u52a0\u4e00\u5c42\u6307\u9488</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\nint main()\n{\nint i = 123;\nint* p = &amp;i;\nint&amp; ri = i;\ntypedef std::add_pointer&lt;decltype(p)&gt;::type IntPtr3;\ntypedef std::add_pointer&lt;decltype(i)&gt;::type IntPtr;\ntypedef std::add_pointer&lt;decltype(ri)&gt;::type IntPtr2;\n\nstatic_assert(std::is_pointer&lt;IntPtr&gt;::value, \"IntPtr should be a pointer\");\nstatic_assert(std::is_same&lt;IntPtr, int*&gt;::value, \"IntPtr should be a pointer to int\");\nstatic_assert(std::is_same&lt;IntPtr2, IntPtr&gt;::value, \"IntPtr2 should be equal to IntPtr\");\nstatic_assert(std::is_same&lt;IntPtr3, int**&gt;::value, \"IntPtr3 should be equal to int**\");\n}\n</code></pre> <p>\u6e90\u7801\u5206\u6790:\u5148\u53bb\u9664\u5f15\u7528\u518d\u589e\u52a0\u4e00\u5c42\u6307\u9488\uff0c\u6dfb\u52a0\u6307\u9488\u7684\u65b9\u5f0f\u5f88\u76f4\u63a5\uff0c\u5728\u7c7b\u578b\u540e\u589e\u52a0\u4e00\u4e2a\u7b26\u53f7<code>*</code> - <code>_Add_pointer</code>\u542b2\u4e2a\u7248\u672c\uff0c\u7248\u672c1\u4f5c\u4e3a\u4e3b\u6a21\u677f\u7c7b\uff0c\u5f53\u7248\u672c2\u4e0d\u6ee1\u8db3\u65f6\u88ab\u4f7f\u7528\uff0c\u7248\u672c2\u901a\u8fc7\u5224\u65ad\u9488\u5bf9\u79fb\u9664\u5f15\u7528\u518d\u6dfb\u52a0\u6307\u9488\u540e\u662f\u5426\u88ab<code>void_t</code>\u5339\u914d\uff08\u5373\u662f\u5426\u662f\u7c7b\u578b\uff09</p> <pre><code>template &lt;class _Ty, class = void&gt;\nstruct _Add_pointer { // add pointer (pointer type cannot be formed)\nusing type = _Ty;\n};\n\ntemplate &lt;class _Ty&gt;\nstruct _Add_pointer&lt;_Ty, void_t&lt;remove_reference_t&lt;_Ty&gt;*&gt;&gt; { // (pointer type can be formed)\nusing type = remove_reference_t&lt;_Ty&gt;*;\n};\n\ntemplate &lt;class _Ty&gt;\nstruct add_pointer {\nusing type = typename _Add_pointer&lt;_Ty&gt;::type;\n};\n\ntemplate &lt;class _Ty&gt;\nusing add_pointer_t = typename _Add_pointer&lt;_Ty&gt;::type;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#42-remove_pointer","title":"4.2 remove_pointer","text":"<ul> <li>\u529f\u80fd\uff1a\u79fb\u9664\u7ed9\u5b9a\u7c7b\u578b\u7684\u4e00\u5c42\u6307\u9488</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\ntemplate&lt;class T1, class T2&gt;\nvoid print_is_same() {\nstd::cout &lt;&lt; std::is_same&lt;T1, T2&gt;() &lt;&lt; '\\n';\n}\n\nvoid print_separator() {\nstd::cout &lt;&lt; \"-----\\n\";\n}\n\nint main() {\nstd::cout &lt;&lt; std::boolalpha;\n\nprint_is_same&lt;int, int&gt;();   // true\nprint_is_same&lt;int, int*&gt;();  // false\nprint_is_same&lt;int, int**&gt;(); // false\n\nprint_separator();\n\nprint_is_same&lt;int, std::remove_pointer&lt;int&gt;::type&gt;();   // true\nprint_is_same&lt;int, std::remove_pointer&lt;int*&gt;::type&gt;();  // true\nprint_is_same&lt;int, std::remove_pointer&lt;int**&gt;::type&gt;(); // false\n\nprint_separator();\n\nprint_is_same&lt;int, std::remove_pointer&lt;int* const&gt;::type&gt;();          // true\nprint_is_same&lt;int, std::remove_pointer&lt;int* volatile&gt;::type&gt;();       // true\nprint_is_same&lt;int, std::remove_pointer&lt;int* const volatile&gt;::type&gt;(); // true\n}\n</code></pre> <p>\u6e90\u7801\u5206\u6790\uff1a\u7c7b\u4f3cremove_reference,\u5bf9<code>_Ty*</code>\u53cacv\u9650\u5b9a\u7b26\u7684\u5177\u4f53\u5316</p> <pre><code>template &lt;class _Ty&gt;\nstruct remove_pointer {\nusing type = _Ty;\n};\n\ntemplate &lt;class _Ty&gt;\nstruct remove_pointer&lt;_Ty*&gt; {\nusing type = _Ty;\n};\n\ntemplate &lt;class _Ty&gt;\nstruct remove_pointer&lt;_Ty* const&gt; {\nusing type = _Ty;\n};\n\ntemplate &lt;class _Ty&gt;\nstruct remove_pointer&lt;_Ty* volatile&gt; {\nusing type = _Ty;\n};\n\ntemplate &lt;class _Ty&gt;\nstruct remove_pointer&lt;_Ty* const volatile&gt; {\nusing type = _Ty;\n};\n\ntemplate &lt;class _Ty&gt;\nusing remove_pointer_t = typename remove_pointer&lt;_Ty&gt;::type;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#43-make_signed","title":"4.3 make_signed","text":"<ul> <li>\u529f\u80fd\uff1a\u5c06\u6709\u7b26\u53f7\u6216\u65e0\u7b26\u53f7\u7684 char \u3001 short \u3001 int \u3001 long \u3001 long long \u7edf\u4e00\u8f6c\u6362\u6210\u6709\u7b26\u53f7\u7c7b\u578b</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nint main() {\ntypedef std::make_signed&lt;char&gt;::type char_type;\ntypedef std::make_signed&lt;int&gt;::type int_type;\ntypedef std::make_signed&lt;volatile long&gt;::type long_type;\n\nbool ok1 = std::is_same&lt;char_type, signed char&gt;::value;\nbool ok2 = std::is_same&lt;int_type, signed int&gt;::value;\nbool ok3 = std::is_same&lt;long_type, volatile signed long&gt;::value;\n\nstd::cout &lt;&lt; std::boolalpha\n&lt;&lt; \"char_type is 'signed char'?          : \" &lt;&lt; ok1 &lt;&lt; '\\n'\n&lt;&lt; \"int_type  is 'signed int'?           : \" &lt;&lt; ok2 &lt;&lt; '\\n'\n&lt;&lt; \"long_type is 'volatile signed long'? : \" &lt;&lt; ok3 &lt;&lt; '\\n';\n}\n</code></pre> <p>\u6e90\u7801\u5206\u6790\uff1a\u679a\u4e3e\u5224\u65ad\u6574\u5f62\u7c7b\u578b\u7684\u6709\u7b26\u53f7\u548c\u65e0\u7b26\u53f7\uff0c\u7edf\u4e00\u8fd4\u56de\u6709\u7b26\u53f7\u7248 - \u4f7f\u7528<code>remove_cv</code>\u53bb\u9664cv\u9650\u5b9a\u7b26\uff0c\u5e76\u8c03\u7528<code>_Apply</code>\uff08\u4f5c\u7528\u4f7f<code>_Make_signed1</code>\u4ee5\u53bb\u9664\u4e86cv\u9650\u5b9a\u7b26\u7684<code>_Ty</code>\u4f5c\u4e3a\u6a21\u677f\u53c2\u6570\uff09\uff0c<code>_Make_signed1</code>\u662f<code>_Make_signed2</code>\u7684\u6a21\u677f\u522b\u540d\uff0c<code>_Make_signed2</code>\uff08\u6709\u591a\u4e2a\u7248\u672c\uff09\u4ee5\u6574\u5f62\u5b57\u8282\u5927\u5c0f\u4f5c\u4e3a\u6a21\u677f\u53c2\u6570\uff0c\u5e76\u8c03\u7528\u5185\u90e8<code>_Apply</code></p> <pre><code>template &lt;class _Ty&gt;\nusing _Make_signed1 = // signed partner to cv-unqualified _Ty\ntypename _Make_signed2&lt;sizeof(_Ty)&gt;::template _Apply&lt;_Ty&gt;;\n\ntemplate &lt;class _Ty&gt;\nstruct make_signed { // signed partner to _Ty\nstatic_assert(_Is_nonbool_integral&lt;_Ty&gt; || is_enum_v&lt;_Ty&gt;,\n\"make_signed&lt;T&gt; requires that T shall be a (possibly cv-qualified) \"\n\"integral type or enumeration but not a bool type.\");\n\nusing type = typename remove_cv&lt;_Ty&gt;::template _Apply&lt;_Make_signed1&gt;;\n};\n\ntemplate &lt;class _Ty&gt;\nusing make_signed_t = typename make_signed&lt;_Ty&gt;::type;\n</code></pre> <ul> <li><code>_Make_signed2</code>\u5206\u522b\u5b9e\u73b0\u4e861\u5b57\u8282\u30012\u5b57\u8282\u30014\u5b57\u8282\u30018\u5b57\u8282\u7248\u672c,\u5185\u90e8\u7684<code>_Apply</code>\u76f4\u63a5\u662f\u5bf9\u5e94\u6574\u5f62\u7684\u6709\u7b26\u53f7\u7248\uff0c\u57284\u5b57\u8282\u7248\u672c\u5b9e\u73b0\u4e2d\u4f7f\u7528\u4e86<code>_Select</code>\uff0c\u8fd9\u4e2a\u4f5c\u7528\u7c7b\u4f3c\u4e8e\u4e09\u5143\u8fd0\u7b97<code>bool:A?B</code></li> </ul> <pre><code>template &lt;size_t&gt;\nstruct _Make_signed2; // Choose make_signed strategy by type size\n\ntemplate &lt;&gt;\nstruct _Make_signed2&lt;1&gt; {\ntemplate &lt;class&gt;\nusing _Apply = signed char;\n};\n\ntemplate &lt;&gt;\nstruct _Make_signed2&lt;2&gt; {\ntemplate &lt;class&gt;\nusing _Apply = short;\n};\n\ntemplate &lt;&gt;\nstruct _Make_signed2&lt;4&gt; {\ntemplate &lt;class _Ty&gt;\nusing _Apply = // assumes LLP64\ntypename _Select&lt;is_same_v&lt;_Ty, long&gt; || is_same_v&lt;_Ty, unsigned long&gt;&gt;::template _Apply&lt;long, int&gt;;\n};\n\ntemplate &lt;&gt;\nstruct _Make_signed2&lt;8&gt; {\ntemplate &lt;class&gt;\nusing _Apply = long long;\n};\n</code></pre> <ul> <li><code>_Select</code>2\u4e2a\u7248\u672c\uff0c\u5177\u4f53\u5316<code>false</code>\u7248,\u4f7f<code>_Apply</code>\u7b49\u4ef7\u4e8e\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u53e6\u4e00\u4e2a\u7248\u672c\u5339\u914d<code>true</code>\uff0c\u4f7f<code>_Apply</code>\u7b49\u4ef7\u4e8e\u7b2c\u4e00\u4e2a\u53c2\u6570</li> </ul> <pre><code>template &lt;bool&gt;\nstruct _Select { // Select between aliases that extract either their first or second parameter\ntemplate &lt;class _Ty1, class&gt;\nusing _Apply = _Ty1;\n};\n\ntemplate &lt;&gt;\nstruct _Select&lt;false&gt; {\ntemplate &lt;class, class _Ty2&gt;\nusing _Apply = _Ty2;\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#44-make_unsigned","title":"4.4 make_unsigned","text":"<p>\u539f\u7406\u4f7f\u7528\u65b9\u6cd5\u540cmake_signed</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#45-remove_cv","title":"4.5 remove_cv","text":"<ul> <li>\u529f\u80fd\uff1a\u79fb\u9664\u6700\u9876\u5c42 const \u3001\u6700\u9876\u5c42 volatile \u6216\u4e24\u8005\uff0c\u82e5\u5b58\u5728</li> <li>\u89e3\u91ca\uff1a\u5982<code>const volatile int*p</code>,\u5176\u4e2d<code>const volatile</code>\u4fee\u9970\u7684\u662fp\u6307\u5411\u7684\u6570\u636e\uff0c\u5e76\u4e0d\u662f\u9650\u5b9a<code>int*</code>\u7684\uff0c\u56e0\u6b64<code>remove_cv</code>\u4f1a\u5339\u914d\u65e0cv\u9650\u5b9a\u7684\u6a21\u677f\u5b9e\u73b0\uff0c\u5373\u5185\u90e8type\u7c7b\u578b\u6307\u5411<code>const volatile int*</code>\u3002\u53c8\u5982<code>int* const volatile p</code>\uff0ccv\u9650\u5b9a\u7b26\u4fee\u9970\u7684\u662f<code>int*</code>,\u56e0\u6b64<code>remove_cv</code>\u5185\u90e8type\u6307\u5411<code>int*</code>\u3002</li> <li>\u6e90\u7801\u5206\u6790:\u5b9e\u73b04\u4e2a\u6a21\u677f\u51fd\u6570\uff0c\u5206\u522b\u5339\u914dconst volatile\u9650\u5b9a\u7b26\uff0c\u800c\u5185\u90e8type\u59cb\u7ec8\u6307\u5411\u65e0cv\u9650\u5b9a\u7b26\u7c7b\u578b\uff0c\u4ece\u800c\u8fbe\u5230\u53bb\u9664cv\u9650\u5b9a\u7b26\u529f\u80fd</li> </ul> <pre><code>// STRUCT TEMPLATE remove_cv\ntemplate &lt;class _Ty&gt;\nstruct remove_cv { // remove top-level const and volatile qualifiers\nusing type = _Ty;\n\ntemplate &lt;template &lt;class&gt; class _Fn&gt;\nusing _Apply = _Fn&lt;_Ty&gt;; // apply cv-qualifiers from the class template argument to _Fn&lt;_Ty&gt;\n};\n\ntemplate &lt;class _Ty&gt;\nstruct remove_cv&lt;const _Ty&gt; {\nusing type = _Ty;\n\ntemplate &lt;template &lt;class&gt; class _Fn&gt;\nusing _Apply = const _Fn&lt;_Ty&gt;;\n};\n\ntemplate &lt;class _Ty&gt;\nstruct remove_cv&lt;volatile _Ty&gt; {\nusing type = _Ty;\n\ntemplate &lt;template &lt;class&gt; class _Fn&gt;\nusing _Apply = volatile _Fn&lt;_Ty&gt;;\n};\n\ntemplate &lt;class _Ty&gt;\nstruct remove_cv&lt;const volatile _Ty&gt; {\nusing type = _Ty;\n\ntemplate &lt;template &lt;class&gt; class _Fn&gt;\nusing _Apply = const volatile _Fn&lt;_Ty&gt;;\n};\n\ntemplate &lt;class _Ty&gt;\nusing remove_cv_t = typename remove_cv&lt;_Ty&gt;::type;\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nint main() {\ntypedef std::remove_cv&lt;const int&gt;::type type1;\ntypedef std::remove_cv&lt;volatile int&gt;::type type2;\ntypedef std::remove_cv&lt;const volatile int&gt;::type type3;\ntypedef std::remove_cv&lt;const volatile int*&gt;::type type4;\ntypedef std::remove_cv&lt;int * const volatile&gt;::type type5;\n\nstd::cout &lt;&lt; \"test1 \" &lt;&lt; (std::is_same&lt;int, type1&gt;::value\n? \"passed\" : \"failed\") &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"test2 \" &lt;&lt; (std::is_same&lt;int, type2&gt;::value\n? \"passed\" : \"failed\") &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"test3 \" &lt;&lt; (std::is_same&lt;int, type3&gt;::value\n? \"passed\" : \"failed\") &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"test4 \" &lt;&lt; (std::is_same&lt;const volatile int*, type4&gt;::value\n? \"passed\" : \"failed\") &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"test5 \" &lt;&lt; (std::is_same&lt;int*, type5&gt;::value\n? \"passed\" : \"failed\") &lt;&lt; '\\n';\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#46-add_cvadd_constadd_volatile","title":"4.6 add_cv\u3001add_const\u548cadd_volatile","text":"<ul> <li>\u529f\u80fd\uff1a\u7ed9\u7c7b\u578b\u6dfb\u52a0cv\u9650\u5b9a\u7b26</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nstruct foo\n{\nvoid m() { std::cout &lt;&lt; \"Non-cv\\n\"; }\nvoid m() const { std::cout &lt;&lt; \"Const\\n\"; }\nvoid m() volatile { std::cout &lt;&lt; \"Volatile\\n\"; }\nvoid m() const volatile { std::cout &lt;&lt; \"Const-volatile\\n\"; }\n};\n\nint main()\n{\nfoo{}.m();\nstd::add_const&lt;foo&gt;::type{}.m();\nstd::add_volatile&lt;foo&gt;::type{}.m();\nstd::add_cv&lt;foo&gt;::type{}.m();\n}\n</code></pre> <p>\u6e90\u7801\u5206\u6790:\u539f\u7406\u5f88\u7b80\u5355\uff0c\u76f4\u63a5\u5728\u7c7b\u578b\u524d\u589e\u52a0<code>const</code>\u6216<code>volatile</code>\u5173\u952e\u5b57\u3002\uff08\u591a\u4e2aconst\u6216volatile\u4f1a\u81ea\u52a8\u89e3\u6790\u6210\u4e00\u4e2a\uff0c\u5373<code>const cosnt int i=2</code>\u4f9d\u7136\u662f<code>const int i=2</code>\uff09</p> <pre><code>template &lt;class _Ty&gt;\nstruct add_const { // add top-level const qualifier\nusing type = const _Ty;\n};\n\ntemplate &lt;class _Ty&gt;\nusing add_const_t = typename add_const&lt;_Ty&gt;::type;\n\n// STRUCT TEMPLATE add_volatile\ntemplate &lt;class _Ty&gt;\nstruct add_volatile { // add top-level volatile qualifier\nusing type = volatile _Ty;\n};\n\ntemplate &lt;class _Ty&gt;\nusing add_volatile_t = typename add_volatile&lt;_Ty&gt;::type;\n\n// STRUCT TEMPLATE add_cv\ntemplate &lt;class _Ty&gt;\nstruct add_cv { // add top-level const and volatile qualifiers\nusing type = const volatile _Ty;\n};\n\ntemplate &lt;class _Ty&gt;\nusing add_cv_t = typename add_cv&lt;_Ty&gt;::type;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#47-remove_reference","title":"4.7 remove_reference","text":"<ul> <li>\u529f\u80fd\uff1a\u79fb\u9664\u7c7b\u578b\u7684\u5f15\u7528<code>&amp;</code>\u6216<code>&amp;&amp;</code></li> <li>\u6e90\u7801\u5206\u6790:<code>remove_reference_t</code>\u662f<code>remove_reference::type</code>\u7684\u522b\u540d\uff0c<code>remove_reference</code>\u67093\u4e2a\u5b9a\u4e49\uff0c\u5206\u522b\u63a5\u6536<code>T</code>\u3001<code>T&amp;</code>\u548c<code>T&amp;&amp;</code>\uff0c\u5373\u5de6\u503c\uff0c\u5de6\u503c\u5f15\u7528\u548c\u53f3\u503c\u5f15\u7528\uff0c\u800c<code>type</code>\u59cb\u7ec8\u6307\u5411<code>T</code>,\u5373\u5de6\u503c\uff0c\u56e0\u6b64\u8fbe\u5230\u53bb\u9664\u5f15\u7528\u7684\u76ee\u7684\u3002</li> </ul> <pre><code>// STRUCT TEMPLATE remove_reference\ntemplate &lt;class _Ty&gt;\nstruct remove_reference {\nusing type                 = _Ty;\nusing _Const_thru_ref_type = const _Ty;\n};\n\ntemplate &lt;class _Ty&gt;\nstruct remove_reference&lt;_Ty&amp;&gt; {\nusing type                 = _Ty;\nusing _Const_thru_ref_type = const _Ty&amp;;\n};\n\ntemplate &lt;class _Ty&gt;\nstruct remove_reference&lt;_Ty&amp;&amp;&gt; {\nusing type                 = _Ty;\nusing _Const_thru_ref_type = const _Ty&amp;&amp;;\n};\n\ntemplate &lt;class _Ty&gt;\nusing remove_reference_t = typename remove_reference&lt;_Ty&gt;::type;\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt; // std::cout\n#include &lt;type_traits&gt; // std::is_same\n\ntemplate&lt;class T1, class T2&gt;\nvoid print_is_same() {\nstd::cout &lt;&lt; std::is_same&lt;T1, T2&gt;() &lt;&lt; '\\n';\n}\n\nint main() {\nstd::cout &lt;&lt; std::boolalpha;\n\nprint_is_same&lt;int, int&gt;();\nprint_is_same&lt;int, int &amp;&gt;();\nprint_is_same&lt;int, int &amp;&amp;&gt;();\n\nprint_is_same&lt;int, std::remove_reference&lt;int&gt;::type&gt;();\nprint_is_same&lt;int, std::remove_reference&lt;int &amp;&gt;::type&gt;();\nprint_is_same&lt;int, std::remove_reference&lt;int &amp;&amp;&gt;::type&gt;();\n}\n//\u8f93\u51fa\u7ed3\u679c\n//true\n//false\n//false\n//true\n//true\n//true\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#48-add_lvalue_referenceadd_rvalue_reference","title":"4.8 add_lvalue_reference\u548cadd_rvalue_reference","text":"<ul> <li>\u529f\u80fd\uff1a\u5411\u7ed9\u5b9a\u7c7b\u578b\u6dfb\u52a0\u5de6\u503c\u5f15\u7528\u6216\u53f3\u503c\u5f15\u7528</li> <li>\u89c4\u5219\uff1a</li> <li><code>std::add_lvalue_reference&lt;T&gt;::type</code> \u662f <code>T&amp;</code></li> <li><code>std::add_lvalue_reference&lt;T&amp;&gt;::type</code> \u662f <code>T&amp;</code></li> <li><code>std::add_lvalue_reference&lt;T&amp;&amp;&gt;::type</code> \u662f <code>T&amp;</code></li> <li><code>std::add_rvalue_reference&lt;T&gt;::type</code> \u662f <code>T&amp;&amp;</code></li> <li><code>std::add_rvalue_reference&lt;T&amp;&gt;::type</code> \u662f <code>T&amp;</code></li> <li><code>std::add_rvalue_reference&lt;T&amp;&amp;&gt;::type</code> \u662f <code>T&amp;&amp;</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nint main() {\nusing nonref = int;\nusing lref = typename std::add_lvalue_reference&lt;nonref&gt;::type;//int&amp;\nusing rref = typename std::add_rvalue_reference&lt;nonref&gt;::type;//int&amp;&amp;\nusing llref = typename std::add_lvalue_reference&lt;lref&gt;::type;//int&amp;\nusing rlref = typename std::add_rvalue_reference&lt;lref&gt;::type;//int&amp;\nusing lrref = typename std::add_lvalue_reference&lt;rref&gt;::type;//int&amp;\nusing rrref = typename std::add_rvalue_reference&lt;rref&gt;::type;//int&amp;&amp;\nstd::cout &lt;&lt; std::boolalpha;\nstd::cout &lt;&lt; std::is_lvalue_reference&lt;nonref&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_lvalue_reference&lt;lref&gt;::value &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::is_rvalue_reference&lt;rref&gt;::value &lt;&lt; '\\n';\n}\n</code></pre> <p>\u6e90\u7801\u5206\u6790\uff1a\u5229\u7528\u4e07\u80fd\u5f15\u7528\u548c\u5f15\u7528\u574d\u7f29\u7279\u6027\uff08\u53f3\u503c\u5f15\u7528\u7684\u53f3\u503c\u5f15\u7528\u4f9d\u7136\u662f\u53f3\u503c\u5f15\u7528\uff0c\u5de6\u503c\u6216\u5de6\u503c\u5f15\u7528\u7684\u53f3\u503c\u5f15\u7528\u662f\u5de6\u503c\u5f15\u7528\uff09\u3002 - <code>add_lvalue_reference</code>\u548c<code>add_rvalue_reference</code>\u4e2d<code>type</code>\u5206\u522b\u6765\u81ea<code>_Add_reference</code>\u4e2d\u5b9a\u4e49\u7684<code>_Lvalue</code>\u548c<code>_Rvalue</code></p> <pre><code>// STRUCT TEMPLATE add_lvalue_reference\ntemplate &lt;class _Ty&gt;\nstruct add_lvalue_reference {\nusing type = typename _Add_reference&lt;_Ty&gt;::_Lvalue;\n};\n\ntemplate &lt;class _Ty&gt;\nusing add_lvalue_reference_t = typename _Add_reference&lt;_Ty&gt;::_Lvalue;\n\n// STRUCT TEMPLATE add_rvalue_reference\ntemplate &lt;class _Ty&gt;\nstruct add_rvalue_reference {\nusing type = typename _Add_reference&lt;_Ty&gt;::_Rvalue;\n};\n\ntemplate &lt;class _Ty&gt;\nusing add_rvalue_reference_t = typename _Add_reference&lt;_Ty&gt;::_Rvalue;\n</code></pre> <ul> <li><code>_Add_reference</code>\u7684\u5b9e\u73b0\u75312\u4e2a\u7248\u672c\uff0c\u4e00\u4e2a\u4e3b\u6a21\u677f\uff0c\u4e00\u4e2a\u90e8\u5206\u5177\u4f53\u5316\u3002\u5177\u4f53\u5316\u7248\u672c\u4e2d<code>void_t&lt;_Ty&amp;&gt;</code>\u7528\u6765\u5224\u65ad<code>_Ty&amp;</code>\u662f\u5426\u662f\u4e00\u4e2a\u7c7b\u578b\uff0c\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u7a0b\u5e8f\u4e2d\uff0c<code>int</code>\u3001<code>int&amp;</code>\u548c<code>int&amp;&amp;</code>\u90fd\u4f1a\u5339\u914d\u8fd9\u4e2a\u7248\u672c\u3002<code>using _Lvalue = _Ty&amp;;</code>\u548c<code>using _Rvalue = _Ty&amp;&amp;;</code>\u8fd9\u4ee5\u8bed\u6cd5\u5b8c\u5168\u9075\u5faa\u5e94\u52c7\u574d\u7f29\u89c4\u5219</li> </ul> <pre><code>//\u4e3b\u6a21\u677f\ntemplate &lt;class _Ty, class = void&gt;\nstruct _Add_reference { // add reference (non-referenceable type)\nusing _Lvalue = _Ty;\nusing _Rvalue = _Ty;\n};\n//\u90e8\u5206\u5177\u4f53\u5316\ntemplate &lt;class _Ty&gt;\nstruct _Add_reference&lt;_Ty, void_t&lt;_Ty&amp;&gt;&gt; { // (referenceable type)\nusing _Lvalue = _Ty&amp;;\nusing _Rvalue = _Ty&amp;&amp;;\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#49-remove_extenremove_all_extents","title":"4.9 remove_exten\u548cremove_all_extents","text":"<ul> <li>\u529f\u80fd\uff1a</li> <li><code>remove_exten</code>:\u4ece\u7ed9\u5b9a\u6570\u7ec4\u7c7b\u578b\u79fb\u9664\u4e00\u4e2a\u7ef4\u5ea6</li> <li><code>remove_all_extents</code>:\u4ece\u7ed9\u5b9a\u6570\u7ec4\u7c7b\u578b\u79fb\u9664\u5168\u90e8\u7ef4\u5ea6</li> <li>\u6e90\u7801\u5206\u6790:\u7279\u5316<code>_Ty[]</code>\u7c7b\u578b\uff0c\u4f18\u5148\u5339\u914d\u6570\u7ec4</li> </ul> <pre><code>template &lt;class _Ty&gt;\nstruct remove_extent { // remove array extent\nusing type = _Ty;\n};\n\ntemplate &lt;class _Ty, size_t _Ix&gt;\nstruct remove_extent&lt;_Ty[_Ix]&gt; {\nusing type = _Ty;\n};\n\ntemplate &lt;class _Ty&gt;\nstruct remove_extent&lt;_Ty[]&gt; {\nusing type = _Ty;\n};\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\nusing namespace std;\nint main()\n{\n//\u79fb\u9664\u7b2c\u4e00\u5c42\u7ef4\u5ea6\nstatic_assert(is_same_v&lt;remove_extent_t&lt;int[]&gt;, int&gt;, \"\u7c7b\u578b\u4e0d\u540c\");\nstatic_assert(is_same_v&lt;remove_extent_t&lt;int[2][3]&gt;, int[3]&gt;,\"\u7c7b\u578b\u4e0d\u540c\");\n//\u79fb\u9664\u5168\u90e8\u6570\u7ec4\u7ef4\u5ea6\nstatic_assert(is_same_v&lt;remove_all_extents_t&lt;int[][3][3]&gt;, int&gt;, \"\u7c7b\u578b\u4e0d\u540c\");\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#5","title":"5 \u5176\u5b83\u7c7b","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#51-enable_if","title":"5.1 enable_if","text":"<ul> <li>\u529f\u80fd\uff1a\u57fa\u4e8e\u7c7b\u578b\u7279\u6027\u6761\u4ef6\u6027\u5730\u4ece\u91cd\u8f7d\u51b3\u8bae\u79fb\u9664\u51fd\u6570\uff0c\u5e76\u5bf9\u4e0d\u540c\u7c7b\u578b\u7279\u6027\u63d0\u4f9b\u5206\u79bb\u7684\u51fd\u6570\u91cd\u8f7d\u4e0e\u7279\u5316\u7684\u4fbf\u5229\u65b9\u6cd5\uff1bstd::enable_if \u53ef\u7528\u4f5c\u989d\u5916\u7684\u51fd\u6570\u53c2\u6570\uff08\u4e0d\u53ef\u5e94\u7528\u4e8e\u8fd0\u7b97\u7b26\u91cd\u8f7d\uff09\u3001\u8fd4\u56de\u7c7b\u578b\uff08\u4e0d\u53ef\u5e94\u7528\u4e8e\u6784\u9020\u51fd\u6570\u4e0e\u6790\u6784\u51fd\u6570\uff09\uff0c\u6216\u7c7b\u6a21\u677f\u6216\u51fd\u6570\u6a21\u677f\u5f62\u53c2\u3002</li> <li>\u4f7f\u7528\u573a\u666f\uff1a</li> <li>\u5229\u7528<code>enable_if</code>\u7684\u51b3\u65ad\u80fd\u529b\uff0c\u5b9e\u73b0\u591a\u4e2a\u540c\u53c2\u51fd\u6570\uff0c\u4e0d\u53d7\u540c\u540d\u51fd\u6570\u4e0d\u80fd\u91cd\u8f7d\u9650\u5236</li> </ul> <pre><code>struct T {\nenum { int_t,float_t } m_type;\ntemplate &lt;typename Integer,\nstd::enable_if_t&lt;std::is_integral_v&lt;Integer&gt;, int&gt; = 0&gt;\nT(Integer) : m_type(int_t) {}\n\ntemplate &lt;typename Floating,\nstd::enable_if_t&lt;std::is_floating_point_v&lt;Floating&gt;, int&gt; = 0&gt;\nT(Floating) : m_type(float_t) {} // OK\n};\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790\uff1a<code>enable_if</code>\u67092\u4e2a\u53c2\u6570\uff0c\u53c2\u65701\u662f<code>bool</code>\u7c7b\u578b\u6570\u636e\uff0c\u5f53\u53c2\u65701\u662f<code>false</code>\u65f6\uff0c<code>enable_if_t</code>\u5c06\u4f1a\u7f16\u8bd1\u62a5\u9519\u3002</li> </ul> <pre><code>template &lt;bool _Test, class _Ty = void&gt;\nstruct enable_if {}; // no member \"type\" when !_Test\n\ntemplate &lt;class _Ty&gt;\nstruct enable_if&lt;true, _Ty&gt; { // type is _Ty for _Test\nusing type = _Ty;\n};\n\ntemplate &lt;bool _Test, class _Ty = void&gt;\nusing enable_if_t = typename enable_if&lt;_Test, _Ty&gt;::type;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#52-conditional","title":"5.2 conditional","text":"<ul> <li>\u529f\u80fd\uff1a\u6839\u636e\u6761\u4ef6\u771f\u5047\u9009\u62e9\uff0c\u529f\u80fd\u5982\u4e09\u76ee\u8fd0\u7b97\u7b26<code>?:</code></li> <li>\u6e90\u7801\u5206\u6790\uff1a</li> <li>\u5b9e\u73b02\u4e2a\u6a21\u677f\u7c7b\uff0c\u542b3\u4e2a\u53c2\u6570\uff0c\u5f53\u53c2\u65701\u662f<code>false</code>\u65f6\u5339\u914d\u7279\u5316<code>false</code>\u7248\u7c7b\uff0c\u5f53\u53c2\u65701\u4e3a<code>true</code>\u65f6\u5339\u914d\u666e\u901a\u6a21\u677f\u7c7b</li> <li>2\u4e2a\u6a21\u677f\u7c7b\u5185\u90e8<code>type</code>\u5206\u522b\u6307\u5411\u53c2\u65702\u548c\u53c2\u65703\u7c7b\u578b\uff0c\u4ece\u800c\u8fbe\u5230\u6839\u636e\u53c2\u65701\u771f\u5047\u9009\u62e9\u53c2\u65702\u6216\u53c2\u65703\u529f\u80fd</li> </ul> <pre><code>template &lt;bool _Test, class _Ty1, class _Ty2&gt;\nstruct conditional { // Choose _Ty1 if _Test is true, and _Ty2 otherwise\nusing type = _Ty1;\n};\n\ntemplate &lt;class _Ty1, class _Ty2&gt;\nstruct conditional&lt;false, _Ty1, _Ty2&gt; {\nusing type = _Ty2;\n};\n\ntemplate &lt;bool _Test, class _Ty1, class _Ty2&gt;\nusing conditional_t = typename conditional&lt;_Test, _Ty1, _Ty2&gt;::type;\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n#include &lt;typeinfo&gt;\n\nint main() {\ntypedef std::conditional&lt;true, int, double&gt;::type Type1;\ntypedef std::conditional&lt;false, int, double&gt;::type Type2;\ntypedef std::conditional&lt;sizeof(int) &gt;= sizeof(double), int, double&gt;::type Type3;\n\nstd::cout &lt;&lt; typeid(Type1).name() &lt;&lt; '\\n';\nstd::cout &lt;&lt; typeid(Type2).name() &lt;&lt; '\\n';\nstd::cout &lt;&lt; typeid(Type3).name() &lt;&lt; '\\n';\n}\n//\u8f93\u51fa\u7ed3\u679c\n//int\n//double\n//double\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#53-decay","title":"5.3 decay","text":"<ul> <li>\u529f\u80fd\uff1a</li> <li>\u5bf9\u7c7b\u578b T \u5e94\u7528\u5de6\u503c\u5230\u53f3\u503c\u3001\u6570\u7ec4\u5230\u6307\u9488\u53ca\u51fd\u6570\u5230\u6307\u9488\u9690\u5f0f\u8f6c\u6362</li> <li>\u79fb\u9664 cv \u9650\u5b9a\u7b26</li> <li>\u6e90\u7801\u5206\u6790:</li> </ul> <p><code>decay</code>\u4e2d\u901a\u8fc7<code>is_array_v</code> \u548c<code>is_function_v</code>\u6765\u68c0\u67e5\u662f\u5426\u662f\u6570\u7ec4\u6216\u51fd\u6570\u7c7b\u578b\uff0c\u518d\u901a\u8fc7<code>_Select</code>\u6765\u6839\u636e<code>is_array_v</code> \u548c<code>is_function_v</code>\u7684\u68c0\u67e5\u7ed3\u679c\u6765\u9009\u62e9<code>_Apply</code>\u53c2\u6570\u4e2d\u7684\u524d\u8005\u8fd8\u662f\u540e\u8005\u3002\u5bf9\u5e94\u6570\u7ec4\u5c31\u79fb\u9664[],\u518d\u53bb\u9664\u5f15\u7528\uff0c\u5bf9\u4e8e\u51fd\u6570\u5c31\u6dfb\u52a0\u6307\u9488,\u5bf9\u5e94\u5bf9\u8c61\u5c31\u79fb\u9664cv\u9650\u5b9a\u7b26\u548c\u5f15\u7528</p> <pre><code>// STRUCT TEMPLATE decay\ntemplate &lt;class _Ty&gt;\nstruct decay { // determines decayed version of _Ty\n//\u79fb\u9664\u5f15\u7528\nusing _Ty1 = remove_reference_t&lt;_Ty&gt;;\n//_Select\u5224\u65adis_function_v&lt;_Ty1&gt;\u7684\u68c0\u67e5\u7ed3\u679c\uff0ctrue\u5219_Apply&lt;add_pointer&lt;_Ty1&gt;, remove_cv&lt;_Ty1&gt;&gt;\u5c31\u4f1a\u88ab\u66ff\u6362\u6210add_pointer&lt;_Ty1&gt;\uff0cfalse\u5c31\u4f1a\u66ff\u6362\u6210remove_cv&lt;_Ty1&gt;\nusing _Ty2 = typename _Select&lt;is_function_v&lt;_Ty1&gt;&gt;::template _Apply&lt;add_pointer&lt;_Ty1&gt;, remove_cv&lt;_Ty1&gt;&gt;;\n//\u4e0e\u4e0a\u9762\u76f8\u540c\u539f\u7406\uff0c\u4f46type\u4e00\u822c\u662f\u6574\u4e2adecay\u7c7b\u7684\u5165\u53e3\uff0c\u5373\u4ecetype\u5f00\u59cb\u5c42\u5c42\u5c55\u5f00\nusing type = typename _Select&lt;is_array_v&lt;_Ty1&gt;&gt;::template _Apply&lt;add_pointer&lt;remove_extent_t&lt;_Ty1&gt;&gt;, _Ty2&gt;::type;\n};\n\ntemplate &lt;class _Ty&gt;\nusing decay_t = typename decay&lt;_Ty&gt;::type;\n</code></pre> <p><code>_Select</code>\u7c7b\u4e3b\u8981\u7528\u6765\u5339\u914d<code>_Select&lt;true&gt;</code>\u8fd8\u662f<code>_Select&lt;false&gt;</code>\u4ece\u800c\u4f7f<code>_Apply</code>\u7b49\u4ef7\u4e8e\u6a21\u677f\u53c2\u6570\u7684\u7b2c\u4e00\u4e2a<code>_Ty1</code>\u8fd8\u662f\u7b2c\u4e8c\u4e2a<code>_Ty2</code></p> <pre><code>// STRUCT TEMPLATE make_signed\ntemplate &lt;bool&gt;\nstruct _Select { // Select between aliases that extract either their first or second parameter\ntemplate &lt;class _Ty1, class&gt;\nusing _Apply = _Ty1;\n};\n\ntemplate &lt;&gt;\nstruct _Select&lt;false&gt; {\ntemplate &lt;class, class _Ty2&gt;\nusing _Apply = _Ty2;\n};\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\ntemplate &lt;typename T, typename U&gt;\nstruct decay_equiv : std::is_same&lt;typename std::decay&lt;T&gt;::type, U&gt;::type {};\n\nint main()\n{\nstd::cout &lt;&lt; std::boolalpha\n&lt;&lt; decay_equiv&lt;int, int&gt;::value &lt;&lt; '\\n'\n&lt;&lt; decay_equiv&lt;int&amp;, int&gt;::value &lt;&lt; '\\n'\n&lt;&lt; decay_equiv&lt;int&amp;&amp;, int&gt;::value &lt;&lt; '\\n'\n&lt;&lt; decay_equiv&lt;const int&amp;, int&gt;::value &lt;&lt; '\\n'\n&lt;&lt; decay_equiv&lt;int[2], int*&gt;::value &lt;&lt; '\\n'\n&lt;&lt; decay_equiv&lt;int(int), int(*)(int)&gt;::value &lt;&lt; '\\n';\n}\n//\u8f93\u51fa\uff1a\n//true\n//true\n//true\n//true\n//true\n//true\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#54-type_identity","title":"5.4 type_identity","text":"<ul> <li>\u529f\u80fd\uff1a\u590d\u5236\u7c7b\u578b<code>T</code></li> <li>\u4f7f\u7528\u573a\u666f\uff1a\u5f53\u4e00\u4e2a\u6a21\u677f\u51fd\u6570\u5982sum\u53ef\u4ee5\u8ba1\u7b97int\u548cfloat\u503c\uff0c\u4f46\u53ea\u6709\u4e00\u4e2a\u6a21\u677f\u53c2\u6570T\uff0c\u4e3a\u907f\u514d\u5982<code>sum(1,1.2)</code>\u7f16\u8bd1\u62a5\u9519\uff0c\u53ef\u4f7f\u7528type_identity</li> <li>\u793a\u4f8b</li> </ul> <pre><code>template&lt;class T&gt;\nvoid f(T, T);\n\ntemplate&lt;class T&gt;\nvoid g(T, std::type_identity_t&lt;T&gt;);\nint main()\n{\nf(4.2, 0); // \u9519\u8bef\uff1a\u5bf9 'T' \u63a8\u5bfc\u51fa\u51b2\u7a81\u7684\u7c7b\u578b\ng(4.2, 0); // OK \uff1a\u8c03\u7528 g&lt;double&gt;\ng(0, 4.2); // OK \uff1a\u8c03\u7528 g&lt;int&gt;\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790:\u4f7f\u7528\u7c7b\u578b\u522b\u540d\u6307\u5411_Ty</li> </ul> <pre><code>template &lt;class _Ty&gt;\nstruct type_identity {\nusing type = _Ty;\n};\ntemplate &lt;class _Ty&gt;\nusing type_identity_t = typename type_identity&lt;_Ty&gt;::type;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#55-invoke_result","title":"5.5 invoke_result","text":"<ul> <li>\u529f\u80fd\uff1a\u8ba1\u7b97\u53ef\u8c03\u7528\u7c7b\u578b\u7684\u8fd4\u56de\u503c\u7c7b\u578b</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;type_traits&gt;\n//\u8bc6\u522bcall\u8fd4\u56de\u503c\u7c7b\u578b\ntemplate&lt;typename _CallBack,typename... Args&gt;\nstd::invoke_result_t&lt;_CallBack,Args...&gt; call(_CallBack fun,Args...args)\n{\nreturn std::invoke(fun, args...);\n}\nint main()\n{\nusing namespace std;\n//\u542b\u53c2\u51fd\u6570\uff0c\u9700\u8981\u5355\u72ec\u4f20\u9012\u53c2\u6570\u7c7b\u578b\ninvoke_result_t&lt;int(int, int),int,int&gt; res_int = 2;\nstatic_assert(is_same_v&lt;decltype(res_int), int&gt;, \"error\");\ninvoke_result_t&lt;void*()&gt; res_void;\nstatic_assert(is_same_v&lt;decltype(res_void),void*&gt;, \"error\");\n//\u53ef\u8c03\u7528\u5bf9\u8c61 function\u7c7b\u578b\ninvoke_result_t&lt;function&lt;void* ()&gt;&gt; res_fun;\nstatic_assert(is_same_v&lt;decltype(res_fun), void*&gt;, \"error\");\n\nfunction&lt;int(int,int)&gt; fun = [](int i,int j)-&gt;int {return i+j; };\nauto val = call(fun,1,2);//val=3 int\u7c7b\u578b\n}\n</code></pre> <p>\u6e90\u7801\u5206\u6790\uff1a\u672c\u8d28\u662f\u5229\u7528<code>decltype</code>\u548c<code>declval</code>\u7f16\u8bd1\u671f\u8bc6\u522b\u7c7b\u578b\u7279\u70b9 - \u5229\u7528<code>conditional_t</code>\u5224\u65ad\u53ef\u8c03\u7528\u7c7b\u578b\u662f\u5426\u542b\u53c2\uff0c\u7531\u6b64\u6765\u5c55\u5f00\u65e0\u53c2\u548c\u6709\u53c2\u7248\u672c\u7684\u5904\u7406</p> <pre><code>template &lt;class _Callable, class... _Args&gt;\nusing _Select_invoke_traits = conditional_t&lt;sizeof...(_Args) == 0, _Invoke_traits_zero&lt;void, _Callable&gt;,\n_Invoke_traits_nonzero&lt;void, _Callable, _Args...&gt;&gt;;\n\ntemplate &lt;class _Callable, class... _Args&gt;\nusing invoke_result_t = typename _Select_invoke_traits&lt;_Callable, _Args...&gt;::type;\n</code></pre> <ul> <li>\u5229\u7528<code>decltype</code>\u548c<code>declval</code>\u6765\u8ba1\u7b97\u53ef\u8c03\u7528\u7c7b\u578b\u7684\u8fd4\u56de\u503c</li> </ul> <pre><code>//\u65e0\u53c2\u7248\u672c\ntemplate &lt;class _Void, class _Callable&gt;\nstruct _Invoke_traits_zero {\n// selected when _Callable isn't callable with zero _Args\nusing _Is_invocable         = false_type;\nusing _Is_nothrow_invocable = false_type;\ntemplate &lt;class _Rx&gt;\nusing _Is_invocable_r = false_type;\ntemplate &lt;class _Rx&gt;\nusing _Is_nothrow_invocable_r = false_type;\n};\n\ntemplate &lt;class _Callable&gt;\nusing _Decltype_invoke_zero = decltype(_STD declval&lt;_Callable&gt;()());\n\ntemplate &lt;class _Callable&gt;\nstruct _Invoke_traits_zero&lt;void_t&lt;_Decltype_invoke_zero&lt;_Callable&gt;&gt;, _Callable&gt; {\n// selected when _Callable is callable with zero _Args\nusing type                  = _Decltype_invoke_zero&lt;_Callable&gt;;\nusing _Is_invocable         = true_type;\nusing _Is_nothrow_invocable = bool_constant&lt;noexcept(_STD declval&lt;_Callable&gt;()())&gt;;\ntemplate &lt;class _Rx&gt;\nusing _Is_invocable_r = bool_constant&lt;disjunction_v&lt;is_void&lt;_Rx&gt;, is_convertible&lt;type, _Rx&gt;&gt;&gt;;\ntemplate &lt;class _Rx&gt;\nusing _Is_nothrow_invocable_r = bool_constant&lt;\nconjunction_v&lt;_Is_nothrow_invocable, disjunction&lt;is_void&lt;_Rx&gt;, _Is_nothrow_convertible&lt;type, _Rx&gt;&gt;&gt;&gt;;\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#56-common_type","title":"5.6 common_type","text":"<ul> <li>\u529f\u80fd\uff1a\u786e\u5b9a\u4e00\u7ec4\u7c7b\u578b\u7684\u516c\u5171\u7c7b\u578b</li> <li>\u6e90\u7801\u5206\u6790</li> <li><code>common_type</code>\u5206\u522b\u5bf90\u53c2\u3001\u5355\u53c2\u3001\u53cc\u53c2\u3001\u591a\u53c2\u7248\u7279\u5316<ul> <li>0\u53c2\u7248\u65e0type\u7c7b\u578b\uff0c\u7f16\u8bd1\u62a5\u9519</li> <li>\u5355\u53c2\u7248\u7ee7\u627f\u81ea\u53cc\u53c2\u7248</li> <li>\u591a\u53c2\u7248\u6700\u7ec8\u8f6c\u5316\u6210\u53cc\u53c2\u7248</li> </ul> </li> <li>\u6700\u7ec8<code>common_type</code>\u4f1a\u5c55\u5f00\u5230<code>_Conditional_type</code>,<code>_Conditional_type</code>\u662f\u4e00\u4e2a\u6a21\u677f\u53d8\u91cf,\u7b49\u53f7\u53f3\u8fb9\u662f\u4e2a<code>decltype</code>+\u4e09\u5143\u8868\u8fbe\u5f0f<code>decltype(false ? _STD declval&lt;_Ty1&gt;() : _STD declval&lt;_Ty2&gt;());</code>,\u8fd9\u4e2a\u4e09\u5143\u8868\u8fbe\u5f0f\u6b63\u662f\u5224\u65ad\u7c7b\u578b\u662f\u5426\u76f8\u540c\u7684\u5173\u952e\uff0c\u4e09\u76ee\u8fd0\u7b97\u7b26\u8981\u6c42\u8868\u8fbe\u5f0f2\u548c\u8868\u8fbe\u5f0f3\u5fc5\u987b\u662f\u540c\u4e00\u7c7b\u578b\u6216\u53ef\u9690\u5f0f\u8f6c\u5316\u53e6\u4e00\u7c7b\u578b\uff0c\u6545\u5f53\u7c7b\u578b\u4e0d\u540c\u4f1a\u7f16\u8bd1\u62a5\u9519</li> </ul> <pre><code>template &lt;class _Ty1, class _Ty2, class = void&gt;\nstruct _Const_lvalue_cond_oper {};\n\ntemplate &lt;class _Ty1, class _Ty2&gt;\nstruct _Const_lvalue_cond_oper&lt;_Ty1, _Ty2, void_t&lt;_Conditional_type&lt;const _Ty1&amp;, const _Ty2&amp;&gt;&gt;&gt; {\nusing type = remove_cvref_t&lt;_Conditional_type&lt;const _Ty1&amp;, const _Ty2&amp;&gt;&gt;;\n};\n\ntemplate &lt;class _Ty1, class _Ty2, class = void&gt;\nstruct _Decayed_cond_oper : _Const_lvalue_cond_oper&lt;_Ty1, _Ty2&gt; {};\n\ntemplate &lt;class _Ty1, class _Ty2&gt;\nstruct _Decayed_cond_oper&lt;_Ty1, _Ty2, void_t&lt;_Conditional_type&lt;_Ty1, _Ty2&gt;&gt;&gt; {\nusing type = decay_t&lt;_Conditional_type&lt;_Ty1, _Ty2&gt;&gt;;\n};\n\ntemplate &lt;class... _Ty&gt;\nstruct common_type;\n\ntemplate &lt;class... _Ty&gt;\nusing common_type_t = typename common_type&lt;_Ty...&gt;::type;\n\ntemplate &lt;&gt;\nstruct common_type&lt;&gt; {};\n\ntemplate &lt;class _Ty1&gt;\nstruct common_type&lt;_Ty1&gt; : common_type&lt;_Ty1, _Ty1&gt; {};\n\ntemplate &lt;class _Ty1, class _Ty2, class _Decayed1 = decay_t&lt;_Ty1&gt;, class _Decayed2 = decay_t&lt;_Ty2&gt;&gt;\nstruct _Common_type2 : common_type&lt;_Decayed1, _Decayed2&gt; {};\n\ntemplate &lt;class _Ty1, class _Ty2&gt;\nstruct _Common_type2&lt;_Ty1, _Ty2, _Ty1, _Ty2&gt; : _Decayed_cond_oper&lt;_Ty1, _Ty2&gt; {};\n\ntemplate &lt;class _Ty1, class _Ty2&gt;\nstruct common_type&lt;_Ty1, _Ty2&gt; : _Common_type2&lt;_Ty1, _Ty2&gt; {};\n\ntemplate &lt;class _Void, class _Ty1, class _Ty2, class... _Rest&gt;\nstruct _Common_type3 {};\n\ntemplate &lt;class _Ty1, class _Ty2, class... _Rest&gt;\nstruct _Common_type3&lt;void_t&lt;common_type_t&lt;_Ty1, _Ty2&gt;&gt;, _Ty1, _Ty2, _Rest...&gt;\n: common_type&lt;common_type_t&lt;_Ty1, _Ty2&gt;, _Rest...&gt; {};\n\ntemplate &lt;class _Ty1, class _Ty2, class... _Rest&gt;\nstruct common_type&lt;_Ty1, _Ty2, _Rest...&gt; : _Common_type3&lt;void, _Ty1, _Ty2, _Rest...&gt; {};\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\ntemplate &lt;class T&gt;\nstruct Number { T n; };\n\ntemplate &lt;class T, class U&gt;\nNumber&lt;typename std::common_type&lt;T, U&gt;::type&gt; operator+(const Number&lt;T&gt;&amp; lhs,\nconst Number&lt;U&gt;&amp; rhs) {\nreturn {lhs.n + rhs.n};\n}\n\nint main()\n{\nNumber&lt;int&gt; i1 = {1}, i2 = {2};\nNumber&lt;double&gt; d1 = {2.3}, d2 = {3.5};\nstd::cout &lt;&lt; \"i1i2: \" &lt;&lt; (i1 + i2).n &lt;&lt; \"\\ni1d2: \" &lt;&lt; (i1 + d2).n &lt;&lt; '\\n'\n&lt;&lt; \"d1i2: \" &lt;&lt; (d1 + i2).n &lt;&lt; \"\\nd1d2: \" &lt;&lt; (d1 + d2).n &lt;&lt; '\\n';\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#6","title":"6 \u8f85\u52a9\u7c7b","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#61-integral_constant","title":"6.1 integral_constant","text":"<ul> <li>\u529f\u80fd\uff1a\u5305\u88c5\u7279\u5b9a\u7c7b\u578b\u7684\u9759\u6001\u5e38\u91cf</li> <li>\u6e90\u7801\u5206\u6790\uff1a</li> <li>\u7c7b\u6a21\u677f\u5305\u542b2\u4e2a\u53c2\u6570\uff0c\u5206\u522b\u662f\u7c7b\u578b\u53c2\u6570\u548c\u975e\u7c7b\u578b\u53c2\u6570</li> <li>\u5b9e\u73b0\u8f6c\u6362\u51fd\u6570\u4f7f<code>integral_constant</code>\u53ef\u4ee5\u8f6c\u6362\u6210<code>T</code>\u7c7b\u578b</li> <li>\u5b9e\u73b0<code>()</code>\u51fd\u6570\u5bf9\u8c61\u4f7f<code>integral_constant</code>\u5bf9\u8c61\u53ef\u4ee5\u51fd\u6570\u8c03\u7528\u5f62\u5f0f\u8fd4\u56de\u6570\u636e</li> </ul> <pre><code>template &lt;class _Ty, _Ty _Val&gt;\nstruct integral_constant {\nstatic constexpr _Ty value = _Val;\n\nusing value_type = _Ty;\nusing type       = integral_constant;\n\nconstexpr operator value_type() const noexcept {\nreturn value;\n}\n\n_NODISCARD constexpr value_type operator()() const noexcept {\nreturn value;\n}\n};\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\nint main()\n{\n\nauto i1=std::integral_constant&lt;int, 2&gt;()(); //i1\u7ecf operator()() \u8fd4\u56de2\uff0ci1\u7c7b\u578b\u662fint\nauto i2 = std::integral_constant&lt;int, 2&gt;();//i2\u662fstd::integral_constant&lt;int, 2&gt;\u7c7b\u578b\nint i3 = std::integral_constant&lt;int, 2&gt;();//i3\u7ecf operator value_type() \u8fd4\u56de2\uff0ci3\u662fint\u7c7b\u578b\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#62-bool_constant-true_type-false_type","title":"6.2 bool_constant true_type false_type","text":"<ul> <li>\u529f\u80fd:</li> <li><code>bool_constant</code>\u662f\u5bf9<code>integral_constant</code>\u7279\u5316<code>bool</code>\u7684\u522b\u540d</li> <li><code>true_type</code>\u662f\u5bf9<code>bool_constant</code>\u7279\u5316<code>true</code>\u7684\u522b\u540d</li> <li><code>false_type</code>\u662f\u5bf9<code>bool_constant</code>\u7279\u5316<code>false</code>\u7684\u522b\u540d</li> <li>\u6e90\u7801\u5206\u6790</li> </ul> <pre><code>template &lt;bool _Val&gt;\nusing bool_constant = integral_constant&lt;bool, _Val&gt;;\n\nusing true_type  = bool_constant&lt;true&gt;;\nusing false_type = bool_constant&lt;false&gt;;\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\nint main()\n{\nstd::cout &lt;&lt; std::boolalpha;\nstd::cout &lt;&lt; std::is_same_v&lt;std::bool_constant&lt;false&gt;, std::false_type&gt; &lt;&lt; std::endl;\nstd::true_type tt;\nif (tt)\nstd::cout &lt;&lt;\"value of true_type \"&lt;&lt; tt &lt;&lt; std::endl;\n}\n//\u8f93\u51fa\u7ed3\u679c\n//true\n//value of true_type true\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#7","title":"7 \u903b\u8f91\u8fd0\u7b97\u7c7b","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#71-conjunction","title":"7.1 conjunction","text":"<ul> <li>\u529f\u80fd\uff1a\u5728\u7279\u6027\u5e8f\u5217\u4e0a\u8fdb\u884c\u903b\u8f91\u4e0e</li> <li>\u6e90\u7801\u5206\u6790</li> </ul> <pre><code>// \u7c7b1 \u672c\u53ef\u4ee5\u5339\u914d\u4efb\u610f\u53c2\u6570\u4e14\u7b2c\u4e00\u4e2a\u53c2\u6570false\u548ctrue\u5747\u53ef\uff0c\u4f46\u7531\u4e8e\u7c7b2\u5177\u4f53\u5316\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3atrue\uff0c\u5bfc\u81f4\u8981\u60f3\u5339\u914dtrue\u53ea\u80fd\u5728\u53ea\u5269\u4e00\u4e2a\u53c2\u6570 _First\u65f6\uff1b\ntemplate &lt;bool _First_value, class _First, class... _Rest&gt;\nstruct _Conjunction { // handle false trait or last trait\nusing type = _First;\n};\n//\u7c7b2 \u90e8\u5206\u5177\u4f53\u5316true\u4f7f\u5176\u80fd\u5339\u914d\u7b2c\u4e00\u4e2a\u53c2\u6570true\u7684\u60c5\u51b5\uff0c\u53d8\u957f\u53c2\u6570\u524d\u67092\u4e2a\u53c2\u6570_True _Next\uff0c\u4f7f\u5176\u6700\u5c11\u5339\u914d2\u4e2a\u4ee5\u4e0a\u53c2\u6570\uff0c\u4e0d\u80fd\u5339\u914d1\u4e2a\u53c2\u6570\u6b64\u5904\u53c2\u6570\u4e0d\u5305\u62ecfalse\u548cture\uff1b\u9012\u5f52\u5d4c\u5957_Conjunction\u4f7ftype\u6700\u7ec8\u6307\u5411\u7c7b1\u4e2d\u7684 type=_First,\u56e0\u6b64type\u4e2d\u6709\u4e00\u4e2avalue\u53d8\u91cf\uff0c\u7c7b\u578b\u4e3abool\uff0c\u503c\u6700\u7ec8\u4e3afalse\u6216true\ntemplate &lt;class _True, class _Next, class... _Rest&gt;\nstruct _Conjunction&lt;true, _True, _Next, _Rest...&gt; { // the first trait is true, try the next one\n//type\u9012\u5f52\u7ec8\u6b62\u6761\u4ef6\u662f\u8c03\u7528\u4e86\u7c7b1\nusing type = typename _Conjunction&lt;_Next::value, _Next, _Rest...&gt;::type;\n};\n//\u7c7b3 \u53ef\u4ee5\u5339\u914d\u4efb\u610f\u53c2\u6570\u957f\u5ea6\u7684\u7c7b\u5b9e\u4f8b\u5316\uff0c\u4f46\u7531\u4e8e\u7c7b4\u7684\u5b58\u5728\uff0c\u5176\u5728\u5339\u914d1\u4e2a\u53c2\u6570\u4ee5\u4e0a\u7684\u4f18\u5148\u7ea7\u4f4e\u4e8e\u7c7b4\uff0c\u56e0\u6b64\u7c7b3\u53ea\u80fd\u5339\u914d0\u53c2\u7684\u5b9e\u4f8b\u5316\ntemplate &lt;class... _Traits&gt;\nstruct conjunction : true_type {}; // If _Traits is empty, true_type\n//\u7c7b4 \u53ef\u4ee5\u5339\u914d\u5927\u4e8e1\u4e2a\u53c2\u6570\u7684\u5b9e\u4f8b\u5316\uff0c\u4e14\u4f18\u5148\u7ea7\u5927\u4e8e\u7c7b3\uff1b\u7ee7\u627f\u81ea_Conjunction\u4e2d\u7684type\uff0c\u8fd9\u4e2atype\u4e2d\u4f1a\u6709\u4e00\u4e2avalue\u53d8\u91cf\uff0c\u7c7b\u578bbool\ntemplate &lt;class _First, class... _Rest&gt;\nstruct conjunction&lt;_First, _Rest...&gt; : _Conjunction&lt;_First::value, _First, _Rest...&gt;::type {\n// the first false trait in _Traits, or the last trait if none are false\n};\n//\u7c7b5 value\u67092\u4e2a\u6765\u6e90\uff0c\u4e00\u4e2a\u662f\u901a\u8fc7\u7c7b3\u7ee7\u627f\u81eatrue_type\uff0c\u53e6\u662f\u4e00\u4e2a\u901a\u8fc7\u7c7b4\u95f4\u63a5\u6307\u5411\u7c7b1\u4e2dtype\u6240\u6307\u5411\u7c7b\u578b\u4e2d\u6240\u542b\u7684\u9759\u6001\u6210\u5458\u5e38\u91cfvalue\ntemplate &lt;class... _Traits&gt;\n_INLINE_VAR constexpr bool conjunction_v = conjunction&lt;_Traits...&gt;::value;\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\n// \u82e5\u6240\u6709 Ts... \u90fd\u62e5\u6709\u7b49\u540c\u4e8e T \u7684\u7c7b\u578b\uff0c\u5219\u542f\u7528 func\ntemplate&lt;typename T, typename... Ts&gt;\nstd::enable_if_t&lt;std::conjunction_v&lt;std::is_same&lt;T, Ts&gt;...&gt;&gt;\nfunc(T, Ts...) {\nstd::cout &lt;&lt; \"all types in pack are T\\n\";\n}\n\n// \u5426\u5219\ntemplate&lt;typename T, typename... Ts&gt;\nstd::enable_if_t&lt;!std::conjunction_v&lt;std::is_same&lt;T, Ts&gt;...&gt;&gt;\nfunc(T, Ts...) {\nstd::cout &lt;&lt; \"not all types in pack are T\\n\";\n}\n\nint main() {\nfunc(1, 2, 3);\nfunc(1, 2, \"hello!\");\n}\n//\u8f93\u51fa\uff1a\n//all types in pack are T\n//not all types in pack are T\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/type_traits/#72-disjunction","title":"7.2 disjunction","text":"<ul> <li>\u529f\u80fd\uff1a\u53d8\u53c2\u7684\u903b\u8f91\u6216\u5143\u51fd\u6570</li> <li>\u793a\u4f8b:disjunction_v\u5b9e\u73b0is_member_pointer</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\ntemplate &lt;class _Ty&gt;\nconstexpr bool is_member_pointer_v = std::disjunction_v&lt;std::is_member_object_pointer&lt;_Ty&gt;,std::is_member_function_pointer&lt;_Ty&gt;&gt;;\n\ntemplate &lt;class _Ty&gt;\nstruct is_member_pointer : std::bool_constant&lt;is_member_pointer_v&lt;_Ty&gt;&gt; {}; int main() {\n\nclass cls {};\nstd::cout &lt;&lt; (is_member_pointer&lt;int(cls::*)&gt;::value\n? \"T is member pointer\"\n: \"T is not a member pointer\") &lt;&lt; '\\n';\nstd::cout &lt;&lt; (is_member_pointer&lt;int&gt;::value\n? \"T is member pointer\"\n: \"T is not a member pointer\") &lt;&lt; '\\n';\n}\n</code></pre> <ul> <li>\u6e90\u7801\u5206\u6790\uff1a</li> <li><code>disjunction</code>2\u4e2a\u7248\u672c\uff0c\u4e3b\u6a21\u677f\u7528\u4e8e\u9002\u914d\u65e0\u53c2\u8f93\u5165\uff0c\u4e14\u8fd4\u56defalse</li> <li><code>_Disjunction</code>2\u4e2a1\u7248\u672c\uff0c\u4e3b\u6a21\u677f\u4f5c\u4e3a\u9012\u5f52\u7ec8\u6b62\u6761\u4ef6\uff0c\u5f53\u5339\u914d\u5230true\u6216\u6700\u540e\u4e00\u4e2a\u53c2\u6570\u65f6\u7ed3\u675f</li> </ul> <pre><code>template &lt;bool _First_value, class _First, class... _Rest&gt;\nstruct _Disjunction { // handle true trait or last trait\nusing type = _First;\n};\n\ntemplate &lt;class _False, class _Next, class... _Rest&gt;\nstruct _Disjunction&lt;false, _False, _Next, _Rest...&gt; { // first trait is false, try the next trait\nusing type = typename _Disjunction&lt;_Next::value, _Next, _Rest...&gt;::type;\n};\n\ntemplate &lt;class... _Traits&gt;\nstruct disjunction : false_type {}; // If _Traits is empty, false_type\n\ntemplate &lt;class _First, class... _Rest&gt;\nstruct disjunction&lt;_First, _Rest...&gt; : _Disjunction&lt;_First::value, _First, _Rest...&gt;::type {\n// the first true trait in _Traits, or the last trait if none are true\n};\n\ntemplate &lt;class... _Traits&gt;\n_INLINE_VAR constexpr bool disjunction_v = disjunction&lt;_Traits...&gt;::value;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1/","title":"\u51fd\u6570\u5bf9\u8c61","text":"<ul> <li>\u529f\u80fd\uff1a\u51fd\u6570\u5bf9\u8c61\u53ef\u4ee5\u662f\u4e00\u4e2a\u7c7b\u5bf9\u8c61\u50cf\u51fd\u6570\u8c03\u7528\u4e00\u6837\u53ef\u4ee5\u6267\u884c</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1/#1","title":"1 \u5b9e\u73b0\u539f\u7406","text":"<p>\u901a\u8fc7\u5728\u7c7b\u4e2d\u5b9e\u73b0\u64cd\u4f5c\u7b26<code>()</code>\u6765\u4f7f\u7c7b\u5bf9\u8c61\u53ef\u4ee5\u50cf\u51fd\u6570\u822c\u6267\u884c</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1/#2","title":"2 \u793a\u4f8b","text":"<pre><code>//\u51fd\u6570\u5bf9\u8c61\n#include &lt;iostream&gt;\n#include&lt;string&gt;\nusing namespace std;\n#if 1\nclass FUNOBJ\n{\npublic:\nFUNOBJ()=default;\n~FUNOBJ()=default;\nint operator ()(const int&amp; x1, const int&amp; x2)\n{\n\nstd::cout &lt;&lt; to_string(x1) &lt;&lt; \"+\" &lt;&lt; to_string(x2) &lt;&lt; \"= \" &lt;&lt; x1 + x2 &lt;&lt; std::endl;\nreturn x1 + x2;\n}\n\nprivate:\n\n};\nint main()\n{\n\nFUNOBJ funObj;\nfunObj(1, 2);\nfunObj.operator()(1, 2);\nFUNOBJ()(3, 4);\nFUNOBJ{}(5, 6);\nFUNOBJ().operator()(1, 2);\n}\n#endif // 1\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/","title":"\u667a\u80fd\u6307\u9488","text":"<p>\u667a\u80fd\u6307\u9488\u5b9a\u4e49\u5728\u5934\u6587\u4ef6<code>&lt;memory&gt;</code>\u4e2d\u3002</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/#1-shared_ptr","title":"1 shared_ptr","text":"<ul> <li>\u5b9e\u73b0\u539f\u7406\u5206\u6790\uff1a</li> <li>shared_ptr \u5185\u90e8\u4fdd\u5b58\u4e00\u4e2a\u5bf9\u8c61\u6307\u9488\u548c\u4e00\u4e2a\u5f15\u7528\u8ba1\u6570\u7c7b <code>_Ref_count</code> \u6307\u9488\uff0c\u901a\u8fc7 <code>_Ref_count</code> \u7ee7\u627f\u81ea <code>_Ref_count_base</code> \u4e2d\u5f15\u7528\u8ba1\u6570\u53d8\u91cf\u6765\u5224\u65ad\u662f\u5426\u9700\u8981\u5bf9\u4fdd\u5b58\u7684\u6307\u9488\u8fdb\u884c delete\uff0c\u5f53\u5f15\u7528 <code>\u8ba1\u6570\u53d8\u91cf==0</code> \u65f6\uff0c<code>_Ref_count</code> \u4f1a\u5bf9\u4fdd\u5b58\u7684\u5bf9\u8c61\uff0c\u4ee5\u53ca <code>_Ref_count</code> \u81ea\u8eab\u8d44\u6e90\u8fdb\u884c\u91ca\u653e</li> <li>\u5f15\u7528\u8ba1\u6570\u7c7b\u4e3b\u89812\u4e2a\u529f\u80fd\uff1a\u7ba1\u7406\u5185\u5b58\u3001\u5f15\u7528\u8ba1\u6570</li> <li>\u6240\u6709\u5bf9shared_ptr\u5bf9\u8c61\u7684\u62f7\u8d1d\u8d4b\u503c\uff0c\u90fd\u4f1a\u89e6\u53d1\u5f15\u7528\u8ba1\u6570+1\u3002</li> <li>shares_Ptr\u5bf9\u8c61\u7684\u6790\u6784\u4f1a\u89e6\u53d1\u5f15\u7528\u8ba1\u6570-1\u3002</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/#11-shared_ptr","title":"1.1 \u7c7bshared_ptr\u5206\u6790","text":"<p><code>shared_ptr</code>\u516c\u6709\u7ee7\u627f\u81ea<code>_Ptr_base</code>,\u5728<code>shared_ptr</code>\u7c7b\u4e2d\u4e3b\u8981\u5b9e\u73b0\u6784\u9020\uff0c\u8d4b\u503c\u7b49\u64cd\u4f5c\uff0c\u5b9e\u9645\u5f15\u7528\u8ba1\u6570\uff0c\u5bf9\u8c61\u6307\u9488\u6570\u636e\u90fd\u5728<code>_Ptr_base</code>\u4e2d\u5b9e\u73b0 - <code>shared_ptr</code>\u90e8\u5206\u6e90\u7801</p> <pre><code>class shared_ptr : public _Ptr_base&lt;_Ty&gt; { // class for reference counted resource management\nprivate:\nusing _Mybase = _Ptr_base&lt;_Ty&gt;;\n\npublic:\nusing typename _Mybase::element_type;\n//\u5176\u4e2d\u4e00\u4e2a\u6784\u9020\u51fd\u6570    \ntemplate &lt;class _Ux,\nenable_if_t&lt;conjunction_v&lt;conditional_t&lt;is_array_v&lt;_Ty&gt;, _Can_array_delete&lt;_Ux&gt;, _Can_scalar_delete&lt;_Ux&gt;&gt;,\n_SP_convertible&lt;_Ux, _Ty&gt;&gt;,\nint&gt; = 0&gt;\nexplicit shared_ptr(_Ux* _Px) { // construct shared_ptr object that owns _Px\n#if _HAS_IF_CONSTEXPR\nif constexpr (is_array_v&lt;_Ty&gt;) {\n_Setpd(_Px, default_delete&lt;_Ux[]&gt;{});\n} else {\n//_Owner\u4e34\u65f6\u4fdd\u5b58_Px\u6307\u9488\n_Temporary_owner&lt;_Ux&gt; _Owner(_Px);\n//_Set_ptr_rep_and_enable_shared\u51fd\u6570\u7528\u6765\u7ed9_Ptr_base\u4e2d\u7684_Ptr\u548c_Rep\u8d4b\u503c\uff0cRef_count\u4e2d\u4e5f\u4fdd\u5b58_Px\u6307\u9488\n_Set_ptr_rep_and_enable_shared(_Owner._Ptr, new _Ref_count&lt;_Ux&gt;(_Owner._Ptr));\n_Owner._Ptr = nullptr;\n}\n//\u58f0\u660e\u4f7f\u7528_Ptr_base\u4e2d\u4fdd\u62a4\u51fd\u6570get\uff0c\u5e76\u5c06\u5b83\u8f6c\u51fa\u516c\u6709\u51fd\u6570get\nusing _Mybase::get;\n//\u6790\u6784\u4f1a\u8c03\u7528\u5f15\u7528\u8ba1\u6570-1\uff0c\u5f53\u5f15\u7528\u8ba1\u6570==0\u65f6\uff0c\u4f1a\u91ca\u653e\u8d44\u6e90\n~shared_ptr() noexcept { // release resource\nthis-&gt;_Decref();\n}\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/#12-_ptr_base","title":"1.2 \u7c7b_Ptr_base\u5206\u6790","text":"<p><code>_Ptr_base</code>\u4e2d\u67092\u4e2a\u91cd\u8981\u7684\u6307\u9488\u6210\u5458\u53d8\u91cf\uff0c\u4e00\u4e2a\u662f\u4fdd\u5b58\u7684\u6570\u636e\u5bf9\u8c61\u7684\u6307\u9488\uff0c\u53e6\u4e00\u4e2a\u63a7\u5236\u7c7b\u578b\u6307\u9488<code>_Ref_count_base</code>,\u7528\u6765\u5b9e\u73b0\u5f15\u7528\u8ba1\u6570\u53ca\u5220\u9664\u4fdd\u5b58\u5bf9\u8c61\u6307\u9488\u6240\u5360\u5185\u5b58\u529f\u80fd - <code>_Ptr_base</code>\u90e8\u5206\u6e90\u7801</p> <pre><code>template &lt;class _Ty&gt;\nclass _Ptr_base { // base class for shared_ptr and weak_ptr\npublic:\n//\u5982\u679c\u662f\u6570\u7ec4\u578b\uff0c\u5c06\u4f1a\u79fb\u9664[]\nusing element_type = remove_extent_t&lt;_Ty&gt;;\n//\u83b7\u53d6\u5f15\u7528\u8ba1\u6570\u6570\n_NODISCARD long use_count() const noexcept {\nreturn _Rep ? _Rep-&gt;_Use_count() : 0;\n}\n\nprotected:\n//\u8fd4\u56de\u4fdd\u5b58\u7684\u5bf9\u8c61\u7684\u6307\u9488\n_NODISCARD element_type* get() const noexcept {\nreturn _Ptr;\n}\n\nconstexpr _Ptr_base() noexcept = default;\n\n~_Ptr_base() = default;\n//\u79fb\u52a8\u6784\u9020\u4f1a\u7528\u5230\u7684\u51fd\u6570\uff0c\u53ea\u4ea4\u6362\u6570\u636e\uff0c\u5f15\u7528\u8ba1\u6570\u5e76\u4e0d\u4f1a\u589e\u52a0\u6216\u51cf\u5c11\uff0c_Other\u4e0d\u518d\u4f7f\u7528\ntemplate &lt;class _Ty2&gt;\nvoid _Move_construct_from(_Ptr_base&lt;_Ty2&gt;&amp;&amp; _Right) noexcept {\n// implement shared_ptr's (converting) move ctor and weak_ptr's move ctor\n_Ptr = _Right._Ptr;\n_Rep = _Right._Rep;\n\n_Right._Ptr = nullptr;\n_Right._Rep = nullptr;\n}\n//\u62f7\u8d1d\u6784\u9020\u4f1a\u4f7f\u7528\u7684\u51fd\u6570\uff0c\u5f15\u7528\u8ba1\u6570+1\ntemplate &lt;class _Ty2&gt;\nvoid _Copy_construct_from(const shared_ptr&lt;_Ty2&gt;&amp; _Other) noexcept {\n// implement shared_ptr's (converting) copy ctor\n_Other._Incref();\n\n_Ptr = _Other._Ptr;\n_Rep = _Other._Rep;\n}\n//\u4f7f\u7528\u65b0\u5bf9\u8c61\u6307\u9488\u66ff\u6362\u539f\u6307\u9488\uff0c\u5f15\u7528\u8ba1\u6570+1\ntemplate &lt;class _Ty2&gt;\nvoid _Alias_construct_from(const shared_ptr&lt;_Ty2&gt;&amp; _Other, element_type* _Px) noexcept {\n// implement shared_ptr's aliasing ctor\n_Other._Incref();\n\n_Ptr = _Px;\n_Rep = _Other._Rep;\n}\n//\u4f7f\u7528\u65b0\u5bf9\u8c61\u6307\u9488\u66ff\u6362\u539f\u6307\u9488\uff0c\u79fb\u52a8\u6784\u9020\u5f15\u7528\u8ba1\u6570\u4e0d\u53d8\uff0c_Other\u4e0d\u518d\u4f7f\u7528\ntemplate &lt;class _Ty2&gt;\nvoid _Alias_move_construct_from(shared_ptr&lt;_Ty2&gt;&amp;&amp; _Other, element_type* _Px) noexcept {\n// implement shared_ptr's aliasing move ctor\n_Ptr = _Px;\n_Rep = _Other._Rep;\n\n_Other._Ptr = nullptr;\n_Other._Rep = nullptr;\n}\n\ntemplate &lt;class _Ty0&gt;\nfriend class weak_ptr; // specifically, weak_ptr::lock()\n\ntemplate &lt;class _Ty2&gt;\nbool _Construct_from_weak(const weak_ptr&lt;_Ty2&gt;&amp; _Other) noexcept {\n// implement shared_ptr's ctor from weak_ptr, and weak_ptr::lock()\nif (_Other._Rep &amp;&amp; _Other._Rep-&gt;_Incref_nz()) {\n_Ptr = _Other._Ptr;\n_Rep = _Other._Rep;\nreturn true;\n}\n\nreturn false;\n}\n//\u5f15\u7528\u8ba1\u6570+1\nvoid _Incref() const noexcept {\nif (_Rep) {\n_Rep-&gt;_Incref();\n}\n}\n//\u5f15\u7528\u8ba1\u6570-1\nvoid _Decref() noexcept { // decrement reference count\nif (_Rep) {\n_Rep-&gt;_Decref();\n}\n}\n\nprivate:\n//\u4fdd\u5b58\u5bf9\u8c61\u7684\u6307\u9488\nelement_type* _Ptr{nullptr};\n//\u7528\u6765\u63a7\u5236\u5f15\u7528\u8ba1\u6570\u53ca\u5220\u9664\u5bf9\u8c61\u529f\u80fd\n_Ref_count_base* _Rep{nullptr};\n\n\n\n#if _HAS_STATIC_RTTI\n//\u7528\u6765\u83b7\u53d6\u5220\u9664\u5668\u51fd\u6570\u6307\u9488\ntemplate &lt;class _Dx, class _Ty0&gt;\nfriend _Dx* get_deleter(const shared_ptr&lt;_Ty0&gt;&amp; _Sx) noexcept;\n#endif // _HAS_STATIC_RTTI\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/#13-_ref_count_base","title":"1.3 \u7c7b<code>_Ref_count_base</code>\u5206\u6790","text":"<p>\u5f15\u7528\u8ba1\u6570\u7c7b<code>_Ref_count_base</code>\u662f\u4e00\u4e2a\u62bd\u8c61\u7c7b\uff0c\u5b9a\u4e49\u4e86\u4e00\u4e9b\u57fa\u7840\u65b9\u6cd5\uff0c\u4e3b\u8981\u5904\u7406\u5f15\u7528\u8ba1\u6570+-\uff0c\u4ee5\u53ca\u4f55\u65f6delete\u4fdd\u5b58\u7684\u6307\u9488\u3002\u5b83\u6709\u4e00\u4e2a\u5b50\u7c7b<code>_Ref_count</code>\uff0c\u5728\u667a\u80fd\u6307\u9488\u4e2d\u4f7f\u7528\u7684\u662f\u8fd9\u4e2a\u5b50\u7c7b<code>_Ref_count</code> - <code>_Ref_count_base</code>\u90e8\u5206\u6e90\u7801</p> <pre><code>// CLASS _Ref_count_base\nclass __declspec(novtable) _Ref_count_base { // common code for reference counting\nprivate:\n#ifdef _M_CEE_PURE\n// permanent workaround to avoid mentioning _purecall in msvcurt.lib, ptrustu.lib, or other support libs\nvirtual void _Destroy() noexcept {\n_STD terminate();\n}\n\nvirtual void _Delete_this() noexcept {\n_STD terminate();\n}\n#else // ^^^ _M_CEE_PURE / !_M_CEE_PURE vvv\nvirtual void _Destroy() noexcept     = 0; // destroy managed resource\nvirtual void _Delete_this() noexcept = 0; // destroy self\n#endif // _M_CEE_PURE\n// \u521d\u59cb\u5316\u5f15\u7528\u8ba1\u6570\u503c\u4e3a1\uff0c\u8fd9\u4e2a\u503c\u63a7\u5236\u5f15\u7528\u8ba1\u6570\n_Atomic_counter_t _Uses  = 1;\n_Atomic_counter_t _Weaks = 1;\n\npublic:\n// \u5f15\u7528\u8ba1\u6570+1\uff0c_MT_INCR(_Uses)\u662f\u5fae\u8f6f\u5b9e\u73b0\u7684\u5177\u6709\u539f\u5b50\u64cd\u4f5c\u7684+1\nvoid _Incref() noexcept { // increment use count\n_MT_INCR(_Uses);\n}\n\nvoid _Incwref() noexcept { // increment weak reference count\n_MT_INCR(_Weaks);\n}\n// \u5f15\u7528\u8ba1\u6570-1 \u5f53\u5f15\u7528\u8ba1\u6570==0\u65f6\u4f1a\u6267\u884c\u4e00\u7cfb\u5217delete\u64cd\u4f5c\uff0c\u5220\u9664\u4fdd\u5b58\u7684\u6307\u9488\u5bf9\u8c61\u4ee5\u53ca\u81ea\u8eab\nvoid _Decref() noexcept { // decrement use count\nif (_MT_DECR(_Uses) == 0) {\n_Destroy();\n_Decwref();\n}\n}\n\nvoid _Decwref() noexcept { // decrement weak reference count\nif (_MT_DECR(_Weaks) == 0) {\n_Delete_this();\n}\n}\n//\u8fd4\u56de\u5f15\u7528\u8ba1\u6570\u503c\nlong _Use_count() const noexcept {\nreturn static_cast&lt;long&gt;(_Uses);\n}\n\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/#14-_ref_count","title":"1.4 \u7c7b<code>_Ref_count</code>\u5206\u6790","text":"<p><code>_Ref_count</code>\u662f<code>_Ref_count_base</code>\u7684\u5b50\u7c7b\uff0c\u5b83\u7684\u4f5c\u7528\u662f\u5b9e\u73b0\u8d44\u6e90\u91ca\u653e\u7684\u5177\u4f53\u64cd\u4f5c\u3002 - <code>_Ref_count</code>\u90e8\u5206\u6e90\u7801</p> <pre><code>// CLASS TEMPLATE _Ref_count\ntemplate &lt;class _Ty&gt;\nclass _Ref_count : public _Ref_count_base { // handle reference counting for pointer without deleter\npublic:\n//\u7528\u5f85\u4fdd\u5b58\u7684\u5bf9\u8c61\u6784\u9020\u5b9e\u4f8b\u5bf9\u8c61\nexplicit _Ref_count(_Ty* _Px) : _Ref_count_base(), _Ptr(_Px) {}\n\nprivate:\n//\u5220\u9664\u4fdd\u5b58\u7684\u5bf9\u8c61\nvirtual void _Destroy() noexcept override { // destroy managed resource\ndelete _Ptr;\n}\n//\u5220\u9664\u81ea\u8eab\nvirtual void _Delete_this() noexcept override { // destroy self\ndelete this;\n}\n//\u667a\u80fd\u6307\u9488\u4fdd\u5b58\u7684\u5bf9\u8c61\u6307\u9488\uff0c\u4e0e_Ptr_base\u4e2d\u7684\u5bf9\u8c61\u6307\u9488\u662f\u540c\u4e00\u4e2a\n_Ty* _Ptr;\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/#2-weak_ptr","title":"2 weak_ptr","text":"<ul> <li>\u7279\u70b9\uff1a</li> <li>\u5b83\u53ea\u80fd\u63a5\u53d7<code>weak_ptr</code>\u6216<code>shared_ptr</code>\uff0c\u4f7f\u7528\u65f6\u9700\u8981\u5148\u8f6c\u6210<code>shared_ptr</code>\u518d\u901a\u8fc7<code>shared_ptr</code>\u53bb\u8bbf\u95ee\u4fdd\u5b58\u7684\u6307\u9488\u5bf9\u8c61</li> <li>\u5b83\u662f\u4e00\u79cd\u5f31\u5f15\u7528\uff0c\u6ca1\u6709\u5f15\u7528\u8ba1\u6570\uff0c\u4e0d\u8d1f\u8d23\u7ba1\u7406\u5185\u5b58\uff0c\u5b83\u7684\u5b58\u5728\u4e0e\u5426\u4e0d\u5f71\u54cd\u539f\u6307\u9488\u5bf9\u8c61\u7684\u91ca\u653e</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/#21-weak_ptr","title":"2.1 \u7c7b<code>weak_ptr</code>\u5206\u6790","text":"<p><code>weak_ptr</code>\u4e2d\u67093\u4e2a\u91cd\u8981\u7684\u51fd\u6570\uff0c\u7528\u6765\u7ba1\u7406<code>weak_ptr</code>\uff0c\u5176\u4e2d<code>lock</code>\u51fd\u6570\u7528\u6765\u83b7\u53d6<code>shared_ptr</code> - <code>weak_ptr</code>\u90e8\u5206\u6e90\u7801\u53ca\u5206\u6790</p> <pre><code>// CLASS TEMPLATE weak_ptr\ntemplate &lt;class _Ty&gt;\nclass weak_ptr : public _Ptr_base&lt;_Ty&gt; { // class for pointer to reference counted resource\npublic:\n//\u8fd9\u4e2a\u4f1a\u91ca\u653e\u5f15\u7528\u7684shared_ptr\nvoid reset() noexcept { // release resource, convert to null weak_ptr object\nweak_ptr{}.swap(*this);\n}\n\nvoid swap(weak_ptr&amp; _Other) noexcept {\nthis-&gt;_Swap(_Other);\n}\n//\u7528\u6765\u5224\u65ad\u88ab\u7ba1\u7406\u5bf9\u8c61\u662f\u5426\u88ab\u5220\u9664\n_NODISCARD bool expired() const noexcept {\nreturn this-&gt;use_count() == 0;\n}\n//\u7528\u6765\u83b7\u53d6\u5f15\u7528\u7684shared_ptr\n_NODISCARD shared_ptr&lt;_Ty&gt; lock() const noexcept { // convert to shared_ptr\nshared_ptr&lt;_Ty&gt; _Ret;\n//\u901a\u8fc7weak_ptr\u83b7\u5f97shared_ptr\uff0c\u5982\u679c\u6210\u529f\u5219\u8fd4\u56de\u5f15\u7528\u7684shared_ptr\uff0c\u5426\u5219\u5f97\u5230\u7684\u662f\u7a7ashared_ptr\n(void) _Ret._Construct_from_weak(*this);\nreturn _Ret;\n}\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/#22-_ptr_base","title":"2.2 \u7c7b<code>_Ptr_base</code>\u5206\u6790","text":"<p><code>_Ptr_base</code>\u4e2d<code>_Construct_from_weak</code>\u548c<code>_Construct_from_weak</code>\u8fd92\u4e2a\u51fd\u6570\u5f88\u91cd\u8981\uff0c\u5b9e\u73b0\u4e86<code>shared_ptr</code>\u5230<code>weak_ptr</code>\u7684\u8f6c\u6362 - <code>_Ptr_base</code>\u90e8\u5206\u6e90\u7801</p> <pre><code>template &lt;class _Ty&gt;\nclass _Ptr_base { // base class for shared_ptr and weak_ptr\npublic:\nusing element_type = remove_extent_t&lt;_Ty&gt;;\n\nprotected:\n_NODISCARD element_type* get() const noexcept {\nreturn _Ptr;\n}\n\nconstexpr _Ptr_base() noexcept = default;\n\n~_Ptr_base() = default;\n\ntemplate &lt;class _Ty0&gt;\nfriend class weak_ptr; // specifically, weak_ptr::lock()\n\ntemplate &lt;class _Ty2&gt;\nbool _Construct_from_weak(const weak_ptr&lt;_Ty2&gt;&amp; _Other) noexcept {\n// implement shared_ptr's ctor from weak_ptr, and weak_ptr::lock()\nif (_Other._Rep &amp;&amp; _Other._Rep-&gt;_Incref_nz()) {\n_Ptr = _Other._Ptr;\n_Rep = _Other._Rep;\nreturn true;\n}\n\nreturn false;\n}\n//shared_ptr\u8f6cweak_ptr,\u5982\u679c\u5f15\u7528\u8ba1\u6570\u63a7\u5236\u6307\u9488_Rep\u4e0d\u4e3a\u7a7a\uff0c\u5219\u8868\u793ashared_ptr\u4fdd\u5b58\u7740\u6709\u6548\u6307\u9488\u5bf9\u8c61\uff0c\u6307\u9488\u5bf9\u8c61\u548c\u5f15\u7528\u8ba1\u6570\u6307\u9488\u8d4b\u503c\uff0c\u5f31\u5f15\u7528\u8ba1\u6570+1\ntemplate &lt;class _Ty2&gt;\nvoid _Weakly_construct_from(const _Ptr_base&lt;_Ty2&gt;&amp; _Other) noexcept { // implement weak_ptr's ctors\nif (_Other._Rep) {\n_Ptr = _Other._Ptr;\n_Rep = _Other._Rep;\n_Rep-&gt;_Incwref();\n} else {\n_STL_INTERNAL_CHECK(!_Ptr &amp;&amp; !_Rep);\n}\n}\n//\u5f31\u5f15\u7528\u8ba1\u6570+1\nvoid _Incwref() const noexcept {\nif (_Rep) {\n_Rep-&gt;_Incwref();\n}\n}\n//\u5f31\u5f15\u7528\u8ba1\u6570-1\nvoid _Decwref() noexcept { // decrement weak reference count\nif (_Rep) {\n_Rep-&gt;_Decwref();\n}\n}\n\nprivate:\nelement_type* _Ptr{nullptr};\n_Ref_count_base* _Rep{nullptr};\n\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/#3-unique_ptr","title":"3 unique_ptr","text":"<ul> <li><code>unique_ptr</code>\u72ec\u5360\u6307\u9488\uff0c\u4e0e<code>shared_ptr</code>\u5171\u4eab\u7279\u6027\u76f8\u53cd\u3002</li> <li><code>uniqe_ptr</code>\u4e0d\u80fd\u62f7\u8d1d\u6784\u9020\u62f7\u8d1d\u8d4b\u503c\uff0c\u4f46\u652f\u6301\u79fb\u52a8\u6784\u9020\u548c\u79fb\u52a8\u8d4b\u503c\u3002</li> </ul> <pre><code>title: uniqe_ptr\u600e\u4e48\u5b9e\u73b0\u4e0d\u80fd\u6784\u9020\u7684\uff1f\n`uniqe_ptr`\u7c7b\u4e2d\u5c06\u62f7\u8d1d\u6784\u9020\u548c\u79fb\u52a8\u8d4b\u503c\u8bbe\u7f6e\u6210delete\u72b6\u6001\uff0c\u4f7f\u8d4b\u503c\u5931\u6548\n```cpp\n    unique_ptr(const unique_ptr&amp;) = delete;\n    unique_ptr&amp; operator=(const unique_ptr&amp;) = delete;\n</code></pre> <pre><code>title: \u600e\u4e48\u5c06\u4e00\u4e2auniqe_ptr\u8d4b\u7ed9\u53e6\u4e00\u4e2auniqe_ptr\uff1f\n\u56e0\u4e3a`uniqe_ptr`\u652f\u6301\u79fb\u52a8\u8bed\u4e49\uff0c\u56e0\u6b64\u6211\u4eec\u4f7f\u7528`move`\u6765\u8f6c\u79fb\u5bf9\u8c61\n```cpp\n    unique_ptr&lt;A&gt; uA1(new A);\n    //unique_ptr&lt;A&gt; uA2 = uA1; error \n    unique_ptr&lt;A&gt; uA2 = move(uA1);\n    //unique_ptr&lt;A&gt; uA3(uA2);error \n    unique_ptr&lt;A&gt; uA3(move(uA2));\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AD%97%E9%9D%A2%E9%87%8F/","title":"\u5b57\u9762\u91cf","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AD%97%E9%9D%A2%E9%87%8F/#1","title":"1 \u81ea\u5b9a\u4e49\u5b57\u9762\u91cf","text":"<ul> <li>\u529f\u80fd\uff1a\u901a\u8fc7\u5b9a\u4e49\u7528\u6237\u5b9a\u4e49\u7684\u540e\u7f00\uff0c\u5141\u8bb8\u6574\u6570\u3001\u6d6e\u70b9\u6570\u3001\u5b57\u7b26\u53ca\u5b57\u7b26\u4e32\u5b57\u9762\u91cf\u4ea7\u751f\u7528\u6237\u5b9a\u4e49\u7c7b\u578b\u7684\u5bf9\u8c61\u3002</li> <li>\u8bed\u6cd5\u89c4\u5219\uff1a\u901a\u8fc7\u91cd\u8f7d\u5b57\u9762\u91cf\u8fd0\u7b97\u7b26<code>\"\"</code>\u4f9b\u7528\u6237\u5b9a\u4e49\u5b57\u9762\u91cf\u8c03\u7528</li> <li><code>\u8fd4\u56de\u503c\u7c7b\u578b operator \"\" \u6807\u8bc6\u7b26(\u53c2\u6570)</code>:<ul> <li>\u5176\u4e2d\u6807\u8bc6\u7b26\u4e0e<code>\"\"</code>\u7531\u7a7a\u767d\u7b26\u5206\u5272</li> <li>\u6807\u8bc6\u7b26\u4ee5\u4e0b\u5212\u7ebf<code>_</code>\u5f00\u5934\u4e14\u540e\u968f\u975e\u5927\u5199\u5b57\u6bcd</li> </ul> </li> <li><code>\u8fd4\u56de\u503c\u7c7b\u578b operator \"\"\u6807\u8bc6\u7b26(\u53c2\u6570)</code><ul> <li>\u6807\u8bc6\u7b26\u4e0e<code>\"\"</code>\u4e4b\u95f4\u4e0d\u7528\u7a7a\u767d\u7b26\u5206\u9694</li> <li>\u6807\u8bc6\u7b26\u4ee5\u4e0b\u5212\u7ebf<code>_</code>\u5f00\u5934</li> </ul> </li> <li>\u6ce8\u610f\uff1a\u5bf9\u6807\u8bc6\u7b26\u7684\u9650\u5236\u53ea\u662f\u4e3a\u4e86\u907f\u514d\u4e0e\u7cfb\u7edf\u4fdd\u7559\u6807\u8bc6\u7b26\u51b2\u7a81\uff0c\u5b9e\u9645\u5e76\u4e0d\u4f1a\u89e6\u53d1\u7f16\u8bd1\u9519\u8bef\u3002</li> <li>\u53c2\u6570</li> <li>\u53c2\u6570\u9650\u5236<ul> <li>( const char * )  (1) </li> <li>( unsigned long long int )    (2)</li> <li>( long double )   (3) </li> <li>( char )  (4) </li> <li>( wchar_t )   (5) </li> <li>( char8_t )   (6) (C++20 \u8d77)</li> <li>( char16_t )  (7) </li> <li>( char32_t )  (8) </li> <li>( const char * , std::size_t )    (9) </li> <li>( const wchar_t * , std::size_t ) (10)    </li> <li>( const char8_t * , std::size_t ) (11)    (C++20 \u8d77)</li> <li>( const char16_t * , std::size_t )    (12)    </li> <li>( const char32_t * , std::size_t )    (13)    </li> </ul> </li> <li>\u53c2\u6570\u8bf4\u660e<ul> <li>(1) \u62e5\u6709\u6b64\u5f62\u53c2\u5217\u8868\u7684\u5b57\u9762\u91cf\u8fd0\u7b97\u7b26\u662f\u539f\u59cb\u5b57\u9762\u91cf\u8fd0\u7b97\u7b26\uff0c\u7528\u4e8e\u6574\u6570\u548c\u6d6e\u70b9\u7528\u6237\u5b9a\u4e49\u5b57\u9762\u91cf\u7684\u540e\u5907\u65b9\u5f0f\uff08\u89c1\u4e0a\u6587\uff09</li> <li>(2) \u62e5\u6709\u8fd9\u4e9b\u5f62\u53c2\u5217\u8868\u7684\u5b57\u9762\u91cf\u8fd0\u7b97\u7b26\u662f\u7528\u6237\u5b9a\u4e49\u6574\u6570\u5b57\u9762\u91cf\u7684\u9996\u9009\u5b57\u9762\u91cf\u8fd0\u7b97\u7b26</li> <li>(3) \u62e5\u6709\u8fd9\u4e9b\u5f62\u53c2\u5217\u8868\u7684\u5b57\u9762\u91cf\u8fd0\u7b97\u7b26\u662f\u7528\u4e8e\u5b9a\u4e49\u6d6e\u70b9\u5b57\u9762\u91cf\u7684\u9996\u9009\u5b57\u9762\u91cf\u8fd0\u7b97\u7b26</li> <li>(4-8) \u62e5\u6709\u8fd9\u4e9b\u5f62\u53c2\u5217\u8868\u7684\u5b57\u9762\u91cf\u8fd0\u7b97\u7b26\u7531\u7528\u6237\u5b9a\u4e49\u7684\u5b57\u7b26\u5b57\u9762\u91cf\u6240\u8c03\u7528</li> <li>(9-13) \u62e5\u6709\u8fd9\u4e9b\u5f62\u53c2\u5217\u8868\u7684\u5b57\u9762\u91cf\u8fd0\u7b97\u7b26\u7531\u7528\u6237\u5b9a\u4e49\u7684\u5b57\u7b26\u4e32\u5b57\u9762\u91cf\u6240\u8c03\u7528</li> </ul> </li> <li>\u8fd4\u56de\u503c\uff1a\u8fd4\u56de\u503c\u7c7b\u578b\u6ca1\u6709\u4efb\u4f55\u9650\u5236\uff0c\u4e5f\u53ef\u4ee5\u662f<code>void</code>\u7c7b\u578b</li> <li>\u793a\u4f8b</li> </ul> <pre><code>long double operator \"\" _w(long double ld) { return ld; };\nfloat operator \"\" _w(const char* c) {\nreturn atof(c);\n};\nint main() {\n1.2_w; // \u8c03\u7528\u8fd0\u7b97\u7b26 \"\" _w(1.2L)\n12_w; // \u8c03\u7528\u8fd0\u7b97\u7b26 \"\" _w(\"12\")\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AD%97%E9%9D%A2%E9%87%8F/#2","title":"2 \u6807\u51c6\u5e93\u5b57\u9762\u91cf","text":"<p>\u6807\u51c6\u5e93\u4e2d\u5b9a\u4e49\u4e86\u4e0b\u5217\u5b57\u9762\u91cf\u8fd0\u7b97\u7b26\uff1a - \u5b9a\u4e49\u4e8e\u5185\u8054\u547d\u540d\u7a7a\u95f4 <code>std::literals::complex_literals</code> | \u5b9a\u4e49| \u529f\u80fd | | ------------------------------------------------------------ | ------------------------------------------------------------ | | operator \"\"if(C++14) | \u8868\u793a\u7eaf\u865a\u6570\u7684 std::complex \u5b57\u9762\u91cf (\u51fd\u6570) | | <code>operator \"\"i</code> | \u8868\u793a\u7eaf\u865a\u6570\u7684 std:: complex \u5b57\u9762\u91cf (\u51fd\u6570) | | <code>operator \"\"il</code> | \u8868\u793a\u7eaf\u865a\u6570\u7684 std:: complex \u5b57\u9762\u91cf (\u51fd\u6570) | - \u5b9a\u4e49\u4e8e\u5185\u8054\u547d\u540d\u7a7a\u95f4 <code>std::literals::chrono_literals</code> </p> \u5b9a\u4e49 \u529f\u80fd operator\"\"h(C++14) \u8868\u793a\u5c0f\u65f6\u7684 std::chrono::duration \u5b57\u9762\u91cf (\u51fd\u6570) operator\"\"min(C++14) \u8868\u793a\u5206\u949f\u7684 std::chrono::duration \u5b57\u9762\u91cf (\u51fd\u6570) operator\"\"s(C++14) \u8868\u793a\u79d2\u7684 std::chrono::duration \u5b57\u9762\u91cf (\u51fd\u6570) operator\"\"ms(C++14) \u8868\u793a\u6beb\u79d2\u7684 std::chrono::duration \u5b57\u9762\u91cf (\u51fd\u6570) operator\"\"us(C++14) \u8868\u793a\u5fae\u79d2\u7684 std::chrono::duration \u5b57\u9762\u91cf (\u51fd\u6570) operator\"\"ns(C++14) \u8868\u793a\u7eb3\u79d2\u7684 std::chrono::duration \u5b57\u9762\u91cf (\u51fd\u6570) operator\"\"y(C++20) \u8868\u793a\u7279\u5b9a\u5e74\u7684 std::chrono::year \u5b57\u9762\u91cf (\u51fd\u6570) operator\"\"d(C++20) \u8868\u793a\u6708\u5185\u65e5\u671f\u7684 std::chrono::day \u5b57\u9762\u91cf (\u51fd\u6570) <ul> <li>\u5b9a\u4e49\u4e8e\u5185\u8054\u547d\u540d\u7a7a\u95f4 <code>std::literals::string_literals</code>  | \u5b9a\u4e49| \u529f\u80fd | |---|---| | operator\"\"s(C++14) | \u8f6c\u6362\u5b57\u7b26\u6570\u7ec4\u5b57\u9762\u91cf\u4e3a <code>basic_string</code> (\u51fd\u6570) |</li> <li>\u5b9a\u4e49\u4e8e\u5185\u8054\u547d\u540d\u7a7a\u95f4 <code>std::literals::string_view_literals</code> |\u5b9a\u4e49 | \u529f\u80fd | |---|---| | operator\"\"sv(C++17) | \u521b\u5efa\u4e00\u4e2a\u5b57\u7b26\u6570\u7ec4\u5b57\u9762\u91cf\u7684\u5b57\u7b26\u4e32\u89c6\u56fe (\u51fd\u6570) |</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AD%97%E9%9D%A2%E9%87%8F/#21-operatorsbasic_string","title":"2.1 operator\"\"s\u8f6c\u6362\u5b57\u7b26\u6570\u7ec4\u5b57\u9762\u91cf\u4e3abasic_string","text":"<ul> <li>\u529f\u80fd\uff1a\u5373c\u98ce\u683c\u5b57\u7b26\u4e32\u8f6cc++\u5b57\u7b26\u4e32</li> <li>\u6e90\u7801</li> </ul> <pre><code>// basic_string LITERALS\ninline namespace literals {\ninline namespace string_literals {\n_NODISCARD inline string operator\"\" s(const char* _Str, size_t _Len) {\nreturn string(_Str, _Len);\n}\n\n_NODISCARD inline wstring operator\"\" s(const wchar_t* _Str, size_t _Len) {\nreturn wstring(_Str, _Len);\n}\n\n#ifdef __cpp_char8_t\n_NODISCARD inline basic_string&lt;char8_t&gt; operator\"\" s(const char8_t* _Str, size_t _Len) {\nreturn basic_string&lt;char8_t&gt;(_Str, _Len);\n}\n#endif // __cpp_char8_t\n\n_NODISCARD inline u16string operator\"\" s(const char16_t* _Str, size_t _Len) {\nreturn u16string(_Str, _Len);\n}\n\n_NODISCARD inline u32string operator\"\" s(const char32_t* _Str, size_t _Len) {\nreturn u32string(_Str, _Len);\n}\n} // namespace string_literals\n} // namespace literals\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nint main() {\nconst char* c = \"123\";\nusing namespace std::string_literals;\nstd::string s = \"123\"s;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AD%97%E9%9D%A2%E9%87%8F/#22-operator-sv","title":"2.2 operator \"\"sv \u521b\u5efa\u4e00\u4e2a\u5b57\u7b26\u6570\u7ec4\u5b57\u9762\u91cf\u7684\u5b57\u7b26\u4e32\u89c6\u56fe","text":"<ul> <li>\u529f\u80fd\uff1a\u5373c\u98ce\u683c\u5b57\u7b26\u4e32\u8f6cc++\u5b57\u7b26\u4e32\u89c6\u56fe<code>string_view</code></li> <li>\u6e90\u7801\uff1a\u7c7b\u4f3c<code>operator\"\"s</code>\u7684\u5b9e\u73b0</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string_view&gt;\nint main() {\nusing namespace std::string_literals;\nusing namespace std::string_view_literals;\nconst char* c = \"123\";\nstd::string s = \"123\"s;\nstd::string_view sv = \"123\"sv;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11%E5%89%8D/realloc/","title":"realloc","text":"<ul> <li>\u529f\u80fd\uff1a\u5728\u539f\u5148\u5185\u5b58\u5206\u914d\u5730\u5740\u4e0a\u91cd\u65b0\u5206\u914d\u5185\u5b58\u5927\u5c0f</li> <li>\u51fd\u6570\u58f0\u660e\uff1a<code>void* realloc( void* ptr, std::size_t new_size );</code></li> <li><code>ptr</code>\u662f\u4f20\u5165\u7684\u6307\u9488,<code>std::malloc()</code>\u3001<code>std::calloc()</code> \u6216 <code>std::realloc()</code> \u5148\u524d\u5206\u914d\u7684\uff0c\u4e14\u4ecd\u672a\u88ab <code>std::free()</code> \u91ca\u653e</li> <li>new_size\u662f\u9700\u8981\u5206\u914d\u7684\u5185\u5b58\u5927\u5c0f</li> <li>\u793a\u4f8b</li> </ul> <pre><code>int main()\n{\nint* p = new int(2);\n//\u91cd\u65b0\u5206\u914d2\u4e2aint\u5927\u5c0f\u5185\u5b58\nvoid* pv = realloc(p, 2*sizeof(int));\np = static_cast&lt;int*&gt;(pv);\n//\u7ed9\u7b2c2\u4e2aint\u8d4b\u503c3\np[1]=3;\nint* p2 = p + 1;\n//\u91ca\u653e\u8d44\u6e90\nfree(p);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11%E5%89%8D/void/","title":"void","text":"<ul> <li>\u529f\u80fd</li> <li>\u51fd\u6570\u8fd4\u56de\u503cvoid</li> <li>void* \u6307\u9488</li> <li>void\u8868\u8fbe\u5f0f</li> <li>\u4f7f\u7528\u573a\u666f</li> <li>\u5f53\u4f5c\u51fd\u6570\u8fd4\u56de\u503c\u65f6\uff0c\u6307\u793a\u6b64\u51fd\u6570\u65e0\u8fd4\u56de\u503c\u7c7b\u578b</li> <li>\u5f53\u4f5cvoid*\u6307\u9488\u65f6\uff0c\u4efb\u610f\u7c7b\u578b\u6307\u9488\u90fd\u53ef\u9690\u5f0f\u8f6c\u6362void\u7c7b\u578b</li> <li>\u5f53\u4f5cvoid\u8868\u8fbe\u5f0f\u65f6\uff0c\u5982(void)0,\u53ef\u6307\u793a\u6b64\u8868\u8fbe\u5f0f\u65e0\u8fd4\u56de\u503c\uff0c\u662f\u4e00\u4e2a\u4e0d\u5b8c\u6574\u7c7b\u578b\uff0c\u4e0d\u53ef\u4f5c\u4e3a\u5de6\u503c\u6216\u53f3\u503c\u4f7f\u7528</li> <li>\u793a\u4f8b</li> </ul> <pre><code>struct A\n{\n\n};\n//1.\u51fd\u6570\u8fd4\u56de\u503cvoid\nvoid FUN()\n{\n//\u4e0d\u80fd\u4f7f\u7528return\n}\nbool b1()\n{\ncout &lt;&lt; \"false\" &lt;&lt; endl;\nreturn false;\n}\nbool b2()\n{\ncout &lt;&lt; \"true\" &lt;&lt; endl;\nreturn true;\n}\nint main()\n{    int i = 2;\n//2.\u4efb\u4f55\u7c7b\u578b\u6307\u9488\u53ef\u9690\u5f0f\u8f6c\u6362void*\nvoid* pv = &amp;i;\nint* pi = static_cast&lt;int*&gt;(pv);\n//3.\u4efb\u610f\u5bf9\u8c61\u548c\u8868\u8fbe\u5f0f\u90fd\u53ef\u4ee5\u5f3a\u5236void\uff0c\u4f5c\u7528\u8868\u8fbe\u5f0f\u65e0\u8fd4\u56de\u503c\n(void)i;\nA a;\n(void)a;\nvoid(1 + 2);\n(void)(b1() || b2());//\u6267\u884c\u8868\u8fbe\u5f0f\uff0cvoid\u4f7f\u8868\u8fbe\u5f0f\u7ed3\u679c\u6210\u4e3avoid\u7c7b\u578b\uff0c\u4e0d\u80fd\u4f5c\u4e3a\u5de6\u503c\u6216\u53f3\u503c\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11%E5%89%8D/%E6%95%B4%E6%95%B0%E5%AD%97%E9%9D%A2%E9%87%8F/","title":"\u6574\u6570\u5b57\u9762\u91cf","text":"<p>https://zh.cppreference.com/w/cpp/language/integer_literal</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B11%E5%89%8D/%E6%95%B4%E6%95%B0%E5%AD%97%E9%9D%A2%E9%87%8F/#1","title":"1 \u6570\u4f4d\u95f4\u53ef\u63d2\u5165\u5355\u5f15\u53f7","text":"<p>\u6570\u4f4d\u95f4\u53ef\u63d2\u5165\u4f5c\u4e3a\u5206\u9694\u7b26\u7684\u53ef\u9009\u7684\u5355\u5f15\u53f7\uff08<code>'</code>\uff09\u3002 - \u793a\u4f8b\uff0c\u4e0b\u5217\u53d8\u91cf\u4e5f\u88ab\u521d\u59cb\u5316\u4e3a\u76f8\u540c\u503c</p> <pre><code>unsigned long long l1 = 18446744073709550592ull; // C++11\nunsigned long long l2 = 18'446'744'073'709'550'592llu; // C++14\nunsigned long long l3 = 1844'6744'0737'0955'0592uLL; // C++14\nunsigned long long l4 = 184467'440737'0'95505'92LLU; // C++14\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B17/algorithm/","title":"algorithm \u7b97\u6cd5","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B17/algorithm/#1-generate","title":"1 generate","text":"<ul> <li>\u529f\u80fd\uff1a\u4f5c\u7528\u4e8e\u5bb9\u5668\uff0c\u4ee5\u7ed9\u5b9a\u51fd\u6570\u5bf9\u8c61\u6240\u751f\u6210\u7684\u503c\u8d4b\u503c\u8303\u56f4\u00a0<code>[first, last)</code>\u00a0\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20</li> <li>\u8bed\u6cd5\uff1a</li> </ul> <pre><code>template&lt;\u00a0class\u00a0ForwardIt,\u00a0class\u00a0Generator\u00a0&gt;  void\u00a0generate(\u00a0ForwardIt first, ForwardIt last, Generator g\u00a0);\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nint f()\n{ static int i;\nreturn ++i;\n}\n\nint main()\n{\nstd::vector&lt;int&gt; v(5);\nauto print = [&amp;] {\nfor (std::cout &lt;&lt; \"v: \"; auto iv: v)\nstd::cout &lt;&lt; iv &lt;&lt; \" \";\nstd::cout &lt;&lt; \"\\n\";\n};\n\nstd::generate(v.begin(), v.end(), f);\nprint();\n\n// \u4ee5\u6765\u81ea lambda \u51fd\u6570\u7684\u503c 0,1,2,3,4 \u521d\u59cb\u5316\n// \u7b49\u4ef7\u4e8e std::iota(v.begin(), v.end(), 0);\nstd::generate(v.begin(), v.end(), [n = 0] () mutable { return n++; });\nprint();\n}\n</code></pre> <ul> <li>\u8f93\u51fa\u7ed3\u679c</li> </ul> <pre><code>v: 1 2 3 4 5\nv: 0 1 2 3 4\n</code></pre> <ul> <li>\u53ef\u80fd\u5b9e\u73b0</li> </ul> <pre><code>template&lt;class ForwardIt, class Generator&gt;\nconstexpr // Since C++20\nvoid generate(ForwardIt first, ForwardIt last, Generator g)\n{\nwhile (first != last) {\n*first++ = g();\n}\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B17/any/","title":"std::any","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B17/any/#1","title":"1 \u529f\u80fd\u53ca\u793a\u4f8b","text":"<ul> <li>\u529f\u80fd\uff1a\u7528\u6765\u5b58\u50a8\u4efb\u610f\u7c7b\u578b\u6570\u636e\u7684\u7c7b\u578b\u5b89\u5168\u5bb9\u5668</li> <li>\u5f53\u50a8\u5b58\u7684\u662f\u6307\u9488\u65f6\uff0cany\u5185\u4fdd\u5b58\u4e86\u6307\u9488\u6570\u636e(\u628a\u6307\u9488\u5f53\u4f5c\u4e00\u4e2a\u6570\u636e)\uff0c\u5916\u90e8\u6307\u9488\u6240\u6307\u7684\u6570\u636e\u6539\u53d8\u4f1a\u5f71\u54cdany\u5185\u90e8\u5b58\u50a8\u7684\u6307\u9488\u6240\u6307\u5411\u7684\u6570\u636e\uff0c\u5916\u90e8\u6307\u9488\u88ab\u91cd\u65b0\u8d4b\u503c\uff0c\u4e0d\u4f1a\u5f71\u54cdany\u5185\u50a8\u5b58\u7684\u6307\u9488\u6570\u636e</li> <li>\u5f53\u50a8\u5b58\u7684\u662f\u5bf9\u8c61\u65f6\uff0c\u5916\u90e8\u5bf9\u8c61\u6570\u636e\u6539\u53d8\u4e0d\u5f71\u54cdany\u5185\u5b58\u50a8\u6570\u636e\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;any&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\nint main()\n{\n\nstd::cout &lt;&lt; std::boolalpha;\n\n// any \u7c7b\u578b\nstd::any a = new int(2);\nstd::cout &lt;&lt; a.type().name() &lt;&lt; \": \" &lt;&lt; *std::any_cast&lt;int*&gt;(a) &lt;&lt; '\\n';\na = 3.14;\nstd::cout &lt;&lt; a.type().name() &lt;&lt; \": \" &lt;&lt; std::any_cast&lt;double&gt;(a) &lt;&lt; '\\n';\na = true;\nstd::cout &lt;&lt; a.type().name() &lt;&lt; \": \" &lt;&lt; std::any_cast&lt;bool&gt;(a) &lt;&lt; '\\n';\n\n// \u6709\u8bef\u7684\u8f6c\u578b\ntry\n{\na = 1;\nstd::cout &lt;&lt; std::any_cast&lt;float&gt;(a) &lt;&lt; '\\n';\n}\ncatch (const std::bad_any_cast&amp; e)\n{\nstd::cout &lt;&lt; e.what() &lt;&lt; '\\n';\n}\n\n// \u62e5\u6709\u503c\na = 1;\nif (a.has_value())\n{\nstd::cout &lt;&lt; a.type().name() &lt;&lt; '\\n';\n}\n\n// \u91cd\u7f6e\na.reset();\nif (!a.has_value())\n{\nstd::cout &lt;&lt; \"no value\\n\";\n}\n\n// \u6307\u5411\u6240\u542b\u6570\u636e\u7684\u6307\u9488\na = 1;\nint* i = std::any_cast&lt;int&gt;(&amp;a);\nstd::cout &lt;&lt; *i &lt;&lt; \"\\n\";\n}\n//\u8f93\u51fa\u7ed3\u679c\n//int *: 2\n//double: 3.14\n//bool: true\n//Bad any_cast\n//int\n//no value\n//1\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B17/any/#2","title":"2 \u6e90\u7801\u5206\u6790","text":"<p>any\u662f\u4e00\u4e2a\u666e\u901a\u7c7b\uff08\u975e\u6a21\u677f\u7c7b\uff09\uff0c\u5b83\u6784\u9020\u5b9e\u73b0\u53ef\u4ee5\u5339\u914d\u4efb\u610f\u7c7b\u578b\u5bf9\u8c61\u6216\u6307\u9488\uff0c\u7136\u540e\u5185\u90e8\u4f1a\u91cd\u65b0\u5206\u914d\u4e00\u5757\u5185\u5b58\u7528\u6765\u4fdd\u5b58\u6570\u636e\u3002\u5b83\u5185\u90e8\u6709\u4e00\u4e2a<code>_Storage_t</code>\u7c7b\u578b\u6210\u5458\u53d8\u91cf<code>_Storage</code>,\u8fd9\u4e2a<code>_Storage</code>\u62e5\u6709\u5e76\u7ba1\u7406\u6570\u636e\uff08\u4fdd\u5b58\u6570\u636e\u7684\u7c7b\u578b\uff0c\u6570\u636e\u503c\uff09\u3002\u5f53any\u751f\u547d\u5468\u671f\u7ed3\u675f\u65f6\uff0c\u4f1a\u5c06<code>_Storage</code>\u4e2d\u5206\u914d\u7684\u8d44\u6e90\u5220\u9664\u3002 - \u90e8\u5206\u6e90\u7801\u53ca\u5206\u6790</p> <pre><code>//value \u53ef\u4ee5\u662f\u4efb\u610f\u7c7b\u578b\uff0c\u5305\u62ec\u6307\u9488\ntemplate &lt;class _ValueType, enable_if_t&lt;conjunction_v&lt;negation&lt;is_same&lt;decay_t&lt;_ValueType&gt;, any&gt;&gt;,\nnegation&lt;_Is_specialization&lt;decay_t&lt;_ValueType&gt;, in_place_type_t&gt;&gt;,\nis_copy_constructible&lt;decay_t&lt;_ValueType&gt;&gt;&gt;,\nint&gt; = 0&gt;\nany(_ValueType&amp;&amp; _Value) { // initialize with _Value\n//\u8c03\u7528any\u5185\u90e8\u7684_Emplace\u51fd\u6570\n_Emplace&lt;decay_t&lt;_ValueType&gt;&gt;(_STD forward&lt;_ValueType&gt;(_Value));\n}\ntemplate &lt;class _Ty, class... _Types&gt;\nvoid _Construct_in_place1(_Ty&amp; _Obj, _Types&amp;&amp;... _Args) noexcept(is_nothrow_constructible_v&lt;_Ty, _Types...&gt;) {\n::new (const_cast&lt;void*&gt;(static_cast&lt;const volatile void*&gt;(_STD addressof(_Obj))))\n_Ty(_STD forward&lt;_Types&gt;(_Args)...);\n}\n//_Emplace\u51fd\u6570\u4e2d\u67093\u4e2a\u5206\u652f\uff0c\u5206\u652f\u4e3b\u8981\u901a\u8fc7\u5bf9\u8c61\u6240\u5360\u5185\u5b58\u5927\u5c0f\uff0c\u4ee5\u53ca\u5b57\u8282\u5bf9\u9f50\u5927\u5c0f\u6761\u4ef6\u6765\u533a\u5206\ntemplate &lt;class _Decayed, class... _Types&gt;\n_Decayed&amp; _Emplace(_Types&amp;&amp;... _Args) { // emplace construct _Decayed\nif constexpr (_Any_is_trivial&lt;_Decayed&gt;) {\n// using the _Trivial representation\n//_Storage._TrivialData\u662f\u6570\u7ec4\uff0c\u9884\u5148\u5206\u914d\u597d\u4e86\u7a7a\u95f4\nauto&amp; _Obj = reinterpret_cast&lt;_Decayed&amp;&gt;(_Storage._TrivialData);\n//_Construct_in_place\u5185\u90e8\u8c03\u7528new\u7684\u5e03\u7f6e\u53c2\u6570\u5c06_Obj\u7a7a\u95f4\u5206\u914d\u7ed9\u4e86any\u6240\u8981\u7ba1\u7406\u7684\u6570\u636e\uff0c\u8fd9\u6837\u9002\u5f53\u7c7b\u578b\u8f6c\u6362_Storage._TrivialData\u5c31\u53ef\u4ee5\u5f97\u5230\u6240\u8981\u7ba1\u7406\u7684\u6570\u636e\n_Construct_in_place(_Obj, _STD forward&lt;_Types&gt;(_Args)...);\n_Storage._TypeData =\nreinterpret_cast&lt;uintptr_t&gt;(&amp;typeid(_Decayed)) | static_cast&lt;uintptr_t&gt;(_Any_representation::_Trivial);\nreturn _Obj;\n}\nelse if constexpr (_Any_is_small&lt;_Decayed&gt;) {\n// using the _Small representation\nauto&amp; _Obj = reinterpret_cast&lt;_Decayed&amp;&gt;(_Storage._SmallStorage._Data);\n_Construct_in_place(_Obj, _STD forward&lt;_Types&gt;(_Args)...);\n_Storage._SmallStorage._RTTI = &amp;_Any_small_RTTI_obj&lt;_Decayed&gt;;\n_Storage._TypeData =\nreinterpret_cast&lt;uintptr_t&gt;(&amp;typeid(_Decayed)) | static_cast&lt;uintptr_t&gt;(_Any_representation::_Small);\nreturn _Obj;\n}\nelse {\n//\u8fd9\u4e2a\u5206\u652f\u4f1a\u4f7f\u5185\u90e8new\u5757\u7a7a\u95f4\uff0c\u7531 _Storage._BigStorage._Ptr\u4fdd\u5b58\uff0c\u5f53any\u751f\u547d\u5468\u671f\u7ed3\u675f\u4f1a\u6267\u884cdelete\u64cd\u4f5c\n// using the _Big representation\n_Decayed* const _Ptr = ::new _Decayed(_STD forward&lt;_Types&gt;(_Args)...);\n_Storage._BigStorage._Ptr = _Ptr;\n_Storage._BigStorage._RTTI = &amp;_Any_big_RTTI_obj&lt;_Decayed&gt;;\n_Storage._TypeData =\nreinterpret_cast&lt;uintptr_t&gt;(&amp;typeid(_Decayed)) | static_cast&lt;uintptr_t&gt;(_Any_representation::_Big);\nreturn *_Ptr;\n}\n}\n</code></pre> <ul> <li>\u4ee5\u4e0a\u6e90\u7801\u4e2d\u6709\u51e0\u4e2a\u91cd\u8981\u7684\u5b9e\u73b0:</li> <li><code>auto&amp; _Obj = reinterpret_cast&lt;_Decayed&amp;&gt;(_Storage._TrivialData);</code><ul> <li>\u5f53 _Decayed\u662f\u6307\u9488\u65f6\uff0c_Obj\u4f1a\u662f<code>*&amp;</code>\u6307\u9488\u7684\u5f15\u7528\u7c7b\u578b\uff0c\u5373<code>&amp;_Obj</code>\u4e0e<code>_Storage._TrivialData</code>\u7684\u5730\u5740\u662f\u76f8\u540c\u7684\u3002</li> </ul> </li> <li><code>::new (const_cast&lt;void*&gt;(static_cast&lt;const volatile void*&gt;(_STD addressof(_Obj))))_Ty(_STD forward&lt;_Types&gt;(_Args)...);</code><ul> <li>\u8fd9\u4f7f\u7528\u5e03\u7f6enew\u5b9e\u73b0\uff0c\u4ece<code>_Obj</code>\u4e2d\u5206\u914d\u5185\u5b58\u7ed9<code>_Ty</code>\u6570\u636e\uff0c\u4ece\u800c\u8fbe\u5230\u7ed9<code>_Obj</code>\u8d4b\u503c\u529f\u80fd</li> </ul> </li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B17/if%20switch%E6%96%B0%E7%89%B9%E6%80%A7/","title":"if switch\u65b0\u7279\u6027","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B17/if%20switch%E6%96%B0%E7%89%B9%E6%80%A7/#1-if-switch","title":"1 if switch \u521d\u59cb\u5316\u8bed\u53e5","text":"<ul> <li>\u529f\u80fd\uff1a\u5728<code>if</code>\u6216<code>switch</code>\u6761\u4ef6\u5757\u4e2d\u589e\u52a0\u53d8\u91cf\u58f0\u660e\u6216\u8868\u8fbe\u5f0f\u8bed\u53e5</li> <li>\u4f7f\u7528\u573a\u666f\uff1a\u5f53if\u6216switch\u8bed\u53e5\u7684\u6761\u4ef6\u9700\u8981\u8ba1\u7b97\u65f6\uff0c\u6b64\u8ba1\u7b97\u8868\u8fbe\u5f0f\u53ef\u653e\u5165if\u6216switch\u6761\u4ef6\u533a\uff0c\u800c\u4e0d\u5fc5\u5728\u5916\u9762\u58f0\u660e</li> <li>\u6ce8\u610f\u4e8b\u9879\uff1a\u8868\u8fbe\u5f0f\u6216\u58f0\u660e\u5fc5\u987b\u7531\u5206\u53f7<code>;</code>\u7ed3\u675f\u4e14\u53ea\u80fd\u6709\u4e00\u4e2a\u5206\u53f7<code>;</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>int fun(int x) {\nreturn x;\n}\nint main() {\npair&lt;int, int&gt; pr{ 1,2 };\nif (bool f1 = false, f2 = true;  f1) {\n\n}\nif (auto [x, y] = pr; x == 1) {\n\n}\nswitch (int i = fun(2);i)\n{\ncase 2:\nbreak;\ndefault:\nbreak;\n}\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B17/if%20switch%E6%96%B0%E7%89%B9%E6%80%A7/#2-if-constexpr","title":"2 if constexpr","text":"<ul> <li>\u529f\u80fd\uff1a\u5b9a\u4e49\u6761\u4ef6\u4e3a\u5e38\u91cf\u8868\u8fbe\u5f0f\uff0c\u7f16\u8bd1\u5668\u4f1a\u5728\u7f16\u8bd1\u671f\u505a\u4f18\u5316\uff0c\u5f53\u6761\u4ef6\u4e3a<code>false</code>\u65f6\u4f1a\u820d\u5f03<code>true</code>\u8bed\u53e5\u5757\uff0c\u5f53\u6761\u4ef6\u4e3a<code>true</code>\u65f6\u4f1a\u820d\u5f03<code>false</code>\u8bed\u53e5\u5757\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code>template &lt;typename T&gt;\nauto get_value(T t) {\nif constexpr (std::is_pointer_v&lt;T&gt;)\nreturn *t; // \u5bf9 T = int* \u63a8\u5bfc\u8fd4\u56de\u7c7b\u578b\u4e3a int\nelse\nreturn t;  // \u5bf9 T = int \u63a8\u5bfc\u8fd4\u56de\u7c7b\u578b\u4e3a int\n}\nint main() {\nstring s = \"123\";\nget_value(s);\nget_value(&amp;s);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B17/nullopt_t/","title":"nullopt_t","text":"<ul> <li>\u529f\u80fd\uff1astd::nullopt_t \u662f\u7a7a\u7c7b\u7c7b\u578b\uff0c\u7528\u4e8e\u8868\u793a\u4e0d\u542b\u6570\u636e\u7684\u7a7a\u7c7b</li> <li>\u4f7f\u7528\u573a\u666f\uff1a\u914d\u5408<code>std::optional</code>,\u7528\u4e8e\u6307\u793a <code>std::optional</code> \u7c7b\u578b\u62e5\u6709\u672a\u521d\u59cb\u5316\u72b6\u6001</li> <li>\u6e90\u7801\u5206\u6790:<code>nullopt_t</code>\u81ea\u5b9a\u4e49\u7684\u6784\u9020\u51fd\u6570\uff0c\u4e5f\u9690\u542b\u7684\u4f7f\u7f16\u8bd1\u5668\u63d0\u4f9b\u7684\u9ed8\u8ba4\u6784\u9020\u51fd\u6570\u5931\u6548\uff0c\u521d\u59cb\u5316\u751f\u6210<code>nullopt_t</code>\u5b9e\u4f8b\u5bf9\u8c61\u53ea\u80fd\u901a\u8fc7\u663e\u5f0f\u8c03\u7528<code>nullopt_t(_Tag)</code>\u6784\u9020\uff0c\u800c\u4e0d\u80fd\u4f7f\u7528\u5982\u9ed8\u8ba4\u6784\u9020<code>nullopt_t npt;</code>\u3002</li> </ul> <pre><code>struct nullopt_t { // no-value state indicator\nstruct _Tag {};\nconstexpr explicit nullopt_t(_Tag) {}\n};\ninline constexpr nullopt_t nullopt{nullopt_t::_Tag{}};\n</code></pre> <ul> <li>\u793a\u4f8b:</li> </ul> <pre><code>int main(){\n//\u8c03\u7528\u663e\u5f0f\u6784\u9020\nnullopt_t npt1{ nullopt_t::_Tag{} };//\u6b63\u786e\n//\u4e0d\u80fd\u4f7f\u7528\u9ed8\u8ba4\u6784\u9020\nnullopt_t npt2;//error \u4e0d\u5b58\u5728\u9ed8\u8ba4\u6784\u9020\u51fd\u6570\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B17/optional/","title":"optional","text":"<ul> <li>\u529f\u80fd\uff1a\u7c7b\u6a21\u677f std::optional \u7ba1\u7406\u4e00\u4e2a\u53ef\u9009\u7684\u5bb9\u7eb3\u503c\uff0c\u65e2\u53ef\u4ee5\u5b58\u5728\u4e5f\u53ef\u4ee5\u4e0d\u5b58\u5728\u7684\u503c\u3002</li> <li>\u4f7f\u7528\u573a\u666f\uff1a\u6bd4\u5982\u4e00\u4e2a\u51fd\u6570\u6267\u884c\uff0c\u5f02\u5e38\u548c\u6b63\u5e38\u7684\u8fd4\u56de\u503c\u9700\u8981\u533a\u5206\u65f6\uff0c\u6216\u5f02\u5e38\u6ca1\u6709\u8fd4\u56de\u503c\uff0c\u6b63\u5e38\u624d\u6709\u8fd4\u56de\u503c\u7684\u60c5\u51b5\u4e0b\uff0c\u76f8\u5f53\u4e8eoptional\u5e26\u6709\u6807\u5fd7\uff0c\u4e14\u4fdd\u5b58\u7740\u53ef\u80fd\u5b58\u5728\u7684\u503c.\u53ef\u4ee5\u5f88\u597d\u7684\u53d6\u4ee3\u7c7b\u4f3c<code>std::pair&lt;T,bool&gt;</code>\u7684\u7ed3\u6784</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;string&gt;\n#include &lt;functional&gt;\n#include &lt;iostream&gt;\n#include &lt;optional&gt;\n\n// optional \u53ef\u7528\u4f5c\u53ef\u80fd\u5931\u8d25\u7684\u5de5\u5382\u7684\u8fd4\u56de\u7c7b\u578b\nstd::optional&lt;std::string&gt; create(bool b) {\nif (b)\nreturn \"Godzilla\";\nelse\nreturn {};\n}\n\n// \u80fd\u7528 std::nullopt \u521b\u5efa\u4efb\u4f55\uff08\u7a7a\u7684\uff09 std::optional\nauto create2(bool b) {\nreturn b ? std::optional&lt;std::string&gt;{\"Godzilla\"} : std::nullopt;\n}\n\n// std::reference_wrapper \u53ef\u7528\u4e8e\u8fd4\u56de\u5f15\u7528\nauto create_ref(bool b) {\nstatic std::string value = \"Godzilla\";\nreturn b ? std::optional&lt;std::reference_wrapper&lt;std::string&gt;&gt;{value}\n: std::nullopt;\n}\nstruct S\n{\nvirtual int f(char) const, g(int)&amp;&amp;; // \u58f0\u660e\u4e24\u4e2a\u975e\u9759\u6001\u6210\u5458\u51fd\u6570\nvirtual int f(char); // \u7f16\u8bd1\u65f6\u9519\u8bef\uff1avirtual\uff08\u5728 \u58f0\u660e\u8bf4\u660e\u7b26\u5e8f\u5217 \u4e2d\uff09\n// \u4ec5\u5728\u975e\u9759\u6001\u6210\u5458\u51fd\u6570\u7684\u58f0\u660e\u4e2d\u5141\u8bb8\n};\n\nint main()\n{\n\nstd::cout &lt;&lt; \"create(false) returned \"\n&lt;&lt; create(false).value_or(\"empty\") &lt;&lt; '\\n';\n\n// \u8fd4\u56de optional \u7684\u5de5\u5382\u51fd\u6570\u53ef\u7528\u4f5c while \u548c if \u7684\u6761\u4ef6\nif (auto str = create2(true)) {\nstd::cout &lt;&lt; \"create2(true) returned \" &lt;&lt; *str &lt;&lt; '\\n';\n}\n\nif (auto str = create_ref(true)) {\n// \u7528 get() \u8bbf\u95ee reference_wrapper \u7684\u503c\nstd::cout &lt;&lt; \"create_ref(true) returned \" &lt;&lt; str-&gt;get() &lt;&lt; '\\n';\nstr-&gt;get() = \"Mothra\";\nstd::cout &lt;&lt; \"modifying it changed it to \" &lt;&lt; str-&gt;get() &lt;&lt; '\\n';\n}\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B17/string_view/","title":"string_view","text":"<ul> <li>\u529f\u80fd\uff1a</li> <li>\u63d0\u4f9b\u5b57\u7b26\u4e32\u7684\u89c6\u56fe\uff0c\u5373\u63d0\u4f9b\u5bf9\u5b57\u7b26\u4e32\u7684\u53ef\u8bfb\u64cd\u4f5c\uff0c\u4e0d\u53ef\u4fee\u6539\u5b57\u7b26\u4e32\u7684\u5185\u5bb9\u3002</li> <li>\u907f\u514d\u5927\u5185\u5b58\u62f7\u8d1d\uff0c\u5728\u53ea\u9700\u8981\u8bfb\u64cd\u4f5c\u65f6\u4f7f\u7528\u6548\u7387\u9ad8\u4e8e<code>string</code>\u3002</li> <li>\u5b9e\u73b0\u539f\u7406\uff1a</li> <li><code>string_view</code>\u53ea\u67092\u4e2a\u6570\u636e\u6210\u5458\uff0c\u6307\u5411\u5e38 CharT \u7684\u6307\u9488\u548c\u5927\u5c0f\uff0c\u62f7\u8d1d\u65f6\u4e0d\u6d89\u53ca\u5185\u5b58\u7684\u5206\u914d</li> <li>\u5b9e\u73b0<code>string</code>\u4e2d\u8bfb\u64cd\u4f5c\u51fd\u6570\uff0c\u4e14\u8fd9\u4e9b\u64cd\u4f5c\u4ec5\u4ec5\u4f1a\u66f4\u6539\u6307\u5411\u7684CharT\u6307\u9488\u548c\u5927\u5c0f</li> <li>\u4f7f\u7528\u573a\u666f\uff1a\u5728\u4e0d\u4fee\u6539\u5b57\u7b26\u4e32\u5185\u5bb9\uff0c\u4ec5\u4ec5\u64cd\u4f5c\u5b57\u7b26\u4e32\u53ea\u8bfb\u51fd\u6570\u65f6\u4f7f\u7528\u3002</li> <li>\u6ce8\u610f\u4e8b\u9879\uff1a</li> <li><code>string_view</code>\u53ef\u4ee5\u4ecec\u98ce\u683c\u5b57\u7b26\u521d\u59cb\u5316\uff0c\u4f46\u4e0d\u80fd\u4ecec++string\u521d\u59cb\u5316</li> <li>\u7531\u4e8e<code>string_view</code>\u4ec5\u7531\u6307\u9488\u548c\u5927\u5c0f\u8868\u793a\u5b57\u7b26\u4e32\uff0c\u5e76\u4e0d\u7531\u7ec8\u6b62\u7b26<code>\\0</code>\u7ed3\u675f\uff0c\u6240\u4ee5\u5982<code>data()</code>\u64cd\u4f5c\u8fd4\u56de\u5b57\u7b26\u4e32\u5b9e\u9645\u8303\u56f4\u53ef\u80fd\u66f4\u5927\uff08\u56e0\u4e3a\u5339\u914d\u5230\u6700\u8fd1\u4e00\u4e2a<code>\\0</code>\uff09\u3002</li> <li>\u7531\u4e8e<code>string_view</code>\u4ec5\u4ec5\u662f\u5f15\u7528\u5b57\u7b26\u4e32\uff0c\u6545\u8981\u4fdd\u8bc1<code>string_view</code>\u6307\u5411\u7684\u5b57\u7b26\u4e32\u751f\u547d\u5468\u671f\u8981\u957f\u4e8e<code>string_view</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;string_view&gt;\nstd::string_view fun_suc()\n{\nstatic std::string strpp = \"akjsdjkasd\";//\nstd::string_view strView(strpp);\nreturn strView;//strpp\u9759\u6001\u5bf9\u8c61\u751f\u547d\u5468\u671f\u957f\u4e8estring_view\u53ef\u4ee5\u8fd4\u56de\n}\nstd::string_view fun_err()\n{\nstd::string strpp = \"akjsdjkasd\";\nstd::string_view strView(strpp);\nreturn strView;//strpp\u5bf9\u8c61\u751f\u547d\u5468\u671f\u77ed\u4e8estring_view\uff0c\u4e0d\u53ef\u4f5c\u4e3a\u8fd4\u56de\u503c\n}\nint main() {\nstd::string strpp = \"akjsdjkasd\";\nstd::string_view strView(strpp.c_str(),6);\n//data\u8fd4\u56de\u6307\u5411\u7684\u5b57\u7b26\u4e32\u5934\u6307\u9488\uff0c\u5b57\u7b26\u4e32\u4f1a\u5bfb\u627e\\0\u7ec8\u6b62\u7b26\uff0c\u56e0\u6b64\u6570\u636e\u5c06\u4f1a\u662fakjsdjkasd\u800c\u4e0d\u662fakjsdj\nstd::cout &lt;&lt;\"strView.data() : \"&lt;&lt; strView.data() &lt;&lt; std::endl;;\nstd::cout &lt;&lt;\"strView.substr(0, 3) : \"&lt;&lt; strView.substr(0, 3) &lt;&lt; std::endl;\n}\n//\u8f93\u51fa\u7ed3\u679c\n//strView.data() : akjsdjkasd\n//strView.substr(0, 3) : akj\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B17/variant/","title":"variant","text":"<ul> <li>\u529f\u80fd\uff1a<code>variant</code>\u662f\u4e00\u4e2a\u8054\u5408\u4f53\u7c7b\u578b\uff0c\u53ef\u4fdd\u6301\u591a\u4e2a\u7c7b\u578b\uff08\u540c\u4e00\u7c7b\u578b\u53ef\u91cd\u590d\uff09\uff0c\u4f46\u4efb\u610f\u65f6\u523b\u53ea\u80fd\u4fdd\u5b58\u4e00\u79cd\u7c7b\u578b\u6570\u636e</li> <li>\u6ce8\u610f\u4e8b\u9879</li> <li><code>variant</code>\u4e0d\u5bb9\u8bb8\u4fdd\u6709\u5f15\u7528\u3001\u6570\u7ec4\uff0c\u6216\u7c7b\u578b void </li> <li>\u9ed8\u8ba4\u6784\u9020\u7684<code>variant</code>\u4fdd\u6709\u5176\u9996\u4e2a\u9009\u9879\u7684\u503c,\u5982<code>std::variant&lt;int, float&gt; v;</code>,v\u5b58\u6709int\u7c7b\u578b0\u503c\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;variant&gt;\n#include &lt;string&gt;\nint main()\n{\n\nstd::variant&lt;int, float&gt; v,u;\nstd::variant&lt;int,std::string&gt; w;\nint ii=std::get&lt;int&gt;(w);//m\u9ed8\u8ba40\u503c\nv.emplace&lt;0&gt;(100);//v\u542bint\uff0c\u503c100\nint i1 = std::get&lt;int&gt;(v);\nv.emplace&lt;float&gt;(100.0);//v\u542bfloat\uff0c\u503c100.0\ntry\n{\nint i2 = std::get&lt;int&gt;(v);//\u7531\u4e8ev\u5df2\u7ecf\u88ab\u8d4b\u503c\u6210float\uff0c\u6545\u53d6int\u4f1a\u5931\u8d25\n}\ncatch (const std::bad_variant_access&amp; e)\n{\nprintf(e.what());\n}\n\nfloat f1 = std::get&lt;1&gt;(v);\nv = 12; // v \u542b int\nint i3 = std::get&lt;0&gt;(v);\nu = v;\n//v = w;//error,v\u548cw\u9700\u8981\u76f8\u540c\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B17/variant/#1-variant","title":"1 variant\u8d4b\u503c\u8fd0\u7b97\u7b26=","text":"<ul> <li><code>variant</code>\u8d4b\u503c<code>variant</code></li> <li><code>variant</code>\u53c2\u6570\u5fc5\u987b\u5339\u914d\uff0c\u5426\u5219\u62a5\u9519</li> <li>\u4efb\u610f\u7c7b\u578b<code>T</code>\u8d4b\u503c<code>variant</code></li> <li><code>T</code>\u7c7b\u578b\u5339\u914d<code>variant</code>\u53c2\u6570\u5217\u8868\u4e2d\u7c7b\u578b</li> <li><code>T</code>\u7c7b\u578b\u80fd\u8f6c\u6362\u6210<code>variant</code>\u53c2\u6570\u5217\u8868\u4e2d\u7c7b\u578b</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;variant&gt;\n#include &lt;string&gt;\nint main()\n{\nstd::variant&lt;std::string&gt; v1;\nv1 = \"abc\"; // OK\nstd::variant&lt;std::string, std::string&gt; v2;\n//v2 = \"abc\"; // \u9519\u8bef,\u7f16\u8bd1\u5668\u65e0\u6cd5\u5224\u65ad\u662f\u4f20\u7ed9\u53c2\u65701\u8fd8\u662f\u53c2\u65702\u7684string\nv2.emplace&lt;0&gt;(\"abc\");//\u6b63\u786e\uff0c\u6307\u793a\u4f20\u7ed9\u53c2\u65701\u6307\u5b9a\u7684string\nstd::variant &lt;std::string, bool&gt; v3;\nv3 = \"abc\"; // OK \uff1a\u9009\u62e9 string \uff1b bool \u4e0d\u662f\u5019\u9009\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B17/variant/#2-variantemplace","title":"2 variant\u6210\u5458\u51fd\u6570emplace","text":"<ul> <li>\u529f\u80fd\uff1a\u7ed9<code>variant</code>\u5bf9\u8c61\u8d4b\u503c</li> <li>\u6ce8\u610f\u4e8b\u9879\uff1a<code>emplace</code>\u6a21\u677f\u53c2\u6570\u53ef\u4ee5\u662f0\u503c\u5f00\u59cb\u7684\u7d22\u5f15\u503c\u4e5f\u53ef\u4ee5\u662f\u5177\u4f53\u7c7b\u578b</li> <li>\u5f53<code>variant</code>\u4fdd\u6709\u591a\u4e2a\u76f8\u540c\u7c7b\u578b\u53c2\u6570\u65f6\uff0c\u4e0d\u80fd\u4f7f\u7528\u5177\u4f53\u7c7b\u578b\u6a21\u677f\u53c2\u6570\uff0c\u56e0\u4e3a\u7f16\u8bd1\u5668\u4e0d\u77e5\u9053\u4f60\u9700\u8981\u8d4b\u503c\u7ed9\u5177\u4f53\u54ea\u4e00\u4e2a</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;variant&gt;\n\nint main()\n{\nstd::variant&lt;std::string&gt; v1;\nv1.emplace&lt;0&gt;(\"abc\"); // OK\nstd::cout &lt;&lt; std::get&lt;0&gt;(v1) &lt;&lt; '\\n';\nv1.emplace&lt;std::string&gt;(\"def\"); // OK\nstd::cout &lt;&lt; std::get&lt;0&gt;(v1) &lt;&lt; '\\n';\n\nstd::variant&lt;std::string, std::string&gt; v2;\nv2.emplace&lt;1&gt;(\"ghi\"); // OK\nstd::cout &lt;&lt; std::get&lt;1&gt;(v2) &lt;&lt; '\\n';\n// v2.emplace&lt;std::string&gt;(\"abc\"); -&gt; \u9519\u8bef,\u7f16\u8bd1\u5668\u65e0\u6cd5\u5224\u65ad\u662f\u4f20\u7ed9\u53c2\u65701\u8fd8\u662f\u53c2\u65702\u7684string\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B17/variant/#3-variantindex","title":"3 variant\u6210\u5458\u51fd\u6570index","text":"<ul> <li>\u529f\u80fd\uff1a\u8fd4\u56de <code>variant</code> \u5f53\u524d\u6240\u4fdd\u6709\u7684\u53ef\u9009\u9879\u7684\u96f6\u57fa\u4e0b\u6807</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;variant&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\nint main()\n{\nstd::variant&lt;int, std::string&gt; v = \"abc\"; std::cout &lt;&lt; \"v.index = \" &lt;&lt; v.index() &lt;&lt; '\\n'; v = {};  std::cout &lt;&lt; \"v.index = \" &lt;&lt; v.index() &lt;&lt; '\\n';\n}\n//\u8f93\u51fa\u7ed3\u679c\n//v.index = 1\n//v.index = 0\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B17/variant/#4-get","title":"4 \u975e\u6210\u5458\u51fd\u6570<code>get</code>","text":"<ul> <li>\u529f\u80fd\uff1a\u83b7\u53d6<code>variant</code>\u4e2d\u4fdd\u5b58\u7684\u503c\uff0c\u7528\u6cd5\u540c\u4ece<code>tuple</code>\u4e2d\u67e5\u8be2\u6570\u636e</li> <li>\u6ce8\u610f\u4e8b\u9879\uff1a</li> <li>\u57fa\u4e8e\u4e0b\u6807\u8bbf\u95ee\u6216\u57fa\u4e8e\u7c7b\u578b\u8bbf\u95ee\u5fc5\u987b\u8981\u786e\u4fdd<code>variant</code>\u4e2d\u5b58\u7684\u662f\u5bf9\u5e94\u4e0b\u6807\u7684\u6570\u636e\u6216\u5bf9\u5e94\u7c7b\u578b\u7684\u6570\u636e</li> <li>\u5f53<code>variant</code>\u542b\u6709\u591a\u4e2a\u76f8\u540c\u7c7b\u578b\u65f6\uff0c\u57fa\u4e8e\u7c7b\u578b\u7684\u8bbf\u95ee\u4e0d\u80fd\u8bbf\u95ee\u8fd9\u79cd\u542b\u6709\u591a\u4e2a\u76f8\u540c\u7c7b\u578b\u7684\u6570\u636e</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;variant&gt;\n#include &lt;string&gt;\n\nint main()\n{\nstd::variant&lt;int, float&gt; v{12}, w;\nint i = std::get&lt;int&gt;(v);\nw = std::get&lt;int&gt;(v);\nw = std::get&lt;0&gt;(v); // \u6548\u679c\u540c\u524d\u4e00\u884c\n\n//  std::get&lt;double&gt;(v); // \u9519\u8bef\uff1a [int, float] \u4e2d\u65e0 double\n//  std::get&lt;3&gt;(v);      // \u9519\u8bef\uff1a\u5408\u6cd5\u7684 index \u503c\u662f 0 \u548c 1\n\ntry {\nstd::get&lt;float&gt;(w); // w \u542b\u6709 int \uff0c\u975e float \uff1a\u5c06\u629b\u51fa\u5f02\u5e38\n}\ncatch (std::bad_variant_access&amp;) {}\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B17/variant/#5-visit","title":"5 \u975e\u6210\u5458\u51fd\u6570<code>visit</code>","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f<code>template &lt;class R, class Visitor, class... Variants&gt; constexpr R visit(Visitor&amp;&amp; vis, Variants&amp;&amp;... vars);</code></li> <li>\u529f\u80fd\uff1a\u4ee5variant\u5bf9\u8c61vars\u4f5c\u4e3a\u53c2\u6570\uff0c\u8c03\u7528\u53ef\u8c03\u7528\u5bf9\u8c61vis\uff08\u51fd\u6570\uff09\uff0c\u76f8\u5f53\u4e8e\u8c03\u7528<code>std::invoke(std::forward&lt;Visitor&gt;(vis), std::get&lt;is&gt;(std::forward&lt;Variants&gt;(vars))...)</code></li> <li>\u6ce8\u610f\u4e8b\u9879\uff1a</li> <li>\u53ef\u8c03\u7528\u5bf9\u8c61<code>vis</code>\u4e2d\u51fd\u6570\u53c2\u6570\u5e94\u8be5\u662f\u5177\u4f53\u6570\u636e\u7c7b\u578b\u4e2d\u4e00\u79cd\uff0c\u800c\u4e0d\u662f<code>variant</code>\u7c7b\u578b</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;variant&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\nint main()\n{\nstd::variant&lt;int, std::string&gt; v{ \"123\" };\nstd::visit([](auto&amp;&amp; arg)-&gt;void {\nusing T = std::decay_t&lt;decltype(arg)&gt;;\nT value;\nif (std::is_same_v&lt;T, int&gt;)\n{\nstd::cout &lt;&lt; \"int value:\" &lt;&lt; arg &lt;&lt; std::endl;;\n}\nelse if(std::is_same_v&lt;T,std::string&gt;)\n{\nstd::cout &lt;&lt; \"string value:\" &lt;&lt; arg &lt;&lt; std::endl;;\n}\n}, v);\n}\n//\u8f93\u51fa\u7ed3\u679c\uff1a\n//string value:123\n</code></pre> <ul> <li>\u53ef\u8c03\u7528\u5bf9\u8c61\u7684\u5176\u5b83\u5f62\u5f0f</li> </ul> <pre><code>#include &lt;variant&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\nstruct AddVisitor {\nvoid operator() (int&amp; i) const {\nstd::cout &lt;&lt;\"int value:\"&lt;&lt; i &lt;&lt; std::endl;\n}\nvoid operator() (float&amp; f) const {\nstd::cout &lt;&lt; \"float value:\" &lt;&lt; f &lt;&lt; std::endl;\n}\nvoid operator() (std::string&amp; s) const {\nstd::cout &lt;&lt; \"string value:\" &lt;&lt; s &lt;&lt; std::endl;\n}\n};\nint main()\n{\nusing IntFloatString = std::variant&lt;int, float, std::string&gt;;\nIntFloatString v = 100;\nstd::visit(AddVisitor(), v);\n\nv = 200.0f;\nstd::visit(AddVisitor(), v);\n\nv = \"hello world\";\nstd::visit(AddVisitor(), v);\n}\n//\u8f93\u51fa\u7ed3\u679c\n//int value:100\n//float value:200\n//string value:hello world\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B17/%E6%8A%98%E5%8F%A0%E8%A1%A8%E8%BE%BE%E5%BC%8F/","title":"\u6298\u53e0\u8868\u8fbe\u5f0f","text":"<ul> <li>\u529f\u80fd\uff1a\u4ee5\u4e8c\u5143\u8fd0\u7b97\u7b26\u5bf9\u5f62\u53c2\u5305\u8fdb\u884c\u89e3\u5305</li> <li>\u4f7f\u7528\u8303\u56f4\uff1a\u4efb\u4f55\u4e0b\u5217 32 \u4e2a\u4e8c\u5143\u8fd0\u7b97\u7b26\u4e4b\u4e00\uff1a<code>+ - * / % ^ &amp; | = &lt; &gt; &lt;&lt; &gt;&gt; += -= *= /= %= ^= &amp;= |= &lt;&lt;= &gt;&gt;= == != &lt;= &gt;= &amp;&amp; || , .* -&gt;*</code></li> <li>\u5999\u7528\uff1a</li> <li>\u4f7f\u7528\u9017\u53f7\u8fd0\u7b97\u7b26\u5411\u5bb9\u5668\u63d2\u5165\u6570\u636e</li> <li>\u6ce8\u610f\u4e8b\u9879\uff1a\u89e3\u5305\u64cd\u4f5c\u9700\u653e\u5165<code>()</code>\u8fd0\u7b97\u7b26\u4e2d</li> <li>\u793a\u4f8b</li> </ul> <pre><code>//\u4e00\u5143\u5de6\u6298\u53e0 (... op E)\ntemplate&lt;class ...Args&gt;\nbool l_fun(Args...args) {\nreturn (... &amp;&amp; args);\n}\n//\u4e00\u5143\u53f3\u6298\u53e0 (E op ...)\ntemplate&lt;class ...Args&gt;\nbool r_fun(Args...args) {\nreturn (args &amp;&amp; ... );\n}\n//\u4e8c\u5143\u5de6\u6298\u53e0 (E op ... op I) \ntemplate&lt;typename ...Args&gt;\nint l_sum(Args&amp;&amp;... args) {\nreturn ((1 * 2) + ... + args ); // OK\n}\n//\u4e8c\u5143\u53f3\u6298\u53e0 (E op ... op I) \ntemplate&lt;typename ...Args&gt;\nint r_sum(Args&amp;&amp;... args) {\n//    return (args + ... + 1 * 2); // \u9519\u8bef\uff1a\u4f18\u5148\u7ea7\u4f4e\u4e8e\u8f6c\u578b\u7684\u8fd0\u7b97\u7b26\nreturn (args + ... + (1 * 2)); // OK\n}\n\nint main() {\nbool bl= l_fun(false, true, true);//((false&amp;&amp;true)&amp;&amp;true)\nbool br=r_fun(false, true, true);//(false&amp;&amp;(true&amp;&amp;true))\n}\n</code></pre> <ul> <li>\u53c2\u8003\u6587\u6863</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B17/%E7%BB%93%E6%9E%84%E5%8C%96%E7%BB%91%E5%AE%9A/","title":"\u7ed3\u6784\u5316\u7ed1\u5b9a","text":"<ul> <li>\u529f\u80fd\uff1a\u89e3\u6784\u6570\u7ec4\u6216\u5143\u7ec4\u6216\u7ed3\u6784\u5e76\u7ed1\u5b9a\uff0c\u4f5c\u7528\u4e0e<code>std::tie</code>\u7c7b\u4f3c\uff0c\u4f46\u6bd4\u5176\u9002\u7528\u8303\u56f4\u66f4\u5e7f\u3002</li> <li>\u89c4\u5219\uff1a</li> <li>\u6570\u91cf\u76f8\u7b49\uff1a\u6807\u8bc6\u7b26\u6570\u91cf\u7b49\u4e8e\u6570\u7ec4\u6216\u5143\u7ec4\u6216\u7ed3\u6784\u6210\u5458\u5143\u7d20\u6570\u91cf</li> <li>\u7c7b\u975e\u9759\u6001\u6570\u636e\u6210\u5458\u5fc5\u987b\u4e3a\u516c\u7528\uff0c\u53ef\u4ee5\u6709\u9759\u6001\u6210\u5458</li> </ul> <pre><code>class S {\nstatic int i2;\npublic:\nint x1 = 2;\nvolatile double y1;\n};\nint S::i2 = 3;\nS f() { return S(); };\n\nint main()\n{\n//1 \u7ed1\u5b9a\u6570\u7ec4\nint a1[2] = { 1,2 };\nauto [x, y] = a1; // \u521b\u5efa e[2]\uff0c\u590d\u5236 a1 \u5230 e\uff0c\u7136\u540e x \u6307\u4ee3 e[0]\uff0cy \u6307\u4ee3 e[1]\nauto&amp; [xr, yr] = a1; // xr \u6307\u4ee3 a1[0]\uff0cyr \u6307\u4ee3 a1[1]\n\n//2 \u7ed1\u5b9a\u5143\u7ec4\nfloat x2{};\nchar  y2{};\nint   z{};\n\nstd::tuple&lt;float&amp;, char&amp;&amp;, int&gt; tpl(x2, std::move(y2), z);\nconst auto&amp; [a, b, c] = tpl;\n// a \u6307\u540d\u6307\u4ee3 x2 \u7684\u7ed3\u6784\u5316\u7ed1\u5b9a\uff1bdecltype(a) \u4e3a float&amp;\n// b \u6307\u540d\u6307\u4ee3 y2 \u7684\u7ed3\u6784\u5316\u7ed1\u5b9a\uff1bdecltype(b) \u4e3a char&amp;&amp;\n// c \u6307\u540d\u6307\u4ee3 tpl \u7684\u7b2c 3 \u5143\u7d20\u7684\u7ed3\u6784\u5316\u7ed1\u5b9a\uff1bdecltype(c) \u4e3a const int&amp;\n\n//3 \u7ed1\u5b9a\u7ed3\u6784\u6570\u636e\nconst auto [x3, y3] = f(); // x3 \u662f\u6807\u8bc6 2 \u4f4d\u4f4d\u57df\u7684 const int \u5de6\u503c\n// y3 \u662f const volatile double \u5de6\u503c\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/1-Concepts/","title":"concepts \u548c requires","text":"<p>\u8fd92\u4e2a\u5173\u952e\u5b57\u7684\u51fa\u73b0\u53ef\u4ee5\u5f88\u597d\u7684\u9650\u5236\u6a21\u677f\u53c2\u6570\u4e2d\u53c2\u6570\u7c7b\u578b\u3002\u5728\u6b64\u4e4b\u524d\uff0c\u6211\u4eec\u5bf9\u6a21\u677f\u53c2\u6570\u7c7b\u578b\u7684\u9650\u5236\u53ea\u80fd\u5728\u5185\u90e8\u5904\u7406\uff0c\u73b0\u5728\u901a\u8fc7<code>concepts</code> \u548c <code>requires</code>\u53ef\u4ee5\u9650\u5236\u53c2\u6570\uff0c\u5e76\u5728\u7f16\u8bd1\u671f\u5224\u65ad\u6a21\u677f\u53c2\u6570\u662f\u5426\u7b26\u5408\u9650\u5236\u8981\u6c42\u3002</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/1-Concepts/#1-requires","title":"1 requires","text":"<p>requires\u7684\u8bed\u6cd5\u5f62\u5f0f\u4e3b\u89812\u79cd\uff0c\u5206\u522b\u662fRequires clauses\uff08requires \u5b50\u53e5\uff09\u548cRequires expressions\uff08requires \u8868\u8fbe\u5f0f\uff09</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/1-Concepts/#11-requires","title":"1.1 requires \u5b50\u53e5","text":"<ul> <li>\u8bed\u6cd5\u89c4\u5219\uff1a</li> <li>\u521d\u7b49\u8868\u8fbe\u5f0f\uff0c\u4f8b\u5982 <code>Swappable&lt;T&gt;\u3001std::is_integral&lt;T&gt;:: value\u3001( std::is_object_v&lt;Args&gt; &amp;&amp; ...)</code> \u6216\u4efb\u4f55\u5e26\u62ec\u53f7\u8868\u8fbe\u5f0f</li> <li>\u4ee5\u8fd0\u7b97\u7b26 &amp;&amp; \u8054\u7ed3\u7684\u521d\u7b49\u8868\u8fbe\u5f0f\u7684\u5e8f\u5217</li> <li>\u4ee5\u8fd0\u7b97\u7b26 || \u8054\u7ed3\u7684\u524d\u8ff0\u8868\u8fbe\u5f0f\u7684\u5e8f\u5217</li> <li>\u6ce8\u610f\uff1a\u5173\u952e\u8bcd <code>requires</code> \u5fc5\u987b\u540e\u968f\u67d0\u4e2a\u5e38\u91cf\u8868\u8fbe\u5f0f\uff08\u6545\u53ef\u4ee5\u5199\u4e3a requires true\uff09,\u56e0\u6b64\u624d\u80fd\u5b9e\u73b0\u7f16\u8bd1\u671f\u5224\u65ad</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;type_traits&gt;\n#include &lt;iostream&gt;\n\ntemplate&lt;typename T&gt;                                  // (1)\nconcept Integral = std::is_integral&lt;T&gt;::value;       template&lt;typename T&gt;                                  // (2)\nrequires std::is_integral&lt;T&gt;::value\nT gcd(T a, T b){\nif( b == 0 ) return a;\nelse return gcd(b, a % b);\n}\ntemplate&lt;typename T&gt;                                  // (2)\nrequires Integral&lt;T&gt;\nT gcd1(T a, T b){\nif( b == 0 ) return a;\nelse return gcd1(b, a % b);\n}\ntemplate&lt;typename T&gt;                                  // (2)\nT gcd2(T a, T b)requires Integral&lt;T&gt;{\nif( b == 0 ) return a;\nelse return gcd2(b, a % b);\n}\ntemplate&lt;Integral T&gt;                                  // (2)\nT gcd3(T a, T b){\nif( b == 0 ) return a;\nelse return gcd3(b, a % b);\n}\ntemplate&lt;typename T&gt;                                  // (5)\nrequires Integral&lt;T&gt;&amp;&amp;(sizeof(T)==4)\nT gcd4(T a, T b){\nif( b == 0 ) return a;\nelse return gcd4(b, a % b);\n}\nint main(){\n\nstd::cout &lt;&lt; std::endl;\n\nstd::cout &lt;&lt; \"gcd(100, 1)= \"  &lt;&lt;  gcd(100l, 1l)  &lt;&lt; std::endl; std::cout &lt;&lt; \"gcd1(100, 2)= \" &lt;&lt;  gcd1(100, 2)  &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"gcd2(100, 3)= \" &lt;&lt;  gcd1(100, 3)  &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"gcd3(100, 4)= \" &lt;&lt;  gcd1(100, 4)  &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"gcd4(100, 5)= \" &lt;&lt;  gcd4(100, 5)  &lt;&lt; std::endl;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/1-Concepts/#12-requires","title":"1.2 requires \u8868\u8fbe\u5f0f","text":"<ul> <li>\u8bed\u6cd5\u89c4\u5219</li> <li><code>requires ( \u5f62\u53c2\u5217\u8868(\u53ef\u9009) ) { \u8981\u6c42\u5e8f\u5217 }</code></li> <li>\u8981\u6c42\u5e8f\u5217\u5305\u542b4\u79cd\u7c7b\u578b<ul> <li>\u7b80\u5355\u8981\u6c42\uff08simple requirement\uff09</li> <li>\u7c7b\u578b\u8981\u6c42\uff08type requirement\uff09</li> <li>\u590d\u5408\u8981\u6c42\uff08compound requirement\uff09</li> <li>\u5d4c\u5957\u8981\u6c42\uff08nested requirement\uff09</li> </ul> </li> <li>\u6ce8\u610f\uff1a\u56e0\u4e3a\u8981\u6c42\u5e8f\u5217\u4e2d\u7684\u8868\u8fbe\u5f0f\u662f\u4e0d\u6c42\u503c\u7684\uff0c\u53ea\u662f\u68c0\u67e5\u8868\u8fbe\u5f0f\u662f\u5426\u5408\u6cd5\uff0c\u56e0\u6b64\uff0c\u5982</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/1-Concepts/#121","title":"1.2.1 \u7b80\u5355\u8981\u6c42","text":"<ul> <li>\u89c4\u5219\uff1a\u8981\u6c42\u5e8f\u5217\u662f\u4e0d\u542b<code>requires</code>\u5173\u952e\u5b57\u7684\u8868\u8fbe\u5f0f\u8bed\u53e5\uff0c\u5982\u8868\u8fbe\u5f0f\u662f<code>a+b;</code>\uff0c\u800c\u4e0d\u80fd\u662f<code>requires (a+b);</code>.</li> <li>\u6ce8\u610f\uff1a\u5b83\u65ad\u8a00\u8be5\u8868\u8fbe\u5f0f\u5408\u6cd5\u3002\u8be5\u8868\u8fbe\u5f0f\u662f\u4e0d\u6c42\u503c\u64cd\u4f5c\u6570\uff1b\u53ea\u68c0\u67e5\u8bed\u8a00\u6b63\u786e\u6027\u3002\u800c\u4e14\u8868\u8fbe\u5f0f\u53ef\u4ee5\u6709\u591a\u4e2a\uff0c\u4e4b\u95f4\u7528\u5206\u53f7<code>;</code>\u9694\u5f00\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code>template&lt;typename T&gt;\nconcept Addable =\nrequires (T a, T b) {\na + b; // \u201c\u8868\u8fbe\u5f0f a + b \u662f\u53ef\u7f16\u8bd1\u7684\u5408\u6cd5\u8868\u8fbe\u5f0f\u201d\n};\n\ntemplate &lt;class T, class U = T&gt;\nconcept Swappable = requires(T&amp;&amp; t, U&amp;&amp; u) {\nswap(std::forward&lt;T&gt;(t), std::forward&lt;U&gt;(u));\nswap(std::forward&lt;U&gt;(u), std::forward&lt;T&gt;(t));\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/1-Concepts/#122","title":"1.2.2 \u7c7b\u578b\u8981\u6c42","text":"<ul> <li>\u89c4\u5219\uff1a\u8981\u6c42<code>typename</code>\u5173\u952e\u5b57\u540e\u63a5\u7c7b\u578b\u540d\uff0c\u7528\u6765\u5224\u65ad\u6307\u5b9a\u7c7b\u578b\u540d\u662f\u5426\u5408\u6cd5</li> </ul> <pre><code>#include &lt;type_traits&gt;\n#include &lt;vector&gt;\n\nint main(){\nstatic_assert( requires(std::vector&lt;int&gt; v){  typename std::vector&lt;int&gt;::value_type;   //Type Requirement\n}  );\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/1-Concepts/#123","title":"1.2.3 \u590d\u5408\u8981\u6c42","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>{ \u8868\u8fbe\u5f0f } noexcept(\u53ef\u9009) -&gt;\u8fd4\u56de\u7c7b\u578b\u8981\u6c42(\u53ef\u9009) ;</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>template&lt;typename T&gt; concept C2 =\nrequires(T x) {\n{*x} -&gt; std::convertible_to&lt;typename T::inner&gt;; // \u8868\u8fbe\u5f0f *x \u5fc5\u987b\u5408\u6cd5\n// \u5e76\u4e14 \u7c7b\u578b T::inner \u5fc5\u987b\u5408\u6cd5\n// \u5e76\u4e14 *x \u7684\u7ed3\u679c\u5fc5\u987b\u53ef\u4ee5\u8f6c\u6362\u4e3a T::inner\n{x + 1} -&gt; std::same_as&lt;int&gt;; // \u8868\u8fbe\u5f0f x + 1 \u5fc5\u987b\u5408\u6cd5\n// \u5e76\u4e14 std::Same&lt;decltype((x + 1)), int&gt; \u5fc5\u987b\u88ab\u6ee1\u8db3\n// \u4ea6\u5373\uff0c(x + 1) \u5fc5\u987b\u4e3a int \u7c7b\u578b\u7684\u7eaf\u53f3\u503c\n{x * 1} -&gt; std::convertible_to&lt;T&gt;; // \u8868\u8fbe\u5f0f x * 1 \u5fc5\u987b\u5408\u6cd5\n// \u5e76\u4e14\u5176\u7ed3\u679c\u5fc5\u987b\u53ef\u4ee5\u8f6c\u6362\u4e3a T\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/1-Concepts/#124","title":"1.2.4 \u5d4c\u5957\u8981\u6c42","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>requires \u7ea6\u675f\u8868\u8fbe\u5f0f ;</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;type_traits&gt;\n#include &lt;vector&gt;\n\nint main(){\nstatic_assert( requires(std::vector&lt;int&gt; v, int i){  v.at(i);  //Simple Requirement\ntypename std::vector&lt;int&gt;::value_type;   //Type Requirement\n(sizeof(int)==5);  //\u8fd9\u4e2a\u7ed3\u679c\u662ffalse\uff0c\u8868\u8fbe\u5f0f\u5408\u6cd5\uff0c\u4f9d\u7136\u68c0\u67e5\u901a\u8fc7\nrequires (sizeof(int)==5);  //\u5d4c\u5957\u8981\u6c42\uff0c\u8fd9\u4e2a\u7ed3\u679c\u4e3afalse\uff0c\u7ea6\u675f\u4e0d\u80fd\u901a\u8fc7\n}  );\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/1-Concepts/#2-concepts","title":"2 concepts","text":"<p><code>concepts</code>\u662f\u7ea6\u675f\u7684\u96c6\u5408\uff0c\u6982\u5ff5\u67092\u79cd\u5f62\u5f0f\uff0c\u4ee5\u51fd\u6570\u6a21\u677f\u5b9a\u4e49\uff08\u79f0\u4e3a\u51fd\u6570\u6982\u5ff5\uff09\uff0c\u4ee5\u53d8\u91cf\u6a21\u677f\u5b9a\u4e49\uff08\u79f0\u4e3a\u53d8\u91cf\u6982\u5ff5\uff09\u3002</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/1-Concepts/#21","title":"2.1 \u53d8\u91cf\u6982\u5ff5","text":"<ul> <li>\u8bed\u6cd5:<code>template &lt; \u6a21\u677f\u5f62\u53c2\u5217\u8868 &gt; concept \u6982\u5ff5\u540d = \u7ea6\u675f\u8868\u8fbe\u5f0f;</code></li> <li>\u89c4\u5219\uff1a</li> <li>\u7ea6\u675f\u8868\u8fbe\u5f0f\u53ef\u4ee5<code>requires</code></li> <li>\u5fc5\u987b\u6709\u7c7b\u578b bool</li> <li>\u4e0d\u5141\u8bb8 constexpr \uff0c\u53d8\u91cf\u81ea\u52a8\u4e3a constexpr</li> <li>\u793a\u4f8b</li> </ul> <pre><code>// \u6765\u81ea\u6807\u51c6\uff08\u8303\u56f4 TS \uff09\u7684\u53d8\u91cf\u6982\u5ff5\ntemplate &lt;class T, class U&gt;\nconcept bool Derived = std::is_base_of&lt;U, T&gt;::value//\u6ee1\u8db3\u6982\u5ff5\u5e93\u4e2d\u5b9a\u4e49\u7684T\u662fU\u7684\u57fa\u7c7b\n&amp;&amp;requires(T t){++t;}//t\u6ee1\u8db3++\u8fd0\u7b97\n||(sizeof(T)&gt;4); //T\u7c7b\u578b\u5927\u5c0f\u5927\u4e8e4\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/1-Concepts/#22","title":"2.2 \u51fd\u6570\u6982\u5ff5","text":"<ul> <li>\u89c4\u5219</li> <li>\u4e0d\u5141\u8bb8 inline \u4e0e constexpr \uff0c\u51fd\u6570\u81ea\u52a8\u4e3a inline \u4e0e constexpr</li> <li>\u4e0d\u5141\u8bb8 friend \u4e0e virtual</li> <li>\u4e0d\u5141\u8bb8\u5f02\u5e38\u89c4\u5b9a\uff0c\u51fd\u6570\u81ea\u52a8\u4e3a noexcept(true) \u3002</li> <li>\u4e0d\u80fd\u58f0\u660e\u5e76\u5ef6\u8fdf\u5b9a\u4e49\uff0c\u4e0d\u80fd\u91cd\u58f0\u660e</li> <li>\u8fd4\u56de\u7c7b\u578b\u5fc5\u987b\u662f bool</li> <li>\u4e0d\u5141\u8bb8\u8fd4\u56de\u7c7b\u578b\u63a8\u5bfc</li> <li>\u53c2\u6570\u5217\u8868\u5fc5\u987b\u4e3a\u7a7a</li> <li>\u51fd\u6570\u4f53\u5fc5\u987b\u4ec5\u7531\u4e00\u6761 return \u8bed\u53e5\u7ec4\u6210\uff0c\u5176\u53c2\u6570\u5fc5\u987b\u662f\u4e00\u6761\u5236\u7ea6\u8868\u8fbe\u5f0f\uff08\u8c13\u8bcd\u5236\u7ea6\u3001\u5176\u4ed6\u5236\u7ea6\u7684</li> <li>\u5408\u53d6/\u6790\u53d6\u6216 requires \u8868\u8fbe\u5f0f\uff0c\u89c1\u540e\u8ff0\uff09</li> </ul> <pre><code>// \u6765\u81ea\u6807\u51c6\uff08\u8303\u56f4 TS \uff09\u7684\u51fd\u6570\u6982\u5ff5\ntemplate &lt;class T&gt;\nconcept bool EqualityComparable() { return requires(T a, T b) { {a == b} -&gt; Boolean; {a != b} -&gt; Boolean; };\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/1-Concepts/#23","title":"2.3 \u4f7f\u7528\u6982\u5ff5","text":"<p>\u6709\u4e09\u79cd\u4f7f\u7528\u6982\u5ff5\u7684\u65b9\u5f0f</p> <pre><code>//Requires Clause\ntemplate&lt;typename Cont&gt;\nrequires Sortable&lt;Cont&gt;\nvoid sort(Cont&amp; container);\n//Trailing Requires Clause\ntemplate&lt;typename Cont&gt;\nvoid sort(Cont&amp; container) requires Sortable&lt;Cont&gt;;\n//Constrained Template Parameters\ntemplate&lt;Sortable Cont&gt;\nvoid sort(Cont&amp; container);\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/2-Ranges%EF%BC%88%E8%8C%83%E5%9B%B4%EF%BC%89/","title":"Ranges\uff08\u8303\u56f4\uff09","text":"<ul> <li>The Ranges Library in C++20</li> </ul> <pre><code>title: C++20ranges \u6709 3 \u4e2a\u7279\u70b9\n1. **Direct on the Container\uff08\u76f4\u63a5\u64cd\u4f5c\u5bb9\u5668 \uff09** \n2. **Lazy Evaluation\uff08\u60f0\u6027\u8ba1\u7b97\uff09**\n3. **Function Composition (\u51fd\u6570\u7ec4\u5408)**\uff08\u91cd\u8f7d`|`,\u4ee5\u7ba1\u9053\u65b9\u5f0f\u8fde\u63a5\u8303\u56f4\u5e93\u76f8\u5173\u51fd\u6570\uff09\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/2-Ranges%EF%BC%88%E8%8C%83%E5%9B%B4%EF%BC%89/#1-direct-on-the-container","title":"1 Direct on the Container","text":"<p>The classical algorithms of the Standard Template Library (STL) are sometimes a little inconvenient. They need a begin and an end iterator. This is often more than you want to write.</p> <pre><code>// sortClassical.cpp\n#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\nint main()  {\nstd::vector&lt;int&gt; myVec{-3, 5, 0, 7, -4};\nstd::sort(myVec.begin(), myVec.end());     // (1)\nfor (auto v: myVec) std::cout &lt;&lt; v &lt;&lt; \" \"; // -4, -3, 0, 5, 7\n}\n</code></pre> <p>Wouldn't it be nice if <code>std::sort</code> (line 1) could be executed on the entire container? Thanks to the ranges library, this is possible in C++20.</p> <pre><code>// sortRanges.cpp\n#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\nint main()  {\nstd::vector&lt;int&gt; myVec{-3, 5, 0, 7, -4};\nstd::ranges::sort(myVec);                  // (1)\nfor (auto v: myVec) std::cout &lt;&lt; v &lt;&lt; \" \"; // -4, -3, 0, 5, 7\n}\n</code></pre> <p><code>std::ranges::sort</code> (line 1) operates directly on the container.</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/2-Ranges%EF%BC%88%E8%8C%83%E5%9B%B4%EF%BC%89/#2-lazy-evaluation","title":"2 Lazy Evaluation","text":"<p><code>std::views::iota</code> is a range factory for creating a sequence of elements by successively incrementing an initial value. This sequence can be finite or infinite. The elements of the range factory are only created when needed.</p> <pre><code>// lazyRanges.cpp\n#include &lt;iostream&gt;\n#include &lt;ranges&gt;\nint main() {\nstd::cout &lt;&lt; \"\\n\";\nfor (int i: std::views::iota(1'000'000, 1'000'010)) {     // (1)\nstd::cout &lt;&lt; i &lt;&lt; \" \";  }\nstd::cout &lt;&lt; \"\\n\\n\";\n\nfor (int i: std::views::iota(1'000'000)                   // (2)\n| std::views::take(10)) {\nstd::cout &lt;&lt; i &lt;&lt; \" \";  }\nstd::cout &lt;&lt; \"\\n\\n\";\nfor (int i: std::views::iota(1'000'000)                  // (3)\n| std::views::take_while([](auto i) { return i &lt; 1'000'010; } )) {\nstd::cout &lt;&lt; i &lt;&lt; \" \";  }\nstd::cout &lt;&lt; \"\\n\\n\";\n}\n</code></pre> <p>The small program shows the difference between creating a finite data stream (line 1), and an infinite data stream (lines 2, and 3). When you create an infinite data stream, you need a boundary condition. Line (2) uses the view <code>std::views::take(10)</code>, and line 3 the view <code>std::views::take_while</code>.<code>std::views::take_while</code> requires a predicate. This is an ideal fit for a lambda expression: <code>[](auto i) { return i &lt; 1'000'010; }.</code>Since C++14, you can use single quotes as separators in integer literals: <code>1'000'010.</code> All three <code>std::views::ranges</code> calls produce the same numbers.  I already used the pipe operator (<code>|</code>) in this example for function composition. Let's go one step further.</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/2-Ranges%EF%BC%88%E8%8C%83%E5%9B%B4%EF%BC%89/#3-function-composition","title":"3 Function Composition","text":"<p>The following program <code>primesLazy.cpp</code> creates the first ten prime numbers starting with one million.</p> <pre><code>// primesLazy.cpp\n#include &lt;iostream&gt;\n#include &lt;ranges&gt;\nbool isPrime(int i) {\nfor (int j=2; j*j &lt;= i; ++j){\nif (i % j == 0) return false;\n}\nreturn true;\n}\nint main() { std::cout &lt;&lt; '\\n';\n\nauto odd = [](int i){ return i % 2 == 1; };\nfor (int i: std::views::iota(1'000'000) | std::views::filter(odd) | std::views::filter(isPrime) | std::views::take(10)) {\nstd::cout &lt;&lt; i &lt;&lt; \" \";  }\nstd::cout &lt;&lt; '\\n';\n}\n</code></pre> <p>You have to read the function composition from left to right: I create an infinite data stream starting with 1'000'000 (<code>std::views::iota(1'000'000)</code>) and apply two filters. Each filter needs a predicate. The first filter let the odd element pass (<code>std::views::filter(odd)</code>), and the second filter let the prime numbers pass (<code>std::views::filter(isPrime)</code>). To end the infinite data stream, I stop after 10 numbers (<code>std::views::take(10)</code>). Finally, here are the first ten prime numbers starting with one million.  You may ask: Who starts the processing of this data pipeline? Now, it goes from right to left. The data sink (<code>std::views::take(10)</code>) want to have the next value and ask, therefore, its predecessor. This request goes on until the range-based for-loop as the data source can produce one number. This was my short recap. When you want to read more about the ranges library, read my previous posts: - The Ranges Library - Functional Pattern with the Ranges Library - Pythonic with the Ranges Library - Pythons range Function, the Second - Pythons map Function Now, it's time to write about something new.</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/2-Ranges%EF%BC%88%E8%8C%83%E5%9B%B4%EF%BC%89/#4-std-algorithms-versus-stdranges-algorithms","title":"4 <code>std</code> Algorithms versus <code>std::ranges</code> Algorithms","text":"<p>The algorithms of the algorithm library and the memory libray have ranges pendants. They start with the namespace <code>std::ranges</code>. The numeric library does not have a ranges pendant. Now, you may have the question: Should I use the classical <code>std</code> algorithm or the new <code>std::ranges</code> algorithm. Let me start with a comparison of the classical <code>std::sort</code> and the new <code>std::ranges::sort.</code> First, here are the various overloads of <code>std::sort</code> and <code>std::ranges::sort</code>.</p> <pre><code>template&lt; class RandomIt &gt;\nconstexpr void sort( RandomIt first, RandomIt last );\ntemplate&lt; class ExecutionPolicy, class RandomIt &gt;\nvoid sort( ExecutionPolicy&amp;&amp; policy,\nRandomIt first, RandomIt last );\ntemplate&lt; class RandomIt, class Compare &gt;\nconstexpr void sort( RandomIt first, RandomIt last, Compare comp );\ntemplate&lt; class ExecutionPolicy, class RandomIt, class Compare &gt;\nvoid sort( ExecutionPolicy&amp;&amp; policy,\nRandomIt first, RandomIt last, Compare comp );\n</code></pre> <p><code>std::sort</code> has four overloads in C++20. Let's see what I can deduce from the names of the function declarations. All four overloads take a range, given by a begin and end iterator. The iterators must be a random access iterators. The first and third overloads are declared as <code>constexpr</code> and can, therefore, run at compile time. The second and fourth overload require an [execution policy](https://www.modernescpp.com/(https:/www.modernescpp.com/index.php/parallel-algorithms-of-the-stl-with-gcc). The execution policy lets you specify if the program should run sequential, parallel, or vectorized.</p> <p>Additionally, the last two overloads lines 8 and 11 let you specify the sorting strategy. <code>Compare</code> has to be a binary predicate. A binary predicate is a callable that takes two arguments and returns something convertible to a <code>bool</code>. </p> <p>I assume my analysis reminded you of concepts. But there is a big difference. The names in the <code>std::sort</code> do not stand for concepts but only for documentation purposes. In <code>std::ranges::sort</code> the names are concepts.</p> <pre><code>template &lt;std::random_access_iterator I, std::sentinel_for&lt;I&gt; S,\nclass Comp = ranges::less, class Proj = std::identity&gt;\nrequires std::sortable&lt;I, Comp, Proj&gt;\nconstexpr I sort(I first, S last, Comp comp = {}, Proj proj = {});\ntemplate &lt;ranges::random_access_range R, class Comp = ranges::less, class Proj = std::identity&gt;\nrequires std::sortable&lt;ranges::iterator_t&lt;R&gt;, Comp, Proj&gt;\nconstexpr ranges::borrowed_iterator_t&lt;R&gt; sort(R&amp;&amp; r, Comp comp = {}, Proj proj = {});\n</code></pre> <p>When you study the two overloads, you notice that it takes a sortable range <code>R</code> (lines 2 and 4), either given by a begin iterator and end sentinel (line 1) or by a <code>ranges::random_access_range</code> (line 3). The iterator and the range must support random access. Additionally, the overloads take a predicate Comp, and a projection <code>Proj</code>. The predicate <code>Comp</code> uses by default ranges::less, and the projection <code>Proj</code> the identity std::identity. A projection is a mapping of a set into a subset. In C++20, <code>std::ranges::sort</code> does not support execution policies.</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/3-Coroutines%EF%BC%88%E5%8D%8F%E7%A8%8B%EF%BC%89/","title":"Coroutines\uff08\u534f\u7a0b\uff09","text":"<pre><code>title: gcc\u652f\u6301\u60c5\u51b5\uff1f\ngcc 10 \u652f\u6301\u534f\u7a0b\uff0c\u9700\u8981\u6dfb\u52a0\u9009\u9879 -fcoroutines\u6253\u5f00\uff0c\u9ed8\u8ba4\u4e0d\u542f\u7528\u3002\n</code></pre> <pre><code>title: C++20 \u534f\u7a0b\u7279\u70b9?\n\u534f\u7a0b\u662f**\u65e0\u6808\u7684**\uff0c\u5b83\u4eec\u901a\u8fc7\u8fd4\u56de\u5230\u8c03\u7528\u65b9\u6682\u505c\u6267\u884c\uff0c\u5e76\u4e14\u6062\u590d\u6267\u884c\u6240\u9700\u7684\u6570\u636e\u4e0e\u6808\u5206\u79bb\u5b58\u50a8\u3002\u8fd9\u6837\u5c31\u53ef\u4ee5\u7f16\u5199\u5f02\u6b65\u6267\u884c\u7684\u987a\u5e8f\u4ee3\u7801\uff08\u4f8b\u5982\u4e0d\u4f7f\u7528\u663e\u5f0f\u7684\u56de\u8c03\u6765\u5904\u7406\u975e\u963b\u585e I/O\uff09\uff0c\u8fd8\u652f\u6301\u4f5c\u7528\u4e8e\u60f0\u6027\u8ba1\u7b97\u7684\u65e0\u9650\u5e8f\u5217\u4e0a\u7684\u7b97\u6cd5\u53ca\u5176\u4ed6\u7528\u9014\u3002\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/3-Coroutines%EF%BC%88%E5%8D%8F%E7%A8%8B%EF%BC%89/#1","title":"1 \u4ec0\u4e48\u662f\u534f\u7a0b\uff1f","text":"<p>\u534f\u7a0b\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u5b83\u662f\u80fd\u6682\u505c\uff08suspend\uff09\u6267\u884c\u4ee5\u5728\u4e4b\u540e\u6062\u590d\uff08resume\uff09\u7684\u51fd\u6570\u3002</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/3-Coroutines%EF%BC%88%E5%8D%8F%E7%A8%8B%EF%BC%89/#2","title":"2 \u534f\u7a0b\u4e0e\u8fdb\u7a0b\u3001\u7ebf\u7a0b\u7684\u6bd4\u8f83","text":"<ol> <li>\u534f\u7a0b\u65e2\u4e0d\u662f\u8fdb\u7a0b\uff0c\u4e5f\u4e0d\u662f\u7ebf\u7a0b\uff0c\u534f\u7a0b\u4ec5\u4ec5\u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u51fd\u6570\uff0c\u534f\u7a0b\u8ddf\u4ed6\u4eec\u5c31\u4e0d\u662f\u4e00\u4e2a\u7ef4\u5ea6\u3002</li> <li>\u4e00\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u7ebf\u7a0b\uff0c\u4e00\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u534f\u7a0b\u3002</li> <li>\u4e00\u4e2a\u7ebf\u7a0b\u5185\u7684\u591a\u4e2a\u534f\u7a0b\u867d\u7136\u53ef\u4ee5\u5207\u6362\uff0c\u4f46\u662f\u8fd9\u591a\u4e2a\u534f\u7a0b\u662f\u4e32\u884c\u6267\u884c\u7684\uff0c\u53ea\u80fd\u5728\u8fd9\u4e00\u4e2a\u7ebf\u7a0b\u5185\u8fd0\u884c\uff0c\u6ca1\u6cd5\u5229\u7528CPU\u591a\u6838\u80fd\u529b\u3002</li> <li>\u534f\u7a0b\u4e0e\u8fdb\u7a0b\u4e00\u6837\uff0c\u5b83\u4eec\u7684\u5207\u6362\u90fd\u5b58\u5728\u4e0a\u4e0b\u6587\u5207\u6362\u95ee\u9898\u3002\uff08\u534f\u7a0b\u7684\u5207\u6362\u662f\u5728\u7528\u6237\u6001\u7684\uff0c\u4e0d\u4f1a\u9677\u5165\u5185\u6838\uff09</li> </ol>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/3-Coroutines%EF%BC%88%E5%8D%8F%E7%A8%8B%EF%BC%89/#3","title":"3 \u534f\u7a0b\u7684\u4f7f\u7528\u573a\u666f","text":"<pre><code>\u534f\u7a0b**\u4e0d\u9002\u5408\u8ba1\u7b97\u5bc6\u96c6\u578b**\u7684\u573a\u666f,\u56e0\u4e3a*\u5355\u4e2a\u7ebf\u7a0b\u5185\u7684\u534f\u7a0b\u662f\u4e32\u884c\u7684\uff0c\u5e76\u4e0d\u80fd\u5229\u7528\u591a\u6838\u80fd\u529b*\u3002\n</code></pre> <ol> <li>I/O \u963b\u585e\u578b\u573a\u666f\uff08\u5305\u62ec\u7f51\u7edc\u4f20\u8f93\u3001\u6587\u4ef6\u8bfb\u5199\uff09\uff0c\u5f53 I/O \u963b\u585e\u65f6\u5207\u6362\u5230\u53e6\u4e00\u4e2a\u534f\u7a0b\u4e0a\u6267\u884c\u3002I/O \u5bc6\u96c6\u578b\u9700\u8981\u591a\u7ebf\u7a0b+\u534f\u7a0b\u6a21\u5f0f\u3002</li> </ol>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/3-Coroutines%EF%BC%88%E5%8D%8F%E7%A8%8B%EF%BC%89/#4-libco-io","title":"4 libco IO \u5de5\u4f5c\u6d41\u7a0b","text":"<ul> <li>libco \u5de5\u4f5c\u6d41\u7a0b</li> <li>\u5c06\u963b\u585e\u64cd\u4f5c\u6539\u53d8\u4e3a\u975e\u963b\u585e\uff0csql \u547d\u4ee4\u5f80\u6570\u636e\u5e93\u53d1\u9001\uff0c\u5176\u5b9e\u5c31\u662f\u5f80\u4e00\u4e2a fd \u4e0a\u5199\u6570\u636e\u3002</li> <li>\u6570\u636e\u53d1\u51fa\u53bb\u540e\u975e\u963b\u585e\u64cd\u4f5c\u9a6c\u4e0a\u8fd4\u56de\u3002\u7136\u540e\u5c06\u8fd9\u4e2a fd \u6302\u5728 epoll \u4e0a\uff08\u5f53\u53d1\u51fa\u53bb\u7684\u547d\u4ee4\u8fd4\u56de\u6216\u8005\u8d85\u65f6\uff0cepoll_wait \u4f1a\u8fd4\u56de\u901a\u77e5\u7684\uff09\u3002</li> <li>\u4fdd\u5b58\u5f53\u524d\uff08\u534f\u7a0b\uff09\u7a0b\u5e8f\u8fd0\u884c\u65f6\u7684\u4e0a\u4e0b\u6587\uff0c\u8fd9\u6837\u5c31\u76f8\u5f53\u4e8e yield \u5207\u8d70\u4e86\u5f53\u524d\uff08\u534f\u7a0b\uff09\u7a0b\u5e8f A\u3002</li> <li>\u7136\u540e\u52a0\u8f7d\u5176\u5b83\u7b49\u5f85\u6267\u884c\u7684\uff08\u534f\u7a0b\uff09\u7a0b\u5e8f B \u7684\u4e0a\u4e0b\u6587\uff0c\u8fd4\u56de\u4e0a\u4e00\u6b21 B \u6267\u884c\u6e90\u7801\u7684\u4e0b\u4e00\u6761\u6e90\u7801\u5730\u5740\u53bb\u8fd0\u884c\uff0c\u8fd9\u6837 A \u5728\u7b49\u5f85 sql \u7ed3\u679c\u8fd4\u56de\u7684\u8fc7\u7a0b\u4e2d\uff0c\u88ab\u5524\u9192\u7684 B \u4ecd\u7136\u80fd\u7ee7\u7eed\u5de5\u4f5c\uff0cB \u5982\u679c\u9047\u5230\u963b\u585e IO \u4e5f\u540c\u6837\u6267\u884c\u4e0a\u8ff0\u6b65\u9aa4\u3002</li> <li>sql \u547d\u4ee4\u8fd4\u56de\u7ed3\u679c\uff0cepoll_wait \u6536\u5230\u901a\u77e5\u8fd4\u56de\uff0cresume \u5524\u9192 fd \u5bf9\u5e94\u7684 A\uff08\u534f\u7a0b\uff09\u7a0b\u5e8f\u3002</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/3-Coroutines%EF%BC%88%E5%8D%8F%E7%A8%8B%EF%BC%89/#5-c20","title":"5 C++20 \u534f\u7a0b\u7f16\u5199","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/3-Coroutines%EF%BC%88%E5%8D%8F%E7%A8%8B%EF%BC%89/#51","title":"5.1 \u4e2a\u5173\u952e\u5b57","text":"<p>\u5982\u679c\u51fd\u6570\u7684\u5b9a\u4e49\u8fdb\u884c\u4e86\u4e0b\u5217\u64cd\u4f5c\u4e4b\u4e00\uff0c\u90a3\u4e48\u5b83\u662f\u534f\u7a0b\uff1a</p> <ul> <li>\u7528 <code>co_await</code> \u8fd0\u7b97\u7b26\u6682\u505c\u6267\u884c\uff0c\u76f4\u5230\u6062\u590d\uff1a</li> </ul> <pre><code>task&lt;&gt; tcp_echo_server() {\nchar data[1024];\nwhile (true) {\nstd::size_t n = co_await socket.async_read_some(buffer(data));\nco_await async_write(socket, buffer(data, n));\n}\n}\n</code></pre> <ul> <li>\u7528\u5173\u952e\u8bcd <code>co_yield</code> \u6682\u505c\u6267\u884c\u5e76\u8fd4\u56de\u4e00\u4e2a\u503c\uff1a</li> </ul> <pre><code>generator&lt;int&gt; iota(int n = 0) {\nwhile(true)\nco_yield n++;\n}\n</code></pre> <ul> <li>\u7528\u5173\u952e\u8bcd <code>co_return</code> \u5b8c\u6210\u6267\u884c\u5e76\u8fd4\u56de\u4e00\u4e2a\u503c\uff1a</li> </ul> <pre><code>lazy&lt;int&gt; f() {\nco_return 7;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/4-Modules/","title":"Modules","text":"<pre><code>title: gcc\u652f\u6301\u60c5\u51b5\uff1f\ngcc 11 \u652f\u6301\u5927\u90e8\u5206\u63d0\u6848\u3002\u9700\u8981\u7f16\u8bd1\u9009\u9879`-fmodules-ts`\n</code></pre> <ul> <li>cppreference\u6a21\u5757</li> <li>\u7f16\u8bd1\u53c2\u8003</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/char8_t/","title":"char8_t","text":"<ul> <li><code>char8_t</code>\u662f\u8868\u793autf-8\u7f16\u7801\u7684\u5b57\u7b26\uff0c\u662f\u4e00\u79cd\u5168\u65b0\u7684\u7c7b\u578b\uff0c\u5b58\u50a8\u5982\u540c<code>unsigned char</code>\u7c7b\u578b\uff0c\u4f46\u548c<code>unsigned char</code>\u4e0d\u662f\u540c\u4e00\u4e2a\u7c7b\u578b\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code>int main()\n{\n// char8_t\u548cunsigned char\u4e0d\u662f\u540c\u4e00\u79cd\u7c7b\u578b\nconstexpr bool b=std::is_same_v&lt;unsigned char, char8_t&gt;;//false\n// \u5728c++20\u540eu8\u524d\u7f00\u5b57\u7b26\u6307\u7684\u7684chart8_t\u7c7b\u578b\nconst char8_t *str_u8=u8\"hello world!\";\n// \u5728c++20\u524d\u4f7f\u7528\u6210\u529f\uff0c\u4f46\u5728c++20\u91cc\u9762\u9519\u8bef\nconst char *str=u8\"hello world!\";//error,invalid conversion from 'const char8_t*' to 'const char*'\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/char8_t/#1-char8_t","title":"1 \u4e3a\u4ec0\u4e48\u8981\u53c8char8_t\u7c7b\u578b","text":"<ul> <li>\u53c2\u8003</li> <li>char8_t\u662funsigned char\u7684\uff0c\u800cchar\u662f\u5426\u6709\u7b26\u53f7\u662f\u7531\u5e73\u53f0\u548c\u7f16\u8bd1\u5668\u51b3\u5b9a\u7684\u3002\uff08 ARM and PowerPC are typically unsigned, the defaults for x86 and x64 are typically signed\uff09</li> <li>char8_t\u662futf-8\u7f16\u7801\uff0c\u800cchar\u662f\u4ec0\u4e48\u7f16\u7801\u662f\u6ca1\u6709\u660e\u786e\u5224\u5b9a\u4f9d\u636e\u7684\u3002</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/constexpr%20consteval%20constinit/","title":"constexp\u3001consteval\u3001constinit","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/constexpr%20consteval%20constinit/#1-constexpr","title":"1 constexpr","text":"<ul> <li><code>constexpr</code>\u8bf4\u660e\u7b26\u58f0\u660e\u53ef\u4ee5\u5728\u7f16\u8bd1\u65f6\u6216\u5728\u8fd0\u884c\u65f6\u6c42\u5f97\u51fd\u6570\u6216\u53d8\u91cf\u7684\u503c</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;stdexcept&gt;\n\n// C++11 constexpr \u51fd\u6570\u4f7f\u7528\u9012\u5f52\u800c\u975e\u8fed\u4ee3\n// \uff08C++14 constexpr \u51fd\u6570\u53ef\u4f7f\u7528\u5c40\u90e8\u53d8\u91cf\u548c\u5faa\u73af\uff09\nconstexpr int factorial(int n)\n{\nreturn n &lt;= 1 ? 1 : (n * factorial(n - 1));\n}\n// \u8f93\u51fa\u8981\u6c42\u7f16\u8bd1\u65f6\u5e38\u91cf\u7684\u51fd\u6570\uff0c\u7528\u4e8e\u6d4b\u8bd5\ntemplate&lt;int n&gt;\nstruct constN\n{\nconstN() { std::cout &lt;&lt; n &lt;&lt; '\\n'; }\n};\n\nint main()\n{\nstd::cout &lt;&lt; \"4! = \";\nconstN&lt;factorial(4)&gt; out1; // \u5728\u7f16\u8bd1\u65f6\u8ba1\u7b97\n\nvolatile int k = 8; // \u4e0d\u5141\u8bb8\u4f7f\u7528 volatile \u505a\u4f18\u5316\nstd::cout &lt;&lt; k &lt;&lt; \"! = \" &lt;&lt; factorial(k) &lt;&lt; '\\n'; // \u8fd0\u884c\u65f6\u8ba1\u7b97\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/constexpr%20consteval%20constinit/#2-consteval","title":"2 consteval","text":"<ul> <li><code>consteval</code>\u8bf4\u660e\u7b26\u58f0\u660e\u51fd\u6570\u6216\u51fd\u6570\u6a21\u677f\u4e3a\u7acb\u5373\u51fd\u6570\uff0c\u5373\u8be5\u51fd\u6570\u7684\u6bcf\u6b21\u6f5c\u5728\u6c42\u503c\u7684\u8c03\u7528\uff08\u5373\u4e0d\u6c42\u503c\u8bed\u5883\u5916\u7684\u8c03\u7528\uff09\u5fc5\u987b\uff08\u76f4\u63a5\u6216\u95f4\u63a5\uff09\u4ea7\u751f\u7f16\u8bd1\u65f6\u5e38\u91cf\u8868\u8fbe\u5f0f</li> <li>\u793a\u4f8b</li> </ul> <pre><code>consteval int sqr(int n) {\nreturn n * n;\n}\nconstexpr int r = sqr(100);  // OK\n\nint x = 100;\n//int r2 = sqr(x);  // \u9519\u8bef\uff1a\u8c03\u7528\u4e0d\u4ea7\u751f\u5e38\u91cf\n\nconsteval int sqrsqr(int n) {\nreturn sqr(sqr(n)); // \u5728\u6b64\u70b9\u975e\u5e38\u91cf\u8868\u8fbe\u5f0f\uff0c\u4f46\u662f OK\n}\n\n//constexpr int dblsqr(int n) {\n//  return 2 * sqr(n); // \u9519\u8bef\uff1a\u5916\u56f4\u51fd\u6570\u5e76\u975e consteval \u4e14 sqr(n) \u4e0d\u662f\u5e38\u91cf\n//}\nint main()\n{\nconstexpr auto val=sqrsqr(2);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/constexpr%20consteval%20constinit/#3-constinit","title":"3 constinit","text":"<ul> <li>\u529f\u80fd\uff1aconstinit \u8bf4\u660e\u7b26\u58f0\u660e\u62e5\u6709\u9759\u6001\u6216\u7ebf\u7a0b\u5b58\u50a8\u671f,\u5728\u7f16\u8bd1\u671f\u521d\u59cb\u5316\uff08\u5373\u521d\u59cb\u5316\u65f6\u9700\u8981\u5e38\u91cf\uff09\uff0c\u4f46\u53ef\u5728\u8fd0\u884c\u671f\u6539\u53d8\u3002</li> <li>\u89c4\u5219\uff1a</li> <li>\u89c4\u52191\uff1a\u53ea\u80fd\u4fee\u9970\u9759\u6001\u6216\u7ebf\u7a0b\u5b58\u50a8\u671f\u53d8\u91cf\uff0c\u4e0d\u80fd\u7528\u5728\u5176\u5b83\u53d8\u91cf\u4e0a\uff0c\u5982\u5c40\u90e8\u53d8\u91cf</li> <li>\u793a\u4f8b1</li> </ul> <pre><code>#include &lt;iostream&gt;\nconstinit int constinitVal = 1000;\nint main() {\nstatic constinit int constinitVal2 = 10;\n//constinit int constinitVal3 = 100;// error \u53ea\u80fd\u9759\u6001\u6216\u7ebf\u7a0b\u5c40\u90e8\u4e2d\u4f7f\u7528\nstd::cout &lt;&lt; \"++constinitVal++: \" &lt;&lt; ++constinitVal &lt;&lt; std::endl;    std::cout &lt;&lt; \"++constinitVal++: \" &lt;&lt; ++constinitVal2 &lt;&lt; std::endl;    }\n</code></pre> <ul> <li>\u793a\u4f8b2</li> </ul> <pre><code>const char *g() { return \"dynamic initialization\"; }\nconstexpr const char *f(bool p) { return p ? \"constant initializer\" : g(); }\nconstinit const char *c = f(true); // OK\nconstinit const char *d = f(false); // error ,\u7531\u4e8e\u6269\u5c55\u540e\uff0c\u4f1a\u8c03\u7528g()\uff0c\u4f46g()\u4e0d\u662fconstexpr\u7684\nint main()\n{\nconstinit const char *l_c = f(true); // error\uff0cconstinit' can only be applied to a variable with static or thread storage duration\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/constexpr%20consteval%20constinit/#4-constexprconstevalconstinit","title":"4 constexpr\u3001consteval\u3001constinit\u6bd4\u8f83","text":"<ul> <li>\u7f16\u8bd1\u671f&amp;\u8fd0\u884c\u671f</li> <li>constexpr\u7f16\u8bd1\u5668\u6216\u8fd0\u884c\u671f\u751f\u6210</li> <li>consteval\u7f16\u8bd1\u671f\u751f\u6210</li> <li>constinit\u7f16\u8bd1\u671f\u521d\u59cb\u5316\uff0c\u8fd0\u884c\u671f\u53ef\u6539\u53d8</li> <li>\u5e38\u91cf\u7279\u6027</li> <li>constexpr\u3001consteval\u9690\u542b\u5e38\u91cf\u7279\u6027\uff0c\u4e0d\u53ef\u6539\u53d8</li> <li>constinit\u7f16\u8bd1\u5668\u5e38\u91cf\u521d\u59cb\u5316\uff0c\u8fd0\u884c\u671f\u53ef\u4ee5\u6539\u53d8\u5427\uff0c\u4e0d\u542b\u5e38\u91cf\u7279\u6027</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n\nconstexpr int constexprVal = 1000;\nconstinit int constinitVal = 1000;\n\nint incrementMe(int val){ return ++val;}\n\nint main() {\n\nauto val = 1000;\nconst auto res = incrementMe(val);                                      // (1)                         \nstd::cout &lt;&lt; \"res: \" &lt;&lt; res &lt;&lt; std::endl;\n\n// std::cout &lt;&lt; \"res: \" &lt;&lt; ++res &lt;&lt; std::endl;                       ERROR (2)\n// std::cout &lt;&lt; \"++constexprVal++: \" &lt;&lt; ++constexprVal &lt;&lt; std::endl; ERROR (2)\nstd::cout &lt;&lt; \"++constinitVal++: \" &lt;&lt; ++constinitVal &lt;&lt; std::endl;       // (3)\n\nconstexpr auto localConstexpr = 1000;                                   // (4)\n// constinit auto localConstinit = 1000; ERROR\n\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/constexpr%20consteval%20constinit/#5-constinit","title":"5 \u4e3a\u4ec0\u4e48\u9700\u8981constinit\uff1f","text":"<ul> <li>\u53c2\u8003</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/for%20Range%E6%96%B0%E7%89%B9%E6%80%A7/","title":"for Range\u65b0\u7279\u6027","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/for%20Range%E6%96%B0%E7%89%B9%E6%80%A7/#11-for","title":"1.1 for \u7ed3\u6784\u5316\u7ed1\u5b9a","text":"<ul> <li>\u529f\u80fd\uff1a\u7ed3\u5408c++17\u673a\u6784\u5316\u7ed1\u5b9a\u4f7f\u7528</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;map&gt;\nint main(){\nstd::map&lt;int, std::string&gt; mp = { {1,\"1\"},{2,\"2\"} };\nfor (auto&amp;&amp; [first,second] : mymap) {\n// \u4f7f\u7528 first \u548c second\n}\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/for%20Range%E6%96%B0%E7%89%B9%E6%80%A7/#12-for-range","title":"1.2 for Range\u521d\u59cb\u5316\u8bed\u53e5","text":"<ul> <li>\u529f\u80fd\uff1a\u5728for\u7684<code>()</code>\u5185\u8fdb\u884c\u521d\u59cb\u5316</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nint main() {\nfor (auto vec = std::vector{ 1, 2, 3 }; auto v : vec) {\nstd::cout &lt;&lt; v &lt;&lt; \" \";\n}\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/format/","title":"format","text":"<ul> <li>\u529f\u80fd\uff1aformat\u6587\u672c\u683c\u5f0f\u5316\u5e93\u63d0\u4f9b printf \u51fd\u6570\u65cf\u7684\u5b89\u5168\u4e14\u53ef\u6269\u5c55\u7684\u66ff\u7528\u54c1</li> <li>\u8bed\u6cd5\uff1a</li> </ul> <pre><code>template&lt; class... Args &gt;\nstd::string format( /*format_string&lt;Args...&gt;*/ fmt, const Args&amp;... args );(1)(C++20 \u8d77)\ntemplate&lt; class... Args &gt;\nstd::wstring format( /*wformat_string&lt;Args...&gt;*/ fmt, const Args&amp;... args );(2)(C++20 \u8d77)\ntemplate&lt; class... Args &gt;\nstd::string format( const std::locale&amp; loc,/*format_string&lt;Args...&gt;*/ fmt, const Args&amp;... args );(3)(C++20 \u8d77)\ntemplate&lt; class... Args &gt;\nstd::wstring format( const std::locale&amp; loc,/*wformat_string&lt;Args...&gt;*/ fmt, const Args&amp;... args );(4)(C++20 \u8d77)\n</code></pre> <ul> <li>\u53c2\u6570\uff1a</li> <li><code>fmt</code>:\u683c\u5f0f\u5316\u5668\uff0c\u7c7b\u578b\u4e3astd::string_view \uff08\u5bf9\u4e8e (1,3) \uff09\u6216 std::wstring_view\uff0c\u683c\u5f0f\u8be6\u89c1 std:formatter</li> <li><code>args...</code>:\u8981\u683c\u5f0f\u5316\u7684\u53c2\u6570</li> <li><code>locale</code>:\u7528\u4e8e\u672c\u5730\u73af\u5883\u7279\u5b9a\u683c\u5f0f\u5316\u7684 std::locale</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/format/#1-formatter","title":"1 formatter\u683c\u5f0f\u5316\u5668","text":"<ul> <li>\u53c2\u8003</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/jthread/","title":"jthread","text":"<ul> <li>\u53c2\u8003</li> </ul> <pre><code>title: jthread \u548c thread\u4e0d\u540c\uff1f\n1. jthread \u53ef\u4ee5\u63a7\u5236\u7ebf\u7a0b\u7684\u53d6\u6d88/\u505c\u6b62\u3002\uff08\u9700\u8981\u901a\u8fc7\u7ebf\u7a0b\u51fd\u6570\u542bstd::stop_token\u53c2\u6570\uff0c\u5185\u90e8\u8c03\u7528stop_token::stop_requested()\u5224\u65ad\uff09\n2. jthread \u6790\u6784\u65f6\u4f1a\u81ea\u52a8join\uff0c\u6267\u884c\u7ebf\u7a0b\u3002\uff08\u6790\u6784\u5148\u8c03\u7528request_stop() \u518d\u8c03\u7528 join()\uff09\n</code></pre> <ul> <li>\u529f\u80fd\uff1ajthread \u548c thread \u529f\u80fd\u4e00\u6837\uff0c\u542f\u52a8\u4e00\u4e2a\u7ebf\u7a0b\u3002<code>jthread</code>\u00a0\u903b\u8f91\u4e0a\u4fdd\u6709\u4e00\u4e2a\u5185\u90e8\u7684\u00a0<code>std::stop_source</code>\u00a0\u7c7b\u578b\u79c1\u6709\u6210\u5458\uff0c\u5b83\u7ef4\u6301\u5171\u4eab\u505c\u6b62\u72b6\u6001\u3002\u00a0<code>jthread</code>\u00a0\u7684\u6784\u9020\u51fd\u6570\u63a5\u53d7\u4e00\u4e2a\u00a0std::stop_token\u00a0\u4f5c\u4e3a\u5176\u9996\u53c2\u6570\uff0c\u00a0<code>jthread</code>\u00a0\u5c06\u4ece\u5176\u5185\u90e8\u7684\u00a0<code>stop_source</code>\u00a0\u4f20\u9012\u5b83\u3002\u8fd9\u5141\u8bb8\u51fd\u6570\u5728\u5176\u6267\u884c\u4e2d\u68c0\u67e5\u662f\u5426\u5df2\u8bf7\u6c42\u505c\u6b62\uff0c\u800c\u82e5\u5df2\u8bf7\u6c42\u5219\u8fd4\u56de</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/jthread/#1","title":"1 \u505c\u6b62\u4fe1\u53f7\u51fd\u6570","text":"<ul> <li><code>get_stop_source</code> \uff1a\u8fd4\u56de\u4e0e\u7ebf\u7a0b\u7684\u505c\u6b62\u72b6\u6001\u5173\u8054\u7684\u00a0<code>stop_source</code>\u00a0\u5bf9\u8c61 </li> <li><code>get_stop_token</code> \uff1a\u8fd4\u56de\u4e0e\u7ebf\u7a0b\u7684\u5171\u4eab\u505c\u6b62\u72b6\u6001\u5173\u8054\u7684\u00a0<code>stop_token</code> \u5bf9\u8c61</li> <li><code>request_stop</code> \uff1a\u8bf7\u6c42\u6267\u884c\u7ecf\u7531\u7ebf\u7a0b\u7684\u5171\u4eab\u505c\u6b62\u72b6\u6001\u505c\u6b62\uff08\u53d1\u51fa\u505c\u6b62\u4fe1\u53f7\uff0c\u5b9e\u9645\u7b49\u4ef7\u4e8e <code>get_stop_source().request_stop ()</code>\uff09</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/jthread/#3-stop_source","title":"3 stop_source","text":"<p><code>stop_source</code>\u00a0\u7c7b\u63d0\u4f9b\u53d1\u51fa\u505c\u6b62\u8bf7\u6c42\u7684\u65b9\u5f0f\u3002stop_source \u5305\u542b stop_token \u5bf9\u8c61\u3002</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/jthread/#4-stop_token","title":"4 stop_token","text":"<p>stop_token \u5185\u90e8\u6709\u4e00\u4e2a\u505c\u6b62\u72b6\u6001\u53d8\u91cf\uff0c\u53ef\u4ee5\u68c0\u6d4b\u8fd9\u4e2a\u72b6\u6001\uff0c\u4ee5\u4fbf\u51b3\u5b9a\u662f\u5426\u4e2d\u6b62\u7ebf\u7a0b\u3002\u7c7b\u63d0\u4f9b\u662f\u5426\u5df2\u7ecf\u6216\u80fd\u5bf9\u5176\u6240\u5173\u8054\u7684\u00a0std:: stop_source\u00a0\u5bf9\u8c61\u4f5c\u51fa\u505c\u6b62\u8bf7\u6c42\u7684\u65b9\u6cd5\u3002 - \u793a\u4f8b</p> <pre><code>int test_jthread()\n{\nauto worker1=[] (std::stop_token token,int i) {\nstd::cout&lt;&lt;\"worker1 thread \" &lt;&lt; i&lt;&lt;\"\\n\";\n};\nauto worker2=[] (int i) {\nstd::cout&lt;&lt;\"worker2 thread \"&lt;&lt; i&lt;&lt;\"\\n\";\n};  std::stop_token token;\nstd::jthread  th1(worker1,1);   // th1.get_stop_token() as the first argrment\nstd::jthread  th2(worker2,2);   //same as thread\nstd::jthread  th3(worker1, token, 2);   //same as thread\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/jthread/#5-stop_callback","title":"5 stop_callback","text":"<p><code>stop_callback</code>\u00a0\u7c7b\u6a21\u677f\u63d0\u4f9b\u5bf9\u5173\u8054\u7684\u00a0std:: stop_token\u00a0\u5bf9\u8c61\u6ce8\u518c\u56de\u8c03\u51fd\u6570\u7684 RAII \u5bf9\u8c61\u7c7b\u578b\uff0c\u4f7f\u5f97\u5c06\u5728\u00a0std:: stop_token\u00a0\u7684\u5173\u8054\u00a0std:: stop_source\u00a0\u88ab\u8bf7\u6c42\u505c\u6b62\u65f6\u8c03\u7528\u56de\u8c03\u51fd\u6570\u3002 - \u793a\u4f8b</p> <pre><code>//serializing the output with thread id\nvoid sout(const char * s)\n{\nstatic std::mutex mtx;\nconst std::lock_guard&lt;std::mutex&gt; lock(mtx);\nstd::cout&lt;&lt;\"[\"&lt;&lt;std::this_thread::get_id() &lt;&lt;\"]\"&lt;&lt;s&lt;&lt;'\\n';\n}\nVoid test_stopcallback()\n{\nsout(\"main thread\");    auto worker=[] (std::stop_token token) {\nsout(\"worker thread\");\nstd::mutex mutex;\nstd::unique_lock lock(mutex);\nstd::condition_variable_any().wait(lock, token,\n[&amp;token] { return token.stop_requested(); });\nsout(\"worker thread end\");          };\nstd::stop_source  source;\nauto token=source.get_token();\nstd::stop_callback callback_stop(token, [] {\nsout( \"Stop callback executed\");\n});\n\nstd::jthread th(worker, token);\nstd::this_thread::sleep_for(std::chrono::seconds(1));\nif(source.request_stop())  sout(\"stop OK\");// \u8c03\u7528request_stop()\uff0c\u89e6\u53d1stop_callback\u7684\u56de\u8c03\u51fd\u6570\n}\n</code></pre> <ul> <li>\u53ef\u80fd\u8f93\u51fa</li> </ul> <pre><code>[139788821808960]main thread\n[139788803913472]worker thread\n[139788821808960]Stop callback executed\n[139788821808960]stop OK\n[139788803913472]worker thread end\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/jthread/#2","title":"2 \u793a\u4f8b","text":"<pre><code>#include &lt;chrono&gt;\n#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\nusing namespace ::std::literals;\n\nint main() {\n\nstd::cout &lt;&lt; std::endl;\n\nstd::jthread nonInterruptable([] { // (1)\nint counter{0};\nstd::cout &lt;&lt; \"thread id: \" &lt;&lt; std::this_thread::get_id() &lt;&lt; std::endl;\nwhile (counter &lt; 10) {\nstd::this_thread::sleep_for(0.2s);\nstd::cerr &lt;&lt; \"nonInterruptable: \" &lt;&lt; counter &lt;&lt; std::endl;\n++counter;\n}\n});\n\nstd::jthread interruptable([](std::stop_token itoken) { // (2)\nint counter{0};\nstd::cout &lt;&lt; \"thread id: \" &lt;&lt; std::this_thread::get_id() &lt;&lt; std::endl;\nwhile (counter &lt; 10) {\nstd::this_thread::sleep_for(0.2s);\nif (itoken.stop_requested())// (3)\u5904\u7406\u7ebf\u7a0b\u505c\u6b62\u4fe1\u53f7\nreturn; std::cerr &lt;&lt; \"interruptable: \" &lt;&lt; counter &lt;&lt; std::endl;\n++counter;\n}\n});\n\nstd::this_thread::sleep_for(1s);\n\nstd::cerr &lt;&lt; std::endl;\nstd::cerr &lt;&lt; \"Main thread interrupts both jthreads\" &lt;&lt; std::endl;\nnonInterruptable.request_stop();//\u8bf7\u6c42\u505c\u6b62\uff0c\u4f46\u7ebf\u7a0b\u51fd\u6570\u6ca1\u6709\u5904\u7406\u6b64\u4fe1\u53f7\n//interruptable.get_stop_source().request_stop();\ninterruptable.request_stop(); // (4)\u8bf7\u6c42\u505c\u6b62\n\nstd::cout &lt;&lt; std::endl;\n}\n</code></pre> <ul> <li>\u53ef\u80fd\u8f93\u51fa</li> </ul> <pre><code>[shw@rocky jthread]$ ./a.out \n\nthread id: 140513660630592\nthread id: 140513669023296\ninterruptable: 0\nnonInterruptable: 0\nnonInterruptable: 1\ninterruptable: 1\nnonInterruptable: 2\ninterruptable: 2\nnonInterruptable: 3\ninterruptable: 3\n\nMain thread interrupts both jthreads\n\nnonInterruptable: 4\nnonInterruptable: 5\nnonInterruptable: 6\nnonInterruptable: 7\nnonInterruptable: 8\nnonInterruptable: 9\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/source_location/","title":"source_location","text":"<ul> <li>\u529f\u80fd\uff1a\u6e90\u7801\u7684\u5177\u4f53\u4fe1\u606f\uff0c\u4f8b\u5982\u6587\u4ef6\u540d\u3001\u884c\u53f7\u4ee5\u53ca\u51fd\u6570\u540d\u3002\u7528\u4e8e\u66ff\u4ee3 <code>__LINE__</code>\u00a0\u3001<code>__FUNCTION__</code>\u4e0e\u00a0<code>__FILE__</code>\u00a0\u7684\u9884\u5b9a\u4e49\u5b8f\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;string_view&gt;\n#include &lt;source_location&gt;\n\nvoid log(std::string_view message,\nconst std::source_location&amp; location = std::source_location::current())\n{\nstd::cout &lt;&lt; \"info:\"\n&lt;&lt; location.file_name() &lt;&lt; ':'\n&lt;&lt; location.line() &lt;&lt; ' '\n&lt;&lt; location.column() &lt;&lt; ' '\n&lt;&lt; location.function_name() &lt;&lt; ' '\n&lt;&lt; message &lt;&lt; '\\n';\n}\n\nint main()\n{\nlog(\"Hello world!\");\n}\n</code></pre> <ul> <li>\u53ef\u80fd\u8f93\u51fa</li> </ul> <pre><code>info:/app/example.cpp:18 8 int main() Hello world!\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/using%20enum%20%E5%A3%B0%E6%98%8E/","title":"using enum \u58f0\u660e","text":"<ul> <li><code>using enum \u58f0\u660e</code>\u67092\u79cd\u8bed\u6cd5\u5f62\u5f0f</li> <li><code>using enum \u679a\u4e3e\u540d</code></li> <li><code>using \u679a\u4e3e\u540d::\u679a\u4e3e\u5b50\u9879\u540d</code></li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/using%20enum%20%E5%A3%B0%E6%98%8E/#1-using-enum","title":"1 using enum \u679a\u4e3e\u540d","text":"<ul> <li>\u529f\u80fd\uff1a\u7c7b\u4f3c\u4e8e<code>using namespace</code>\u58f0\u660e\uff0c<code>using enum</code> \u58f0\u660e\u5c06\u679a\u4e3e\u503c\u66b4\u9732\u5728\u5f53\u524d\u4f5c\u7528\u57df\u4e2d</li> <li>\u6ce8\u610f\u4e8b\u9879\uff1a\u540c\u4e00\u4f5c\u7528\u57df\u4e0d\u80fd\u6709\u76f8\u540c\u547d\u4ee4\uff08\u4f1a\u547d\u540d\u51b2\u7a81\uff09</li> <li>\u793a\u4f8b</li> </ul> <pre><code>enum class fruit { orange, apple };\nstruct S1 {\n\nusing enum fruit; // OK \uff1a\u5f15\u5165 orange \u4e0e apple \u5230 S1 \u4e2d\n//char orange; error,\u4e0d\u80fd\u540c\u540d\n};\nvoid f()\n{\nusing fruit::orange;\nauto en=orange;\nS s;\ns.orange;  // OK \uff1a\u6307\u540d fruit::orange\nS::orange; // OK \uff1a\u6307\u540d fruit::orange\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/using%20enum%20%E5%A3%B0%E6%98%8E/#2-using","title":"2 using \u679a\u4e3e\u540d::\u679a\u4e3e\u5b50\u9879\u540d","text":"<ul> <li>\u529f\u80fd\uff1a\u5c06\u679a\u4e3e\u4e2d\u67d0\u4e00\u5177\u4f53\u5b50\u9879\u540d\u66b4\u9732\u5728\u5f53\u524d\u4f5c\u7528\u57df\u4e2d</li> <li>\u6ce8\u610f\u4e8b\u9879\uff1a\u540c\u4e00\u4f5c\u7528\u57df\u4e0d\u80fd\u6709\u76f8\u540c\u547d\u4ee4\uff08\u4f1a\u547d\u540d\u51b2\u7a81\uff09</li> <li>\u793a\u4f8b</li> </ul> <pre><code>enum class fruit { orange, apple };\n\nstruct S2 {\nusing fruit::orange;\nusing fruit::apple;\n};\nvoid f()\n{\nusing fruit::orange;\nauto en=orange;\nS2 s2;\ns2.orange;  // OK \uff1a\u6307\u540d fruit::orange\nS2::orange; // OK \uff1a\u6307\u540d fruit::orange\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/%E4%B8%89%E8%B7%AF%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6/","title":"\u4e09\u8def\u6bd4\u8f83\u8fd0\u7b97\u7b26<code>&lt;=&gt;</code>","text":"<ul> <li>\u4f5c\u7528\uff1a\u4e09\u8def\u6bd4\u8f83\u53ef\u4ee5\u770b\u505a<code>== \u3001 != \u3001 &lt; \u3001 &lt;= \u3001 &gt; \u3001 &gt;=</code>\u7684\u96c6\u5408,\u5b9e\u73b0\u4e00\u4e2a\u4e09\u8def\u6bd4\u8f83\u8fd0\u7b97\u7b26\u53ef\u4ee5\u66ff\u4ee3\u5176\u5b83\u516d\u4e2a\u6bd4\u8f83\u8fd0\u7b97</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/%E4%B8%89%E8%B7%AF%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6/#1","title":"1 \u4e09\u8def\u6bd4\u8f83\u7684\u4f7f\u7528","text":"<ol> <li>\u4e09\u8def\u6bd4\u8f83\u8fd4\u56de\u503c\u6709\u4e09\u79cd </li> <li>partial_ordering</li> <li>strong_ordering</li> <li>weak_ordering</li> <li>\u4e09\u8def\u6bd4\u8f83\u7ed3\u679c\u53ea\u80fd\u4e0e 0\u3001NULL \u548c nullptr \u505a\u6bd4\u8f83</li> <li>\u793a\u4f8b</li> </ol> <pre><code>#include&lt;compare&gt;\nint main(){\nauto comp=1 &lt;=&gt; 2;\ncomp&lt;NULL;\ncomp&lt;0;\ncomp&lt;nullptr;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/%E4%B8%89%E8%B7%AF%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6/#2","title":"2 \u91cd\u5199\u4e09\u8def\u6bd4\u8f83\u8fd0\u7b97\u7b26","text":"<p>\u5728\u7c7b\u4e2d\uff0c\u53ef\u4ee5\u6307\u793a\u7f16\u8bd1\u5668\u9ed8\u8ba4\u751f\u6210\uff0c\u4e5f\u53ef\u4ee5\u7531\u7528\u6237\u5b9a\u4e49</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/%E4%B8%89%E8%B7%AF%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6/#21","title":"2.1 \u9ed8\u8ba4\u4e09\u8def\u6bd4\u8f83","text":"<p>\u8981\u4f7f\u7528\u9ed8\u8ba4\u7684\u4e09\u8def\u6bd4\u8f83\uff0c\u53ea\u9700\u8981\u5047\u8bbe <code>=default</code>\uff0c\u7f16\u8bd1\u5668\u4f1a\u5b89\u88c5\u7c7b\u6210\u5458\u51fa\u73b0\u987a\u5e8f\u4f9d\u6b21\u53bb\u505a\u4e09\u8def\u6bd4\u8f83</p> <pre><code>#include&lt;compare&gt;\nclass Point {\nint y;\nint x;\npublic:\nPoint() :x(0), y(0) {}\nPoint(int x,int y):x(x),y(y){}\nauto operator&lt;=&gt;(const Point&amp;) const = default;\n};\n</code></pre> <p>\u56e0\u6b64\u7c7b\u4e2d\u6210\u5458\u987a\u5e8f\u4f1a\u5f71\u54cd\u5230\u6700\u7ec8\u6bd4\u8f83\u7ed3\u679c</p> <pre><code>#include &lt;iostream&gt;\n#include&lt;compare&gt;\n#include&lt;set&gt;\nclass Point1 {\nint y;\nint x;\npublic:\nPoint() :x(0), y(0) {}\nPoint(int x,int y):x(x),y(y){}\nauto operator&lt;=&gt;(const Point&amp;) const = default;\n};\nclass Point2 {\nint x;\nint y;\npublic:\nPoint() :x(0), y(0) {}\nPoint(int x,int y):x(x),y(y){}\nauto operator&lt;=&gt;(const Point&amp;) const = default;\n};\nint main() {\nPoint1 pt1(1,2), pt2(2,1);\n//\u56e0\u4e3ay\u5728x\u524d\u58f0\u660e\uff0c\u9996\u5148\u6bd4\u8f83y\uff0cpt1.y&gt;pt2.y,\u6240\u4ee5\u662ffalse\nif (pt1 &lt; pt2)\n{\nstd::cout &lt;&lt; \"true\";\n}\nelse {\nstd::cout &lt;&lt; \"false\" &lt;&lt; std::endl;\n}\nPoint2 pt3(1,2), pt4(2,1);\n//\u56e0\u4e3ax\u5728y\u524d\u58f0\u660e\uff0c\u9996\u5148\u6bd4\u8f83x\uff0cpt3.x&lt;pt4.x,\u6240\u4ee5\u662ftrue\nif (pt3 &lt; pt4)\n{\nstd::cout &lt;&lt; \"true\";\n}\nelse {\nstd::cout &lt;&lt; \"false\" &lt;&lt; std::endl;\n}\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/%E4%B8%89%E8%B7%AF%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6/#22","title":"2.2 \u81ea\u5b9a\u4e49\u4e09\u8def\u6bd4\u8f83","text":"<p>\u81ea\u5b9a\u4e49\u4e09\u8def\u6bd4\u8f83\u9700\u8981\u904d\u5386\u6240\u6709\u6210\u5458\uff0c\u4e14\u7236\u7c7b\u4e5f\u9700\u8981\u6bd4\u8f83</p> <pre><code>class TotallyOrdered : Base {\nstring tax_id;\nstring first_name;\nstring last_name;\npublic:\nstd::strong_ordering operator&lt;=&gt;(const TotallyOrdered&amp; that) const {\nif (auto cmp = (Base&amp;)(*this) &lt;=&gt; (Base&amp;)that; cmp != 0) return cmp;\nif (auto cmp = last_name &lt;=&gt; that.last_name; cmp != 0) return cmp;\nif (auto cmp = first_name &lt;=&gt; that.first_name; cmp != 0) return cmp;\nreturn tax_id &lt;=&gt; that.tax_id;\n}\n// ... non-comparison functions ...\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/%E6%8C%87%E6%B4%BE%E5%88%9D%E5%A7%8B%E5%8C%96%E5%99%A8/","title":"\u6307\u6d3e\u521d\u59cb\u5316\u5668","text":"<ul> <li>\u8bed\u6cd5\uff1a</li> <li><code>T \u5bf9\u8c61 = { .\u6307\u6d3e\u7b26 = \u5b9e\u53c21 , .\u6307\u6d3e\u7b26 { \u5b9e\u53c22 } ... };  (C++20 \u8d77)</code></li> <li><code>T \u5bf9\u8c61 { .\u6307\u6d3e\u7b26 = \u5b9e\u53c21 , .\u6307\u6d3e\u7b26 { \u5b9e\u53c22 } ... }; (C++20 \u8d77)</code></li> <li>\u89c4\u5219\uff1a</li> <li>\u89c4\u52191\uff1a\u8868\u8fbe\u5f0f\u4e2d\u6240\u7528\u7684\u6240\u6709<code>\u6307\u6d3e\u7b26</code>\u5fc5\u987b\u6309\u7167\u4e0e<code>T</code>\u7684\u6570\u636e\u6210\u5458\u76f8\u540c\u7684\u987a\u5e8f\u51fa\u73b0</li> <li>\u89c4\u52192\uff1a\u7c7b\u6210\u5458\u53ef\u4ee5\u4e0d\u5168\u90e8\u6307\u5b9a</li> <li>\u89c4\u52193\uff1a\u8054\u5408\u4f53\u53ea\u80fd\u6709\u4e00\u4e2a\u6307\u6d3e\u5668</li> <li>\u793a\u4f8b</li> </ul> <pre><code>struct A{\nint a;\nbool b;\nchar* c;\n};\nunion B{\nint a;\nbool b;\n};\nint main() {\n//\u9075\u5faa\u89c4\u52191\uff1a.a \u4e0d\u80fd\u5728 .c\u4e4b\u540e\n//\u9075\u5faa\u89c4\u52192\uff1a\u7c7b\u6210\u5458b\u6ca1\u6709\u6307\u6d3e\nA a={.a=1,.c=(char*)\"hello\"};\n//\u9075\u5faa\u89c4\u52193\nB b={.a=2};\n// \u4e0d\u9075\u5faa\u89c4\u52193\uff1aunion\u53ea\u80fd\u6307\u6d3e\u4e00\u4e2a\u521d\u59cb\u5316\u5668\nB b1={.a=2,.b=false};//error:too many initializers for 'B'\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/c%2B%2B20/%E6%8C%87%E6%B4%BE%E5%88%9D%E5%A7%8B%E5%8C%96%E5%99%A8/#1-c","title":"1 \u548cc\u4e2d\u7684\u6307\u6d3e\u7b26\u521d\u59cb\u5316\u6bd4\u8f83","text":"<ul> <li>c\u6307\u6d3e\u7b26\u521d\u59cb\u5316\uff1a</li> <li>\u5728c99\u4e2d\u652f\u6301</li> <li>\u652f\u6301\u7ed3\u6784\u4f53\u6210\u5458\u4e71\u5e8f\u8d4b\u503c</li> <li>c++\u6307\u6d3e\u7b26\u521d\u59cb\u5316\uff1a</li> <li>\u5728c++20\u4e2d\u652f\u6301</li> <li>\u7ed3\u6784\u4f53\u6210\u5458\u7684\u521d\u59cb\u5316\u5fc5\u987b\u548c\u58f0\u660e\u65f6\u4e00\u81f4\uff0c\u53ef\u4ee5\u53ea\u521d\u59cb\u5316\u90e8\u5206</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;stdio.h&gt;\ntypedef struct _a\n{\nint i;\nchar c[10];\n}A;\nint main(void)\n{\n// successful\uff0cc\u7f16\u8bd1\u6b63\u786e\uff0c\n// error\uff0c\u4f46\u5728c++ -std=c++2a\u4e2d\u5931\u8d25\uff0c\u56e0\u4e3a\u4e0d\u5141\u8bb8\u6210\u5458\u4e71\u5e8f\u521d\u59cb\u5316\uff0c\u5373\u4e0d\u5141\u8bb8i\u5728c\u4e4b\u540e\u8d4b\u503c\nA a={.c={'h','e','l','l','o',0},.i=1};\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/Boost/Asio/","title":"Asio\u7f51\u7edc\u5e93","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/Boost/Asio/#_1","title":"\u540c\u6b65\u901a\u8baf","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/Boost/Asio/#_2","title":"\u5ba2\u6237\u7aef","text":"<ul> <li>\u57fa\u672c\u6b65\u9aa4\uff1a</li> <li>\u5efa\u7acbio\u4e0a\u4e0b\u6587</li> <li>\u521b\u5efa\u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u7aef\u53e3</li> <li>\u521b\u5efa\u5957\u63a5\u5b57socket</li> <li>\u7ed1\u5b9a\u81ea\u5b9a\u4e49\u5ba2\u6237\u7aef\u7aef\u53e3\u53f7</li> <li>\u8fde\u63a5\u670d\u52a1\u7aef</li> <li>\u5904\u7406\u670d\u52a1\u7aef\u54cd\u5e94\u4fe1\u606f</li> <li>\u6ce8\u610f\u4e8b\u9879\uff1a<ul> <li>\u5ba2\u6237\u7aef\u53ef\u4ee5\u81ea\u5b9a\u4e49\u7aef\u53e3\u53f7\uff0c\u4e5f\u53ef\u4ee5\u7531\u5e93\u968f\u673a\u6307\u5b9a</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;boost/asio.hpp&gt;\n#include &lt;string&gt;\nvoid client()\n{\ntry\n{\n//1.\u5efa\u7acbio\u4e0a\u4e0b\u6587\nio_service io;\n//2.\u521b\u5efa\u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u7aef\u53e3\nip::tcp::endpoint epServer(ip::address::from_string(\"127.0.0.1\"), 8888);\nip::tcp::endpoint epClien(ip::tcp::v4(), 6666);\n//3.\u521b\u5efasocket\u5957\u63a5\u5b57\nip::tcp::socket socket(io);\n//4.\u7ed1\u5b9a\u5ba2\u6237\u7aef\u7aef\u53e3\nsocket.open(ip::tcp::v4());\nsocket.bind(epClien);\n//5.\u8fde\u63a5\u670d\u52a1\u7aef       \nsocket.connect(epServer);\n//6.\u5904\u7406\u670d\u52a1\u7aef\u53d1\u9001\u6765\u7684\u4fe1\u606f\n{\nstd::array&lt;char, 128&gt; msg = { '\\0' };\nsize_t len = socket.read_some(buffer(msg));\nstd::cout &lt;&lt; \"[client]\" &lt;&lt; \"[threadID]=[\" &lt;&lt; std::this_thread::get_id() &lt;&lt; \"]\" &lt;&lt; \"\u670d\u52a1\u7aef\u54cd\u5e94\u6570\u636e\uff1a\" &lt;&lt; msg.data() &lt;&lt; std::endl;\n}\n}\ncatch (const std::exception&amp; e)\n{\nstd::cout &lt;&lt; \"[client]\" &lt;&lt; e.what() &lt;&lt; std::endl;\n}\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/Boost/Asio/#_3","title":"\u670d\u52a1\u7aef","text":"<ul> <li>\u57fa\u672c\u6b65\u9aa4\uff1a</li> <li>\u5efa\u7acbio\u4e0a\u4e0b\u6587</li> <li>\u521b\u5efa\u670d\u52a1\u7aef</li> <li>\u521b\u5efa\u63a5\u6536\u5668</li> <li>\u521b\u5efa\u5957\u63a5\u5b57socket</li> <li>\u7b49\u5f85\u5ba2\u6237\u7aef\u8fde\u63a5\u8bf7\u6c42</li> <li>\u5904\u7406\u670d\u52a1\u7aef\u54cd\u5e94\u4fe1\u606f</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;boost/asio.hpp&gt;\n#include &lt;string&gt;\nvoid server()\n{\ntry\n{\n//1.\u5efa\u7acbio\u7684\u4e0a\u4e0b\u6587\nio_service io;\n//2.\u521b\u5efa\u7aef\u53e3\nip::tcp::endpoint ep(ip::tcp::v4(), 8888);\n//3.\u521b\u5efa\u63a5\u6536\u5668\nip::tcp::acceptor acceptor(io, ep);\nwhile (true)\n{\n//4.\u521b\u5efasocket\u5957\u63a5\u5b57\nip::tcp::socket socket(io);\n//5.\u7b49\u5f85\u5ba2\u6237\u7aef\u8fde\u63a5,\u4f1a\u963b\u585e\u76f4\u5230\u6709\u8fde\u63a5\u5230\u6765\nacceptor.accept(socket);\n//6.\u6dfb\u52a0\u54cd\u5e94\u5ba2\u6237\u7aef\u64cd\u4f5c\nstd::string infoRead, infoWrite = \"hello, \u5ba2\u6237\u7aef\";\nboost::system::error_code ec;\n//socket.read_some(buffer(infoRead), ec);\nsocket.write_some(buffer(infoWrite), ec);\n//\u670d\u52a1\u7aef\u4ee5\u5b8c\u6210\u53d1\u9001\nsentFlag.store(true);\nif (ec)\n{\nstd::cout &lt;&lt; ec.message() &lt;&lt; std::endl;\nbreak;\n}\n//\u5faa\u73af\u7b49\u5f85\u4e0b\u4e00\u5ba2\u6237\u7aef\u7684\u8fde\u63a5\n}\n}\ncatch (const std::exception&amp; e)\n{\nstd::cout &lt;&lt; \"[server]\" &lt;&lt; e.what() &lt;&lt; std::endl;\n}\n}\n## \u5f02\u6b65\u901a\u8baf\n### \u670d\u52a1\u7aef\n```cpp\n#include &lt;boost/asio.hpp&gt;\n#include&lt;boost/bind.hpp&gt;\nusing namespace boost::asio;\n//AsyncServer\nclass AsyncServer\n{\nprivate:\nip::tcp::acceptor acceptor;\nio_service&amp; io;\n\npublic:\nAsyncServer(io_service&amp; _io,const ip::tcp::endpoint&amp; _ep):io(_io),acceptor(_io,_ep)\n{\nstart();\n}\nvoid start()\n{\nstd::shared_ptr&lt;ip::tcp::socket&gt; socket(new ip::tcp::socket(io));\nacceptor.async_accept(*socket, boost::bind(&amp;AsyncServer::accept_handle,this,socket,placeholders::error));\n}\nvoid accept_handle(std::shared_ptr&lt;ip::tcp::socket&gt; socket,const boost::system::error_code&amp; ec)\n{\nif (ec)\nreturn;\nsocket-&gt;async_write_some(buffer(\"hello, \u5ba2\u6237\u7aef\"), boost::bind(&amp;AsyncServer::write_handle, this, placeholders::error));\nstart();\n}\nvoid write_handle(const boost::system::error_code&amp; ec)\n{\nstd::cout &lt;&lt; \"send msg complete!\" &lt;&lt; std::endl;\n}\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/Boost/Asio/#_4","title":"\u6d4b\u8bd5\u793a\u4f8b","text":"<p>\u4e0b\u9762\u793a\u4f8b\u4ee3\u7801\u53ef\u4ee5\u5728\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u6a21\u62df\u5ba2\u6237\u7aef\u670d\u52a1\u5668\u6536\u53d1\u4fe1\u606f</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include&lt;memory&gt;\n#include &lt;boost/asio.hpp&gt;\n#include&lt;string&gt;\n#include&lt;atomic&gt;\n#include&lt;mutex&gt;\nstd::mutex printMutex;\n//\u7ebf\u7a0b\u5b89\u5168io\n#define PRINT(arg)                              \\\n{                                               \\\n    std::lock_guard&lt;std::mutex&gt; lg(printMutex); \\\n    arg                                         \\\n}\nstd::atomic&lt;bool&gt; sentFlag = false;//\u670d\u52a1\u7aef\u4ee5\u53d1\u9001\u6807\u5fd7\nstd::atomic&lt;bool&gt; readyFlag(false);//\u670d\u52a1\u7aef\u4ee5\u51c6\u5907\u63a5\u6536\u5ba2\u6237\u7aef\u6807\u5fd7\nusing namespace boost::asio;\nvoid server()\n{\ntry\n{\n//1.\u5efa\u7acbio\u7684\u4e0a\u4e0b\u6587\nio_service io;\n//2.\u521b\u5efa\u7aef\u53e3\nip::tcp::endpoint ep(ip::tcp::v4(), 8888);\n//3.\u521b\u5efa\u63a5\u6536\u5668\nip::tcp::acceptor acceptor(io, ep);\nwhile (true)\n{\n//4.\u521b\u5efasocket\u5957\u63a5\u5b57\nPRINT(std::cout &lt;&lt; \"[server]\" &lt;&lt; \"[threadID]=[\" &lt;&lt; std::this_thread::get_id() &lt;&lt; \"]\" &lt;&lt; \"\u5df2\u5efa\u7acb\u670d\u52a1\u7aefip\u7aef\u53e3\u53f7[\" &lt;&lt; acceptor.local_endpoint().address() &lt;&lt;\" \"&lt;&lt; acceptor.local_endpoint().port() &lt;&lt;\"]\u5f00\u59cb\u76d1\u542c\u5ba2\u6237\u7aef\u8bf7\u6c42...\" &lt;&lt; std::endl;)\nip::tcp::socket socket(io);\n//\u670d\u52a1\u7aef\u4ee5\u51c6\u5907\u63a5\u6536\u5ba2\u6237\u7aef\nreadyFlag.store(true);          PRINT(std::cout &lt;&lt; \"[server]\" &lt;&lt; \"[threadID]=[\" &lt;&lt; std::this_thread::get_id() &lt;&lt; \"]\u5f00\u59cb\u76d1\u542c\u5ba2\u6237\u7aef\u8bf7\u6c42...\"&lt;&lt;std::endl;)\n//5.\u7b49\u5f85\u5ba2\u6237\u7aef\u8fde\u63a5,\u4f1a\u963b\u585e\u76f4\u5230\u6709\u8fde\u63a5\u5230\u6765\nacceptor.accept(socket);\nPRINT(std::cout &lt;&lt; \"[server]\" &lt;&lt; \"[threadID]=[\" &lt;&lt; std::this_thread::get_id() &lt;&lt; \"]\" &lt;&lt; \"\u5df2\u8fde\u63a5\u5ba2\u6237\u7aef\u53e3\u53f7[\" &lt;&lt; socket.remote_endpoint().address() &lt;&lt; \" \" &lt;&lt; socket.remote_endpoint().port() &lt;&lt; \"]\" &lt;&lt; std::endl;)\n//6.\u6dfb\u52a0\u54cd\u5e94\u5ba2\u6237\u7aef\u64cd\u4f5c\nstd::string infoRead, infoWrite = \"hello, \u5ba2\u6237\u7aef\";\nboost::system::error_code ec;\n//socket.read_some(buffer(infoRead), ec);\nsocket.write_some(buffer(infoWrite), ec);\n//\u670d\u52a1\u7aef\u4ee5\u5b8c\u6210\u53d1\u9001\nsentFlag.store(true);\nif (ec)\n{\nPRINT(std::cout &lt;&lt; ec.message() &lt;&lt; std::endl;)\nbreak;\n}\n\n//\u5faa\u73af\u7b49\u5f85\u4e0b\u4e00\u5ba2\u6237\u7aef\u7684\u8fde\u63a5\n}\n}\ncatch (const std::exception&amp; e)\n{\nPRINT(std::cout &lt;&lt; \"[server]\" &lt;&lt; e.what() &lt;&lt; std::endl;)\n}\n\n}\nvoid client()\n{\ntry\n{\n//1.\u5efa\u7acbio\u4e0a\u4e0b\u6587\nio_service io;\n//2.\u521b\u5efa\u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u7aef\u53e3\nip::tcp::endpoint epServer(ip::address::from_string(\"127.0.0.1\"), 8888);\nip::tcp::endpoint epClien(ip::tcp::v4(), 6666);\n//3.\u521b\u5efasocket\u5957\u63a5\u5b57\nip::tcp::socket socket(io);\n//4.\u7ed1\u5b9a\u5ba2\u6237\u7aef\u7aef\u53e3\nsocket.open(ip::tcp::v4());\nsocket.bind(epClien);\n//\u7b49\u5f85\u670d\u52a1\u7aef\u51c6\u5907\u63a5\u6536\u8fde\u63a5\nwhile (!readyFlag.load())\n{\nstd::this_thread::sleep_for(std::chrono::milliseconds(2000));\n}\n//5.\u8fde\u63a5\u670d\u52a1\u7aef       \nsocket.connect(epServer);\n//PRINT(std::cout &lt;&lt; \"[client]\" &lt;&lt; \"[threadID]=[\" &lt;&lt; std::this_thread::get_id() &lt;&lt; \"]\" &lt;&lt; \"\u6b63\u5728\u8fde\u63a5\u670d\u52a1\u7aefip\u7aef\u53e3\u53f7[\" &lt;&lt; socket.remote_endpoint().address().to_string() &lt;&lt; \" \" &lt;&lt; socket.remote_endpoint().port() &lt;&lt; \"]...\" &lt;&lt; std::endl;)\nPRINT(std::cout &lt;&lt; \"[client]\" &lt;&lt; \"[threadID]=[\" &lt;&lt; std::this_thread::get_id() &lt;&lt; \"]\" &lt;&lt; \"\u5df2\u8fde\u63a5\u670d\u52a1\u7aefip\u7aef\u53e3\u53f7[\" &lt;&lt; socket.remote_endpoint().address().to_string() &lt;&lt; \" \" &lt;&lt; socket.remote_endpoint().port() &lt;&lt; \"]\" &lt;&lt; std::endl;)\n//\u7b49\u5f85\u670d\u52a1\u7aef\u53d1\u9001\u5b8c\u4fe1\u606f\nwhile (!sentFlag.load())\n{\nPRINT(std::this_thread::sleep_for(std::chrono::milliseconds(100));)\n}\n//6.\u5904\u7406\u670d\u52a1\u7aef\u53d1\u9001\u6765\u7684\u4fe1\u606f\n{\nstd::array&lt;char, 128&gt; msg = { '\\0' };\nsize_t len = socket.read_some(buffer(msg));\nPRINT(std::cout &lt;&lt; \"[client]\" &lt;&lt; \"[threadID]=[\" &lt;&lt; std::this_thread::get_id() &lt;&lt; \"]\" &lt;&lt; \"\u670d\u52a1\u7aef\u54cd\u5e94\u6570\u636e\uff1a\" &lt;&lt; msg.data() &lt;&lt; std::endl;)\n}\n}\ncatch (const std::exception&amp; e)\n{\nPRINT(std::cout &lt;&lt; \"[client]\" &lt;&lt; e.what() &lt;&lt; std::endl;)\n}\n}\nvoid start()\n{\nPRINT(std::cout &lt;&lt; \"************start************\" &lt;&lt; std::endl;)\nstd::thread tserver(server);\nfor (size_t i = 0; i &lt; 1; ++i)\n{\nclient();\n}   //\u56e0\u4e3a\u670d\u52a1\u5668\u4e00\u76f4\u963b\u585e\u7b49\u5f85\u5ba2\u6237\u7aef\u8fde\u63a5\uff0c\u53ea\u80fd\u5f3a\u5236\u4e2d\u6b62\u7ebf\u7a0b\uff0c\u4f46\u4e0d\u5230\u4e07\u4e0d\u5f97\u5df2\u4e0d\u4f7f\u7528\uff0c\u56e0\u4e3a\u6709\u4e9b\u8d44\u6e90\u4e0d\u4f1a\u91ca\u653e\nTerminateThread(tserver.native_handle(),0);\nPRINT(std::cout &lt;&lt; \"*************end************\" &lt;&lt; std::endl;)\n}\nint main() {\nstart();\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/Boost/Asio/#_5","title":"\u6587\u6863\u8d44\u6599","text":"<ul> <li>Boost.Asio C++ \u7f51\u7edc\u7f16\u7a0b</li> <li>Boost.Asio</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/Boost/Process/","title":"Process \u53ef\u79fb\u690d\u521b\u5efa\u8fdb\u7a0b","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/Boost/Process/#1-systemspawn","title":"1 system\u548cspawn","text":"<ul> <li>\u4f7f\u7528<code>boost::process::system()</code>\u963b\u585e\u521b\u5efa\u8fdb\u7a0b</li> <li>\u4f7f\u7528<code>boost::process::spawn()</code>\u4e0d\u963b\u585e\u521b\u5efa\u8fdb\u7a0b</li> <li>\u7b80\u5355\u793a\u4f8b</li> </ul> <pre><code>#include &lt;boost/process.hpp&gt;\nusing namespace boost::process;\nint main()\n{\n//\u529f\u80fd\uff1a\u4f7f\u7528gcc \u7f16\u8bd1hello.cpp\u6587\u4ef6\nboost::process::system(\"g++ hello.cpp\", boost::process::std_out &gt;\"gcc_out.log\" );\n//\u529f\u80fd:\u6253\u5f00Code.exe\uff08vscode\uff09\nboost::process::system(\"Code\");\n//spawn\u4e0d\u963b\u585e\u8c03\u7528\nboost::process::spawn(\"Code\");\n//search_path\u7528\u4e8e\u67e5\u627e\u53ef\u6267\u884c\u7a0b\u5e8f\u8def\u5f84\nboost::process::spawn(boost::process::search_path(\"Code\"));\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/Boost/Process/#2","title":"2 \u53c2\u6570\u98ce\u683c","text":"<ul> <li>system\u548cspawn\u51fd\u6570\u53c2\u6570\u98ce\u683c\u52062\u5927\u7c7bcmd\u548cExe/Args\uff0c\u53ef\u7ec6\u52063\u7c7b</li> <li>\u98ce\u683c1\uff1a\u4e00\u6761\u5b57\u7b26\u4e32\u5305\u542b\u6240\u6709\u4fe1\u606f\uff0c\u5982<code>bp::system(\"gcc --version\");</code></li> <li>\u98ce\u683c2\uff1a\u591a\u6761\u5b57\u7b26\u4e32\u5206\u5272\u53ef\u6267\u884c\u7a0b\u5e8f\u8def\u5f84\u548c\u53c2\u6570\u4fe1\u606f\uff0c\u5982<code>bp::system(\"D:/MinGW/bin/gcc.exe\", \"--version\");</code></li> <li>\u98ce\u683c3\uff1a\u4f7f\u7528\u547d\u540d\u53c2\u6570\u6307\u5b9a\u53c2\u6570,\u5982<code>bp::system(bp::exe = \"D:\\\\MinGW\\\\bin\\\\gcc.exe\", bp::args = \"--version\");</code></li> <li>\u6ce8\u610f\u4e8b\u9879\uff1a</li> <li>\u5f53\u91c7\u7528\u98ce\u683c2\u548c3\u65f6\uff0c\u53ef\u6267\u884c\u7a0b\u5e8f\u8def\u5f84\u8981\u5168\uff0c\u5982gcc\u8def\u5f84<code>D:\\\\MinGW\\\\bin\\\\gcc.exe</code>\uff0c\u4e0d\u80fd\u4ec5\u4ec5\u6307\u793a\u53ef\u6267\u884c\u7a0b\u5e8f\u540d\uff0c\u5982<code>gcc</code></li> <li>\u793a\u4f8b\uff1asystem\u548cspawn\u5177\u6709\u76f8\u540c\u89c4\u5219</li> </ul> <pre><code>#include &lt;boost/process.hpp&gt;\nusing namespace boost::process;\nint main()\n{\n//\u98ce\u683c1\uff1a\u4e00\u6761\u5b57\u7b26\u4e32\u5305\u542b\u6240\u6709\u4fe1\u606f\nbp::system(\"gcc --version\");\n//\u98ce\u683c2\uff1a\u591a\u6761\u5b57\u7b26\u4e32\u5206\u5272\u53ef\u6267\u884c\u7a0b\u5e8f\u8def\u5f84\u548c\u53c2\u6570\u4fe1\u606f \uff1b\u6ce8\u610f\u4e8b\u9879\uff1agcc.exe\u8def\u5f84\u8981\u586b\u5199\nbp::system(\"D:/MinGW/bin/gcc.exe\", \"--version\");\n//\u98ce\u683c3\uff1a\u4f7f\u7528\u547d\u540d\u53c2\u6570\u6307\u5b9a\u53c2\u6570 \uff0c\u53c2\u6570\u987a\u5e8f\u65e0\u9650\u5236\uff1b\u6ce8\u610f\u4e8b\u9879\uff1abp::cmd\u8def\u5f84\u4fe1\u606f\u53ef\u53ea\u5199gcc\uff0c\u4f46bp::exe\u8def\u5f84\u8981\u5199D:\\\\MinGW\\\\bin\\\\gcc.exe\nbp::system(bp::cmd = \"gcc --version\");\nbp::system(bp::exe = \"D:\\\\MinGW\\\\bin\\\\gcc.exe\", bp::args = \"--version\");\nbp::system(bp::args = \"--version\",bp::exe = \"D:\\\\MinGW\\\\bin\\\\gcc.exe\"); }\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/Boost/Process/#3","title":"3 \u8fdb\u7a0b\u7684\u8f93\u5165\u8f93\u51fa\u6d41","text":"<ul> <li>\u8f93\u51fa\u6d41 <code>std_out</code> \u548c <code>std_err</code></li> <li>\u8f93\u5165\u6d41 <code>std_in</code></li> <li>\u7b80\u5355\u793a\u4f8b</li> </ul> <pre><code>#include &lt;boost/process.hpp&gt;\n#include &lt;boost/process/windows.hpp&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\nnamespace bp = boost::process;\nusing namespace boost::process;\nusing namespace std;\nint main()\n{\n//\u628agcc\u7248\u672c\u4fe1\u606f\u8f93\u51fa\u5230\u6587\u4ef6gcc_version.txt\u4e2d\nbp::system(\"gcc --version\", bp::std_out &gt; \"gcc_version.txt\");\n//\u628agcc\u7248\u672c\u4fe1\u606f\u8f93\u51fa\u5230\u6587\u4ef6ipstream\u7ba1\u9053\u6d41\u4e2d\n{\nbp::ipstream ips;\nstd::string line,info;\nbp::system(\"gcc --version\", bp::std_out &gt; ips);     while (std::getline(ips,line))\n{\ninfo += line+\"\\n\";\n}\nstd::cout &lt;&lt; info;\n}\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/Boost/Serialization/","title":"Serialization\u5e8f\u5217\u5316","text":"<ul> <li>\u529f\u80fd\uff1a\u5c06 C++ \u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u5bf9\u8c61\u8f6c\u6362\u4e3a\u4e00\u4e2a\u5b57\u8282\u5e8f\u5217\uff08binary data, text data, XML\uff09</li> <li>\u7279\u70b9\uff1a\u4f7f\u7528<code>fstream</code>\u6587\u4ef6\u6d41\u4f1a\u751f\u6210\u5b58\u6863\u6587\u4ef6\uff0c\u7528\u4e8e\u4fdd\u5b58\u6570\u636e</li> <li>\u6ce8\u610f\u4e8b\u9879\uff1a\u5b58\u6863\u65f6\u6570\u636e\u987a\u5e8f\u4e0e\u8bfb\u6863\u662f\u987a\u5e8f\u4fdd\u6301\u4e00\u81f4\uff0c\u5426\u5219\u6570\u636e\u5c06\u9519\u8bef</li> <li>\u7b80\u5355\u793a\u4f8b</li> </ul> <pre><code>#include &lt;boost/archive/text_oarchive.hpp&gt;\n#include &lt;boost/archive/text_iarchive.hpp&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n\nvoid Save()\n{\nstd::ofstream wf(\"ser.txt\");\nboost::archive::text_oarchive oar(wf);\nint i = 10;\noar &lt;&lt; i;\nwf.close();\n}\nvoid Load()\n{\nstd::ifstream rf(\"ser.txt\");\nboost::archive::text_iarchive iar(rf);\nint i;\niar &gt;&gt; i;\nstd::cout &lt;&lt; i &lt;&lt; std::endl;\nrf.close();\n}\nint main()\n{\n//\u5b58\u6863\nSave();\n//\u8bfb\u6863\nLoad();\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/Boost/Serialization/#1-3xmltxtbinary","title":"1 3\u79cd\u5b58\u6863\u6587\u4ef6\u683c\u5f0f<code>xml</code>\u3001<code>txt</code>\u3001<code>binary</code>","text":"<ul> <li>\u5934\u6587\u4ef6</li> <li>xml<ul> <li><code>boost/archive/xml_iarchive.hpp</code></li> <li><code>boost/archive/xml_oarchive.hpp</code></li> </ul> </li> <li>txt<ul> <li><code>boost/archive/text_iarchive.hpp</code></li> <li><code>boost/archive/text_oarchive.hpp</code></li> </ul> </li> <li>binary<ul> <li><code>boost/archive/binary_iarchive.hpp</code></li> <li><code>boost/archive/binary_oarchive.hpp</code></li> </ul> </li> <li>\u6ce8\u610f\u4e8b\u9879:stream\u6d41(\u5982<code>fstream</code>)\u4e0d\u8981\u5728<code>iarchive</code>\u548c<code>oarchive</code>\u6790\u6784\u524d\u5173\u95ed(\u5373\u4e0d\u4e3b\u52a8\u8c03\u7528<code>close</code>)</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;boost/archive/binary_iarchive.hpp&gt;\n#include &lt;boost/archive/binary_oarchive.hpp&gt;\n#include &lt;boost/archive/text_iarchive.hpp&gt;\n#include &lt;boost/archive/text_oarchive.hpp&gt;\n#include &lt;boost/archive/xml_iarchive.hpp&gt;\n#include &lt;boost/archive/xml_oarchive.hpp&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\nvoid Save()\n{\nstd::ofstream wft(\"ser.txt\");\nstd::ofstream wfx(\"ser.xml\");\nstd::ofstream wfb(\"ser.binary\");\nboost::archive::text_oarchive oart(wft);\nboost::archive::xml_oarchive oarx(wfx);\nboost::archive::binary_oarchive oarb(wfb);  int i = 10;\noart &lt;&lt; i;\noarx &lt;&lt; BOOST_SERIALIZATION_NVP(i);\noarb &lt;&lt; i;\n}\nvoid Load()\n{\nstd::ifstream rft(\"ser.txt\");\nstd::ifstream rfx(\"ser.xml\");\nstd::ifstream rfb(\"ser.binary\");\nboost::archive::text_iarchive rart(rft);\nboost::archive::xml_iarchive rarx(rfx);\nboost::archive::binary_iarchive rarb(rfb);\nint it=0,ix=0,ib = 0;\nrart &gt;&gt; it;\nrarx &gt;&gt; BOOST_SERIALIZATION_NVP(ix);\nrarb &gt;&gt; ib;\nstd::cout &lt;&lt; \"rart &gt;&gt; it =\" &lt;&lt; it &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"rarx &gt;&gt; ix =\" &lt;&lt; ix &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"rarb &gt;&gt; ib =\" &lt;&lt; ib &lt;&lt; std::endl;\n}\nint main()\n{\n//\u5b58\u6863\nSave();\n//\u8bfb\u6863\nLoad();\n}\n</code></pre> <ul> <li>\u8f93\u51fa\u7ed3\u679c</li> </ul> <pre><code>rart &gt;&gt; it =10\nrarx &gt;&gt; ix =10\nrarb &gt;&gt; ib =10\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/Boost/Serialization/#2","title":"2 \u57fa\u672c\u6570\u636e\u7684\u5b58\u6863\u548c\u8bfb\u6863","text":"<ul> <li>\u57fa\u672c\u7c7b\u578b\u5982<code>int</code>\u3001<code>bool</code>\u3001<code>char</code>\u7b49\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\u9002\u5f53\u7684<code>oarchive</code>\u5b58\u6863\u548c<code>iarchive</code>\u8bfb\u6863</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;boost/archive/text_oarchive.hpp&gt;\n#include &lt;boost/archive/text_iarchive.hpp&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n\nvoid Save()\n{\nstd::ofstream wf(\"ser.txt\");\nboost::archive::text_oarchive oar(wf);\nint i = 10;\nchar c = '1';\nbool b = false;\noar &lt;&lt; i;\noar &lt;&lt; c;\noar &lt;&lt; b;\nwf.close();\n}\nvoid Load()\n{\nstd::ifstream rf(\"ser.txt\");\nboost::archive::text_iarchive iar(rf);\nchar c;\nint i;\nbool b;\n//\u8bfb\u6863\u987a\u5e8f\u4e0e\u5b58\u6863\u65f6\u4fdd\u6301\u4e00\u81f4\niar &gt;&gt; i;\niar &gt;&gt; c;\niar &gt;&gt; b;\nstd::cout &lt;&lt;\"i=\" &lt;&lt; i &lt;&lt; std::endl;\nstd::cout &lt;&lt;\"c=\"&lt;&lt; c &lt;&lt; std::endl;\nstd::cout &lt;&lt;std::boolalpha&lt;&lt; \"b=\" &lt;&lt; b &lt;&lt; std::endl;\nrf.close();\n}\nint main()\n{\n//\u5b58\u6863\nSave();\n//\u8bfb\u6863\nLoad();\n}\n</code></pre> <ul> <li>\u8f93\u51fa\u7ed3\u679c</li> </ul> <pre><code>i=10\nc=1\nb=false\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/Boost/Serialization/#3-cliststringarray","title":"3 C++\u5bb9\u5668\uff08list\u3001string\u3001array ...\uff09\u7684\u5b58\u6863\u548c\u8bfb\u6863","text":"<p>STL\u5bb9\u5668\u4e0e\u57fa\u672c\u7c7b\u578b\u552f\u4e00\u4e0d\u540c\u662f\u9700\u8981\u6dfb\u52a0\u5bf9\u5e94\u7684\u5934\u6587\u4ef6\uff0c\u5982vector\u6dfb\u52a0<code>#include&lt;boost/serialization/vector.hpp&gt;</code> - \u5934\u6587\u4ef6   - <code>string</code>\u6dfb\u52a0\u5934\u6587\u4ef6<code>boost/serialization/string.hpp</code>   - <code>vector</code>\u6dfb\u52a0\u5934\u6587\u4ef6<code>boost/serialization/vector.hpp</code>   - <code>list</code>\u6dfb\u52a0\u5934\u6587\u4ef6<code>boost/serialization/list.hpp</code>   - <code>array</code>\u6dfb\u52a0\u5934\u6587\u4ef6<code>boost/serialization/array.hpp</code>   - <code>map</code>\u6dfb\u52a0\u5934\u6587\u4ef6<code>boost/serialization/map.hpp</code>   - <code>stack</code>\u6dfb\u52a0\u5934\u6587\u4ef6<code>boost/serialization/stack.hpp</code>   - \u5176\u5b83... - \u793a\u4f8b</p> <pre><code>#include&lt;vector&gt;\n#include&lt;iostream&gt;\n#include&lt;fstream&gt;\n#include&lt;boost/serialization/vector.hpp&gt;\n#include&lt;boost/archive/text_iarchive.hpp&gt;\n#include&lt;boost/archive/text_oarchive.hpp&gt;\nvoid Save()\n{\nstd::ofstream wf(\"ser.txt\");\nboost::archive::text_oarchive oar(wf);\nstd::vector&lt;std::string&gt; v = { \"Hello\",\"World\",\"!\" };\noar &lt;&lt; v;\n}\nvoid Load()\n{\nstd::ifstream rf(\"ser.txt\");\nboost::archive::text_iarchive iar(rf);\nstd::vector&lt;std::string&gt; v;\niar &gt;&gt; v;\nfor (const std::string&amp; str:v)\n{\nstd::cout &lt;&lt; str &lt;&lt; \" \";\n}\nstd::cout &lt;&lt; std::endl;\n}\nint main()\n{\n//\u5b58\u6863\nSave();\n//\u8bfb\u6863\nLoad();\n}\n</code></pre> <ul> <li>\u8f93\u51fa\u7ed3\u679c</li> </ul> <pre><code>Hello World !\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/Boost/Serialization/#4","title":"4 \u81ea\u5b9a\u4e49\u7c7b\u7684\u5b58\u6863\u548c\u8bfb\u6863","text":"<ul> <li>\u58f0\u660e\u53cb\u5143\u7c7b<code>friend class boost::serialization::access;</code></li> <li>\u7c7b\u4e2d\u5b9e\u73b0<code>template &lt;typename Archive&gt; void serialize(Archive &amp;ar, const unsigned int version)</code>\u6a21\u677f\u51fd\u6570</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/Boost/Serialization/#41","title":"4.1 \u65e0\u7ee7\u627f\u7c7b","text":"<ul> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;boost/archive/text_oarchive.hpp&gt;\n#include &lt;boost/archive/text_iarchive.hpp&gt;\n#include&lt;boost/serialization/map.hpp&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include&lt;map&gt;\n#include&lt;string&gt;\nusing namespace std;\nclass Base\n{\npublic:\nBase() :m_i(0), m_pb(NULL), m_mp({}) {}\nBase(int i, Base* pb, std::map&lt;string, int&gt; mp) :m_i(i),m_pb(pb),m_mp(mp){}\nprivate:\nfriend class boost::serialization::access;\n\ntemplate&lt;class Archive&gt;\nvoid serialize(Archive&amp; ar, const unsigned int version)\n{\nar&amp; m_i;\nar&amp; m_pb;\nar&amp; m_mp;\n}\nint m_i;\nBase* m_pb;\nstd::map&lt;string,int&gt; m_mp;\n};\n\nvoid Save()\n{\nstd::ofstream wf(\"ser.txt\");\nboost::archive::text_oarchive oar(wf);\nBase b(2, nullptr, { {\"1\",1},{\"2\",2} });\noar &lt;&lt; b;\n}\nvoid Load()\n{\nstd::ifstream rf(\"ser.txt\");\nboost::archive::text_iarchive iar(rf);\nBase b;\n//\u8bfb\u6863\u987a\u5e8f\u4e0e\u5b58\u6863\u65f6\u4fdd\u6301\u4e00\u81f4\niar &gt;&gt; b;\n}\nint main()\n{\n//\u5b58\u6863\nSave();\n//\u8bfb\u6863\nLoad();\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/Boost/Serialization/#42","title":"4.2 \u7ee7\u627f\u7c7b","text":"<ul> <li>\u5728\u65e0\u7ee7\u627f\u7c7b\u57fa\u7840\u4e0a\u589e\u52a0\u4ee5\u4e0b\u51e0\u70b9</li> <li>\u6dfb\u52a0\u5934\u6587\u4ef6<code>#include&lt;boost/serialization/base_object.hpp&gt;</code></li> <li>\u5728serialize\u51fd\u6570\u4e2d\u589e\u52a0\u5e8f\u5217\u5316\u57fa\u7c7b\u4ee3\u7801\uff0c\u4f8b\u5982<code>ar&amp; boost::serialization::base_object&lt;Base&gt;(*this);</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;boost/archive/text_oarchive.hpp&gt;\n#include &lt;boost/archive/text_iarchive.hpp&gt;\n#include&lt;boost/serialization/base_object.hpp&gt;\n#include&lt;boost/serialization/map.hpp&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include&lt;map&gt;\n#include&lt;string&gt;\nusing namespace std;\nclass Base\n{\npublic:\nBase() :m_i(0), m_pb(NULL), m_mp({}) {}\nBase(int i, Base* pb, std::map&lt;string, int&gt; mp) :m_i(i),m_pb(pb),m_mp(mp){}\nprivate:\nfriend class boost::serialization::access;\n\ntemplate&lt;class Archive&gt;\nvoid serialize(Archive&amp; ar, const unsigned int version)\n{\nar&amp; m_i;\nar&amp; m_pb;\nar&amp; m_mp;\n}\nint m_i;\nBase* m_pb;\nstd::map&lt;string,int&gt; m_mp;\n};\n\nclass Derived :public Base\n{\npublic:\nDerived() = default;\nDerived(string str) :Base(),m_str(str) {}\nprivate:\nfriend class boost::serialization::access;\ntemplate&lt;class Archive&gt;\nvoid serialize(Archive&amp; ar, const unsigned int version)\n{\nar&amp; boost::serialization::base_object&lt;Base&gt;(*this);\nar&amp; m_str;\n}\nstring m_str;\n\n};\n\nvoid Save()\n{\nstd::ofstream wf(\"ser.txt\");\nboost::archive::text_oarchive oar(wf);\nBase b(2, nullptr, { {\"1\",1},{\"2\",2} });\nDerived d(\"hello\");\noar &lt;&lt; b;\noar &lt;&lt; d;\n}\nvoid Load()\n{\nstd::ifstream rf(\"ser.txt\");\nboost::archive::text_iarchive iar(rf);\nBase b;\nDerived d;\n//\u8bfb\u6863\u987a\u5e8f\u4e0e\u5b58\u6863\u65f6\u4fdd\u6301\u4e00\u81f4\niar &gt;&gt; b;\niar &gt;&gt; d;\n}\nint main()\n{\n//\u5b58\u6863\nSave();\n//\u8bfb\u6863\nLoad();\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/Boost/Serialization/#5","title":"5 \u6307\u9488\u3001\u5f15\u7528\u7684\u5b58\u6863\u548c\u8bfb\u6863","text":"<ul> <li>\u6307\u9488\u4e0e\u5bf9\u8c61\u4f7f\u7528\u4e00\u6837\uff0c\u4f46\u5f15\u7528\u9700\u8981\u8f6c\u6362\u6210\u76f8\u5e94\u7684\u6307\u9488</li> <li>\u793a\u4f8b</li> </ul> <pre><code>#include &lt;boost/archive/text_oarchive.hpp&gt;\n#include &lt;boost/archive/text_iarchive.hpp&gt;\n#include&lt;boost/serialization/map.hpp&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\nclass object;\nclass my_class {\nprivate:\nfriend class boost::serialization::access;\nint member1;\nobject&amp; member2;\ntemplate&lt;class Archive&gt;\nfriend void serialize(Archive&amp; ar, const unsigned int file_version);\npublic:\nmy_class(int m, object&amp; o) :\nmember1(m),\nmember2(o)\n{}\n};\ntemplate&lt;class Archive&gt;\ninline void save_construct_data(\nArchive&amp; ar, const my_class* t, const unsigned int file_version\n) {\n// save data required to construct instance\nar &lt;&lt; t.member1;\n// serialize reference to object as a pointer\nar &lt;&lt; &amp;t.member2;\n}\n\ntemplate&lt;class Archive&gt;\ninline void load_construct_data(\nArchive&amp; ar, my_class* t, const unsigned int file_version\n) {\n// retrieve data from archive required to construct new instance\nint m;\nar &gt;&gt; m;\n// create and load data through pointer to object\n// tracking handles issues of duplicates.\nobject* optr;\nar &gt;&gt; optr;\n// invoke inplace constructor to initialize instance of my_class\n::new(t)my_class(m, *optr);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/Boost/Serialization/#6","title":"6 \u6269\u5c55","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/Boost/Serialization/#61-saveload","title":"6.1 \u7c7b\u5e8f\u5217\u5316\u4e5f\u53ef\u4ee5save\u548cload\u5206\u79bb","text":"<ol> <li>\u6dfb\u52a0\u5934\u6587\u4ef6<code>boost/serialization/split_member.hpp</code></li> <li>\u5728\u7c7b\u4e2d\u4f7f\u7528<code>BOOST_SERIALIZATION_SPLIT_MEMBER()</code>\u51fd\u6570\u5b8f</li> <li>\u793a\u4f8b</li> </ol> <pre><code>#include &lt;boost/serialization/string.hpp&gt;\n#include&lt;boost/serialization/access.hpp&gt;\n#include &lt;boost/serialization/split_member.hpp&gt;\nclass Base\n{\nprivate:\nfriend class boost::serialization::access;\nstd::string m_str;\ntemplate&lt;class Archive&gt;\nvoid save(Archive&amp; ar, const unsigned int version)const\n{\nar &lt;&lt; m_str;\n}\ntemplate&lt;class Archive&gt;\nvoid load(Archive&amp; ar, const unsigned int version)\n{\nar &gt;&gt; m_str;\n}\nBOOST_SERIALIZATION_SPLIT_MEMBER()\npublic:\nBase() :m_str(\"\") {}\nBase(std::string str) :m_str(str) {}\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/Boost/Serialization/#62-serialize","title":"6.2 serialize\u51fd\u6570\u4e0e\u7c7b\u5206\u79bb\uff0c\u53ef\u4f5c\u4e3a\u7c7b\u5916\u51fd\u6570\uff08\u53ef\u58f0\u660e\u7c7b\u53cb\u5143\u51fd\u6570\u65b9\u4fbf\u8bbf\u95ee\u7c7b\u4f7f\u7528\u6210\u5458\uff09","text":"<ol> <li>\u7c7b\u6210\u5458\u51fd\u6570<code>void serialize(Archive&amp; ar, const unsigned int version)</code>\u6539\u6210\u7c7b\u5916\u51fd\u6570\uff0c\u5982<code>void serialize(Archive&amp; ar, Base&amp; base, const unsigned int version)</code></li> <li>\u793a\u4f8b</li> </ol> <pre><code>#include&lt;boost/serialization/map.hpp&gt;\n#include&lt;map&gt;\n#include&lt;string&gt;\nusing namespace std;\nclass Base\n{\npublic:\nBase() :m_i(0), m_pb(NULL), m_mp({}) {}\nBase(int i, Base* pb, std::map&lt;string, int&gt; mp) :m_i(i), m_pb(pb), m_mp(mp) {}\nprivate:\nfriend class boost::serialization::access;\n\ntemplate&lt;class Archive&gt;\nfriend void serialize(Archive&amp; ar, Base&amp; base, const unsigned int version);\nint m_i;\nBase* m_pb;\nstd::map&lt;string, int&gt; m_mp;\n};\ntemplate&lt;class Archive&gt;\nvoid serialize(Archive&amp; ar, Base&amp; base,const unsigned int version)\n{\nar&amp; base.m_i;\nar&amp; base.m_pb;\nar&amp; base.m_mp;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/Boost/Serialization/#63","title":"6.3 \u6dfb\u52a0\u7248\u672c\u4fe1\u606f","text":"<ol> <li>\u6dfb\u52a0\u5934\u6587\u4ef6<code>boost/serialization/version.hpp</code></li> <li>\u7c7b\u5916\u4f7f\u7528<code>BOOST_CLASS_VERSION</code>\u51fd\u6570\u5b8f</li> </ol> <pre><code>#include &lt;boost/serialization/string.hpp&gt;\n#include&lt;boost/serialization/access.hpp&gt;\n#include &lt;boost/serialization/version.hpp&gt;\nclass Base\n{\nprivate:\nfriend class boost::serialization::access;\nstd::string m_str;\ntemplate&lt;class Archive&gt;\nvoid serialize(Archive&amp; ar, const unsigned int version)\n{\nif (version &gt; 0)\nar&amp; m_str;\n}\npublic:\nBase():m_str(\"\") {}\nBase(std::string str) :m_str(str) {}\n};\nBOOST_CLASS_VERSION(Base, 1)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/Boost/Serialization/#7","title":"7 \u53c2\u8003\u8d44\u6599","text":"<ul> <li>\u5b98\u7f51\u6587\u6863boost.serialization</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/Boost/boost/","title":"boost","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/Boost/boost/#1-boost","title":"1 boost\u5e93\u7f16\u8bd1","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/Boost/boost/#11-boost","title":"1.1 \u5e38\u7528\u7684boost\u5e93\u7f16\u8bd1\u6307\u4ee4\u89e3\u91ca","text":"<ul> <li>\u5e38\u7528\u7684\u7f16\u8bd1\u6307\u4ee4</li> <li>\u793a\u4f8b</li> <li>\u6269\u5c55\u90e8\u5206visual studio\u7684msvc\u7248\u672c</li> <li><code>link=static|shared</code> \u6307boost\u751f\u6210\u7684\u52a8\u6001\u5e93\u8fd8\u662f\u9759\u6001\u5e93\uff0c\u5982\uff1a\u751f\u6210regex\u5e93\u65f6\u662f\u751f\u6210\u9759\u6001\u5e93\u8fd8\u662f\u52a8\u6001\u5e93</li> <li><code>static</code>\u9759\u6001\u5e93</li> <li><code>shared</code>\u52a8\u6001\u5e93</li> <li>\u9ed8\u8ba4\u503c: <code>static</code></li> <li><code>runtime-link=static|shared</code> \u6307boost\u94fe\u63a5\u7cfb\u7edf\u8fd0\u884c\u65f6\u5e93\u7684\u65b9\u5f0f\uff0c\u5982\uff1aregex\u5e93\u9700\u8981\u5176\u5b83\u5e93\u65f6\uff0c\u662f\u4f7f\u7528\u9759\u6001\u94fe\u63a5\u8fd8\u662f\u52a8\u6001\u94fe\u63a5</li> <li><code>static</code>\u9759\u6001\u5e93</li> <li><code>shared</code>\u52a8\u6001\u5e93</li> <li>\u9ed8\u8ba4\u503c: <code>shared</code></li> <li><code>--with--&lt;library&gt;</code> \u6307\u5b9a\u54ea\u4e00\u4e2a\u5e93\u9700\u8981\u7f16\u8bd1\uff0c\u5982 <code>--with-regex</code> \u5219\u4f1a\u6307\u7f16\u8bd1regex\u5e93\uff0c\u5ffd\u7565 <code>--with-</code> \u9ed8\u8ba4\u7f16\u8bd1\u6240\u4ee5\u5e93</li> <li><code>--without-&lt;library&gt;</code> \u6307\u5b9a\u54ea\u4e00\u4e2a\u5e93\u4e0d\u9700\u8981\u7f16\u8bd1\uff0c\u5982 ``--without-regex \u5219\u9664\u4e86regex\u5e93\u5916\uff0c\u7f16\u8bd1\u5176\u5b83\u6240\u6709\u5e93</li> <li><code>threading=single|multi</code> \u6307\u5b9a\u662f\u5426\u751f\u6210\u591a\u7ebf\u7a0b\u5e93</li> <li><code>single</code> \u751f\u6210\u5355\u7ebf\u7a0b\u5e93</li> <li><code>multi</code> \u751f\u6210\u591a\u7ebf\u7a0b\u5e93</li> <li>\u9ed8\u8ba4\u503c: <code>multi</code></li> <li><code>toolset=&lt;toolset&gt;</code> \u6307\u5b9a\u7f16\u8bd1\u5e93\u7684\u5de5\u5177\u96c6\uff0c\u5982\uff1a<code>toolset=msvc-12.0</code></li> <li><code>variant=debug|release</code> \u6307\u5b9a\u751f\u6210debug\u8fd8\u662frelease\u7248\u7684\u5e93</li> <li><code>install</code> \u4f1a\u540c\u65f6\u751f\u6210lib\u548cinclude\u6587\u4ef6</li> <li><code>stage</code> \u53ea\u4f1a\u751f\u6210lib\u6587\u4ef6</li> <li><code>--prefix=&lt;INSTALLDIR&gt;</code> \u4e0e<code>install</code>\u9009\u9879\u4e00\u8d77\u7528\uff0c\u6307\u5b9ainclude\u548clib\u6587\u4ef6\u751f\u6210\u76ee\u5f55</li> <li><code>--stagedir=&lt;STAGEDIR&gt;</code> \u4e0e<code>stage</code>\u9009\u9879\u4e00\u8d77\u7528\uff0c\u6307\u5b9alib\u6587\u4ef6\u751f\u6210\u76ee\u5f55</li> <li>\u9ed8\u8ba4\u503c\uff1a<code>./stage</code></li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/Boost/boost/#12","title":"1.2 \u793a\u4f8b","text":"<ul> <li>\u5e38\u7528\u7684\u7f16\u8bd1\u547d\u4ee4</li> </ul> <pre><code>b2 stage --with-regex toolset=msvc-14.2 link=static runtime-link=shared --stagedir=\"E:\\boost\\lib\"\n</code></pre> <ul> <li>\u67e5\u8be2\u9700\u8981\u7f16\u8bd1\u7684\u5e93</li> </ul> <pre><code>b2 --show-libraries\n</code></pre> <p>\u4ee5\u4e0a\u547d\u4ee4\u4f1a\u5728E:\\boost\\lib\u76ee\u5f55\u4e0b\u751f\u6210\u9759\u6001\u3001\u591a\u7ebf\u7a0b\u3001\u9002\u7528vs2019\u768432|64\u4f4d\u3001debug|release\u7248\u7684regex\u5e93\u3002</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/Boost/boost/#13-visual-studiomsvc","title":"1.3 \u6269\u5c55\uff1a\u90e8\u5206visual studio\u7684msvc\u7248\u672c","text":"<ul> <li>msvc-14.2\u662fvs2019 </li> <li>msvc-14.1\u662fvs2017</li> <li>msvc-14.0\u662fvs2015</li> <li>msvc-12.0\u662fvs2013</li> <li>msvc-10.0\u662fvs2010</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/Boost/boost/#2-boost","title":"2 boost\u5e93\u5e38\u7528\u90e8\u5206","text":"<ul> <li>[ ] Asio (Portable networking and other low-level I/O, including sockets, timers, hostname resolution, socket iostreams, serial ports, file descriptors and Windows HANDLEs.)</li> <li>[ ] Compute (Parallel/GPU-computing library)</li> <li>[ ] DLL (Library for comfortable work with DLL and DSO.)</li> <li>[ ] format \u5b57\u7b26\u4e32\u7684\u683c\u5f0f\u5316</li> <li>[ ] filesystem \u6587\u4ef6\u7cfb\u7edf\uff08c++17\uff09</li> <li>[ ] Interprocess (\u8fdb\u7a0b\u95f4\u901a\u8baf)</li> <li>[ ] JSON (JSON parsing, serialization, and DOM in C++11)</li> <li>[ ] lexical_cast \u5b57\u7b26\u4e32\u4e0e\u6570\u503c\u7684\u8f6c\u6362</li> <li>[ ] log \u65e5\u5fd7</li> <li>[ ] Timer (Event timer, progress timer, and progress display classes.)</li> <li>[ ] Pool (Memory pool management.)</li> <li>[ ] Parameter (Boost.Parameter Library - Write functions that accept arguments by name)</li> <li>[x] Process \u53ef\u79fb\u690d\u521b\u5efa\u8fdb\u7a0b</li> <li>[x] Serialization (\u5e8f\u5217\u5316)</li> <li>[ ] Stacktrace (Gather, store, copy and print backtraces.)</li> <li>[ ] System (\u9519\u8bef\u5904\u7406)</li> <li>[ ] Timer (Event timer, progress timer, and progress display classes.) </li> <li>[ ] Units (Zero-overhead dimensional analysis and unit/quantity manipulation and conversion.)</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/OpenGL/openGL/","title":"openGL","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/OpenGL/openGL/#1-opengl","title":"1 openGL\u91cd\u8981\u5e93","text":"<ul> <li>GLFW\uff1a</li> <li>\u529f\u80fd\uff1a\u5b83\u5141\u8bb8\u7528\u6237\u521b\u5efaOpenGL\u4e0a\u4e0b\u6587\uff0c\u5b9a\u4e49\u7a97\u53e3\u53c2\u6570\u4ee5\u53ca\u5904\u7406\u7528\u6237\u8f93\u5165</li> <li>\u7c7b\u4f3c\u5e93\uff1aGLUT</li> <li>GLAD\uff1a</li> <li>\u529f\u80fd\uff1a\u7531\u4e8eOpenGL\u9a71\u52a8\u7248\u672c\u4f17\u591a\uff0c\u5b83\u5927\u591a\u6570\u51fd\u6570\u7684\u4f4d\u7f6e\u90fd\u65e0\u6cd5\u5728\u7f16\u8bd1\u65f6\u786e\u5b9a\u4e0b\u6765\uff0c\u9700\u8981\u5728\u8fd0\u884c\u65f6\u67e5\u8be2\uff0cGLAD\u5c31\u662f\u5bfc\u51faopenGL\u51fd\u6570\u7684</li> <li>\u7c7b\u4f3c\u5e93\uff1aGLEW</li> <li>GLM\uff1a</li> <li>\u529f\u80fd\uff1a\u63d0\u4f9b\u4e00\u4e9b\u9ad8\u7ea7\u6570\u5b66\u8fd0\u7b97\uff0c\u5982\u77e9\u9635\u8fd0\u7b97</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/fmt/fmt%E6%95%99%E7%A8%8B/","title":"fmt\u6559\u7a0b","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/fmt/fmt%E6%95%99%E7%A8%8B/#_1","title":"\u5b89\u88c5\u7f16\u8bd1","text":"<p>\u6ce8\u610f\uff1afmt\u53ef\u4ee5\u4ee5\u52a0\u8f7dlib\u5e93\u5f62\u5f0f\u4f7f\u7528\u6216\u8005\u4ec5\u4ec5\u5305\u542b\u5934\u6587\u4ef6\uff0c\u82e5\u5305\u542b\u5934\u6587\u4ef6\u4f7f\u7528\u9700\u8981\u989d\u5916\u5305\u542bsrc\u76ee\u5f55\u4e0b\u6587\u4ef6 - fmt\u6e90\u7801\u76ee\u5f55\u5982\u4e0b</p> <pre><code>\u251c\u2500.github\n\u251c\u2500doc\n\u251c\u2500include\n\u251c\u2500src\n\u251c\u2500support\n\u2514\u2500test\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/fmt/fmt%E6%95%99%E7%A8%8B/#_2","title":"\u5934\u6587\u4ef6\u5305\u542b\u4f7f\u7528","text":"<ol> <li>\u5c06src\u76ee\u5f55\u53ca\u5176\u5b50\u6587\u4ef6\u79fb\u52a8\u5230include\u76ee\u5f55\u4e0b</li> <li>\u5728\u9879\u76ee\u4e2d\u5305\u542binclude\u9879\u76ee\uff0c\u5982vs\u4e2d\u64cd\u4f5c:\u9879\u76ee-&gt;\u53f3\u952e\u5c5e\u6027-&gt;c++-&gt;\u9644\u52a0\u5305\u542b\u76ee\u5f55-&gt;\u952e\u5165fmt include\u8def\u5f84</li> <li>\u9879\u76ee\u4e2d\u4f7f\u7528fmt\u524d\u5305\u542b\u5934\u6587\u4ef6<code>#include&lt;src/format.cc&gt;</code>\u3001<code>#include&lt;fmt/core.h&gt;</code>\u548c\u5176\u5b83\u6240\u9700\u8981\u5934\u6587\u4ef6</li> </ol> <p>\u6ce8\u610f\uff1a\u5934\u6587\u4ef6<code>#include&lt;src/format.cc&gt;</code>\u4e00\u5b9a\u8981\u5305\u542b</p> <pre><code>#include&lt;fmt/core.h&gt;\n//\u4e0d\u662f\u7528lib\u5219\u9700\u8981\u989d\u5916\u5305\u542bsrc\u76ee\u5f55\u4e0bformat.cc\u6587\u4ef6\uff0c\u5426\u5219\u4f1a\u7f16\u8bd1\u62a5\u9519\n#include&lt;src/format.cc&gt;\nint main()\n{\nstd::string str = fmt::format(\"hello {}!\", \"world\");\nfmt::print(\"hello {}!\", \"world\");\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/fmt/fmt%E6%95%99%E7%A8%8B/#lib","title":"\u7f16\u8bd1lib\u4f7f\u7528","text":"<ul> <li>\u7f16\u8bd1lib\u5e93</li> <li>\u8fdb\u5165fmt\u9879\u76ee\uff0c\u6267\u884c\u4ee5\u4e0b\u6307\u4ee4</li> <li><code>mkdir build&amp;&amp;cd build</code></li> <li><code>make ..</code></li> <li>\u5982\u679c\u662fwindows\u4e14\u5b89\u88c5vs\uff0c\u5219\u4f1a\u5728build\u76ee\u5f55\u4e0b\u751f\u6210FMT.sln\u6587\u4ef6\uff0c\u4f7f\u7528vs\u6253\u5f00</li> <li>\u8fdb\u5165FMT\u9879\u76ee\uff0c\u5728fmt\u9879\u76ee\u4e0a\u70b9\u51fb\u751f\u6210\uff0c\u5c06\u4f1a\u751f\u6210lib\u6587\u4ef6 </li> <li>\u4f7f\u7528lib\u5e93</li> <li>\u5728\u9879\u76ee\u4e2d\u5305\u542binclude\u8def\u5f84</li> <li>\u8f7d\u5165lib\u5e93,<code>#pragma comment(lib,\"../lib/fmtd.lib\")</code></li> <li>\u5305\u542b\u5934\u6587\u4ef6<code>#include&lt;fmt/core.h&gt;</code>\u4ee5\u53ca\u5176\u5b83\u6240\u9700\u8981\u6587\u4ef6</li> </ul> <pre><code>#pragma comment(lib,\"../lib/fmtd.lib\")\n#include&lt;fmt/core.h&gt;\nint main()\n{\nstd::string str = fmt::format(\"hello {}!\", \"world\");\nfmt::print(\"hello {}!\", \"world\");\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/fmt/fmt%E6%95%99%E7%A8%8B/#_3","title":"\u5165\u95e8","text":"<ul> <li>fmt::format\u683c\u5f0f\u5316\u5b57\u7b26\u4e32</li> <li>fmt::print \u6253\u5370\u5230\u6807\u51c6\u8f93\u51fa</li> <li>fmt\u4f7f\u7528\u82b1\u62ec\u53f7<code>{}</code>\u6765\u4ee3\u66ff\u4e00\u4e2a\u53ef\u63d2\u5165\u5b57\u7b26\u4e32</li> </ul> <pre><code>#include&lt;fmt/core.h&gt;\n#include&lt;src/format.cc&gt;\nint main()\n{\n//\u82b1\u62ec\u53f7\u4e2d\u53ef\u9009\u586b0 1 2...\u7528\u6765\u6807\u8bb0\u53c2\u6570\u7d22\u5f15\nfmt::print(\"{},{}{}\", \"hello\", \"world\", \"!\");\nfmt::print(\"{0},{1}{2}\", \"hello\", \"world\", \"!\");\nfmt::format(\"{},{}{}\", \"hello\", \"world\", \"!\");\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/fmt/fmt%E6%95%99%E7%A8%8B/#_4","title":"\u57fa\u7840","text":"<ul> <li>fmt\u6709\u4e00\u7cfb\u5217\u7684\u683c\u5f0f\u5316\u6807\u5fd7\uff0c\u8be6\u89c1\u5b98\u65b9\u6587\u6863</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/fmt/fmt%E6%95%99%E7%A8%8B/#_5","title":"\u8fdb\u9636","text":"<ul> <li>fmt\u652f\u6301\u81ea\u5b9a\u4e49\u683c\u5f0f\u5316\u5668\uff0c\u8be6\u89c1\u5b98\u65b9\u6587\u6863</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/googletest/googletest%E6%95%99%E7%A8%8B/","title":"googletest\u6559\u7a0b","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/googletest/googletest%E6%95%99%E7%A8%8B/#1","title":"1 \u7f16\u8bd1\u5b89\u88c5","text":"<ol> <li>\u6267\u884c\u4ee5\u4e0b\u6307\u4ee4\u4e0b\u8f7d\u5b89\u88c5</li> </ol> <pre><code>git clone https://github.com/google/googletest.git\ncd googletest        # \u4ed3\u5e93\u4ee3\u7801\u4e3b\u76ee\u5f55.\nmkdir build          # Create a directory to hold the build output.\ncd build\ncmake ..             # \u53ea\u751f\u6210GoogleTest\u4e0d\u751f\u6210GoogleMock\n</code></pre> <p>::: warning <code>cd googletest</code>\u662f\u8fdb\u5165\u4e3b\u76ee\u5f55\u4e0b\uff0c\u800c\u4e0d\u662fgoogletest/googletest\u76ee\u5f55 :::</p> <ol> <li>\u5728windows\u4e0bbuild\u76ee\u5f55\u4f1a\u751f\u6210.sln\u6587\u4ef6\uff0c\u4f7f\u7528visual studio\u6253\u5f00</li> <li>\u751f\u6210gtest\u3001gtest_main\u9879\u76ee\u7684\u9759\u6001\u5e93</li> </ol>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/googletest/googletest%E6%95%99%E7%A8%8B/#2-googletest","title":"2 googletest\u7684\u4f7f\u7528","text":"<p>\u4e0a\u9762\u7684\u7f16\u8bd1\u5b89\u88c5\u9ed8\u8ba4\u4f1a\u751f\u6210googletest\u7684\u9759\u6001\u5e93lib\u3002 1. \u5305\u542blib\u5e93    1. \u4f7f\u7528<code>#pragma comment</code>\u6dfb\u52a0lib\u5e93    2. \u6216\u5728vs\u4e0a\u914d\u7f6elib\u5e93\u8def\u5f84\u548clib\u540d 2. \u5305\u542b\u5934\u6587\u4ef6\u8def\u5f84\uff1a\u5c06googletest/googletest/include\u6dfb\u52a0\u5230vs\u5305\u542b\u76ee\u5f55\u4e2d 3. \u5305\u542b\u5934\u6587\u4ef6gtest.h\uff1a\u5728\u4f7f\u7528googletest\u7684\u5730\u65b9\u9996\u5148\u5305\u542bgtest.h\u6587\u4ef6</p> <pre><code>#include \"gtest/gtest.h\"\n\n#ifdef _DEBUG\n#pragma comment(lib,\"gtest_maind.lib\")\n#pragma comment(lib,\"gtestd.lib\")\n#else\n#pragma comment(lib,\"gtest_main.lib\")\n#pragma comment(lib,\"gtest.lib\")\n#endif\n\nTEST(TestCaseName, TestName) {\nEXPECT_EQ(1, 1);\nEXPECT_TRUE(true);\n}\n\n//int main(int argc, char* argv[]) {\n//  testing::InitGoogleTest(&amp;argc, argv);\n//  return RUN_ALL_TESTS();\n//}\n</code></pre> <p>\u8f93\u51fa\u7ed3\u679c</p> <pre><code>[==========] Running 1 test from 1 test suite.\n[----------] Global test environment set-up.\n[----------] 1 test from TestCaseName\n[ RUN      ] TestCaseName.TestName\n[       OK ] TestCaseName.TestName (0 ms)\n[----------] 1 test from TestCaseName (1 ms total)\n\n[----------] Global test environment tear-down\n[==========] 1 test from 1 test suite ran. (3 ms total)\n[  PASSED  ] 1 test.\n</code></pre> <p>\u6ce8\u610f\uff1a\u5728\u6211\u4eec\u7684\u7a0b\u5e8f\u4e2d\u4e0d\u9700\u8981\u63d0\u4f9bmian\u51fd\u6570\uff0cgoogletest\u4f1a\u63d0\u4f9b\uff0c\u5f53\u7136\u6211\u4eec\u4e5f\u53ef\u4ee5\u81ea\u5df1\u63d0\u4f9b - \u81ea\u5b9a\u4e49main\u51fd\u6570\uff0c\u9700\u8981\u4ee5\u4e0b\u5185\u5bb9</p> <pre><code>#include \"gtest/gtest.h\"\nint main(int argc, char* argv[]) {\ntesting::InitGoogleTest(&amp;argc, argv);\nreturn RUN_ALL_TESTS();\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/googletest/googletest%E6%95%99%E7%A8%8B/#21-texttext_f","title":"2.1 TEXT\u548cTEXT_F","text":"<p>googletest\u4e2d\u67092\u7c7b\u6d4b\u8bd5\u65b9\u5f0f\uff0c\u57fa\u672c\u6d4b\u8bd5TEXT\u548c\u6d4b\u8bd5\u5939\u5177TEXT_F\uff0cTEXT_F\u662f\u7528\u6765\u590d\u7528\u540c\u4e00\u6d4b\u8bd5\u6570\u636e\uff0c\u907f\u514d\u5197\u4f59\u7684\u3002\u5177\u4f53\u4f7f\u7528\u53ef\u53c2\u8003\u5b98\u65b9\u6587\u6863  - https://github.com/google/googletest/blob/master/docs/primer.md</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/googletest/googletest%E6%95%99%E7%A8%8B/#22-environment","title":"2.2 Environment\u7c7b","text":"<p><code>Environment</code>\u7528\u4f5c\u6d4b\u8bd5\u73af\u5883\u751f\u6210\u91ca\u653e\uff0c\u5982\u521d\u59cb\u5316\uff0c\u6e05\u7406\u64cd\u4f5c\u653e\u5165\u5176\u4e2d\u3002 1. \u5b9a\u4e49\u5b50\u7c7b\u7ee7\u627fEnvironment\u7c7b\uff0c\u5b9e\u73b0SetUp\u3001TearDown\u51fd\u6570    1. <code>SetUp</code>:\u6784\u9020\u65f6\u8c03\u7528    2. <code>TearDown</code>:\u6790\u6784\u65f6\u8c03\u7528 2. \u5728main\u51fd\u6570\u4e2d\u4f7f\u7528AddGlobalTestEnvironment\u51fd\u6570</p> <pre><code>class TestEnvironment : public ::testing::Environment {\npublic:\nvoid SetUp() override { TestNcsf::init(); }\nvoid TearDown() override { TestNcsf::clean(); }\n};\nint main(int argc, char** argv) {\n::testing::AddGlobalTestEnvironment(new gtest_ncsf::TestEnvironment);\n::testing::InitGoogleTest(&amp;argc, argv);\nreturn RUN_ALL_TESTS();\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/googletest/googletest%E6%95%99%E7%A8%8B/#3","title":"3 \u547d\u4ee4\u884c\u53c2\u6570\u7684\u4f7f\u7528","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/googletest/googletest%E6%95%99%E7%A8%8B/#31","title":"3.1 \u663e\u793a\u6d4b\u8bd5\u7528\u4f8b","text":"<ul> <li>\u53c2\u6570\uff1a<code>--gtest_list_tests</code></li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>./\u7a0b\u5e8f\u540d --gtest_list_tests\n</code></pre> <p>\u6b64\u547d\u4ee4\u53c2\u6570\u53ea\u663e\u793a\u6d4b\u8bd5\u7528\u4f8b\uff0c\u4e0d\u4f1a\u6267\u884c\u6d4b\u8bd5\u7528\u4f8b</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/googletest/googletest%E6%95%99%E7%A8%8B/#32","title":"3.2 \u8fc7\u6ee4\u6d4b\u8bd5\u7528\u4f8b","text":"<ul> <li>\u53c2\u6570:<code>--gtest_filter</code></li> <li><code>:</code>:\u8fde\u63a5\u591a\u4e2a\u5339\u914d\u9879</li> <li><code>-</code>:\u5339\u914d\u9879\u53d6\u53cd</li> <li><code>*</code>:\u5339\u914d\u591a\u4e2a\u5b57\u7b26</li> <li><code>?</code>:\u5339\u914d\u5355\u4e2a\u5b57\u7b26</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>./\u7a0b\u5e8f\u540d --gtest_filter=\u6d4b\u8bd5\u7528\u4f8b\u540d(TestSuiteName.TestName)\n</code></pre> <ul> <li>\u66f4\u591a\u4f7f\u7528\u53c2\u6570\u89e3\u91ca\uff1a</li> <li><code>./foo_test</code> Has no flag, and thus runs all its tests.</li> <li><code>./foo_test --gtest_filter=*</code> Also runs everything, due to the single match-everything * value.</li> <li><code>./foo_test --gtest_filter=FooTest.*</code> Runs everything in test suite FooTest .</li> <li><code>./foo_test --gtest_filter=*Null*:*Constructor*</code> Runs any test whose full name contains either \"Null\" or \"Constructor\" .</li> <li><code>./foo_test --gtest_filter=-*DeathTest.*</code> Runs all non-death tests.</li> <li><code>./foo_test --gtest_filter=FooTest.*-FooTest.Bar</code> Runs everything in test suite FooTest except FooTest.Bar.</li> <li><code>./foo_test --gtest_filter=FooTest.*:BarTest.*-FooTest.Bar:BarTest.Foo</code> Runs everything in test suite FooTest except FooTest.Bar and everything in test suite BarTest except BarTest.Foo.</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/googletest/googletest%E6%95%99%E7%A8%8B/#33","title":"3.3 \u91cd\u590d\u6267\u884c\u6d4b\u8bd5","text":"<ul> <li>\u53c2\u6570\uff1a<code>--gtest-repeat</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ foo_test --gtest_repeat=1000\nRepeat foo_test 1000 times and don't stop at failures.\n\n$ foo_test --gtest_repeat=-1\nA negative count means repeating forever.\n\n$ foo_test --gtest_repeat=1000 --gtest_break_on_failure\nRepeat foo_test 1000 times, stopping at the first failure.  This\nis especially useful when running under a debugger: when the test\nfails, it will drop into the debugger and you can then inspect\nvariables and stacks.\n\n$ foo_test --gtest_repeat=1000 --gtest_filter=FooBar.*\nRepeat the tests whose name matches the filter 1000 times.\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/spdlog/spdlog%E6%95%99%E7%A8%8B/","title":"spdlog\u6559\u7a0b","text":"<p>\u65e5\u5fd7\u5e93\u91cd\u8981\u6d89\u53ca3\u4e2a\u91cd\u8981\u6a21\u5757\uff1bsink\u662f\u65e5\u5fd7\u6700\u7ec8\u6d41\u5411\u7684\u76ee\u7684\u5730\uff0c\u5982\u6587\u4ef6\uff0c\u63a7\u5236\u53f0\uff1blogger\u662f\u65e5\u5fd7\u4fe1\u606f\u6570\u636e\uff0c\u4e34\u65f6\u4fdd\u5b58\u7740\u8981\u8f93\u51fa\u5230sink\u7684\u4fe1\u606f\uff1bformater\u662f\u7531\u6765\u683c\u5f0f\u5316\u65e5\u5fd7\u4fe1\u606f\u7684\uff0c\u4f7f\u65e5\u5fd7\u4fe1\u606f\u6309\u4e00\u5b9a\u7684\u683c\u5f0f\u8f93\u51fa\u5230sink\u4e2d\uff0c\u6bd4\u5982\u4f7f\u65e5\u5fd7\u5e26\u65f6\u95f4\u4fe1\u606f\u3002 - sink \u65e5\u5fd7\u8f93\u51fa\u76ee\u6807 - logger \u65e5\u5fd7\u4fe1\u606f\u6e90 - formater \u65e5\u5fd7\u4fe1\u606f\u683c\u5f0f\u5316</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/spdlog/spdlog%E6%95%99%E7%A8%8B/#_1","title":"\u7f16\u8bd1\u5b89\u88c5","text":"<p>spdlog\u53ea\u542b\u5934\u6587\u4ef6\uff0c\u4e0d\u9700\u8981\u989d\u5916\u7f16\u8bd1\uff0c\u4f7f\u7528\u65f6\u76f4\u63a5\u5305\u542bspdlog\u5e93\u4e2d\u7684include\u76ee\u5f55\u5c31\u884c\u3002</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/spdlog/spdlog%E6%95%99%E7%A8%8B/#_2","title":"\u5165\u95e8","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/spdlog/spdlog%E6%95%99%E7%A8%8B/#logger","title":"\u4f7f\u7528\u9ed8\u8ba4logger\u8bb0\u5f55\u5668","text":"<ul> <li>\u4f7f\u7528\u65b9\u5f0f\uff1a</li> <li>\u5934\u6587\u4ef6\uff1a<code>#include&lt;spdlog/spdlog.h&gt;</code></li> <li><code>spdlog::info()</code>\u7b49</li> <li>\u9ed8\u8ba4\u7684\u8bb0\u5f55\u5668\u7279\u70b9</li> <li>\u5199\u5230stdout\uff08\u63a7\u5236\u53f0\uff09</li> <li>\u5e26\u989c\u8272</li> <li>\u591a\u7ebf\u7a0b</li> </ul> <pre><code>#include&lt;spdlog/spdlog.h&gt;\nint main()\n{\nspdlog::info(\"Hello,{}\", \"world!\");\nspdlog::error(\"\u8fd9\u662f\u9519\u8bef\u4fe1\u606f\");\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/spdlog/spdlog%E6%95%99%E7%A8%8B/#_3","title":"\u8bbe\u7f6e\u9ed8\u8ba4\u65e5\u5fd7\u8bb0\u5f55\u5668\u5c5e\u6027","text":"<pre><code>#include&lt;spdlog/spdlog.h&gt;\nint main()\n{\n//\u8bbe\u7f6e\u65e5\u5fd7\u8fc7\u6ee4\u7b49\u7ea7\nspdlog::set_level(spdlog::level::level_enum::err);\n//\u8bbe\u7f6e\u65e5\u5fd7\u8f93\u51fa\u6a21\u5f0f\nspdlog::set_pattern(\"*** [%H:%M:%S %z] [thread %t] %v ***\");\nspdlog::info(\"Hello,{}\", \"world!\");\nspdlog::error(\"\u8fd9\u65f6\u9519\u8bef\u4fe1\u606f\");\n}\n</code></pre> <ul> <li>\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b,\u8fc7\u6ee4\u4e86error\u7b49\u7ea7\u4ee5\u4e0b\u7684\u65e5\u5fd7\u4fe1\u606f\uff0c\u5e76\u4e14\u8f93\u51fa\u81ea\u5b9a\u4e49\u7684\u6a21\u5f0f</li> </ul> <pre><code>*** [11:09:36 +08:00] [thread 18772] \u8fd9\u65f6\u9519\u8bef\u4fe1\u606f ***\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/spdlog/spdlog%E6%95%99%E7%A8%8B/#_4","title":"\u8bbe\u7f6e\u9ed8\u8ba4\u65e5\u5fd7\u8bb0\u5f55\u5668\u7684\u8bb0\u5f55\u5668","text":"<p>\u540c\u6837\u4e5f\u53ef\u4ee5\u7ed9\u9ed8\u8ba4\u7684\u8bb0\u5f55\u5668\u8bbe\u7f6e\u4e00\u4e2a\u8bb0\u5f55\u5668</p> <pre><code>#include&lt;spdlog/spdlog.h&gt;\n#include&lt;spdlog/sinks/basic_file_sink.h&gt;\n\nint main()\n{\nauto mylog=spdlog::basic_logger_mt(\"mylog\", \"1.log\");\nmylog-&gt;set_level(spdlog::level::level_enum::info);\nspdlog::set_default_logger(mylog);\nspdlog::info(\"info\");\nspdlog::debug(\"debug\");\nspdlog::error(\"error\");\n}\n</code></pre> <ul> <li>\u9ed8\u8ba4\u8bb0\u5f55\u5668\u4f7f\u7528\u4e86mylog\u8bb0\u5f55\u5668\uff0c\u6700\u7ec8\u751f\u6210\u65e5\u5fd7\u6587\u4ef61.log\uff0c1.log\u6570\u636e\u5982\u4e0b</li> </ul> <pre><code>[2021-01-16 11:17:45.262] [mylog] [info] info\n[2021-01-16 11:17:45.832] [mylog] [error] error\n</code></pre> <ul> <li>\u6ce8\u610f\u4e8b\u9879\uff1a\u5f53\u8bbe\u7f6e\u4e86\u9ed8\u8ba4\u65e5\u5fd7\u8bb0\u5f55\u5668\u540e\u518d\u53bb\u8bbe\u7f6e\u9ed8\u8ba4\u8bb0\u5f55\u5668\u7684\u5c5e\u6027\uff0c\u4e5f\u5c06\u4f1a\u751f\u6548\uff0c\u800c\u5728\u8bbe\u7f6e\u9ed8\u8ba4\u8bb0\u5f55\u5668\u524d\u8bbe\u7f6e\u7684\u5c5e\u6027\u5c06\u4f1a\u5931\u6548\uff0c\u56e0\u4e3a\u9ed8\u8ba4\u8bb0\u5f55\u5668\u4f1a\u88ab\u65b0\u8bb0\u5f55\u5668\u66ff\u6362</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/spdlog/spdlog%E6%95%99%E7%A8%8B/#_5","title":"\u57fa\u7840","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/spdlog/spdlog%E6%95%99%E7%A8%8B/#sinklogger","title":"sink\u548clogger","text":"<ul> <li>\u8981\u4f7f\u7528\u65e5\u5fd7\u9700\u8981\u4e00\u4e2asink\u548c\u4e00\u4e2alogger(\u5f53\u7136formater\u683c\u5f0f\u5316\u5668\u4e5f\u9700\u8981\uff0c\u4f46\u8fd9\u4e3b\u8981\u5176\u7f8e\u5316\u4f5c\u7528\uff0c\u4e0d\u5f71\u54cd\u65e5\u5fd7\u4e3b\u8981\u529f\u80fd)\uff0clogger\u53ef\u4ee5\u5173\u8054\u591a\u4e2asink\uff0csink\u540c\u6837\u53ef\u4ee5\u5173\u8054\u591a\u4e2alogger\u3002</li> <li><code>sink</code>\u69fd\u6307\u65e5\u5fd7\u6700\u7ec8\u8f93\u51fa\u7684\u76ee\u6807\uff0c\u6bd4\u5982\u6587\u4ef6\uff0cstdout\u7b49</li> <li><code>logger</code>\u8bb0\u5f55\u5668\u662f\u4e34\u65f6\u8bb0\u5f55\u4fe1\u606f\u7684\u8f7d\u4f53\uff0c\u8fd9\u4e9b\u65e5\u5fd7\u4fe1\u606f\u6700\u7ec8\u9700\u8981\u6d41\u5411<code>sink</code></li> <li>spdlog\u63d0\u4f9b\u4e86\u5de5\u5382\u51fd\u6570\u4fbf\u4e8e\u521b\u5efa\u65e5\u5fd7\uff0c\u4e5f\u53ef\u4ee5\u624b\u52a8\u521b\u5efalogger\u518d\u5173\u8054sink\uff0c\u7136\u540e\u9009\u62e9\u6ce8\u518c\u3002</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/spdlog/spdlog%E6%95%99%E7%A8%8B/#logger_1","title":"\u4f7f\u7528\u5de5\u5382\u51fd\u6570\u521b\u5efalogger","text":"<ul> <li>\u5728\u6bcf\u4e00\u4e2asink\u5934\u6587\u4ef6\u4e2d\u90fd\u6709\u54cd\u5e94\u7684\u5de5\u5382\u51fd\u6570\uff0c\u5305\u542b\u7ebf\u7a0b\u5b89\u5168<code>_mt</code>,\u7ebf\u7a0b\u4e0d\u5b89\u5168<code>st</code>\u7248</li> </ul> <pre><code>#include&lt;spdlog/spdlog.h&gt;\n#include&lt;spdlog/sinks/basic_file_sink.h&gt;\nint main()\n{\n//\u5de5\u5382\u51fd\u6570\nauto mylog=spdlog::basic_logger_mt(\"mylog\", \"1.log\");\nmylog-&gt;info(\"hello \u6211\u662f\u7531\u5de5\u5382\u51fd\u6570\u521b\u5efa\");\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/spdlog/spdlog%E6%95%99%E7%A8%8B/#logger_2","title":"\u624b\u52a8\u521b\u5efalogger","text":"<ul> <li>\u624b\u52a8\u521b\u5efalogger\u4e3b\u8981\u6d89\u53ca3\u6b65</li> <li>\u521b\u5efasink</li> <li>\u521b\u5efalogger\u5e76\u5173\u8054sink</li> <li>\u6ce8\u518clogger[\u53ef\u9009]</li> </ul> <pre><code>#include&lt;spdlog/spdlog.h&gt;\n#include&lt;spdlog/sinks/basic_file_sink.h&gt;\nint main()\n{\n//\u624b\u52a8\u6ce8\u518c\n//1. \u521b\u5efasink\nauto sink_file = std::make_shared&lt;spdlog::sinks::basic_file_sink_mt&gt;(\"1.log\");\n//2. \u521b\u5efalogger\u5e76\u5173\u8054sink\nauto file_log = std::make_shared&lt;spdlog::logger&gt;(\"file_log\", sink_file);\n//3. \u53ef\u9009\u6ce8\u518clogger\nspdlog::register_logger(file_log);\nfile_log-&gt;info(\"hello \u6211\u662f\u624b\u52a8\u521b\u5efa\u7684\");\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/spdlog/spdlog%E6%95%99%E7%A8%8B/#logger_3","title":"\u4ece\u6ce8\u518c\u5668\u4e2d\u83b7\u53d6logger","text":"<p>\u5f53\u6211\u4eec\u4f7f\u7528\u4e86\u5de5\u5382\u51fd\u6570\u521b\u5efalogger\u65f6\uff0c\u5982<code>auto mylog=spdlog::basic_logger_mt(\"mylog\", \"1.log\");</code>,\u6216\u8005\u624b\u52a8\u6ce8\u518c\uff0c\u5982<code>spdlog::register_logger(file_log);</code>,logger\u5c06\u4f1a\u88ab\u4fdd\u5b58\uff0c\u5f53\u6211\u4eec\u8c03\u7528<code>spdlog::get</code>\u51fd\u6570\u53ef\u4ee5\u83b7\u53d6logger</p> <pre><code>#include&lt;spdlog/spdlog.h&gt;\n#include&lt;spdlog/sinks/stdout_color_sinks.h&gt;\nint main()\n{\n{\n//\u540dmylog\u7684logger\u4f1a\u88ab\u6ce8\u518c \nauto mylog = spdlog::stdout_color_st(\"mylog\");\n}   //spdlog::get\u67e5\u627elogger\uff0c\u67e5\u627e\u5931\u8d25\u4f1a\u8fd4\u56denullptr\nif (auto mylog = spdlog::get(\"mylog\"); mylog != nullptr)\n{\nmylog-&gt;info(\"hello\");\n}\n}\n</code></pre> <ul> <li>\u8f93\u51fa\u7ed3\u679c</li> </ul> <pre><code>[2021-01-16 16:05:50.559] [mylog] [info] hello\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/spdlog/spdlog%E6%95%99%E7%A8%8B/#loggersink","title":"\u4e00\u4e2alogger\u7ed1\u5b9a\u5bf9\u4e2asink","text":"<p>\u5728\u5de5\u4f5c\u4e2d\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u5373\u60f3\u8f93\u51fa\u5230\u6587\u4ef6\uff0c\u53c8\u60f3\u8f93\u51fa\u5230\u63a7\u5236\u53f0\u7684\u60c5\u51b5\uff0c\u8fd9\u662f\u4f7f\u7528\u4e00\u4e2alogger\u7ed1\u5b9a\u591a\u4e2asink\u5c06\u5f88\u597d\u89e3\u51b3\u8fd9\u7c7b\u95ee\u9898</p> <pre><code>#include&lt;vector&gt;\n#include&lt;spdlog/spdlog.h&gt;\n#include&lt;spdlog/sinks/basic_file_sink.h&gt;\n#include&lt;spdlog/sinks/stdout_color_sinks.h&gt;\nint main()\n{\n//1. \u521b\u5efasink\nauto sink_file = std::make_shared&lt;spdlog::sinks::basic_file_sink_mt&gt;(\"1.log\");\nauto sink_stdout = std::make_shared&lt;spdlog::sinks::stdout_color_sink_mt&gt;();\n\n//2. \u521b\u5efalogger\u5e76\u5173\u8054sink\nstd::vector&lt;spdlog::sink_ptr&gt; sinks = { sink_file ,sink_stdout };\nauto file_log = std::make_shared&lt;spdlog::logger&gt;(\"file_log\", std::begin(sinks), std::end(sinks));\n//3. \u53ef\u9009\u6ce8\u518clogger\nspdlog::register_logger(file_log);\nfile_log-&gt;info(\"hello \u6211\u662f\u624b\u52a8\u521b\u5efa\u7684\");    }\n</code></pre> <p>\u4e0a\u4f8b\u4e2dlogger\u7ed1\u5b9asink\u4f7f\u7528\u4e86\u5bb9\u5668\u533a\u95f4\uff0c\u4f46\u8fd9\u6837\u6bd4\u8f83\u7e41\u7410\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u4f7f\u7528c++11\u4e2dinitializer_list\u6765\u5b9e\u73b0</p> <pre><code>    //\u4f7f\u7528c++11\u4e2dinitializer_list\nauto file_log = std::make_shared&lt;spdlog::logger&gt;(\"file_log\", spdlog::sinks_init_list({sink_file,sink_stdout}));\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/spdlog/spdlog%E6%95%99%E7%A8%8B/#spdlogsink","title":"spdlog\u652f\u6301\u7684sink","text":"<p>spdlog\u652f\u6301\u8bb8\u591asink\uff0c\u7ecf\u5e38\u4f7f\u7528\u7684\u6709<code>basic_file_sink</code>,\u5982\u4e0b\u5217\u4e3e\u4e86\u5b83\u4eec\u6240\u5728\u7684\u5934\u6587\u4ef6</p> <pre><code>android_sink.h     hourly_file_sink.h    stdout_color_sinks.h\nansicolor_sink.h   msvc_sink.h           stdout_sinks.h\nbase_sink.h        null_sink.h           syslog_sink.h\nbasic_file_sink.h  ostream_sink.h        systemd_sink.h\ndaily_file_sink.h  ringbuffer_sink.h     tcp_sink.h\ndist_sink.h        rotating_file_sink.h  win_eventlog_sink.h\ndup_filter_sink.h  sink.h                wincolor_sink.h\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/spdlog/spdlog%E6%95%99%E7%A8%8B/#sink_mt_st","title":"sink\u7684\u7ebf\u7a0b\u5b89\u5168\u7248<code>_mt</code>\u548c\u7ebf\u7a0b\u4e0d\u5b89\u5168\u7248<code>_st</code>","text":"<p>\u6a21\u677f\u7c7bbase_sink\u5339\u914d\u4e00\u4e2a\u7c7b\u578b<code>mutex</code>\u7684\u7c7b\u578b\uff0c<code>_mt</code>\u7248sink\u7ee7\u627f\u81eabase_sink\uff0c\u800c<code>_st</code>\u7248sink\u7ee7\u627f\u81ea<code>base_sink&lt;null_mutex&gt;</code>,\u4e5f\u5c31\u662f\u8bf4\uff0c\u7ebf\u7a0b\u5b89\u5168\u7248\u662f\u4e0a\u4e86\u9501\u7684\uff0c\u800c\u7ebf\u7a0b\u4e0d\u5b89\u5168\u7248\u662f\u6ca1\u4e0a\u9501\u7684\u3002\u770b\u5982\u4e0b\u6e90\u7801 <pre><code>using basic_file_sink_mt = basic_file_sink&lt;std::mutex&gt;;\nusing basic_file_sink_st = basic_file_sink&lt;details::null_mutex&gt;;\n</code></pre> <ul> <li>\u6ce8\u610f\uff1a<code>_mt</code>\u6b63\u786e\u7406\u89e3\u662f\u7ebf\u7a0b\u5b89\u5168\u7684\u610f\u601d\uff0c\u652f\u6301\u591a\u7ebf\u7a0b\u73af\u5883\u4e2d\u4f7f\u7528\uff1b<code>_st</code>\u6b63\u786e\u7406\u89e3\u662f\u7ebf\u7a0b\u4e0d\u5b89\u5168\u7684\uff0c\u9002\u7528\u4e8e\u5355\u7ebf\u7a0b\u4e2d</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/spdlog/spdlog%E6%95%99%E7%A8%8B/#_6","title":"\u8fdb\u9636","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/spdlog/spdlog%E6%95%99%E7%A8%8B/#formaterset_pattern","title":"formater\u683c\u5f0f\u5316\u65e5\u5fd7\u4e4bset_pattern","text":"<p>set_pattern\u51fd\u6570\u4f7f\u7528spdlog\u652f\u6301\u7684<code>%flag</code>\u683c\u5f0f\u7ec4\u5408\u5b57\u7b26\u4e32\u6765\u683c\u5f0f\u5316\u65e5\u5fd7\uff0c\u5177\u4f53\u683c\u5f0f\u6807\u5fd7\u67e5\u9605[https://github.com/gabime/spdlog/wiki/3.-Custom-formatting] - \u793a\u4f8b</p> <pre><code>#include&lt;spdlog/spdlog.h&gt;\n#include&lt;spdlog/sinks/stdout_color_sinks.h&gt;\nint main()\n{\nauto mylog=spdlog::stdout_color_sink_mt(\"mylog\");\nmylog-&gt;set_pattern(\"%^[+++}%v[+++]%$\");\nmylog-&gt;info(\"hello \u6211\u662f\u624b\u52a8\u521b\u5efa\u7684\");\n}\n</code></pre> <ul> <li>\u8f93\u51fa\u7ed3\u679c</li> </ul> <pre><code>[+++}hello \u6211\u662f\u624b\u52a8\u521b\u5efa\u7684[+++]\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E5%BC%80%E6%BA%90%E5%BA%93/spdlog/spdlog%E6%95%99%E7%A8%8B/#formaterset_formatter","title":"formater\u683c\u5f0f\u5316\u65e5\u5fd7\u4e4bset_formatter","text":"<ul> <li>\u53c2\u8003\u5b98\u65b9\u6587\u6863</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E7%B3%BB%E7%BB%9F%E7%BA%A7%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0/getenv/","title":"std::getenv","text":"<ul> <li>\u5934\u6587\u4ef6\uff1a <code>cstdlib</code> or <code>stdlib.h</code></li> <li>\u5b9a\u4e49\uff1a<code>char* getenv( const char* env_var );</code></li> <li>\u529f\u80fd\uff1a\u4e8e\u5bbf\u4e3b\u73af\u5883\uff08\u64cd\u4f5c\u7cfb\u7edf\uff09\u63d0\u4f9b\u7684\u73af\u5883\u5217\u8868\u641c\u7d22\u5339\u914d env_var \u6240\u6307\u5411\u7684 C \u5b57\u7b26\u4e32\uff0c\u5e76\u8fd4\u56de\u6307\u5411\u4e0e\u5339\u914d\u7684\u5217\u8868\u6210\u5458\u5173\u8054\u7684 C \u5b57\u7b26\u4e32\u7684\u6307\u9488\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code>int main()\n{\nif(const char* env_p = std::getenv(\"PATH\"))\nstd::cout &lt;&lt; \"Your PATH is: \" &lt;&lt; env_p &lt;&lt; '\\n';\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E7%B3%BB%E7%BB%9F%E7%BA%A7%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0/system/","title":"std::system","text":"<ul> <li>\u5934\u6587\u4ef6\uff1a <code>cstdlib</code> or <code>stdlib.h</code></li> <li>\u5b9a\u4e49\uff1a<code>int system( const char* command );</code></li> <li>\u529f\u80fd\uff1a\u4ee5\u53c2\u6570 command \u8c03\u7528\u8fd0\u884c\u73af\u5883\u7684\u547d\u4ee4\u5904\u7406\u5668\uff08\u4f8b\u5982 /bin/sh \u3001 cmd.exe \u3001 command.com \uff09\u3002\u8fd4\u56de\u76f8\u5e94\u5b9e\u73b0\u7684\u5b9a\u4e49\u503c\uff08\u901a\u5e38\u662f\u88ab\u8c03\u7528\u7a0b\u5e8f\u6240\u8fd4\u56de\u7684\u503c\uff09\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code>int main()\n{\n// \u6267\u884c UNIX \u547d\u4ee4 \"ls -l &gt;test.txt\"\nstd::system(\"ls -l &gt;test.txt\"); // \u5f3a\u5236\u7ed3\u675f\u67d0\u4e00\u8fdb\u7a0b\nsystem(\"taskkill /f /t /im Code.exe\");//\u7ed3\u675fvscode\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E7%B3%BB%E7%BB%9F%E7%BA%A7%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0/%E5%8A%9F%E8%83%BD%E5%87%BD%E6%95%B0%E5%BA%93/","title":"\u529f\u80fd\u51fd\u6570\u5e93","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E7%B3%BB%E7%BB%9F%E7%BA%A7%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0/%E5%8A%9F%E8%83%BD%E5%87%BD%E6%95%B0%E5%BA%93/#1-lacale","title":"1 \u83b7\u53d6lacale\u96c6","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E7%B3%BB%E7%BB%9F%E7%BA%A7%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0/%E5%8A%9F%E8%83%BD%E5%87%BD%E6%95%B0%E5%BA%93/#11-windows","title":"1.1 windows\u7248","text":"<pre><code>#include&lt;Windows.h&gt;\n#include&lt;string&gt;\nusing std::wstring;\nusing std::string;\n#ifdef UNICODE\ntypedef wstring tstring;\n#else\ntypedef string tstring;\n#endif // UNICODE\n\n\ntypedef std::vector&lt;tstring&gt; tLocales;\nstd::vector&lt;tstring&gt; g_locales;\n\nBOOL CALLBACK MyLocaleEnumProc(LPTSTR szLocaleString)\n{\ng_locales.push_back(szLocaleString);\nreturn TRUE;\n}\n\n//LCID\u7801\u8f6c\u8bed\u8a00\u548c\u56fd\u5bb6\u5168\u79f0(English_United States.1252)\ntstring&amp; LCID2NLS(LCID lcid, tstring&amp; bstrRetBuf)\n{\nTCHAR arcBuf[128];\n\nmemset(arcBuf, 0, sizeof(arcBuf));\n\nGetLocaleInfo(lcid, LOCALE_SENGLANGUAGE, arcBuf, 127);// English name of language, eg \"German\"\nbstrRetBuf = arcBuf;\nmemset(arcBuf, 0, sizeof(arcBuf));\n//Loading the English name for the country/region\nGetLocaleInfo(lcid, LOCALE_SENGCOUNTRY, arcBuf, 127);// English name of country/region, eg \"Germany\"\nif (*arcBuf)\n{\nbstrRetBuf += TEXT(\"_\");\nbstrRetBuf += arcBuf;\n}\n//Loading the code page\nmemset(arcBuf, 0, sizeof(arcBuf));\nif ((GetLocaleInfo(lcid, LOCALE_IDEFAULTANSICODEPAGE, arcBuf, 127)\n|| GetLocaleInfo(lcid, LOCALE_IDEFAULTCODEPAGE, arcBuf, 127))\n&amp;&amp; *arcBuf)\n{\nbstrRetBuf += TEXT(\".\");\nbstrRetBuf += arcBuf;\n}\n\nreturn bstrRetBuf;\n}\n\n//LCID\u7801\u8f6c\u8bed\u8a00\u548c\u56fd\u5bb6\u7f29\u5199\uff08en_US\uff09\ntstring&amp; LCID2NLSAbbr(LCID lcid, tstring&amp; bstrRetBuf)\n{\nTCHAR arcBuf[128];\n\nmemset(arcBuf, 0, sizeof(arcBuf));\n\nGetLocaleInfo(lcid, LOCALE_SISO639LANGNAME, arcBuf, 127);// ISO abbreviated language name, eg \"en\"\nbstrRetBuf = arcBuf;\nmemset(arcBuf, 0, sizeof(arcBuf));\n//Loading the English name for the country/region\nGetLocaleInfo(lcid, LOCALE_SISO3166CTRYNAME, arcBuf, 127); // ISO abbreviated country/region name, eg \"US\"\nif (*arcBuf)\n{\nbstrRetBuf += TEXT(\"_\");\nbstrRetBuf += arcBuf;\n}\n\nreturn bstrRetBuf;\n}\n\nstd::vector&lt;tstring&gt; GetAllLocales(bool isAbbr=true)\n{\nEnumSystemLocales(&amp;MyLocaleEnumProc, LCID_INSTALLED);\nstd::vector&lt;tstring&gt; vNLS,vNLSAbbr;\ntstring ts;\n\nfor (tLocales::const_iterator i = g_locales.begin(); i != g_locales.end(); i++)\n{\nif (isAbbr) {//en_US\nLCID2NLSAbbr(std::stoul(i-&gt;c_str(), nullptr, 16), ts);\nvNLSAbbr.emplace_back(ts);         }\nelse {//English_United States.1252\nLCID2NLS(std::stoul(i-&gt;c_str(), nullptr, 16), ts);\nvNLS.emplace_back(ts);            }    }\nif (isAbbr) {\nreturn vNLSAbbr;\n}\nelse {\nreturn vNLS;\n}\n}\nint main() {\n//\u83b7\u53d6\u7f29\u5199locale\u96c6 en_US\nstd::vector&lt;tstring&gt; vstrAbbr= GetAllLocales();\n//\u83b7\u53d6\u5168\u79f0locale\u96c6 (English_United States.1252)\nstd::vector&lt;tstring&gt; vstr = GetAllLocales(false);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E7%B3%BB%E7%BB%9F%E7%BA%A7%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0/%E5%8A%9F%E8%83%BD%E5%87%BD%E6%95%B0%E5%BA%93/#12-linux","title":"1.2 Linux\u7248","text":"<p>linux\u4e0a\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528\u7cfb\u7edf<code>locale -a</code>\u547d\u4ee4\u6765\u83b7\u53d6</p> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;set&gt;\nusing namespace std;\nint main()\n{\nchar buf[128] = {0};\nFILE *fp = NULL;\nfp = popen(\"locale -a\", \"r\");\nset&lt;string&gt; sstr;\nwhile (!feof(fp))\n{\nfgets(buf, sizeof(buf) - 1, fp);\nsstr.insert(string(buf));\n}\n//fread(buf, 1, 2047, fp);\npclose(fp);\nfor (auto &amp;&amp;str : sstr)\n{\nstd::cout &lt;&lt; str &lt;&lt; std::endl;\n}\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E7%B3%BB%E7%BB%9F%E7%BA%A7%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0/%E5%8A%9F%E8%83%BD%E5%87%BD%E6%95%B0%E5%BA%93/#2","title":"2 \u5bbd\u5b57\u7b26\u591a\u5b57\u8282\u8f6c\u6362","text":"<ul> <li>\u6ce8\u610f\uff1a\u628a\u591a\u5b57\u8282\u7f16\u7801\u8f6c\u6362\u6210\u53e6\u4e00\u591a\u5b57\u8282\u7f16\u7801\uff0c\u9700\u628a\u5bbd\u5b57\u7b26\u7f16\u7801\u4f5c\u4e3a\u4e2d\u8f6c\u7f16\u7801\u3002</li> </ul>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E7%B3%BB%E7%BB%9F%E7%BA%A7%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0/%E5%8A%9F%E8%83%BD%E5%87%BD%E6%95%B0%E5%BA%93/#21","title":"2.1 \u8de8\u5e73\u53f0","text":"<ul> <li>\u4ee3\u7801\u5982\u4e0b</li> </ul> <pre><code>#include&lt;string&gt;\n#include&lt;fstream&gt;\n#pragma warning(disable : 4996) \nint main() {\n//utf-8\u8f6c\u5bbd\u5b57\u7b26\n{\nstd::cout &lt;&lt; \"utf-8\u8f6c\u5bbd\u5b57\u7b26-&gt;\" &lt;&lt; std::endl;\nsetlocale(LC_ALL, \"en_US.utf8\");\nconst char* mbstr = u8\"z\u4f60\u597dz\";\n//\u83b7\u53d6\u6240\u9700wchar_t\u7a7a\u95f4\nsize_t len = mbstowcs(NULL, mbstr, 0);\nwchar_t* wstr = new wchar_t[len + 1];\nwstr[len] = L'\\0';\nmbstowcs(wstr, mbstr, 5);\nsetlocale(LC_ALL, \"\");\nstd::wcout &lt;&lt; L\"\u5bbd\u5b57\u7b26\uff1a\" &lt;&lt; wstr &lt;&lt; std::endl;\ndelete[]wstr;\n}\n//\u672c\u5730\u73af\u5883\u7f16\u7801(\u7b80\u4f53\u4e2d\u6587\u7cfb\u7edfgbk)\u8f6c\u5bbd\u5b57\u7b26\n{\nsetlocale(LC_ALL, \"\");\nstd::wcout &lt;&lt; L\"\u672c\u5730\u73af\u5883\u7f16\u7801(\u7b80\u4f53\u4e2d\u6587\u7cfb\u7edfgbk)\u8f6c\u5bbd\u5b57\u7b26-&gt;\" &lt;&lt; std::endl;\nconst char* mbstr = \"z\u4f60\u597dz\";\n//\u83b7\u53d6\u6240\u9700wchar_t\u7a7a\u95f4\nsize_t len = mbstowcs(NULL, mbstr, 0);\nwchar_t* wstr = new wchar_t[len + 1];\nwstr[len] = L'\\0';\nmbstowcs(wstr, mbstr, 5);\nstd::wcout &lt;&lt; L\"\u5bbd\u5b57\u7b26\uff1a\" &lt;&lt; wstr &lt;&lt; std::endl;\ndelete[]wstr;\n}\n//\u5bbd\u5b57\u7b26\u8f6cutf-8\n{\nsetlocale(LC_ALL, \"\");\nstd::wcout &lt;&lt; L\"\u5bbd\u5b57\u7b26\u8f6cutf-8-&gt;\" &lt;&lt; std::endl;\n//\u8bbe\u7f6elocale\u5230utf-8\u73af\u5883\uff0c\u8fd9\u6837\u5bbd\u5b57\u7b26\u624d\u4f1a\u8f6c\u51fa\u591a\u5b57\u8282\u7684utf-8\u7f16\u7801\nstd::string lc= setlocale(LC_ALL, \"en_US.utf8\");\nconst wchar_t* wstr = L\"z\u4f60\u597dz\";\n//\u83b7\u53d6\u6240\u9700wchar_t\u7a7a\u95f4\nsize_t len = wcstombs(NULL, wstr, 0);\nchar* mbstr = new char[len + 1];\nmbstr[len] = '\\0';\nwcstombs(mbstr, wstr, len);\n//\u7531\u4e8e\u63a7\u5236\u53f0\u76f4\u63a5\u6253\u5370utf-8\u7f16\u7801\u5b57\u7b26\u6bd4\u8f83\u56f0\u96be\uff0c\u6545\u5199\u5165\u6587\u4ef6\u4e2d\uff0c\u6253\u5f001.txt\u6587\u4ef6\uff0c\u67e5\u770b\u7f16\u7801\u683c\u5f0futf-8\uff0c\u5185\u5bb9\u201cz\u4f60\u597dz\u201d\nstd::ofstream fout(\"1.txt\");\nfout &lt;&lt; mbstr;\nfout.close();\ndelete[]mbstr;\n}\n//\u5bbd\u5b57\u7b26\u8f6c\u672c\u5730\u73af\u5883\u7f16\u7801(\u7b80\u4f53\u4e2d\u6587\u7cfb\u7edfgbk)\n{\nsetlocale(LC_ALL, \"\");\nstd::wcout &lt;&lt; L\"\u5bbd\u5b57\u7b26\u8f6c\u672c\u5730\u73af\u5883\u7f16\u7801(\u7b80\u4f53\u4e2d\u6587\u7cfb\u7edfgbk)-&gt;\" &lt;&lt; std::endl;\n//\u8bbe\u7f6elocale\u5230utf-8\u73af\u5883\uff0c\u8fd9\u6837\u5bbd\u5b57\u7b26\u624d\u4f1a\u8f6c\u51fa\u591a\u5b57\u8282\u7684utf-8\u7f16\u7801\nsetlocale(LC_ALL, \"\");\nconst wchar_t* wstr = L\"z\u4f60\u597dz\";\n//\u83b7\u53d6\u6240\u9700wchar_t\u7a7a\u95f4\nsize_t len = wcstombs(NULL, wstr, 0);\nchar* mbstr = new char[len + 1];\nmbstr[len] = '\\0';\nwcstombs(mbstr, wstr, len);\nstd::cout &lt;&lt; \"\u591a\u5b57\u8282\uff1a\";\nstd::cout &lt;&lt; mbstr &lt;&lt; '\\n';\ndelete[]mbstr;\n}   }\n</code></pre> <ul> <li>\u8f93\u51fa\u7ed3\u679c</li> </ul> <pre><code>utf-8\u8f6c\u5bbd\u5b57\u7b26-&gt;\n\u5bbd\u5b57\u7b26\uff1az\u4f60\u597dz\n\u672c\u5730\u73af\u5883\u7f16\u7801(\u7b80\u4f53\u4e2d\u6587\u7cfb\u7edfgbk)\u8f6c\u5bbd\u5b57\u7b26-&gt;\n\u5bbd\u5b57\u7b26\uff1az\u4f60\u597dz\n\u5bbd\u5b57\u7b26\u8f6cutf-8-&gt;\n\u5bbd\u5b57\u7b26\u8f6c\u672c\u5730\u73af\u5883\u7f16\u7801(\u7b80\u4f53\u4e2d\u6587\u7cfb\u7edfgbk)-&gt;\n\u591a\u5b57\u8282\uff1az\u4f60\u597dz\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E7%B3%BB%E7%BB%9F%E7%BA%A7%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0/%E5%8A%9F%E8%83%BD%E5%87%BD%E6%95%B0%E5%BA%93/#22-windows","title":"2.2 windows\u5e73\u53f0","text":"<pre><code>#include&lt;Windows.h&gt;\nusing namespace std;\nint main() {\nconst char* szU8 = u8\"z\u4f60\u597dz\";\n//\u539f\u59cb\u5b57\u7b26\u4e32\u4e3autf-8\u7f16\u7801\nint wcsLen = ::MultiByteToWideChar(CP_UTF8, NULL, szU8, strlen(szU8), NULL, 0);\nwchar_t* wszString = new wchar_t[wcsLen + 1];\n::MultiByteToWideChar(CP_UTF8, NULL, szU8, strlen(szU8), wszString, wcsLen);\nwszString[wcsLen] = '\\0';\n//\u8f6c\u6362\u5bbd\u5b57\u7b26\u5230ANSI\u7f16\u7801(\u6839\u636e\u64cd\u4f5c\u7cfb\u7edf\u8bed\u8a00\u73af\u5883\u51b3\u5b9a)\nint ansiLen = ::WideCharToMultiByte(CP_ACP, NULL, wszString, wcslen(wszString), NULL, 0, NULL, NULL);\nchar* szAnsi = new char[ansiLen + 1];\n::WideCharToMultiByte(CP_ACP, NULL, wszString, wcslen(wszString), szAnsi, ansiLen, NULL, NULL);\nszAnsi[ansiLen] = '\\0';\nsetlocale(LC_CTYPE, \"\");\nwcout &lt;&lt; wszString &lt;&lt; endl;\ncout &lt;&lt; szAnsi &lt;&lt; endl;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E7%B3%BB%E7%BB%9F%E7%BA%A7%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0/%E5%8A%9F%E8%83%BD%E5%87%BD%E6%95%B0%E5%BA%93/#3","title":"3 \u8bfb\u53d6\u6587\u4ef6","text":""},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E7%B3%BB%E7%BB%9F%E7%BA%A7%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0/%E5%8A%9F%E8%83%BD%E5%87%BD%E6%95%B0%E5%BA%93/#31","title":"3.1 \u6309\u884c\u8bfb\u53d6","text":"<ul> <li>\u65b9\u5f0f\u4e00\uff1acpp\u65b9\u6cd5</li> </ul> <pre><code>#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\nint main()\n{\nifstream rf(\"1.txt\");\nif (rf.is_open())\n{\nstring str;\nwhile (getline(rf,str))\n{\nstd::cout &lt;&lt; str &lt;&lt; std::endl;\n}\n}\n}\n</code></pre> <ul> <li>\u65b9\u5f0f\u4e8c\uff1ac\u65b9\u6cd5</li> </ul> <pre><code>#include \"stdlib.h\"\n#include \"stdio.h\"\n\nint main(int argc, char *argv[])\n{\nFILE *in= fopen(\"D:/in.java\", \"r\");\nchar buf[1024];\n\nwhile (fgets(buf, sizeof(buf), in) != NULL)\n{\nprintf(\"%s\", buf);\n}\n\nfclose(in);\n\nreturn 0;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E7%B3%BB%E7%BB%9F%E7%BA%A7%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0/%E5%8A%9F%E8%83%BD%E5%87%BD%E6%95%B0%E5%BA%93/#32","title":"3.2 \u5168\u90e8\u8bfb\u53d6","text":"<ul> <li>\u65b9\u5f0f\u4e00\uff1a\u8bfb\u53d6\u5230c\u98ce\u683c\u5b57\u7b26\u4e32(char*)\u4e2d</li> </ul> <pre><code>#include &lt;fstream&gt;\nint main()\n{\nstd::ifstream rf;\nint length;\nrf.open(\"1.txt\");      // open input file\nrf.seekg(0, std::ios::end);    // go to the end\nlength = rf.tellg();           // report location (this is the length)\nrf.seekg(0, std::ios::beg);    // go back to the beginning\nbuffer = new char[length];    // allocate memory for a buffer of appropriate    dimension\nrf.read(buffer, length);       // read the whole file into the buffer\nrf.close();                    // close file handle\n}\n</code></pre> <ul> <li>\u65b9\u5f0f\u4e8c\uff1a\u8bfb\u53d6\u5230string(streambuf)</li> </ul> <pre><code>#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;streambuf&gt;\nint main()\n{\nstd::ifstream rf(\"1.txt\");\nstd::string data((std::istreambuf_iterator&lt;char&gt;(rf)),    std::istreambuf_iterator&lt;char&gt;());\n}\n</code></pre> <ul> <li>\u65b9\u5f0f\u4e09\uff1a\u8bfb\u53d6\u5230string(stringstream)</li> </ul> <pre><code>#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\nint main()\n{\nstd::ifstream rf(\"1.txt\");\nstd::stringstream buffer;\nbuffer &lt;&lt; rf.rdbuf();\nstd::string data(buffer.str());\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E7%B3%BB%E7%BB%9F%E7%BA%A7%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0/%E5%8A%9F%E8%83%BD%E5%87%BD%E6%95%B0%E5%BA%93/#4","title":"4 \u83b7\u53d6\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u548c\u5f53\u524d\u6267\u884c\u7a0b\u5e8f\u76ee\u5f55","text":"<p>\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u548c\u5f53\u524d\u6267\u884c\u7a0b\u5e8f\u76ee\u5f55\u4e0d\u662f\u540c\u4e00\u4e2a\u76ee\u5f55\u3002 - \u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\uff1a\u662f\u6307\u542f\u52a8\u53ef\u6267\u884c\u7a0b\u5e8f\u65f6\u6240\u5728\u7684\u76ee\u5f55 - \u5f53\u524d\u6267\u884c\u7a0b\u5e8f\u76ee\u5f55\uff1a\u53ef\u6267\u884c\u7a0b\u5e8f\u6240\u5728\u76ee\u5f55 - \u89e3\u91ca\uff1a\u5047\u8bbe\u6709\u53ef\u6267\u884c\u7a0b\u5e8f<code>~/test/test.exe</code>,\u5f53\u5728<code>~</code>\u7528\u6237\u76ee\u5f55\u4e0b\u6267\u884c<code>./test/test.exe</code>\u65f6\uff0c\u5de5\u4f5c\u76ee\u5f55\u662f<code>~</code>\uff0c\u800c\u5f53\u524d\u53ef\u6267\u884c\u7a0b\u5e8f\u76ee\u5f55\u662f<code>~/test</code>\u3002</p>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E7%B3%BB%E7%BB%9F%E7%BA%A7%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0/%E5%8A%9F%E8%83%BD%E5%87%BD%E6%95%B0%E5%BA%93/#41","title":"4.1 \u83b7\u53d6\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55","text":"<ol> <li>\u65b9\u6cd5\u4e00\uff1a<code>getcwd</code></li> <li>\u65b9\u6cd5\u4e8c\uff1a<code>get_current_dir_name</code></li> <li>\u793a\u4f8b</li> </ol> <pre><code>#include &lt;unistd.h&gt;\nint main(int argc, char** argv)\n{\n{//\u65b9\u6cd5\u4e00\nchar *path;\npath = get_current_dir_name();\nreturn 0;\n}\n{//\u65b9\u6cd5\u4e8c\nchar *path = NULL;\npath = getcwd(NULL,0);\nputs(path);\nfree(path);\n}\nreturn 0;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/C%2B%2B/%E7%B3%BB%E7%BB%9F%E7%BA%A7%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0/%E5%8A%9F%E8%83%BD%E5%87%BD%E6%95%B0%E5%BA%93/#42","title":"4.2 \u83b7\u53d6\u5f53\u524d\u6267\u884c\u7a0b\u5e8f\u76ee\u5f55","text":"<p>\u901a\u8fc7readlink\u8bfb\u53d6<code>/proc/self/exe</code>,\u83b7\u53d6\u7a0b\u5e8f\u8def\u5f84\uff08\u542b\u7a0b\u5e8f\u540d\uff09\u3002 - \u793a\u4f8b</p> <pre><code>#include&lt;unistd.h&gt;\nint main(int argc, char** argv)\n{\nchar cur_path[1024]={0};\nif (readlink(\"/proc/self/exe\", cur_path, BUF_SMALL)&lt;0)\n{\nprintf(\"\u83b7\u53d6\u53ef\u6267\u884c\u7a0b\u5e8f\u8def\u5f84\u5931\u8d25\\n\");\nreturn -1;\n}\n//\u622a\u53d6\u6389\u7a0b\u5e8f\u540d\nstring cur_dir= cur_path;\npos=cur_dir.find_last_of('/');\ncur_dir = cur_dir.substr(0, pos);\nreturn 0;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/","title":"GO\u548cC++\u7684\u8bed\u6cd5\u5bf9\u6bd4","text":""},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#1","title":"1 \u57fa\u672c\u5e38\u8bc6","text":""},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#11-main","title":"1.1 \u7a0b\u5e8f\u5165\u53e3main","text":"<ul> <li>GO<ul> <li>\u5305\u540d\u4e3amain</li> <li>\u5165\u53e3\u51fd\u6570\u4e3amain</li> </ul> </li> <li>C++<ul> <li>\u5165\u53e3\u51fd\u6570\u4e3amain</li> </ul> </li> <li>C++\u4ee3\u7801</li> </ul> <pre><code>//C++\u4ee3\u7801\nint main(){\n\n}\n</code></pre> <ul> <li>GO\u4ee3\u7801</li> </ul> <pre><code>//GO\u4ee3\u7801\npackage main\n\nfunc main()  {\n\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#12","title":"1.2 \u4e00\u822c\u89c4\u5219","text":"<ol> <li>Go\u4e2d\u58f0\u660e\u53d8\u91cf\u65f6\u7c7b\u578b\u5728\u53d8\u91cf\u540d\u540e\u9762</li> <li>Go\u4e2d\u5b9a\u4e49\u51fd\u6570\u65f6\u8fd4\u56de\u503c\u7c7b\u578b\u5728\u51fd\u6570\u540d\u540e\u9762</li> </ol>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#13","title":"1.3 \u8bed\u53e5\u7ed3\u5c3e\u5206\u53f7","text":"<ul> <li>GO<ul> <li>\u4ee5\u5206\u53f7<code>;</code>\u4f5c\u4e3a\u8bed\u53e5\u7ed3\u5c3e</li> <li>\u53ef\u4e0d\u5199\u5206\u53f7<code>;</code>\uff0c\u4f46\u4ee5\u6362\u884c\u533a\u5206</li> </ul> </li> <li>C++<ul> <li>\u5fc5\u987b\u4ee5\u5206\u53f7<code>;</code>\u4f5c\u4e3a\u8bed\u53e5\u7ed3\u5c3e</li> <li>Go\u4ee3\u7801</li> </ul> </li> </ul> <pre><code>package main\n\nimport (\n\"fmt\"\n)\n\nfunc main()  {\nfmt.Println(\"hello world!\")\nfmt.Println(\"hello world!\");fmt.Println(\"hello world!\")\n}\n</code></pre> <ul> <li>C++\u4ee3\u7801</li> </ul> <pre><code>#include&lt;iostream&gt;\nint main(){\nstd::cout&lt;&lt;\"hello world!\"&lt;&lt;std::endl;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#14","title":"1.4 \u5f15\u7528\u5176\u5b83\u6587\u4ef6","text":"<ul> <li>GO <ul> <li>\u4f7f\u7528\u5173\u952e\u5b57<code>import</code></li> </ul> </li> <li>C++<ul> <li>\u4f7f\u7528<code>include</code></li> </ul> </li> <li>Go\u4ee3\u7801</li> </ul> <pre><code>package main\n\nimport (\n\"fmt\"\n)\n\nfunc main()  {\nfmt.Println(\"hello world!\")\n}\n</code></pre> <ul> <li>C++\u4ee3\u7801</li> </ul> <pre><code>#include&lt;iostream&gt;\nint main(){\nstd::cout&lt;&lt;\"hello world!\"&lt;&lt;std::endl;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#15","title":"1.5 \u82b1\u62ec\u53f7{}","text":"<ul> <li>\u76f8\u540c\u70b9\uff1a</li> <li>\u7528\u4e8e\u51fd\u6570\u4f53</li> <li>\u7528\u4e8e\u6570\u7ec4\u3001map\u3001struct\u7c7b\u578b\u521d\u59cb\u5316\u53d8\u91cf\u503c\uff08c++\u8fd8\u80fd\u7528\u4e8eint\u7b49\u57fa\u672c\u7c7b\u578b\uff0cGo\u4e0d\u80fd\uff09</li> <li>\u7528\u4e8e\u9650\u5236\u5c40\u90e8\u8303\u56f4</li> <li>\u4e0d\u540c\u70b9\uff1a</li> <li>\u7528\u4e8e\u51fd\u6570\u3001for\u3001if\u3001switch\u7b49\u65f6\uff0cGo\u4e2d\u5de6\u82b1\u62ec\u53f7<code>{</code>\u4e0d\u80fd\u5355\u72ec\u6210\u884c</li> <li>Go\u793a\u4f8b</li> </ul> <pre><code>package main\n\nimport (\n\"fmt\"\n)\ntype S struct{\na1 int\na2 int\n}\nvar m = map[int]int{1:1}\nvar arr =[3]int{1,2,3}\nfunc main(){\ns1:=S{1,2}\nfmt.Println(\"s1 =\",s1)\n{// \u5c40\u90e8\u533a\u57df\nv1:=1\nfmt.Print(v1)\n}\n}\n/* \u8f93\u51fa\u7ed3\u679c\ns1 = {1 2}\n1\n*/\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#16","title":"1.6 \u5c0f\u62ec\u53f7()","text":"<ul> <li>\u76f8\u540c\u70b9\uff1a</li> <li>\u4f5c\u7528\u8fd0\u7b97\u7b26\u9ad8\u4f18\u5148\u7ea7\u8303\u56f4</li> <li>\u4f5c\u4e3a\u51fd\u6570\u53c2\u6570\u8303\u56f4</li> <li>\u4e0d\u540c\u70b9\uff1a</li> <li>Go\u5c0f\u62ec\u53f7<code>()</code>\u53ef\u4ee5\u7528\u5728\u591a\u884c\u53d8\u91cf\u58f0\u660e\u8303\u56f4</li> <li>Go\u5c0f\u62ec\u53f7<code>()</code>\u53ef\u4ee5\u7528\u5728<code>import</code>\u5bfc\u5165\u591a\u4e2a\u6a21\u5757\u7684\u8303\u56f4</li> <li>Go\u4e2d\u5c0f\u62ec\u53f7\u4e0d\u7528\u4e8efor\u3001if\u3001switch\u7b49\u4e0a\u9762</li> <li>Go\u793a\u4f8b</li> </ul> <pre><code>package main\n\n// \u7528\u4e8eimport\nimport (\n\"fmt\"\n)\ntype S struct{\na1 int\na2 int\n}\n// \u7528\u4e8e\u51fd\u6570\u53c2\u6570\uff0c\u51fd\u6570\u8fd4\u56de\u503c\nfunc (s *S)sum()(sum int){\n//\u7528\u4e8e\u51fd\u6570\u8c03\u7528\nfmt.Println(*s)\nsum=s.a1+s.a2\nreturn sum\n}\nfunc main(){\nvar s =S{1,2}\nfmt.Println(s.sum())\n}\n/* \u8f93\u51fa\u7ed3\u679c\n{1 2}\n3\n*/\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#17-ii","title":"1.7 ++i\u548ci++","text":"<ul> <li>\u76f8\u540c\u70b9\uff1a</li> <li>C++\u548cGO\u90fd\u6709i++,\u540e\u7f00++\u7684\u5f62\u5f0f</li> <li>\u4e0d\u540c\u70b9\uff1a</li> <li>Go\u4e2d\u4e0d\u652f\u6301++i\u524d\u7f00\u5f62\u5f0f</li> <li>Go\u4e2di++\u53ea\u80fd\u5355\u72ec\u5360\u4e00\u884c\uff0c\u56e0\u4e3ai++\u662f\u4e00\u6761\u8bed\u53e5\uff0c\u800c\u4e0d\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f</li> <li>Go\u4ee3\u7801</li> </ul> <pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\nvar i int = 0\ni++;\nfmt.Println(\"i =\",i)\n// error i++\u53ea\u80fd\u5355\u72ec\u4e00\u884c\n//a:=i++\n// error Go\u4e2d\u6ca1\u6709++i\n//++i\n}\n</code></pre> <ul> <li>C++\u4ee3\u7801</li> </ul> <pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\nint i=0;\ni++;\n++i;\nint j=i++;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#18-go","title":"1.8 Go\u8bed\u6cd5\u8bef\u533a","text":"<ul> <li>\u53c2\u8003</li> </ul>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#2","title":"2 \u53d8\u91cf","text":"<ul> <li>\u8bed\u6cd5\u5dee\u5f02\uff1a</li> <li>GO:<code>var \u53d8\u91cf\u540d \u53d8\u91cf\u7c7b\u578b = \u53d8\u91cf\u503c</code></li> <li>C++:<code>\u53d8\u91cf\u7c7b\u578b \u53d8\u91cf\u540d = \u53d8\u91cf\u503c</code></li> <li>Go\u4e2d\u672a\u4f7f\u7528\u7684\u5c40\u90e8\u53d8\u91cf\u4f1a\u5f15\u53d1\u7f16\u8bd1\u9519\u8bef\uff0c\u5168\u5c40\u53d8\u91cf\u4e0d\u4f1a</li> <li>GO\u53ef\u4ee5\u901a\u8fc7\u8fd0\u7b97\u7b26<code>:=</code>\u8fdb\u884c\u53d8\u91cf\u5b9a\u4e49,\u4f46\u53ea\u80fd\u5728\u51fd\u6570\u4f53\u4e2d\uff0c\u4e14\u4f1a\u8986\u76d6\u5916\u5c42\u4f5c\u7528\u57df\u4e2d\u7684\u540c\u540d\u53d8\u91cf\uff0c\u800cc++\u4e2d\u6ca1\u6709\u6b64\u8fd0\u7b97\u7b26</li> <li>Go\u4ee3\u7801</li> </ul> <pre><code>//GO\npackage main\n\nimport (\n\"fmt\"\n)\n//\u58f0\u660e\u5e76\u521d\u59cb\u5316\nvar var1 int =1\n//\u58f0\u660e\u4f46\u4e0d\u521d\u59cb\u5316\uff0c\u503c\u9ed8\u8ba40\nvar var2 int\n//\u58f0\u660e\u5e76\u521d\u59cb\u5316\uff0c\u53ef\u4ee5\u7701\u7565\u7c7b\u578b\uff0c\u7f16\u8bd1\u5668\u4f1a\u81ea\u52a8\u8bc6\u522b\uff0c\u7c7b\u4f3c\u4e8ec++\u4e2dauto\u529f\u80fd\nvar var3 =3\n// \u591a\u53d8\u91cf\u58f0\u660e\uff0c\u76f8\u540c\u7c7b\u578b\nvar var5,var6 int\n// \u591a\u53d8\u91cf\u58f0\u660e\uff0c\u4e0d\u540c\u7c7b\u578b\nvar (\nvar7 int\nvar8 string\n)\nfunc main()  {\nfmt.Println(\"GO: hello world\")\n// :=\u5b9a\u4e49\u53ea\u80fd\u7528\u4e8e\u51fd\u6570\u4f53\u5185\uff0c\u4e0d\u7528\u7528\u5728\u5168\u5c40,\u4e14\u5fc5\u987b\u4e4b\u524d\u6ca1\u6709\u5b9a\u4e49\u8fc7\nvar4 := 4\nfmt.Print(\"var1= \",var1,\" var2 =\",var2,\" var3 =\",var3 ,\" var4 =\",var4)\n}\n</code></pre> <ul> <li>C++\u4ee3\u7801</li> </ul> <pre><code>//c++\nint i1=2;\nint i2;\n// \u591a\u53d8\u91cf\u58f0\u660e\nint i1=1,i2=2;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#3","title":"3 \u5e38\u91cf","text":"<ul> <li>GO\u5e38\u91cf\u548c\u53d8\u91cf\u7c7b\u4f3c\uff0c\u4ee5\u5173\u952e\u5b57<code>const</code>\u53d6\u4ee3<code>var</code>\u5c31\u662f\u58f0\u660e\u53d8\u91cf\uff0cC++\u4e2d\u5e38\u91cf\u58f0\u660e\u4e5f\u662f\u7531\u5173\u952e\u5b57<code>const</code>\u58f0\u660e</li> <li>GO\u548cC++\u4e2dconst\u5e38\u91cf\u90fd\u8981\u58f0\u660e\u65f6\u521d\u59cb\u5316\uff0c\u4e14\u4e0d\u80fd\u6539\u53d8</li> <li>Go\u4ee3\u7801</li> </ul> <pre><code>//GO\npackage main\nconst i1 int=1\nconst i2=2\n// \u591a\u5e38\u91cf\u5b9a\u4e49\nconst(\ni4,i5 int=3,4\n)\nconst i6,i7=5,6\n//i1 i2 i3 \u5206\u522b\u4e3a 0 1 2\uff0cj1 j2 j3 \u5206\u522b\u4e3a 0*3 1*3 2*6\nconst(\ni1,ji=iota,iota*3\ni2,j2\ni3,j3\n)\nfunc main()  {\n}\n</code></pre> <ul> <li>C++\u4ee3\u7801</li> </ul> <pre><code>//c++\nconst int i1=1;\nconst auto i2=2;\n// \u591a\u5e38\u91cf\u5b9a\u4e49\nconst int i1=1,i2=2;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#4","title":"4 \u6570\u636e\u7c7b\u578b","text":""},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#41","title":"4.1 \u679a\u4e3e","text":"<ul> <li>GO\u4e2d\u5e76\u6ca1\u6709\u679a\u4e3e</li> <li>\u4f46\u53ef\u4ee5\u501f\u52a9<code>const</code>\u548c<code>iota</code>\u6765\u6a21\u4eff\u5b9e\u73b0\u4e2a\u7c7b\u4f3c\u529f\u80fd\uff0c\u800cC++\u901a\u8fc7\u5173\u952e\u5b57<code>enum</code>\u6765\u5b9a\u4e49\u679a\u4e3e\u7c7b\u578b\uff0c\u4e14\u9ed8\u8ba4\u81ea\u589e+1</li> <li>Go\u4ee3\u7801</li> </ul> <pre><code>//GO\n//iota==0,\u4e5f\u6709\u81ea\u589e+1\u4f5c\u7528\nconst(\ni1=iota //0\ni2      //1\ni3      //2\ni4=10   //10\ni5      //10\ni6=iota //5 \u91cd\u65b0\u81ea\u589e+1\uff0c\u4e14\u8ba1\u6570\u7d2f\u8ba1\u4ecei1~i5\ni7      //6\ni8=iota*2//7*2\ni9          //8*2\ni10         //9*2\n)\nconst(\ni1 float32=iota i2 int\ni3\n)\n</code></pre> <ul> <li>C++\u4ee3\u7801</li> </ul> <pre><code>//c++\nenum {\ni1=0,           //0\ni2,             //1\ni3              //2\n}\nenum :int{ //bool char\u5747\u53ef\ni1=0,\ni2,\ni3\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#42","title":"4.2 \u5f15\u7528","text":"<ul> <li>GO\u4e2d\u6ca1\u6709\u6cdb\u5316\u6982\u5ff5\u7684\u5f15\u7528\uff0c<code>slice map channel</code>\u8fd93\u79cd\u9884\u5b9a\u4e49\u7c7b\u578b\u5177\u6709\u5f15\u7528\u529f\u80fd\uff0c\u800cC++\u4e2d\u4efb\u610f\u7c7b\u578b\u5747\u53ef\u6210\u4e3a\u5f15\u7528\uff0c\u5f62\u5982<code>Type&amp; name</code>\u3002</li> <li>C++\u5f15\u7528\u5fc5\u987b\u58f0\u660e\u65f6\u8d4b\u503c</li> </ul>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#43","title":"4.3 \u6307\u9488","text":"<ul> <li>\u76f8\u540c\u70b9\uff1a</li> <li>\u53ef\u4ee5\u4f7f\u7528<code>new</code>\u5206\u914d\u6307\u9488</li> <li>\u7528<code>&amp;</code>\u53d6\u5730\u5740</li> <li>\u7528<code>*</code>\u53d6\u6307\u9488\u6307\u5411\u7684\u503c</li> <li>\u4e0d\u540c\u70b9\uff1a</li> <li>Go\u7528<code>.</code>\u6765\u53d6\u6307\u9488\u7684\u6210\u5458\uff0cC++\u7528<code>-&gt;</code>\u6765\u53d6\u6307\u9488\u7684\u6210\u5458</li> <li>\u7528<code>new</code>\u5206\u914d\u7684\u6307\u9488\uff0c\u5728Go\u4e2d\u4e0d\u7528\u624b\u52a8\u91ca\u653e\u5185\u5b58\uff0cC++\u8981\u8c03\u7528detele\u91ca\u653e</li> <li>Go\u4ee3\u7801</li> </ul> <pre><code>package main\n\nimport (\n\"fmt\"\n)\ntype A struct{\ni int\n}\nfunc main() {\nvar str1 = \"hello\"\nvar ptr *string = &amp;str1\nfmt.Printf(\"str = %s ptr = %p str1 addr=%p\", *ptr, ptr, &amp;str1)\nvar pA =new(A)\npA.i=1;\nfmt.Print(\"pA value:\",*pA)\n}\n//\u6267\u884c\u7ed3\u679c\uff1a\n//str = hello ptr = 0xc00004c250 str1 addr=0xc00004c250\n//pA value:{1}\n</code></pre> <ul> <li>C++\u4ee3\u7801</li> </ul> <pre><code>//cpp\nint main(){\nint i=1;\nint* pi1=&amp;i;\nint* pi2=new int;\nint* pi3=new int(2);\ndelete pi2;\ndelete pi3;\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#5","title":"5 \u5bb9\u5668","text":""},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#51","title":"5.1 \u6570\u7ec4","text":"<ul> <li>\u8bed\u6cd5\uff1a</li> <li>Go\uff1a<ul> <li><code>var \u6570\u7ec4\u540d [\u6570\u7ec4\u5927\u5c0f]\u7c7b\u578b</code></li> <li>\u5b9a\u4e49\u5e76\u521d\u59cb\u5316\uff1a<code>var \u6570\u7ec4\u540d = [\u6570\u7ec4\u5927\u5c0f]\u7c7b\u578b{\u503c1\uff0c\u503c2,...,\u503cn}}</code></li> </ul> </li> <li>C++\uff1a<ul> <li><code>\u7c7b\u578b \u6570\u7ec4\u540d[\u6570\u7ec4\u5927\u5c0f\uff08\u53ef\u7701\u7565\uff0c\u81ea\u52a8\u63a8\u5bfc\uff09]</code></li> <li>\u5b9a\u4e49\u5e76\u521d\u59cb\u5316\uff1a<code>\u7c7b\u578b \u6570\u7ec4\u540d[\u6570\u7ec4\u5927\u5c0f\uff08\u53ef\u7701\u7565\uff0c\u81ea\u52a8\u63a8\u5bfc\uff09] = {\u503c1\uff0c\u503c2,...,\u503cn}</code></li> </ul> </li> <li>\u76f8\u540c\u70b9\uff1a</li> <li>\u6570\u7ec4\u7684\u5927\u5c0f\u90fd\u662f\u56fa\u5b9a\u7684</li> <li>\u6570\u7ec4\u5206\u914d\u5728\u8fde\u7eed\u7684\u5185\u5b58\u7a7a\u95f4</li> <li>\u4e0d\u540c\u70b9\uff1a</li> <li>Go\u4e2d\u6570\u7ec4\u4e0d\u7528\u7528const\u4fee\u9970\uff0c\u800cC++\u4e2d\u53ef\u4ee5</li> <li>Go\u4ee3\u7801</li> </ul> <pre><code>package main\n\nimport (\n\"fmt\"\n\"unsafe\"\n)\n\n// \u56fa\u5b9a\u5927\u5c0f\u6570\u7ec4\uff0c\u4e0d\u521d\u59cb\u5316\nvar arr1 [10]int\n// \u56fa\u5b9a\u5927\u5c0f\u6570\u7ec4\uff0c\u521d\u59cb\u5316\u90e8\u5206\nvar arr2= [3]int{1,2,3}\nfunc main() {\nfmt.Println(\"arr1:\",arr1);\nfmt.Println(\"arr2:\",arr2);\nfmt.Println(\"size of int = \",unsafe.Sizeof(int(0)))\nfor i := 0; i &lt; len(arr2); i++ {\nfmt.Printf(\"arr[%d] addr =[%p]\\n\",i,&amp;arr1[i])\n}\n/*\n    \u6ce8\u91ca\n    */\n}\n/*\u8f93\u51fa\u7ed3\u679c\uff1a\narr1: [0 0 0 0 0 0 0 0 0 0]\narr2: [1 2 3]\nsize of int =  8\narr[0] addr =[0x2b06e0]\narr[1] addr =[0x2b06e8]\narr[2] addr =[0x2b06f0]\n*/\n</code></pre> <ul> <li>C++\u4ee3\u7801</li> </ul> <pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint arr1[10];\nint arr2[10] = {1, 2, 3};\nint arr3[] = {1, 2, 3};\nint main() {\ncout &lt;&lt; \"arr1:\";\nfor (auto&amp; elem : arr1) {\ncout &lt;&lt; elem &lt;&lt; \" \";\n}\ncout &lt;&lt; endl &lt;&lt; \"arr2:\";\nfor (auto elem : arr2) {\ncout &lt;&lt; elem &lt;&lt; \" \";\n}\ncout &lt;&lt; endl &lt;&lt; \"arr3:\";\nfor (auto elem : arr3) {\ncout &lt;&lt; elem &lt;&lt; \" \";\n}\n}\n/* \u8f93\u51fa\u7ed3\u679c\narr1:0 0 0 0 0 0 0 0 0 0 \narr2:1 2 3 0 0 0 0 0 0 0 \narr3:1 2 3\n*/\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#52","title":"5.2 \u5207\u7247","text":"<ul> <li>Go\u7684\u5207\u7247\u662f\u53ef\u4ee5\u7406\u89e3\u6210\u52a8\u6001\u6570\u7ec4\uff0cGo\u4e2d\u6570\u7ec4\u5927\u5c0f\u662f\u56fa\u5b9a\u7684\uff0c\u800c\u5207\u7247\u5927\u5c0f\u662f\u52a8\u6001\u53ef\u53d8\u7684</li> <li>Go\u5207\u7247\u53ef\u4ee5\u7528make\u521b\u5efa</li> <li>Go\u5207\u7247\u548c\u6570\u7ec4\u4e00\u6837\u53ef\u4ee5\u901a\u8fc7\u7d22\u5f15\u6765\u8bbf\u95ee\u5143\u7d20</li> <li>Go\u4e2d\u5207\u7247\u662f\u4e00\u79cdC++\u4e2d\u7684\u5f15\u7528\u7c7b\u578b\uff0c\u5728\u51fd\u6570\u5185\u6539\u53d8\u5207\u7247\u503c\uff0c\u51fa\u4e86\u4f5c\u7528\u57df\uff0c\u4f9d\u7136\u6709\u6548</li> <li>Go\u793a\u4f8b</li> </ul> <pre><code>package main\n\nimport (\n\"fmt\"\n)\n\n// \u5207\u7247\uff0c\u4e0d\u521d\u59cb\u5316\nvar slice1 []int\n// \u5207\u7247\uff0c\u521d\u59cb\u5316\nvar slice2= []int{1,2,3}\n// make \u521b\u5efa\u5207\u7247\nvar slice3=make([]int,5,10)\nfunc main() {\nfmt.Println(\"slice1\",slice1)\nfmt.Println(\"slice2 \",slice2)\nfmt.Println(\"slice2[0:3] \",slice2[0:3])\nfmt.Println(\"slice2[1:2] \",slice2[1:2])\nfmt.Println(\"slice2[:] \",slice2[:])\nfmt.Printf(\"slice3[:]=%v len=%d cap=%d\",slice3[:],len(slice3),cap(slice3))\nfor i, v := range slice2 {\nfmt.Println(\"index = \",i,\" value = \",v)\n}\nfor i := 0; i &lt; len(slice2); i++ {\nprintln(slice2[i])\n}\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#53-map","title":"5.3 map","text":"<ul> <li>\u8bed\u6cd5\uff1a</li> <li>Go\uff1a<ul> <li><code>var map\u540d map[\u952e\u7c7b\u578b]\u503c\u7c7b\u578b</code></li> <li>\u5b9a\u4e49\u5e76\u521d\u59cb\u5316\uff1a<code>var map\u540d = map[\u952e\u7c7b\u578b]\u503c\u7c7b\u578b{\u952e1:\u503c1,\u952e2:\u503c2,...,\u952en:\u503cn}}</code></li> <li>make\u521b\u5efa\uff1a<code>var map\u540d = make(map[\u952e\u7c7b\u578b]\u503c\u7c7b\u578b)</code></li> </ul> </li> <li>\u4e0d\u540c\u70b9\uff1a</li> <li>Go\u4e2dmap\u662f\u4e00\u79cdC++\u4e2d\u7684\u5f15\u7528\u7c7b\u578b\uff0c\u5728\u51fd\u6570\u5185\u6539\u53d8map\u503c\uff0c\u51fa\u4e86\u4f5c\u7528\u57df\uff0c\u4f9d\u7136\u6709\u6548</li> <li>Go\u793a\u4f8b</li> </ul> <pre><code>package main\n\nimport \"fmt\"\n\nvar map1 map[int]string\nvar map2 = map[int]string{1: \"hello\", 2: \"world\"}\n// \u4f7f\u7528make\u521b\u5efamap\nvar map4=make(map[string]int)\nfunc main() {\nmap3 := map[string]string{\"1\": \"hello\", \"2\": \"world\"}\nfmt.Println(\"map3:\", map3)\n// \u83b7\u53d6map\u4e2d\u6307\u5b9akey\u5bf9\u5e94\u7684\u503c\nfmt.Println(\"map3 key \\\"2\\\" value=\",map3[\"2\"])\n// \u5411map\u4e2d\u63d2\u5165\u5143\u7d20\nmap4[\"3\"]=3\nfmt.Println(\"map4:\", map4)\n//\u4f7f\u7528for range\u904d\u5386map\nfor k, v := range map3 {\nfmt.Printf(\"key %v value %v\\n\",k,v)\n}\n}\n/* \u8f93\u51fa\u7ed3\u679c\nmap3: map[1:hello 2:world]\nmap3 key \"2\" value= world\nmap4: map[3:3]\nkey 1 value hello\nkey 2 value world\n*/\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#54-list","title":"5.4 list","text":"<ul> <li>\u58f0\u660e\u8bed\u6cd5\uff1a</li> <li>Go\uff1a<ul> <li><code>var \u53d8\u91cf\u540d list.List</code></li> <li>\u4f7f\u7528list\u5185\u5efa\u51fd\u6570<code>list.New()</code>\u521b\u5efalist\u6307\u9488\uff1a<code>\u53d8\u91cf\u540d := list.New()</code></li> </ul> </li> <li>Go\u793a\u4f8b</li> </ul> <pre><code>package main\n\nimport (\n\"container/list\"\n\"fmt\"\n)\nvar l1 =list.List{}\nvar l2 list.List\nfunc main() {\n// \u901a\u8fc7list\u5185\u5efa\u51fd\u6570New\u521b\u5efalist\u6307\u9488\nl3:=list.New()\nl3.PushBack(1);\nl3.PushBack(\"hello\")\nfor e:=l3.Front();e!=nil;e=e.Next(){\nfmt.Print(e.Value,\" \")\n}\n\n}\n/* \u8f93\u51fa\u7ed3\u679c\n1 hello \n*/\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#6","title":"6 \u522b\u540d","text":"<ul> <li>\u76f8\u540c\u70b9\uff1a</li> <li>\u90fd\u53ef\u4ee5\u8bbe\u7f6e\u7c7b\u578b\u3001\u51fd\u6570\u7684\u522b\u540d</li> <li>\u4e0d\u540c\u70b9\uff1a</li> <li>\u8bed\u6cd5\u4e0d\u540c\uff1a<ul> <li>Go\uff1a<code>type \u7c7b\u578b\u522b\u540d \u7c7b\u578b</code></li> <li>C++\uff1a<code>typedef \u7c7b\u578b \u7c7b\u578b\u522b\u540d</code></li> </ul> </li> <li>Go\u4ee3\u7801</li> </ul> <pre><code>package main\n\nimport (\n\"fmt\"\n\"reflect\"\n)\nfunc add(a, b int) int {\nreturn a + b\n}\n\ntype add_type func(int, int) int\n\ntype int32 int\nvar i1 int32\nvar i2 int\n\nfunc main() {\nfmt.Println(\"i1=\", reflect.TypeOf(i1))\nfmt.Println(\"i2=\", reflect.TypeOf(i2))\nvar f_add add_type\nf_add = add\nfmt.Println(\"f_add(1,2)=\", f_add(1, 2))\n}\n// \u8f93\u51fa\u7ed3\u679c\uff1a\n// i1= main.int32\n// i2= int\n// f_add(1,2)= 3\n</code></pre> <ul> <li>C++\u4ee3\u7801</li> </ul> <pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint f() {\nreturn 1;\n}\n\ntypedef int int32;\ntypedef int(*f_t)();\nint main() {\nint32 i1=1;\nint i2=2;\nf_t fun=f;\ncout&lt;&lt;\"i1 type= \"&lt;&lt;typeid(i1).name()&lt;&lt;endl;\ncout&lt;&lt;\"i2 type= \"&lt;&lt;typeid(i2).name()&lt;&lt;endl;\ncout&lt;&lt;\"fun()\"&lt;&lt;fun()&lt;&lt;endl;\n}\n// \u8f93\u51fa\u7ed3\u679c\uff1a\n// i1 type= i\n// i2 type= i\n// fun()1\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#7","title":"7 \u6d41\u7a0b\u63a7\u5236","text":""},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#71-for","title":"7.1 for","text":"<ul> <li>\u76f8\u540c\u70b9\uff1a</li> <li>Go\u548cC++ for\u7ed3\u6784\u5927\u81f4\u76f8\u540c</li> <li>\u90fd\u53ef\u4ee5\u4f7f\u7528break\u3001continue</li> <li>\u4e0d\u540c\u70b9\uff1a</li> <li>Go\u4e2dfor\u5904\u7406\u8bed\u53e5\u4e0d\u9700\u8981\u653e\u5728\u5c0f\u62ec\u53f7<code>()</code>\u91cc\u9762</li> <li>Go\u4e2d\u5de6\u82b1\u62ec\u53f7<code>{</code>\u5fc5\u987b\u548c<code>for</code>\u5728\u540c\u4e00\u884c\uff0c\u4e0d\u80fd\u5355\u72ec\u6210\u884c</li> <li>Go\u4ee3\u7801</li> </ul> <pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\nvar arr = [3]int{1, 2, 3}\n// \u4e0d\u9700\u8981()\u5305\u88f9\n// \u5de6\u82b1\u62ec\u53f7{\u548cfor\u5728\u540c\u4e00\u884c\nfor i := 0; i &lt; len(arr); i++ {\nfmt.Println(arr[i])\n}\n}\n/* \u8f93\u51fa\u7ed3\u679c\n0\n1\n2\n*/\n</code></pre> <ul> <li>C++\u4ee3\u7801</li> </ul> <pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\nint arr[3]={1, 2, 3};\nfor (int i = 0; i &lt; sizeof(arr)/sizeof(int); i++) {\ncout&lt;&lt;arr[i]&lt;&lt;endl;\n}\n}\n/* \u8f93\u51fa\u7ed3\u679c\n0\n1\n2\n*/\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#72-for-range","title":"7.2 for Range","text":"<ul> <li>\u4e0d\u540c\u70b9\uff1a</li> <li>Go\u4e2d\u6570\u7ec4\u3001\u5207\u7247\u3001\u5b57\u7b26\u4e32\u8fd4\u56de\u7d22\u5f15\u548c\u503c\u51712\u4e2a\u503c\uff1bmap\u8fd4\u56dekey\u548c\u503c\uff1bC++\u4e2d\u53ea\u80fd\u8fd4\u56de1\u4e2a\u503c</li> <li>Go\u4e2d\u9700\u8981\u4f7f\u7528Range\u5173\u952e\u5b57\uff0cC++\u4e2d\u4e0d\u9700\u8981</li> <li>Go\u4ee3\u7801</li> </ul> <pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\nvar arr=[3]int{1, 2, 3}\nfor index, v := range arr {\nfmt.Printf(\"index =%v value =%v\\n\",index,v)\n}\nvar m = map[int]int{1:1, 2:2, 3:3}\nfor k,v := range m {\nfmt.Printf(\"key =%v value =%v\\n\",k,v)\n}\n}\n/* \u8f93\u51fa\u7ed3\u679c\nindex =0 value =1\nindex =1 value =2\nindex =2 value =3\nkey =1 value =1\nkey =2 value =2\nkey =3 value =3\n*/\n</code></pre> <ul> <li>C++\u4ee3\u7801</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;map&gt;\nusing namespace std;\n\nint main() {\nmap&lt;int, int&gt; m = {{1, 1}, {2, 2}, {3, 3}};\nfor (auto elm : m) {\ncout &lt;&lt; \"key =\" &lt;&lt; elm.first &lt;&lt; \" value =\" &lt;&lt; elm.second &lt;&lt; endl;\n}\n}\n/* \u8f93\u51fa\u7ed3\u679c\nkey =1 value =1\nkey =2 value =2\nkey =3 value =3\n*/\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#73-if","title":"7.3 if","text":"<ul> <li>\u76f8\u540c\u70b9\uff1a</li> <li>Go\u548cC++ if\u7ed3\u6784\u5927\u81f4\u76f8\u540c\uff0c\u90fd\u6709<code>if\u3001else if\u3001 else</code>\u5206\u652f</li> <li>\u652f\u6301\u5728\u6761\u4ef6\u4e2d\u5d4c\u5165\u4e00\u6761\u8868\u8fbe\u5f0f\uff08c++17\u652f\u6301\uff09</li> <li>\u4e0d\u540c\u70b9\uff1a</li> <li>Go\u4e2d\u6761\u4ef6\u4e0d\u9700\u8981\u653e\u5728\u5c0f\u62ec\u53f7<code>()</code>\u91cc\u9762</li> <li>Go\u4e2d\u5de6\u82b1\u62ec\u53f7<code>{</code>\u5fc5\u987b\u548c<code>if\u3001else if\u3001 else</code>\u5206\u652f\u5728\u540c\u4e00\u884c\uff0c\u4e0d\u80fd\u5355\u72ec\u6210\u884c</li> <li>Go\u4ee3\u7801</li> </ul> <pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n// \u6761\u4ef6\u4e0d\u9700\u8981()\n// {\u8981\u4e0eif\u3001else if \u3001else\u5728\u540c\u4e00\u884c\n// \u6761\u4ef6\u91cc\u9762\u53ef\u4ee5\u5199\u4e00\u6761\u8868\u8fbe\u5f0f\nif s := 1; s &lt; 0 {\nfmt.Println(\"s&lt;0\")\n} else if s &gt; 0 &amp;&amp; s &lt; 2 {\nfmt.Println(\"0&lt;=s&lt;2\")\n} else {\nfmt.Println(\"s&gt;=2\")\n}\n}\n/* \u8f93\u51fa\u7ed3\u679c\n0&lt;=s&lt;2\n*/\n</code></pre> <ul> <li>C++\u4ee3\u7801</li> </ul> <pre><code>// -std=c++17\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\nif(int i=1;i&lt;0){\ncout&lt;&lt;\"i&lt;0\";\n}\nelse if(i&gt;=0&amp;&amp;i&lt;2)\n{\ncout&lt;&lt;\"0&lt;&lt;i&lt;2\";\n}\nelse{\ncout&lt;&lt;\"i&gt;=2\";\n}\n}\n/* \u8f93\u51fa\u7ed3\u679c\n0&lt;&lt;i&lt;2\n*/\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#74-switch","title":"7.4 switch","text":"<ul> <li>\u76f8\u540c\u70b9\uff1a</li> <li>\u8bed\u6cd5\u5f62\u5f0f\u5927\u81f4\u76f8\u540c\uff0c\u90fd\u662f\u901a\u8fc7switch\u3001case\u3001default\u63a7\u5236\u6d41\u7a0b</li> <li>\u4e0d\u540c\u70b9\uff1a</li> <li>Go\u4e2dswitch\u4e0d\u7528\u5c0f\u62ec\u53f7<code>()</code>\u5305\u88f9\u6761\u4ef6</li> <li>Go\u4e2d\u6bcf\u4e00\u4e2acase\u8bed\u53e5\u90fd\u662f\u5355\u72ec\u7684\u8bed\u53e5\u5757\uff0c\u4e0d\u9700\u8981\u901a\u8fc7break\u6765\u8df3\u51fa</li> <li>Go\u4e2d\u4e00\u4e2acase\u53ef\u4ee5\u6709\u591a\u4e2a\u6761\u4ef6\uff0c\u800cC++\u4e2d\u53ea\u80fd\u6709\u4e00\u4e2a</li> <li>Go\u4e2dswitch\u80fd\u5bf9\u5b57\u7b26\u4e32\u505a\u5224\u65ad\uff0c\u800cC++\u4e2d\u53ea\u80fd\u5bf9\u679a\u4e3e\u3001\u6574\u5f62\u6216\u6574\u5f62\u7ec4\u5408\u7684\u8868\u8fbe\u5f0f\u505a\u5224\u65ad</li> <li>Go\u4e2dswitch\u53ef\u4ee5\u60f3if\u4e00\u6837\uff0c\u5728case\u91cc\u9762\u586b\u8868\u8fbe\u5f0f</li> <li>Go\u4e2d\u4f7f\u7528\u5173\u952e\u5b57fallthrough\u6765\u7ee7\u7eed\u6267\u884ccase\u540e\u9762\u5206\u652f\uff08\u7c7b\u4f3c\u9ed8\u8ba4\u7684C++ case\u884c\u4e3a\uff0c\u7ee7\u7eed\u6267\u884c\u540e\u9762\u7684case\u4ee3\u7801\uff0c\u9664\u975e\u8c03\u7528break\u8df3\u51fa\uff09</li> <li>Go\u4ee3\u7801</li> </ul> <pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\nvar s string= \"hi\"\n// \u4e0d\u7528()\u5305\u88f9\nswitch s {\ncase \"hello\":\nfmt.Println(\"hello world\")\n// \u4e00\u4e2acase\u591a\u4e2a\u6761\u4ef6\ncase \"hi\",\"hi1\":\nfmt.Println(\"hi world\")\n// fallthrough \u80fd\u591f\u7ee7\u7eed\u6267\u884c\u540e\u9762\u5206\u652f\uff0cC++\u4e2d\u9ed8\u8ba4\u652f\u6301\nfallthrough\ndefault:\nfmt.Println(\"defalut\")\n}\n//switch \u540e\u4e3a\u7a7a\uff0ccase\u5206\u652f\u505a\u5224\u65ad\nswitch{\ncase s==\"hi\":\n// \u4e0d\u7528break\u8df3\u51fa\uff0c\u9ed8\u8ba4\u652f\u6301\nfmt.Println(\"hi\")\ndefault:\nfmt.Println(\"default\")\n}\n}\n/* \u8f93\u51fa\u7ed3\u679c\nhi world\ndefalut\nhi\n*/\n</code></pre> <ul> <li>C++\u4ee3\u7801</li> </ul> <pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\nint i=1;\nswitch(i+1){\ncase 1:\ncout&lt;&lt;\"1\"&lt;&lt;endl;\nbreak;\ncase 2:\ncout&lt;&lt;\"2\"&lt;&lt;endl;\nbreak;\ndefalut:\ncout&lt;&lt;\"defalut\"&lt;&lt;endl;\n}\n}\n/* \u8f93\u51fa\u7ed3\u679c\n2\n*/\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#75-goto","title":"7.5 goto","text":"<p>Go\u548cC++\u4e2dgoto\u5b8c\u5168\u4e00\u6837\uff0c\u4e00\u6837\u7684\u8bed\u6cd5\uff0c\u4e00\u6837\u7684\u9650\u5236\u6761\u4ef6 - Go\u4ee3\u7801</p> <pre><code>package main\n\nfunc f() int {\nx := 2\ngoto L\n// \u53d8\u91cf\u58f0\u660e\u5b9a\u4e49\u4e0d\u80fd\u88abgoto\u8df3\u8fc7\n//Y := 3\nL:\nx++\nreturn x\n}\nfunc main() {\n\n}\n</code></pre> <ul> <li>C++\u4ee3\u7801</li> </ul> <pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint f() {\nint x = 2;\ngoto L;\n// \u53d8\u91cf\u58f0\u660e\u5b9a\u4e49\u4e0d\u80fd\u88abgoto\u8df3\u8fc7\n// int Y = 3;\nL:\nx++;\nreturn x;\n}\nint main() {}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#8","title":"8 \u51fd\u6570","text":"<ul> <li>\u76f8\u540c\u70b9\uff1a</li> <li>\u90fd\u6709\u533f\u540d\u51fd\u6570\uff0c\u4f46C++\u4e2d\u662flambda\u51fd\u6570</li> <li>\u4e0d\u540c\u70b9\uff1a</li> <li>go\u51fd\u6570\u9700\u8981\u7528<code>func</code>\u6807\u8bc6\u7b26\u6307\u793a</li> <li>go\u53ef\u4ee5\u8fd4\u56de\u591a\u4e2a\u503c\uff0cC++\u4e2d\u53ef\u4ee5\u662f\u8981tuple\u3001pair\u6216\u7ed3\u6784\u4f53\u65b9\u5f0f</li> <li>go\u4e2d\u53ef\u4ee5\u5728\u51fd\u6570\u5185\u90e8\u901a\u8fc7<code>defer</code>\u5173\u952e\u5b57\u5b9a\u4e49\u5ef6\u540e\u6267\u884c\u8bed\u53e5</li> <li>\u51fd\u6570\u8bed\u6cd5</li> </ul> <pre><code>func \u51fd\u6570\u540d(\u53c2\u6570\u5217\u8868)(\u8fd4\u56de\u503c\u5217\u8868){\n\u51fd\u6570\u4f53\n}\n</code></pre> <ul> <li>Go\u793a\u4f8b</li> </ul> <pre><code>package main\n\nimport \"fmt\"\n\nfunc sum(a int,b int) int{\nreturn a+b\n}\n// 2. \u5f53\u53c2\u6570\u7c7b\u578b\u4e00\u81f4\u65f6\uff0c\u53ef\u4ee5\u7b80\u5316\u53c2\u6570\u7c7b\u578b\u7684\u58f0\u660e\nfunc sum1(a ,b int,c bool) int{\nreturn a+b\n}\n// 3.1. \u53ef\u4ee5\u6307\u5b9a\u8fd4\u56de\u503c\u540d\uff0c\u8fd9\u6837\u53ef\u4ee5\u5728\u51fd\u6570\u4f53\u76f4\u63a5\u5bf9\u8fd4\u56de\u503c\u8d4b\u503c\uff0c\u80fd\u4e0d\u7528\u663e\u5f0freturn\u4e00\u4e2a\u503c\n// 3.2. \u5f53\u8fd4\u56de\u503c\u6307\u5b9a\u4e86\u540d\u79f0\u65f6\u9700\u8981\u7528()\u62ec\u8d77\u6765\n// 3.3. \u5f53\u8fd4\u56de\u503c\u6709\u591a\u4e2a\u65f6\u4e5f\u9700\u8981\u7528()\u62ec\u8d77\u6765\nfunc sum2(a int,b int) (c int){\nc=a+b\nreturn\n}\nfunc swap(a int,b int) (int,int){\nreturn b,a\n}\nfunc main() {\nfmt.Println(\"sum(1,2) =\",sum(1,2))\nfmt.Println(\"sum1(1,2,false) =\",sum1(1,2,false))\nfmt.Println(\"sum2(1,2) =\",sum2(1,2))\na,b :=swap(1,2)\nfmt.Println(\"swap(1,2) =\",a,b)\n}\n// \u8f93\u51fa\u7ed3\u679c:\n// sum(1,2) = 3\n// sum1(1,2,false) = 3\n// sum2(1,2) = 3\n// swap(1,2) = 2 1\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#81","title":"8.1 \u533f\u540d\u51fd\u6570","text":"<ul> <li>\u4e0d\u540c\u70b9\uff1a</li> <li>go\u4e2d\u533f\u540d\u51fd\u6570\u76f4\u63a5\u7701\u7565\u51fd\u6570\u540d\uff0c\u800cC++\u4e2d\u662flambda\u51fd\u6570</li> <li>\u51fd\u6570\u8bed\u6cd5</li> </ul> <pre><code>func (\u53c2\u6570)(\u8fd4\u56de\u503c) {\n\u51fd\u6570\u4f53\n}\n</code></pre> <ul> <li>Go\u4ee3\u7801</li> </ul> <pre><code>package main\n\nimport (\n\"fmt\"\n)\n\nfunc main() {\nfunc() { fmt.Println(\"\u533f\u540d\u51fd\u6570\") }()\n}\n// \u8f93\u51fa\u7ed3\u679c\uff1a\n// \u533f\u540d\u51fd\u6570\n</code></pre> <ul> <li>C++\u4ee3\u7801</li> </ul> <pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n[]() { cout &lt;&lt; \"\u533f\u540d\u51fd\u6570\" &lt;&lt; endl; }();\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#82-godefer","title":"8.2 Go\u4e2ddefer\u5ef6\u540e\u6267\u884c\u8bed\u53e5","text":"<p>c++\u51fd\u6570\u4e2d\u6ca1\u6709\u5ef6\u540e\u6267\u884c\u8bed\u6cd5</p> <pre><code>package main\n\nimport (\n\"fmt\"\n)\n\nfunc main() {\nfmt.Println(\"1\")\n// \u5ef6\u540e\u6267\u884c\u987a\u5e8f\u673a\u5236\u7c7b\u4f3c\u6808\uff0c\u5148\u5b9a\u4e49\u7684\u540e\u6267\u884c\ndefer fmt.Println(\"2\")\ndefer fmt.Println(\"3\")\nfmt.Println(\"4\")\n}\n// \u8f93\u51fa\u7ed3\u679c\uff1a\n// 1\n// 4\n// 3\n// 2\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#9","title":"9 \u5bf9\u8c61","text":"<ul> <li>\u4e0d\u540c\u70b9\uff1a<ul> <li>Go\u4e2d\u6709struct\u5173\u952e\u5b57\uff0c\u4f46\u6ca1\u6709class</li> <li>Go\u4e2d\u6210\u5458\u6ca1\u6709\u79c1\u6709\u3001\u516c\u6709\u6982\u5ff5\uff1b</li> <li>Go\u4e2d\u5305\u5916\u8c03\u7528\u5177\u6709\u516c\u6709\uff0c\u79c1\u6709\u5c5e\u6027\u3002\u6210\u5458\u53d8\u91cf\u3001\u6210\u5458\u51fd\u6570\u7684\u9996\u5b57\u6bcd\u5927\u5199\u5219\u5141\u8bb8\u8bbf\u95ee\uff0c\u5c0f\u5199\u5219\u7981\u6b62\u8bbf\u95ee</li> <li>Go\u4e2d\u6ca1\u6709\u6784\u9020\u3001\u6790\u6784\u51fd\u6570</li> <li>Go\u4e2d\u7c7b\u6210\u5458\u51fd\u6570\u4e0d\u5728\u7c7b\u4e2d\u58f0\u660e</li> <li>Go\u4e2d\u7ee7\u627f\u662f\u76f4\u63a5\u8bb2\u5176\u5b83\u7ed3\u6784\u540d\u58f0\u660e\u5728\u7ed3\u6784\u4e2d</li> <li>Go\u4e2d\u901a\u8fc7\u5b9e\u73b0\u63a5\u53e3\u5b9a\u4e49\u7684\u65b9\u6cd5\uff0c\u6765\u8fbe\u5230\u591a\u6001\u76ee\u7684</li> </ul> </li> </ul> <pre><code>package main\n\nimport (\n\"fmt\"\n)\n\ntype Dog struct{\n_name string\n}\n\nfunc (dog *Dog) Name() {\nfmt.Printf(\"\u6211\u662f%s\\n\",dog._name)\n}\nfunc (dog *Dog) eat(){\nfmt.Printf(\"%s \u5f00\u59cb\u5403\u996d\\n\",dog._name)\n}\n\nfunc main() {\ndog:=Dog{\"dog\"}\ndog.Name()\ndog.eat()\n}\n// \u8f93\u51fa\u7ed3\u679c\uff1a\n// \u6211\u662fdog\n// dog \u5f00\u59cb\u5403\u996d\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#91","title":"9.1 \u5c01\u88c5","text":"<pre><code>- Go\u4e2d\u4e5f\u80fd\u5c06\u51fd\u6570\u3001\u53d8\u91cf\u7ec4\u5408\u5728\u4e00\u4e2astruct\u4e2d\uff0c\u901a\u8fc7\u9996\u5b57\u6bcd\u5927\u5c0f\u5199\u63a7\u5236\u5305\u5916\u7684\u8bbf\u95ee\u6743\u9650\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#92","title":"9.2 \u7ee7\u627f","text":"<ul> <li>\u8bed\u6cd5\u89c4\u5219\uff1a\u5c06\u88ab\u7ee7\u627f\u7684\u7ed3\u6784\u4f53\u540d\u79f0\u5199\u5728\u5e26\u7ee7\u627f\u7684\u7ed3\u6784\u4e2d</li> </ul> <pre><code>package main\n\nimport \"fmt\"\n\ntype human struct {\nname string\nage  int\n}\ntype student struct {\n//\u7ee7\u627fhuman\nhuman\nstuId int64\n}\n\nfunc main() {\nvar a student\na.name = \"boo\"\na.age = 13\na.stuId = 2013020100\nfmt.Println(a)\n}\n// \u8f93\u51fa\u7ed3\u679c\uff1a\n// {{boo 13} 2013020100}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#93","title":"9.3 \u591a\u6001","text":"<pre><code>- \u591a\u6001\u7684\u5b9e\u73b0\u662f\u501f\u52a9\u4e8einterface\u7684\u529f\u80fd\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#10-interface","title":"10 interface","text":"<pre><code>title: interface\u4f7f\u7528\u573a\u666f\n- \u5b9e\u73b0\u5bf9\u8c61\u591a\u6001\u7279\u6027\n- \u5145\u5f53\u4e07\u80fd\u7c7b\u578b\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#101","title":"10.1 \u5b9e\u73b0\u5bf9\u8c61\u591a\u6001\u7279\u6027","text":"<pre><code>- Go\u4e2d\u7684\u63a5\u53e3\u5bf9\u5e94\u4e86C++\u4e2d\u62bd\u8c61\u57fa\u7c7b\uff0c\u90fd\u5b9a\u4e49\u4e86\u4e00\u4e9b\u65b9\u6cd5\uff0c\u7531\u6b64\u5b9e\u73b0\u591a\u6001\n- Go\u4e2d\u4e0d\u80fd\u7ee7\u627f\u6210\u5458\uff0c\u4e14\u5fc5\u987b\u5b9e\u73b0\u5168\u90e8\u63a5\u53e3\u65b9\u6cd5\uff0c\u624d\u662f\u5b9e\u73b0\u4e86\u63a5\u53e3\n</code></pre> <pre><code>package main\n\nimport (\n\"fmt\"\n)\n\ntype Animal interface{\neat()\nName()\n}\ntype Dog struct{\n_name string\n}\ntype Cat struct{\n_name string\n}\nfunc (dog *Dog) Name() {\nfmt.Printf(\"\u6211\u662f%s\\n\",dog._name)\n}\nfunc (dog *Dog) eat(){\nfmt.Printf(\"%s \u5f00\u59cb\u5403\u996d\\n\",dog._name)\n}\nfunc (cat *Cat) Name(){\nfmt.Printf(\"\u6211\u662f%s\\n\",cat._name)\n}\nfunc (cat *Cat) eat(){\nfmt.Printf(\"%s \u5f00\u59cb\u5403\u996d\\n\",cat._name)\n}\nfunc main() {\nvar animal Animal\nanimal=&amp;Cat{\"cat\"}\nanimal.Name()\nanimal.eat()\nanimal=&amp;Dog{\"dog\"}\nanimal.Name()\nanimal.eat()\n}\n// \u8f93\u51fa\u7ed3\u679c\uff1a\n// \u6211\u662fcat\n// cat \u5f00\u59cb\u5403\u996d\n// \u6211\u662fdog\n// dog \u5f00\u59cb\u5403\u996d\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#102","title":"10.2 \u4e07\u80fd\u7c7b\u578b","text":""},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#11","title":"11 \u5f02\u5e38","text":"<ul> <li>\u4e0d\u540c\u70b9\uff1a</li> <li>Go\uff1a\u4f7f\u7528<code>panic</code>\u6765\u629b\u5f02\u5e38\uff0c\u4f7f\u7528<code>recover</code>\u6355\u83b7\u5f02\u5e38</li> <li>C++\uff1a\u4f7f\u7528<code>throw</code>\u6765\u629b\u5f02\u5e38\uff0c\u4f7f\u7528<code>try catch</code>\u6765\u6355\u83b7\u5f02\u5e38</li> </ul> <pre><code>package main\n\nimport (\n\"fmt\"\n)\n\nfunc div(a int, b int) (c int) {\nif b==0{\npanic(\"\u5206\u6bcd\u4e0d\u80fd=0\")\n}\nreturn a/b\n}\n\nfunc main() {\ndefer func () \u00a0{\nfmt.Println(recover())\n}()\ndiv(1,0)\n}\n// \u8f93\u51fa\u7ed3\u679c\uff1a\n//\u5206\u6bcd\u4e0d\u80fd=0\n</code></pre> <pre><code>#include&lt;iostream&gt;\nusing namespace std;\nvoid fun(bool flag){\nif(!flag){\nthrow \"throw a info!\";\n}\n}\n\nint main(){\ntry{\nfun(false);\n}\ncatch(const char* e){\nstd::cout&lt;&lt;e&lt;&lt;endl;\n}\n}\n// \u8f93\u51fa\u7ed3\u679c\uff1a\n//throw a info!\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#12_1","title":"12 \u9519\u8bef","text":"<ul> <li>Go\u4e2d\u4e00\u822c\u4f7f\u7528\u9519\u8bef\u6765\u66ff\u4ee3\u5f02\u5e38\u673a\u5236\uff0c\u901a\u8fc7\u51fd\u6570\u8fd4\u56de\u503c\u8fd4\u56de\u9519\u8bef\u4fe1\u606f\uff0c\u7531\u8fd4\u56de\u7684error\u662f\u5426\u4e3anil\u6765\u5224\u65ad\u51fd\u6570\u662f\u5426\u6267\u884c\u6210\u529f</li> <li>Go\u4ee3\u7801</li> </ul> <pre><code>package main\n\nimport (\n\"errors\"\n\"fmt\"\n)\n\nfunc div(a int, b int) (c int, errstr error) {\nif b == 0 {\nreturn 0, errors.New(\"\u5206\u6bcd\u4e0d\u80fd=0\")\n}\nreturn a / b, nil\n}\n\nfunc main() {\nval, err := div(1, 0)\nif err != nil {\nfmt.Println(err.Error())\n}else{\nfmt.Println(val)\n}\n}\n// \u8f93\u51fa\u7ed3\u679c\uff1a\n// \u5206\u6bcd\u4e0d\u80fd=0\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#121-error","title":"12.1 \u5b9e\u73b0\u81ea\u5df1\u7684error\u7c7b\u578b","text":"<ul> <li>error\u7c7b\u578b\u662f\u4e00\u4e2a\u63a5\u53e3\uff0c\u5b9e\u73b0Error\u51fd\u6570\u5c31\u80fd\u5b9a\u4e49\u4e00\u4e2a\u81ea\u5df1\u7684error\u7c7b</li> </ul> <pre><code>type error interface {\nError() string\n}\n</code></pre> <ul> <li>Go\u4ee3\u7801</li> </ul> <pre><code>package main\n\nimport (\n\"fmt\"\n)\n\nfunc div(a int, b int) (c int, errstr *MyErrors) {\nif b == 0 {\nreturn 0, &amp;MyErrors{\"\u5206\u6bcd\u4e0d\u80fd=0\",a,b}\n}\nreturn a / b, nil\n}\ntype MyErrors struct{\nerr string\ni1 int\ni2 int\n}\nfunc (mErr *MyErrors) Error() string{\nreturn fmt.Sprintf(\"(%v,%v)%s\\n\",mErr.i1,mErr.i2,mErr.err)\n}\nfunc main() {\nval, err := div(1, 0)\nif err != nil {\nfmt.Println(err.Error())\n}else{\nfmt.Println(val)\n}\n}\n// \u8f93\u51fa\u7ed3\u679c\uff1a\n// (1,0)\u5206\u6bcd\u4e0d\u80fd=0\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#13-tag","title":"13 tag","text":"<p>https://zhuanlan.zhihu.com/p/258978922</p>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#14_1","title":"14 \u53cd\u5c04","text":"<pre><code>title: \u4ec0\u4e48\u662f\u53cd\u5c04\uff1f\ncolor: 99,178,129\ncollapse: open\n\n\u652f\u6301\u53cd\u5c04\u7684\u8bed\u8a00\u53ef\u4ee5\u5728\u7a0b\u5e8f\u7f16\u8bd1\u671f\u5c06\u53d8\u91cf\u7684\u53cd\u5c04\u4fe1\u606f\uff0c\u5982\u5b57\u6bb5\u540d\u79f0\u3001\u7c7b\u578b\u4fe1\u606f\u3001\u7ed3\u6784\u4f53\u4fe1\u606f\u7b49\u6574\u5408\u5230\u53ef\u6267\u884c\u6587\u4ef6\u4e2d\uff0c\u5e76\u7ed9\u7a0b\u5e8f\u63d0\u4f9b\u63a5\u53e3\u8bbf\u95ee\u53cd\u5c04\u4fe1\u606f\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u5728\u7a0b\u5e8f\u8fd0\u884c\u671f\u83b7\u53d6\u7c7b\u578b\u7684\u53cd\u5c04\u4fe1\u606f\uff0c\u5e76\u4e14\u6709\u80fd\u529b\u4fee\u6539\u5b83\u4eec\u3002\n</code></pre> <ul> <li>\u4e0d\u540c\u70b9\uff1a<ul> <li>C++\u4e2d\u6ca1\u6709\u53cd\u5c04\uff0c\u4f46\u63d0\u4f9b\u4e86typeid\u8fd0\u7b97\u7b26\u6765\u83b7\u53d6\u7c7b\u578b\uff0c\u4f46\u53d7\u9650\u4e8e\u4e0d\u540c\u7684\u7f16\u8bd1\u5668\u5b9e\u73b0\uff0c\u5f97\u5230\u7684\u7ed3\u679c\u4e0d\u540c</li> </ul> </li> <li>Go\u4ee3\u7801</li> </ul> <pre><code>package main\n\nimport (\n\"fmt\"\n\"reflect\"\n)\n\ntype A struct {\n}\nfunc main() {\nfmt.Println(reflect.TypeOf(\"str\"))\nfmt.Println(reflect.TypeOf(1))\nfmt.Println(reflect.TypeOf(1.1))\nfmt.Println(reflect.TypeOf(false))\nfmt.Println(reflect.TypeOf(A{}))\n}\n// \u8f93\u51fa\u7ed3\u679c\uff1a\n// string\n// int\n// float64\n// bool\n// main.A\n</code></pre> <ul> <li>C++\u4ee3\u7801</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\nstruct A{\n\n};\nclass B{\nint i;\n};\nint main(){\ncout&lt;&lt;\"\u7c7b\u578bA\uff1a\"&lt;&lt;typeid(A).name()&lt;&lt;endl;\ncout&lt;&lt;\"\u7c7b\u578bB\uff1a\"&lt;&lt;typeid(B).name()&lt;&lt;endl;\ncout&lt;&lt;\"\u7c7b\u578bint\uff1a\"&lt;&lt;typeid(int).name()&lt;&lt;endl;\ncout&lt;&lt;\"\u7c7b\u578bstring\uff1a\"&lt;&lt;typeid(string).name()&lt;&lt;endl;\nreturn 0;\n}\n// \u5728MSVC\u4e0a\u7f16\u8bd1\u7ed3\u679c\uff1a\n// \u7c7b\u578bA\uff1astruct A\n// \u7c7b\u578bB\uff1aclass B\n// \u7c7b\u578bint\uff1aint\n// \u7c7b\u578bstring\uff1aclass std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;\n\n// \u5728gcc\u4e0a\u7f16\u8bd1\u7ed3\u679c\uff1a\n// \u7c7b\u578bA\uff1a1A\n// \u7c7b\u578bB\uff1a1B\n// \u7c7b\u578bint\uff1ai\n// \u7c7b\u578bstring\uff1aNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEE\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#15_1","title":"15 \u5e76\u53d1","text":"<pre><code>title: Go\u548cC++\u5e76\u53d1\u4e0d\u540c\u70b9\n- Go\u5e76\u53d1\u4f7f\u7528\u7684\u662f\u534f\u7a0bgoroutine\uff0c\u800cC++\u53ef\u4ee5\u4f7f\u7528[[\u7ebf\u7a0b]]\u6216\u8fdb\u7a0b\n- Go\u534f\u7a0b\u4f7f\u7528\u7b80\u5355\uff0c\u53ea\u9700&lt;font color=#ED7001&gt;go+\u51fd\u6570&lt;/font&gt;\u5c31\u53ef\u4ee5\u5f00\u542f\u534f\u7a0b\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#151-channel","title":"15.1 channel","text":"<pre><code>- \u4f7f\u7528\u573a\u666f\uff1a\n    - \u5728go\u534f\u7a0b\u4e2d\uff0c\u7528\u4e8e\u7236\u5b50\u534f\u7a0b\u95f4\u6570\u636e\u4f20\u8f93\n- \u4f7f\u7528\u65b9\u6cd5\uff1a\n    - \u521b\u5efachannel\uff1a`make(chan \u7c7b\u578b [,\u7f13\u5b58\u5927\u5c0f])`\n    - \u5199channel\uff1a`chan\u53d8\u91cf &lt;- \u6570\u636e`\n    - \u8bfbchannel\uff1a\n        - `\u6570\u636e\u53d8\u91cf &lt;- chan\u53d8\u91cf`\n        - for range \u904d\u5386\uff1a\u5982:`for i := range c`\n</code></pre> <ul> <li>Go\u4ee3\u7801</li> </ul> <pre><code>package main\n\nimport (\n\"fmt\"\n)\n\nfunc fibonacci(n int, c chan int) {\nx, y := 0, 1\nfor i := 0; i &lt; n; i++ {\nc &lt;- x\nx, y = y, x+y\n}\nclose(c)\n}\n\nfunc main() {\nc := make(chan int, 10)\ngo fibonacci(cap(c), c)\n// range \u51fd\u6570\u904d\u5386\u6bcf\u4e2a\u4ece\u901a\u9053\u63a5\u6536\u5230\u7684\u6570\u636e\uff0c\u56e0\u4e3a c \u5728\u53d1\u9001\u5b8c 10 \u4e2a\n// \u6570\u636e\u4e4b\u540e\u5c31\u5173\u95ed\u4e86\u901a\u9053\uff0c\u6240\u4ee5\u8fd9\u91cc\u6211\u4eec range \u51fd\u6570\u5728\u63a5\u6536\u5230 10 \u4e2a\u6570\u636e\n// \u4e4b\u540e\u5c31\u7ed3\u675f\u4e86\u3002\u5982\u679c\u4e0a\u9762\u7684 c \u901a\u9053\u4e0d\u5173\u95ed\uff0c\u90a3\u4e48 range \u51fd\u6570\u5c31\u4e0d\n// \u4f1a\u7ed3\u675f\uff0c\u4ece\u800c\u5728\u63a5\u6536\u7b2c 11 \u4e2a\u6570\u636e\u7684\u65f6\u5019\u5c31\u963b\u585e\u4e86\u3002\nfor i := range c {\nfmt.Println(i)\n}\n}\n// s\u8f93\u51fa\u7ed3\u679c\uff1a\n// 0\n// 1\n// 1\n// 2\n// 3\n// 5\n// 8\n// 13\n// 21\n// 34\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/GO%E5%92%8CC%2B%2B%E7%9A%84%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/#16-socket","title":"16 socket","text":"<ul> <li>Go\u4ee3\u7801</li> </ul> <pre><code>package main\n\nimport (\n\"fmt\"\n\"net\"\n)\n\nfunc main() {\nip := \"127.0.0.1\"\nport := 8888\naddress := fmt.Sprintf(\"%s:%d\", ip, port)\nnetKind := \"tcp\"\n//(net.Conn, error)\nconn, err := net.Dial(netKind, address)\nif err != nil {\nfmt.Println(\"connect error ,error info:\", err)\nreturn\n}\nfmt.Println(\"connect success\")\n//(n int, err error)\n_, err = conn.Write([]byte(\"hello\"))\nif err != nil {\nfmt.Println(\"Write error ,error info:\", err)\nreturn\n}\nbuf := make([]byte, 1024)\n//(n int, err error)\nlen, err := conn.Read(buf)\nif err != nil {\nfmt.Println(\"Read error ,error info:\", err)\nreturn\n}\ndata := string(buf[0:len])\nfmt.Printf(\"read data from server [%s], data is:%s\",conn.RemoteAddr(),data)\n}\n</code></pre> <ul> <li>\u6267\u884c\u7ed3\u679c\uff1a</li> </ul> <pre><code>$ go run client.go\nconnect success\nread data from server [127.0.0.1:8888], data is:HELLO\n</code></pre> <pre><code>````ad-info\ntitle: \u670d\u52a1\u7aef\n```go\npackage main\n\nimport (\n    \"fmt\"\n    \"net\"\n    \"strings\"\n)\n\nfunc main() {\n    // (net.Listener, error)\n    ip := \"127.0.0.1\"\n    port := 8888\n    address := fmt.Sprintf(\"%s:%d\", ip, port)\n    netKind := \"tcp\"\n    fmt.Println(\"start listen...\")\n    listener, err := net.Listen(netKind, address)\n    if err != nil {\n        fmt.Println(\"listen error ,error info:\", err)\n        return\n    }\n    fmt.Println(\"start accept...\")\n    // (net.Conn, error)\n    conn, err := listener.Accept()\n    if err != nil {\n        fmt.Println(\"accept error ,error info:\", err)\n        return\n    }\n    fmt.Println(\"\")\n    buf := make([]byte, 1024)\n    //(n int, err error)\n    len, err := conn.Read(buf)\n    if err != nil {\n        fmt.Println(\"Read error ,error info:\", err)\n        return\n    }\n    data := string(buf[0:len])\n    fmt.Printf(\"read data from client [%s], data is:%s\",conn.RemoteAddr(),data)\n    //(n int, err error)\n    len, err = conn.Write([]byte(strings.ToUpper(data)))\n    if err != nil {\n        fmt.Println(\"Write error ,error info:\", err)\n        return\n    }\n    conn.Close()\n    listener.Close()\n}\n```\n- \u6267\u884c\u7ed3\u679c\uff1a\n```shell\n$ go run server.go\nstart listen...\nstart accept...\n\nread data from client [127.0.0.1:4641], data is:hello\n```\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/Golang%E5%91%BD%E4%BB%A4/","title":"Golang\u547d\u4ee4","text":"<ul> <li>\u5b98\u65b9\u6587\u6863</li> </ul>"},{"location":"Documents/B-Programming%20Language/Go/Golang%E5%91%BD%E4%BB%A4/#1-go-help","title":"1 go help","text":"<ul> <li>\u529f\u80fd\uff1a\u67e5\u770bgo\u5e2e\u52a9\u4fe1\u606f</li> <li>\u8bed\u6cd5\uff1a`go help  <pre><code>\u4f7f\u7528go help\u53ef\u4ee5\u5217\u51fa\u6240\u6709\u53ef\u4f7f\u7528\u7684topic\n</code></pre> <pre><code>$ go help\nGo is a tool for managing Go source code.\n\nUsage:\n\n        go &lt;command&gt; [arguments]\n\nThe commands are:\n\n        bug         start a bug report\n        build       compile packages and dependencies\n        clean       remove object files and cached files\n        doc         show documentation for package or symbol\n        env         print Go environment information\n        fix         update packages to use new APIs\n        fmt         gofmt (reformat) package sources\n        generate    generate Go files by processing source\nget         add dependencies to current module and install them\n        install     compile and install packages and dependencies\n        list        list packages or modules\n        mod         module maintenance\n        work        workspace maintenance\n        run         compile and run Go program\n        test        test packages\n        tool        run specified go tool\n        version     print Go version\n        vet         report likely mistakes in packages\n\nUse \"go help &lt;command&gt;\" for more information about a command.\n\nAdditional help topics:\n\n        buildconstraint build constraints\n        buildmode       build modes\n        c               calling between Go and C\n        cache           build and test caching\n        environment     environment variables\n        filetype        file types\n        go.mod          the go.mod file\n        gopath          GOPATH environment variable\n        gopath-get      legacy GOPATH go get\n        goproxy         module proxy protocol\n        importpath      import path syntax\n        modules         modules, module versions, and more\n        module-get      module-aware go get\n        module-auth     module authentication using go.sum\n        packages        package lists and patterns\n        private         configuration for downloading non-public code\n        testflag        testing flags\n        testfunc        testing functions\n        vcs             controlling version control with GOVCS\n\nUse \"go help &lt;topic&gt;\" for more information about that topic.\n</code></pre> <ul> <li>\u793a\u4f8b\uff1a\u67e5\u770bgo\u548cc\u8c03\u7528\u5e2e\u52a9\u4fe1\u606f</li> </ul> <pre><code>$ go help c     \nThere are two different ways to call between Go and C/C++ code.\n\nThe first is the cgo tool, which is part of the Go distribution. For\ninformation on how to use it see the cgo documentation (go doc cmd/cgo).\n\nThe second is the SWIG program, which is a general tool for\ninterfacing between languages. For information on SWIG see\nhttp://swig.org/. When running go build, any file with a .swig\nextension will be passed to SWIG. Any file with a .swigcxx extension\nwill be passed to SWIG with the -c++ option.\n\nWhen either cgo or SWIG is used, go build will pass any .c, .m, .s, .S\nor .sx files to the C compiler, and any .cc, .cpp, .cxx files to the C++\ncompiler. The CC or CXX environment variables may be set to determine\nthe C or C++ compiler, respectively, to use\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/Golang%E5%91%BD%E4%BB%A4/#2-go-run","title":"2 go run","text":""},{"location":"Documents/B-Programming%20Language/Go/Golang%E5%91%BD%E4%BB%A4/#3-go-build","title":"3 go build","text":"<p>https://blog.abnerzhao.com/posts/go-build/ - \u529f\u80fd\uff1a\u6784\u5efago\u4ee3\u7801\uff0c\u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6 - \u8bed\u6cd5\uff1a<code>go build [-o output] [build flags] [packages]</code>     - <code>-o output</code>\uff1a\u6307\u5b9a\u751f\u6210\u7684\u53ef\u6267\u884c\u6587\u4ef6\u540d     - <code>-a</code>\uff1a\u5f3a\u5236\u91cd\u65b0\u6784\u5efa\u3002\uff08\u9ed8\u8ba4\u5728\u5df2\u7ecf\u6709\u751f\u6210\u7684\u53ef\u6267\u884c\u6587\u4ef6\u540e\uff0c\u6e90\u6587\u4ef6\u6ca1\u6709\u66f4\u65b0\uff0c\u5c31\u4e0d\u4f1a\u91cd\u65b0\u6784\u5efa\uff09     - <code>-compiler name</code>\uff1a\u6307\u5b9ago\u7f16\u8bd1\u5668\uff0c\u53ef\u9009<code>gc</code>\u548c<code>gccgo</code>\uff0c\u9ed8\u8ba4\u4f7f\u7528go\u81ea\u5e26\u7684gc\u7f16\u8bd1\u5668\uff0cgccgo\u662fGCC\u7f16\u8bd1\u5668</p>"},{"location":"Documents/B-Programming%20Language/Go/Golang%E5%91%BD%E4%BB%A4/#4-go-clean","title":"4 go clean","text":"<ul> <li>\u529f\u80fd\uff1a\u6e05\u7406\u7f16\u8bd1\u7684object\u6587\u4ef6</li> <li>\u8bed\u6cd5\uff1a<code>go clean [clean flags] [build flags] [packages]</code></li> </ul>"},{"location":"Documents/B-Programming%20Language/Go/Golang%E5%91%BD%E4%BB%A4/#5-go-get","title":"5 go get","text":"<ul> <li>\u529f\u80fd\uff1a\u4e0b\u8f7d\u6307\u5b9a\u7684go module\u5305</li> <li>\u8bed\u6cd5\uff1a<code>go get [-d] [-t] [-u] [build flags] [packages]</code><ul> <li><code>go get example.com/pkg</code>\uff1a\u4e0b\u8f7d\u6216\u66f4\u65b0\u6700\u65b0\u7248</li> <li><code>go get example.com/pkg@v1.2.3</code>\uff1a\u4e0b\u8f7d\u6216\u66f4\u65b0\u5230\u6307\u5b9atag\u7248</li> <li><code>go get golang.org/x/text@master</code>\uff1a\u4e0b\u8f7d\u6216\u66f4\u65b0master\u5206\u652f\u7248</li> <li><code>go get example.com/mod@none</code>\uff1a\u79fb\u9664module\uff0c\u5e76\u4e0b\u8f7d\u4f9d\u8d56\u5305</li> </ul> </li> </ul>"},{"location":"Documents/B-Programming%20Language/Go/Golang%E5%91%BD%E4%BB%A4/#6-go-install","title":"6 go install","text":"<ul> <li>\u529f\u80fd\uff1a\u7f16\u8bd1\u5e76\u6253\u5305\u5e94\u7528</li> </ul>"},{"location":"Documents/B-Programming%20Language/Go/Golang%E5%91%BD%E4%BB%A4/#7-go-env","title":"7 go env","text":"<ul> <li>\u529f\u80fd\uff1a\u67e5\u770b\u73af\u5883\u53d8\u91cf</li> </ul>"},{"location":"Documents/B-Programming%20Language/Go/Golang%E5%91%BD%E4%BB%A4/#8-go-mod","title":"8 go mod","text":""},{"location":"Documents/B-Programming%20Language/Go/Golang%E5%91%BD%E4%BB%A4/#9-go-doc","title":"9 go doc","text":"<ul> <li>\u529f\u80fd\uff1a\u67e5\u770bgo \u4ee3\u7801\u6587\u6863</li> </ul>"},{"location":"Documents/B-Programming%20Language/Go/Golang%E5%91%BD%E4%BB%A4/#10-go-fmt","title":"10 go fmt","text":"<ul> <li>\u529f\u80fd\uff1a\u683c\u5f0f\u5316go\u4ee3\u7801</li> </ul>"},{"location":"Documents/B-Programming%20Language/Go/Golang%E5%91%BD%E4%BB%A4/#11-go-test","title":"11 go test","text":"<ul> <li>\u529f\u80fd\uff1ago\u5355\u5143\u6d4b\u8bd5</li> </ul>"},{"location":"Documents/B-Programming%20Language/Go/Golang%E8%AE%BE%E7%BD%AE/","title":"Golang\u8bbe\u7f6e","text":"<ul> <li>\u5b89\u88c5</li> <li>\u73af\u5883\u8bbe\u7f6e</li> </ul>"},{"location":"Documents/B-Programming%20Language/Go/Golang%E8%AE%BE%E7%BD%AE/#1-go","title":"1 go\u5b89\u88c5","text":"<ul> <li>\u5b89\u88c5\u5305\u4e0b\u8f7d\u5730\u5740</li> </ul>"},{"location":"Documents/B-Programming%20Language/Go/Golang%E8%AE%BE%E7%BD%AE/#11","title":"1.1 \u6e90\u7801\u5b89\u88c5","text":"<p>\u4ece\u5b98\u7f51\u4e0b\u8f7d\u6e90\u7801\u5305\uff0c\u89e3\u538b\u540e\uff0c\u8fdb\u5165src\u76ee\u5f55\u4e0b\u7f16\u8bd1\u5b89\u88c5\u3002\u5177\u4f53\u7f16\u8bd1\u6b65\u9aa4\u67e5\u770b\u5b98\u65b9\u6e90\u7801\u5b89\u88c5\u6587\u6863 </p>"},{"location":"Documents/B-Programming%20Language/Go/Golang%E8%AE%BE%E7%BD%AE/#12","title":"1.2 \u4e8c\u8fdb\u5236\u53d1\u884c\u7248\u5b89\u88c5","text":"<p>\u4e8c\u8fdb\u5236\u53d1\u884c\u7248\u662f\u5df2\u7ecf\u7f16\u8bd1\u597d\u4e86\u7684\uff0c\u4ece\u5b98\u7f51\u4e0b\u8f7d\u5b89\u88c5\u5305\u540e\u76f4\u63a5\u89e3\u538b,\u518d\u8bbe\u7f6e\u5b89\u88c5\u76ee\u5f55GOROOT\u73af\u5883\u53d8\u91cf\u548c\u5bfc\u51fa\u5b89\u88c5\u76ee\u5f55\u4e0bbin\u76ee\u5f55\u5230\u7cfb\u7edf\u53d8\u91cfPATH\u4e2d\u3002  1. \u89e3\u538b\u6e90\u7801\u5230\u6307\u5b9a\u76ee\u5f55 2. \u5bfc\u51fa<code>GOROOT</code>\u73af\u5883\u53d8\u91cf\u548cgo\u5de5\u5177\u7ec4\u4ef6\u8def\u5f84</p> <pre><code># \u89e3\u538b\u5230/usr/local\u8def\u5f84\u4e0b\uff0c\u538b\u7f29\u5305\u89e3\u538b\u51fa\u6765\u662fgo\u76ee\u5f55\u6811\n$ tar -C /usr/local go1.18.2.src.tar.gz\n# \u7f16\u5199~/.bash_profile\u6587\u4ef6\nexport GOROOT=/usr/local/go\nexport PATH=$PATH:$GOROOT/bin\n# \u91cd\u8f7d~/.bash_profile\u6587\u4ef6\n$ source ~/.bash_profile\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/Golang%E8%AE%BE%E7%BD%AE/#2","title":"2 \u73af\u5883\u8bbe\u7f6e","text":"<ol> <li>\u8bbe\u7f6e\u4ee3\u7406\uff1a<code>go env -w GOPROXY=https://goproxy.cn</code></li> </ol>"},{"location":"Documents/B-Programming%20Language/Go/Golang%E8%AE%BE%E7%BD%AE/#3","title":"3 \u5e38\u7528\u73af\u5883\u53d8\u91cf","text":""},{"location":"Documents/B-Programming%20Language/Go/Golang%E8%AE%BE%E7%BD%AE/#31-goroot","title":"3.1 GOROOT","text":"<ul> <li>\u529f\u80fd\uff1aGo\u7684\u5b89\u88c5\u76ee\u5f55\u3002\uff08\u6bd4\u5982window\u5b89\u88c5\u65f6\u6307\u5b9a\u7684\u76ee\u5f55\uff0c\u6216\u89e3\u538b\u5305\u540e\u7684\u76ee\u5f55\uff09</li> </ul>"},{"location":"Documents/B-Programming%20Language/Go/Golang%E8%AE%BE%E7%BD%AE/#32-gopath","title":"3.2 GOPATH","text":"<ul> <li>\u529f\u80fd\uff1a\u8bbe\u7f6e\u5f00\u53d1\u65f6\u5de5\u4f5c\u7a7a\u95f4\u76ee\u5f55\uff0c\u5176\u4e0b\u6709\u4e09\u4e2a\u5b50\u76ee\u5f55:<code>src</code>,<code>pkg</code>,<code>bin</code>\u3002<code>src</code>\u76ee\u5f55\u653e\u7684\u662f\u6211\u4eec\u5f00\u53d1\u7684\u6e90\u4ee3\u7801\u6587\u4ef6\uff0c\u5176\u4e0b\u9762\u5bf9\u5e94\u7684\u76ee\u5f55\u79f0\u4e3a<code>\u5305</code>,<code>pkg</code>\u653e\u7684\u662f\u7f16\u8bd1\u540e\u7684\u5e93\u9759\u6001\u6587\u4ef6\uff0c<code>bin</code>\u653e\u7684\u662f\u6e90\u4ee3\u7801\u7f16\u8bd1\u540e\u53f0\u7684\u53ef\u6267\u884c\u6587\u4ef6\u3002</li> </ul>"},{"location":"Documents/B-Programming%20Language/Go/Golang%E8%AE%BE%E7%BD%AE/#33-gobin","title":"3.3 GOBIN","text":"<ul> <li>\u529f\u80fd\uff1a\u8bbe\u7f6e</li> </ul>"},{"location":"Documents/B-Programming%20Language/Go/Golang%E8%AE%BE%E7%BD%AE/#34-goosgoarch","title":"3.4 GOOS\u548cGOARCH","text":"<p>\u8bbe\u7f6e\u7cfb\u7edf\u548c\u67b6\u6784\uff0c\u7528\u4e8e\u7f16\u8bd1\u76ee\u6807\u7cfb\u7edf\u548c\u67b6\u6784\u7684\u53ef\u6267\u884c\u6587\u4ef6 - \u793a\u4f8b\uff1a\u7f16\u8bd1\u572864\u4f4dLinux\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u8fd0\u884c\u7684\u76ee\u6807\u7a0b</p> <pre><code>$ GOOS=linux GOARCH=amd64 go build main.go\n</code></pre> <ul> <li>\u793a\u4f8b\uff1a \u7f16\u8bd1arm\u67b6\u6784Android\u64cd\u4f5c\u4e0a\u7684\u76ee\u6807\u7a0b\u5e8f</li> </ul> <pre><code>$ GOOS=android GOARCH=arm GOARM=7 go build main.go\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Go/golang%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/","title":"golang\u6ce8\u610f\u4e8b\u9879","text":""},{"location":"Documents/B-Programming%20Language/Go/golang%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/#1","title":"1. \u7f16\u8bd1\u6ca1\u6709\u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6","text":"<p>\u5982\u679c\u7f16\u8bd1\u6ca1\u6709\u62a5\u9519\uff0c\u4f46\u5c31\u662f\u6ca1\u6709\u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u539f\u56e0\u65f6\uff0c\u4f60\u7f16\u8bd1\u7684\u5305\u6ca1\u6709main\u5305\u3002</p> <pre><code>\u8981\u60f3\u7f16\u8bd1\u51fa\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u5fc5\u8981\u8981\u6709 `package main`\u5305 \u548c `main`\u51fd\u6570\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Java/%E4%BF%AE%E6%94%B9jar%E5%8C%85%E4%B8%AD%E6%96%87%E4%BB%B6/","title":"\u4fee\u6539jar\u5305\u4e2d\u6587\u4ef6","text":"<p>\u6ce8\u610f\uff1a\u4ee5\u4e0b\u64cd\u4f5c\u5047\u8bbe jar \u5305\u540d hello.jar .java \u540d hello.java .class \u540d hello.class</p>"},{"location":"Documents/B-Programming%20Language/Java/%E4%BF%AE%E6%94%B9jar%E5%8C%85%E4%B8%AD%E6%96%87%E4%BB%B6/#1-jar","title":"1 \u6b65\u9aa4\u4e00\uff1a\u53cd\u7f16\u8bd1jar\u5305","text":"<ol> <li>\u4f7f\u7528\u53cd\u7f16\u8bd1\u5de5\u5177\u53cd\u7f16\u8bd1hello.jar\u5305\uff08\u63a8\u8350IDEA\u548cjd-gui\uff09</li> <li>\u4ece\u53cd\u7f16\u8bd1\u540e\u7684\u6587\u4ef6\u4e2d\u627e\u5230\u9700\u8981\u4fee\u6539\u7684hello.class\u6587\u4ef6\uff0c\u62f7\u8d1d\u5176\u5185\u5bb9\uff0c\u65b0\u5efahello.java\u6587\u4ef6\uff0c\u5c06\u62f7\u8d1d\u5185\u5bb9\u7c98\u8d34\u8fdb\u53bb</li> <li>\u4fee\u6539hello.java\u6587\u4ef6\u4e2d\u5185\u5bb9</li> </ol>"},{"location":"Documents/B-Programming%20Language/Java/%E4%BF%AE%E6%94%B9jar%E5%8C%85%E4%B8%AD%E6%96%87%E4%BB%B6/#2-javaclass","title":"2 \u6b65\u9aa4\u4e8c\uff1a.java\u6587\u4ef6\u751f\u6210.class\u6587\u4ef6","text":"<ol> <li>\u5c06hello.java\u6587\u4ef6\u548c\u539fhello.jar\u5305\u653e\u5728\u540c\u4e00\u76ee\u5f55\u4e0b\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4,\u5c06\u4f1a\u5728\u5f53\u524d\u76ee\u5f55\u751f\u6210hello.class\u6587\u4ef6(\u4e0ehello.java\u6587\u4ef6\u540c\u540d)</li> </ol> <pre><code>javac -cp hello.jar hello.java\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Java/%E4%BF%AE%E6%94%B9jar%E5%8C%85%E4%B8%AD%E6%96%87%E4%BB%B6/#3-jar","title":"3 \u6b65\u9aa4\u4e09\uff1a\u6253\u5305jar\u5305","text":"<ol> <li>\u590d\u5236jar\u5305\u5230\u53e6\u4e00\u76ee\u5f55\u4e0b\uff0c\u5c06hello.jar\u6539\u540dhello.zip\u5e76\u89e3\u538b</li> <li>\u5c06\u6b65\u9aa4\u4e8c\u751f\u6210\u7684hello.class\u6587\u4ef6\u66ff\u6362\u76ee\u5f55\u4e0b\u7684hello.class\u6587\u4ef6</li> <li>\u5728\u89e3\u538b\u76ee\u5f55\u4e0b\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5c06\u4f1a\u751f\u6210hello.jar\u6587\u4ef6</li> </ol> <pre><code># hello.jar \u6307\u5b9a\u751f\u6210jar\u5305\u540d META-INF hello \u662f\u89e3\u538bhello.zip\u4e2d\u5f97\u5230\u7684\u6587\u4ef6\u5939\u540d\u79f0\uff08\u6240\u6709\u6587\u4ef6\u5939\u540d\u90fd\u8981\u5217\u51fa\uff09\njar -cvfM0 hello.jar META-INF hello\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Java/%E8%8E%B7%E5%8F%96%E7%AD%BE%E5%90%8D/","title":"\u51fd\u6570\u7b7e\u540d","text":"<p>\u5047\u8bbe\u6587\u4ef6\u662fHello.java - \u8fdb\u5165<code>Hello.java</code>\u6587\u4ef6\u6240\u5728\u76ee\u5f55 - \u6267\u884c<code>javac Hello.java</code>\u547d\u4ee4\uff0c\u7f16\u8bd1<code>Hello.java</code>,\u751f\u6210<code>Hello.class</code>\u6587\u4ef6 - \u6267\u884c<code>javap -s Hello.class</code> - \u7ed3\u679c\u4f1a\u6253\u5370\u5728\u63a7\u5236\u53f0</p> <pre><code>javap -s Hello.class\n\nCompiled from \"Hello.java\"\npublic class Hello {\npublic Hello();\nSignature: ()V\n\n  public static void main(java.lang.String[]);\nSignature: ([Ljava/lang/String;)V\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Python/Python/","title":"Python","text":"<ul> <li>\u6807\u51c6\u5e93\u6587\u6863</li> </ul>"},{"location":"Documents/B-Programming%20Language/Python/Python/#1","title":"1 \u811a\u672c\u73af\u5883","text":""},{"location":"Documents/B-Programming%20Language/Python/Python/#11","title":"1.1 \u6587\u4ef6\u7f16\u7801","text":"<p>Python \u6e90\u7801\u6587\u4ef6\u7684\u7f16\u7801\u662f UTF-8\uff0c\u5982\u679c\u9700\u8981\u6539\u53d8\uff0c\u53ef\u4ee5\u5728\u6587\u4ef6\u5934\u6309\u4ee5\u4e0b\u683c\u5f0f\u8bbe\u7f6e\u7f16\u7801\u65b9\u5f0f\uff0c\u5176\u4e2dencoding\u53ef\u4ee5\u662futf-8\u7b49\u3002</p> <pre><code># -*- coding: encoding -*-\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code># -*- coding: utf-8 -*-\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Python/Python/#12","title":"1.2 \u811a\u672c\u9ed8\u8ba4\u542f\u52a8\u7a0b\u5e8f","text":"<ul> <li>\u6307\u5b9apython3\u6267\u884c\u811a\u672c\uff0c\u00a0\u8fd9\u662fUNIX \"shebang\"\u7528\u6cd5\uff0c\u8fd9\u6837\u5f53\u4e0d\u6307\u5b9apython\u6765\u6267\u884c\u53ef\u6267\u884c\u6587\u4ef6\u65f6\uff0c\u9ed8\u8ba4\u4f1a\u4ee5python3\u6765\u6267\u884c</li> </ul> <pre><code>#!/usr/bin/env python3\n# -*- coding: cp1252 -*-\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Python/Python/#2","title":"2 \u8f93\u5165\u8f93\u51fa","text":""},{"location":"Documents/B-Programming%20Language/Python/Python/#1-input","title":"1 input","text":"<p>\u4ece\u547d\u4ee4\u884c\u8bfb\u53d6\u7528\u6237\u8f93\u5165</p> <pre><code>In [3]: a=input(\"\u8bf7\u8f93\u5165\u6570\u5b57:\")\n\u8bf7\u8f93\u5165\u6570\u5b57:3\n\nIn [4]: a\nOut[4]: '3'\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Python/Python/#2-print","title":"2 print","text":"<p>\u6253\u5370\u5185\u5bb9\u5230\u6807\u51c6\u8f93\u51fa\u4e0a</p> <pre><code>In [18]: print(\"hello\\nworld\")\nhello\nworld\n\nIn [19]: print(r\"hello\\nworld\")\nhello\\nworld\n\nIn [20]: str=\"boo\"\n\nIn [21]: print(f\"hello\\n{str}\")\nhello\nboo\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Python/Python/#3-open","title":"3 open","text":"<p>\u7528open\u6253\u5f00\u4e00\u4e2a\u6587\u4ef6\uff0c\u8fd4\u56de\u53e5\u67c4\u540e\u8fdb\u884c\u8bfb\u5199</p> <pre><code>#!/usr/bin/python3  \n\n# \u6253\u5f00\u4e00\u4e2a\u6587\u4ef6  \nf\u00a0=\u00a0open(\"foo1.txt\",\u00a0\"w\")  \n\nvalue\u00a0=\u00a0('hello world',\u00a09)  \ns\u00a0=\u00a0str(value)  \nf.write(s)  \n\n# \u5173\u95ed\u6253\u5f00\u7684\u6587\u4ef6  \nf.close()\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Python/Python/#3","title":"3 \u6570\u636e\u7ed3\u6784","text":""},{"location":"Documents/B-Programming%20Language/Python/Python/#1_1","title":"1 \u6570\u5b57","text":""},{"location":"Documents/B-Programming%20Language/Python/Python/#2_1","title":"2 \u5b57\u7b26\u4e32","text":""},{"location":"Documents/B-Programming%20Language/Python/Python/#21","title":"2.1 \u5b57\u7b26\u683c\u5f0f\u5316","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>str.format(*args,\u00a0**kwargs)</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>In [16]: \"hello {}\".format('bob')\nOut[16]: 'hello bob'\n\nIn [17]: \"hello {1} say {0}\".format('by','bob')\nOut[17]: 'hello bob say by'\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Python/Python/#4","title":"4 \u51fd\u6570","text":""},{"location":"Documents/B-Programming%20Language/Python/Python/#1_2","title":"1 \u53c2\u6570","text":"<ul> <li>\u51fd\u6570\u5b9a\u4e49<code>def func(*args):</code>\u548c<code>def func(**args):</code>\u4f5c\u7528\uff1a<ul> <li><code>*args</code>\u8868\u793a\u628a\u4f20\u8fdb\u6765\u7684\u4f4d\u7f6e\u53c2\u6570\u90fd\u653e\u5728\u5143\u7ec4\u00a0args \u3002\u8c03\u7528 func(a, b, c) \u65f6\uff0c args= (a, b, c) </li> <li><code>**args</code>\u8868\u793a\u628a\u4f20\u8fdb\u6765\u7684\u4f4d\u7f6e\u53c2\u6570\u90fd\u653e\u5728\u5b57\u5178\u00a0args\u3002\u8c03\u7528 func(a=0, b=1, c=2 \u65f6\uff0c args= {\u2018a\u2019:0, \u2018b\u2019:1, \u2018c\u2019:2} </li> </ul> </li> <li>\u51fd\u6570\u8c03\u7528<code>fun(*arg)</code>\u548c<code>fun(**arg)</code>\u4f5c\u7528<ul> <li><code>*args</code>\u8868\u793a\u628a\u4f20\u8fdb\u6765\u7684\u5e8f\u5217args\u89e3\u5305\uff0c\u5982args=[0, 1, 2]\uff0c\u5219\u76f8\u5e94\u89e3\u5305\u4e3a\uff1aa, b, c=[0, 1, 2]\uff0c \u5373func(0, 1, 2)</li> <li><code>**args</code>\u8868\u793a\u628a\u4f20\u8fdb\u6765\u7684\u5b57\u5178args\u89e3\u5305\uff0c\u5982args= {'a':0, 'b':1, 'c':2}\uff0c\u5219\u76f8\u5e94\u89e3\u5305\u4e3a\uff1aa,b,c = {'a':0, 'b':1, 'c':2}\uff0c \u5373func(a=0, b=1, c=2)</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>In [28]: def fun1(*arg):\n    ...:     print(arg)\n    ...:\n\nIn [29]: fun1(1,2,3)\n(1, 2, 3)\n\nIn [31]: def fun2(**arg):\n    ...:     print(arg)\n    ...:\n\nIn [32]: fun2(a=1,b=2,c=3)\n{'a': 1, 'b': 2, 'c': 3}\n\nIn [35]: args=[1,2,3]\n\nIn [36]: def fun3(a,b,c):\n    ...:     print(\"a={} b={} c={}\".format(a,b,c))\n    ...:\n\nIn [37]: fun3(*args)\na=1 b=2 c=3\n\nIn [38]: args={'a':1,'b':2,'c':3}\n\nIn [39]: fun3(**args)\na=1 b=2 c=3\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Python/Python/#5","title":"5 \u5faa\u73af","text":""},{"location":"Documents/B-Programming%20Language/Python/Python/#6","title":"6 \u6761\u4ef6","text":""},{"location":"Documents/B-Programming%20Language/Python/Python/#1-pass","title":"1 pass","text":"<p><code>pass</code>\u00a0\u8bed\u53e5\u4e0d\u6267\u884c\u4efb\u4f55\u64cd\u4f5c\u3002\u8bed\u6cd5\u4e0a\u9700\u8981\u4e00\u4e2a\u8bed\u53e5\uff0c\u4f46\u7a0b\u5e8f\u4e0d\u5b9e\u9645\u6267\u884c\u4efb\u4f55\u52a8\u4f5c\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u8be5\u8bed\u53e5\u3002\u4f8b\u5982\uff1a</p> <pre><code>&gt;&gt;&gt; while True:\n...     pass  # Busy-wait for keyboard interrupt (Ctrl+C)\n...\n</code></pre> <p>\u4e0b\u9762\u8fd9\u6bb5\u4ee3\u7801\u521b\u5efa\u4e86\u4e00\u4e2a\u6700\u5c0f\u7684\u7c7b\uff1a</p> <pre><code>&gt;&gt;&gt; class MyEmptyClass:\n...     pass\n...\n</code></pre> <p><code>pass</code>\u00a0\u8fd8\u53ef\u4ee5\u7528\u4f5c\u51fd\u6570\u6216\u6761\u4ef6\u5b50\u53e5\u7684\u5360\u4f4d\u7b26\uff0c\u8ba9\u5f00\u53d1\u8005\u805a\u7126\u66f4\u62bd\u8c61\u7684\u5c42\u6b21\u3002\u6b64\u65f6\uff0c\u7a0b\u5e8f\u76f4\u63a5\u5ffd\u7565\u00a0<code>pass</code>\uff1a</p> <pre><code>&gt;&gt;&gt; def initlog(*args):\n...     pass   # Remember to implement this!\n...\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Python/Python/#2-match","title":"2 match","text":"<p>\u4f5c\u7528\u540cc/c++\u4e2d\u7684switch/case - \u793a\u4f8b</p> <pre><code>In [40]: def fun(status):\n    ...:     match status:\n    ...:         case 400:\n    ...:             return \"Bad Error\"\n    ...:         case _:\n    ...:             return \"default\"\n    ...:\n\nIn [41]: fun(400)\nOut[41]: 'Bad Error'\n\nIn [42]: fun(401)\nOut[42]: 'default'\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Python/Python%E5%AE%89%E8%A3%85/","title":"Python\u5b89\u88c5","text":""},{"location":"Documents/B-Programming%20Language/Python/Python%E5%AE%89%E8%A3%85/#1-linux","title":"1 Linux \u4e0b\u5b89\u88c5","text":"<ol> <li>\u5b89\u88c5python3\uff1a<code>yum install -y python3</code></li> <li>\u5b89\u88c5pip\uff08\u5f53\u5b89\u88c5python3\u540e\u6ca1\u6709pip\u547d\u4ee4\u65f6\u5b89\u88c5\uff09\uff1a<code>yum install -y pip</code></li> <li>\u5b89\u88c5ipython\uff1a<code>yum install -y ipython</code></li> </ol>"},{"location":"Documents/B-Programming%20Language/Python/Python%E5%AE%89%E8%A3%85/#2","title":"2 \u5b89\u88c5\u7b2c\u4e09\u65b9\u5305","text":"<ol> <li><code>pip3 install \u6a21\u5757\u540d</code>\uff1a\u9ed8\u8ba4\u5b89\u88c5</li> <li><code>pip install \u6a21\u5757\u540d -t \u5b89\u88c5\u8def\u5f84</code>\uff1a\u6307\u5b9a\u5b89\u88c5\u4f4d\u7f6e</li> </ol>"},{"location":"Documents/B-Programming%20Language/Python/Python%E5%AE%89%E8%A3%85/#3","title":"3 \u4f7f\u7528\u81ea\u5b9a\u4e49\u8def\u5f84\u4e0b\u7684\u5305","text":"<ul> <li>\u53c2\u8003\uff1ahttp://c.biancheng.net/view/4645.html</li> </ul>"},{"location":"Documents/B-Programming%20Language/Python/Python%E5%AE%89%E8%A3%85/#31-syspath","title":"3.1 \u65b9\u6cd5\u4e00\u4fee\u6539 sys.path \u53d8\u91cf","text":"<ul> <li>\u5411sys.path\u53d8\u91cf\u6dfb\u52a0\u5305\u67e5\u8be2\u8def\u5f84</li> </ul> <pre><code>import sys\nsys.path.append('./lib')\nimport fire\n\ndef hello(name=\"World\"):\n  return \"Hello %s!\" % name\n\nif __name__ == '__main__':\n  fire.Fire(hello)\n</code></pre> <ul> <li>fire\u5305\u5728lib\u76ee\u5f55\u4e0b</li> </ul> <pre><code>[shw@localhost python]$ tree -L 2\n.\n\u251c\u2500\u2500 lib\n\u2502   \u251c\u2500\u2500 fire\n\u2502   \u251c\u2500\u2500 fire-0.4.0-py3.9.egg-info\n\u2502   \u251c\u2500\u2500 __pycache__\n\u2502   \u251c\u2500\u2500 six-1.16.0.dist-info\n\u2502   \u251c\u2500\u2500 six.py\n\u2502   \u251c\u2500\u2500 termcolor\n\u2502   \u2514\u2500\u2500 termcolor-2.0.1.dist-info\n\u2514\u2500\u2500 test.py\n\n7 directories, 2 files\n[shw@localhost python]$ cat test.py </code></pre> <ul> <li>\u6267\u884c</li> </ul> <pre><code>[shw@localhost python]$ python test.py \nHello World!\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Python/Python%E5%AE%89%E8%A3%85/#32-pythonpath","title":"3.2 \u8bbe\u7f6e PYTHONPATH \u53d8\u91cf","text":"<pre><code>[shw@localhost python]$ python test.py \nTraceback (most recent call last):\n  File \"/home/shw/python/test.py\", line 3, in &lt;module&gt;\n    import fire\nModuleNotFoundError: No module named 'fire'\n[shw@localhost python]$ export PYTHONPATH=/home/shw/python/lib\n[shw@localhost python]$ python test.py \nHello World!\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Python/Python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/","title":"Python \u865a\u62df\u73af\u5883","text":"<p>\u4ee5\u4e0b\u662f\u5728 window \u73af\u5883\u4e0b\uff0c\u4f7f\u7528 cmd\uff08\u4f7f\u7528 powershell \u7b49\u6ca1\u6548\u679c\uff0c\u4e0d\u77e5\u9053\u539f\u56e0\uff1f\uff09</p>"},{"location":"Documents/B-Programming%20Language/Python/Python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/#1","title":"1 \u521b\u5efa\u865a\u62df\u73af\u5883","text":"<ul> <li><code>python -m venv env-name</code> \uff1a\u521b\u5efa env-name \u7684\u865a\u62df\u73af\u5883\uff0c\u4f1a\u751f\u6210 env-name \u76ee\u5f55<ul> <li><code>env-name</code> \uff1a\u53ef\u4ee5\u662f\u7edd\u5bf9\u8def\u5f84\u6216\u76f8\u5bf9\u8def\u5f84</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>D:\\&gt;python -m venv D:\\Environment\\Python\\test\n\nD:\\&gt;dir D:\\Environment\\Python\\test\n2023/02/04  11:34    &lt;DIR&gt;          .\n2023/02/04  11:34    &lt;DIR&gt;          ..\n2023/02/04  11:34    &lt;DIR&gt;          Include\n2023/02/04  11:34    &lt;DIR&gt;          Lib\n2023/02/04  11:34               242 pyvenv.cfg\n2023/02/04  11:34    &lt;DIR&gt;          Scripts\n               1 \u4e2a\u6587\u4ef6            242 \u5b57\u8282\n               5 \u4e2a\u76ee\u5f55 456,281,726,976 \u53ef\u7528\u5b57\u8282\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Python/Python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/#2","title":"2 \u865a\u62df\u73af\u5883\u5b89\u88c5\u5305","text":"<ol> <li>\u4f7f\u7528\u865a\u62df\u73af\u5883\uff1a <code>source \u865a\u62df\u73af\u5883\u76ee\u5f55/bin/activate</code>\uff0c\u5982 <code>D:\\Environment\\Python\\test\\bin\\activate</code></li> <li>\u5b89\u88c5\u5305\uff1a<code>pip install mkdocs-material</code>\uff0c\u548c\u6b63\u5e38\u5b89\u88c5\u5305\u4e00\u6837\uff0c\u53ea\u662f\u5b89\u88c5\u7684\u5305\u4f1a\u5728\u8fd9\u4e2a\u865a\u62df\u73af\u5883 <code>Lib\\site-packages</code> \u76ee\u5f55\u4e0b</li> </ol>"},{"location":"Documents/B-Programming%20Language/Python/Python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/#4","title":"4 \u4f7f\u7528\u865a\u62df\u73af\u5883","text":"<ol> <li>\u5148\u8fdb\u5165\u9700\u8981\u4f7f\u7528\u865a\u62df\u73af\u5883\u7684\u9879\u76ee\u6240\u5728\u76ee\u5f55</li> <li>\u6267\u884c <code>source \u865a\u62df\u73af\u5883\u76ee\u5f55/bin/activate</code>\uff0c\u5982 <code>D:\\Environment\\Python\\test\\bin\\activate</code></li> <li>\u518d\u4f7f\u7528\u865a\u62df\u73af\u5883\u4e0b\u5b89\u88c5\u7684\u5305\u6240\u542b\u7684\u53ef\u6267\u884c\u7a0b\u5e8f</li> <li>\u9000\u51fa\u865a\u62df\u73af\u5883\uff1a\u6267\u884c\u865a\u62df\u73af\u5883\u76ee\u5f55\u4e0b\u7684 <code>Scripts\\deactivate.bat</code></li> <li>\u793a\u4f8b</li> </ol> <pre><code>E:\\&gt;cd E:\\shw\\technical-notes\\mkdoc\n\nE:\\shw\\technical-notes\\mkdoc&gt;D:\\Environment\\Python\\test\\Scripts\\activate\n\n(mkdocs) E:\\shw\\technical-notes\\mkdoc&gt;mkdocs serve\nINFO     -  Building documentation...\nINFO     -  Cleaning site directory\nINFO     -  Documentation built in 0.17 seconds\nINFO     -  [11:23:31] Watching paths for changes: 'docs', 'mkdocs.yml'\nINFO     -  [11:23:31] Serving on http://127.0.0.1:8000/\nINFO     -  [11:23:39] Browser connected: http://127.0.0.1:8000/\nINFO     -  Shutting down...\n\n(mkdocs) D:\\&gt;D:\\Environment\\Python\\mkdocs\\Scripts\\deactivate.bat\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Python/Python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/#5","title":"5 \u663e\u793a\u865a\u62df\u73af\u5883\u4e0b\u5df2\u7ecf\u5b89\u88c5\u7684\u5305","text":"<pre><code>(test) D:\\&gt;python -m pip list\nPackage    Version\n---------- -------\npip        22.3\nsetuptools 65.5.0\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/","title":"Rust-\u57fa\u7840","text":""},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#1","title":"1 \u53d8\u91cf\u4e0e\u5e38\u91cf","text":"<ol> <li>Rust \u53d8\u91cf\u58f0\u660e\u9700\u8981\u4f7f\u7528 <code>let</code> \u5173\u952e\u5b57\u4fee\u9970</li> <li>\u53d8\u91cf\u7684\u7c7b\u578b\u53ef\u4ee5\u6307\u5b9a\uff0c\u4e5f\u53ef\u4ee5\u4e0d\u6307\u5b9a\uff0c\u7c7b\u578b\u5728\u53d8\u91cf\u540d\u4e4b\u540e\uff0c\u5982: <code>let x: i32 = 2;</code> \u6216\u8005 <code>let x = 2;</code></li> <li>Rust \u4e2d\u53d8\u91cf\u9ed8\u8ba4\u662f\u4e0d\u53ef\u53d8\u7684\uff0c\u5982\u679c\u9700\u8981\u53ef\u53d8\uff0c\u9700\u8981\u4f7f\u7528 <code>mut</code> \u5173\u952e\u5b57\u4fee\u9970\uff0c\u5982\uff1a<code>let mut x = 5;</code></li> <li>\u53d8\u91cf\u8d4b\u503c\u65f6\uff0c\u53ef\u4ee5\u6307\u5b9a\u7c7b\u578b\uff0c\u6bd4\u5982\u6307\u5b9a\u6574\u5f62\u662f <code>i32 \u8fd8\u662f u64</code>\uff0c\u5982 <code>let x = 2i32</code></li> <li>\u53d8\u91cf\u8d4b\u503c\u65f6\uff0c\u4e0d\u6307\u5b9a\u7c7b\u578b\uff0c\u9ed8\u8ba4\u6574\u5f62\u662f <code>i32</code>\uff0c\u6d6e\u70b9\u578b\u662f <code>f64</code></li> <li>Rust \u4e2d\u672a\u4f7f\u7528\u7684\u53d8\u91cf\u7f16\u8bd1\u65f6\u4f1a\u6709\u8b66\u544a\uff0c\u5982\u679c\u9700\u8981\u53d6\u6d88\u8b66\u544a\uff0c\u53ef\u4ee5\u5c06\u53d8\u91cf\u540d\u4ee5 <code>_</code> \u5f00\u5934\uff0c\u5982 <code>let _x = 2;</code>, \u83b7\u53d6\u4f7f\u7528\u5c5e\u6027\u4fee\u9970\uff0c\u5982 <code>#![allow(dead_code)]</code></li> </ol>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#2","title":"2 \u7c7b\u578b","text":""},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#21","title":"2.1 \u57fa\u672c\u7c7b\u578b","text":"<ul> <li>unit \u7c7b\u578b\uff1a<code>()</code>\uff0c\u8fd9\u4e2a\u5c31\u76f8\u5bf9\u4e8e\u4ec0\u4e48\u6570\u636e\u90fd\u6ca1\u6709\u7684\u7c7b\u578b\u3002\u51fd\u6570\u6ca1\u6709\u8fd4\u56de\u503c\u65f6\uff0c\u5176\u5b9e\u5c31\u662f\u8fd4\u56de\u4e86 <code>()</code> \u5355\u5143\u7c7b\u578b\u3002</li> <li>char \u7c7b\u578b\uff1a<code>char</code></li> <li>\u5b57\u7b26\u4e32\u7c7b\u578b\uff1a<code>&amp;str</code>\uff0c\u5b57\u7b26\u4e32\u5b57\u9762\u503c\u662f\u4e0d\u53ef\u53d8\u7684\uff0c\u56e0\u4e3a\u88ab\u786c\u7f16\u7801\u5230\u7a0b\u5e8f\u4ee3\u7801\u4e2d</li> <li>bool \u7c7b\u578b\uff1a<code>bool</code></li> <li>\u6d6e\u70b9\u578b\uff1a<code>f32\u3001f64</code></li> <li>\u6574\u5f62\uff1a</li> </ul> \u957f\u5ea6 \u6709\u7b26\u53f7\u7c7b\u578b \u65e0\u7b26\u53f7\u7c7b\u578b 8 \u4f4d <code>i8</code> <code>u8</code> 16 \u4f4d <code>i16</code> <code>u16</code> 32 \u4f4d <code>i32</code> <code>u32</code> 64 \u4f4d <code>i64</code> <code>u64</code> 128 \u4f4d <code>i128</code> <code>u128</code> \u89c6\u67b6\u6784\u800c\u5b9a <code>isize</code> <code>usize</code> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>fn main() {\nprintln!(\"hello world\");\nlet c: char = 'h';\nlet b: bool = true;\nlet s: &amp;str = \"hello\";\nlet str: String = String::from(\"hello\");//\u52a8\u6001\u5b57\u7b26\u4e32\u7c7b\u578bString\nprintln!(\"c={} b={} s={} str={}\", c, b, s, str);\nlet i: i32 = 2;\nlet f: f64 = 2.0;\nprintln!(\"i={} f={}\", i, f);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#22","title":"2.2 \u5b57\u7b26\u4e32\uff08\u5207\u7247\uff09","text":"<p>rust \u4e2d\u5b57\u7b26\u4e32\u6709 2 \u79cd\uff0c\u4e00\u79cd\u662f\u5b57\u9762\u91cf\u5b57\u7b26\u4e32\uff0c\u7c7b\u578b\u662f <code>&amp;str</code>\uff0c\u53e6\u4e00\u79cd\u662f <code>String</code> \u7c7b\u578b\u3002 - \u793a\u4f8b</p> <pre><code>#![allow(unused)]\nfn main() {\nlet s: &amp;str = \"Hello, world!\";\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#221-string","title":"2.2.1 String","text":"<p><code>String</code>\u00a0\u7c7b\u578b\u7684\u5e95\u5c42\u662f\u00a0<code>[u8]</code>\u00a0\u6570\u7ec4</p>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#23","title":"2.3 \u6570\u7ec4","text":""},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#231","title":"2.3.1 \u56fa\u5b9a\u6570\u7ec4","text":"<pre><code>title: rust\u6570\u7ec4\u4e0eC++\u7684\u4e0d\u540c?\n1. rust\u6570\u7ec4\u5b9a\u4e49\u8bed\u6cd5\u5982\uff1a`let a [i32:5] = [1, 2, 3, 4, 5];`,\u662f\u4f7f\u7528`[]`\u6765\u8d4b\u503c,\u5176\u4e2d`[i32:5]`\u662f`[\u7c7b\u578b:\u5927\u5c0f]`\u53ef\u4ee5\u7701\u7565\uff0c\u800cC++\u7528`{}`\u3002\n2. rust\u6570\u7ec4\u4e0d\u9700\u8981\u5728\u6570\u7ec4\u540d\u540e\u52a0`[]`\uff0c\u5982C++\u4e2d\u662f`char a[5];`\n3. \u6570\u7ec4\u8bbf\u95ee2\u8005\u662f\u76f8\u540c\u7684\uff0c\u4f7f\u7528\u4e0b\u6807\u8bbf\u95ee\u3002\n4. rust\u4e2d\u51fd\u6570\u6216\u65b9\u6cd5*\u53c2\u6570\u4e00\u822c\u4e0d\u4f20\u6570\u7ec4*\uff08\u56e0\u4e3a\u4e0d\u540c\u5927\u5c0f\u7684\u6570\u7ec4\u8868\u793a\u7684\u662f\u4e0d\u540c\u7c7b\u578b\uff09\uff0c\u800c\u662f\u4f20\u6570\u7ec4\u5207\u7247`&amp;[T]`\uff0c\u800cc++\u6570\u7ec4\u4e5f\u76f8\u5f53\u4e8e\u4e00\u4e2a\u6307\u9488\u3002\n</code></pre> <p>\u6570\u7ec4\u7279\u70b9\uff1a - \u5b58\u50a8\u5728\u6808\u4e0a - \u957f\u5ea6\u56fa\u5b9a - \u5143\u7d20\u5fc5\u987b\u6709\u76f8\u540c\u7684\u7c7b\u578b - \u4f9d\u6b21\u7ebf\u6027\u6392\u5217 \u8bed\u6cd5\u793a\u4f8b\uff1a</p> <pre><code>fn main() {\nlet a1: [i32;5] = [1, 2, 3, 4, 5];\nlet a2 = [1, 2, 3, 4, 5];\n// 3\u91cd\u590d5\u6b21\nlet a3 = [3; 5];\nlet elm = a1[0];\nprintln!(\"{:?}\",a1);\nprintln!(\"{:?}\",a2);\nprintln!(\"{:?}\",a3);\nprintln!(\"{}\",elm);\n}\n</code></pre> <ul> <li>\u53ef\u80fd\u8f93\u51fa</li> </ul> <pre><code>[1, 2, 3, 4, 5]  [1, 2, 3, 4, 5]  [3, 3, 3, 3, 3]  1\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#24-vec","title":"2.4 \u52a8\u6001\u6570\u7ec4 Vec","text":"<ul> <li>\u529f\u80fd\uff1a\u5927\u5c0f\u53ef\u53d8\u7684\u6570\u7ec4\uff0c\u5b58\u50a8\u5728\u5806\u4e0a\u3002</li> <li>\u52a8\u6001\u6570\u7ec4 Vector</li> </ul>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#25","title":"2.5 \u5207\u7247","text":"<pre><code>rust\u4e2d\u8bf4\u7684\u5207\u7247\u5176\u5b9e\u662f**\u5207\u7247\u5f15\u7528**\uff0c\u662f\u5bf9*\u6570\u7ec4\u7684\u5f15\u7528*\u6216\u8005*\u5207\u7247\u7684\u5f15\u7528*\uff0c\u7b7e\u540d\u662f`&amp;[Type]`\uff0c\u800c\u6570\u7ec4\u7b7e\u540d\u662f`[Type; Length]`\u3002\n</code></pre> <pre><code>\u5b57\u9762\u91cf\u5b57\u7b26\u4e32\u5176\u5b9e\u662f\u4e00\u79cd\u5207\u7247\u7c7b\u578b\uff0c\u53eb\u505a*\u5b57\u7b26\u4e32\u5207\u7247*\uff0c\u7b7e\u540d\u662f`&amp;str`\uff0c\u8bf7\u6ce8\u610f\u5b57\u7b26\u4e32\u5207\u7247\u4e0e\u5176\u4ed6\u7c7b\u578b\u5207\u7247\u7684\u4e0d\u540c\u3002\n</code></pre> <p>\u5207\u7247\uff08Slice\uff09\u8ddf\u6570\u7ec4\u76f8\u4f3c\uff0c\u4f46\u662f\u5207\u7247\u7684\u957f\u5ea6\u65e0\u6cd5\u5728\u7f16\u8bd1\u671f\u5f97\u77e5\uff0c\u56e0\u6b64\u4f60\u65e0\u6cd5\u76f4\u63a5\u4f7f\u7528\u5207\u7247\u7c7b\u578b\uff1b\u56e0\u6b64\u6211\u4eec\u4f7f\u7528\u5207\u7247\u5f15\u7528\u6765\u4ee3\u66ff\u5207\u7247\uff0c\u5b9e\u9645\u4e0a\u5207\u7247\u4e5f\u662f\u53ea\u5207\u7247\u5f15\u7528\u3002 - \u8bed\u6cd5\uff1a\u5207\u7247\u4f7f\u7528\u5e8f\u5217\uff08Range\uff09\u8bed\u6cd5\u6765\u786e\u5b9a\u5207\u7247\u7684\u8303\u56f4     - <code>let s = &amp;val[start..end]</code>     - <code>let s = &amp;val[start..=end]</code> - \u793a\u4f8b</p> <pre><code>#![allow(unused)]\nfn main() {\nlet s = String::from(\"hello\");\nlet len = s.len();\n// \u5b57\u7b26\u4e32\u662f\u5207\u7247\uff0c\u7c7b\u578b\u662f&amp;str\nlet slice1 : &amp;str = &amp;s[0..len];\n// \u5bf9\u5207\u7247\u518d\u6b21\u5207\u7247 \nlet slice2 = &amp;slice1[..2];\nprintln!(\"{:?}\",s);\nprintln!(\"{:?}\",slice1);\nprintln!(\"{:?}\",slice2);\nlet arr = [1, 2, 3];\n// i32\u5207\u7247\nlet s1: &amp;[i32] = &amp;arr[0..=2];\nprintln!(\"{:?}\",s1);\n}\n</code></pre> <ul> <li>\u53ef\u80fd\u7684\u8f93\u51fa</li> </ul> <pre><code>\"hello\"  \"hello\"  \"he\"  [1, 2, 3]\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#26","title":"2.6 \u5143\u7ec4","text":"<p>rust \u4e2d\u5143\u7ec4\u7684\u7b7e\u540d\u662f <code>(Type1,Type2,...,Typen)</code> \u5143\u7ec4\u4e2d\u6bcf\u4e00\u4e2a\u5143\u7d20\u53ef\u4ee5\u662f\u4e0d\u540c\u7c7b\u578b\u3002</p> <pre><code>fn main() {\nlet tup: (i32, f64, u8) = (500, 6.4, 1);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#27","title":"2.7 \u7ed3\u6784\u4f53","text":"<pre><code>1. rust \u4e2d\u7ed3\u6784\u4f53\u548c C \u7ed3\u6784\u4f53\u6709\u70b9\u7c7b\u4f3c\uff0c\u6709\u6210\u5458\u53d8\u91cf\uff0c\u4e0d\u5b58\u5728C++\u4e2d\u7684\u6784\u9020\u3001\u6790\u6784\u51fd\u6570\u3002\n2. rust \u7ed3\u6784\u4f53\u4e5f\u53ef\u4ee5\u6709\u65b9\u6cd5\uff08\u4f7f\u7528`impl`\u5173\u952e\u5b57\u58f0\u660e\uff09\uff0c\u4f46\u662f\u548cC++\u7c7b\u4e0d\u540c\u7684\u662f\uff0crust*\u65b9\u6cd5\u548c\u6570\u636e\u662f\u5206\u79bb*\u7684\uff0c\u4e0d\u662f\u5728\u540c\u4e00\u5904\u5b9a\u4e49\u3002\n3. \u548cC++\u4e00\u6837\uff0c\u5141\u8bb8\u65b9\u6cd5\u548c\u5b57\u6bb5\uff08\u6210\u5458\u53d8\u91cf\uff09\u540c\u540d\u3002\n</code></pre> <p>rust \u4e2d\u7ed3\u6784\u4f53\u7279\u70b9\uff1a 1. \u548c C \u4e00\u6837\u4f7f\u7528 <code>struct</code> \u5173\u952e\u5b57\u6807\u8bc6 2. \u53ef\u4ee5\u6709\u591a\u4e2a\u6210\u5458\u53d8\u91cf</p> <pre><code>struct User {\nactive: bool,\nusername: String,\nemail: String,\nsign_in_count: u64,\n}\n</code></pre> <p>rust \u7ed3\u6784\u4f53\u65b9\u6cd5\u4e0e\u5176\u5b83\u8bed\u8a00\u7684\u5bf9\u6bd4\uff1a </p>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#271","title":"2.7.1 \u521b\u5efa\u7ed3\u6784\u4f53","text":"<pre><code>1. rust\u4e2d\u521d\u59cb\u5316\u548cC++\u4e00\u6837\uff0c\u90fd\u53ef\u4ee5\u4f7f\u7528\u82b1\u62ec\u53f7`{}`\u521d\u59cb\u5316\n2. C++20\u5f00\u59cb\u652f\u6301\u6307\u5b9a\u521d\u59cb\u5316\uff0c\u4f46\u9700\u8981\u6309\u6210\u5458\u53d8\u91cf\u58f0\u660e\u987a\u5e8f\u8fdb\u884c\uff0c\u800crust\u4e2d\u4e0d\u9700\u8981\u3002\n</code></pre> <ol> <li>\u521d\u59cb\u5316\u5b9e\u4f8b\u65f6\uff0c\u6bcf\u4e2a\u5b57\u6bb5\u90fd\u9700\u8981\u8fdb\u884c\u521d\u59cb\u5316</li> <li>\u521d\u59cb\u5316\u65f6\u7684\u5b57\u6bb5\u987a\u5e8f\u4e0d\u9700\u8981\u548c\u7ed3\u6784\u4f53\u5b9a\u4e49\u65f6\u7684\u987a\u5e8f\u4e00\u81f4</li> </ol> <pre><code>let user1 = User {\nemail: String::from(\"someone@example.com\"),\nusername: String::from(\"someusername123\"),\nactive: true,\nsign_in_count: 1,\n};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#272","title":"2.7.2 \u4f7f\u7528\u7ed3\u6784\u4f53","text":"<pre><code>rust\u548cC++\u4e2d\u4e00\u81f4\uff0c\u4f7f\u7528`.`\u6765\u8bbf\u95ee\u6210\u5458\u53d8\u91cf\n</code></pre> <pre><code>#![allow(unused)]\nfn main() {\n// \u9ed8\u8ba4\u53d8\u91cf\u662f\u4e0d\u53ef\u53d8\u7684\uff0c\u56e0\u6b64\u60f3\u8981\u4fee\u6539\u53d8\u91cf\uff0c\u5fc5\u987b\u58f0\u660emut\nlet mut user1 = User {\nemail: String::from(\"someone@example.com\"),\nusername: String::from(\"someusername123\"),\nactive: true,\nsign_in_count: 1,\n};\nuser1.email = String::from(\"anotheremail@example.com\");\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#273","title":"2.7.3 \u66f4\u65b0\u7ed3\u6784\u4f53","text":"<pre><code>\u7ed3\u6784\u4f53\u53d8\u91cf\u8d4b\u503c\uff0c\u662f**\u6240\u6709\u6743\u7684\u8f6c\u8ba9**\uff0c\u56e0\u6b64\u9664\u4e86\u57fa\u672c\u7c7b\u578b\u5916\u7684\u5176\u4ed6\u7c7b\u578b\uff0c\u5728\u8d4b\u503c\u7ed3\u675f\u540e\u662f\u4e0d\u80fd\u518d\u6b64\u4f7f\u7528\u7684\u3002\u4f46\u6ca1\u6709\u88ab**\u8f6c\u79fb\u7684\u5b57\u6bb5\u4f9d\u7136\u53ef\u4ee5\u4f7f\u7528**\uff0c\u6bd4\u5982\u4e0b\u9762\u793a\u4f8b\u4e2d`user2.email`\u53ef\u4ee5\u4f7f\u7528\uff0c\u4f46`user2.username`\u4e0d\u80fd\u4f7f\u7528\u3002\n</code></pre> <p>rust \u4e2d\u6709\u9700\u8981\u5f88\u65b9\u4fbf\u7684\u8bbe\u8ba1\u6765\u66f4\u65b0\u7ed3\u6784\u4f53\u6210\u5458\u53d8\u91cf\u7684\u503c\u3002 \u5f53\u4ece\u4e00\u4e2a\u7ed3\u6784\u4f53\u7ed9\u53e6\u4e00\u4e2a\u7ed3\u6784\u4f53\u8d4b\u503c\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>..\u53d8\u91cf\u540d</code> \u7684\u65b9\u5f0f\uff0c\u4f46\u5fc5\u987b\u5728\u7ed3\u6784\u4f53\u7684\u5c3e\u90e8\u4f7f\u7528</p> <pre><code>fn main() {\nlet user1 = User {\nemail: String::from(\"someone@example.com\"),\nusername: String::from(\"someusername123\"),\nactive: true,\nsign_in_count: 1,\n};\nlet user2 = User {\nactive: user1.active,\nusername: user1.username,\nemail: String::from(\"another@example.com\"),\nsign_in_count: user1.sign_in_count,\n};\nlet user3 = User{\nemail: String::from(\"hello@example.com\"),\n..user2  //\u5fc5\u987b\u5728\u7ed3\u6784\u4f53\u5c3e\u90e8\n};\nprintln!(\"{:?}\",user3);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#274-tuple-struct","title":"2.7.4 \u5143\u7ec4\u7ed3\u6784\u4f53 (Tuple Struct)","text":"<p>\u7ed3\u6784\u4f53\u5fc5\u987b\u8981\u6709\u540d\u79f0\uff0c\u4f46\u662f\u7ed3\u6784\u4f53\u7684\u5b57\u6bb5\u53ef\u4ee5\u6ca1\u6709\u540d\u79f0\uff0c\u8fd9\u79cd\u7ed3\u6784\u4f53\u957f\u5f97\u5f88\u50cf\u5143\u7ec4\uff0c\u56e0\u6b64\u88ab\u79f0\u4e3a\u5143\u7ec4\u7ed3\u6784\u4f53\uff0c\u4f8b\u5982\uff1a</p> <pre><code>    struct Color(i32, i32, i32);\nstruct Point(i32, i32, i32);\n\nlet black = Color(0, 0, 0);\nlet origin = Point(0, 0, 0);\n</code></pre> <p>\u5143\u7ec4\u7ed3\u6784\u4f53\u5728\u4f60\u5e0c\u671b\u6709\u4e00\u4e2a\u6574\u4f53\u540d\u79f0\uff0c\u4f46\u662f\u53c8\u4e0d\u5173\u5fc3\u91cc\u9762\u5b57\u6bb5\u7684\u540d\u79f0\u65f6\u5c06\u975e\u5e38\u6709\u7528\u3002\u4f8b\u5982\u4e0a\u9762\u7684 <code>Point</code> \u5143\u7ec4\u7ed3\u6784\u4f53\uff0c\u4f17\u6240\u5468\u77e5 3D \u70b9\u662f <code>(x, y, z)</code> \u5f62\u5f0f\u7684\u5750\u6807\u70b9\uff0c\u56e0\u6b64\u6211\u4eec\u65e0\u9700\u518d\u4e3a\u5185\u90e8\u7684\u5b57\u6bb5\u9010\u4e00\u547d\u540d\u4e3a\uff1a<code>x</code>, <code>y</code>, <code>z</code>\u3002</p>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#275-unit-like-struct","title":"2.7.5 \u5355\u5143\u7ed3\u6784\u4f53 (Unit-like Struct)","text":"<p>\u5355\u5143\u7ed3\u6784\u4f53\u548c\u5355\u5143\u7c7b\u578b\u5f88\u50cf\uff0c\u6ca1\u6709\u4efb\u4f55\u5b57\u6bb5\u548c\u5c5e\u6027\uff0c\u5982\u679c\u4f60\u5b9a\u4e49\u4e00\u4e2a\u7c7b\u578b\uff0c\u4f46\u662f\u4e0d\u5173\u5fc3\u8be5\u7c7b\u578b\u7684\u5185\u5bb9, \u53ea\u5173\u5fc3\u5b83\u7684\u884c\u4e3a\u65f6\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u5355\u5143\u7ed3\u6784\u4f53\uff1a</p> <pre><code>struct AlwaysEqual;\nlet subject = AlwaysEqual;\n\n// \u6211\u4eec\u4e0d\u5173\u5fc3 AlwaysEqual \u7684\u5b57\u6bb5\u6570\u636e\uff0c\u53ea\u5173\u5fc3\u5b83\u7684\u884c\u4e3a\uff0c\u56e0\u6b64\u5c06\u5b83\u58f0\u660e\u4e3a\u5355\u5143\u7ed3\u6784\u4f53\uff0c\u7136\u540e\u518d\u4e3a\u5b83\u5b9e\u73b0\u67d0\u4e2a\u7279\u5f81\nimpl SomeTrait for AlwaysEqual {\n\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#28","title":"2.8 \u679a\u4e3e","text":"<pre><code>rust\u4e2d\u679a\u4e3e\u5f88\u5f3a\u5927\uff0c\u4e0d\u4ec5\u7ed3\u5408\u4e86C++\u4e2d\u7684\u9650\u57df\u679a\u4e3e`enum class`\u98ce\u683c\uff0c\u8fd8\u7ed3\u5408\u4e86\u7ed3\u6784\u4f53\u98ce\u683c\uff0c**\u6bcf\u4e00\u4e2a\u679a\u4e3e\u503c\u90fd\u53ef\u4ee5\u6709\u4e0d\u540c\u7684\u7c7b\u578b**\uff0c\u751a\u81f3\u53ef\u4ee5**\u5b58\u50a8\u503c**\u3002\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#281","title":"2.8.1 \u65e0\u7c7b\u578b\u7684\u679a\u4e3e\u503c","text":"<pre><code>#[derive(Debug)]\nenum PokerSuit {\nClubs,\nSpades,\nDiamonds,\nHearts,\n}\nfn main() {\nlet heart = PokerSuit::Hearts;\nlet diamond = PokerSuit::Diamonds;\nprintln!(\"{:?}\", heart);\nprintln!(\"{:?}\", diamond);\n}\n</code></pre> <ul> <li>\u53ef\u80fd\u7684\u8f93\u51fa</li> </ul> <pre><code>Hearts  \nDiamonds\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#282","title":"2.8.2 \u6709\u7c7b\u578b\u7684\u679a\u4e3e\u503c","text":"<pre><code>\u679a\u4e3e\u503c\u7684\u7c7b\u578b\u53ef\u4ee5\u662f\u4efb\u610f\u7c7b\u578b\uff0c\u6307\u5b9a\u7c7b\u578b\u65f6\u7684\u65b9\u5f0f\u5374\u5e76\u4e0d\u4e00\u6837\uff0c\u5982\uff1a\n- \u5143\u7ec4\uff1a`(T1,T2,..,Tn)`\n- \u533f\u540d\u7ed3\u6784\u4f53\uff1a{v1:t1,..,vn:tn}\n- \u5176\u5b83\u7c7b\u578b\uff1a`(T)`\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>enum Message {\nQuit,\nMove { x: i32, y: i32 },\nWrite(String),\nChangeColor(i32, i32, i32),\n}\n\nfn main() {\nlet m1 = Message::Quit;\nlet m2 = Message::Move{x:1,y:1};\nlet m3 = Message::ChangeColor(255,255,0);\n}\n</code></pre> <p>\u8be5\u679a\u4e3e\u7c7b\u578b\u4ee3\u8868\u4e00\u6761\u6d88\u606f\uff0c\u5b83\u5305\u542b\u56db\u4e2a\u4e0d\u540c\u7684\u6210\u5458\uff1a - <code>Quit</code> \u6ca1\u6709\u4efb\u4f55\u5173\u8054\u6570\u636e - <code>Move</code> \u5305\u542b\u4e00\u4e2a\u533f\u540d\u7ed3\u6784\u4f53 - <code>Write</code> \u5305\u542b\u4e00\u4e2a <code>String</code> \u5b57\u7b26\u4e32 - <code>ChangeColor</code> \u5305\u542b\u4e09\u4e2a <code>i32</code></p> <p>\u5176\u5b83\u793a\u4f8b\uff1a</p> <pre><code>#![allow(unused)]\n#[derive(Debug)]\nenum PokerCard {\nClubs(u8),\nSpades(u8),\nDiamonds(char),\nHearts(char),\n}\n\nfn main() {\nlet c1 = PokerCard::Spades(5);\nlet c2 = PokerCard::Diamonds('A');\n\nprintln!(\"{:?}\",c1);\nprintln!(\"{:?}\",c2);\n}\n</code></pre> <ul> <li>\u53ef\u80fd\u7684\u8f93\u51fa</li> </ul> <pre><code>Spades(5)  \nDiamonds('A')\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#3","title":"3 \u6240\u6709\u6743\u548c\u5f15\u7528","text":"<p>Rust\u901a\u8fc7\u6240\u6709\u6743\u6765\u7ba1\u7406\u5185\u5b58\u3002\u548c C++\u4e2d\u624b\u52a8\u7ba1\u7406\u5185\u5b58\u7684\u5206\u914d\u548c\u91ca\u653e\u4e0d\u540c\u3002</p>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#31","title":"3.1 \u6240\u6709\u6743\u539f\u5219","text":"<ol> <li>Rust \u4e2d\u6bcf\u4e00\u4e2a\u503c\u90fd\u88ab\u4e00\u4e2a\u53d8\u91cf\u6240\u62e5\u6709\uff0c\u8be5\u53d8\u91cf\u88ab\u79f0\u4e3a\u503c\u7684\u6240\u6709\u8005</li> <li>\u4e00\u4e2a\u503c\u540c\u65f6\u53ea\u80fd\u88ab\u4e00\u4e2a\u53d8\u91cf\u6240\u62e5\u6709\uff0c\u6216\u8005\u8bf4\u4e00\u4e2a\u503c\u53ea\u80fd\u62e5\u6709\u4e00\u4e2a\u6240\u6709\u8005</li> <li>\u5f53\u6240\u6709\u8005(\u53d8\u91cf)\u79bb\u5f00\u4f5c\u7528\u57df\u8303\u56f4\u65f6\uff0c\u8fd9\u4e2a\u503c\u5c06\u88ab\u4e22\u5f03(drop)</li> </ol>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#32","title":"3.2 \u6240\u6709\u6743\u8f6c\u79fb","text":"<ol> <li>\u57fa\u672c\u7c7b\u578b\u95f4\u8d4b\u503c\uff0c\u9ed8\u8ba4\u662f\u901a\u8fc7 copy \u6765\u8d4b\u503c\u7684\uff0c\u4e0d\u4f1a\u6709\u6240\u6709\u6743\u7684\u8f6c\u79fb\u3002\u56e0\u6b64\u8d4b\u503c\u540e\u4f9d\u7136\u53ef\u4ee5\u8bbf\u95ee\u3002</li> <li>\u5176\u4ed6\u7c7b\u578b\u7684\u53d8\u91cf\u8d4b\u503c\uff0c\u9ed8\u8ba4\u662f\u5c06\u6240\u6709\u6743\u4ece a \u8f6c\u79fb\u5230 b\uff0c\u56e0\u6b64\uff0c\u8d4b\u503c\u4ecb\u7ecd\u540e\uff0ca \u5c31\u4e0d\u80fd\u518d\u8bbf\u95ee\u4e86\u3002\u5982\u679c\u901a\u8fc7\u6df1\u62f7\u8d1d\u7684\u65b9\u5f0f\u6765\u8d4b\u503c\uff0c\u4e5f\u4e0d\u4f1a\u6709\u6240\u6709\u6743\u7684\u8f6c\u79fb\u3002</li> <li>\u4e0a\u8ff0\u89c4\u5219\u9002\u7528\u4e8e\u7ed9\u51fd\u6570\u4f20\u53c2\u3002</li> </ol>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#33","title":"3.3 \u5f15\u7528","text":"<pre><code>\u5f15\u7528\u673a\u5236\u53ef\u4ee5\u8ba9\u6240\u6709\u6743\u8f6c\u79fb\u5b9e\u73b0\u7684\u53d8\u91cf\u4f20\u9012\u53d8\u5f97\u7b80\u6d01\n</code></pre> <p>rust \u5f15\u7528\u7c7b\u4f3c\u4e8e C++\u4e2d\u53d8\u91cf\u7684\u6307\u9488\u548c\u5f15\u7528\u7684\u7ed3\u5408\u4f53\uff08\u867d\u7136\u53eb\u5f15\u7528\uff0c\u4f46\u9700\u8981\u89e3\u5f15\u7528\uff0c\u5c31\u5f62\u540c C++\u4e2d\u89e3\u6307\u9488\u4e00\u6837\uff09\u3002 - \u7528 <code>&amp;\u53d8\u91cf</code> \u5f15\u7528\uff0c\u7528 <code>*\u53d8\u91cf</code> \u89e3\u5f15\u7528</p> <pre><code>fn main() {\nlet x = 5;\nlet y = &amp;x;\nassert_eq!(5, x);\nassert_eq!(5, *y);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#331","title":"3.3.1 \u53ef\u53d8\u5f15\u7528","text":"<p>rust \u9ed8\u8ba4\u7684\u5f15\u7528\u65f6\u4e0d\u53ef\u53d8\u7684\uff0c\u5373\u4f60\u65e0\u6cd5\u4fee\u6539\u5f15\u7528\u7684\u6570\u636e\uff0c\u76f8\u5f53\u4e8e C++\u4e2d <code>const int * pi=2;</code>\uff0c\u4e0d\u80fd\u4fee\u6539 <code>pi</code> \u7684\u503c\u3002</p>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#332","title":"3.3.2 \u4e0d\u53ef\u53d8\u5f15\u7528","text":"<p>\u8981\u60f3\u4f7f\u7528\u4e0d\u53ef\u53d8\u5f15\u7528\u53ea\u9700\u52a0\u4e0a <code>mut</code> \u5173\u952e\u5b57\u5373\u53ef\u3002 \u53ef\u53d8\u5f15\u7528\u7684\u9650\u5236\u5982\u4e0b\uff1a 1. \u53ea\u80fd\u6709\u4e00\u4e2a\u53ef\u53d8\u5f15\u7528 2. \u53ef\u53d8\u5f15\u7528\u4e0d\u80fd\u548c\u4e0d\u53ef\u53d8\u5f15\u7528\u540c\u65f6\u5b58\u5728\u3002 - \u793a\u4f8b</p> <pre><code>fn main() {\nlet mut s = String::from(\"hello\");\nchange(&amp;mut s);\n}\n\nfn change(some_string: &amp;mut String) {\nsome_string.push_str(\", world\");\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#333-dangling-references","title":"3.3.3 \u60ac\u5782\u5f15\u7528 (Dangling References)","text":"<p>rust \u60ac\u5782\u5f15\u7528\u548c C++\u60ac\u5782\u6307\u9488\u4e00\u6837\uff0c\u4e0d\u80fd\u8fd4\u56de\u4e00\u4e2a\u5c40\u90e8\u53d8\u91cf\u7684\u5f15\u7528\u3002 - \u793a\u4f8b</p> <pre><code>fn main() {\nlet reference_to_nothing = dangle();\n}\nfn dangle() -&gt; &amp;String {\nlet s = String::from(\"hello\");\n&amp;s //\u51fa\u4e86\u51fd\u6570\uff0cs\u88ab\u91ca\u653e\uff0c\u53d8\u60ac\u5782\u5f15\u7528\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#4","title":"4 \u6d41\u7a0b\u63a7\u5236","text":"<pre><code>`if\u3001for\u3001while\u3001loop`\u4e0eC++\u8bed\u6cd5\u4e0a\u6700\u5927\u533a\u522b\u662f\uff1a\u6761\u4ef6\u8868\u8fbe\u5f0f\u4e0d\u9700\u8981`()`\u5305\u88f9\u3002\nRust \u4e5f\u6709`break\u3001continue`\u5173\u952e\u5b57\uff0c\u529f\u80fd\u548cC++\u5b8c\u5168\u4e00\u81f4\uff0c\u4f46break\u53ef\u4ee5**\u5e26\u4e00\u4e2a\u8fd4\u56de\u503c**\uff0c\u6709\u4e9b\u7c7b\u4f3c\u00a0`return`\u3002\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#41-if","title":"4.1 if","text":"<pre><code>Rust if \u548cC++\u4e2d\u5f88\u50cf\uff0c\u90fd\u6709`if\u3001else\u3001else if`\u8fd93\u79cd\u5224\u65ad\u6761\u4ef6\u3002\u4f46\u67092\u70b9\u4e0d\u540c\uff1a\n1. Rust\u6761\u4ef6\u8868\u8fbe\u5f0f\u4e0d\u9700\u8981\u7528`()`\u5305\u88f9\u3002\n2. Rust if\u8bed\u53e5\u662f\u8868\u8fbe\u5f0f\uff0c\u53ef\u4ee5\u8fd4\u56de\u7ed3\u679c\uff0c\u4f46\u5404\u5206\u652f\u8fd4\u56de\u503c\u5fc5\u987b\u76f8\u540c\uff1b\u800cC++\u4e2d\u4e0d\u80fd\u3002\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>#![allow(unused)]\nfn main() {\nlet number = 6;\n\nlet s = if number % 4 == 0 {\n\"number is divisible by 4\"\n} else if number % 3 == 0 {\n\"number is divisible by 3\"\n} else if number % 2 == 0 {\n\"number is divisible by 2\"\n} else {\n\"number is not divisible by 4, 3, or 2\"\n};\nprintln!(\"{}\",s);\n}\n</code></pre> <ul> <li>\u53ef\u80fd\u7684\u8f93\u51fa</li> </ul> <pre><code>number is divisible by 3\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#42-for","title":"4.2 for","text":"<p>Rust \u4e2d for \u8bed\u6cd5\u6709 3 \u79cd\u683c\u5f0f\uff0c\u5982\u4e0b\uff1a 1. \u5faa\u73af\u96c6\u5408\uff0c\u53ea\u5173\u6ce8\u503c\uff0c\u5982 <code>for \u5143\u7d20 in \u96c6\u5408 {//\u8868\u8fbe\u5f0f\u6216\u8bed\u53e5}</code> 2. \u5faa\u73af\u96c6\u5408\uff0c\u540c\u65f6\u5173\u6ce8\u7d22\u5f15\u3001\u503c\uff0c\u5982\uff1a<code>for (index, value) in \u96c6\u5408 {//\u8868\u8fbe\u5f0f\u6216\u8bed\u53e5}</code> 3. \u5faa\u73af\u96c6\u5408\uff0c\u5ffd\u7565\u4efb\u4f55\u503c\u3001\u7d22\u5f15\uff0c\u5982\uff1a<code>for _ in \u96c6\u5408 {//\u8868\u8fbe\u5f0f\u6216\u8bed\u53e5}</code></p> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>fn main() {\nfor i in 1..=5 {\nprintln!(\"{}\", i);\n}\n}\n</code></pre> <ul> <li>\u53ef\u80fd\u7684\u8f93\u51fa</li> </ul> <pre><code>1  2  3  4  5\n</code></pre> <p>for \u5faa\u73af\u4e2d\u4e5f\u80fd\u4f7f\u7528\u53ef\u53d8 <code>mut</code>\u3001\u5f15\u7528 <code>&amp;</code> \u8bed\u6cd5\uff0c\u603b\u7ed3\u5982\u4e0b\uff1a</p> \u4f7f\u7528\u65b9\u6cd5 \u7b49\u4ef7\u4f7f\u7528\u65b9\u5f0f \u6240\u6709\u6743 <code>for item in collection</code> <code>for item in IntoIterator::into_iter(collection)</code> \u8f6c\u79fb\u6240\u6709\u6743 <code>for item in &amp;collection</code> <code>for item in collection.iter()</code> \u4e0d\u53ef\u53d8\u501f\u7528 <code>for item in &amp;mut collection</code> <code>for item in collection.iter_mut()</code> \u53ef\u53d8\u501f\u7528"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#43-while","title":"4.3 while","text":"<pre><code>Rust\u4e2dwhile\u548cC++\u4e2dwhile\u4e00\u6837\u3002\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>fn main() {\nlet mut n = 0;\nwhile n &lt;= 5  {\nprintln!(\"{}!\", n);\nn = n + 1;\n}\nprintln!(\"\u6211\u51fa\u6765\u4e86\uff01\");\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#44-loop","title":"4.4 loop","text":"<p>loop \u6709\u70b9\u7c7b\u4f3c\u4e0e <code>while 1</code>\uff0c\u5faa\u73af\u4e00\u76f4\u8fdb\u884c\uff0c\u9664\u975e\u5faa\u73af\u4f53\u4e3b\u52a8 <code>break</code> \u6216 <code>return</code>\u3002loop \u8fd8\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u56e0\u6b64\u53ef\u4ee5\u8fd4\u56de\u4e00\u4e2a\u503c\u3002 - \u793a\u4f8b</p> <pre><code>fn main() {\nlet mut counter = 0;\nlet result = loop {\ncounter += 1;\nif counter == 10 {\nbreak counter * 2;\n}\n};\nprintln!(\"The result is {}\", result);\n}\n</code></pre> <ul> <li>\u53ef\u80fd\u7684\u8f93\u51fa</li> </ul> <pre><code>The result is 20\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#45-breakcontinue","title":"4.5 break\u3001continue","text":"<pre><code>Rust\u4e2dbreak\u3001continue\u529f\u80fd\u548cC++\u53ea\u80fd\u4e00\u6837\uff0c\u4f46break\u529f\u80fd\u66f4\u5f3a\uff0c**\u53ef\u4ee5\u5355\u72ec\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u5e26\u4e00\u4e2a\u8fd4\u56de\u503c**\uff0c\u6709\u4e9b\u7c7b\u4f3c\u00a0`return`\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#5","title":"5 \u6a21\u5f0f\u5339\u914d","text":""},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#51-refutableirrefutable","title":"5.1 \u53ef\u53cd\u9a73\u7684\uff08refutable\uff09\u548c\u4e0d\u53ef\u53cd\u9a73\u7684\uff08irrefutable\uff09","text":"<p>\u6a21\u5f0f\u6709\u4e24\u79cd\u5f62\u5f0f\uff1a\u53ef\u53cd\u9a73\u7684\uff08refutable\uff09\u548c\u4e0d\u53ef\u53cd\u9a73\u7684\uff08irrefutable\uff09\u3002 - \u53ef\u53cd\u9a73\u7684\uff08refutable\uff09\uff1a\u80fd\u5339\u914d\u4efb\u4f55\u53ef\u80fd\u503c\u7684\u6a21\u5f0f\u662f\u4e0d\u53ef\u53cd\u9a73\u7684\u3002\u5982 <code>let x = 5;</code>\u00a0\u4e2d\u7684\u00a0x\uff0c\u56e0\u4e3a\u00a0x\u00a0\u53ef\u4ee5\u5339\u914d\u4efb\u4f55\u503c\u6240\u4ee5\u4e0d\u53ef\u80fd\u5339\u914d\u5931\u8d25\u3002 - \u4e0d\u53ef\u53cd\u9a73\u7684\uff08irrefutable\uff09\uff1a\u5bf9\u4e8e\u53ef\u80fd\u7684\u503c\uff0c\u5b58\u5728\u5339\u914d\u5931\u8d25\u7684\u60c5\u51b5\u7684\u6a21\u5f0f\u662f\u53ef\u53cd\u9a73\u7684\u3002\u5982\uff0c\u8868\u8fbe\u5f0f <code>if let Some (x) = a_value\u00a0\u4e2d\u7684\u00a0Some (x)</code>\uff0c\u5982\u679c\u53d8\u91cf\u00a0a_value\u00a0\u4e2d\u7684\u503c\u662f\u00a0None\u00a0\u800c\u4e0d\u662f\u00a0Some\uff0c\u90a3\u4e48\u4e0e\u6a21\u5f0f\u00a0Some (x)\u00a0\u5c31\u4f1a\u5339\u914d\u5931\u8d25\u3002</p>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#52-match","title":"5.2 match","text":"<pre><code>1. rust\u4e2d\u7684match\u529f\u80fd\u4e0a\u548cC++\u4e2d\u7684`switch case`\u4e00\u6837\uff0c\u4f46\u8bed\u6cd5\u683c\u5f0f\u5b8c\u5168\u4e0d\u4e00\u6837\u3002\n2. rust\u4e2dmatch\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u56e0\u6b64match\u5206\u652f\u9700\u8981\u8fd4\u56de\u4e00\u4e2a\u503c\u3002\n</code></pre> <p>match \u8bed\u6cd5\u683c\u5f0f\u5982\u4e0b\uff1a</p> <pre><code>match target {\n\u6a21\u5f0f1 =&gt; \u8868\u8fbe\u5f0f1,\n\u6a21\u5f0f2 =&gt; {\n\u8bed\u53e51;\n\u8bed\u53e52;\n\u8868\u8fbe\u5f0f2\n},\n_ =&gt; \u8868\u8fbe\u5f0f3\n}\n</code></pre> <p>\u6709\u4ee5\u4e0b\u51e0\u70b9\u503c\u5f97\u6ce8\u610f\uff1a 1. <code>match</code>\u00a0\u7684\u5339\u914d\u5fc5\u987b\u8981\u7a77\u4e3e\u51fa\u6240\u6709\u53ef\u80fd\uff0c\u56e0\u6b64\u8fd9\u91cc\u7528\u00a0<code>_</code>\u00a0\u6765\u4ee3\u8868\u672a\u5217\u51fa\u7684\u6240\u6709\u53ef\u80fd\u6027 2. <code>match</code>\u00a0\u7684\u6bcf\u4e00\u4e2a\u5206\u652f\u90fd\u5fc5\u987b\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u4e14\u6240\u6709\u5206\u652f\u7684\u8868\u8fbe\u5f0f\u6700\u7ec8\u8fd4\u56de\u503c\u7684\u7c7b\u578b\u5fc5\u987b\u76f8\u540c 3. <code>X | Y</code>\uff0c\u7c7b\u4f3c\u903b\u8f91\u8fd0\u7b97\u7b26\u00a0<code>\u6216</code>\uff0c\u4ee3\u8868\u8be5\u5206\u652f\u53ef\u4ee5\u5339\u914d\u00a0<code>X</code>\u00a0\u4e5f\u53ef\u4ee5\u5339\u914d\u00a0<code>Y</code>\uff0c\u53ea\u8981\u6ee1\u8db3\u4e00\u4e2a\u5373\u53ef\u3002 4. \u5f53 <code>match</code> \u7684\u662f\u6570\u503c\u7c7b\u578b\u65f6\u8fd8\u53ef\u4ee5\u4f7f\u7528 <code>1..=5</code> \u8868\u793a\u5339\u914d\u6570\u503c <code>1~5</code>\u3002 - \u793a\u4f8b\uff1a\u8bf7\u6ce8\u610f <code>println!</code> \u5b8f\u5c55\u5f00\u540e\u5176\u5b9e\u4e5f\u662f\u4e2a\u8868\u8fbe\u5f0f\u3002</p> <pre><code>enum Direction {\nEast,\nWest,\nNorth,\nSouth,\n}\n\nfn main() {\nlet dire = Direction::South;\nmatch dire {\nDirection::East =&gt; println!(\"East\"),\nDirection::North | Direction::South =&gt; {\nprintln!(\"South or North\");\n},\n_ =&gt; println!(\"West\"),\n};\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#521","title":"5.2.1 \u6a21\u5f0f\u7ed1\u5b9a","text":"<p>\u5728\u5339\u914d\u6709\u7c7b\u578b\u7684\u679a\u4e3e\u65f6\uff0c\u53ef\u4ee5\u4ece\u679a\u4e3e\u503c\u4e2d\u53d6\u51fa\u503c\u3002 - \u793a\u4f8b</p> <pre><code>enum Action {\nSay(String),\nMoveTo(i32, i32),\nChangeColorRGB(u16, u16, u16),\n}\n\nfn main() {\nlet actions = [\nAction::Say(\"Hello Rust\".to_string()),\nAction::MoveTo(1,2),\nAction::ChangeColorRGB(255,255,0),\n];\nfor action in actions {\nmatch action {\nAction::Say(s) =&gt; {\nprintln!(\"{}\", s);\n},\nAction::MoveTo(x, y) =&gt; {\nprintln!(\"point from (0, 0) move to ({}, {})\", x, y);\n},\nAction::ChangeColorRGB(r, g, _) =&gt; {\nprintln!(\"change color into '(r:{}, g:{}, b:0)', 'b' has been ignored\",\nr, g,\n);\n}\n}\n}\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#53-if-let","title":"5.3 if let","text":"<p>\u6709\u65f6\u4f1a\u9047\u5230\u53ea\u6709\u4e00\u4e2a\u6a21\u5f0f\u7684\u503c\u9700\u8981\u88ab\u5904\u7406\uff0c\u5176\u5b83\u503c\u76f4\u63a5\u5ffd\u7565\u7684\u573a\u666f\uff0c\u5982\u679c\u7528 <code>match</code> \u6765\u5904\u7406\u5c31\u8981\u5199\u6210\u4e0b\u9762\u8fd9\u6837\uff1a</p> <pre><code>    let v = Some(3u8);\nmatch v {\nSome(3) =&gt; println!(\"three\"),\n_ =&gt; (),\n}\n</code></pre> <p>\u4f7f\u7528 <code>if let</code> \u5982\u4e0b\uff1a</p> <pre><code>#![allow(unused)]\nfn main() {\nlet v = Some(3u8);\n// if \u4e5f\u53ef\u4ee5\uff08\u6ce8\u610f\u540e\u9762\u7684==\u53f7\uff09\nif Some(3) == v {\nprintln!(\"three 1\");\n}\n// if let \u4e5f\u53ef\u4ee5\uff0c\uff08\u6ce8\u610f\u540e\u9762\u7684=\u53f7\uff09\nif let Some(3) = v {\nprintln!(\"three 2\");\n}\n}\n</code></pre> <p>\u4ece\u4e0a\u9762\u4ee3\u7801\u80fd\u770b\u51fa\uff0c\u6709\u4e9b\u573a\u666f\u4e0b\u4f7f\u7528 <code>if let \u548c if</code> \u4f5c\u7528\u76f8\u540c\uff0c\u4f46\u6709\u4e9b\u573a\u666f (\u6bd4\u5982\u53d8\u91cf\u8986\u76d6) \u5c31\u4e0d\u884c\uff0c\u5982\u4e0b</p> <pre><code>fn main() {\nlet age = Some(30);\nprintln!(\"\u5728\u5339\u914d\u524d\uff0cage\u662f{:?}\",age);\n// \u6b64\u4ee3\u7801\u4e0d\u901a\u8fc7\uff0c\u9700\u8981\u4f7f\u7528`if let Some(age) = age`\n/*if Some(age) == age {\n       println!(\"\u5339\u914d\u51fa\u6765\u7684age\u662f{}\",age);\n   }*/\n// if let \u53ef\u4ee5\nif let Some(age) = age {\nprintln!(\"\u5339\u914d\u51fa\u6765\u7684age\u662f{}\",age);\n}\nprintln!(\"\u5728\u5339\u914d\u540e\uff0cage\u662f{:?}\",age);\n}\n</code></pre> <ul> <li>\u53ef\u80fd\u7684\u8f93\u51fa</li> </ul> <pre><code>\u5728\u5339\u914d\u524d\uff0cage\u662fSome(30)  \n\u5339\u914d\u51fa\u6765\u7684age\u662f30  \n\u5728\u5339\u914d\u540e\uff0cage\u662fSome(30)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#54-while-let","title":"5.4 while let","text":"<p>\u548c <code>if let</code> \u76f8\u4f3c - \u793a\u4f8b</p> <pre><code>#![allow(unused)]\nfn main() {\n// Vec\u662f\u52a8\u6001\u6570\u7ec4\nlet mut stack = Vec::new();\n\n// \u5411\u6570\u7ec4\u5c3e\u90e8\u63d2\u5165\u5143\u7d20\nstack.push(1);\nstack.push(2);\nstack.push(3);\n\n// stack.pop\u4ece\u6570\u7ec4\u5c3e\u90e8\u5f39\u51fa\u5143\u7d20\nwhile let Some(top) = stack.pop() {\nprintln!(\"{}\", top);\n}\n}\n</code></pre> <ul> <li>\u53ef\u80fd\u7684\u8f93\u51fa</li> </ul> <pre><code>3  2  1\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#6","title":"6 \u89e3\u6784","text":"<pre><code>**\u89e3\u6784\u4e5f\u662f\u901a\u8fc7\u6a21\u5f0f\u5339\u914d\u89c4\u5219**\u6765\u6267\u884c\u7684\u3002\u89e3\u6784\u652f\u6301*\u7ed3\u6784\u4f53\u3001\u679a\u4e3e\u3001\u5143\u7ec4\u3001\u6570\u7ec4\u548c\u5f15\u7528*\u3002\n</code></pre> <ul> <li>\u89e3\u6784\u793a\u4f8b</li> </ul>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#7","title":"7 \u51fd\u6570","text":"<pre><code>rust\u4e2d\u51fd\u6570\u6307\u7684\u662f**\u4e0d\u548c\u7ed3\u6784\u4f53\u5173\u8054**\u7684\u51fd\u6570\u3002\u5bf9\u5e94\u7684\u662fC++\u4e2d\u975e\u7c7b\u6210\u5458\u51fd\u6570\u3002\n</code></pre> <pre><code>rust\u4e2d\u53ef\u4ee5\u7701\u7565return\u5173\u952e\u5b57\uff0c\u9ed8\u8ba4\u5c06\u6700\u540e\u4e00\u4e2a\u8868\u8fbe\u5f0f\u7684\u503c\u8fd4\u56de\u3002\n</code></pre> <ul> <li>\u51fd\u6570\u7ed3\u6784\uff1a<code>fn func_name(param: type,...)-&gt;return_type{statment}</code><ul> <li>\u65e0\u8fd4\u56de\u503c\u65f6\uff0c<code>-&gt;return_type</code> \u53ef\u4ee5\u4e0d\u5199\uff0c\u6216\u8005\u662f <code>-&gt;()</code></li> <li>\u548c C++\u4e00\u6837\uff0c\u4f7f\u7528 <code>return</code> \u5173\u952e\u5b57\u8fd4\u56de\uff0c\u4e5f\u53ef\u4ee5\u4e0d\u4f7f\u7528\u3002</li> <li>\u548c C++\u4e00\u6837\uff0c\u53c2\u6570\u5fc5\u987b\u6307\u5b9a\u7c7b\u578b</li> <li>\u53c2\u6570\u7c7b\u578b\u548c\u53d8\u91cf\u58f0\u660e\u4e00\u6837\uff0c\u4e5f\u662f\u653e\u5728\u540d\u79f0\u540e\u9762</li> <li>rust \u4e2d\u51fd\u6570\u53ef\u4ee5\u653e\u5728\u4efb\u610f\u4f4d\u7f6e\uff0c\u800c C++\u4e2d\u8981\u6c42\u4f7f\u7528\u7684\u51fd\u6570\u9700\u8981\u5728\u5f53\u524d\u4f4d\u7f6e\u4e4b\u524d\u51fa\u73b0\uff0c\u6216\u8005\u6709\u51fd\u6570\u58f0\u660e\u3002</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>fn sum(a: i64, b: i64) -&gt; i64 {\nreturn a + b;\n}\nfn main() {\nprintln!(\"sum={}\", sum(1, 2));\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#71","title":"7.1 \u53d1\u6563\u51fd\u6570","text":"<p>\u53d1\u6563\u51fd\u6570\u662f\u6c38\u8fdc\u4e0d\u4f1a\u8fd4\u56de\u7684\u51fd\u6570\uff0c\u8fd9\u4e2a\u548c\u6ca1\u6709\u8fd4\u56de\u503c\u662f\u4e0d\u4e00\u6837\u7684\u3002\u4f7f\u7528 <code>!</code> \u6807\u8bb0\u8fd4\u56de\u7c7b\u578b - \u793a\u4f8b</p> <pre><code>fn foo() -&gt; ! {\npanic!(\"This call never returns.\");\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#8","title":"8 \u65b9\u6cd5","text":"<pre><code>1. rust\u4e2d\u65b9\u6cd5\u5bf9\u5e94C++\u4e2d\u7684\u6210\u5458\u51fd\u6570,\u4e5f\u662f\u548c\u4e00\u4e2a\u5bf9\u8c61\u5173\u8054\u7684\u3002\n2. rust\u4e2d\u65b9\u6cd5\u662f\u901a\u8fc7\u5173\u952e\u5b57`impl`\u6765\u5b9a\u4e49\u7684\u3002\n3. Rust \u5141\u8bb8\u6211\u4eec\u4e3a\u4e00\u4e2a\u7ed3\u6784\u4f53\u5b9a\u4e49\u591a\u4e2a\u00a0`impl`\u00a0\u5757\n4. \u65b9\u6cd5\u4e2d\u7684`self`\u76f8\u5f53\u4e8eC++\u4e2d\u7684`this`\uff0c\u8868\u793a\u5f53\u524d\u5bf9\u8c61\u3002\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>#![allow(unused)]\nfn main() {\nstruct Circle {\nx: f64,\ny: f64,\nradius: f64,\n}\n\nimpl Circle {\n// new\u662fCircle\u7684\u5173\u8054\u51fd\u6570\uff0c\u56e0\u4e3a\u5b83\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e0d\u662fself\uff0c\u4e14new\u5e76\u4e0d\u662f\u5173\u952e\u5b57\n// \u8fd9\u79cd\u65b9\u6cd5\u5f80\u5f80\u7528\u4e8e\u521d\u59cb\u5316\u5f53\u524d\u7ed3\u6784\u4f53\u7684\u5b9e\u4f8b\nfn new(x: f64, y: f64, radius: f64) -&gt; Circle {\nCircle {\nx: x,\ny: y,\nradius: radius,\n}\n}\n\n// Circle\u7684\u65b9\u6cd5\uff0c&amp;self\u8868\u793a\u501f\u7528\u5f53\u524d\u7684Circle\u7ed3\u6784\u4f53\nfn area(&amp;self) -&gt; f64 {\nstd::f64::consts::PI * (self.radius * self.radius)\n}\n}\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#81-self","title":"8.1 self","text":"<pre><code>`&amp;self`\u00a0\u5176\u5b9e\u662f\u00a0`self: &amp;Self`\u00a0\u7684\u7b80\u5199\uff08\u6ce8\u610f\u5927\u5c0f\u5199\uff09\n</code></pre> <p><code>self</code> \u5173\u952e\u5b57\u6709 3 \u79cd\u5f62\u5f0f\uff1a 1. <code>self</code> \uff1a\u8868\u793a\u6240\u6709\u6743\u8f6c\u79fb\u5230\u8be5\u65b9\u6cd5\u4e2d\uff08\u8fd9\u79cd\u5f62\u5f0f\u7528\u7684\u8f83\u5c11\uff0c\u4f7f\u7528\u540e\u5bfc\u81f4\u8c03\u7528\u65b9\u4e0d\u518d\u62e5\u6709\u6240\u6709\u6743\u4e86\uff0c\u5bf9\u8c61\u5c06\u91ca\u653e\uff09 2. <code>&amp;self</code> \uff1a\u8868\u793a\u8be5\u65b9\u6cd5\u5bf9\u6b64\u5bf9\u8c61\u7684\u4e0d\u53ef\u53d8\u5f15\u7528 3. <code>&amp;mut self</code> \uff1a\u8868\u793a\u8be5\u65b9\u6cd5\u5bf9\u6b64\u5bf9\u8c61\u7684\u53ef\u53d8\u5f15\u7528</p>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#82","title":"8.2 \u65b9\u6cd5\u7684\u8c03\u7528","text":"<p>rust \u79cd\u65b9\u6cd5\u901a\u8fc7 <code>\u5bf9\u8c61.\u65b9\u6cd5</code> \u7684\u5f62\u5f0f\u6765\u4f7f\u7528\uff0c\u8fd9\u79cd\u5f62\u5f0f\u548c C++\u4e2d\u76f8\u540c\uff1b\u800c C++\u4e2d\u8fd8\u6709\u6307\u9488\u901a\u8fc7 <code>\u6307\u9488-&gt;\u65b9\u6cd5</code> \u6216\u8005 <code>(*\u6307\u9488).\u65b9\u6cd5</code> \u7684\u65b9\u5f0f\uff1brust \u7b80\u5316\u4e86\u8fd9\u79cd\u573a\u666f\uff0c\u4e0d\u7ba1\u65b9\u6cd5\u662f <code>self</code> \u3001<code>&amp;self</code>\u3001<code>&amp;mut self</code> \u90fd\u53ea\u9700\u8981 <code>\u5bf9\u8c61.\u65b9\u6cd5</code> \u5f62\u5f0f\u8bbf\u95ee\u3002 - \u793a\u4f8b</p> <pre><code>#![allow(unused)]\nfn main() {\n#[derive(Debug,Copy,Clone)]\nstruct Point {\nx: f64,\ny: f64,\n}\n\nimpl Point {\nfn distance(&amp;self, other: &amp;Point) -&gt; f64 {\nlet x_squared = f64::powi(other.x - self.x, 2);\nlet y_squared = f64::powi(other.y - self.y, 2);\n\nf64::sqrt(x_squared + y_squared)\n}\n}\nlet p1 = Point { x: 0.0, y: 0.0 };\nlet p2 = Point { x: 5.0, y: 6.5 };\n// \u4ee5\u4e0b2\u79cd\u8c03\u7528\u65f6\u7b49\u4ef7\u7684\np1.distance(&amp;p2);\n(&amp;p1).distance(&amp;p2);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#83","title":"8.3 \u5173\u8054\u51fd\u6570","text":"<pre><code>rust\u4e2d\u7ed3\u6784\u4f53\u5173\u8054\u51fd\u6570\u548cC++\u4e2dstatic\u7c7b\u6210\u5458\u51fd\u6570\u76f8\u540c\uff0c\u8bbf\u95ee\u65b9\u5f0f\u4e5f\u65f6`\u7ed3\u6784\u4f53::\u65b9\u6cd5`\u7684\u5f62\u5f0f\u3002\n</code></pre> <p>\u8fd9\u79cd\u5b9a\u4e49\u5728 <code>impl</code> \u4e2d\u4e14\u6ca1\u6709 <code>self</code> \u7684\u51fd\u6570\u88ab\u79f0\u4e4b\u4e3a\u5173\u8054\u51fd\u6570\uff1a \u56e0\u4e3a\u5b83\u6ca1\u6709 <code>self</code>\uff0c\u4e0d\u80fd\u7528 <code>f.read()</code> \u7684\u5f62\u5f0f\u8c03\u7528\uff0c\u56e0\u6b64\u5b83\u662f\u4e00\u4e2a\u51fd\u6570\u800c\u4e0d\u662f\u65b9\u6cd5\uff0c\u5b83\u53c8\u5728 <code>impl</code> \u4e2d\uff0c\u4e0e\u7ed3\u6784\u4f53\u7d27\u5bc6\u5173\u8054\uff0c\u56e0\u6b64\u79f0\u4e3a\u5173\u8054\u51fd\u6570\u3002</p> <p>\u5728\u4e4b\u524d\u7684\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u5df2\u7ecf\u591a\u6b21\u4f7f\u7528\u8fc7\u5173\u8054\u51fd\u6570\uff0c\u4f8b\u5982 <code>String::from</code>\uff0c\u7528\u4e8e\u521b\u5efa\u4e00\u4e2a\u52a8\u6001\u5b57\u7b26\u4e32\u3002</p> <pre><code>impl Rectangle {\nfn new(w: u32, h: u32) -&gt; Rectangle {\nRectangle { width: w, height: h }\n}\n}\n</code></pre> <p>Rust \u4e2d\u6709\u4e00\u4e2a\u7ea6\u5b9a\u4fd7\u6210\u7684\u89c4\u5219\uff0c\u4f7f\u7528 <code>new</code> \u6765\u4f5c\u4e3a\u6784\u9020\u5668\u7684\u540d\u79f0\uff0c\u51fa\u4e8e\u8bbe\u8ba1\u4e0a\u7684\u8003\u8651\uff0cRust \u7279\u5730\u6ca1\u6709\u7528 <code>new</code> \u4f5c\u4e3a\u5173\u952e\u5b57</p> <p>\u56e0\u4e3a\u662f\u51fd\u6570\uff0c\u6240\u4ee5\u4e0d\u80fd\u7528 <code>.</code> \u7684\u65b9\u5f0f\u6765\u8c03\u7528\uff0c\u6211\u4eec\u9700\u8981\u7528 <code>::</code> \u6765\u8c03\u7528\uff0c\u4f8b\u5982 <code>let sq = Rectangle::new(3, 3);</code>\u3002\u8fd9\u4e2a\u65b9\u6cd5\u4f4d\u4e8e\u7ed3\u6784\u4f53\u7684\u547d\u540d\u7a7a\u95f4\u4e2d\uff1a<code>::</code> \u8bed\u6cd5\u7528\u4e8e\u5173\u8054\u51fd\u6570\u548c\u6a21\u5757\u521b\u5efa\u7684\u547d\u540d\u7a7a\u95f4\u3002</p>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#84","title":"8.4 \u4e3a\u679a\u4e3e\u5b9e\u73b0\u65b9\u6cd5","text":"<p>\u679a\u4e3e\u7c7b\u578b\u4e4b\u6240\u4ee5\u5f3a\u5927\uff0c\u4e0d\u4ec5\u4ec5\u5728\u4e8e\u5b83\u597d\u7528\u3001\u53ef\u4ee5\u540c\u4e00\u5316\u7c7b\u578b\uff0c\u8fd8\u5728\u4e8e\uff0c\u6211\u4eec\u53ef\u4ee5\u50cf\u7ed3\u6784\u4f53\u4e00\u6837\uff0c\u4e3a\u679a\u4e3e\u5b9e\u73b0\u65b9\u6cd5\uff1a</p> <pre><code>#![allow(unused)]\nenum Message {\nQuit,\nMove { x: i32, y: i32 },\nWrite(String),\nChangeColor(i32, i32, i32),\n}\n\nimpl Message {\nfn call(&amp;self) {\n// \u5728\u8fd9\u91cc\u5b9a\u4e49\u65b9\u6cd5\u4f53\n}\n}\n\nfn main() {\nlet m = Message::Write(String::from(\"hello\"));\nm.call();\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#9","title":"9 \u683c\u5f0f\u5316\u8f93\u51fa","text":""},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#91","title":"9.1 \u683c\u5f0f\u5316\u8f93\u51fa\u5b8f","text":"<pre><code>`print!\u3001println!\u3001format!`\u5176\u5b9e\u662f\u4e00\u4e2a*\u8868\u8fbe\u5f0f*\u3002\n</code></pre> <ul> <li><code>print!</code>\uff1a\u00a0\u5c06\u683c\u5f0f\u5316\u6587\u672c\u8f93\u51fa\u5230\u6807\u51c6\u8f93\u51fa\uff0c\u4e0d\u5e26\u6362\u884c\u7b26</li> <li><code>println!</code>\uff1a\u00a0\u540c\u4e0a\uff0c\u4f46\u662f\u5728\u884c\u7684\u672b\u5c3e\u6dfb\u52a0\u6362\u884c\u7b26</li> <li><code>format!</code>\uff1a\u00a0\u5c06\u683c\u5f0f\u5316\u6587\u672c\u8f93\u51fa\u5230\u00a0<code>String</code>\u00a0\u5b57\u7b26\u4e32 \u4ee5\u4e0a 3 \u4e2a\uff0c\u53c8\u652f\u6301 3 \u79cd\u5360\u4f4d\u6807\u5fd7\uff1a</li> <li><code>{}</code></li> <li><code>{:?}</code> \uff1a\u5728\u7ed3\u6784\u4f53\u524d\u58f0\u660e <code>#[derive(Debug)]</code>\uff0c\u5c31\u53ef\u4ee5\u4e0d\u81ea\u5b9a\u4e49\u683c\u5f0f\u5316\u5668\u3002 </li> <li><code>{:#?}</code></li> </ul>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#10","title":"10 \u5b8f","text":"<pre><code>rust\u4e2d\u7684\u5b8f\u548cC\u4e2d\u7684\u5b8f\u6709\u5f88\u5927\u4e0d\u540c\uff0cC\u4e2d\u5b8f\u7684\u5b9a\u4e49\u6709`#define`\u5f00\u59cb\uff0c\u53ef\u4ee5\u6709\u5b8f\u5bf9\u8c61\u3001\u5b8f\u51fd\u6570\u3002\n</code></pre> <p>\u5728 Rust \u4e2d\u5b8f\u5206\u4e3a\u4e24\u5927\u7c7b\uff1a\u58f0\u660e\u5f0f\u5b8f( declarative macros) <code>macro_rules!</code> \u548c\u4e09\u79cd\u8fc7\u7a0b\u5b8f( procedural macros ): - <code>#[derive]</code>\uff0c\u5728\u4e4b\u524d\u591a\u6b21\u89c1\u5230\u7684\u6d3e\u751f\u5b8f\uff0c\u53ef\u4ee5\u4e3a\u76ee\u6807\u7ed3\u6784\u4f53\u6216\u679a\u4e3e\u6d3e\u751f\u6307\u5b9a\u7684\u4ee3\u7801\uff0c\u4f8b\u5982 <code>Debug</code> \u7279\u5f81 - \u7c7b\u5c5e\u6027\u5b8f(Attribute-like macro)\uff0c\u7528\u4e8e\u4e3a\u76ee\u6807\u6dfb\u52a0\u81ea\u5b9a\u4e49\u7684\u5c5e\u6027 - \u7c7b\u51fd\u6570\u5b8f(Function-like macro)\uff0c\u770b\u4e0a\u53bb\u5c31\u50cf\u662f\u51fd\u6570\u8c03\u7528</p>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#11","title":"11 \u589e\u5f3a\u529f\u80fd","text":""},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#111-range","title":"11.1 \u5e8f\u5217 (Range)","text":"<p>Range \u7528\u6765\u751f\u6210\u8fde\u7eed\u7684\u6570\u503c\u3002 - \u8bed\u6cd5\u683c\u5f0f\uff1a     - <code>num_start..num_end</code> \uff1a\u4ece num_start \u5230 num_end-1 \u7684\u8fde\u7eed\u6570\u5b57\uff0c\u4f8b\u5982\u00a0<code>1..5</code>\uff0c\u751f\u6210\u4ece 1 \u5230 4 \u7684\u8fde\u7eed\u6570\u5b57     - <code>num_start..=num_end</code> \uff1a\u4ece num_start \u5230 num_end \u7684\u8fde\u7eed\u6570\u5b57\uff0c<code>1..=5</code>\uff0c\u751f\u6210\u4ece 1 \u5230 5 \u7684\u8fde\u7eed\u6570\u5b57 - \u793a\u4f8b</p> <pre><code>fn fun1(){\nfor i in 0..=5{\nprintln!(\"{}\",i);\n}\n}\nfn main() {\nfun1();\n}\n</code></pre> <ul> <li>\u53ef\u80fd\u7ed3\u679c</li> </ul> <pre><code>0  1  2  3  4  5\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#112-nan","title":"11.2 NaN","text":"<ul> <li>\u529f\u80fd\uff1a\u5bf9\u4e8e\u6570\u5b66\u4e0a\u672a\u5b9a\u4e49\u7684\u7ed3\u679c\uff0c\u4f8b\u5982\u5bf9\u8d1f\u6570\u53d6\u5e73\u65b9\u6839\u00a0<code>-42.1.sqrt()</code>\u00a0\uff0c\u4f1a\u4ea7\u751f\u4e00\u4e2a\u7279\u6b8a\u7684\u7ed3\u679c\uff1aRust \u7684\u6d6e\u70b9\u6570\u7c7b\u578b\u4f7f\u7528\u00a0<code>NaN</code>\u00a0(not a number)\u6765\u5904\u7406\u8fd9\u4e9b\u60c5\u51b5\u3002</li> <li>\u5224\u65ad\u6570\u503c\u662f\u5426\u5408\u89c4\uff1a\u4f7f\u7528 <code>is_nan()</code> \u51fd\u6570</li> <li>\u793a\u4f8b</li> </ul> <pre><code>fn main() {\nlet x = (-42.0_f32).sqrt();\nif x.is_nan() {\nprintln!(\"\u672a\u5b9a\u4e49\u7684\u6570\u5b66\u884c\u4e3a\")\n}\n}\n</code></pre> <ul> <li>\u53ef\u80fd\u7684\u8f93\u51fa</li> </ul> <pre><code>\u672a\u5b9a\u4e49\u7684\u6570\u5b66\u884c\u4e3a\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#113-_","title":"11.3 \u901a\u914d\u7b26_","text":"<p>\u5728 rust \u4e2d <code>_</code> \u7b26\u53f7\u662f\u4e00\u4e2a\u7edf\u914d\u7b26\uff0c\u8868\u793a\u53ef\u4ee5\u5339\u914d\u4efb\u610f\u5185\u5bb9\uff0c\u901a\u5e38\u53ef\u4ee5\u7528\u5728\u4e00\u4e0b\u51e0\u5904\uff1a 1. <code>match</code> \u8868\u8fbe\u5f0f\u7ed3\u5c3e\u5206\u652f\uff0c\u5f53\u524d\u9762\u5206\u652f\u6ca1\u6709\u5339\u914d\u65f6\uff0c<code>_</code> \u5c31\u4f1a\u5339\u914d\u4efb\u610f\u5185\u5bb9\u3002 2. <code>for in</code> \u5faa\u73af\u4e2d\uff0c\u5f53\u6211\u4eec\u4e0d\u5173\u5fc3\u503c\u65f6\uff0c\u7528 <code>_</code> \u5ffd\u7565\u503c 3. <code>_</code> \u751a\u81f3\u53ef\u4ee5\u4f5c\u4e3a\u53d8\u91cf\u540d\u524d\u7f00\uff0c\u8868\u793a\u672a\u4f7f\u7528\u7684\u53d8\u91cf\uff0c\u7f16\u8bd1\u4e0d\u4f1a\u8b66\u544a\u3002</p> <ul> <li>\u793a\u4f8b 1</li> </ul> <pre><code>for _ in 0..10 {\n// ...\n}\n</code></pre> <ul> <li>\u793a\u4f8b 2</li> </ul> <pre><code>enum Direction {\nEast,\nWest,\nNorth,\nSouth,\n}\n\nfn main() {\nlet dire = Direction::South;\nmatch dire {\nDirection::East =&gt; println!(\"East\"),\nDirection::North | Direction::South =&gt; {\nprintln!(\"South or North\");\n},\n_ =&gt; println!(\"West\"),\n};\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/01-Rust-%E5%9F%BA%E7%A1%80/#114","title":"11.4 \u5ffd\u7565\u7b26..","text":"<p><code>..</code> \u53ef\u4ee5\u51fa\u73b0\u5728\u5e8f\u5217\uff08Range\uff09\u4e2d\uff0c\u4e5f\u53ef\u4ee5\u7528\u4e8e\u5ffd\u7565\u5339\u914d\u503c\uff0c\u5ffd\u7565\u89c4\u5219\u5982\u4e0b\uff1a 1. \u5ffd\u7565\u524d\u503c\u6216\u540e\u503c 2. \u5ffd\u7565\u4e2d\u95f4\u503c 3. <code>..</code>\u00a0\u5fc5\u987b\u662f\u65e0\u6b67\u4e49\u7684 - \u5ffd\u7565\u524d\u3001\u540e\u503c\uff1a</p> <pre><code>#![allow(unused)]\nfn main() {\nstruct Point {\nx: i32,\ny: i32,\nz: i32,\n}\n\nlet origin = Point { x: 0, y: 0, z: 0 };\n\nmatch origin {\nPoint { x, .. } =&gt; println!(\"x is {}\", x),\n}\n}\n</code></pre> <ul> <li>\u5ffd\u7565\u4e2d\u95f4\u503c\uff1a</li> </ul> <pre><code>fn main() {\nlet numbers = (2, 4, 8, 16, 32);\n\nmatch numbers {\n(first, .., last) =&gt; {\nprintln!(\"Some numbers: {}, {}\", first, last);\n},\n}\n}\n</code></pre> <ul> <li>\u6709\u6b67\u4e49\u7684\uff0c\u7f16\u8bd1\u5931\u8d25\uff1a</li> </ul> <pre><code>fn main() {\nlet numbers = (2, 4, 8, 16, 32);\n\nmatch numbers {\n(.., second, ..) =&gt; {\nprintln!(\"Some numbers: {}\", second)\n},\n}\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/02-Rust-%E8%BF%9B%E9%98%B6/","title":"Rust-\u8fdb\u9636","text":""},{"location":"Documents/B-Programming%20Language/Rust/02-Rust-%E8%BF%9B%E9%98%B6/#1-generics","title":"1 \u6cdb\u578bGenerics","text":"<pre><code>**rust\u6cdb\u578b\u4e5f\u5c31\u662fC++\u4e2d\u7684\u6a21\u677f**\u3002rust\u76d2C++\u4e2d\u5bf9\u6cdb\u578b\u7684\u8981\u6c42\u6709\u4e00\u4e9b\u4e0d\u540c\uff0c\u5982\u4e0b\uff1a\n1. rust\u79cd**\u65b9\u6cd5\u3001\u51fd\u6570\u7684\u6cdb\u578b\u5fc5\u987b\u8981\u6709\u7c7b\u578b\u9650\u5236**\uff0c\u6bd4\u5982\uff0c\u65b9\u6cd5\u79cd\u5bf9\u6cdb\u578b\u8fdb\u884c\u7684\u52a0\u6cd5\u8fd0\u7b97\uff0c\u5c31\u8981\u7ed9\u6cdb\u578b\u6dfb\u52a0`std::ops::Add`\u7684\u9650\u5236\u3002C++\u79cd\u53ef\u4ee5\u52a0\u8fd9\u65b9\u9762\u7684\u9650\u5236\uff0c\u4e5f\u53ef\u4ee5\u4e0d\u52a0\u3002\n2. rust\u4e2d**\u7ed3\u6784\u3001\u679a\u4e3e\u6cdb\u578b\u5219\u4e0d\u9700\u8981\u52a0\u9650\u5236**\u3002\n</code></pre> <p>rust \u4e2d\u6cdb\u578b\u53c2\u6570\u53ef\u4ee5\u7528\u4efb\u610f\u6709\u6548\u7684\u7b26\u53f7\u4ee3\u66ff\uff0c\u4f46\u901a\u5e38\u4f7f\u7528 <code>T</code> \u3001<code>U</code> \u7b49\u4ee3\u66ff\u3002</p>"},{"location":"Documents/B-Programming%20Language/Rust/02-Rust-%E8%BF%9B%E9%98%B6/#11","title":"1.1 \u51fd\u6570\u6cdb\u578b","text":"<ul> <li>\u793a\u4f8b</li> </ul> <pre><code>#![allow(unused)]\nfn main() {\nfn add&lt;T: std::ops::Add&lt;Output = T&gt;&gt;(a:T, b:T) -&gt; T {\na + b\n}\nprintln!(\"{}\",add(2,3));\n}\n</code></pre> <ul> <li>\u53ef\u80fd\u7684\u8f93\u51fa</li> </ul> <pre><code>5\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/02-Rust-%E8%BF%9B%E9%98%B6/#12","title":"1.2 \u7ed3\u6784\u6cdb\u578b","text":"<ul> <li>\u793a\u4f8b</li> </ul> <pre><code>struct Point&lt;T&gt; {\nx: T,\ny: T,\n}\n\nfn main() {\nlet integer = Point { x: 5, y: 10 };\nlet float = Point { x: 1.0, y: 4.0 };\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/02-Rust-%E8%BF%9B%E9%98%B6/#13","title":"1.3 \u679a\u4e3e\u6cdb\u578b","text":"<ul> <li>\u793a\u4f8b</li> </ul> <pre><code>enum Option&lt;T&gt; {\nSome(T),\nNone,\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/02-Rust-%E8%BF%9B%E9%98%B6/#14","title":"1.4 \u65b9\u6cd5\u6cdb\u578b","text":"<p>\u65b9\u6cd5\u6cdb\u578b\u9700\u8981\u6ce8\u610f\u7684\u662f\u4f7f\u7528 <code>impl&lt;T&gt;</code>\u3002</p> <pre><code>struct Point&lt;T&gt; {\nx: T,\ny: T,\n}\nimpl&lt;T&gt; Point&lt;T&gt; {\nfn x(&amp;self) -&gt; &amp;T {\n&amp;self.x\n}\n}\nfn main() {\nlet p = Point { x: 5, y: 10 };\nprintln!(\"p.x = {}\", p.x());\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/02-Rust-%E8%BF%9B%E9%98%B6/#15","title":"1.5 \u6cdb\u578b\u7684\u5177\u4f53\u5316","text":"<pre><code>\u8fd9\u548c**C++\u4e2d\u6a21\u677f\u7684\u663e\u5f0f\u5177\u4f53\u5316**\u76f8\u540c\uff0c\u4e3a\u7279\u70b9\u7684\u7c7b\u578b\u5b9a\u4e49\u89c4\u5219\u3002\u6cdb\u578b\u4f1a**\u4f18\u5148\u5339\u914d\u5177\u4f53\u5316**\u7684\u5b9e\u73b0\u3002\n</code></pre> <pre><code>#![allow(unused)]\nstruct Point&lt;T&gt; {\nx: T,\ny: T,\n}\nimpl Point&lt;f32&gt; {\nfn distance_from_origin(&amp;self) -&gt; f32 {\n(self.x.powi(2) + self.y.powi(2)).sqrt()\n}\n}\nfn main() {\nlet p1:Point&lt;f32&gt; = Point{x:2.0,y:3.0};\nprintln!(\"{}\",p1.distance_from_origin());\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/02-Rust-%E8%BF%9B%E9%98%B6/#16-const","title":"1.6 const \u6cdb\u578b","text":"<pre><code>rust\u4e2dconst\u6cdb\u578b\u76d2C++\u4e2d\u7684\u57fa\u672c\u7c7b\u578b\u6a21\u677f\u5f62\u53c2\u76f8\u540c\u3002\u6cdb\u578b\u5f62\u53c2\u53ef\u4ee5\u6307\u5b9a\u6574\u5f62\u7c7b\u578b\u3002\n</code></pre> <pre><code>fn display_array&lt;T: std::fmt::Debug, const N: usize&gt;(arr: [T; N]) {\nprintln!(\"{:?}\", arr);\n}\nfn main() {\nlet arr: [i32; 3] = [1, 2, 3];\ndisplay_array(arr);\n\nlet arr: [i32; 2] = [1, 2];\ndisplay_array(arr);\n}\n</code></pre> <ul> <li>\u53ef\u80fd\u7684\u8f93\u51fa</li> </ul> <pre><code>[1, 2, 3]  \n[1, 2]\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/02-Rust-%E8%BF%9B%E9%98%B6/#17-const","title":"1.7 const \u6cdb\u578b\u8868\u8fbe\u5f0f","text":"<pre><code>rust\u7684\u6cdb\u578b\u8868\u8fbe\u5f0f\u548cC++20\u4e2d\u7684`concepts`\u00a0\u548c\u00a0`requires`\u5f88\u50cf\uff0c\u4e5f\u662f\u7f16\u8bd1\u5668\u68c0\u6d4b\u6cdb\u578b\u53c2\u6570\u662f\u5426\u6ee1\u8db3\u8868\u8fbe\u5f0f\u3002\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/02-Rust-%E8%BF%9B%E9%98%B6/#2","title":"2 \u96c6\u5408","text":""},{"location":"Documents/B-Programming%20Language/Rust/02-Rust-%E8%BF%9B%E9%98%B6/#3-trait","title":"3 \u7279\u5f81 Trait","text":""},{"location":"Documents/B-Programming%20Language/Rust/02-Rust-%E8%BF%9B%E9%98%B6/#4","title":"4 \u5305\u7ba1\u7406","text":"<ul> <li>Package\uff1a\u53ef\u4ee5\u7528\u6765\u6784\u5efa\u3001\u6d4b\u8bd5\u548c\u5206\u4eab\u5305</li> <li>WorkSpace\uff1a\u5bf9\u4e8e\u5927\u578b\u9879\u76ee\uff0c\u53ef\u4ee5\u8fdb\u4e00\u6b65\u5c06\u591a\u4e2aCrate\u8054\u5408\u5728\u4e00\u8d77\uff0c\u7ec4\u7ec7\u6210WorkSpace</li> <li>Crate\uff1a\u4e00\u4e2a\u7531\u591a\u4e2aModule\u7ec4\u6210\u7684\u6811\u5f62\u7ed3\u6784\uff0c\u53ef\u4ee5\u4f5c\u4e3a\u4e09\u65b9\u5e93\u8fdb\u884c\u5206\u53d1\uff0c\u4e5f\u53ef\u4ee5\u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6\u8fdb\u884c\u8fd0\u884c</li> <li>Module\uff1a\u53ef\u4ee5\u4e00\u4e2a\u6587\u4ef6\u591a\u4e2a\u6a21\u5757\uff0c\u4e5f\u53ef\u4ee5\u4e00\u4e2a\u6587\u4ef6\u4e00\u4e2a\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u88ab\u8ba4\u4e3a\u662f\u771f\u5b9e\u9879\u76ee\u4e2d\u7684\u4ee3\u7801\u7ec4\u7ec7\u5355\u5143</li> </ul> <p>\u4e00\u4e2a\u771f\u5b9e\u9879\u76ee\u4e2d\u5178\u578b\u7684 <code>Package</code>\uff0c\u4f1a\u5305\u542b\u591a\u4e2a\u4e8c\u8fdb\u5236\u5305\uff0c\u8fd9\u4e9b\u5305\u6587\u4ef6\u88ab\u653e\u5728 <code>src/bin</code> \u76ee\u5f55\u4e0b\uff0c\u6bcf\u4e00\u4e2a\u6587\u4ef6\u90fd\u662f\u72ec\u7acb\u7684\u4e8c\u8fdb\u5236\u5305\uff0c\u540c\u65f6\u4e5f\u4f1a\u5305\u542b\u4e00\u4e2a\u5e93\u5305\uff0c\u8be5\u5305\u53ea\u80fd\u5b58\u5728\u4e00\u4e2a <code>src/lib.rs</code>\uff1a</p> <pre><code>.\n\u251c\u2500\u2500 Cargo.toml\n\u251c\u2500\u2500 Cargo.lock\n\u251c\u2500\u2500 src\n\u2502   \u251c\u2500\u2500 main.rs\n\u2502   \u251c\u2500\u2500 lib.rs\n\u2502   \u2514\u2500\u2500 bin\n\u2502       \u2514\u2500\u2500 main1.rs\n\u2502       \u2514\u2500\u2500 main2.rs\n\u251c\u2500\u2500 tests\n\u2502   \u2514\u2500\u2500 some_integration_tests.rs\n\u251c\u2500\u2500 benches\n\u2502   \u2514\u2500\u2500 simple_bench.rs\n\u2514\u2500\u2500 examples\n\u2514\u2500\u2500 simple_example.rs\n</code></pre> <ul> <li>\u552f\u4e00\u5e93\u5305\uff1a<code>src/lib.rs</code></li> <li>\u9ed8\u8ba4\u4e8c\u8fdb\u5236\u5305\uff1a<code>src/main.rs</code>\uff0c\u7f16\u8bd1\u540e\u751f\u6210\u7684\u53ef\u6267\u884c\u6587\u4ef6\u4e0e <code>Package</code> \u540c\u540d</li> <li>\u5176\u4f59\u4e8c\u8fdb\u5236\u5305\uff1a<code>src/bin/main1.rs</code> \u548c <code>src/bin/main2.rs</code>\uff0c\u5b83\u4eec\u4f1a\u5206\u522b\u751f\u6210\u4e00\u4e2a\u6587\u4ef6\u540c\u540d\u7684\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6</li> <li>\u96c6\u6210\u6d4b\u8bd5\u6587\u4ef6\uff1a<code>tests</code> \u76ee\u5f55\u4e0b</li> <li>\u57fa\u51c6\u6027\u80fd\u6d4b\u8bd5 <code>benchmark</code> \u6587\u4ef6\uff1a<code>benches</code> \u76ee\u5f55\u4e0b</li> <li>\u9879\u76ee\u793a\u4f8b\uff1a<code>examples</code> \u76ee\u5f55\u4e0b</li> </ul>"},{"location":"Documents/B-Programming%20Language/Rust/02-Rust-%E8%BF%9B%E9%98%B6/#41-mod","title":"4.1 mod","text":"<pre><code>\u6a21\u5757\u53ef\u4ee5\u5d4c\u5957\uff0c\u4e5f\u53ef\u4ee5\u653e\u5728\u540c\u4e00\u4e2a\u6587\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u5206\u79bb\u5230\u5404\u4e2a\u6587\u4ef6\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/02-Rust-%E8%BF%9B%E9%98%B6/#411-module","title":"4.1.1 Module \u7684\u58f0\u660e","text":"<p>rust \u4e2d\u7684Module\u901a\u8fc7\u5173\u952e\u5b57 <code>mod \u6a21\u7ec4\u540d{...}</code> \u6765\u58f0\u660e\uff0c\u8fd9\u79cd\u58f0\u660e\u65b9\u5f0f\u548c C++\u4e2d\u547d\u540d\u7a7a\u95f4\u4e00\u6837 <code>namespace \u547d\u540d\u7a7a\u95f4\u540d{...}</code>\u3002</p>"},{"location":"Documents/B-Programming%20Language/Rust/02-Rust-%E8%BF%9B%E9%98%B6/#412-module","title":"4.1.2 Module \u7684\u5f15\u5165","text":"<p><code>mod \u6a21\u7ec4\u540d</code> \u8868\u793a\u4ece\u548c\u6a21\u7ec4\u540c\u540d\u7684\u6587\u4ef6\u52a0\u8f7d\u8be5\u6a21\u5757\u7684\u5185\u5bb9, \u8fd9\u4e00\u70b9\u548c C++\u4e2d include \u6216\u8005 C++20 \u4e2d Module\u4e00\u6837\u3002</p>"},{"location":"Documents/B-Programming%20Language/Rust/02-Rust-%E8%BF%9B%E9%98%B6/#42-pub","title":"4.2 pub","text":"<pre><code>rust pub \u76f8\u5f53\u4e8eC++\u4e2d\u7684public\u3002rust\u4e2d\u9ed8\u8ba4\u662fprivate\u3002\n</code></pre> <pre><code>mod front_of_house {\npub mod hosting {\npub fn add_to_waitlist() {}\n}\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/02-Rust-%E8%BF%9B%E9%98%B6/#43-use","title":"4.3 use","text":"<p>rust \u4e2d use \u548c C++\u4e2d using namespace\u5f88\u50cf\uff0c\u7b80\u77ed\u4e86\u5728\u4f7f\u7528\u5916\u90e8\u6a21\u7ec4\u4e0b\u5185\u5bb9\u65f6\u957f\u957f\u7684\u6a21\u7ec4\u8def\u5f84\u3002</p> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>#![allow(unused)]\nfn main() {\nmod front_of_house;\n// \u4f7f\u7528front_of_house:hosting\u7684\u4f5c\u7528\u57df\u5f15\u5165\u5230\u5f53\u524d\u6587\u4ef6\u4e2d\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u5176\u4e0b\u7684\u5185\u5bb9\npub use crate::front_of_house::hosting;\n\npub fn eat_at_restaurant() {\nhosting::add_to_waitlist();\nhosting::add_to_waitlist();\nhosting::add_to_waitlist();\n}\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/02-Rust-%E8%BF%9B%E9%98%B6/#431-use-as","title":"4.3.1 use .. as \u522b\u540d","text":"<p>\u4f5c\u7528\uff1a\u5c06\u5f15\u5165\u7684\u5185\u5bb9\u91cd\u65b0\u547d\u540d\uff0c\u907f\u514d\u5f15\u5165\u7684\u5185\u5bb9\u540c\u540d\u6c61\u67d3\u95ee\u9898\u3002</p>"},{"location":"Documents/B-Programming%20Language/Rust/02-Rust-%E8%BF%9B%E9%98%B6/#432-pub-use","title":"4.3.2 pub use","text":"<p>\u4f5c\u7528\uff1a\u5f53\u5916\u90e8\u7684\u6a21\u5757\u9879\u00a0<code>A</code>\u00a0\u88ab\u5f15\u5165\u5230\u5f53\u524d\u6a21\u5757\u4e2d\u65f6\uff0c\u5b83\u7684\u53ef\u89c1\u6027\u81ea\u52a8\u88ab\u8bbe\u7f6e\u4e3a\u79c1\u6709\u7684\uff0c\u5982\u679c\u4f60\u5e0c\u671b\u5141\u8bb8\u5176\u5b83\u5916\u90e8\u4ee3\u7801\u5f15\u7528\u6211\u4eec\u7684\u6a21\u5757\u9879\u00a0<code>A</code>\uff0c\u90a3\u4e48\u53ef\u4ee5\u5bf9\u5b83\u8fdb\u884c\u518d\u5bfc\u51fa\u3002</p> <pre><code>#![allow(unused)]\nfn main() {\nmod front_of_house {\npub mod hosting {\npub fn add_to_waitlist() {}\n}\n}\n\npub use crate::front_of_house::hosting;\n\npub fn eat_at_restaurant() {\nhosting::add_to_waitlist();\nhosting::add_to_waitlist();\nhosting::add_to_waitlist();\n}\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/02-Rust-%E8%BF%9B%E9%98%B6/#44-selfsupercrate","title":"4.4 self\u3001super\u3001crate","text":"<ul> <li><code>self</code>\u00a0\u5176\u5b9e\u5c31\u662f\u5f15\u7528\u81ea\u8eab\u6a21\u5757\u4e2d\u7684\u9879</li> <li><code>super</code>\u00a0\u4ee3\u8868\u7684\u662f\u7236\u6a21\u5757\u4e3a\u5f00\u59cb\u7684\u5f15\u7528\u65b9\u5f0f\uff0c\u7c7b\u4f3c <code>../</code></li> <li><code>crate</code> \u76f8\u5f53\u4e8e\u6a21\u7ec4\u7684\u6839\u76ee\u5f55\uff0c\u7528\u4e8e\u7edd\u5bf9\u8def\u5f84\u5bfc\u5165\u6a21\u7ec4\u65b9\u5f0f</li> </ul> <pre><code>#![allow(unused)]\nfn main() {\nmod front_of_house {\nmod hosting {\nfn add_to_waitlist() {}\n}\n}\n\npub fn eat_at_restaurant() {\n// \u7edd\u5bf9\u8def\u5f84\ncrate::front_of_house::hosting::add_to_waitlist();\n\n// \u76f8\u5bf9\u8def\u5f84\nfront_of_house::hosting::add_to_waitlist();\n}\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/02-Rust-%E8%BF%9B%E9%98%B6/#45","title":"4.5 \u7b2c\u4e09\u65b9\u5305\u7684\u5f15\u5165","text":"<p>\u5f15\u5165\u4e0b\u7b2c\u4e09\u65b9\u5305\u4e2d\u7684\u6a21\u5757\u64cd\u4f5c\u6b65\u9aa4\u5982\u4e0b\uff1a 1. \u4fee\u6539 <code>Cargo.toml</code> \u6587\u4ef6\uff0c\u5728 <code>[dependencies]</code> \u533a\u57df\u6dfb\u52a0\u4e00\u884c\uff1a<code>rand = \"0.8.3\"</code> 2. \u6b64\u65f6\uff0c\u5982\u679c\u4f60\u7528\u7684\u662f <code>VSCode</code> \u548c <code>rust-analyzer</code> \u63d2\u4ef6\uff0c\u8be5\u63d2\u4ef6\u4f1a\u81ea\u52a8\u62c9\u53d6\u8be5\u5e93\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u7b49\u5b83\u5b8c\u6210\u540e\uff0c\u518d\u8fdb\u884c\u4e0b\u4e00\u6b65\uff08VSCode \u5de6\u4e0b\u89d2\u6709\u63d0\u793a\uff09</p> <p>\u597d\u4e86\uff0c\u6b64\u65f6\uff0c<code>rand</code> \u5305\u5df2\u7ecf\u88ab\u6211\u4eec\u6dfb\u52a0\u5230\u4f9d\u8d56\u4e2d\uff0c\u4e0b\u4e00\u6b65\u5c31\u662f\u5728\u4ee3\u7801\u4e2d\u4f7f\u7528\uff1a</p> <pre><code>use rand::Rng;\n\nfn main() {\nlet secret_number = rand::thread_rng().gen_range(1..101);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/03-Rust%E6%A0%87%E5%87%86%E5%BA%93/","title":"Rust \u6807\u51c6\u5e93","text":""},{"location":"Documents/B-Programming%20Language/Rust/03-Rust%E6%A0%87%E5%87%86%E5%BA%93/#1-option","title":"1 Option","text":"<pre><code>`Option` \u662f\u4e00\u4e2a\u679a\u4e3e,\u548cC++17\u4e2d\u65b0\u589e\u7684`optional`\u529f\u80fd\u4e00\u81f4\uff0c\u901a\u5e38\u7528\u5728\u51fd\u6570\u53ef\u80fd\u8fd4\u56de\u7a7a\u503c\u7684\u60c5\u51b5\u3002\n</code></pre> <p><code>Option</code> \u5b9a\u4e49\u5982\u4e0b\uff0c\u5176\u4e2d\u00a0<code>T</code>\u00a0\u662f\u6cdb\u578b\u53c2\u6570\uff0c<code>Some(T)</code> \u8868\u793a\u8be5\u679a\u4e3e\u6210\u5458\u7684\u6570\u636e\u7c7b\u578b\u662f\u00a0<code>T</code>\uff0c\u6362\u53e5\u8bdd\u8bf4\uff0c<code>Some</code>\u00a0\u53ef\u4ee5\u5305\u542b\u4efb\u4f55\u7c7b\u578b\u7684\u6570\u636e\u3002</p> <pre><code>enum Option&lt;T&gt; {\nSome(T),\nNone,\n}\n</code></pre> <p>\u9700\u8981\u6ce8\u610f\u7684\u51e0\u70b9\u5982\u4e0b\uff1a - \u65e0\u9700\u4f7f\u7528\u00a0<code>Option::</code>\u00a0\u524d\u7f00\u5c31\u53ef\u76f4\u63a5\u4f7f\u7528\u00a0<code>Some</code>\u00a0\u548c\u00a0<code>None</code>\u3002 - \u5f53\u4f7f\u7528 <code>None</code> \u662f\u9700\u8981\u663e\u793a\u6307\u5b9a\u7c7b\u578b T\uff0c\u5982: <code>Option&lt;i8&gt;</code>, \u5f53\u4f7f\u7528 <code>Some</code> \u4f1a\u81ea\u52a8\u63a8\u5230 - <code>Option</code> \u503c\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528\uff0c\u9700\u8981 <code>unwrap()</code> \u51fd\u6570\u83b7\u53d6\u503c\u3002</p> <pre><code>#![allow(unused)]\nfn main() {\nlet x: i8 = 5;\nlet y = Some(5);\nlet z:Option&lt;i8&gt; = None;\n// unwrap()\u83b7\u53d6\u503c\uff0c\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528y\nlet sum = x + y.unwrap();\nprintln!(\"{}\",sum);\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/03-Rust%E6%A0%87%E5%87%86%E5%BA%93/#2-result","title":"2 Result","text":"<pre><code>`Result`\u901a\u5e38\u7528\u4e8e\u51fd\u6570\u6267\u884c\u8fd4\u56de\u6210\u529f\u6216\u8005\u5931\u8d25\u7684\u573a\u666f\u3002\n</code></pre> <p><code>Result</code> \u5b9a\u4e49\u5982\u4e0b\uff1a</p> <pre><code>enum Result&lt;T, E&gt; {\nOk(T),\nErr(E),\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Rust/Rust%E8%B5%84%E6%BA%90/","title":"Rust \u8d44\u6e90","text":"<ul> <li>Rust\u8bed\u8a00\u5723\u7ecf(Rust Course)</li> <li>Rust \u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00\u4e2d\u6587\u7248</li> <li>\u901a\u8fc7\u4f8b\u5b50\u5b66 Rust \u4e2d\u6587\u7248</li> <li>Cargo \u624b\u518c \u4e2d\u6587\u7248</li> <li>Rust \u6807\u51c6\u5e93</li> </ul>"},{"location":"Documents/B-Programming%20Language/Rust/cargo/","title":"cargo","text":"<pre><code>cargo\u662fRust\u8bed\u8a00\u7684\u5305\u7ba1\u7406\u5de5\u5177\u3002\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/","title":"SQL \u8bed\u6cd5","text":""},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#1","title":"1 \u4e00\u3001\u57fa\u7840","text":"<p>\u6a21\u5f0f\u5b9a\u4e49\u4e86\u6570\u636e\u5982\u4f55\u5b58\u50a8\u3001\u5b58\u50a8\u4ec0\u4e48\u6837\u7684\u6570\u636e\u4ee5\u53ca\u6570\u636e\u5982\u4f55\u5206\u89e3\u7b49\u4fe1\u606f\uff0c\u6570\u636e\u5e93\u548c\u8868\u90fd\u6709\u6a21\u5f0f\u3002</p> <p>\u4e3b\u952e\u7684\u503c\u4e0d\u5141\u8bb8\u4fee\u6539\uff0c\u4e5f\u4e0d\u5141\u8bb8\u590d\u7528\uff08\u4e0d\u80fd\u5c06\u5df2\u7ecf\u5220\u9664\u7684\u4e3b\u952e\u503c\u8d4b\u7ed9\u65b0\u6570\u636e\u884c\u7684\u4e3b\u952e\uff09\u3002</p> <p>SQL\uff08Structured Query Language)\uff0c\u6807\u51c6 SQL \u7531 ANSI \u6807\u51c6\u59d4\u5458\u4f1a\u7ba1\u7406\uff0c\u4ece\u800c\u79f0\u4e3a ANSI SQL\u3002\u5404\u4e2a DBMS \u90fd\u6709\u81ea\u5df1\u7684\u5b9e\u73b0\uff0c\u5982 PL/SQL\u3001Transact-SQL \u7b49\u3002</p> <p>SQL \u8bed\u53e5\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff0c\u4f46\u662f\u6570\u636e\u5e93\u8868\u540d\u3001\u5217\u540d\u548c\u503c\u662f\u5426\u533a\u5206\u4f9d\u8d56\u4e8e\u5177\u4f53\u7684 DBMS \u4ee5\u53ca\u914d\u7f6e\u3002</p> <p>SQL \u652f\u6301\u4ee5\u4e0b\u4e09\u79cd\u6ce8\u91ca\uff1a</p> <pre><code>## \u6ce8\u91ca\nSELECT *\nFROM mytable; -- \u6ce8\u91ca\n/* \u6ce8\u91ca1\n   \u6ce8\u91ca2 */\n</code></pre> <p>\u6570\u636e\u5e93\u521b\u5efa\u4e0e\u4f7f\u7528\uff1a</p> <pre><code>CREATE DATABASE test;\nUSE test;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#2","title":"2 \u4e8c\u3001\u521b\u5efa\u8868","text":"<pre><code>CREATE TABLE mytable (\n# int \u7c7b\u578b\uff0c\u4e0d\u4e3a\u7a7a\uff0c\u81ea\u589e\nid INT NOT NULL AUTO_INCREMENT,\n# int \u7c7b\u578b\uff0c\u4e0d\u53ef\u4e3a\u7a7a\uff0c\u9ed8\u8ba4\u503c\u4e3a 1\uff0c\u4e0d\u4e3a\u7a7a\ncol1 INT NOT NULL DEFAULT 1,\n# \u53d8\u957f\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u6700\u957f\u4e3a 45 \u4e2a\u5b57\u7b26\uff0c\u53ef\u4ee5\u4e3a\u7a7a\ncol2 VARCHAR(45) NULL,\n# \u65e5\u671f\u7c7b\u578b\uff0c\u53ef\u4e3a\u7a7a\ncol3 DATE NULL,\n# \u8bbe\u7f6e\u4e3b\u952e\u4e3a id\nPRIMARY KEY (`id`));\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#3","title":"3 \u4e09\u3001\u4fee\u6539\u8868","text":"<p>\u6dfb\u52a0\u5217</p> <pre><code>ALTER TABLE mytable\nADD col CHAR(20);\n</code></pre> <p>\u5220\u9664\u5217</p> <pre><code>ALTER TABLE mytable\nDROP COLUMN col;\n</code></pre> <p>\u5220\u9664\u8868</p> <pre><code>DROP TABLE mytable;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#4","title":"4 \u56db\u3001\u63d2\u5165","text":"<p>\u666e\u901a\u63d2\u5165</p> <pre><code>INSERT INTO mytable(col1, col2)\nVALUES(val1, val2);\n</code></pre> <p>\u63d2\u5165\u68c0\u7d22\u51fa\u6765\u7684\u6570\u636e</p> <pre><code>INSERT INTO mytable1(col1, col2)\nSELECT col1, col2\nFROM mytable2;\n</code></pre> <p>\u5c06\u4e00\u4e2a\u8868\u7684\u5185\u5bb9\u63d2\u5165\u5230\u4e00\u4e2a\u65b0\u8868</p> <pre><code>CREATE TABLE newtable AS\nSELECT * FROM mytable;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#5","title":"5 \u4e94\u3001\u66f4\u65b0","text":"<pre><code>UPDATE mytable\nSET col = val\nWHERE id = 1;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#6","title":"6 \u516d\u3001\u5220\u9664","text":"<pre><code>DELETE FROM mytable\nWHERE id = 1;\n</code></pre> <p>TRUNCATE TABLE \u53ef\u4ee5\u6e05\u7a7a\u8868\uff0c\u4e5f\u5c31\u662f\u5220\u9664\u6240\u6709\u884c\u3002</p> <pre><code>TRUNCATE TABLE mytable;\n</code></pre> <p>\u4f7f\u7528\u66f4\u65b0\u548c\u5220\u9664\u64cd\u4f5c\u65f6\u4e00\u5b9a\u8981\u7528 WHERE \u5b50\u53e5\uff0c\u4e0d\u7136\u4f1a\u628a\u6574\u5f20\u8868\u7684\u6570\u636e\u90fd\u7834\u574f\u3002\u53ef\u4ee5\u5148\u7528 SELECT \u8bed\u53e5\u8fdb\u884c\u6d4b\u8bd5\uff0c\u9632\u6b62\u9519\u8bef\u5220\u9664\u3002</p>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#7","title":"7 \u4e03\u3001\u67e5\u8be2","text":""},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#71-distinct","title":"7.1 DISTINCT","text":"<p>\u76f8\u540c\u503c\u53ea\u4f1a\u51fa\u73b0\u4e00\u6b21\u3002\u5b83\u4f5c\u7528\u4e8e\u6240\u6709\u5217\uff0c\u4e5f\u5c31\u662f\u8bf4\u6240\u6709\u5217\u7684\u503c\u90fd\u76f8\u540c\u624d\u7b97\u76f8\u540c\u3002</p> <pre><code>SELECT DISTINCT col1, col2\nFROM mytable;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#72-limit","title":"7.2 LIMIT","text":"<p>\u9650\u5236\u8fd4\u56de\u7684\u884c\u6570\u3002\u53ef\u4ee5\u6709\u4e24\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u8d77\u59cb\u884c\uff0c\u4ece 0 \u5f00\u59cb\uff1b\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u8fd4\u56de\u7684\u603b\u884c\u6570\u3002</p> <p>\u8fd4\u56de\u524d 5 \u884c\uff1a</p> <pre><code>SELECT *\nFROM mytable\nLIMIT 5;\n</code></pre> <pre><code>SELECT *\nFROM mytable\nLIMIT 0, 5;\n</code></pre> <p>\u8fd4\u56de\u7b2c 3 \\~ 5 \u884c\uff1a</p> <pre><code>SELECT *\nFROM mytable\nLIMIT 2, 3;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#8","title":"8 \u516b\u3001\u6392\u5e8f","text":"<ul> <li>ASC \uff1a\u5347\u5e8f\uff08\u9ed8\u8ba4\uff09</li> <li>DESC \uff1a\u964d\u5e8f</li> </ul> <p>\u53ef\u4ee5\u6309\u591a\u4e2a\u5217\u8fdb\u884c\u6392\u5e8f\uff0c\u5e76\u4e14\u4e3a\u6bcf\u4e2a\u5217\u6307\u5b9a\u4e0d\u540c\u7684\u6392\u5e8f\u65b9\u5f0f\uff1a</p> <pre><code>SELECT *\nFROM mytable\nORDER BY col1 DESC, col2 ASC;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#9","title":"9 \u4e5d\u3001\u8fc7\u6ee4","text":"<p>\u4e0d\u8fdb\u884c\u8fc7\u6ee4\u7684\u6570\u636e\u975e\u5e38\u5927\uff0c\u5bfc\u81f4\u901a\u8fc7\u7f51\u7edc\u4f20\u8f93\u4e86\u591a\u4f59\u7684\u6570\u636e\uff0c\u4ece\u800c\u6d6a\u8d39\u4e86\u7f51\u7edc\u5e26\u5bbd\u3002\u56e0\u6b64\u5c3d\u91cf\u4f7f\u7528 SQL \u8bed\u53e5\u6765\u8fc7\u6ee4\u4e0d\u5fc5\u8981\u7684\u6570\u636e\uff0c\u800c\u4e0d\u662f\u4f20\u8f93\u6240\u6709\u7684\u6570\u636e\u5230\u5ba2\u6237\u7aef\u4e2d\u7136\u540e\u7531\u5ba2\u6237\u7aef\u8fdb\u884c\u8fc7\u6ee4\u3002</p> <pre><code>SELECT *\nFROM mytable\nWHERE col IS NULL;\n</code></pre> <p>\u4e0b\u8868\u663e\u793a\u4e86 WHERE \u5b50\u53e5\u53ef\u7528\u7684\u64cd\u4f5c\u7b26</p> \u64cd\u4f5c\u7b26 \u8bf4\u660e = \u7b49\u4e8e &lt; \u5c0f\u4e8e &gt; \u5927\u4e8e &lt;&gt; != \u4e0d\u7b49\u4e8e &lt;= !&gt; \u5c0f\u4e8e\u7b49\u4e8e &gt;= !&lt; \u5927\u4e8e\u7b49\u4e8e BETWEEN \u5728\u4e24\u4e2a\u503c\u4e4b\u95f4 IS NULL \u4e3a NULL \u503c <p>\u5e94\u8be5\u6ce8\u610f\u5230\uff0cNULL \u4e0e 0\u3001\u7a7a\u5b57\u7b26\u4e32\u90fd\u4e0d\u540c\u3002</p> <p>AND \u548c OR \u7528\u4e8e\u8fde\u63a5\u591a\u4e2a\u8fc7\u6ee4\u6761\u4ef6\u3002\u4f18\u5148\u5904\u7406 AND\uff0c\u5f53\u4e00\u4e2a\u8fc7\u6ee4\u8868\u8fbe\u5f0f\u6d89\u53ca\u5230\u591a\u4e2a AND \u548c OR \u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528 () \u6765\u51b3\u5b9a\u4f18\u5148\u7ea7\uff0c\u4f7f\u5f97\u4f18\u5148\u7ea7\u5173\u7cfb\u66f4\u6e05\u6670\u3002</p> <p>IN \u64cd\u4f5c\u7b26\u7528\u4e8e\u5339\u914d\u4e00\u7ec4\u503c\uff0c\u5176\u540e\u4e5f\u53ef\u4ee5\u63a5\u4e00\u4e2a SELECT \u5b50\u53e5\uff0c\u4ece\u800c\u5339\u914d\u5b50\u67e5\u8be2\u5f97\u5230\u7684\u4e00\u7ec4\u503c\u3002</p> <p>NOT \u64cd\u4f5c\u7b26\u7528\u4e8e\u5426\u5b9a\u4e00\u4e2a\u6761\u4ef6\u3002</p>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#10","title":"10 \u5341\u3001\u901a\u914d\u7b26","text":"<p>\u901a\u914d\u7b26\u4e5f\u662f\u7528\u5728\u8fc7\u6ee4\u8bed\u53e5\u4e2d\uff0c\u4f46\u5b83\u53ea\u80fd\u7528\u4e8e\u6587\u672c\u5b57\u6bb5\u3002</p> <ul> <li><code>%</code> \u5339\u914d <code>&gt;=0</code> \u4e2a\u4efb\u610f\u5b57\u7b26\uff1b</li> <li><code>_</code> \u5339\u914d <code>==1</code> \u4e2a\u4efb\u610f\u5b57\u7b26\uff1b</li> <li><code>[ ]</code> \u53ef\u4ee5\u5339\u914d\u96c6\u5408\u5185\u7684\u5b57\u7b26\uff0c\u4f8b\u5982 <code>[ab]</code> \u5c06\u5339\u914d\u5b57\u7b26 a \u6216\u8005 b\u3002\u7528\u8131\u5b57\u7b26 <code>^</code> \u53ef\u4ee5\u5bf9\u5176\u8fdb\u884c\u5426\u5b9a\uff0c\u4e5f\u5c31\u662f\u4e0d\u5339\u914d\u96c6\u5408\u5185\u7684\u5b57\u7b26\u3002</li> </ul> <p>\u4f7f\u7528 Like \u6765\u8fdb\u884c\u901a\u914d\u7b26\u5339\u914d\u3002</p> <pre><code>SELECT *\nFROM mytable\nWHERE col LIKE '[^AB]%'; -- \u4e0d\u4ee5 A \u548c B \u5f00\u5934\u7684\u4efb\u610f\u6587\u672c\n</code></pre> <p>\u4e0d\u8981\u6ee5\u7528\u901a\u914d\u7b26\uff0c\u901a\u914d\u7b26\u4f4d\u4e8e\u5f00\u5934\u5904\u5339\u914d\u4f1a\u975e\u5e38\u6162\u3002</p>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#11","title":"11 \u5341\u4e00\u3001\u8ba1\u7b97\u5b57\u6bb5","text":"<p>\u5728\u6570\u636e\u5e93\u670d\u52a1\u5668\u4e0a\u5b8c\u6210\u6570\u636e\u7684\u8f6c\u6362\u548c\u683c\u5f0f\u5316\u7684\u5de5\u4f5c\u5f80\u5f80\u6bd4\u5ba2\u6237\u7aef\u4e0a\u5feb\u5f97\u591a\uff0c\u5e76\u4e14\u8f6c\u6362\u548c\u683c\u5f0f\u5316\u540e\u7684\u6570\u636e\u91cf\u66f4\u5c11\u7684\u8bdd\u53ef\u4ee5\u51cf\u5c11\u7f51\u7edc\u901a\u4fe1\u91cf\u3002</p> <p>\u8ba1\u7b97\u5b57\u6bb5\u901a\u5e38\u9700\u8981\u4f7f\u7528 AS \u6765\u53d6\u522b\u540d\uff0c\u5426\u5219\u8f93\u51fa\u7684\u65f6\u5019\u5b57\u6bb5\u540d\u4e3a\u8ba1\u7b97\u8868\u8fbe\u5f0f\u3002</p> <pre><code>SELECT col1 * col2 AS alias\nFROM mytable;\n</code></pre> <p>CONCAT() \u7528\u4e8e\u8fde\u63a5\u4e24\u4e2a\u5b57\u6bb5\u3002\u8bb8\u591a\u6570\u636e\u5e93\u4f1a\u4f7f\u7528\u7a7a\u683c\u628a\u4e00\u4e2a\u503c\u586b\u5145\u4e3a\u5217\u5bbd\uff0c\u56e0\u6b64\u8fde\u63a5\u7684\u7ed3\u679c\u4f1a\u51fa\u73b0\u4e00\u4e9b\u4e0d\u5fc5\u8981\u7684\u7a7a\u683c\uff0c\u4f7f\u7528 TRIM() \u53ef\u4ee5\u53bb\u9664\u9996\u5c3e\u7a7a\u683c\u3002</p> <pre><code>SELECT CONCAT(TRIM(col1), '(', TRIM(col2), ')') AS concat_col\nFROM mytable;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#12","title":"12 \u5341\u4e8c\u3001\u51fd\u6570","text":"<p>\u5404\u4e2a DBMS \u7684\u51fd\u6570\u90fd\u662f\u4e0d\u76f8\u540c\u7684\uff0c\u56e0\u6b64\u4e0d\u53ef\u79fb\u690d\uff0c\u4ee5\u4e0b\u4e3b\u8981\u662f MySQL \u7684\u51fd\u6570\u3002</p>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#121","title":"12.1 \u6c47\u603b","text":"\u51fd \u6570 \u8bf4 \u660e AVG() \u8fd4\u56de\u67d0\u5217\u7684\u5e73\u5747\u503c COUNT() \u8fd4\u56de\u67d0\u5217\u7684\u884c\u6570 MAX() \u8fd4\u56de\u67d0\u5217\u7684\u6700\u5927\u503c MIN() \u8fd4\u56de\u67d0\u5217\u7684\u6700\u5c0f\u503c SUM() \u8fd4\u56de\u67d0\u5217\u503c\u4e4b\u548c <p>AVG() \u4f1a\u5ffd\u7565 NULL \u884c\u3002</p> <p>\u4f7f\u7528 DISTINCT \u53ef\u4ee5\u6c47\u603b\u4e0d\u540c\u7684\u503c\u3002</p> <pre><code>SELECT AVG(DISTINCT col1) AS avg_col\nFROM mytable;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#122","title":"12.2 \u6587\u672c\u5904\u7406","text":"\u51fd\u6570 \u8bf4\u660e LEFT() \u5de6\u8fb9\u7684\u5b57\u7b26 RIGHT() \u53f3\u8fb9\u7684\u5b57\u7b26 LOWER() \u8f6c\u6362\u4e3a\u5c0f\u5199\u5b57\u7b26 UPPER() \u8f6c\u6362\u4e3a\u5927\u5199\u5b57\u7b26 LTRIM() \u53bb\u9664\u5de6\u8fb9\u7684\u7a7a\u683c RTRIM() \u53bb\u9664\u53f3\u8fb9\u7684\u7a7a\u683c LENGTH() \u957f\u5ea6 SOUNDEX() \u8f6c\u6362\u4e3a\u8bed\u97f3\u503c <p>\u5176\u4e2d\uff0c SOUNDEX() \u53ef\u4ee5\u5c06\u4e00\u4e2a\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u63cf\u8ff0\u5176\u8bed\u97f3\u8868\u793a\u7684\u5b57\u6bcd\u6570\u5b57\u6a21\u5f0f\u3002</p> <pre><code>SELECT *\nFROM mytable\nWHERE SOUNDEX(col1) = SOUNDEX('apple')\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#123","title":"12.3 \u65e5\u671f\u548c\u65f6\u95f4\u5904\u7406","text":"<ul> <li>\u65e5\u671f\u683c\u5f0f\uff1aYYYY-MM-DD</li> <li>\u65f6\u95f4\u683c\u5f0f\uff1aHH:\\&lt;zero-width space&gt;MM:SS</li> </ul> \u51fd \u6570 \u8bf4 \u660e ADDDATE() \u589e\u52a0\u4e00\u4e2a\u65e5\u671f\uff08\u5929\u3001\u5468\u7b49\uff09 ADDTIME() \u589e\u52a0\u4e00\u4e2a\u65f6\u95f4\uff08\u65f6\u3001\u5206\u7b49\uff09 CURDATE() \u8fd4\u56de\u5f53\u524d\u65e5\u671f CURTIME() \u8fd4\u56de\u5f53\u524d\u65f6\u95f4 DATE() \u8fd4\u56de\u65e5\u671f\u65f6\u95f4\u7684\u65e5\u671f\u90e8\u5206 DATEDIFF() \u8ba1\u7b97\u4e24\u4e2a\u65e5\u671f\u4e4b\u5dee DATE_ADD() \u9ad8\u5ea6\u7075\u6d3b\u7684\u65e5\u671f\u8fd0\u7b97\u51fd\u6570 DATE_FORMAT() \u8fd4\u56de\u4e00\u4e2a\u683c\u5f0f\u5316\u7684\u65e5\u671f\u6216\u65f6\u95f4\u4e32 DAY() \u8fd4\u56de\u4e00\u4e2a\u65e5\u671f\u7684\u5929\u6570\u90e8\u5206 DAYOFWEEK() \u5bf9\u4e8e\u4e00\u4e2a\u65e5\u671f\uff0c\u8fd4\u56de\u5bf9\u5e94\u7684\u661f\u671f\u51e0 HOUR() \u8fd4\u56de\u4e00\u4e2a\u65f6\u95f4\u7684\u5c0f\u65f6\u90e8\u5206 MINUTE() \u8fd4\u56de\u4e00\u4e2a\u65f6\u95f4\u7684\u5206\u949f\u90e8\u5206 MONTH() \u8fd4\u56de\u4e00\u4e2a\u65e5\u671f\u7684\u6708\u4efd\u90e8\u5206 NOW() \u8fd4\u56de\u5f53\u524d\u65e5\u671f\u548c\u65f6\u95f4 SECOND() \u8fd4\u56de\u4e00\u4e2a\u65f6\u95f4\u7684\u79d2\u90e8\u5206 TIME() \u8fd4\u56de\u4e00\u4e2a\u65e5\u671f\u65f6\u95f4\u7684\u65f6\u95f4\u90e8\u5206 YEAR() \u8fd4\u56de\u4e00\u4e2a\u65e5\u671f\u7684\u5e74\u4efd\u90e8\u5206 <pre><code>mysql&gt; SELECT NOW();\n</code></pre> <pre><code>2018-4-14 20:25:11\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#124","title":"12.4 \u6570\u503c\u5904\u7406","text":"\u51fd\u6570 \u8bf4\u660e SIN() \u6b63\u5f26 COS() \u4f59\u5f26 TAN() \u6b63\u5207 ABS() \u7edd\u5bf9\u503c SQRT() \u5e73\u65b9\u6839 MOD() \u4f59\u6570 EXP() \u6307\u6570 PI() \u5706\u5468\u7387 RAND() \u968f\u673a\u6570"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#13","title":"13 \u5341\u4e09\u3001\u5206\u7ec4","text":"<p>\u628a\u5177\u6709\u76f8\u540c\u7684\u6570\u636e\u503c\u7684\u884c\u653e\u5728\u540c\u4e00\u7ec4\u4e2d\u3002</p> <p>\u53ef\u4ee5\u5bf9\u540c\u4e00\u5206\u7ec4\u6570\u636e\u4f7f\u7528\u6c47\u603b\u51fd\u6570\u8fdb\u884c\u5904\u7406\uff0c\u4f8b\u5982\u6c42\u5206\u7ec4\u6570\u636e\u7684\u5e73\u5747\u503c\u7b49\u3002</p> <p>\u6307\u5b9a\u7684\u5206\u7ec4\u5b57\u6bb5\u9664\u4e86\u80fd\u6309\u8be5\u5b57\u6bb5\u8fdb\u884c\u5206\u7ec4\uff0c\u4e5f\u4f1a\u81ea\u52a8\u6309\u8be5\u5b57\u6bb5\u8fdb\u884c\u6392\u5e8f\u3002</p> <pre><code>SELECT col, COUNT(*) AS num\nFROM mytable\nGROUP BY col;\n</code></pre> <p>GROUP BY \u81ea\u52a8\u6309\u5206\u7ec4\u5b57\u6bb5\u8fdb\u884c\u6392\u5e8f\uff0cORDER BY \u4e5f\u53ef\u4ee5\u6309\u6c47\u603b\u5b57\u6bb5\u6765\u8fdb\u884c\u6392\u5e8f\u3002</p> <pre><code>SELECT col, COUNT(*) AS num\nFROM mytable\nGROUP BY col\nORDER BY num;\n</code></pre> <p>WHERE \u8fc7\u6ee4\u884c\uff0cHAVING \u8fc7\u6ee4\u5206\u7ec4\uff0c\u884c\u8fc7\u6ee4\u5e94\u5f53\u5148\u4e8e\u5206\u7ec4\u8fc7\u6ee4\u3002</p> <pre><code>SELECT col, COUNT(*) AS num\nFROM mytable\nWHERE col &gt; 2\nGROUP BY col\nHAVING num &gt;= 2;\n</code></pre> <p>\u5206\u7ec4\u89c4\u5b9a\uff1a</p> <ul> <li>GROUP BY \u5b50\u53e5\u51fa\u73b0\u5728 WHERE \u5b50\u53e5\u4e4b\u540e\uff0cORDER BY \u5b50\u53e5\u4e4b\u524d\uff1b</li> <li>\u9664\u4e86\u6c47\u603b\u5b57\u6bb5\u5916\uff0cSELECT \u8bed\u53e5\u4e2d\u7684\u6bcf\u4e00\u5b57\u6bb5\u90fd\u5fc5\u987b\u5728 GROUP BY \u5b50\u53e5\u4e2d\u7ed9\u51fa\uff1b</li> <li>NULL \u7684\u884c\u4f1a\u5355\u72ec\u5206\u4e3a\u4e00\u7ec4\uff1b</li> <li>\u5927\u591a\u6570 SQL \u5b9e\u73b0\u4e0d\u652f\u6301 GROUP BY \u5217\u5177\u6709\u53ef\u53d8\u957f\u5ea6\u7684\u6570\u636e\u7c7b\u578b\u3002</li> </ul>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#14","title":"14 \u5341\u56db\u3001\u5b50\u67e5\u8be2","text":"<p>\u5b50\u67e5\u8be2\u4e2d\u53ea\u80fd\u8fd4\u56de\u4e00\u4e2a\u5b57\u6bb5\u7684\u6570\u636e\u3002 \u53ef\u4ee5\u5c06\u5b50\u67e5\u8be2\u7684\u7ed3\u679c\u4f5c\u4e3a WHRER \u8bed\u53e5\u7684\u8fc7\u6ee4\u6761\u4ef6\uff1a</p> <pre><code>SELECT *\nFROM mytable1\nWHERE col1 IN (SELECT col2\nFROM mytable2);\n</code></pre> <p>\u4e0b\u9762\u7684\u8bed\u53e5\u53ef\u4ee5\u68c0\u7d22\u51fa\u5ba2\u6237\u7684\u8ba2\u5355\u6570\u91cf\uff0c\u5b50\u67e5\u8be2\u8bed\u53e5\u4f1a\u5bf9\u7b2c\u4e00\u4e2a\u67e5\u8be2\u68c0\u7d22\u51fa\u7684\u6bcf\u4e2a\u5ba2\u6237\u6267\u884c\u4e00\u6b21\uff1a</p> <pre><code>SELECT cust_name, (SELECT COUNT(*)\nFROM Orders\nWHERE Orders.cust_id = Customers.cust_id)\nAS orders_num\nFROM Customers\nORDER BY cust_name;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#15","title":"15 \u5341\u4e94\u3001\u8fde\u63a5","text":"<p>\u8fde\u63a5\u7528\u4e8e\u8fde\u63a5\u591a\u4e2a\u8868\uff0c\u4f7f\u7528 JOIN \u5173\u952e\u5b57\uff0c\u5e76\u4e14\u6761\u4ef6\u8bed\u53e5\u4f7f\u7528 ON \u800c\u4e0d\u662f WHERE\u3002</p> <p>\u8fde\u63a5\u53ef\u4ee5\u66ff\u6362\u5b50\u67e5\u8be2\uff0c\u5e76\u4e14\u6bd4\u5b50\u67e5\u8be2\u7684\u6548\u7387\u4e00\u822c\u4f1a\u66f4\u5feb\u3002</p> <p>\u53ef\u4ee5\u7528 AS \u7ed9\u5217\u540d\u3001\u8ba1\u7b97\u5b57\u6bb5\u548c\u8868\u540d\u53d6\u522b\u540d\uff0c\u7ed9\u8868\u540d\u53d6\u522b\u540d\u662f\u4e3a\u4e86\u7b80\u5316 SQL \u8bed\u53e5\u4ee5\u53ca\u8fde\u63a5\u76f8\u540c\u8868\u3002</p>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#151","title":"15.1 \u5185\u8fde\u63a5","text":"<p>\u5185\u8fde\u63a5\u53c8\u79f0\u7b49\u503c\u8fde\u63a5\uff0c\u4f7f\u7528 INNER JOIN \u5173\u952e\u5b57\u3002</p> <pre><code>SELECT A.value, B.value\nFROM tablea AS A INNER JOIN tableb AS B\nON A.key = B.key;\n</code></pre> <p>\u53ef\u4ee5\u4e0d\u660e\u786e\u4f7f\u7528 INNER JOIN\uff0c\u800c\u4f7f\u7528\u666e\u901a\u67e5\u8be2\u5e76\u5728 WHERE \u4e2d\u5c06\u4e24\u4e2a\u8868\u4e2d\u8981\u8fde\u63a5\u7684\u5217\u7528\u7b49\u503c\u65b9\u6cd5\u8fde\u63a5\u8d77\u6765\u3002</p> <pre><code>SELECT A.value, B.value\nFROM tablea AS A, tableb AS B\nWHERE A.key = B.key;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#152","title":"15.2 \u81ea\u8fde\u63a5","text":"<p>\u81ea\u8fde\u63a5\u53ef\u4ee5\u770b\u6210\u5185\u8fde\u63a5\u7684\u4e00\u79cd\uff0c\u53ea\u662f\u8fde\u63a5\u7684\u8868\u662f\u81ea\u8eab\u800c\u5df2\u3002</p> <p>\u4e00\u5f20\u5458\u5de5\u8868\uff0c\u5305\u542b\u5458\u5de5\u59d3\u540d\u548c\u5458\u5de5\u6240\u5c5e\u90e8\u95e8\uff0c\u8981\u627e\u51fa\u4e0e Jim \u5904\u5728\u540c\u4e00\u90e8\u95e8\u7684\u6240\u6709\u5458\u5de5\u59d3\u540d\u3002</p> <p>\u5b50\u67e5\u8be2\u7248\u672c</p> <pre><code>SELECT name\nFROM employee\nWHERE department = (\nSELECT department\nFROM employee\nWHERE name = \"Jim\");\n</code></pre> <p>\u81ea\u8fde\u63a5\u7248\u672c</p> <pre><code>SELECT e1.name\nFROM employee AS e1 INNER JOIN employee AS e2\nON e1.department = e2.department\nAND e2.name = \"Jim\";\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#153","title":"15.3 \u81ea\u7136\u8fde\u63a5","text":"<p>\u81ea\u7136\u8fde\u63a5\u662f\u628a\u540c\u540d\u5217\u901a\u8fc7\u7b49\u503c\u6d4b\u8bd5\u8fde\u63a5\u8d77\u6765\u7684\uff0c\u540c\u540d\u5217\u53ef\u4ee5\u6709\u591a\u4e2a\u3002</p> <p>\u5185\u8fde\u63a5\u548c\u81ea\u7136\u8fde\u63a5\u7684\u533a\u522b\uff1a\u5185\u8fde\u63a5\u63d0\u4f9b\u8fde\u63a5\u7684\u5217\uff0c\u800c\u81ea\u7136\u8fde\u63a5\u81ea\u52a8\u8fde\u63a5\u6240\u6709\u540c\u540d\u5217\u3002</p> <pre><code>SELECT A.value, B.value\nFROM tablea AS A NATURAL JOIN tableb AS B;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#154","title":"15.4 \u5916\u8fde\u63a5","text":"<p>\u5916\u8fde\u63a5\u4fdd\u7559\u4e86\u6ca1\u6709\u5173\u8054\u7684\u90a3\u4e9b\u884c\u3002\u5206\u4e3a\u5de6\u5916\u8fde\u63a5\uff0c\u53f3\u5916\u8fde\u63a5\u4ee5\u53ca\u5168\u5916\u8fde\u63a5\uff0c\u5de6\u5916\u8fde\u63a5\u5c31\u662f\u4fdd\u7559\u5de6\u8868\u6ca1\u6709\u5173\u8054\u7684\u884c\u3002</p> <p>\u68c0\u7d22\u6240\u6709\u987e\u5ba2\u7684\u8ba2\u5355\u4fe1\u606f\uff0c\u5305\u62ec\u8fd8\u6ca1\u6709\u8ba2\u5355\u4fe1\u606f\u7684\u987e\u5ba2\u3002</p> <pre><code>SELECT Customers.cust_id, Customer.cust_name, Orders.order_id\nFROM Customers LEFT OUTER JOIN Orders\nON Customers.cust_id = Orders.cust_id;\n</code></pre> <p>customers \u8868\uff1a</p> cust_id cust_name 1 a 2 b 3 c <p>orders \u8868\uff1a</p> order_id cust_id 1 1 2 1 3 3 4 3 <p>\u7ed3\u679c\uff1a</p> cust_id cust_name order_id 1 a 1 1 a 2 3 c 3 3 c 4 2 b Null"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#16","title":"16 \u5341\u516d\u3001\u7ec4\u5408\u67e5\u8be2","text":"<p>\u4f7f\u7528 UNION \u6765\u7ec4\u5408\u4e24\u4e2a\u67e5\u8be2\uff0c\u5982\u679c\u7b2c\u4e00\u4e2a\u67e5\u8be2\u8fd4\u56de M \u884c\uff0c\u7b2c\u4e8c\u4e2a\u67e5\u8be2\u8fd4\u56de N \u884c\uff0c\u90a3\u4e48\u7ec4\u5408\u67e5\u8be2\u7684\u7ed3\u679c\u4e00\u822c\u4e3a M+N \u884c\u3002</p> <p>\u6bcf\u4e2a\u67e5\u8be2\u5fc5\u987b\u5305\u542b\u76f8\u540c\u7684\u5217\u3001\u8868\u8fbe\u5f0f\u548c\u805a\u96c6\u51fd\u6570\u3002</p> <p>\u9ed8\u8ba4\u4f1a\u53bb\u9664\u76f8\u540c\u884c\uff0c\u5982\u679c\u9700\u8981\u4fdd\u7559\u76f8\u540c\u884c\uff0c\u4f7f\u7528 UNION ALL\u3002</p> <p>\u53ea\u80fd\u5305\u542b\u4e00\u4e2a ORDER BY \u5b50\u53e5\uff0c\u5e76\u4e14\u5fc5\u987b\u4f4d\u4e8e\u8bed\u53e5\u7684\u6700\u540e\u3002</p> <pre><code>SELECT col\nFROM mytable\nWHERE col = 1\nUNION\nSELECT col\nFROM mytable\nWHERE col =2;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#17","title":"17 \u5341\u4e03\u3001\u89c6\u56fe","text":"<p>\u89c6\u56fe\u662f\u865a\u62df\u7684\u8868\uff0c\u672c\u8eab\u4e0d\u5305\u542b\u6570\u636e\uff0c\u4e5f\u5c31\u4e0d\u80fd\u5bf9\u5176\u8fdb\u884c\u7d22\u5f15\u64cd\u4f5c\u3002</p> <p>\u5bf9\u89c6\u56fe\u7684\u64cd\u4f5c\u548c\u5bf9\u666e\u901a\u8868\u7684\u64cd\u4f5c\u4e00\u6837\u3002</p> <p>\u89c6\u56fe\u5177\u6709\u5982\u4e0b\u597d\u5904\uff1a</p> <ul> <li>\u7b80\u5316\u590d\u6742\u7684 SQL \u64cd\u4f5c\uff0c\u6bd4\u5982\u590d\u6742\u7684\u8fde\u63a5\uff1b</li> <li>\u53ea\u4f7f\u7528\u5b9e\u9645\u8868\u7684\u4e00\u90e8\u5206\u6570\u636e\uff1b</li> <li>\u901a\u8fc7\u53ea\u7ed9\u7528\u6237\u8bbf\u95ee\u89c6\u56fe\u7684\u6743\u9650\uff0c\u4fdd\u8bc1\u6570\u636e\u7684\u5b89\u5168\u6027\uff1b</li> <li>\u66f4\u6539\u6570\u636e\u683c\u5f0f\u548c\u8868\u793a\u3002</li> </ul> <pre><code>CREATE VIEW myview AS\nSELECT Concat(col1, col2) AS concat_col, col3*col4 AS compute_col\nFROM mytable\nWHERE col5 = val;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#18","title":"18 \u5341\u516b\u3001\u5b58\u50a8\u8fc7\u7a0b","text":"<p>\u5b58\u50a8\u8fc7\u7a0b\u53ef\u4ee5\u770b\u6210\u662f\u5bf9\u4e00\u7cfb\u5217 SQL \u64cd\u4f5c\u7684\u6279\u5904\u7406\u3002</p> <p>\u4f7f\u7528\u5b58\u50a8\u8fc7\u7a0b\u7684\u597d\u5904\uff1a</p> <ul> <li>\u4ee3\u7801\u5c01\u88c5\uff0c\u4fdd\u8bc1\u4e86\u4e00\u5b9a\u7684\u5b89\u5168\u6027\uff1b</li> <li>\u4ee3\u7801\u590d\u7528\uff1b</li> <li>\u7531\u4e8e\u662f\u9884\u5148\u7f16\u8bd1\uff0c\u56e0\u6b64\u5177\u6709\u5f88\u9ad8\u7684\u6027\u80fd\u3002</li> </ul> <p>\u547d\u4ee4\u884c\u4e2d\u521b\u5efa\u5b58\u50a8\u8fc7\u7a0b\u9700\u8981\u81ea\u5b9a\u4e49\u5206\u9694\u7b26\uff0c\u56e0\u4e3a\u547d\u4ee4\u884c\u662f\u4ee5 ; \u4e3a\u7ed3\u675f\u7b26\uff0c\u800c\u5b58\u50a8\u8fc7\u7a0b\u4e2d\u4e5f\u5305\u542b\u4e86\u5206\u53f7\uff0c\u56e0\u6b64\u4f1a\u9519\u8bef\u628a\u8fd9\u90e8\u5206\u5206\u53f7\u5f53\u6210\u662f\u7ed3\u675f\u7b26\uff0c\u9020\u6210\u8bed\u6cd5\u9519\u8bef\u3002</p> <p>\u5305\u542b in\u3001out \u548c inout \u4e09\u79cd\u53c2\u6570\u3002</p> <p>\u7ed9\u53d8\u91cf\u8d4b\u503c\u90fd\u9700\u8981\u7528 select into \u8bed\u53e5\u3002</p> <p>\u6bcf\u6b21\u53ea\u80fd\u7ed9\u4e00\u4e2a\u53d8\u91cf\u8d4b\u503c\uff0c\u4e0d\u652f\u6301\u96c6\u5408\u7684\u64cd\u4f5c\u3002</p> <pre><code>delimiter //\n\ncreate procedure myprocedure( out ret int )\nbegin\ndeclare y int;\nselect sum(col1)\nfrom mytable\ninto y;\nselect y*y into ret;\nend //\n\ndelimiter ;\n</code></pre> <pre><code>call myprocedure(@ret);\nselect @ret;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#19","title":"19 \u5341\u4e5d\u3001\u6e38\u6807","text":"<p>\u5728\u5b58\u50a8\u8fc7\u7a0b\u4e2d\u4f7f\u7528\u6e38\u6807\u53ef\u4ee5\u5bf9\u4e00\u4e2a\u7ed3\u679c\u96c6\u8fdb\u884c\u79fb\u52a8\u904d\u5386\u3002</p> <p>\u6e38\u6807\u4e3b\u8981\u7528\u4e8e\u4ea4\u4e92\u5f0f\u5e94\u7528\uff0c\u5176\u4e2d\u7528\u6237\u9700\u8981\u5bf9\u6570\u636e\u96c6\u4e2d\u7684\u4efb\u610f\u884c\u8fdb\u884c\u6d4f\u89c8\u548c\u4fee\u6539\u3002</p> <p>\u4f7f\u7528\u6e38\u6807\u7684\u56db\u4e2a\u6b65\u9aa4\uff1a</p> <ol> <li>\u58f0\u660e\u6e38\u6807\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u6ca1\u6709\u5b9e\u9645\u68c0\u7d22\u51fa\u6570\u636e\uff1b</li> <li>\u6253\u5f00\u6e38\u6807\uff1b</li> <li>\u53d6\u51fa\u6570\u636e\uff1b</li> <li>\u5173\u95ed\u6e38\u6807\uff1b</li> </ol> <pre><code>delimiter //\ncreate procedure myprocedure(out ret int)\nbegin\ndeclare done boolean default 0;\n\ndeclare mycursor cursor for\nselect col1 from mytable;\n# \u5b9a\u4e49\u4e86\u4e00\u4e2a continue handler\uff0c\u5f53 sqlstate '02000' \u8fd9\u4e2a\u6761\u4ef6\u51fa\u73b0\u65f6\uff0c\u4f1a\u6267\u884c set done = 1\ndeclare continue handler for sqlstate '02000' set done = 1;\n\nopen mycursor;\n\nrepeat\nfetch mycursor into ret;\nselect ret;\nuntil done end repeat;\n\nclose mycursor;\nend //\ndelimiter ;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#20","title":"20 \u4e8c\u5341\u3001\u89e6\u53d1\u5668","text":"<p>\u89e6\u53d1\u5668\u4f1a\u5728\u67d0\u4e2a\u8868\u6267\u884c\u4ee5\u4e0b\u8bed\u53e5\u65f6\u800c\u81ea\u52a8\u6267\u884c\uff1aDELETE\u3001INSERT\u3001UPDATE\u3002</p> <p>\u89e6\u53d1\u5668\u5fc5\u987b\u6307\u5b9a\u5728\u8bed\u53e5\u6267\u884c\u4e4b\u524d\u8fd8\u662f\u4e4b\u540e\u81ea\u52a8\u6267\u884c\uff0c\u4e4b\u524d\u6267\u884c\u4f7f\u7528 BEFORE \u5173\u952e\u5b57\uff0c\u4e4b\u540e\u6267\u884c\u4f7f\u7528 AFTER \u5173\u952e\u5b57\u3002BEFORE \u7528\u4e8e\u6570\u636e\u9a8c\u8bc1\u548c\u51c0\u5316\uff0cAFTER \u7528\u4e8e\u5ba1\u8ba1\u8ddf\u8e2a\uff0c\u5c06\u4fee\u6539\u8bb0\u5f55\u5230\u53e6\u5916\u4e00\u5f20\u8868\u4e2d\u3002</p> <p>INSERT \u89e6\u53d1\u5668\u5305\u542b\u4e00\u4e2a\u540d\u4e3a NEW \u7684\u865a\u62df\u8868\u3002</p> <pre><code>CREATE TRIGGER mytrigger AFTER INSERT ON mytable\nFOR EACH ROW SELECT NEW.col into @result;\n\nSELECT @result; -- \u83b7\u53d6\u7ed3\u679c\n</code></pre> <p>DELETE \u89e6\u53d1\u5668\u5305\u542b\u4e00\u4e2a\u540d\u4e3a OLD \u7684\u865a\u62df\u8868\uff0c\u5e76\u4e14\u662f\u53ea\u8bfb\u7684\u3002</p> <p>UPDATE \u89e6\u53d1\u5668\u5305\u542b\u4e00\u4e2a\u540d\u4e3a NEW \u548c\u4e00\u4e2a\u540d\u4e3a OLD \u7684\u865a\u62df\u8868\uff0c\u5176\u4e2d NEW \u662f\u53ef\u4ee5\u88ab\u4fee\u6539\u7684\uff0c\u800c OLD \u662f\u53ea\u8bfb\u7684\u3002</p> <p>MySQL \u4e0d\u5141\u8bb8\u5728\u89e6\u53d1\u5668\u4e2d\u4f7f\u7528 CALL \u8bed\u53e5\uff0c\u4e5f\u5c31\u662f\u4e0d\u80fd\u8c03\u7528\u5b58\u50a8\u8fc7\u7a0b\u3002</p>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#21","title":"21 \u4e8c\u5341\u4e00\u3001\u4e8b\u52a1\u7ba1\u7406","text":"<p>\u57fa\u672c\u672f\u8bed\uff1a</p> <ul> <li>\u4e8b\u52a1\uff08transaction\uff09\u6307\u4e00\u7ec4 SQL \u8bed\u53e5\uff1b</li> <li>\u56de\u9000\uff08rollback\uff09\u6307\u64a4\u9500\u6307\u5b9a SQL \u8bed\u53e5\u7684\u8fc7\u7a0b\uff1b</li> <li>\u63d0\u4ea4\uff08commit\uff09\u6307\u5c06\u672a\u5b58\u50a8\u7684 SQL \u8bed\u53e5\u7ed3\u679c\u5199\u5165\u6570\u636e\u5e93\u8868\uff1b</li> <li>\u4fdd\u7559\u70b9\uff08savepoint\uff09\u6307\u4e8b\u52a1\u5904\u7406\u4e2d\u8bbe\u7f6e\u7684\u4e34\u65f6\u5360\u4f4d\u7b26\uff08placeholder\uff09\uff0c\u4f60\u53ef\u4ee5\u5bf9\u5b83\u53d1\u5e03\u56de\u9000\uff08\u4e0e\u56de\u9000\u6574\u4e2a\u4e8b\u52a1\u5904\u7406\u4e0d\u540c\uff09\u3002</li> </ul> <p>\u4e0d\u80fd\u56de\u9000 SELECT \u8bed\u53e5\uff0c\u56de\u9000 SELECT \u8bed\u53e5\u4e5f\u6ca1\u610f\u4e49\uff1b\u4e5f\u4e0d\u80fd\u56de\u9000 CREATE \u548c DROP \u8bed\u53e5\u3002</p> <p>MySQL \u7684\u4e8b\u52a1\u63d0\u4ea4\u9ed8\u8ba4\u662f\u9690\u5f0f\u63d0\u4ea4\uff0c\u6bcf\u6267\u884c\u4e00\u6761\u8bed\u53e5\u5c31\u628a\u8fd9\u6761\u8bed\u53e5\u5f53\u6210\u4e00\u4e2a\u4e8b\u52a1\u7136\u540e\u8fdb\u884c\u63d0\u4ea4\u3002\u5f53\u51fa\u73b0 START TRANSACTION \u8bed\u53e5\u65f6\uff0c\u4f1a\u5173\u95ed\u9690\u5f0f\u63d0\u4ea4\uff1b\u5f53 COMMIT \u6216 ROLLBACK \u8bed\u53e5\u6267\u884c\u540e\uff0c\u4e8b\u52a1\u4f1a\u81ea\u52a8\u5173\u95ed\uff0c\u91cd\u65b0\u6062\u590d\u9690\u5f0f\u63d0\u4ea4\u3002</p> <p>\u8bbe\u7f6e autocommit \u4e3a 0 \u53ef\u4ee5\u53d6\u6d88\u81ea\u52a8\u63d0\u4ea4\uff1bautocommit \u6807\u8bb0\u662f\u9488\u5bf9\u6bcf\u4e2a\u8fde\u63a5\u800c\u4e0d\u662f\u9488\u5bf9\u670d\u52a1\u5668\u7684\u3002</p> <p>\u5982\u679c\u6ca1\u6709\u8bbe\u7f6e\u4fdd\u7559\u70b9\uff0cROLLBACK \u4f1a\u56de\u9000\u5230 START TRANSACTION \u8bed\u53e5\u5904\uff1b\u5982\u679c\u8bbe\u7f6e\u4e86\u4fdd\u7559\u70b9\uff0c\u5e76\u4e14\u5728 ROLLBACK \u4e2d\u6307\u5b9a\u8be5\u4fdd\u7559\u70b9\uff0c\u5219\u4f1a\u56de\u9000\u5230\u8be5\u4fdd\u7559\u70b9\u3002</p> <pre><code>START TRANSACTION\n// ...\nSAVEPOINT delete1\n// ...\nROLLBACK TO delete1\n// ...\nCOMMIT\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#22","title":"22 \u4e8c\u5341\u4e8c\u3001\u5b57\u7b26\u96c6","text":"<p>\u57fa\u672c\u672f\u8bed\uff1a</p> <ul> <li>\u5b57\u7b26\u96c6\u4e3a\u5b57\u6bcd\u548c\u7b26\u53f7\u7684\u96c6\u5408\uff1b</li> <li>\u7f16\u7801\u4e3a\u67d0\u4e2a\u5b57\u7b26\u96c6\u6210\u5458\u7684\u5185\u90e8\u8868\u793a\uff1b</li> <li>\u6821\u5bf9\u5b57\u7b26\u6307\u5b9a\u5982\u4f55\u6bd4\u8f83\uff0c\u4e3b\u8981\u7528\u4e8e\u6392\u5e8f\u548c\u5206\u7ec4\u3002</li> </ul> <p>\u9664\u4e86\u7ed9\u8868\u6307\u5b9a\u5b57\u7b26\u96c6\u548c\u6821\u5bf9\u5916\uff0c\u4e5f\u53ef\u4ee5\u7ed9\u5217\u6307\u5b9a\uff1a</p> <pre><code>CREATE TABLE mytable\n(col VARCHAR(10) CHARACTER SET latin COLLATE latin1_general_ci )\nDEFAULT CHARACTER SET hebrew COLLATE hebrew_general_ci;\n</code></pre> <p>\u53ef\u4ee5\u5728\u6392\u5e8f\u3001\u5206\u7ec4\u65f6\u6307\u5b9a\u6821\u5bf9\uff1a</p> <pre><code>SELECT *\nFROM mytable\nORDER BY col COLLATE latin1_general_ci;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#23","title":"23 \u4e8c\u5341\u4e09\u3001\u6743\u9650\u7ba1\u7406","text":"<p>MySQL \u7684\u8d26\u6237\u4fe1\u606f\u4fdd\u5b58\u5728 mysql \u8fd9\u4e2a\u6570\u636e\u5e93\u4e2d\u3002</p> <pre><code>USE mysql;\nSELECT user FROM user;\n</code></pre> <p>\u521b\u5efa\u8d26\u6237 </p> <p>\u65b0\u521b\u5efa\u7684\u8d26\u6237\u6ca1\u6709\u4efb\u4f55\u6743\u9650\u3002</p> <pre><code>CREATE USER myuser IDENTIFIED BY 'mypassword';\n</code></pre> <p>\u4fee\u6539\u8d26\u6237\u540d </p> <pre><code>RENAME USER myuser TO newuser;\n</code></pre> <p>\u5220\u9664\u8d26\u6237 </p> <pre><code>DROP USER myuser;\n</code></pre> <p>\u67e5\u770b\u6743\u9650 </p> <pre><code>SHOW GRANTS FOR myuser;\n</code></pre> <p>\u6388\u4e88\u6743\u9650 </p> <p>\u8d26\u6237\u7528 username@host \u7684\u5f62\u5f0f\u5b9a\u4e49\uff0cusername@% \u4f7f\u7528\u7684\u662f\u9ed8\u8ba4\u4e3b\u673a\u540d\u3002</p> <pre><code>GRANT SELECT, INSERT ON mydatabase.* TO myuser;\n</code></pre> <p>\u5220\u9664\u6743\u9650 </p> <p>GRANT \u548c REVOKE \u53ef\u5728\u51e0\u4e2a\u5c42\u6b21\u4e0a\u63a7\u5236\u8bbf\u95ee\u6743\u9650\uff1a</p> <ul> <li>\u6574\u4e2a\u670d\u52a1\u5668\uff0c\u4f7f\u7528 GRANT ALL \u548c REVOKE ALL\uff1b</li> <li>\u6574\u4e2a\u6570\u636e\u5e93\uff0c\u4f7f\u7528 ON database.*\uff1b</li> <li>\u7279\u5b9a\u7684\u8868\uff0c\u4f7f\u7528 ON database.table\uff1b</li> <li>\u7279\u5b9a\u7684\u5217\uff1b</li> <li>\u7279\u5b9a\u7684\u5b58\u50a8\u8fc7\u7a0b\u3002</li> </ul> <pre><code>REVOKE SELECT, INSERT ON mydatabase.* FROM myuser;\n</code></pre> <p>\u66f4\u6539\u5bc6\u7801 </p> <p>\u5fc5\u987b\u4f7f\u7528 Password() \u51fd\u6570\u8fdb\u884c\u52a0\u5bc6\u3002</p> <pre><code>SET PASSWROD FOR myuser = Password('new_password');\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/SQL%20%E8%AF%AD%E6%B3%95/#24","title":"24 \u53c2\u8003\u8d44\u6599","text":"<ul> <li>BenForta. SQL \u5fc5\u77e5\u5fc5\u4f1a [M]. \u4eba\u6c11\u90ae\u7535\u51fa\u7248\u793e, 2013.</li> </ul>"},{"location":"Documents/B-Programming%20Language/SQL/SQL/","title":"SQL","text":""},{"location":"Documents/B-Programming%20Language/SQL/SQL/#1","title":"1 \u5206\u5e93\u5206\u8868","text":"<p>\u4e0d\u7ba1\u662f\u5206\u5e93\u8fd8\u662f\u5206\u8868\uff0c\u90fd\u6709\u4e24\u79cd\u5207\u5206\u65b9\u5f0f\uff1a\u6c34\u5e73\u5207\u5206\u548c\u5782\u76f4\u5207\u5206\u3002</p>"},{"location":"Documents/B-Programming%20Language/SQL/SQL/#11","title":"1.1 \u4e3a\u4ec0\u4e48\u8981\u5206\u5e93\u5206\u8868","text":"<ul> <li>\u5206\u5e93\uff1a\u5355\u5e93\u652f\u6301\u7684\u5e76\u53d1\u6570\uff08\u6839\u636e\u7ecf\u9a8c 2000\uff09\u6709\u9650</li> <li>\u5206\u8868\uff1a\u5355\u8868\u6570\u636e\u91cf\u592a\u5927\uff0c\u4f1a\u6781\u5927\u5f71\u54cd\u4f60\u7684 sql \u6267\u884c\u7684\u6027\u80fd</li> </ul>"},{"location":"Documents/B-Programming%20Language/SQL/SQL/#12","title":"1.2 \u5206\u8868","text":"<p>\uff081\uff09\u5782\u76f4\u5206\u8868</p> <p>\u8868\u4e2d\u7684\u5b57\u6bb5\u8f83\u591a\uff0c\u4e00\u822c\u5c06\u4e0d\u5e38\u7528\u7684\u3001 \u6570\u636e\u8f83\u5927\u3001\u957f\u5ea6\u8f83\u957f\u7684\u62c6\u5206\u5230\u201c\u6269\u5c55\u8868\u201c\u3002\u4e00\u822c\u60c5\u51b5\u52a0\u8868\u7684\u5b57\u6bb5\u53ef\u80fd\u6709\u51e0\u767e\u5217\uff0c\u6b64\u65f6\u662f\u6309\u7167\u5b57\u6bb5\u8fdb\u884c\u6570\u7ad6\u76f4\u5207\u3002\u6ce8\u610f\u5782\u76f4\u5206\u662f\u5217\u591a\u7684\u60c5\u51b5\u3002</p> <p>\uff082\uff09\u6c34\u5e73\u5206\u8868</p> <p>\u5355\u8868\u7684\u6570\u636e\u91cf\u592a\u5927\u3002\u6309\u7167\u67d0\u79cd\u89c4\u5219\uff08RANGE,HASH\u53d6\u6a21\u7b49\uff09\uff0c\u5207\u5206\u5230\u591a\u5f20\u8868\u91cc\u9762\u53bb\u3002 \u4f46\u662f\u8fd9\u4e9b\u8868\u8fd8\u662f\u5728\u540c\u4e00\u4e2a\u5e93\u4e2d\uff0c\u6240\u4ee5\u5e93\u7ea7\u522b\u7684\u6570\u636e\u5e93\u64cd\u4f5c\u8fd8\u662f\u6709IO\u74f6\u9888\u3002\u8fd9\u79cd\u60c5\u51b5\u662f\u4e0d\u5efa\u8bae\u4f7f\u7528\u7684\uff0c\u56e0\u4e3a\u6570\u636e\u91cf\u662f\u9010\u6e10\u589e\u52a0\u7684\uff0c\u5f53\u6570\u636e\u91cf\u589e\u52a0\u5230\u4e00\u5b9a\u7684\u7a0b\u5ea6\u8fd8\u9700\u8981\u518d\u8fdb\u884c\u5207\u5206\u3002\u6bd4\u8f83\u9ebb\u70e6\u3002</p>"},{"location":"Documents/B-Programming%20Language/SQL/SQL/#13","title":"1.3 \u5206\u5e93","text":"<p>\uff081\uff09\u5782\u76f4\u5206\u5e93</p> <p>\u4e00\u4e2a\u6570\u636e\u5e93\u7684\u8868\u592a\u591a\u3002\u6b64\u65f6\u5c31\u4f1a\u6309\u7167\u4e00\u5b9a\u4e1a\u52a1\u903b\u8f91\u8fdb\u884c\u5782\u76f4\u5207\uff0c\u6bd4\u5982\u7528\u6237\u76f8\u5173\u7684\u8868\u653e\u5728\u4e00\u4e2a\u6570\u636e\u5e93\u91cc\uff0c\u8ba2\u5355\u76f8\u5173\u7684\u8868\u653e\u5728\u4e00\u4e2a\u6570\u636e\u5e93\u91cc\u3002\u6ce8\u610f\u6b64\u65f6\u4e0d\u540c\u7684\u6570\u636e\u5e93\u5e94\u8be5\u5b58\u653e\u5728\u4e0d\u540c\u7684\u670d\u52a1\u5668\u4e0a\uff0c\u6b64\u65f6\u78c1\u76d8\u7a7a\u95f4\u3001\u5185\u5b58\u3001TPS\u7b49\u7b49\u90fd\u4f1a\u5f97\u5230\u89e3\u51b3\u3002</p> <p>\uff082\uff09\u6c34\u5e73\u5206\u5e93</p> <p>\u6c34\u5e73\u5206\u5e93\u7406\u8bba\u4e0a\u5207\u5206\u8d77\u6765\u662f\u6bd4\u8f83\u9ebb\u70e6\u7684\uff0c\u5b83\u662f\u6307\u5c06\u5355\u5f20\u8868\u7684\u6570\u636e\u5207\u5206\u5230\u591a\u4e2a\u670d\u52a1\u5668\u4e0a\u53bb\uff0c\u6bcf\u4e2a\u670d\u52a1\u5668\u5177\u6709\u76f8\u5e94\u7684\u5e93\u4e0e\u8868\uff0c\u53ea\u662f\u8868\u4e2d\u6570\u636e\u96c6\u5408\u4e0d\u540c\u3002 \u6c34\u5e73\u5206\u5e93\u5206\u8868\u80fd\u591f\u6709\u6548\u7684\u7f13\u89e3\u5355\u673a\u548c\u5355\u5e93\u7684\u6027\u80fd\u74f6\u9888\u548c\u538b\u529b\uff0c\u7a81\u7834IO\u3001\u8fde\u63a5\u6570\u3001\u786c\u4ef6\u8d44\u6e90\u7b49\u7684\u74f6\u9888\u3002</p>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/","title":"mysql","text":"<p>SQL(Structured Query Language)\u7ed3\u6784\u5316\u67e5\u8be2\u8bed\u8a00,\u8bed\u8a00\u52063\u4e2a\u90e8\u5206\uff0c\u5982\u4e0b\uff1a - \u6570\u636e\u5b9a\u4e49\u8bed\u8a00(Data Definition Language,\u7b80\u79f0DDL)\uff0c\u5982\u521b\u5efa\u5220\u9664\u8868\u3001\u89c6\u56fe   - DROP\uff1a\u5220\u9664\u6570\u636e\u5e93\u548c\u8868\u7b49\u5bf9\u8c61   - CREATE\uff1a\u521b\u5efa\u6570\u636e\u5e93\u548c\u8868\u7b49\u5bf9\u8c61   - ALTER\uff1a\u4fee\u6539\u6570\u636e\u5e93\u548c\u8868\u7b49\u5bf9\u8c61\u7684\u7ed3\u6784 - \u6570\u636e\u64cd\u4f5c\u8bed\u8a00(Data Manipulation Language,\u7b80\u79f0DML),\u5982\u67e5\u8be2\u3001\u63d2\u5165\u3001\u5220\u9664\u3001\u66f4\u65b0\u6570\u636e   - SELECT\uff1a\u67e5\u8be2\u8868\u4e2d\u7684\u6570\u636e   - INSERT\uff1a\u5411\u8868\u4e2d\u63d2\u5165\u65b0\u6570\u636e   - UPDATE\uff1a\u66f4\u65b0\u8868\u4e2d\u7684\u6570\u636e   - DELETE\uff1a\u5220\u9664\u8868\u4e2d\u7684\u6570\u636e - \u6570\u636e\u63a7\u5236\u8bed\u8a00(Data Contral Language,\u7b80\u79f0DCL),\u5982\u63a7\u5236\u7528\u6237\u8bbf\u95ee\u6743\u9650\uff0c   - GRANT\uff1a\u8d4b\u4e88\u7528\u6237\u64cd\u4f5c\u6743\u9650   - REVOKE\uff1a\u53d6\u6d88\u7528\u6237\u7684\u64cd\u4f5c\u6743\u9650   - COMMIT\uff1a\u786e\u8ba4\u5bf9\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u8fdb\u884c\u7684\u53d8\u66f4   - ROLLBACK\uff1a\u53d6\u6d88\u5bf9\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u8fdb\u884c\u7684\u53d8\u66f4</p> <pre><code>- SQL\u8bed\u6cd5\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff0c\u5982\uff0c\u5173\u952e\u5b57create,\u6570\u636e\u5e93\u540d\u3001\u8868\u540d\u548c\u5217\u540d\uff1b\n- \u63d2\u5165\u7684\u6570\u636e\u662f\u533a\u5206\u5927\u5c0f\u5199\u7684\n- SQL\u8bed\u53e5\u4ee5\u5206\u53f7`;`\u7ed3\u5c3e\uff0c\u53ef\u4ee5\u591a\u884c\u8f93\u5165\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#1","title":"1 \u6570\u636e\u5e93","text":""},{"location":"Documents/B-Programming%20Language/SQL/mysql/#11","title":"1.1 \u767b\u5f55\u6570\u636e\u5e93","text":"<ul> <li>\u5173\u952e\u5b57</li> <li><code>mysql</code></li> <li><code>-h</code>\u6307\u5b9a\u670d\u52a1\u5668IP\u5730\u5740\uff0c\u672c\u5730<code>127.0.0.1</code></li> <li><code>-u</code>\u6307\u5b9a\u6570\u636e\u5e93\u7528\u6237\u540d\uff0c\u5982<code>root</code></li> <li><code>-P</code>\u6307\u5b9amysql\u670d\u52a1\u7aef\u53e3\u53f7\uff0c\u9ed8\u8ba43306</li> <li><code>-p</code>\u6307\u5b9a\u6570\u636e\u5e93\u5bc6\u7801</li> <li>\u8bed\u6cd5</li> </ul> <pre><code>mysql -h 127.0.0.1 -u root -p\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql -u root -p\nEnter password: ******\nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 20\nServer version: 8.0.23 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql&gt;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#12","title":"1.2 \u663e\u793a\u6570\u636e\u5e93","text":"<ul> <li>\u5173\u952e\u5b57</li> <li><code>show</code></li> <li><code>databases</code></li> <li>\u8bed\u6cd5</li> </ul> <pre><code>show databases;\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; show databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| mysql              |\n| performance_schema |\n| sakila             |\n| sys                |\n| world              |\n+--------------------+\n6 rows in set (0.10 sec)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#13","title":"1.3 \u521b\u5efa\u6570\u636e\u5e93","text":"<ul> <li>\u5173\u952e\u5b57</li> <li><code>create</code></li> <li><code>database</code></li> <li>\u8bed\u6cd5</li> </ul> <pre><code>create database \u6570\u636e\u5e93\u540d;\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; create database test_db;\nQuery OK, 1 row affected (0.09 sec)\n\nmysql&gt; show databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| mysql              |\n| performance_schema |\n| sakila             |\n| sys                |\n| test_db            |\n| world              |\n+--------------------+\n7 rows in set (0.00 sec)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#14","title":"1.4 \u5220\u9664\u6570\u636e\u5e93","text":"<ul> <li>\u5173\u952e\u5b57</li> <li><code>drop</code></li> <li><code>database</code></li> <li>\u8bed\u6cd5</li> </ul> <pre><code>drop database \u6570\u636e\u5e93\u540d;\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; drop database test_db;\nQuery OK, 0 rows affected (0.14 sec)\n\nmysql&gt; show databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| mysql              |\n| performance_schema |\n| sakila             |\n| sys                |\n| world              |\n+--------------------+\n6 rows in set (0.00 sec)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#15","title":"1.5 \u4f7f\u7528\u6570\u636e\u5e93","text":"<ul> <li>\u5173\u952e\u5b57</li> <li><code>use</code></li> <li>\u8bed\u6cd5</li> </ul> <pre><code>use \u6570\u636e\u5e93\u540d;\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; use test_db\nDatabase changed\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#16","title":"1.6 \u5907\u4efd\u6570\u636e\u5e93","text":""},{"location":"Documents/B-Programming%20Language/SQL/mysql/#161-mysqldump","title":"1.6.1 mysqldump","text":"<ul> <li>\u539f\u7406\uff1a\u5c06\u5f85\u5907\u4efd\u6570\u636e\u5e93\u7684\u8868\u7ed3\u6784\uff0c\u6570\u636e\u5185\u5bb9\u8f6c\u6210sql\u8bed\u53e5\u5b58\u50a8\uff1b\u8fd8\u539f\u6570\u636e\u65f6\u6309\u987a\u5e8f\u6267\u884c\u5907\u4efd\u6587\u672c\u4e2d\u7684sql\u8bed\u53e5\u3002</li> </ul>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#162","title":"1.6.2 \u65b9\u5f0f\u4e00\uff1a\u5907\u4efd\u5355\u4e2a\u6570\u636e\u5e93\u4e2d\u7684\u6307\u5b9a\u7684\u8868","text":"<ul> <li>\u8bed\u6cd5</li> </ul> <pre><code>mysqldump [-h \u670d\u52a1\u5668IP] -u \u7528\u6237\u540d -p \u6570\u636e\u5e93\u540d [\u8868\u540d,...,\u8868\u540d] &gt; \u5907\u4efd\u6587\u4ef6\u540d\n- \u4e3b\u8981\u4e8b\u9879\uff1a\n- \u8868\u540d\u7701\u7565\u65f6\uff0c\u8868\u793a\u5907\u4efd\u6574\u4e2a\u6570\u636e\u5e93\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>C:\\Users\\shuhaiwen&gt;mysqldump -u root -p test_db &gt;2.sql\nEnter password: ******\n</code></pre> <p>::: warning 1. \u8bed\u53e5\u540e\u4e0d\u8981\u52a0\u7ed3\u675f\u7b26<code>;</code> 2. \u5907\u4efd\u65f6\u4e0d\u8981\u8fdb\u5165\u6570\u636e\u5e93\u4e2d :::</p>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#163","title":"1.6.3 \u65b9\u5f0f\u4e8c\uff1a\u5907\u4efd\u591a\u4e2a\u6570\u636e\u5e93","text":"<ul> <li>\u8bed\u6cd5</li> </ul> <pre><code>mysqldump [-h \u670d\u52a1\u5668IP] -u \u7528\u6237\u540d -p --databases \u6570\u636e\u5e93\u540d [\u6570\u636e\u5e93\u540d...] &gt; \u5907\u4efd\u6587\u4ef6\u540d\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>C:\\Users\\shuhaiwen&gt;mysqldump -u root -p --databases test_db &gt;D:\\1.sql\nEnter password: ******\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#164","title":"1.6.4 \u65b9\u5f0f\u4e09\uff1a\u5907\u4efd\u6240\u6709\u6570\u636e\u5e93","text":"<ul> <li>\u8bed\u6cd5</li> </ul> <pre><code>mysqldump -u \u7528\u6237\u540d -p --all-databases &gt; \u5907\u4efd\u6587\u4ef6\u540d\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>mysqldump -u root -p --all_databases &gt;D:\\all.sql\nEnter password: ******\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#17","title":"1.7 \u8fd8\u539f\u5907\u4efd\u6570\u636e\u5e93","text":"<ul> <li>\u8bed\u6cd5</li> </ul> <pre><code>mysql -u \u7528\u6237\u540d -p [\u6570\u636e\u5e93\u540d] &lt; \u5907\u4efd\u6570\u636e\u5e93\u540d\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql -u root -p test_db &lt;D:\\1.sql\nEnter password: ******\n</code></pre> <p>::: warning \u5f53\u4e0d\u6307\u5b9a\u6570\u636e\u5e93\u540d\u65f6\uff0c\u5907\u4efd\u7684\u6587\u4ef6\u4e2d\u9700\u8981\u6709\u521b\u5efa\u6570\u636e\u5e93\u8bed\u53e5\u3002\u6bd4\u5982\u901a\u8fc7\u5907\u4efd\u6570\u636e\u5e93\u65b9\u6cd5\u4e2d\u7684\u65b9\u6cd5\u4e8c\u548c\u65b9\u6cd5\u4e09\u5907\u4efd\u7684\u6587\u4ef6\u4e2d\u5c31\u542b\u6709\u521b\u5efa\u6570\u636e\u5e93\u8bed\u53e5\u3002 :::</p>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#18","title":"1.8 \u67e5\u770b\u6570\u636e\u5e93\u652f\u6301\u5f15\u64ce","text":"<ul> <li>\u5173\u952e\u5b57</li> <li><code>show</code></li> <li><code>engines</code></li> <li>\u8bed\u6cd5</li> </ul> <pre><code>show engines;\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; show engines;\n+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+\n| Engine             | Support | Comment                                                        | Transactions | XA   | Savepoints |\n+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+\n| MEMORY             | YES     | Hash based, stored in memory, useful for temporary tables      | NO           | NO   | NO         |\n| MRG_MYISAM         | YES     | Collection of identical MyISAM tables                          | NO           | NO   | NO         |\n| CSV                | YES     | CSV storage engine                                             | NO           | NO   | NO         |\n| FEDERATED          | NO      | Federated MySQL storage engine                                 | NULL         | NULL | NULL       |\n| PERFORMANCE_SCHEMA | YES     | Performance Schema                                             | NO           | NO   | NO         |\n| MyISAM             | YES     | MyISAM storage engine                                          | NO           | NO   | NO         |\n| InnoDB             | DEFAULT | Supports transactions, row-level locking, and foreign keys     | YES          | YES  | YES        |\n| BLACKHOLE          | YES     | /dev/null storage engine (anything you write to it disappears) | NO           | NO   | NO         |\n| ARCHIVE            | YES     | Archive storage engine                                         | NO           | NO   | NO         |\n+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#2","title":"2 \u8d26\u53f7\u7ba1\u7406","text":""},{"location":"Documents/B-Programming%20Language/SQL/mysql/#21","title":"2.1 \u65b0\u5efa\u7528\u6237","text":"<ul> <li>\u4f7f\u7528<code>create user</code>\u547d\u4ee4\uff1a</li> <li>\u5173\u952e\u5b57</li> <li><code>create user</code>:\u521b\u5efa\u7528\u6237</li> <li><code>identified by</code>:\u6307\u5b9a\u8bbe\u7f6e\u5bc6\u7801</li> <li><code>password</code>:\u6307\u5b9a\u5bc6\u7801\uff0c\u5f53\u5bc6\u7801\u4e0d\u662f\u7279\u6b8a\u5b57\u7b26\u53ef\u4ee5\u7701\u7565</li> <li>\u8bed\u6cd5:</li> </ul> <pre><code>create user \u65b0\u7528\u6237\u540d [identified by [password] '\u5bc6\u7801'];\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; create user 'test'@'localhost' identified by '123456';\nQuery OK, 0 rows affected (0.11 sec)\nmysql&gt; use mysql\nDatabase changed\nmysql&gt; select User,Host from user;\n+------------------+-----------+\n| User             | Host      |\n+------------------+-----------+\n| mysql.infoschema | localhost |\n| mysql.session    | localhost |\n| mysql.sys        | localhost |\n| root             | localhost |\n| test             | localhost |\n+------------------+-----------+\n5 rows in set (0.00 sec)\n</code></pre> <p>::: tip 1. \u65b0\u7528\u6237\u53ef\u4ee5\u6ca1\u6709\u5bc6\u7801 :::</p>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#22","title":"2.2 \u5220\u9664\u7528\u6237","text":"<ul> <li>\u4f7f\u7528<code>drop</code>\u547d\u4ee4</li> <li>\u8bed\u6cd5</li> </ul> <pre><code>drop user \u7528\u6237\u540d\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; drop user 'test'@'localhost';\nQuery OK, 0 rows affected (0.16 sec)\n\nmysql&gt; use mysql\nDatabase changed\nmysql&gt; select User from user;\n+------------------+\n| User             |\n+------------------+\n| mysql.infoschema |\n| mysql.session    |\n| mysql.sys        |\n| root             |\n+------------------+\n4 rows in set (0.00 sec)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#3","title":"3 \u8868","text":""},{"location":"Documents/B-Programming%20Language/SQL/mysql/#31","title":"3.1 \u5b8c\u6574\u6027\u7ea6\u675f\u6761\u4ef6","text":"\u5b8c\u6574\u6027\u7ea6\u675f\u6761\u4ef6 \u8bf4\u660e FOREIGN KEY \u5916\u952e\uff0c\u5173\u8054\u5176\u5b83\u8868\u7684\u4e3b\u952e PRIMARY KEY \u4e3b\u952e NOT NULL \u4e0d\u4e3a\u7a7a UNIQUE \u552f\u4e00 AUTO_INCREMENT \u81ea\u52a8\u589e\u52a0 DEFAULT \u9ed8\u8ba4\u503c"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#32","title":"3.2 \u521b\u5efa\u8868","text":"<ul> <li>\u5173\u952e\u5b57</li> <li><code>table</code></li> <li><code>create</code></li> <li>\u8bed\u6cd5</li> </ul> <pre><code>crate table \u8868\u540d(\n\u5c5e\u6027\u540d \u6570\u636e\u7c7b\u578b [\u5b8c\u6574\u6027\u7ea6\u675f\u6761\u4ef6],\n...\n...\n\u5c5e\u6027\u540d \u6570\u636e\u7c7b\u578b [\u5b8c\u6574\u6027\u7ea6\u675f\u6761\u4ef6]\n);\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; create table table1(\n-&gt; id int,\n-&gt; name varchar(20),\n-&gt; age tinyint);\nQuery OK, 0 rows affected (1.40 sec)\n\nmysql&gt; describe table1;\n+-------+-------------+------+-----+---------+-------+\n| Field | Type        | Null | Key | Default | Extra |\n+-------+-------------+------+-----+---------+-------+\n| id    | int         | YES  |     | NULL    |       |\n| name  | varchar(20) | YES  |     | NULL    |       |\n| age   | tinyint     | YES  |     | NULL    |       |\n+-------+-------------+------+-----+---------+-------+\n3 rows in set (0.08 sec)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#33","title":"3.3 \u67e5\u770b\u8868","text":"<ul> <li>\u5173\u952e\u5b57</li> <li><code>table</code></li> <li><code>describe</code>\u6216<code>desc</code></li> <li>\u8bed\u6cd5</li> </ul> <pre><code>describe \u8868\u540d;\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; describe table1;\n+-------+-------------+------+-----+---------+-------+\n| Field | Type        | Null | Key | Default | Extra |\n+-------+-------------+------+-----+---------+-------+\n| id    | int         | YES  |     | NULL    |       |\n| name  | varchar(20) | YES  |     | NULL    |       |\n| age   | tinyint     | YES  |     | NULL    |       |\n+-------+-------------+------+-----+---------+-------+\n3 rows in set (0.08 sec)\n</code></pre> <p>\u67e5\u627e\u66f4\u8be6\u7ec6\u7684\u4fe1\u606f - \u8bed\u6cd5</p> <pre><code>show create table \u8868\u540d;\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; show create table table1;\n+--------+---------------------------------------------------------+\n| Table  |CreateTable                                              |\n+--------+---------------------------------------------------------+\n| table1 | CREATE TABLE `table1` (\n`id` int DEFAULT NULL,\n`name` varchar(20) DEFAULT NULL,\n`age` tinyint DEFAULT NULL\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci |\n+--------+---------------------------------------------------------+\n1 row in set (0.13 sec)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#34","title":"3.4 \u663e\u793a\u6240\u6709\u8868","text":"<ul> <li>\u5173\u952e\u5b57</li> <li><code>show tables</code></li> <li>\u8bed\u6cd5</li> </ul> <pre><code>show tables;\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; show tables;\n+-------------------+\n| Tables_in_test_db |\n+-------------------+\n| table1            |\n+-------------------+\n1 row in set (0.02 sec)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#35","title":"3.5 \u4fee\u6539\u8868","text":"<ul> <li>\u5173\u952e\u5b57</li> <li><code>alter</code></li> <li><code>table</code></li> </ul>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#351","title":"3.5.1 \u4fee\u6539\u8868\u540d","text":"<ul> <li>\u5173\u952e\u5b57</li> <li><code>rename</code></li> <li>\u8bed\u6cd5</li> </ul> <pre><code>alter table \u8868\u540d rename \u65b0\u8868\u540d;\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; alter table table1 rename table2;\nQuery OK, 0 rows affected (0.75 sec)\n\nmysql&gt; desc table1;\nERROR 1146 (42S02): Table 'test_db.table1' doesn't exist\nmysql&gt; desc table2;\n+-------+-------------+------+-----+---------+-------+\n| Field | Type        | Null | Key | Default | Extra |\n+-------+-------------+------+-----+---------+-------+\n| id    | int         | YES  |     | NULL    |       |\n| name  | varchar(20) | YES  |     | NULL    |       |\n| age   | tinyint     | YES  |     | NULL    |       |\n+-------+-------------+------+-----+---------+-------+\n3 rows in set (0.06 sec)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#352","title":"3.5.2 \u4fee\u6539\u8868\u5b57\u6bb5\u6570\u636e\u7c7b\u578b","text":"<ul> <li>\u5173\u952e\u5b57</li> <li><code>modify</code></li> <li>\u8bed\u6cd5</li> </ul> <pre><code>alter table \u8868\u540d modify \u5c5e\u6027\u540d \u65b0\u6570\u636e\u7c7b\u578b; </code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; alter table table2 rename table1;\nQuery OK, 0 rows affected (0.44 sec)\n\nmysql&gt; alter table table1 modify id tinyint;\nQuery OK, 0 rows affected (3.47 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n\nmysql&gt; desc table1;\n+-------+-------------+------+-----+---------+-------+\n| Field | Type        | Null | Key | Default | Extra |\n+-------+-------------+------+-----+---------+-------+\n| id    | tinyint     | YES  |     | NULL    |       |\n| name  | varchar(20) | YES  |     | NULL    |       |\n| age   | tinyint     | YES  |     | NULL    |       |\n+-------+-------------+------+-----+---------+-------+\n3 rows in set (0.02 sec)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#353","title":"3.5.3 \u4fee\u6539\u8868\u5b57\u6bb5\u540d","text":"<ul> <li>\u5173\u952e\u5b57</li> <li><code>change</code></li> <li>\u8bed\u6cd5</li> </ul> <pre><code>alter table \u8868\u540d change \u539f\u5c5e\u6027\u540d \u65b0\u5c5e\u6027\u540d \u65b0\u6570\u636e\u7c7b\u578b;\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; alter table table1 change id ID tinyint;\nQuery OK, 0 rows affected (0.13 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n\nmysql&gt; desc table1;\n+-------+-------------+------+-----+---------+-------+\n| Field | Type        | Null | Key | Default | Extra |\n+-------+-------------+------+-----+---------+-------+\n| ID    | tinyint     | YES  |     | NULL    |       |\n| name  | varchar(20) | YES  |     | NULL    |       |\n| age   | tinyint     | YES  |     | NULL    |       |\n+-------+-------------+------+-----+---------+-------+\n3 rows in set (0.06 sec)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#354","title":"3.5.4 \u589e\u52a0\u5b57\u6bb5","text":"<ul> <li>\u5173\u952e\u5b57</li> <li><code>add</code></li> <li>\u8bed\u6cd5</li> </ul> <pre><code>alter table \u8868\u540d add \u65b0\u5c5e\u6027\u540d \u6570\u636e\u7c7b\u578b [\u5b8c\u6574\u6027\u7ea6\u675f\u6761\u4ef6] [first|after \u539f\u5c5e\u6027\u540d];\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; alter table table1 add sex enum('\u7537','\u5973');\nQuery OK, 0 rows affected (0.92 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n\nmysql&gt; desc table1;\n+-------+-----------------+------+-----+---------+-------+\n| Field | Type            | Null | Key | Default | Extra |\n+-------+-----------------+------+-----+---------+-------+\n| ID    | tinyint         | YES  |     | NULL    |       |\n| name  | varchar(20)     | YES  |     | NULL    |       |\n| age   | tinyint         | YES  |     | NULL    |       |\n| sex   | enum('\u7537','\u5973') | YES  |     | NULL    |       |\n+-------+-----------------+------+-----+---------+-------+\n4 rows in set (0.04 sec)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#355","title":"3.5.5 \u5220\u9664\u5b57\u6bb5","text":"<ul> <li>\u5173\u952e\u5b57</li> <li><code>drop</code></li> <li>\u8bed\u6cd5</li> </ul> <pre><code>alter table \u8868\u540d drop \u5c5e\u6027\u540d;\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; alter table table1 drop sex;\nQuery OK, 0 rows affected (2.90 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n\nmysql&gt; desc table1;\n+-------+-------------+------+-----+---------+-------+\n| Field | Type        | Null | Key | Default | Extra |\n+-------+-------------+------+-----+---------+-------+\n| ID    | tinyint     | YES  |     | NULL    |       |\n| name  | varchar(20) | YES  |     | NULL    |       |\n| age   | tinyint     | YES  |     | NULL    |       |\n+-------+-------------+------+-----+---------+-------+\n3 rows in set (0.02 sec)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#356","title":"3.5.6 \u5220\u9664\u8868\u7684\u5916\u952e","text":"<ul> <li>\u5173\u952e\u5b57</li> <li><code>drop</code></li> <li><code>foreign key</code></li> <li>\u8bed\u6cd5</li> </ul> <pre><code>alter table \u8868\u540d drop foreign key \u5916\u952e\u522b\u540d; </code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#357","title":"3.5.7 \u521b\u5efa\u8868\u540e\u589e\u52a0\u4e3b\u952e\u5916\u952e","text":"<ul> <li>\u8bed\u6cd5</li> </ul> <pre><code>alter table \u8868\u540d add primary key (\u5b57\u6bb5\u540d)\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; alter table table1 add primary key(id);\nQuery OK, 0 rows affected (3.71 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n\nmysql&gt; desc table1;\n+-------+-------------+------+-----+---------+-------+\n| Field | Type        | Null | Key | Default | Extra |\n+-------+-------------+------+-----+---------+-------+\n| id    | int         | NO   | PRI | NULL    |       |\n| name  | varchar(20) | YES  |     | NULL    |       |\n| age   | tinyint     | YES  |     | NULL    |       |\n+-------+-------------+------+-----+---------+-------+\n3 rows in set (0.05 sec)\n- \u8bed\u6cd5\n</code></pre> <pre><code>alter table \u8868\u540d add CONSTRAINT \u5916\u952e\u7ea6\u675f\u540d\u79f0 foreign key (\u5b57\u6bb5\u540d) references \u53c2\u8003\u7684\u8868\u540d (\u5b57\u6bb5\u540d);\n</code></pre> <pre><code>mysql&gt; create table table2(\n-&gt; id int,\n-&gt; primary key(id));\nQuery OK, 0 rows affected (0.67 sec)\n\nmysql&gt; desc table2;\n+-------+------+------+-----+---------+-------+\n| Field | Type | Null | Key | Default | Extra |\n+-------+------+------+-----+---------+-------+\n| id    | int  | NO   | PRI | NULL    |       |\n+-------+------+------+-----+---------+-------+\n1 row in set (0.06 sec)\n\nmysql&gt; alter table table1 add constraint pk1 foreign key (id) references table2 (id);\nQuery OK, 0 rows affected (2.99 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#36","title":"3.6 \u5220\u9664\u8868","text":"<ul> <li>\u5173\u952e\u5b57</li> <li><code>drop</code></li> <li>\u8bed\u6cd5</li> <li><code>drop table \u8868\u540d;</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; drop table table1;\nQuery OK, 0 rows affected (0.53 sec)\n\nmysql&gt; desc table1;\nERROR 1146 (42S02): Table 'test_db.table1' doesn't exist\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#4","title":"4 \u67e5\u8be2","text":"<ul> <li>\u5173\u952e\u5b57</li> <li><code>select from</code>\uff1a\u67e5\u8be2</li> <li><code>where</code>\uff1a\u901a\u8fc7\u6307\u5b9a\u6761\u4ef6\u67e5\u8be2</li> <li><code>group by</code>\uff1a\u901a\u8fc7\u6307\u5b9a\u5b57\u6bb5\u5206\u7ec4</li> <li><code>having</code>\uff1a\u8868\u793a\u6ee1\u8db3\u67d0\u6761\u4ef6</li> <li><code>order by</code>\uff1a\u901a\u8fc7\u6307\u5b9a\u5b57\u6bb5\u8fdb\u884c\u6392\u5e8f</li> <li><code>asc</code>\u6216<code>desc</code>:\u964d\u5e8f\u6216\u5347\u5e8f</li> <li>\u8bed\u6cd5</li> </ul> <pre><code>select \u5c5e\u6027\u5217\u8868 from \u8868\u540d\u6216\u89c6\u56fe\u540d\n[where \u6761\u4ef6\u8868\u8fbe\u5f0f]\n[group by \u5c5e\u6027\u540d [having \u6761\u4ef6\u8868\u8fbe\u5f0f]]\n[order by \u5c5e\u6027\u540d [asc|desc]]\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#41","title":"4.1 \u67e5\u8be2\u6761\u4ef6\u5173\u952e\u5b57","text":"<ul> <li>\u5173\u952e\u5b57</li> <li><code>in</code>:\u6307\u5b9a\u96c6\u5408</li> <li><code>between and</code>\uff1a\u6307\u5b9a\u8303\u56f4\u533a\u95f4</li> <li><code>like</code>\uff1a\u7528\u4e8e\u6a21\u7cca\u5339\u914d\u5b57\u7b26\u4e32<ul> <li><code>%</code>:\u5339\u914d\u4efb\u610f\u957f\u5ea6</li> <li><code>_</code>:\u5339\u914d\u5355\u4e2a\u5b57\u7b26</li> </ul> </li> <li><code>is null</code>:\u5224\u65ad\u5c5e\u6027\u503c\u662f\u5426\u4e3a\u7a7a</li> <li><code>and</code>\u6216<code>or</code>\uff1a\u4e0e\u548c\u6216\u8fde\u63a5</li> <li><code>distinct</code>:\u9650\u5b9a\u67e5\u8be2\u7ed3\u679c\u552f\u4e00</li> <li><code>limit</code>:\u9650\u5b9a\u67e5\u8be2\u7ed3\u679c\u8bb0\u5f55\u6570</li> <li>\u8bed\u6cd5</li> </ul> <pre><code>select \u5c5e\u6027\u540d\u96c6 from \u8868\u540d where \u5c5e\u6027\u540d in (\u503c1,...\u503cn);\nselect \u5c5e\u6027\u540d\u96c6 from \u8868\u540d where \u5c5e\u6027\u540d between \u503c1 and \u503c2;\nselect \u5c5e\u6027\u540d\u96c6 from \u8868\u540d where \u5c5e\u6027\u540d like '\u5b57\u7b26\u4e32';\nselect \u5c5e\u6027\u540d\u96c6 from \u8868\u540d where \u5c5e\u6027\u540d is null;\nselect \u5c5e\u6027\u540d\u96c6 from \u8868\u540d where \u6761\u4ef61 and|or \u6761\u4ef62;\nselect distinct \u5c5e\u6027\u540d\u96c6 from \u8868\u540d;\nselect \u5c5e\u6027\u540d\u96c6 from \u8868\u540d limit \u6570\u91cf;\nselect \u5c5e\u6027\u540d\u96c6 from \u8868\u540d limit \u8d77\u59cb\u4f4d\u7f6e,\u6570\u91cf;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#5","title":"5 \u63d2\u5165\u8868\u6570\u636e","text":"<ul> <li>\u5173\u952e\u5b57</li> <li><code>INSERT INTO ... VALUES</code></li> </ul>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#51","title":"5.1 \u63d2\u5165\u6240\u6709\u6570\u636e","text":"<ul> <li>\u8bed\u6cd5</li> </ul> <pre><code>insert into \u8868\u540d values(\u503c1,...,\u503cn);\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; insert into table1 values(0,\"jack\",24);\nQuery OK, 1 row affected (0.08 sec)\n\nmysql&gt; select* from table1;\n+----+------+------+\n| id | name | age  |\n+----+------+------+\n|  0 | jack |   24 |\n+----+------+------+\n1 row in set (0.00 sec)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#52","title":"5.2 \u63d2\u5165\u6307\u5b9a\u5b57\u6bb5\u6570\u636e","text":"<ul> <li>\u8bed\u6cd5</li> </ul> <pre><code>insert into \u8868\u540d(\u5c5e\u60271,...,\u5c5e\u6027n) values(\u503c1,...,\u503cn);\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; insert into table1(id,name,age) values(1,\"tom\",26);\nQuery OK, 1 row affected (0.08 sec)\n\nmysql&gt; select * from table1 where id=1;\n+----+------+------+\n| id | name | age  |\n+----+------+------+\n|  1 | tom  |   26 |\n+----+------+------+\n1 row in set (0.02 sec)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#53","title":"5.3 \u63d2\u5165\u591a\u884c\u6570\u636e","text":"<ul> <li>\u8bed\u6cd5</li> </ul> <pre><code>insert into \u8868\u540d values(\u503c\u5217\u88681),...(\u503c\u5217\u8868n);\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; insert into table2 values(0),(1),(2),(3);\nQuery OK, 4 rows affected (0.14 sec)\nRecords: 4  Duplicates: 0  Warnings: 0\n\nmysql&gt; select * from table2;\n+----+\n| id |\n+----+\n|  0 |\n|  1 |\n|  2 |\n|  3 |\n+----+\n4 rows in set (0.00 sec)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#54","title":"5.4 \u5c06\u67e5\u8be2\u7ed3\u679c\u63d2\u5165\u8868\u4e2d","text":"<ul> <li>\u8bed\u6cd5</li> </ul> <pre><code>insert into \u8868\u540d1 (\u5c5e\u6027\u5217\u8868) select (\u5c5e\u6027\u5217\u8868) from \u8868\u540d2 [\u53ef\u9009\u6761\u4ef6];\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#6","title":"6 \u66f4\u65b0\u8868\u6570\u636e","text":"<ul> <li>\u5173\u952e\u5b57</li> <li><code>UPDATE ... SET</code></li> <li>\u8bed\u6cd5</li> </ul> <pre><code>update \u8868\u540d set \u5c5e\u6027\u540d1=\u503c1,\n...,\n\u5c5e\u6027\u540dn=\u503cn\nwhere \u6761\u4ef6\u8868\u8fbe\u5f0f;\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; update table1 set\n-&gt; name=\"tim\",\n-&gt; age=25\n-&gt; where id=1;\nQuery OK, 1 row affected (0.10 sec)\nRows matched: 1  Changed: 1  Warnings: 0\n\nmysql&gt; select* from table1 where id=1;\n+----+------+------+\n| id | name | age  |\n+----+------+------+\n|  1 | tim  |   25 |\n+----+------+------+\n1 row in set (0.03 sec)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#7","title":"7 \u5220\u9664\u8868\u6570\u636e","text":"<ul> <li>\u5173\u952e\u5b57</li> <li><code>DELETE FROM</code></li> <li>\u8bed\u6cd5</li> </ul> <pre><code>delete from \u8868\u540d [where t\u6761\u4ef6\u8868\u8fbe\u5f0f];\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; select * from table1;\n+----+------+------+\n| id | name | age  |\n+----+------+------+\n|  0 | jack |   24 |\n|  1 | tim  |   25 |\n+----+------+------+\n2 rows in set (0.00 sec)\n\nmysql&gt; delete from table1 where id=1;\nQuery OK, 1 row affected (0.07 sec)\n\nmysql&gt; select * from table1;\n+----+------+------+\n| id | name | age  |\n+----+------+------+\n|  0 | jack |   24 |\n+----+------+------+\n1 row in set (0.02 sec)\n</code></pre> <pre><code>\u5f53\u4e0d\u77e5\u9053\u5220\u9664\u7684where\u6761\u4ef6\u8868\u8fbe\u5f0f\u65f6\uff0c\u4f1a\u5220\u9664\u6574\u4e2a\u8868\u6570\u636e\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#8","title":"8 \u7d22\u5f15","text":"<ul> <li>\u7ec4\u6210\uff1a\u7d22\u5f15\u53ef\u4ee5\u7531\u8868\u4e0a\u4e00\u5217\u6216\u591a\u5217\u7ec4\u6210</li> <li>\u529f\u80fd\uff1a\u63d0\u9ad8\u67e5\u8be2\u8868\u6570\u636e\u7684\u901f\u5ea6</li> <li>\u7d22\u5f15\u5b58\u50a8\u7c7b\u578b\uff1aB\u6811\u7d22\u5f15\u3001\u54c8\u5e0c\u7d22\u5f15</li> </ul>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#81","title":"8.1 \u7d22\u5f15\u4f18\u7f3a\u70b9","text":"<p>\u7d22\u5f15\u80fd\u589e\u52a0\u67e5\u8be2\u901f\u5ea6\uff0c\u4f46\u4f1a\u5f71\u54cd\u63d2\u5165\u901f\u5ea6\u3002 - \u4f18\u70b9\uff1a   - \u63d0\u9ad8\u67e5\u8be2\u6570\u636e\u901f\u5ea6   - \u63d0\u9ad8\u5206\u7ec4\u548c\u6392\u5e8f\u901f\u5ea6 - \u7f3a\u70b9\uff1a   - \u7d22\u5f15\u5360\u636e\u989d\u5916\u7269\u7406\u7a7a\u95f4   - \u589e\u52a0\u548c\u5220\u9664\u6570\u636e\u9700\u8981\u989d\u5916\u7ef4\u62a4\u7d22\u5f15</p> <pre><code>title: \u5982\u4f55\u5904\u7406\u5411\u542b\u7d22\u5f15\u7684\u8868\u4e2d\u63d2\u5165\u5927\u91cf\u6570\u636e\uff1f\n1. \u9996\u5148\u5220\u9664\u7d22\u5f15\u3002\n2. \u518d\u63d2\u5165\u6570\u636e\u3002\n3. \u6700\u540e\u91cd\u5199\u6dfb\u52a0\u7d22\u5f15\u3002\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#82","title":"8.2 \u7d22\u5f15\u7c7b\u578b","text":"<ul> <li>\u666e\u901a\u7d22\u5f15\uff1a\u4e0d\u9644\u52a0\u4efb\u4f55\u9650\u5236</li> <li>\u552f\u4e00\u6027\u7d22\u5f15\uff1a\u9650\u5236\u7d22\u5f15\u9879\u503c\u5fc5\u987b\u552f\u4e00</li> <li>\u5168\u6587\u7d22\u5f15\uff1a\u4f7f\u7528<code>FULLTEXT</code>\u8bbe\u7f6e\u5168\u6587\u7d22\u5f15\uff0c\u4e14\u5168\u6587\u7d22\u5f15\u53ea\u7528\u5728<code>TEXT</code>\u3001<code>CHAR</code>\u3001<code>VARCHAR</code>\u6570\u636e\u7c7b\u578b\u4e0a\uff0c\u5168\u6587\u7d22\u5f15\u9002\u7528\u4e8e\u6570\u636e\u91cf\u52a0\u5927\u7684\u5b57\u7b26\u4e32\u578b\u5b57\u6bb5\u4e0a\u3002</li> <li>\u5355\u5217\u7d22\u5f15\uff1a\u5728\u5355\u4e2a\u5b57\u6bb5\u4e0a\u521b\u5efa\u7d22\u5f15</li> <li>\u591a\u5217\u7d22\u5f15\uff1a\u5728\u591a\u4e2a\u5b57\u6bb5\u662f\u521b\u5efa\u7d22\u5f15\uff08\u53ea\u6709\u67e5\u8be2\u65f6\u6307\u5b9a\u4e86\u7b2c\u4e00\u4e2a\u5b57\u6bb5\uff0c\u591a\u5217\u7d22\u5f15\u624d\u80fd\u8d77\u4f5c\u7528\uff09</li> <li>\u7a7a\u95f4\u7d22\u5f15\uff1a\u4f7f\u7528<code>SPATIAL</code>\u8bbe\u7f6e\u7a7a\u95f4\u7d22\u5f15\uff08\u7a7a\u95f4\u7d22\u5f15\u53ea\u7528\u5728\u7a7a\u95f4\u7c7b\u578b\u6570\u636e\u5b57\u6bb5\u4e0a<code>GEOMETRY</code>\u3001<code>POINT</code>\u3001<code>LINESTRING</code>\u3001<code>POLYGON</code>\uff0c\u4e14\u7d22\u5f15\u5b57\u6bb5\u4e0d\u4e3a\u7a7a\uff09</li> </ul>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#83","title":"8.3 \u7d22\u5f15\u8bbe\u8ba1\u539f\u5219","text":"<ol> <li>\u5c3d\u91cf\u9009\u62e9\u552f\u4e00\u6027\u7d22\u5f15</li> <li>\u4e3a\u7ecf\u5e38\u9700\u8981\u6392\u5e8f\u3001\u5206\u7ec4\u548c\u8054\u5408\u67e5\u8be2\u7684\u5b57\u6bb5\u8bbe\u7f6e\u7d22\u5f15</li> <li>\u4e3a\u5e38\u505a\u67e5\u8be2\u7684\u5b57\u6bb5\u8bbe\u7f6e\u7d22\u5f15</li> <li>\u9650\u5236\u7d22\u5f15\u6570\u91cf</li> <li>\u5c3d\u91cf\u4e0d\u5728\u6570\u636e\u91cf\u5927\u7684\u5b57\u6bb5\u4e0a\u8bbe\u7f6e\u7d22\u5f15</li> <li>\u5728\u5927\u6570\u636e\u5b57\u6bb5\u91c7\u7528\u524d\u7f00\u7d22\u5f15</li> <li>\u5220\u9664\u5f88\u5c11\u4f7f\u7528\u6216\u4e0d\u518d\u4f7f\u7528\u7684\u7d22\u5f15</li> </ol>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#84","title":"8.4 \u7d22\u5f15\u7684\u521b\u5efa","text":""},{"location":"Documents/B-Programming%20Language/SQL/mysql/#841","title":"8.4.1 \u521b\u5efa\u8868\u65f6\u521b\u5efa\u7d22\u5f15","text":"<ul> <li>\u8bed\u6cd5</li> </ul> <pre><code>crate table \u8868\u540d(\n\u5c5e\u6027\u540d \u6570\u636e\u7c7b\u578b [\u5b8c\u6574\u6027\u7ea6\u675f\u6761\u4ef6],\n...\n...\n\u5c5e\u6027\u540d \u6570\u636e\u7c7b\u578b [\u5b8c\u6574\u6027\u7ea6\u675f\u6761\u4ef6],\n[UNIQUE|FULLTEXT|SPATIAL] INDEX|KEY [\u522b\u540d](\u5c5e\u6027\u540d [(\u957f\u5ea6)] [ASC|DESC])\n);\n</code></pre> <ul> <li>\u89e3\u91ca\uff1a</li> <li><code>UNIQUE</code>\u3001<code>FULLTEXT</code>\u3001<code>SPATIAL</code>\u5206\u522b\u5bf9\u5e94\u552f\u4e00\u6027\u7d22\u5f15\u3001\u5168\u6587\u7d22\u5f15\u3001\u7a7a\u95f4\u7d22\u5f15</li> <li><code>INDEX</code>\u3001<code>KEY</code>\u662f\u7d22\u5f15\u5173\u952e\u5b57\uff0c\u90fd\u53ef\u4ee5\u4f7f\u7528</li> <li>\u957f\u5ea6\uff1a\u9650\u5236\u7d22\u5f15\u5b57\u6bb5\u503c\u5f97\u957f\u5ea6\uff0c\u53ea\u80fd\u5728<code>TEXT</code>\u3001<code>CHAR</code>\u3001<code>VARCHAR</code>\u5b57\u7b26\u4e32\u7c7b\u578b\u4e0a\u4f7f\u7528</li> <li><code>ASC</code>\uff08\u5347\u5e8f\uff09\u3001<code>DESC</code>\uff08\u964d\u5e8f\uff09\u6307\u793a\u7d22\u5f15\u6392\u5e8f\u89c4\u5219\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; create table index1(\n-&gt; id int,\n-&gt; attr1 char(4),\n-&gt; index(id)\n-&gt; );\nQuery OK, 0 rows affected (1.07 sec)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#842","title":"8.4.2 \u5728\u5df2\u5b58\u5728\u8868\u4e0a\u5efa\u7acb\u7d22\u5f15","text":"<ul> <li>\u8bed\u6cd51</li> </ul> <pre><code>create [UNIQUE|FULLTEXT|SPATIAL] INDEX \u7d22\u5f15\u540d ON \u8868\u540d(\u5c5e\u6027\u540d [(\u957f\u5ea6)] [ASC|DESC]);\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; create fulltext index f_index on index1(attr1(2));\nQuery OK, 0 rows affected, 1 warning (7.30 sec)\nRecords: 0  Duplicates: 0  Warnings: 1\n</code></pre> <ul> <li>\u8bed\u6cd52</li> </ul> <pre><code>alter table \u8868\u540d add [UNIQUE|FULLTEXT|SPATIAL] INDEX \u7d22\u5f15\u540d(\u5c5e\u6027\u540d [(\u957f\u5ea6)] [ASC|DESC]);\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; alter table index1 add UNIQUE index u_index(id ASC);\nQuery OK, 0 rows affected (0.43 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#85","title":"8.5 \u5220\u9664\u7d22\u5f15","text":"<ul> <li>\u8bed\u6cd5</li> </ul> <pre><code>drop index \u7d22\u5f15\u540d on \u8868\u540d;\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; drop index u_index on index1;\nQuery OK, 0 rows affected (0.20 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#9","title":"9 \u89c6\u56fe","text":"<p>\u89c6\u56fe\u662f\u865a\u62df\u5316\u7684\u8868\uff0c\u5b83\u53ef\u4ee5\u4ece\u8868\u4e2d\u5b9a\u4e8e\u6216\u4ece\u53e6\u4e00\u4e2a\u89c6\u56fe\u4e2d\u5b9a\u4e49\uff1b\u89c6\u56fe\u7684\u6570\u636e\u6765\u81ea\u539f\u8868\uff0c\u56e0\u6b64\u5bf9\u89c6\u56fe\u7684\u66f4\u6539\u4f1a\u6539\u52a8\u539f\u8868\u7684\u6570\u636e\u3002\u539f\u8868\u589e\u52a0\u5217\u6216\u5220\u9664\u6ca1\u6709\u88ab\u89c6\u56fe\u5f15\u7528\u7684\u5217\u4e0d\u5f71\u54cd\u89c6\u56fe\u3002 - \u529f\u80fd\uff1a   - \u4f7f\u64cd\u4f5c\u7b80\u5355\u5316\uff1a\u4e3a\u5e38\u4f7f\u7528\u7684\u67e5\u8be2\u5b9a\u4e49\u89c6\u56fe\uff0c\u907f\u514d\u67e5\u8be2\u65f6\u6307\u5b9a\u5927\u91cf\u6761\u4ef6\uff0c\u4f7f\u64cd\u4f5c\u7b80\u5355   - \u589e\u52a0\u4e86\u6570\u636e\u7684\u5b89\u5168\u6027\uff1a\u53ea\u63d0\u4f9b\u6743\u9650\u5185\u6570\u636e</p>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#91","title":"9.1 \u521b\u5efa\u89c6\u56fe","text":"<ul> <li>\u8bed\u6cd5</li> </ul> <pre><code>create [algorithm={undefined|merge|template}] view \u89c6\u56fe\u540d [(\u5c5e\u6027\u5217\u8868)] as select\u8868\u8fbe\u5f0f [with [cascaded|local] check option]\n</code></pre> <ul> <li>\u89e3\u91ca</li> <li><code>algorithm</code>\uff1a\u6307\u5b9a\u89c6\u56fe\u7b97\u6cd5<ul> <li><code>undefined</code>\uff1a\u81ea\u52a8\u9009\u62e9</li> <li><code>merge</code></li> <li><code>template</code></li> </ul> </li> <li><code>with check option</code>:\u8868\u793a\u66f4\u65b0\u89c6\u56fe\u65f6\u8981\u4fdd\u8bc1\u5728\u8be5\u89c6\u56fe\u7684\u6743\u9650\u8303\u56f4\u5185</li> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; create view t_view(name,age) as select name,age from table1;\nQuery OK, 0 rows affected (0.18 sec)\nmysql&gt; select * from table1;\n+----+------+------+\n| id | name | age  |\n+----+------+------+\n|  0 | jack |   24 |\n+----+------+------+\n1 row in set (0.02 sec)\n\nmysql&gt; insert into table1 values(1,\"tim\",21);\nQuery OK, 1 row affected (0.10 sec)\n\nmysql&gt; select * from table1;\n+----+------+------+\n| id | name | age  |\n+----+------+------+\n|  0 | jack |   24 |\n|  1 | tim  |   21 |\n+----+------+------+\n2 rows in set (0.00 sec)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#92","title":"9.2 \u67e5\u770b\u89c6\u56fe\u7ed3\u6784","text":"<ul> <li>\u8bed\u6cd5\uff1a</li> <li><code>desc|describe \u89c6\u56fe\u540d;</code></li> <li><code>show table status like '\u89c6\u56fe\u540d';</code></li> <li><code>show create view \u89c6\u56fe\u540d;</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; desc t_view;\n+-------+-------------+------+-----+---------+-------+\n| Field | Type        | Null | Key | Default | Extra |\n+-------+-------------+------+-----+---------+-------+\n| name  | varchar(20) | YES  |     | NULL    |       |\n| age   | tinyint     | YES  |     | NULL    |       |\n+-------+-------------+------+-----+---------+-------+\n2 rows in set (0.00 sec)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#93","title":"9.3 \u4fee\u6539\u89c6\u56fe\u7ed3\u6784","text":"<ol> <li>\u4f7f\u7528<code>create or replace</code></li> <li>\u8bed\u6cd5</li> </ol> <pre><code>create or replace [algorithm={undefined|merge|template}] view \u89c6\u56fe\u540d [(\u5c5e\u6027\u5217\u8868)] as select\u8868\u8fbe\u5f0f [with [cascaded|local] check option]\n</code></pre> <ul> <li>\u89e3\u91ca\uff1a\u8fd9\u64cd\u4f5c\u548c\u521b\u5efa\u89c6\u56fe\u7c7b\u4f3c\uff0c\u5f53\u89c6\u56fe\u5b58\u5728\u5c31\u66f4\u65b0\uff0c\u5f53\u89c6\u56fe\u4e0d\u5b58\u5728\u5c31\u521b\u5efa\u3002</li> <li>\u4f7f\u7528<code>alter</code></li> <li>\u8bed\u6cd5</li> </ul> <pre><code>alter [algorithm={undefined|merge|template}] view \u89c6\u56fe\u540d [(\u5c5e\u6027\u5217\u8868)] as select\u8868\u8fbe\u5f0f [with [cascaded|local] check option]\n</code></pre> <ul> <li>\u89e3\u91ca\uff1a\u4e0e\u521b\u5efa\u89c6\u56fe\u7c7b\u578b</li> </ul>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#94","title":"9.4 \u66f4\u65b0\u89c6\u56fe","text":"<ol> <li>\u66f4\u65b0\u89c6\u56fe\u4f1a\u66f4\u6539\u5f15\u7528\u7684\u8868\u6570\u636e</li> <li>\u66f4\u65b0\u64cd\u4f5c\uff0c\u5982<code>insert into</code>\u3001<code>delete from</code>\u3001<code>update set</code>\u4e0e\u66f4\u65b0\u8868\u64cd\u4f5c\u4e00\u81f4\u3002</li> <li>\u793a\u4f8b</li> </ol> <pre><code>mysql&gt; update t_view set age=21 where name=\"tim\";\nQuery OK, 1 row affected (0.26 sec)\nRows matched: 1  Changed: 1  Warnings: 0\n\nmysql&gt; select * from t_view;\n+------+------+\n| name | age  |\n+------+------+\n| jack |   23 |\n| tim  |   21 |\n+------+------+\n2 rows in set (0.00 sec)\n\nmysql&gt; select * from table1;\n+----+------+------+\n| id | name | age  |\n+----+------+------+\n|  0 | jack |   23 |\n|  1 | tim  |   21 |\n+----+------+------+\n2 rows in set (0.00 sec)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/mysql/#95","title":"9.5 \u5220\u9664\u89c6\u56fe","text":"<ul> <li>\u8bed\u6cd5</li> </ul> <pre><code>drop view [if exists] \u89c6\u56fe\u540d [restrict|cascade];\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>mysql&gt; drop view if exists t_view;\nQuery OK, 0 rows affected (0.07 sec)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Mongodb/Mongodb/","title":"Mongodb","text":""},{"location":"Documents/B-Programming%20Language/SQL/Mongodb/Mongodb/#1","title":"1. \u6982\u8ff0","text":"SQL\u672f\u8bed/\u6982\u5ff5 MongoDB\u672f\u8bed/\u6982\u5ff5 \u89e3\u91ca/\u8bf4\u660e database database \u6570\u636e\u5e93 table collection \u6570\u636e\u5e93\u8868/\u96c6\u5408 row document \u6570\u636e\u8bb0\u5f55\u884c/\u6587\u6863 column field \u6570\u636e\u5b57\u6bb5/\u57df index index \u7d22\u5f15 table joins \u8868\u8fde\u63a5,MongoDB\u4e0d\u652f\u6301 primary key primary key \u4e3b\u952e,MongoDB\u81ea\u52a8\u5c06_id\u5b57\u6bb5\u8bbe\u7f6e\u4e3a\u4e3b\u952e"},{"location":"Documents/B-Programming%20Language/SQL/Mongodb/Mongodb/#2","title":"2. \u5b89\u88c5","text":"<ol> <li>\u4ece\u5b98\u7f51\u4e0b\u8f7d\u5bf9\u5e94\u7684\u53d1\u884c\u7248</li> <li>\u89e3\u538b\u76ee\u5f55</li> <li>\u521b\u5efadb\u6570\u636e\u76ee\u5f55\u548c\u65e5\u5fd7\u76ee\u5f55</li> <li>\u7f16\u8f91<code>mongodb.conf</code>\u914d\u7f6e\u6587\u4ef6\uff08yaml\u683c\u5f0f\uff09</li> <li>\u914d\u7f6ePATH\u73af\u5883\u53d8\u91cf\uff0c\u65b9\u4fbf\u4f7f\u7528mongo\u4e8c\u8fdb\u5236\u6587\u4ef6</li> <li><code>mongodb.conf\u914d\u7f6e\u5982\u4e0b</code></li> </ol> <pre><code>storage:\ndbPath: /root/mongodb-5.0.9/data/db\nsystemLog:\ndestination: file\npath: /root/mongodb-5.0.9/logs/mongod.log\nlogAppend: true\nnet:\nbindIp: 0.0.0.0\nport: 27017\nprocessManagement:\nfork: true       #\u540e\u53f0\u8fd0\u884c\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Mongodb/Mongodb/#3","title":"3. \u542f\u52a8","text":"<ul> <li>\u540e\u53f0\u542f\u52a8mongod\u670d\u52a1\uff1a<code>mongod -f mongodb.conf</code></li> <li>\u505c\u6b62mongod\u670d\u52a1\uff1a<code>mongod -f mongodb.conf --shutdown</code></li> <li>mongo\u5ba2\u6237\u7aef\u767b\u5f55\uff1a<code>mongo</code></li> <li>\u793a\u4f8b\uff1a\u670d\u52a1\u7aef\u542f\u52a8</li> </ul> <pre><code>[root@centos7 mongodb-5.0.9]# mongod -f mongodb.conf \nabout to fork child process, waiting until server is ready for connections.\nforked process: 1320\nchild process started successfully, parent exiting\n[root@centos7 mongodb-5.0.9]# mongod -f mongodb.conf  --shutdown\nkilling process with pid: 1320\n</code></pre> <ul> <li>\u793a\u4f8b\uff1a\u5ba2\u6237\u7aef\u767b\u5f55</li> </ul> <pre><code>[root@centos7 ~]# mongo\nMongoDB shell version v5.0.9\n&gt;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Mongodb/Mongodb/#4","title":"4. \u6570\u636e\u5e93\u64cd\u4f5c","text":""},{"location":"Documents/B-Programming%20Language/SQL/Mongodb/Mongodb/#41-db","title":"4.1. \u663e\u793a\u5f53\u524ddb","text":"<ul> <li><code>db</code></li> <li>\u793a\u4f8b\uff1atest\u6570\u636e\u5e93\u662f\u9ed8\u8ba4db</li> </ul> <pre><code>&gt; db\ntest\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Mongodb/Mongodb/#42-db","title":"4.2. \u663e\u793a\u6240\u6709db\u5217\u8868","text":"<pre><code>title: \u4e3a\u4ec0\u4e48\u521a\u521b\u5efa\u7684db\u6ca1\u6709\u663e\u793a\u51fa\u6765\uff1f\n\u56e0\u4e3adb\u91cc\u9762\u53ea\u8981\u8981\u6709\u4e00\u6761\u6570\u636e\uff0c\u624d\u80fd\u663e\u793a\u51fa\u6765\uff0c\u65b0\u521b\u5efa\u7684db\u6ca1\u6709\u4efb\u52a1\u6570\u636e\n</code></pre> <ul> <li><code>show dbs</code>\u6216<code>show databases</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>&gt; show dbs\nadmin   0.000GB\nconfig  0.000GB\nlocal   0.000GB\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Mongodb/Mongodb/#43-db","title":"4.3. \u5207\u6362db","text":"<ul> <li><code>use \u6570\u636e\u5e93\u540d</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>&gt; use admin\nswitched to db admin\n&gt; db\nadmin\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Mongodb/Mongodb/#44-db","title":"4.4. \u521b\u5efadb","text":"<pre><code>mongodb \u4f7f\u7528use\u4e0d\u4ec5\u53ef\u4ee5\u5207\u6362db\uff0c\u8fd8\u4f1a\u5728\u4e0d\u5b58\u5728db\u65f6\u521b\u5efadb\uff0c\u518d\u5207\u6362db\n</code></pre> <ul> <li><code>use \u6570\u636e\u5e93\u540d</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>&gt; use newdb1\nswitched to db newdb1\n&gt; \n&gt; db\nnewdb1\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Mongodb/Mongodb/#45-db","title":"4.5. \u5220\u9664db","text":"<ul> <li><code>db.dropDatabase()</code></li> <li>\u793a\u4f8b:</li> </ul> <pre><code>&gt; db\nnewdb1\n&gt; db.dropDatabase()\n{ \"ok\" : 1 }\n&gt; show dbs\nadmin   0.000GB\nconfig  0.000GB\nlocal   0.000GB\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Mongodb/Mongodb/#5","title":"5. \u96c6\u5408\uff08\u8868\uff09","text":""},{"location":"Documents/B-Programming%20Language/SQL/Mongodb/Mongodb/#51","title":"5.1. \u663e\u793a\u96c6\u5408\u5217\u8868","text":"<ul> <li><code>show collections</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>&gt; db.createCollection(\"coll1\")\n{ \"ok\" : 1 }\n&gt; show collections\ncoll1\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Mongodb/Mongodb/#52","title":"5.2. \u521b\u5efa\u96c6\u5408","text":""},{"location":"Documents/B-Programming%20Language/SQL/Mongodb/Mongodb/#-dbcreatecollectionname-options","title":"- <code>db.createCollection(name, options)</code>","text":"\u53c2\u6570 \u7c7b\u578b \u63cf\u8ff0 <code>name</code> String \u8981\u521b\u5efa\u7684\u96c6\u5408\u7684\u540d\u79f0 <code>options</code> Document (\u53ef\u9009)\u6307\u5b9a\u6709\u5173\u5185\u5b58\u5927\u5c0f\u548c\u7d22\u5f15\u7684\u9009\u9879 <p><code>options</code>\u53c2\u6570\u662f\u53ef\u9009\u7684\uff0c\u56e0\u6b64\u53ea\u9700\u8981\u6307\u5b9a\u96c6\u5408\u7684\u540d\u79f0\u3002 \u4ee5\u4e0b\u662f\u53ef\u4ee5\u4f7f\u7528\u7684\u9009\u9879\u5217\u8868\uff1a</p> \u5b57\u6bb5 \u7c7b\u578b \u63cf\u8ff0 <code>capped</code> <code>Boolean</code> (\u53ef\u9009)\u5982\u679c\u4e3a<code>true</code>\uff0c\u5219\u542f\u7528\u5c01\u95ed\u7684\u96c6\u5408\u3002\u4e0a\u9650\u96c6\u5408\u662f\u56fa\u5b9a\u5927\u5c0f\u7684\u96c6\u5408\uff0c\u5b83\u5728\u8fbe\u5230\u5176\u6700\u5927\u5927\u5c0f\u65f6\u81ea\u52a8\u8986\u76d6\u5176\u6700\u65e7\u7684\u6761\u76ee\u3002 \u5982\u679c\u6307\u5b9a<code>true</code>\uff0c\u5219\u8fd8\u9700\u8981\u6307\u5b9a<code>size</code>\u53c2\u6570 <code>autoIndexId</code> <code>Boolean</code> 3.2 \u4e4b\u540e\u4e0d\u518d\u652f\u6301\u8be5\u53c2\u6570\u3002(\u53ef\u9009)\u5982\u679c\u4e3a<code>true</code>\uff0c\u5219\u5728<code>_id</code>\u5b57\u6bb5\u4e0a\u81ea\u52a8\u521b\u5efa\u7d22\u5f15\u3002\u9ed8\u8ba4\u503c\u4e3a<code>false</code>\u3002 <code>size</code> \u6570\u5b57 (\u53ef\u9009)\u6307\u5b9a\u4e0a\u9650\u96c6\u5408\u7684\u6700\u5927\u5927\u5c0f(\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d)\u3002 \u5982\u679c<code>capped</code>\u4e3a<code>true</code>\uff0c\u90a3\u4e48\u8fd8\u9700\u8981\u6307\u5b9a\u6b64\u5b57\u6bb5\u7684\u503c <code>max</code> \u6570\u5b57 (\u53ef\u9009)\u6307\u5b9a\u4e0a\u9650\u96c6\u5408\u4e2d\u5141\u8bb8\u7684\u6700\u5927\u6587\u6863\u6570 \u5728\u63d2\u5165\u6587\u6863\u65f6\uff0cMongoDB\u9996\u5148\u68c0\u67e5\u4e0a\u9650\u96c6\u5408<code>capped</code>\u5b57\u6bb5\u7684\u5927\u5c0f\uff0c\u7136\u540e\u68c0\u67e5<code>max</code>\u5b57\u6bb5\u3002 <ul> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>&gt; db.createCollection(\"coll3\", {capped : true, autoIndexId : true, size : 6142800, max : 10000})\n{\n\"note\" : \"The autoIndexId option is deprecated and will be removed in a future release\",\n        \"ok\" : 1\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Mongodb/Mongodb/#53","title":"5.3. \u5220\u9664\u96c6\u5408","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>db.\u96c6\u5408\u540d.drop()</code></li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>&gt; show collections\ncoll1\ncoll2\ncoll3\n&gt; db.coll1.drop()\ntrue\n&gt; show collections\ncoll2\ncoll\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Mongodb/Mongodb/#6","title":"6. \u6587\u6863\uff08\u8868\u884c\uff09","text":"<pre><code>- \u6587\u6863\u7684\u6570\u636e\u7ed3\u6784\u548c JSON \u57fa\u672c\u4e00\u6837\u3002\n- \u6240\u6709\u5b58\u50a8\u5728\u96c6\u5408\u4e2d\u7684\u6570\u636e\u90fd\u662f BSON \u683c\u5f0f\u3002\n- BSON \u662f\u4e00\u79cd\u7c7b\u4f3c JSON \u7684\u4e8c\u8fdb\u5236\u5f62\u5f0f\u7684\u5b58\u50a8\u683c\u5f0f\uff0c\u662f Binary JSON \u7684\u7b80\u79f0\u3002\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Mongodb/Mongodb/#61","title":"6.1. \u63d2\u5165\u6587\u6863","text":"<ul> <li>\u8bed\u6cd5\uff1a<ul> <li><code>db.\u96c6\u5408\u540d.insert()</code>\uff1a</li> <li><code>db.\u96c6\u5408\u540d.save()</code>\uff1a</li> <li><code>db.\u96c6\u5408\u540d.insertOne()</code>\uff1a\uff083.2\u7248\u672c\u540e\uff09\u63d2\u5165\u4e00\u6761</li> <li><code>db.\u96c6\u5408\u540d.insertMany()</code>:\uff083.2\u7248\u672c\u540e\uff09\u63d2\u5165\u591a\u4e2a</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>&gt; db.test.insertOne({name:\"boo\",age:20})\n{\n\"acknowledged\" : true,\n        \"insertedId\" : ObjectId(\"62b89648de6d7f3e9b6b2c46\")\n}\n&gt; db.test.insertMany([{name:\"tom\",age:19},{name:\"tim\",age:20}])\n{\n\"acknowledged\" : true,\n        \"insertedIds\" : [\nObjectId(\"62b896cfde6d7f3e9b6b2c47\"),\n                ObjectId(\"62b896cfde6d7f3e9b6b2c48\")\n]\n}\n&gt; db.test.save({name:\"chery\",age:18})\nWriteResult({ \"nInserted\" : 1 })\n&gt; db.test.insert({name:\"jim\",age:19})\nWriteResult({ \"nInserted\" : 1 })\n&gt; db.test.find()\n{ \"_id\" : ObjectId(\"62b89648de6d7f3e9b6b2c46\"), \"name\" : \"boo\", \"age\" : 20 }\n{ \"_id\" : ObjectId(\"62b896cfde6d7f3e9b6b2c47\"), \"name\" : \"tom\", \"age\" : 19 }\n{ \"_id\" : ObjectId(\"62b896cfde6d7f3e9b6b2c48\"), \"name\" : \"tim\", \"age\" : 20 }\n{ \"_id\" : ObjectId(\"62b89847de6d7f3e9b6b2c49\"), \"name\" : \"chery\", \"age\" : 18 }\n{ \"_id\" : ObjectId(\"62b89875de6d7f3e9b6b2c4a\"), \"name\" : \"jim\", \"age\" : 19 }\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Mongodb/Mongodb/#62","title":"6.2. \u66f4\u65b0\u6587\u6863","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>db.collection.update(&lt;query&gt;,&lt;update&gt;,{upsert: &lt;boolean&gt;,multi: &lt;boolean&gt;,writeConcern: &lt;document&gt;})</code><ul> <li>query\u00a0: update\u7684\u67e5\u8be2\u6761\u4ef6\uff0c\u7c7b\u4f3csql update\u67e5\u8be2\u5185where\u540e\u9762\u7684\u3002</li> <li>update\u00a0: update\u7684\u5bf9\u8c61\u548c\u4e00\u4e9b\u66f4\u65b0\u7684\u64cd\u4f5c\u7b26\uff08\u5982$,$inc...\uff09\u7b49\uff0c\u4e5f\u53ef\u4ee5\u7406\u89e3\u4e3asql update\u67e5\u8be2\u5185set\u540e\u9762\u7684</li> <li>upsert\u00a0: \u53ef\u9009\uff0c\u8fd9\u4e2a\u53c2\u6570\u7684\u610f\u601d\u662f\uff0c\u5982\u679c\u4e0d\u5b58\u5728update\u7684\u8bb0\u5f55\uff0c\u662f\u5426\u63d2\u5165objNew,true\u4e3a\u63d2\u5165\uff0c\u9ed8\u8ba4\u662ffalse\uff0c\u4e0d\u63d2\u5165\u3002</li> <li>multi\u00a0: \u53ef\u9009\uff0cmongodb \u9ed8\u8ba4\u662ffalse,\u53ea\u66f4\u65b0\u627e\u5230\u7684\u7b2c\u4e00\u6761\u8bb0\u5f55\uff0c\u5982\u679c\u8fd9\u4e2a\u53c2\u6570\u4e3atrue,\u5c31\u628a\u6309\u6761\u4ef6\u67e5\u51fa\u6765\u591a\u6761\u8bb0\u5f55\u5168\u90e8\u66f4\u65b0\u3002</li> <li>writeConcern\u00a0:\u53ef\u9009\uff0c\u629b\u51fa\u5f02\u5e38\u7684\u7ea7\u522b\u3002</li> </ul> </li> <li><code>db.collection.updateOne(&lt;filter&gt;, &lt;update&gt;, &lt;options&gt;)</code>\uff1a\u66f4\u65b0\u5339\u914d\u7684\u4e00\u4e2a\u6587\u6863</li> <li><code>db.collection.updateMany(&lt;filter&gt;, &lt;update&gt;, &lt;options&gt;)</code>\uff1a\u66f4\u65b0\u5339\u914d\u7684\u591a\u4e2a\u6587\u6863</li> <li><code>db.collection.replaceOne(&lt;filter&gt;, &lt;update&gt;, &lt;options&gt;)</code>\uff1a\u66ff\u6362\u5339\u914d\u7684\u4e00\u4e2a\u6587\u6863</li> </ul> <pre><code>title: update\u3001updateOne\u3001updateMany\u95f4\u8054\u7cfb\uff1f\n- \u5f53multi\u9009\u9879\u662ffalse\u65f6\uff0cupdate\u7b49\u4ef7\u4e8eupdateOne\n- \u5f53multi\u9009\u9879\u662fture\u65f6\uff0cupdate\u7b49\u4ef7\u4e8eupdateMany\n</code></pre> <ul> <li>\u793a\u4f8b\uff1aupdate</li> </ul> <pre><code>&gt; db.test.insert({id:001,name:\"boo\",age:19})\nWriteResult({ \"nInserted\" : 1 })\n&gt; db.test.find()\n{ \"_id\" : ObjectId(\"62b8d9e9369975e7c1bb96c5\"), \"id\" : 1, \"name\" : \"boo\", \"age\" : 19 }\n&gt; db.test.update({name:\"boo\"},{$set:{age:20}})\nWriteResult({ \"nMatched\" : 1, \"nUpserted\" : 0, \"nModified\" : 1 })\n&gt; db.test.find()\n{ \"_id\" : ObjectId(\"62b8d9e9369975e7c1bb96c5\"), \"id\" : 1, \"name\" : \"boo\", \"age\" : 20 }\n</code></pre> <ul> <li>\u793a\u4f8b\uff1aupdate multi=true</li> </ul> <pre><code>&gt; db.test.find()\n{ \"_id\" : ObjectId(\"62b8d9e9369975e7c1bb96c5\"), \"id\" : 1, \"name\" : \"boo\", \"age\" : 21 }\n{ \"_id\" : ObjectId(\"62b8db0e369975e7c1bb96c6\"), \"id\" : 2, \"name\" : \"Jim\", \"age\" : 19 }\n{ \"_id\" : ObjectId(\"62b8db1e369975e7c1bb96c7\"), \"id\" : 3, \"name\" : \"Alice\", \"age\" : 21 }\n&gt; db.test.update({age:21},{$set:{age:22}},{multi:true})\nWriteResult({ \"nMatched\" : 2, \"nUpserted\" : 0, \"nModified\" : 2 })\n&gt; db.test.find()\n{ \"_id\" : ObjectId(\"62b8d9e9369975e7c1bb96c5\"), \"id\" : 1, \"name\" : \"boo\", \"age\" : 22 }\n{ \"_id\" : ObjectId(\"62b8db0e369975e7c1bb96c6\"), \"id\" : 2, \"name\" : \"Jim\", \"age\" : 19 }\n{ \"_id\" : ObjectId(\"62b8db1e369975e7c1bb96c7\"), \"id\" : 3, \"name\" : \"Alice\", \"age\" : 22 }\n</code></pre> <ul> <li>\u793a\u4f8b\uff1aupdate \u7528\u6765\u66ff\u6362</li> </ul> <pre><code>&gt; db.test.find()\n{ \"_id\" : ObjectId(\"62b8d9e9369975e7c1bb96c5\"), \"id\" : 1, \"name\" : \"boo\", \"age\" : 21 }\n{ \"_id\" : ObjectId(\"62b8db0e369975e7c1bb96c6\"), \"id\" : 2, \"name\" : \"Jim\", \"age\" : 19 }\n{ \"_id\" : ObjectId(\"62b8db1e369975e7c1bb96c7\"), \"age\" : 21 }\n&gt; db.test.update({age:21},{age:22})\nWriteResult({ \"nMatched\" : 1, \"nUpserted\" : 0, \"nModified\" : 1 })\n&gt; db.test.find()\n{ \"_id\" : ObjectId(\"62b8d9e9369975e7c1bb96c5\"), \"age\" : 22 }\n{ \"_id\" : ObjectId(\"62b8db0e369975e7c1bb96c6\"), \"id\" : 2, \"name\" : \"Jim\", \"age\" : 19 }\n{ \"_id\" : ObjectId(\"62b8db1e369975e7c1bb96c7\"), \"age\" : 21 }\n</code></pre> <ul> <li>\u793a\u4f8b\uff1aupdateOne</li> </ul> <pre><code>&gt; db.test.find()\n{ \"_id\" : ObjectId(\"62b8d9e9369975e7c1bb96c5\"), \"id\" : 1, \"name\" : \"boo\", \"age\" : 22 }\n{ \"_id\" : ObjectId(\"62b8db0e369975e7c1bb96c6\"), \"id\" : 2, \"name\" : \"Jim\", \"age\" : 19 }\n{ \"_id\" : ObjectId(\"62b8db1e369975e7c1bb96c7\"), \"id\" : 3, \"name\" : \"Alice\", \"age\" : 22 }\n&gt; db.test.updateOne({age:22},{$set:{age:21}})\n{ \"acknowledged\" : true, \"matchedCount\" : 1, \"modifiedCount\" : 1 }\n&gt; db.test.find()\n{ \"_id\" : ObjectId(\"62b8d9e9369975e7c1bb96c5\"), \"id\" : 1, \"name\" : \"boo\", \"age\" : 21 }\n{ \"_id\" : ObjectId(\"62b8db0e369975e7c1bb96c6\"), \"id\" : 2, \"name\" : \"Jim\", \"age\" : 19 }\n{ \"_id\" : ObjectId(\"62b8db1e369975e7c1bb96c7\"), \"id\" : 3, \"name\" : \"Alice\", \"age\" : 22 }\n</code></pre> <ul> <li>\u793a\u4f8b\uff1aupdateMany</li> </ul> <pre><code>&gt; db.test.find()\n{ \"_id\" : ObjectId(\"62b8d9e9369975e7c1bb96c5\"), \"id\" : 1, \"name\" : \"boo\", \"age\" : 20 }\n{ \"_id\" : ObjectId(\"62b8db0e369975e7c1bb96c6\"), \"id\" : 2, \"name\" : \"Jim\", \"age\" : 19 }\n{ \"_id\" : ObjectId(\"62b8db1e369975e7c1bb96c7\"), \"id\" : 3, \"name\" : \"Alice\", \"age\" : 20 }\n&gt; db.test.updateMany({age:20},{$set:{age:21}})\n{ \"acknowledged\" : true, \"matchedCount\" : 2, \"modifiedCount\" : 2 }\n&gt; db.test.find()\n{ \"_id\" : ObjectId(\"62b8d9e9369975e7c1bb96c5\"), \"id\" : 1, \"name\" : \"boo\", \"age\" : 21 }\n{ \"_id\" : ObjectId(\"62b8db0e369975e7c1bb96c6\"), \"id\" : 2, \"name\" : \"Jim\", \"age\" : 19 }\n{ \"_id\" : ObjectId(\"62b8db1e369975e7c1bb96c7\"), \"id\" : 3, \"name\" : \"Alice\", \"age\" : 21 }\n</code></pre> <ul> <li>\u793a\u4f8b\uff1areplaceOne</li> </ul> <pre><code>&gt; db.test.replaceOne({age:22},{age:21})\n{ \"acknowledged\" : true, \"matchedCount\" : 1, \"modifiedCount\" : 1 }\n&gt; db.test.find()\n{ \"_id\" : ObjectId(\"62b8d9e9369975e7c1bb96c5\"), \"id\" : 1, \"name\" : \"boo\", \"age\" : 21 }\n{ \"_id\" : ObjectId(\"62b8db0e369975e7c1bb96c6\"), \"id\" : 2, \"name\" : \"Jim\", \"age\" : 19 }\n{ \"_id\" : ObjectId(\"62b8db1e369975e7c1bb96c7\"), \"age\" : 21 }\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Mongodb/Mongodb/#63","title":"6.3. \u5220\u9664\u6587\u6863","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>db.collection.remove(&lt;query&gt;,{justOne: &lt;boolean&gt;,writeConcern: &lt;document&gt;})</code><ul> <li>query\u00a0:\uff08\u53ef\u9009\uff09\u5220\u9664\u7684\u6587\u6863\u7684\u6761\u4ef6\u3002</li> <li>justOne\u00a0: \uff08\u53ef\u9009\uff09\u5982\u679c\u8bbe\u4e3a true \u6216 1\uff0c\u5219\u53ea\u5220\u9664\u4e00\u4e2a\u6587\u6863\uff0c\u5982\u679c\u4e0d\u8bbe\u7f6e\u8be5\u53c2\u6570\uff0c\u6216\u4f7f\u7528\u9ed8\u8ba4\u503c false\uff0c\u5219\u5220\u9664\u6240\u6709\u5339\u914d\u6761\u4ef6\u7684\u6587\u6863\u3002</li> <li>writeConcern\u00a0:\uff08\u53ef\u9009\uff09\u629b\u51fa\u5f02\u5e38\u7684\u7ea7\u522b\u3002</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>&gt; db.test.find()\n{ \"_id\" : ObjectId(\"62b8d9e9369975e7c1bb96c5\"), \"age\" : 22 }\n{ \"_id\" : ObjectId(\"62b8db0e369975e7c1bb96c6\"), \"id\" : 2, \"name\" : \"Jim\", \"age\" : 19 }\n{ \"_id\" : ObjectId(\"62b8db1e369975e7c1bb96c7\"), \"age\" : 21 }\n{ \"_id\" : ObjectId(\"62b8e12c369975e7c1bb96c8\"), \"id\" : 1, \"name\" : \"boo\", \"age\" : 19 }\n{ \"_id\" : ObjectId(\"62b8e13c369975e7c1bb96c9\"), \"id\" : 1, \"name\" : \"Alice\", \"age\" : 20 }\n&gt; db.test.remove({age:21})\nWriteResult({ \"nRemoved\" : 1 })\n&gt; db.test.remove({age:222})\nWriteResult({ \"nRemoved\" : 0 })\n&gt; db.test.remove({age:22})\nWriteResult({ \"nRemoved\" : 1 })\n&gt; db.test.find()\n{ \"_id\" : ObjectId(\"62b8db0e369975e7c1bb96c6\"), \"id\" : 2, \"name\" : \"Jim\", \"age\" : 19 }\n{ \"_id\" : ObjectId(\"62b8e12c369975e7c1bb96c8\"), \"id\" : 1, \"name\" : \"boo\", \"age\" : 19 }\n{ \"_id\" : ObjectId(\"62b8e13c369975e7c1bb96c9\"), \"id\" : 1, \"name\" : \"Alice\", \"age\" : 20 }\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Mongodb/Mongodb/#64","title":"6.4. \u67e5\u8be2\u6587\u6863","text":"<ul> <li>\u67e5\u8be2\u64cd\u4f5c\u8fd0\u7b97\u7b26</li> <li>\u8bed\u6cd5</li> <li>\u793a\u4f8b</li> </ul> <pre><code>&gt; db.test.find()\n{ \"_id\" : ObjectId(\"62b8d9e9369975e7c1bb96c5\"), \"age\" : 22 }\n{ \"_id\" : ObjectId(\"62b8db0e369975e7c1bb96c6\"), \"id\" : 2, \"name\" : \"Jim\", \"age\" : 19 }\n{ \"_id\" : ObjectId(\"62b8db1e369975e7c1bb96c7\"), \"age\" : 21 }\n&gt; db.test.find({age:21})\n</code></pre> <ul> <li>\u793a\u4f8b\uff1a\u503c\u6bd4\u8f83\u67e5\u8be2</li> </ul> <pre><code>&gt; db.test.find()\n{ \"_id\" : ObjectId(\"62b8db0e369975e7c1bb96c6\"), \"id\" : 2, \"name\" : \"Jim\", \"age\" : 19 }\n{ \"_id\" : ObjectId(\"62b8e12c369975e7c1bb96c8\"), \"id\" : 1, \"name\" : \"boo\", \"age\" : 19 }\n{ \"_id\" : ObjectId(\"62b8e13c369975e7c1bb96c9\"), \"id\" : 1, \"name\" : \"Alice\", \"age\" : 20 }\n&gt; db.test.find({age:{$lte:19}})\n{ \"_id\" : ObjectId(\"62b8db0e369975e7c1bb96c6\"), \"id\" : 2, \"name\" : \"Jim\", \"age\" : 19 }\n{ \"_id\" : ObjectId(\"62b8e12c369975e7c1bb96c8\"), \"id\" : 1, \"name\" : \"boo\", \"age\" : 19 }\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Mongodb/Mongodb/#7","title":"7. \u64cd\u4f5c\u7b26","text":""},{"location":"Documents/B-Programming%20Language/SQL/Mongodb/Mongodb/#71","title":"7.1. \u67e5\u8be2","text":"<ul> <li>https://www.mongodb.com/docs/v4.0/reference/operator/query/</li> </ul>"},{"location":"Documents/B-Programming%20Language/SQL/Mongodb/Mongodb/#8","title":"8. \u805a\u5408\u64cd\u4f5c","text":""},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%8E%9F%E7%90%86/","title":"Redis\u539f\u7406","text":""},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%8E%9F%E7%90%86/#1","title":"1 \u6570\u636e\u6301\u4e45\u5316","text":"<ul> <li>\u53c2\u8003\u8d44\u6599</li> </ul> <pre><code>- Redis \u652f\u63012\u79cd\u6301\u4e45\u5316\u65b9\u5f0f\uff0cRBD\uff08\u5feb\u7167\u65b9\u5f0f\uff09\uff0cAOF\uff08\u8ffd\u52a0\u5199\u65e5\u5fd7\u65b9\u5f0f\uff09\n- RBD\u65b9\u5f0f\u53ef\u80fd\u4f1a\u9057\u5931\u6570\u636e\uff0c\u4f46\u6027\u80fd\u9ad8\uff1bAOF\u65b9\u5f0f\u4f1a\u5c06\u6539\u53d8redis\u6570\u636e\u72b6\u6001\u7684\u547d\u4ee4\u5199\u5165\u6587\u4ef6\uff0c\u6027\u80fd\u6709\u5f71\u54cd\n- \u4fee\u6539\u914d\u7f6e\u6587\u4ef6Redis.conf\u6587\u4ef6\u6765\u6539\u53d8\u6301\u4e45\u5316\u7b56\u7565\uff0c\u9ed8\u8ba4\u5f00\u542fRDB\u65b9\u5f0f\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%8E%9F%E7%90%86/#2","title":"2 \u7f13\u5b58","text":"<ul> <li>\u53c2\u8003</li> </ul>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%8E%9F%E7%90%86/#21","title":"2.1 \u7f13\u5b58\u51fb\u7a7f","text":"<ul> <li>\u7f13\u5b58\u51fb\u7a7f\u662f\u6307\u4e00\u4e2a\u70ed\u70b9\u6570\u636e\u5728\u8fc7\u671f\u7684\u77ac\u95f4\u6709\u5927\u91cf\u8bf7\u6c42\u5230\u6765\uff0c\u8fd9\u65f6\u6570\u636e\u5e93\u7684\u8bbf\u95ee\u538b\u529b\u77ac\u95f4\u53d8\u5927\u3002</li> </ul>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%8E%9F%E7%90%86/#22","title":"2.2 \u7f13\u5b58\u7a7f\u900f","text":"<ul> <li>\u7f13\u5b58\u7a7f\u900f\u662f\u6307\u5728\u6570\u636e\u5e93\u4e2d\u90fd\u6ca1\u6709\u7684\u6570\u636e\uff0c\u7f13\u5b58\u4e2d\u4e5f\u6ca1\u6709\u6570\u636e\uff0c\u8bf7\u6c42\u5c31\u6765\u5230\u4e86\u6301\u4e45\u5316\u5c42\uff08\u5982\u6570\u636e\u5e93\uff09\u3002</li> <li>\u89e3\u51b3\u529e\u6cd5\uff1a</li> <li>\u4f7f\u7528\u5e03\u9686\u8fc7\u6ee4\u5668</li> <li>\u7f13\u5b58\u7a7a\u7ed3\u679c</li> </ul>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%8E%9F%E7%90%86/#23","title":"2.3 \u7f13\u5b58\u96ea\u5d29","text":"<ul> <li>\u7f13\u5b58\u96ea\u5d29\u662f\u6307\u7f13\u5b58\u4e2d\u6570\u636e\u5927\u6279\u91cf\u5230\u8fc7\u671f\u65f6\u95f4\uff0c\u800c\u67e5\u8be2\u6570\u636e\u91cf\u5de8\u5927\uff0c\u5f15\u8d77\u6570\u636e\u5e93\u538b\u529b\u8fc7\u5927\u751a\u81f3\u5b95\u673a\u3002\u548c\u7f13\u5b58\u51fb\u7a7f\u4e0d\u540c\u7684\u662f\uff0c\u7f13\u5b58\u51fb\u7a7f\u6307\u5e76\u53d1\u67e5\u540c\u4e00\u6761\u6570\u636e\uff0c\u7f13\u5b58\u96ea\u5d29\u662f\u4e0d\u540c\u6570\u636e\u90fd\u8fc7\u671f\u4e86\uff0c\u5f88\u591a\u6570\u636e\u90fd\u67e5\u4e0d\u5230\u4ece\u800c\u67e5\u6570\u636e\u5e93\u3002</li> </ul>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/","title":"Redis","text":"<ul> <li>\u672c\u6559\u7a0b\u4f7f\u7528\u7684redis\u7248\u672c\u662f7.0.2</li> </ul> <pre><code>- redis\u4e2dkey\u662f\u5927\u5c0f\u5199\u654f\u611f\u7684\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#1-redis","title":"1 Redis\u670d\u52a1\u542f\u505c\u3001\u5ba2\u6237\u7aef\u8fde\u63a5","text":""},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#11-redis","title":"1.1 Redis\u670d\u52a1\u542f\u52a8","text":"<ol> <li>\u542f\u52a8\u670d\u52a1\u65f6\uff0c\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\uff1a<code>redis-server redis.conf</code></li> <li>\u793a\u4f8b</li> </ol> <pre><code>[root@redis redis-7.0.2]# redis-server redis.conf \n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#12-redis","title":"1.2 Redis\u5ba2\u6237\u7aef\u8fde\u63a5","text":"<ul> <li><code>redis-cli [option]</code></li> <li>\u793a\u4f8b\uff1a\u4f7f\u7528\u5bc6\u7801\u8fde\u63a5</li> </ul> <pre><code>[root@redis redis-7.0.2]# redis-cli -a 123456\nWarning: Using a password with '-a' or '-u' option on the command line interface may not be safe.\n127.0.0.1:6379&gt; </code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#2","title":"2 \u5e38\u7528\u547d\u4ee4","text":""},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#21-set","title":"2.1 set","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>set key value [NX|XX] [GET] [EX seconds|PX milliseconds|EXAT unix-time-seconds|PXAT unix-time-milliseconds|KEEPTTL]</code></li> <li>\u529f\u80fd\uff1a\u65b0\u5efa\u6216\u66f4\u65b0\u952e\u503c</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>127.0.0.1:6379&gt; set a v1\nOK\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#22-get","title":"2.2 get","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>get key</code></li> <li>\u529f\u80fd\uff1a\u83b7\u53d6\u6307\u5b9a\u952e\u7684\u503c</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>127.0.0.1:6379&gt; get a\n\"v2\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#23-keys","title":"2.3 keys","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>keys pattern</code></li> <li>\u529f\u80fd\uff1a\u663e\u793a\u5339\u914d\u7684key</li> <li>\u793a\u4f8b</li> </ul> <pre><code>127.0.0.1:6379&gt; keys *\n1) \"a\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#24-exists","title":"2.4 exists","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>exists key [key ...]</code></li> <li>\u529f\u80fd\uff1a\u5224\u65adkey\u662f\u5426\u5b58\u5728</li> <li>\u793a\u4f8b</li> </ul> <pre><code>127.0.0.1:6379&gt; keys *\n1) \"a\"\n2) 127.0.0.1:6379&gt; exists a\n(integer) 1\n127.0.0.1:6379&gt; exists b\n(integer) 0\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#25-del","title":"2.5 del","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>del key [key ...]</code></li> <li>\u529f\u80fd\uff1a\u5220\u9664key</li> <li>\u793a\u4f8b</li> </ul> <pre><code>127.0.0.1:6379&gt; keys *\n1) \"a\"\n2) \"b\"\n127.0.0.1:6379&gt; del a b\n(integer) 2\n127.0.0.1:6379&gt; keys *\n(empty array)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#3","title":"3 \u6570\u636e\u7c7b\u578b","text":""},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#31-string","title":"3.1 String","text":""},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#311-incrdecr","title":"3.1.1 incr\u3001decr","text":"<pre><code>\u5982\u679ckey\u4e0d\u5b58\u5728\uff0c\u5219\u5148\u521b\u5efakey\uff0c\u5e76\u521d\u59cb\u5316\u503c0\uff1b\u503c\u53ef\u4ee5\u662f\u8d1f\u6570\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u9012\u589e\u3001\u9012\u51cf\uff08\u539f\u5b50\u64cd\u4f5c\uff09</li> </ul> <pre><code>127.0.0.1:6379&gt; incr a\n(integer) 1\n127.0.0.1:6379&gt; decr a\n(integer) 0\n127.0.0.1:6379&gt; decr a\n(integer) -1\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#312-strlen","title":"3.1.2 strlen","text":"<ul> <li>\u529f\u80fd\uff1a\u8ba1\u7b97String\u957f\u5ea6</li> <li>\u8bed\u6cd5\uff1a<code>strlen key</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>127.0.0.1:6379&gt; get a\n\"123456\"\n127.0.0.1:6379&gt; strlen a\n(integer) 6\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#313-append","title":"3.1.3 append","text":"<ul> <li>\u529f\u80fd\uff1a\u8ffd\u52a0String</li> <li>\u8bed\u6cd5\uff1a<code>append key value</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>127.0.0.1:6379&gt; append a 123\n(integer) 3\n127.0.0.1:6379&gt; get a\n\"123\"\n127.0.0.1:6379&gt; append a 456\n(integer) 6\n127.0.0.1:6379&gt; get a\n\"123456\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#32-hash","title":"3.2 Hash","text":"<ul> <li>\u7279\u70b9\uff1a\u4e00\u4e2ahash key\u53ef\u4ee5\u6709\u591a\u4e2a\u5b57\u6bb5\uff0c\u6bcf\u4e00\u4e2a\u5b57\u6bb5\u90fd\u6709\u4e00\u4e2a\u503c</li> </ul> <pre><code>Hash\u547d\u4ee4\u90fd\u662f\u4ee5h\u524d\u7f00\u5f00\u5934\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#321-hsethmset","title":"3.2.1 hset\u3001hmset","text":"<ul> <li>\u529f\u80fd\uff1a\u7ed9hash\u5b57\u6bb5\u8d4b\u503c</li> <li>\u8bed\u6cd5\uff1a<ul> <li><code>hset key field value [field value ...]</code></li> <li><code>hmset key field value [field value ...]</code></li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>127.0.0.1:6379&gt; hset h1 id 001 age 15\n(integer) 2\n127.0.0.1:6379&gt; hmset h2 id 002 age 14\nOK\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#322-hget","title":"3.2.2 hget","text":"<ul> <li>\u529f\u80fd\uff1a\u83b7\u53d6hash\u5b57\u6bb5\u503c</li> <li>\u8bed\u6cd5\uff1a<code>hget key field</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>127.0.0.1:6379&gt; hget h1 id\n\"001\"\n127.0.0.1:6379&gt; hget h1 age\n\"15\"\n````\n\n#### 3.2.3 hvals\n- \u529f\u80fd\uff1a\u83b7\u53d6hash\u6240\u6709\u5b57\u6bb5\u503c\n- \u8bed\u6cd5\uff1a`hvals key`\n- \u793a\u4f8b\n\n```shell\n127.0.0.1:6379&gt; hvals h1\n1) \"001\"\n2) \"14\"\n````\n\n#### 3.2.4 hkeys\n- \u529f\u80fd\uff1a\u83b7\u53d6\u6307\u5b9ahash\u5b57\u6bb5\u540d\n- \u8bed\u6cd5\uff1a`hkeys key`\n- \u793a\u4f8b\n\n```shell\n127.0.0.1:6379&gt; hkeys h1\n1) \"id\"\n2) \"age\"\n127.0.0.1:6379&gt; hkeys h2\n1) \"id\"\n2) \"age\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#325-hlen","title":"3.2.5 hlen","text":"<ul> <li>\u529f\u80fd\uff1a\u83b7\u53d6hash\u5b57\u6bb5\u6570\u91cf</li> <li>\u8bed\u6cd5\uff1a<code>hlen key</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>127.0.0.1:6379&gt; hkeys h1\n1) \"id\"\n2) \"age\"\n127.0.0.1:6379&gt; hlen h1\n(integer) 2\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#326-hdel","title":"3.2.6 hdel","text":"<ul> <li>\u529f\u80fd\uff1a\u5220\u9664hash\u5b57\u6bb5</li> <li>\u8bed\u6cd5\uff1a<code>hdel key field [field ...]</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>127.0.0.1:6379&gt; hkeys h1\n1) \"id\"\n2) \"age\"\n127.0.0.1:6379&gt; hdel h1 id age\n(integer) 2\n127.0.0.1:6379&gt; hkeys h1\n(empty array)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#327-exists","title":"3.2.7 exists","text":"<ul> <li>\u529f\u80fd\uff1a\u5224\u65adhash\u5b57\u6bb5\u662f\u5426\u5b58\u5728</li> <li>\u8bed\u6cd5\uff1a<code>hexists key field</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>127.0.0.1:6379&gt; hset h1 id 001 age 15\n(integer) 2\n127.0.0.1:6379&gt; hexists h1 id\n(integer) 1\n127.0.0.1:6379&gt; hexists h1 name\n(integer) 0\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#328-hincrby","title":"3.2.8 hincrby","text":"<ul> <li>\u529f\u80fd\uff1a\u7ed9hash\u5b57\u6bb5\uff08\u6574\u5f62\uff09\u589e\u52a0\u6307\u5b9a\u589e\u91cf\uff08\u53ef\u4ee5\u8d1f\u6570\uff09</li> <li>\u8bed\u6cd5\uff1a<code>hincrby key field increment</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>127.0.0.1:6379&gt; hincrby h1 age 1\n(integer) 16\n127.0.0.1:6379&gt; hincrby h1 age -2\n(integer) 14\n127.0.0.1:6379&gt; hget h1 age\n\"14\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#329-hincrbyfloat","title":"3.2.9 hincrbyfloat","text":"<ul> <li>\u529f\u80fd\uff1a\u7ed9hash\u5b57\u6bb5\uff08\u6d6e\u70b9\u578b\uff09\u589e\u52a0\u6307\u5b9a\u589e\u91cf</li> <li>\u8bed\u6cd5\uff1a<code>hincrbyfloat key field increment</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>127.0.0.1:6379&gt; hset h1 weight 59.5\n(integer) 1\n127.0.0.1:6379&gt; hincrbyfloat h1 weight 1.4\n\"60.9\"\n127.0.0.1:6379&gt; hget h1 weight\n\"60.9\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#33-list","title":"3.3 List","text":"<pre><code>List \u662f\u4e00\u4e2a\u53cc\u5411\u94fe\u8868\u3002\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#331-lpushrpush","title":"3.3.1 LPUSH\u3001RPUSH","text":"<ul> <li>\u529f\u80fd\uff1a<ul> <li><code>LPUSH</code>\uff1a\u5411list\u5934\u90e8\u538b\u5165\u6570\u636e</li> <li><code>RPUSH</code>\uff1a\u5411list\u5c3e\u90e8\u538b\u5165\u6570\u636e</li> </ul> </li> <li>\u8bed\u6cd5\uff1a<ul> <li><code>LPUSH key element [element ...]</code></li> <li><code>RPUSH key element [element ...]</code></li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>127.0.0.1:6379&gt; LPUSH L1 a b c (integer) 3\n127.0.0.1:6379&gt; RPUSH L2 a b c\n(integer) 3\n127.0.0.1:6379&gt; LRANGE L1 0 2\n1) \"c\"\n2) \"b\"\n3) \"a\"\n127.0.0.1:6379&gt; LRANGE L2 0 2\n1) \"a\"\n2) \"b\"\n3) \"c\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#332-lpoprpop","title":"3.3.2 LPOP\u3001RPOP","text":"<ul> <li>\u529f\u80fd\uff1a<ul> <li><code>LPUSH</code>\uff1a\u4ecelist\u5934\u90e8\u79fb\u9664\u6570\u636e</li> <li><code>RPUSH</code>\uff1a\u4ecelist\u5c3e\u90e8\u79fb\u9664\u6570\u636e</li> </ul> </li> <li>\u8bed\u6cd5\uff1a<ul> <li><code>LPOP key [count]</code></li> <li><code>RPOP key [count]</code></li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>127.0.0.1:6379&gt; LRANGE L2 0 2\n1) \"a\"\n2) \"b\"\n3) \"c\"\n127.0.0.1:6379&gt; LPOP L1 1\n1) \"c\"\n127.0.0.1:6379&gt; RPOP L1 1\n1) \"a\"\n127.0.0.1:6379&gt; LRANGE L1 0 2\n1) \"b\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#333-lset","title":"3.3.3 LSET","text":"<ul> <li>\u529f\u80fd\uff1a\u4fee\u6539\u7d22\u5f15\u4f4d\u7f6e\u7684\u6570\u636e</li> <li>\u8bed\u6cd5\uff1a<code>LSET key index element</code></li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>127.0.0.1:6379&gt; LSET L1 0 a1\nOK\n127.0.0.1:6379&gt; LRANGE L1 0 2\n1) \"a1\"\n2) \"b\"\n3) \"a\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#334-lindex","title":"3.3.4 LINDEX","text":"<ul> <li>\u529f\u80fd\uff1a\u83b7\u53d6\u6307\u5b9a\u7d22\u5f15\u6570\u636e</li> <li>\u8bed\u6cd5\uff1a<code>LINDEX key index</code></li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>127.0.0.1:6379&gt; LRANGE L1 0 2\n1) \"a1\"\n2) \"b\"\n3) \"a\"\n127.0.0.1:6379&gt; LINDEX L1 0\n\"a1\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#335-llen","title":"3.3.5 LLEN","text":"<ul> <li>\u529f\u80fd\uff1a\u8ba1\u7b97list\u957f\u5ea6</li> <li>\u8bed\u6cd5\uff1a<code>LLEN key</code></li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>127.0.0.1:6379&gt; LLEN L1\n(integer) 3\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#336-lrange","title":"3.3.6 LRANGE","text":"<ul> <li>\u529f\u80fd\uff1a\u8fd4\u56delist\u533a\u95f4\u8303\u56f4\u6570\u636e</li> <li>\u8bed\u6cd5\uff1a<code>LRANGE key start stop</code></li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>127.0.0.1:6379&gt; LRANGE L1 0 2\n1) \"a1\"\n2) \"b\"\n3) \"a\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#337-linsert","title":"3.3.7 LINSERT","text":"<ul> <li>\u529f\u80fd\uff1a\u5728list\u67d0\u4e2a\u503c\u524d\u6216\u540e\u6dfb\u52a0\u6570\u636e</li> <li>\u8bed\u6cd5\uff1a<code>LINSERT key BEFORE|AFTER pivot element</code></li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>127.0.0.1:6379&gt; LINSERT L1 AFTER a  a2\n(integer) 4\n127.0.0.1:6379&gt; LRANGE L1 0 3\n1) \"a1\"\n2) \"b\"\n3) \"a\"\n4) \"a2\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#34-set","title":"3.4 Set","text":"<pre><code>Set \u662f\u4e00\u4e2a\u65e0\u5e8f\u96c6\u5408\uff0c\u5185\u90e8\u6570\u636e\u552f\u4e00\uff0c\u662f\u7531hashtable\u5b9e\u73b0\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#341-sadd","title":"3.4.1 SADD","text":"<ul> <li>\u529f\u80fd\uff1a\u5411Set\u6dfb\u52a0\u5143\u7d20</li> <li>\u8bed\u6cd5\uff1a<code>SADD key member [member ...]</code></li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>127.0.0.1:6379&gt; SADD s1 1 2\n(integer) 2\n127.0.0.1:6379&gt; SMEMBERS s1\n1) \"1\"\n2) \"2\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#342-scard","title":"3.4.2 SCARD","text":"<ul> <li>\u529f\u80fd\uff1a\u8fd4\u56deSet\u5143\u7d20\u6570\u91cf</li> <li>\u8bed\u6cd5\uff1a<code>SCARD key</code></li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>127.0.0.1:6379&gt; SMEMBERS s1\n1) \"c\"\n2) \"b\"\n127.0.0.1:6379&gt; SCARD s1\n(integer) 2\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#343-smembers","title":"3.4.3 SMEMBERS","text":"<ul> <li>\u529f\u80fd\uff1a\u67e5\u770bSet\u5143\u7d20\u6210\u5458</li> <li>\u8bed\u6cd5\uff1a<code>SMEMBERS key</code></li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>127.0.0.1:6379&gt; SMEMBERS s1\n1) \"1\"\n2) \"2\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#344-sismember","title":"3.4.4 SISMEMBER","text":"<ul> <li>\u529f\u80fd\uff1a\u67e5\u770bSet\u5143\u7d20\u6210\u5458\u662f\u5426\u5b58\u5728</li> <li>\u8bed\u6cd5\uff1a<code>SISMEMBER key member</code></li> <li>\u8fd4\u56de\u503c\uff1a<ul> <li><code>1</code>\uff1a\u5b58\u5728</li> <li><code>0</code>\uff1a\u4e0d\u5b58\u5728</li> </ul> </li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>127.0.0.1:6379&gt; SMEMBERS s1\n1) \"1\"\n2) \"2\"\n127.0.0.1:6379&gt; SISMEMBER s1 1\n(integer) 1\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#345-srandmember","title":"3.4.5 SRANDMEMBER","text":"<ul> <li>\u529f\u80fd\uff1a\u968f\u673a\u8fd4\u56deSet\u96c6\u5408\u5143\u7d20</li> <li>\u8bed\u6cd5\uff1a<code>SRANDMEMBER key [count]</code><ul> <li>1)\u5f53<code>count &gt; 0</code>\u4e14<code>count &lt;= \u96c6\u5408\u5927\u5c0f</code>\uff1a\u8fd4\u56de\u5143\u7d20\u4e0d\u91cd\u590d</li> <li>2)\u5f53<code>count &gt; 0</code>\u4e14<code>count &gt; \u96c6\u5408\u5927\u5c0f</code>\uff1a\u8fd4\u56de\u5143\u7d20\u91cd\u590d</li> <li>3)\u5f53<code>count &lt; 0</code>\u4e14<code>|count| &lt;= \u96c6\u5408\u5927\u5c0f</code>\uff1a\u8fd4\u56de\u5143\u7d20\u4e0d\u91cd\u590d\uff08\u540c1\uff09</li> <li>4)\u5f53<code>count &lt; 0</code>\u4e14<code>|count| &gt; \u96c6\u5408\u5927\u5c0f</code>\uff1a\u8fd4\u56de\u5143\u7d20\u91cd\u590d\uff08\u540c2\uff09</li> </ul> </li> <li>\u8fd4\u56de\u503c\uff1a\u8fd4\u56de\u79fb\u9664\u5143\u7d20\u7684\u4e2a\u6570</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>127.0.0.1:6379&gt; SMEMBERS s1\n1) \"1\"\n2) \"b\"\n3) \"a\"\n4) \"c\"\n127.0.0.1:6379&gt; SRANDMEMBER s1 3\n1) \"a\"\n2) \"1\"\n3) \"b\"\n127.0.0.1:6379&gt; SRANDMEMBER s1 -3\n1) \"1\"\n2) \"b\"\n3) \"c\"\n127.0.0.1:6379&gt; SRANDMEMBER s1 -5\n1) \"1\"\n2) \"1\"\n3) \"b\"\n4) \"1\"\n5) \"b\"\n127.0.0.1:6379&gt; SRANDMEMBER s1 -5\n1) \"1\"\n2) \"a\"\n3) \"1\"\n4) \"b\"\n5) \"1\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#346-srem","title":"3.4.6 SREM","text":"<ul> <li>\u529f\u80fd\uff1a\u79fb\u9664Set\u4e2d\u7684\u5143\u7d20</li> <li>\u8bed\u6cd5\uff1a<code>SREM key member [member ...]</code></li> <li>\u8fd4\u56de\u503c\uff1a\u8fd4\u56de\u79fb\u9664\u5143\u7d20\u7684\u4e2a\u6570</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>127.0.0.1:6379&gt; SMEMBERS s1\n1) \"a\"\n2) \"1\"\n3) \"b\"\n4) \"2\"\n5) \"c\"\n127.0.0.1:6379&gt; SREM s1 2\n(integer) 1\n127.0.0.1:6379&gt; SMEMBERS s1\n1) \"1\"\n2) \"b\"\n3) \"a\"\n4) \"c\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#347-spop","title":"3.4.7 SPOP","text":"<ul> <li>\u529f\u80fd\uff1a\u968f\u673a\u79fb\u9664Set\u4e2d\u5143\u7d20</li> <li>\u8bed\u6cd5\uff1a<code>SPOP key [count]</code></li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>127.0.0.1:6379&gt; SMEMBERS s1\n1) \"a\"\n2) \"c\"\n3) \"1\"\n4) \"b\"\n127.0.0.1:6379&gt; SPOP s1 1\n1) \"1\"\n127.0.0.1:6379&gt; SMEMBERS s1\n1) \"a\"\n2) \"c\"\n3) \"b\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#348-smove","title":"3.4.8 SMOVE","text":"<ul> <li>\u529f\u80fd\uff1a\u4ece\u4e00\u4e2aSet\u4e2d\u79fb\u52a8\u5143\u7d20\u5230\u53e6\u4e00\u4e2aSet\u4e2d</li> <li>\u8bed\u6cd5\uff1a<code>SMOVE source destination member</code></li> <li>\u8fd4\u56de\u503c\uff1a</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>127.0.0.1:6379&gt; SMEMBERS s2\n1) \"1\"\n2) \"2\"\n3) \"3\"\n4) \"4\"\n5) \"5\"\n6) \"6\"\n127.0.0.1:6379&gt; SMOVE s1 s2 a (integer) 1\n127.0.0.1:6379&gt; SMEMBERS s2\n1) \"5\"\n2) \"3\"\n3) \"a\"\n4) \"6\"\n5) \"2\"\n6) \"1\"\n7) \"4\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#349-sdiff","title":"3.4.9 SDIFF","text":"<ul> <li>\u529f\u80fd\uff1a\u8fd4\u56de\u4e00\u4e2aSet\u4e0e\u53e6\u4e00\u4e2aSet\u7684\u5dee\u96c6\u7684\u5143\u7d20</li> <li>\u8bed\u6cd5\uff1a<code>DIFF key [key ...]</code></li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>127.0.0.1:6379&gt; SADD s1 a b c 1 2 3 4 5\n(integer) 8\n127.0.0.1:6379&gt; SADD s2 b c d 4 5 6 7 8\n(integer) 8\n127.0.0.1:6379&gt; SDIFF s1 s2\n1) \"3\"\n2) \"a\"\n3) \"1\"\n4) \"2\"\n127.0.0.1:6379&gt; SDIFF s2 s1\n1) \"8\"\n2) \"d\"\n3) \"6\"\n4) \"7\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#3410-sdiffstore","title":"3.4.10 SDIFFSTORE","text":"<ul> <li>\u529f\u80fd\uff1a\u5c06\u4e00\u4e2aSet\u4e0e\u53e6\u4e00\u4e2aSet\u7684\u5dee\u96c6\u7684\u5143\u7d20\u5b58\u5728\u53e6\u4e00\u4e2aSet\u4e2d</li> <li>\u8bed\u6cd5\uff1a<code>SDIFFSTORE destination key [key ...]</code></li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>127.0.0.1:6379&gt; SDIFFSTORE s3 s1 s2\n(integer) 4\n127.0.0.1:6379&gt; SMEMBERS s3\n1) \"3\"\n2) \"a\"\n3) \"1\"\n4) \"2\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#3411-sinter","title":"3.4.11 SINTER","text":"<ul> <li>\u529f\u80fd\uff1a\u8fd4\u56de\u4e00\u4e2aSet\u4e0e\u53e6\u4e00\u4e2aSet\u7684\u4ea4\u96c6\u7684\u5143\u7d20</li> <li>\u8bed\u6cd5\uff1a<code>SINTER key [key ...]</code></li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>127.0.0.1:6379&gt; SADD s1 a b c 1 2 3 4 5\n(integer) 8\n127.0.0.1:6379&gt; SADD s2 b c d 4 5 6 7 8\n(integer) 8\n127.0.0.1:6379&gt; SINTER s1 s2\n1) \"5\"\n2) \"c\"\n3) \"b\"\n4) \"4\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#3412-sinterstore","title":"3.4.12 SINTERSTORE","text":"<ul> <li>\u529f\u80fd\uff1a\u5c06\u4e00\u4e2aSet\u4e0e\u53e6\u4e00\u4e2aSet\u7684\u4ea4\u96c6\u7684\u5143\u7d20\u5b58\u5728\u53e6\u4e00\u4e2aSet\u4e2d</li> <li>\u8bed\u6cd5\uff1a<code>SINTERSTORE destination key [key ...]</code></li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>127.0.0.1:6379&gt; SINTERSTORE s4 s1 s2\n(integer) 4\n127.0.0.1:6379&gt; SMEMBERS s4\n1) \"5\"\n2) \"c\"\n3) \"4\"\n4) \"b\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#3413-sunion","title":"3.4.13 SUNION","text":"<ul> <li>\u529f\u80fd\uff1a\u8fd4\u56de\u4e00\u4e2aSet\u4e0e\u53e6\u4e00\u4e2aSet\u7684\u5e76\u96c6\u7684\u5143\u7d20</li> <li>\u8bed\u6cd5\uff1a<code>SUNION key [key ...]</code></li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>127.0.0.1:6379&gt; SADD s1 a b c 1 2 3 4 5\n(integer) 8\n127.0.0.1:6379&gt; SADD s2 b c d 4 5 6 7 8\n(integer) 8\n127.0.0.1:6379&gt; SUNION s1 s2\n 1) \"5\"\n2) \"d\"\n3) \"6\"\n4) \"7\"\n5) \"2\"\n6) \"8\"\n7) \"1\"\n8) \"4\"\n9) \"3\"\n10) \"a\"\n11) \"c\"\n12) \"b\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#3414-sunionstore","title":"3.4.14 SUNIONSTORE","text":"<ul> <li>\u529f\u80fd\uff1a\u5c06\u4e00\u4e2aSet\u4e0e\u53e6\u4e00\u4e2aSet\u7684\u5e76\u96c6\u7684\u5143\u7d20\u5b58\u5728\u53e6\u4e00\u4e2aSet\u4e2d</li> <li>\u8bed\u6cd5\uff1a<code>SUNIONSTORE destination key [key ...]</code></li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>127.0.0.1:6379&gt; SUNIONSTORE s5 s1 s2\n(integer) 12\n127.0.0.1:6379&gt; SMEMBERS s5\n 1) \"5\"\n2) \"d\"\n3) \"6\"\n4) \"7\"\n5) \"2\"\n6) \"8\"\n7) \"1\"\n8) \"4\"\n9) \"3\"\n10) \"a\"\n11) \"c\"\n12) \"b\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#35-zset","title":"3.5 ZSet","text":"<pre><code>title: ZSet \u7279\u70b9\n- ZSet \u662f\u6709\u5e8f\u96c6\u5408\uff0c\u4e14\u5143\u7d20\u4e0d\u91cd\u590d\uff08Set\u662f\u65e0\u5e8f\u96c6\u5408\uff09\u3002\n- \u6bcf\u4e00\u4e2a\u5143\u7d20\u5173\u8054\u4e00\u4e2a64\u4f4d\u6d6e\u70b9\u578b\u5206\u6570\uff0c\u5e76\u901a\u8fc7\u5206\u6570\u6765\u6392\u5e8f\uff0c\u5206\u6570\u53ef\u4ee5\u91cd\u590d\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#351-zadd","title":"3.5.1 ZADD","text":"<ul> <li>\u529f\u80fd\uff1a\u5411ZSet\u96c6\u5408\u6dfb\u52a0\u5143\u7d20</li> <li>\u8bed\u6cd5\uff1a<code>ZADD key [NX|XX] [GT|LT] [CH] [INCR] score member [score member ...]</code><ul> <li>XX: \u4ec5\u4ec5\u66f4\u65b0\u5b58\u5728\u7684\u6210\u5458\uff0c\u4e0d\u6dfb\u52a0\u65b0\u6210\u5458\u3002</li> <li>NX: \u4e0d\u66f4\u65b0\u5b58\u5728\u7684\u6210\u5458\u3002\u53ea\u6dfb\u52a0\u65b0\u6210\u5458\u3002</li> <li>LT: \u53ea\u6709\u5f53\u65b0\u5206\u6570\u5c0f\u4e8e\u5f53\u524d\u5206\u6570\u65f6\u624d\u66f4\u65b0\u73b0\u6709\u5143\u7d20\u3002\u6b64\u6807\u5fd7\u5e76\u4e0d\u963b\u6b62\u6dfb\u52a0\u65b0\u5143\u7d20\u3002</li> <li>GT: \u53ea\u6709\u5f53\u65b0\u5206\u6570\u5927\u4e8e\u5f53\u524d\u5206\u6570\u65f6\u624d\u66f4\u65b0\u73b0\u6709\u5143\u7d20\u3002\u6b64\u6807\u5fd7\u5e76\u4e0d\u963b\u6b62\u6dfb\u52a0\u65b0\u5143\u7d20\u3002</li> <li>CH: \u4fee\u6539\u8fd4\u56de\u503c\u4e3a\u53d1\u751f\u53d8\u5316\u7684\u6210\u5458\u603b\u6570\uff0c\u539f\u59cb\u662f\u8fd4\u56de\u65b0\u6dfb\u52a0\u6210\u5458\u7684\u603b\u6570 (CH \u662f\u00a0changed\u00a0\u7684\u610f\u601d)\u3002\u66f4\u6539\u7684\u5143\u7d20\u662f\u65b0\u6dfb\u52a0\u7684\u6210\u5458\uff0c\u5df2\u7ecf\u5b58\u5728\u7684\u6210\u5458\u66f4\u65b0\u5206\u6570\u3002 \u6240\u4ee5\u5728\u547d\u4ee4\u4e2d\u6307\u5b9a\u7684\u6210\u5458\u6709\u76f8\u540c\u7684\u5206\u6570\u5c06\u4e0d\u88ab\u8ba1\u7b97\u5728\u5185\u3002\u6ce8\uff1a\u5728\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c<code>ZADD</code>\u8fd4\u56de\u503c\u53ea\u8ba1\u7b97\u65b0\u6dfb\u52a0\u6210\u5458\u7684\u6570\u91cf\u3002</li> <li>INCR: \u5f53<code>ZADD</code>\u6307\u5b9a\u8fd9\u4e2a\u9009\u9879\u65f6\uff0c\u6210\u5458\u7684\u64cd\u4f5c\u5c31\u7b49\u540cZINCRBY\u547d\u4ee4\uff0c\u5bf9\u6210\u5458\u7684\u5206\u6570\u8fdb\u884c\u9012\u589e\u64cd\u4f5c\u3002</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>127.0.0.1:6379&gt; ZADD z1 78.32 a 56.35 b 88.01 c\n(integer) 3\n127.0.0.1:6379&gt; ZRANGE z1 0 2\n1) \"b\"\n2) \"a\"\n3) \"c\"\n127.0.0.1:6379&gt; ZMSCORE z1 a b c\n1) \"78.319999999999993\"\n2) \"56.350000000000001\"\n3) \"88.010000000000005\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#352-zrange","title":"3.5.2 ZRANGE","text":"<ul> <li>\u529f\u80fd\uff1a\u8fd4\u56deZSet\u533a\u95f4\u8303\u56f4\u5143\u7d20</li> <li>\u8bed\u6cd5\uff1a<code>ZRANGE key min max [BYSCORE|BYLEX] [REV] [LIMIT offset count] [WITHSCORES]</code></li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>127.0.0.1:6379&gt; ZADD z1 78.32 a 56.35 b 88.01 c\n(integer) 3\n127.0.0.1:6379&gt; ZRANGE z1 0 2\n1) \"b\"\n2) \"a\"\n3) \"c\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#353-zmscore","title":"3.5.3 ZMSCORE","text":"<ul> <li>\u529f\u80fd\uff1a\u8fd4\u56deZSet\u5143\u7d20\u7684score\u5206\u6570</li> <li>\u8bed\u6cd5\uff1a<code>ZMSCORE key member [member ...]</code></li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>127.0.0.1:6379&gt; ZADD z1 78.32 a 56.35 b 88.01 c\n(integer) 3\n127.0.0.1:6379&gt; ZMSCORE z1 a b c\n1) \"78.319999999999993\"\n2) \"56.350000000000001\"\n3) \"88.010000000000005\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#4","title":"4 \u591a\u6570\u636e\u5e93","text":"<pre><code>1. Redis\u4e0b\u6570\u636e\u5e93\u662f\u7531\u4e00\u4e2a\u6574\u6570\u7d22\u5f15\u6807\u8bc6\uff0c\u53ef\u4ee5\u901a\u8fc7redis.conf\u914d\u7f6e\u6587\u4ef6\u4e2d`databases = num`\u6765\u8bbe\u7f6e\u6570\u636e\u5e93\u603b\u6570\n2. \u5ba2\u6237\u7aef\u9ed8\u8ba4\u8fde\u63a5\u6570\u636e\u5e930\n3. \u901a\u8fc7`select index`\u6765\u5207\u6362\u6570\u636e\u5e93\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#41-select","title":"4.1 select","text":"<ul> <li>\u529f\u80fd\uff1a\u5207\u6362\u6570\u636e\u5e93</li> <li>\u8bed\u6cd5\uff1a<code>select index</code></li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>127.0.0.1:6379&gt; select 0\nOK\n127.0.0.1:6379&gt; keys *\n1) \"id1\"\n2) \"h2\"\n3) \"h1\"\n4) \"L2\"\n5) \"L1\"\n6) \"z1\"\n7) \"student1\"\n8) \"a\"\n127.0.0.1:6379&gt; select 3\nOK\n127.0.0.1:6379[3]&gt; keys *\n(empty array)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#42-42flushdb","title":"4.2 4.2.flushdb","text":"<ul> <li>\u529f\u80fd\uff1a\u6e05\u7a7a\u5f53\u524d\u6570\u636e\u5e93\u6570\u636e</li> <li>\u8bed\u6cd5\uff1a<code>flushdb [ASYNC|SYNC]</code></li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>127.0.0.1:6379[4]&gt; keys *\n1) \"id1\"\n127.0.0.1:6379[4]&gt; flushdb\nOK\n127.0.0.1:6379[4]&gt; keys *\n(empty array)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#43-flushall","title":"4.3 flushall","text":"<ul> <li>\u529f\u80fd\uff1a\u6e05\u7a7a\u6240\u6709\u6570\u636e\u5e93\u6570\u636e</li> <li>\u8bed\u6cd5\uff1a<code>flushall [ASYNC|SYNC]</code></li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>127.0.0.1:6379[3]&gt; keys *\n1) \"id2\"\n127.0.0.1:6379[3]&gt; select 0\nOK\n127.0.0.1:6379&gt; keys *\n1) \"h2\"\n2) \"h1\"\n3) \"L2\"\n4) \"L1\"\n5) \"z1\"\n6) \"student1\"\n7) \"a\"\n127.0.0.1:6379&gt; flushall\nOK\n127.0.0.1:6379&gt; keys *\n(empty array)\n127.0.0.1:6379&gt; select 3\nOK\n127.0.0.1:6379[3]&gt; keys *\n(empty array)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#44-move","title":"4.4 move","text":"<ul> <li>\u529f\u80fd\uff1a\u5c06\u4e00\u4e2a\u6570\u636e\u5e93\u4e2dkey\u79fb\u52a8\u5230\u53e6\u4e00\u4e2a\u6570\u636e\u5e93</li> <li>\u8bed\u6cd5\uff1a<code>move key db</code></li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>127.0.0.1:6379[3]&gt; keys *\n1) \"id1\"\n2) \"id2\"\n127.0.0.1:6379[3]&gt; move id1 4\n(integer) 1\n127.0.0.1:6379[3]&gt; keys *\n1) \"id2\"\n127.0.0.1:6379[3]&gt; select 4\nOK\n127.0.0.\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#5","title":"5 \u4e8b\u52a1","text":"<pre><code>title: Redis\u4e8b\u52a1\u7279\u70b9\n1. \u6279\u91cf\u64cd\u4f5c\u5728\u53d1\u9001EXEC\u547d\u4ee4\u524d\u88ab\u653e\u5165\u961f\u5217\u7f13\u5b58\u3002\n2. \u6536\u5230EXEC\u547d\u4ee4\u540e\u8fdb\u5165\u4e8b\u52a1\u6267\u884c\uff0c\u4e8b\u52a1\u4e2d\u4efb\u610f\u547d\u4ee4\u6267\u884c\u5931\u8d25\uff0c\u5176\u4f59\u547d\u4ee4\u4f9d\u7136\u88ab\u6267\u884c\u3002\n3. \u5728\u4e8b\u52a1\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u5176\u4ed6\u5ba2\u6237\u7aef\u63d0\u4ea4\u7684\u547d\u4ee4\u8bf7\u6c42\u4e0d\u4f1a\u63d2\u5165\u5230\u4e8b\u52a1\u6267\u884c\u547d\u4ee4\u5217\u4e2d\u3002\n</code></pre> <pre><code>title: Redis\u4e8b\u52a1\u8fc7\u7a0b\n1. \u4ee5`multi`\u6807\u8bb0\u4e8b\u52a1\u5f00\u59cb\n2. \u4ee5`exec`\u6807\u8bb0\u6267\u884c\u4e8b\u52a1\u4e2d\u5df2\u63d0\u4ea4\u7684\u547d\u4ee4\n3. `discard`\u4e0d\u6267\u884c\u4e8b\u52a1\u4e2d\u547d\u4ee4\uff0c\u7ed3\u675f\u4e8b\u52a1\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>127.0.0.1:6379[3]&gt; set user:id1 10000\nOK\n127.0.0.1:6379[3]&gt; get user:id1\n\"10000\"\n127.0.0.1:6379[3]&gt; multi\nOK\n127.0.0.1:6379[3](TX)&gt; incr user:id1\nQUEUED\n127.0.0.1:6379[3](TX)&gt; incr user:id1\nQUEUED\n127.0.0.1:6379[3](TX)&gt; get user:id1\nQUEUED\n127.0.0.1:6379[3](TX)&gt; exec\n1) (integer) 10001\n2) (integer) 10002\n3) \"10002\"\n127.0.0.1:6379[3]&gt; multi\nOK\n127.0.0.1:6379[3](TX)&gt; incr user:id1\nQUEUED\n127.0.0.1:6379[3](TX)&gt; incr user:id1\nQUEUED\n127.0.0.1:6379[3](TX)&gt; discard\nOK\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#51-watch","title":"5.1 watch","text":"<pre><code>watch \u5728\u6267\u884c`multi`\u547d\u4ee4\u524d\u6267\u884c\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u76d1\u542c\u4e8b\u52a1\u4e2d\u7684key\uff0c\u5f53\u76d1\u542c\u7684key\u5728exec\u4e8b\u52a1\u65f6\u88ab\u5176\u5b83\u5ba2\u6237\u7aef\u4fee\u6539\uff0c\u5219\u6267\u884cexec\u4e8b\u52a1\u65f6\u4f1a\u5931\u8d25</li> <li>\u8bed\u6cd5\uff1a<code>watch key [key ...]</code></li> <li>\u793a\u4f8b\uff1a\u5728\u76d1\u542ckey\u540e\uff0c\u5f00\u542f\u4e8b\u52a1\uff0c\u6b64\u65f6\u53e6\u4e00\u4e2a\u5ba2\u6237\u7aef\u4fee\u6539\u4e86key\u7684\u503c\uff0c\u6700\u597d\u6267\u884cexec\uff0c\u8fd4\u56denil\u9519\u8bef</li> </ul> <pre><code>127.0.0.1:6379[3]&gt; watch user:id1\nOK\n127.0.0.1:6379[3]&gt; multi\nOK\n127.0.0.1:6379[3](TX)&gt; incrby user:id1 100\nQUEUED\n127.0.0.1:6379[3](TX)&gt; exec\n(nil)\n</code></pre>"},{"location":"Documents/B-Programming%20Language/SQL/Redis/Redis%E5%91%BD%E4%BB%A4/#6","title":"6. \u6587\u6863","text":"<ul> <li>redis\u547d\u4ee4\u4e2d\u6587\u6587\u6863</li> <li>redis\u547d\u4ee4\u82f1\u6587\u6587\u6863</li> </ul>"},{"location":"Documents/B-Programming%20Language/XML/XML-choice%20all%20sequence%E8%AE%B2%E8%A7%A3/","title":"XML-choice all sequence\u8bb2\u89e3","text":"<p>XML Schema \u4e2d Order \u6307\u793a\u5668 choice all sequence\u548c Occurrence \u6307\u793a\u5668 minOccurs maxOccurs \u7684\u7528\u6cd5\u89e3\u91ca</p>"},{"location":"Documents/B-Programming%20Language/XML/XML-choice%20all%20sequence%E8%AE%B2%E8%A7%A3/#1-order","title":"1 Order \u6307\u793a\u5668","text":""},{"location":"Documents/B-Programming%20Language/XML/XML-choice%20all%20sequence%E8%AE%B2%E8%A7%A3/#11-all","title":"1.1 all","text":"<ul> <li>&lt;all&gt; \u6307\u793a\u5668\u89c4\u5b9a\u5b50\u5143\u7d20\u53ef\u4ee5\u6309\u7167\u4efb\u610f\u987a\u5e8f\u51fa\u73b0</li> </ul>"},{"location":"Documents/B-Programming%20Language/XML/XML-choice%20all%20sequence%E8%AE%B2%E8%A7%A3/#111-myxsdxsd","title":"1.1.1 myXsd.xsd\u6587\u4ef6","text":"<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;xsd:schema xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns=\"www.shuhaiwen.com\" targetNamespace=\"www.shuhaiwen.com\" elementFormDefault=\"qualified\"&gt;\n&lt;xsd:complexType name=\"Student\"&gt;\n&lt;xsd:all minOccurs=\"1\" maxOccurs=\"1\"&gt;\n&lt;xsd:element name=\"Name\" type=\"xsd:string\" minOccurs=\"0\" maxOccurs=\"1\"/&gt;\n&lt;xsd:element name=\"ID\" type=\"xsd:string\" minOccurs=\"1\" maxOccurs=\"1\"/&gt;\n&lt;xsd:element name=\"Hobby\" type=\"xsd:string\" minOccurs=\"0\" maxOccurs=\"1\"/&gt;\n&lt;/xsd:all&gt;\n&lt;/xsd:complexType&gt;\n&lt;xsd:element name=\"student\" type=\"Student\"/&gt;\n&lt;/xsd:schema&gt;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/XML/XML-choice%20all%20sequence%E8%AE%B2%E8%A7%A3/#112-myxmlxml","title":"1.1.2 myXml.xml\u6587\u4ef6","text":"<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;student xmlns=\"www.shuhaiwen.com\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"www.shuhaiwen.com myXsd.xsd\"&gt;\n&lt;Name&gt;shu haiwen&lt;/Name&gt; &lt;Hobby&gt; football&lt;/Hobby&gt;\n&lt;ID&gt;1342566&lt;/ID&gt;\n&lt;/student&gt;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/XML/XML-choice%20all%20sequence%E8%AE%B2%E8%A7%A3/#113","title":"1.1.3 \u5206\u6790","text":"<ul> <li>&lt;all&gt;\u5143\u7d20\u548c\u5b50\u5143\u7d20\u4e2d\u5fc5\u987b\u8bbe maxOccrus=\"1\" \uff0cminOccrus=\"0\" \u6216 \"1\"</li> <li>&lt;Hobby&gt;\u5143\u7d20\u53ef\u4ee5\u5728&lt;ID&gt;\u5143\u7d20\u4e4b\u524d\uff0c\u5143\u7d20\u51fa\u73b0\u987a\u5e8f\u65e0\u5173</li> </ul>"},{"location":"Documents/B-Programming%20Language/XML/XML-choice%20all%20sequence%E8%AE%B2%E8%A7%A3/#114-xmlxsd","title":"1.1.4 \u9519\u8bef\u793a\u4f8bxml\u4f9d\u636e\u4e0a\u9762\u7684xsd\u4ee3\u7801","text":"<p>\u8bef\u75281\uff1a\u5b50\u5143\u7d20\u51fa\u73b0\u591a\u6b21</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;student xmlns=\"www.shuhaiwen.com\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"www.shuhaiwen.com myXsd.xsd\"&gt;\n&lt;Name&gt;shu haiwen&lt;/Name&gt; &lt;Hobby&gt;football&lt;/Hobby&gt;\n&lt;Hobby&gt;ready&lt;/Hobby&gt;\n&lt;ID&gt;1342566&lt;/ID&gt;\n&lt;/student&gt;\n</code></pre> <p>error\uff1a&lt;Hobby&gt;\u51fa\u73b02\u6b21</p>"},{"location":"Documents/B-Programming%20Language/XML/XML-choice%20all%20sequence%E8%AE%B2%E8%A7%A3/#12-choice","title":"1.2 choice","text":"<ul> <li>&lt;choice&gt; \u6307\u793a\u5668\u89c4\u5b9a\u5143\u7d20\u53ea\u80fd\u51fa\u73b0\u4e00\u6b21</li> </ul>"},{"location":"Documents/B-Programming%20Language/XML/XML-choice%20all%20sequence%E8%AE%B2%E8%A7%A3/#121-myxsdxsd","title":"1.2.1 myXsd.xsd\u6587\u4ef6","text":"<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;xsd:schema xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns=\"www.shuhaiwen.com\" targetNamespace=\"www.shuhaiwen.com\" elementFormDefault=\"qualified\"&gt;\n&lt;xsd:complexType name=\"Student\"&gt;\n&lt;xsd:choice minOccurs=\"1\" maxOccurs=\"1\"&gt;\n&lt;xsd:element name=\"Name\" type=\"xsd:string\" minOccurs=\"0\" maxOccurs=\"1\"/&gt;\n&lt;xsd:element name=\"ID\" type=\"xsd:string\" minOccurs=\"1\" maxOccurs=\"1\"/&gt;\n&lt;xsd:element name=\"Hobby\" type=\"xsd:string\" minOccurs=\"0\" maxOccurs=\"unbounded\"/&gt;\n&lt;/xsd:choice&gt;\n&lt;/xsd:complexType&gt;\n&lt;xsd:element name=\"student\" type=\"Student\"/&gt;\n&lt;/xsd:schema&gt;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/XML/XML-choice%20all%20sequence%E8%AE%B2%E8%A7%A3/#122-myxmlxml","title":"1.2.2 myXml.xml\u6587\u4ef6","text":"<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;student xmlns=\"www.shuhaiwen.com\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"www.shuhaiwen.com myXsd.xsd\"&gt;\n&lt;Hobby&gt; football&lt;/Hobby&gt;\n&lt;Hobby&gt;ready&lt;/Hobby&gt;\n&lt;/student&gt;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/XML/XML-choice%20all%20sequence%E8%AE%B2%E8%A7%A3/#123","title":"1.2.3 \u5206\u6790","text":"<ul> <li>sequence\u5185\u5143\u7d20\u6709\u4e14\u53ea\u6267\u884c\u4e00\u6b21\uff0c\u7531 minOccurs=\"1\" maxOccurs=\"1\"\u51b3\u5b9a\uff0c\u5f53minOccurs=\"0\"\u65f6\uff0c\u53ef\u4ee5\u4e0d\u6267\u884c\uff0c\u5f53maxOccurs=\"2\" or 3 or unbounded \u65f6\uff0c\u53ef\u4ee5\u6267\u884c\u6307\u5b9a\u6b21\u6570</li> <li>\u53ea\u80fd\u51fa\u73b0 Name ID Hobby \u4e2d\u4e00\u4e2d\u5143\u7d20\u7c7b\u578b\uff0c\u53ef\u51fa\u73b0\u6b21\u6570\u53d6\u51b3\u4e8e \u5143\u7d20\u4e2dminOccurs maxOccurs \u5c5e\u6027</li> <li>&lt;student&gt;\u53ef\u4ee5\u4e0d\u5305\u542b\u5143\u7d20\uff0c\u56e0\u4e3a Name \u5143\u7d20\u7684minOccurs=\"0\" \uff0c\u5373\u5f53\u6211\u9009\u62e9Name\u5143\u7d20\u4f5c\u4e3a&lt;Student&gt;\u7684\u5b50\u5143\u7d20\u65f6\uff0c&lt;Name&gt;\u53ef\u4ee5\u6267\u884c0\u6b21,\u5373\u4e0d\u6267\u884c</li> <li>\u5f53\u9009\u62e9 ID \u5143\u7d20\u4f5c\u4e3aStudent \u5b50\u5143\u7d20\u65f6\uff0c\u5fc5\u987b\u6267\u884c\u4e00\u6b21</li> <li>\u5f53\u9009\u62e9 Hobby \u5143\u7d20\u4f5c\u4e3aStudent \u5b50\u5143\u7d20\u65f6\uff0c\u53ef\u6267\u884c\u4efb\u610f\u6b21\uff0c\u5bf9\u5e94xml\u6587\u4ef6\u4e2d &lt;Hobby&gt; football&lt;/Hobby&gt;&lt;Hobby&gt;ready&lt;/Hobby&gt;</li> </ul>"},{"location":"Documents/B-Programming%20Language/XML/XML-choice%20all%20sequence%E8%AE%B2%E8%A7%A3/#124-xmlxsd","title":"1.2.4 \u9519\u8bef\u793a\u4f8bxml\u4f9d\u636e\u4e0a\u9762\u7684xsd\u4ee3\u7801","text":"<p>\u8bef\u75281\uff1a\u9009\u62e9\u591a\u4e2a\u5b50\u5143\u7d20</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;student xmlns=\"www.shuhaiwen.com\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"www.shuhaiwen.com myXsd.xsd\"&gt;\n&lt;Name&gt;shu haiwen&lt;/Name&gt; &lt;ID&gt;1342566&lt;/ID&gt;\n&lt;Hobby&gt; football&lt;/Hobby&gt;\n&lt;Hobby&gt;ready&lt;/Hobby&gt;\n&lt;/student&gt;\n</code></pre> <p>error\uff1a&lt;Name&gt; &lt;ID&gt; &lt;Hobby&gt; \u53ea\u80fd\u51fa\u73b0\u5176\u4e2d\u4e00\u7c7b</p> <p>\u8bef\u75282\uff1a\u540c\u4e00\u5143\u7d20\u4f7f\u7528\u8d85\u8fc7 maxOccurs \u6240\u89c4\u5b9a\u7684\u6570\u91cf</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;student xmlns=\"www.shuhaiwen.com\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"www.shuhaiwen.com myXsd.xsd\"&gt;\n    &lt;ID&gt;1342566&lt;/ID&gt;\n    &lt;ID&gt;5464565&lt;/ID&gt;\n&lt;/student&gt;\n</code></pre> <p>error\uff1a&lt;ID&gt;\u53ea\u80fd\u51fa\u73b0\u4e00\u6b21</p>"},{"location":"Documents/B-Programming%20Language/XML/XML-choice%20all%20sequence%E8%AE%B2%E8%A7%A3/#13-sequence","title":"1.3 sequence","text":"<ul> <li>&lt;sequence&gt; \u6307\u793a\u5668\u89c4\u5b9a\u5143\u7d20\u6309\u987a\u5e8f\u51fa\u73b0</li> <li>\u5143\u7d20\u662f\u5426\u51fa\u73b0\u6216\u51fa\u73b0\u591a\u5c11\u6b21\u7531 minOccurs \u548c maxOccurs \u5c5e\u6027\u9650\u5236</li> <li>Example</li> </ul>"},{"location":"Documents/B-Programming%20Language/XML/XML-choice%20all%20sequence%E8%AE%B2%E8%A7%A3/#131-myxsdxsd","title":"1.3.1 myXsd.xsd\u6587\u4ef6","text":"<pre><code>&lt;xsd:schema xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns=\"www.shuhaiwen.com\" targetNamespace=\"www.shuhaiwen.com\" elementFormDefault=\"qualified\"&gt;\n&lt;xsd:complexType name=\"Student\"&gt;\n&lt;xsd:sequence minOccurs=\"1\" maxOccurs=\"1\"&gt;\n&lt;xsd:element name=\"Name\" type=\"xsd:string\" minOccurs=\"0\" maxOccurs=\"1\"/&gt;\n&lt;xsd:element name=\"ID\" type=\"xsd:string\" minOccurs=\"1\" maxOccurs=\"1\"/&gt;\n&lt;xsd:element name=\"Hobby\" type=\"xsd:string\" minOccurs=\"0\" maxOccurs=\"unbounded\"/&gt;\n&lt;/xsd:sequence&gt;\n&lt;/xsd:complexType&gt;\n&lt;xsd:element name=\"student\" type=\"Student\"/&gt;\n&lt;/xsd:schema&gt;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/XML/XML-choice%20all%20sequence%E8%AE%B2%E8%A7%A3/#132-myxmlxml","title":"1.3.2 myXml.xml\u6587\u4ef6","text":"<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;student xmlns=\"www.shuhaiwen.com\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"www.shuhaiwen.com myXsd.xsd\"&gt;\n&lt;Name&gt;shu haiwen&lt;/Name&gt; &lt;ID&gt;1342566&lt;/ID&gt;\n&lt;Hobby&gt; football&lt;/Hobby&gt;\n&lt;Hobby&gt;ready&lt;/Hobby&gt;\n&lt;/student&gt;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/XML/XML-choice%20all%20sequence%E8%AE%B2%E8%A7%A3/#133","title":"1.3.3 \u5206\u6790","text":"<ul> <li>sequence\u5185\u5143\u7d20\u6709\u4e14\u53ea\u6267\u884c\u4e00\u6b21\uff0c\u7531 minOccurs=\"1\" maxOccurs=\"1\"\u51b3\u5b9a\uff0c\u5f53minOccurs=\"0\"\u65f6\uff0c\u53ef\u4ee5\u4e0d\u6267\u884c\uff0c\u5f53maxOccurs=\"2\" or 3 or unbounded \u65f6\uff0c\u53ef\u4ee5\u6267\u884c\u6307\u5b9a\u6b21\u6570</li> <li>Name \u53ef\u4ee5\u6267\u884c\u4e00\u6b21\u6216\u4e0d\u6267\u884c\uff0c\u5bf9\u5e94xml\u6587\u4ef6\u4e2d &lt;Name&gt;shu haiwen&lt;/Name&gt; \u53ef\u4ee5\u4e0d\u5199\u6216\u53ea\u80fd\u51fa\u73b0\u4e00\u6b21</li> <li>ID \u5fc5\u987b\u6267\u884c\u4e00\u6b21\uff0c\u5fc5\u987b\u5728 Hobby \u4e4b\u524d\u6267\u884c\uff0c\u5bf9\u5e94xml\u6587\u4ef6\u4e2d &lt;ID&gt;1342566&lt;/ID&gt;</li> <li>Hobby \u53ef\u6267\u884c\u4efb\u610f\u6b21\uff0c\u5bf9\u5e94xml\u6587\u4ef6\u4e2d &lt;Hobby&gt; football&lt;/Hobby&gt;&lt;Hobby&gt;ready&lt;/Hobby&gt;</li> </ul>"},{"location":"Documents/B-Programming%20Language/XML/XML-choice%20all%20sequence%E8%AE%B2%E8%A7%A3/#134-xmlxsd","title":"1.3.4 \u9519\u8bef\u793a\u4f8bxml\u4f9d\u636e\u4e0a\u9762\u7684xsd\u4ee3\u7801","text":"<p>\u8bef\u75281\uff1a ID\u5143\u7d20\u4e0d\u80fd\u5c11</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;student xmlns=\"www.shuhaiwen.com\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"www.shuhaiwen.com myXsd.xsd\"&gt;\n&lt;Name&gt;shu haiwen&lt;/Name&gt;\n&lt;Hobby&gt; football&lt;/Hobby&gt;\n&lt;Hobby&gt;ready&lt;/Hobby&gt;\n&lt;/student&gt;\n</code></pre> <p>error:\u7f3a\u5c11&lt;ID&gt;\u5143\u7d20</p> <p>*\u8bef\u75282\uff1a\u5143\u7d20\u987a\u5e8f\u9519\u8bef *</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;student xmlns=\"www.shuhaiwen.com\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"www.shuhaiwen.com myXsd.xsd\"&gt;\n&lt;ID&gt;1342566&lt;/ID&gt;\n&lt;Name&gt;shu haiwen&lt;/Name&gt; &lt;Hobby&gt; football&lt;/Hobby&gt;\n&lt;Hobby&gt;ready&lt;/Hobby&gt;\n&lt;/student&gt;\n</code></pre> <p>error:&lt;ID&gt;\u5143\u7d20\u4e0d\u80fd\u5728&lt;Name&gt;\u5143\u7d20\u4e4b\u524d\u6216&lt;Hobby&gt;\u5143\u7d20\u4e4b\u540e</p>"},{"location":"Documents/B-Programming%20Language/XML/XML-choice%20all%20sequence%E8%AE%B2%E8%A7%A3/#135-sequence-maxoccurs1-maxoccurs2-or-unbounded","title":"1.3.5 \u6ce8\u610f\uff1a\u4ee5\u4e0a\u90fd\u662f\u5728 &lt;sequence&gt;\u4e2d maxOccurs=\"1\" \u7684\u60c5\u51b5\u4e0b\u6ee1\u8db3\uff0c\u5f53 maxOccurs=\"2\" or unbounded\u65f6\uff0c\u4e0d\u9002\u7528","text":""},{"location":"Documents/B-Programming%20Language/XML/XML-choice%20all%20sequence%E8%AE%B2%E8%A7%A3/#2-occurrence","title":"2 Occurrence \u6307\u793a\u5668","text":""},{"location":"Documents/B-Programming%20Language/XML/XML-choice%20all%20sequence%E8%AE%B2%E8%A7%A3/#21-minoccurs","title":"2.1 minOccurs","text":"<ul> <li>\u9650\u5b9a\u5143\u7d20\u51fa\u73b0\u7684\u6700\u5c11\u6b21\u6570\uff0c\u53ef\u4e3a\u4efb\u610f\u6570\u503c</li> </ul>"},{"location":"Documents/B-Programming%20Language/XML/XML-choice%20all%20sequence%E8%AE%B2%E8%A7%A3/#22-maxoccurs","title":"2.2 maxOccurs","text":"<ul> <li>\u9650\u5b9a\u5143\u7d20\u51fa\u73b0\u7684\u6700\u5927\u6b21\u6570\uff0c\u53ef\u4e3a\u4efb\u610f\u6570\u503c\u6216unbounded</li> </ul>"},{"location":"Documents/B-Programming%20Language/XML/XML-choice%20all%20sequence%E8%AE%B2%E8%A7%A3/#23-minoccursmaxoccurs","title":"2.3 \u6ce8\u610f\uff1aminOccurs\u53ea\u80fd\u5c0f\u4e8emaxOccurs","text":"<ul> <li>\u6211\u7684GitHub</li> <li>\u6211\u7684CSDN\u535a\u5ba2</li> <li>\u6211\u7684\u7801\u4e91Gitee</li> </ul>"},{"location":"Documents/B-Programming%20Language/XML/xml-final%E5%B1%9E%E6%80%A7/","title":"xml-final\u5c5e\u6027","text":""},{"location":"Documents/B-Programming%20Language/XML/xml-final%E5%B1%9E%E6%80%A7/#1-final","title":"1 final","text":"<p>\u53ef\u9009\u3002\u9632\u6b62\u4ece\u8be5 complexType \u5143\u7d20\u6d3e\u751f\u6307\u5b9a\u7684\u7c7b\u578b\u3002\u8be5\u503c\u53ef\u4ee5\u5305\u542b #all \u6216\u8005\u4e00\u4e2a\u5217\u8868\uff0c\u8be5\u5217\u8868\u662f extension \u6216 restriction \u7684\u5b50\u96c6\u3002 - \u4e3e\u4f8b\u5982\u4e0b\uff1a * \u8bbe\u7f6efinal\u5c5e\u6027 extension\uff1b \u9632\u6b62\u901a\u8fc7\u6269\u5c55\u6d3e\u751f\u3002</p> <pre><code>    &lt;xsd:complexType name=\"Student\"&gt;\n&lt;xsd:complexContent&gt;\n&lt;xsd:extension base=\"Person\"&gt;\n&lt;xsd:sequence minOccurs=\"1\" maxOccurs=\"1\"&gt;\n&lt;xsd:element name=\"ID\" type=\"xsd:string\" minOccurs=\"1\" maxOccurs=\"1\"/&gt;\n&lt;xsd:element name=\"Hobby\" type=\"xsd:string\" minOccurs=\"0\" maxOccurs=\"1\"/&gt;\n&lt;/xsd:sequence&gt;\n&lt;/xsd:extension&gt;\n&lt;/xsd:complexContent&gt;\n&lt;/xsd:complexType&gt;\n&lt;xsd:complexType name=\"Person\" final=\"extension\"&gt;\n&lt;xsd:sequence&gt;\n&lt;xsd:element name=\"Sex\" type=\"xsd:string\" minOccurs=\"1\" maxOccurs=\"1\"/&gt;\n&lt;xsd:element name=\"Name\" type=\"xsd:string\" minOccurs=\"1\" maxOccurs=\"5\"/&gt;\n&lt;/xsd:sequence&gt;\n&lt;/xsd:complexType&gt;\n</code></pre> <p>\u5206\u6790\uff1a\u6b64\u65f6\u68c0\u9a8c\u6587\u4ef6\u4f1a\u62a5\u9519\uff1aType 'Student' is not a valid extension of type 'Person'.  \u7531\u62a5\u9519\u4fe1\u606f\u53ef\u4ee5\u77e5\u9053\uff0c\u7531\u4e8e\u4e2dfinal\u5c5e\u6027\u662fextension\uff0c\u5bfc\u81f4Person\u4e0d\u80fd\u88abStudent\u6d3e\u751f\u3002 * \u8bbe\u7f6efinal\u5c5e\u6027 restriction\uff1b \u9632\u6b62\u901a\u8fc7\u9650\u5236\u6d3e\u751f\u3002 <pre><code>    &lt;xsd:simpleType name=\"Id\"  final=\"restriction\"&gt;\n&lt;xsd:restriction base=\"xsd:string\"&gt;\n&lt;xsd:pattern value=\"[a-zA-Z0-9\\\\\\-\\.\\|:_#/]+\"/&gt;\n&lt;/xsd:restriction&gt;\n&lt;/xsd:simpleType&gt;\n&lt;xsd:simpleType name=\"res\"&gt;\n&lt;xsd:restriction base=\"Id\"&gt;&lt;/xsd:restriction&gt;\n&lt;/xsd:simpleType&gt;\n</code></pre> <p>\u5206\u6790:\u6b64\u65f6\u68c0\u9a8c\u6587\u4ef6\u4f1a\u62a5\u9519\uff1aAttribute 'final' does not allow derivation by restriction of type definition 'res' from base type definition 'OtxId'. \u7531\u9519\u8bef\u4fe1\u606f\u53ef\u4ee5\u77e5\u9053\uff0c\u7531\u4e8e\u4e2dfinal\u5c5e\u6027\u4e3arestriction\uff0c\u5bfc\u81f4Id\u4e0d\u80fd\u88ab\u9650\u5236\u6d3e\u751f\u3002 * \u8bbe\u7f6e final \u5c5e\u6027 <code>#all</code>\uff1b\u9632\u6b62\u901a\u8fc7\u9650\u5236\u548c\u6269\u5c55\u6d3e\u751f\u3002"},{"location":"Documents/B-Programming%20Language/XML/xml-final%E5%B1%9E%E6%80%A7/#2","title":"2 \u5b8c\u6574\u4ee3\u7801","text":"<p>xsd.xsd\u6587\u4ef6</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;xsd:schema xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns=\"www.shuhaiwen.com\" targetNamespace=\"www.shuhaiwen.com\" elementFormDefault=\"qualified\"&gt;\n&lt;xsd:complexType name=\"Student\"&gt;\n&lt;xsd:complexContent&gt;\n&lt;xsd:extension base=\"Person\"&gt;\n&lt;xsd:sequence minOccurs=\"1\" maxOccurs=\"1\"&gt;\n&lt;xsd:element name=\"ID\" type=\"xsd:string\" minOccurs=\"1\" maxOccurs=\"1\"/&gt;\n&lt;xsd:element name=\"Hobby\" type=\"xsd:string\" minOccurs=\"0\" maxOccurs=\"1\"/&gt;\n&lt;/xsd:sequence&gt;\n&lt;/xsd:extension&gt;\n&lt;/xsd:complexContent&gt;\n&lt;/xsd:complexType&gt;\n&lt;xsd:complexType name=\"Person\" final=\"restriction\"&gt;\n&lt;xsd:sequence&gt;\n&lt;xsd:element name=\"Sex\" type=\"xsd:string\" minOccurs=\"1\" maxOccurs=\"1\"/&gt;\n&lt;xsd:element name=\"Name\" type=\"xsd:string\" minOccurs=\"1\" maxOccurs=\"5\"/&gt;\n&lt;/xsd:sequence&gt;\n&lt;/xsd:complexType&gt;\n&lt;xsd:element name=\"entry\" type=\"animal\"/&gt;\n&lt;xsd:complexType name=\"animal\"&gt;\n&lt;xsd:sequence&gt;\n&lt;xsd:element name=\"person\" type=\"Person\"/&gt;\n&lt;/xsd:sequence&gt;\n&lt;/xsd:complexType&gt;\n&lt;/xsd:schema&gt;\n</code></pre> <p>xml.xml\u6587\u4ef6</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;entry xmlns=\"www.shuhaiwen.com\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"www.shuhaiwen.com myXsd.xsd\"&gt;\n&lt;person xsi:type=\"Student\"&gt;\n&lt;Sex&gt;man&lt;/Sex&gt;\n&lt;Name&gt;Nic&lt;/Name&gt;\n&lt;ID&gt;001&lt;/ID&gt;\n&lt;Hobby&gt;singing&lt;/Hobby&gt;\n&lt;/person&gt;\n&lt;/entry&gt;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/XML/xml%E6%80%BB%E7%BB%93/","title":"xml\u603b\u7ed3","text":"<p>xml schema \u4e2d\u91cd\u8981\u5185\u5bb9\u89e3\u6790</p>"},{"location":"Documents/B-Programming%20Language/XML/xml%E6%80%BB%E7%BB%93/#1","title":"1 \u5c5e\u6027","text":""},{"location":"Documents/B-Programming%20Language/XML/xml%E6%80%BB%E7%BB%93/#11-abstract","title":"1.1 abstract","text":"<ul> <li>option\uff1a\u53ef\u9009\u7684\uff0c\u6307\u793a\u5143\u7d20\u662f\u5426\u53ef\u4ee5\u5728\u5b9e\u4f8b\u6587\u6863\u4e2d\u4f7f\u7528\u3002</li> <li>value\uff1atrue|false(\u9ed8\u8ba4false)</li> <li>Semantics\uff1a\u5982\u679c\u8be5\u503c\u4e3a true\uff0c\u5219\u5143\u7d20\u4e0d\u80fd\u51fa\u73b0\u5728\u5b9e\u4f8b\u6587\u6863\u4e2d\u3002 \u5982\u679c\u8be5\u503c\u4e3a false\uff0c\u5219\u5143\u7d20\u80fd\u51fa\u73b0\u5728\u5b9e\u4f8b\u6587\u6863\u4e2d\u3002</li> </ul>"},{"location":"Documents/B-Programming%20Language/Yaml/Yaml/","title":"Yaml","text":"<ul> <li>\u5b98\u65b9\u6587\u6863</li> </ul>"},{"location":"Documents/B-Programming%20Language/Yaml/Yaml/#1","title":"1 \u89c4\u5219","text":"<ul> <li>yaml\u4f7f\u7528\uff1a<ul> <li><code>-</code>\u6807\u8bb0\u6570\u7ec4</li> <li><code>:</code>\u6807\u8bb0map</li> <li><code>#</code>\u6807\u8bb0\u6ce8\u91ca</li> </ul> </li> <li><code>-</code>\u3001<code>:</code>\u540e\u9762\u6709\u6570\u636e\u9700\u8981\u7a7a\u4e00\u683c\uff0c<code>#</code>\u524d\u6709\u6570\u636e\uff0c\u4e5f\u9700\u8981\u7a7a\u4e00\u683c</li> <li>\u4ee5\u7a7a\u683c\u4f5c\u4e3a\u5c42\u7ea7\u7684\u5206\u5272\uff0c\u7a7a\u683c\u6570\u4e0d\u505a\u9650\u5236\uff0c\u4f46\u540c\u4e00\u5c42\u9700\u8981\u5bf9\u9f50</li> </ul>"},{"location":"Documents/B-Programming%20Language/Yaml/Yaml/#2","title":"2 \u5bf9\u8c61","text":"<pre><code>title: \u5bf9\u8c61\n```yaml\nname: zhangsan\nage: 18\nsex: man\n```\n\u2b07\n```json\n{\n  \"name\": \"zhangsan\",\n  \"age\": 18,\n  \"sex\": \"man\"\n}\n```\n</code></pre> <pre><code>title: \u591a\u5c42\u5bf9\u8c61\n```yaml\nzhangsan: \n  age: 18\n  sex: man\nlisi:\n  age: 19\n  sex: man\n```\n\u2b07\n```json\n{\n  \"zhangsan\": {\n    \"age\": 18,\n    \"sex\": \"man\"\n  },\n  \"lisi\": {\n    \"age\": 19,\n    \"sex\": \"man\"\n  }\n}\n```\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Yaml/Yaml/#3","title":"3 \u6570\u7ec4","text":"<pre><code>title: \u7b80\u5355\u6570\u7ec4\n```yaml\n- zhangsan\n- lisi\n```\n\u2b07\n```json\n[\n  \"zhangsan\",\n  \"lisi\"\n]\n```\n</code></pre> <pre><code>title: \u591a\u5c42\u6570\u7ec4\n```yaml\n- hobby:\n  - play basketball\n  - singing\n```\n\u2b07\n```json\n[\n  {\n    \"hobby\": [\n      \"play basketball\",\n      \"singing\"\n    ]\n  }\n]\n```\n</code></pre>"},{"location":"Documents/B-Programming%20Language/Yaml/Yaml/#4","title":"4 \u590d\u5408\u4f7f\u7528\u793a\u4f8b","text":"<pre><code>- zhangsan:\nhobby:\n- play basketball\n- singing\n- lisi:\nhobby:\n- dance\n- play football\n</code></pre> <p>\u2b07</p> <pre><code>[\n{\n\"zhangsan\": null,\n\"hobby\": [\n\"play basketball\",\n\"singing\"\n]\n},\n{\n\"lisi\": null,\n\"hobby\": [\n\"dance\",\n\"play football\"\n]\n}\n]\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/JavaScript%20%E6%80%BB%E7%BB%93/","title":"JavaScript \u603b\u7ed3","text":""},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/JavaScript%20%E6%80%BB%E7%BB%93/#1","title":"1 \u5173\u952e\u5b57","text":""},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/JavaScript%20%E6%80%BB%E7%BB%93/#11-this","title":"1.1 this","text":"<p>JavaScript\u4e2dthis\u503c\u662f\u5728\u51fd\u6570\u88ab\u8c03\u7528\u65f6\u786e\u5b9a\u7684\uff0cthis\u6307\u5411\u8c03\u7528\u7684\u5bf9\u8c61</p> <pre><code>var o = {\na:10,\nb:{\na:12,\nfn:function(){\nconsole.log(this.a);\n}\n}\n}\no.b.fn();//12 this\u6307\u5411 b\u4e0d\u662fo\uff0cb\u624d\u662f\u76f4\u63a5\u8c03\u7528fn\u51fd\u6570\u7684\nvar j = o.b.fn;\nj();//undefined this\u6307\u5411 window\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/JavaScript%20%E6%80%BB%E7%BB%93/#2-class","title":"2 class","text":"<p>JavaScript\u4e2d\u7684\u7c7b\u662f\u4e00\u4e2a\u8bed\u6cd5\u7cd6 - \u7c7b\u662f\u4e00\u4e2afunction\u7c7b\u578b\uff0c\u6267\u884c\u539f\u578b\u7684\u6784\u9020\u5668\uff0c<code>Point===Point.prototype.constructor</code> - \u7c7b\u5fc5\u987b\u7531<code>new</code>\u6784\u9020\uff0c<code>let p=new Point()</code></p> <pre><code>//\u4f7f\u7528\u6784\u9020\u51fd\u6570\nfunction Point(x, y) {\nthis.x = x;\nthis.y = y;\n}\n\nPoint.prototype.toString = function () {\nreturn '(' + this.x + ', ' + this.y + ')';\n};\nvar p = new Point(1, 2);\n//\u4f7f\u7528\u7c7b\nclass Point(x,y){\nconstrucor(x,y){\nthis.x=x;\nthis.y=y;\n}\ntoString() {\nreturn '(' + this.x + ', ' + this.y + ')';\n}\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/JavaScript%20%E6%80%BB%E7%BB%93/#21-static","title":"2.1 static \u65b9\u6cd5\u548c\u5c5e\u6027","text":"<ul> <li>\u9759\u6001\u65b9\u6cd5\u53ea\u80fd\u901a\u8fc7\u7c7b\u540d\u8c03\u7528 <code>Foo.bar()</code></li> <li>\u9759\u6001\u65b9\u6cd5\u4e2d<code>this</code>\u6307\u7684\u662f\u7c7b <code>Foo</code>\uff0c\u800c\u4e0d\u662f\u5b9e\u4f8b <code>foo</code></li> <li>\u9759\u6001\u65b9\u6cd5\u5185\u90e8\u53ef\u4ee5\u8c03\u7528\u7c7b\u9759\u6001\u65b9\u6cd5\uff0c\u800c\u4e0d\u80fd\u8c03\u7528\u975e\u9759\u6001\u65b9\u6cd5</li> <li>\u9759\u6001\u65b9\u6cd5\u548c\u975e\u9759\u6001\u65b9\u6cd5\u53ef\u91cd\u540d <code>static baz() {}</code> \u548c<code>baz() {}</code></li> </ul> <pre><code>class Foo {\nstatic  prop=1;//\u9759\u6001\u5c5e\u6027\nstatic bar() {//\u9759\u6001\u65b9\u6cd5\nthis.baz();\n}\nstatic baz() {\nconsole.log('hello');\n}\nbaz() {\nconsole.log('world');\n}\n}\nlet foo=new Foo();\nFoo.bar() // hello\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/JavaScript%20%E6%80%BB%E7%BB%93/#22","title":"2.2 \u79c1\u6709\u5c5e\u6027\u548c\u79c1\u6709\u65b9\u6cd5","text":"<p>\u79c1\u6709\u5c5e\u6027\u548c\u79c1\u6709\u65b9\u6cd5\u524d\u52a0 <code>#</code> \u8868\u793a\u79c1\u6709 - \u79c1\u6709\u5c5e\u6027\u548c\u65b9\u6cd5\u4e0d\u80fd\u7531\u7c7b\u5b9e\u4f8b\u8c03\u7528\uff0c\u53ea\u80fd\u5728\u7c7b\u5185\u90e8\u4f7f\u7528</p> <pre><code>class Foo {\n#a;//\u79c1\u6709\u5c5e\u6027\n#b;\nconstructor(a, b) {\nthis.#a = a;\nthis.#b = b;\n}\n#sum() {//\u79c1\u6709\u65b9\u6cd5\nreturn #a + #b;\n}\nprintSum() {\nconsole.log(this.#sum());\n}\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/JavaScript%20%E6%80%BB%E7%BB%93/#23-extends","title":"2.3 extends \u7ee7\u627f","text":"<ul> <li><code>this</code>\u6307\u4ee3\u5f53\u524d\u7c7b\uff0c<code>super</code>\u6307\u4ee3\u7236\u7c7b</li> <li>\u9700\u8981\u5728\u5b50\u7c7b\u6784\u9020\u51fd\u6570\u4e2d\u8c03\u7528\u7236\u7c7b\u6784\u9020\u51fd\u6570 <code>super(x, y);</code></li> </ul> <pre><code>class Point {\n}\nclass ColorPoint extends Point {\nconstructor(x, y, color) {\nsuper(x, y); // \u8c03\u7528\u7236\u7c7b\u7684constructor(x, y)\nthis.color = color;\n}\n\ntoString() {\nreturn this.color + ' ' + super.toString(); // \u8c03\u7528\u7236\u7c7b\u7684toString()\n}\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/JavaScript%20%E6%80%BB%E7%BB%93/#3-es6-commonjs","title":"3 ES6 \u6a21\u5757\u4e0e CommonJS \u6a21\u5757","text":"<ul> <li>CommonJS \u6a21\u5757\u8f93\u51fa\u7684\u662f\u4e00\u4e2a\u503c\u7684\u62f7\u8d1d\uff0cES6 \u6a21\u5757\u8f93\u51fa\u7684\u662f\u503c\u7684\u5f15\u7528\u3002</li> <li>CommonJS \u6a21\u5757\u662f\u8fd0\u884c\u65f6\u52a0\u8f7d\uff0cES6 \u6a21\u5757\u662f\u7f16\u8bd1\u65f6\u8f93\u51fa\u63a5\u53e3\u3002</li> <li>CommonJS \u6a21\u5757\u7531 require + module.exports + exports \u5bfc\u5165\u5bfc\u51fa,ES6 \u6a21\u5757\u7531import + export + export default \u5bfc\u5165\u5bfc\u51fa\u3002</li> </ul>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/JavaScript%20%E6%80%BB%E7%BB%93/#31-es6","title":"3.1 ES6 \u6a21\u5757\u8bed\u6cd5","text":""},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/JavaScript%20%E6%80%BB%E7%BB%93/#311-export","title":"3.1.1 export \u5bfc\u51fa","text":"<ul> <li>\u4f7f\u7528export \u4e00\u4e2a\u4e00\u4e2a\u5bfc\u51fa</li> <li>\u4f7f\u7528export\u7edf\u4e00\u5bfc\u51fa</li> <li>\u4f7f\u7528export default\u5bfc\u51fa</li> <li>\u4f7f\u7528as\u91cd\u547d\u540d\u5bfc\u51fa\u53d8\u91cf</li> </ul> <pre><code>// profile.js\n\n//1.\u4f7f\u7528export \u4e00\u4e2a\u4e00\u4e2a\u5bfc\u51fa\nexport var firstName = 'Michael';\nexport var lastName = 'Jackson';\nexport var year = 1958;\n//2.\u4f7f\u7528export\u7edf\u4e00\u5bfc\u51fa\nvar firstName = 'Michael';\nvar lastName = 'Jackson';\nvar year = 1958;\nexport { firstName, lastName, year };\n// 3.\u4f7f\u7528export default\u5bfc\u51fa\nfunction foo() {\nconsole.log('foo');\n}\nexport default foo;\n//or\nexport default function foo() {\nconsole.log('foo');\n}\n//4.\u4f7f\u7528as\u91cd\u547d\u540d\u5bfc\u51fa\u53d8\u91cf\nfunction v1() { ... }\nexport {v1 as streamV1}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/JavaScript%20%E6%80%BB%E7%BB%93/#312-import","title":"3.1.2 import \u5bfc\u5165","text":"<ul> <li>\u4f7f\u7528 <code>as</code> \u91cd\u547d\u540d\u5bfc\u5165\u53d8\u91cf</li> <li>\u4f7f\u7528 <code>* as</code>\u6574\u4f53\u5bfc\u5165</li> <li>\u6267\u884c\u6240\u52a0\u8f7d\u7684\u6a21\u5757\uff0c\u4f46\u4e0d\u5bfc\u5165\u4efb\u4f55\u4e1c\u897f</li> </ul> <pre><code>//1.\u4f7f\u7528 * as\u6574\u4f53\u5bfc\u5165\n// circle.js\nexport function area(radius) {\nreturn Math.PI * radius * radius;\n}\nexport function circumference(radius) {\nreturn 2 * Math.PI * radius;\n}\n//main.js\nimport * as circle from './circle';\nconsole.log('\u5706\u9762\u79ef\uff1a' + circle.area(4));\nconsole.log('\u5706\u5468\u957f\uff1a' + circle.circumference(14));\n//2.\u666e\u901a\u5bfc\u5165\nimport { firstName, lastName, year } from './profile.js';\n//3.\u4f7f\u7528 `as` \u91cd\u547d\u540d\u5bfc\u5165\u53d8\u91cf\nimport { lastName as surname } from './profile.js';\n\n//4.\u6267\u884c\u6240\u52a0\u8f7d\u7684\u6a21\u5757\nimport 'lodash';\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/JavaScript%20%E6%80%BB%E7%BB%93/#313","title":"3.1.3 \u9519\u8bef\u5bfc\u51fa\u793a\u4f8b","text":"<ul> <li>\u5b9a\u4e49\u58f0\u660e\u65f6\u7acb\u5373\u5bfc\u51fa</li> <li>\u5b9a\u4e49\u65f6\u4e0d\u5bfc\u51fa\uff0c\u53ea\u80fd\u7edf\u4e00\u653e\u5165{}\u5bfc\u51fa</li> </ul> <pre><code>// \u5199\u6cd5\u4e00\nexport var m = 1;\n\n// \u5199\u6cd5\u4e8c\nvar m = 1;\nexport {m};\n\n// \u5199\u6cd5\u4e09\nvar n = 1;\nexport {n as m};\n\n// \u62a5\u9519\nfunction f() {}\nexport f;\n\n// \u6b63\u786e\nexport function f() {};\n\n// \u6b63\u786e\nfunction f() {}\nexport {f};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/JavaScript%20%E6%80%BB%E7%BB%93/#314-import","title":"3.1.4 import \u5bfc\u51fa","text":"<ul> <li>\u5bfc\u5165\u6587\u4ef6\uff0c\u53ef\u4ee5\u662f\u76f8\u5bf9\u8def\u5f84\uff0c\u4e5f\u53ef\u4ee5\u662f\u7edd\u5bf9\u8def\u5f84\uff0c<code>.js</code>\u540e\u7f00\u53ef\u4ee5\u7701\u7565</li> <li>\u5bfc\u5165\u6a21\u5757\uff0c\u53ef\u4ee5\u6307\u5b9a\u8def\u5f84\uff0c\u6216\u8005\u4e0d\u5e26\u6709\u8def\u5f84\u65f6\uff0c\u90a3\u4e48\u5fc5\u987b\u6709\u914d\u7f6e\u6587\u4ef6\uff08package.json\uff09</li> </ul> <pre><code>//main.js\n//1.\u5bfc\u5165\u6a21\u5757\u540d\nimport { stat, exists, readFile } from 'fs';\n//2.\u5bfc\u5165\u6587\u4ef6\u540d\nimport {firstName,lastName,year} from './profile.js'\n//3.\u4f7f\u7528as \u91cd\u547d\u540d\nimport { lastName as surname } from './profile.js';\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/JavaScript%20%E6%80%BB%E7%BB%93/#315-export-import","title":"3.1.5 export \u4e0e import \u7684\u590d\u5408\u5199\u6cd5","text":"<ul> <li>\u5bfc\u5165\u540c\u65f6\u5bfc\u51fa</li> </ul> <pre><code>export { foo, bar } from 'my_module';\n\n// \u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u4e3a\nimport { foo, bar } from 'my_module';\nexport { foo, bar };\n// \u5bfc\u51fadefault\nexport { default } from 'foo';\n//\u9ed8\u8ba4\u63a5\u53e3\u4e5f\u53ef\u4ee5\u6539\u540d\u4e3a\u5177\u540d\u63a5\u53e3\nexport { default as es6 } from './someModule';\n// \u63a5\u53e3\u6539\u540d\nexport { foo as myFoo } from 'my_module';\n\n// \u6574\u4f53\u8f93\u51fa\uff0c\u4f46\u4e0d\u5230\u5904default\nexport * from 'my_module';\n\n//ES2020 \u5199\u6cd5\nexport * as ns from \"mod\";\n\n// \u7b49\u540c\u4e8e\nimport * as ns from \"mod\";\nexport {ns};\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/JavaScript%20%E6%80%BB%E7%BB%93/#32-commonjs","title":"3.2 CommonJS \u6a21\u5757\u8bed\u6cd5","text":"<pre><code>// lib.js\nvar counter = 3;\nfunction incCounter() {\ncounter++;\n}\nmodule.exports = {\ncounter: counter,\nincCounter: incCounter,\n};\n// main.js\nvar mod = require('./lib');\n\nconsole.log(mod.counter);  // 3\nmod.incCounter();\nconsole.log(mod.counter); // 3\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/JavaScript%20%E6%80%BB%E7%BB%93/#4-call-apply-bind","title":"4 call apply bind","text":"<p>\u4f5c\u7528:\u51fd\u6570\u7684\u590d\u7528 - \u7528\u4e8e\u6539\u53d8\u51fd\u6570\u6267\u884c\u65f6this\u6307\u5411(\u91cd\u65b0\u7ed1\u5b9a\u5bf9\u8c61) - \u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u7ed1\u5b9a\u7684\u5bf9\u8c61\uff0c\u540e\u9762\u53c2\u6570\u662f\u51fd\u6570\u6267\u884c\u65f6\u63a5\u53d7\u7684\u53c2\u6570</p> <pre><code>  let obj = {name: 'tony'};\n\nfunction Child(name){\nthis.name = name;\n}\n\nChild.prototype = {\nconstructor: Child,\nshowName: function(){\nconsole.log(this.name);\n}\n}\nvar child = new Child('thomas');\nchild.showName(); // thomas\n\n//  call,apply,bind\u4f7f\u7528\nchild.showName.call(obj);// tony\nchild.showName.apply(obj);// tony\nlet bind = child.showName.bind(obj); // \u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\nbind(); // tony\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/JavaScript%20%E6%80%BB%E7%BB%93/#5","title":"5 \u5f02\u6b65","text":""},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/JavaScript%20%E6%80%BB%E7%BB%93/#51-async-await","title":"5.1 async await","text":""},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/TypeScript%20%E6%80%BB%E7%BB%93/","title":"TypeScript \u603b\u7ed3","text":""},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/TypeScript%20%E6%80%BB%E7%BB%93/#1","title":"1 \u7c7b\u578b\u58f0\u660e","text":""},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/TypeScript%20%E6%80%BB%E7%BB%93/#11","title":"1.1 \u57fa\u672c\u7c7b\u578b","text":"<p>\u5173\u952e\u5b57 <code>:</code> TypeScript\u6bd4\u8f83JavaScript\u8bed\u6cd5\uff0c\u53ea\u5728\u53d8\u91cf\u540e\u52a0 <code>:[type]</code>,\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>//boolearn\nlet isDone: boolean = false;\n//number\nlet decLiteral: number = 6;\n//string\nlet name: string = \"bob\";\n//Array\nlet list: number[] = [1, 2, 3];\nlet list: Array&lt;number&gt; = [1, 2, 3];\n// Declare a tuple type\nlet x: [string, number]= ['hello', 10];\n//undefined\nlet u: undefined = undefined;\n//null\nlet n: null = null;\n</code></pre> <p>Array\u7684\u8bed\u6cd5\u7c7b\u578bC++\u6a21\u677f\u5199\u6cd5\uff0c\u4f7f\u7528&lt;&gt;\u5305\u88f9\u5185\u90e8\u7c7b\u578b,\u5d4c\u5957\u89c4\u5219\u4e5f\u76f8\u540c</p>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/TypeScript%20%E6%80%BB%E7%BB%93/#12-enum","title":"1.2 \u679a\u4e3e <code>enum</code>","text":"<pre><code>enum Color {Red, Green, Blue}\nlet c: Color = Color.Green;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/TypeScript%20%E6%80%BB%E7%BB%93/#13-void","title":"1.3 void","text":"<ul> <li>void\u4e00\u822c\u7528\u5728\u51fd\u6570\u8fd4\u56de\u503c\u65f6\uff0c\u8868\u793a\u51fd\u6570\u65e0\u8fd4\u56de\u503c</li> <li>void\u7528\u5728\u53d8\u91cf\u58f0\u660e\u65f6\uff0c\u53ea\u80fd\u88ab\u8d4b\u4e88null\u6216undefinde,\u6ca1\u6709\u591a\u5927\u610f\u4e49</li> </ul> <pre><code>function warnUser(): void {\nconsole.log(\"This is my warning message\");\n}\nlet unusable: void = undefined;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/TypeScript%20%E6%80%BB%E7%BB%93/#14-any","title":"1.4 any","text":"<p>any\u7c7b\u578b\u4e0eC++\u4e2dvoid* \u7c7b\u578b\uff0c\u88abany\u6307\u5b9a\u7684\u5bf9\u8c61\u53ef\u4ee5\u88ab\u8f6c\u6362\u6210\u4efb\u610f\u7c7b\u578b</p> <pre><code>let notSure: any = 4;// okay\nnotSure = \"maybe a string instead\";// okay\nnotSure = false; // okay\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/TypeScript%20%E6%80%BB%E7%BB%93/#15","title":"1.5 \u7c7b\u578b\u65ad\u8a00","text":"<p>\u5173\u952e\u5b57\uff1a<code>&lt;&gt;</code> \u6216\u8005 <code>as</code> \u7c7b\u578b\u65ad\u8a00\u662f\u4e00\u79cd\u5f3a\u5236\u8f6c\u6362\u65b9\u5f0f</p> <pre><code>//\u5199\u6cd51 &lt;&gt;\nlet someValue: any = \"this is a string\";\nlet strLength: number = (&lt;string&gt;someValue).length;\n//\u5199\u6cd52 as\nlet strLength: number = (someValue as string).length;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/TypeScript%20%E6%80%BB%E7%BB%93/#2","title":"2 \u51fd\u6570","text":"<p>TypeScript\u51fd\u6570\u8c03\u7528\u65f6\uff0c\u53c2\u6570\u4e2a\u6570\u4e0d\u80fd\u8d85\u8fc7\u5b9a\u4e49\u7684\u7684\u4e2a\u6570\uff0cJavaScript\u5219\u65e0\u6b64\u89c4\u5219 - \u4e3a\u8fd4\u56de\u503c\u6307\u5b9a\u7c7b\u578b - \u4e3a\u53c2\u6570\u6307\u5b9a\u7c7b\u578b</p> <pre><code>function sum(x: number, y: number): number {\nreturn x + y;\n}\nsum(1,2);//success\nsum(1);//error\nsum(1,2,3);//error\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/TypeScript%20%E6%80%BB%E7%BB%93/#21","title":"2.1 \u53ef\u9009\u53c2\u6570","text":"<p>\u5173\u952e\u5b57 <code>?</code> \u53ef\u9009\u53c2\u6570\u53ef\u7ea6\u675f\u51fd\u6570\u53c2\u6570\u662f\u5426\u53ef\u5ffd\u7565</p> <pre><code>function buildName(firstName: string, lastName?: string) {\nif (lastName)\nreturn firstName + \" \" + lastName;\nelse\nreturn firstName;\n}\n\nlet result1 = buildName(\"Bob\");  // works correctly now\nlet result2 = buildName(\"Bob\", \"Adams\", \"Sr.\");  // error, too many parameters\nlet result3 = buildName(\"Bob\", \"Adams\");  // ah, just right\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/TypeScript%20%E6%80%BB%E7%BB%93/#22","title":"2.2 \u53c2\u6570\u9ed8\u8ba4\u503c","text":"<p>\u7c7b\u4f3cC++\u51fd\u6570\u53c2\u6570\u9ed8\u8ba4\u503c - \u4f20\u53c2\u65f6\u53ef\u4e0d\u5ffd\u7565 - \u9ed8\u8ba4\u503c\u53c2\u6570\u4e0d\u80fd\u5728\u975e\u9ed8\u8ba4\u503c\u53c2\u6570\u4e4b\u524d</p> <pre><code>function buildName(firstName = \"Will\", lastName: string) {\nreturn firstName + \" \" + lastName;\n}\n\nlet result1 = buildName(\"Bob\");                  // error, too few parameters\nlet result2 = buildName(\"Bob\", \"Adams\", \"Sr.\");  // error, too many parameters\nlet result3 = buildName(\"Bob\", \"Adams\");         // okay and returns \"Bob Adams\"\nlet result4 = buildName(undefined, \"Adams\");     // okay and returns \"Will Adams\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/TypeScript%20%E6%80%BB%E7%BB%93/#23","title":"2.3 \u53d8\u957f\u53c2\u6570","text":"<p>\u5173\u952e\u5b57 <code>...</code></p> <pre><code>function buildName(firstName: string, ...restOfName: string[]) {\nreturn firstName + \" \" + restOfName.join(\" \");\n}\nlet buildNameFun: (fname: string, ...rest: string[]) =&gt; string = buildName;\nlet employeeName = buildName(\"Joseph\", \"Samuel\", \"Lucas\", \"MacKinzie\");\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/TypeScript%20%E6%80%BB%E7%BB%93/#3-type","title":"3 \u7c7b\u578b\u522b\u540d <code>type</code>","text":"<ul> <li>\u7528\u4e8e\u57fa\u672c\u7c7b\u578b</li> <li>\u7528\u4e8e\u5bf9\u8c61</li> <li>\u7528\u4e8e\u5143\u7ec4</li> <li>\u7528\u4e8e\u6cdb\u578b</li> <li>\u7528\u4e8e\u8054\u5408\u7c7b\u578b</li> <li>\u7528\u4e8e\u51fd\u6570</li> </ul> <pre><code>//\u57fa\u672c\u7c7b\u578b\ntype Name = string;\n//\u5bf9\u8c61\ntype User = {\nname: string\nage: number\n};\n//\u5143\u7ec4\ntype PetList = [Dog, Pet];\n//\u6cdb\u578b\ntype Callback&lt;T&gt; = (data: T) =&gt; void;  type Pair&lt;T&gt; = [T, T];  type Coordinates = Pair&lt;number&gt;;  type Tree&lt;T&gt; = T | { left: Tree&lt;T&gt;, right: Tree&lt;T&gt; };\n//\u51fd\u6570\ntype NameResolver = () =&gt; string;\n//\u8054\u5408\u7c7b\u578b\ntype NameOrResolver = Name | NameResolver;\nfunction getName(n: NameOrResolver): Name {\nif (typeof n === 'string') {\nreturn n;\n} else {\nreturn n();\n}\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/TypeScript%20%E6%80%BB%E7%BB%93/#4-interface","title":"4 \u63a5\u53e3 <code>interface</code>","text":""},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/TypeScript%20%E6%80%BB%E7%BB%93/#41","title":"4.1 \u63a5\u53e3\u5b9a\u4e49","text":"<ul> <li>\u652f\u6301\u5bf9\u8c61[\u53ef\u9009\u5c5e\u6027\u3001\u53ea\u8bfb\u5c5e\u6027]</li> <li>\u652f\u6301\u51fd\u6570</li> <li>\u652f\u6301\u53ef\u7d22\u5f15\u7684\u7c7b\u578b</li> </ul> <pre><code>//\u5bf9\u8c61\ninterface LabelledValue {\nlabel: string;\nreadonly name?: string;\n}\n\nfunction printLabel(labelledObj: LabelledValue) {\nconsole.log(labelledObj.label);\n}\n\nlet myObj = {size: 10, label: \"Size 10 Object\"};\nprintLabel(myObj);\n//\u51fd\u6570\ninterface SearchFunc {\n(source: string, subString: string): boolean;\n}\n//\u53ef\u7d22\u5f15\u7684\u7c7b\u578b\ninterface StringArray {\n[index: number]: string;\n}\n\nlet myArray: StringArray;\nmyArray = [\"Bob\", \"Fred\"];\n\nlet myStr: string = myArray[0];\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/TypeScript%20%E6%80%BB%E7%BB%93/#42-implements","title":"4.2 \u63a5\u53e3\u5b9e\u73b0 <code>implements</code>","text":"<pre><code>interface ClockInterface {\ncurrentTime: Date;\nsetTime(d: Date);\n}\n\nclass Clock implements ClockInterface {\ncurrentTime: Date;\nsetTime(d: Date) {\nthis.currentTime = d;\n}\nconstructor(h: number, m: number) { }\n}\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/TypeScript%20%E6%80%BB%E7%BB%93/#43-extends","title":"4.3 \u7ee7\u627f\u63a5\u53e3 <code>extends</code>","text":"<pre><code>interface Shape {\ncolor: string;\n}\n\ninterface Square extends Shape {\nsideLength: number;\n}\n\nlet square = &lt;Square&gt;{};\nsquare.color = \"blue\";\nsquare.sideLength = 10;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/TypeScript%20%E6%80%BB%E7%BB%93/#5-namespace","title":"5 \u547d\u540d\u7a7a\u95f4 <code>namespace</code>","text":"<p>\u4e0ec++\u4e2dnamespace\u4e00\u6837\u4f5c\u7528 - \u4f7f\u7528namespace\u907f\u514d\u4e0e\u5176\u4ed6\u5bf9\u8c61\u547d\u540d\u51b2\u7a81 - \u4f7f\u7528import \u547d\u540dnamespace\u522b\u540d</p> <pre><code>namespace Utility {\nexport function log(msg) {\nconsole.log(msg);\n}\nexport function error(msg) {\nconsole.log(msg);\n}\n}\n// usage\nUtility.log('Call me');\nUtility.error('maybe');\n\n//\u4f7f\u7528import \u547d\u540dnamespace\u522b\u540d\nnamespace Shapes {\nexport namespace Polygons {\nexport class Triangle { }\nexport class Square { }\n}\n}\nimport polygons = Shapes.Polygons;\nlet sq = new polygons.Square(); // Same as \"new Shapes.Polygons.Square()\"\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/TypeScript%20%E6%80%BB%E7%BB%93/#6-declare","title":"6 \u58f0\u660e\u6587\u4ef6 <code>declare</code>","text":"<p>TypeScript \u4f5c\u4e3a JavaScript \u7684\u8d85\u96c6\uff0c\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u4e0d\u53ef\u907f\u514d\u8981\u5f15\u7528\u5176\u4ed6\u7b2c\u4e09\u65b9\u7684 JavaScript \u7684\u5e93\u3002\u867d\u7136\u901a\u8fc7\u76f4\u63a5\u5f15\u7528\u53ef\u4ee5\u8c03\u7528\u5e93\u7684\u7c7b\u548c\u65b9\u6cd5\uff0c\u4f46\u662f\u5374\u65e0\u6cd5\u4f7f\u7528TypeScript \u8bf8\u5982\u7c7b\u578b\u68c0\u67e5\u7b49\u7279\u6027\u529f\u80fd\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u9700\u8981\u5c06\u8fd9\u4e9b\u5e93\u91cc\u7684\u51fd\u6570\u548c\u65b9\u6cd5\u4f53\u53bb\u6389\u540e\u53ea\u4fdd\u7559\u5bfc\u51fa\u7c7b\u578b\u58f0\u660e\uff0c\u800c\u4ea7\u751f\u4e86\u4e00\u4e2a\u63cf\u8ff0 JavaScript \u5e93\u548c\u6a21\u5757\u4fe1\u606f\u7684\u58f0\u660e\u6587\u4ef6\u3002\u901a\u8fc7\u5f15\u7528\u8fd9\u4e2a\u58f0\u660e\u6587\u4ef6\uff0c\u5c31\u53ef\u4ee5\u501f\u7528 TypeScript \u7684\u5404\u79cd\u7279\u6027\u6765\u4f7f\u7528\u5e93\u6587\u4ef6\u4e86\u3002</p> <pre><code>declare var jQuery: (selector: string) =&gt; any;\n\njQuery('#foo');\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/vuejs/","title":"vue\u7b14\u8bb0","text":""},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/vuejs/#1-vue","title":"1 vue \u6307\u4ee4\u7f29\u5199","text":"\u6307\u4ee4\u7f29\u5199 v-on@ v-bind: v-slot#"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/vuejs/#2-v-bind","title":"2 v-bind","text":"<ul> <li>\u5f53\u53c2\u6570\u4e3a\u53d8\u91cf\u65f6\uff0c\u4f7f\u7528v-bind</li> <li>\u5f53\u53c2\u6570\u4e3a\u5b57\u9762\u91cf\u65f6\uff0c\u4e0d\u9002\u7528v-bind</li> </ul> <pre><code>&lt;div\n  class=\"static\"\n  v-bind:class=\"{ active: isActive, 'text-danger': hasError }\"&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/vuejs/#3-slot","title":"3 slot\u63d2\u69fd","text":"<ul> <li><code>&lt;slot name=\"header\"&gt;&lt;/slot&gt;</code>\u5177\u540d\u63d2\u69fd</li> <li>\u4f5c\u7528\u57df\u63d2\u69fd</li> </ul> <pre><code>&lt;a\n  v-bind:href=\"url\"\n  class=\"nav-link\"\n&gt;\n  &lt;slot&gt;&lt;/slot&gt;\n&lt;/a&gt;\n\n&lt;navigation-link url=\"/profile\"&gt;\n  Your Profile\n&lt;/navigation-link&gt;\n\n&lt;!-- \u5177\u540d\u63d2\u69fd --&gt;\n&lt;div class=\"container\"&gt;\n  &lt;header&gt;\n    &lt;slot name=\"header\"&gt;&lt;/slot&gt;\n  &lt;/header&gt;\n  &lt;main&gt;\n    &lt;slot&gt;&lt;/slot&gt;\n  &lt;/main&gt;\n  &lt;footer&gt;\n    &lt;slot name=\"footer\"&gt;&lt;/slot&gt;\n  &lt;/footer&gt;\n&lt;/div&gt;\n\n&lt;base-layout&gt;\n  &lt;template v-slot:header&gt;\n    &lt;h1&gt;Here might be a page title&lt;/h1&gt;\n  &lt;/template&gt;\n\n  &lt;p&gt;A paragraph for the main content.&lt;/p&gt;\n  &lt;p&gt;And another one.&lt;/p&gt;\n\n  &lt;template v-slot:footer&gt;\n    &lt;p&gt;Here's some contact info&lt;/p&gt;\n  &lt;/template&gt;\n&lt;/base-layout&gt;\n\n&lt;!-- \u4f5c\u7528\u57df\u63d2\u69fd --&gt;\n&lt;span&gt;\n  &lt;slot v-bind:user=\"user\"&gt;\n    {{ user.lastName }}\n  &lt;/slot&gt;\n&lt;/span&gt;\n\n&lt;current-user&gt;\n  &lt;template v-slot:default=\"slotProps\"&gt;\n    {{ slotProps.user.firstName }}\n  &lt;/template&gt;\n&lt;/current-user&gt;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/vuejs/#4-props-data","title":"4 props \u548c data \u533a\u522b","text":"<ol> <li>\u5171\u540c\u70b9\uff1a\u4e24\u8005\u90fd\u4f5c\u4e3a\u7ec4\u4ef6\u7684\u6570\u636e\u4f7f\u7528\u3002</li> <li>\u4e0d\u540c\u70b9\uff1aprops\u53ef\u4ee5\u4f7f\u7236\u7ec4\u4ef6\u6570\u636e\u4f20\u5165\u5b50\u7ec4\u4ef6\uff0c\u800cdata\u4e0d\u80fd\u3002</li> </ol> <pre><code>Vue.component('temp-data', {\ndata:['text'],\ntemplate: '&lt;li&gt;{{text}}&lt;/li&gt;'\n})\n\nVue.component('temp-props', {\nprops: ['text'],\ntemplate: '&lt;li&gt;{{text}}&lt;/li&gt;'\n})\n</code></pre> <pre><code>&lt;div&gt;\n&lt;temp-data&gt;&lt;/temp-data&gt;\n//temp-props\u53ef\u4ee5\u4f20\u6570\u636e\u7ed9\u5b50\u7ec4\u4ef6\n&lt;temp-props text=\"\u7236\u7ec4\u4ef6\u4f20\u7684\u6570\u636e\"&gt;&lt;/temp-props&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/vuejs/#5-mixins","title":"5 mixins","text":"<p>\u5206\u53d1 Vue \u7ec4\u4ef6\u4e2d\u7684\u53ef\u590d\u7528\u529f\u80fd\u3002\u4e00\u4e2a\u6df7\u5165\u5bf9\u8c61\u53ef\u4ee5\u5305\u542b\u4efb\u610f\u7ec4\u4ef6\u9009\u9879\u3002\u5f53\u7ec4\u4ef6\u4f7f\u7528\u6df7\u5165\u5bf9\u8c61\u65f6\uff0c\u6240\u6709\u6df7\u5165\u5bf9\u8c61\u7684\u9009\u9879\u5c06\u88ab\u201c\u6df7\u5408\u201d\u8fdb\u5165\u8be5\u7ec4\u4ef6\u672c\u8eab\u7684\u9009\u9879\u3002</p> <pre><code>var mixin = {\ncreated: function () {\nconsole.log('\u6df7\u5165\u5bf9\u8c61\u7684\u94a9\u5b50\u88ab\u8c03\u7528')\n}\n}\n\nnew Vue({\nmixins: [mixin],\ncreated: function () {\nconsole.log('\u7ec4\u4ef6\u94a9\u5b50\u88ab\u8c03\u7528')\n}\n})\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/vuejs/#6-ref","title":"6 ref","text":"<p><code>ref</code>\u88ab\u7528\u6765\u7ed9\u5143\u7d20\u6216\u5b50\u7ec4\u4ef6\u6ce8\u518c\u5f15\u7528\u4fe1\u606f\u3002\u5f15\u7528\u4fe1\u606f\u5c06\u4f1a\u6ce8\u518c\u5728\u7236\u7ec4\u4ef6\u7684<code>$refs</code>\u5bf9\u8c61\u4e0a\u3002 - \u5982\u679c\u5728\u666e\u901a\u7684 DOM \u5143\u7d20\u4e0a\u4f7f\u7528\uff0c\u5f15\u7528\u6307\u5411\u7684\u5c31\u662f DOM \u5143\u7d20 - \u5982\u679c\u7528\u5728\u5b50\u7ec4\u4ef6\u4e0a\uff0c\u5f15\u7528\u5c31\u6307\u5411\u7ec4\u4ef6\u5b9e\u4f8b</p> <pre><code>&lt;!-- `vm.$refs.p` will be the DOM node --&gt;\n&lt;p ref=\"p\"&gt;hello&lt;/p&gt;\n\n&lt;!-- `vm.$refs.child` will be the child component instance --&gt;\n&lt;child-component ref=\"child\"&gt;&lt;/child-component&gt;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/vuejs/#7-inheritattrs-attrs-listeners","title":"7 inheritAttrs + <code>$attrs</code> + <code>$listeners</code>","text":"<ol> <li>inheritAttrs [bool] [\u9ed8\u8ba4\u503c\uff1atrue] </li> <li>\u5f53inheritAttrs=ture\u65f6\uff0c\u7236\u7ec4\u4ef6\u4f20\u5165\u7684\u5c5e\u6027\u503cattr1\uff0c\u5728\u5b50\u7ec4\u4ef6\u4e2dprops\u4e2d\u672a\u5b9a\u4e49\u65f6\uff0cattr1\u4f1a\u7ed1\u5b9a\u5728\u5b50\u7ec4\u4ef6\u7684\u6839\u5143\u7d20\u4e0a\uff1b</li> <li>\u5f53inheritAttrs=false\u65f6\uff0c\u7236\u7ec4\u4ef6\u4f20\u5165\u7684\u5c5e\u6027\u503cattr1\uff0c\u5728\u5b50\u7ec4\u4ef6\u4e2dprops\u4e2d\u672a\u5b9a\u4e49\u65f6\uff0cattr1\u5c5e\u6027\u5931\u6548\u3002</li> <li><code>$attrs</code> \u5305\u542b\u4e86\u7236\u7ec4\u4ef6\u5c5e\u6027\u4f20\u5165\u5b50\u7ec4\u4ef6\uff0c\u800c\u5b50\u7ec4\u4ef6props\u4e2d\u672a\u5b9a\u4e49\u7684\u5c5e\u6027\u3002\uff08class style\u9664\u5916\uff0c\u8fd92\u5c5e\u6027\u76f4\u63a5\u4f5c\u7528\u5728\u5b50\u7ec4\u4ef6\u6839\u5143\u7d20\u4e0a\uff09</li> <li><code>$listeners</code> </li> <li>[\u5b98\u65b9\u89e3\u91ca] \u5305\u542b\u4e86\u7236\u4f5c\u7528\u57df\u4e2d\u7684 (\u4e0d\u542b .native \u4fee\u9970\u5668\u7684) v-on \u4e8b\u4ef6\u76d1\u542c\u5668\u3002\u5b83\u53ef\u4ee5\u901a\u8fc7 v-on=\"<code>$listeners</code>\" \u4f20\u5165\u5185\u90e8\u7ec4\u4ef6\uff1b</li> <li>[\u6362\u4f4d\u7406\u89e3] \u5b59\u5b50\u7ec4\u4ef6\u89e6\u53d1\u7684\u4e8b\u4ef6\u53ef\u4ee5\u901a\u8fc7\u7236\u7ec4\u4ef6\u4f7f\u7528 v-on=\"<code>$listeners</code>\"\uff0c\u5c06\u6b64\u4e8b\u4ef6\u4f20\u5165\u7956\u7236\u7ec4\u4ef6\u4e2d\u3002</li> </ol> <p>\u603b\u7ed3\uff1a<code>$attrs</code>\u5c06\u5c5e\u6027\u4ece\u4e0a\u5f80\u4e0b\u4f20\u5165\u5b59\u5b50\u7ec4\u4ef6\u4e2d\uff0c<code>$listeners</code> \u5c06\u4e8b\u4ef6\u4ece\u4e0b\u5f80\u4e0a\u4f20\u5165\u7956\u7236\u7ec4\u4ef6\u4e2d\u3002</p>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/vuex/","title":"vuex\u7b14\u8bb0","text":""},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/vuex/#1-state","title":"1 state","text":"<ul> <li>\u5728\u8ba1\u7b97\u5c5e\u6027\u4e2d\u83b7\u53d6state</li> </ul> <pre><code>// \u521b\u5efa\u4e00\u4e2a Counter \u7ec4\u4ef6\nconst Counter = {\ntemplate: `&lt;div&gt;{{ count }}&lt;/div&gt;`,\ncomputed: {\ncount () {\nreturn store.state.count\n}\n}\n}\n</code></pre> <ul> <li>\u6839\u5b9e\u4f8b\u4e2d\u6ce8\u518c store </li> </ul> <pre><code>Vue.use(Vuex)\nconst app = new Vue({\nel: '#app',\n// \u628a store \u5bf9\u8c61\u63d0\u4f9b\u7ed9 \u201cstore\u201d \u9009\u9879\uff0c\u8fd9\u53ef\u4ee5\u628a store \u7684\u5b9e\u4f8b\u6ce8\u5165\u6240\u6709\u7684\u5b50\u7ec4\u4ef6\nstore,\ncomponents: { Counter },\ntemplate: `\n    &lt;div class=\"app\"&gt;\n      &lt;counter&gt;&lt;/counter&gt;\n    &lt;/div&gt;\n  `\n})\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/%E8%B8%A9%E5%9D%91electron/","title":"\u8e29\u5751electron","text":""},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/%E8%B8%A9%E5%9D%91electron/#1-electron-node-c-addon","title":"1 electron \u8c03\u7528 node C++ addon","text":""},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/%E8%B8%A9%E5%9D%91electron/#11-1require-is-not-defined","title":"1.1 \u95ee\u98981\uff1aREquire is not defined","text":"<ul> <li>\u95ee\u9898\u539f\u56e0\uff1a\u6d4f\u89c8\u5668\u4e0d\u652f\u6301require\u8bed\u6cd5</li> <li>\u89e3\u51b3\u65b9\u6cd5\uff1a\u5728electron\u4e2d\u662f\u53ef\u4ee5\u5728html\u6587\u4ef6\u4e2d\u4f7f\u7528require\u8bed\u6cd5\u7684\uff0c\u4f46\u9700\u8981\u5f00\u542fnode.js\u73af\u5883\uff0c\u5728main.js\u6587\u4ef6\u4e2d\u6dfb\u52a0<code>nodeIntegration:true</code></li> </ul> <pre><code>  const mainWindow = new BrowserWindow({\nwidth: 800,\nheight: 600,\nwebPreferences: {\npreload: path.join(__dirname, 'preload.js'),\nnodeIntegration:true//\u8bbe\u7f6etrue\u624d\u53ef\u4ee5\u5728html\u4e2d\u4f7f\u7528node.js\u73af\u5883\n}\n})\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/%E8%B8%A9%E5%9D%91electron/#12-2loading-non-context-aware-native-module-in-rendererbut-appallowrendererprocessreuse-is-true","title":"1.2 \u95ee\u98982\uff1aLoading non-context-aware native module in renderer,but app.allowRendererProcessReuse is true.","text":"<ul> <li>\u95ee\u9898\u539f\u56e0\uff1a\u5728\u7248\u672c9\u4e4b\u540e\uff0capp.allowRendererProcessReuse\u5c06\u9ed8\u8ba4\u8bbe\u7f6e\u4e3atrue</li> <li>\u89e3\u51b3\u65b9\u6cd5\uff1a\u5728main.js\u4e2d\u8bbe\u7f6e<code>app.allowRendererProcessReuse = false;</code></li> </ul> <pre><code>const {app, BrowserWindow} = require('electron')\nconst path = require('path')\n\napp.allowRendererProcessReuse=false;\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/%E8%B8%A9%E5%9D%91electron/#13-node_module_version","title":"1.3 NODE_MODULE_VERSION \u7248\u672c\u4e0d\u5bf9","text":"<ul> <li>\u95ee\u9898\u539f\u56e0\uff1aelectron\u81ea\u5e26\u7684node\u7248\u672c\u4e0e\u672c\u5730node\u7248\u672c\u4e0d\u4e00\u81f4</li> <li>\u89e3\u51b3\u65b9\u6cd5\uff1a\u4f7f\u7528electron-rebuild\u5de5\u5177\u91cd\u65b0\u7f16\u8bd1</li> </ul> <pre><code># \u5b89\u88c5electron-rebuild\nnpm i -D electron-rebuild\n# \u6267\u884c\u7f16\u8bd1\n./node_modules/.bin/electron-rebuild\n</code></pre>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/%E8%B8%A9%E5%9D%91electron/#2-vue-devtools","title":"2 \u4f7f\u7528vue-devTools","text":"<ol> <li>\u5728chrome\u4e0a\u5b89\u88c5vue-devTools</li> <li>\u5728chrome\u6269\u5c55\u754c\u9762\u627e\u5230Vue.js devtools\uff0c\u5e76\u627e\u5230id\u503c\u5982\uff0c<code>ljjemllljcmogpfapbkkighbhhppjdbg</code></li> <li>\u5728\u672c\u5730\u7535\u8111\u4e0a\u641c\u7d22\u8bcdid\u503c\uff0c\u627e\u5230\u8be5\u6269\u5c55\u6587\u4ef6\u5939\uff0c\u5982vue-devTools\u7684beta\u7248\u6587\u4ef6\u5939\u540d<code>6.0.0.2_0</code></li> <li>\u5728electron-vue\u9879\u76ee\u7684background.js\u6587\u4ef6\u4e2d\u7684\u4fee\u6539\u5982\u4e0b\u4ee3\u7801</li> </ol> <pre><code>app.on('ready', async () =&gt; {\nif (isDevelopment &amp;&amp; !process.env.IS_TEST) {\n// Install Vue Devtools\ntry {\n// await installExtension(VUEJS_DEVTOOLS) //\u6ce8\u91ca\u6389\u539f\u5148\u4ee3\u7801\n//\u4ee5\u4e0b2\u884c\u65b0\u589e\nconst { session } = require(\"electron\");\nsession.defaultSession.loadExtension('...\\\\Google\\\\Chrome\\\\User Data\\\\Default\\\\Extensions\\\\ljjemllljcmogpfapbkkighbhhppjdbg\\\\6.0.0.2_0');//\u5f15\u53f7\u5185\u662fvue-devTools\u6269\u5c55\u5730\u5740\n} catch (e) {\nconsole.error('Vue Devtools failed to install:', e.toString())\n}\n}\ncreateWindow()\n})\n</code></pre> <ol> <li>\u8fd0\u884c <code>yarn run electron:serve</code>\uff0c\u67e5\u770b\u7ed3\u679c</li> </ol>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/%E8%B8%A9%E5%9D%91mongoose/","title":"\u8e29\u5751mongoose","text":"<ul> <li>\u8e29\u5751mongoose</li> <li>mongoose\u521b\u5efa\u7684collection\u540d\u5e26\u540e\u7f00s\uff1f</li> </ul>"},{"location":"Documents/B-Programming%20Language/%E5%89%8D%E7%AB%AF/%E8%B8%A9%E5%9D%91mongoose/#1-mongoosecollections","title":"1 mongoose\u521b\u5efa\u7684collection\u540d\u5e26\u540e\u7f00s\uff1f","text":"<p>\u53ef\u80fd\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>const schema = new mongoose.Schema({\nusername: {\ntype: String\n},\npassword: {\ntype: String\n}\n})\nmongoose.model('User', schema)\n</code></pre> <p>\u539f\u56e0\uff1a\u8fd9\u4e2a\u95ee\u9898\u662f\u56e0\u4e3a\u6ca1\u6709\u7ed9collection\u6307\u5b9a\u540d\u79f0\uff0c\u800c\u5bfc\u81f4\u7cfb\u7edf\u9ed8\u8ba4\u4f7f\u7528modle\u540d\u79f0\u6309\u4e00\u5b9a\u89c4\u5219\u4ea7\u751f\uff08modle\u5c0f\u5199+s\uff09</p> <p>\u89e3\u51b3\u65b9\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>//\u65b9\u6cd51\nlet collectionName = 'User'\nlet M = mongoose.model('User', schema, collectionName);\n//\u65b9\u6cd52\nschema.set('collection','User')\n//\u65b9\u6cd53\nconst schema = new mongoose.Schema({\nusername: {\ntype: String\n},\npassword: {\ntype: String\n}\n}\uff0c{collection:'User'})\n</code></pre> <p>\u53cb\u60c5\u63d0\u793a\uff1a \u5982\u679c\u67e5\u5230\u4e0d\u5230\u6570\u636e\uff0c\u800c\u6570\u636e\u786e\u5b9e\u5b58\u5728\uff0c\u539f\u56e0\u4e5f\u53ef\u80fd\u662f\u8fd9\u4e2a\u3002\u4ee3\u7801\u8c03\u7528\u7684collection\u548c\u6570\u636e\u5e93\u4e2d\u7684\u4e0d\u4e00\u6837</p>"},{"location":"Documents/B-Programming%20Language/%E6%B1%87%E7%BC%96/%E5%AF%84%E5%AD%98%E5%99%A8/","title":"\u5bc4\u5b58\u5668","text":"<ul> <li>\u4e00\u53e3\u6c14\u770b\u5b8c45\u4e2a\u5bc4\u5b58\u5668\uff0cCPU\u6838\u5fc3\u6280\u672f\u5927\u63ed\u79d8</li> </ul>"},{"location":"Documents/B-Programming%20Language/%E6%B1%87%E7%BC%96/%E5%AF%84%E5%AD%98%E5%99%A8/#1-x86-64-16","title":"1 x86-64 \u5904\u7406\u5668\u7684 16 \u4e2a\u901a\u7528\u5bc4\u5b58\u5668","text":"\u5bc4\u5b58\u5668 \u7b80\u4ecb \u4e3b\u8981\u529f\u80fd 64 \u4f4d 32 \u4f4d 16 \u4f4d 8 \u4f4d rax \u7d2f\u52a0\u5668\uff0c\u662f\u7b97\u672f\u8fd0\u7b97\u7684\u4e3b\u8981\u5bc4\u5b58\u5668 \u5b58\u50a8\u8fd4\u56de\u503c rax eax ax al rbx \u57fa\u5740\u5bc4\u5b58\u5668\uff0c\u88ab\u8c03\u7528\u8005\u4fdd\u5b58 \u5b58\u653e\u5b58\u50a8\u533a\u7684\u8d77\u59cb\u5730\u5740 rbx ebx bx bl rcx \u8ba1\u6570\u5bc4\u5b58\u5668 \u5faa\u73af\u64cd\u4f5c\u548c\u5b57\u4e32\u5904\u7406\u7684\u8ba1\u6570\u63a7\u5236\uff1b\u51fd\u6570\u8c03\u7528\u65f6\u7684\u7b2c4\u4e2a\u53c2\u6570 rcx ecx cx cl rdx I/O\u6307\u9488 I/O\u64cd\u4f5c\u65f6\u63d0\u4f9b\u5916\u90e8\u8bbe\u5907\u63a5\u53e3\u7684\u7aef\u53e3\u5730\u5740\uff1b\u51fd\u6570\u8c03\u7528\u65f6\u7684\u7b2c3\u4e2a\u53c2\u6570 rdx edx dx dl rsi (source index)\u6e90\u53d8\u5740\u5bc4\u5b58\u5668\uff0c\u4e0erds\u6bb5\u5bc4\u5b58\u5668\u8054\u7528\uff0c\u53ef\u4ee5\u8bbf\u95ee\u6570\u636e\u6bb5\u4e2d\u7684\u4efb\u4e00\u4e2a\u5b58\u50a8\u5355\u5143 \u51fd\u6570\u8c03\u7528\u65f6\u7684\u7b2c2\u4e2a\u53c2\u6570 rsi esi si sil rdi (destination index)\u76ee\u7684\u53d8\u5740\u5bc4\u5b58\u5668\uff0c\u4e0eres\u6bb5\u5bc4\u5b58\u5668\u8054\u7528\uff0c\u53ef\u4ee5\u8bbf\u95ee\u9644\u52a0\u6bb5\u4e2d\u7684\u4efb\u4e00\u4e2a\u5b58\u50a8\u5355\u5143 \u51fd\u6570\u8c03\u7528\u65f6\u7684\u7b2c1\u4e2a\u53c2\u6570 rdi edi di dil rbp (base pointer) \u57fa\u5740\u6307\u9488\u5bc4\u5b58\u5668\uff0c\u7528\u4e8e\u63d0\u4f9b\u5806\u6808\u5185\u67d0\u4e2a\u5355\u5143\u7684\u504f\u79fb\u5730\u5740\uff0c\u4e0e rss \u6bb5\u5bc4\u5b58\u5668\u8054\u7528\uff0c\u53ef\u4ee5\u8bbf\u95ee\u5806\u6808\u4e2d\u7684\u4efb\u4e00\u4e2a\u5b58\u50a8\u5355\u5143\uff0c\u88ab\u8c03\u7528\u8005\u4fdd\u5b58 rbp ebp bp bpl rsp (stack pointer) \u6808\u9876\u6307\u9488\u5bc4\u5b58\u5668\uff0c\u63d0\u4f9b\u5806\u6808\u6808\u9876\u5355\u5143\u7684\u504f\u79fb\u5730\u5740\uff0c\u4e0e rss \u6bb5\u5bc4\u5b58\u5668\u8054\u7528\uff0c\u4ee5\u63a7\u5236\u6570\u636e\u8fdb\u6808\u548c\u51fa\u6808 rsp esp sp spl r8 \u51fd\u6570\u8c03\u7528\u65f6\u7684\u7b2c5\u4e2a\u53c2\u6570 r8 r8d r8w r8b r9 \u51fd\u6570\u8c03\u7528\u65f6\u7684\u7b2c6\u4e2a\u53c2\u6570 r9 r9d r9w r9b r10~r15 \u88ab\u8c03\u7528\u8005\u4fdd\u5b58"},{"location":"Documents/B-Programming%20Language/%E6%B1%87%E7%BC%96/%E5%AF%84%E5%AD%98%E5%99%A8/#2","title":"2 \u63a7\u5236\u5bc4\u5b58\u5668","text":"\u5bc4\u5b58\u5668 \u7b80\u4ecb \u4e3b\u8981\u529f\u80fd rip (Instruction Pointer)\u6307\u4ee4\u6307\u9488\u5bc4\u5b58\u5668\uff0c\u5b58\u653e\u4ee3\u7801\u6bb5\u4e2d\u6307\u4ee4\u7684\u504f\u79fb\u5730\u5740 FR (Flags Register)\u6807\u5fd7\u5bc4\u5b58\u5668\uff0c\u7528\u4e8e\u5b58\u653e\u53cd\u6620\u5904\u7406\u5668\u548c\u8fd0\u884c\u7a0b\u5e8f\u6267\u884c\u7ed3\u679c\u72b6\u6001\u7684\u63a7\u5236\u6807\u5fd7\u548c\u6761\u4ef6\u7801\u6807\u5fd7 \u4f8b\u5982\u53ef\u4ee5\u67e5\u770bcmp\u7684\u7ed3\u679c"},{"location":"Documents/B-Programming%20Language/%E6%B1%87%E7%BC%96/%E5%AF%84%E5%AD%98%E5%99%A8/#3","title":"3 \u6bb5\u5bc4\u5b58\u5668","text":"\u5bc4\u5b58\u5668 \u7b80\u4ecb CS (code segment)\u4ee3\u7801\u6bb5\u5730\u5740\u5bc4\u5b58\u5668\uff0c\u5b58\u653e\u4ee3\u7801\u6bb5\u7684\u8d77\u59cb\u5730\u5740 DS (data segment)\u6570\u636e\u6bb5\u5730\u5740\u5bc4\u5b58\u5668\uff0c\u5b58\u653e\u6570\u636e\u6bb5\u7684\u8d77\u59cb\u5730\u5740 SS (stack segment)\u5806\u6808\u6bb5\u5730\u5740\u5bc4\u5b58\u5668\uff0c\u5b58\u653e\u5806\u6808\u6bb5\u7684\u8d77\u59cb\u5730\u5740 ES (extra segment)\u9644\u52a0\u6bb5\u5730\u5740\u5bc4\u5b58\u5668\uff0c\u5b58\u653e\u9644\u52a0\u6bb5\u7684\u8d77\u59cb\u5730\u5740"},{"location":"Documents/B-Programming%20Language/%E6%B1%87%E7%BC%96/%E6%B1%87%E7%BC%96/","title":"\u6c47\u7f16","text":"<ul> <li>as\u6c47\u7f16\u5668\u5b98\u65b9\u6587\u6863</li> <li>\u6c47\u7f16 - \u6559\u7a0b</li> <li>\u6c47\u7f16\u6307\u4ee4\u2014\u2014\u7528GDB\u8c03\u8bd5\u6c47\u7f16</li> </ul>"},{"location":"Documents/B-Programming%20Language/%E6%B1%87%E7%BC%96/%E6%B1%87%E7%BC%96/#1","title":"1 \u4e3b\u8981\u77e5\u8bc6\u70b9","text":"<pre><code>**\u6c47\u7f16\u8bed\u8a00\u7684\u5bf9\u8c61\u662fCPU\u6216\u8005\u5bc4\u5b58\u5668**\uff0c\u4e3b\u8981\u5c31\u662f\uff1a\n1. \u6307\u5b9a\u8fd0\u7b97\u89c4\u5219\u5982\u52a0\u51cf\n2. \u6307\u5b9a\u4ece\u5185\u5b58\u4ea4\u6362\u6570\u636e\u3002\n</code></pre> <p>\u6c47\u7f16\u8bed\u8a00\u9700\u8981\u638c\u63e1\u7684\u77e5\u8bc6\u70b9\u5305\u62ec\uff1a - \u5bc4\u5b58\u5668\uff0c\u5305\u62ec\u6808\u5bc4\u5b58\u5668 rsp, rip, rbp\uff1b\u8d4b\u503c\u5bc4\u5b58\u5668\uff1ardi\u3001rsi \u7b49\uff1b\u8fd4\u56de\u503c\u5bc4\u5b58\u5668 rax\u3001rdx \u7b49\u3002 - \u8d4b\u503c\u6307\u4ee4 mov, lea\uff0c\u79fb\u4f4d\u6307\u4ee4 sal, sar\u3002 - \u5224\u65ad\u6307\u4ee4\uff0ccmp, test\uff0c\u8df3\u8dc3\u6307\u4ee4\uff0cje, jle, jne\u3002\u4ee5\u53ca\u6784\u6210\u6761\u4ef6\u8bed\u53e5\u548c\u5faa\u73af\u8bed\u53e5\u7684\u65b9\u6cd5\u3002 - \u533a\u5206\u5bc4\u5b58\u5668\u5b58\u50a8\u7684\u662f\u503c\u8fd8\u662f\u5730\u5740\uff0c <code>()</code> \u4e3a\u89e3\u5730\u5740\u7b26\u53f7\uff0c\u5373\u5f97\u5230\u5185\u5b58\u5730\u5740\u4e2d\u7684\u6570\u3002 - \u5165\u6808\uff0c\u51fa\u6808\u6307\u4ee4 push, pop\uff0c\u4ee5\u53ca\u51fa\u6808\u5165\u6808\u7684\u539f\u56e0\u3002</p>"},{"location":"Documents/C-Tool/Git/Git/","title":"Git","text":""},{"location":"Documents/C-Tool/Git/Git/#1-git","title":"1 git \u67b6\u6784","text":""},{"location":"Documents/C-Tool/Git/Git/#1-git-3","title":"1 git 3\u5927\u533a","text":"<ul> <li>\u5de5\u4f5c\u533a\uff1a\u5b9e\u9645\u5de5\u4f5c\u76ee\u5f55</li> <li>\u6682\u5b58\u533a\uff1a\u5df2add\u672acommit</li> <li>\u7248\u672c\u5e93\uff1acommit\u540e</li> </ul>"},{"location":"Documents/C-Tool/Git/Git/#2-head","title":"2 HEAD","text":""},{"location":"Documents/C-Tool/Git/Git/#21-head","title":"2.1 HEAD\u6570\u636e\u6587\u4ef6","text":"<ul> <li><code>.git/HEAD</code>\u4fdd\u5b58\u5f53\u524dHEAD\u6307\u5411\u7684\u5206\u652f</li> </ul> <pre><code>## HEAD\u6307\u5411main\u5206\u652f\n$ cat .git/HEAD\nref: refs/heads/main\n</code></pre> <ul> <li><code>.git/refs/heads/*</code>\u4fdd\u5b58\u6240\u6709\u5206\u652f\u7684\u5f53\u524dHEAD\u4f4d\u7f6e</li> </ul> <pre><code>## \u5f53\u524d\u53ea\u6709b1\u3001main\u5206\u652f\n$ ls .git/refs/heads/\nb1  main\n## main\u5206\u652f\u7684\u5f53\u524d\u6700\u65b0\u63d0\u4ea4\n$ cat .git/refs/heads/main\n62c0dd2831f0770a12b903d9dfca18ab1fa6f62e\n</code></pre>"},{"location":"Documents/C-Tool/Git/Git/#22-headhead","title":"2.2 HEAD^\u548cHEAD~","text":"<ul> <li><code>HEAD~[number]</code>\uff1a\u8868\u793a\u63d0\u4ea4\u8def\u5f84\u4e0a\u7684\u7b2cn\u63d0\u4ea4\u7684\u7b2c\u4e00\u4e2a\u63d0\u4ea4,\u6bd4\u5982\uff1a<code>HEAD~2</code>\u8868\u793a\u7236\u63d0\u4ea4\u7684\u7236\u63d0\u4ea4</li> <li><code>HEAD^[number]</code>\uff1a\u8868\u793a\u7236\u63d0\u4ea4\u7684\u7b2cn\u4e2a\u63d0\u4ea4\uff0c\u6bd4\u5982\uff1a<code>HEAD^2</code>\u8868\u793a\u7b2c2\u4e2a\u7236\u63d0\u4ea4\uff08\u5f53\u5408\u5e76\u5206\u652f\u540e\uff0c\u5c31\u4f1a\u6709\u591a\u4e2a\u7236\u63d0\u4ea4\uff09</li> <li><code>HEAD~[number]^[number]</code>\uff1a\u8868\u793a\u63d0\u4ea4\u8def\u5f84\u4e0a\u7684\u7b2cn\u4e2a\u63d0\u4ea4\u7684\u7b2cn\u4e2a\u7236\u63d0\u4ea4</li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ git log --oneline --graph\n* 62c0dd2 (HEAD -&gt; main) add 4.txt\n* b55291b add 3.txt\n*   9d213ac (tag: tag2) resolve merge 2.txt conflict\n|\\\n| * 53cb60f (b1) branch b1 commit +2\n* | 71d793e Merge branch 'b1'\n|\\|\n| * 298fb37 branch b1 commit\n* | 934c075 branch main commit\n|/\n* 1ad14b3 add 2 folder\n* 2d5f9d0 merge commit 2,3,4\n* efcfdb2 .gitignore\n</code></pre> <ul> <li>\u89e3\u6790\uff1a</li> <li><code>HEAD^</code>==<code>HEAD~</code>\uff1a\u6307\u63d0\u4ea462c0dd2</li> <li><code>HEAD~2</code>==<code>HEAD~~</code>==<code>HEAD~2^</code>\uff1a\u6307\u63d0\u4ea4b55291b</li> <li><code>HEAD~2^</code>\uff1a\u6307\u63d0\u4ea471d793e</li> <li><code>HEAD~2^2</code>\uff1a\u6307\u63d0\u4ea453cb60f</li> </ul>"},{"location":"Documents/C-Tool/Git/Git/#2-git","title":"2 git\u914d\u7f6e","text":"<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#1","title":"1 \u8bbe\u7f6e\u7528\u6237\u540d\u548c\u90ae\u7bb1","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#21","title":"2.1 \u8bbe\u7f6e\u7528\u6237\u540d\u548c\u90ae\u7bb1","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 \u5982\u679c\u7528\u6237\u540d\u6709\u7a7a\u683c\uff0c\u5219\u7528\u6237\u540d\u8981\u5728\u5f15\u53f7\u5185\uff0c\u5982\"zhang san\"</p> <pre><code>$ git config --global user.name [yourname]\n$ git config --global user.email [youremail]\n</code></pre> <p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#2","title":"2 \u67e5\u770b\u7528\u6237\u914d\u7f6e\u4fe1\u606f","text":"<pre><code>$ git config --list\n</code></pre>"},{"location":"Documents/C-Tool/Git/Git/#3-local-global-system","title":"3 --local\u3001--global\u3001--system","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#22","title":"2.2 \u67e5\u770b\u7528\u6237\u914d\u7f6e\u4fe1\u606f","text":"<pre><code>$ git config --list\n</code></pre>"},{"location":"Documents/C-Tool/Git/Git/#23-local-global-system","title":"2.3 --local\u3001--global\u3001--system","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 \u914d\u7f6e\u6587\u4ef6\u8bfb\u53d6\u987a\u5e8f\u4e3a\uff1a<code>--system</code>-&gt;<code>--global</code>-&gt;<code>--local</code> - <code>--local</code>:\u64cd\u4f5c\u672c\u5730\u914d\u7f6e\u6587\u4ef6(.git/config) - <code>--global</code>:\u64cd\u4f5c\u5168\u5c40\u914d\u7f6e\u6587\u4ef6(~/.gitconfig) - <code>--system</code>:\u64cd\u4f5c\u7cfb\u7edf\u914d\u7f6e\u6587\u4ef6($(prefix)/etc/gitconfig) \u914d\u7f6e\u6587\u4ef6\u8bfb\u53d6\u987a\u5e8f\u4e3a\uff1a<code>--system</code>-&gt;<code>--global</code>-&gt;<code>--local</code> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#4-add-get-get-all","title":"4 --add\u3001--get\u3001--get-all","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#24-add-get-get-all","title":"2.4 --add\u3001--get\u3001--get-all","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 - <code>--add</code>:\u6dfb\u52a0\u4e00\u6761\u914d\u7f6e\u4fe1\u606f\uff08\u7c7b\u4f3c\u9644\u52a0\u5199\uff09 - <code>--get</code>:\u83b7\u53d6\u914d\u7f6e\u4fe1\u606f\uff08\u5982\u679c\u6709\u591a\u6761\uff0c\u53ea\u6253\u5370\u6700\u540e\u4e00\u6761\u914d\u7f6e\u9879\uff09 - <code>--get-all</code>:\u83b7\u53d6\u914d\u7f6e\u4fe1\u606f\uff08\u6253\u5370\u6240\u6709\u914d\u7f6e\u9879\uff09</p> <p><pre><code>## \u4fee\u6539\u914d\u7f6e\u9879\n$ git config --file gitcfg  core.editor \"vi\"\n## \u518d\u6dfb\u52a0\u4e00\u6761\u914d\u7f6e\u4fe1\u606f\n$ git config --file gitcfg --add core.editor \"code --wait\"\n## \u53ea\u4f1a\u6253\u5370\u6700\u540e\u4e00\u6761\u914d\u7f6e\u4fe1\u606f\n$ git config --file gitcfg --get core.editor\ncode --wait\n## \u6253\u5370\u6240\u6709\u914d\u7f6e\u9879\n$ git config --file gitcfg --get-all core.editor\nvi\ncode --wait\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#5-unset-unset-all","title":"5 --unset\u3001--unset-all","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#25-unset-unset-all","title":"2.5 --unset\u3001--unset-all","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 - <code>--unset</code>:\u5220\u9664\u6307\u5b9a\u7684\u914d\u7f6e\u9879(\u5f53\u6709\u914d\u7f6e\u9879\u6709\u591a\u6761\u6d88\u606f\u65f6\uff0c\u4f1a\u5931\u8d25) - <code>--unset-all</code>:\u5220\u9664\u6240\u6709\u6307\u5b9a\u7684\u914d\u7f6e\u9879</p> <p><pre><code>$ git config --file gitcfg --list\ncore.editor=vi\ncore.editor=code --wait\n## \u5f53\u6709\u914d\u7f6e\u9879\u6709\u591a\u6761\u6d88\u606f\u65f6\uff0c\u4f1a\u5931\u8d25\n$ git config --file gitcfg --unset core.editor\nwarning: core.editor has multiple values\n## \u5220\u9664\u6240\u6709\u4fee\u6539\u7684\u914d\u7f6e\u9879\n$ git config --file gitcfg --unset-all core.editor\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#6-list","title":"6 --list","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#26-list","title":"2.6 --list","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 \u5217\u51fa\u6240\u6709\u914d\u7f6e\u9879</p> <p><pre><code>$ git config --system --list\ndiff.astextplain.textconv=astextplain\nfilter.lfs.clean=git-lfs clean -- %f\nfilter.lfs.smudge=git-lfs smudge -- %f\nfilter.lfs.process=git-lfs filter-process\nfilter.lfs.required=true\nhttp.sslbackend=openssl\nhttp.sslcainfo=E:/Git/mingw64/ssl/certs/ca-bundle.crt\ncore.autocrlf=true\ncore.fscache=true\ncore.symlinks=false\npull.rebase=false\ncredential.helper=manager-core\ncredential.https://dev.azure.com.usehttppath=true\ninit.defaultbranch=master\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#7","title":"7 \u914d\u7f6e\u4e0d\u6539\u53d8\u6362\u884c\u7b26","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#27","title":"2.7 \u914d\u7f6e\u4e0d\u6539\u53d8\u6362\u884c\u7b26","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>git config --global core.autocrlf false\ngit config --global core.filemode false\ngit config --global core.safecrlf true\n</code></pre></p> <p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#1_1","title":"1 \u521d\u59cb\u5316\u4ed3\u5e93","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#3-git","title":"3 git\u57fa\u672c\u547d\u4ee4","text":""},{"location":"Documents/C-Tool/Git/Git/#31","title":"3.1 \u521d\u59cb\u5316\u4ed3\u5e93","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>## \u9ed8\u8ba4\u751f\u6210\u5206\u652fmaster\ngit init\n</code></pre></p> <p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#2_1","title":"2 \u6dfb\u52a0\u6587\u4ef6\u81f3\u6682\u5b58\u533a","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#32","title":"3.2 \u6dfb\u52a0\u6587\u4ef6\u81f3\u6682\u5b58\u533a","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>#\u6dfb\u52a0.git\u6240\u5728\u76ee\u5f55\u6240\u6709\u6587\u4ef6\ngit add .\n#\u6dfb\u52a0\u6307\u5b9a\u6587\u4ef6\ngit add file.txt\n#\u4f7f\u7528\u6b63\u5219\u8bed\u6cd5\ngit add *.txt\n</code></pre></p> <p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#3","title":"3 \u63d0\u4ea4\u81f3\u672c\u5730\u4ed3\u5e93","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#33","title":"3.3 \u63d0\u4ea4\u81f3\u672c\u5730\u4ed3\u5e93","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>#\u5c06\u6682\u5b58\u533a\u6587\u4ef6\u63d0\u4ea4\u81f3\u672c\u5730\u4ed3\u5e93\ngit commit -m \"\u63d0\u4ea4\u4fe1\u606f\"\n#\u8df3\u8fc7add\u6b65\u9aa4\uff0c\u76f4\u63a5\u5c06\u5df2\u8ddf\u8e2a\u6587\u4ef6\u63d0\u4ea4\u81f3\u672c\u5730\u4ed3\u5e93\ngit commit -a -m \"\u63d0\u4ea4\u4fe1\u606f\"\n## \u5c06\u6682\u5b58\u533a\u5185\u5bb9\u63d0\u4ea4\uff0c\u4f46\u4f1a\u6cbf\u7528\u4e0a\u4e00\u6b21\u63d0\u4ea4\uff0c\u4e0d\u4f1a\u4ea7\u751f\u65b0\u7684\u63d0\u4ea4id\ngit commit --amend\n</code></pre></p> <p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#4","title":"4 \u67e5\u770b\u4ed3\u5e93\u72b6\u6001","text":"<pre><code>git status\n</code></pre>"},{"location":"Documents/C-Tool/Git/Git/#5","title":"5 \u5206\u652f\u3001\u6807\u7b7e\u3001\u5408\u5e76","text":""},{"location":"Documents/C-Tool/Git/Git/#1-tag","title":"1 tag","text":"<p>\u5e26\u6ce8\u91ca\u7684\u6807\u7b7e\u6709\u4e00\u6761\u53ef\u4ee5\u7528git show\u663e\u793a\u7684\u6d88\u606f\uff0c\u800c\u6ca1\u6709\u6ce8\u91ca\u7684\u6807\u7b7e\u53ea\u662f\u4e00\u4e2a\u6307\u5411\u63d0\u4ea4\u7684\u547d\u540d\u6307\u9488\u3002\u63a8\u8350\u4f7f\u7528\u5e26\u6ce8\u91ca\u7684\u6807\u7b7e\u3002</p>"},{"location":"Documents/C-Tool/Git/Git/#11","title":"1.1 \u521b\u5efa\u6807\u7b7e","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#34","title":"3.4 \u67e5\u770b\u4ed3\u5e93\u72b6\u6001","text":"<pre><code>git status\n</code></pre>"},{"location":"Documents/C-Tool/Git/Git/#4_1","title":"4 \u5206\u652f\u3001\u6807\u7b7e\u3001\u5408\u5e76","text":""},{"location":"Documents/C-Tool/Git/Git/#41-tag","title":"4.1 tag","text":"<p>\u5e26\u6ce8\u91ca\u7684\u6807\u7b7e\u6709\u4e00\u6761\u53ef\u4ee5\u7528git show\u663e\u793a\u7684\u6d88\u606f\uff0c\u800c\u6ca1\u6709\u6ce8\u91ca\u7684\u6807\u7b7e\u53ea\u662f\u4e00\u4e2a\u6307\u5411\u63d0\u4ea4\u7684\u547d\u540d\u6307\u9488\u3002\u63a8\u8350\u4f7f\u7528\u5e26\u6ce8\u91ca\u7684\u6807\u7b7e\u3002</p>"},{"location":"Documents/C-Tool/Git/Git/#411","title":"4.1.1 \u521b\u5efa\u6807\u7b7e","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>## \u521b\u5efa\u4e0d\u5e26\u6ce8\u91ca\u6807\u7b7e\ngit tag tag1\n## \u521b\u5efa\u5e26\u6ce8\u91ca\u7684\u6807\u7b7e\ngit tag -a v1 -m \"v1 \u6807\u7b7e\"\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#12","title":"1.2 \u67e5\u770b\u6807\u7b7e","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#412","title":"4.1.2 \u67e5\u770b\u6807\u7b7e","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>## \u663e\u793a\u6240\u6709\u5206\u652f\ngit tag\n## \u663e\u793a\u6307\u5b9a\u5206\u652f\u4fe1\u606f\ngit show tag2\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#13","title":"1.3 \u5220\u9664\u6807\u7b7e","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#413","title":"4.1.3 \u5220\u9664\u6807\u7b7e","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>$ git tag -d tag1\nDeleted tag 'tag1' (was 9d213ac)\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#14","title":"1.4 \u63a8\u9001\u8fdc\u7a0b\u4ed3\u5e93\u6807\u7b7e","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#414","title":"4.1.4 \u63a8\u9001\u8fdc\u7a0b\u4ed3\u5e93\u6807\u7b7e","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>## \u5c06\u6807\u7b7et1\u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93origin\uff0c\u547d\u540d\u6807\u7b7et1\ngit push origin t1\n## \u5c06\u6807\u7b7et1\u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93origin,\u5e76\u547d\u540d\u6807\u7b7ert2\ngit push origin t2:rt2\n## \u63a8\u9001\u6240\u6709\u6807\u7b7e\ngit push origin --tags\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#15","title":"1.5 \u5220\u9664\u8fdc\u7a0b\u4ed3\u5e93\u6807\u7b7e","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#415","title":"4.1.5 \u5220\u9664\u8fdc\u7a0b\u4ed3\u5e93\u6807\u7b7e","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>## \u5220\u9664\u8fdc\u7a0b\u4ed3\u5e93rt2\u6807\u7b7e\ngit push origin --delete rt2\n## \u63a8\u9001\u7a7a\u6807\u7b7e\u8fbe\u5230\u5220\u9664\u8fdc\u7a0b\u6807\u7b7e\u4f5c\u7528\ngit push origin :refs/tags/rt2\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#16","title":"1.6 \u663e\u793a\u8fdc\u7a0b\u5206\u652f","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#416","title":"4.1.6 \u663e\u793a\u8fdc\u7a0b\u5206\u652f","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>$ git ls-remote --tags\nFrom https://gitee.com/shuhaiwen/git-test.git\n5899883c341d12211c137b7df16e6c502878f7ec        refs/tags/t1\nbbd09bdd06950a267a0af5e40cb5e547e14e98ca        refs/tags/v1\n5899883c341d12211c137b7df16e6c502878f7ec        refs/tags/v1^{}\n</code></pre></p> <p>\u5176\u4e2drefs/tags/v1^{}\u8868\u793a\u7684\u662f\u5e26\u6ce8\u91ca\u7684\u6807\u7b7e &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#17","title":"1.7 \u4ece\u6807\u7b7e\u68c0\u51fa\u5185\u5bb9","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#417","title":"4.1.7 \u4ece\u6807\u7b7e\u68c0\u51fa\u5185\u5bb9","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 \u4f7f\u7528\u65b0\u5206\u652f\u53bb\u627f\u8f7d\u68c0\u51fa\u7684\u6807\u7b7e\u5185\u5bb9</p> <p><pre><code>## \u4ece\u6807\u7b7et1\u4e0a\u68c0\u6d4b\u5230\u65b0\u5206\u652fb3\uff0c\u5e76\u5207\u6362\u5230\u5206\u652fb3\ngit checkout -b b3 t1\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#2-branch","title":"2 branch","text":""},{"location":"Documents/C-Tool/Git/Git/#21_1","title":"2.1 \u663e\u793a\u5206\u652f","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#42-branch","title":"4.2 branch","text":""},{"location":"Documents/C-Tool/Git/Git/#421","title":"4.2.1 \u663e\u793a\u5206\u652f","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>## \u663e\u793a\u5f53\u524d\u5206\u652f\ngit branch\n## \u663e\u793a\u6240\u6709\u5206\u652f\uff08\u5305\u62ec\u8fdc\u7a0b\u5206\u652f\u548c\u672c\u5730\u5206\u652f\uff09(\u8fdc\u7a0b\u5206\u652f\u5728\u672c\u5730\u4ed3\u5e93\uff0c\u4f7f\u7528\u524dgit fetch\u53ef\u4ee5\u6293\u53d6\u66f4\u65b0\u8fdc\u7a0b\u5206\u652f\u5230\u672c\u5730)\ngit branch -a\n## \u663e\u793a\u6240\u6709\u8fdc\u7a0b\u8ddf\u8e2a\u5206\u652f\ngit branch -r\n## \u663e\u793a\u5df2\u5408\u5e76\u5206\u652f\ngit branch --merged\n## \u663e\u793a\u672a\u5408\u5e76\u5206\u652f\ngit branch --no-merged\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#22_1","title":"2.2 \u521b\u5efa\u5206\u652f","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#422","title":"4.2.2 \u521b\u5efa\u5206\u652f","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>## \u521b\u5efa\u5206\u652f(\u8fd8\u5728master\u4e3b\u5206\u652f\u4e0a)\ngit branch b1\n## \u5207\u6362\u5206\u652f(\u5728b1\u5206\u652f\u4e0a)\ngit checkout b1\n## \u4ece\u6307\u5b9a\u7684\u63d0\u4ea4\u70b9\u521b\u5efa\u5206\u652f(\u5206\u652f\u5185\u5bb9\u5728\u6307\u5b9a\u7684\u63d0\u4ea4\u70b9\u4e0a)\ngit branch b2 HEAD^\ngit branch b2 8a58f93\n## \u4ece\u6307\u5b9a\u7684\u5206\u652f\u521b\u5efa(\u4ece\u5206\u652fb1\u521b\u5efa\u5206\u652fb2)\ngit branch b2 b1\n## \u4ece\u6307\u5b9a\u7684tag\u521b\u5efa(\u4ece\u6807\u7b7et1\u521b\u5efa\u5206\u652fb2)\ngit branch b2 t1\n</code></pre></p> <p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#23","title":"2.3 \u5220\u9664\u672c\u5730\u5206\u652f","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#423","title":"4.2.3 \u5220\u9664\u672c\u5730\u5206\u652f","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>## \u5206\u652f\u672a\u88ab\u5408\u5e76\u4f1a\u62a5\u9519\ngit branch -d branch1\n## \u5f3a\u5236\u5220\u9664\u5206\u652f(\u5305\u62ec\u672a\u5408\u5e76\u5206\u652f)\ngit branch -D branch1\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#24","title":"2.4 \u5206\u652f\u6539\u540d","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#424","title":"4.2.4 \u5206\u652f\u6539\u540d","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>git branch -m oldName newName\n</code></pre></p> <p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#25","title":"2.5 \u63a8\u9001\u8fdc\u7a0b\u4ed3\u5e93\u5206\u652f","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#425","title":"4.2.5 \u63a8\u9001\u8fdc\u7a0b\u4ed3\u5e93\u5206\u652f","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 - \u8bed\u6cd5\uff1a<code>git push \u8fdc\u7a0b\u4ed3\u5e93\u540d \u672c\u5730\u5206\u652f:\u8fdc\u7a0b\u5206\u652f</code>\uff08\u8fdc\u7a0b\u4ed3\u5e93\u540d\u53ef\u4ee5\u7701\u7565\uff0c\u672c\u5730\u5206\u652f\u548c\u8fdc\u7a0b\u5206\u652f\u4e00\u6837\u53ef\u4ee5\u53ea\u5199\u4e00\u4e2a\uff09</p> <p><pre><code>## \u9ed8\u8ba4\u63a8\u9001\u5f53\u524d\u5206\u652f\u5230\u8fdc\u7a0b\u5206\u652f\uff08\u5fc5\u987b\u8fdc\u7a0b\u5206\u652f\u5df2\u7ecf\u548c\u672c\u5730\u5206\u652f\u5173\u8054\uff09\ngit push\n## push\u6307\u5b9a\u5206\u652f\ngit push b1\n## psuh\u6307\u5b9a\u5206\u652f\u5230\u8fdc\u7a0b\u6307\u5b9a\u5206\u652f\ngit push b1:rb1\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#26","title":"2.6 \u663e\u793a\u8fdc\u7a0b\u5206\u652f\u548c\u672c\u5730\u5206\u652f\u5173\u7cfb","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#426","title":"4.2.6 \u663e\u793a\u8fdc\u7a0b\u5206\u652f\u548c\u672c\u5730\u5206\u652f\u5173\u7cfb","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code> git remote show origin\n* remote origin\n  Fetch URL: https://gitee.com/shuhaiwen/git-test.git\n  Push  URL: https://gitee.com/shuhaiwen/git-test.git\n  HEAD branch: master\n  Remote branches:\n    b1     tracked\n    b2     tracked\n    master tracked\n  Local branch configured for 'git pull':\n    b2 merges with remote b2\n  Local refs configured for 'git push':\n    b1     pushes to b1     (up to date)\nb2     pushes to b2     (up to date)\nmaster pushes to master (fast-forwardable)\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#27_1","title":"2.7 \u5220\u9664\u8fdc\u7a0b\u5206\u652f","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#427","title":"4.2.7 \u5220\u9664\u8fdc\u7a0b\u5206\u652f","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>## \u65b9\u5f0f1\uff1a\u5220\u9664\u8fdc\u7a0b\u5206\u652f branch1\uff0c\u5176\u4e2d\u5192\u53f7:\u524d\u9700\u8981\u7a7a\u4e00\u683c\uff0c\u4e14\u5220\u9664\u7684\u5206\u652f\u4e0d\u80fd\u662f\u8fdc\u7a0b\u4ed3\u5e93\u7684\u9ed8\u8ba4\u5206\u652f\ngit push origin :branch1\n## \u65b9\u5f0f2\uff1a\ngit push [remote] --delete [remote_branch]\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#28","title":"2.8 \u8bbe\u7f6e\u8ddf\u8e2a\u5206\u652f","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#428","title":"4.2.8 \u8bbe\u7f6e\u8ddf\u8e2a\u5206\u652f","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 \u4e3a\u8fdc\u7a0b\u4ed3\u5e93\u67d0\u4e00\u4e2a\u5206\u652f\u5efa\u7acb\u672c\u5730\u5206\u652f\uff0c\u5373\u4e3a\u8ddf\u8e2a\u5206\u652f</p> <p><pre><code>$ git branch -a\n* master\n  remotes/origin/HEAD -&gt; origin/master\n  remotes/origin/appveyor\n  remotes/origin/configuration\n  remotes/origin/context\n  remotes/origin/develop\n  remotes/origin/disable-nonstandard\n  remotes/origin/fix-add-item\n  remotes/origin/less-magic\n  remotes/origin/libfuzzer\n  remotes/origin/long-long-fix\n  remotes/origin/master\n  remotes/origin/meson\n## \u65b9\u6cd51 \u4e3a\u8fdc\u7a0b\u5206\u652fcontext\u5173\u8054\u672c\u5730\u5206\u652fcontext\n$ git checkout -b context origin/context\nSwitched to a new branch 'context'\nBranch 'context' set up to track remote branch 'context' from 'origin'.\n$ git branch\n* context\n  master\n## \u65b9\u6cd52 \u4f7f\u7528--track\u53c2\u6570\n$ git checkout --track origin/appveyor\nSwitched to a new branch 'appveyor'\nBranch 'appveyor' set up to track remote branch 'appveyor' from 'origin'.\n$ git branch\n* appveyor\n  context\n  master\n## \u65b9\u5f0f3 \u76f4\u63a5\u68c0\u51fa\u8fdc\u7a0b\u4ed3\u5e93\u5206\u652f\u540d\uff08\u9700\u672c\u5730\u6ca1\u6709\u6b64\u5206\u652f\uff0c\u5426\u5219\u5c06\u5207\u6362\u5230\u672c\u5730\u5206\u652f\uff09\n$ git checkout develop\nSwitched to a new branch 'develop'\nBranch 'develop' set up to track remote branch 'develop' from 'origin'.\n$ git branch\n  appveyor\n  context\n* develop\n  master\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#29","title":"2.9 \u67e5\u770b\u6240\u6709\u8ddf\u8e2a\u5206\u652f","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#429","title":"4.2.9 \u67e5\u770b\u6240\u6709\u8ddf\u8e2a\u5206\u652f","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>$ git branch -vv\n  appveyor f0e93c9 [origin/appveyor] add appveyor\n  context  3b0d37f [origin/context] Change name from Configuration to Context\n* develop  5437b79 [origin/develop] Add getNumberValue function\nmain     324a6ac [origin/master] Update .gitattributes (#544)\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#210","title":"2.10 \u62c9\u53d6\u8fdc\u7a0b\u5206\u652f\u6240\u6709\u5206\u652f","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#4210","title":"4.2.10 \u62c9\u53d6\u8fdc\u7a0b\u5206\u652f\u6240\u6709\u5206\u652f","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>title: \u6b65\u9aa4\u5982\u4e0b\n1. --track\u8ddf\u8e2a\u6240\u6709\u8fdc\u7a0b\u5206\u652f\n2. fetch --all\u66f4\u65b0\u6240\u6709\u5206\u652f\n</code></pre></p> <p><pre><code>$ git branch -r | grep -v '\\-&gt;' | while read remote; do git branch --track \"${remote#origin/}\" \"$remote\"; done\n$ git fetch --all\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#3-switch","title":"3 switch","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#43-switch","title":"4.3 switch","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 - \u529f\u80fd\uff1a\u5207\u6362\u5206\u652f</p> <p><pre><code>git switch branch1\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#4-checkout","title":"4 checkout","text":""},{"location":"Documents/C-Tool/Git/Git/#41","title":"4.1 \u5207\u6362\u5206\u652f","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#44-checkout","title":"4.4 checkout","text":""},{"location":"Documents/C-Tool/Git/Git/#441","title":"4.4.1 \u5207\u6362\u5206\u652f","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>## \u5207\u6362\u5206\u652f(\u5728branch1\u5206\u652f\u4e0a)\ngit checkout branch1\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#42","title":"4.2 \u521b\u5efa\u65b0\u5206\u652f\u7684\u540c\u65f6\u5207\u6362\u8fc7\u53bb","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#442","title":"4.4.2 \u521b\u5efa\u65b0\u5206\u652f\u7684\u540c\u65f6\u5207\u6362\u8fc7\u53bb","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>## \u521b\u5efa\u65b0\u5206\u652f\u7684\u540c\u65f6\u5207\u6362\u8fc7\u53bb\ngit checkout -b branch2\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#5-merge","title":"5 merge","text":""},{"location":"Documents/C-Tool/Git/Git/#51","title":"5.1 \u5408\u5e76\u5206\u652f","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#45-merge","title":"4.5 merge","text":""},{"location":"Documents/C-Tool/Git/Git/#451","title":"4.5.1 \u5408\u5e76\u5206\u652f","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>## \u5408\u5e76branch1\u5206\u652f\u5230master\u4e0a\n## \u5148\u5207\u6362\u5230\u4e3b\u5206\u652f\ngit checkout master\n## \u518d\u5408\u5e76\u5206\u652f\u5230\u5f53\u524d\u4e3b\u5206\u652f\ngit merge branch1\n## \u6839\u636e\u63d0\u793a\u89e3\u51b3\u51b2\u7a81\uff0c\u7136\u540e\u518d\u6b21commit\u5373\u53ef\ngit commit -am \"b1 merge ro master\"\n</code></pre></p> <p> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#52-abort","title":"5.2 --abort\u51b2\u7a81\u540e\u53d6\u6d88\u5408\u5e76","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#452-abort","title":"4.5.2 --abort\u51b2\u7a81\u540e\u53d6\u6d88\u5408\u5e76","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>## 1. \u5408\u5e76b1\u5230master\u5206\u652f \n$ git merge b1\nwarning: Cannot merge binary files: 2.txt (HEAD vs. b1)\nwarning: Cannot merge binary files: 1.txt (HEAD vs. b1)\nAuto-merging 2.txt\nCONFLICT (content): Merge conflict in 2.txt\nAuto-merging 1.txt\nCONFLICT (content): Merge conflict in 1.txt\nAutomatic merge failed; fix conflicts and then commit the result.\n## 2. \u67e5\u770b\u5408\u5e76\u51b2\u7a81\u72b6\u6001\u4fe1\u606f\n$ git status\nOn branch master\nYou have unmerged paths.\n  (fix conflicts and run \"git commit\")\n(use \"git merge --abort\" to abort the merge)\n\nUnmerged paths:\n  (use \"git add &lt;file&gt;...\" to mark resolution)\nboth modified:   1.txt\n        both modified:   2.txt\n\nno changes added to commit (use \"git add\" and/or \"git commit -a\")\n## 3.\u53d6\u6d88\u6b64\u6b21\u5408\u5e76\n$ git merge --abort\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#53-no-fffast-forward","title":"5.3 --no-ff\u7981\u6b62fast forward\u5408\u5e76","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#453-no-fffast-forward","title":"4.5.3 --no-ff\u7981\u6b62fast forward\u5408\u5e76","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>title: \u4ec0\u4e48\u662ffast forward\u6a21\u5f0f\u5408\u5e76\uff1f\n1. \u5408\u5e76\u5206\u652fb2\u5230\u4e3b\u5206\u652fmaster\u65f6\uff0c\u5982\u679cmater\u5206\u652f\u7684\u72b6\u6001\u6ca1\u6709\u88ab\u66f4\u6539\u8fc7\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5408\u5e76\u662f\u975e\u5e38\u7b80\u5355\u7684\u3002 b1\u5206\u652f\u7684\u5386\u53f2\u8bb0\u5f55\u5305\u542bmaster\u5206\u652f\u6240\u6709\u7684\u5386\u53f2\u8bb0\u5f55\uff0c\u6240\u4ee5\u901a\u8fc7\u628amaster\u5206\u652f\u7684\u4f4d\u7f6e\u79fb\u52a8\u5230b1\u7684\u6700\u65b0\u5206\u652f\u4e0a\uff0cGit \u5c31\u4f1a\u5408\u5e76\u3002\u8fd9\u6837\u7684\u5408\u5e76\u88ab\u79f0\u4e3afast-forward\uff08\u5feb\u8fdb\uff09\u5408\u5e76\u3002\n2. no-fast-forword \u5219\u5373\u4f7f\u5728\u80fd\u591ffast-forward\u5408\u5e76\u7684\u60c5\u51b5\u4e0b\u4e5f\u4f1a\u751f\u6210\u65b0\u7684\u63d0\u4ea4\u5e76\u5408\u5e76\uff0c\u4fbf\u4e8e\u67e5\u8be2\u5408\u5e76\u8bb0\u5f55\u3002\n</code></pre></p> <ul> <li>\u793a\u4f8b\uff1a\u9ed8\u8ba4--ff\u6a21\u5f0f\u5408\u5e76\uff0c</li> </ul> <pre><code>## \u9ed8\u8ba4--ff\u662f\u5f00\u542f\u7684\uff0c\u53ef\u4ee5\u4e0d\u5199\uff0c\u4ece\u4e0b\u56fe\u4e2d\u53ef\u4ee5\u770b\u51fa\u6ca1\u6709\u751f\u6210\u65b0\u7684\u5408\u5e76\u63d0\u4ea4\u70b9\uff0cb2\u7684\u63d0\u4ea4\u548cmater\u63d0\u4ea4\u8bb0\u5f55\u4e00\u6837\n$ git merge --ff -m \"b2 merge to master\" b2\n</code></pre> <p> - \u793a\u4f8b\uff1a--no-ff\u6a21\u5f0f\u5408\u5e76</p> <pre><code>$ git merge --no-ff -m \"b2 merge to master\" b2\n</code></pre> <p> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#54-squash","title":"5.4 --squash\u5408\u5e76\u65f6\u53ea\u4ea7\u751f\u4e00\u6761\u5408\u5e76\u8bb0\u5f55","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#454-squash","title":"4.5.4 --squash\u5408\u5e76\u65f6\u53ea\u4ea7\u751f\u4e00\u6761\u5408\u5e76\u8bb0\u5f55","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>1. --squash\u5408\u5e76\u65f6\u53ea\u4ea7\u751f\u4e00\u6761\u5408\u5e76\u8bb0\u5f55,\u5f53\u5408\u5e76\u5206\u652f\u6709\u592a\u591a\u63d0\u4ea4\u65f6\uff0c\u4e14\u4e0d\u60f3\u8981\u8fd9\u6837\u63d0\u4ea4\u4f53\u73b0\u5728\u4e3b\u5206\u652f\u4e0a\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4f7f\u7528\u6b64\u547d\u4ee4\u5408\u5e76\u6210\u4e00\u6761\u63d0\u4ea4\u8bb0\u5f55\u3002\n2. \u9ed8\u8ba4\u662f--no-squash\n</code></pre></p> <pre><code>git merge --squash b1\n</code></pre> <p> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#55","title":"5.5 \u89e3\u51b3\u5408\u5e76\u51b2\u7a81","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#455","title":"4.5.5 \u89e3\u51b3\u5408\u5e76\u51b2\u7a81","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 1. \u5047\u8bbe\u5408\u5e76\u65f6\uff0c<code>1.txt</code>\u6587\u4ef6\u51b2\u7a81,\u5408\u5e76\u64cd\u4f5c\u5931\u8d25 2. <code>1.txt</code>\u6587\u4ef6\u91cc\u9762\u4f1a\u8bb0\u5f55\u51b2\u7a81\u4fe1\u606f\uff0c\u5927\u81f4\u5982\u4e0b,<code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code>\u548c<code>=======</code>\u95f4\u6570\u636e\u662fHEAD\u5206\u652f\u6570\u636e\uff0c<code>=======</code>\u548c<code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>\u662fb1\u5206\u652f\u6570\u636e\uff0c\u4fdd\u7559\u5176\u4e2d\u4e00\u4e2a\u5206\u652f\u7684\u6570\u636e\uff0c\u5c31\u80fd\u89e3\u51b3\u51b2\u7a81</p> <pre><code>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD\nbranch main update\n=======\nbranch b1 update\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; b1\n1.txt\n</code></pre> <ol> <li>\u5047\u8bbe\u4fdd\u7559HEAD\u5206\u652f\u6570\u636e\uff0c<code>1.txt</code>\u6587\u4ef6\u53d8\u52a8\u5982\u4e0b</li> </ol> <pre><code>branch main uodate\n1.txt\n</code></pre> <ol> <li>\u91cd\u65b0add <code>1.txt</code>\u6587\u4ef6\uff0c\u5e76commit\uff08\u5408\u5e76\u4ea7\u751f\u51b2\u7a81\u65f6\uff0c\u51b2\u7a81\u6587\u4ef6\u4f1a\u4ece\u6682\u5b58\u533a\u79fb\u9664\uff0c\u6240\u4ee5\u9700\u8981\u91cd\u65b0\u6dfb\u52a0\u5230\u6682\u5b58\u533a\uff09</li> </ol> <p><pre><code>git add 1.txt\ngit commit -m \"resolve merge 1.txt conflict\"\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#6-mergetool","title":"6 mergetool","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#46-mergetool","title":"4.6 mergetool","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 - \u529f\u80fd\uff1a\u8fd0\u884c\u5408\u5e76\u51b2\u7a81\u89e3\u51b3\u5de5\u5177\u6765\u89e3\u51b3\u5408\u5e76\u51b2\u7a81</p> <p><pre><code>git mergetool\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#7-rm","title":"7 rm","text":"<ul> <li>\u529f\u80fd\uff1a\u4ece\u5de5\u4f5c\u6811\u548c\u7d22\u5f15\u4e2d\u5220\u9664\u6587\u4ef6</li> </ul>"},{"location":"Documents/C-Tool/Git/Git/#71","title":"7.1 \u4ece\u5de5\u4f5c\u533a\u548c\u6682\u5b58\u533a\u79fb\u9664\u6587\u4ef6","text":"<pre><code>git rm 1.txt\n</code></pre>"},{"location":"Documents/C-Tool/Git/Git/#72-cache","title":"7.2 --cache\u4ec5\u4ece\u6682\u5b58\u533a\u79fb\u9664\u6587\u4ef6","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#47-rm","title":"4.7 rm","text":"<ul> <li>\u529f\u80fd\uff1a\u4ece\u5de5\u4f5c\u6811\u548c\u7d22\u5f15\u4e2d\u5220\u9664\u6587\u4ef6</li> </ul>"},{"location":"Documents/C-Tool/Git/Git/#471","title":"4.7.1 \u4ece\u5de5\u4f5c\u533a\u548c\u6682\u5b58\u533a\u79fb\u9664\u6587\u4ef6","text":"<pre><code>git rm 1.txt\n</code></pre>"},{"location":"Documents/C-Tool/Git/Git/#472-cache","title":"4.7.2 --cache\u4ec5\u4ece\u6682\u5b58\u533a\u79fb\u9664\u6587\u4ef6","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>$ git rm --cache 1.txt\n$ git status\nOn branch master\nYour branch is up to date with 'origin/master'.\n\nChanges to be committed:\n  (use \"git restore --staged &lt;file&gt;...\" to unstage)\ndeleted:    1.txt\n\nUntracked files:\n  (use \"git add &lt;file&gt;...\" to include in what will be committed)\n1.txt\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#8-mv","title":"8 mv","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#48-mv","title":"4.8 mv","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 - \u529f\u80fd\uff1a\u79fb\u52a8\u6216\u91cd\u547d\u540d\u6587\u4ef6\u3001\u76ee\u5f55\u6216\u7b26\u53f7\u94fe\u63a5</p> <pre><code>$ git mv 1.txt 3.txt\n$ git status\nOn branch master\nYour branch is up to date with 'origin/master'.\n\nChanges to be committed:\n  (use \"git restore --staged &lt;file&gt;...\" to unstage)\nrenamed:    1.txt -&gt; 3.txt\n</code></pre> <p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#6","title":"6 \u8fdc\u7a0b\u4ed3\u5e93","text":""},{"location":"Documents/C-Tool/Git/Git/#1-clone","title":"1 clone","text":"<ul> <li>\u529f\u80fd\uff1a\u514b\u9686\u8fdc\u7a0b\u4ed3\u5e93</li> </ul>"},{"location":"Documents/C-Tool/Git/Git/#11_1","title":"1.1 \u514b\u9686\u8fdc\u7a0b\u4ed3\u5e93","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#5_1","title":"5 \u8fdc\u7a0b\u4ed3\u5e93","text":""},{"location":"Documents/C-Tool/Git/Git/#51-clone","title":"5.1 clone","text":"<ul> <li>\u529f\u80fd\uff1a\u514b\u9686\u8fdc\u7a0b\u4ed3\u5e93</li> </ul>"},{"location":"Documents/C-Tool/Git/Git/#511","title":"5.1.1 \u514b\u9686\u8fdc\u7a0b\u4ed3\u5e93","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>## \u9ed8\u8ba4\u8fdc\u7a0b\u4ed3\u5e93\u540d\u4e3aorigin\uff0c\u5206\u652f\u4e3a\u4f60\u514b\u9686\u7684\u5206\u652f\u540d\uff0c\u4e14\u5728\u672c\u5730\u521b\u5efamaster\u5206\u652f\ngit clone [url]\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#12_1","title":"1.2 \u6307\u5b9a\u5206\u652f\u514b\u9686","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#512","title":"5.1.2 \u6307\u5b9a\u5206\u652f\u514b\u9686","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 - \u8bed\u6cd5   - <code>git clone -b \u5206\u652f\u540d url</code> - \u793a\u4f8b</p> <p><pre><code>git clone -b main https://github.com/shuhaiwen/shuhaiwen.github.io.git\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#13_1","title":"1.3 \u547d\u540d\u8fdc\u7a0b\u4ed3\u5e93\u540d","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#513","title":"5.1.3 \u547d\u540d\u8fdc\u7a0b\u4ed3\u5e93\u540d","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>## -o \u8fdc\u7a0b\u4ed3\u5e93\u540d \u4fee\u6539\u9ed8\u8ba4\u4ed3\u5e93\u540dorigin\n$ git clone -o remote https://gitee.com/shuhaiwen/git-test.git\n$ git remote\nremote\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#14_1","title":"1.4 \u6307\u5b9a\u672c\u5730\u5e93\u76ee\u5f55\u540d","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#514","title":"5.1.4 \u6307\u5b9a\u672c\u5730\u5e93\u76ee\u5f55\u540d","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>## \u514b\u9686\u4ed3\u5e93\u5230test\u76ee\u5f55\u4e0b\uff0c\u9ed8\u8ba4\u76ee\u5f55\u548c\u662f\u8fdc\u7a0b\u4ed3\u5e93\u540dgit-test\u540c\u540d\ngit clone https://gitee.com/shuhaiwen/git-test.git test  </code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#15_1","title":"1.5 \u4e0d\u62c9\u53d6\u6807\u7b7e","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#515","title":"5.1.5 \u4e0d\u62c9\u53d6\u6807\u7b7e","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>## --no-tags \u8868\u793a\u4e0d\u62c9\u53d6\u6807\u7b7e(\u9ed8\u8ba4\u662f\u62c9\u53d6\u6807\u7b7e)\uff0c\u540c\u65f6\u8bbe\u7f6econfig\u6587\u4ef6remote.&lt;remote&gt;.tagOpt=--no-tags \uff0c\u9690\u5f0fpull\u548cfetch\u4e5f\u4e0d\u4f1a\u62c9\u53d6\u6807\u7b7e\ngit clone https://gitee.com/shuhaiwen/git-test.git --no-tags\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#2-fetch","title":"2 fetch","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#52-fetch","title":"5.2 fetch","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>fetch\u548cpull\u529f\u80fd\u4e00\u6837\uff0cpull\u76f8\u5bf9\u4e8e\u5148fetch\u518dmerge\n</code></pre></p> <ul> <li>\u529f\u80fd\uff1a\u4ece\u8fdc\u7a0b\u4ed3\u5e93\u66f4\u65b0\u672c\u5730\u5e93 &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</li> </ul>"},{"location":"Documents/C-Tool/Git/Git/#21_2","title":"2.1 \u66f4\u65b0\u672c\u5730\u4ed3\u5e93","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#521","title":"5.2.1 \u66f4\u65b0\u672c\u5730\u4ed3\u5e93","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>## 1.\u66f4\u65b0\u8fdc\u7a0b\u5206\u652f\u5230\u672c\u5730\uff08\u4e0d\u5220\u9664\u672c\u5730\u4fdd\u5b58\u7684\u5df2\u5931\u6548\u7684\u8fdc\u7a0b\u5206\u652f\uff09\ngit fetch [remote-name]\n## 2.\u66f4\u65b0\u8fdc\u7a0b\u5206\u652f\u5230\u672c\u5730\uff08\u540c\u65f6\u5220\u9664\u672c\u5730\u4fdd\u5b58\u7684\u5df2\u5931\u6548\u7684\u8fdc\u7a0b\u5206\u652f\uff09\ngit fetch --prune\n## 3.\u66f4\u65b0\u6240\u6709\u5206\u652f\ngit fetch --all\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#22_2","title":"2.2 \u66f4\u65b0\u672c\u5730\u4ed3\u5e93\u4f46\u4e0d\u66f4\u65b0\u6807\u7b7e","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#522","title":"5.2.2 \u66f4\u65b0\u672c\u5730\u4ed3\u5e93\u4f46\u4e0d\u66f4\u65b0\u6807\u7b7e","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 - \u9ed8\u8ba4\u62c9\u53d6\u5206\u652f\u65f6\u4f1a\u628a\u6807\u7b7e\u4e5f\u62c9\u53d6\u4e0b\u6765</p> <p><pre><code>## -n\u6216--no-tags\u9009\u9879\u4e0d\u62c9\u53d6\u6807\u7b7e\uff08\u8fdc\u7a0b\u4ed3\u5e93\u6709\u65b0\u6807\u7b7e\uff0c\u4e5f\u4e0d\u4f1a\u62c9\u53d6\u4e0b\u6765\uff0c\u9ed8\u8ba4\u4f1a\u62c9\u53d6\uff09\n$ git fetch --no-tags\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#3-pull","title":"3 pull","text":"<ul> <li>\u529f\u80fd\uff1a\u4ece\u8fdc\u7a0b\u4ed3\u5e93\u66f4\u65b0\u672c\u5730\u5e93\uff0c\u5e76\u8fdb\u884c\u5fc5\u8981\u7684\u5408\u5e76</li> </ul>"},{"location":"Documents/C-Tool/Git/Git/#31_1","title":"3.1 \u66f4\u65b0\u672c\u5730\u4ed3\u5e93","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#53-pull","title":"5.3 pull","text":"<ul> <li>\u529f\u80fd\uff1a\u4ece\u8fdc\u7a0b\u4ed3\u5e93\u66f4\u65b0\u672c\u5730\u5e93\uff0c\u5e76\u8fdb\u884c\u5fc5\u8981\u7684\u5408\u5e76</li> </ul>"},{"location":"Documents/C-Tool/Git/Git/#531","title":"5.3.1 \u66f4\u65b0\u672c\u5730\u4ed3\u5e93","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>## 1.\u66f4\u65b0\u8fdc\u7a0b\u5206\u652f\u5230\u672c\u5730\uff08\u4e0d\u5220\u9664\u672c\u5730\u4fdd\u5b58\u7684\u5df2\u5931\u6548\u7684\u8fdc\u7a0b\u5206\u652f\uff09\ngit pull [remote-name]\n## 2.\u66f4\u65b0\u8fdc\u7a0b\u5206\u652f\u5230\u672c\u5730\uff08\u540c\u65f6\u5220\u9664\u672c\u5730\u4fdd\u5b58\u7684\u5df2\u5931\u6548\u7684\u8fdc\u7a0b\u5206\u652f\uff09\ngit pull --prune\n## 3.\u66f4\u65b0\u6240\u6709\u5206\u652f\ngit pull --all\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#32_1","title":"3.2 \u66f4\u65b0\u672c\u5730\u4ed3\u5e93\u4f46\u4e0d\u66f4\u65b0\u6807\u7b7e","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#532","title":"5.3.2 \u66f4\u65b0\u672c\u5730\u4ed3\u5e93\u4f46\u4e0d\u66f4\u65b0\u6807\u7b7e","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 - \u9ed8\u8ba4\u62c9\u53d6\u5206\u652f\u65f6\u4f1a\u628a\u6807\u7b7e\u4e5f\u62c9\u53d6\u4e0b\u6765</p> <p><pre><code>## -n\u6216--no-tags\u9009\u9879\u4e0d\u62c9\u53d6\u6807\u7b7e\uff08\u8fdc\u7a0b\u4ed3\u5e93\u6709\u65b0\u6807\u7b7e\uff0c\u4e5f\u4e0d\u4f1a\u62c9\u53d6\u4e0b\u6765\uff0c\u9ed8\u8ba4\u4f1a\u62c9\u53d6\uff09\n$ git pull --no-tags\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#4-ls-remote","title":"4 ls-remote","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#54-ls-remote","title":"5.4 ls-remote","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 - \u529f\u80fd\uff1a\u5217\u51fa\u8fdc\u7a0b\u4ed3\u5e93\u4e2d\u7684\u5f15\u7528</p> <p><pre><code>## 1.\u663e\u793a\u6240\u6709\u8fdc\u7a0b\u4ed3\u5e93\u4e2d\u7684\u5206\u652f\u548c\u6807\u7b7e\n$ git ls-remote\nFrom https://gitee.com/shuhaiwen/git-test.git\n8a58f93ba3348698f15135c8baa73cbd85709e6a        HEAD\nd909ce91167032992a2c7dc1d60dd34db3ad8248        refs/heads/b1\n3340aaca055e688e5c827b3342f230c75a7622dd        refs/heads/b2\n8a58f93ba3348698f15135c8baa73cbd85709e6a        refs/heads/master\n5899883c341d12211c137b7df16e6c502878f7ec        refs/tags/t1\nbbd09bdd06950a267a0af5e40cb5e547e14e98ca        refs/tags/v1\n5899883c341d12211c137b7df16e6c502878f7ec        refs/tags/v1^{}\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#41_1","title":"4.1 \u663e\u793a\u8fdc\u7a0b\u5206\u652f","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#541","title":"5.4.1 \u663e\u793a\u8fdc\u7a0b\u5206\u652f","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>## 2.\u4ec5\u663e\u793a\u5206\u652f\n$ git ls-remote --head\nFrom https://gitee.com/shuhaiwen/git-test.git\nd909ce91167032992a2c7dc1d60dd34db3ad8248        refs/heads/b1\n3340aaca055e688e5c827b3342f230c75a7622dd        refs/heads/b2\n8a58f93ba3348698f15135c8baa73cbd85709e6a        refs/heads/master\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#42_1","title":"4.2 \u663e\u793a\u8fdc\u7a0b\u6807\u7b7e","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#542","title":"5.4.2 \u663e\u793a\u8fdc\u7a0b\u6807\u7b7e","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>## 3.\u4ec5\u663e\u793a\u6807\u7b7e\n$ git ls-remote --tags\nFrom https://gitee.com/shuhaiwen/git-test.git\n5899883c341d12211c137b7df16e6c502878f7ec        refs/tags/t1\nbbd09bdd06950a267a0af5e40cb5e547e14e98ca        refs/tags/v1\n5899883c341d12211c137b7df16e6c502878f7ec        refs/tags/v1^{}\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#5-remote","title":"5 remote","text":"<ul> <li>\u529f\u80fd\uff1a\u7ba1\u7406\u8fdc\u7a0b\u4ed3\u5e93</li> </ul>"},{"location":"Documents/C-Tool/Git/Git/#51_1","title":"5.1 \u67e5\u770b\u8fdc\u7a0b\u4ed3\u5e93","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#55-remote","title":"5.5 remote","text":"<ul> <li>\u529f\u80fd\uff1a\u7ba1\u7406\u8fdc\u7a0b\u4ed3\u5e93</li> </ul>"},{"location":"Documents/C-Tool/Git/Git/#551","title":"5.5.1 \u67e5\u770b\u8fdc\u7a0b\u4ed3\u5e93","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>## \u6307\u5b9a\u8fdc\u7a0b\u4ed3\u5e93\ngit remote show [remote-name]\n## \u6240\u6709\u8fdc\u7a0b\u4ed3\u5e93\u4fe1\u606f\ngit remote -v\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#52","title":"5.2 \u79fb\u9664/\u6dfb\u52a0/\u91cd\u547d\u540d\u8fdc\u7a0b\u4ed3\u5e93\u5173\u8054","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#552","title":"5.5.2 \u79fb\u9664/\u6dfb\u52a0/\u91cd\u547d\u540d\u8fdc\u7a0b\u4ed3\u5e93\u5173\u8054","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>git remote rm [remote-name]\ngit remote add [remote-name] https://github.com/&lt;REPO&gt;\ngit remote rename [old-name] [new-name]\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#6-push","title":"6 push","text":"<ul> <li>\u529f\u80fd\uff1a\u63a8\u9001\u672c\u5730\u7248\u672c\u5e93\u5230\u8fdc\u7a0b\u4ed3\u5e93</li> </ul>"},{"location":"Documents/C-Tool/Git/Git/#61","title":"6.1 \u63a8\u9001\u5185\u5bb9\u5230\u8fdc\u7a0b\u4ed3\u5e93","text":"<pre><code>git push [remote-name] [local-branch]:[remote-branch]\n</code></pre>"},{"location":"Documents/C-Tool/Git/Git/#62","title":"6.2 \u63a8\u9001\u8fdc\u7a0b\u4ed3\u5e93\u5206\u652f","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#56-push","title":"5.6 push","text":"<ul> <li>\u529f\u80fd\uff1a\u63a8\u9001\u672c\u5730\u7248\u672c\u5e93\u5230\u8fdc\u7a0b\u4ed3\u5e93</li> </ul>"},{"location":"Documents/C-Tool/Git/Git/#561","title":"5.6.1 \u63a8\u9001\u5185\u5bb9\u5230\u8fdc\u7a0b\u4ed3\u5e93","text":"<pre><code>git push [remote-name] [local-branch]:[remote-branch]\n</code></pre>"},{"location":"Documents/C-Tool/Git/Git/#562","title":"5.6.2 \u63a8\u9001\u8fdc\u7a0b\u4ed3\u5e93\u5206\u652f","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 - \u8bed\u6cd5\uff1a<code>git push \u8fdc\u7a0b\u4ed3\u5e93\u540d \u672c\u5730\u5206\u652f:\u8fdc\u7a0b\u5206\u652f</code>\uff08\u8fdc\u7a0b\u4ed3\u5e93\u540d\u53ef\u4ee5\u7701\u7565\uff0c\u672c\u5730\u5206\u652f\u548c\u8fdc\u7a0b\u5206\u652f\u4e00\u6837\u53ef\u4ee5\u53ea\u5199\u4e00\u4e2a\uff09</p> <p><pre><code>## \u9ed8\u8ba4\u63a8\u9001\u5f53\u524d\u5206\u652f\u5230\u8fdc\u7a0b\u5206\u652f\uff08\u5fc5\u987b\u8fdc\u7a0b\u5206\u652f\u5df2\u7ecf\u548c\u672c\u5730\u5206\u652f\u5173\u8054\uff09\ngit push\n## push\u6307\u5b9a\u5206\u652f\ngit push b1\n## psuh\u6307\u5b9a\u5206\u652f\u5230\u8fdc\u7a0b\u6307\u5b9a\u5206\u652f\ngit push b1:rb1\n## \u63a8\u9001\u6240\u6709\u5206\u652f\uff08\u672c\u5730\u5206\u652f\u5168\u90e8\u63a8\u9001\uff0c\u8fdc\u7a0b\u5206\u652f\u6ca1\u6709\u5219\u521b\u5efa\u540c\u540d\u5206\u652f\uff09\ngit push origin --all\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#63","title":"6.3 \u5220\u9664\u8fdc\u7a0b\u5206\u652f","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#563","title":"5.6.3 \u5220\u9664\u8fdc\u7a0b\u5206\u652f","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>## \u65b9\u5f0f1\uff1a\u5220\u9664\u8fdc\u7a0b\u5206\u652f branch1\uff0c\u5176\u4e2d\u5192\u53f7:\u524d\u9700\u8981\u7a7a\u4e00\u683c\uff0c\u4e14\u5220\u9664\u7684\u5206\u652f\u4e0d\u80fd\u662f\u8fdc\u7a0b\u4ed3\u5e93\u7684\u9ed8\u8ba4\u5206\u652f\ngit push origin :branch1\n## \u65b9\u5f0f2\uff1a\ngit push [remote] --delete [remote_branch]\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#64","title":"6.4 \u63a8\u9001\u8fdc\u7a0b\u4ed3\u5e93\u6807\u7b7e","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#564","title":"5.6.4 \u63a8\u9001\u8fdc\u7a0b\u4ed3\u5e93\u6807\u7b7e","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>## \u5c06\u6807\u7b7et1\u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93origin\uff0c\u547d\u540d\u6807\u7b7et1\ngit push origin t1\n## \u5c06\u6807\u7b7et1\u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93origin,\u5e76\u547d\u540d\u6807\u7b7ert2\ngit push origin t2:rt2\n## \u63a8\u9001\u6240\u6709\u6807\u7b7e\ngit push origin --tags\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#65","title":"6.5 \u5220\u9664\u8fdc\u7a0b\u4ed3\u5e93\u6807\u7b7e","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#565","title":"5.6.5 \u5220\u9664\u8fdc\u7a0b\u4ed3\u5e93\u6807\u7b7e","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>## \u5220\u9664\u8fdc\u7a0b\u4ed3\u5e93rt2\u6807\u7b7e\ngit push origin --delete rt2\n## \u63a8\u9001\u7a7a\u6807\u7b7e\u8fbe\u5230\u5220\u9664\u8fdc\u7a0b\u6807\u7b7e\u4f5c\u7528\ngit push origin :refs/tags/rt2\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#66","title":"6.6 \u64a4\u9500\u8fdc\u7a0b\u5206\u652f\u67d0\u4e2a\u63d0\u4ea4","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#566","title":"5.6.6 \u64a4\u9500\u8fdc\u7a0b\u5206\u652f\u67d0\u4e2a\u63d0\u4ea4","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 1. \u5148\u4f7f\u7528reset\u64cd\u4f5c\u4fee\u6539\u672c\u5730\u5206\u652f\u63d0\u4ea4 2. \u518d\u4f7f\u7528push -f\u5f3a\u5236\u63a8\u9001</p> <pre><code>git reset --hard commitId\ngit push -f origin master\n</code></pre>"},{"location":"Documents/C-Tool/Git/Git/#6_1","title":"6 \u64a4\u9500\u64cd\u4f5c","text":"<p><pre><code>title: revert\u548creset\u4e0d\u540c\uff1f\n1. revert \u53ea\u662f\u8fd8\u539fcommitId\u8fd9\u6b21\u63d0\u4ea4\u7684\u4fee\u6539\uff0c\u4e14\u751f\u6210\u4e00\u4e2a\u65b0\u63d0\u4ea4\u8bb0\u5f55\u3002\n2. reset \u4f1a\u5c06HEAD\u79fb\u52a8\u5230\u8fd9\u6b21commitId\u4f4d\u7f6e\uff0c\u5e76\u4e14\u5728\u6b64\u4e4b\u540e\u7684\u6240\u6709\u63d0\u4ea4\u90fd\u5c06\u5220\u9664\u3002\n3. revert\u9002\u7528\u4e8e\u67d0\u6b21\u63d0\u4ea4\u6709\u8bef\uff0c\u9700\u8981\u5220\u9664\u6b64\u6b21\u63d0\u4ea4\u7684\u573a\u666f\u3002\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#1-revert","title":"1 revert","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#61-revert","title":"6.1 revert","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 - \u529f\u80fd\uff1a\u8fd8\u539f\u4e00\u4e9b\u73b0\u6709\u7684\u63d0\u4ea4</p> <pre><code>## \u4f1a\u8fd8\u539fcommitId\u8fd9\u6b21\u63d0\u4ea4\u7684\u4fee\u6539\uff0c\u4e14\u751f\u6210\u4e00\u4e2a\u65b0\u63d0\u4ea4\u8bb0\u5f55\ngit revert commitId\n## \u901a\u5e38\u4f1a\u628a\u6b64\u6b21revert\u63d0\u4ea4\u5230\u8fdc\u7a0b\ngit push\n</code></pre> <p> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#2-rebase","title":"2 rebase","text":"<ul> <li>\u529f\u80fd\uff1a\u5f53\u6267\u884crebase\u64cd\u4f5c\u65f6\uff0cgit\u4f1a\u4ece\u4e24\u4e2a\u5206\u652f\u7684\u5171\u540c\u7956\u5148\u5f00\u59cb\u63d0\u53d6\u5f85\u53d8\u57fa\u5206\u652f\u4e0a\u7684\u4fee\u6539\uff0c\u7136\u540e\u5c06\u5f85\u53d8\u57fa\u5206\u652f\u6307\u5411\u57fa\u5206\u652f\u7684\u6700\u65b0\u63d0\u4ea4\uff0c\u6700\u540e\u5c06\u521a\u624d\u63d0\u53d6\u7684\u4fee\u6539\u5e94\u7528\u5230\u57fa\u5206\u652f\u7684\u6700\u65b0\u63d0\u4ea4\u7684\u540e\u9762</li> </ul>"},{"location":"Documents/C-Tool/Git/Git/#21-contine","title":"2.1 --contine\u89e3\u51b3\u5408\u5e76\u51b2\u7a81\u540e\u91cd\u65b0\u542f\u52a8\u53d8\u57fa\u8fc7\u7a0b","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#62-rebase","title":"6.2 rebase","text":"<ul> <li>\u529f\u80fd\uff1a\u5f53\u6267\u884crebase\u64cd\u4f5c\u65f6\uff0cgit\u4f1a\u4ece\u4e24\u4e2a\u5206\u652f\u7684\u5171\u540c\u7956\u5148\u5f00\u59cb\u63d0\u53d6\u5f85\u53d8\u57fa\u5206\u652f\u4e0a\u7684\u4fee\u6539\uff0c\u7136\u540e\u5c06\u5f85\u53d8\u57fa\u5206\u652f\u6307\u5411\u57fa\u5206\u652f\u7684\u6700\u65b0\u63d0\u4ea4\uff0c\u6700\u540e\u5c06\u521a\u624d\u63d0\u53d6\u7684\u4fee\u6539\u5e94\u7528\u5230\u57fa\u5206\u652f\u7684\u6700\u65b0\u63d0\u4ea4\u7684\u540e\u9762</li> </ul>"},{"location":"Documents/C-Tool/Git/Git/#621-contine","title":"6.2.1 --contine\u89e3\u51b3\u5408\u5e76\u51b2\u7a81\u540e\u91cd\u65b0\u542f\u52a8\u53d8\u57fa\u8fc7\u7a0b","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>## 1.1 \u5148\u5207\u6362\u5230\u53d8\u57fa\u5206\u652f\uff0c\u518d\u6267\u884c\u53d8\u57fa\u5230\u4e3b\u5206\u652f,\u9700\u8981\u89e3\u51b3\u51b2\u7a81\uff08\u8fd9\u4e2a\u548c\u5408\u5e76\u64cd\u4f5c\u6b63\u597d\u76f8\u53cd\uff0c\u5408\u5e76\u662f\u5148\u5207\u6362\u5230\u4e3b\u5206\u652f\uff0c\u518dmerge\u5408\u5e76\u5206\u652f\uff09\ngit switch b1\ngit rebase master\n## 1.2 \u6216\u8005\u76f4\u63a5\u6307\u5b9a\u4e3b\u5206\u652f\u548c\u5f85\u53d8\u57fa\u5206\u652f\ngit rebase master b1\n## 2. \u5982\u679c\u6709\u51b2\u7a81\uff0c\u89e3\u51b3\u51b2\u7a81\uff08\u53ef\u4f7f\u7528git mergetool\u5904\u7406\uff09\uff0c\u518d\u6267\u884cgit rebase --continue\uff0c\u6ca1\u6709\u51b2\u7a81\u4e0d\u9700\u6267\u884c\ngit rebase --continue\n## 3. b1\u5206\u652frebase\u540e\uff0c\u901a\u5e38\u4f1a\u518d\u6b21\u5408\u5e76\u5230\u4e3b\u5206\u652f\u4e0a\ngit switch master\ngit merge b1\n</code></pre></p> <p> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#22-abortrebase","title":"2.2 --abort\u53d6\u6d88\u6b64\u5904rebase\u64cd\u4f5c","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#622-abortrebase","title":"6.2.2 --abort\u53d6\u6d88\u6b64\u5904rebase\u64cd\u4f5c","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 \u5f53\u6709\u5408\u5e76\u51b2\u7a81\u65f6\uff0c\u4e0d\u50cf\u7ee7\u7eedrebase\uff0c\u4f7f\u7528\u6b64\u547d\u4ee4\u53d6\u6d88</p> <p><pre><code>git rebase --abort\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#3-restore","title":"3 restore","text":"<ul> <li>\u529f\u80fd\uff1a\u6062\u590d\u5de5\u4f5c\u7a7a\u95f4\u6587\u4ef6</li> <li>restore\u9ed8\u8ba4\u6709--worktree\u9009\u9879</li> </ul>"},{"location":"Documents/C-Tool/Git/Git/#31-worktree","title":"3.1 --worktree\u64a4\u9500\u5de5\u4f5c\u533a\u7684\u4fee\u6539","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#63-restore","title":"6.3 restore","text":"<ul> <li>\u529f\u80fd\uff1a\u6062\u590d\u5de5\u4f5c\u7a7a\u95f4\u6587\u4ef6</li> <li>restore\u9ed8\u8ba4\u6709--worktree\u9009\u9879</li> </ul>"},{"location":"Documents/C-Tool/Git/Git/#631-worktree","title":"6.3.1 --worktree\u64a4\u9500\u5de5\u4f5c\u533a\u7684\u4fee\u6539","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 - \u5f53\u6539\u53d8\u4e86\u5de5\u4f5c\u533a\u6587\u4ef6\u65f6\uff0c\u6b64\u65f6\u53c8\u4e0d\u60f3\u8981\u66f4\u6539\u7684\u5185\u5bb9\uff0c\u901a\u8fc7<code>--worktree</code>\u9009\u9879\u53ef\u4ee5\u5c06\u5de5\u4f5c\u533a\u6587\u4ef6\u6062\u590d\u5230\u6700\u8fd1\u7684\u6682\u5b58\u533a\u6216\u7248\u672c\u5e93\u6587\u4ef6 - \u6b64\u64cd\u4f5c\u4f1a\u628a\u5f53\u524d\u5de5\u4f5c\u533a\u7684\u4fee\u6539\u5220\u6389\uff0c\u4f7f\u7528\u524d\u8bf7\u786e\u4fdd\u5f53\u524d\u5185\u5bb9\u4e0d\u9700\u8981</p> <p><pre><code>## git restore --worktree &lt;path&gt;\n## \u64a4\u9500\u6307\u5b9a\u6587\u4ef6\n$ git restore --worktree 1.txt\n## \u64a4\u9500\u6240\u6709\u6587\u4ef6\n$ git restore --worktree .\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#32-staged","title":"3.2 --staged\u53d6\u6d88\u6682\u5b58\u533a\u6587\u4ef6","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#632-staged","title":"6.3.2 --staged\u53d6\u6d88\u6682\u5b58\u533a\u6587\u4ef6","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 - \u5f53\u901a\u8fc7add\u5c06\u6587\u4ef6\u653e\u5165\u6682\u5b58\u533a\u65f6\uff0c\u901a\u8fc7<code>--staged</code>\u9009\u9879\u53ef\u4ee5\u5c06\u6587\u4ef6\u6062\u590d\u5230\u5de5\u4f5c\u533a\u53bb</p> <pre><code>## add \u6587\u4ef6\u5230\u6682\u5b58\u533a\ngit add 1.txt\n## \u5c06\u6587\u4ef6\u79fb\u9664\u6682\u5b58\u533a\ngit restore --staged 1.txt\n</code></pre> <p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#33-source","title":"3.3 --source\u5c06\u5de5\u4f5c\u533a\u5185\u5bb9\u5207\u6362\u5230\u67d0\u4e2a\u7248\u672c","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#633-source","title":"6.3.3 --source\u5c06\u5de5\u4f5c\u533a\u5185\u5bb9\u5207\u6362\u5230\u67d0\u4e2a\u7248\u672c","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>## git restore --source=&lt;commit id&gt; &lt;path&gt;\n## \u6307\u5b9a\u5177\u4f53\u6587\u4ef6\n$ git restore --source=9d213ac 3.txt\n## .\u8868\u793a\u6240\u6709\u6587\u4ef6\n$ git restore --source=9d213ac .\n</code></pre></p> <p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#4-reset","title":"4 reset","text":"<ul> <li>\u529f\u80fd\uff1a\u5c06\u5f53\u524d HEAD \u91cd\u7f6e\u4e3a\u6307\u5b9a\u72b6\u6001</li> </ul>"},{"location":"Documents/C-Tool/Git/Git/#41-mixed-","title":"4.1 --mixed\u7248\u672c\u5e93-&gt;\u6682\u5b58\u533a","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#64-reset","title":"6.4 reset","text":"<ul> <li>\u529f\u80fd\uff1a\u5c06\u5f53\u524d HEAD \u91cd\u7f6e\u4e3a\u6307\u5b9a\u72b6\u6001</li> </ul>"},{"location":"Documents/C-Tool/Git/Git/#641-mixed-","title":"6.4.1 --mixed\u7248\u672c\u5e93-&gt;\u6682\u5b58\u533a","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>git reset --mixed commit_id\n</code></pre></p> <p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#42-soft-","title":"4.2 --soft\u6682\u5b58\u533a-&gt;\u5de5\u4f5c\u533a","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#642-soft-","title":"6.4.2 --soft\u6682\u5b58\u533a-&gt;\u5de5\u4f5c\u533a","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>git reset --soft commit_id\n</code></pre></p> <p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#43-hard","title":"4.3 --hard\u7248\u672c\u5e93\u3001\u6682\u5b58\u533a\u3001\u5de5\u4f5c\u533a\u5168\u64a4\u9500","text":"<pre><code>git reset --hard commit_id\n</code></pre>"},{"location":"Documents/C-Tool/Git/Git/#5-stash","title":"5 stash","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#643-hard","title":"6.4.3 --hard\u7248\u672c\u5e93\u3001\u6682\u5b58\u533a\u3001\u5de5\u4f5c\u533a\u5168\u64a4\u9500","text":"<pre><code>git reset --hard commit_id\n</code></pre>"},{"location":"Documents/C-Tool/Git/Git/#65-stash","title":"6.5 stash","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>\u53ea\u80fd\u4fdd\u5b58\u5de5\u4f5c\u7a7a\u95f4\u4e2d\u5df2\u8ddf\u8e2a\u7684\u6587\u4ef6\u7684\u4fee\u6539\uff0c\u672a\u8ddf\u8e2a\u7684\u6587\u4ef6\uff08\u65b0\u5efa\u6587\u4ef6\u8fd8\u6ca1\u6709add\uff09\u4e0d\u4f1a\u6682\u5b58\uff0c\u4f9d\u7136\u5b58\u5728\n</code></pre></p> <ul> <li>\u529f\u80fd\uff1a\u4fdd\u5b58\u672c\u5730\u4fee\u6539\u5e76\u6062\u590d\u5de5\u4f5c\u76ee\u5f55\u4ee5\u5339\u914d HEAD \u63d0\u4ea4</li> <li>\u4f7f\u7528\u573a\u666f\uff1a\u518d\u4fee\u6539\u4e86\u4e00\u4e9b\u5de5\u4f5c\u7a7a\u95f4\u7684\u6587\u4ef6\u65f6\uff0c\u9700\u8981\u8fd4\u56de\u67d0\u4e2a\u5206\u652f\u5b8c\u6210\u4e34\u65f6\u4efb\u52a1\u65f6\uff0c\u4f7f\u7528\u6b64\u547d\u4ee4\u6682\u5b58\u5de5\u4f5c\u7a7a\u95f4\u7684\u4fee\u6539\u6587\u4ef6 &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</li> </ul>"},{"location":"Documents/C-Tool/Git/Git/#51-stash","title":"5.1 \u5de5\u4f5c\u533a-&gt;stash\u7a7a\u95f4","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#651-stash","title":"6.5.1 \u5de5\u4f5c\u533a-&gt;stash\u7a7a\u95f4","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 - \u8bed\u6cd5\uff1a</p> <p><pre><code>## 1. \u6dfb\u52a0\u5230stash\u7a7a\u95f4\ngit stash\n## 2. \u6dfb\u52a0\u5230stash\u7a7a\u95f4\u4e14\u7528\u6ce8\u91ca\u6807\u8bb0\ngit stash save \"messages\"\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#52-stash","title":"5.2 \u663e\u793astash\u5b58\u50a8\u7684\u6761\u76ee","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#652-stash","title":"6.5.2 \u663e\u793astash\u5b58\u50a8\u7684\u6761\u76ee","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 - \u8bed\u6cd5\uff1a<code>git stash list</code> - \u793a\u4f8b\uff1a</p> <p><pre><code>[root@centos7 git-test]## git stash list\nstash@{0}: On master: modify file2\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#53-stash-","title":"5.3 stash\u7a7a\u95f4-&gt;\u5de5\u4f5c\u533a","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#653-stash-","title":"6.5.3 stash\u7a7a\u95f4-&gt;\u5de5\u4f5c\u533a","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>pop \u76f8\u6bd4 apply \u4f1a\u5c06stash\u63d0\u4ea4\u4ecestash\u8bb0\u5f55\u4e2d\u79fb\u9664\n</code></pre></p> <ul> <li>\u8bed\u6cd5\uff1a</li> </ul> <pre><code>## 1. apply\u6700\u8fd1\u4e00\u6b21\u63d0\u4ea4\ngit stash apply\n## 2. apply\u6307\u5b9a\u63d0\u4ea4\uff0cstash@{0}\u4ece git stash list \u83b7\u53d6\uff0c0\u8868\u793a\u6700\u8fd1\u4e00\u6b21\u63d0\u4ea4\uff0c1\u8868\u793a\u5012\u6570\u7b2c2\u4ec5\u63d0\u4ea4\uff0c\u4ee5\u6b64\u7c7b\u63a8\ngit stash apply &lt;stash&gt;\n## 3. \u5e94\u7528\u6700\u8fd1\u4e00\u6b21\u63d0\u4ea4\uff0c\u4e14\u5220\u9664\u6700\u8fd1\u4e00\u6b21\u63d0\u4ea4\u8bb0\u5f55\ngit stash pop\n</code></pre> <ul> <li>\u793a\u4f8b\uff1a</li> </ul> <p><pre><code>[root@centos7 git-test]## git stash list\nstash@{0}: WIP on master: 12b4062 commit 1\n[root@centos7 git-test]## git stash apply stash@{0}\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#54-stash","title":"5.4 \u6e05\u7406stash\u7a7a\u95f4\u8bb0\u5f55","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#654-stash","title":"6.5.4 \u6e05\u7406stash\u7a7a\u95f4\u8bb0\u5f55","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 - \u8bed\u6cd5\uff1a</p> <pre><code>## 1. drop \u6700\u8fd1\u4e00\u6b21\u63d0\u4ea4\ngit stash drop\n## 2. drop \u6307\u5b9a\u63d0\u4ea4\ngit stash drop &lt;stash&gt;\n## 3. clear \u6240\u6709\u63d0\u4ea4\ngit stash list\n</code></pre> <ul> <li>\u793a\u4f8b\uff1a</li> </ul> <p><pre><code>[root@centos7 git-test]## git stash drop\nDropped refs/stash@{0} (f2af911102a30a307603bda23a53a322b8fc7afc)\n[root@centos7 git-test]## git stash drop stash@{0}\nDropped stash@{0} (21a63456be8106dfaa06dcb0de674512831f6805)\n[root@centos7 git-test]## git stash list\nstash@{0}: WIP on master: 12b4062 commit 1\nstash@{1}: WIP on master: 12b4062 commit 1\n[root@centos7 git-test]## git stash clear\n[root@centos7 git-test]## git stash list\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#8","title":"8 \u65e5\u5fd7\u3001\u6bd4\u8f83","text":""},{"location":"Documents/C-Tool/Git/Git/#1-diff","title":"1 diff\u5185\u5bb9\u683c\u5f0f\u8bf4\u660e","text":"<ul> <li>https://blog.csdn.net/Jeffxu_lib/article/details/86589070</li> </ul>"},{"location":"Documents/C-Tool/Git/Git/#2_2","title":"2 \u6bd4\u8f83\u5de5\u4f5c\u533a\u548c\u6682\u5b58\u533a\u4e0d\u540c","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#7_1","title":"7 \u65e5\u5fd7\u3001\u6bd4\u8f83","text":""},{"location":"Documents/C-Tool/Git/Git/#71-diff","title":"7.1 diff\u5185\u5bb9\u683c\u5f0f\u8bf4\u660e","text":"<ul> <li>https://blog.csdn.net/Jeffxu_lib/article/details/86589070</li> </ul>"},{"location":"Documents/C-Tool/Git/Git/#72","title":"7.2 \u6bd4\u8f83\u5de5\u4f5c\u533a\u548c\u6682\u5b58\u533a\u4e0d\u540c","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>\u53ea\u4f1a\u5217\u51fa\u5df2\u7ecf\u5728\u7248\u672c\u5e93\u4e2d\u7684\u6587\u4ef6\u7684\u5bf9\u6bd4\uff0c\u672acommit\u548cadd\u65b0\u6587\u4ef6\u4e0d\u6bd4\u8f83\n</code></pre></p> <ul> <li>\u8bed\u6cd5\uff1a<code>git diff</code></li> </ul> <p><pre><code>$ git diff\ndiff --git a/2.txt b/2.txt\nindex e60ded9..f6be5d7 100644\n--- a/2.txt\n+++ b/2.txt\n@@ -1,3 +1,3 @@\n-1313\n+3663\n b1 update...\n-\n+2\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#3_1","title":"3 \u6bd4\u8f83\u5de5\u4f5c\u533a\u548c\u67d0\u4e00\u4e2a\u63d0\u4ea4","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#73","title":"7.3 \u6bd4\u8f83\u5de5\u4f5c\u533a\u548c\u67d0\u4e00\u4e2a\u63d0\u4ea4","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>1. \u6ca1\u6709add\u5230\u6682\u5b58\u533a\u7684\u65b0\u6587\u4ef6\u4e0d\u4f1a\u5bf9\u6bd4\u3002\n2. \u5df2add\u7684\u65b0\u6587\u4ef6\u4f46\u672acommit\u7684\u6587\u4ef6\u4f1a\u5bf9\u6bd4\u3002\n</code></pre></p> <ul> <li>\u8bed\u6cd5\uff1a<code>git diff &lt;commit&gt;</code></li> </ul> <p><pre><code>## 2.txt\u662f\u7248\u672c\u5e93\u5df2\u5b58\u5728\uff0c\u4f46\u5de5\u4f5c\u533a\u66f4\u65b0\u4e86\uff0c\u8fd8\u672aadd\u7684\uff1b\n## 4.txt\u662f\u5df2\u7ecfadd\u4f46\u672acommit\u7684\u65b0\u6587\u4ef6\n$ git diff HEAD\ndiff --git a/2.txt b/2.txt\nindex e60ded9..f6be5d7 100644\n--- a/2.txt\n+++ b/2.txt\n@@ -1,3 +1,3 @@\n-1313\n+3663\n b1 update...\n-\n+2\ndiff --git a/4.txt b/4.txt\nnew file mode 100644\nindex 0000000..e69de29\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#4_2","title":"4 \u6bd4\u8f83\u6682\u5b58\u533a\u548c\u67d0\u4e00\u4e2a\u63d0\u4ea4","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#74","title":"7.4 \u6bd4\u8f83\u6682\u5b58\u533a\u548c\u67d0\u4e00\u4e2a\u63d0\u4ea4","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>1. \u65b0\u6587\u4ef6\u9700\u8981\u81f3\u5c11add\u4e86\u7684\n</code></pre></p> <ul> <li>\u8bed\u6cd5\uff1a</li> <li><code>git diff --cached &lt;commit&gt;</code></li> <li><code>git diff --staged &lt;commit&gt;</code></li> </ul> <p><pre><code>## 4.txt\u662f\u5df2add\u4f46\u672acommit\u7684\u65b0\u6587\u4ef6\n$ git diff --cached HEAD\ndiff --git a/4.txt b/4.txt\nnew file mode 100644\nindex 0000000..e69de29\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#5-2","title":"5 \u6bd4\u8f83\u4efb\u610f2\u4e2a\u63d0\u4ea4","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#75-2","title":"7.5 \u6bd4\u8f83\u4efb\u610f2\u4e2a\u63d0\u4ea4","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 - \u8bed\u6cd5\uff1a<code>git diff &lt;commit1&gt; &lt;commit2&gt;</code></p> <p><pre><code>$ git diff HEAD 9d213ac\ndiff --git a/3.txt b/3.txt\ndeleted file mode 100644\nindex 3bd9bce..0000000\n--- a/3.txt\n+++ /dev/null\n@@ -1 +0,0 @@\n-3333\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#6-stat","title":"6 --stat\u7b80\u5316\u5bf9\u6bd4\u7ed3\u679c","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#76-stat","title":"7.6 --stat\u7b80\u5316\u5bf9\u6bd4\u7ed3\u679c","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>$ git diff --stat\n 2.txt | 4 ++--\n 1 file changed, 2 insertions(+), 2 deletions(-)\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#7-","title":"7 --\u9650\u5b9a\u6bd4\u8f83\u7684\u6587\u4ef6","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#77-","title":"7.7 --\u9650\u5b9a\u6bd4\u8f83\u7684\u6587\u4ef6","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>$ git diff  HEAD\ndiff --git a/2.txt b/2.txt\nindex e60ded9..f6be5d7 100644\n--- a/2.txt\n+++ b/2.txt\n@@ -1,3 +1,3 @@\n-1313\n+3663\n b1 update...\n-\n+2\ndiff --git a/4.txt b/4.txt\nnew file mode 100644\nindex 0000000..e69de29\n$ git diff  HEAD -- 4.txt\ndiff --git a/4.txt b/4.txt\nnew file mode 100644\nindex 0000000..e69de29\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#8-logreflog","title":"8 log\u548creflog\u6bd4\u8f83","text":"<p><code>git log</code>\u53ea\u80fd\u5217\u51fa\u6240\u6709\u63d0\u4ea4\u7684\u65e5\u5fd7\u4fe1\u606f\uff0c\u800c<code>git reflog</code>\u4f1a\u5217\u51fa\u6240\u6709\u6267\u884c\u7684\u64cd\u4f5c\u65e5\u5fd7\u4fe1\u606f</p>"},{"location":"Documents/C-Tool/Git/Git/#9-log","title":"9 log","text":""},{"location":"Documents/C-Tool/Git/Git/#91","title":"9.1 \u663e\u793a\u8be6\u7ec6\u65e5\u5fd7\u4fe1\u606f","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#78-logreflog","title":"7.8 log\u548creflog\u6bd4\u8f83","text":"<p><code>git log</code>\u53ea\u80fd\u5217\u51fa\u6240\u6709\u63d0\u4ea4\u7684\u65e5\u5fd7\u4fe1\u606f\uff0c\u800c<code>git reflog</code>\u4f1a\u5217\u51fa\u6240\u6709\u6267\u884c\u7684\u64cd\u4f5c\u65e5\u5fd7\u4fe1\u606f</p>"},{"location":"Documents/C-Tool/Git/Git/#79-log","title":"7.9 log","text":""},{"location":"Documents/C-Tool/Git/Git/#791","title":"7.9.1 \u663e\u793a\u8be6\u7ec6\u65e5\u5fd7\u4fe1\u606f","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>## git log \u4e0d\u5e26\u4efb\u52a1\u9009\u9879\u4f1a\u663e\u793a\u8be6\u7ec6\u63d0\u4ea4\u65e5\u5fd7\n$ git log\ncommit b55291b03f58247c3ec8dfd773166a662d00fb2e (HEAD -&gt; main)\nAuthor: shuhaiwen &lt;shuhw@heredata.com.cn&gt;\nDate:   Fri Oct 8 09:26:05 2021 +0800\n\n    add 3.txt\n</code></pre></p> <p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#92","title":"9.2 \u5355\u884c\u663e\u793a\u65e5\u5fd7\u4fe1\u606f","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#792","title":"7.9.2 \u5355\u884c\u663e\u793a\u65e5\u5fd7\u4fe1\u606f","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 - \u5173\u952e\u9009\u9879\uff1a<code>--oneline</code></p> <pre><code>## git log --oneline \u5355\u884c\u663e\u793a\u65e5\u5fd7\u4fe1\u606f\n$ git log --oneline\nb55291b (HEAD -&gt; main) add 3.txt\n</code></pre> <p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#93","title":"9.3 \u9650\u5236\u65e5\u5fd7\u6570\u91cf","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#793","title":"7.9.3 \u9650\u5236\u65e5\u5fd7\u6570\u91cf","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 - \u5173\u952e\u9009\u9879\uff1a   - <code>-&lt;number&gt;</code>   - <code>-n &lt;number&gt;</code>   - <code>--max-count=&lt;number&gt;</code></p> <pre><code>## \u542b3\u79cd\u65b9\u5f0f\n$ git log -n 2\n$ git log --max-count 2\n$ git log -2\n</code></pre> <p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#94","title":"9.4 \u8fc7\u6ee4\u65e5\u5fd7\u65f6\u95f4\u8303\u56f4","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#794","title":"7.9.4 \u8fc7\u6ee4\u65e5\u5fd7\u65f6\u95f4\u8303\u56f4","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 - \u5173\u952e\u9009\u9879\uff1a   - <code>--since=&lt;date&gt;</code> \u6307\u793a\u5728\u67d0\u4e00\u4e2a\u65f6\u95f4\u4e4b\u540e\u7684\u65e5\u5fd7   - <code>--after=&lt;date&gt;</code> \u6307\u793a\u5728\u67d0\u4e00\u4e2a\u65f6\u95f4\u4e4b\u540e\u7684\u65e5\u5fd7   - <code>--until=&lt;date&gt;</code> \u6307\u793a\u5728\u67d0\u4e00\u4e2a\u65f6\u95f4\u4e4b\u524d\u7684\u65e5\u5fd7   - <code>--before=&lt;date&gt;</code> \u6307\u793a\u5728\u67d0\u4e00\u4e2a\u65f6\u95f4\u4e4b\u524d\u7684\u65e5\u5fd7</p> <pre><code>## --since=&lt;date&gt; \u6307\u793a\u5728\u67d0\u4e00\u4e2a\u65f6\u95f4\u4e4b\u540e\u7684\u65e5\u5fd7\n## --after=&lt;date&gt; \u6307\u793a\u5728\u67d0\u4e00\u4e2a\u65f6\u95f4\u4e4b\u540e\u7684\u65e5\u5fd7\n## --until=&lt;date&gt; \u6307\u793a\u5728\u67d0\u4e00\u4e2a\u65f6\u95f4\u4e4b\u524d\u7684\u65e5\u5fd7\n## --before=&lt;date&gt; \u6307\u793a\u5728\u67d0\u4e00\u4e2a\u65f6\u95f4\u4e4b\u524d\u7684\u65e5\u5fd7\n$ git log --since=\"2021-10-07\" --oneline\nb55291b (HEAD -&gt; main) add 3.txt\n$ git log --before=\"2021-09-28\" --oneline\nefcfdb2 .gitignore\n$ git log --after=\"2021-09-28\" --before=\"2021-10-07\" --oneline\n9d213ac (tag: tag2) resolve merge 2.txt conflict\n53cb60f (b1) branch b1 commit +2\n71d793e Merge branch 'b1'\n934c075 branch main commit\n298fb37 branch b1 commit\n1ad14b3 add 2 folder\n2d5f9d0 merge commit 2,3,4\n</code></pre> <p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#95","title":"9.5 \u8fc7\u6ee4\u4f5c\u8005","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#795","title":"7.9.5 \u8fc7\u6ee4\u4f5c\u8005","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 - \u5173\u952e\u9009\u9879\uff1a<code>--author=[name]</code></p> <pre><code>$ git log --author=\"shuhaiwen\" --oneline\nb55291b (HEAD -&gt; main) add 3.txt\n9d213ac (tag: tag2) resolve merge 2.txt conflict\n53cb60f (b1) branch b1 commit +2\n71d793e Merge branch 'b1'\n934c075 branch main commit\n298fb37 branch b1 commit\n1ad14b3 add 2 folder\n2d5f9d0 merge commit 2,3,4\nefcfdb2 .gitignore\n</code></pre> <p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#96","title":"9.6 \u8fc7\u6ee4\u65e5\u5fd7\u5173\u952e\u5b57","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#796","title":"7.9.6 \u8fc7\u6ee4\u65e5\u5fd7\u5173\u952e\u5b57","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 - \u5173\u952e\u9009\u9879\uff1a<code>--grep=[description]</code></p> <pre><code>$ git  log --grep=\"3.txt\"\ncommit b55291b03f58247c3ec8dfd773166a662d00fb2e (HEAD -&gt; main)\nAuthor: shuhaiwen &lt;shuhw@heredata.com.cn&gt;\nDate:   Fri Oct 8 09:26:05 2021 +0800\n\n    add 3.txt\n</code></pre> <p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#97","title":"9.7 \u8fc7\u6ee4\u5408\u5e76\u63d0\u4ea4\u65e5\u5fd7","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#797","title":"7.9.7 \u8fc7\u6ee4\u5408\u5e76\u63d0\u4ea4\u65e5\u5fd7","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 - \u5173\u952e\u9009\u9879\uff1a   - <code>--no-merges</code>\uff1a\u6392\u9664\u5408\u5e76\u63d0\u4ea4   - <code>--merges</code>\uff1a\u53ea\u663e\u793a\u5408\u5e76\u63d0\u4ea4</p> <pre><code>$ git log --merges --oneline\n9d213ac (tag: tag2) resolve merge 2.txt conflict\n71d793e Merge branch 'b1'\n\n## \u4ee5\u4e0b\u4f1a\u628a\u5408\u5e76\u63d0\u4ea49d213ac\u548c71d793e\u8fc7\u6ee4\u6389\n$ git log --oneline --no-merges\nb55291b (HEAD -&gt; main) add 3.txt\n53cb60f (b1) branch b1 commit +2\n934c075 branch main commit\n298fb37 branch b1 commit\n1ad14b3 add 2 folder\n2d5f9d0 merge commit 2,3,4\nefcfdb2 .gitignore\n</code></pre> <p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#98","title":"9.8 \u8fc7\u6ee4\u6587\u4ef6\u5185\u5bb9","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#798","title":"7.9.8 \u8fc7\u6ee4\u6587\u4ef6\u5185\u5bb9","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 - \u5173\u952e\u9009\u9879\uff1a   - <code>-S&lt;string&gt;</code>\uff1a\u6307\u5b9a\u8fc7\u6ee4\u5185\u5bb9   - <code>-i</code>\uff1a\u5ffd\u7565\u5927\u5c0f\u5199\uff08\u9ed8\u8ba4\u5927\u5c0f\u5199\u654f\u611f\uff09</p> <pre><code>$ git log -i -S\"b1 update\" -p\ncommit 53cb60f7e2a3f8e8e328c15850c72b0af330a31f (b1)\nAuthor: shuhaiwen &lt;shuhw@heredata.com.cn&gt;\nDate:   Wed Sep 29 17:46:50 2021 +0800\n\n    branch b1 commit +2\n\ndiff --git a/2.txt b/2.txt\nindex 16e80ca..bdd4f02 100644\n--- a/2.txt\n+++ b/2.txt\n@@ -1 +1,2 @@\n 1313\n+b1 update...\n</code></pre> <p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#99","title":"9.9 \u65e5\u5fd7\u663e\u73b0\u53d8\u66f4\u5dee\u5f02","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#799","title":"7.9.9 \u65e5\u5fd7\u663e\u73b0\u53d8\u66f4\u5dee\u5f02","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 - \u5173\u952e\u9009\u9879\uff1a<code>-p</code></p> <pre><code>$ git log -p\ncommit b55291b03f58247c3ec8dfd773166a662d00fb2e (HEAD -&gt; main)\nAuthor: shuhaiwen &lt;shuhw@heredata.com.cn&gt;\nDate:   Fri Oct 8 09:26:05 2021 +0800\n\n    add 3.txt\n\ndiff --git a/3.txt b/3.txt\nnew file mode 100644\nindex 0000000..3bd9bce\n--- /dev/null\n+++ b/3.txt\n@@ -0,0 +1 @@\n+3333\n</code></pre> <p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#910","title":"9.10 \u4ee5\u56fe\u89c6\u663e\u793a\u63d0\u4ea4\u65e5\u5fd7","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#7910","title":"7.9.10 \u4ee5\u56fe\u89c6\u663e\u793a\u63d0\u4ea4\u65e5\u5fd7","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 - \u5173\u952e\u9009\u9879\uff1a<code>--graph</code> - \u7c7b\u4f3cTortoiseGit\u8f6f\u4ef6\u663e\u793a\u7684\u63d0\u4ea4\u5386\u53f2</p> <pre><code>## --graph \u4ee5\u56fe\u5f62\u5f0f\u663e\u793a\n$ git log --graph --oneline\n* b55291b (HEAD -&gt; main) add 3.txt\n*   9d213ac (tag: tag2) resolve merge 2.txt conflict\n|\\\n| * 53cb60f (b1) branch b1 commit +2\n* | 71d793e Merge branch 'b1'\n|\\|\n| * 298fb37 branch b1 commit\n* | 934c075 branch main commit\n|/\n* 1ad14b3 add 2 folder\n* 2d5f9d0 merge commit 2,3,4\n* efcfdb2 .gitignore\n</code></pre> <p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#10-reflog","title":"10 reflog","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#710-reflog","title":"7.10 reflog","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 <pre><code>$ git reflog\nb55291b (HEAD -&gt; main) HEAD@{0}: reset: moving to b55291b\n62c0dd2 HEAD@{1}: checkout: moving from b1 to main\n53cb60f (b1) HEAD@{2}: checkout: moving from main to b1\n62c0dd2 HEAD@{3}: checkout: moving from b1 to main\n53cb60f (b1) HEAD@{4}: checkout: moving from main to b1\n62c0dd2 HEAD@{5}: commit: add 4.txt\nb55291b (HEAD -&gt; main) HEAD@{6}: commit: add 3.txt\n9d213ac (tag: tag2) HEAD@{7}: reset: moving to 9d213ac\n</code></pre></p>"},{"location":"Documents/C-Tool/Git/Git/#8-git","title":"8 git\u5e38\u89c1\u95ee\u9898","text":"<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#1-commit","title":"1 commit\u591a\u884c\u63d0\u4ea4","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#81-commit","title":"8.1 commit\u591a\u884c\u63d0\u4ea4","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 1. \u5728-m \u540e\u4f7f\u7528\u5355\u5f15\u53f7\uff0c\u5c06\u4f1a\u81ea\u52a8\u6362\u884c\uff0c\u518d\u4ee5\u5355\u5f15\u53f7\u7ed3\u5c3e</p> <p><pre><code>$ git commit -m '\n&gt; 1. \u6d4b\u8bd5\u6ce8\u91ca\u884c1\n&gt; 2. \u6d4b\u8bd5\u6ce8\u91ca\u884c2'\n[main 37bc086] 1. \u6d4b\u8bd5\u6ce8\u91ca\u884c1 2. \u6d4b\u8bd5\u6ce8\u91ca\u884c2\n 1 file changed, 0 insertions(+), 0 deletions(-)\ncreate mode 100644 3.txt\n$ git log\ncommit 37bc0866b9f51b7264fbc181b91c4ce07c67eb7d (HEAD -&gt; main)\nAuthor: shuhaiwen &lt;shuhw@heredata.com.cn&gt;\nDate:   Fri Jul 23 15:28:17 2021 +0800\n\n    1. \u6d4b\u8bd5\u6ce8\u91ca\u884c1\n    2. \u6d4b\u8bd5\u6ce8\u91ca\u884c2\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#2_3","title":"2 \u4fee\u6539\u6700\u540e\u4e00\u6b21\u63d0\u4ea4\u6ce8\u91ca","text":"<pre><code>git commit --amend -m '\u6539\u53d8\u6700\u540e\u4e00\u6b21\u63d0\u4ea4'\n</code></pre>"},{"location":"Documents/C-Tool/Git/Git/#3-openssl-ssl_read-connection-was-reset","title":"3 OpenSSL SSL_read: Connection was reset","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#82","title":"8.2 \u4fee\u6539\u6700\u540e\u4e00\u6b21\u63d0\u4ea4\u6ce8\u91ca","text":"<pre><code>git commit --amend -m '\u6539\u53d8\u6700\u540e\u4e00\u6b21\u63d0\u4ea4'\n</code></pre>"},{"location":"Documents/C-Tool/Git/Git/#83-openssl-ssl_read-connection-was-reset","title":"8.3 OpenSSL SSL_read: Connection was reset","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 \u53ef\u80fd\u7531\u4ee3\u7406\u4ea7\u751f\uff0c\u79fb\u9664\u4ee3\u7406\u3002 - \u793a\u4f8b</p> <p><pre><code>git config --global --unset-all remote.origin.proxys\n</code></pre> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>"},{"location":"Documents/C-Tool/Git/Git/#4-winodwgit","title":"4 winodw\u7cfb\u7edf\uff0cgit\u8fdc\u7a0b\u547d\u4ee4\u64cd\u4f5c\u6ca1\u6709\u63d0\u793a\u8f93\u5165\u5bc6\u7801","text":"<p>=======</p>"},{"location":"Documents/C-Tool/Git/Git/#84-winodwgit","title":"8.4 winodw\u7cfb\u7edf\uff0cgit\u8fdc\u7a0b\u547d\u4ee4\u64cd\u4f5c\u6ca1\u6709\u63d0\u793a\u8f93\u5165\u5bc6\u7801","text":"<p>da878a6139b43db91fa05f06a21d78c2811c6e79 - \u539f\u56e0\uff1awindows\u4e0b\u6709\u4e2a\u51ed\u8bc1\u7ba1\u7406\u5668\uff0c\u91cc\u9762\u8bb0\u5f55\u4e86\u4e4b\u524d\u8f93\u5165\u7684git\u8d26\u6237\u3001\u5bc6\u7801 - \u89e3\u51b3\uff1a     - \u8fdb\u5165 \u63a7\u5236\u9762\u677f-&gt;\u51ed\u8bc1\u7ba1\u7406\u5668-&gt;Winodws\u51ed\u8bc1 \u4e0b\uff0c\u627e\u5230\u76f8\u5e94\u7684git\u51ed\u8bc1\uff0c\u5220\u9664\u3002\uff08\u6b64\u6b65\u53ea\u80fd\u8fd8\u539f\u5230\u8981\u8f93\u5165\u7528\u6237\u5bc6\u7801\uff0c\u4f46\u8fd8\u4f1a\u5f39\u7a97\u51ed\u8bc1\u7ba1\u7406\u5668\uff09     - \u5378\u8f7dWindows\u7248\u7684Git Credential Manager\uff1a\u8fdb\u5165Git\u7684\u5b89\u88c5\u76ee\u5f55\u4e0b\u7684<code>mingw64\\libexec\\git-core</code>\uff0c\u6267\u884c<code>git credential-manager uninstall</code>\uff0c\u5b89\u88c5\u63d0\u793a\u5220\u9664\u3002\uff08\u6b64\u6b65\u9aa4\u89e3\u51b3\u5f39\u7a97\u51ed\u8bc1\u7ba1\u7406\u5668\u95ee\u9898\uff09</p>"},{"location":"Documents/C-Tool/Git/gitignore%E8%A7%84%E5%88%99/","title":".gitignore\u89c4\u5219","text":"<pre><code>\u4e00\u4e2a\u9879\u76ee\u4e0b\u53ef\u4ee5\u6709\u591a\u4e2a.gitignore\u6587\u4ef6\uff0c\u6bcf\u4e00\u4e2a\n</code></pre> <pre><code>- \u9879\u76ee\u4e0b\u6bcf\u4e00\u5c42\u7684`.gitignore`\u5b9a\u4e49\u7684\u89c4\u5219\u53ea\u5f71\u54cd\u5728`.gitignore`\u6587\u4ef6\u6240\u5728\u76ee\u5f55\u53ca\u4ee5\u4e0b\u76ee\u5f55\u6216\u6587\u4ef6\n- `!`\u4e0d\u80fd\u4f5c\u7528\u5728\u7236\u76ee\u5f55\u88ab\u5ffd\u7565\u7684\u60c5\u51b5\u3002\n- `/`\u51fa\u73b0\u5728\u5f00\u5934\u6216\u4e2d\u95f4\u65f6\uff0c\u90fd\u8868\u793a\u4ece.gitignore\u6587\u4ef6\u6240\u5728\u4f4d\u7f6e\u5f00\u59cb\u5339\u914d\n- `?`\u548c`*`\u90fd\u4e0d\u4f1a\u5339\u914d`/`\n</code></pre> <pre><code>\u5f53\u6392\u9664\u6587\u4ef6\u5939A\u65f6\uff0c\u5373\u4f7f!\u5ffd\u7565\u7684\u6587\u4ef6a\u5728\u8fd9\u4e2aA\u76ee\u5f55\u4e0b\uff0cgit\u4e5f\u4e0d\u4f1a\u53bb\u8ddf\u8e2aA/a\u6587\u4ef6\u3002\n\u8fd9\u65f6\u53ef\u4ee5\u8fd9\u6837\u505a\u3002\u7528`A/*`\u6392\u9664A\u76ee\u5f55\u4e0b\u6240\u6709\u6587\u4ef6\uff0c\u518d\u7528`!a`\u5ffd\u7565a\u6587\u4ef6\n</code></pre> <ul> <li><code>/</code>\u5f00\u5934\u548c\u7ed3\u5c3e</li> <li>\u4ee5<code>/</code>\u5f00\u5934<code>/xx</code>\u8868\u793a\u4ec5\u4ece\u4ece\u5f53\u524d\u76ee\u5f55\uff08.gitignore\u6587\u4ef6\u6240\u5728\u4f4d\u7f6e\uff09\u641c\u7d22<code>xx</code>\uff0c\u5982<code>/1.txt</code>,\u8868\u793a\u6839\u76ee\u5f55\u4e0b<code>1.txt</code>\u6587\u4ef6\u88ab\u6392\u9664\uff0c\u800c<code>dir/1.txt</code>\u6587\u4ef6\u4e0d\u4f1a\u88ab\u6392\u9664\u3002</li> <li>\u4ee5<code>/</code>\u7ed3\u5c3e<code>xx/</code>\u8868\u793a<code>xx</code>\u6587\u4ef6\u5939\u53ca\u5176\u4e0b\u6587\u4ef6\u88ab\u6392\u9664\uff0c\u800c\u4e0d\u4f1a\u6392\u9664\u6587\u4ef6<code>xx</code>\u6587\u4ef6\u3002</li> <li>\u4e0d\u4ee5<code>/</code>\u7ed3\u5c3e\u7684\uff0c\u4f1a\u5339\u914d\u6587\u4ef6\u548c\u76ee\u5f55</li> <li><code>/</code>\u5728\u4e2d\u95f4\u5c42\u7ea7\uff0c\u4e5f\u8868\u793a\u4ece\u5f53\u524d\u76ee\u5f55\uff08.gitignore\u6587\u4ef6\u6240\u5728\u4f4d\u7f6e\uff09\u641c\u7d22\uff0c\u5982<code>doc/frotz/</code>\u4ec5\u5339\u914d<code>doc/frotz</code>,\u800c\u4e0d\u5339\u914d<code>a/doc/frotz</code></li> <li><code>/</code>\u4e0d\u5728\u5f00\u5934\u4e14\u4e0d\u5728\u4e2d\u95f4\u7684<code>xx</code>\u8868\u793a\u5728\u9879\u76ee\u4e0b\u6240\u6709\u5c42\u7ea7\u76ee\u5f55\u4e0b\u641c\u7d22<code>xx</code>\uff0c\u5982<code>1.txt</code>\uff0c\u8868\u793a<code>1.txt</code>\u548c<code>dir/1.txt</code>\u90fd\u88ab\u6392\u9664\u3002</li> <li><code>?</code>:\u8868\u793a\u5339\u914d\u5355\u4e2a\u5b57\u7b26\uff0c\u4e0d\u4f1a\u5339\u914d<code>/</code></li> <li><code>*</code>:\u8868\u793a\u5339\u914d\u4efb\u610f\u5b57\u7b26\uff0c\u4e0d\u4f1a\u5339\u914d<code>/</code></li> <li><code>**</code>:\u8868\u793a\u5339\u914d\u4efb\u610f\u4e2d\u95f4\u76ee\u5f55,\u5982<code>a/**/d</code>,\u4f1a\u5339\u914d<code>a/b/c/d</code>\u548c<code>a/b/d</code>\u6216<code>a/d</code></li> <li><code>!</code>:\u5ffd\u7565\u5339\u914d\u9879,\u901a\u5e38\u7528\u4e8e\u628a\u4e0a\u4e00\u4e2a\u5339\u914d\u6a21\u5f0f\u4e2d\u5339\u914d\u7684\u5ffd\u7565\u6389\uff0c\u5982<code>*.txt</code>\u548c<code>!2.txt</code>,\u5c06\u5339\u914d\u6240\u6709\u4ee5<code>.txt</code>\u7ed3\u5c3e\u7684\u6587\u4ef6\uff0c\u4f46\u6392\u9664<code>2.txt</code>\u6587\u4ef6\uff0c\u5982\u679c\u4e0a\u6761\u89c4\u5219\u5ffd\u7565\u7684\u662f\u76ee\u5f55\uff0c\u6b64\u6392\u9664\u89c4\u5219\u4e0d\u4f1a\u751f\u6548\u3002</li> <li><code>#</code>:\u6ce8\u91ca\u6807\u5fd7\uff0c\u4e0d\u53c2\u4e0e\u89c4\u5219</li> </ul>"},{"location":"Documents/C-Tool/Github/Github%20Action/","title":"Github Action","text":"<p>https://github.com/marketplace</p>"},{"location":"Documents/C-Tool/Github/Github%20Discussions/","title":"Github Discussions","text":"<ul> <li>\u5b98\u65b9\u6587\u6863 GitHub Discussions \u662f\u4e00\u4e2a\u56f4\u7ed5\u5f00\u6e90\u6216\u5185\u90e8\u9879\u76ee\u4e3a\u793e\u533a\u63d0\u4f9b\u534f\u4f5c\u6c9f\u901a\u7684\u8bba\u575b\u3002 \u793e\u533a\u6210\u5458\u53ef\u4ee5\u63d0\u51fa\u548c\u56de\u7b54\u95ee\u9898\uff0c\u5206\u4eab\u66f4\u65b0\uff0c\u8fdb\u884c\u5f00\u653e\u5f0f\u5bf9\u8bdd\uff0c\u5e76\u5173\u6ce8\u5f71\u54cd\u793e\u533a\u5de5\u4f5c\u65b9\u5f0f\u7684\u51b3\u7b56\u3002</li> </ul>"},{"location":"Documents/C-Tool/Github/Github%20Discussions/#1-discussions","title":"1 \u542f\u7528 Discussions \u529f\u80fd","text":"<p>\u767b\u5f55 Github -\u300b\u5bfc\u822a\u5230\u4ed3\u5e93\u9996\u9875 -\u300b\u70b9\u51fb setting \u6309\u94ae -\u300b\u5411\u4e0b\u7ffb\u9875\u627e\u5230 Features \u529f\u80fd\u4e0b\u7684 Discussions \u6253\u4e0a\u52fe</p> <ol> <li>\u8bbe\u7f6e\u5f00\u542f Discussions \u529f\u80fd </li> <li>\u4ed3\u5e93\u4e0a\u83dc\u5355\u680f\u5c06\u4f1a\u663e\u793a Discussions \u83dc\u5355 </li> </ol>"},{"location":"Documents/C-Tool/Github/Github%20Releases/","title":"Github Releases","text":"<ul> <li>\u5b98\u65b9\u6587\u6863 \u521b\u5efa\u5305\u8f6f\u4ef6\u7684\u53d1\u884c\u7248\uff0c\u4ee5\u53ca\u53d1\u884c\u8bf4\u660e\u548c\u4e8c\u8fdb\u5236\u6587\u4ef6\u94fe\u63a5\uff0c\u4ee5\u4f9b\u5176\u4ed6\u4eba\u4f7f\u7528\u3002</li> </ul>"},{"location":"Documents/C-Tool/Github/Github%20Releases/#1","title":"1 \u4f7f\u7528","text":"<p>\u8fdb\u5165\u5230\u4ed3\u5e93\u9996\u9875 -\u300b\u70b9\u51fb tags \u6309\u94ae -\u300b\u70b9\u51fb Create a new release \u6309\u94ae 1. \u70b9\u51fb tags \u6309\u94ae  2. \u70b9\u51fb Create a new release \u6309\u94ae  3. \u8865\u5145\u53d1\u884c\u4fe1\u606f\u3001\u989d\u5916\u7684\u53d1\u884c\u6587\u4ef6 </p>"},{"location":"Documents/C-Tool/Github/Github%20Security/","title":"Github Security","text":""},{"location":"Documents/C-Tool/Github/Github%20Security/#1-personal-access-tokens","title":"1 Personal access tokens","text":"<ul> <li> <p>\u5b98\u65b9\u6587\u6863 \u4f7f\u7528\u00a0GitHub API\u00a0\u6216\u547d\u4ee4\u884c\u65f6\uff0c\u53ef\u4f7f\u7528 Personal access token \u66ff\u4ee3\u5bc6\u7801\u5411 GitHub \u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002 Personal access token \u65e8\u5728\u4ee3\u8868\u4f60\u81ea\u5df1\u8bbf\u95ee GitHub \u8d44\u6e90\u3002 GitHub \u76ee\u524d\u652f\u6301\u4e24\u79cd\u7c7b\u578b\u7684 personal access token\uff1afine-grained personal access token \u548c personal access tokens (classic)\u3002 GitHub \u5efa\u8bae\u5c3d\u53ef\u80fd\u4f7f\u7528 fine-grained personal access token \u800c\u4e0d\u662f personal access tokens (classic)\u3002 \u4e0e personal access tokens (classic) \u76f8\u6bd4\uff0cFine-grained personal access token \u5177\u6709\u51e0\u4e2a\u5b89\u5168\u4f18\u52bf\uff1a</p> </li> <li> <p>\u6bcf\u4e2a\u4ee4\u724c\u53ea\u80fd\u8bbf\u95ee\u5355\u4e2a\u7528\u6237\u6216\u7ec4\u7ec7\u62e5\u6709\u7684\u8d44\u6e90\u3002</p> </li> <li>\u6bcf\u4e2a\u4ee4\u724c\u53ea\u80fd\u8bbf\u95ee\u7279\u5b9a\u7684\u5b58\u50a8\u5e93\u3002</li> <li>\u6bcf\u4e2a\u4ee4\u724c\u90fd\u88ab\u6388\u4e88\u7279\u5b9a\u7684\u6743\u9650\uff0c\u8fd9\u4e9b\u6743\u9650\u6bd4\u6388\u4e88 personal access tokens (classic) \u7684\u8303\u56f4\u63d0\u4f9b\u66f4\u591a\u7684\u63a7\u5236\u3002</li> <li>\u6bcf\u4e2a\u4ee4\u724c\u90fd\u5fc5\u987b\u5177\u6709\u5230\u671f\u65e5\u671f\u3002</li> <li>\u7ec4\u7ec7\u6240\u6709\u8005\u53ef\u8981\u6c42\u5fc5\u987b\u83b7\u53d6\u5bf9\u53ef\u8bbf\u95ee\u7ec4\u7ec7\u4e2d\u8d44\u6e90\u7684\u4efb\u4f55 fine-grained personal access token \u7684\u6279\u51c6\u3002</li> </ul>"},{"location":"Documents/C-Tool/Github/Github%20Security/#11-token","title":"1.1 \u521b\u5efa token","text":"<p>\u8fdb\u5165 Github \u4e3b\u9875 -\u300b\u53f3\u4e0a\u89d2\u5934\u50cf -\u300b\u4e0b\u62c9\u83dc\u5355\u680f Settings -\u300b\u5de6\u4fa7\u8fb9\u680f\u6700\u4e0b\u9762 Developer settings -\u300bPersonal access tokens -\u300bTokens (classic) -\u300bGenerate new token (classic)</p> <p> - \u586b\u5199 token \u76f8\u5173\u4fe1\u606f\uff08\u540d\u79f0\u3001\u6743\u9650\uff09 </p>"},{"location":"Documents/C-Tool/Github/Github%20Security/#2-actions-secrets-and-variables","title":"2 Actions secrets and variables","text":"<p>\u52a0\u5bc6\u5bc6\u7801\u53ef\u8ba9\u60a8\u5c06\u654f\u611f\u4fe1\u606f\u5b58\u50a8\u5728\u60a8\u7684\u7ec4\u7ec7\u3001\u4ed3\u5e93\u6216\u8005\u4ed3\u5e93\u73af\u5883\u4e2d\u3002\u53ef\u4ee5\u4e3a\u67d0\u4e2a\u4ed3\u5e93\u6dfb\u52a0\u52a0\u5bc6\u53d8\u91cf\uff0c access tokens \u4f5c\u4e3a\u53d8\u91cf\u503c\u3002 </p>"},{"location":"Documents/C-Tool/Github/Github%20Security/#21","title":"2.1 \u521b\u5efa","text":"<ul> <li>\u5b98\u65b9\u6587\u6863</li> </ul>"},{"location":"Documents/C-Tool/Github/Github%20sshkey/","title":"Github sshkey","text":""},{"location":"Documents/C-Tool/Github/Github%20sshkey/#1-ssh-key","title":"1 \u521b\u5efa\u65b0\u7684 SSH key","text":"<pre><code>ssh-keygen -t rsa -C \"your_email@example.com\"\n</code></pre> <p>\u4ee3\u7801\u53c2\u6570\u542b\u4e49\uff1a</p> <ul> <li><code>-t</code>\uff1a\u6307\u5b9a\u5bc6\u94a5\u7c7b\u578b\uff0c\u9ed8\u8ba4\u662f rsa \uff0c\u53ef\u4ee5\u7701\u7565\u3002  </li> <li><code>-C</code>\uff1a\u8bbe\u7f6e\u6ce8\u91ca\u6587\u5b57\uff0c\u6bd4\u5982\u90ae\u7bb1\u3002  </li> <li><code>-f</code>\uff1a\u6307\u5b9a\u5bc6\u94a5\u6587\u4ef6\u5b58\u50a8\u6587\u4ef6\u540d\u3002</li> </ul> <p>\u5728~/. ssh \uff08windows \u4e0a\u662f <code>C:\\Users\\\u7528\u6237\u540d\\.ssh</code>\uff09\u76ee\u5f55\u4e0b\u751f\u6210\u4e00\u4e9b\u6587\u4ef6\u3002</p> <pre><code>Mode                LastWriteTime         Length Name\n----                -------------         ------ ----\n-a---        2022/11/30      8:44            109  config\n-a---         2022/11/6     15:55           2590  id_rsa\n-a---         2022/11/6     15:55            564  id_rsa.pub\n-a---          2023/2/4     14:28           1677  known_hosts\n</code></pre>"},{"location":"Documents/C-Tool/Github/Github%20sshkey/#2-ssh-key-github","title":"2 \u6dfb\u52a0 SSH key \u5230 github","text":"<p>\u767b\u5f55 github -\u300b\u53f3\u4e0a\u89d2 Settings -\u300b\u5de6\u4fa7\u83dc\u5355\u680f SSH and GPG keys -\u300b\u70b9\u51fb Add SSH key \u6309\u94ae -\u300b\u5c06 id_rsa.pub \u6570\u636e\u590d\u5236\u7c98\u8d34</p>"},{"location":"Documents/C-Tool/Github/Github%20sshkey/#3","title":"3 \u9a8c\u8bc1","text":"<p>\u663e\u793a\u7c7b\u578b\u5982\u4e0b\u4fe1\u606f\u8868\u793a\u6210\u529f\u3002</p> <pre><code>ssh -T git@github.com\nHi shuhaiwen! You've successfully authenticated, but GitHub does not provide shell access.\n</code></pre>"},{"location":"Documents/C-Tool/Github/Github%E4%B8%BB%E9%A1%B5%E7%BE%8E%E5%8C%96/","title":"Github\u4e3b\u9875\u7f8e\u5316","text":""},{"location":"Documents/C-Tool/Github/Github%E4%B8%BB%E9%A1%B5%E7%BE%8E%E5%8C%96/#1-github-readme-stats","title":"1 \u4f7f\u7528github-readme-stats\u6dfb\u52a0\u9879\u76ee\u72b6\u6001","text":"<ul> <li>\u9879\u76ee\u5730\u5740</li> </ul> <p>github-readme-stats\u9879\u76ee\u901a\u8fc7\u5361\u7247\u98ce\u683c\u5c55\u73b0\u4e00\u4e9b\u4fe1\u606f\uff0c\u800c\u8fd9\u4fe1\u606f\u751f\u6210\u5c31\u50cf\u4e00\u4e2aurl\uff0c\u8fd9\u4e2aurl\u540e\u968f\u4e00\u4e9b\u53c2\u6570\uff0c\u8fd9\u4e9b\u53c2\u6570\u4ee5<code>&amp;</code>\u8fde\u63a5,\u53ef\u4ee5\u53c2\u6570\u5982\u4e0b:</p> \u53c2\u6570 \u63cf\u8ff0 \u793a\u4f8b title_color \u5361\u7247\u6807\u9898\u989c\u8272 \uff08\u5341\u516d\u8fdb\u5236\u8272\u7801\uff09 &amp;title_color=fbc2eb text_color \u5185\u5bb9\u6587\u672c\u989c\u8272 \uff08\u5341\u516d\u8fdb\u5236\u8272\u7801\uff09 &amp;text_color=fbc2eb icon_color \u56fe\u6807\u989c\u8272\uff08\u5982\u679c\u53ef\u7528\uff09\uff08\u5341\u516d\u8fdb\u5236\u8272\u7801\uff09 &amp;icon_color=fbc2eb bg_color \u5361\u7247\u80cc\u666f\u989c\u8272 \uff08\u5341\u516d\u8fdb\u5236\u8272\u7801\uff09 \u6216\u8005 \u4ee5 angle,start,end \u7684\u5f62\u5f0f\u6e10\u53d8 &amp;bg_color=45,fbc2eb,a6c1ee hide_border \u9690\u85cf\u5361\u7684\u8fb9\u6846 (\u5e03\u5c14\u503c) &amp;hide_border=true theme \u4e3b\u9898\u540d\u79f0\uff0c\u4ece\u6240\u6709\u53ef\u7528\u4e3b\u9898\u4e2d\u9009\u62e9 &amp;theme=dark cache_seconds \u624b\u52a8\u8bbe\u7f6e\u7f13\u5b58\u5934 \uff08\u6700\u5c0f\u503c: 1800\uff0c\u6700\u5927\u503c: 86400\uff09 &amp;cache_seconds=1800 locale \u5728\u5361\u7247\u4e2d\u8bbe\u7f6e\u8bed\u8a00 (\u4f8b\u5982 cn, de, es, \u7b49\u7b49) &amp;locale=cn hide \u9690\u85cf\u7279\u5b9a\u7edf\u8ba1\u4fe1\u606f (\u4ee5\u9017\u53f7\u5206\u9694) &amp;hide=javascript,html hide_title (boolean) &amp;hide_title=true hide_rank (boolean) &amp;hide_rank=true show_icons (boolean) &amp;show_icons=true include_all_commits \u7edf\u8ba1\u603b\u63d0\u4ea4\u6b21\u6570\u800c\u4e0d\u662f\u4ec5\u7edf\u8ba1\u4eca\u5e74\u7684\u63d0\u4ea4\u6b21\u6570 (boolean) &amp;include_all_commits=true count_private \u7edf\u8ba1\u79c1\u4eba\u63d0\u4ea4 (boolean) &amp;count_private=true line_height \u8bbe\u7f6e\u6587\u672c\u4e4b\u95f4\u7684\u884c\u9ad8 (number) &amp;line_height=25 layout \u5728\u4e24\u4e2a\u53ef\u7528\u5e03\u5c40 default &amp; compact \u95f4\u5207\u6362 &amp;layout=compact card_width \u624b\u52a8\u8bbe\u7f6e\u5361\u7247\u7684\u5bbd\u5ea6 (number) &amp;card_width=350"},{"location":"Documents/C-Tool/Github/Github%E4%B8%BB%E9%A1%B5%E7%BE%8E%E5%8C%96/#11-github","title":"1.1 github \u9879\u76ee\u72b6\u6001\u7edf\u8ba1","text":"<pre><code>[![shuhaiwen's GitHub stats](https://github-readme-stats.vercel.app/api?username=shuhaiwen&amp;show_icons=true&amp;theme=radical&amp;bg_color=45,fbc2eb,a6c1ee)]( https://github.com/anuraghazra/github-readme-stats )\n</code></pre>"},{"location":"Documents/C-Tool/Github/Github%E4%B8%BB%E9%A1%B5%E7%BE%8E%E5%8C%96/#12-github","title":"1.2 github\u9879\u76ee\u8bed\u8a00\u7edf\u8ba1","text":"<pre><code>![Top Langs](https://github-readme-stats.vercel.app/api/top-langs/?username=shuhaiwen&amp;layout=compact&amp;bg_color=45,fbc2eb,a6c1ee)\n</code></pre>"},{"location":"Documents/C-Tool/Github/Github%E4%B8%BB%E9%A1%B5%E7%BE%8E%E5%8C%96/#13-github","title":"1.3 github\u4ed3\u5e93\u7f6e\u9876","text":"<pre><code>[![Readme Card](https://github-readme-stats.vercel.app/api/pin/?username=shuhaiwen&amp;repo=shuhaiwen.github.io&amp;bg_color=45,fbc2eb,a6c1ee)](https://github.com/shuhaiwen/shuhaiwen.github.io)\n</code></pre>"},{"location":"Documents/C-Tool/Github/Github%E4%B8%BB%E9%A1%B5%E7%BE%8E%E5%8C%96/#14","title":"1.4 \u91cd\u8981\u8bbe\u7f6e","text":"<ul> <li>\u80cc\u666f\u6e10\u53d8</li> </ul> <pre><code>&amp;bg_color=45,fbc2eb,a6c1ee\n</code></pre> <ul> <li>\u9690\u85cf\u6307\u5b9a\u8bed\u8a00</li> </ul> <pre><code>&amp;hide=javascript,html\n</code></pre> <ul> <li>\u7d27\u51d1\u7684\u8bed\u8a00\u5361\u7247\u5e03\u5c40</li> </ul> <pre><code>&amp;layout=compact\n</code></pre>"},{"location":"Documents/C-Tool/Github/github%E8%AE%BF%E9%97%AE%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/","title":"github \u8bbf\u95ee\u5931\u8d25\u89e3\u51b3\u65b9\u6cd5","text":""},{"location":"Documents/C-Tool/Github/github%E8%AE%BF%E9%97%AE%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/#1-ip","title":"1 \u8bbe\u7f6e\u57df\u540d ip \u6620\u5c04","text":""},{"location":"Documents/C-Tool/Github/github%E8%AE%BF%E9%97%AE%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/#11-github-ip","title":"1.1 github ip \u67e5\u8be2","text":"<ul> <li>\u7f51\u7ad9</li> </ul>"},{"location":"Documents/C-Tool/Github/github%E8%AE%BF%E9%97%AE%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/#12-hosts-ip","title":"1.2 \u67e5\u8be2\u540e\u8bbe\u7f6e hosts \u6587\u4ef6\uff0c\u586b\u5199\u57df\u540d\u548c ip","text":"<pre><code>140.82.113.4 github.com\n</code></pre>"},{"location":"Documents/C-Tool/Github/github%E8%AE%BF%E9%97%AE%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/#2-dns","title":"2 \u5237\u65b0 dns \u7f13\u5b58","text":"<pre><code>ipconfig /flushdns\n</code></pre>"},{"location":"Documents/C-Tool/LLVM/llvm%E5%AE%89%E8%A3%85/","title":"llvm \u5b89\u88c5","text":""},{"location":"Documents/C-Tool/LLVM/llvm%E5%AE%89%E8%A3%85/#1","title":"1 \u5305\u76f4\u63a5\u5b89\u88c5","text":"<pre><code>dnf\u7c7b\u4f3cyum\uff0c\u662f\u65b0\u4e00\u4ee3\u5305\u7ba1\u7406\u5de5\u5177\uff0c\u7528\u6765\u66ff\u6362yum\n</code></pre> <ul> <li><code>dnf install llvm</code></li> <li><code>dnf install clang</code></li> <li>clangd\u3001clang-format\u3001clang-tidy \u7b49\u5de5\u5177\u5b89\u88c5\uff1a<code>dnf install clang-tools-extra</code></li> </ul>"},{"location":"Documents/C-Tool/Linux%E6%8F%92%E4%BB%B6/oh-my-posh/oh-my-posh%E5%AE%89%E8%A3%85/","title":"oh-my-posh\u5b89\u88c5","text":"<ul> <li>\u5b98\u7f51\u6559\u7a0b\uff1ahttps://ohmyposh.dev/docs</li> <li>\u6bd4\u8f83\u5168\u7684\u4e2a\u4eba\u5b89\u88c5\u6587\u6863\uff1ahttps://raimis.me/archives/80/</li> <li>\u5b89\u88c5\u6d41\u7a0b\uff1a<ol> <li>\u5b89\u88c5oh-my-posh</li> <li>\u914d\u7f6e\u5b57\u4f53</li> <li>\u914d\u7f6e\u4e3b\u9898\uff08\u9ed8\u8ba4\u4e3b\u9898\u5ef6\u8fdf\u5f88\u9ad8\uff0c\u4e00\u5b9a\u8981\u6362\u4e3b\u9898\uff09</li> </ol> </li> </ul>"},{"location":"Documents/C-Tool/Linux%E6%8F%92%E4%BB%B6/oh-my-posh/oh-my-posh%E5%AE%89%E8%A3%85/#1-windows","title":"1 windows\u5e73\u53f0","text":""},{"location":"Documents/C-Tool/Linux%E6%8F%92%E4%BB%B6/oh-my-posh/oh-my-posh%E5%AE%89%E8%A3%85/#11-powershellwindows-terminal","title":"1.1 \u5b89\u88c5PowerShell\u548cWindows Terminal","text":"<ul> <li>Microsoft Store\u91cc\u641c\u7d22PowerShell\u548cWindows Terminal\u5b89\u88c5\u5373\u53ef</li> </ul>"},{"location":"Documents/C-Tool/Linux%E6%8F%92%E4%BB%B6/oh-my-posh/oh-my-posh%E5%AE%89%E8%A3%85/#12-oh-my-posh","title":"1.2 \u5b89\u88c5oh-my-posh","text":"<ul> <li>\u5b89\u88c5windows\u5305\u7ba1\u7406\u5de5\u5177winget\uff1a\u5728Microsoft Store\u91cc\u641c\u7d22winget\u5b89\u88c5</li> <li>\u5b89\u88c5oh-my-posh</li> </ul> <pre><code>winget install JanDeDobbeleer.OhMyPosh -s winget\n</code></pre>"},{"location":"Documents/C-Tool/Linux%E6%8F%92%E4%BB%B6/oh-my-posh/oh-my-posh%E5%AE%89%E8%A3%85/#13","title":"1.3 \u914d\u7f6e\u5b57\u4f53","text":"<ul> <li>\u4e0b\u8f7d\u5b57\u4f53Meslo LGM NF\u5b57\u4f53</li> <li>\u89e3\u538b\u540e\uff0c\u91cc\u9762\u6709\u5f88\u591a\u5b57\u4f53\uff0c\u9009\u62e9\u5176\u4e2d\u4e00\u4e2a\u53f3\u952e\u5b89\u88c5</li> <li>\u6253\u5f00Windows Terminal\uff0c\u6253\u5f00\u8bbe\u7f6e\u9875\u9762\uff0c\u9009\u62e9pwsh\uff0c\u9009\u62e9\u5916\u89c2\u680f\uff0c\u5728\u5b57\u4f53\u680f\u9009\u62e9\u5b89\u88c5\u7684\u5b57\u4f53</li> </ul>"},{"location":"Documents/C-Tool/Linux%E6%8F%92%E4%BB%B6/oh-my-posh/oh-my-posh%E5%AE%89%E8%A3%85/#14","title":"1.4 \u914d\u7f6e\u4e3b\u9898\uff08\u5f3a\u70c8\u5efa\u8bae\uff09","text":"<ul> <li>Windows Terminal\u4e0b\u6267\u884c\u4e0b\u8f7d\u4e3b\u9898\u914d\u7f6e\u6587\u4ef6\u5305</li> </ul> <pre><code>Get-PoshThemes\n</code></pre> <ul> <li>\u6253\u5f00$PROFILE\u6587\u4ef6\uff0c\u6ca1\u6709\u5219\u521b\u5efa\uff0c\u5982\u679c\u6709vscode\uff0c\u76f4\u63a5<code>code $PROFILE</code>\u6253\u5f00</li> </ul> <pre><code>echo $PROFILE\nd:\\Documents\\PowerShell\\Microsoft.PowerShell_profile.ps1\n</code></pre> <ul> <li>\u7f16\u8f91\u6587\u4ef6\u914d\u7f6e\u4ee5\u4e0b\u5185\u5bb9\uff1agmay.omp.json\u662f\u4e0b\u8f7d\u7684\u4e3b\u9898\u914d\u7f6e\u6587\u4ef6\uff0c\u53ef\u4efb\u9009</li> </ul> <pre><code>oh-my-posh init pwsh --config 'C:\\Users\\Administrator\\AppData\\Local\\Programs\\oh-my-posh\\themes\\gmay.omp.json' | Invoke-Expression\n</code></pre> <ul> <li>\u4f7f\u914d\u7f6e\u751f\u6548</li> </ul> <pre><code>. $PROFILE\n</code></pre>"},{"location":"Documents/C-Tool/Linux%E6%8F%92%E4%BB%B6/oh-my-posh/oh-my-posh%E5%AE%89%E8%A3%85/#15-vscode","title":"1.5 vscode\u914d\u7f6e","text":"<ol> <li>vscode\u8bbe\u7f6e\u9ed8\u8ba4terminal\u4e3apwsh</li> <li>\u8bbe\u7f6eterminal\u5b57\u4f53<ol> <li>\u6253\u5f00\u8bbe\u7f6e\u83dc\u5355\uff0c\u8f93\u5165<code>text Font Family</code>\uff0c\u8f93\u5165\u4e0a\u9762\u5b89\u88c5\u7684\u5b57\u4f53</li> </ol> </li> </ol>"},{"location":"Documents/C-Tool/Linux%E6%8F%92%E4%BB%B6/oh-my-posh/oh-my-posh%E5%AE%89%E8%A3%85/#2-linux","title":"2 Linux\u5e73\u53f0","text":""},{"location":"Documents/C-Tool/Linux%E6%8F%92%E4%BB%B6/oh-my-posh/oh-my-posh%E5%AE%89%E8%A3%85/#21-oh-my-posh","title":"2.1 \u4e0b\u8f7doh-my-posh","text":"<pre><code>sudo wget https://github.com/JanDeDobbeleer/oh-my-posh/releases/latest/download/posh-linux-amd64 -O /usr/local/bin/oh-my-posh\nsudo chmod +x /usr/local/bin/oh-my-posh\n</code></pre>"},{"location":"Documents/C-Tool/Linux%E6%8F%92%E4%BB%B6/oh-my-posh/oh-my-posh%E5%AE%89%E8%A3%85/#22","title":"2.2 \u914d\u7f6e\u5b57\u4f53","text":"<ul> <li>\u5982\u679c\u662f\u5728windows\u4e0a\u4f7f\u7528ssh\u5de5\u5177\u8fde\u63a5linux\uff0c\u90a3\u4e48\u53ea\u9700\u8981\u5728windows\u4e0a\u5b89\u88c5\u5b57\u4f53\uff0c\u7136\u540e\u914d\u7f6e\u76f8\u5e94\u7684ssh\u8f6f\u4ef6\u5373\u53ef\uff0c\u5177\u4f53\u64cd\u4f5c\u53c2\u8003windows\u5e73\u53f0\u5b57\u4f53\u5b89\u88c5\u90e8\u5206\u3002</li> </ul>"},{"location":"Documents/C-Tool/Linux%E6%8F%92%E4%BB%B6/oh-my-posh/oh-my-posh%E5%AE%89%E8%A3%85/#23-oh-my-posh","title":"2.3 \u4f7f\u7528oh-my-posh","text":"<ul> <li>\u7f16\u8f91~/.bash_profile\u6587\u4ef6\uff0c\u63d2\u5165\u4ee5\u4e0b\u5185\u5bb9\uff08\u4f7f\u7528\u9ed8\u8ba4\u4e3b\u9898\u53ef\u80fd\u4f1a\u5f88\u5361\uff0c\u5efa\u8bae\u914d\u7f6e\u4e3b\u9898\uff09</li> </ul> <pre><code>eval \"$(oh-my-posh init bash)\"\n</code></pre> <ul> <li>\u6267\u884c<code>exec bash</code></li> <li>\u6267\u884c<code>. ~/.profile</code></li> </ul>"},{"location":"Documents/C-Tool/Linux%E6%8F%92%E4%BB%B6/oh-my-posh/oh-my-posh%E5%AE%89%E8%A3%85/#24","title":"2.4 \u914d\u7f6e\u4e3b\u9898\uff08\u5f3a\u70c8\u5efa\u8bae\uff09","text":"<ul> <li>\u4e0b\u8f7d\u4e3b\u9898\uff1a\u4e3b\u9898\u6587\u4ef6\u5b58\u653e\u5728<code>~/.poshthemes/</code>\u4e2d</li> </ul> <pre><code>mkdir ~/.poshthemes\nwget https://github.com/JanDeDobbeleer/oh-my-posh/releases/latest/download/themes.zip -O ~/.poshthemes/themes.zip\nunzip ~/.poshthemes/themes.zip -d ~/.poshthemes\nchmod u+rw ~/.poshthemes/*.omp.*\nrm ~/.poshthemes/themes.zip\n</code></pre> <ul> <li>\u7f16\u8f91~/.bash_profile\u6587\u4ef6\uff0c\u63d2\u5165\u4ee5\u4e0b\u5185\u5bb9\uff0c<code>~/.poshthemes/gmay.omp.json</code>\u662f\u4e3b\u9898\u6587\u4ef6\u8def\u5f84\uff0c\u4efb\u610f\u9009\u62e9</li> </ul> <pre><code>eval \"$(oh-my-posh init bash --config ~/.poshthemes/gmay.omp.json)\"\n</code></pre> <ul> <li>\u6267\u884c<code>exec bash</code></li> <li>\u6267\u884c<code>. ~/.profile</code></li> </ul>"},{"location":"Documents/C-Tool/Linux%E6%8F%92%E4%BB%B6/oh-my-zsh/oh-my-zsh%E5%AE%89%E8%A3%85/","title":"oh-my-zsh\u5b89\u88c5","text":""},{"location":"Documents/C-Tool/Linux%E6%8F%92%E4%BB%B6/oh-my-zsh/oh-my-zsh%E5%AE%89%E8%A3%85/#1-zsh","title":"1 \u5b89\u88c5zsh","text":"<ul> <li>\u7248\u672c\uff1a5.0.8\u4ee5\u4e0a</li> <li>yum\u5b89\u88c5\uff1a<code>yum intsall zsh -y</code></li> </ul>"},{"location":"Documents/C-Tool/Linux%E6%8F%92%E4%BB%B6/oh-my-zsh/oh-my-zsh%E5%AE%89%E8%A3%85/#2-oh-my-zsh","title":"2 \u5b89\u88c5oh-my-zsh","text":"<ul> <li>\u4e0b\u8f7d\u5b89\u88c5\u811a\u672c\u5e76\u6267\u884c\u5b89\u88c5\uff1a<code>sh -c \"$(curl -fsSL https://gitee.com/mirrors/oh-my-zsh/raw/master/tools/install.sh)\"</code></li> </ul>"},{"location":"Documents/C-Tool/Linux%E6%8F%92%E4%BB%B6/oh-my-zsh/oh-my-zsh%E5%AE%89%E8%A3%85/#3","title":"3 \u4f7f\u7528","text":"<ul> <li>\u8fdb\u5165oh-my-zsh\u6a21\u5f0f\uff1a\u8f93\u5165<code>zsh</code></li> <li>\u9000\u51faoh-my-zsh\u6a21\u5f0f\uff1a\u8f93\u5165<code>exit</code></li> </ul>"},{"location":"Documents/C-Tool/Linux%E6%8F%92%E4%BB%B6/vim/vim%E6%8F%92%E4%BB%B6/","title":"vim\u63d2\u4ef6","text":"<ul> <li>vim\u63d2\u4ef6\u793e\u533a</li> </ul>"},{"location":"Documents/C-Tool/Linux%E6%8F%92%E4%BB%B6/vim/vim%E6%8F%92%E4%BB%B6/#1-vundle","title":"1 Vundle","text":"<ul> <li>Vundle\uff1aVim \u7684\u63d2\u4ef6\u7ba1\u7406\u5668</li> <li>github\u5730\u5740</li> </ul>"},{"location":"Documents/C-Tool/Linux%E6%8F%92%E4%BB%B6/vim/vim%E6%8F%92%E4%BB%B6/#11","title":"1.1 \u5b89\u88c5","text":"<ol> <li>\u4e0b\u8f7dVundle\uff1a<code>git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim</code></li> <li>\u7f16\u8f91.vimrc\u6587\u4ef6\uff0c\u63d2\u5165\u5982\u4e0b\u5185\u5bb9</li> </ol> <pre><code>set nocompatible              \" be iMproved, required\nfiletype off                  \" required\n\n\" set the runtime path to include Vundle and initialize\nset rtp+=~/.vim/bundle/Vundle.vim\ncall vundle#begin()\n\" let Vundle manage Vundle, required\nPlugin 'VundleVim/Vundle.vim'\n\n\n\n\" All of your Plugins must be added before the following line\ncall vundle#end()            \" required\nfiletype plugin indent on    \" required\n</code></pre>"},{"location":"Documents/C-Tool/Linux%E6%8F%92%E4%BB%B6/vim/vim%E6%8F%92%E4%BB%B6/#12","title":"1.2 \u4f7f\u7528","text":"<ul> <li>\u7ba1\u7406\u63d2\u4ef6\uff1a\u5728.vimrc\u6587\u4ef6\u91cc\u9762\u7684<code>call vundle#begin()</code>\u548c<code>call vundle#end()</code> \u4e4b\u95f4\u914d\u7f6e\u63d2\u4ef6\uff0c\u914d\u7f6e\u89c4\u5219\u5982\u4e0b<ul> <li>github\u4ed3\u5e93\u63d2\u4ef6\uff1a<code>Plugin 'tpope/vim-fugitive'</code></li> <li>\u975egithub\u4e0a\u7684git\u4ed3\u5e93\uff1a<code>Plugin 'git://git.wincent.com/command-t.git'</code></li> <li>git\u4ed3\u5e93\u5728\u672c\u5730\u7684\uff1a<code>Plugin 'file:///home/gmarik/path/to/plugin'</code></li> </ul> </li> <li>\u5b89\u88c5\u63d2\u4ef6\uff1a\u4f1a\u53bb\u6267\u884c<code>call vundle#begin()</code>\u548c<code>call vundle#end()</code> \u4e4b\u95f4\u914d\u7f6e\u7684\u63d2\u4ef6<ul> <li>\u65b9\u6cd5\u4e00\uff1a\u542f\u52a8 vim \u5e76\u8fd0\u884c :PluginInstall</li> <li>\u65b9\u6cd5\u4e8c\uff1a\u4ece\u547d\u4ee4\u884c\u5b89\u88c5\uff1avim +PluginInstall +qall</li> </ul> </li> </ul>"},{"location":"Documents/C-Tool/Linux%E6%8F%92%E4%BB%B6/vim/vim%E6%8F%92%E4%BB%B6/#2","title":"2 \u4e3b\u9898\u63d2\u4ef6","text":""},{"location":"Documents/C-Tool/Linux%E6%8F%92%E4%BB%B6/vim/vim%E6%8F%92%E4%BB%B6/#21-vim-airline","title":"2.1 vim-airline","text":""},{"location":"Documents/C-Tool/Linux%E6%8F%92%E4%BB%B6/vim/vim%E6%8F%92%E4%BB%B6/#211","title":"2.1.1 \u5b89\u88c5","text":"<p>\u4f7f\u7528Vundle\u5b89\u88c5 - vim\u7f16\u8f91\u5c06.vimrc\u6587\u4ef6\uff0c\u5728\u63d2\u4ef6\u5757\u90e8\u5206\u63d2\u5165\u5982\u4e0b\u5185\u5bb9</p> <pre><code>Plugin 'vim-airline/vim-airline'\nPlugin 'vim-airline/vim-airline-themes'\n</code></pre> <ul> <li>\u6267\u884c\u5982\u4e0b\u5b89\u88c5</li> </ul> <pre><code>:w \n:source %  \n:PluginInstall\n</code></pre> <ul> <li>\u5b89\u88c5\u5b57\u4f53\u6587\u4ef6\uff08\u6709\u4e9b\u5b57\u4f53\u663e\u793a\u4e0d\u51fa\u6765\uff0c\u901a\u8fc7\u6b64\u65b9\u6cd5\u89e3\u51b3\uff09\uff0c\u4e0b\u8f7dpowerline-font</li> </ul> <pre><code>## clone\ngit clone https://github.com/powerline/fonts.git --depth=1\n## install\ncd fonts\n./install.sh\n</code></pre> <ul> <li>\u7f16\u8f91.vimrc\u6587\u4ef6\uff0c\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\u4f7f\u5b57\u4f53\u751f\u6548</li> </ul> <pre><code>let g:airline_powerline_fonts = 1 \n</code></pre>"},{"location":"Documents/C-Tool/Linux%E6%8F%92%E4%BB%B6/vim/vim%E6%8F%92%E4%BB%B6/#212","title":"2.1.2 \u914d\u7f6e","text":"<ul> <li>vim-airline-themes\u4e0b\u6709\u8bb8\u591a\u81ea\u5b9a\u4e49\u4e3b\u9898\uff0c\u663e\u793a\u6548\u679c\u53ef\u4ee5\u4ecehttps://github.com/vim-airline/vim-airline/wiki/Screenshots\u67e5\u770b</li> <li>\u4f7f\u7528\u65b9\u5f0f<ul> <li>\u65b9\u5f0f\u4e00\uff1a\u4e34\u65f6vim\u4e0b\u76f4\u63a5\u4f7f\u7528<code>:AirlineTheme &lt;theme&gt;</code>,\u6bd4\u5982<code>:AirlineTheme violet</code></li> <li>\u65b9\u5f0f\u4e8c\uff1a\u6c38\u4e45\u4f7f\u7528\u7f16\u8f91.vimrc\u6587\u4ef6<code>let g:airline_theme='&lt;theme&gt;'</code>,\u6bd4\u5982<code>let g:airline_theme='violet'</code></li> </ul> </li> </ul>"},{"location":"Documents/C-Tool/Linux%E6%8F%92%E4%BB%B6/vim/vim%E6%8F%92%E4%BB%B6/#3-vimrc","title":"3 vimrc\u6587\u4ef6","text":"<pre><code>set nocompatible              \" be iMproved, required\nfiletype off                  \" required\n\n\" set the runtime path to include Vundle and initialize\nset rtp+=~/.vim/bundle/Vundle.vim\ncall vundle#begin()\n\" alternatively, pass a path where Vundle should install plugins\n\"call vundle#begin('~/some/path/here')\n\n\" let Vundle manage Vundle, required\nPlugin 'VundleVim/Vundle.vim'\nPlugin 'vim-airline/vim-airline'\nPlugin 'vim-airline/vim-airline-themes'\n\" All of your Plugins must be added before the following line\ncall vundle#end()            \" required\nfiletype plugin indent on    \" required\n\" To ignore plugin indent changes, instead use:\n\"filetype plugin on\n\"\n\" Brief help\n\" :PluginList       - lists configured plugins\n\" :PluginInstall    - installs plugins; append `!` to update or just :PluginUpdate\n\" :PluginSearch foo - searches for foo; append `!` to refresh local cache\n\" :PluginClean      - confirms removal of unused plugins; append `!` to auto-approve removal\n\"\n\" see :h vundle for more details or wiki for FAQ\n\" Put your non-Plugin stuff after this line\n\"\n\"\"\"\"\"\"\"\"\"\n\"airline\"\n\"\"\"\"\"\"\"\"\"\nlet g:airline_theme=\"violet\" \n\n\"\u8fd9\u4e2a\u662f\u5b89\u88c5\u5b57\u4f53\u540e \u5fc5\u987b\u8bbe\u7f6e\u6b64\u9879\" \nlet g:airline_powerline_fonts = 1   \n\"\u6253\u5f00tabline\u529f\u80fd,\u65b9\u4fbf\u67e5\u770bBuffer\u548c\u5207\u6362,\u7701\u53bb\u4e86minibufexpl\u63d2\u4ef6\nlet g:airline#extensions#tabline#enabled = 1\nlet g:airline#extensions#tabline#buffer_nr_show = 1\n\"\"\"\"\"\"\"\"\"\n\"airline\"\n\"\"\"\"\"\"\"\"\"\n</code></pre>"},{"location":"Documents/C-Tool/Obsidian/Obsidian%E6%8F%92%E4%BB%B6%E6%8E%A8%E8%8D%90/","title":"Obsidian\u63d2\u4ef6\u63a8\u8350","text":""},{"location":"Documents/C-Tool/Obsidian/Obsidian%E6%8F%92%E4%BB%B6%E6%8E%A8%E8%8D%90/#1-enhanced-editing","title":"1 enhanced editing\u589e\u5f3a\u7f16\u8f91","text":"<ul> <li>\u529f\u80fd\uff1a <p>ZH \u589e\u5f3a\u7f16\u8f91\u63d2\u4ef6\u4e3a\u5927\u91cf\u7f16\u8f91\u52a8\u4f5c\u7ec4\u5408\u63d0\u4f9b\u4e86\u7b80\u5355\u3001\u5feb\u6377\u7684\u64cd\u4f5c\u3002\u5982\u679c\u60a8\u9700\u8981\u5728 Obsidian \u4e2d\u9ad8\u9891\u7387\u5730\u7f16\u8f91\u548c\u5199\u4f5c\uff0cZH \u589e\u5f3a\u7f16\u8f91\u63d2\u4ef6\u53ef\u4ee5\u5927\u5e45\u63d0\u9ad8\u60a8\u7684 MD\u3001HTML \u8bed\u6cd5\u7f16\u8f91\u6548\u7387\u3002\u589e\u5f3a\u7f16\u8f91\u6a21\u5f0f\u4e0b\u7684\u591a\u9879\u529f\u80fd\uff0c\u5982\u8f6c\u6362\u94fe\u63a5\u8bed\u6cd5\u3001\u8f6c\u6362\u6587\u672c\uff08\u6807\u9898\u8bed\u6cd5\u3001\u9ad8\u4eae\u8bed\u6cd5\u3001\u7740\u91cd\u8bed\u6cd5\u3001\u4e0a\u4e0b\u6807\u8bed\u6cd5\u3001\u6ce8\u91ca\u5185\u5bb9\u3001\u4ee3\u7801\u5757\u7b49\uff09\u6837\u5f0f\u3001\u7c98\u8d34excel\u8868\u683c\u3001\u83b7\u53d6\u591a\u79cd\u4fe1\u606f\uff08\u7b14\u8bb0\u76f8\u5bf9\u8def\u5f84\u3001\u6807\u6ce8\u6216\u65e0\u8bed\u6cd5\u6587\u672c\u7b49\uff09\u3001\u4fee\u590d\u9519\u8bef\u8bed\u6cd5\u3001\u6dfb\u52a0\u6216\u53bb\u9664\u7a7a\u884c\u3001\u8ffd\u52a0\u6216\u53bb\u9664\u7a7a\u683c\u3001\u53bb\u9664\u65ad\u884c\u3001\u66ff\u6362\u6807\u70b9\u3001\u8f6c\u6362\u4e2d\u82f1\u6807\u70b9\u3001\u8f6c\u6362\u6587\u4ef6\u8def\u5f84\u7b49</p> </li> <li>\u63d2\u4ef6\u5730\u5740</li> </ul>"},{"location":"Documents/C-Tool/Obsidian/Obsidian%E6%8F%92%E4%BB%B6%E6%8E%A8%E8%8D%90/#2-admonition","title":"2 Admonition","text":"<ul> <li>\u529f\u80fd\uff1a\u63d0\u793ablock</li> <li>\u63d2\u4ef6\u5730\u5740</li> </ul>"},{"location":"Documents/C-Tool/Obsidian/Obsidian%E6%8F%92%E4%BB%B6%E6%8E%A8%E8%8D%90/#3-banners","title":"3 Banners","text":"<ul> <li>\u529f\u80fd\uff1a <p>An Obsidian plugin that adds banners to your notes</p> </li> <li>\u63d2\u4ef6\u5730\u5740</li> </ul>"},{"location":"Documents/C-Tool/Obsidian/Obsidian%E6%8F%92%E4%BB%B6%E6%8E%A8%E8%8D%90/#4-table-extended","title":"4 Table Extended","text":"<ul> <li>\u529f\u80fd\uff1a\u6269\u5c55markdown\u8868\u683c\u8bed\u6cd5\uff0c\u589e\u52a0\u5355\u5143\u683c\u5408\u5e76\u529f\u80fd</li> <li>\u63d2\u4ef6\u5730\u5740</li> </ul>"},{"location":"Documents/C-Tool/Obsidian/Obsidian%E6%8F%92%E4%BB%B6%E6%8E%A8%E8%8D%90/#5-obsidian-charts","title":"5 Obsidian Charts","text":"<ul> <li>\u529f\u80fd\uff1a\u63d0\u4f9b\u56fe\u8868\u529f\u80fd\uff0c\u6bd4\u5982\u997c\u56fe\u3001\u6761\u5f62\u56fe</li> <li>\u63d2\u4ef6\u5730\u5740</li> </ul>"},{"location":"Documents/C-Tool/Obsidian/Obsidian%E6%8F%92%E4%BB%B6%E6%8E%A8%E8%8D%90/#6-templater","title":"6 Templater","text":"<ul> <li>\u529f\u80fd\uff1a\u53ef\u5c06\u53d8\u91cf\u3001\u51fd\u6570\u548c JavaScript \u4ee3\u7801\u5904\u7406\u7ed3\u679c\u63d2\u5165\u7b14\u8bb0\u4e2d</li> <li>\u63d2\u4ef6\u5730\u5740</li> </ul>"},{"location":"Documents/C-Tool/Obsidian/Obsidian%E6%8F%92%E4%BB%B6%E6%8E%A8%E8%8D%90/#7-folder-note","title":"7 Folder Note","text":"<ul> <li>\u529f\u80fd\uff1a\u53ef\u5c06\u53d8\u91cf\u3001\u51fd\u6570\u548c JavaScript \u4ee3\u7801\u5904\u7406\u7ed3\u679c\u63d2\u5165\u7b14\u8bb0\u4e2d</li> <li>\u63d2\u4ef6\u5730\u5740</li> </ul>"},{"location":"Documents/C-Tool/Obsidian/Obsidian%E6%8F%92%E4%BB%B6%E6%8E%A8%E8%8D%90/#8-linter","title":"8 Linter","text":"<ul> <li>\u529f\u80fd\uff1a\u81ea\u52a8\u683c\u5f0f\u5316\u6587\u6863\uff0c\u521b\u5efa\u6587\u6863\u5143\u6570\u636e\u4fe1\u606f\u7b49</li> <li>\u63d2\u4ef6\u5730\u5740</li> </ul>"},{"location":"Documents/C-Tool/Obsidian/Obsidian%E6%8F%92%E4%BB%B6%E6%8E%A8%E8%8D%90/#9-kanban","title":"9 kanban","text":"<ul> <li>\u529f\u80fd\uff1a</li> <li>\u63d2\u4ef6\u5730\u5740</li> <li>\u4f7f\u7528\u6587\u6863</li> </ul>"},{"location":"Documents/C-Tool/Obsidian/Obsidian%E6%8F%92%E4%BB%B6%E6%8E%A8%E8%8D%90/#10-omnisearch","title":"10 Omnisearch","text":"<ul> <li>\u529f\u80fd\uff1a\u641c\u7d22\u5f15\u64ce\uff0c\u63d0\u4f9bobsidian\u4ed3\u5e93\u5185\u6587\u4ef6\u6216\u5185\u5bb9\u641c\u7d22\u529f\u80fd</li> <li>\u63d2\u4ef6\u5730\u5740</li> </ul>"},{"location":"Documents/C-Tool/Obsidian/Obsidian%E6%8F%92%E4%BB%B6%E6%8E%A8%E8%8D%90/#11-tasks","title":"11 Tasks","text":"<ul> <li>\u529f\u80fd\uff1a\u7edf\u8ba1\u5e76\u663e\u793a\u4efb\u52a1\u5b8c\u6210\u4fe1\u606f</li> <li>\u63d2\u4ef6\u5730\u5740</li> </ul>"},{"location":"Documents/C-Tool/Obsidian/Obsidian%E6%8F%92%E4%BB%B6%E6%8E%A8%E8%8D%90/#12-natural-language-dates","title":"12 Natural Language Dates","text":"<ul> <li>\u529f\u80fd\uff1a\u63d2\u5165\u65f6\u95f4\u6233\u5e76\u4f7f\u7528\u81ea\u7136\u8bed\u8a00\u7684\u7075\u6d3b\u6027\u4ea4\u53c9\u94fe\u63a5\u65e5\u8bb0</li> <li>\u63d2\u4ef6\u5730\u5740</li> </ul>"},{"location":"Documents/C-Tool/Obsidian/Obsidian%E6%8F%92%E4%BB%B6%E6%8E%A8%E8%8D%90/#13-workspaces-plus","title":"13 Workspaces Plus","text":"<ul> <li>\u529f\u80fd\uff1a\u6dfb\u52a0\u5de5\u4f5c\u7a7a\u95f4\u5230\u72b6\u6001\u680f\u7684\u53f3\u4e0b\u89d2</li> <li>\u63d2\u4ef6\u5730\u5740</li> </ul>"},{"location":"Documents/C-Tool/Obsidian/obsidian%E6%95%99%E7%A8%8B/","title":"obsidian\u6559\u7a0b","text":""},{"location":"Documents/C-Tool/Obsidian/obsidian%E6%95%99%E7%A8%8B/#1-windowsandroid","title":"1 windows\u3001Android\u540c\u6b65","text":"<ul> <li>\u6559\u7a0b</li> <li>\u601d\u8def\uff1a<ul> <li>\u4f7f\u7528gitee\u6216github\u4f5c\u4e3a\u4ed3\u5e93\uff0c\u6dfb\u52a0ssh\u516c\u94a5</li> <li>window\u4e0a\u9700\u8981git\u3002\uff08\u53ef\u9009\uff1aobsidian\u4e0a\u5b89\u88c5Git\u63d2\u4ef6\uff0c\u4fbf\u4e8e\u5728obsidian\u4e2d\u63d0\u4ea4\u62c9\u53d6\u4ee3\u7801\uff09</li> <li>Android\u7684\u5b89\u88c5MGit\uff0c\u4f5c\u7528\u540cgit\uff0c\u8fdb\u884c\u4ed3\u5e93\u7684\u63d0\u4ea4\u62c9\u53d6\uff0c\u540c\u6837\u9700\u8981\u8bbe\u7f6essh\u516c\u94a5</li> </ul> </li> </ul>"},{"location":"Documents/C-Tool/OpenStack/OpenStack/","title":"OpenStack","text":"<pre><code>title: \u4ec0\u4e48\u662fOpenStack\uff1f\u548ck8s\u7684\u4e0d\u540c\uff1f\n\nopenstack\u662f\u865a\u62df\u673a\u7ba1\u7406\u7cfb\u7edf\u8f6f\u4ef6\u3002kubernetes\u662f\u5bb9\u5668\u8c03\u5ea6\u548c\u7f16\u6392\u8f6f\u4ef6\u3002\u6211\u4eec\u901a\u5e38\u4f1a\u5728\u7531openstack\u7ba1\u7406\u7684\u865a\u62df\u673a\u4e0a\u5b89\u88c5kubernetes\u96c6\u7fa4\uff0c\u5e76\u8fd0\u884ck8s\u7ba1\u7406\u7684\u5bb9\u5668\u3002\u5f53\u7136\u4f5c\u4e3a\u4e00\u4e2a\u7f16\u6392\u8c03\u5ea6\u7cfb\u7edf\u5e73\u53f0\uff0ck8s\u4e5f\u53ef\u4ee5\u5b9e\u73b0vm\u548ccontainer\u7684\u7edf\u4e00\u8c03\u5ea6\u3002\u5f53\u7136\u8fd9\u662f\u66f4\u9ad8\u7ea7\u7684topic\uff0c\u4e00\u822cIaaS\u63d0\u4f9b\u5546\u624d\u4f1a\u8003\u8651\u8fd9\u79cd\u95ee\u9898\n</code></pre>"},{"location":"Documents/C-Tool/UML/UML/","title":"UML","text":"<ul> <li>uml\u5173\u7cfb\u7ebf\u56fe\u548c\u57fa\u6570\u56fe\u4f8b\u5982\u4e0b </li> </ul>"},{"location":"Documents/C-Tool/UML/UML/#1","title":"1 \u63a5\u53e3","text":"<p>java\u3001go\u8bed\u8a00\u4e2d\u6709interface\u5173\u952e\u5b57\uff0cc++\u4e2d\u5e76\u6ca1\u6709interface\u5173\u952e\u5b57\u3002\u4f46\u5728c++\u4e2d\u63a5\u53e3\u76f8\u5f53\u4e8e\u662f\u62bd\u8c61\u7c7b\uff08\u542b\u6709\u7eaf\u865a\u51fd\u6570\u7684\u7c7b\uff09\u3002</p>"},{"location":"Documents/C-Tool/UML/UML/#2","title":"2 \u6cdb\u5316\u548c\u5b9e\u73b0","text":"<ol> <li>\u5b9e\u73b0\uff1a\u662f\u4ece\u63a5\u53e3\u6d3e\u751f\uff0c\u5728java\u4e2d\u5c31\u662f\u4f7f\u7528\u5173\u952e\u5b57<code>implements</code></li> <li>\u6cdb\u5316\uff1a\u662f\u4ece\u67d0\u4e2a\u7c7b\u6d3e\u751f\uff0c\u5728java\u4e2d\u5c31\u662f\u4f7f\u7528\u5173\u952e\u5b57<code>extends</code></li> </ol>"},{"location":"Documents/C-Tool/UML/UML/#3","title":"3 \u805a\u5408\u548c\u7ec4\u5408","text":"<ol> <li>\u805a\u5408\uff1a\u662f\u6574\u4f53\u4e0e\u90e8\u5206\u7684\u5173\u7cfb,\u00a0\u4e14\u90e8\u5206\u53ef\u4ee5\u79bb\u5f00\u6574\u4f53\u800c\u5355\u72ec\u5b58\u5728.\u00a0\u5982\u8f66\u548c\u8f6e\u80ce\u662f\u6574\u4f53\u548c\u90e8\u5206\u7684\u5173\u7cfb,\u00a0\u8f6e\u80ce\u79bb\u5f00\u8f66\u4ecd\u7136\u53ef\u4ee5\u5b58\u5728.</li> <li>\u7ec4\u5408\uff1a\u662f\u6574\u4f53\u4e0e\u90e8\u5206\u7684\u5173\u7cfb,\u00a0\u4f46\u90e8\u5206\u4e0d\u80fd\u79bb\u5f00\u6574\u4f53\u800c\u5355\u72ec\u5b58\u5728.\u00a0\u5982\u516c\u53f8\u548c\u90e8\u95e8\u662f\u6574\u4f53\u548c\u90e8\u5206\u7684\u5173\u7cfb,\u00a0\u6ca1\u6709\u516c\u53f8\u5c31\u4e0d\u5b58\u5728\u90e8\u95e8</li> </ol>"},{"location":"Documents/C-Tool/UML/UML/#4","title":"4 \u5173\u8054\u548c\u4f9d\u8d56","text":"<ol> <li>\u5173\u8054\uff1a\u662f\u4e00\u79cd\u62e5\u6709\u7684\u5173\u7cfb,\u00a0\u5b83\u4f7f\u4e00\u4e2a\u7c7b\u77e5\u9053\u53e6\u4e00\u4e2a\u7c7b\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff1b\u5982\uff1a\u8001\u5e08\u4e0e\u5b66\u751f\uff0c\u4e08\u592b\u4e0e\u59bb\u5b50\u3002\u5173\u8054\u53ef\u4ee5\u662f\u53cc\u5411\u7684\uff0c\u4e5f\u53ef\u4ee5\u662f\u5355\u5411\u7684\u3002\u53cc\u5411\u7684\u5173\u8054\u53ef\u4ee5\u6709\u4e24\u4e2a\u7bad\u5934\u6216\u8005\u6ca1\u6709\u7bad\u5934\uff0c\u5355\u5411\u7684\u5173\u8054\u6709\u4e00\u4e2a\u7bad\u5934</li> <li>\u4f9d\u8d56\uff1a\u662f\u4e00\u79cd\u4f7f\u7528\u7684\u5173\u7cfb,\u00a0\u00a0\u5373\u4e00\u4e2a\u7c7b\u7684\u5b9e\u73b0\u9700\u8981\u53e6\u4e00\u4e2a\u7c7b\u7684\u534f\u52a9,\u00a0\u6240\u4ee5\u8981\u5c3d\u91cf\u4e0d\u4f7f\u7528\u53cc\u5411\u7684\u4e92\u76f8\u4f9d\u8d56.</li> </ol>"},{"location":"Documents/C-Tool/VMware/%E9%85%8D%E7%BD%AE%E4%B8%BB%E6%9C%BA%E5%9B%BA%E5%AE%9Aip/","title":"\u914d\u7f6e\u4e3b\u673a\u56fa\u5b9aip","text":""},{"location":"Documents/C-Tool/VMware/%E9%85%8D%E7%BD%AE%E4%B8%BB%E6%9C%BA%E5%9B%BA%E5%AE%9Aip/#1-vmnet8","title":"1 \u4fee\u6539VMnet8\u7f51\u7edc\u914d\u7f6e","text":"<ul> <li>\u70b9\u51fbVM\u9876\u90e8\u83dc\u5355\u680f\u83dc\u5355\uff1a\u7f16\u8f91-&gt;\u865a\u62df\u7f51\u7edc\u7f16\u8f91\u5668 </li> </ul>"},{"location":"Documents/C-Tool/VMware/%E9%85%8D%E7%BD%AE%E4%B8%BB%E6%9C%BA%E5%9B%BA%E5%AE%9Aip/#2","title":"2 \u4fee\u6539\u7f51\u7edc\u9002\u914d\u5668\u8bbe\u7f6e","text":"<ul> <li>\u63a7\u5236\u9762\u677f-&gt;\u7f51\u7edc\u548c\u5171\u4eab\u4e2d\u5fc3-&gt;\u66f4\u6539\u9002\u914d\u5668\u8bbe\u7f6e-&gt;\u53f3\u952eVMware Network Adapter VMnet8\u9009\u62e9\u5c5e\u6027 </li> </ul>"},{"location":"Documents/C-Tool/VMware/%E9%85%8D%E7%BD%AE%E4%B8%BB%E6%9C%BA%E5%9B%BA%E5%AE%9Aip/#3","title":"3 \u914d\u7f6e\u865a\u62df\u673a\u7f51\u7edc","text":"<ul> <li>\u67e5\u8be2\u5df2\u6709\u7f51\u5361\uff1a<code>ip a</code>\uff0c\u4e0b\u56fe\u4e2difcfg-ens33\u662f\u7531ip\u547d\u4ee4\u67e5\u8be2\u51fa\u6765\u7684\u7f51\u5361</li> <li>\u7f16\u8f91\u7f51\u5361\u914d\u7f6e\u4fe1\u606f\uff1a<code>vi /etc/sysconfig/network-scripts/ifcfg-ens33</code>\u3002\u8be6\u89c1\u4e0b\u56fe</li> <li>\u91cd\u542f\u7f51\u7edc\uff1a<code>systemctl restart network</code> </li> </ul>"},{"location":"Documents/C-Tool/blender/blender/","title":"blender","text":""},{"location":"Documents/C-Tool/blender/blender/#1","title":"1 \u5149\u6e90","text":"<ol> <li>\u70b9\u5149\uff1a</li> <li>\u592a\u9633\u5149\uff1a\u53ef\u4ee5\u6309R\u65cb\u8f6c\u5149\u6e90\u65b9\u5411</li> </ol>"},{"location":"Documents/C-Tool/blender/blender/#2","title":"2 \u6444\u50cf\u673a","text":"<ol> <li>\u5728\u6444\u50cf\u673a\u89c6\u56fe\u4e0b\uff0c\u53ef\u4ee5\u5728\u53f3\u8fb9\u680fview\u5de5\u5177\u680f\u91cc\u9009\u4e2dlock canmera to view\uff0c\u5c31\u53ef\u4ee5\u9501\u5b9a\u76f8\u673a\u89c6\u89d2\u8fdb\u884c\u89c6\u56fe\u65cb\u8f6c\u5e73\u79fb\u64cd\u4f5c</li> </ol>"},{"location":"Documents/C-Tool/blender/blender/#3","title":"3 \u5438\u9644\u8bbe\u7f6e","text":"<p>\u5c06\u56fe\u4e2d\u7ea2\u6846\u4e2d\u5438\u9644\u6253\u5f00</p> <p></p>"},{"location":"Documents/C-Tool/blender/blender%E5%BF%AB%E6%8D%B7%E9%94%AE/","title":"blender\u5feb\u6377\u952e","text":""},{"location":"Documents/C-Tool/blender/blender%E5%BF%AB%E6%8D%B7%E9%94%AE/#1","title":"1 \u7a97\u53e3","text":"<ul> <li>\u8c03\u51faToolBar\u2014\u2014T\uff08\u53e6\uff1a\u4e0b\u65b9\u753b\u7b14\u548c\u6d4b\u91cf\u4e3a\u8f85\u52a9\u5de5\u5177\uff0c\u90fd\u662f\u957f\u6309\u8c03\u7528\u4e0d\u540c\u7684\u6a21\u5f0f)</li> <li>\u8c03\u51fa\u5c5e\u6027\u680fProperties\u2014\u2014N</li> </ul>"},{"location":"Documents/C-Tool/blender/blender%E5%BF%AB%E6%8D%B7%E9%94%AE/#11","title":"1.1 \u7a97\u53e3\u5206\u5272","text":"<ol> <li>\u5728\u7a97\u53e34\u4e2a\u89d2\u4e0a\u60ac\u6d6e\uff0c\u9f20\u6807\u53d8\u6210\u5341\u5b57\u6807\u540e\uff0c\u6309\u4f4f\u9f20\u6807\u5de6\u952e\uff0c\u671d\u4e0d\u540c\u65b9\u5411\u79fb\u52a8\uff0c\u5c06\u4f1a\u62d6\u51fa\u4e00\u4e2a\u65b0\u7a97\u53e3\u3002</li> </ol>"},{"location":"Documents/C-Tool/blender/blender%E5%BF%AB%E6%8D%B7%E9%94%AE/#12","title":"1.2 \u7a97\u53e3\u4f4d\u7f6e\u66ff\u6362","text":"<ol> <li>\u5728\u7a97\u53e34\u4e2a\u89d2\u4e0a\u60ac\u6d6e\uff0c\u9f20\u6807\u53d8\u6210\u5341\u5b57\u6807\u540e\uff0c\u6309\u4f4f\u9f20\u6807\u5de6\u952e\u548cctrl\u952e\uff0c\u671d\u53e6\u4e00\u4e2a\u7a97\u53e3\u79fb\u52a8\uff0c2\u4e2a\u7a97\u53e3\u4f4d\u7f6e\u5c06\u4f1a\u66ff\u6362\u3002</li> </ol>"},{"location":"Documents/C-Tool/blender/blender%E5%BF%AB%E6%8D%B7%E9%94%AE/#2","title":"2 \u89c6\u56fe\u65cb\u8f6c\u3001\u5e73\u79fb\u3001\u7f29\u653e","text":""},{"location":"Documents/C-Tool/blender/blender%E5%BF%AB%E6%8D%B7%E9%94%AE/#21","title":"2.1 \u89c6\u56fe\u65cb\u8f6c","text":"<ol> <li>\u6309\u4f4f\u9f20\u6807\u4e2d\u952e\uff0c\u79fb\u52a8\u5149\u6807\uff0c\u65cb\u8f6c\u8bd5\u56fe</li> </ol>"},{"location":"Documents/C-Tool/blender/blender%E5%BF%AB%E6%8D%B7%E9%94%AE/#22","title":"2.2 \u89c6\u56fe\u7f29\u653e","text":"<ul> <li>\u65b9\u6cd5\u4e00\uff1a\u6eda\u52a8\u9f20\u6807\u4e2d\u952e\uff08\u6eda\u8f6e\uff09\uff0c\u7f29\u653e\u8bd5\u56fe</li> <li>\u65b9\u6cd5\u4e8c\uff1a\u5148\u6309\u4f4fctrl\u952e\uff0c\u518d\u6309\u4f4f\u9f20\u6807\u4e2d\u952e\uff0c\u79fb\u52a8\u5149\u6807\uff0c\u89c6\u56fe\u7f29\u653e</li> </ul>"},{"location":"Documents/C-Tool/blender/blender%E5%BF%AB%E6%8D%B7%E9%94%AE/#23","title":"2.3 \u8bd5\u56fe\u5e73\u79fb","text":"<ol> <li>\u5148\u6309\u4f4fshift\u952e\uff0c\u518d\u6309\u4f4f\u9f20\u6807\u4e2d\u952e\uff0c\u79fb\u52a8\u5149\u6807\uff0c\u89c6\u56fe\u5e73\u79fb</li> </ol>"},{"location":"Documents/C-Tool/blender/blender%E5%BF%AB%E6%8D%B7%E9%94%AE/#24","title":"2.4 \u8bbe\u7f6e\u89c6\u56fe\u4e2d\u5fc3","text":"<ol> <li>\u6309\u4f4falt\u952e\uff0c\u518d\u9700\u8981\u8bbe\u7f6e\u4e2d\u5fc3\u7684\u5730\u65b9\u6309\u4e0b\u9f20\u6807\u4e2d\u952e\uff0c\u6b64\u65f6\u89c6\u56fe\u4e2d\u5fc3\u53d8\u4e3a\u5f53\u65f6\u5149\u6807\u6307\u793a\u7684\u4f4d\u7f6e\u3002\uff08\u89c6\u89c9\u4e0a\u6709\u660e\u663e\u89c6\u56fe\u79fb\u52a8\uff09</li> </ol>"},{"location":"Documents/C-Tool/blender/blender%E5%BF%AB%E6%8D%B7%E9%94%AE/#_1","title":"\u6a21\u578b","text":"<p>G\u3001R\u3001S\u5206\u522b\u6765\u63a7\u5236\u6a21\u578b\u7684Translate\u3001Rotate\u3001Scale</p>"},{"location":"Documents/C-Tool/blender/blender%E5%BF%AB%E6%8D%B7%E9%94%AE/#1_1","title":"1 \u7269\u4f53\u79fb\u52a8","text":""},{"location":"Documents/C-Tool/blender/blender%E5%BF%AB%E6%8D%B7%E9%94%AE/#11_1","title":"1.1 \u671d\u4efb\u610f\u65b9\u5411\u79fb\u52a8","text":"<ol> <li>\u5148\u9f20\u6807\u9009\u62e9\u7269\u4f53\uff0c\u518d\u6309\u4e0bG\u952e\uff0c\u79fb\u52a8\u5149\u6807\uff0c\u7269\u4f53\u79fb\u52a8\u3002</li> </ol>"},{"location":"Documents/C-Tool/blender/blender%E5%BF%AB%E6%8D%B7%E9%94%AE/#12-xyz","title":"1.2 \u671dX\u3001Y\u3001Z\u65b9\u5411\u79fb\u52a8","text":"<ul> <li>\u65b9\u5f0f\u4e00\uff1a\u518d\u6309\u4e0bG\u952e\u540e\uff0c\u518d\u6309X\uff0c\u5219\u671dX\u65b9\u5411\u79fb\u52a8\uff1b\u6216\u8005\u6309Y\uff0c\u671dY\u65b9\u5411\u79fb\u52a8\uff1b\u6216\u8005\u6309Z\uff0c\u671dZ\u65b9\u5411\u79fb\u52a8\u3002</li> <li>\u65b9\u5f0f\u4e8c\uff1a\u5982\u679c\u8981\u671d2\u4e2a\u65b9\u5411\u79fb\u52a8\uff08X\u3001Y\u3001Z\u4e2d2\u65b9\u5411\u4e2a\uff09\uff0c\u518d\u6309\u4e0bG\u540e\uff0c\u540c\u65f6\u6309shift\u548cX\u952e\uff0c\u671dY\u3001Z\u65b9\u5411\u79fb\u52a8\uff1b\u540c\u65f6\u6309shift\u548cY\u952e\uff0c\u671dX\u3001Z\u65b9\u5411\u79fb\u52a8\uff1b\u540c\u65f6\u6309shift\u548cZ\u952e\uff0c\u671dX\u3001Y\u65b9\u5411\u79fb\u52a8\uff1b</li> </ul>"},{"location":"Documents/C-Tool/blender/blender%E5%BF%AB%E6%8D%B7%E9%94%AE/#2_1","title":"2 \u7269\u4f53\u7f29\u653e","text":""},{"location":"Documents/C-Tool/blender/blender%E5%BF%AB%E6%8D%B7%E9%94%AE/#21_1","title":"2.1 \u671d\u4efb\u610f\u65b9\u5411\u7f29\u653e","text":"<ol> <li>\u5148\u9f20\u6807\u9009\u62e9\u7269\u4f53\uff0c\u518d\u6309\u4e0bS\u952e\uff0c\u79fb\u52a8\u5149\u6807\uff0c\u7269\u4f53\u7f29\u653e\u3002</li> </ol>"},{"location":"Documents/C-Tool/blender/blender%E5%BF%AB%E6%8D%B7%E9%94%AE/#22-xyz","title":"2.2 \u671dX\u3001Y\u3001Z\u65b9\u5411\u7f29\u653e","text":"<ul> <li>\u65b9\u5f0f\u4e00\uff1a\u518d\u6309\u4e0bS\u952e\u540e\uff0c\u518d\u6309X\uff0c\u5219\u671dX\u65b9\u5411\u7f29\u653e\uff1b\u6216\u8005\u6309Y\uff0c\u671dY\u65b9\u5411\u7f29\u653e\uff1b\u6216\u8005\u6309Z\uff0c\u671dZ\u65b9\u5411\u7f29\u653e\u3002</li> <li>\u65b9\u5f0f\u4e8c\uff1a\u5982\u679c\u8981\u671d2\u4e2a\u65b9\u5411\u79fb\u52a8\uff08X\u3001Y\u3001Z\u4e2d2\u65b9\u5411\u4e2a\uff09\uff0c\u5728\u6309\u4e0bS\u540e\uff0c\u540c\u65f6\u6309shift\u548cX\u952e\uff0c\u671dY\u3001Z\u65b9\u5411\u7f29\u653e\uff1b\u540c\u65f6\u6309shift\u548cY\u952e\uff0c\u671dX\u3001Z\u65b9\u5411\u7f29\u653e\uff1b\u540c\u65f6\u6309shift\u548cZ\u952e\uff0c\u671dX\u3001Y\u65b9\u5411\u7f29\u653e\uff1b</li> </ul>"},{"location":"Documents/C-Tool/blender/blender%E5%BF%AB%E6%8D%B7%E9%94%AE/#3","title":"3 \u7f16\u8f91\u6a21\u5f0f","text":""},{"location":"Documents/C-Tool/blender/blender%E5%BF%AB%E6%8D%B7%E9%94%AE/#31","title":"3.1 \u5207\u6362\u70b9\u7ebf\u9762\u9009\u62e9\u6a21\u5f0f","text":"<ul> <li>1\u952e\uff1a\u70b9\u9009\u62e9\u6a21\u5f0f</li> <li>2\u952e\uff1a\u7ebf\u9009\u62e9\u6a21\u5f0f</li> <li>3\u952e\uff1a\u9762\u9009\u62e9\u6a21\u5f0f</li> </ul>"},{"location":"Documents/C-Tool/blender/blender%E5%BF%AB%E6%8D%B7%E9%94%AE/#32","title":"3.2 \u9009\u62e9\u73af\u9762\u3001\u73af\u8fb9","text":"<ul> <li>\u952e3\u5207\u6362\u9762\u9009\u62e9\u6a21\u5f0f\uff0calt+\u9f20\u6807\u5de6\u952e\uff0c\u518d\u70b9\u51fb\u9700\u8981\u9009\u62e9\u7684\u9762\u7684\u8fb9\uff08\u73af\u9762\u65b9\u5411\u7684\u8fb9\uff09\uff0c\u4f1a\u81ea\u52a8\u9009\u62e9\u4e00\u4e2a\u73af\u9762</li> <li>alt+\u9f20\u6807\u5de6\u952e\uff0c\u5728\u70b9\u51fb\u9700\u8981\u9009\u62e9\u8fb9\uff0c\u4f1a\u81ea\u52a8\u9009\u62e9\u4e00\u4e2a\u73af\u8fb9</li> </ul>"},{"location":"Documents/C-Tool/docker/Docker%20Compose/","title":"Docker Compose","text":"<p>Compose \u662f\u7528\u4e8e\u5b9a\u4e49\u548c\u8fd0\u884c\u591a\u5bb9\u5668 Docker \u5e94\u7528\u7a0b\u5e8f\u7684\u5de5\u5177\u3002\u901a\u8fc7 Compose\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 YML \u6587\u4ef6\u6765\u914d\u7f6e\u5e94\u7528\u7a0b\u5e8f\u9700\u8981\u7684\u6240\u6709\u670d\u52a1\u3002\u7136\u540e\uff0c\u4f7f\u7528\u4e00\u4e2a\u547d\u4ee4\uff0c\u5c31\u53ef\u4ee5\u4ece YML \u6587\u4ef6\u914d\u7f6e\u4e2d\u521b\u5efa\u5e76\u542f\u52a8\u6240\u6709\u670d\u52a1\u3002</p>"},{"location":"Documents/C-Tool/docker/Docker/","title":"Docker","text":"<ul> <li>\u5b98\u65b9\u6587\u6863</li> </ul>"},{"location":"Documents/C-Tool/docker/Docker/#1","title":"1 \u5bb9\u5668\u547d\u4ee4","text":"<pre><code># search\u955c\u50cf\ndocter search centos\n# images \u67e5\u770b\u955c\u50cf\ndocker images\n# pull\u955c\u50cf\ndocker pull centos:centos7\n# run\u955c\u50cf\ndocker run --name centos7 -it centos:centos7\n# \u9000\u51fa\u955c\u50cf,\u5728\u5bb9\u5668\u5185\u90e8\u9000\u51fa\nexit\n# ps\u67e5\u8be2\u5bb9\u5668\u4fe1\u606f \uff0c\u5bb9\u5668id=f0cbcec9bdce\ndocker ps -a\n# stop\u955c\u50cf\ndocker stop f0cbcec9bdce\n# start\u955c\u50cf\ndocker start f0cbcec9bdce\n# attach\u955c\u50cf\ndocker attach f0cbcec9bdce\n# rm\u5bb9\u5668\ndocker rm f0cbcec9bdce\n# rmi\u955c\u50cf\ndocker rmi centos:centos7\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#11-ps","title":"1.1 ps","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793a\u5bb9\u5668\u4fe1\u606f</li> <li>\u8bed\u6cd5\uff1a<code>docker ps [OPTIONS]</code><ul> <li><code>-a</code>\uff1a\u663e\u793a\u6240\u6709\u5bb9\u5668\u5305\u62ecExited\u72b6\u6001\u7684</li> <li><code>-q</code>\uff1a\u4ec5\u4ec5\u663e\u793a\u5bb9\u5668id</li> <li><code>-n num</code>\uff1a\u9650\u5236\u663e\u793a\u7684\u6570\u91cf</li> <li><code>-l</code>\uff1a\u663e\u793a\u6700\u665a\u521b\u5efa\u7684\u4e00\u4e2a\u5bb9\u5668</li> </ul> </li> </ul>"},{"location":"Documents/C-Tool/docker/Docker/#12-rm","title":"1.2 rm","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>docker rm [OPTIONS] CONTAINER [CONTAINER...]</code></li> <li><code>-f</code>:\u5f3a\u5236\u5220\u9664\uff08\u6bd4\u5982\uff0c\u5f53\u5bb9\u5668\u6b63\u5728\u8fd0\u884c\u65f6\u4f1a\u62d2\u7edd\u5220\u9664\uff09</li> <li>\u529f\u80fd\uff1a\u5220\u9664\u4e00\u4e2a\u6216\u591a\u4e2a\u5bb9\u5668</li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ docker rm  centos7\ncentos7\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#13-run","title":"1.3 run","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>docker run [OPTIONS] IMAGE [COMMAND] [ARG...]</code></li> <li><code>-a</code>:\u9644\u52a0\u5230<code>STDIN</code>, <code>STDOUT</code>\u6216<code>STDERR</code>\u4e0a\uff0c\u9ed8\u8ba4\u5168\u90e8\u9644\u52a0</li> <li><code>-i</code>\u3001<code>-t</code>:<code>-i</code>\u4fdd\u6301\u8ddf\u5bb9\u5668\u7684\u4ea4\u4e92\uff08stdin\uff09,<code>-t</code>\u5206\u914d\u7ec8\u7aeftty\uff1b\u901a\u5e38\u4e00\u8d77\u4f7f\u7528\uff0c\u4f7f\u5bb9\u5668\u5728\u524d\u53f0\u8fd0\u884c</li> <li><code>-d</code>:\u8ba9\u5bb9\u5668\u540e\u53f0\u8fd0\u884c\uff0c\u5e76\u6253\u5370\u5bb9\u5668id\uff0c\u4e0e<code>-it</code>\u524d\u53f0\u8fd0\u884c\u76f8\u53cd</li> <li><code>-e</code>:\u7ed9\u5bb9\u5668\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf</li> <li><code>--env-file [file-path]</code>:\u5c06\u6307\u5b9a\u6587\u4ef6\u5185\u7684\u73af\u5883\u53d8\u91cf\u7ed9\u5bb9\u5668</li> <li><code>--name [string]</code>:\u7ed9\u5bb9\u5668\u5206\u914d\u540d\u5b57\uff0c\u5982\u4e0d\u6307\u5b9a\uff0c\u4f1a\u81ea\u52a8\u751f\u6210\u4e00\u4e2a</li> <li><code>--rm</code>:\u9000\u51fa\u5bb9\u5668\u65f6\u81ea\u52a8\u5220\u9664\u5bb9\u5668\uff0c\u9ed8\u8ba4\u4ece\u5bb9\u5668\u5185\u90e8\u9000\u51fa\uff0c\u5bb9\u5668\u662fexited\u72b6\u6001\u4e14\u4e0d\u4f1a\u88ab\u5220\u9664</li> <li><code>--cidfile [string]</code>:\u6253\u5370\u5bb9\u5668id\u5230\u672c\u5730\u6307\u5b9a\u6587\u4ef6\u4e2d</li> <li><code>-w [path]</code>:\u8bbe\u7f6e\u5bb9\u5668\u5185\u5de5\u4f5c\u76ee\u5f55</li> <li><code>-v [\u672c\u5730\u76ee\u5f55]:[\u5bb9\u5668\u76ee\u5f55]</code>:\u5c06\u672c\u5730\u76ee\u5f55\u4e0e\u5bb9\u5668\u76ee\u5f55\u7ed1\u5b9a\uff0c\u5bb9\u5668\u548c\u672c\u5730\u4e2d\u7684\u6b64\u76ee\u5f55\u6570\u636e\u5171\u4eab</li> <li><code>--read-only</code>:\u9664\u4e86<code>-v</code>\u6302\u8f7d\u7684\u76ee\u5f55\uff0c\u5bb9\u5668\u5185\u5176\u5b83\u76ee\u5f55\u90fd\u4e0d\u53ef\u4ee5\u5199\uff0c\u53ea\u80fd\u8bfb</li> <li><code>-p [ip]:[\u672c\u5730\u7aef\u53e3]:[\u5bb9\u5668\u7aef\u53e3]</code>:\u5c06\u5bb9\u5668\u7aef\u53e3\u66b4\u9732\u5728\u6307\u5b9a\u7684\u672c\u5730\u7aef\u53e3\u4e0a\uff0cip\u53ef\u4ee5\u7701\u7565</li> <li>\u793a\u4f8b1: <code>-it</code>\u524d\u53f0\u8fd0\u884c\uff0c<code>-a</code>\u6307\u5b9a\u9644\u52a0stdin\u3001stdout</li> </ul> <pre><code>$ docker run -a stdin -a stdout -it ubuntu:20.04 /bin/bash\nroot@bc922be36071:/# ls\nbin  boot  dev  etc  home  lib  lib32  lib64  libx32  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var\nroot@bc922be36071:/# exit\nexit\n</code></pre> <ul> <li>\u793a\u4f8b2\uff1a<code>-e</code>\u7ed9\u5bb9\u5668\u4f20\u73af\u5883\u53d8\u91cf</li> </ul> <pre><code>~$ docker run -it --rm -e BB=hello ubuntu:20.04 /bin/bash\nroot@33c1c21f1f11:/# echo $BB\nhello\n</code></pre> <ul> <li>\u793a\u4f8b3\uff1a<code>--cidfile</code>\u6253\u5370\u5bb9\u5668id\u5230\u6307\u5b9a\u6587\u4ef6</li> </ul> <pre><code>$ docker run --cidfile docker_id.txt ubuntu:20.04 echo \"test\"\ntest\n$ cat docker_id.txt\ne8a53390efd5f0420317468f64657f503e3e3e7e20387f8ca19a3d07d96ca4df\n</code></pre> <ul> <li>\u793a\u4f8b4\uff1a<code>-w</code>\u8bbe\u7f6e\u5de5\u4f5c\u76ee\u5f55</li> </ul> <pre><code>$ docker run -it --rm -w /dev ubuntu:20.04\nroot@9956dd002094:/dev#\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#131-v","title":"1.3.1 \u5377\u6302\u8f7d-v","text":"<ul> <li>\u793a\u4f8b\uff1a<code>-v</code>\u6302\u8f7d\u6570\u636e\u5377,\u53ef\u4ee5\u770b\u5230\uff0cxxx\u76ee\u5f55\u6709\u4e86code\u76ee\u5f55\u4e0b\u5185\u5bb9</li> </ul> <pre><code>~$ docker run -it -v /home/shw/code:/home/xxx ubuntu:20.04 /bin/bash\nroot@49087e5880b0:/# cd /home\nroot@49087e5880b0:/home# ls\nxxx\nroot@49087e5880b0:/home# cd xxx\nroot@49087e5880b0:/home/xxx# ls\na.out  fun.bin  fun.sh  fun.sh.x.c  levelDB  test1.cc  test_nice.cc\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#132-p-p","title":"1.3.2 \u6620\u5c04\u5bbf\u4e3b\u673a\u7aef\u53e3-p\u548c-P","text":"<pre><code>title: \u5bb9\u5668\u7aef\u53e3\u6620\u5c04\u5bbf\u4e3b\u673a\u7aef\u53e3\u4f5c\u7528\uff1f\n\u901a\u8fc7\u5bbf\u4e3b\u673a\u7aef\u53e3\u6620\u5c04\uff0c\u53ef\u4ee5\u901a\u8fc7\u5bbf\u4e3b\u673aip+\u6620\u5c04port\u6765\u8bbf\u95ee\u5bb9\u5668\u3002\u8fd9\u6837\u5728docker\u6240\u5728\u4e3b\u673a\u4e4b\u5916\uff0c\u5c31\u80fd\u901a\u8fc7\u5bbf\u4e3b\u673a\u6765\u8bbf\u95ee\u5bb9\u5668\u3002\n</code></pre> <ul> <li>\u8bed\u6cd5\u5f62\u5f0f:</li> <li><code>-p [ip]:[\u672c\u5730\u7aef\u53e3]:[\u5bb9\u5668\u7aef\u53e3]</code></li> <li><code>-P</code>:\u81ea\u52a8\u6620\u5c04\u5bb9\u5668\u5185\u6240\u6709\u7f51\u7edc\u7aef\u53e3\uff0c\u9700\u8981\u5728dockerfile\u91cc\u9762EXPOSE\u58f0\u660e</li> </ul>"},{"location":"Documents/C-Tool/docker/Docker/#1321","title":"1.3.2.1 \u81ea\u52a8\u6620\u5c04\u5bb9\u5668\u5185\u6240\u6709\u7f51\u7edc\u7aef\u53e3","text":"<ul> <li>\u8fd9\u4f1a\u968f\u673a\u7684\u9009\u62e9\u672c\u5730\u4e00\u4e2a\u7aef\u53e3\u4e0e\u5bb9\u5668\u5185\u7aef\u53e3\u5173\u8054</li> </ul> <pre><code>$ docker run -d -P nginx\nd76bb3bec303f06cd5480f11342f4e920f67b30d2af5e35c14660bd8f18447b5\n$ docker ps\nCONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS                   NAMES\nd76bb3bec303   nginx     \"/docker-entrypoint.\u2026\"   2 minutes ago   Up 2 minutes   0.0.0.0:49153-&gt;80/tcp   magical_austin\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#1322-ip","title":"1.3.2.2 \u6307\u5b9aip\u548c\u7aef\u53e3","text":"<ul> <li>ip\u53ef\u4ee5\u5ffd\u7565</li> </ul> <pre><code>$ docker run -d -p 127.0.0.1:8080:80 nginx\nac0173b4fe93d40cfe127fa72a7f58465d205900abfcfc080e141ea89613a657\n$ docker ps\nCONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS                    NAMES\nac0173b4fe93   nginx     \"/docker-entrypoint.\u2026\"   5 seconds ago   Up 2 seconds   127.0.0.1:8080-&gt;80/tcp   heuristic_elbakyan\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#133-network","title":"1.3.3 \u7f51\u7edc\u7c7b\u578b--network","text":"<ul> <li><code>host</code>\uff1a\u5bb9\u5668\u4f7f\u7528\u548c\u5bbf\u4e3b\u673a\u76f8\u540c\u7684\u7f51\u7edc\u3002\uff08ip\u76f8\u540c\uff0chostname\u3001hostid\u76f8\u540c\uff09</li> <li><code>bridge(open)</code>\uff1a\u5bb9\u5668\u7f51\u7edc\u548c\u5bbf\u4e3b\u673a\u4e0d\u540c\u3002\uff08ip\u4e0d\u540c\uff0chostname\u3001hostid\u4e0d\u540c\uff09</li> <li><code>Container(join)</code> \uff1a\u8054\u5408\u6302\u8f7d\u5f0f\u7f51\u7edc\u6a21\u5f0f\uff0c\u548c\u5176\u4ed6\u5bb9\u5668\u5171\u4eab\u7f51\u7edc</li> <li><code>None(Close)</code> \uff1a\u5c01\u95ed\u5f0f\u7f51\u7edc\u6a21\u5f0f\uff0c\u4e0d\u4e3a\u5bb9\u5668\u914d\u7f6e\u7f51\u7edc</li> </ul>"},{"location":"Documents/C-Tool/docker/Docker/#14-exec","title":"1.4 exec","text":"<ul> <li>\u529f\u80fd\uff1a\u5728running\u72b6\u6001\u7684\u5bb9\u5668\u4e0a\u6267\u884c\u547d\u4ee4</li> <li>\u8bed\u6cd5\uff1a<code>docker exec [OPTIONS] CONTAINER COMMAND [ARG...]</code><ul> <li><code>-e variable=value</code>\uff1a\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf</li> <li><code>-w dir</code>\uff1a\u8bbe\u7f6e\u5de5\u4f5c\u76ee\u5f55</li> <li><code>-it</code>\uff1a\u5206\u914dtty\u5df2\u7ecf\u9644\u52a0\u5230\u6807\u51c6\u8f93\u5165\uff0c\u901a\u5e38\u7528\u4e8e\u8fdb\u5165\u5bb9\u5668</li> <li><code>--privileged</code>\uff1a\u7ed9\u4e88\u989d\u5916\u6743\u9650</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 ~]# docker exec -it nginx01 /bin/bash\nroot@53e252620494:/# pwd\n/\n[root@centos7 ~]# docker exec -e dir=/root nginx01 sh -c \"echo \\$dir\"\n/root\n[root@centos7 ~]# docker exec -w /root nginx01 sh -c \"pwd\"\n/root\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#15-start","title":"1.5 start","text":"<ul> <li>\u529f\u80fd\uff1a\u5c06Exited\u72b6\u6001\u7684\u5bb9\u5668\u542f\u52a8</li> <li>\u8bed\u6cd5\uff1a<code>docker start [OPTIONS] CONTAINER [CONTAINER...]</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 ~]# docker start nginx01\nnginx01\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#16-restart","title":"1.6 restart","text":"<ul> <li>\u529f\u80fd\uff1a\u91cd\u542f\u5bb9\u5668</li> <li>\u8bed\u6cd5\uff1a<code>docker restart [OPTIONS] CONTAINER [CONTAINER...</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 ~]# docker restart nginx01\nnginx01\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#17-logs","title":"1.7 logs","text":"<pre><code>title: logs\u7684\u5b9e\u73b0\u539f\u7406\uff1f\ndocker logs\u4f1a\u91c7\u96c6\u5bb9\u5668\u5185\u6240\u4ee5\u8fdb\u7a0b\u8f93\u51fa\u5230stdout\u4e0a\u7684\u5185\u5bb9\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u5728\u5f00\u53d1\u7684\u955c\u50cf\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u6253\u5370\u4fe1\u606f\u5230stdout\u6765\u8fbe\u5230\u83b7\u53d6\u5bb9\u5668\u8fd0\u884c\u72b6\u6001\u7684\u76ee\u7684\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>$ docker logs \u955c\u50cfid\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#18-rename","title":"1.8 rename","text":"<ul> <li>\u529f\u80fd\uff1a\u91cd\u547d\u540d\u5bb9\u5668\u540d</li> <li>\u8bed\u6cd5\uff1a<code>docker rename CONTAINER NEW_NAME</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 ~]# docker rename nginx02 nginx01\n[root@centos7 ~]# docker ps\nCONTAINER ID   IMAGE        COMMAND                  CREATED        STATUS          PORTS                                       NAMES\n53e252620494   nginx:1.23   \"/docker-entrypoint.\u2026\"   19 hours ago   Up 28 seconds   0.0.0.0:49153-&gt;80/tcp, :::49153-&gt;80/tcp     nginx01\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#19-cp","title":"1.9 cp","text":"<ul> <li>\u529f\u80fd\uff1a\u518d\u5bbf\u4e3b\u673a\u548c\u5bb9\u5668\u95f4\u62f7\u8d1d\u6587\u4ef6</li> <li>\u8bed\u6cd5\uff1a<ul> <li><code>docker cp [OPTIONS] CONTAINER:SRC_PATH DEST_PATH</code>\uff1a\u4ece\u5bb9\u5668\u62f7\u8d1d\u5230\u5bbf\u4e3b\u673a</li> <li><code>docker cp [OPTIONS] SRC_PATH CONTAINER:DEST_PATH</code>\uff1a\u4ece\u5bbf\u4e3b\u673a\u62f7\u8d1d\u5230\u5bb9\u5668</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 ~]# docker cp  nginx01:/docker-entrypoint.sh ./\n[root@centos7 ~]# ls\nanaconda-ks.cfg  docker-entrypoint.sh\n[root@centos7 ~]# docker cp file1 nginx01:/\n[root@centos7 ~]# docker exec -it nginx01  cat /file1\nhello\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#110-attach","title":"1.10 attach","text":"<pre><code>title: attach\u5bb9\u5668\u540e\u600e\u4e48\u9000\u51fa\uff1f\n1. \u5f53run\u5bb9\u5668\u65f6\u6307\u5b9a\u4e86`-it`\u53c2\u6570\u65f6\uff0c\u53ef\u4ee5\u662f\u5440`ctrl+p+q`detach\n2. \u5176\u5b83\u60c5\u51b5\uff0c\u53ea\u80fd`ctrl+c`stop\u5bb9\u5668\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u9644\u52a0\u5bbf\u4e3b\u673a\u7684\u6807\u51c6input, output, and error streams t\u5230\u8fd0\u884c\u7684\u5bb9\u5668</li> <li>\u8bed\u6cd5\uff1a<code>docker attach [OPTIONS] CONTAINER</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code># attach\u540e\uff0c\u901a\u8fc7curl \u547d\u4ee4\u8bbf\u95eenginx\uff0c\u5c06\u4f1a\u6253\u5370\u4e0b\u9762\u7684\u4fe1\u606f\n[root@centos7 ~]# docker attach nginx01\n172.17.0.1 - - [19/Jul/2022:10:45:21 +0000] \"GET / HTTP/1.1\" 200 615 \"-\" \"curl/7.29.0\" \"-\"\n2022/07/19 10:45:23 [notice] 1#1: signal 28 (SIGWINCH) received\n2022/07/19 10:45:23 [notice] 1#1: signal 28 (SIGWINCH) received\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#111-port","title":"1.11 port","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793a\u5bb9\u5668\u7aef\u53e3\u6620\u5c04</li> <li>\u8bed\u6cd5\uff1a<code>docker port CONTAINER [PRIVATE_PORT[/PROTO]]</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 cheat]# docker port nginx01\n80/tcp -&gt; 0.0.0.0:49153\n80/tcp -&gt; :::49153\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#112-top","title":"1.12 top","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793a\u5bb9\u5668\u91cc\u9762\u6b63\u5728\u8fd0\u884c\u7684\u8fdb\u7a0b</li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 ~]# docker top nginx01\nUID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD\nroot                4771                4750                0                   15:14               ?                   00:00:00            nginx: master process nginx -g daemon off;\n101                 4814                4771                0                   15:14               ?                   00:00:00            nginx: worker process\n101                 4815                4771                0                   15:14               ?                   00:00:00            nginx: worker process\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#2-network","title":"2 network\u547d\u4ee4","text":"<ul> <li>\u529f\u80fd\uff1a\u5bb9\u5668\u7684\u7f51\u7edc\u64cd\u4f5c\uff0c\u5305\u62ec\u7f51\u7edc\u521b\u5efa\u3001\u5bb9\u5668\u95f4\u7f51\u7edc\u8054\u901a</li> <li>\u8bed\u6cd5\uff1a<code>docker network COMMAND</code></li> <li><code>ls</code>:\u663e\u793a\u7f51\u7edc</li> <li><code>rm</code>:\u5220\u9664\u7f51\u7edc</li> <li><code>create</code>\uff1a\u521b\u5efa\u4e00\u4e2a\u7f51\u7edc</li> <li><code>connect</code>\uff1a\u5bb9\u5668\u8fde\u63a5\u5230\u67d0\u4e2a\u7f51\u7edc\u4e0a</li> <li><code>disconnect</code>\uff1a\u5bb9\u5668\u505c\u6b62\u8fde\u63a5\u5230\u67d0\u4e2a\u7f51\u7edc</li> <li>\u793a\u4f8b\uff1a\u663e\u793a\u7f51\u7edc\u4fe1\u606f</li> </ul> <pre><code>$ docker network ls\nNETWORK ID     NAME      DRIVER    SCOPE\n5166c0a84f04   bridge    bridge    local\nafb60ed16654   host      host      local\nb4c95b7a7147   none      null      local\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#21","title":"2.1 \u521b\u5efa\u7f51\u7edc","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>docker network create [OPTIONS] NETWORK</code></li> <li><code>-d[--driver] string</code>:\u6307\u5b9a\u7f51\u7edc\u7c7b\u578b\uff0c\u9ed8\u8ba4<code>bridge</code></li> <li><code>--subnet</code>\uff1a\u7f51\u7edc\u6bb5</li> <li><code>--gateway</code>\uff1a\u7f51\u5173</li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ docker network create -d bridge --subnet 192.168.0.0/16 --gateway 192.168.0.1 myn\net\n1b52c8c2216dcf3224ada60de04f4e3668a1bda9f447b6003fab20c1049e49f7\n$ docker network ls\nNETWORK ID     NAME      DRIVER    SCOPE\n5166c0a84f04   bridge    bridge    local\nafb60ed16654   host      host      local\n1b52c8c2216d   mynet     bridge    local\nb4c95b7a7147   none      null      local\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#22","title":"2.2 \u8fde\u63a5\u7f51\u7edc","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>docker network connect [OPTIONS] NETWORK CONTAINER</code></li> <li><code>ip</code>: IPv4 address (e.g., 172.30.100.104)</li> <li><code>ip6</code>\uff1aIPv6 address (e.g., 2001:db8::33)</li> <li>\u793a\u4f8b:\u5c06\u5bb9\u5668tomcat-03\u8fde\u63a5\u5230\u7f51\u7edcmynet\u4e2d</li> </ul> <pre><code>$ docker network connect mynet tomcat-03\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#3","title":"3 \u955c\u50cf\u547d\u4ee4","text":""},{"location":"Documents/C-Tool/docker/Docker/#31-search","title":"3.1 search","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>docker search [OPTIONS] TERM</code></li> <li><code>--limit int</code>\uff1a\u9650\u5236\u67e5\u8be2\u7ed3\u679c\u6570\u91cf\uff0c\u9ed8\u8ba4\u6700\u591a\u663e\u793a25\u6761</li> <li>\u529f\u80fd\uff1a\u4eceDocker Hub\u4e0a\u67e5\u627e\u955c\u50cf1</li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ docker search --limit 3 centos\nNAME                      DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED\ncentos                    The official build of CentOS.                   6802      [OK] \nansible/centos7-ansible   Ansible on Centos7                              135                  [OK]\njdeathe/centos-ssh        OpenSSH / Supervisor / EPEL/IUS/SCL Repos - \u2026   121                  [OK]\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#32-images","title":"3.2 images","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>docker images [OPTIONS] [REPOSITORY[:TAG]]</code></li> <li><code>-a</code>\uff1a\u663e\u793a\u6240\u6709\u955c\u50cf\uff08\u9ed8\u8ba4\uff09</li> <li><code>-q</code>\uff1a\u53ea\u663e\u793a\u955c\u50cfid</li> <li>\u529f\u80fd\uff1a\u663e\u793a\u955c\u50cf\u5217\u8868</li> <li>\u793a\u4f8b</li> </ul> <pre><code># \u9ed8\u8ba4\u663e\u793a\n--all\nREPOSITORY          TAG                     IMAGE ID       CREATED        SIZE\ncentos              centos7                 eeb6ee3f44bd   4 weeks ago    204MB\n# \u663e\u793a\u955c\u50cfid\n$ docker images -q\neeb6ee3f44bd\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#33-image","title":"3.3 image","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>docker image COMMAND</code></li> <li><code>ls</code>\uff1a\u663e\u793a\u955c\u50cf\uff0c\u548c<code>docker imasges</code>\u7c7b\u4f3c</li> <li><code>build</code>\uff1a\u4eceDockerfile\u4e2d\u6784\u5efa\u955c\u50cf</li> <li><code>pull</code>\uff1a\u4ece\u955c\u50cf\u5e93\u62c9\u53d6\u955c\u50cf</li> <li><code>push</code>\uff1a\u63d0\u4ea4\u955c\u50cf\u5230\u955c\u50cf\u5e93</li> <li><code>rm</code>\uff1a\u5220\u9664\u955c\u50cf</li> <li><code>load</code>\uff1a\u4ecetar\u5305\u4e2d\u52a0\u8f7d\u955c\u50cf</li> <li><code>save</code>\uff1a\u4fdd\u5b58\u955c\u50cf\u5230tar\u5305\u4e2d</li> <li><code>tag</code>\uff1a\u521b\u5efa\u4e2a\u65b0\u955c\u50cf\u5e76\u6253\u4e2a\u6807\u7b7e</li> <li>\u529f\u80fd\uff1a\u6267\u884c\u955c\u50cf\u76f8\u5173\u64cd\u4f5c</li> </ul>"},{"location":"Documents/C-Tool/docker/Docker/#34-pull","title":"3.4 pull","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>docker pull [OPTIONS] [\u955c\u50cf\u4ed3\u5e93\u5730\u5740[:\u7aef\u53e3\u53f7]/]\u4ed3\u5e93\u540d[:TAG|@DIGEST]</code></li> <li>Docker \u955c\u50cf\u4ed3\u5e93\u5730\u5740\uff1a\u5730\u5740\u7684\u683c\u5f0f\u4e00\u822c\u662f &lt;\u57df\u540d/IP&gt;[:\u7aef\u53e3\u53f7]\u3002\u9ed8\u8ba4\u5730\u5740\u662f Docker Hub(docker.io)\u3002</li> <li>\u4ed3\u5e93\u540d\uff1a\u5982\u4e4b\u524d\u6240\u8bf4\uff0c\u8fd9\u91cc\u7684\u4ed3\u5e93\u540d\u662f\u4e24\u6bb5\u5f0f\u540d\u79f0\uff0c\u5373 &lt;\u7528\u6237\u540d&gt;/&lt;\u8f6f\u4ef6\u540d&gt;\u3002\u5bf9\u4e8e Docker Hub\uff0c\u5982\u679c\u4e0d\u7ed9\u51fa\u7528\u6237\u540d\uff0c\u5219\u9ed8\u8ba4\u4e3a library\uff0c\u4e5f\u5c31\u662f\u5b98\u65b9\u955c\u50cf</li> <li><code>-a</code>\uff1a\u4e0b\u8f7d\u955c\u50cf\u7684\u6240\u6709tag\u7248\u672c\uff08\u8c28\u614e\u4f7f\u7528\uff09</li> <li><code>-q</code>\uff1a\u7981\u6b62\u8be6\u7ec6\u8f93\u51fa\uff08\u4e00\u822c\u4e0d\u7528\uff09</li> <li>\u529f\u80fd\uff1a\u4ece\u955c\u50cf\u4ed3\u5e93\u4e0b\u8f7d\u955c\u50cf\u5230\u672c\u5730</li> <li>\u5982\u679c\u4e0d\u6307\u5b9a\u6807\u7b7e\uff0c\u9ed8\u8ba4\u4f1a\u4e0b\u8f7dtag\u672alatest\u7248\u672c</li> <li>\u5982\u679c\u4e0d\u77e5\u9053\u4ed3\u5e93\u5730\u5740\uff0c\u9ed8\u8ba4\u4ece<code>docker.io/library/</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code># \u6307\u5b9atag\u4e3acentos7\u7248\u672c\n$ docker pull centos:centos7\n# \u9ed8\u8ba4latest\u7248\u672c\n$ docker pull centos\nUsing default tag: latest\n$ docker pull ubuntu:18.04\n18.04: Pulling from library/ubuntu\n92dc2a97ff99: Pull complete\nbe13a9d27eb8: Pull complete\nc8299583700a: Pull complete\nDigest: sha256:4bc3ae6596938cb0d9e5ac51a1152ec9dcac2a1c50829c74abd9c4361e321b26\nStatus: Downloaded newer image for ubuntu:18.04\ndocker.io/library/ubuntu:18.04\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#35-rmi","title":"3.5 rmi","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>docker rmi [OPTIONS] IMAGE [IMAGE...]</code></li> <li><code>-f</code>\uff1a\u5f3a\u5236\u5220\u9664\u955c\u50cf\uff08\u6bd4\u5982\u5f53\u955c\u50cf\u7684\u5bb9\u5668\u8fd8\u5b58\u5728\u4f1a\u62d2\u7edd\u6267\u884c\uff09</li> <li>\u529f\u80fd\uff1a\u5220\u9664\u4e00\u4e2a\u6216\u591a\u4e2a\u672c\u5730\u955c\u50cf</li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ docker rmi  eeb6ee3f44bd\nError response from daemon: conflict: unable to delete eeb6ee3f44bd (must be forced) - image is being used by stopped container f0cbcec9bdce\n$ docker rmi  -f eeb6ee3f44bd\nUntagged: centos:centos7\nUntagged: centos@sha256:9d4bcbbb213dfd745b58be38b13b996ebb5ac315fe75711bd618426a630e0987\nDeleted: sha256:eeb6ee3f44bd0b5103bb561b4c16bcb82328cfe5809ab675bb17ab3a16c517c9\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#36-build","title":"3.6 build","text":"<ul> <li>\u529f\u80fd\uff1a\u4ece\u5bb9\u5668\u6784\u5efa\u955c\u50cf</li> <li>\u8bed\u6cd5\uff1a<code>docker build [OPTIONS] PATH | URL | -</code></li> </ul>"},{"location":"Documents/C-Tool/docker/Docker/#37-save","title":"3.7 save","text":"<ul> <li>\u529f\u80fd\uff1a\u5c06\u955c\u50cf\u4fdd\u5b58\u4e3atar\u5305\uff08\u901a\u5e38\u7528\u4e8e\u955c\u50cf\u8fc1\u79fb\uff09</li> <li>\u8bed\u6cd5\uff1a\u5e38\u7528\u4ee5\u4e0b2\u79cd\u8bed\u6cd5<ul> <li><code>docker save -o image.tar IMAGE</code></li> <li><code>docker save IMAGE &gt; image.tar</code></li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 ~]# docker image ls nginx\nREPOSITORY   TAG       IMAGE ID       CREATED      SIZE\nnginx        1.23      41b0e86104ba   8 days ago   142MB\n[root@centos7 ~]# docker save nginx:1.23 &gt;nginx.tar\n[root@centos7 ~]# ls nginx.tar \nnginx.tar\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#38-load","title":"3.8 load","text":"<ul> <li>\u529f\u80fd\uff1a\u4ecetar\u6587\u4ef6\u4e2d\u52a0\u8f7d\u955c\u50cf</li> <li>\u8bed\u6cd5\uff1a\u5e38\u7528\u4ee5\u4e0b2\u79cd\u8bed\u6cd5<ul> <li><code>docker load -i image.tar</code></li> <li><code>docker load &lt; image.tar</code></li> </ul> </li> </ul>"},{"location":"Documents/C-Tool/docker/Docker/#39-tag","title":"3.9 tag","text":"<pre><code>tag\u4e0d\u4ec5\u53ef\u4ee5\u4fee\u6539tag\uff0c\u4e5f\u53ef\u4ee5\u4fee\u6539\u955c\u50cf\u540d\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u7ed9\u955c\u50cf\u6253\u4e0atag\u6807\u7b7e</li> <li>\u8bed\u6cd5\uff1a<code>docker tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 ~]# docker tag nginx:1.23 mynginx:1.0\n[root@centos7 ~]# docker images\nREPOSITORY                     TAG       IMAGE ID       CREATED        SIZE\nmynginx                        1.0       41b0e86104ba   8 days ago     142MB\nnginx                          1.23      41b0e86104ba   8 days ago     142MB\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#310-history","title":"3.10 history","text":"<ul> <li>\u529f\u80fd\uff1a\u67e5\u770b\u955c\u50cf\u5404\u5c42\u4fe1\u606f</li> <li>\u8bed\u6cd5\uff1a<code>docker history [OPTIONS] IMAGE</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 ~]# docker history  nginx:1.23\nIMAGE          CREATED      CREATED BY                                      SIZE      COMMENT\n41b0e86104ba   6 days ago   /bin/sh -c #(nop)  CMD [\"nginx\" \"-g\" \"daemon\u2026   0B        \n&lt;missing&gt;      6 days ago   /bin/sh -c #(nop)  STOPSIGNAL SIGQUIT           0B        \n&lt;missing&gt;      6 days ago   /bin/sh -c #(nop)  EXPOSE 80                    0B        \n&lt;missing&gt;      6 days ago   /bin/sh -c #(nop)  ENTRYPOINT [\"/docker-entr\u2026   0B        \n&lt;missing&gt;      6 days ago   /bin/sh -c #(nop) COPY file:09a214a3e07c919a\u2026   4.61kB    \n&lt;missing&gt;      6 days ago   /bin/sh -c #(nop) COPY file:0fd5fca330dcd6a7\u2026   1.04kB    \n&lt;missing&gt;      6 days ago   /bin/sh -c #(nop) COPY file:0b866ff3fc1ef5b0\u2026   1.96kB    \n&lt;missing&gt;      6 days ago   /bin/sh -c #(nop) COPY file:65504f71f5855ca0\u2026   1.2kB     \n&lt;missing&gt;      6 days ago   /bin/sh -c set -x     &amp;&amp; addgroup --system -\u2026   61.1MB    \n&lt;missing&gt;      6 days ago   /bin/sh -c #(nop)  ENV PKG_RELEASE=1~bullseye   0B        \n&lt;missing&gt;      6 days ago   /bin/sh -c #(nop)  ENV NJS_VERSION=0.7.5        0B        \n&lt;missing&gt;      6 days ago   /bin/sh -c #(nop)  ENV NGINX_VERSION=1.23.0     0B        \n&lt;missing&gt;      6 days ago   /bin/sh -c #(nop)  LABEL maintainer=NGINX Do\u2026   0B        \n&lt;missing&gt;      6 days ago   /bin/sh -c #(nop)  CMD [\"bash\"]                 0B        \n&lt;missing&gt;      6 days ago   /bin/sh -c #(nop) ADD file:d978f6d3025a06f51\u2026   80.4MB\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#4-system","title":"4 system\u76f8\u5173\u547d\u4ee4","text":""},{"location":"Documents/C-Tool/docker/Docker/#41-inspect","title":"4.1 inspect","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793a\u5bb9\u5668\u3001\u955c\u50cf\u3001\u7f51\u7edc...\u7684\u8be6\u7ec6\u4fe1\u606f</li> <li>\u8bed\u6cd5\uff1a<code>docker inspect [OPTIONS] NAME|ID [NAME|ID...]</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 ~]# docker network ls\nNETWORK ID     NAME      DRIVER    SCOPE\n036629fb8781   bridge    bridge    local\n935a4c698f1d   host      host      local\n9fa841249a88   none      null      local\n[root@centos7 ~]# docker inspect 036629fb8781\n[\n{\n\"Name\": \"bridge\",\n        \"Id\": \"036629fb87819c40a16afa0cd3d31f0616f6b6059f16179c444b7bc1ebf07df3\",\n        \"Created\": \"2022-07-20T11:32:19.846894222+08:00\",\n...\u7701\u7565...\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#42-system","title":"4.2 system","text":""},{"location":"Documents/C-Tool/docker/Docker/#421-docker-system-df","title":"4.2.1 docker system df","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793a\u78c1\u76d8\u4f7f\u7528\u60c5\u51b5</li> <li>\u8bed\u6cd5\uff1a<code>docker system df [OPTIONS]</code><ul> <li><code>-v</code>\uff1a\u663e\u793a\u8be6\u7ec6\u4fe1\u606f</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 ~]# docker system df\nTYPE            TOTAL     ACTIVE    SIZE      RECLAIMABLE\nImages          2         2         167.8MB   0B (0%)\nContainers      2         2         1.122kB   0B (0%)\nLocal Volumes   1         1         0B        0B\nBuild Cache     0         0         0B        0B\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#422-docker-system-info","title":"4.2.2 docker system info","text":"<ul> <li>\u4f5c\u7528\u540c<code>docker info</code></li> </ul>"},{"location":"Documents/C-Tool/docker/Docker/#423-docker-system-prune","title":"4.2.3 docker system prune","text":"<ul> <li>\u529f\u80fd\uff1a\u6e05\u7406\u672a\u4f7f\u7528\u7684\u6570\u636e</li> <li>\u8bed\u6cd5\uff1a<code>docker system prune [OPTIONS]</code><ul> <li><code>-a</code>\uff1a\u6e05\u7406\u6240\u6709\u672a\u4f7f\u7528\u7684\u955c\u50cf\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u60ac\u7a7a\u955c\u50cf\uff08\u955c\u50cf\u5217\u8868\u5b57\u6bb5<code>REPOSITORY\u3001TAG \u4e3a&lt;none&gt;</code>)</li> <li><code>--volumes</code>\uff1a\u5220\u9664\u4e0d\u518d\u4f7f\u7528\u7684\u5377\uff08\u9ed8\u8ba4\u4e0d\u5220\u9664\uff09</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 ~]# docker system prune --volume\nunknown flag: --volume\nSee 'docker system prune --help'.\n[root@centos7 ~]# docker system prune --volumes\nWARNING! This will remove:\n  - all stopped containers\n  - all networks not used by at least one container\n  - all volumes not used by at least one container\n  - all dangling images\n  - all dangling build cache\n\nAre you sure you want to continue? [y/N] y\nDeleted Volumes:\n6cd5104992124d2a6de106ef8b9fc46fd3e2034bc9502859c950c446b583b3dd\n11ab59d5af901f6cf2747cb689fb8a6997e988ef61a1bd637a6685cac95c58ac\n\nTotal reclaimed space: 19.89MB\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#43-info","title":"4.3 info","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793adocker\u4fe1\u606f</li> <li>\u8bed\u6cd5\uff1a<code>docker info</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 ~]# docker info\nClient:\n Context:    default\n Debug Mode: false\nPlugins:\n  app: Docker App (Docker Inc., v0.9.1-beta3)\nbuildx: Docker Buildx (Docker Inc., v0.8.2-docker)\nscan: Docker Scan (Docker Inc., v0.17.0)\n\nServer:\n Containers: 2\nRunning: 2\nPaused: 0\nStopped: 0\nImages: 2\n\n...\u7701\u7565...\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#44-stats","title":"4.4 stats","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793a\u5bb9\u5668\u8d44\u6e90\u4f7f\u7528\u7edf\u8ba1\u6570\u636e\u7684\u5b9e\u65f6\u6d41</li> <li>\u8bed\u6cd5\uff1a<code>docker stats [OPTIONS] [CONTAINER...]</code><ul> <li><code>-a</code>\uff1a\u663e\u793a\u6240\u6709\u5bb9\u5668\uff08\u9ed8\u8ba4\u53ea\u663e\u793arunning\u72b6\u6001\u5bb9\u5668\uff09</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@centos7 cheat]# docker stats nginx01\nCONTAINER ID   NAME      CPU %     MEM USAGE / LIMIT     MEM %     NET I/O     BLOCK I/O         PIDS\n53e252620494   nginx01   0.00%     3.156MiB / 972.4MiB   0.32%     656B / 0B   23.6MB / 8.19kB   3\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#dockerfile","title":"Dockerfile","text":"<p>Dockerfile \u662f\u4e00\u4e2a\u7528\u6765\u6784\u5efa\u955c\u50cf\u7684\u6587\u672c\u6587\u4ef6\uff0c\u6587\u672c\u5185\u5bb9\u5305\u542b\u4e86\u4e00\u6761\u6761\u6784\u5efa\u955c\u50cf\u6240\u9700\u7684\u6307\u4ee4\u548c\u8bf4\u660e</p>"},{"location":"Documents/C-Tool/docker/Docker/#1_1","title":"1 \u5e38\u7528\u6307\u4ee4","text":"<pre><code># syntax=docker/dockerfile:1\nFROM ubuntu:18.04\nCOPY . /app\nRUN make /app\nCMD python /app/app.py\n</code></pre> <ul> <li><code>FROM</code>:\u6307\u660e\u57fa\u7840\u955c\u50cf\uff0c\u6bcf\u4e00\u4e2adockeefile\u6587\u4ef6\u90fd\u5fc5\u987b\u4ece<code>FROM</code>\u5f00\u59cb</li> <li><code>COPY</code>:\u4ece\u672c\u5730\u62f7\u8d1d\u6587\u4ef6\u5230\u6307\u5b9a\u7684\u955c\u50cf\u4e2d\u4f4d\u7f6e</li> <li><code>RUN</code>:\u6267\u884c\u547d\u4ee4\u5e76\u521b\u5efa\u65b0\u7684\u955c\u50cf\u5c42\uff0c\u901a\u5e38\u7528\u4e8e\u5b89\u88c5\u8f6f\u4ef6\u5305</li> <li><code>CMD</code>:\u8bbe\u7f6e\u5bb9\u5668\u542f\u52a8\u540e\u9ed8\u8ba4\u6267\u884c\u7684\u547d\u4ee4\uff0c\u4f46\u4f1a\u88ab<code>docker run</code>\u547d\u4ee4\u540e\u9762\u7684\u547d\u4ee4\u884c\u53c2\u6570\u66ff\u6362</li> </ul>"},{"location":"Documents/C-Tool/docker/Docker/#2","title":"2 \u6ce8\u91ca","text":"<pre><code>dockerfile\u7684\u6ce8\u91ca\u540cshell\u811a\u672c\uff0c\u9996\u884c\u5b57\u6bcd#\u8868\u793a\u6ce8\u91ca\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#3-copyadd","title":"3 COPY\u548cADD","text":"<pre><code>title: \u8bed\u6cd5\u683c\u5f0f\n- `ADD [--chown=&lt;user&gt;:&lt;group&gt;] &lt;src&gt;... &lt;dest&gt;`\n- `ADD [--chown=&lt;user&gt;:&lt;group&gt;] [\"&lt;src&gt;\",... \"&lt;dest&gt;\"]`\n- `--chown`\u7528\u4e8e\u4fee\u6539\u6587\u4ef6\u7684\u6240\u5c5e\u7ec4\uff0c\u53ea\u80fd\u7528\u5728linux\u5bb9\u5668\u4e0a\n</code></pre> <pre><code>1. \u5f53\u6e90\u6587\u4ef6\u5e02\u76ee\u5f55\u65f6\uff0c\u4e0d\u662f\u76f4\u63a5\u62f7\u8d1d\u76ee\u5f55\uff0c\u800c\u662f&lt;font color=#FF0211&gt;\u5c06\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u62f7\u8d1d\u5230\u5bb9\u5668\u91cc\u9762&lt;/font&gt;\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u907f\u514d\u62f7\u8d1d\u8fc7\u7a0b\u6c61\u67d3\u76ee\u6807\u76ee\u5f55\n2. COPY\u4e5f\u652f\u6301\u6a21\u7cca\u5339\u914d\uff0c\u5982\uff1a`*`\u3001`?`\uff0c\u89c4\u5219\u53c2\u8003[Go\u5339\u914d\u89c4\u5219](https://pkg.go.dev/path/filepath#Match)\n</code></pre> <ul> <li>\u5f53COPY\u591a\u4e2a\u6587\u4ef6\u65f6\uff0c\u5bb9\u5668\u5185\u76ee\u5f55\u9700\u8981\u4ee5/\u7ed3\u5c3e</li> <li>\u5f53COPY\u7684\u6e90\u8def\u5f84\u662f\u6587\u4ef6\u65f6\uff0c\u76ee\u6807\u8def\u5f84\u4e0d\u4ee5/\u7ed3\u5c3e\uff0c\u5219\u89e3\u6790\u76ee\u6807\u8def\u5f84\u662f\u6587\u4ef6\uff1b\u4ee5/\u7ed3\u5c3e\uff0c\u5219\u89e3\u6790\u76ee\u6807\u8def\u5f84\u4e3a\u76ee\u5f55\uff1b\u5c06\u6e90\u6587\u4ef6\u62f7\u8d1d\u5230\u76ee\u6807\u76ee\u5f55\u4e2d</li> <li>\u5f53COPY\u7684\u6e90\u8def\u5f84\u662f\u76ee\u5f55\u65f6\uff0c\u4e0d\u7ba1\u76ee\u6807\u8def\u5f84\u662f\u5426\u4ee5/\u7ed3\u5c3e\uff0c\u90fd\u4f1a\u628a\u76ee\u6807\u8def\u5f84\u5f53\u6210\u76ee\u5f55\uff1b\u5c06\u6e90\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u62f7\u8d1d\u5230\u76ee\u6807\u76ee\u5f55\u4e0b</li> <li>\u5f53\u6e90\u8def\u5f84\u4e0d\u5b58\u5728\u65f6\u4f1a\u81ea\u52a8\u521b\u5efa</li> <li>\u793a\u4f8b</li> </ul> <pre><code>COPY hom* /mydir/\nCOPY --chown=55:mygroup hom?.txt /mydir/\n</code></pre> <pre><code>title: \u62f7\u8d1d\u591a\u4e2a\u6587\u4ef6\uff0c\u76ee\u6807\u8def\u5f84\u6ca1\u6709\u4ee5/\u7ed3\u5c3e\u9519\u8bef\u63d0\u793a\nWhen using COPY with more than one source file, the destination must be a directory and end with a /\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#4-cmdentrypoint","title":"4 CMD\u548cENTRYPOINT","text":"<pre><code>*\u6ce8\u610f*\uff1a\n- CMD\u6307\u4ee4\u4f1a\u88abrun\u6700\u540e\u7684\u6307\u4ee4\u66ff\u6362\uff0cCMD\u548cENTRYPOINT\u53ea\u80fd\u5b58\u5728\u4e00\u4e2a\uff0c\u5982\u679c\u6709\u591a\u4e2a\uff0c\u6700\u540e\u4e00\u4e2a\u624d\u662f\u6709\u6548\u7684\u3002\n- shell\u811a\u672c\u9996\u884c\u6307\u5b9a\u811a\u672c\u89e3\u91ca\u5668\uff0c\u5982\u6307\u5b9a`#!/usr/bin/bash`,\u5426\u5219docker\u53ef\u80fd\u4f7f\u811a\u672c\u6267\u884c\u5931\u8d25\uff0c\u5bfc\u81f4\u5bb9\u5668\u542f\u52a8\u5931\u8d25\n</code></pre> <ul> <li><code>CMD</code>\u8bed\u6cd5:</li> <li><code>CMD [\"executable\",\"param1\",\"param2\"]</code> (exec\u683c\u5f0f)</li> <li><code>CMD command param1 param2</code> (shell\u683c\u5f0f\uff0c\u9ed8\u8ba4\u4f1a\u88ab\u89e3\u6790\u4e3a<code>sh -c command param1 param2</code>)</li> <li><code>CMD [\"param1\",\"param2\"]</code> (\u5f53\u6709ENTRYPOINT\u65f6\uff0c\u53ea\u4f5c\u4e3aENTRYPOINT\u53c2\u6570\uff0c\u9644\u52a0\u5728ENTRYPOINT\u547d\u4ee4\u540e\u9762)</li> <li><code>ENTRYPOINT</code>\u8bed\u6cd5\uff1a</li> <li><code>ENTRYPOINT [\"executable\", \"param1\", \"param2\"]</code></li> <li><code>ENTRYPOINT command param1 param2</code></li> <li>\u793a\u4f8b1:</li> </ul> <pre><code>FROM ubuntu\nCMD [\"/usr/bin/wc\",\"--help\"]\n</code></pre> <ul> <li>\u793a\u4f8b2</li> </ul> <pre><code>FROM ubuntu\nENTRYPOINT [\"top\", \"-b\"]\nCMD [\"-c\"]\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#5-expose","title":"5 EXPOSE","text":"<pre><code>`EXPOSE` \u6307\u4ee4\u662f\u58f0\u660e\u5bb9\u5668\u8fd0\u884c\u65f6\u63d0\u4f9b\u670d\u52a1\u7684\u7aef\u53e3\uff0c\u8fd9\u53ea\u662f\u4e00\u4e2a\u58f0\u660e\uff0c\u5728\u5bb9\u5668\u8fd0\u884c\u65f6\u5e76\u4e0d\u4f1a\u56e0\u4e3a\u8fd9\u4e2a\u58f0\u660e\u5e94\u7528\u5c31\u4f1a\u5f00\u542f\u8fd9\u4e2a\u7aef\u53e3\u7684\u670d\u52a1\u3002\n\u5728 Dockerfile \u4e2d\u5199\u5165\u8fd9\u6837\u7684\u58f0\u660e\u6709\u4e24\u4e2a\u597d\u5904\uff1a\n1. \u4e00\u4e2a\u662f\u5e2e\u52a9\u955c\u50cf\u4f7f\u7528\u8005\u7406\u89e3\u8fd9\u4e2a\u955c\u50cf\u670d\u52a1\u7684\u5b88\u62a4\u7aef\u53e3\uff0c\u4ee5\u65b9\u4fbf\u914d\u7f6e\u6620\u5c04\uff1b\n2. \u53e6\u4e00\u4e2a\u7528\u5904\u5219\u662f\u5728\u8fd0\u884c\u65f6\u4f7f\u7528\u968f\u673a\u7aef\u53e3\u6620\u5c04\u65f6\uff0c\u4e5f\u5c31\u662f `docker run -P` \u65f6\uff0c\u4f1a\u81ea\u52a8\u968f\u673a\u6620\u5c04 `EXPOSE` \u7684\u7aef\u53e3\u3002\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u58f0\u660e\u9700\u8981\u516c\u5f00\u7684\u5bb9\u5668\u7aef\u53e3\uff0c\u901a\u5e38\u5728run\u9009\u9879\u4e2d\u901a\u8fc7<code>-P</code>\u6765\u5c06EXPOSE\u4e2d\u5b9a\u4e49\u7684\u7aef\u53e3\u66b4\u9732\u51fa\u6765</li> <li>\u8bed\u6cd5\uff1a<code>EXPOSE &lt;port&gt; [&lt;port&gt;/&lt;protocol&gt;...]</code></li> <li>\u793a\u4f8b:</li> </ul> <pre><code>FROM ubuntu:20.04\nEXPOSE 80/tcp\nEXPOSE 80/udp\n</code></pre> <pre><code>$ docker build -f my_ubuntu3 -t my_ubuntu:20.04 .\n$ docker run -it -P --rm my_ubuntu3:20.04 /bin/bash\n$ docker ps -a\nCONTAINER ID   IMAGE             COMMAND       CREATED         STATUS         PORTS                                          NAMES\ndb02f8b2ecbe   my_ubuntu:20.04   \"/bin/bash\"   5 seconds ago   Up 2 seconds   0.0.0.0:49153-&gt;80/tcp, 0.0.0.0:49153-&gt;80/udp   eloquent_tereshkova\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#6-argenv","title":"6 ARG\u548cENV","text":"<pre><code>- ENV \u5b9a\u4e49\u7684\u73af\u5883\u53d8\u91cf\u53ef\u4ee5\u88ab`docker run --env &lt;key&gt;=&lt;value&gt;`\u65f6\u4fee\u6539\n</code></pre> <p>\u90fd\u662f\u5b9a\u4e49\u53d8\u91cf\u7684\u4f5c\u7528\uff0c\u533a\u522b\u5982\u4e0b - <code>ARG</code>:   - \u53d8\u91cf\u53ea\u9650\u4e8edockerfile\u91cc\u9762   - \u5f53ARG\u51fa\u73b0\u5728FROM\u524d\u65f6\uff0c\u53ea\u80fd\u7528\u4e8eFROM\u6307\u4ee4\u4e2d\uff0cFROM\u4e4b\u540e\u7684\u6307\u4ee4\u4e0d\u4f1a\u751f\u6548   - ARG\u662f\u552f\u4e00\u4e00\u4e2a\u53ef\u4ee5\u51fa\u73b0\u5728FROM\u4e4b\u524d\u7684\u6307\u4ee4 - <code>ENV</code>:\u5b9a\u4e49\u7684\u662f\u73af\u5883\u53d8\u91cf\uff0c\u4e0d\u4ec5\u5728dockerfile\u4e2d\u751f\u6548\uff0c\u4e5f\u80fd\u4f5c\u4e3a\u955c\u50cf\u751f\u6210\u7684\u5bb9\u5668\u7684\u73af\u5883\u53d8\u91cf - \u793a\u4f8b1\uff1aARG\u51fa\u73b0\u5728FROM\u524d</p> <pre><code>ARG VERSION=20.04\nFROM ubuntu:$VERSION\nENV VERSION2=$VERSION\n</code></pre> <pre><code>$ docker build -f my_ubuntu -t my_ubuntu:20.04 .\n$ docker run -it my_ubuntu:20.04 /bin/bash\nroot@2b61dbdd9138:/# echo $VERSION2\nroot@2b61dbdd9138:/# echo $VERSION\n</code></pre> <ul> <li>\u8f93\u51fa\u5206\u6790\uff1a</li> <li>VRERION\u4e3a\u7a7a\u8bf4\u660eARG\u4e0d\u80fd\u4f5c\u7528\u5728\u5bb9\u5668\u4e2d</li> <li>VERSION2\u4e3a\u7a7a\uff0c\u8bf4\u660eFROM\u524d\u7684ARG\u4e0d\u80fd\u5728FROM\u540e\u751f\u6548</li> <li>\u793a\u4f8b2\uff1aARG\u5728FROM\u540e</li> </ul> <pre><code>ARG VERSION1=20.04\nFROM ubuntu:$VERSION1\nARG VERSION2=20.04\nARG VERSION1\nENV VERSION11=$VERSION1 VERSION22=$VERSION2\n</code></pre> <pre><code>$ docker build -f my_ubuntu2 -t my_ubuntu:20.04 .\n$ docker run -it --rm my_ubuntu:20.04 /bin/bash\nroot@9d17a34421e4:/# echo $VERSION11\n20.04\nroot@9d17a34421e4:/# echo $VERSION22\n20.04\n</code></pre> <ul> <li>\u8f93\u51fa\u5206\u6790\uff1a</li> <li>VERSION11=20.04\u8868\u793a\u5728FROM\u540e\u7684ARG\u751f\u6548</li> <li>VERSION22=20.04\u8868\u793a\u5982\u679c\u8981\u4f7f\u7528FROM\u4e4b\u524d\u7684ARG\uff0c\u53ef\u4ee5\u5728FROM\u540e\u4f7f\u7528<code>ARG \u53d8\u91cf</code>\u4f7f\u751f\u6548</li> </ul>"},{"location":"Documents/C-Tool/docker/Docker/#7-workdir","title":"7 WORKDIR","text":"<ul> <li>\u529f\u80fd\uff1a\u6307\u5b9a\u8fdb\u5165\u5bb9\u5668\u540e\u7684\u9ed8\u8ba4\u5de5\u4f5c\u76ee\u5f55</li> <li>\u8bed\u6cd5:<code>WORKDIR /path/to/workdir</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>FROM ubuntu:20.04\nWORKDIR /home/root\n</code></pre> <pre><code>$ docker run -it -P --rm my_ubuntu:20.04 /bin/bash\nroot@5070c2aa2879:/home/root# pwd\n/home/root\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#8-user","title":"8 USER","text":"<ul> <li>\u529f\u80fd\uff1a\u7528\u4e8e\u6307\u5b9a\u540e\u7eed\u5982RUN\u3001CMD\u3001ENTRYPOINT\u7b49\u6307\u4ee4\u6267\u884c\u7684\u7528\u6237\uff08\u6b64\u7528\u6237\u5fc5\u987b\u5df2\u7ecf\u5b58\u5728\uff0c\u53ef\u4ee5\u901a\u8fc7RUN\u547d\u4ee4\u521b\u5efa\u7528\u6237\uff09</li> <li>\u8bed\u6cd5\uff1a</li> <li><code>USER &lt;user&gt;[:&lt;group&gt;]</code></li> <li><code>USER &lt;UID&gt;[:&lt;GID&gt;]</code></li> <li>\u793a\u4f8b:\u521b\u5efa\u7528\u6237\u548c\u7ec4\uff0c\u5e76\u5207\u6362\u7528\u6237</li> </ul> <pre><code>FROM ubuntu:20.04\nRUN useradd -m user1 &amp;&amp;\\\ngroupadd g1200 -g 1200\nUSER user1:g1200\n</code></pre> <pre><code>$ docker run -it --rm my_ubuntu:20.04 /bin/bash\nuser1@d5e09cbda6b4:/$ id\nuid=1000(user1) gid=1200(g1200) groups=1200(g1200)\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#9-volume","title":"9 VOLUME","text":"<ul> <li>\u529f\u80fd\uff1a\u6307\u5b9a\u5bb9\u5668\u5185\u6302\u8f7d\u70b9\uff08\u4f46\u4e0d\u80fd\u6307\u5b9a\u672c\u5730\u6302\u8f7d\u70b9\uff0c\u672c\u5730\u6302\u8f7d\u70b9\u7531docker\u81ea\u52a8\u751f\u6210\uff0c\u56e0\u6b64\u4e00\u822c\u4e0d\u4f7f\u7528\uff0c\u4e00\u822c\u5728run\u9009\u9879\u4e2d -v\u6302\u8f7d\uff09</li> </ul>"},{"location":"Documents/C-Tool/docker/Docker/#10-shell","title":"10 SHELL","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>SHELL [\"executable\", \"parameters\"]</code></li> <li>\u529f\u80fd\uff1a<code>SHELL</code> \u6307\u4ee4\u53ef\u4ee5\u6307\u5b9a <code>RUN</code> <code>ENTRYPOINT</code> <code>CMD</code> \u6307\u4ee4\u7684 shell\uff0cLinux \u4e2d\u9ed8\u8ba4\u4e3a <code>[\"/bin/sh\", \"-c\"]</code>\uff0c\u5e76\u5f71\u54cd\u6240\u6709\u540e\u7eed\u6307\u4ee4</li> <li>\u793a\u4f8b\uff1a\u7b2c\u4e00\u6761RUN\uff0c\u4f1a\u4ee5<code>/bin/bash -c ls</code>\u6267\u884c\uff0c\u7b2c\u4e00\u6761RUN\u4f1a\u4ee5<code>/bin/bash -cex ls</code>\u6267\u884c</li> </ul> <pre><code>SHELL [\"/bin/sh\", \"-c\"]\nRUN ls\nSHELL [\"/bin/sh\", \"-cex\"]\nRUN ls\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#11-label","title":"11 LABEL","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>LABEL &lt;key&gt;=&lt;value&gt; &lt;key&gt;=&lt;value&gt; &lt;key&gt;=&lt;value&gt; ...</code></li> <li>\u529f\u80fd\uff1a\u7ed9\u955c\u50cf\u6dfb\u52a0\u5143\u4fe1\u606f</li> <li>\u793a\u4f8b</li> </ul> <pre><code>LABEL \"com.example.vendor\"=\"ACME Incorporated\"\nLABEL version=\"1.0\"\nLABEL multi.label1=\"value1\" \\\nmulti.label2=\"value2\" \\\nother=\"value3\"\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#12","title":"12 \u591a\u884c\u547d\u4ee4\u548c\u51cf\u5c11\u955c\u50cf\u5c42","text":"<ul> <li><code>\\</code>:\u591a\u884c\u547d\u4ee4\u7528<code>\\</code>\u533a\u5206\uff08\u548cc\u8bed\u6cd5\u4e00\u6837\uff09</li> <li><code>&amp;&amp;</code>:\u8fde\u7eed\u591a\u6761<code>RUN</code>\u6307\u4ee4\u901a\u8fc7<code>&amp;&amp;</code>\u6765\u8fde\u63a5\uff08\u548cshell\u8bed\u6cd5\u4e00\u6837\uff09</li> <li>\u793a\u4f8b</li> </ul> <pre><code>FROM centos\nRUN yum -y install wget \\\n&amp;&amp; wget -O redis.tar.gz \"http://download.redis.io/releases/redis-5.0.3.tar.gz\" \\\n&amp;&amp; tar -xvf redis.tar.gz\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#_1","title":"\u955c\u50cf","text":""},{"location":"Documents/C-Tool/docker/Docker/#1_2","title":"1 \u67e5\u770b\u955c\u50cf\u5206\u5c42\u5927\u5c0f","text":"<ul> <li><code>docker history \u955c\u50cfid</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ docker history afb6fca791e0\nIMAGE               CREATED             CREATED BY                                      SIZE                COMMENT\nafb6fca791e0        2 years ago         /bin/sh -c #(nop)  CMD [\"/bin/bash\"]            0B                  \n&lt;missing&gt;           2 years ago         /bin/sh -c #(nop)  LABEL org.label-schema.sc\u2026   0B                  \n&lt;missing&gt;           2 years ago         /bin/sh -c #(nop) ADD file:72b194edf3abedf51\u2026   203MB \n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#2-commit","title":"2 commit\u4ece\u5bb9\u5668\u4e2d\u6784\u5efa\u955c\u50cf","text":""},{"location":"Documents/C-Tool/docker/Docker/#3-builddockerfile","title":"3 build\u4eceDockerfile\u6784\u5efa\u955c\u50cf","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>docker build [OPTIONS] PATH | URL | -</code>(\u6ce8\u610f\uff1aPATH\u662fdockerfile\u6587\u4ef6\u6240\u5728\u7684\u8def\u5f84)</li> <li><code>-f path</code>:\u6307\u5b9a\u8981\u4f7f\u7528\u7684Dockerfile\u8def\u5f84\uff0c\u9ed8\u8ba4\u540d\u662f<code>PATH/Dockerfile</code></li> <li><code>-t name:tag</code>:\u8bbe\u7f6e\u955c\u50cf\u7684\u540d\u5b57\u6216\u4fbf\u7b7e\uff0c\u683c\u5f0fname:tag</li> <li>\u793a\u4f8b:\u6700\u540e\u7684<code>.</code>\u8868\u793a\u5728\u5f53\u524d\u8def\u5f84\u4e0b\u627edockerfile\u6587\u4ef6</li> </ul> <pre><code>$ docker build -f my_ubuntu3 -t my_ubuntu:20.04 .\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#_2","title":"\u4ed3\u5e93","text":""},{"location":"Documents/C-Tool/docker/Docker/#1-docker-registry","title":"1 \u79c1\u6709\u4ed3\u5e93docker-registry\u5b89\u88c5\u90e8\u7f72","text":"<ol> <li>\u62c9\u53d6<code>registry</code>\u955c\u50cf\uff1a<code>docker pull registry</code></li> <li>\u542f\u52a8<code>registry</code>\u5bb9\u5668\uff1a<code>docker run -d -p 5000:5000 --restart=always --name registry registry</code><ol> <li><code>registry</code>\u5bb9\u5668\u9700\u8981\u8bbf\u95ee5000\u7aef\u53e3\uff0c\u5bbf\u4e3b\u673a\u4efb\u610f\u7aef\u53e3\u7ed1\u5b9a\u5bb9\u5668\u51855000\u7aef\u53e3</li> <li><code>--restart=alway</code>\u6307\u5b9a\u5bb9\u5668\u5728exit\u540e\uff0c\u80fd\u591f\u91cd\u65b0\u542f\u52a8</li> <li>\u4ed3\u5e93\u9ed8\u8ba4\u4f1a\u5728/var/lib/registry\u4e0b\uff0c\u901a\u8fc7<code>-v /local-dir:/var/lib/registry</code>\u6765\u4fee\u6539\u4f4d\u7f6e</li> </ol> </li> <li>\u73b0\u5728\u9ed8\u8ba4\u4ed3\u5e93\u5730\u5740\u662f<code>127.0.0.1:5000</code></li> </ol>"},{"location":"Documents/C-Tool/docker/Docker/#11","title":"1.1 \u4fee\u6539\u4f7f\u7528\u5185\u7f51\u4ed3\u5e93\u5730\u5740","text":"<ol> <li>\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 <code>vi /etc/docker/daemon.json</code></li> <li>\u589e\u52a0\uff1a<code>\"insecure-registries\": [\"\u5185\u7f51ip:5000\"]</code></li> <li>\u73b0\u5728\u540c\u4e00\u7f51\u6bb5\u5185\u7684\u5176\u5b83\u673a\u5668\u90fd\u80fd\u901a\u8fc7<code>\u5185\u7f51ip:port/\u955c\u50cf\u540d:tag</code>\u6765\u8bbf\u95ee\u955c\u50cf</li> </ol>"},{"location":"Documents/C-Tool/docker/Docker/#12_1","title":"1.2 \u4fee\u6539\u9ed8\u8ba4\u4ed3\u5e93\u5730\u5740","text":"<ol> <li>\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 <code>vi /etc/docker/daemon.json</code></li> <li>\u589e\u52a0\uff1a<code>ADD_REGISTRY='--add-registry \u5185\u7f51ip:5000'</code></li> </ol>"},{"location":"Documents/C-Tool/docker/Docker/#2_1","title":"2 \u63a8\u9001\u955c\u50cf\u5230\u4ed3\u5e93","text":"<ol> <li>\u7ed9\u955c\u50cf\u6253\u6807\u7b7e\uff1a<code>docker tag \u955c\u50cfid registry\u5730\u5740:\u7aef\u53e3/\u955c\u50cf\u540d:\u6807\u7b7e</code></li> <li>\u63a8\u9001\u5230\u4ed3\u5e93\uff1a<code>docker push registry\u5730\u5740:\u7aef\u53e3/\u955c\u50cf\u540d:\u6807\u7b7e</code> `</li> <li>\u5176\u5b83docker\u8282\u70b9\u4e0a\u62c9\u53d6\u955c\u50cf\uff1a<code>docker pull registry\u5730\u5740:\u7aef\u53e3/\u955c\u50cf\u540d:\u6807\u7b7e</code></li> <li>\u793a\u4f8b</li> </ol> <pre><code>$ docker tag 846e0e5335bb 10.30.12.17:5000/fio:3.7\n$ docker push 10.30.12.17:5000/fio:3.7\nThe push refers to repository [10.30.12.17:5000/fio]\n688ef2cc21ed: Pushed \nfb82b029bea0: Mounted from apache/zookeeper 3.7: digest: sha256:9cef282efdf8c18e5057821dd085d84de2f9da4a24c008373794749e4fe76364 size: 741\n# \u5728\u53e6\u4e00\u53f0docker\u8282\u70b9\u4e0a\u6267\u884c\u62c9\u53d6\u955c\u50cf\n$ docker pull heredata/fio:3.7\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#3_1","title":"3 \u67e5\u770b\u79c1\u6709\u4ed3\u5e93\u955c\u50cf\u5217\u8868","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>curl registrIp:port/v2/_catalog</code></li> <li>\u793a\u4f8b\uff1a\u4ee5\u4e0b\u67e5\u8be2\u5230\u67093\u4e2a\u955c\u50cfzookeeper\u3001centos\u3001ubuntu</li> </ul> <pre><code>$ curl 127.0.0.1:5000/v2/_catalog\n{\"repositories\":[\"apache/zookeeper\",\"centos\",\"ubuntu\"]}\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#4","title":"4 \u67e5\u770b\u79c1\u6709\u955c\u50cf\u6807\u7b7e","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>curl registrIp:port/v2/\u955c\u50cf\u540d/tags/list</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ curl 127.0.0.1:5000/v2/apache/zookeeper/tags/list\n{\"name\":\"apache/zookeeper\",\"tags\":[\"v3.4.5\",\"v3.4.14\"]}\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker/#_3","title":"\u7591\u95ee\u6c47\u603b","text":""},{"location":"Documents/C-Tool/docker/Docker/#1_3","title":"1 \u9000\u51fa\u5bb9\u5668\uff0c\u5374\u4e0d\u505c\u6b62\u5bb9\u5668","text":"<p>\u5728\u5bb9\u5668\u5185\u4f7f\u7528Ctrl+P+Q\u9000\u51fa\uff0c\u5bb9\u5668\u4f9d\u7136\u4fdd\u6301running\u72b6\u6001</p>"},{"location":"Documents/C-Tool/docker/Docker/#2-runrunning","title":"2 \u5982\u4f55\u5728run\u5bb9\u5668\u65f6\uff0c\u4e0d\u8fdb\u5165\u5bb9\u5668\uff0c\u4f46\u5bb9\u5668\u4fdd\u6301running\u72b6\u6001","text":"<ul> <li>\u53c2\u8003</li> <li>\u5bb9\u5668\u4fdd\u6301\u8fd0\u884c\u72b6\u6001\u662f\u56e0\u4e3a\u5bb9\u5668\u5185\u6709\u4e2a\u524d\u53f0\u8fdb\u7a0b\u5728\u8fd0\u884c\uff1f\u6240\u4ee5\u5173\u952e\u662f\u5982\u4f55\u5728\u5bb9\u5668\u5185\u90e8\u542f\u4e00\u4e2a\u524d\u53f0\u8fdb\u7a0b\u4e00\u76f4\u5b58\u5728</li> </ul> <ol> <li> <p>Docker Hub\u662f\u4e00\u4e2a\u5b98\u65b9\u955c\u50cf\u4ed3\u5e93\u00a0\u21a9</p> </li> </ol>"},{"location":"Documents/C-Tool/docker/Docker%E9%83%A8%E7%BD%B2%E9%85%8D%E7%BD%AE/","title":"Docker\u90e8\u7f72\u914d\u7f6e","text":""},{"location":"Documents/C-Tool/docker/Docker%E9%83%A8%E7%BD%B2%E9%85%8D%E7%BD%AE/#1","title":"1 \u5b89\u88c5\u6b65\u9aa4","text":"<ol> <li>\u914d\u7f6edocker\u4ed3\u5e93</li> </ol> <pre><code># \u5b89\u88c5 yum-utils \u5305\uff08\u63d0\u4f9byum-config-manager \u5b9e\u7528\u7a0b\u5e8f\uff09\n$ yum install -y yum-utils\n# \u4f7f\u7528\u963f\u91cc\u7684 docker \u955c\u50cf\u4ed3\u5e93\n$ yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n# \u66f4\u65b0yum\u8f6f\u4ef6\u5305\u7d22\u5f15\n$ yum makecache fast\n</code></pre> <ol> <li>\u5b89\u88c5DOCKER CE \u5f15\u64ce</li> </ol> <pre><code>yum -y install docker-ce docker-ce-cli containerd.io\n</code></pre> <ol> <li>\u4f7f\u7528\u963f\u91cc\u4e91\u955c\u50cf\u52a0\u901f<ol> <li>\u6ce8\u518c\u8d26\u53f7\uff1ahttps://www.aliyun.com/</li> <li>\u83b7\u5f97\u52a0\u901f\u5668\u5730\u5740\u8fde\u63a5\uff1a<ol> <li>\u767b\u9646\u963f\u91cc\u4e91\u5f00\u53d1\u8005\u5e73\u53f0</li> <li>\u70b9\u51fb\u63a7\u5236\u53f0</li> <li>\u9009\u62e9\u5bb9\u5668\u955c\u50cf\u670d\u52a1</li> <li>\u83b7\u53d6\u52a0\u901f\u5668\u5730\u5740\uff1ahttps://3jdregmb.mirror.aliyuncs.com</li> </ol> </li> </ol> </li> </ol> <pre><code>$ sudo mkdir -p /etc/docker \n$ sudo tee /etc/docker/daemon.json &lt;&lt;-'EOF'\n{\n\u00a0 \"registry-mirrors\": [\"https://3jdregmb.mirror.aliyuncs.com\"]\n}\nEOF\n$ systemctl daemon-reload\n$ systemctl restart docker\n</code></pre> <ol> <li>\u542f\u52a8docker</li> </ol> <pre><code>$ systemctl start docker\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker%E9%83%A8%E7%BD%B2%E9%85%8D%E7%BD%AE/#2","title":"2 \u5378\u8f7d","text":"<ul> <li>\u547d\u4ee4\u5982\u4e0b</li> </ul> <pre><code># \u5378\u8f7d\u547d\u4ee4\nsystemctl stop docker \nyum remove docker-ce docker-ce-cli containerd.io\nrm -rf /var/lib/docker\nrm -rf /var/lib/containerd\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker%E9%83%A8%E7%BD%B2%E9%85%8D%E7%BD%AE/#3-docker-registry","title":"3 \u79c1\u6709\u4ed3\u5e93docker-registry\u5b89\u88c5\u90e8\u7f72","text":"<ol> <li>\u62c9\u53d6<code>registry</code>\u955c\u50cf\uff1a<code>docker pull registry</code></li> <li>\u542f\u52a8<code>registry</code>\u5bb9\u5668\uff1a<code>docker run -d -p 5000:5000 --restart=always --name registry registry</code><ol> <li><code>registry</code>\u5bb9\u5668\u9700\u8981\u8bbf\u95ee5000\u7aef\u53e3\uff0c\u5bbf\u4e3b\u673a\u4efb\u610f\u7aef\u53e3\u7ed1\u5b9a\u5bb9\u5668\u51855000\u7aef\u53e3</li> <li><code>--restart=alway</code>\u6307\u5b9a\u5bb9\u5668\u5728exit\u540e\uff0c\u80fd\u591f\u91cd\u65b0\u542f\u52a8</li> <li>\u4ed3\u5e93\u9ed8\u8ba4\u4f1a\u5728/var/lib/registry\u4e0b\uff0c\u901a\u8fc7<code>-v /local-dir:/var/lib/registry</code>\u6765\u4fee\u6539\u4f4d\u7f6e</li> </ol> </li> <li>\u73b0\u5728\u9ed8\u8ba4\u4ed3\u5e93\u5730\u5740\u662f<code>127.0.0.1:5000</code></li> </ol>"},{"location":"Documents/C-Tool/docker/Docker%E9%83%A8%E7%BD%B2%E9%85%8D%E7%BD%AE/#31","title":"3.1 \u4fee\u6539\u4f7f\u7528\u5185\u7f51\u4ed3\u5e93\u5730\u5740","text":"<ol> <li>\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 <code>vi /etc/docker/daemon.json</code></li> <li>\u589e\u52a0\uff1a<code>\"insecure-registries\": [\"\u5185\u7f51ip:5000\"]</code></li> <li>\u91cd\u542fdocker\u670d\u52a1\uff1a<code>systemctl restart docker</code></li> <li>\u73b0\u5728\u540c\u4e00\u7f51\u6bb5\u5185\u7684\u5176\u5b83\u673a\u5668\u90fd\u80fd\u901a\u8fc7<code>\u5185\u7f51ip:port/\u955c\u50cf\u540d:tag</code>\u6765\u8bbf\u95ee\u955c\u50cf</li> </ol>"},{"location":"Documents/C-Tool/docker/Docker%E9%83%A8%E7%BD%B2%E9%85%8D%E7%BD%AE/#32","title":"3.2 \u4fee\u6539\u9ed8\u8ba4\u4ed3\u5e93\u5730\u5740","text":"<ol> <li>\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 <code>vi /etc/docker/daemon.json</code></li> <li>\u589e\u52a0\uff1a<code>ADD_REGISTRY='--add-registry \u5185\u7f51ip:5000'</code></li> </ol>"},{"location":"Documents/C-Tool/docker/Docker%E9%83%A8%E7%BD%B2%E9%85%8D%E7%BD%AE/#4","title":"4 \u63a8\u9001\u955c\u50cf\u5230\u4ed3\u5e93","text":"<ol> <li>\u7ed9\u955c\u50cf\u6253\u6807\u7b7e\uff1a<code>docker tag \u955c\u50cfid registry\u5730\u5740:\u7aef\u53e3/\u955c\u50cf\u540d:\u6807\u7b7e</code></li> <li>\u63a8\u9001\u5230\u4ed3\u5e93\uff1a<code>docker push registry\u5730\u5740:\u7aef\u53e3/\u955c\u50cf\u540d:\u6807\u7b7e</code> `</li> <li>\u5176\u5b83docker\u8282\u70b9\u4e0a\u62c9\u53d6\u955c\u50cf\uff1a<code>docker pull registry\u5730\u5740:\u7aef\u53e3/\u955c\u50cf\u540d:\u6807\u7b7e</code></li> <li>\u793a\u4f8b</li> </ol> <pre><code>$ docker tag 846e0e5335bb 10.30.12.17:5000/fio:3.7\n$ docker push 10.30.12.17:5000/fio:3.7\nThe push refers to repository [10.30.12.17:5000/fio]\n688ef2cc21ed: Pushed \nfb82b029bea0: Mounted from apache/zookeeper 3.7: digest: sha256:9cef282efdf8c18e5057821dd085d84de2f9da4a24c008373794749e4fe76364 size: 741\n# \u5728\u53e6\u4e00\u53f0docker\u8282\u70b9\u4e0a\u6267\u884c\u62c9\u53d6\u955c\u50cf\n$ docker pull heredata/fio:3.7\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker%E9%83%A8%E7%BD%B2%E9%85%8D%E7%BD%AE/#41","title":"4.1 \u67e5\u770b\u79c1\u6709\u4ed3\u5e93\u955c\u50cf\u5217\u8868","text":"<ul> <li>\u8bed\u6cd5\uff1a<ul> <li><code>curl -XGET http://registry:5000/v2/_catalog</code></li> <li><code>curl -XGET http://registry:5000/v2/image_name/tags/list</code></li> </ul> </li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>[root@centos7 ~]# curl -XGET http://192.168.211.10:5000/v2/_catalog\n{\"repositories\":[\"registry\"]}\n[root@centos7 ~]# curl -XGET http://192.168.211.10:5000/v2/registry/tags/list\n{\"name\":\"registry\",\"tags\":[\"test\"]}\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker%E9%83%A8%E7%BD%B2%E9%85%8D%E7%BD%AE/#42","title":"4.2 \u67e5\u770b\u79c1\u6709\u955c\u50cf\u6807\u7b7e","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>curl registrIp:port/v2/\u955c\u50cf\u540d/tags/list</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>$ curl 127.0.0.1:5000/v2/apache/zookeeper/tags/list\n{\"name\":\"apache/zookeeper\",\"tags\":[\"v3.4.5\",\"v3.4.14\"]}\n</code></pre>"},{"location":"Documents/C-Tool/docker/Docker%E9%83%A8%E7%BD%B2%E9%85%8D%E7%BD%AE/#5","title":"5 \u5220\u9664\u79c1\u6709\u5e93\u955c\u50cf","text":"<ul> <li>\u6682\u65f6\u6ca1\u7528\u66f4\u597d\u7684\u65b9\u6cd5\uff0c\u76f4\u63a5\u5220\u9664registry\u5bb9\u5668</li> </ul>"},{"location":"Documents/C-Tool/kubernetes/csi%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/","title":"csi\u63d2\u4ef6\u5f00\u53d1","text":"<ul> <li>\u5f00\u53d1\u81ea\u5df1\u7684csi\u5b58\u50a8\u63d2\u4ef6</li> <li>\u5f00\u53d1\u6587\u6863</li> </ul>"},{"location":"Documents/C-Tool/kubernetes/k8s%E5%AE%89%E8%A3%85/","title":"k8s\u5b89\u88c5","text":"<ul> <li>k8s-1.24\u5b89\u88c5\u6559\u7a0b</li> <li>k8s-1.24_cri-docker\u7248\u672c</li> </ul>"},{"location":"Documents/C-Tool/kubernetes/k8s%E5%AE%89%E8%A3%85/#1","title":"1 \u73af\u5883\u51c6\u5907","text":""},{"location":"Documents/C-Tool/kubernetes/k8s%E5%AE%89%E8%A3%85/#11","title":"1.1 \u68c0\u67e5\u64cd\u4f5c\u7cfb\u7edf\u7684\u7248\u672c","text":"<pre><code>\u00a0# \u6b64\u65b9\u5f0f\u4e0b\u5b89\u88c5kubernetes\u96c6\u7fa4\u8981\u6c42Centos\u7248\u672c\u8981\u57287.5\u6216\u4e4b\u4e0a  \n[root@k8s ~]# cat /etc/redhat-release \nCentOS Linux release 7.9.2009 (Core)\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/k8s%E5%AE%89%E8%A3%85/#12","title":"1.2 \u5347\u7ea7\u7cfb\u7edf\u5185\u6838","text":"<p>centos7\u9ed8\u8ba4\u5185\u6838\u7248\u672c\u662f3.10\uff0c\u6b64\u7248\u672c\u5185\u6838\u5b58\u5728\u6f0f\u6d1e\uff0ck8s\u4e2d\u5efa\u8bae\u4f7f\u75284\u4ee5\u4e0a\u5185\u6838\u7248\u672c</p> <pre><code># 1.\u67e5\u770b\u5f53\u524d\u5185\u6838\u7248\u672c\n[root@k8s ~]# uname -r\n3.10.0-1160.el7.x86_64\n# 2.\u6dfb\u52a0yum\u6e90\u4ed3\u5e93\n[root@k8s ~]# mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup \n[root@k8s ~]# curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo \n[root@k8s ~]# curl -o /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo\n[root@k8s ~]# rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org\n[root@k8s ~]# yum install -y https://www.elrepo.org/elrepo-release-7.0-4.el7.elrepo.noarch.rpm\n# 3.\u66f4\u65b0yum\u6e90\u4ed3\u5e93\uff08\u8fd9\u6b65\u66f4\u65b0\u8f83\u591a\uff0c\u901f\u5ea6\u6bd4\u8f83\u6162\uff09\n[root@k8s ~]# yum -y update\n# 4.\u4e0b\u8f7d\u5185\u6838\n# 4.1\u67e5\u770b\u53ef\u7528\u7684\u7cfb\u7edf\u5185\u6838\u5305\n[root@k8s ~]# yum --disablerepo=\"*\" --enablerepo=\"elrepo-kernel\" list available\n# 4.2\u5b89\u88c5\u5185\u6838\uff0c\u6ce8\u610f\u5148\u8981\u67e5\u770b\u53ef\u7528\u5185\u6838\uff0c\u6211\u5b89\u88c5\u7684\u662f5.18.10\u7248\u672c\u7684\u5185\u6838\n[root@k8s ~]# yum --enablerepo=elrepo-kernel install kernel-ml -y \n# 4.3\u67e5\u770b\u76ee\u524d\u53ef\u7528\u5185\u6838\n[root@k8s ~]# awk -F\\' '$1==\"menuentry \" {print i++ \" : \" $2}' /etc/grub2.cfg\n0 : CentOS Linux (5.18.10-1.el7.elrepo.x86_64) 7 (Core)\n1 : CentOS Linux (3.10.0-1160.el7.x86_64) 7 (Core)\n2 : CentOS Linux (0-rescue-338bf7be5ccb4bd4a9cd9e4ea1e91ad9) 7 (Core)\n\n# 5.\u4f7f\u7528\u5e8f\u53f7\u4e3a0\u7684\u5185\u6838\uff0c\u5e8f\u53f70\u662f\u524d\u9762\u67e5\u51fa\u6765\u7684\u53ef\u7528\u5185\u6838\u7f16\u53f7\n[root@k8s ~]# grub2-set-default 0\n\n# 6.\u751f\u6210 grub \u914d\u7f6e\u6587\u4ef6\u5e76\u91cd\u542f\n[root@k8s ~]# grub2-mkconfig -o /boot/grub2/grub.cfg\n# 7.\u91cd\u542f\u673a\u5668\n[root@k8s ~]# reboot\n# 8.\u67e5\u770b\u5185\u6838\n[root@k8s ~]# uname -r\n5.18.9-1.el7.elrepo.x86_64\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/k8s%E5%AE%89%E8%A3%85/#2","title":"2 \u4e3b\u673a\u540d\u89e3\u6790","text":"<p>\u4e3a\u4e86\u65b9\u4fbf\u96c6\u7fa4\u8282\u70b9\u95f4\u7684\u76f4\u63a5\u8c03\u7528\uff0c\u5728\u8fd9\u4e2a\u914d\u7f6e\u4e00\u4e0b\u4e3b\u673a\u540d\u89e3\u6790\uff0c\u4f01\u4e1a\u4e2d\u63a8\u8350\u4f7f\u7528\u5185\u90e8DNS\u670d\u52a1\u5668</p> <pre><code># 2. \u4e3b\u673a\u540d\u6210\u89e3\u6790 \u7f16\u8f91\u4e09\u53f0\u670d\u52a1\u5668\u7684/etc/hosts\u6587\u4ef6\uff0c\u6dfb\u52a0\u4e0b\u9762\u5185\u5bb9  \n192.168.211.20 master  192.168.211.21 node1  192.168.211.22 node2\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/k8s%E5%AE%89%E8%A3%85/#3-chronyd","title":"3 chronyd\u65f6\u95f4\u540c\u6b65","text":"<p>kubernetes\u8981\u6c42\u96c6\u7fa4\u4e2d\u7684\u8282\u70b9\u65f6\u95f4\u5fc5\u987b\u7cbe\u786e\u4e00\u76f4\uff0c\u8fd9\u91cc\u4f7f\u7528chronyd\u670d\u52a1\u4ece\u7f51\u7edc\u540c\u6b65\u65f6\u95f4\u3002</p> <p>\u4f01\u4e1a\u4e2d\u5efa\u8bae\u914d\u7f6e\u5185\u90e8\u7684\u4f1a\u89c1\u540c\u6b65\u670d\u52a1\u5668\uff1a</p> <pre><code># \u5b89\u88c5chrony\n[root@k8s ~]# yum install -y chrony\n# \u542f\u52a8chronyd\u670d\u52a1  \n[root@k8s ~]# systemctl enable chronyd\n[root@k8s ~]# systemctl start chronyd\n[root@k8s ~]# systemctl status chronyd\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/k8s%E5%AE%89%E8%A3%85/#4-firewalld","title":"4 \u7981\u7528firewalld\u670d\u52a1","text":"<pre><code># 1 \u5173\u95edfirewalld\u670d\u52a1  \n[root@k8s ~]# systemctl disable firewalld\n[root@k8s ~]# systemctl stop firewalld\n[root@k8s ~]# sed -i 's/enforcing/disabled/' /etc/selinux/config \n[root@k8s ~]# setenforce 0\n[root@k8s ~]# systemctl status firewalld\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/k8s%E5%AE%89%E8%A3%85/#5-selinux","title":"5 \u7981\u7528selinux","text":"<p>selinux\u662flinux\u7cfb\u7edf\u4e0b\u7684\u4e00\u4e2a\u5b89\u5168\u670d\u52a1\uff0c\u5982\u679c\u4e0d\u5173\u95ed\u5b83\uff0c\u5728\u5b89\u88c5\u96c6\u7fa4\u4e2d\u4f1a\u4ea7\u751f\u5404\u79cd\u5404\u6837\u7684\u5947\u8469\u95ee\u9898</p> <pre><code>\u00a0# \u7f16\u8f91 /etc/selinux/config \u6587\u4ef6\uff0c\u4fee\u6539SELINUX\u7684\u503c\u4e3adisable  \n# \u6ce8\u610f\u4fee\u6539\u5b8c\u6bd5\u4e4b\u540e\u9700\u8981\u91cd\u542flinux\u670d\u52a1  \nSELINUX=disabled\n[root@k8s ~]# sed -i 's/enforcing/disabled/' /etc/selinux/config \n[root@k8s ~]# setenforce 0\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/k8s%E5%AE%89%E8%A3%85/#6-swap","title":"6 \u7981\u7528swap\u5206\u533a","text":"<p>swap\u5206\u533a\u6307\u7684\u662f\u865a\u62df\u5185\u5b58\u5206\u533a\uff0c\u5b83\u7684\u4f5c\u7528\u662f\u7269\u7406\u5185\u5b58\u4f7f\u7528\u5b8c\uff0c\u4e4b\u540e\u5c06\u78c1\u76d8\u7a7a\u95f4\u865a\u62df\u6210\u5185\u5b58\u6765\u4f7f\u7528\uff0c\u542f\u7528swap\u8bbe\u5907\u4f1a\u5bf9\u7cfb\u7edf\u7684\u6027\u80fd\u4ea7\u751f\u975e\u5e38\u8d1f\u9762\u7684\u5f71\u54cd\uff0c\u56e0\u6b64kubernetes\u8981\u6c42\u6bcf\u4e2a\u8282\u70b9\u90fd\u8981\u7981\u7528swap\u8bbe\u5907\uff0c\u4f46\u662f\u5982\u679c\u56e0\u4e3a\u67d0\u4e9b\u539f\u56e0\u786e\u5b9e\u4e0d\u80fd\u5173\u95edswap\u5206\u533a\uff0c\u5c31\u9700\u8981\u5728\u96c6\u7fa4\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u901a\u8fc7\u660e\u786e\u7684\u53c2\u6570\u8fdb\u884c\u914d\u7f6e\u8bf4\u660e</p> <pre><code># \u7f16\u8f91\u5206\u533a\u914d\u7f6e\u6587\u4ef6/etc/fstab\uff0c\u6ce8\u91ca\u6389swap\u5206\u533a\u4e00\u884c  \n# \u6ce8\u610f\u4fee\u6539\u5b8c\u6bd5\u4e4b\u540e\u9700\u8981\u91cd\u542flinux\u670d\u52a1  \n# \u6ce8\u91ca\u6389 /dev/mapper/centos-swap swap  \n[root@k8s ~]# swapoff -a\n[root@k8s ~]# sed -ri 's/.*swap.*/#&amp;/' /etc/fstab\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/k8s%E5%AE%89%E8%A3%85/#7-linux","title":"7 \u4fee\u6539linux\u7684\u5185\u6838\u53c2\u6570","text":"<pre><code>\u00a0# \u4fee\u6539linux\u7684\u5185\u6838\u91c7\u7eb3\u6570\uff0c\u6dfb\u52a0\u7f51\u6865\u8fc7\u6ee4\u548c\u5730\u5740\u8f6c\u53d1\u529f\u80fd  \n# \u7f16\u8f91/etc/sysctl.d/kubernetes.conf\u6587\u4ef6\uff0c\u6dfb\u52a0\u5982\u4e0b\u914d\u7f6e\uff1a  \n[root@k8s ~]# cat &gt; /etc/sysctl.d/k8s_better.conf &lt;&lt; EOF\nnet.bridge.bridge-nf-call-iptables=1\nnet.bridge.bridge-nf-call-ip6tables=1\nnet.ipv4.ip_forward=1\nvm.swappiness=0\nvm.overcommit_memory=1\nvm.panic_on_oom=0\nfs.inotify.max_user_instances=8192\nfs.inotify.max_user_watches=1048576\nfs.file-max=52706963\nfs.nr_open=52706963\nnet.ipv6.conf.all.disable_ipv6=1\nnet.netfilter.nf_conntrack_max=2310720\nEOF\n# \u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e  \n[root@k8s ~]# modprobe br_netfilter\n[root@k8s ~]# lsmod |grep conntrac\n[root@k8s ~]# modprobe ip_conntrack\n[root@k8s ~]# sysctl -p /etc/sysctl.d/k8s_better.conf\nnet.bridge.bridge-nf-call-iptables = 1\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.ipv4.ip_forward = 1\nvm.swappiness = 0\nvm.overcommit_memory = 1\nvm.panic_on_oom = 0\nfs.inotify.max_user_instances = 8192\nfs.inotify.max_user_watches = 1048576\nfs.file-max = 52706963\nfs.nr_open = 52706963\nnet.ipv6.conf.all.disable_ipv6 = 1\nnet.netfilter.nf_conntrack_max = 2310720\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/k8s%E5%AE%89%E8%A3%85/#8-ipvs","title":"8 \u914d\u7f6eipvs\u529f\u80fd","text":"<p>\u5728Kubernetes\u4e2dService\u6709\u4e24\u79cd\u5e26\u6765\u6a21\u578b\uff0c\u4e00\u79cd\u662f\u57fa\u4e8eiptables\u7684\uff0c\u4e00\u79cd\u662f\u57fa\u4e8eipvs\u7684\u4e24\u8005\u6bd4\u8f83\u7684\u8bdd\uff0cipvs\u7684\u6027\u80fd\u660e\u663e\u8981\u9ad8\u4e00\u4e9b\uff0c\u4f46\u662f\u5982\u679c\u8981\u4f7f\u7528\u5b83\uff0c\u9700\u8981\u624b\u52a8\u8f7d\u5165ipvs\u6a21\u5757</p> <pre><code># 1.\u76f8\u5173\u5de5\u5177\u5b89\u88c5\n[root@k8s ~]# yum install -y conntrack ntpdate ntp ipvsadm ipset jq iptables curl sysstat libseccomp wget vim net-tools git\n# 2.\u5f00\u542fipvs \u8f6c\u53d1\n[root@k8s ~]# modprobe br_netfilter\n# 3.\u6dfb\u52a0\u9700\u8981\u52a0\u8f7d\u7684\u6a21\u5757\u5199\u5165\u811a\u672c\u6587\u4ef6  \n[root@k8s ~]# vi /etc/sysconfig/modules/ipvs.modules\n#!/bin/bash  \nmodprobe -- ip_vs  \nmodprobe -- ip_vs_rr  \nmodprobe -- ip_vs_wrr  \nmodprobe -- ip_vs_sh  \nmodprobe -- nf_conntrack # 4.\u4e3a\u811a\u672c\u6dfb\u52a0\u6267\u884c\u6743\u9650  \n[root@k8s ~]# chmod 755 /etc/sysconfig/modules/ipvs.modules\n# 5.\u6267\u884c\u811a\u672c\u6587\u4ef6\n[root@k8s ~]# /bin/bash /etc/sysconfig/modules/ipvs.modules\n# 5.\u67e5\u770b\u5bf9\u5e94\u7684\u6a21\u5757\u662f\u5426\u52a0\u8f7d\u6210\u529f\n[root@k8s ~]# lsmod | grep -e ip_vs -e nf_conntrack\nip_vs_sh               16384  0 \nip_vs_wrr              16384  0 \nip_vs_rr               16384  0 \nip_vs                 159744  6 ip_vs_rr,ip_vs_sh,ip_vs_wrr\nnf_conntrack          151552  1 ip_vs\nnf_defrag_ipv6         24576  2 nf_conntrack,ip_vs\nnf_defrag_ipv4         16384  1 nf_conntrack\nlibcrc32c              16384  3 nf_conntrack,xfs,ip_vs\n\u00a0```\n## \u5b89\u88c5containerd\n```shell\n# \u521b\u5efa /etc/modules-load.d/containerd.conf \u914d\u7f6e\u6587\u4ef6:\n\n[root@k8s ~]# cat &lt;&lt; EOF &gt; /etc/modules-load.d/containerd.conf\noverlay\nbr_netfilter\nEOF\n\n[root@k8s ~]# modprobe overlay\n[root@k8s ~]# modprobe br_netfilterr\n# \u53ef\u80fd\u4e0d\u9700\u8981\uff0c\u5b89\u88c5dockers\u65f6\u5019\u5df2\u7ecf\u88c5\u4e86\n[root@k8s ~]# yum install -y containerd.io\n# \u751f\u6210containerd\u7684\u914d\u7f6e\u6587\u4ef6 \n[root@k8s ~]# mkdir /etc/containerd -p \n# \u751f\u6210\u914d\u7f6e\u6587\u4ef6 \n[root@k8s ~]# containerd config default &gt; /etc/containerd/config.toml \n# \u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\n[root@k8s ~]# vi /etc/containerd/config.toml\nSystemdCgroup = false \u6539\u4e3a SystemdCgroup = true\n# sandbox_image = \"k8s.gcr.io/pause:3.6\"\n\u6539\u4e3a\uff1a\nsandbox_image = \"registry.aliyuncs.com/google_containers/pause:3.6\"\n[root@k8s ~]# systemctl enable containerd\nCreated symlink from /etc/systemd/system/multi-user.target.wants/containerd.service to /usr/lib/systemd/system/containerd.service.\n[root@k8s ~]# systemctl start containerd\n[root@k8s ~]# systemctl status containerd\n[root@k8s ~]# ctr version\nClient:\n  Version:  1.6.6\n  Revision: 10c12954828e7c7c9b6e0ea9b0c02b01407d3ae1\n  Go version: go1.17.11\n\nServer:\n  Version:  1.6.6\n  Revision: 10c12954828e7c7c9b6e0ea9b0c02b01407d3ae1\n  UUID: 445e2c8d-c369-44ee-b43b-94398f778f6f\n[root@k8s ~]# runc -version \nrunc version 1.1.2\ncommit: v1.1.2-0-ga916309\nspec: 1.0.2-dev\ngo: go1.17.11\nlibseccomp: 2.3.1\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/k8s%E5%AE%89%E8%A3%85/#9-cri-dockerd","title":"9 \u5b89\u88c5cri-dockerd","text":"<p>\u9879\u76ee\u5730\u5740\uff1a\u00a0https://github.com/Mirantis/cri-dockerd</p> <pre><code># \u4e0b\u8f7d\n[root@master ~]# wget -O cri-dockerd-0.2.3.amd64.tgz https://github.com/Mirantis/cri-dockerd/releases/download/v0.2.3/cri-dockerd-0.2.3.amd64.tgz\n[root@master ~]# tar -xf cri-dockerd-0.2.3.amd64.tgz\n[root@master ~]# cp cri-dockerd/cri-dockerd /usr/bin/\n[root@master ~]# chmod +x /usr/bin/cri-dockerd\n# \u914d\u7f6e\u542f\u52a8\u6587\u4ef6\n[root@master ~]# cat &lt;&lt;\"EOF\" &gt; /usr/lib/systemd/system/cri-docker.service\n[Unit]\nDescription=CRI Interface for Docker Application Container Engine\nDocumentation=https://docs.mirantis.com\nAfter=network-online.target firewalld.service docker.service\nWants=network-online.target\nRequires=cri-docker.socket\n\n[Service]\nType=notify\n\nExecStart=/usr/bin/cri-dockerd --network-plugin=cni --pod-infra-container-image=registry.aliyuncs.com/google_containers/pause:3.7\n\nExecReload=/bin/kill -s HUP $MAINPID\nTimeoutSec=0\nRestartSec=2\nRestart=always\n\nStartLimitBurst=3\n\nStartLimitInterval=60s\n\nLimitNOFILE=infinity\nLimitNPROC=infinity\nLimitCORE=infinity\n\nTasksMax=infinity\nDelegate=yes\nKillMode=process\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\n# \u751f\u6210socket \u6587\u4ef6\n[root@master ~]# cat &lt;&lt;\"EOF\" &gt; /usr/lib/systemd/system/cri-docker.socket\n[Unit]\nDescription=CRI Docker Socket for the API\nPartOf=cri-docker.service\n\n[Socket]\nListenStream=%t/cri-dockerd.sock\nSocketMode=0660\nSocketUser=root\nSocketGroup=docker\n\n[Install]\nWantedBy=sockets.target\n\nEOF\n[root@master ~]# systemctl daemon-reload\n[root@master ~]# systemctl start cri-docker\n[root@master ~]# systemctl enable cri-docker\n[root@master ~]# systemctl status cri-docker\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/k8s%E5%AE%89%E8%A3%85/#10-docker","title":"10 \u5b89\u88c5docker","text":"<p>\u8be6\u89c1[[Docker\u90e8\u7f72\u914d\u7f6e]]</p> <pre><code># 2. \u5b89\u88c5\u5b8cdocker\u540e\n# 3. 1.Docker \u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f7f\u7528Vgroup Driver\u4e3acgroupfs\uff0c\u800cKubernetes\u63a8\u8350\u4f7f\u7528systemd\u6765\u66ff\u4ee3cgroupfs\n[root@k8s ~]# vi /etc/docker/daemon.json\n{\n\"exec-opts\": [\"native.cgroupdriver=systemd\"]\n}\n# 4. 2.\u542f\u52a8dokcer\n\n[root@k8s ~]# systemctl restart docker\n[root@k8s ~]# systemctl enable docker\n[root@k8s ~]# systemctl status docker\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/k8s%E5%AE%89%E8%A3%85/#11-kubernetes","title":"11 \u5b89\u88c5Kubernetes\u7ec4\u4ef6","text":"<pre><code># 1\u3001\u7531\u4e8ekubernetes\u7684\u955c\u50cf\u5728\u56fd\u5916\uff0c\u901f\u5ea6\u6bd4\u8f83\u6162\uff0c\u8fd9\u91cc\u5207\u6362\u6210\u56fd\u5185\u7684\u955c\u50cf\u6e90  \n# 2\u3001\u7f16\u8f91/etc/yum.repos.d/kubernetes.repo,\u6dfb\u52a0\u4e0b\u9762\u7684\u914d\u7f6e  \n[root@k8s ~]# vi /etc/yum.repos.d/kubernetes.repo\n[kubernetes]  name=Kubernetes  baseurl=http://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64  enabled=1  gpgchech=0  repo_gpgcheck=0  gpgkey=http://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg http://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg  [root@k8s ~]# yum clean all \n[root@k8s ~]# yum makecache fast\n# 3\u3001\u5b89\u88c5kubeadm\u3001kubelet\u548ckubectl  \n[root@k8s ~]# yum install -y kubectl kubelet kubeadm\n# 4\u3001\u914d\u7f6ekubelet\u7684cgroup  \n[root@k8s ~]# vi /etc/sysconfig/kubelet\nKUBELET_EXTRA_ARGS=\"--cgroup-driver=systemd\" # 5\u3001\u8bbe\u7f6ekubelet\u4e3a\u5f00\u673a\u81ea\u542f\u52a8\u5373\u53ef\uff0c\u7531\u4e8e\u6ca1\u6709\u751f\u6210\u914d\u7f6e\u6587\u4ef6\uff0c\u96c6\u7fa4\u521d\u59cb\u5316\u540e\u81ea\u52a8\u542f\u52a8\n[root@k8s ~]# systemctl enable kubelet\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/k8s%E5%AE%89%E8%A3%85/#111","title":"11.1 \u51c6\u5907\u96c6\u7fa4\u955c\u50cf","text":"<pre><code># \u5728\u5b89\u88c5kubernetes\u96c6\u7fa4\u4e4b\u524d\uff0c\u5fc5\u987b\u8981\u63d0\u524d\u51c6\u5907\u597d\u96c6\u7fa4\u9700\u8981\u7684\u955c\u50cf\uff0c\u6240\u9700\u955c\u50cf\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u547d\u4ee4\u67e5\u770b  \n[root@k8s ~]# kubeadm config images list --kubernetes-version=v1.24.2\nk8s.gcr.io/kube-apiserver:v1.24.2\nk8s.gcr.io/kube-controller-manager:v1.24.2\nk8s.gcr.io/kube-scheduler:v1.24.2\nk8s.gcr.io/kube-proxy:v1.24.2\nk8s.gcr.io/pause:3.7\nk8s.gcr.io/etcd:3.5.3-0\nk8s.gcr.io/coredns/coredns:v1.8.6\n# \u4e0b\u8f7d\u955c\u50cf\n# \u6b64\u955c\u50cfkubernetes\u7684\u4ed3\u5e93\u4e2d\uff0c\u7531\u4e8e\u7f51\u7edc\u539f\u56e0\uff0c\u65e0\u6cd5\u8fde\u63a5\uff0c\u4e0b\u9762\u63d0\u4f9b\u4e86\u4e00\u79cd\u66ff\u6362\u65b9\u6848\n[root@k8s ~]# vi k8s_images_install.sh\nimages=(\nkube-apiserver:v1.24.2\nkube-controller-manager:v1.24.2\nkube-scheduler:v1.24.2\nkube-proxy:v1.24.2\npause:3.7\netcd:3.5.3-0\ncoredns:v1.8.6\n)\n\nfor imageName in ${images[@]};do\ndocker pull registry.cn-hangzhou.aliyuncs.com/google_containers/$imageName\ndocker tag registry.cn-hangzhou.aliyuncs.com/google_containers/$imageName k8s.gcr.io/$imageName\ndocker rmi registry.cn-hangzhou.aliyuncs.com/google_containers/$imageName done\n[root@k8s ~]# chmod 775 k8s_images_install.sh \n[root@k8s ~]# sh k8s_images_install.sh \n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/k8s%E5%AE%89%E8%A3%85/#112-kubectl","title":"11.2 kubectl\u547d\u4ee4\u8865\u9f50","text":"<pre><code>[root@master ~]# yum install bash-completion -y\n[root@master ~]# source /usr/share/bash-completion/bash_completion\n[root@master ~]# source &lt;(kubectl completion bash)\n[root@master ~]# kubectl completion bash &gt;/etc/bash_completion.d/kubectl\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/k8s%E5%AE%89%E8%A3%85/#113","title":"11.3 \u96c6\u7fa4\u521d\u59cb\u5316","text":"<p>\u4e0b\u9762\u7684\u64cd\u4f5c\u53ea\u9700\u8981\u5728master\u8282\u70b9\u4e0a\u6267\u884c\u5373\u53ef </p> <pre><code># \u521b\u5efa\u96c6\u7fa4  \n# --apiserver-advertise-address \u96c6\u7fa4\u901a\u544a\u5730\u5740\n# --image-repository \u7531\u4e8e\u9ed8\u8ba4\u62c9\u53d6\u955c\u50cf\u5730\u5740k8s.gcr.io\u56fd\u5185\u65e0\u6cd5\u8bbf\u95ee\uff0c\u8fd9\u91cc\u6307\u5b9a\u963f\u91cc\u4e91\u955c\u50cf\u4ed3\u5e93\u5730\u5740\n# --kubernetes-version K8s\u7248\u672c\uff0c\u4e0e\u4e0a\u9762\u5b89\u88c5\u7684\u4e00\u81f4\n# --service-cidr \u96c6\u7fa4\u5185\u90e8\u865a\u62df\u7f51\u7edc\uff0cPod\u7edf\u4e00\u8bbf\u95ee\u5165\u53e3\n# --pod-network-cidr Pod\u7f51\u7edc\uff0c\uff0c\u4e0e\u4e0b\u9762\u90e8\u7f72\u7684CNI\u7f51\u7edc\u7ec4\u4ef6yaml\u4e2d\u4fdd\u6301\u4e00\u81f4\n# --cri-socket \u9009\u62e9cri-dockerd\u63d2\u4ef6\u9700\u8981\u6b64\u53c2\u6570\n[root@k8s ~]# kubeadm init \\\n--apiserver-advertise-address=192.168.211.20 \\\n--image-repository registry.aliyuncs.com/google_containers \\\n--kubernetes-version=v1.24.2 \\\n--service-cidr=10.96.0.0/12 \\\n--pod-network-cidr=10.244.0.0/16 \\\n--cri-socket /var/run/cri-dockerd.sock\n# \u521b\u5efa\u5fc5\u8981\u6587\u4ef6  \n[root@master ~]# mkdir -p $HOME/.kube\n[root@master ~]# sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n[root@master ~]# sudo chown $(id -u):$(id -g) $HOME/.kube/config\n# root user \u6267\u884c\n[root@master ~]# export KUBECONFIG=/etc/kubernetes/admin.conf\n[root@master ~]# kubectl get nodes\nNAME     STATUS     ROLES           AGE    VERSION\nmaster   NotReady   control-plane   2m6s   v1.24.2\n</code></pre> <p>\u4e0b\u9762\u7684\u64cd\u4f5c\u53ea\u9700\u8981\u5728node\u8282\u70b9\u4e0a\u6267\u884c\u5373\u53ef</p> <pre><code>[root@master ~]# kubeadm join 192.168.211.20:6443 --token wm1bwp.bujdnu55z9a9dqtr \\\n--discovery-token-ca-cert-hash sha256:1cfd2e95109ab1f919a51bded7520a4718687f1270026f69035426bde0716f5f --cri-socket /var/run/cri-dockerd.sock\n\n\u5728master\u4e0a\u67e5\u770b\u8282\u70b9\u4fe1\u606f\n\n\u00a0[root@master ~]# kubectl get nodes  \nNAME \u00a0 \u00a0STATUS \u00a0 ROLES \u00a0 \u00a0 AGE \u00a0 VERSION  master \u00a0NotReady \u00a0master \u00a0 6m \u00a0 \u00a0v1.17.4  node1 \u00a0 NotReady \u00a0 &lt;none&gt; \u00a022s \u00a0 v1.17.4  node2 \u00a0 NotReady \u00a0 &lt;none&gt; \u00a019s \u00a0 v1.17.4\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/k8s%E5%AE%89%E8%A3%85/#114-master","title":"11.4 \u5b89\u88c5\u7f51\u7edc\u63d2\u4ef6\uff0c\u53ea\u5728master\u8282\u70b9\u64cd\u4f5c\u5373\u53ef","text":"<p>\u7f51\u7edc\u7ec4\u4ef6\u6709\u5f88\u591a\u79cd\uff0c\u53ea\u9700\u8981\u90e8\u7f72\u5176\u4e2d\u4e00\u4e2a\u5373\u53ef\uff0c\u63a8\u8350Calico\u3002 Calico\u662f\u4e00\u4e2a\u7eaf\u4e09\u5c42\u7684\u6570\u636e\u4e2d\u5fc3\u7f51\u7edc\u65b9\u6848\uff0cCalico\u652f\u6301\u5e7f\u6cdb\u7684\u5e73\u53f0\uff0c\u5305\u62ecKubernetes\u3001OpenStack\u7b49\u3002 Calico \u5728\u6bcf\u4e00\u4e2a\u8ba1\u7b97\u8282\u70b9\u5229\u7528 Linux Kernel \u5b9e\u73b0\u4e86\u4e00\u4e2a\u9ad8\u6548\u7684\u865a\u62df\u8def\u7531\u5668\uff08 vRouter\uff09 \u6765\u8d1f\u8d23\u6570\u636e\u8f6c\u53d1\uff0c\u800c\u6bcf\u4e2a vRouter \u901a\u8fc7 BGP \u534f\u8bae\u8d1f\u8d23\u628a\u81ea\u5df1\u4e0a\u8fd0\u884c\u7684 workload \u7684\u8def\u7531\u4fe1\u606f\u5411\u6574\u4e2a Calico \u7f51\u7edc\u5185\u4f20\u64ad\u3002 \u6b64\u5916\uff0cCalico \u9879\u76ee\u8fd8\u5b9e\u73b0\u4e86 Kubernetes \u7f51\u7edc\u7b56\u7565\uff0c\u63d0\u4f9bACL\u529f\u80fd\u3002</p> <pre><code># 1.\u4e0b\u8f7dCalico \nroot@master ~]# wget https://docs.projectcalico.org/manifests/calico.yaml --no-check-certificate \n# 2.\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\nroot@master ~]# vi +4434 calico.yaml\n- name: CALICO_IPV4POOL_CIDR value: \"10.244.0.0/16\"\n# 3.\u5e94\u7528\u63d2\u4ef6\n[root@master ~]# kubectl apply -f calico.yaml\n# 4.\u53bb\u6389\u4e3b\u8282\u70b9\u4e0a\u9762\u4e0d\u53ef\u8c03\u5ea6pod\u6c61\u70b9\n[root@master ~]# kubectl describe node master\n[root@master ~]# kubectl taint nodes --all node-role.kubernetes.io/control-plane:NoSchedule-\nnode/master untainted\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/k8s%E5%AE%89%E8%A3%85/#115-kubeletdocker","title":"11.5 kubelet\u548cdocker\u542f\u505c","text":"<p>- <code>systemctl restart kubelet</code> \u00a0- <code>systemctl restart docker</code> \u00a0- <code>systemctl restart cri-docker</code></p>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/","title":"kubectl\u547d\u4ee4","text":"<p>\u672c\u6559\u7a0b\u4f7f\u7528\u7684\u7248\u672c\u662fk8s-v1.24.2 - \u5b98\u7f51\u6587\u6863</p> <p>kubectl\u7684\u547d\u4ee4\u8bed\u6cd5\u53ef\u603b\u7ed3\u6210\u4e0b\u9762\u683c\u5f0f - <code>kubectl [command] [TYPE] [NAME] [flags]</code>     - <code>commmand</code>\uff1a\u6307\u5b9a\u8981\u5bf9\u4e00\u4e2a\u6216\u591a\u4e2a\u8d44\u6e90\u6267\u884c\u7684\u64cd\u4f5c\uff0c\u4f8b\u5982\u00a0<code>create</code>\u3001<code>get</code>\u3001<code>describe</code>\u3001<code>delete</code>     - <code>TYPE</code>\uff1a\u6307\u5b9a\u8d44\u6e90\u7c7b\u578b\u3002\u8d44\u6e90\u7c7b\u578b\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff0c \u53ef\u4ee5\u6307\u5b9a\u5355\u6570\u3001\u590d\u6570\u6216\u7f29\u5199\u5f62\u5f0f\u3002\u4f8b\u5982\uff0cnode\uff0cns(namespace\u7684\u7f29\u5199)\uff0cpod     - <code>NAME</code>\uff1a\u6307\u5b9a\u8d44\u6e90\u7684\u540d\u79f0\u3002\u540d\u79f0\u533a\u5206\u5927\u5c0f\u5199\u3002 \u5982\u679c\u7701\u7565\u540d\u79f0\uff0c\u5219\u663e\u793a\u6240\u6709\u8d44\u6e90\u7684\u8be6\u7ec6\u4fe1\u606f\u3002\u4f8b\u5982\uff1a<code>kubectl get pods</code>     - <code>flags</code>\uff1a \u6307\u5b9a\u53ef\u9009\u7684\u53c2\u6570\u3002\u4f8b\u5982\uff0c\u53ef\u4ee5\u4f7f\u7528\u00a0<code>-s</code>\u00a0\u6216\u00a0<code>--server</code>\u00a0\u53c2\u6570\u6307\u5b9a Kubernetes API \u670d\u52a1\u5668\u7684\u5730\u5740\u548c\u7aef\u53e3\u3002</p>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#1-create","title":"1 create","text":"<ul> <li>\u529f\u80fd\uff1a\u521b\u5efa\u8d44\u6e90</li> </ul>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#11-deployment","title":"1.1 deployment","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>kubectl create deployment NAME --image=image -- [COMMAND] [args...]</code><ul> <li><code>--image=image</code>\uff1a\u6307\u5b9a\u955c\u50cf</li> <li><code>--replicas=num</code>\u6216<code>-r num</code>\uff1a\u6307\u5b9a\u526f\u672c\u6570\u91cf</li> <li><code>--port</code>\uff1a\u5bb9\u5668\u66b4\u9732\u7684\u7aef\u53e3</li> </ul> </li> <li>\u793a\u4f8b\uff1a\u521b\u5efadeployment\u8d44\u6e90</li> </ul> <pre><code>[root@master ~]# kubectl create deployment my-nginx --image=nginx\ndeployment.apps/my-nginx created\n[root@master ~]# kubectl get pod\nNAME                        READY   STATUS              RESTARTS   AGE\nmy-nginx-7cddc5685c-w44cd   0/1     ContainerCreating   0          14s\n[root@master ~]# kubectl get pod -o wide\nNAME                        READY   STATUS    RESTARTS   AGE   IP             NODE    NOMINATED NODE   READINESS GATES\nmy-nginx-7cddc5685c-w44cd   1/1     Running   0          18s   10.244.104.5   node2   &lt;none&gt;           &lt;none&gt;\n[root@master ~]# kubectl get deploy\nNAME       READY   UP-TO-DATE   AVAILABLE   AGE\nmy-nginx   1/1     1            1           66s\n[root@master ~]# kubectl get svc\nNAME         TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE\nkubernetes   ClusterIP   10.96.0.1    &lt;none&gt;        443/TCP   3d18h\n</code></pre> <pre><code>\u521b\u5efa\u4e86deployment\u8d44\u6e90\uff0c\u76f4\u63a5\u5220\u9664pod\u662f\u4e0d\u80fd\u8fbe\u5230\u76ee\u7684\u7684\uff0c\u9700\u8981\u5220\u9664deployment\uff0c\u624d\u80fd\u5220\u9664pod\n</code></pre> <pre><code># \u5220\u9664\u540e\uff0cpod\u6ca1\u6709\u6d88\u5931\uff0c\u800c\u5728\u91cd\u5efa\n[root@master ~]# kubectl delete pod my-nginx-7cddc5685c-w44cd\npod \"my-nginx-7cddc5685c-w44cd\" deleted\n[root@master ~]# kubectl get pod\nNAME                        READY   STATUS              RESTARTS   AGE\nmy-nginx-7cddc5685c-wqtmr   0/1     ContainerCreating   0          7s\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#12-service","title":"1.2 service","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>kubectl create TYPE NAME [--tcp=&lt;port&gt;:&lt;targetPort&gt;] [--dry-run=server|client|none]</code><ul> <li><code>TYOE</code>\uff1a\u670d\u52a1\u7c7b\u578b<ul> <li><code>clusterip</code>\uff1a\u96c6\u7fa4IP\uff0ck8s\u96c6\u7fa4\u95f4\u53ef\u4ee5\u8bbf\u95ee</li> <li><code>externalname</code></li> <li><code>loadbalancer</code></li> <li><code>nodeport</code>\uff1a\u8282\u70b9ip\uff0c\u96c6\u7fa4\u5916\u90e8\u53ef\u4ee5\u901a\u8fc7\u4efb\u4e00\u53f0k8s\u96c6\u7fa4\u4e3b\u673aip\u6765\u8bbf\u95ee</li> </ul> </li> <li><code>NAME</code>\uff1a\u670d\u52a1\u540d\u79f0</li> <li><code>--tcp=&lt;port&gt;:&lt;targetPort&gt;</code>\uff1a\u66b4\u9732\u7684tcp\u7aef\u53e3</li> </ul> </li> <li>\u793a\u4f8b\uff1a\u521b\u5efaclusterip</li> </ul> <pre><code>[root@master k8s-yaml]# kubectl create service clusterip nginx --tcp=8080:80\nservice/nginx created\n[root@master k8s-yaml]# kubectl get svc\nNAME         TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)    AGE\nkubernetes   ClusterIP   10.96.0.1      &lt;none&gt;        443/TCP    17d\nnginx        ClusterIP   10.98.35.251   &lt;none&gt;        8080/TCP   7s\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#2-get","title":"2 get","text":"<ul> <li>\u529f\u80fd\uff1a\u83b7\u53d6\u8d44\u6e90\u4fe1\u606f</li> <li>flag:<ul> <li><code>-A</code>\uff1a\u663e\u793a\u6240\u6709\u547d\u4ee4\u7a7a\u95f4\u8d44\u6e90</li> <li><code>-f \u6587\u4ef6\u540d</code>\uff1a\u663e\u793ayaml\u6587\u4ef6\u91cc\u6307\u5b9a\u7684\u8d44\u6e90</li> </ul> </li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>[root@master ~]# kubectl get pod \nNAME                        READY   STATUS    RESTARTS        AGE\nmy-nginx-7cddc5685c-wqtmr   1/1     Running   1 (4h41m ago)   5h11m\n[root@master ~]# kubectl get pod -A\nNAMESPACE     NAME                                       READY   STATUS    RESTARTS        AGE\ndefault       my-nginx-7cddc5685c-wqtmr                  1/1     Running   1 (4h40m ago)   5h11m\nkube-system   calico-kube-controllers-6766647d54-hbshz   1/1     Running   3 (4h40m ago)   3d23h\n...\u7701\u7565...\nkube-system   kube-scheduler-master                      1/1     Running   5 (4h40m ago)   3d23h\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#3-run","title":"3 run","text":"<ul> <li>\u529f\u80fd\uff1a\u6307\u5b9a\u955c\u50cf\u8fd0\u884c\u4e00\u4e2apod</li> <li>flag\uff1a<ul> <li><code>-it</code>\uff1a\u7528\u4e8e\u8fdb\u53bb\u5bb9\u5668\uff0c\u5206\u914d\u4e00\u4e2aTTY\uff0c\u4fdd\u6301stdin\u6253\u5f00</li> <li><code>--image</code>\uff1a\u955c\u50cf\u540d</li> <li><code>--env</code>\uff1a\u4f20\u7ed9\u5bb9\u5668\u7684\u73af\u5883\u53d8\u91cf</li> <li><code>--port</code>\uff1a\u5bb9\u5668\u66b4\u9732\u7684\u7aef\u53e3</li> <li><code>--labels</code>\uff1apod\u6807\u7b7e</li> <li><code>--restart=[Always, OnFailure, Never]</code>\uff1a\u5bb9\u5668exit\u72b6\u6001\u7684\u91cd\u542f\u7b56\u7565</li> </ul> </li> <li>\u793a\u4f8b\uff1a\u8fd0\u884c\u4e00\u4e2anginx\u670d\u52a1 pod</li> </ul> <pre><code>[root@master ~]# kubectl run nginx --image=nginx\npod/nginx created\n[root@master ~]# kubectl get pod -o wide\nNAME    READY   STATUS    RESTARTS   AGE   IP             NODE    NOMINATED NODE   READINESS GATES\nnginx   1/1     Running   0          18s   10.244.104.6   node2   &lt;none&gt;           &lt;none\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#4-exec","title":"4 exec","text":"<ul> <li>\u8fdb\u5165Pod \u4e2d\u7684\u5bb9\u5668\u6216\u6267\u884c\u547d\u4ee4</li> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a</li> </ul> <pre><code># \u4ece Pod &lt;pod-name&gt; \u4e2d\u83b7\u53d6\u8fd0\u884c 'date' \u7684\u8f93\u51fa\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8f93\u51fa\u6765\u81ea\u7b2c\u4e00\u4e2a\u5bb9\u5668\u3002\nkubectl exec &lt;pod-name&gt; -- date\n\n# \u8fd0\u884c\u8f93\u51fa 'date' \u83b7\u53d6\u5728 Pod &lt;pod-name&gt; \u4e2d\u5bb9\u5668 &lt;container-name&gt; \u7684\u8f93\u51fa\u3002\nkubectl exec &lt;pod-name&gt; -c &lt;container-name&gt; -- date\n\n# \u83b7\u53d6\u4e00\u4e2a\u4ea4\u4e92 TTY \u5e76\u5728 Pod  &lt;pod-name&gt; \u4e2d\u8fd0\u884c /bin/bash\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8f93\u51fa\u6765\u81ea\u7b2c\u4e00\u4e2a\u5bb9\u5668\u3002\nkubectl exec -it &lt;pod-name&gt; -- /bin/bash\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#5-attach","title":"5 attach","text":"<ul> <li>\u529f\u80fd\uff1a\u9644\u7740\u5728running\u72b6\u6001\u7684\u5bb9\u5668\u4e0a</li> <li>\u8bed\u6cd5\uff1a<code>kubectl attach (POD | TYPE/NAME) -c CONTAINER</code><ul> <li><code>-c CONTAINER</code>\uff1a\u6307\u5b9a\u5177\u4f53\u7684\u5bb9\u5668\uff0c\u9ed8\u8ba4\u662fpod\u7684\u7b2c\u4e00\u4e2a\u5bb9\u5668</li> <li><code>-it</code>\uff1a</li> </ul> </li> <li>\u793a\u4f8b1:attach nginx\u540e\uff0c\u8bbf\u95eenginx\uff0c\u5c06\u4f1a\u8f93\u51fa\u4fe1\u606f</li> </ul> <pre><code>[root@master ~]# kubectl attach nginx\nIf you don't see a command prompt, try pressing enter.\n\n192.168.211.22 - - [25/Jul/2022:10:54:25 +0000] \"GET / HTTP/1.1\" 200 615 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36\" \"-\"\n2022/07/25 10:54:25 [error] 32#32: *1 open() \"/usr/share/nginx/html/favicon.ico\" failed (2: No such file or directory), client: 192.168.211.22, server: localhost, request: \"GET /favicon.ico HTTP/1.1\", host: \"192.168.211.22:30987\", referrer: \"http://192.168.211.22:30987/\"\n192.168.211.22 - - [25/Jul/2022:10:54:25 +0000] \"GET /favicon.ico HTTP/1.1\" 404 555 \"http://192.168.211.22:30987/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36\" \"-\"\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#6-describe","title":"6 describe","text":"<pre><code>\u4e0d\u6307\u5b9a\u5177\u4f53\u7684\u8d44\u6e90\u540d\uff0c\u9ed8\u8ba4\u663e\u793a\u6240\u6709\u7684\u8d44\u6e90\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u663e\u793a\u8d44\u6e90\u8be6\u7ec6\u4fe1\u606f</li> <li>\u8bed\u6cd5\uff1a<code>kubectl describe (-f FILENAME | TYPE [NAME_PREFIX | -l label] | TYPE/NAME)</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code># \u663e\u793a\u540d\u4e3a &lt;pod-name&gt; \u7684 Pod \u7684\u8be6\u7ec6\u4fe1\u606f\u3002\nkubectl describe nodes &lt;node-name&gt;\n\n# \u663e\u793a\u540d\u4e3a &lt;pod-name&gt; \u7684 Pod \u7684\u8be6\u7ec6\u4fe1\u606f\u3002\nkubectl describe pods/&lt;pod-name&gt;\n\n# \u663e\u793a\u7531\u540d\u4e3a &lt;rc-name&gt; \u7684\u526f\u672c\u63a7\u5236\u5668\u7ba1\u7406\u7684\u6240\u6709 Pod \u7684\u8be6\u7ec6\u4fe1\u606f\u3002\n# \u8bb0\u4f4f\uff1a\u526f\u672c\u63a7\u5236\u5668\u521b\u5efa\u7684\u4efb\u4f55 Pod \u90fd\u4ee5\u526f\u672c\u63a7\u5236\u5668\u7684\u540d\u79f0\u4e3a\u524d\u7f00\u3002\nkubectl describe pods &lt;rc-name&gt;\n\n# \u63cf\u8ff0\u6240\u6709\u7684 Pod\nkubectl describe pods\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#7-expose","title":"7 expose","text":"<ul> <li>\u529f\u80fd\uff1a\u5c06\u8d44\u6e90\u516c\u5f00\u4e3a\u4e00\u4e2a\u65b0\u7684 Kubernetes \u670d\u52a1</li> <li>\u8bed\u6cd5\uff1a<code>kubectl expose (-f FILENAME | TYPE NAME) [--port=port] [--protocol=TCP|UDP|SCTP] [--target-port=number-or-name] [--name=name] [--external-ip=external-ip-of-service] [--type=type]</code></li> <li>flag<ul> <li><code>TYPE NAME</code>\uff1a\u6307\u5b9a\u8d44\u6e90\u7c7b\u578b\u548c\u8d44\u6e90\u540d\u79f0\uff0c\u6bd4\u5982<code>pod nginx</code></li> <li><code>--port</code>\uff1apod\u5185\u7aef\u53e3</li> <li><code>--target-port</code>\uff1aservice\u7aef\u53e3</li> <li><code>--name</code>\uff1a\u521b\u5efa\u7684service\u540d</li> <li><code>--protocol=[TCP,UDP]</code>\uff1a\u7f51\u7edc\u534f\u8bae\uff0c\u9ed8\u8ba4TCP</li> <li><code>--type=[ClusterIP, NodePort, LoadBalancer, ExternalName]</code>\uff1aservice\u7c7b\u578b\uff0c\u9ed8\u8ba4\u662fClusterIP\uff0c\u53ea\u80fdk8s\u96c6\u7fa4\u5185\u8bbf\u95ee</li> <li><code>-f \u6587\u4ef6\u540d</code>\uff1a\u901a\u8fc7yaml\u6587\u4ef6\u6307\u5b9a\u8981\u516c\u5f00\u7684\u8d44\u6e90</li> </ul> </li> <li>\u793a\u4f8b\uff1a\u628apod nginx\u4e2d80\u7aef\u53e3\u7ed1\u5b9a\u5230service\u76848000\u7aef\u53e3\uff0c\u901a\u8fc7service IP+port\u53ef\u4ee5\u8bbf\u95eenginx</li> </ul> <pre><code>[root@master ~]# kubectl expose pod nginx --name svc-nginx --port=8000 --target-port=80\nservice/svc-nginx exposed\n[root@master ~]# kubectl get svc\nNAME         TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)    AGE\nkubernetes   ClusterIP   10.96.0.1       &lt;none&gt;        443/TCP    4d\nsvc-nginx    ClusterIP   10.100.119.43   &lt;none&gt;        8000/TCP   3s\n[root@master ~]# curl 10.100.119.43:8000\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;Welcome to nginx!&lt;/title&gt;\n&lt;style&gt;\nhtml { color-scheme: light dark; }\nbody { width: 35em; margin: 0 auto;\nfont-family: Tahoma, Verdana, Arial, sans-serif; }\n&lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;\n&lt;p&gt;If you see this page, the nginx web server is successfully installed and\nworking. Further configuration is required.&lt;/p&gt;\n\n&lt;p&gt;For online documentation and support please refer to\n&lt;a href=\"http://nginx.org/\"&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;\nCommercial support is available at\n&lt;a href=\"http://nginx.com/\"&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>-\u793a\u4f8b\uff1a\u4f7f\u7528NodePort\uff0c\u96c6\u7fa4\u5916\u90e8\u53ef\u8bbf\u95ee</p> <pre><code>[root@master ~]# kubectl expose pod nginx --name svc-nginx --type=NodePort --port=8000 --target-port=80\nservice/svc-nginx exposed\n[root@master ~]# kubectl get svc\nNAME         TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE\nkubernetes   ClusterIP   10.96.0.1       &lt;none&gt;        443/TCP          4d\nsvc-nginx    NodePort    10.107.26.219   &lt;none&gt;        8000:30987/TCP   4s\n### \u662fk8s\u96c6\u7fa4IP(\u4efb\u610f\u8282\u70b9ip\u5747\u53ef)+30987\u7aef\u53e3\u5373\u53ef\u8bbf\u95ee\uff0c\u5176\u4e2d20\uff0c21\uff0c22\u662fk8s\u96c6\u7fa4\u8282\u70b9ip\n### \u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165http://192.168.211.20:30987/ http://192.168.211.21:30987/  http://192.168.211.22:30987/ \u90fd\u53ef\u4ee5\u8bbf\u95ee\u5230nginx\u9996\u9875\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#8-delete","title":"8 delete","text":"<ul> <li>\u529f\u80fd\uff1a\u5220\u9664\u8d44\u6e90</li> <li>flag\uff1a<ul> <li><code>--all</code>\uff1a\u5220\u9664\u67d0\u7c7b\u6240\u6709\u8d44\u6e90</li> <li><code>-A</code>\uff1a\u5728\u6240\u6709\u547d\u4ee4\u7a7a\u95f4\u67e5</li> <li><code>-l</code>\uff1a\u5339\u914d\u6307\u5b9a\u7684\u6807\u7b7e</li> </ul> </li> <li>\u793a\u4f8b\uff1a\u5220\u9664\u6307\u5b9a\u6807\u7b7e\u7684pod</li> </ul> <pre><code>[root@master ~]# kubectl get pod --show-labels\nNAME    READY   STATUS    RESTARTS   AGE   LABELS\nnginx   1/1     Running   0          69m   run=nginx\n[root@master ~]# kubectl delete pod  -l run=nginx\npod \"nginx\" deleted\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#9-label","title":"9 label","text":"<ul> <li>\u529f\u80fd\uff1a\u7ed9\u8d44\u6e90\u6dfb\u52a0\u6807\u7b7e</li> <li>\u8bed\u6cd5\uff1a<code>kubectl label [--overwrite] (-f FILENAME | TYPE NAME) KEY_1=VAL_1 ... KEY_N=VAL_N [--resource-version=version]</code><ul> <li><code>--overwrite</code>\uff1a\u5982\u679c\u6807\u7b7e\u540d\u5b58\u5728\uff0c\u5c31\u4f1a\u66f4\u65b0\u3002\u9ed8\u8ba4\u4e0d\u66f4\u65b0\u3002\u76f4\u63a5\u8fd4\u56de\u9519\u8bef</li> </ul> </li> <li>\u793a\u4f8b\uff1a\u793a\u4f8b\u7ed9pod\u52a0\u4e0a\u6807\u7b7e</li> </ul> <pre><code>[root@master ~]# kubectl label pod nginx version=1.0\npod/nginx labeled\n[root@master ~]# kubectl get pod --show-labels\nNAME    READY   STATUS    RESTARTS   AGE     LABELS\nnginx   1/1     Running   0          2m23s   run=nginx,version=1.0\n</code></pre> <ul> <li>\u793a\u4f8b\uff1a\u66f4\u65b0\u6807\u7b7e</li> </ul> <pre><code>[root@master ~]# kubectl label pod nginx version=2.0\nerror: 'version' already has a value (1.0), and --overwrite is false\n[root@master ~]# kubectl label pod nginx --overwrite version=2.0\npod/nginx labeled\n[root@master ~]# kubectl get pod --show-labels\nNAME    READY   STATUS    RESTARTS   AGE     LABELS\nnginx   1/1     Running   0          4m59s   run=nginx,version=2.0\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#10-annotate","title":"10 annotate","text":"<pre><code>title: label\u548cannotate\u533a\u522b\uff1f\n1. label\u662f\u7ed9Kubernetes\u7528\u7684\uff0c\u53ef\u4ee5\u4f7f\u7528\u4fbf\u7b7e\u548c\u6807\u7b7e\u9009\u62e9\u5668\u6765\u5173\u8054\u8d44\u6e90\uff1b\n2. annotate\u662f\u7ed9\u4eba\u7528\u7684\uff0c\u7528\u4e8e\u5c55\u793a\u7ed9\u7528\u6237\uff0c\u8ba9\u7528\u6237\u83b7\u53d6\u989d\u5916\u4fe1\u606f\uff0cKubernetes\u5e76\u4e0d\u4f7f\u7528\u8fd9\u6bb5\u4fe1\u606f\u3002\n3. label\u6709\u957f\u5ea6\u9650\u5236\uff0c\u800cannotate\u6ca1\u6709\u957f\u5ea6\u9650\u5236\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u7ed9\u8d44\u6e90\u6dfb\u52a0\u6216\u66f4\u65b0\u6ce8\u91ca\u4fe1\u606f,annotations\u4e5f\u662f\u952e\u503c\u5bf9\u5f62\u5f0f</li> <li>\u8bed\u6cd5\uff1a<code>kubectl annotate [--overwrite] (-f FILENAME | TYPE NAME) KEY_1=VAL_1 ... KEY_N=VAL_N [--resource-version=version]</code><ul> <li><code>--list</code>\uff1a\u663e\u793a\u8d44\u6e90annotations\u5217\u8868</li> <li><code>--overwrite</code>\uff1a\u5982\u679cannotation\u5b58\u5728\u76f8\u540c\u7684key\uff0c\u76f4\u63a5\u8986\u76d6</li> <li><code>--record</code>\uff1a1.\u5728\u8d44\u6e90\u6ce8\u89e3\u4e2d\u8bb0\u5f55\u5f53\u524d\u7684 kubectl \u547d\u4ee4\uff1b2.\u8bb0\u5f55\u5230\u7248\u672c\u66f4\u65b0\u5386\u53f2\u4e2d</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@master k8s-yaml]# kubectl annotate deploy/nginx --overwrite --record  description=\"my deploy nginx 1\"\nFlag --record has been deprecated, --record will be removed in the future\ndeployment.apps/nginx annotated\n[root@master k8s-yaml]# kubectl annotate deploy/nginx --overwrite description=\"my deploy nginx 1\"\nFlag --record has been deprecated, --record will be removed in the future\ndeployment.apps/nginx annotated\n[root@master k8s-yaml]# kubectl annotate --list deploy/nginx\nkubectl.kubernetes.io/last-applied-configuration={\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"nginx\"},\"name\":\"nginx\",\"namespace\":\"default\"},\"spec\":{\"replicas\":3,\"selector\":{\"matchLabels\":{\"app\":\"nginx\"}},\"strategy\":{\"rollingUpdate\":{\"maxSurge\":1,\"maxUnavailable\":1},\"type\":\"RollingUpdate\"},\"template\":{\"metadata\":{\"labels\":{\"app\":\"nginx\"}},\"spec\":{\"containers\":[{\"image\":\"nginx\",\"name\":\"nginx\"}]}}}}\n\nkubernetes.io/change-cause=kubectl annotate deploy/nginx description=my deploy nginx 1 --overwrite=true --record=true\ndeployment.kubernetes.io/revision=1\ndescription=my deploy nginx 1\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#11-cp","title":"11 cp","text":"<ul> <li>\u529f\u80fd\uff1a\u5c06\u6587\u4ef6\u548c\u76ee\u5f55\u590d\u5236\u5230\u5bb9\u5668\u548c\u4ece\u5bb9\u5668\u590d\u5236\u3002</li> <li>\u8bed\u6cd5\uff1a`kubectl cp  <ul> <li><code>--container NAME</code>\u6216<code>-c NAME</code>\uff1a\u6307\u5b9a\u5177\u4f53\u7684\u5bb9\u5668\uff0c\u9ed8\u8ba4\u662fPod\u7684\u7b2c\u4e00\u4e2a\u5bb9\u5668</li> </ul> <li>\u793a\u4f8b\uff1a</li> <pre><code>## Copy /tmp/foo from a remote pod to /tmp/bar locally\nkubectl cp &lt;some-namespace&gt;/&lt;some-pod&gt;:/tmp/foo /tmp/bar\n## Copy /tmp/foo local file to /tmp/bar in a remote pod in namespace\nkubectl cp /tmp/foo &lt;some-namespace&gt;/&lt;some-pod&gt;:/tmp/bar\n## Copy /tmp/foo from a remote pod to /tmp/bar locally\nkubectl cp &lt;some-namespace&gt;/&lt;some-pod&gt;:/tmp/foo /tmp/bar\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#12-logspod","title":"12 logs\u6253\u5370pod\u7684\u65e5\u5fd7","text":"<pre><code>logs \u53ea\u7528\u6765\u6253\u5370pod\u7684\u65e5\u5fd7\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u6267\u884c\u8d44\u6e90\u7684\u7c7b\u578b\n</code></pre> <ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>kubectl logs [-f] [-p] (POD | TYPE/NAME) [-c CONTAINER]</code><ul> <li><code>-c CONTAINER</code>\uff1a\u6307\u5b9a\u5177\u4f53\u7684\u5bb9\u5668</li> <li><code>--follow</code>\u6216<code>-f</code>\uff1a\u6307\u5b9a\u662f\u5426\u5e94\u6d41\u5f0f\u4f20\u8f93\u65e5\u5fd7\u3002</li> <li><code>--tail=num</code>\uff1a\u6700\u540e\u51e0\u6761\u65e5\u5fd7</li> <li><code>--since=time</code>\uff1a\u5f53\u524d\u65f6\u95f4\u4e4b\u524d\u591a\u5c11\u65f6\u95f4\u5185\u7684\uff0c\u6bd4\u59825s, 2m, 3h\u3002</li> <li><code>--since-time=time</code>\uff1a\u4ece\u6307\u5b9a\u65f6\u95f4\u4e4b\u540e\u7684\uff0c\u4f7f\u7528RFC3339\u65f6\u95f4\u683c\u5f0f</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@master k8s-yaml]# kubectl logs nginx-8f458dc5b-lb97c --tail=20 --since=1h\n/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration\n/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/\n/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh\n10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf\n10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf\n/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh\n/docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh\n/docker-entrypoint.sh: Configuration complete; ready for start up\n2022/07/30 12:30:57 [notice] 1#1: using the \"epoll\" event method\n2022/07/30 12:30:57 [notice] 1#1: nginx/1.21.5\n2022/07/30 12:30:57 [notice] 1#1: built by gcc 10.2.1 20210110 (Debian 10.2.1-6) \n2022/07/30 12:30:57 [notice] 1#1: OS: Linux 5.18.10-1.el7.elrepo.x86_64\n2022/07/30 12:30:57 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576\n2022/07/30 12:30:57 [notice] 1#1: start worker processes\n2022/07/30 12:30:57 [notice] 1#1: start worker process 30\n2022/07/30 12:30:57 [notice] 1#1: start worker process 31\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#13-explain","title":"13 explain","text":"<ul> <li>\u529f\u80fd\uff1a\u5217\u51fa\u8d44\u6e90\u652f\u6301\u7684\u5b57\u6bb5\u4fe1\u606f</li> <li>\u8bed\u6cd5\uff1a<code>kubectl explain RESOURCE</code><ul> <li><code>RESOURCE</code>\uff1a\u53ef\u4ee5\u6307\u5b9a\u67d0\u8d44\u6e90\u5177\u4f53\u5b57\u6bb5\uff0c\u683c\u5f0f\u4e3a<code>&lt;type&gt;.&lt;fieldName&gt;[.&lt;fieldName&gt;]</code></li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@master ~]# kubectl explain pod.spec.containers.image\nKIND:     Pod\nVERSION:  v1\n\nFIELD:    image &lt;string&gt;\n\nDESCRIPTION:\n     Container image name. More info:\n     https://kubernetes.io/docs/concepts/containers/images This field is\n     optional to allow higher level config management to default or override\n     container images in workload controllers like Deployments and StatefulSets.\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#14-kubectlflags","title":"14 kubectl\u4e2dflags\u53c2\u6570","text":""},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#141-n","title":"14.1 -n\u6307\u5b9a\u547d\u540d\u7a7a\u95f4","text":"<pre><code>-n \u662f --namespace \u7684\u7b80\u5199\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@master ~]# kubectl get pod -n default\nNAME        READY   STATUS    RESTARTS        AGE\nnginx-pod   1/1     Running   1 (3h54m ago)   4h6m\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#142-o","title":"14.2 -o\u683c\u5f0f\u5316\u8f93\u51fa","text":"<pre><code>-o \u662f--output\u7684\u7b80\u5199\n</code></pre> <ul> <li><code>-o name</code>\uff1a\u4ec5\u6253\u5370\u8d44\u6e90\u540d\u79f0\u800c\u4e0d\u6253\u5370\u4efb\u4f55\u5176\u4ed6\u5185\u5bb9\u3002</li> <li><code>-o wide</code>\uff1a\u4ee5\u7eaf\u6587\u672c\u683c\u5f0f\u8f93\u51fa\uff0c\u5305\u542b\u6240\u6709\u9644\u52a0\u4fe1\u606f\u3002\u5bf9\u4e8e Pod \u5305\u542b\u8282\u70b9\u540d\u3002</li> <li><code>-o yaml</code>\uff1a\u8f93\u51fa YAML \u683c\u5f0f\u7684 API \u5bf9\u8c61\u3002</li> <li><code>-o json</code>\uff1a\u8f93\u51fa JSON \u683c\u5f0f\u7684 API \u5bf9\u8c61</li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@master ~]# kubectl  get pod \nNAME        READY   STATUS    RESTARTS       AGE\nnginx-pod   1/1     Running   1 (143m ago)   155m\n[root@master ~]# kubectl  get pod -o name\npod/nginx-pod\n[root@master ~]# kubectl  get pod -o wide\nNAME        READY   STATUS    RESTARTS       AGE    IP             NODE    NOMINATED NODE   READINESS GATES\nnginx-pod   1/1     Running   1 (140m ago)   152m   10.244.104.2   node2   &lt;none&gt;           &lt;none&gt;\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#143-w","title":"14.3 -w\u76d1\u542c\u8d44\u6e90\u53d8\u5316","text":"<pre><code>-w \u662f --watch \u7684\u7b80\u5199\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@master ~]# kubectl get pod --watch \nNAME        READY   STATUS    RESTARTS       AGE\nnginx-pod   1/1     Running   1 (160m ago)   172m\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#2","title":"2. \u66f4\u65b0\u547d\u4ee4","text":""},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#1-scale","title":"1 scale","text":"<ul> <li>\u529f\u80fd\uff1a\u6269\u7f29\u5bb9\u3002\u4e3adeployment, replica set, replication controller,stateful set\u8d44\u6e90\u6307\u5b9a\u5927\u5c0f\uff0c\u589e\u52a0\u6216\u51cf\u5c11\u526f\u672c\u6570</li> <li>\u8bed\u6cd5\uff1a<code>kubectl scale [--resource-version=version] [--current-replicas=count] --replicas=COUNT (-f FILENAME | TYPE NAME)</code><ul> <li><code>TYPE NAM</code>\uff1a\u6307\u5b9a\u8d44\u6e90\u7c7b\u578b\u548c\u540d\u79f0</li> <li><code>--replicas=COUNT</code>\uff1a\u671f\u671b\u7684\u526f\u672c\u6570</li> <li><code>--current-replicas=count</code>\uff1a\u5f53\u524d\u526f\u672c\u6570\uff08\u5fc5\u987b\u5339\u914d\u5f53\u524d\u526f\u672c\u6570\uff0c\u624d\u80fd\u6267\u884c\uff0c\u5426\u5219\u4e0d\u6267\u884c\uff09</li> <li><code>--selector</code>\u6216<code>-l</code>\uff1a\u8d44\u6e90\u9700\u8981\u5339\u914d\u6807\u7b7e\uff08\u00a0'=', '==', and '!='.(e.g. -l key1=value1,key2=value2).\uff09</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@master k8s-yaml]# kubectl get deployments\nNAME    READY   UP-TO-DATE   AVAILABLE   AGE\nnginx   3/3     3            3           75m\n[root@master k8s-yaml]# kubectl scale  deployment/nginx  --current-replicas=3 --replicas=5\ndeployment.apps/nginx scaled\n[root@master k8s-yaml]# kubectl get deployments\nNAME    READY   UP-TO-DATE   AVAILABLE   AGE\nnginx   5/5     5            5           77m\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#2-edit","title":"2 edit","text":"<pre><code>1. \u9ed8\u8ba4\u7f16\u8f91\u5668\u662fvi\u3002\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539\u73af\u5883\u53d8\u91cfKUBE_EDITOR\u6216EDITOR\u6765\u6539\u53d8\u4f7f\u7528\u7684\u6587\u672c\u7f16\u8f91\u5668\n2. \u53ef\u4ee5yaml\u7f16\u8f91\u6587\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u7f16\u8f91\u8d44\u6e90\n3. \u7f16\u8f91\u65f6\u9ed8\u8ba4\u65f6\u4ee5yaml\u683c\u5f0f\u663e\u793a\u8d44\u6e90\u914d\u7f6e\uff0c\u53ef\u4ee5\u4f7f\u7528`-o json`\u53c2\u6570\u6307\u5b9ajson\u683c\u5f0f\u663e\u793a\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u4f7f\u7528\u7f16\u8f91\u5668\uff08linux\u9ed8\u8ba4vi\uff09\u7f16\u8f91\u8d44\u6e90\uff0c\u5e76\u91cd\u65b0\u4e0a\u7ebf</li> <li>\u8bed\u6cd5\uff1a<code>kubectl edit (RESOURCE/NAME | -f FILENAME)</code><ul> <li><code>--save-config</code>\uff1a\u5f53\u524d\u5bf9\u8c61\u7684\u914d\u7f6e\u5c06\u4fdd\u5b58\u5728\u5176\u6ce8\u89e3\u4e2d</li> <li><code>--record</code>\uff1a\u5728\u8d44\u6e90\u6ce8\u89e3\u4e2d\u8bb0\u5f55\u5f53\u524d\u7684 kubectl \u547d\u4ee4</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>## edit\u4fee\u6539\u526f\u672c\u6570\u75311-&gt;2\n[root@master ~]# kubectl edit deployments/nginx --record\nFlag --record has been deprecated, --record will be removed in the future\ndeployment.apps/nginx edited\n\n## \u67e5\u770b\u7248\u672c\u5386\u53f2\n[root@master ~]# kubectl rollout history deploy/nginx\ndeployment.apps/nginx \nREVISION  CHANGE-CAUSE\n1         &lt;none&gt;\n2         kubectl edit deployments/nginx --record=true\n\n## \u67e5\u770bdeploy\u4fe1\u606f\n[root@master ~]# kubectl get deployments\nNAME    READY   UP-TO-DATE   AVAILABLE   AGE\nnginx   1/2     2            1           25h\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#3-set","title":"3 set","text":"<ul> <li>\u529f\u80fd\uff1a\u914d\u7f6e\u5e94\u7528\u7a0b\u5e8f\u8d44\u6e90</li> <li>\u8bed\u6cd5\uff1a<code>kubectl set SUBCOMMAND</code></li> </ul>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#31-env","title":"3.1 env","text":"<ul> <li>\u529f\u80fd\uff1a<code>\u66f4\u65b0pod\u6a21\u677f\u4e0a\u7684\u73af\u5883\u53d8\u91cf</code></li> <li>\u8bed\u6cd5\uff1a<code>kubectl set env RESOURCE/NAME KEY_1=VAL_1 ... KEY_N=VAL_N</code><ul> <li><code>RESOURCE</code>\uff1a\u652f\u6301\u7684\u8d44\u6e90\u6709pod (po), replicationcontroller (rc), deployment (deploy), daemonset (ds), statefulset (sts), cronjob (cj), replicaset (rs)</li> <li><code>--containers=NAME</code>\u6216<code>-c NAME</code>\uff1a\u6307\u5b9a\u5177\u4f53\u7684\u5bb9\u5668</li> <li><code>--overwrite</code>\uff1a\u91cd\u5199\u73af\u5883\u53d8\u91cf\uff08\u5982\u679c\u73af\u5883\u53d8\u91cf\u5df2\u7ecf\u5b58\u5728\uff0c\u5219\u8986\u76d6\uff09</li> <li><code>--list</code>\uff1a\u663e\u793a\u73af\u5883\u53d8\u91cf\u5217\u8868</li> <li><code>--all</code>\uff1a\u9009\u62e9\u8d44\u6e90\u7c7b\u578b\u4e0b\u6240\u6709\u8d44\u6e90</li> <li><code>--record</code>\uff1a\u8bb0\u5f55\u53d8\u66f4\u65f6\u547d\u4ee4\uff0c<code>kubectl rollout history</code>\u547d\u4ee4\u4e2d\u80fd\u770b\u5230\u53d8\u66f4\u8bb0\u5f55</li> </ul> </li> <li>\u793a\u4f8b1</li> </ul> <pre><code>[root@master ~]# kubectl set env deploy/nginx env1=\"hello world\"\ndeployment.apps/nginx env updated\n## \u7b49\u5f85pod\u66f4\u65b0\u540e\uff0c\u8fdb\u5165pod\u67e5\u770b\n[root@master ~]# kubectl exec nginx-86956484b-fgqsr -it -- /bin/bash\nroot@nginx-86956484b-fgqsr:/# echo $env1\nhello world\n</code></pre> <ul> <li>\u793a\u4f8b2\uff1a\u663e\u793a\u73af\u5883\u53d8\u91cf\u5217\u8868</li> </ul> <pre><code>[root@master ~]# kubectl set env deploy --all --list\n# Deployment nginx, container nginx\nenv1=hello world\n[root@master ~]# kubectl set env pods --all --list\n# Pod nginx-6b69b7d8fd-4vjps, container nginx\nenv1=hello world\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#32-image","title":"3.2 image","text":"<ul> <li>\u529f\u80fd\uff1a\u66f4\u65b0\u8d44\u6e90\u7684\u73b0\u6709\u5bb9\u5668\u955c\u50cf</li> <li>\u8bed\u6cd5\uff1a<code>kubectl set image (-f FILENAME | TYPE NAME) CONTAINER_NAME_1=CONTAINER_IMAGE_1 ... CONTAINER_NAME_N=CONTAINER_IMAGE_N</code><ul> <li><code>--record</code>\uff1a\u8bb0\u5f55\u53d8\u66f4\u65f6\u547d\u4ee4\uff0c<code>kubectl rollout history</code>\u547d\u4ee4\u4e2d\u80fd\u770b\u5230\u53d8\u66f4\u8bb0\u5f55</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@master ~]# kubectl set image deployment/nginx nginx=nginx:1.23  --record\nFlag --record has been deprecated, --record will be removed in the future\ndeployment.apps/nginx image updated\n[root@master ~]# kubectl describe deployments/nginx|grep Image\nImage:      nginx:1.23\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#33-resources","title":"3.3 resources","text":"<ul> <li>\u529f\u80fd\uff1a\u4e3a\u5b9a\u4e49 pod \u6a21\u677f\u7684\u4efb\u4f55\u8d44\u6e90\u6307\u5b9a\u8ba1\u7b97\u8d44\u6e90\u8981\u6c42\uff08CPU\u3001\u5185\u5b58\uff09</li> <li>\u8bed\u6cd5\uff1a<code>kubectl set resources (-f FILENAME | TYPE NAME) ([--limits=LIMITS &amp; --requests=REQUESTS]</code><ul> <li><code>--limits=''</code>\uff1a\u6240\u80fd\u8bf7\u6c42\u7684\u8ba1\u7b97\u673a\u8d44\u6e90\u6700\u5927\u503c\uff0c\u6bd4\u5982<code>--limits=cpu=100m,memory=256Mi</code></li> <li><code>--requests=''</code>\uff1a\u8bf7\u6c42\u7684\u8d44\u6e90\uff08\u4f1a\u6536\u5230limits\u7684\u9650\u5236\uff09</li> <li><code>-c, --containers='*'</code>\uff1a\u6307\u5b9a\u5177\u4f53\u7684\u5bb9\u5668</li> <li><code>--record</code>\uff1a\u8bb0\u5f55\u53d8\u66f4\u65f6\u547d\u4ee4\uff0c<code>kubectl rollout history</code>\u547d\u4ee4\u4e2d\u80fd\u770b\u5230\u53d8\u66f4\u8bb0\u5f55</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@master ~]# kubectl set resources deployment nginx -c=nginx --limits=cpu=200m,memory=512Mi\ndeployment.apps/nginx resource requirements updated\n[root@master ~]# kubectl describe deployments/nginx|grep -A 2 Limits\nLimits:\n      cpu:     200m\n      memory:  512Mi\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#4-rollout","title":"4 rollout","text":"<ul> <li>\u529f\u80fd\uff1a\u7ba1\u7406\u8d44\u6e90\u7684\u4e0a\u7ebf\u670d\u52a1</li> <li>\u9002\u7528\u8d44\u6e90\uff1a<ul> <li>deployments  </li> <li>daemonsets  </li> <li>statefulsets</li> </ul> </li> </ul>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#41-history","title":"4.1 history","text":"<pre><code>\u66f4\u65b0\u8d44\u6e90\u65f6\u6307\u5b9a\u4e86 --record \u9009\u9879\uff0cCHANGE-CAUSE\u5b57\u5c31\u4f1a\u663e\u793a\u66f4\u65b0\u65f6\u6267\u884c\u7684\u547d\u4ee4\uff0c\u5426\u5219\u663e\u793a&lt;none&gt;,\u793a\u4f8b\uff1a\n- `kubectl set image deployment/nginx nginx=nginx:1.23 --record=true`\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u67e5\u770b\u4ee5\u524d\u7684\u63a8\u51fa\u4fee\u8ba2\u548c\u914d\u7f6e\u3002</li> <li>\u8bed\u6cd5\uff1a<code>kubectl rollout history (TYPE NAME | TYPE/NAME) [flags]</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@master ~]# kubectl rollout history deployment nginx\ndeployment.apps/nginx \nREVISION  CHANGE-CAUSE\n1         &lt;none&gt;\n2         &lt;none&gt;\n[root@master ~]# kubectl set image deployment/nginx nginx=nginx:1.23  --record\nFlag --record has been deprecated, --record will be removed in the future\ndeployment.apps/nginx image updated\n[root@master ~]# kubectl rollout history deployment/nginx\ndeployment.apps/nginx \nREVISION  CHANGE-CAUSE\n1         &lt;none&gt;\n2         &lt;none&gt;\n3         kubectl set image deployment/nginx nginx=nginx:1.23 --record=true\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#42-pause","title":"4.2 pause","text":"<pre><code>\u5f53\u524d\u53ea\u652f\u6301deployment\u8d44\u6e90\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u6682\u505c\u8d44\u6e90\u7684\u4e0a\u7ebf\uff08\u6b64\u72b6\u6001\u4e0b\uff0c\u8d44\u6e90\u66f4\u65b0\u4e86\uff0c\u5982deploy\u6539\u53d8\u955c\u50cf\u7248\u672c\uff0c\u8d44\u6e90\u4e0d\u4f1a\u66f4\u65b0\uff0c\u76f4\u5230\u6062\u590d\uff09</li> <li>\u8bed\u6cd5\uff1a<code>kubectl rollout pause RESOURCE</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@master ~]# kubectl rollout pause deployment nginx\ndeployment.apps/nginx paused\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#43-restart","title":"4.3 restart","text":"<ul> <li>\u529f\u80fd\uff1a\u91cd\u542f\u8d44\u6e90\uff08\u91cd\u65b0\u4e0a\u7ebf\uff09</li> <li>\u8bed\u6cd5\uff1a<code>kubectl restart pause RESOURCE</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@master ~]# kubectl rollout restart deployment nginx\ndeployment.apps/nginx restarted\n\n### deploy\u8d44\u6e90\u91cd\u542f\u4e2d\n[root@master ~]# kubectl get deployments\nNAME    READY   UP-TO-DATE   AVAILABLE   AGE\nnginx   2/3     3            2           19h\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#44-resume","title":"4.4 resume","text":"<pre><code>\u5f53\u524d\u53ea\u652f\u6301deployment\u8d44\u6e90\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u6062\u590d\u6682\u505c\u7684\u8d44\u6e90\uff08\u4e0a\u7ebf\u529f\u80fd\u6062\u590d\uff09</li> <li>\u8bed\u6cd5\uff1a<code>kubectl rollout resume RESOURCE</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@master ~]# kubectl rollout resume deployment nginx\ndeployment.apps/nginx resumed\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#45-status","title":"4.5 status","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793a\u4e0a\u7ebf\u7684\u72b6\u6001</li> <li>\u8bed\u6cd5\uff1a<code>kubectl rollout status RESOURCE</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@master ~]# kubectl set env deploy/nginx env1=\"hello world\"\ndeployment.apps/nginx env updated\n## \u7acb\u5373\u67e5\u770b\uff0c\u4e0a\u7ebf\u8fc7\u7a0b\u4e2d\uff0c\u5b9e\u65f6\u66f4\u65b0\u72b6\u6001\uff0c\u76f4\u5230\u4e0a\u7ebf\u5b8c\u6210\n[root@master ~]# kubectl rollout status deployment nginx\nWaiting for deployment \"nginx\" rollout to finish: 2 out of 3 new replicas have been updated...\nWaiting for deployment \"nginx\" rollout to finish: 2 out of 3 new replicas have been updated...\nWaiting for deployment \"nginx\" rollout to finish: 2 out of 3 new replicas have been updated...\nWaiting for deployment \"nginx\" rollout to finish: 2 out of 3 new replicas have been updated...\nWaiting for deployment \"nginx\" rollout to finish: 2 out of 3 new replicas have been updated...\nWaiting for deployment \"nginx\" rollout to finish: 1 old replicas are pending termination...\nWaiting for deployment \"nginx\" rollout to finish: 1 old replicas are pending termination...\nWaiting for deployment \"nginx\" rollout to finish: 1 old replicas are pending termination...\nWaiting for deployment \"nginx\" rollout to finish: 2 of 3 updated replicas are available...\ndeployment \"nginx\" successfully rolled out\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#46-undo","title":"4.6 undo","text":"<ul> <li>\u529f\u80fd\uff1a\u56de\u6eda\u7248\u672c</li> <li>\u8bed\u6cd5\uff1a<code>kubectl rollout undo (TYPE NAME | TYPE/NAME) [flags]</code><ul> <li><code>to-revision=num</code>\uff1a\u56de\u9000\u5230\u6307\u5b9a\u7248\u672c\uff0c\u9ed8\u8ba4\u56de\u9000\u5230\u4e0a\u4e00\u4e2a\u7248\u672c</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@master ~]# kubectl rollout history deployment nginx\ndeployment.apps/nginx \nREVISION  CHANGE-CAUSE\n1         &lt;none&gt;\n2         &lt;none&gt;\n3         &lt;none&gt;\n\n[root@master ~]# kubectl rollout undo deployment nginx --to-revision=2\ndeployment.apps/nginx rolled back\n[root@master ~]# kubectl rollout history deployment nginx\ndeployment.apps/nginx \nREVISION  CHANGE-CAUSE\n1         &lt;none&gt;\n3         &lt;none&gt;\n4         &lt;none&gt;\n\n### \u7248\u672c2\u5b9a\u4e49\u4e86env\u73af\u5883\u53d8\u91cf\u662f\"hello world\"\uff0c\u7ed3\u679c\u663e\u793a\u6b63\u786e\n[root@master ~]# kubectl exec nginx-86956484b-kn8rz -it -- /bin/bash\nroot@nginx-86956484b-kn8rz:/# echo $env1 \nhello world\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#3","title":"3. \u96c6\u7fa4\u7cfb\u7edf","text":""},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#1-version","title":"1 version","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793aKubernetes\u96c6\u7fa4\u7248\u672c\u4fe1\u606f</li> <li>\u8bed\u6cd5\uff1a<code>kubectl version</code><ul> <li><code>--short</code>\uff1a\u53ea\u663e\u793a\u7248\u672c\u53f7</li> <li><code>--client</code>\uff1a\u53ea\u663e\u793aclient\u7248\u672c\u4fe1\u606f</li> <li><code>-o [json/yaml]</code>\uff1a\u8f93\u51fa\u683c\u5f0f</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@master ~]# kubectl version --short\nFlag --short has been deprecated, and will be removed in the future. The --short output will become the default.\nClient Version: v1.24.2\nKustomize Version: v4.5.4\nServer Version: v1.24.2\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#2-api-resources","title":"2 api-resources","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793a\u652f\u6301\u7684api\u8d44\u6e90</li> <li>\u8bed\u6cd5\uff1a<code>kubectl api-resources</code><ul> <li><code>--sort-by=[kind/name]</code>\uff1a\u4ee5kind\u6216\u8005name\u5b57\u6bb5\u6392\u5e8f</li> <li><code>-o [wide/name]</code>\uff1awide\u663e\u793a\u8be6\u7ec6\u4fe1\u606f\uff0cname\u53ea\u663e\u793aname\u5b57\u6bb5</li> <li><code>--namespaced=bool</code>\uff1afalse\u663e\u793a\u975e\u547d\u540d\u7a7a\u95f4\u8d44\u6e90\uff1btrue\u6216\u8005\u7a7a\u663e\u793a\u547d\u540d\u7a7a\u95f4\u8d44\u6e90</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@master ~]# kubectl api-resources --namespaced --sort-by=name\nNAME                        SHORTNAMES   APIVERSION                     NAMESPACED   KIND\nbindings                                 v1                             true         Binding\nconfigmaps                  cm           v1                             true         ConfigMap\ncontrollerrevisions                      apps/v1                        true         \n\n....\u4e2d\u95f4\u7701\u7565....\n\nservices                    svc          v1                             true         Service\nstatefulsets                sts          apps/v1                        true         StatefulSet\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#3-alpha","title":"3 alpha","text":"<pre><code>1. \u6b64\u547d\u4ee4\u8868\u793a\u8fd8\u5c5e\u4e8ealpha\u9636\u6bb5\uff0c\u9ed8\u8ba4\u7684Kubernetes\u96c6\u7fa4\u65f6\u6ca1\u6709\u6b64\u529f\u80fd\u3002\n2. \u76ee\u524d\u53ea\u652f\u6301events\u547d\u4ee4\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#31-events","title":"3.1 events","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793a\u4e8b\u4ef6</li> <li>\u8bed\u6cd5\uff1a<code>kubectl alpha events [--for TYPE/NAME] [--watch]</code><ul> <li><code>--for TYPE/NAME</code>\uff1a\u6307\u5b9a\u5177\u4f53\u7684\u8d44\u6e90</li> <li><code>--watch</code>\uff1a\u76d1\u542c\u4e8b\u4ef6</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>[root@master ~]# kubectl alpha events --for pod/nginx\nLAST SEEN           TYPE      REASON                 OBJECT      MESSAGE\n50m (x2 over 51m)   Normal    TaintManagerEviction   Pod/nginx   Cancelling deletion of Pod default/nginx\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#4","title":"4. \u8d44\u6e90\u7c7b\u578b\u7f29\u5199\u7edf\u8ba1","text":"<ul> <li><code>pod</code>-&gt;<code>po</code></li> <li><code>nodes</code>-&gt;<code>no</code></li> <li><code>namespaces</code>-&gt;<code>ns</code></li> <li><code>persistentvolumeclaims</code> -&gt;<code>pvc</code></li> <li><code>persistentvolumes</code>-&gt;<code>pv</code></li> <li><code>configmaps</code>-&gt;<code>cm</code></li> <li><code>services</code>-&gt;<code>svc</code></li> <li><code>deployment</code>-&gt;<code>deploy</code></li> <li><code>daemonsets</code>-&gt;<code>ds</code></li> <li><code>replicasets</code>-&gt;<code>rs</code></li> <li><code>replicationcontrollers</code>-&gt;<code>rc</code></li> <li><code>statefulsets</code>-&gt;<code>sts</code></li> <li><code>storageclasses</code>-&gt;<code>sc</code></li> </ul>"},{"location":"Documents/C-Tool/kubernetes/kubectl%E5%91%BD%E4%BB%A4/#5-k8syaml","title":"5. K8S\u5feb\u901f\u751f\u6210yaml\u6587\u4ef6","text":"<ul> <li>\u7b2c\u4e00\u79cd\uff0c\u4f7f\u7528kubectl create \u547d\u4ee4\u751f\u6210:<code>kubectl create deployment web --image=nginx -o yaml --dry-run &gt; my1.yaml</code></li> <li>\u7b2c\u4e8c\u79cd\uff0c\u4f7f\u7528kubectl get\u547d\u4ee4\u5bfc\u51fa:<code>kubectl get deploy nginx -o=yaml --export &gt; my2.yaml</code></li> </ul>"},{"location":"Documents/C-Tool/kubernetes/kubernets%20ymal%E8%AF%AD%E6%B3%95/","title":"kubernets ymal","text":""},{"location":"Documents/C-Tool/kubernetes/kubernets%20ymal%E8%AF%AD%E6%B3%95/#1","title":"1 \u901a\u7528\u90e8\u5206","text":"<ul> <li><code>apiVersion &lt;string&gt;</code>\uff1a\u5fc5\u9009\uff0c\u7248\u672c\u53f7\uff0c\u4f8b\u5982v1\uff08\u5fc5\u9009\uff09</li> <li><code>kind &lt;string&gt;</code>\uff1a\u8d44\u6e90\u7c7b\u578b\uff0c\u4f8b\u5982 Pod\uff08\u5fc5\u9009\uff09</li> <li><code>metadata &lt;Object&gt;</code>\uff1a\u8d44\u6e90\u7684\u5143\u6570\u636e\uff08\u5fc5\u9009\uff09</li> <li><code>spec &lt;Object&gt;</code>\uff1a\u8d44\u6e90\u7684\u8be6\u7ec6\u5b9a\u4e49</li> <li>\u793a\u4f8b</li> </ul> <pre><code>apiVersion: v1\nkind: Namespace\nmetadata:\nname: test\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubernets%20ymal%E8%AF%AD%E6%B3%95/#2-pod","title":"2 Pod","text":"<ul> <li>\u5e38\u7528\u5b57\u6bb5\uff1a</li> <li><code>spec</code><ul> <li><code>containers</code>\uff1a\u5bb9\u5668\u76f8\u5173\u5b9a\u4e49<ul> <li><code>image</code>\uff1a\u955c\u50cf</li> <li><code>imagePullPolicy</code>\uff1a\u955c\u50cf\u62c9\u53d6\u7b56\u7565</li> <li><code>ports</code>\uff1a\u66b4\u9732\u7aef\u53e3</li> <li><code>env</code>\uff1a\u8bbe\u7f6e\u5bb9\u5668\u5185\u73af\u5883\u53d8\u91cf</li> <li><code>volumeMounts</code>\uff1a\u4f7f\u7528\u6302\u8f7d\u7684\u5377</li> </ul> </li> <li><code>restartPolicy</code>\uff1aPod\u91cd\u542f\u7b56\u7565</li> <li><code>hostNetwork</code>\uff1a\u662f\u5426\u4f7f\u7528\u4e3b\u673a\u7f51\u7edc\uff0c\u9ed8\u8ba4\u662ffalse</li> <li><code>affinity</code>\uff1a\u8282\u70b9\u7684\u4eb2\u548c\u6027\uff0c\u7528\u4e8e\u8ba1\u7b97Pod\u8c03\u5ea6k8s\u96c6\u7fa4\u4e2d\u67d0\u4e2anode\u4e0a</li> <li><code>volumes</code>\uff1a\u5377\u5b9a\u4e49\uff0c\u53ef\u4f7f\u7528nfs\u3001hostPath\u7b49\u65b9\u5f0f</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>apiVersion: v1\nkind: Namespace\nmetadata:\nname: test\n---\napiVersion: v1\nkind: Pod\nmetadata:\nname: nginx\nnamespace: test\nspec:\ncontainers:\n- name: nginx\nimage: nginx\nimagePullPolicy: IfNotPresent       #\u955c\u50cf\u62c9\u53d6\u7b56\u7565[Never|Always|IfNotPresent]\nports:\n- containerPort: 80           #\u5bb9\u5668\u5185\u7aef\u53e3\nhostPort: 8080              #\u5bbf\u4e3b\u673a\u7aef\u53e3\nprotocol: UDP               #\u534f\u8bae\u7c7b\u578b[TCP|UDP|SCTP]\uff08\u9ed8\u8ba4TCP\uff09\n- containerPort: 80\nhostPort: 8080\nprotocol: TCP\nenv:                          #\u73af\u5883\u53d8\u91cf\n- name: env1\nvalue: val1\nvolumeMounts:\n- name: fs1\nmountPath: /fs1\nreadOnly: false\nrestartPolicy: Always                   #\u5bb9\u5668\u91cd\u542f\u7b56\u7565[Never|Always|OnFailure]\nhostNetwork: false                      #\u662f\u5426\u4f7f\u7528\u4e3b\u673a\u7f51\u7edc[true|false](\u9ed8\u8ba4false);\u5982\u679c\u4f7f\u7528\uff0chostPort\u4e0d\u80fd\u548ccontainerPort\u4e0d\u540c\n#nodeName: node1                         #\u6307\u5b9ak8s\u8282\u70b9\u540d\u79f0\uff0cpod\u53ea\u4f1a\u8c03\u5ea6\u5230\u6b64\u8282\u70b9\u4e0a\n#nodeSelector:                           #\u8282\u70b9\u9009\u62e9\u5668\uff0c\u5339\u914dk8s\u8282\u70b9\u4e0a\u542btest=nginx\u7684\u8282\u70b9\n#  test: nginx\naffinity:                               #\u8282\u70b9\u4eb2\u548c\u6027\uff0cpod\u8c03\u5ea6\u5230\u6ee1\u8db3\u6761\u4ef6\u7684\u8282\u70b9\u4e0a\nnodeAffinity:\nrequiredDuringSchedulingIgnoredDuringExecution:               #\u5fc5\u8981\u8981\u6ee1\u8db3\u7684\u6761\u4ef6\nnodeSelectorTerms:\n- matchExpressions:\n- key: test\noperator: In                                            #\u4fbf\u7b7e\u5339\u914d\u8fd0\u7b97\u7b26\uff0c\u6709In, NotIn, Exists, DoesNotExist\nvalues:\n- nginx\npreferredDuringSchedulingIgnoredDuringExecution:              #\u4f18\u5148\u6ee1\u8db3\u7684\u6761\u4ef6\n- weight: 1                                                   #\u6743\u91cd\uff0c\u8303\u56f41-100\npreference:\nmatchExpressions:\n- key: label-1\noperator: In\nvalues:\n- key-1\n- weight: 50\npreference:\nmatchExpressions:\n- key: label-2\noperator: In\nvalues:\n- key-2\nvolumes:\n- name: fs1\nhostPath:                             # hostPath\u65b9\u5f0f\u6302\u8f7d\uff0c\u6b64\u5916\u8fd8\u6709nfs\u3001ceph\u7b49\u7b49\u65b9\u5f0f\npath: /root/fs1               #\u4e3b\u673a\u6302\u8f7d\u70b9\u8def\u5f84\ntype: DirectoryOrCreate       #\u53ef\u9009\u53c2\u6570\uff0c\u9ed8\u8ba4\u7a7a\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubernets%20ymal%E8%AF%AD%E6%B3%95/#21","title":"2.1 \u8282\u70b9\u4eb2\u548c\u6027","text":"<ul> <li>\u5b98\u65b9\u6587\u6863</li> </ul>"},{"location":"Documents/C-Tool/kubernetes/kubernets%20ymal%E8%AF%AD%E6%B3%95/#22","title":"2.2 \u6302\u8f7d","text":"<ul> <li>\u5b98\u65b9\u6587\u6863</li> </ul>"},{"location":"Documents/C-Tool/kubernetes/kubernets%20ymal%E8%AF%AD%E6%B3%95/#23","title":"2.3 \u751f\u547d\u5468\u671f\u68c0\u67e5","text":"<ul> <li>\u5b98\u65b9\u6587\u6863</li> </ul>"},{"location":"Documents/C-Tool/kubernetes/kubernets%20ymal%E8%AF%AD%E6%B3%95/#24","title":"2.4 \u751f\u547d\u5468\u671f\u94a9\u5b50","text":"<ul> <li>\u5b98\u65b9\u6587\u6863</li> </ul>"},{"location":"Documents/C-Tool/kubernetes/kubernets%20ymal%E8%AF%AD%E6%B3%95/#3-deployment","title":"3 Deployment","text":"<pre><code>Deployment \u662fpod\u63a7\u5236\u5668\u7684\u4e00\u79cd\uff0c\u5b9e\u9645\u4e0a\u901a\u5e38\u4f7f\u7528\u63a7\u5236\u5668\u6765\u7ba1\u7406Pod\uff0c\u5f88\u5c11\u76f4\u63a5\u7528Pod\n</code></pre> <ul> <li>\u5e38\u7528\u5b57\u6bb5</li> <li><code>spec</code><ul> <li><code>replicas</code>\uff1aPod\u526f\u672c\u6570</li> <li><code>selector</code>\uff1a\u6807\u7b7e\u9009\u62e9\u5668\uff0c\u7528\u4e8e\u5339\u914d<code>template</code>\u4e2d\u5b9a\u4e49\u7684Pod</li> <li><code>strategy</code>\uff1a\u66f4\u65b0\u7b56\u7565\uff08\u5f71\u54cd\u955c\u50cf\u4fee\u6539\uff0c\u6269\u7f29\u5bb9\u64cd\u4f5c\uff09</li> <li><code>template</code>\uff1aPod\u6a21\u677f\uff0c\u8bed\u6cd5\u5927\u81f4\u548cPod ymal\u8bed\u6cd5\u76f8\u540c</li> </ul> </li> </ul> <pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\nlabels:\napp: nginx\nname: nginx\nspec:\nreplicas: 3                         #Pod\u526f\u672c\u6570\u91cf\nselector:\nmatchLabels:                      #\u5339\u914d\u4e0b\u9762\u5bb9\u5668\u5b9a\u4e49\u7684\u6807\u7b7e\napp: nginx\nstrategy:                           #\u66f4\u65b0\u7b56\u7565\ntype: RollingUpdate\nrollingUpdate:                    #\u6eda\u52a8\u66f4\u65b0\u7b56\u7565\uff0c\u5f53type: RollingUpdate\u65f6\u624d\u80fd\u7528\nmaxSurge: 1                 #\u6eda\u52a8\u66f4\u65b0\u65f6\uff0c\u6700\u591a\u6bd4\u671f\u671b\u7684\u526f\u672c\u6570\u591a\u51e0\u4e2apod maxSurge\u548cmaxUnavailable\u4e0d\u80fd\u540c\u65f6\u4e3a0,\u5426\u5219\u51b2\u7a81\uff0c\u65e0\u6cd5\u6eda\u52a8\u66f4\u65b0\u3002\u53ef\u4ee5\u4f7f\u7528\u767e\u5206\u6bd4\uff0830%\uff09\u548c\u6570\u503c\u65b9\u5f0f\uff082\uff09\nmaxUnavailable: 1           #\u6eda\u52a8\u66f4\u65b0\u65f6\uff0c\u6700\u591a\u6bd4\u671f\u671b\u7684\u526f\u672c\u6570\u5c11\u51e0\u4e2apod\ntype: RollingUpdate           #\u66f4\u65b0\u7b56\u7565,[Recreate,RollingUpdate]\u3002Recreate\u5220\u9664pod\u540e\u518d\u91cd\u5efa\uff1bRollingUpdate\u6eda\u52a8\u66f4\u65b0\uff0c\u65b0\u8001pod\u53ef\u4ee5\u540c\u65f6\u5b58\u5728\ntemplate:                           #\u8fd9\u90e8\u5206\u57fa\u672c\u4e0epod\u4e2d\u5b9a\u4e49\u76f8\u4f3c\nmetadata:\nlabels:\napp: nginx                #\u6b64\u6807\u7b7e\u7528\u4e8e\u4e0a\u9762selector\u5339\u914d\u7684\nspec:\ncontainers:\n- image: nginx\nname: nginx\n</code></pre>"},{"location":"Documents/C-Tool/kubernetes/kubernets%20ymal%E8%AF%AD%E6%B3%95/#4-service","title":"4 Service","text":""},{"location":"Documents/C-Tool/%E5%8C%85%E7%AE%A1%E7%90%86/npm%E5%91%BD%E4%BB%A4/","title":"npm \u547d\u4ee4","text":""},{"location":"Documents/C-Tool/%E5%8C%85%E7%AE%A1%E7%90%86/npm%E5%91%BD%E4%BB%A4/#1","title":"1 \u5e38\u7528\u6307\u4ee4\u8868","text":"\u529f\u80fd \u6307\u4ee4 npm\u7248\u672c\u4fe1\u606f npm -v \u5e2e\u52a9\u4fe1\u606f npm -h npm\u5168\u5c40\u5305\u8def\u5f84 npm prefix -g \u66f4\u65b0npm \u6700\u65b0\u7248 npm i npm -g \u6700\u65b0\u7248 npm i npm@latest -g \u5c06\u8981\u53d1\u884c\u7248 npm i npm@next -g \u5b89\u88c5package \u672c\u5730\u5b89\u88c5 npm i [packageName] \u5168\u5c40\u5b89\u88c5 npm i [packageName] -g package.json\u6587\u4ef6\u5b89\u88c5 npm i \u66f4\u65b0package \u672c\u5730\u66f4\u65b0 npm update [packageName] \u5168\u5c40\u66f4\u65b0 npm update [packageName] -g package.json\u6587\u4ef6\u66f4\u65b0 npm update \u5220\u9664package npm uninstall [packageName] \u521d\u59cb\u5316package.json\u6587\u4ef6 npm init \u6267\u884cpackage\u4e2dscript \u67e5\u770b\u6240\u6709script npm run \u6267\u884c\u6307\u5b9ascript npm run [script] \u67e5\u770b\u5df2\u5b89\u88c5package \u672c\u5730\u5305 npm list \u5168\u5c40\u5305 npm list -g \u9650\u5236\u663e\u793a\u6a21\u5757\u5c42\u7ea7 npm --depth [number]"},{"location":"Documents/C-Tool/%E5%8C%85%E7%AE%A1%E7%90%86/npm%E5%91%BD%E4%BB%A4/#2","title":"2 \u8fdb\u9636\u6307\u4ee4\u8868","text":"\u529f\u80fd \u6307\u4ee4 \u67e5\u770bpackage\u6587\u6863 npm docs [packageName]"},{"location":"Documents/C-Tool/%E5%8C%85%E7%AE%A1%E7%90%86/npm%E5%91%BD%E4%BB%A4/#21","title":"2.1 \u5b89\u88c5\u6a21\u5757\u53c2\u6570\u8bf4\u660e","text":"<ol> <li>-g, --global \u5168\u5c40\u5b89\u88dd\uff08global\uff09</li> <li>-S, --save \u5b89\u88dd\u5305\u4fe1\u606f\u5c07\u52a0\u5165\u5230dependencies\uff08\u751f\u7522\u968e\u6bb5\u7684\u4f9d\u8cf4\uff09</li> <li>-D, --save-dev \u5b89\u88dd\u5305\u4fe1\u606f\u5c07\u52a0\u5165\u5230devDependencies\uff08\u958b\u767c\u968e\u6bb5\u7684\u4f9d\u8cf4\uff09\uff0c\u6240\u4ee5\u958b\u767c\u968e\u6bb5\u4e00\u822c\u4f7f\u7528\u5b83</li> <li>-O, --save-optional \u5b89\u88dd\u5305\u4fe1\u606f\u5c07\u52a0\u5165\u5230optionalDependencies\uff08\u53ef\u9078\u968e\u6bb5\u7684\u4f9d\u8cf4\uff09</li> <li>-E, --save-exact \u7cbe\u78ba\u5b89\u88dd\u6307\u5b9a\u6a21\u584a\u7248\u672c</li> </ol>"},{"location":"Documents/C-Tool/%E5%8C%85%E7%AE%A1%E7%90%86/npm%E5%91%BD%E4%BB%A4/#22","title":"2.2 \u7b80\u5199\u6307\u4ee4","text":"\u6307\u4ee4 \u7f29\u5199 \u529f\u80fd install i \u5b89\u88c5package list ls la ll \u5217\u51fa\u4ee5\u5b89\u88c5package\u4fe1\u606f"},{"location":"Documents/C-Tool/%E5%8C%85%E7%AE%A1%E7%90%86/yarn%20%E5%91%BD%E4%BB%A4/","title":"Yarn \u547d\u4ee4","text":"<p>title: yarn \u547d\u4ee4 date: 2020-06-29 sidebarDepth: 2 tags:  - Cmd categories:  - Yarn  - Kit</p>"},{"location":"Documents/C-Tool/%E5%8C%85%E7%AE%A1%E7%90%86/%E8%A7%A3%E5%86%B3npm%20yarn%20%E5%8C%85%E5%AE%89%E8%A3%85%E5%A4%B1%E8%B4%A5%E6%96%B9%E6%B3%95/","title":"\u89e3\u51b3npm yarn \u5305\u5b89\u88c5\u5931\u8d25\u65b9\u6cd5","text":"<ol> <li>\u5728\u9879\u76ee\u6839\u76ee\u5f55\uff08package.json\u6240\u5728\u76ee\u5f55\uff09\u4e0b\u65b0\u5efa .npmrc \u6216 .yarnrc \u6587\u4ef6</li> <li>\u590d\u5236\u5bf9\u5e94\u7684\u914d\u7f6e\u5230 .npmrc \u6216 .yarnrc \u6587\u4ef6\u4e2d</li> </ol> <pre><code># .npmrc \u914d\u7f6e\u6587\u4ef6\nregistry=https://registry.npm.taobao.org\nsass_binary_site=https://npm.taobao.org/mirrors/node-sass/\nphantomjs_cdnurl=http://cnpmjs.org/downloads\nelectron_mirror=https://npm.taobao.org/mirrors/electron/\nsqlite3_binary_host_mirror=https://foxgis.oss-cn-shanghai.aliyuncs.com/\nprofiler_binary_host_mirror=https://npm.taobao.org/mirrors/node-inspector/\nchromedriver_cdnurl=https://cdn.npm.taobao.org/dist/chromedriver\n\n# .yarnrc \u914d\u7f6e\u6587\u4ef6\nregistry \"https://registry.npm.taobao.org\"\nsass_binary_site \"https://npm.taobao.org/mirrors/node-sass/\"\nphantomjs_cdnurl \"http://cnpmjs.org/downloads\"\nelectron_mirror \"https://npm.taobao.org/mirrors/electron/\"\nsqlite3_binary_host_mirror \"https://foxgis.oss-cn-shanghai.aliyuncs.com/\"\nprofiler_binary_host_mirror \"https://npm.taobao.org/mirrors/node-inspector/\"\nchromedriver_cdnurl \"https://cdn.npm.taobao.org/dist/chromedriver\"\n</code></pre> <ol> <li>\u6267\u884cnpm i [packageName] \u6216\u8005 yarn add [packageName]</li> </ol>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/%E8%B5%84%E6%BA%90/","title":"\u8d44\u6e90","text":"<ul> <li>https://docs.readthedocs.io/en/latest/index.html</li> </ul>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Doxygen/Doxygen%E8%AF%AD%E6%B3%95/","title":"Doxygen\u8bed\u6cd5","text":"<p>doxygen\u662f\u4e00\u79cd\u53ef\u4ee5\u5bf9\u6e90\u7801\u6ce8\u91ca\u8fdb\u884c\u63d0\u53d6\uff0c\u751f\u6210\u6587\u6863\u7684\u5de5\u5177\u3002doxygen\u5b9a\u4e49\u4e86\u4e00\u5957\u6ce8\u91ca\u6807\u51c6\uff0c\u53ea\u8981\u6309\u7167\u8fd9\u5957\u6807\u51c6\u8fdb\u884c\u6ce8\u91ca\uff0c\u5c31\u80fd\u6b63\u786e\u5bfc\u51fa\u6587\u6863\uff0c\u652f\u6301\u7684\u6587\u6863\u683c\u5f0f\u6709html\uff0clatex\uff1b\u652f\u6301\u7684\u8bed\u8a00\u6709c\uff0cc++\uff0cjava\uff0cpython\u7b49\u7b49\u4e3b\u6d41\u8bed\u8a00\u3002\u4ee5\u4e0b\u662f\u4e00\u7b80\u77ed\u6ce8\u91ca\u793a\u4f8b</p> <pre><code>/**\n * @brief 2\u4e2a\u6574\u5f62\u6570\u636e\u76f8\u52a0\n * \n * @param x \u8f93\u5165\u53c2\u65701\n * @param[in] y \u8f93\u5165\u53c2\u65702\n * @return int \n */\nint add(int x, int y)\n{\nreturn x + y;\n}\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Doxygen/Doxygen%E8%AF%AD%E6%B3%95/#1","title":"1 \u6ce8\u91ca\u5757\u683c\u5f0f","text":"<p>\u8003\u8651\u5230\u6709\u4e9b\u6ce8\u91ca\u4e0d\u9700\u8981\u5bfc\u51fa\uff0c\u4e3a\u4e86\u533a\u5206\u90a3\u4e9b\u9700\u8981\u5bfc\u51fa\u90a3\u4e9b\u4e0d\u9700\u8981\u5bfc\u51fa\uff0cdoxygen\u518d\u539f\u5148\u6ce8\u91ca\u5757\u89c4\u5219\u4e0a\u52a0\u4e0a\u989d\u5916\u6807\u5fd7\u7528\u4e8e\u533a\u5206\u3002</p>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Doxygen/Doxygen%E8%AF%AD%E6%B3%95/#11","title":"1.1 \u5355\u884c\u6ce8\u91ca","text":"<p>\u6807\u51c6\u6ce8\u91ca\u7528\u53cc\u659c\u6760<code>//</code>\u4f5c\u4e3a\u5355\u884c\u6ce8\u91ca,doxygen\u4f7f\u75283\u659c\u6760<code>///</code>\u6216\u7528\u53cc\u659c\u6760\u52a01\u4e2a\u611f\u53f9\u53f7<code>//!</code>\u3002 - \u6807\u51c6\u6ce8\u91ca\u5982\u4e0b</p> <pre><code>//\u5168\u5c40\u53d8\u91cfi\nint i=2;\n</code></pre> <ul> <li>doxygen\u6ce8\u91ca\u5982\u4e0b</li> </ul> <pre><code>//!\u5168\u5c40\u53d8\u91cfi\nint i=2;\n///\u5168\u5c40\u53d8\u91cfj\nint j=2;\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Doxygen/Doxygen%E8%AF%AD%E6%B3%95/#12","title":"1.2 \u5757\u6ce8\u91ca","text":"<p>\u6807\u51c6\u5feb\u6ce8\u91ca\u662f<code>/*\u6ce8\u91ca*/</code>\u5305\u88f9\uff0c\u800cdoxygen\u4f9d\u7136\u63d0\u4f9b2\u79cd\u65b9\u5f0f\uff0c<code>/**\u6ce8\u91ca*/</code>\u6216<code>/*!\u6ce8\u91ca*/</code>\uff0c\u4e0e\u6807\u51c6\u6ce8\u91ca\u76f8\u6bd4\u591a\u4e86\u4e00\u4e2a<code>*</code>\u6216<code>!</code>\u3002 - \u6807\u51c6\u6ce8\u91ca\u5982\u4e0b</p> <pre><code>/*\n * @brief 2\u4e2a\u6574\u5f62\u6570\u636e\u76f8\u52a0\n * \n * @param x \u8f93\u5165\u53c2\u65701\n * @param[in] y \u8f93\u5165\u53c2\u65702\n * @return int \n */\nint add(int x, int y)\n{\nreturn x + y;\n}\n</code></pre> <ul> <li>doxygen\u6ce8\u91ca\u5982\u4e0b</li> </ul> <pre><code>/**\n * @brief 2\u4e2a\u6574\u5f62\u6570\u636e\u76f8\u52a0\n * \n * @param x \u8f93\u5165\u53c2\u65701\n * @param[in] y \u8f93\u5165\u53c2\u65702\n * @return int \n */\nint add(int x, int y)\n{\nreturn x + y;\n}\n</code></pre> <p>\u6216\u8005</p> <pre><code>/*!\n * @brief 2\u4e2a\u6574\u5f62\u6570\u636e\u76f8\u52a0\n * \n * @param x \u8f93\u5165\u53c2\u65701\n * @param[in] y \u8f93\u5165\u53c2\u65702\n * @return int \n */\nint add(int x, int y)\n{\nreturn x + y;\n}\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Doxygen/Doxygen%E8%AF%AD%E6%B3%95/#13","title":"1.3 \u6ce8\u91ca\u5728\u6e90\u7801\u4e4b\u540e","text":"<p>doxygen\u9ed8\u8ba4\u662f\u6e90\u7801\u524d\u7684\u6ce8\u91ca\u4f5c\u4e3a\u6b64\u6e90\u7801\u7684\u6ce8\u91ca\uff0c\u5f53\u6ce8\u91ca\u5c3e\u968f\u6e90\u7801\u65f6\uff0c\u8fd9\u6bb5\u6ce8\u91ca\u5c31\u6210\u4e3a\u4e0b\u4e00\u6bb5\u6e90\u7801\u7684\u6ce8\u91ca\u4e86\uff0c\u4e3a\u4e86\u533a\u5206\u6b64\u7c7b\u60c5\u51b5\uff0cdoxygen\u63d0\u4f9b\u4e86<code>&lt;</code>\u7b26\u53f7\u6765\u6807\u6ce8\u6b64\u6ce8\u91ca\u5c5e\u4e8e\u524d\u4e00\u6e90\u7801\u3002 - \u5355\u884c\u6ce8\u91ca\uff1a<code>///&lt;\u6ce8\u91ca</code> - \u5757\u6ce8\u91ca\uff1a<code>/**&lt;\u6ce8\u91ca*/</code>or<code>/*!&lt;\u6ce8\u91ca*/</code></p> <pre><code>int i=2;///&lt;\u5168\u5c40\u53d8\u91cfi\n//or\nint j=2;/**&lt;\u5168\u5c40\u53d8\u91cfj*/\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Doxygen/Doxygen%E8%AF%AD%E6%B3%95/#2","title":"2 \u7279\u6b8a\u6307\u4ee4","text":"<p>doxygen\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u6307\u4ee4\u6765\u6807\u8bb0\u7c7b\uff0c\u51fd\u6570\uff0c\u53d8\u91cf\uff0c\u53c2\u6570\uff0c\u8fd4\u56de\u503c\uff0c\u5f02\u5e38...\uff0c\u8fd9\u4e9b\u7279\u6b8a\u547d\u4ee4\u6709\u5f88\u591a\u3002\u547d\u4ee4\u4ee5<code>@</code>\u6216<code>\\</code>\u5f00\u5934\uff0c\u5982<code>@file</code>\u6216<code>\\file</code>\u8868\u793a\u6587\u4ef6\uff0c\u4ee5\u4e0b\u4ec5\u5217\u4e3e\u91cd\u8981\u7684\u5e38\u7528\u7684\u3002 \u6ce8\u610f\uff1a\u8bed\u6cd5\u5f62\u5f0f\u5217\u8868\u4e2d - <code>[option]</code>\uff1a\u53ef\u9009 - <code>&lt;singleword&gt;</code>\uff1a\u4ec5\u5141\u8bb8\u5355\u4e2a\u5355\u8bcd\uff0c\u5373\u5355\u8bcd\u4e0d\u80fd\u51fa\u73b0\u7a7a\u683c - <code>(lineword)</code>\uff1a\u8868\u793alineword\u662f\u4e00\u884c\uff0c\u8303\u56f4\uff1a\u5728\u884c\u5c3e\u7ed3\u675f - <code>{paragraph}</code>\uff1a\u8868\u793a\u4e00\u6bb5\u4fe1\u606f\uff0c\u8303\u56f4\uff1a\u5728\u4e0b\u4e00\u4e2a\u6307\u4ee4\u524d\u7ed3\u675f\u6216\u4e00\u7a7a\u884c\u5904\u7ed3\u675f - \u547d\u4ee4\u5217<code>@</code>\u4e5f\u53ef\u4ee5\u6362\u6210<code>\\</code></p>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Doxygen/Doxygen%E8%AF%AD%E6%B3%95/#21","title":"2.1 \u6587\u6863\u5934\u6ce8\u91ca","text":"\u6307\u4ee4 \u8bed\u6cd5\u5f62\u5f0f \u8bf4\u660e <code>@file</code> <code>@file [&lt;name&gt;]</code> \u6587\u4ef6\u540d\uff0c\u5f53\u6587\u4ef6\u540d\u5ffd\u7565\uff0c\u9ed8\u8ba4\u662f\u5f53\u524d\u6587\u4ef6 <code>@author</code> <code>@author { list of authors }</code> \u4f5c\u8005\u4fe1\u606f <code>@date</code> <code>@date { date description }</code> \u521b\u5efa\u65e5\u671f <code>@brief </code> <code>@brief { brief description }</code> \u7b80\u8981\u8bf4\u660e <code>@details</code> <code>@details { detailed description }</code> \u8be6\u7ec6\u8bf4\u660e <code>@version</code> <code>@version { version number }</code> \u7248\u672c\u4fe1\u606f <code>@copyright</code> <code>@copyright { copyright description }</code> \u77e5\u8bc6\u7248\u6743\u4fe1\u606f <p>\u793a\u4f8b\u5982\u4e0b</p> <pre><code> /*! \n *  \\brief     Pretty nice class.\n *  @class SomeNiceClass \n *  \\details   This class is used to demonstrate a number of section commands.\n *  \\author    John Doe\n *  \\author    Jan Doe\n *  \\version   4.2.1\n *  \\date      1990-2011\n *  \\pre       First initialize the system.\n *  \\bug       Not all memory is freed when deleting an object of this class.\n *  \\warning   Improper use can crash your application\n *  \\copyright GNU Public License.\n */\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Doxygen/Doxygen%E8%AF%AD%E6%B3%95/#22","title":"2.2 \u51fd\u6570\u76f8\u5173\u6307\u4ee4","text":"\u6307\u4ee4 \u8bed\u6cd5\u5f62\u5f0f \u8bf4\u660e <code>@param</code> <code>@param '['dir']'  { parameter description } \u53c2\u6570\u4fe1\u606f\uff0cdir\u53ef\u4ee5\u662fin,out <code>@return</code> <code>@return { description of the return value }</code> \u8fd4\u56de\u503c\u4fe1\u606f <code>@throw</code> <code>@throw &lt;exception-object&gt; { exception description }</code> \u5f02\u5e38\u4fe1\u606f <p>\u793a\u4f8b\u5982\u4e0b</p> <pre><code>/*!\n * @brief  Copies bytes from a source memory\n * @details Copies bytes from a source memory area to a destination memory area,\n * where both areas may not overlap.\n * @param[out] dest The memory area to copy to.\n * @param[in]  src  The memory area to copy from.\n * @param[in]  n    The number of bytes to copy\n * @return void     no return value\n * @throw std::out_of_range parameter is out of range.\n */\nvoid memcpy(void *dest, const void *src, size_t n);\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Doxygen/Doxygen%E8%AF%AD%E6%B3%95/#23","title":"2.3 \u5176\u5b83\u7279\u6b8a\u6307\u4ee4","text":"\u6307\u4ee4 \u8bed\u6cd5\u5f62\u5f0f \u8bf4\u660e <code>@code</code> <code>@code['{''}'] \u4ee3\u7801\u7247\u6bb5,\u4ee5@code\u5f00\u59cb\uff0c\u4ee5@endcode\u7ed3\u675f <code>@todo</code> <code>@todo { paragraph describing what is to be done }</code> TODO\u6ce8\u91ca <code>@warning</code> <code>@warning { warning message }</code> \u8b66\u544a\u4fe1\u606f <code>@attention</code> <code>@attention { attention text }</code> \u6ce8\u610f\u4fe1\u606f\uff0c\u4e0e@warning\u7c7b\u4f3c <code>@note</code> <code>@note { text }</code> \u6ce8\u91ca\u4fe1\u606f <ul> <li>@code\u793a\u4f8b</li> </ul> <pre><code>/**\n  \\code{.py}\n  class Python:\n     pass\n  \\endcode\n\n  \\code{.cpp}\n  class Cpp {};\n  \\endcode\n    \\code{.unparsed}\n  Show this as-is please\n  \\endcode\n\n  \\code{.sh}\n  echo \"This is a shell script\"\n  \\endcode\n*/\n</code></pre> <ul> <li>\u793a\u4f8b2</li> </ul> <pre><code>/**\n * @brief 2\u4e2a\u6574\u5f62\u6570\u636e\u76f8\u52a0\n * \n * @param[in] y \u8f93\u5165\u53c2\u65702\n * @todo  paragraph describing what is to be done \n * @warning this is a warning\n * @attention this is a attention\n * @note this is a note\n * @return int \n */\nint add(int x/**&lt;\u8f93\u5165\u53c2\u65701*/, int y);\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Doxygen/Doxygen%E8%AF%AD%E6%B3%95/#24","title":"2.4 \u6807\u6ce8\u7c7b\uff0c\u51fd\u6570\uff0c\u679a\u4e3e\u7b49\u6307\u4ee4","text":"<p>doxygen\u53ef\u4ee5\u901a\u8fc7\u5982<code>@fn</code>\u6307\u4ee4\u6307\u5b9a\u51fd\u6570\u540d\uff0c\u7136\u540e\u5c06\u6ce8\u91ca\u653e\u5165\u5176\u5b83\u4f4d\u7f6e\uff08\u5373\u4e0d\u5728\u6b64\u51fd\u6570\u524d\uff09\uff0cdoxygen\u4f9d\u7136\u80fd\u5c06\u6b64\u6ce8\u91ca\u5173\u8054\u5230\u6b64\u51fd\u6570. - <code>@class</code> - <code>@fn</code> - <code>@enum</code> - <code>@file</code></p> <pre><code> /* A dummy class */\n\nclass Test\n{\n};\n\n/*! \\class Test class.h \"inc/class.h\"\n  *  \\brief This is a test class.\n  *\n  * Some details about the Test class.\n  */\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Doxygen/Doxygen%E8%AF%AD%E6%B3%95/#3","title":"3 \u95ee\u9898\u6c47\u603b","text":"<p>\u5728\u5b98\u7f51\u6709\u5927\u91cf\u95ee\u9898\u53ca\u89e3\u7b54\uff0c\u8bf7\u79fb\u6b65\u5b98\u7f51</p>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Doxygen/Doxygen%E9%85%8D%E7%BD%AE/","title":"Doxygen\u914d\u7f6e","text":""},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Doxygen/Doxygen%E9%85%8D%E7%BD%AE/#1","title":"1 \u5b89\u88c5","text":"<ul> <li>windows\uff1a</li> <li>doxygen\u63d0\u4f9b\u4e86exe\u53ef\u76f4\u63a5\u5b89\u88c5\uff0c\u5b89\u88c5\u540e\u53ef\u80fd\u9700\u8981\u5c06\u53ef\u6267\u884c\u6027\u6587\u4ef6\u8def\u5f84\u52a0\u5165path\u73af\u5883\u53d8\u91cf\u4e2d</li> <li>Linux\uff1a\u53c2\u8003\u5b98\u7f51</li> </ul>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Doxygen/Doxygen%E9%85%8D%E7%BD%AE/#2","title":"2 \u4f7f\u7528","text":""},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Doxygen/Doxygen%E9%85%8D%E7%BD%AE/#21","title":"2.1 \u6b65\u9aa4","text":"<ol> <li>\u751f\u6210\u914d\u7f6e\u6587\u4ef6Doxyfile\uff1a<code>doxygen -g</code></li> <li>\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6Doxyfile</li> <li>\u751f\u6210\u6587\u6863\uff1a<code>doxygen</code></li> </ol>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Doxygen/Doxygen%E9%85%8D%E7%BD%AE/#22-doxyfile","title":"2.2 Doxyfile\u6587\u4ef6\u914d\u7f6e","text":"<ul> <li><code>PROJECT_NAME</code>\uff1a\u751f\u6210\u7684\u6587\u6863\u6807\u9898\uff0c\u5982html\u6587\u6863tital\uff0c\u9ed8\u8ba4\u662fMy Project</li> <li><code>OUTPUT_DIRECTORY</code>\uff1a\u6587\u6863\u7684\u751f\u6210\u76ee\u5f55</li> <li><code>INPUT</code>\uff1a\u6e90\u6587\u4ef6\u4f4d\u7f6e,\u591a\u4e2a\u8def\u5f84\u7a7a\u683c\u9694\u5f00\uff0c\u5982<code>INPUT= ../include src</code></li> <li><code>RECURSIVE</code>\uff1a\u662f\u5426\u67e5\u627e\u5b50\u76ee\u5f55\u4e0b\u6e90\u6587\u4ef6\uff0cYES\u662f\uff0cNO\u5426\uff0c\u5982<code>RECURSIVE= YES</code></li> <li><code>EXTRACT_ALL</code>\uff1a\u5f53\u8bbe\u7f6e<code>YES</code>\u65f6\u6240\u6709\u6ce8\u91ca\u90fd\u4f1a\u751f\u6210\u6587\u6863</li> <li><code>EXTRACT_PRIVATE</code>\uff1a\u8bbe\u7f6e<code>YES</code>\u65f6\u79c1\u7528\u6210\u5458\u4f1a\u88ab\u6587\u6863\u5316</li> <li><code>EXTRACT_STATIC</code>\uff1a\u8bbe\u7f6e<code>YES</code>\u65f6\u9759\u6001\u6210\u5458\u4f1a\u88ab\u6587\u6863\u5316 \u66f4\u591a\u8bbe\u7f6e\u8bf7\u79fb\u6b65\u5b98\u7f51</li> </ul>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Doxygen/Doxygen%E9%85%8D%E7%BD%AE/#3","title":"3 \u95ee\u9898\u6c47\u603b","text":"<ul> <li>\u6587\u4ef6\u5934\u58f0\u660e\u7684<code>@file</code>\u6307\u4ee4\u4f1a\u5728html\u6587\u6863\u5bfc\u822a\u680f\u4ea7\u751ffile\u6807\u7b7e</li> <li>\u5728\u4efb\u610f\u6587\u4ef6\u6ce8\u91ca\u5305\u542b<code>@mainpage</code>\u6307\u4ee4\u4f1a\u5728html\u6587\u6863\u7684MainPage\u4ea7\u751f\u4fe1\u606f</li> <li>\u6e90\u7801\u6587\u4ef6\u542b\u6709\u547d\u540d\u7a7a\u95f4\uff0c\u5728html\u6587\u6863\u5bfc\u822a\u680f\u4f1a\u4ea7\u751fnamespaces\u6807\u7b7e</li> <li>\u94fe\u63a5\u51fd\u6570\u9700\u8981\u628a\u51fd\u6570\u53c2\u6570\u5e26\u4e0a \u5728\u5b98\u7f51\u6709\u5927\u91cf\u95ee\u9898\u53ca\u89e3\u7b54\uff0c\u8bf7\u79fb\u6b65\u5b98\u7f51</li> </ul>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Markdown/Markdown%E8%AF%AD%E6%B3%95/","title":"Markdown \u8bed\u6cd5","text":"<ul> <li>\u5b98\u65b9\u6587\u6863</li> <li>\u53c2\u8003</li> </ul>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Markdown/Markdown%E8%AF%AD%E6%B3%95/#1","title":"1 \u5220\u9664\u7ebf","text":"<p>~~\u5220\u9664\u7ebf~~</p> <pre><code>~~\u5220\u9664\u7ebf~~\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Markdown/Markdown%E8%AF%AD%E6%B3%95/#2","title":"2 \u6807\u9898","text":"<pre><code># \u4e00\u7ea7\u6807\u9898\n## \u4e8c\u7ea7\u6807\u9898\n### \u4e09\u7ea7\u6807\u9898\n#### \u56db\u7ea7\u6807\u9898\n##### \u4e94\u7ea7\u6807\u9898\n###### \u516d\u7ea7\u6807\u9898\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Markdown/Markdown%E8%AF%AD%E6%B3%95/#3","title":"3 \u6362\u884c","text":"<pre><code>---\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Markdown/Markdown%E8%AF%AD%E6%B3%95/#4","title":"4 \u5b57\u4f53","text":"<p>\u659c\u4f53 \u52a0\u7c97</p> <pre><code>*\u659c\u4f53*\n**\u52a0\u7c97**\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Markdown/Markdown%E8%AF%AD%E6%B3%95/#5","title":"5 \u94fe\u63a5","text":"<ul> <li>github </li> </ul> <pre><code>[github](https://github.com/shuhaiwen)\n</code></pre> <ul> <li>https://github.com/shuhaiwen \u81ea\u52a8\u8bc6\u522b\u7f51\u5740 </li> </ul> <pre><code>https://github.com/shuhaiwen \u81ea\u52a8\u8bc6\u522b\u7f51\u5740\n</code></pre> <ul> <li>\u94fe\u63a5\u6807\u9898</li> </ul> <pre><code>[\u94fe\u63a5\u6807\u9898](#\u6807\u9898)\n</code></pre> <ul> <li>github \u5f15\u7528\u94fe\u63a5 </li> </ul> <pre><code>[github][1] \u5f15\u7528\u94fe\u63a5\n</code></pre> <pre><code>[1]: https://github.com/shuhaiwen \"title\"\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Markdown/Markdown%E8%AF%AD%E6%B3%95/#6","title":"6 \u56fe\u7247","text":"<pre><code>![\u56fe\u7247](https://gitee.com/shuhaiwen/image-host/raw/master/Img/Icon/Color/github-color.svg 'svg')\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Markdown/Markdown%E8%AF%AD%E6%B3%95/#7","title":"7 \u5f85\u529e","text":"<ul> <li>[x] 11</li> <li>[ ] 22</li> </ul> <pre><code>- [x] 11\n- [ ] 22\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Markdown/Markdown%E8%AF%AD%E6%B3%95/#8","title":"8 \u8868\u683c","text":"id name age 10000 Tim 18 10001 Anny 20 102 Bob 9 <pre><code>|id|name|age|\n|:----|:----:|----:|\n|10000|Tim|18|\n|10001|Anny|20|\n|102|Bob|9|\n</code></pre> <p>\u5176\u4e2d\u5bf9\u9f50\u5c5e\u6027\u7531\u4e0b\u9762\u8bed\u6cd5\u6807\u8bc6 - \u5de6\u5bf9\u9f50<code>:----</code> - \u5c45\u4e2d<code>:----:</code> - \u53f3\u5bf9\u9f50<code>----:</code></p>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Markdown/Markdown%E8%AF%AD%E6%B3%95/#9","title":"9 \u516c\u5f0f","text":"<ul> <li>\u53c2\u8003\u8d44\u6599</li> </ul>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/MkDocs/MkDocs/","title":"MkDocs","text":"<ul> <li>mkdocs</li> <li>mkdocs-material</li> <li>https://zhuanlan.zhihu.com/p/383582472 <p>\u662f\u4e00\u4e2a\u7528\u4e8e\u521b\u5efa\u9879\u76ee\u6587\u6863\u7684\u5feb\u901f, \u7b80\u5355, \u5b8c\u7f8e\u534e\u4e3d\u7684\u9759\u6001\u7ad9\u70b9\u751f\u6210\u5668. \u6587\u6863\u6e90\u7801\u4f7f\u7528Markdown \u6765\u64b0\u5199, \u7528\u4e00\u4e2aYAML \u6587\u4ef6\u4f5c\u4e3a\u914d\u7f6e\u6587\u6863</p> </li> </ul>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/MkDocs/MkDocs/#1","title":"1 \u57fa\u7840\u547d\u4ee4","text":"<p>For full documentation visit\u00a0mkdocs.org.</p>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/MkDocs/MkDocs/#11-commands","title":"1.1 Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code>\u00a0- Create a new project.</li> <li><code>mkdocs serve</code>\u00a0- Start the live-reloading docs server.</li> <li><code>mkdocs build</code>\u00a0- Build the documentation site.</li> <li><code>mkdocs -h</code>\u00a0- Print help message and exit.</li> </ul>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/MkDocs/MkDocs/#12-project-layout","title":"1.2 Project layout","text":"<pre><code>mkdocs.yml    ## The configuration file.\ndocs/\n    index.md  ## The documentation homepage.\n    ...       ## Other markdown pages, images and other files.\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/MkDocs/MkDocs/#2-mkdocsyml","title":"2 mkdocs.yml \u914d\u7f6e","text":""},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/MkDocs/MkDocs/#21-site_name","title":"2.1 site_name","text":""},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Sphinx/Sphinx/","title":"Sphinx","text":"<ul> <li>Sphinx</li> <li>https://learn-rst.readthedocs.io/zh_CN/latest/sphinx.html</li> <li>Sphinx\u4e3b\u9898 Sphinx \u4f7f\u60a8\u53ef\u4ee5\u8f7b\u677e\u521b\u5efa\u667a\u80fd\u800c\u7f8e\u89c2\u7684\u6587\u6863\u3002</li> </ul>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Sphinx/Sphinx/#1","title":"1 \u5b89\u88c5","text":"<ul> <li><code>pip install sphinx</code> \uff1a\u6267\u884c\u6210\u529f\u4f1a\u5b89\u88c5 sphinx-apidoc\u3001sphinx-autogen\u3001sphinx-build\u3001sphinx-quickstart \u56db\u4e2a\u5de5\u5177</li> </ul>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Sphinx/Sphinx/#2-sphinx-quickstart","title":"2 sphinx-quickstart","text":"<ul> <li>https://www.sphinx-doc.org/en/master/man/sphinx-quickstart.html sphinx-quickstart \u662f\u4e00\u4e2a\u4ea4\u4e92\u5f0f\u5de5\u5177\uff0c\u5b83\u8be2\u95ee\u6709\u5173\u9879\u76ee\u7684\u4e00\u4e9b\u95ee\u9898\uff0c\u7136\u540e\u751f\u6210\u4e00\u4e2a\u5b8c\u6574\u7684\u6587\u6863\u76ee\u5f55\u548c\u793a\u4f8b Makefile\uff0c\u7528\u4e8e sphinx-build\u3002</li> </ul>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Sphinx/Sphinx/#21","title":"2.1 \u4ea4\u4e92\u5f0f\u65b9\u5f0f","text":"<p>\u6b64\u4e2d\u65b9\u5f0f\u53ea\u9700\u8981\u6267\u884c <code>sphinx-quickstart</code>\uff0c\u7136\u540e\u6839\u636e\u63d0\u793a\uff0c\u9009\u62e9\uff0c\u586b\u5165\u9879\u76ee\u540d\u3001\u4f5c\u8005\u3001\u7248\u672c\u3001\u8bed\u8a00\u7b49\u4fe1\u606f\u3002 </p>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Sphinx/Sphinx/#22","title":"2.2 \u975e\u4ea4\u4e92\u65b9\u5f0f","text":"<p>\u6b64\u65b9\u5f0f\u63d0\u524d\u628a\u9700\u8981\u7684\u4fe1\u5fc3\u4ee5\u53c2\u6570\u7684\u5f62\u5f0f\u4f20\u5165 <code>sphinx-quickstart</code> \u4e2d, \u5982\uff1a</p> <pre><code>[shw@rocky test2]$ sphinx-quickstart -q -p test2 -a shw -v 0 --sep\n\nFinished: An initial directory structure has been created.\n\nYou should now populate your master file /home/shw/code/sphinx/test2/source/index.rst and create other documentation\nsource files. Use the Makefile to build the docs, like so:\n   make builder\nwhere \"builder\" is one of the supported builders, e.g. html, latex or linkcheck.\n</code></pre> <p>\u9700\u8981\u6307\u5b9a <code>-q</code> \u9009\u9879\uff0c\u8bf4\u660e\u4e0d\u9700\u8981\u4ea4\u4e92\uff0c\u7136\u540e\u8fd8\u5fc5\u987b\u6307\u5b9a <code>-p</code>, <code>-a</code>, <code>-v</code> \u9009\u9879\u3002 \u4ee5\u4e0b\u4e00\u4e9b\u5e38\u7528\u9009\u9879\uff1a</p> <pre><code>optional arguments:\n  -h, --help            show this help message and exit\n-q, --quiet           quiet mode\n  --version             show program's version number and exit\n\nStructure options:\n  --sep                 if specified, separate source and build dirs\n--no-sep              if specified, create build dir under source dir\n  --dot DOT             replacement for dot in _templates etc.\n\nProject basic options:\n  -p PROJECT, --project PROJECT\n                        project name\n  -a AUTHOR, --author AUTHOR\n                        author names\n  -v VERSION            version of project\n  -r RELEASE, --release RELEASE\n                        release of project\n  -l LANGUAGE, --language LANGUAGE\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Sphinx/Sphinx/#3-sphinx-build","title":"3 sphinx-build","text":"<ul> <li>https://www.sphinx-doc.org/en/master/man/sphinx-build.html</li> <li>\u8bed\u6cd5\uff1a<code>sphinx-build [OPTIONS] SOURCEDIR OUTPUTDIR [FILENAMES...]</code> sphinx build \u67e5\u627e\u914d\u7f6e\u8bbe\u7f6e\u7684 <code>&lt;sourcedir&gt;/conf.py</code>\u3002</li> <li>\u793a\u4f8b\uff1a<code>sphinx-build ./ build-dir</code>\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u8868\u793a\u6e90\u76ee\u5f55\u662f\u5f53\u524d\u76ee\u5f55\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8868\u793a\u751f\u6210\u4f4d\u7f6e\u6240\u5728\u76ee\u5f55\u662f build-dir </li> </ul> <pre><code>usage: sphinx-build [OPTIONS] SOURCEDIR OUTPUTDIR [FILENAMES...]\n\nGenerate documentation from source files. sphinx-build generates documentation from the files in SOURCEDIR and places it in OUTPUTDIR. It looks for 'conf.py' in SOURCEDIR for the\nconfiguration settings. The 'sphinx-quickstart' tool may be used to generate template files, including 'conf.py' sphinx-build can create documentation in different formats. A format is\nselected by specifying the builder name on the command line; it defaults to HTML. Builders can also perform other tasks related to documentation processing. By default, everything that is\noutdated is built. Output only for selected files can be built by specifying individual filenames.\n\npositional arguments:\n  sourcedir         path to documentation source files\n  outputdir         path to output directory\n  filenames         a list of specific files to rebuild. Ignored if -a is specified\n\noptional arguments:\n  -h, --help        show this help message and exit\n  --version         show program's version number and exit\n\ngeneral options:\n  -b BUILDER        builder to use (default: html)\n  -a                write all files (default: only write new and changed files)\n  -E                don't use a saved environment, always read all files\n  -d PATH           path for the cached environment and doctree files (default: OUTPUTDIR/.doctrees)\n  -j N              build in parallel with N processes where possible (special value \"auto\" will set N to cpu-count)\n\nbuild configuration options:\n  -c PATH           path where configuration file (conf.py) is located (default: same as SOURCEDIR)\n  -C                use no config file at all, only -D options\n  -D setting=value  override a setting in configuration file\n  -A name=value     pass a value into HTML templates\n  -t TAG            define tag: include \"only\" blocks with TAG\n  -n                nit-picky mode, warn about all missing references\n\nconsole output options:\n  -v                increase verbosity (can be repeated)\n  -q                no output on stdout, just warnings on stderr\n  -Q                no output at all, not even warnings\n  --color           do emit colored output (default: auto-detect)\n  1. -N, --no-color    do not emit colored output (default: auto-detect)\n  -w FILE           write warnings (and errors) to given file\n  -W                turn warnings into errors\n  --keep-going      with -W, keep going when getting warnings\n  -T                show full traceback on exception\n  -P                run Pdb on exception\n\nFor more information, visit &lt;https://www.sphinx-doc.org/&gt;.\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Sphinx/Sphinx/#31-b-buildername","title":"3.1 -b buildername \u6307\u5b9a\u6784\u5efa\u76ee\u6807\u7c7b\u578b\uff08\u8fc7\u65f6\uff09","text":"<p>Sphinx \u80fd\u6784\u5efa\u4ee5\u4e0b\u7c7b\u578b\u7684\u6587\u4ef6\uff0c\u4e0d\u6307\u5b9a\uff0c\u5219\u9ed8\u8ba4\u8f93\u51fa html \u683c\u5f0f\u6587\u4ef6\u3002   1. <code>html</code> : to make standalone HTML files   2. <code>dirhtml</code> : to make HTML files named index.html in directories   3. <code>singlehtml</code> : to make a single large HTML file   4. <code>pickle</code> : to make pickle files   5. <code>json</code> : to make JSON files   6. <code>htmlhelp</code> : to make HTML files and an HTML help project   7. <code>qthelp</code> : to make HTML files and a qthelp project   8. <code>devhelp</code> : to make HTML files and a Devhelp project   9. <code>epub</code> : to make an epub   10. <code>latex</code> : to make LaTeX files, you can set PAPER=a4 or PAPER=letter   11. <code>latexpdf</code> : to make LaTeX and PDF files (default pdflatex)   12. <code>latexpdfja</code> : to make LaTeX files and run them through platex/dvipdfmx   13. <code>text</code> : to make text files   14. <code>man</code> : to make manual pages   15. <code>texinfo</code> : to make Texinfo files   16. <code>info</code> : to make Texinfo files and run them through makeinfo   17. <code>gettext</code> : to make PO message catalogs   18. <code>changes</code> : to make an overview of all changed/added/deprecated items   19. <code>xml</code> : to make Docutils-native XML files   20. <code>pseudoxml</code> : to make pseudoxml-XML files for display purposes</p>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/Sphinx/Sphinx/#32-m-buildername","title":"3.2 -M buildername","text":"<p>\u7528\u4e8e\u53d6\u4ee3-b \u9009\u9879\u7684\uff0c\u76f8\u6bd4\u8f83-b \u9009\u9879\uff0c\u4f1a\u9996\u5148\u521b\u5efa\u4e00\u4e2a\u6784\u5efa\u7c7b\u522b\u76ee\u5f55\uff0c\u7136\u540e\u6784\u5efa\u751f\u6210\u7684\u76ee\u6807\u6587\u4ef6\u4f1a\u653e\u5728\u6b64\u76ee\u5f55\u3002</p>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/reStructuredText/reStructuredText/","title":"reStructuredText","text":""},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/reStructuredText/reStructuredText/#1-restructuredtext","title":"1 reStructuredText","text":"<ul> <li>https://docutils.sourceforge.io/rst.html</li> <li>https://learn-rst.readthedocs.io/zh_CN/latest/index.html</li> <li>https://ebf-contribute-guide.readthedocs.io/zh_CN/latest/index.html</li> <li>reStructuredText\u6307\u4ee4</li> <li>https://pandemic-overview.readthedocs.io/en/latest/myGuides/reStructuredText-Paragraphs.html</li> </ul> <pre><code>\u5b9e\u4e8b\u6c42\u662f\u7684\u8bf4 Markdown \u8bed\u6cd5\u6bd4 reStructuredText \u8bed\u6cd5\u7b80\u6d01\u5f88\u591a\u3002\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/reStructuredText/reStructuredText/#11","title":"1.1 \u7edf\u4e00\u6027","text":"<p>Markdown \u6709\u5927\u91cf\u7684\u884d\u751f\u7248\uff0c\u5b83\u4eec\u90fd\u652f\u6301\u6700\u57fa\u672c\u7684 Markdown \u8bed\u6cd5\uff0c\u4f46\u53c8\u5404\u81ea\u6709\u6240\u6269\u5c55\u3002\u4e3b\u8981\u7684\u884d\u751f\u7248\u6709\uff1a\u00a0CommonMark\u00a0\u3001\u00a0GitHub Flavored Markdown (GFM)\u00a0\u3001\u00a0Markdown Extra\u00a0\u3001\u00a0MultiMarkdown\u00a0\u3001\u00a0Pandoc Markdown\u00a0\u3002\u5404\u79cd\u884d\u751f\u7248\u7684\u8bed\u6cd5\u6709\u4e00\u90e8\u5206\u662f\u4e92\u4e0d\u517c\u5bb9\u7684\u3002\u7531\u4e8e\u6280\u672f\u539f\u56e0\u548c\u5386\u53f2\u539f\u56e0\uff0c\u77ed\u671f\u5185 Markdown \u4e16\u754c\u662f\u65e0\u6cd5\u7edf\u4e00\u7684\u3002</p> <p>reStructuredText \u4e0d\u5b58\u5728\u8fd9\u4e2a\u95ee\u9898\uff0c\u5230\u76ee\u524d\u4e3a\u6b62\uff0c reStructuredText \u53ea\u6709\u4e00\u4e2a\u89c4\u8303\u548c\u4e00\u4e2a\u6d3b\u8dc3\u7684\u89c4\u8303\u5b9e\u73b0 \u2014\u00a0docutils\u00a0\u3002</p>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/reStructuredText/reStructuredText/#12","title":"1.2 \u6269\u5c55\u6027","text":"<p>Markdown \u884d\u751f\u7248\u4f17\u591a\u7684\u539f\u56e0\u662f\u5b83\u7684\u6838\u5fc3\u8bbe\u8ba1\u6ca1\u6709\u8003\u8651\u53ef\u6269\u5c55\u673a\u5236\u3002\u5f53\u4e00\u4e2a\u65b0\u7684\u9700\u6c42\u6765\u4e34\u65f6\uff0c\u5fc5\u987b\u4fee\u6539\u89e3\u6790\u5668\uff0c\u56e0\u6b64\u624d\u6709\u4e86\u73b0\u5728\u8fd9\u4e48\u591a\u7684 Markdown \u5b64\u5c9b\u3002\u76f8\u53cd\uff0c reStructuredText \u53ef\u901a\u8fc7\u00a0role\u00a0\u548c\u00a0directive\u00a0\u8fdb\u884c\u6269\u5c55\u3002\u901a\u8fc7\u6ce8\u518c\uff0c\u5c31\u80fd\u5c06\u6269\u5c55\u7684\u529f\u80fd\u6dfb\u52a0\u5230 reStructuredText \uff0c \u5e76\u4e14reStructuredText \u7684\u6838\u5fc3\u80fd\u591f\u4ee5\u4e00\u81f4\u7684\u65b9\u5f0f\u8c03\u7528\u6269\u5c55\u6a21\u5757\u7684\u4ee3\u7801\u3002\u6587\u6863\u7cfb\u7edf\u00a0Sphinx\u00a0\u548c \u9759\u6001\u7f51\u9875\u751f\u6210\u5668\u00a0Pelican\u00a0\u5c31\u662f\u5229\u7528\u8fd9\u79cd\u6269\u5c55\u673a\u5236\u5b9e\u73b0\u7684\u3002</p>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/reStructuredText/reStructuredText/#2","title":"2 \u8bed\u6cd5","text":""},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/reStructuredText/reStructuredText/#21","title":"2.1 \u6807\u9898","text":"<pre><code>title: \u6807\u9898\u7ea7\u522b\u5212\u5206\u89c4\u5219\n\u6807\u9898\u7ea7\u522b\u4e0d\u662f\u4ee5**\u6807\u8bb0\u7b26\u7c7b\u522b\u6216\u8005\u6807\u8bb0\u7b26\u6570\u91cf**\u6765\u533a\u5206\u7684\uff0c\u5b83\u662f\u4ee5\u6807\u9898**\u6807\u8bb0\u7b26\u51fa\u73b0\u7684\u987a\u5e8f**\u6765\u5212\u5206\u6807\u9898\u7ea7\u522b\u7684\u3002\u5982\u9996\u6b21\u4f7f\u7528`#`\u7b26\u53f7\u6807\u8bb0\u6807\u9898\uff0c\u5219`#`\u7b26\u53f7\u5c06\u4f5c\u4e3a\u4e00\u7ea7\u6807\u9898\uff0c\u540e\u9762\u518d\u6b21\u4f7f\u7528`#`\u7b26\u53f7\u6807\u8bb0\u6807\u9898\u5c06\u6c38\u8fdc\u662f\u4e00\u7ea7\u6807\u9898\u3002\u63a5\u7740\u4f7f\u7528\u4e86`=`\u7b26\u53f7\u6807\u8bb0\u6807\u9898\uff0c\u90a3\u4e48\u8fd9\u4e2a`=`\u5c06\u6c38\u8fdc\u4f5c\u4e3a\u7b2c\u4e8c\u7ea7\u6807\u9898\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\n</code></pre> <p>\u53ef\u7528\u7684\u6807\u8bb0\u7b26\uff1a</p> <pre><code>! \" ## $ % &amp; ' ( ) * + , - . / : ; &lt; = &gt; ? @ [ \\ ] ^ _ ` { | } ~\n</code></pre> <p>\u5e38\u7528\u7684\u6807\u8bb0\u7b26\uff1a</p> <pre><code>= - ` : . ' \" ~ ^ _ * + #\n</code></pre> <p>\u6807\u9898\u6807\u8bb0\u7b26\u6570\u91cf\u6709 2 \u4e2d\u5f62\u5f0f\uff1a 1. \u4e00\u79cd\u6807\u9898\u524d\u540e\u90fd\u7528\u6807\u8bb0\u7b26\u5305\u88f9 2. \u4e00\u79cd\u53ea\u5728\u6807\u9898\u540e\u5305\u88f9</p> <pre><code>===============\n Section Title\n===============\n\n---------------\n Section Title\n---------------\n\nSection Title\n=============\n\nSection Title\n-------------\n</code></pre> <p>\u6807\u8bb0\u7b26\u7684\u6570\u91cf\u4e00\u5b9a\u8981\u548c\u6807\u9898\u6570\u91cf\u76f8\u540c\uff0c\u5982\u679c\u662f\u4e2d\u6587\uff0c\u4e00\u4e2a\u4e2d\u6587\u7528 2 \u4e2a\u6807\u8bb0\u7b26\uff0c\u5982\uff1a\u4ee5\u4e0b\u6807\u98984 \u4e2a\u4e2d\u6587\u9700\u8981 8 \u4e2a\u6807\u8bb0\u7b26</p> <pre><code>\u4e00\u7ea7\u6807\u9898\n--------\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/reStructuredText/reStructuredText/#22","title":"2.2 \u6bb5\u843d","text":"<p>\u4e00\u4e2a\u6bb5\u843d\u5c31\u662f\u4e00\u6bb5\u7528\u7a7a\u884c\u4e0e\u5176\u4ed6\u7ed3\u6784\u8fdb\u884c\u5206\u9694\u7684\u6587\u672c\u533a\u57df\u3002\u5728\u4e00\u4e2a\u6bb5\u843d\u4e2d\uff0c\u53ef\u4ee5\u7528\u6362\u884c\u6765\u5212\u5206\u4e0d\u540c\u7684\u90e8\u5206\uff0c\u53ea\u8981\u5b83\u4eec\u4e2d\u95f4\u6ca1\u6709\u4ea7\u751f\u7a7a\u884c\u5c31\u4f1a\u88ab\u89e3\u6790\u4e3a\u540c\u4e00\u4e2a\u6bb5\u843d\u3002</p> <pre><code>\u8fd9\u662f\u4e00\u4e2a\u6bb5\u843d\uff0c\u6709\u70b9\u77ed\u3002\n\u65b0\u7684\u4e00\u884c\u5177\u6709\u76f8\u540c\u7f29\u8fdb\uff0c\u90a3\u4e48\u8fd9\u4e24\u53e5\u662f\u540c\u4e00\u6bb5\u3002\n\n\u4e0a\u9762\u662f\u4e00\u4e2a\u7a7a\u884c\uff0c\u8fd9\u662f\u4e00\u4e2a\u65b0\u7684\u6bb5\u843d\u3002\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/reStructuredText/reStructuredText/#23","title":"2.3 \u5206\u5272\u7ebf","text":"<p>\u4efb\u610f 4 \u4e2a\u4ee5\u4e0a\u7684\u6807\u8bb0\u7b26\u8868\u793a\u5206\u5272\u7ebf\uff08markdown \u662f 3 \u4e2a\u4ee5\u4e0a\uff09\u3002</p> <pre><code>title\n#####\n\u4e00\u6bb5\u8bdd\n\n----\n\n\u53c8\u4e00\u6bb5\u8bdd\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/reStructuredText/reStructuredText/#24","title":"2.4 \u5185\u8054\u6807\u8bb0","text":"<pre><code>\u8fd9\u4e9b\u5185\u8054\u6807\u8bb0\u5b9e\u9645\u4e0a\u662f\u5404\u79cdrole\uff0c\u8be6\u89c1\u4e0b\u9762\u793a\u4f8b\u3002\n</code></pre> <ul> <li>\u659c\u4f53\uff1a<code>*\u659c\u4f53*</code></li> <li>\u52a0\u7c97\uff1a<code>**\u52a0\u7c97**</code></li> <li>\u89e3\u91ca\u6027\u6587\u672c\uff1a</li> <li>\u5b57\u9762\u91cf\uff1a\u901a\u5e38\u7528\u4e8e\u5305\u88f9\u7279\u6b8a\u7b26\u53f7</li> </ul> <pre><code>*\u7740\u91cd*\uff0c:emphasis:`\u7740\u91cd`\n**\u5f3a\u8c03**\uff0c:strong:`\u5f3a\u8c03`\n`\u89e3\u91ca\u6027\u6587\u672c`\n``\u5b57\u9762\u91cf``\uff0c:literal:`\u5b57\u9762\u91cf`\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/reStructuredText/reStructuredText/#25","title":"2.5 \u5217\u8868","text":"<p>\u6709\u4e09\u79cd\u98ce\u683c\u6765\u8868\u793a\u4e00\u5217\u9879\u76ee\uff0c\u5206\u522b\u662f\u65e0\u5e8f\u5217\u8868\u3001\u6709\u5e8f\u5217\u8868\u3001\u5b9a\u4e49\u5217\u8868\u3002\u65e0\u5e8f\u5217\u8868\u7528 <code>*</code>, <code>-</code>, <code>+</code> \u505a\u9879\u76ee\u7b26\u53f7\uff0c\u6709\u5e8f\u5217\u8868\u53ef\u4ee5\u7528\u6570\u5b57\u3001\u5b57\u6bcd\u3001\u7f57\u9a6c\u6570\u5b57\u52a0\u4e0a\u70b9\uff08<code>.</code>\uff09\u3001\u53f3\u82f1\u6587\u62ec\u53f7\uff08<code>)</code>\uff09\u6216\u7528\u82f1\u6587\u62ec\u53f7\u5b8c\u5168\u5305\u56f4 \u2013 \u65e0\u8bba\u4f60\u504f\u597d\u4ec0\u4e48\uff0c\u90fd\u80fd\u8bc6\u522b:</p> <pre><code>*   \u65e0\u5e8f 1\n\n-   \u65e0\u5e8f 2\n\n+   \u65e0\u5e8f 3\n\n1.  \u6709\u5e8f 1\n\n2)  \u6709\u5e8f 2)\n\n(3) \u6709\u5e8f (3)\n\ni.  \u6709\u5e8f \u4e00\n\nII.  \u6709\u5e8f \u8d30\n\nc.  \u6709\u5e8f three\n</code></pre> <p>\u5d4c\u5957\u5217\u8868\u4f7f\u7528\u7f29\u8fdb\u5373\u53ef\u3002</p>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/reStructuredText/reStructuredText/#251","title":"2.5.1 \u5b9a\u4e49\u5217\u8868","text":"<p>\u4e0e\u5176\u4ed6\u4e24\u4e2a\u4e0d\u540c\uff0c\u5b9a\u4e49\u5217\u8868\u7531\u4e00\u4e2a\u672f\u8bed\u548c\u8be5\u672f\u8bed\u7684\u5b9a\u4e49\u7ec4\u6210\u3002\u5b9a\u4e49\u5217\u8868\u7684\u683c\u5f0f\u4e3a\uff1a</p> <pre><code>what\n  Definition lists associate a term with a definition.\n\n*how*\n  The term is a one-line phrase, and the definition is one or more\n  paragraphs or body elements, indented relative to the term.\n  Blank lines are not allowed between term and definition.\n</code></pre> <p>\u5b9a\u4e49\u4ee5\u7f29\u8fdb\u8868\u793a\uff0c\u7ed3\u675f\u8981\u95f4\u9694\u4e00\u7a7a\u884c\u3002</p>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/reStructuredText/reStructuredText/#26","title":"2.6 \u8d85\u94fe\u63a5","text":"<p>reStructuredText \u4e00\u4e2a\u8d85\u94fe\u63a5\u9700\u8981\u6709\u4e24\u4e2a\u90e8\u5206\uff1a\u5f15\u7528\u548c\u9776\u6807:</p> <pre><code>\u5f15\u7528\u90e8\u5206\u9700\u8981\u5728\u540d\u79f0\u540e\u52a0\u4e0b\u5212\u7ebf\uff1a\u94fe\u63a5_\n\u5982\u679c\u540d\u79f0\u4e2d\u5305\u542b\u4e86\u7a7a\u683c\uff0c\u5219\u9700\u8981\u7528\u53cd\u5f15\u53f7\u5305\u62ec\u8d77\u6765\uff1a`\u94fe \u63a5`_\u3002\n\n\u9776\u6807\u90e8\u5206\u7684\u4e0b\u5212\u7ebf\u5728\u540d\u79f0\u524d\u9762\uff1a\n\n.. _\u94fe\u63a5: https://docutils.sourceforge.io/docs/user/rst/quickref.html\n\n\u5982\u679c\u7559\u7a7a\uff0c\u5219\u4f1a\u5c06\u9776\u6807\u5f15\u81f3\u4e0b\u4e00\u4e2a\u5757\u5143\u7d20\u3002\n</code></pre> <p>\u5f15\u7528\u548c\u9776\u6807\u4e5f\u53ef\u4ee5\u5199\u5728\u540c\u4e00\u5904:</p> <pre><code>`\u540d\u79f0 &lt;https://docutils.sourceforge.io/docs/user/rst/quickref.html&gt;`__\n\n\u5373 `name &lt;target&gt;`_ \u7684\u5f62\u5f0f\u3002\u524d\u8005\u5c06\u4f1a\u6e32\u67d3\u4e3a\u663e\u793a\u540d\u79f0\uff0c\u540e\u8005\u5c06\u4f1a\u4f5c\u4e3a\u9776\u6807\u3002\n</code></pre> <p>\u9776\u6807\u4e5f\u6709\u5185\u8054\u5f62\u5f0f\uff0c\u4f8b\u5982:</p> <pre><code>_`\u9776\u6807` \u5728\u8fd9\u91cc\uff0c\u800c\u5f15\u7528\u5c06\u4f1a\u5f15\u81f3\u524d\u9762\u7684 \u9776\u6807_ \u5904\u3002\n</code></pre> <p>\u9690\u5f0f\u8d85\u94fe\u63a5\u53ef\u4ee5\u5c06\u5f15\u7528\u5f15\u81f3\u6807\u9898:</p> <pre><code>\u6b63\u5982\u4e0b\u9762\u7684 `\u6807\u9898`_ \u7ae0\u8282\u6240\u8bf4\u4e00\u6837\u3002\n</code></pre> <p>\u4efb\u4f55\u6ee1\u8db3 Uri \u5f62\u5f0f\u7684\u6587\u672c\u4f1a\u5728\u6e32\u67d3\u6d41\u7a0b\u7684\u6700\u540e\u88ab\u8bc6\u522b\u4e3a\u8d85\u94fe\u63a5:</p> <pre><code>-   https://docutils.sourceforge.io/docs/user/rst/quickref.html#hyperlink-targets\n-   ftp://firefox.fake-mozilla.org/\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/reStructuredText/reStructuredText/#27","title":"2.7 \u56fe\u7247","text":""},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/reStructuredText/reStructuredText/#271-image","title":"2.7.1 image","text":"<p>\u793a\u4f8b\uff1a</p> <pre><code>.. image:: ../media/rest-syntax/pic-video/logo.png\n   :align: center\n   :alt: \u91ce\u706blogo\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/reStructuredText/reStructuredText/#272-figure","title":"2.7.2 figure \u63d2\u56fe","text":"<p>\u793a\u4f8b\uff1a</p> <pre><code>.. figure: ../media/rest-syntax/pic-video/logo.png\n   :alt: \u91ce\u706blogo\n   :align: center\n   :caption: \u91ce\u706blogo\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/reStructuredText/reStructuredText/#28","title":"2.8 \u89c6\u9891","text":"<p>\u76f4\u63a5\u4f7f\u7528 raw \u6307\u4ee4\u518d\u63d2\u5165\u539f\u751f html \u8bed\u53e5\u3002</p> <pre><code>.. raw:: html\n\n&lt;iframe height=498 width=510 src='http://player.youku.com/embed/XMzk2MzQxNTQ3Ng==' frameborder=0 'allowfullscreen'&gt;&lt;/iframe&gt;\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/reStructuredText/reStructuredText/#29","title":"2.9 \u4ee3\u7801\u5757","text":""},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/reStructuredText/reStructuredText/#291-code-block-code","title":"2.9.1 code-block \u6216\u8005 code","text":"<ol> <li>2 \u4e2a\u70b9\u53f7</li> <li>\u4e00\u4e2a\u7a7a\u683c</li> <li>\u6307\u4ee4\u540d\u79f0 code \u6216\u8005 code-block</li> <li>2 \u4e2a\u5192\u53f7</li> <li>\u4e00\u4e2a\u7a7a\u683c</li> <li>\u4e00\u4e2a\u8bed\u8a00\u540d\u79f0\uff08c\u3001sh\u3001python \u7b49\uff09 \u8bed\u6cd5\u5982\u4e0b\uff1a</li> </ol> <pre><code>.. code-block:: c\n\n    int main()\n    {\n    printf(\"hello world!\");\n    }\n\n.. code:: c\n\n    int main()\n    {\n    printf(\"hello world!\");\n    }\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/reStructuredText/reStructuredText/#210","title":"2.10 \u8868\u683c","text":""},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/reStructuredText/reStructuredText/#2101-table","title":"2.10.1 table","text":"<pre><code>.. table:: Truth table for \"not\"\n   :widths: auto\n\n   =====  =====\n     A    not A\n   =====  =====\n   False  True\n   True   False\n   =====  =====\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/reStructuredText/reStructuredText/#2102-csv-table","title":"2.10.2 csv-table","text":"<pre><code>.. csv-table:: Frozen Delights!\n   :header: \"Treat\", \"Quantity\", \"Description\"\n   :widths: 15, 10, 30\n\n   \"Albatross\", 2.99, \"On a stick!\"\n   \"Crunchy Frog\", 1.49, \"If we took the bones out, it wouldn't be\n   crunchy, now would it?\"\n   \"Gannet Ripple\", 1.99, \"On a stick!\"\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/reStructuredText/reStructuredText/#2103-list-table","title":"2.10.3 list-table","text":"<pre><code>.. list-table:: Frozen Delights!\n   :widths: 15 10 30\n   :header-rows: 1\n\n   * - Treat\n     - Quantity\n     - Description\n   * - Albatross\n     - 2.99\n     - On a stick!\n   * - Crunchy Frog\n     - 1.49\n     - If we took the bones out, it wouldn't be\n       crunchy, now would it?\n   * - Gannet Ripple\n     - 1.99\n     - On a stick!\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/reStructuredText/reStructuredText/#211-directive","title":"2.11 \u6307\u4ee4 directive","text":"<ul> <li>https://docutils.sourceforge.io/docs/ref/rst/directives.html \u8bed\u6cd5\u683c\u5f0f\u5982\u4e0b\uff1a</li> </ul> <pre><code>.. directive\u540d:: \u53c2\u6570\n   :\u53c2\u6570:\n   :\u53c2\u6570:\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/reStructuredText/reStructuredText/#2111-admonitions","title":"2.11.1 Admonitions","text":"<p>\u7279\u6b8a\u63d0\u793a\u652f\u6301\u8b66\u544a\u3001\u91cd\u8981\u3001\u63d0\u793a\u3001\u6ce8\u610f\u7b49\u6807\u7b7e\uff0c\u9002\u5408\u505a\u663e\u773c\u7684\u7528\u9014\u3002\u652f\u6301\u5982\u4e0b\uff1a - attention - caution - danger - error - hint - important - note - tip - warning</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>.. note:: This is a note admonition.\n This is the second line of the first paragraph.\n\n - The note contains all indented body elements\n   following.\n - It includes this bullet list.\n\n.. hint:: This is a hint admonition.\n\n.. important:: This is a important admonition.\n\n.. tip:: This is a tip admonition.\n\n.. warning:: This is a warning admonition.\n\n.. caution:: This is a caution admonition.\n\n.. attention:: This is a attention admonition.\n\n.. error:: This is a error admonition.\n\n.. danger:: This is a danger admonition.\n</code></pre>"},{"location":"Documents/C-Tool/%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F/reStructuredText/reStructuredText/#212-role","title":"2.12 \u89d2\u8272 role","text":"<ul> <li>https://docutils.sourceforge.io/docs/ref/rst/roles.html \u8bed\u6cd5\u683c\u5f0f\u5982\u4e0b\uff1a</li> </ul> <pre><code>:role\u540d: \u5185\u5bb9\n</code></pre>"},{"location":"Documents/C-Tool/%E6%BF%80%E6%B4%BB%E6%95%99%E7%A8%8B/window%E7%B3%BB%E7%BB%9F/","title":"windows \u7cfb\u7edf","text":""},{"location":"Documents/C-Tool/%E6%BF%80%E6%B4%BB%E6%95%99%E7%A8%8B/window%E7%B3%BB%E7%BB%9F/#1-windows11","title":"1 windows11","text":"<pre><code>## \u7ba1\u7406\u5458\u6743\u9650\u6267\u884c\uff0c\u7b49\u5f851\u5206\u949f\uff0c\u6fc0\u6d3b\u5b8c\u6210\uff08\u4f1a\u5f39\u7a97\u63d0\u793a\uff09\n\nslmgr /ipk W269N-WFGWX-YVC9B-4J6C9-T83GX\n\nslmgr /skms kms.03k.org\n\nslmgr /ato\n</code></pre>"},{"location":"Documents/C-Tool/%E6%BF%80%E6%B4%BB%E6%95%99%E7%A8%8B/%E6%BF%80%E6%B4%BB%E6%95%99%E7%A8%8B/","title":"1 \u6fc0\u6d3b\u6559\u7a0b","text":""},{"location":"Documents/C-Tool/%E6%BF%80%E6%B4%BB%E6%95%99%E7%A8%8B/%E6%BF%80%E6%B4%BB%E6%95%99%E7%A8%8B/#11-visual-studio-2022","title":"1.1 Visual Studio 2022","text":""},{"location":"Documents/C-Tool/%E6%BF%80%E6%B4%BB%E6%95%99%E7%A8%8B/%E6%BF%80%E6%B4%BB%E6%95%99%E7%A8%8B/#111","title":"1.1.1 \u6fc0\u6d3b\u7801","text":"<ul> <li>Visual\u00a0Studio\u00a02022 Professional</li> </ul> <pre><code>TD244-P4NB7-YQ6XK-Y8MMM-YWV2J\n</code></pre> <ul> <li>Visual Studio 2022 Enterprise</li> </ul> <pre><code>VHF9H-NXBBB-638P6-6JHCY-88JWH\n</code></pre>"},{"location":"Documents/C-Tool/%E6%BF%80%E6%B4%BB%E6%95%99%E7%A8%8B/%E6%BF%80%E6%B4%BB%E6%95%99%E7%A8%8B/#112","title":"1.1.2 \u6fc0\u6d3b\u6b65\u9aa4","text":"<p>\u542f\u52a8 Visual Studio 2022 -&gt; \u6587\u4ef6 -&gt;\u8d26\u6237\u8bbe\u7f6e-&gt; \u8f93\u5165\u5bc6\u94a5</p>"},{"location":"Documents/C-Tool/%E6%BF%80%E6%B4%BB%E6%95%99%E7%A8%8B/%E6%BF%80%E6%B4%BB%E6%95%99%E7%A8%8B/#12-jetbrains-rider-20222","title":"1.2 JetBrains Rider 2022.2","text":""},{"location":"Documents/C-Tool/%E6%BF%80%E6%B4%BB%E6%95%99%E7%A8%8B/%E6%BF%80%E6%B4%BB%E6%95%99%E7%A8%8B/#121","title":"1.2.1 \u6fc0\u6d3b\u5de5\u5177\u548c\u6fc0\u6d3b\u7801","text":"<ul> <li>\u6fc0\u6d3b\u5de5\u5177\u548c\u5bc6\u94a5\u5728\u963f\u91cc\u4e91\u76d8\u4e0a</li> </ul>"},{"location":"Documents/C-Tool/%E6%BF%80%E6%B4%BB%E6%95%99%E7%A8%8B/%E6%BF%80%E6%B4%BB%E6%95%99%E7%A8%8B/#122","title":"1.2.2 \u6fc0\u6d3b\u6b65\u9aa4","text":"<p>\u53c2\u8003 https://chenjunan.top/detail/Detail?id=38</p>"},{"location":"Documents/C-Tool/%E6%BF%80%E6%B4%BB%E6%95%99%E7%A8%8B/%E6%BF%80%E6%B4%BB%E6%95%99%E7%A8%8B/#13-axure","title":"1.3 Axure","text":"<ul> <li>Axure RP 9.0.0.3740 \u6b63\u5f0f\u7248</li> <li>\u963f\u91cc\u4e91\u4e0b\u8f7d\u5730\u5740\uff1a https://www.aliyundrive.com/s/S92EcJuC2g4 \u63d0\u53d6\u7801: 75pr </li> <li>\u5bc6\u94a5</li> </ul> <pre><code>Licensee :http://Freecrackdownload.com\nKEY:5vYpJgQZ431X/G5kp6jpOO8Vi3TySCBnAslTcNcKkszfPH7jaM4eKM8CrALBcEC1\n</code></pre>"},{"location":"Documents/C-Tool/%E6%BF%80%E6%B4%BB%E6%95%99%E7%A8%8B/%E6%BF%80%E6%B4%BB%E6%95%99%E7%A8%8B/#4-office","title":"4 Office \u529e\u516c\u8f6f\u4ef6","text":""},{"location":"Documents/C-Tool/%E6%BF%80%E6%B4%BB%E6%95%99%E7%A8%8B/%E6%BF%80%E6%B4%BB%E6%95%99%E7%A8%8B/#41-office-tool-plus","title":"4.1 \u4f7f\u7528 Office Tool Plus \u5de5\u5177","text":"<ul> <li>\u5b98\u7f51</li> </ul>"},{"location":"Documents/C-Tool/%E6%BF%80%E6%B4%BB%E6%95%99%E7%A8%8B/%E6%BF%80%E6%B4%BB%E6%95%99%E7%A8%8B/#42","title":"4.2 \u6fc0\u6d3b\u6b65\u9aa4","text":"<ol> <li>\u5b89\u88c5 Office \u6279\u91cf\u8bb8\u53ef\u8bc1 (Volume)\uff0c\u65e0\u8bba\u5982\u4f55\uff0c\u8fd9\u91cc\u4f60\u90fd\u8981\u9009\u6279\u91cf\u8bb8\u53ef\u8bc1\u3002</li> <li>\u8bbe\u7f6e\u4e00\u4e2a KMS \u4e3b\u673a\u5730\u5740\uff08\u53ef\u4ee5\u8bbe\u7f6e\u7aef\u53e3\u4e3a 1688\uff09\u5e76\u4fdd\u5b58\u8bbe\u7f6e\u3002(kms.03k.org)</li> <li>\u70b9\u51fb\u6fc0\u6d3b\u6309\u94ae\uff0c\u7b49\u5f85\u6fc0\u6d3b\u5b8c\u6210\u3002</li> </ol>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/Autoconf/Autoconf/","title":"Autoconf","text":"<ul> <li>Autoconf\u5b98\u65b9\u6587\u6863 autoconf \u662f\u7528\u6765\u751f\u6210\u81ea\u52a8\u914d\u7f6e\u8f6f\u4ef6\u6e90\u4ee3\u7801\u811a\u672c\uff08configure\uff09\u7684\u5de5\u5177</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/Automake/Automake/","title":"Automake","text":"<ul> <li>Automake \u5b98\u65b9\u6587\u6863 GNU Automake \u662f\u4e00\u4e2a\u81ea\u52a8\u751f\u6210\u7b26\u5408 GNU \u7f16\u7801\u6807\u51c6\u7684 Makefile.in \u6587\u4ef6\u7684\u5de5\u5177\u3002Automake \u9700\u8981\u4f7f\u7528 GNU Autoconf\u3002</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/Meson/meson.build/","title":"meson.build \u6587\u4ef6","text":"<ul> <li>Syntax</li> <li>https://mesonbuild.com/Reference-manual.html</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/Meson/meson.build/#1","title":"1 \u57fa\u7840\u6307\u4ee4","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/Meson/meson.build/#11-project","title":"1.1 project","text":"<ul> <li>\u529f\u80fd\uff1a\u6bcf\u4e00\u4e2a\u9879\u76ee\u90fd\u9700\u8981\uff0c\u7528\u4e8e\u8bbe\u7f6e\u9879\u76ee\u4fe1\u606f\uff0c\u5fc5\u987b\u8981\u7528\u9879\u76ee\u540d\u79f0\u548c\u4ee3\u7801\u6240\u5c5e\u8bed\u8a00\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code>project('process','cpp')\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/Meson/meson.build/#12-include_directories","title":"1.2 include_directories","text":"<ul> <li>include_directories</li> <li>\u529f\u80fd\uff1a\u7edf\u8ba1\u5934\u6587\u4ef6\u641c\u7d22\u8def\u5f84\uff0c\u8fd4\u56de\u7684 <code>inc</code> \u5bf9\u8c61\u53ef\u4ee5\u7528\u5728 <code>library</code> \u548c <code>executable</code> \u51fd\u6570\u4e2d\u7684 <code>include_directories</code> \u53c2\u6570\u4e2d</li> <li>\u793a\u4f8b</li> </ul> <pre><code>include_dirs = include_directories('common', '.')\nexecutable('main','main.cc', include_directories : include_dirs,dependencies:libmymath_dep)\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/Meson/meson.build/#13-declare_dependency","title":"1.3 declare_dependency","text":"<ul> <li>declare_dependency</li> <li>\u529f\u80fd\uff1a\u58f0\u660e\u4f9d\u8d56\uff0c\u8fd4\u56de\u7684 <code>dep</code> \u5bf9\u8c61\u53ef\u4ee5\u7528\u5728 <code>library</code> \u548c <code>executable</code> \u51fd\u6570\u4e2d\u7684 <code>dependencies</code> \u53c2\u6570\u4e2d</li> <li>\u793a\u4f8b</li> </ul> <pre><code>## meson.build \u6587\u4ef61 \u751f\u6210\u52a8\u6001\u5e93\nsrc=['mymath.cc']\nlibmymath=library('mymath',src)\nlibmymath_dep=declare_dependency(link_with:libmymath)\n\n## meson.build \u6587\u4ef62 \u94fe\u63a5\u4e0a\u9762\u7684\u5e93\uff0c\u5e76\u751f\u6210\u53ef\u6267\u884c\u7a0b\u5e8f\nexecutable('main','main.cc', include_directories : include_dirs,dependencies:libmymath_dep)\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/Meson/meson.build/#14-executable","title":"1.4 executable","text":"<ul> <li>executable</li> <li>\u529f\u80fd\uff1a\u751f\u6210\u53ef\u6267\u884c\u7a0b\u5e8f, \u6bd4\u8f83\u5e38\u7528\u7684\u53c2\u6570\u5b57\u6bb5\u6709 <code>dependencies</code>\u3001<code>include_directories</code>\u3001<code>link_with</code></li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/Meson/meson.build/#15-library","title":"1.5 library","text":"<ul> <li>library</li> <li>\u529f\u80fd\uff1a\u751f\u6210\u5e93\uff08\u7531 <code>default_library</code> \u53d8\u91cf\u786e\u5b9a\u662f\u52a8\u6001\u5e93\u8fd8\u662f\u9759\u6001\u5e93\uff0c\u6216\u8005\u4e24\u8005\u90fd\u6709\uff09, \u5176\u5b83\u7c7b\u4f3c\u7684\u6709 <code>shared_library()</code>,\u00a0<code>static_library()</code>\u00a0or\u00a0<code>both_libraries()</code></li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/Meson/meson.build/#16-subdir","title":"1.6 subdir","text":"<ul> <li>\u529f\u80fd\uff1a\u7528\u4e8e\u89e3\u6790\u5b50\u76ee\u5f55\u7684 meson.build \u6587\u4ef6</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/Meson/meson.build/#2-meson","title":"2 meson \u7c7b\u578b","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/Meson/meson.build/#3-meson","title":"3 meson \u5bf9\u8c61","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/Meson/meson.build/#4-meson","title":"4 meson \u51fd\u6570","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/Meson/meson/","title":"meson","text":"<ul> <li>https://mesonbuild.com/Tutorial.html</li> </ul> <pre><code>meson \u662f\u4e00\u4e2a\u7c7b\u4f3c CMake \u7684\u6784\u5efa\u5de5\u5177\u3002meson\u8bed\u6cd5\u5f88\u50cf\u5176\u5b83\u9ad8\u7ea7\u8bed\u8a00\uff0c\u8bb8\u591a\u7075\u611f\u6765\u81ea Python \u7f16\u7a0b\u8bed\u8a00\uff0c\u652f\u6301\u4e0d\u540c\u7c7b\u578b\u7684\u53d8\u91cf\uff08\u5b57\u7b26\u4e32\u3001\u6570\u503c\u3001\u6570\u503c\u3001\u5b57\u5178...\u7c7b\u578b\uff09\uff0c\u65b9\u6cd5\u3002\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/Meson/meson/#1","title":"1 \u5b89\u88c5","text":"<ul> <li>\u65b9\u6cd5\u4e00\uff1a<code>dnf install meson</code></li> <li>\u65b9\u6cd5\u4e8c\uff1a<code>pip install meson</code></li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/Meson/meson/#2","title":"2 \u4f7f\u7528","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/Meson/meson/#21","title":"2.1 \u547d\u4ee4\u884c","text":"<ul> <li>https://mesonbuild.com/Commands.html \u7b80\u5355\u793a\u4f8b\uff1a</li> <li><code>meson setup builddir</code> \uff1a\u914d\u7f6e\u9879\u76ee\uff0c\u751f\u6210\u7684\u914d\u7f6e\u6587\u4ef6\u653e\u5728 builddir \u76ee\u5f55\u4e0b</li> <li><code>cd builddir&amp;&amp;meson compile</code> \uff1a\u5728 builddir \u76ee\u5f55\u4e0b\u7f16\u8bd1\uff0c\u9ed8\u8ba4\u662f\u4f7f\u7528 ninja \u7f16\u8bd1</li> <li><code>meson install</code> :</li> </ul> <p>\u4e3b\u8981\u547d\u4ee4\u5982\u4e0b\uff1a - <code>setup</code>:Configure the project - <code>configure</code>:Change project options - <code>dist</code>:Generate release archive - <code>install</code>:Install the project - <code>introspect</code>:Introspect project - <code>init</code>:Create a new project - <code>test</code>:Run tests - <code>wrap</code> :Wrap tools - <code>subprojects</code>:Manage subprojects - <code>rewrite</code>:Modify the project definition - <code>compile</code>:Build the project - <code>devenv</code>:Run commands in developer environment - <code>env2mfile</code>:Convert current environment to a crosor native file - <code>help</code>:Print help of a subcommand</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/Meson/meson/#22-meson-setup","title":"2.2 meson setup","text":"<ul> <li>\u529f\u80fd\uff1a\u7528\u4e8e\u751f\u6210 build \u6240\u9700\u8981\u7684\u6587\u4ef6\uff0c\u6bd4\u5982 build.ninja \u6587\u4ef6</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/Meson/meson/#23-meson-compile","title":"2.3 meson compile","text":"<ul> <li>\u529f\u80fd\uff1a\u7528\u4e8e\u7f16\u8bd1\u9879\u76ee\uff0c\u4f1a\u6839\u636e meson setup \u751f\u6210\u7684\u6587\u4ef6\uff0c\u9009\u62e9\u7f16\u8bd1\u5de5\u5177\uff0c\u5982\u4f7f\u7528 ninja \u547d\u4ee4\u6784\u5efa\u51fa\u5e93\u6216\u53ef\u6267\u884c\u7a0b\u5e8f\u3002</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/","title":"CMakeLists","text":"<ul> <li>https://cmake.org/cmake/help/latest/</li> <li>https://runebook.dev/zh-CN/docs/cmake/</li> <li>https://zhuanlan.zhihu.com/p/534439206</li> </ul> <pre><code>CMakeLists\u4e2d\u547d\u4ee4\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u7684\uff0c\u4f46\u901a\u5e38\u5efa\u8bae\u547d\u4ee4\u4f7f\u7528\u5927\u5199\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/#1","title":"1 \u5165\u95e8\u793a\u4f8b","text":"<ul> <li><code>cmake_minimum_required</code>\uff1a\u6307\u5b9acmake\u6700\u4f4e\u7248\u672c</li> <li><code>project</code>\uff1a\u6307\u5b9a\u9879\u76ee\u540d\u79f0</li> <li><code>add_executable</code>\uff1a\u6dfb\u52a0\u53ef\u6267\u884c\u6587\u4ef6</li> </ul> <pre><code>cmake_minimum_required(VERSION 3.10)\n\n## set the project name\nproject(Tutorial)\n\n## add the executable\nadd_executable(Tutorial tutorial.cxx)\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/#2","title":"2 \u9879\u76ee\u547d\u4ee4","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/#21","title":"2.1 \u9879\u76ee\u8bbe\u7f6e","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/#211-cmake_minimum_required","title":"2.1.1 cmake_minimum_required","text":"<ul> <li>\u529f\u80fd\uff1a\u8bbe\u7f6e\u9700\u8981\u7684cmake\u6700\u5c0f\u7248\u672c\u53f7</li> <li>\u8bed\u6cd5\uff1a<code>cmake_minimum_required(VERSION &lt;min&gt;[...&lt;policy_max&gt;] [FATAL_ERROR])</code><ul> <li><code>&lt;min&gt;</code>\uff1a\uff08\u5fc5\u9009\uff09\u6700\u5c0f\u7248\u672c\u53f7\uff0c\u683c\u5f0f\u662f<code>major.minor[.patch[.tweak]]</code>\uff0c\u6bd4\u59821.2.0</li> <li><code>...&lt;policy_max&gt;</code>\uff1a\uff08\u53ef\u9009\uff09\u6700\u5927\u7248\u672c\u53f7</li> <li><code>FATAL_ERROR</code>\uff1a\uff08\u53ef\u9009\uff09\u8be5\u53c2\u6570\u5728cmake\u7684_2.6_\u53ca\u4ee5\u540e\u7684\u7248\u672c\u88ab\u5ffd\u7565\uff0c\u5728cmake\u7684_2.4_\u53ca\u4ee5\u524d\u7684\u7248\u672c\uff0c\u9700\u8981\u6307\u660e\u8be5\u53c2\u6570\uff0c\u4ee5\u4fbfcmake\u80fd\u63d0\u793a\u5931\u8d25\u800c\u4e0d\u4ec5\u4ec5\u662f\u4e00\u4e2a\u8b66\u544a\u3002</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>cmake_minimum_required(VERSION 3.12.0\uff09\ncmake_minimum_required(VERSION 3.12.0...3.24.0\uff09\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/#212-project","title":"2.1.2 project","text":"<pre><code>project\u4f1a\u5f71\u54cd\u4ee5\u4e0b\u51e0\u4e2a\u53d8\u91cf:\n- `PROJECT_NAME`\uff1a\u8fd9\u662f\u5728\u5f53\u524d\u76ee\u5f55\u8303\u56f4\u6216\u4e0a\u5c42\u8303\u56f4\u5185\u6700\u8fd1\u4e00\u6b21\u8c03\u7528\u7684 project() \u547d\u4ee4\u7684\u540d\u79f0\u3002\n- `CMAKE_PROJECT_NAME`\uff1a\u8fd9\u662f\u5728\u9876\u7ea7 CMakeLists.txt \u6587\u4ef6\u4e2d\u6700\u8fd1\u4e00\u6b21\u8c03\u7528project() \u547d\u4ee4\u7684\u540d\u79f0\u3002\n- `PROJECT_SOURCE_DIR`,\u00a0`&lt;PROJECT-NAME&gt;_SOURCE_DIR`\uff1a\u9879\u76ee\u6e90\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\n- `PROJECT_BINARY_DIR`,\u00a0`&lt;PROJECT-NAME&gt;_BINARY_DIR`\uff1a\u9879\u76ee\u4e8c\u8fdb\u5236\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\n- `PROJECT_IS_TOP_LEVEL`,\u00a0`&lt;PROJECT-NAME&gt;_IS_TOP_LEVEL`\uff1aNew in version 3.21.\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u8bbe\u7f6e\u9879\u76ee\u7684\u540d\u79f0\uff0c\u5e76\u5c06\u5176\u5b58\u50a8\u5728\u53d8\u91cf PROJECT_NAME \u4e2d\u3002\u5f53\u4ece\u9876\u5c42\u8c03\u7528\u65f6\uff0cCMakeLists.txt \u8fd8\u5c06\u9879\u76ee\u540d\u79f0\u5b58\u50a8\u5728\u53d8\u91cf CMAKE_PROJECT_NAME \u4e2d\u3002</li> <li>\u8bed\u6cd5\uff1a<code>project(&lt;PROJECT-NAME&gt; [&lt;language-name&gt;...])</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>cmake_minimum_required(VERSION 3.0)\nproject(First)\nproject(Second)\nadd_subdirectory(sub)\nproject(Third)\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/#22","title":"2.2 \u5e93\u751f\u6210","text":"<pre><code>1. `add_dependencies`\u76f8\u5f53\u4e8egcc\u4e2d`-l`\u94fe\u63a5\u5e93\n2. `target_include_directories\u3001include_directories`\u76f8\u5f53\u4e8egcc\u4e2d`-I`\u5934\u6587\u4ef6\u641c\u7d22\u8def\u5f84\n3. \n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/#221-add_executable","title":"2.2.1 add_executable","text":"<ul> <li>\u529f\u80fd\uff1a\u4f7f\u7528\u6307\u5b9a\u7684\u6e90\u6587\u4ef6\u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6\u3002</li> <li>\u8bed\u6cd5\uff1a<code>add_executable(&lt;name&gt; [source1] [source2 ...])</code><ul> <li><code>&lt;name&gt;</code>\uff1a\u53ef\u6267\u884c\u6587\u4ef6\u540d</li> <li><code>[source1] [source2 ...]</code>\uff1a\u6e90\u6587\u4ef6\u540d</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>add_executable(main main.cc)\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/#222-add_library","title":"2.2.2 add_library","text":"<ul> <li>\u529f\u80fd\uff1a\u4f7f\u7528\u6307\u5b9a\u7684\u6e90\u6587\u4ef6\u751f\u6210\u5e93\u6587\u4ef6\u3002</li> <li>\u8bed\u6cd5\uff1a<code>add_library(&lt;name&gt; [STATIC | SHARED | MODULE] [EXCLUDE_FROM_ALL] [&lt;source&gt;...])</code><ul> <li><code>&lt;name&gt;</code></li> <li><code>[STATIC | SHARED | MODULE]</code>\uff1aSTATIC\u8868\u793a\u9759\u6001\u5e93\u3001SHARED\u8868\u793a\u52a8\u6001\u5e93</li> <li><code>[EXCLUDE_FROM_ALL]</code> </li> <li><code>[&lt;source&gt;...]</code></li> </ul> </li> </ul> <pre><code>title: \u5f53\u4e0d\u6307\u5b9a\u5e93\u7c7b\u578b\u65f6\uff0c\u751f\u6210\u9759\u6001\u5e93\u8fd8\u662f\u52a8\u6001\u5e93\uff0c\u9075\u5faa\u4ec0\u4e48\u89c4\u5219\uff1f\n1. \u5f53`BUILD_SHARED_LIBS`\u53d8\u91cf\u503c\u4e3aON\u65f6\uff0c\u751f\u6210\u52a8\u6001\u5e93\uff0c\u5426\u5219\u751f\u6210\u9759\u6001\u5e93\n</code></pre> <ul> <li>\u793a\u4f8b\uff1a\u8bbe\u7f6eBUILD_SHARED_LIBS\u53d8\u91cf\u503cON\uff0c\u751f\u6210\u52a8\u6001\u5e93</li> </ul> <pre><code>message(STATUS \"BUILD_SHARED_LIBS=${BUILD_SHARED_LIBS}\" )\nset(BUILD_SHARED_LIBS on )\nmessage(STATUS \"BUILD_SHARED_LIBS=${BUILD_SHARED_LIBS}\" )\nadd_library(MathFunctions mysqrt.cxx)\n\n## cmake\u8f93\u51fa\u7ed3\u679c\uff08\u90e8\u5206\uff09\n-- BUILD_SHARED_LIBS=\n-- BUILD_SHARED_LIBS=on\n## make \u8f93\u51fa\u7ed3\u679c\uff08\u90e8\u5206\uff09\n[ 25%] Building CXX object MathFunctions/CMakeFiles/MathFunctions.dir/mysqrt.cxx.o\n[ 50%] Linking CXX shared library libMathFunctions.so\n</code></pre> <ul> <li>\u793a\u4f8b\uff1a\u751f\u6210\u52a8\u6001\u5e93</li> </ul> <pre><code>add_library(MathFunctions SHARED mysqrt.cxx)\n\n### make \u8f93\u51fa\u7ed3\u679c\uff08\u90e8\u5206\uff09\n[ 25%] Building CXX object MathFunctions/CMakeFiles/MathFunctions.dir/mysqrt.cxx.o\n[ 50%] Linking CXX shared library libMathFunctions.so\n</code></pre> <ul> <li>\u793a\u4f8b\uff1a\u751f\u6210\u9759\u6001\u5e93</li> </ul> <pre><code>add_library(MathFunctions STATIC mysqrt.cxx)\n\n### make \u8f93\u51fa\u7ed3\u679c\uff08\u90e8\u5206\uff09\n[ 25%] Building CXX object MathFunctions/CMakeFiles/MathFunctions.dir/mysqrt.cxx.o\n[ 50%] Linking CXX static library libMathFunctions.a\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/#223-add_dependencies","title":"2.2.3 add_dependencies","text":"<ul> <li>\u529f\u80fd\uff1a\u5728\u76ee\u6807\u6dfb\u52a0\u4e00\u4e2a\u4f9d\u8d56\u5173\u7cfb\uff0c\u786e\u4fdd\u4f9d\u8d56\u5e93\u5728\u76ee\u6807\u94fe\u63a5\u524d\u5df2\u7ecf\u5b58\u5728\uff0c\u6bd4\u5982\u751f\u6210main\u53ef\u6267\u884c\u6587\u4ef6\u9700\u8981\u94fe\u63a5liba.so,libb.so,\u5219\u53ef\u4ee5\u4f7f\u7528<code>add_dependencies(main a b)</code></li> <li>\u8bed\u6cd5\uff1a<code>add_dependencies(&lt;target&gt; [&lt;target-dependency&gt;]...)</code><ul> <li><code>&lt;target&gt;</code>\uff1a\u53ea\u80fd\u662f<code>add_library\u3001add_executable</code>\u6307\u5b9a\u7684\u76ee\u6807\u6587\u4ef6</li> </ul> </li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/#224-add_definitions","title":"2.2.4 add_definitions","text":"<ul> <li>\u529f\u80fd\uff1a\u6dfb\u52a0\u5b8f\u5b9a\u4e49</li> <li>\u8bed\u6cd5<code>add_definitions(-DFOO -DBAR ...)</code></li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/#225-add_compile_definitions","title":"2.2.5 add_compile_definitions","text":"<ul> <li>\u529f\u80fd\uff1a\u5c06\u9884\u5904\u7406\u5668\u5b9a\u4e49\u6dfb\u52a0\u5230\u6e90\u6587\u4ef6\u7684\u7f16\u8bd1\u4e2d</li> <li>\u8bed\u6cd5\uff1a<code>add_compile_definitions(&lt;definition&gt; ...)</code>\uff0c\u4f7f\u7528\u8bed\u6cd5 VAR \u6216 VAR=value \u6307\u5b9a\u5b9a\u4e49\u3002</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/#226-target_include_directoriesinclude_directories","title":"2.2.6 target_include_directories\u3001include_directories","text":"<pre><code>title: target_include_directories\u3001include_directories\u533a\u522b\uff1f\n\u5176\u4e2dtarget_include_directories\u53ea\u6dfb\u52a0\u5230\u6307\u5b9a\u7684\u76ee\u6807\u4e0a\uff0c\u800cinclude_directories\u5c06\u7ed9\u5b9a\u76ee\u5f55\u6dfb\u52a0\u5230\u7f16\u8bd1\u5668\u7528\u4e8e\u641c\u7d22\u5305\u542b\u6587\u4ef6\u7684\u76ee\u5f55\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u6dfb\u52a0 include \u6587\u4ef6\u641c\u7d22\u8def\u5f84</li> </ul> <pre><code>target_include_directories(&lt;target&gt; [SYSTEM] [AFTER|BEFORE]\n&lt;INTERFACE|PUBLIC|PRIVATE&gt; [items1...]\n[&lt;INTERFACE|PUBLIC|PRIVATE&gt; [items2...] ...])\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/#227-target_link_libraries","title":"2.2.7 target_link_libraries","text":"<ul> <li>\u529f\u80fd\uff1a\u6307\u5b9a\u76ee\u6807\u6587\u4ef6\u7684\u4f9d\u8d56\u5e93</li> <li>\u8bed\u6cd5\uff1a<code>target_link_libraries(&lt;target&gt; ... &lt;item&gt;... ...)</code><ul> <li><code>&lt;target&gt;</code>\uff1a\u53ea\u80fd\u662f<code>add_library\u3001add_executable</code>\u6307\u5b9a\u7684\u76ee\u6807\u6587\u4ef6</li> </ul> </li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/#228-add_subdirectory","title":"2.2.8 add_subdirectory","text":"<ul> <li>\u529f\u80fd\uff1a\u5c06\u5b50\u76ee\u5f55\u6dfb\u52a0\u5230 cmake \u6784\u5efa\u6811\u4e2d\u3002</li> <li>\u8bed\u6cd5\uff1a</li> </ul> <pre><code>add_subdirectory(source_dir [binary_dir] [EXCLUDE_FROM_ALL] [SYSTEM])\n</code></pre> <p>\u5176\u4e2d <code>source_dir</code> \u6307\u5b9a\u4e86\u6e90 CMakeLists.txt \u548c\u4ee3\u7801\u6587\u4ef6\u6240\u5728\u7684\u76ee\u5f55\uff0c\u53ef\u9009\u7684 <code>binary_dir</code> \u8868\u793a\u7684\u662f\u6784\u5efa\u751f\u6210\u4e8c\u8fdb\u5236\u6587\u4ef6\u7684\u4f4d\u7f6e\uff0c\u5982\u679c\u4e0d\u6307\u5b9a <code>binary_dir</code>\uff0c\u5219\u4f7f\u7528 <code>source_dir</code> \u4f5c\u4e3a\u8f93\u51fa\u76ee\u5f55</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/#23","title":"2.3 \u4f9d\u8d56\u68c0\u67e5","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/#231-find_library","title":"2.3.1 find_library","text":"<ul> <li>\u529f\u80fd\uff1a\u627e\u5230\u4e00\u4e2a\u5e93\u3002</li> <li>\u8bed\u6cd5\uff1a</li> </ul> <pre><code>find_library (&lt;VAR&gt; name1 [path1 path2 ...])\n</code></pre> <p>\u5176\u4e2d <code>&lt;VAR&gt;</code> \u662f\u4e00\u4e2a\u53d8\u91cf\uff0c\u7528\u6765\u5b58\u50a8\u67e5\u8be2\u7ed3\u679c\uff0c\u5982\u679c\u67e5\u8be2\u6210\u529f\u5219\u662f\u5e93\u7684\u5168\u8def\u5f84\uff0c\u5426\u5219\u662f <code>&lt;VAR&gt;-NOTFOUND</code>\u3002<code>name1</code> \u662f\u67e5\u8be2\u7684\u5e93\u540d\u79f0\uff0c\u53ef\u4ee5\u662f <code>libnsl.so</code> \u6216\u8005\u53bb\u9664\u524d\u7f00\u540e\u7f00\u7684 <code>nsl</code>\u3002<code>path</code> \u5219\u8868\u793a\u8981\u641c\u7d22\u5e93\u7684\u4f4d\u7f6e\u3002</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/#232-find_package","title":"2.3.2 find_package","text":"<ul> <li>\u529f\u80fd\uff1a\u627e\u5230\u4e00\u4e2a\u5305 (\u901a\u5e38\u7531\u9879\u76ee\u5916\u90e8\u63d0\u4f9b)\u3002</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/#24","title":"2.4 \u811a\u672c\u547d\u4ee4","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/#241-message","title":"2.4.1 message","text":"<pre><code>\u57283.17\u540e\u589e\u52a0\u4e86check\u529f\u80fd\n</code></pre> <p>-\u529f\u80fd\uff1a\u8f93\u51fa\u63d0\u793a\u4fe1\u606f - \u8bed\u6cd5\uff1a</p> <pre><code>message([&lt;mode&gt;] \"message text\" ...)\nmessage(&lt;checkState&gt; \"message text\" ...)\n</code></pre> <ul> <li>\u4e3b\u8981\u7684mode\u6709<ul> <li><code>FATAL_ERROR</code>:\u9519\u8bef\uff0c\u4f1a\u505c\u6b62\u6267\u884ccmake\u547d\u4ee4</li> <li><code>WARNING</code>:\u8b66\u544a\uff0c\u7ee7\u7eed\u6267\u884c</li> <li><code>STATUS</code>:\u72b6\u6001\u4fe1\u606f</li> </ul> </li> <li>\u65b0\u589e\u7684checkState\u6709\u4ee5\u4e0b\uff1a<ul> <li><code>CHECK_START</code>\uff1a\u68c0\u67e5\u8bb0\u5f55\u7684\u5f00\u59cb</li> <li><code>CHECK_PASS</code>\uff1a\u68c0\u67e5\u6210\u529f\u4fe1\u606f</li> <li><code>CHECK_FAIL</code>\uff1a\u68c0\u67e5\u5931\u8d25\u4fe1\u606f</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>message(CHECK_START \"Finding my things\")\nlist(APPEND CMAKE_MESSAGE_INDENT \"  \")\nunset(missingComponents)\n\nmessage(CHECK_START \"Finding partA\")\n## ... do check, assume we find A\nmessage(CHECK_PASS \"found\")\n\nmessage(CHECK_START \"Finding partB\")\n## ... do check, assume we don't find B\nlist(APPEND missingComponents B)\nmessage(CHECK_FAIL \"not found\")\n\nlist(POP_BACK CMAKE_MESSAGE_INDENT)\nif(missingComponents)\nmessage(CHECK_FAIL \"missing components: ${missingComponents}\")\nelse()\nmessage(CHECK_PASS \"all components found\")\nendif()\n</code></pre> <ul> <li>\u8f93\u51fa</li> </ul> <pre><code>-- Finding my things\n--   Finding partA\n--   Finding partA - found\n--   Finding partB\n--   Finding partB - not found\n-- Finding my things - missing components: B\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/#242-set","title":"2.4.2 set","text":"<ul> <li>\u529f\u80fd\uff1a\u7ed9\u53d8\u91cf\u8bbe\u7f6e\u503c</li> <li>\u8bed\u6cd5\uff1a<ul> <li>\u8bbe\u7f6e\u666e\u901a\u53d8\u91cf\uff1a<code>set(&lt;variable&gt; &lt;value&gt;... [PARENT_SCOPE])</code></li> <li>\u8bbe\u7f6eCache Entry\uff1a<code>set(&lt;variable&gt; &lt;value&gt;... CACHE &lt;type&gt; &lt;docstring&gt; [FORCE])</code></li> <li>\u8bbe\u7f6eENV\u53d8\u91cf\uff1a<code>set(ENV{&lt;variable&gt;} [&lt;value&gt;])</code></li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>message(STATUS \"BUILD_SHARED_LIBS=${BUILD_SHARED_LIBS}\" )\nset(BUILD_SHARED_LIBS on )\nmessage(STATUS \"BUILD_SHARED_LIBS=${BUILD_SHARED_LIBS}\" )\nmessage(STATUS \"CC=$ENV{CC}\")\nset(ENV{CC} g++)\nmessage(STATUS \"CC=$ENV{CC}\")\n</code></pre> <ul> <li>\u8f93\u51fa</li> </ul> <pre><code>-- BUILD_SHARED_LIBS=\n-- BUILD_SHARED_LIBS=on\n-- CC=\n-- CC=g++\n-- Configuring done\n-- Generating done\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/#243-string","title":"2.4.3 string","text":"<pre><code>- \u5185\u5bb9\u8f83\u591a\uff0c\u53c2\u8003[\u5b98\u65b9\u6587\u6863](https://cmake.org/cmake/help/latest/command/string.html#string)\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u5b57\u7b26\u4e32\u64cd\u4f5c\uff0c\u5305\u62ec\u67e5\u627e\u3001\u66ff\u6362\u3001\u6bd4\u8f83\u7b49</li> <li>\u8bed\u6cd5</li> </ul> <pre><code>Search and Replace\n  string(FIND &lt;string&gt; &lt;substring&gt; &lt;out-var&gt; [...])\nstring(REPLACE &lt;match-string&gt; &lt;replace-string&gt; &lt;out-var&gt; &lt;input&gt;...)\nstring(REGEX MATCH &lt;match-regex&gt; &lt;out-var&gt; &lt;input&gt;...)\nstring(REGEX MATCHALL &lt;match-regex&gt; &lt;out-var&gt; &lt;input&gt;...)\nstring(REGEX REPLACE &lt;match-regex&gt; &lt;replace-expr&gt; &lt;out-var&gt; &lt;input&gt;...)\n\nManipulation\n  string(APPEND &lt;string-var&gt; [&lt;input&gt;...])\nstring(PREPEND &lt;string-var&gt; [&lt;input&gt;...])\nstring(CONCAT &lt;out-var&gt; [&lt;input&gt;...])\nstring(JOIN &lt;glue&gt; &lt;out-var&gt; [&lt;input&gt;...])\nstring(TOLOWER &lt;string&gt; &lt;out-var&gt;)\nstring(TOUPPER &lt;string&gt; &lt;out-var&gt;)\nstring(LENGTH &lt;string&gt; &lt;out-var&gt;)\nstring(SUBSTRING &lt;string&gt; &lt;begin&gt; &lt;length&gt; &lt;out-var&gt;)\nstring(STRIP &lt;string&gt; &lt;out-var&gt;)\nstring(GENEX_STRIP &lt;string&gt; &lt;out-var&gt;)\nstring(REPEAT &lt;string&gt; &lt;count&gt; &lt;out-var&gt;)\n\nComparison\n  string(COMPARE &lt;op&gt; &lt;string1&gt; &lt;string2&gt; &lt;out-var&gt;)\n\nHashing\n  string(&lt;HASH&gt; &lt;out-var&gt; &lt;input&gt;)\n\nGeneration\n  string(ASCII &lt;number&gt;... &lt;out-var&gt;)\nstring(HEX &lt;string&gt; &lt;out-var&gt;)\nstring(CONFIGURE &lt;string&gt; &lt;out-var&gt; [...])\nstring(MAKE_C_IDENTIFIER &lt;string&gt; &lt;out-var&gt;)\nstring(RANDOM [&lt;option&gt;...] &lt;out-var&gt;)\nstring(TIMESTAMP &lt;out-var&gt; [&lt;format string&gt;] [UTC])\nstring(UUID &lt;out-var&gt; ...)\n\nJSON\n  string(JSON &lt;out-var&gt; [ERROR_VARIABLE &lt;error-var&gt;]\n{GET | TYPE | LENGTH | REMOVE}\n&lt;json-string&gt; &lt;member|index&gt; [&lt;member|index&gt; ...])\nstring(JSON &lt;out-var&gt; [ERROR_VARIABLE &lt;error-var&gt;]\nMEMBER &lt;json-string&gt;\n         [&lt;member|index&gt; ...] &lt;index&gt;)\nstring(JSON &lt;out-var&gt; [ERROR_VARIABLE &lt;error-var&gt;]\nSET &lt;json-string&gt;\n         &lt;member|index&gt; [&lt;member|index&gt; ...] &lt;value&gt;)\nstring(JSON &lt;out-var&gt; [ERROR_VARIABLE &lt;error-var&gt;]\nEQUAL &lt;json-string1&gt; &lt;json-string2&gt;)\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/#244-list","title":"2.4.4 list","text":"<pre><code>- \u5185\u5bb9\u8f83\u591a\uff0c\u53c2\u8003[\u5b98\u65b9\u6587\u6863](https://cmake.org/cmake/help/latest/command/list.html#list)\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u5217\u8868\u64cd\u4f5c</li> <li>\u8bed\u6cd5\uff1a\u5176\u4e2d\u6700\u5e38\u7528\u7684\u662fAPPEND\uff0c\u5411\u5217\u8868\u8ffd\u52a0\u5185\u5bb9</li> </ul> <pre><code>Reading\n  list(LENGTH &lt;list&gt; &lt;out-var&gt;)\nlist(GET &lt;list&gt; &lt;element index&gt; [&lt;index&gt; ...] &lt;out-var&gt;)\nlist(JOIN &lt;list&gt; &lt;glue&gt; &lt;out-var&gt;)\nlist(SUBLIST &lt;list&gt; &lt;begin&gt; &lt;length&gt; &lt;out-var&gt;)\n\nSearch\n  list(FIND &lt;list&gt; &lt;value&gt; &lt;out-var&gt;)\n\nModification\n  list(APPEND &lt;list&gt; [&lt;element&gt;...])\nlist(FILTER &lt;list&gt; {INCLUDE | EXCLUDE} REGEX &lt;regex&gt;)\nlist(INSERT &lt;list&gt; &lt;index&gt; [&lt;element&gt;...])\nlist(POP_BACK &lt;list&gt; [&lt;out-var&gt;...])\nlist(POP_FRONT &lt;list&gt; [&lt;out-var&gt;...])\nlist(PREPEND &lt;list&gt; [&lt;element&gt;...])\nlist(REMOVE_ITEM &lt;list&gt; &lt;value&gt;...)\nlist(REMOVE_AT &lt;list&gt; &lt;index&gt;...)\nlist(REMOVE_DUPLICATES &lt;list&gt;)\nlist(TRANSFORM &lt;list&gt; &lt;ACTION&gt; [...])\n\nOrdering\n  list(REVERSE &lt;list&gt;)\nlist(SORT &lt;list&gt; [...])\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/#245-option","title":"2.4.5 option","text":"<ul> <li>\u529f\u80fd\uff1a\u63d0\u4f9b\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u7684\u5e03\u5c14\u9009\u9879\u3002\u901a\u5e38\u548cif\u6761\u4ef6\u8bed\u53e5\u914d\u5408\u4f7f\u7528\uff0c\u53ef\u9009\u62e9\u7684\u6267\u884c\u547d\u4ee4</li> <li>\u8bed\u6cd5\uff1a<code>option(&lt;variable&gt; \"&lt;help_text&gt;\" [value])</code><ul> <li><code>&lt;variable&gt;</code> \uff1a\u9009\u9879\u7684\u53d8\u91cf\u540d</li> <li><code>\"&lt;help_text&gt;\"</code>\uff1a\u9488\u5bf9\u9009\u9879\u7684\u5e2e\u52a9\u4fe1\u606f</li> <li><code>[value]</code>\uff1a\u9ed8\u8ba4\u662fOFF\uff0c\u8868\u793a\u9009\u9879\u5173\u95ed\uff0cON\u8868\u793a\u9009\u9879\u6253\u5f00</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>option(OPENMESSAGE \"\u662f\u5426\u6267\u884c\u4fe1\u606f\u8f93\u51fa\" OFF)\nif(OPENMESSAGE)\nmessage(STATUS \"condition 1\")\nelse()\nmessage(STATUS \"condition 2\")\nendif()\n</code></pre> <ul> <li>\u8f93\u51fa\uff1acmake .</li> </ul> <pre><code>$ cmake .\n-- condition 2\n</code></pre> <ul> <li>\u8f93\u51fa\uff1a cmake -DOPENMESSAGE=ON .</li> </ul> <pre><code>$ cmake -DOPENMESSAGE=ON .\n-- condition 1\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/#246-if","title":"2.4.6 \u6761\u4ef6if","text":"<pre><code>- \u8be6\u7ec6\u6559\u7a0b\u53c2\u8003[\u5b98\u65b9\u6587\u6863](https://cmake.org/cmake/help/latest/command/if.html)\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u6709\u6761\u4ef6\u5730\u6267\u884c\u4e00\u7ec4\u547d\u4ee4\u3002</li> <li>\u8bed\u6cd5\uff1a</li> </ul> <pre><code>if(&lt;condition&gt;)\n&lt;commands&gt;\nelseif(&lt;condition&gt;) ## optional block, can be repeated\n&lt;commands&gt;\nelse()              ## optional block\n&lt;commands&gt;\nendif()\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>option(OPENMESSAGE \"\u662f\u5426\u6267\u884c\u4fe1\u606f\u8f93\u51fa\" OFF)\nif(OPENMESSAGE)\nmessage(STATUS \"condition 1\")\nelse()\nmessage(STATUS \"condition 2\")\nendif()\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/#247-function","title":"2.4.7 function","text":"<ul> <li>\u529f\u80fd\uff1a\u5b9a\u4e49\u4e00\u4e2a\u51fd\u6570\uff0c\u53ef\u4ee5\u88ab\u8c03\u7528\u3002</li> <li>\u8bed\u6cd5\uff1a</li> </ul> <pre><code>function(&lt;name&gt; [&lt;arg1&gt; ...])\n&lt;commands&gt;\nendfunction()\n</code></pre> <p>\u5176\u4e2d <code>&lt;name&gt;</code> \u8868\u793a\u51fd\u6570\u540d\u79f0\uff0c<code>&lt;arg1&gt;</code> \u8868\u793a\u51fd\u6570\u53c2\u6570\uff0c<code>&lt;commands&gt;</code> \u662f\u51fd\u6570\u4f53\uff0c\u6700\u540e\u7684 <code>endfunction()</code> \u662f\u51fd\u6570\u7ed3\u675f\u6807\u5fd7\u3002</p> <p>\u5b9a\u4e49\u4e3a\uff1a</p> <pre><code>function(foo)\n&lt;commands&gt;\nendfunction()\n</code></pre> <p>\u51fd\u6570\u8c03\u7528\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u3002\u53ef\u4ee5\u4ee5\u4e0b\u4efb\u4e00\u79cd\u65b9\u5f0f\u8c03\u7528\uff1a</p> <pre><code>foo()\nFoo()\nFOO()\ncmake_language(CALL foo)\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/#248-endfunction","title":"2.4.8 endfunction","text":"<ul> <li>\u529f\u80fd\uff1a\u914d\u5408 <code>function</code> \u4f7f\u7528\uff0c\u8868\u793a\u51fd\u6570\u7ed3\u675f\u3002</li> <li>\u8bed\u6cd5\uff1a</li> </ul> <pre><code>endfunction([&lt;name&gt;])\n</code></pre> <p>\u5176\u4e2d <code>&lt;name&gt;</code> \u662f\u53ef\u9009\u7684\uff0c\u5982\u679c\u8981\u5199\uff0c\u5fc5\u987b\u548c <code>function</code> \u4e2d\u7684 <code>&lt;name&gt;</code> \u4e00\u81f4\u3002</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/#25","title":"2.5 \u53d8\u91cf","text":"<pre><code>title: cmake\u4e2d\u53d8\u91cf\u67093\u79cd\u7c7b\u578b\n1. Normal Variable\uff08\u666e\u901a\u53d8\u91cf\uff09\uff1a\n2. Environment Variable\uff08\u73af\u5883\u53d8\u91cf\uff09:\u5982`CC\u3001CFLAGS\u3001CMAKE_PREFIX_PATH`\u7b49\n3. Cache Entry\uff08\u7f13\u5b58\u6761\u76ee\uff09\uff1a\n</code></pre> <ul> <li>cmake-env-variables(7)</li> <li>cmake-variables</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/#251","title":"2.5.1 \u53d8\u91cf\u503c\u83b7\u53d6","text":"<ul> <li>\u666e\u901a\u53d8\u91cf\uff1a<code>${variable}</code></li> <li>\u73af\u5883\u53d8\u91cf\uff1a<code>$ENV{variable}</code></li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/CMakeLists/#252","title":"2.5.2 \u53d8\u91cf\u503c\u8bbe\u7f6e","text":"<pre><code>\u8bbe\u7f6e\u53d8\u91cf\u7684\u65b9\u5f0f\u67093\u79cd\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u8bbe\u7f6e\n1. set\n2. string\n3. list\n---\n\u793a\u4f8b\u5982\u4e0b\uff1a\nStrings using\u00a0`set()`:\n- `set(MyString \"Some Text\")`\n- `set(MyStringWithVar \"Some other Text: ${MyString}\")`\n- `set(MyStringWithQuot \"Some quote: \\\"${MyStringWithVar}\\\"\")`\n\nOr with\u00a0`string()`:\n- `string(APPEND MyStringWithContent \" ${MyString}\")`\n\nLists using\u00a0`set()`:\n- `set(MyList \"a\" \"b\" \"c\")`\n- `set(MyList ${MyList} \"d\")`\n\nOr better with\u00a0`list()`:\n- `list(APPEND MyList \"a\" \"b\" \"c\")`\n- `list(APPEND MyList \"d\")`\n</code></pre> <ul> <li>\u666e\u901a\u53d8\u91cf\uff1a<code>set(&lt;variable&gt; [&lt;value&gt;])</code></li> <li>\u73af\u5883\u53d8\u91cf\uff1a<code>set(ENV{&lt;variable&gt;} [&lt;value&gt;])</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>message(STATUS \"BUILD_SHARED_LIBS=${BUILD_SHARED_LIBS}\" )\nset(BUILD_SHARED_LIBS on )\nmessage(STATUS \"BUILD_SHARED_LIBS=${BUILD_SHARED_LIBS}\" )\nmessage(STATUS \"CC=$ENV{CC}\")\nset(ENV{CC} g++)\nmessage(STATUS \"CC=$ENV{CC}\")\nadd_library(MathFunctions mysqrt.cxx)\n\n### cmake\u8f93\u51fa\u7ed3\u679c\uff08\u90e8\u5206\uff09\n-- BUILD_SHARED_LIBS=\n-- BUILD_SHARED_LIBS=on\n-- CC=/usr/bin/cc\n-- CC=g++\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%20%E9%94%99%E8%AF%AF%E6%B1%87%E6%80%BB/","title":"cmake \u9519\u8bef\u6c47\u603b","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%20%E9%94%99%E8%AF%AF%E6%B1%87%E6%80%BB/#1","title":"1 \u66f4\u6362\u751f\u6210\u5668\u5bfc\u81f4\u7684\u95ee\u9898","text":"<pre><code>CMake Error: Error: generator : Unix Makefiles\nDoes not match the generator used previously: MinGW Makefiles\nEither remove the CMakeCache.txt file and CMakeFiles directory or choose a different binary directory.\n</code></pre> <p>\u89e3\u51b3\uff1a 1. \u628a\u539f\u5148\u7531cmake\u6307\u4ee4\u4ea7\u751f\u7684\u4e34\u65f6\u6587\u4ef6\u90fd\u5220\u4e86 2. \u66f4\u6362\u53e6\u4e00\u4e2a\u76ee\u5f55\uff0c\u91cd\u65b0\u6267\u884ccmake\u6307\u4ee4</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%20%E9%94%99%E8%AF%AF%E6%B1%87%E6%80%BB/#2","title":"2 \u5b89\u88c5\u8def\u5f84\u7528\u82f1\u6587\u8def\u5f84\uff0c\u4e14\u8def\u5f84\u4e0d\u8981\u6709\u7a7a\u683c","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake/","title":"cmake","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake/#1","title":"1 \u751f\u6210\u9879\u76ee\u6784\u5efa\u7cfb\u7edf","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake/#11-s-b","title":"1.1 -S\u3001-B \u6307\u5b9a\u6e90\u76ee\u5f55\u548c\u6784\u5efa\u76ee\u5f55","text":"<pre><code>\u6d89\u53ca\u7684\u9009\u9879\u5982\u4e0b\uff1a\n- `-S\u00a0&lt;path-to-source&gt;`\uff1a\u8981\u751f\u6210\u7684CMake\u9879\u76ee\u7684\u6839\u76ee\u5f55\u7684\u8def\u5f84\u3002\n- `-B\u00a0&lt;path-to-build&gt;`\uff1aCMake\u5c06\u7528\u4f5c\u751f\u6210\u76ee\u5f55\u7684\u6839\u7684\u76ee\u5f55\u7684\u8def\u5f84\u3002\n</code></pre> <p>\u901a\u5e38\u6211\u4eec\u5c06 cmake \u751f\u6210\u7684\u6587\u4ef6\u653e\u5165 build \u76ee\u5f55\u4e2d\uff0c\u65b9\u4fbf\u7ba1\u7406\u3002\u6709 2 \u7c7b\u65b9\u5f0f\u786e\u5b9a build \u76ee\u5f55\uff1a \u65b9\u5f0f\u4e00\uff08\u5efa\u8bae\uff09\uff1a\u624b\u52a8\u521b\u5efa build \u76ee\u5f55\uff0c\u518d\u6267\u884c cmake+\u9876\u7ea7 <code>CMakeLists.txt</code> \u6240\u5728\u76ee\u5f55</p> <pre><code>$ mkdir build ; cd build\n$ cmake ../src\n</code></pre> <p>\u65b9\u5f0f\u4e8c\uff1a\u901a\u8fc7 <code>-B build\u76ee\u5f55</code> \u6307\u5b9a\u6784\u5efa\u76ee\u5f55\uff08\u5982\u679c build \u76ee\u5f55\u4e0d\u5b58\u5728\u4f1a\u81ea\u52a8\u521b\u5efa\uff09\uff0c<code>-S source\u76ee\u5f55</code></p> <pre><code>$ cmake -S . -B ../build\n</code></pre> <p>\u5176\u4e2d <code>-B</code>\u3001<code>-S</code> \u53ef\u7528\u7684\u7ec4\u5408\u5982\u4e0b\uff08cwd \u8868\u793a\u5f53\u524d\u76ee\u5f55\uff09\uff1a</p> Command Line Source Dir Build Dir <code>cmake src</code> <code>src</code> cwd <code>cmake build</code> (existing) loaded <code>build</code> <code>cmake -S src</code> <code>src</code> cwd <code>cmake -S src build</code> <code>src</code> <code>build</code> <code>cmake -S src -B build</code> <code>src</code> <code>build</code> <code>cmake -B build</code> cwd <code>build</code> <code>cmake -B build src</code> <code>src</code> <code>build</code> <code>cmake -B build -S src</code> <code>src</code> <code>build</code>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake/#12-g","title":"1.2 -G \u6307\u5b9a\u6784\u5efa\u7cfb\u7edf\u751f\u6210\u5668","text":"<ul> <li><code>-G\u00a0&lt;generator-name&gt;</code> \uff1a\u5982 <code>Unix Makefiles</code>\u3002\u53ef\u80fd\u7684\u540d\u79f0\u5728 cmake-Generants \u624b\u518c\u4e2d\u6709\u8be6\u7ec6\u8bf4\u660e\u3002 \u5e38\u89c1\u7684\u5982\uff1a</li> <li><code>Unix Makefiles</code> \uff1a\u751f\u6210\u6807\u51c6\u7684 UNIX makefiles \u6587\u4ef6</li> <li><code>Ninja</code> \uff1a\u751f\u6210 build.ninja \u6587\u4ef6</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake/#13-install-prefix","title":"1.3 --install-prefix \u6307\u5b9a\u5b89\u88c5\u76ee\u5f55","text":"<ul> <li><code>--install-prefix\u00a0&lt;directory&gt;</code> \uff1a\u6307\u5b9a CMAKE_INSTALL_PREFIX \u53d8\u91cf\u4f7f\u7528\u7684\u5b89\u88c5\u76ee\u5f55\u3002\u5fc5\u987b\u662f\u7edd\u5bf9\u8def\u5f84\u3002</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake/#14-graphviz","title":"1.4 --graphviz \u751f\u6210\u4f9d\u8d56\u56fe","text":"<ul> <li>Graphviz \u7f51\u7ad9</li> <li><code>--graphviz=&lt;file&gt;.dot</code></li> </ul> <pre><code>[shw@localhost build]$ cmake ../common/math --graphviz=1.dot\n-- Configuring done\n-- Generating done\nGenerate graphviz: /home/shw/test/code/cmake/build/1.dot\n-- Build files have been written to: /home/shw/test/code/cmake/build\n[shw@localhost build]$ </code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake/#15-log-level-message","title":"1.5 --log-level \u8bbe\u7f6e message \u6d88\u606f\u7ea7\u522b","text":"<ul> <li><code>--log-level=&lt;level&gt;</code> \uff1a<code>Message()</code> \u547d\u4ee4\u5c06\u4ec5\u8f93\u51fa\u6307\u5b9a\u65e5\u5fd7\u7ea7\u522b\u6216\u66f4\u9ad8\u7ea7\u522b\u7684\u6d88\u606f\u3002\u53ef\u9009\u7684\u7ea7\u522b\u4e3a <code>ERROR</code>,\u00a0<code>WARNING</code>,\u00a0<code>NOTICE</code>,\u00a0<code>STATUS</code>\u00a0(default),\u00a0<code>VERBOSE</code>,\u00a0<code>DEBUG</code>, or\u00a0<code>TRACE</code>. \u793a\u4f8b</li> </ul> <pre><code>[shw@localhost build]$ cmake ../common/math --log-level=ERROR\n-- Configuring done\n-- Generating done\n-- Build files have been written to: /home/shw/test/code/cmake/build\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake/#2-cmake-build","title":"2 cmake --build","text":"<p><code>cmake --build &lt;dir&gt; [&lt;options&gt;] [-- &lt;build-tool-options&gt;]</code> \u529f\u80fd\u76f8\u5f53\u4e8e\u6267\u884c\u5b8c cmake \u4e4b\u540e\uff0c\u518d\u6267\u884c make\uff08\u5982\u679c\u662f\u751f\u6210\u7684 Makefile \u6587\u4ef6\uff09\u3002\u4ee5\u4e0b\u6240\u6709\u9009\u9879\u90fd\u53ef\u4ee5\u8054\u7cfb\u5230 make \u9009\u9879\u3002</p> <pre><code>[shw@rocky build]$ cmake --build .\n[ 50%] Building CXX object CMakeFiles/mymath.dir/mymath.cc.o\n[100%] Linking CXX static library libmymath.a\n[100%] Built target mymath\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake/#21-j-parallel","title":"2.1 -j\u00a0\u3001--parallel","text":"<ul> <li><code>-j\u00a0[&lt;jobs&gt;],\u00a0--parallel\u00a0[&lt;jobs&gt;]</code> \uff1a\u6307\u5b9a\u7f16\u8bd1\u65f6\u4f7f\u7528\u7684\u8fdb\u7a0b\u6570\uff0c\u52a0\u5feb\u7f16\u8bd1\u901f\u5ea6\u3002</li> </ul> <pre><code>[shw@rocky build]$ cmake --build . -j4\n[ 50%] Building CXX object CMakeFiles/mymath.dir/mymath.cc.o\n[100%] Linking CXX static library libmymath.a\n[100%] Built target mymath\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake/#22-t-target","title":"2.2 -t\u3001\u00a0--target","text":"<ul> <li><code>-t\u00a0&lt;tgt&gt;...,\u00a0--target\u00a0&lt;tgt&gt;...</code> \uff1a\u6307\u5b9a\u6784\u5efa\u7684\u76ee\u6807\uff0c\u76f8\u5f53\u4e8e make \u65f6\u6307\u5b9a\u6784\u5efa\u54ea\u4e00\u4e2a\u76ee\u6807\u3002</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake/#3-cmake-install","title":"3 cmake --install","text":"<p><code>cmake --install &lt;dir&gt; [&lt;options&gt;]</code> \u7528\u6765\u5c06\u6784\u5efa\u751f\u6210\u7684\u76ee\u6807\u6587\u4ef6\u5b89\u88c5\u5230\u6307\u5b9a\u4f4d\u7f6e\u3002\u5176\u4e2d <code>&lt;dir&gt;</code> \u5fc5\u987b\u6307\u5b9a\u3002</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake/#31-prefix","title":"3.1 --prefix","text":"<ul> <li><code>--prefix\u00a0&lt;prefix&gt;</code> \uff1a\u8986\u76d6\u5b89\u88c5\u524d\u7f00, \u5b9e\u9645\u4e0a\u91cd\u5199\u4e86\u00a0<code>CMAKE_INSTALL_PREFIX</code> \u53d8\u91cf\u3002</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake/#32-strip","title":"3.2 --strip","text":"<ul> <li><code>--strip</code> \uff1a\u5220\u9664\u6240\u6709\u7b26\u53f7\u548c\u91cd\u5b9a\u4f4d\u4fe1\u606f\uff0c\u53ef\u4ee5\u6709\u6548\u51cf\u5c11\u4e8c\u8fdb\u5236\u6587\u4ef6\u5927\u5c0f\uff0c\u901a\u5e38\u7528\u4e8e release \u7248\u672c\u3002<code>gcc -s</code> \u9009\u9879\u6216\u8005 <code>strip -s</code> \u9009\u9879\u90fd\u53ef\u4ee5\u8fbe\u5230\u76f8\u540c\u76ee\u7684\u3002\u5b9e\u9645\u4e0a cmake \u6700\u7ec8\u8c03\u7528\u7684\u662f <code>strip -s</code>\u3002</li> </ul> <pre><code>$ file perf_test\nperf_test: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, BuildID[sha1]=88c7394ab7d4dbe738fe2dd226ecea2c0d7aa577, for GNU/Linux 3.2.0, not stripped\n$ strip -s perf_test\n$ file perf_test\nperf_test: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, BuildID[sha1]=88c7394ab7d4dbe738fe2dd226ecea2c0d7aa577, for GNU/Linux 3.2.0, stripped\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/","title":"CMake","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#1","title":"1 \u8bf4\u660e","text":"<p>cmake\u7684\u5b9a\u4e49\u662f\u4ec0\u4e48 \uff1f-----\u9ad8\u7ea7\u7f16\u8bd1\u914d\u7f6e\u5de5\u5177</p> <p>\u5f53\u591a\u4e2a\u4eba\u7528\u4e0d\u540c\u7684\u8bed\u8a00\u6216\u8005\u7f16\u8bd1\u5668\u5f00\u53d1\u4e00\u4e2a\u9879\u76ee\uff0c\u6700\u7ec8\u8981\u8f93\u51fa\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\u6216\u8005\u5171\u4eab\u5e93\uff08dll\uff0cso\u7b49\u7b49\uff09\u8fd9\u65f6\u5019\u795e\u5668\u5c31\u51fa\u73b0\u4e86-----CMake\uff01</p> <p>\u6240\u6709\u64cd\u4f5c\u90fd\u662f\u901a\u8fc7\u7f16\u8bd1CMakeLists.txt\u6765\u5b8c\u6210\u7684\u2014\u7b80\u5355</p> <p>\u5b98 \u65b9\u7f51\u7ad9\u662f www.cmake.org\uff0c\u53ef\u4ee5\u901a\u8fc7\u8bbf\u95ee\u5b98\u65b9\u7f51\u7ad9\u83b7\u5f97\u66f4\u591a\u5173\u4e8e cmake \u7684\u4fe1\u606f</p> <p>\u5b66\u4e60CMake\u7684\u76ee\u7684\uff0c\u4e3a\u5c06\u6765\u5904\u7406\u5927\u578b\u7684C/C++/JAVA\u9879\u76ee\u505a\u51c6\u5907</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#2-cmake","title":"2 CMake\u5b89\u88c5","text":"<p>1\u3001\u7edd\u5927\u591a\u6570\u7684linux\u7cfb\u7edf\u5df2\u7ecf\u5b89\u88c5\u4e86CMake</p> <p>2\u3001Windows\u6216\u67d0\u4e9b\u6ca1\u6709\u5b89\u88c5\u8fc7\u7684linux\u7cfb\u7edf\uff0c\u53bbhttp://www.cmake.org/HTML/Download.html \u53ef\u4ee5\u4e0b\u8f7d\u5b89\u88c5</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#3-cmakehelloword","title":"3 CMake\u4e00\u4e2aHelloWord","text":"<p>1\u3001\u6b65\u9aa4\u4e00\uff0c\u5199\u4e00\u4e2aHelloWord</p> <pre><code>#main.cpp\n\n#include &lt;iostream&gt;\n\nint main(){\nstd::cout &lt;&lt;  \"hello word\" &lt;&lt; std::endl;\n}\n</code></pre> <p>2\u3001\u6b65\u9aa4\u4e8c\uff0c\u5199CMakeLists.txt</p> <pre><code>#CMakeLists.txt\n\nPROJECT (HELLO)\n\nSET(SRC_LIST main.cpp)\n\nMESSAGE(STATUS \"This is BINARY dir \" ${HELLO_BINARY_DIR})\n\nMESSAGE(STATUS \"This is SOURCE dir \"${HELLO_SOURCE_DIR})\n\nADD_EXECUTABLE(hello ${SRC_LIST})\n</code></pre> <p>3\u3001\u6b65\u9aa4\u4e09\u3001\u4f7f\u7528cmake\uff0c\u751f\u6210makefile\u6587\u4ef6</p> <pre><code>cmake .\n\n\u8f93\u51fa\uff1a\n[root@localhost cmake]## cmake .\nCMake Warning (dev) in CMakeLists.txt:\nSyntax Warning in cmake code at\n\n/root/cmake/CMakeLists.txt:7:37\n\nArgument not separated from preceding token by whitespace.\nThis warning is for project developers.  Use -Wno-dev to suppress it.\n\n-- The C compiler identification is GNU 10.2.1\n-- The CXX compiler identification is GNU 10.2.1\n-- Check for working C compiler: /usr/bin/cc\n-- Check for working C compiler: /usr/bin/cc -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Check for working CXX compiler: /usr/bin/c++\n-- Check for working CXX compiler: /usr/bin/c++ -- works\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- This is BINARY dir /root/cmake\n-- This is SOURCE dir /root/cmake\n-- Configuring done\n-- Generating done\n-- Build files have been written to: /root/cmake\n</code></pre> <p>\u76ee\u5f55\u4e0b\u5c31\u751f\u6210\u4e86\u8fd9\u4e9b\u6587\u4ef6-CMakeFiles, CMakeCache.txt, cmake_install.cmake \u7b49\u6587\u4ef6\uff0c\u5e76\u4e14\u751f\u6210\u4e86Makefile. \u73b0\u5728\u4e0d\u9700\u8981\u7406\u4f1a\u8fd9\u4e9b\u6587\u4ef6\u7684\u4f5c\u7528\uff0c\u4ee5\u540e\u4f60\u4e5f\u53ef\u4ee5\u4e0d\u53bb\u7406\u4f1a\u3002\u6700\u5173\u952e\u7684\u662f\uff0c\u5b83\u81ea\u52a8\u751f\u6210\u4e86Makefile.</p> <p>4\u3001\u4f7f\u7528make\u547d\u4ee4\u7f16\u8bd1</p> <pre><code>root@localhost cmake]## make\nScanning dependencies of target hello\n[100%] Building CXX object CMakeFiles/hello.dir/main.cpp.o\nLinking CXX executable hello\n[100%] Built target hello\n</code></pre> <p>5\u3001\u6700\u7ec8\u751f\u6210\u4e86Hello\u7684\u53ef\u6267\u884c\u7a0b\u5e8f</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#4-cmakehelloword-","title":"4 CMake\u4e00\u4e2aHelloWord-\u7684\u8bed\u6cd5\u4ecb\u7ecd","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#41-project","title":"4.1 PROJECT\u5173\u952e\u5b57","text":"<p>\u53ef\u4ee5\u7528\u6765\u6307\u5b9a\u5de5\u7a0b\u7684\u540d\u5b57\u548c\u652f\u6301\u7684\u8bed\u8a00\uff0c\u9ed8\u8ba4\u652f\u6301\u6240\u6709\u8bed\u8a00</p> <p>PROJECT (HELLO) \u6307\u5b9a\u4e86\u5de5\u7a0b\u7684\u540d\u5b57\uff0c\u5e76\u4e14\u652f\u6301\u6240\u6709\u8bed\u8a00\u2014\u5efa\u8bae</p> <p>PROJECT (HELLO CXX) \u6307\u5b9a\u4e86\u5de5\u7a0b\u7684\u540d\u5b57\uff0c\u5e76\u4e14\u652f\u6301\u8bed\u8a00\u662fC++</p> <p>PROJECT (HELLO C CXX) \u6307\u5b9a\u4e86\u5de5\u7a0b\u7684\u540d\u5b57\uff0c\u5e76\u4e14\u652f\u6301\u8bed\u8a00\u662fC\u548cC++</p> <p>\u8be5\u6307\u5b9a\u9690\u5f0f\u5b9a\u4e49\u4e86\u4e24\u4e2aCMAKE\u7684\u53d8\u91cf</p> <p><code>&lt;projectname&gt;_BINARY_DIR</code>\uff0c\u672c\u4f8b\u4e2d\u662f HELLO_BINARY_DIR</p> <p><code>&lt;projectname&gt;_SOURCE_DIR</code>\uff0c\u672c\u4f8b\u4e2d\u662f HELLO_SOURCE_DIR</p> <p>MESSAGE\u5173\u952e\u5b57\u5c31\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u8005\u4e24\u4e2a\u53d8\u91cf\uff0c\u5f53\u524d\u90fd\u6307\u5411\u5f53\u524d\u7684\u5de5\u4f5c\u76ee\u5f55\uff0c\u540e\u9762\u4f1a\u8bb2\u5916\u90e8\u7f16\u8bd1</p> <p>\u95ee\u9898\uff1a\u5982\u679c\u6539\u4e86\u5de5\u7a0b\u540d\uff0c\u8fd9\u4e24\u4e2a\u53d8\u91cf\u540d\u4e5f\u4f1a\u6539\u53d8</p> <p>\u89e3\u51b3\uff1a\u53c8\u5b9a\u4e49\u4e24\u4e2a\u9884\u5b9a\u4e49\u53d8\u91cf\uff1aPROJECT_BINARY_DIR\u548cPROJECT_SOURCE_DIR\uff0c\u8fd9\u4e24\u4e2a\u53d8\u91cf\u548cHELLO_BINARY_DIR\uff0cHELLO_SOURCE_DIR\u662f\u4e00\u81f4\u7684\u3002\u6240\u4ee5\u6539\u4e86\u5de5\u7a0b\u540d\u4e5f\u6ca1\u6709\u5173\u7cfb</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#42-set","title":"4.2 SET\u5173\u952e\u5b57","text":"<p>\u7528\u6765\u663e\u793a\u7684\u6307\u5b9a\u53d8\u91cf\u7684</p> <p>SET(SRC_LIST main.cpp) SRC_LIST\u53d8\u91cf\u5c31\u5305\u542b\u4e86main.cpp</p> <p>\u4e5f\u53ef\u4ee5 SET(SRC_LIST main.cpp t1.cpp t2.cpp)</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#43-message","title":"4.3 MESSAGE\u5173\u952e\u5b57","text":"<p>\u5411\u7ec8\u7aef\u8f93\u51fa\u7528\u6237\u81ea\u5b9a\u4e49\u7684\u4fe1\u606f</p> <p>\u4e3b\u8981\u5305\u542b\u4e09\u79cd\u4fe1\u606f\uff1a</p> <ul> <li>SEND_ERROR\uff0c\u4ea7\u751f\u9519\u8bef\uff0c\u751f\u6210\u8fc7\u7a0b\u88ab\u8df3\u8fc7\u3002</li> <li>SATUS\uff0c\u8f93\u51fa\u524d\u7f00\u4e3a\u2014\u7684\u4fe1\u606f\u3002</li> <li>FATAL_ERROR\uff0c\u7acb\u5373\u7ec8\u6b62\u6240\u6709 cmake \u8fc7\u7a0b.</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#44-add_executable","title":"4.4 ADD_EXECUTABLE\u5173\u952e\u5b57","text":"<p>\u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6</p> <p>ADD_EXECUTABLE(hello ${SRC_LIST}) \u751f\u6210\u7684\u53ef\u6267\u884c\u6587\u4ef6\u540d\u662fhello\uff0c\u6e90\u6587\u4ef6\u8bfb\u53d6\u53d8\u91cfSRC_LIST\u4e2d\u7684\u5185\u5bb9</p> <p>\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5199 ADD_EXECUTABLE(hello main.cpp)</p> <p>\u4e0a\u8ff0\u4f8b\u5b50\u53ef\u4ee5\u7b80\u5316\u7684\u5199\u6210</p> <p>PROJECT(HELLO) ADD_EXECUTABLE(hello main.cpp)</p> <p>\u6ce8\u610f\uff1a\u5de5\u7a0b\u540d\u7684 HELLO \u548c\u751f\u6210\u7684\u53ef\u6267\u884c\u6587\u4ef6 hello \u662f\u6ca1\u6709\u4efb\u4f55\u5173\u7cfb\u7684</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#5","title":"5 \u8bed\u6cd5\u7684\u57fa\u672c\u539f\u5219","text":"<ul> <li>\u53d8\u91cf\u4f7f\u7528${}\u65b9\u5f0f\u53d6\u503c\uff0c\u4f46\u662f\u5728 IF \u63a7\u5236\u8bed\u53e5\u4e2d\u662f\u76f4\u63a5\u4f7f\u7528\u53d8\u91cf\u540d</li> <li> <p>\u6307\u4ee4(\u53c2\u6570 1 \u53c2\u6570 2...) \u53c2\u6570\u4f7f\u7528\u62ec\u5f27\u62ec\u8d77\uff0c\u53c2\u6570\u4e4b\u95f4\u4f7f\u7528\u7a7a\u683c\u6216\u5206\u53f7\u5206\u5f00\u3002 \u4ee5\u4e0a\u9762\u7684 ADD_EXECUTABLE \u6307\u4ee4\u4e3a\u4f8b\uff0c\u5982\u679c\u5b58\u5728\u53e6\u5916\u4e00\u4e2a func.cpp \u6e90\u6587\u4ef6</p> <p>\u5c31\u8981\u5199\u6210\uff1aADD_EXECUTABLE(hello main.cpp func.cpp)\u6216\u8005ADD_EXECUTABLE(hello main.cpp;func.cpp)</p> </li> <li> <p>\u6307\u4ee4\u662f\u5927\u5c0f\u5199\u65e0\u5173\u7684\uff0c\u53c2\u6570\u548c\u53d8\u91cf\u662f\u5927\u5c0f\u5199\u76f8\u5173\u7684\u3002\u4f46\uff0c\u63a8\u8350\u4f60\u5168\u90e8\u4f7f\u7528\u5927\u5199\u6307\u4ee4</p> </li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#51","title":"5.1 \u8bed\u6cd5\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>SET(SRC_LIST main.cpp) \u53ef\u4ee5\u5199\u6210 SET(SRC_LIST \u201cmain.cpp\u201d)\uff0c\u5982\u679c\u6e90\u6587\u4ef6\u540d\u4e2d\u542b\u6709\u7a7a\u683c\uff0c\u5c31\u5fc5\u987b\u8981\u52a0\u53cc\u5f15\u53f7</li> <li>ADD_EXECUTABLE(hello main) \u540e\u7f00\u53ef\u4ee5\u4e0d\u884c\uff0c\u4ed6\u4f1a\u81ea\u52a8\u53bb\u627e.c\u548c.cpp\uff0c\u6700\u597d\u4e0d\u8981\u8fd9\u6837\u5199\uff0c\u53ef\u80fd\u4f1a\u6709\u8fd9\u4e24\u4e2a\u6587\u4ef6main.cpp\u548cmain</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#6","title":"6 \u5185\u90e8\u6784\u5efa\u548c\u5916\u90e8\u6784\u5efa","text":"<ul> <li>\u4e0a\u8ff0\u4f8b\u5b50\u5c31\u662f\u5185\u90e8\u6784\u5efa\uff0c\u4ed6\u751f\u4ea7\u7684\u4e34\u65f6\u6587\u4ef6\u7279\u522b\u591a\uff0c\u4e0d\u65b9\u4fbf\u6e05\u7406</li> <li>\u5916\u90e8\u6784\u5efa\uff0c\u5c31\u4f1a\u628a\u751f\u6210\u7684\u4e34\u65f6\u6587\u4ef6\u653e\u5728build\u76ee\u5f55\u4e0b\uff0c\u4e0d\u4f1a\u5bf9\u6e90\u6587\u4ef6\u6709\u4efb\u4f55\u5f71\u54cd\u5f3a\u70c8\u4f7f\u7528\u5916\u90e8\u6784\u5efa\u65b9\u5f0f</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#61","title":"6.1 \u5916\u90e8\u6784\u5efa\u65b9\u5f0f\u4e3e\u4f8b","text":"<pre><code>//\u4f8b\u5b50\u76ee\u5f55\uff0cCMakeLists.txt\u548c\u4e0a\u9762\u4f8b\u5b50\u4e00\u81f4\n[root@localhost cmake]## pwd\n/root/cmake\n[root@localhost cmake]## ll\ntotal 8\n-rw-r--r--. 1 root root 198 Dec 28 20:59 CMakeLists.txt\n-rw-r--r--. 1 root root  76 Dec 28 00:18 main.cpp\n</code></pre> <p>1\u3001\u5efa\u7acb\u4e00\u4e2abuild\u76ee\u5f55\uff0c\u53ef\u4ee5\u5728\u4efb\u4f55\u5730\u65b9\uff0c\u5efa\u8bae\u5728\u5f53\u524d\u76ee\u5f55\u4e0b</p> <p>2\u3001\u8fdb\u5165build\uff0c\u8fd0\u884ccmake .. \u5f53\u7136..\u8868\u793a\u4e0a\u4e00\u7ea7\u76ee\u5f55\uff0c\u4f60\u53ef\u4ee5\u5199CMakeLists.txt\u6240\u5728\u7684\u7edd\u5bf9\u8def\u5f84\uff0c\u751f\u4ea7\u7684\u6587\u4ef6\u90fd\u5728build\u76ee\u5f55\u4e0b\u4e86</p> <p>3\u3001\u5728build\u76ee\u5f55\u4e0b\uff0c\u8fd0\u884cmake\u6765\u6784\u5efa\u5de5\u7a0b</p> <p>\u6ce8\u610f\u5916\u90e8\u6784\u5efa\u7684\u4e24\u4e2a\u53d8\u91cf</p> <p>1\u3001HELLO_SOURCE_DIR \u8fd8\u662f\u5de5\u7a0b\u8def\u5f84</p> <p>2\u3001HELLO_BINARY_DIR \u7f16\u8bd1\u8def\u5f84 \u4e5f\u5c31\u662f /root/cmake/bulid</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#7-hello-world","title":"7 \u8ba9Hello World\u770b\u8d77\u6765\u66f4\u50cf\u4e00\u4e2a\u5de5\u7a0b","text":"<ul> <li>\u4e3a\u5de5\u7a0b\u6dfb\u52a0\u4e00\u4e2a\u5b50\u76ee\u5f55 src\uff0c\u7528\u6765\u653e\u7f6e\u5de5\u7a0b\u6e90\u4ee3\u7801</li> <li>\u6dfb\u52a0\u4e00\u4e2a\u5b50\u76ee\u5f55 doc\uff0c\u7528\u6765\u653e\u7f6e\u8fd9\u4e2a\u5de5\u7a0b\u7684\u6587\u6863 hello.txt</li> <li>\u5728\u5de5\u7a0b\u76ee\u5f55\u6dfb\u52a0\u6587\u672c\u6587\u4ef6 COPYRIGHT, README</li> <li>\u5728\u5de5\u7a0b\u76ee\u5f55\u6dfb\u52a0\u4e00\u4e2a runhello.sh \u811a\u672c\uff0c\u7528\u6765\u8c03\u7528 hello \u4e8c\u8fdb\u5236</li> <li>\u5c06\u6784\u5efa\u540e\u7684\u76ee\u6807\u6587\u4ef6\u653e\u5165\u6784\u5efa\u76ee\u5f55\u7684 bin \u5b50\u76ee\u5f55</li> <li>\u5c06 doc \u76ee\u5f55 \u7684\u5185\u5bb9\u4ee5\u53ca COPYRIGHT/README \u5b89\u88c5\u5230/usr/share/doc/cmake/</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#71-bin","title":"7.1 \u5c06\u76ee\u6807\u6587\u4ef6\u653e\u5165\u6784\u5efa\u76ee\u5f55\u7684 bin \u5b50\u76ee\u5f55","text":"<p>\u6bcf\u4e2a\u76ee\u5f55\u4e0b\u90fd\u8981\u6709\u4e00\u4e2aCMakeLists.txt\u8bf4\u660e</p> <pre><code>[root@localhost cmake]## tree\n.\n\u251c\u2500\u2500 build\n\u251c\u2500\u2500 CMakeLists.txt\n\u2514\u2500\u2500 src\n\u251c\u2500\u2500 CMakeLists.txt\n\u2514\u2500\u2500 main.cpp\n</code></pre> <p>\u5916\u5c42CMakeLists.txt</p> <pre><code>PROJECT(HELLO)\nADD_SUBDIRECTORY(src bin)\n</code></pre> <p>src\u4e0b\u7684CMakeLists.txt</p> <pre><code>ADD_EXECUTABLE(hello main.cpp)\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#711-add_subdirectory","title":"7.1.1 ADD_SUBDIRECTORY \u6307\u4ee4","text":"<p>ADD_SUBDIRECTORY(source_dir [binary_dir] [EXCLUDE_FROM_ALL])</p> <ul> <li>\u8fd9\u4e2a\u6307\u4ee4\u7528\u4e8e\u5411\u5f53\u524d\u5de5\u7a0b\u6dfb\u52a0\u5b58\u653e\u6e90\u6587\u4ef6\u7684\u5b50\u76ee\u5f55\uff0c\u5e76\u53ef\u4ee5\u6307\u5b9a\u4e2d\u95f4\u4e8c\u8fdb\u5236\u548c\u76ee\u6807\u4e8c\u8fdb\u5236\u5b58\u653e\u7684\u4f4d\u7f6e</li> <li>EXCLUDE_FROM_ALL\u51fd\u6570\u662f\u5c06\u5199\u7684\u76ee\u5f55\u4ece\u7f16\u8bd1\u4e2d\u6392\u9664\uff0c\u5982\u7a0b\u5e8f\u4e2d\u7684example</li> <li> <p>ADD_SUBDIRECTORY(src bin)</p> <p>\u5c06 src \u5b50\u76ee\u5f55\u52a0\u5165\u5de5\u7a0b\u5e76\u6307\u5b9a\u7f16\u8bd1\u8f93\u51fa(\u5305\u542b\u7f16\u8bd1\u4e2d\u95f4\u7ed3\u679c)\u8def\u5f84\u4e3abin \u76ee\u5f55</p> <p>\u5982\u679c\u4e0d\u8fdb\u884c bin \u76ee\u5f55\u7684\u6307\u5b9a\uff0c\u90a3\u4e48\u7f16\u8bd1\u7ed3\u679c(\u5305\u62ec\u4e2d\u95f4\u7ed3\u679c)\u90fd\u5c06\u5b58\u653e\u5728build/src \u76ee\u5f55</p> </li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#712","title":"7.1.2 \u66f4\u6539\u4e8c\u8fdb\u5236\u7684\u4fdd\u5b58\u8def\u5f84","text":"<p>SET \u6307\u4ee4\u91cd\u65b0\u5b9a\u4e49 EXECUTABLE_OUTPUT_PATH \u548c LIBRARY_OUTPUT_PATH \u53d8\u91cf \u6765\u6307\u5b9a\u6700\u7ec8\u7684\u76ee\u6807\u4e8c\u8fdb\u5236\u7684\u4f4d\u7f6e</p> <p>SET(EXECUTABLE_OUTPUT_PATH ${PROJECT_BINARY_DIR}/bin) SET(LIBRARY_OUTPUT_PATH ${PROJECT_BINARY_DIR}/lib)</p> <p>\u601d\u8003\uff1a\u52a0\u8f7d\u54ea\u4e2aCMakeLists.txt\u5f53\u4e2d</p> <p>\u54ea\u91cc\u8981\u6539\u53d8\u76ee\u6807\u5b58\u653e\u8def\u5f84\uff0c\u5c31\u5728\u54ea\u91cc\u52a0\u5165\u4e0a\u8ff0\u7684\u5b9a\u4e49\uff0c\u6240\u4ee5\u5e94\u8be5\u5728src\u4e0b\u7684CMakeLists.txt\u4e0b\u5199</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#8","title":"8 \u5b89\u88c5","text":"<ul> <li>\u4e00\u79cd\u662f\u4ece\u4ee3\u7801\u7f16\u8bd1\u540e\u76f4\u63a5 make install \u5b89\u88c5</li> <li>\u4e00\u79cd\u662f\u6253\u5305\u65f6\u7684\u6307\u5b9a \u76ee\u5f55\u5b89\u88c5\u3002<ul> <li>\u7b80\u5355\u7684\u53ef\u4ee5\u8fd9\u6837\u6307\u5b9a\u76ee\u5f55\uff1amake install DESTDIR=/tmp/test</li> <li>\u7a0d\u5fae\u590d\u6742\u4e00\u70b9\u53ef\u4ee5\u8fd9\u6837\u6307\u5b9a\u76ee\u5f55\uff1a./configure \u2013prefix=/usr</li> </ul> </li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#81-helloword","title":"8.1 \u5982\u4f55\u5b89\u88c5HelloWord","text":"<p>\u4f7f\u7528CMAKE\u4e00\u4e2a\u65b0\u7684\u6307\u4ee4\uff1aINSTALL</p> <p>INSTALL\u7684\u5b89\u88c5\u53ef\u4ee5\u5305\u62ec\uff1a\u4e8c\u8fdb\u5236\u3001\u52a8\u6001\u5e93\u3001\u9759\u6001\u5e93\u4ee5\u53ca\u6587\u4ef6\u3001\u76ee\u5f55\u3001\u811a\u672c\u7b49</p> <p>\u4f7f\u7528CMAKE\u4e00\u4e2a\u65b0\u7684\u53d8\u91cf\uff1aCMAKE_INSTALL_PREFIX</p> <pre><code>// \u76ee\u5f55\u6811\u7ed3\u6784\n[root@localhost cmake]## tree\n.\n\u251c\u2500\u2500 build\n\u251c\u2500\u2500 CMakeLists.txt\n\u251c\u2500\u2500 COPYRIGHT\n\u251c\u2500\u2500 doc\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 hello.txt\n\u251c\u2500\u2500 README\n\u251c\u2500\u2500 runhello.sh\n\u2514\u2500\u2500 src\n\u251c\u2500\u2500 CMakeLists.txt\n\u2514\u2500\u2500 main.cpp\n\n3 directories, 7 files\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#811-copyrightreadme","title":"8.1.1 \u5b89\u88c5\u6587\u4ef6COPYRIGHT\u548cREADME","text":"<p>INSTALL(FILES COPYRIGHT README DESTINATION share/doc/cmake/)</p> <p>FILES\uff1a\u6587\u4ef6</p> <p>DESTINATION\uff1a</p> <p>1\u3001\u5199\u7edd\u5bf9\u8def\u5f84</p> <p>2\u3001\u53ef\u4ee5\u5199\u76f8\u5bf9\u8def\u5f84\uff0c\u76f8\u5bf9\u8def\u5f84\u5b9e\u9645\u8def\u5f84\u662f\uff1a${CMAKE_INSTALL_PREFIX}/ <p>CMAKE_INSTALL_PREFIX \u9ed8\u8ba4\u662f\u5728 /usr/local/</p> <p>cmake -DCMAKE_INSTALL_PREFIX=/usr \u5728cmake\u7684\u65f6\u5019\u6307\u5b9aCMAKE_INSTALL_PREFIX\u53d8\u91cf\u7684\u8def\u5f84</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#812-runhellosh","title":"8.1.2 \u5b89\u88c5\u811a\u672crunhello.sh","text":"<p>PROGRAMS\uff1a\u975e\u76ee\u6807\u6587\u4ef6\u7684\u53ef\u6267\u884c\u7a0b\u5e8f\u5b89\u88c5(\u6bd4\u5982\u811a\u672c\u4e4b\u7c7b)</p> <p>INSTALL(PROGRAMS runhello.sh DESTINATION bin)</p> <p>\u8bf4\u660e\uff1a\u5b9e\u9645\u5b89\u88c5\u5230\u7684\u662f /usr/bin</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#813-doc-hellotxt","title":"8.1.3 \u5b89\u88c5 doc \u4e2d\u7684 hello.txt","text":"<ul> <li>\u4e00\u3001\u662f\u901a\u8fc7\u5728 doc \u76ee\u5f55\u5efa\u7acbCMakeLists.txt \uff0c\u901a\u8fc7install\u4e0b\u7684file</li> <li> <p>\u4e8c\u3001\u662f\u76f4\u63a5\u5728\u5de5\u7a0b\u76ee\u5f55\u901a\u8fc7</p> <p>INSTALL(DIRECTORY doc/ DESTINATION share/doc/cmake)</p> </li> </ul> <p>DIRECTORY \u540e\u9762\u8fde\u63a5\u7684\u662f\u6240\u5728 Source \u76ee\u5f55\u7684\u76f8\u5bf9\u8def\u5f84</p> <p>\u6ce8\u610f\uff1aabc \u548c abc/\u6709\u5f88\u5927\u7684\u533a\u522b</p> <p>\u76ee\u5f55\u540d\u4e0d\u4ee5/\u7ed3\u5c3e\uff1a\u8fd9\u4e2a\u76ee\u5f55\u5c06\u88ab\u5b89\u88c5\u4e3a\u76ee\u6807\u8def\u5f84\u4e0b\u7684</p> <p>\u76ee\u5f55\u540d\u4ee5/\u7ed3\u5c3e\uff1a\u5c06\u8fd9\u4e2a\u76ee\u5f55\u4e2d\u7684\u5185\u5bb9\u5b89\u88c5\u5230\u76ee\u6807\u8def\u5f84</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#814","title":"8.1.4 \u5b89\u88c5\u8fc7\u7a0b","text":"<p>cmake ..</p> <p>make</p> <p>make install</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#9","title":"9 \u9759\u6001\u5e93\u548c\u52a8\u6001\u5e93\u7684\u6784\u5efa","text":"<p>\u4efb\u52a1\uff1a</p> <p>\uff11\uff0c\u5efa\u7acb\u4e00\u4e2a\u9759\u6001\u5e93\u548c\u52a8\u6001\u5e93\uff0c\u63d0\u4f9b HelloFunc \u51fd\u6570\u4f9b\u5176\u4ed6\u7a0b\u5e8f\u7f16\u7a0b\u4f7f\u7528\uff0cHelloFunc \u5411\u7ec8\u7aef\u8f93\u51fa Hello World \u5b57\u7b26\u4e32\u3002 </p> <p>\uff12\uff0c\u5b89\u88c5\u5934\u6587\u4ef6\u4e0e\u5171\u4eab\u5e93\u3002</p> <p>\u9759\u6001\u5e93\u548c\u52a8\u6001\u5e93\u7684\u533a\u522b</p> <ul> <li>\u9759\u6001\u5e93\u7684\u6269\u5c55\u540d\u4e00\u822c\u4e3a\u201c.a\u201d\u6216\u201c.lib\u201d\uff1b\u52a8\u6001\u5e93\u7684\u6269\u5c55\u540d\u4e00\u822c\u4e3a\u201c.so\u201d\u6216\u201c.dll\u201d\u3002</li> <li>\u9759\u6001\u5e93\u5728\u7f16\u8bd1\u65f6\u4f1a\u76f4\u63a5\u6574\u5408\u5230\u76ee\u6807\u7a0b\u5e8f\u4e2d\uff0c\u7f16\u8bd1\u6210\u529f\u7684\u53ef\u6267\u884c\u6587\u4ef6\u53ef\u72ec\u7acb\u8fd0\u884c</li> <li>\u52a8\u6001\u5e93\u5728\u7f16\u8bd1\u65f6\u4e0d\u4f1a\u653e\u5230\u8fde\u63a5\u7684\u76ee\u6807\u7a0b\u5e8f\u4e2d\uff0c\u5373\u53ef\u6267\u884c\u6587\u4ef6\u65e0\u6cd5\u5355\u72ec\u8fd0\u884c\u3002</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#91","title":"9.1 \u6784\u5efa\u5b9e\u4f8b","text":"<pre><code>[root@localhost cmake2]## tree\n.\n\u251c\u2500\u2500 build\n\u251c\u2500\u2500 CMakeLists.txt\n\u2514\u2500\u2500 lib\n\u251c\u2500\u2500 CMakeLists.txt\n\u251c\u2500\u2500 hello.cpp\n\u2514\u2500\u2500 hello.h\n</code></pre> <p>hello.h\u4e2d\u7684\u5185\u5bb9</p> <pre><code>#ifndef HELLO_H\n#define Hello_H\n\nvoid HelloFunc();\n\n#endif\n</code></pre> <p>hello.cpp\u4e2d\u7684\u5185\u5bb9</p> <pre><code>#include \"hello.h\"\n#include &lt;iostream&gt;\nvoid HelloFunc(){\nstd::cout &lt;&lt; \"Hello World\" &lt;&lt; std::endl;\n}\n</code></pre> <p>\u9879\u76ee\u4e2d\u7684cmake\u5185\u5bb9</p> <pre><code>PROJECT(HELLO)\nADD_SUBDIRECTORY(lib bin)\n</code></pre> <p>lib\u4e2dCMakeLists.txt\u4e2d\u7684\u5185\u5bb9</p> <pre><code>SET(LIBHELLO_SRC hello.cpp)\nADD_LIBRARY(hello SHARED ${LIBHELLO_SRC})\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#911-add_library","title":"9.1.1 ADD_LIBRARY","text":"<p>ADD_LIBRARY(hello SHARED ${LIBHELLO_SRC})</p> <ul> <li>hello\uff1a\u5c31\u662f\u6b63\u5e38\u7684\u5e93\u540d\uff0c\u751f\u6210\u7684\u540d\u5b57\u524d\u9762\u4f1a\u52a0\u4e0alib\uff0c\u6700\u7ec8\u4ea7\u751f\u7684\u6587\u4ef6\u662flibhello.so</li> <li>SHARED\uff0c\u52a8\u6001\u5e93 STATIC\uff0c\u9759\u6001\u5e93</li> <li>${LIBHELLO_SRC} \uff1a\u6e90\u6587\u4ef6</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#912","title":"9.1.2 \u540c\u65f6\u6784\u5efa\u9759\u6001\u548c\u52a8\u6001\u5e93","text":"<pre><code>// \u5982\u679c\u7528\u8fd9\u79cd\u65b9\u5f0f\uff0c\u53ea\u4f1a\u6784\u5efa\u4e00\u4e2a\u52a8\u6001\u5e93\uff0c\u4e0d\u4f1a\u6784\u5efa\u51fa\u9759\u6001\u5e93\uff0c\u867d\u7136\u9759\u6001\u5e93\u7684\u540e\u7f00\u662f.a\nADD_LIBRARY(hello SHARED ${LIBHELLO_SRC})\nADD_LIBRARY(hello STATIC ${LIBHELLO_SRC})\n\n// \u4fee\u6539\u9759\u6001\u5e93\u7684\u540d\u5b57\uff0c\u8fd9\u6837\u662f\u53ef\u4ee5\u7684\uff0c\u4f46\u662f\u6211\u4eec\u5f80\u5f80\u5e0c\u671b\u4ed6\u4eec\u7684\u540d\u5b57\u662f\u76f8\u540c\u7684\uff0c\u53ea\u662f\u540e\u7f00\u4e0d\u540c\u800c\u5df2\nADD_LIBRARY(hello SHARED ${LIBHELLO_SRC})\nADD_LIBRARY(hello_static STATIC ${LIBHELLO_SRC})\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#913-set_target_properties","title":"9.1.3 SET_TARGET_PROPERTIES","text":"<p>\u8fd9\u6761\u6307\u4ee4\u53ef\u4ee5\u7528\u6765\u8bbe\u7f6e\u8f93\u51fa\u7684\u540d\u79f0\uff0c\u5bf9\u4e8e\u52a8\u6001\u5e93\uff0c\u8fd8\u53ef\u4ee5\u7528\u6765\u6307\u5b9a\u52a8\u6001\u5e93\u7248\u672c\u548c API \u7248\u672c</p> <p>\u540c\u65f6\u6784\u5efa\u9759\u6001\u548c\u52a8\u6001\u5e93</p> <pre><code>SET(LIBHELLO_SRC hello.cpp)\n\nADD_LIBRARY(hello_static STATIC ${LIBHELLO_SRC})\n\n//\u5bf9hello_static\u7684\u91cd\u540d\u4e3ahello\nSET_TARGET_PROPERTIES(hello_static PROPERTIES  OUTPUT_NAME \"hello\")\n//cmake \u5728\u6784\u5efa\u4e00\u4e2a\u65b0\u7684target \u65f6\uff0c\u4f1a\u5c1d\u8bd5\u6e05\u7406\u6389\u5176\u4ed6\u4f7f\u7528\u8fd9\u4e2a\u540d\u5b57\u7684\u5e93\uff0c\u56e0\u4e3a\uff0c\u5728\u6784\u5efa libhello.so \u65f6\uff0c \u5c31\u4f1a\u6e05\u7406\u6389 libhello.a\nSET_TARGET_PROPERTIES(hello_static PROPERTIES CLEAN_DIRECT_OUTPUT 1)\n\nADD_LIBRARY(hello SHARED ${LIBHELLO_SRC})\n\nSET_TARGET_PROPERTIES(hello PROPERTIES  OUTPUT_NAME \"hello\")\nSET_TARGET_PROPERTIES(hello PROPERTIES CLEAN_DIRECT_OUTPUT 1)\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#914","title":"9.1.4 \u52a8\u6001\u5e93\u7684\u7248\u672c\u53f7","text":"<p>\u4e00\u822c\u52a8\u6001\u5e93\u90fd\u6709\u4e00\u4e2a\u7248\u672c\u53f7\u7684\u5173\u8054</p> <pre><code>libhello.so.1.2\nlibhello.so -&gt;libhello.so.1\nlibhello.so.1-&gt;libhello.so.1.2\n</code></pre> <p>CMakeLists.txt \u63d2\u5165\u5982\u4e0b</p> <p><code>SET_TARGET_PROPERTIES(hello PROPERTIES VERSION 1.2 SOVERSION 1)</code></p> <p>VERSION \u6307\u4ee3\u52a8\u6001\u5e93\u7248\u672c\uff0cSOVERSION \u6307\u4ee3 API \u7248\u672c\u3002</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#915","title":"9.1.5 \u5b89\u88c5\u5171\u4eab\u5e93\u548c\u5934\u6587\u4ef6","text":"<p>\u672c\u4f8b\u4e2d\u6211\u4eec\u5c06 hello \u7684\u5171\u4eab\u5e93\u5b89\u88c5\u5230 <code>&lt;prefix&gt;/lib</code> \u76ee\u5f55\uff0c</p> <p>\u5c06 hello.h \u5b89\u88c5\u5230<code>&lt;prefix&gt;/include/hello</code> \u76ee\u5f55</p> <pre><code>//\u6587\u4ef6\u653e\u5230\u8be5\u76ee\u5f55\u4e0b\nINSTALL(FILES hello.h DESTINATION include/hello)\n\n//\u4e8c\u8fdb\u5236\uff0c\u9759\u6001\u5e93\uff0c\u52a8\u6001\u5e93\u5b89\u88c5\u90fd\u7528TARGETS\n//ARCHIVE \u7279\u6307\u9759\u6001\u5e93\uff0cLIBRARY \u7279\u6307\u52a8\u6001\u5e93\uff0cRUNTIME \u7279\u6307\u53ef\u6267\u884c\u76ee\u6807\u4e8c\u8fdb\u5236\u3002\nINSTALL(TARGETS hello hello_static LIBRARY DESTINATION lib ARCHIVE DESTINATION lib)\n</code></pre> <p>\u6ce8\u610f\uff1a</p> <p>\u5b89\u88c5\u7684\u65f6\u5019\uff0c\u6307\u5b9a\u4e00\u4e0b\u8def\u5f84\uff0c\u653e\u5230\u7cfb\u7edf\u4e0b</p> <p><code>cmake -DCMAKE_INSTALL_PREFIX=/usr ..</code></p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#916","title":"9.1.6 \u4f7f\u7528\u5916\u90e8\u5171\u4eab\u5e93\u548c\u5934\u6587\u4ef6","text":"<p>\u51c6\u5907\u5de5\u4f5c\uff0c\u65b0\u5efa\u4e00\u4e2a\u76ee\u5f55\u6765\u4f7f\u7528\u5916\u90e8\u5171\u4eab\u5e93\u548c\u5934\u6587\u4ef6</p> <pre><code>[root@MiWiFi-R4CM-srv cmake3]## tree\n.\n\u251c\u2500\u2500 build\n\u251c\u2500\u2500 CMakeLists.txt\n\u2514\u2500\u2500 src\n\u251c\u2500\u2500 CMakeLists.txt\n\u2514\u2500\u2500 main.cpp\n</code></pre> <p>main.cpp</p> <pre><code>#include &lt;hello.h&gt;\n\nint main(){\nHelloFunc();\n}\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#917-make","title":"9.1.7 \u89e3\u51b3\uff1amake\u540e\u5934\u6587\u4ef6\u627e\u4e0d\u5230\u7684\u95ee\u9898","text":"<p>PS\uff1ainclude  \u8fd9\u6837include\u662f\u53ef\u4ee5\uff0c\u8fd9\u4e48\u505a\u7684\u8bdd\uff0c\u5c31\u6ca1\u5565\u597d\u8bb2\u7684\u4e86 <p>\u5173\u952e\u5b57\uff1aINCLUDE_DIRECTORIES \u8fd9\u6761\u6307\u4ee4\u53ef\u4ee5\u7528\u6765\u5411\u5de5\u7a0b\u6dfb\u52a0\u591a\u4e2a\u7279\u5b9a\u7684\u5934\u6587\u4ef6\u641c\u7d22\u8def\u5f84\uff0c\u8def\u5f84\u4e4b\u95f4\u7528\u7a7a\u683c\u5206\u5272</p> <p>\u5728CMakeLists.txt\u4e2d\u52a0\u5165\u5934\u6587\u4ef6\u641c\u7d22\u8def\u5f84</p> <p>INCLUDE_DIRECTORIES(/usr/include/hello)</p> <p>\u611f\u8c22\uff1a</p> <p>\u7f51\u53cb\uff1azcc720\u7684\u63d0\u9192</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#918","title":"9.1.8 \u89e3\u51b3\uff1a\u627e\u5230\u5f15\u7528\u7684\u51fd\u6570\u95ee\u9898","text":"<p>\u62a5\u9519\u4fe1\u606f\uff1aundefined reference to `HelloFunc()'</p> <p>\u5173\u952e\u5b57\uff1aLINK_DIRECTORIES \u6dfb\u52a0\u975e\u6807\u51c6\u7684\u5171\u4eab\u5e93\u641c\u7d22\u8def\u5f84</p> <p>\u6307\u5b9a\u7b2c\u4e09\u65b9\u5e93\u6240\u5728\u8def\u5f84\uff0cLINK_DIRECTORIES(/home/myproject/libs)</p> <p>\u5173\u952e\u5b57\uff1aTARGET_LINK_LIBRARIES \u6dfb\u52a0\u9700\u8981\u94fe\u63a5\u7684\u5171\u4eab\u5e93</p> <p>TARGET_LINK_LIBRARIES\u7684\u65f6\u5019\uff0c\u53ea\u9700\u8981\u7ed9\u51fa\u52a8\u6001\u94fe\u63a5\u5e93\u7684\u540d\u5b57\u5c31\u884c\u4e86\u3002</p> <p>\u5728CMakeLists.txt\u4e2d\u63d2\u5165\u94fe\u63a5\u5171\u4eab\u5e93\uff0c\u4e3b\u8981\u8981\u63d2\u5728executable\u7684\u540e\u9762</p> <p>\u67e5\u770bmain\u7684\u94fe\u63a5\u60c5\u51b5</p> <pre><code>[root@MiWiFi-R4CM-srv bin]## ldd main linux-vdso.so.1 =&gt;  (0x00007ffedfda4000)\nlibhello.so =&gt; /lib64/libhello.so (0x00007f41c0d8f000)\nlibstdc++.so.6 =&gt; /lib64/libstdc++.so.6 (0x00007f41c0874000)\nlibm.so.6 =&gt; /lib64/libm.so.6 (0x00007f41c0572000)\nlibgcc_s.so.1 =&gt; /lib64/libgcc_s.so.1 (0x00007f41c035c000)\nlibc.so.6 =&gt; /lib64/libc.so.6 (0x00007f41bff8e000)\n/lib64/ld-linux-x86-64.so.2 (0x00007f41c0b7c000)\n</code></pre> <p>\u94fe\u63a5\u9759\u6001\u5e93</p> <p><code>TARGET_LINK_LIBRARIES(main libhello.a)</code></p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/cmake/cmake%E7%AC%94%E8%AE%B0-%E7%BD%91%E4%B8%8A%E8%B5%84%E6%BA%90/#919-cmake_include_path-cmake_library_path","title":"9.1.9 \u7279\u6b8a\u7684\u73af\u5883\u53d8\u91cf CMAKE_INCLUDE_PATH \u548c CMAKE_LIBRARY_PATH","text":"<p>\u6ce8\u610f\uff1a\u8fd9\u4e24\u4e2a\u662f\u73af\u5883\u53d8\u91cf\u800c\u4e0d\u662f cmake \u53d8\u91cf\uff0c\u53ef\u4ee5\u5728linux\u7684bash\u4e2d\u8fdb\u884c\u8bbe\u7f6e</p> <p>\u6211\u4eec\u4e0a\u9762\u4f8b\u5b50\u4e2d\u4f7f\u7528\u4e86\u7edd\u5bf9\u8def\u5f84INCLUDE_DIRECTORIES(/usr/include/hello)\u6765\u6307\u660einclude\u8def\u5f84\u7684\u4f4d\u7f6e</p> <p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u4f7f\u7528\u53e6\u5916\u4e00\u79cd\u65b9\u5f0f\uff0c\u4f7f\u7528\u73af\u5883\u53d8\u91cfexport CMAKE_INCLUDE_PATH=/usr/include/hello</p> <p>\u8865\u5145\uff1a\u751f\u4ea7debug\u7248\u672c\u7684\u65b9\u6cd5\uff1a cmake .. -DCMAKE_BUILD_TYPE=debug</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/","title":"MakeFile \u6559\u7a0b","text":"<ul> <li>Makefile \u662f\u9ed8\u8ba4 make \u6267\u884c\u7684\u6587\u672c</li> <li>make \u539f\u7406\u672c\u8d28\u4e0a\u662f\u6267\u884c\u4e00\u7cfb\u5217 shell \u6307\u4ee4\u6765\u7f16\u8bd1\u6e90\u4ee3\u7801\uff0c\u540c\u65f6\u5b83\u589e\u52a0\u4e86\u989d\u5916\u529f\u80fd\uff0c\u6bd4\u5982\uff1a\u5224\u65ad\u662f\u5426\u9700\u8981\u91cd\u65b0\u7f16\u8bd1\u751f\u6210\u76ee\u6807\u6587\u4ef6\uff0c\u6216\u8005\u6e05\u7406\u7f16\u8bd1\u4ea7\u751f\u7684\u4e2d\u95f4\u6587\u4ef6\u3002</li> <li>Makefile \u6587\u672c\u683c\u5f0f\u5982\u4e0b</li> <li>targets\uff1a\u89c4\u5219\u7684\u76ee\u6807\uff0c\u53ef\u4ee5\u662f Object File\uff08\u4e00\u822c\u79f0\u5b83\u4e3a\u4e2d\u95f4\u6587\u4ef6\uff09\uff0c\u4e5f\u53ef\u4ee5\u662f\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u8fd8\u53ef\u4ee5\u662f\u4e00\u4e2a\u6807\u7b7e\uff1b</li> <li>prerequisites\uff1a\u662f\u6211\u4eec\u7684\u4f9d\u8d56\u6587\u4ef6\uff0c\u8981\u751f\u6210 targets \u9700\u8981\u7684\u6587\u4ef6\u6216\u8005\u662f\u76ee\u6807\u3002\u53ef\u4ee5\u662f\u591a\u4e2a\uff0c\u4e5f\u53ef\u4ee5\u662f\u6ca1\u6709\uff1b</li> <li>command\uff1amake \u9700\u8981\u6267\u884c\u7684\u547d\u4ee4\uff08\u4efb\u610f\u7684 shell \u547d\u4ee4\uff09\u3002\u53ef\u4ee5\u6709\u591a\u6761\u547d\u4ee4\uff0c\u6bcf\u4e00\u6761\u547d\u4ee4\u5360\u4e00\u884c\u3002</li> </ul> <pre><code>targets : prerequisites\n    command\n</code></pre> <p>\u6ce8\u610f: \u5176\u4e2d command \u524d\u5fc5\u987b\u8981\u6709\u4e00\u4e2a tab\uff0c\u5373\u5982\u4e0b\u8bed\u6cd5\u4f1a\u5bfc\u81f4\u9519\u8bef</p> <pre><code>test:test.c\ngcc -o test test.c\n</code></pre> <p>\u6267\u884c make\uff0c\u62a5\u9519\u5982\u4e0b</p> <pre><code>~/code/makefile$ make\nmakefile:2: *** \u9057\u6f0f\u5206\u9694\u7b26 (null)\u3002 \u505c\u6b62\u3002\n</code></pre> <p>\u6b63\u786e\u8bed\u6cd5\u5982\u4e0b</p> <pre><code>test:test.c\ngcc -o test test.c\n</code></pre> <p>\u5982\u679c\u4e0d\u60f3\u4f7f\u7528 tab \u4f5c\u4e3a\u547d\u4ee4\u884c\u7684\u9996\u5b57\u7b26\uff0c\u53ef\u4ee5\u4fee\u6539 <code>.RECIPEPREFIX</code> \u53d8\u91cf\u6765\u8bbe\u7f6e\u5176\u5b83\u5b57\u7b26\uff0c\u5982</p> <pre><code>.RECIPEPREFIX=&lt;\nall:\n&lt;echo $(MAKEFILE_LIST)\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/#1","title":"1 \u5165\u95e8","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/#11-makefile","title":"1.1 \u4e00\u4e2a\u7b80\u5355\u7684 makefile \u793a\u4f8b","text":"<p>\u4f7f\u7528 make \u7f16\u8bd1 c++\u6e90\u7801\uff0c\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b</p> <pre><code>~/code/makefile$ tree\n.\n\u251c\u2500\u2500 makefile\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 include\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 math.cpp\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 math.h\n    \u2514\u2500\u2500 main.cpp\n</code></pre> <p>\u5176\u4e2d makefile \u6587\u4ef6\u5185\u5bb9\u5982\u4e0b, \u7b2c\u4e00\u884c main \u662f\u6700\u7ec8\u751f\u6210\u7684\u76ee\u6807\u6587\u4ef6\uff0c\u662f\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u5012\u6570 2 \u884c\u662f\u7528\u6765\u6e05\u7406\u4e2d\u95f4\u6587\u4ef6\u7684;</p> <pre><code>main:main.o math.o\ng++ main.o math.o -o math\nmain.o:src/main.cpp src/include/math.h\ng++ -c src/main.cpp -o main.o\nmath.o:src/include/math.cpp src/include/math.h\ng++ -c src/include/math.cpp -o math.o\nclean:\nrm -rf *.o\n</code></pre> <p>\u4f7f\u7528 make \u6765\u6784\u5efa\u751f\u6210\u76ee\u6807\u6587\u4ef6\uff0cmake \u4e5f\u53ef\u4ee5\u6307\u5b9a makefile \u6587\u4ef6\u540d, \u6307\u4ee4\u5982 <code>make -f filename</code></p> <pre><code>~/code/makefile$ make\ng++ -c src/main.cpp -o main.o\ng++ -c src/include/math.cpp -o math.o\ng++ main.o math.o -o math\n~/code/makefile$ ls\nmain.o  makefile  math  math.o  src\n</code></pre> <p>\u6307\u5b9a make \u7684\u6267\u884c\u76ee\u6807\uff0c\u5982\u4f7f\u7528 make clean \u547d\u4ee4\u5220\u9664\u4e2d\u95f4\u6587\u4ef6</p> <pre><code>~/code/makefile$ make clean\nrm -rf *.o\n~/code/makefile$ ls\nmakefile  math  src\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/#2","title":"2 \u57fa\u7840","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/#21-makefile","title":"2.1 makefile \u6587\u4ef6\u540d","text":"<ul> <li>GNUmakefile\uff08\u4e0d\u5efa\u8bae\uff09</li> <li>makefile</li> <li>Makefile (\u63a8\u8350)</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/#22-makefile","title":"2.2 Makefile \u7684\u5de5\u4f5c\u6d41\u7a0b","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/#221-make","title":"2.2.1 make \u603b\u4f53\u6d41\u7a0b","text":"<ol> <li>\u8bfb\u5165\u6240\u6709\u7684 Makefile\u3002</li> <li>\u8bfb\u5165\u88ab include \u7684\u5176\u5b83 Makefile\u3002</li> <li>\u521d\u59cb\u5316\u6587\u4ef6\u4e2d\u7684\u53d8\u91cf\u3002</li> <li>\u63a8\u5bfc\u9690\u6666\u89c4\u5219\uff0c\u5e76\u5206\u6790\u6240\u6709\u89c4\u5219\u3002</li> <li>\u4e3a\u6240\u6709\u7684\u76ee\u6807\u6587\u4ef6\u521b\u5efa\u4f9d\u8d56\u5173\u7cfb\u94fe\u3002</li> <li>\u6839\u636e\u4f9d\u8d56\u5173\u7cfb\uff0c\u51b3\u5b9a\u54ea\u4e9b\u76ee\u6807\u8981\u91cd\u65b0\u751f\u6210\u3002</li> <li>\u6267\u884c\u751f\u6210\u547d\u4ee4</li> </ol>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/#222","title":"2.2.2 \u6267\u884c\u76ee\u6807\u547d\u4ee4\u6d41\u7a0b","text":"<p>\u5047\u8bbe\u4e00\u4e2a makefile \u6587\u4ef6\u5185\u5bb9\u5982\u4e0b</p> <pre><code>main:main.o math.o\ng++ main.o math.o -o math\nmain.o:src/main.cpp src/include/math.h\ng++ -c src/main.cpp -o main.o\nmath.o:src/include/math.cpp src/include/math.h\ng++ -c src/include/math.cpp -o math.o\nclean:\nrm -rf *.o\n</code></pre> <p>\u5728\u6267\u884c make \u547d\u4ee4\u65f6\uff0c\u4e3b\u8981\u505a\u5982\u4e0b\u64cd\u4f5c: 1. \u67e5\u627e\u76ee\u5f55\u4e0b makefile \u6587\u4ef6\uff0c\u5c06\u7b2c\u4e00\u884c\u6307\u5b9a\u7684\u76ee\u6807\u4f5c\u4e3a\u6700\u7ec8\u751f\u6210\u7684\u76ee\u6807\uff0c\u7136\u540e\u53bb\u67e5\u627e\u5b83\u7684\u4f9d\u8d56\u6587\u4ef6 main.o \u548c math.o\uff0c\u901a\u8fc7\u6bd4\u8f83 main \u548c main.o \u548c math.o \u4fee\u6539\u65f6\u95f4\u987a\u5e8f\u6765\u51b3\u5b9a\u662f\u5426\u9700\u8981\u6267\u884c\u540e\u9762\u7684\u547d\u4ee4\u3002 2. \u5982\u679c\u76ee\u6807\u7684\u4f9d\u8d56\u4e0d\u5b58\u5728\uff0c\u5219\u4f1a\u53bb\u627e\u4f9d\u8d56\u6587\u4ef6\u662f\u5426\u4f5c\u4e3a\u53e6\u4e00\u4e2a\u76ee\u6807\uff0c\u6bd4\u5982\uff0cmain \u7684\u4f9d\u8d56 main.o \u4e0d\u5b58\u5728\uff0c\u5219\u67e5\u627e main.o \u4f5c\u4e3a\u76ee\u6807\u7684\u90a3\u4e00\u884c\uff0c\u5373\u7b2c 3 \u884c <code>main.o:src/main.cpp src/include/math.h</code>, \u7136\u540e\u53c8\u53bb\u67e5\u627e main.o \u7684\u4f9d\u8d56\u662f\u5426\u5b58\u5728\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002 3. \u5f53\u76ee\u6807\u7684\u4f9d\u8d56\u5b58\u5728\uff0c\u5c31\u5f00\u59cb\u6267\u884c\u76ee\u6807\u7684\u547d\u4ee4\uff0c\u5c42\u5c42\u5f80\u4e0a\uff0c\u6700\u7ec8\u6240\u6709\u76ee\u6807\u90fd\u751f\u6210 4. \u5f53 main \u7684\u4f9d\u8d56\u90fd\u5b58\u5728\u540e\u6267\u884c main \u7684\u547d\u4ee4 <code>g++ main.o math.o -o math</code>, \u4ea7\u751f main \u53ef\u6267\u884c\u7a0b\u5e8f</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/#23-make","title":"2.3 make \u5185\u5efa\u76ee\u6807\u540d","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/#231-phony","title":"2.3.1 <code>.PHONY</code> \u4f2a\u76ee\u6807","text":"<ul> <li>\u529f\u80fd\uff1a\u4e0d\u7ba1\u4f2a\u76ee\u6807\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c\u4f2a\u76ee\u6807\u5173\u8054\u7684\u547d\u4ee4\u603b\u662f\u88ab\u6267\u884c</li> <li>\u8bed\u6cd5\uff1a<code>.PHONY: target1 target2 ...</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>.PHONY:clean\nclean:\nrm -rf *.o\n</code></pre> <ul> <li>\u89e3\u91ca\uff1a\u4f2a\u76ee\u6807\u7684\u4f5c\u7528\u662f\uff0c\u4f2a\u76ee\u6807\u540e\u7684\u547d\u4ee4\u603b\u662f\u4f1a\u88ab\u6267\u884c; \u56e0\u4e3a makefile \u89c4\u5219\u4e2d\u662f\u5426\u53bb\u6267\u884c\u4e00\u6761\u547d\u4ee4\u662f\u9700\u8981\u6839\u636e\u4f9d\u8d56\u7684\u6587\u4ef6\u662f\u5426\u6bd4\u76ee\u6807\u6587\u4ef6\u65b0\u7279\u5f81\u6765\u51b3\u5b9a\u7684\uff0c\u5047\u8bbe\u4e0a\u4f8b makefile \u6587\u4ef6\u6240\u5728\u76ee\u5f55\u4e0b\u5b58\u5728 clean \u6587\u4ef6\uff0c\u800c\u76ee\u6807 clean \u5e76\u6ca1\u6709\u4f9d\u8d56\uff0c\u4e5f\u5c31\u8bf4\u660e\u76ee\u6807\u6c38\u8fdc\u6bd4\u4f9d\u8d56\u65b0\uff0c\u6240\u4ee5\u5f53\u6ca1\u6709\u6307\u5b9a clean \u662f\u4f2a\u76ee\u6807\u65f6\uff0cclean \u5c06\u6c38\u8fdc\u4e0d\u4f1a\u6267\u884c\u3002</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/#232-default","title":"2.3.2 <code>.DEFAULT</code> \u9ed8\u8ba4\u76ee\u6807","text":"<ul> <li>\u529f\u80fd\uff1a\u5f53 makefile \u4e2d\u76ee\u6807\u4e0d\u5b58\u5728\uff0c\u4f1a\u8fdb\u5165 <code>.DEFAULT</code> \u5b9a\u4e49\u7684\u89c4\u5219\u4e2d</li> <li>\u793a\u4f8b</li> </ul> <pre><code>.DEFAULT:\n$(error no target $@)\n</code></pre> <ul> <li>\u89e3\u91ca\uff1a\u76ee\u6807 test \u5e76\u4e0d\u5b58\u5728\uff0c\u6267\u884c\u9ed8\u8ba4\u76ee\u6807\u89c4\u5219</li> </ul> <pre><code>$ make test\nmakefile:9: *** no target test\u3002 \u505c\u6b62\u3002\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/#233-silent","title":"2.3.3 <code>.SILENT</code> \u6267\u884c\u547d\u4ee4\u65f6\u4e0d\u6253\u5370\u547d\u4ee4\u5230\u6807\u51c6\u8f93\u51fa","text":"<ul> <li>\u529f\u80fd\uff1a\u5f53\u76ee\u6807\u7684\u547d\u4ee4\u6267\u884c\u65f6\uff0c\u4f1a\u6253\u5370\u8fd9\u884c\u547d\u4ee4\uff0c\u901a\u8fc7 <code>.SILENT</code> \u53ef\u4ee5\u6307\u5b9a\u67d0\u4e9b\u76ee\u6807\u7684\u547d\u4ee4\u4e0d\u6253\u5370</li> <li>\u793a\u4f8b: \u76ee\u6807 all \u4e0d\u4f1a\u6253\u5370\u547d\u4ee4\uff0c\u76ee\u6807 tar1 \u4f1a\u6253\u5370</li> </ul> <pre><code>.SILENT:all\nall:tar1\n    echo $@ command\ntar1:\necho $@ command\n</code></pre> <ul> <li>\u7ed3\u679c</li> </ul> <pre><code>$ make\necho tar1 command\ntar1 command\nall command\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/#234-oneshell-shell","title":"2.3.4 <code>.ONESHELL</code> \u547d\u4ee4\u6267\u884c\u65f6\u4f7f\u7528\u4e00\u4e2a\u5b50 shell","text":"<ul> <li>\u529f\u80fd\uff1a\u9ed8\u8ba4 make \u6267\u884c\u547d\u4ee4\u65f6\uff0c\u6bcf\u4e00\u884c\u90fd\u4f1a\u7528\u65b0\u7684\u5b50 shell \u53bb\u6267\u884c, <code>.ONESHELL</code> \u80fd\u8ba9\u4e00\u4e2a\u5b50 shell \u53bb\u6267\u884c</li> <li>\u793a\u4f8b 1\uff1a\u542f\u52a8 <code>.ONESHELL</code>\uff0c\u53ef\u4ee5\u770b\u5230 shell \u8fdb\u7a0b id \u90fd\u4e00\u6837</li> </ul> <pre><code>.ONESHELL:\nall:\necho line 1 shell pid =$$$$\necho line 2 shell pid =$$$$\n</code></pre> <ul> <li>\u7ed3\u679c</li> </ul> <pre><code>$ make\necho line 1 shell pid =$$\necho line 2 shell pid =$$\nline 1 shell pid =2636380\nline 2 shell pid =2636380\n</code></pre> <ul> <li>\u793a\u4f8b 1\uff1a\u9ed8\u8ba4\u884c\u4e3a\uff0c\u4e0d\u542f\u52a8 <code>.ONESHELL</code>\uff0c\u53ef\u4ee5\u770b\u5230 shell \u8fdb\u7a0b id \u4e0d\u4e00\u6837</li> </ul> <pre><code>all:\necho line 1 shell pid =$$$$\necho line 2 shell pid =$$$$\n</code></pre> <ul> <li>\u7ed3\u679c</li> </ul> <pre><code>$ make\necho line 1 shell pid =$$\nline 1 shell pid =2638943\necho line 2 shell pid =$$\nline 2 shell pid =2638944\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/#24-order-only","title":"2.4 order-only \u4f9d\u8d56","text":"<ul> <li>\u89e3\u91ca\uff1a</li> <li>\u6b63\u5e38\u76ee\u6807\u548c\u6839\u636e\u4f9d\u8d56\u6765\u6267\u884c\u547d\u4ee4\u91cd\u5efa\u76ee\u6807\uff0c\u800c order-only \u4f9d\u8d56\uff0c\u4e0d\u4f1a\u901a\u8fc7\u5224\u65ad\u4f9d\u8d56\u6587\u4ef6\u7684\u65f6\u95f4\u6765\u91cd\u5efa\u76ee\u6807\uff0c\u4f46\u4f9d\u8d56\u5f80\u540e\u7684\u89c4\u5219\u4ecd\u7136\u4f1a\u6267\u884c</li> <li>\u8bed\u6cd5:</li> <li><code>target:normal-prerequisites|order-only-prerequisites</code> \uff1a\u53ef\u4ee5\u6709\u5e38\u89c4\u4f9d\u8d56\u548c order-only \u4f9d\u8d56</li> <li><code>target:|order-only-prerequisites</code> : \u53ef\u4ee5\u4e0d\u8981\u5e38\u89c4\u4f9d\u8d56</li> <li>\u793a\u4f8b\uff1a\u5047\u8bbe makefile \u6587\u4ef6\u5982\u4e0b</li> </ul> <pre><code>file1:file2\n    touch $@\nfile2:\ntouch $@\n</code></pre> <ul> <li>\u6267\u884c make, \u751f\u6210\u6587\u4ef6 file2\uff0cfile1</li> </ul> <pre><code>make\ntouch file2\ntouch file1\n</code></pre> <ul> <li>\u518d\u5220\u9664\u6587\u4ef6 file2\uff0c\u518d\u6267\u884c make\uff0c\u6b64\u65f6 file1 \u4e5f\u88ab\u91cd\u5efa\u4e86</li> </ul> <pre><code>$rm file2\n$ make\ntouch file2\ntouch file1\n</code></pre> <ul> <li>\u5982\u679c\u53ea\u60f3\u91cd\u5efa file2\uff0c\u5374\u4e0d\u91cd\u5efa file1\uff0c\u8fd9\u65f6\u53ef\u4ee5\u4f7f\u7528 order-only \u4f9d\u8d56,makefile \u5982\u4e0b</li> </ul> <pre><code>file1:|file2\n    touch $@\nfile2:\ntouch $@\n</code></pre> <ul> <li>\u518d\u6b21\u6267\u884c make\uff0c\u6b64\u65f6\u53ea\u4f1a\u91cd\u5efa file1</li> </ul> <pre><code>$rm file2\n$ make\ntouch file2\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/#25","title":"2.5 \u547d\u4ee4\u524d\u7f00\u7b26\u53f7","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/#251","title":"2.5.1 @\u4e0d\u663e\u793a\u547d\u4ee4","text":"<p>\u5047\u8bbe makefile \u6587\u4ef6\u5982\u4e0b\uff1a</p> <pre><code>.PHONY:clean\nclean:\nrm -rf *.o\n</code></pre> <p>\u5f53\u6267\u884c\u4e00\u6761\u547d\u4ee4\u65f6\uff0c\u63a7\u5236\u53f0\u4f1a\u6253\u5370\u5f53\u524d\u6267\u884c\u7684\u547d\u4ee4\uff0c\u5982\u4e0b</p> <pre><code>~/code/makefile$ make clean\nrm -rf *.o\n</code></pre> <p>\u800c\u5f53\u6211\u4eec\u7ed9\u547d\u4ee4\u524d\u589e\u52a0 <code>@</code> \u7b26\u53f7\u65f6\uff0cmakefile \u5982\u4e0b\uff1a</p> <pre><code>.PHONY:clean\nclean:\n@rm -rf *.o\n</code></pre> <p>\u6267\u884c clean\uff0c\u547d\u4ee4\u4e0d\u4f1a\u6253\u5370\u51fa\u6765</p> <pre><code>~/code/makefile$ make clean\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/#252-","title":"2.5.2 -\u5ffd\u7565\u547d\u4ee4\u6267\u884c\u9519\u8bef","text":"<p>\u6bd4\u5982\u5f53\u6211\u4eec\u6267\u884c mkdir \u521b\u5efa\u76ee\u5f55\u65f6\uff0c\u5982\u679c\u5df2\u7ecf\u5b58\u5728\u76ee\u5f55\uff0c\u90a3\u4e48\u6267\u884c mkdir \u65f6\u4f1a\u51fa\u9519\uff0c\u4f46\u8fd9\u5e76\u4e0d\u5e94\u8be5\u5bfc\u81f4 make \u6267\u884c\u5931\u8d25\uff0c\u56e0\u6b64 <code>-</code> \u7528\u6765\u5904\u7406\u8fd9\u7c7b\u60c5\u51b5\u3002</p> <pre><code>.PHONY:clean\nclean:\n-rm -rf *.o\n</code></pre> <p>\u4e0a\u9762\u8fd9\u6761 rm \u6307\u4ee4\u4e0d\u7ba1\u5931\u8d25\u8fd8\u662f\u6210\u529f\uff0c\u5e76\u4e0d\u4f1a\u5f71\u54cd make \u7ee7\u7eed\u6267\u884c</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/#26","title":"2.6 \u957f\u884c\u5206\u79bb\u7b26","text":"<ul> <li>\u7b26\u53f7\uff1a<code>\\</code>, \u7c7b\u4f3c\u5176\u5b83\u7f16\u7a0b\u8bed\u8a00\uff0c\u5982 c \u4e2d</li> <li>\u529f\u80fd\uff1a\u4fbf\u4e8e\u6392\u7248\uff0c\u5c06\u957f\u884c\u8f6c\u6362\u591a\u884c</li> <li>\u793a\u4f8b</li> </ul> <pre><code>var1:=hello\\\nword\nvar2:=hello$\\\nword\nall:\necho var1=$(var1)\necho var2=$(var2)\n</code></pre> <ul> <li>\u7ed3\u679c</li> </ul> <pre><code>$ make\nvar1=hello word\nvar2=helloword\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/#3","title":"3 \u8fdb\u9636","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/#31-include-makefile","title":"3.1 include \u5f15\u7528\u5176\u5b83 makefile \u6587\u4ef6","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>include filenames...</code></li> <li><code>-include</code> : \u5728 <code>include</code> \u524d\u52a0\u4e0a\u7b26\u53f7 <code>-</code> \u4f1a\u5ffd\u7565\u4e0d\u5b58\u5728\u7684 make \u6587\u4ef6\uff0c\u800c\u4e0d\u62a5\u9519</li> <li>\u793a\u4f8b</li> </ul> <pre><code>## \u5305\u542bsub.make\u6587\u4ef6\ninclude sub1.make sub2.make\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/#32-vpathvpath","title":"3.2 VPATH\u548cvpath\u7684\u4f7f\u7528","text":"<p>\u5728\u4f7f\u7528VPATH\u6216vpath\u65f6\uff0c\u547d\u4ee4\u4e2d\u6307\u5b9a\u7684\u6e90\u6587\u4ef6\u540d\u4e0d\u80fd\u663e\u793a\u6307\u5b9a\u800c\u9700\u8981\u901a\u8fc7\u81ea\u52a8\u5316\u53d8\u91cf\u6765\u6307\u5b9a\uff0c\u5982<code>$@</code>\u6216<code>$^</code>\u6216<code>$&lt;</code>\u7b49\u7b49\u53d6\u4ee3\u771f\u5b9e\u6587\u4ef6\u540d\u5982<code>math.cpp</code></p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/#3211-vpath","title":"3.2.1.1 VPATH","text":"<p><code>VPATH</code>\u7528\u6765\u6307\u5b9a\u6587\u4ef6\u7684\u641c\u7d22\u8def\u5f84 - \u8bed\u6cd5\u5f62\u5f0f\uff1a\u8def\u5f84\u4e4b\u95f4\u53ef\u4ee5\u7528<code>:</code>\u5206\u5272\uff0c\u4e5f\u53ef\u4ee5\u7528\u7a7a\u683c\u5206\u5272   - <code>VPATH=dir1:dir2</code>   - <code>VPATH=dir1 dir2</code>  \u5047\u8bbe\u6e90\u6587\u4ef6\u7ed3\u6784\u5c42\u6b21\u5982\u4e0b </p> <pre><code>~/code/makefile$ tree\n.\n\u251c\u2500\u2500 makefile\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 include\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 math.cpp\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 math.h\n    \u2514\u2500\u2500 main.cpp\n</code></pre> <p>\u591a\u4e2a\u6587\u4ef6\u5206\u5e03\u5728\u4e0d\u540c\u76ee\u5f55\u4e0b\uff0c\u5982\u679c\u4e0d\u4f7f\u7528 <code>VPATH</code> \u5219\u9700\u8981\u7f16\u5199\u5982\u4e0b\u7684 makefile\uff0c\u9700\u8981\u7ed9\u6e90\u6587\u4ef6\u6307\u5b9a\u8def\u5f84</p> <pre><code>main:main.o math.o\ng++ main.o math.o -o math\nmain.o:src/main.cpp src/include/math.h\ng++ -c src/main.cpp -o main.o\nmath.o:src/include/math.cpp src/include/math.h\ng++ -c src/include/math.cpp -o math.o\nclean:\nrm -rf *.o\n</code></pre> <p>\u5982\u679c\u4f7f\u7528 <code>VPATH</code>\uff0c\u6267\u884c make \u6307\u4ee4\u4f1a\u5148\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u67e5\uff0c\u6ca1\u627e\u5230\u5c31\u4f1a\u6309\u987a\u8baf\u53bb\u6307\u5b9a\u7684\u76ee\u5f55\u4e0b\u67e5\u627e\u6587\u4ef6\uff0c\u5f53\u6211\u4eec\u5199 makefile \u6587\u4ef6\u65f6\u5c31\u53ef\u4ee5\u5ffd\u7565\u8def\u5f84\u4fe1\u606f</p> <pre><code>VPATH=src:src/include\nmain:main.o math.o\ng++ $^ -o math\nmain.o:main.cpp math.h\ng++ -c $&lt; -o main.o\nmath.o:math.cpp math.h\ng++ -c $&lt; -o math.o\nclean:\nrm -rf *.o\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/#3212-vpath","title":"3.2.1.2 vpath","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f</li> <li><code>vpath PATTERN DIRECTORIES</code> : \u5728 DIRECTORIES \u4e0b\u67e5\u627e PATTERN</li> <li><code>vpath PATTERN</code> \uff1a\u6e05\u9664 PATTERN \u641c\u7d22\u8def\u5f84\uff0c\u4f7f\u5176\u4e0d\u518d\u4f7f\u7528\u65b9\u5f0f 1 \u4e2d\u5b9a\u4e49\u7684\u641c\u7d22\u8def\u5f84</li> <li><code>vpath</code> \uff1a\u6e05\u9664\u6240\u6709\u641c\u7d22\u8def\u5f84\uff0c\u4f7f\u65b9\u5f0f 1 \u4e2d\u5b9a\u4e49\u7684\u641c\u7d22\u8def\u5f84\u5931\u6548</li> </ul> <p>\u5176\u4e2d PATTERN \u6307\u5f85\u5bfb\u627e\u6587\u4ef6 (\u53ef\u7531\u901a\u914d\u7b26\u7ec4\u5408)\uff0cDIRECTORIES \u6307\u67e5\u627e\u8def\u5f84  \u5047\u8bbe\u6e90\u6587\u4ef6\u7ed3\u6784\u5c42\u6b21\u5982\u4e0b</p> <pre><code>~/code/makefile$ tree\n.\n\u251c\u2500\u2500 makefile\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 include\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 math.cpp\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 math.h\n    \u2514\u2500\u2500 main.cpp\n</code></pre> <p>\u4f7f\u7528 vpath \u683c\u5f0f\u5199\u7684 makefile \u5185\u5bb9\u5982\u4e0b</p> <pre><code>vpath math.% src/include\nvpath main.cpp src\nmain:main.o math.o\ng++ $^ -o math\nmain.o:main.cpp math.h\ng++ -c $&lt; -o main.o\nmath.o:math.cpp math.h\ng++ -c $&lt; -o math.o\nclean:\nrm -rf *.o\n</code></pre> <p>\u5176\u4e2d <code>vpath math.% src/include</code> \u6307\u5b9a\u4ee5 <code>math.</code> \u5f00\u5934\u7684\u6587\u4ef6\u5728 <code>src/include</code> \u76ee\u5f55\u4e0b\u67e5\u627e\uff0c\u767e\u5206\u53f7\u7b26 <code>%</code> \u8868\u793a\u5339\u914d\u4efb\u610f\u5b57\u7b26\u4e14\u4e0d\u9650\u957f\u5ea6\uff0c<code>vpath main.cpp src</code> \u5219\u8868\u660e <code>math.cpp</code> \u6587\u4ef6\u5728 <code>src</code> \u76ee\u5f55\u4e0b\u67e5\u627e</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/#33","title":"3.3 \u6761\u4ef6\u8bed\u53e5","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f</li> </ul> <pre><code>ifeq \u6761\u4ef6\n...\nelse\n...\nendif\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>libs_for_gcc = -lgnu\nnormal_libs =\n\nfoo: $(objects)\nifeq ($(CC),gcc)\n$(CC) -o foo $(objects) $(libs_for_gcc)\nelse\n$(CC) -o foo $(objects) $(normal_libs)\nendif\n</code></pre> <p>make \u89c4\u5219\u4e2d\u6709 4 \u4e2a\u7528\u6761\u4ef6\u5224\u65ad\u7684\u5173\u952e\u5b57</p> \u5173\u952e\u5b57 \u89e3\u91ca \u8bed\u6cd5\u89c4\u5219 <code>ifeq</code> \u5224\u65ad\u662f\u5426\u76f8\u7b49 <code>ifeq (ARG1, ARG2)</code> or <code>ifeq 'ARG1' 'ARG2'</code> or <code>ifeq \"ARG1\" \"ARG2\"</code> or <code>ifeq \"ARG1\" 'ARG2'</code> or <code>ifeq 'ARG1' \"ARG2\"</code> <code>ifneq</code> \u5224\u65ad\u662f\u5426\u76f8\u7b49 \u540c <code>ifeq</code> <code>ifdef</code> \u5224\u65ad\u662f\u5426\u6709\u503c <code>ifdef VARIABLE-NAME</code> <code>ifndef</code> \u5224\u65ad\u662f\u5426\u6709\u503c \u540c <code>ifndef</code>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/#4","title":"4 \u6269\u5c55","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/#41-makefile","title":"4.1 makefile \u4e66\u5199\u98ce\u683c","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/#411","title":"4.1.1 \u6807\u51c6\u76ee\u6807\u540d\u79f0","text":"<ol> <li><code>all</code> \uff1a\u5f53\u9700\u8981\u7f16\u8bd1\u6574\u4e2a\u7a0b\u5e8f\u65f6\uff0c\u4f7f\u7528 <code>all</code> \u76ee\u6807\u6765\u5b9a\u4e49\u89c4\u5219\uff0c\u901a\u5e38\u8fd9\u4f5c\u4e3a\u9ed8\u8ba4\u76ee\u6807\u3002</li> <li><code>install</code> \uff1a\u6267\u884c\u5b89\u88c5\u547d\u4ee4\u3002\u6267\u884c\u5b8c\u7f16\u8bd1\u540e\uff0c\u5c06\u751f\u6210\u7684\u53ef\u6267\u884c\u6587\u4ef6\u3001\u5e93\u3001\u5934\u6587\u4ef6\u7b49\u6587\u4ef6\u5b89\u88c5\u5230\u7cfb\u7edf\u4e0b\u7684\u67d0\u4e2a\u4f4d\u7f6e\u3002</li> <li><code>install-strip</code> \uff1a\u548c <code>install</code> \u76ee\u6807\u4e00\u6837\u4f5c\u7528\uff0c\u4f46\u4f1a\u79fb\u9664\u53ef\u6267\u884c\u6587\u4ef6\u7684\u7b26\u53f7\u6570\u636e\u3002\u901a\u5e38 strip \u8fc7\u7a0b\u5e94\u8be5\u5c06\u53ef\u6267\u884c\u6587\u4ef6\u62f7\u8d1d\u5230\u5b89\u88c5\u76ee\u5f55\u8fdb\u884c\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u5728 build \u76ee\u5f55\u4e0b\u8fdb\u884c\u3002</li> <li><code>uninstall</code> \uff1a\u5220\u9664 install \u5b89\u88c5\u7684\u6587\u4ef6\u3002\u5f53\u901a\u8fc7 install \u76ee\u6807\u5b89\u88c5\u4e86\u67d0\u4e9b\u6587\u4ef6\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u6b64\u76ee\u6807\u53bb\u79fb\u9664\u8fd9\u4e9b\u6587\u4ef6\u3002</li> <li><code>clean</code> \uff1a\u5220\u9664\u5f53\u524d\u76ee\u5f55\u4e2d\u901a\u5e38\u901a\u8fc7\u6784\u5efa\u7a0b\u5e8f\u521b\u5efa\u7684\u6240\u6709\u6587\u4ef6\u3002</li> <li><code>info</code> \uff1a\u751f\u6210\u6240\u9700\u7684\u4efb\u4f55 info \u6587\u4ef6\uff08info \u6587\u4ef6\u4e00\u822c\u662f\u4e00\u4e9b\u5173\u4e8e\u8fd9\u4e2a\u8f6f\u4ef6\u7684\u4fe1\u606f\uff0c\u6bd4\u5982\u8fd9\u4e2a\u8f6f\u4ef6\u7684\u7528\u9014\uff0c\u540d\u5b57\uff0c\u64cd\u4f5c\u7cfb\u7edf\uff0c\u9700\u8981\u78c1\u76d8\u7a7a\u95f4\u7b49\u4fe1\u606f\uff09</li> <li><code>dist</code> \uff1a\u4e3a\u6b64\u7a0b\u5e8f\u521b\u5efa tar \u6587\u4ef6\u3002 tar \u6587\u4ef6\u4e2d\u7684\u6587\u4ef6\u540d\u5305\u62ec\u5176\u5206\u53d1\u5305\u7684\u540d\u79f0\u3001\u7248\u672c\u53f7\uff08\u53ef\u9009\uff09\uff0c\u5982 gcc1.4 \u7248\u672c\uff0c\u76ee\u5f55\u540d\u4e3a <code>gcc-1.40</code>\uff1btar \u5b89\u88c5\u5305\u547d\u540d\u5fc5\u987b\u5305\u62ec\u5176\u5206\u53d1\u5305\u7684\u540d\u79f0\u3001\u7248\u672c\u53f7\uff0c\u4e14\u901a\u5e38\u7528 gzip \u538b\u7f29\uff0c\u5982 <code>gcc-1.40.tar.gz</code>\u3002</li> <li><code>check</code> \uff1a\u5728 build \u4e4b\u540e\uff0c\u5b89\u88c5\u4e4b\u524d\u5982\u679c\u9700\u8981\u68c0\u67e5 build \u540e\u7684\u7a0b\u5e8f\u80fd\u6b63\u5e38\u8fd0\u884c\uff0c\u53ef\u4ee5\u4f7f\u7528\u6b64\u76ee\u6807\u68c0\u6d4b\u3002</li> </ol>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/#5","title":"5 \u7591\u96be\u95ee\u9898","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/#51-make-shell","title":"5.1 make \u53d8\u91cf\u4e0d\u80fd\u4fdd\u5b58 shell \u547d\u4ee4\u6267\u884c\u540e\u8f93\u51fa\u7ed3\u679c","text":"<ul> <li>\u89e3\u51b3\u65b9\u6848\uff1a<ul> <li>\u4f7f\u7528 export \u5bfc\u51fa\u73af\u5883\u53d8\u91cf\uff0c\u8ba9\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u5b58\u6570\u636e\uff0c\u800c\u4e0d\u662f makefile \u91cc\u9762\u7684\u53d8\u91cf</li> </ul> </li> </ul> <pre><code>export cur_time=$$(date \"+%Y-%m-%d\");sed -i \"/NCDFS_RELEASE_TIME/c #define NCDFS_RELEASE_TIME \\\"$${cur_time}\\\"\" common/ncsf_version.h\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/Makefile/#6","title":"6 \u53c2\u8003\u8d44\u6599","text":"<ul> <li>https://blog.csdn.net/weixin_38391755/article/details/80380786</li> <li>http://c.biancheng.net/view/7139.html</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make/","title":"make","text":"<ul> <li>make\u5b98\u65b9\u6587\u6863 make \u901a\u8fc7\u6267\u884c makefile \u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u89c4\u5219\u6765\u7f16\u8bd1\u6e90\u4ee3\u7801\u3002</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make/#1","title":"1 \u9009\u9879","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make/#11-f","title":"1.1 \u9009\u9879-f \u6307\u5b9a\u6587\u4ef6","text":"<ul> <li>\u529f\u80fd\uff1a\u6307\u5b9a make \u6267\u884c\u7684\u6587\u4ef6</li> <li>\u7b49\u4ef7\u9009\u9879:</li> <li><code>--file=file</code></li> <li><code>--makefile=file</code></li> <li>\u793a\u4f8b\uff1a<code>make -f make1</code></li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make/#12-s","title":"1.2 \u9009\u9879-s \u4e0d\u663e\u793a\u6267\u884c\u8f93\u51fa","text":"<ul> <li>\u529f\u80fd\uff1a\u6267\u884c make \u540e\u4e0d\u663e\u793a\u6267\u884c\u7ed3\u679c\u8f93\u51fa</li> <li>\u793a\u4f8b\uff1a<code>make -s</code></li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make/#13-c-makefile","title":"1.3 \u9009\u9879-C \u6307\u5b9a makefile \u6240\u5728\u76ee\u5f55","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>-C DIR</code></li> <li>\u529f\u80fd\uff1a\u6307\u5b9a\u6267\u884c make \u7684 makefile \u6240\u5728\u76ee\u5f55</li> <li>\u793a\u4f8b\uff1a<code>make -C dir</code></li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make/#14-v1-make","title":"1.4 V=1 \u663e\u793a make \u8be6\u7ec6\u4fe1\u606f","text":"<ul> <li>\u529f\u80fd\uff1a\u7528\u4e8e\u8c03\u8bd5\uff0c\u663e\u793a make \u8be6\u7ec6\u4fe1\u606f\uff1b\u9ed8\u8ba4\uff08V=0\uff09make \u4e4b\u540e\u663e\u793a\u7b80\u5355\u7684\u4fe1\u606f</li> <li>\u793a\u4f8b\uff1a<code>make V=1</code></li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make/#15-d","title":"1.5 \u9009\u9879-d \u8c03\u8bd5\u6a21\u5f0f","text":"<ul> <li>\u529f\u80fd\uff1a<code>\u6253\u5370make\u7684\u8c03\u8bd5\u4fe1\u606f</code></li> <li>\u793a\u4f8b: <code>make -d</code></li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make/#16-e-makefile","title":"1.6 \u9009\u9879-e \u73af\u5883\u53d8\u91cf\u4f18\u5148 makefile \u53d8\u91cf","text":"<ul> <li>\u529f\u80fd\uff1a\u5f53\u73af\u5883\u53d8\u91cf\u548c makefile \u53d8\u91cf\u90fd\u5b58\u5728\u65f6\uff0c\u4f7f\u73af\u5883\u53d8\u91cf\u7684\u751f\u6548</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make/#17-i-makefile-include","title":"1.7 \u9009\u9879-I \u6307\u5b9a makefile \u91cc\u9762 include \u6240\u67e5\u8be2\u7684\u76ee\u5f55","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>-I DIR</code></li> <li>\u529f\u80fd\uff1a\u5f53 makefile \u91cc\u9762\u4f7f\u7528 include \u5305\u542b\u5176\u5b83 makefile \u6587\u4ef6\u65f6\uff0c\u5982\u679c\u6307\u5b9a\u4e86-I \u9009\u9879\uff0c\u4f1a\u5148\u5728\u5f53\u524d\u76ee\u5f55\u67e5\u627e\uff0c\u6ca1\u67e5\u5230\u5c31\u4f1a\u5230-I \u6307\u5b9a\u7684\u76ee\u5f55\u4e0b\u67e5\u627e</li> <li>\u793a\u4f8b\uff1a<code>make -I dir</code></li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make/#18-j-makefile","title":"1.8 \u9009\u9879-j \u6307\u5b9a\u6267\u884c makefile \u5f00\u542f\u7684\u5e76\u884c\u4efb\u52a1\u6570\u91cf","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>-j N</code></li> <li>\u793a\u4f8b\uff1a<code>make -j 4</code></li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make/#19-s","title":"1.9 \u9009\u9879-s \u5173\u95ed\u6267\u884c\u547d\u4ee4\u65f6\u8f93\u51fa\u547d\u4ee4\u4fe1\u606f","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>-s</code></li> <li>\u793a\u4f8b\uff1a<code>make -s</code></li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/","title":"make\u51fd\u6570","text":"<p>makefile \u6709\u7cfb\u7edf\u63d0\u4f9b\u7684\u5e93\u51fd\u6570\uff0c\u5374\u672c\u8d28\u4e0a\u4e0d\u652f\u6301\u81ea\u5b9a\u4e49\u51fd\u6570\uff0c\u4f46\u53ef\u4ee5\u4f7f\u7528 <code>define</code> \u5b9a\u4e49\u5177\u6709\u7c7b\u4f3c\u51fd\u6570\u7279\u6027\u7684\u591a\u884c\u53d8\u91cf\u3002</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#1","title":"1 \u51fd\u6570\u8c03\u7528","text":"<ul> <li>\u51fd\u6570\u8c03\u7528\u8bed\u6cd5\u5f62\u5f0f</li> <li><code>$(&lt;function&gt; &lt;arguments&gt;)</code></li> <li><code>${&lt;function&gt; &lt;arguments&gt;}</code></li> </ul> <pre><code>OBJ=$(subst ee,EE,feet on the street)\nall:\n@echo $(OBJ)\n</code></pre> <p>\u4e0a\u4f8b\u4e2d\u8868\u793a\u5c06 <code>feet on the street</code> \u5b57\u7b26\u4e32\u4e2d <code>ee</code> \u5b57\u7b26\u4e32\u66ff\u6362\u4e3a <code>EE</code>\uff0cecho \u8f93\u51fa\u7ed3\u679c\u4e3a <code>fEEt on the strEEt</code>\u3002</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#2-define-call","title":"2 define \u81ea\u5b9a\u4e49\u51fd\u6570\u3001call \u8c03\u7528\u81ea\u5b9a\u4e49\u51fd\u6570","text":"<p>\u4f7f\u7528 <code>define</code> \u5b9a\u4e49\u591a\u884c\u53d8\u91cf\uff0c\u5177\u6709\u51fd\u6570\u7279\u6027\uff0c\u4f46\u4e0e\u5e93\u51fd\u6570\u8c03\u7528\u8fd8\u662f\u6709\u533a\u522b\u7684\uff0c\u4e14\u9700\u8981\u901a\u8fc7 <code>call</code> \u51fd\u6570\u6765\u8c03\u7528</p> <pre><code>define func1\n@echo \"My name is $(0)\"\nendef\nvar := $(call func1)\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#3-","title":"3 \u5e93\u51fd\u6570-\u5b57\u7b26\u4e32\u5904\u7406","text":"<ul> <li>\u51fd\u6570\u8c03\u7528\u5f62\u5f0f\uff1a<code>$(fun par1,par2,..parN)</code>, \u53c2\u6570\u95f4\u7531\u9017\u53f7\u5206\u9694 \u8be6\u89c1\u53c2\u8003\u8d44\u6599</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#31-subst","title":"3.1 subst \u5b57\u7b26\u4e32\u66ff\u6362\u51fd\u6570","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(subst &lt;from&gt;,&lt;to&gt;,&lt;text&gt;)</code></li> <li>\u529f\u80fd\uff1a\u628a\u5b57\u4e32 <code>&lt;text&gt;</code> \u4e2d\u7684 <code>&lt;from&gt;</code> \u5b57\u7b26\u4e32\u66ff\u6362\u6210 <code>&lt;to&gt;</code> \u3002</li> <li>\u8fd4\u56de\uff1a\u51fd\u6570\u8fd4\u56de\u88ab\u66ff\u6362\u8fc7\u540e\u7684\u5b57\u7b26\u4e32</li> <li>\u793a\u4f8b</li> </ul> <pre><code>## \u5c06feet on the street\u4e2d\u7684ee\u66ff\u6362\u6210EE\n$(subst ee,EE,feet on the street)\n## return:fEEt on the strEEt\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#32-patsubst","title":"3.2 patsubst \u6a21\u5f0f\u5b57\u7b26\u4e32\u66ff\u6362\u51fd\u6570","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(patsubst &lt;pattern&gt;,&lt;replacement&gt;,&lt;text&gt;)</code></li> <li>\u529f\u80fd\uff1a\u67e5\u627e <code>&lt;text&gt;</code> \u4e2d\u7684\u5355\u8bcd\uff08\u5355\u8bcd\u4ee5\u201c\u7a7a\u683c\u201d\u3001\u201cTab\u201d\u6216\u201c\u56de\u8f66\u201d\u201c\u6362\u884c\u201d\u5206\u9694\uff09\u5339\u914d pattern \u90e8\u5206\u66ff\u6362\u6210 replacement \u90e8\u5206</li> <li>\u8fd4\u56de\uff1a\u51fd\u6570\u8fd4\u56de\u88ab\u66ff\u6362\u8fc7\u540e\u7684\u5b57\u7b26\u4e32</li> <li>\u793a\u4f8b</li> </ul> <pre><code>## \u5c06x.c.c bar.c\u4e2d\u4ee5.c\u7ed3\u5c3e\u90e8\u5206\u66ff\u6362\u6210\u4ee5.o\u7ed3\u5c3e\n$(patsubst %.c,%.o,x.c.c bar.c)\n## return: x.c.o bar.o\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#33-strip","title":"3.3 strip \u53bb\u6389\u5f00\u5934\u7ed3\u5c3e\u7a7a\u683c","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(strip &lt;string&gt;)</code></li> <li>\u529f\u80fd\uff1a\u53bb\u6389 <code>&lt;string&gt;</code> \u5b57\u4e32\u4e2d\u5f00\u5934\u548c\u7ed3\u5c3e\u7684\u7a7a\u5b57\u7b26\u3002</li> <li>\u8fd4\u56de\uff1a\u8fd4\u56de\u88ab\u53bb\u6389\u7a7a\u683c\u7684\u5b57\u7b26\u4e32\u503c</li> <li>\u793a\u4f8b</li> </ul> <pre><code>str1=\" abc \"\nstr2=$(strip $(str1))\n## str1 != str2,\u56e0\u4e3astr2\u6ca1\u6709\u9996\u5c3e\u7a7a\u683c\u5b57\u7b26\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#34-findstring","title":"3.4 findstring \u67e5\u627e\u5b57\u7b26\u4e32","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(findstring &lt;find&gt;,&lt;in&gt;)</code></li> <li>\u529f\u80fd\uff1a\u5728\u5b57\u4e32 <code>&lt;in&gt;</code> \u4e2d\u67e5\u627e <code>&lt;find&gt;</code> \u5b57\u4e32</li> <li>\u8fd4\u56de\uff1a\u5982\u679c\u627e\u5230\uff0c\u90a3\u4e48\u8fd4\u56de <code>&lt;find&gt;</code> \uff0c\u5426\u5219\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32</li> <li>\u793a\u4f8b</li> </ul> <pre><code>## \u5728a b c\u4e2d\u67e5\u627ea\n$(findstring a,a b c)\n## return\uff1aa\n## \u5728b c\u4e2d\u67e5\u627ea\uff0c\u7531\u4e8e\u627e\u4e0d\u5230\uff0c\u8fd4\u56de\u7a7a\n$(findstring a,b c)\n## return\uff1a\u7a7a\u5b57\u7b26\u4e32\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#35-filter","title":"3.5 filter \u8fc7\u6ee4\u5b57\u7b26\u4e32","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(filter &lt;pattern...&gt;,&lt;text&gt;)</code></li> <li>\u529f\u80fd\uff1a\u4ee5 <code>&lt;pattern&gt;</code> \u6a21\u5f0f\u8fc7\u6ee4 <code>&lt;text&gt;</code> \u5b57\u7b26\u4e32\u4e2d\u7684\u5355\u8bcd\uff0c\u4fdd\u7559\u7b26\u5408\u6a21\u5f0f <code>&lt;pattern&gt;</code> \u7684\u5355\u8bcd\u3002\u53ef\u4ee5\u6709\u591a\u4e2a\u6a21\u5f0f\u3002</li> <li>\u8fd4\u56de\uff1a\u8fd4\u56de\u7b26\u5408\u6a21\u5f0f <code>&lt;pattern&gt;</code> \u7684\u5b57\u4e32\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code>## \u8fc7\u6ee4\u4ee5.c\u548c.s\u7ed3\u5c3e\u7684\u5b57\u7b26\u4e32\nsources := foo.c bar.c baz.s ugh.h\nfoo: $(sources)\ncc $(filter %.c %.s,$(sources)) -o foo\n## $(filter %.c %.s,$(sources)) \u8fd4\u56de\u7684\u503c\u662f foo.c bar.c baz.s\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#36-filter-out","title":"3.6 filter-out \u53cd\u8fc7\u6ee4\u5b57\u7b26\u4e32","text":"<p>\u4e0e filter \u8fc7\u6ee4\u4f5c\u7528\u76f8\u53cd - \u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(filter-out &lt;pattern...&gt;,&lt;text&gt;)</code> - \u529f\u80fd\uff1a\u4ee5 <code>&lt;pattern&gt;</code> \u6a21\u5f0f\u8fc7\u6ee4 <code>&lt;text&gt;</code> \u5b57\u7b26\u4e32\u4e2d\u7684\u5355\u8bcd\uff0c\u53bb\u9664\u7b26\u5408\u6a21\u5f0f <code>&lt;pattern&gt;</code> \u7684\u5355\u8bcd\u3002\u53ef\u4ee5\u6709\u591a\u4e2a\u6a21\u5f0f\u3002 - \u8fd4\u56de\uff1a\u8fd4\u56de\u4e0d\u7b26\u5408\u6a21\u5f0f <code>&lt;pattern&gt;</code> \u7684\u5b57\u4e32\u3002 - \u793a\u4f8b</p> <pre><code>## \u8fc7\u6ee4\u6389\u5339\u914d\u9879\nobjects=main1.o foo.o main2.o bar.o\nmains=main1.o main2.o\n$(filter-out $(mains),$(objects))\n## return foo.o bar.o\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#37-sort","title":"3.7 sort \u6309\u5347\u5e8f\u6392\u5e8f\u5e76\u6392\u91cd","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(sort &lt;list&gt;)</code></li> <li>\u529f\u80fd\uff1a\u7ed9\u5b57\u7b26\u4e32 <code>&lt;list&gt;</code> \u4e2d\u7684\u5355\u8bcd\u6392\u5e8f\uff08\u5347\u5e8f\uff09</li> <li>\u8fd4\u56de\uff1a\u8fd4\u56de\u6392\u5e8f\u540e\u7684\u5b57\u7b26\u4e32</li> <li>\u793a\u4f8b\uff1a$(sort foo bar lose) \u8fd4\u56de bar foo lose</li> <li>\u5907\u6ce8\uff1asort \u51fd\u6570\u4f1a\u53bb\u6389 <code>&lt;list&gt;</code> \u4e2d\u76f8\u540c\u7684\u5355\u8bcd</li> <li>\u793a\u4f8b</li> </ul> <pre><code>## \u6309\u5347\u5e8f\u6392\u5e8f\u5e76\u6392\u91cd\n$(sort foo bar lose foo)\n## return bar foo lose\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#38-word","title":"3.8 word \u53d6\u5b57\u7b26\u4e32\u4e2d\u67d0\u4e2a\u5355\u8bcd","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(word &lt;n&gt;,&lt;text&gt;)</code></li> <li>\u529f\u80fd\uff1a\u53d6\u5b57\u7b26\u4e32 <code>&lt;text&gt;</code> \u4e2d\u7b2c <code>&lt;n&gt;</code> \u4e2a\u5355\u8bcd\u3002\uff08\u4ece\u4e00\u5f00\u59cb\uff09</li> <li>\u8fd4\u56de\uff1a\u8fd4\u56de\u5b57\u7b26\u4e32 <code>&lt;text&gt;</code> \u4e2d\u7b2c <code>&lt;n&gt;</code> \u4e2a\u5355\u8bcd\u3002\u5982\u679c <code>&lt;n&gt;</code> \u6bd4 <code>&lt;text&gt;</code> \u4e2d\u7684\u5355\u8bcd\u6570\u8981\u5927\uff0c\u90a3\u4e48\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32</li> <li>\u5907\u6ce8\uff1a\u5355\u8bcd\u95f4\u662f\u4ee5\u7a7a\u683c\u6216 tab \u5206\u5272\u7684</li> <li>\u793a\u4f8b</li> </ul> <pre><code>## \u83b7\u53d6foo bar baz\u4e2d\u7b2c2\u4e2a\u5355\u8bcdbar\n$(word 2, foo bar baz)\n## return bar\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#39-wordlist","title":"3.9 wordlist \u53d6\u5b57\u7b26\u4e32\u4e2d\u533a\u95f4\u5355\u8bcd\u5217\u8868","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(wordlist &lt;start&gt;,&lt;end&gt;,&lt;text&gt;)</code></li> <li>\u529f\u80fd\uff1a\u4ece\u5b57\u7b26\u4e32 <code>&lt;text&gt;</code> \u4e2d\u53d6\u4ece <code>&lt;start&gt;</code> \u5f00\u59cb\u5230 <code>&lt;end&gt;</code> \u7684\u5355\u8bcd\u4e32\u3002 <code>&lt;start&gt;</code> \u548c <code>&lt;end&gt;</code> \u662f\u4e00\u4e2a\u6570\u5b57\u3002</li> <li>\u8fd4\u56de\uff1a\u8fd4\u56de\u5b57\u7b26\u4e32 <code>&lt;text&gt;</code> \u4e2d\u4ece <code>&lt;start&gt;</code> \u5230 <code>&lt;end&gt;</code> \u7684\u5355\u8bcd\u5b57\u4e32\u3002\u5982\u679c <code>&lt;start&gt;</code> \u6bd4 <code>&lt;text&gt;</code> \u4e2d\u7684\u5355\u8bcd\u6570\u8981\u5927\uff0c\u90a3\u4e48\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u3002\u5982\u679c <code>&lt;end&gt;</code> \u5927\u4e8e <code>&lt;text&gt;</code> \u7684\u5355\u8bcd\u6570\uff0c\u90a3\u4e48\u8fd4\u56de\u4ece <code>&lt;start&gt;</code> \u5f00\u59cb\uff0c\u5230 <code>&lt;text&gt;</code> \u7ed3\u675f\u7684\u5355\u8bcd\u4e32\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code>## \u83b7\u53d6foo bar lose\u4e2d\u7b2c2\u4e2a\u5230\u7b2c3\u4e2a\u5355\u8bcdbar baz\n$(wordlist 2,3, foo bar baz)\n## return bar baz\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#310-words","title":"3.10 words \u7edf\u8ba1\u5355\u8bcd\u4e2a\u6570","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(words &lt;text&gt;)</code></li> <li>\u529f\u80fd\uff1a\u7edf\u8ba1 <code>&lt;text&gt;</code> \u4e2d\u5b57\u7b26\u4e32\u4e2d\u7684\u5355\u8bcd\u4e2a\u6570\u3002</li> <li>\u8fd4\u56de\uff1a\u8fd4\u56de <code>&lt;text&gt;</code> \u4e2d\u7684\u5355\u8bcd\u6570\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code>## \u7edf\u8ba1\u5355\u8bcd\u6570\n$(words, foo bar baz)\n## return 3\n## \u83b7\u53d6foo bar baz \u4e2d\u6700\u540e\u4e00\u4e2a\u5355\u8bcd\n$(word $(words foo bar baz),foo bar baz )\n## return baz\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#311-lastword","title":"3.11 lastword \u53d6\u5c3e\u5355\u8bcd","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(lastword &lt;text&gt;)</code></li> <li>\u529f\u80fd\uff1a\u53d6\u5b57\u7b26\u4e32 <code>&lt;text&gt;</code> \u4e2d\u7684\u6700\u540e\u4e00\u4e2a\u5355\u8bcd\u3002</li> <li>\u8fd4\u56de\uff1a\u8fd4\u56de\u5b57\u7b26\u4e32 <code>&lt;text&gt;</code> \u7684\u6700\u540e\u4e00\u4e2a\u5355\u8bcd\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code>$(lastword, foo bar baz)\n## return baz\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#312-firstword","title":"3.12 firstword \u53d6\u9996\u5355\u8bcd","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(firstword &lt;text&gt;)</code></li> <li>\u529f\u80fd\uff1a\u53d6\u5b57\u7b26\u4e32 <code>&lt;text&gt;</code> \u4e2d\u7684\u7b2c\u4e00\u4e2a\u5355\u8bcd\u3002</li> <li>\u8fd4\u56de\uff1a\u8fd4\u56de\u5b57\u7b26\u4e32 <code>&lt;text&gt;</code> \u7684\u7b2c\u4e00\u4e2a\u5355\u8bcd\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code>$(firstword, foo bar baz)\n## return foo\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#4-","title":"4 \u5e93\u51fd\u6570-\u6587\u4ef6\u5904\u7406","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#41-dir","title":"4.1 dir \u83b7\u53d6\u6587\u4ef6\u76ee\u5f55\u90e8\u5206","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(dir &lt;names...&gt;)</code></li> <li>\u529f\u80fd\uff1a\u4ece\u6587\u4ef6\u540d\u5e8f\u5217 <code>&lt;names&gt;</code> \u4e2d\u53d6\u51fa\u76ee\u5f55\u90e8\u5206\u3002\u76ee\u5f55\u90e8\u5206\u662f\u6307\u6700\u540e\u4e00\u4e2a\u53cd\u659c\u6760\uff08/\uff09\u4e4b\u524d\u7684\u90e8\u5206\u3002\u5982\u679c\u6ca1\u6709\u53cd\u659c\u6760\uff0c\u90a3\u4e48\u8fd4\u56de ./ \u3002</li> <li>\u8fd4\u56de\uff1a\u8fd4\u56de\u6587\u4ef6\u540d\u5e8f\u5217 <code>&lt;names&gt;</code> \u7684\u76ee\u5f55\u90e8\u5206\u3002</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>$(dir src/foo.c hacks)\n## return src/ ./\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#42-notdir","title":"4.2 notdir \u83b7\u53d6\u6587\u4ef6\u540d\uff08\u975e\u76ee\u5f55\u90e8\u5206\uff09","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(notdir &lt;names...&gt;)</code></li> <li>\u529f\u80fd\uff1a\u4ece\u6587\u4ef6\u540d\u5e8f\u5217 <code>&lt;names&gt;</code> \u4e2d\u53d6\u51fa\u975e\u76ee\u5f55\u90e8\u5206\u3002\u975e\u76ee\u5f55\u90e8\u5206\u662f\u6307\u6700\u5f8c\u4e00\u4e2a\u53cd\u659c\u6760\uff08/ \uff09\u4e4b\u540e\u7684\u90e8\u5206\u3002</li> <li>\u8fd4\u56de\uff1a\u8fd4\u56de\u6587\u4ef6\u540d\u5e8f\u5217 <code>&lt;names&gt;</code> \u7684\u975e\u76ee\u5f55\u90e8\u5206\u3002</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>$(notdir src/foo.c hacks)\n## return foo.c hacks\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#43-suffix","title":"4.3 suffix \u53d6\u6587\u4ef6\u6269\u5c55\u540d","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(suffix &lt;names...&gt;)</code></li> <li>\u529f\u80fd\uff1a\u4ece\u6587\u4ef6\u540d\u5e8f\u5217 <code>&lt;names&gt;</code> \u4e2d\u53d6\u51fa\u5404\u4e2a\u6587\u4ef6\u540d\u7684\u540e\u7f00\u3002</li> <li>\u8fd4\u56de\uff1a\u8fd4\u56de\u6587\u4ef6\u540d\u5e8f\u5217 <code>&lt;names&gt;</code> \u7684\u540e\u7f00\u5e8f\u5217\uff0c\u5982\u679c\u6587\u4ef6\u6ca1\u6709\u540e\u7f00\uff0c\u5219\u8fd4\u56de\u7a7a\u5b57\u4e32\uff0c\u540e\u7f00\u662f\u4ee5\u6700\u540e\u4e00\u4e2a. \u4e4b\u540e\u7684\u5185\u5bb9\u3002</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>## \u8fd4\u56de\u540e\u7f00.d\u800c\u4e0d\u662f.c.d\n$(notdir src/foo.c.d hacks)\n## return .d\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#44-basename","title":"4.4 basename \u53d6\u6587\u4ef6\u540d\u524d\u7f00\uff08\u5305\u542b\u76ee\u5f55\u90e8\u5206\uff09","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(basename &lt;names...&gt;)</code></li> <li>\u529f\u80fd\uff1a\u4ece\u6587\u4ef6\u540d\u5e8f\u5217 <code>&lt;names&gt;</code> \u4e2d\u53d6\u51fa\u5404\u4e2a\u6587\u4ef6\u540d\u7684\u524d\u7f00\u90e8\u5206\u3002</li> <li>\u8fd4\u56de\uff1a\u8fd4\u56de\u6587\u4ef6\u540d\u5e8f\u5217 <code>&lt;names&gt;</code> \u7684\u524d\u7f00\u5e8f\u5217\uff0c\u5982\u679c\u6587\u4ef6\u6ca1\u6709\u524d\u7f00\uff0c\u5219\u8fd4\u56de\u7a7a\u5b57\u4e32</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>## \u8fd4\u56de\u524d\u7f00src/foo.c hacks\n$(notdir src/foo.c.d hacks)\n## return src/foo.c hacks\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#45-addsuffix","title":"4.5 addsuffix \u6dfb\u52a0\u6587\u4ef6\u540e\u7f00","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(addsuffix &lt;suffix&gt;,&lt;names...&gt;)</code></li> <li>\u529f\u80fd\uff1a\u540e\u7f00 <code>&lt;suffix&gt;</code> \u52a0\u5230 <code>&lt;names&gt;</code> \u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\u540e\u9762\u3002</li> <li>\u8fd4\u56de\uff1a\u8fd4\u56de\u52a0\u8fc7\u540e\u7f00\u7684\u6587\u4ef6\u540d\u5e8f\u5217\u3002</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>$(addsuffix .c,foo bar)\n## return foo.c bar.c\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#46-addprefix","title":"4.6 addprefix \u6dfb\u52a0\u6587\u4ef6\u524d\u7f00","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(addprefix &lt;prefix&gt;,&lt;names...&gt;)</code></li> <li>\u529f\u80fd\uff1a\u628a\u524d\u7f00 <code>&lt;prefix&gt;</code> \u52a0\u5230 <code>&lt;names&gt;</code> \u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\u540e\u9762\u3002</li> <li>\u8fd4\u56de\uff1a\u8fd4\u56de\u52a0\u8fc7\u524d\u7f00\u7684\u6587\u4ef6\u540d\u5e8f\u5217\u3002</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>$(addprefix src/,foo bar)\n## return src/foo src/bar\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#47-join","title":"4.7 join \u62fc\u63a5","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(join &lt;list1&gt;,&lt;list2&gt;)</code></li> <li>\u529f\u80fd\uff1a\u628a <code>&lt;list2&gt;</code> \u4e2d\u7684\u5355\u8bcd\u5bf9\u5e94\u5730\u52a0\u5230 <code>&lt;list1&gt;</code> \u7684\u5355\u8bcd\u540e\u9762\u3002\u5982\u679c <code>&lt;list1&gt;</code> \u7684\u5355\u8bcd\u4e2a\u6570\u8981\u6bd4 <code>&lt;list2&gt;</code> \u7684\u591a\uff0c\u90a3\u4e48\uff0c<code>&lt;list1&gt;</code> \u4e2d\u7684\u591a\u51fa\u6765\u7684\u5355\u8bcd\u5c06\u4fdd\u6301\u539f\u6837\u3002\u5982\u679c <code>&lt;list2&gt;</code> \u7684\u5355\u8bcd\u4e2a\u6570\u8981\u6bd4 <code>&lt;list1&gt;</code> \u591a\uff0c\u90a3\u4e48\uff0c <code>&lt;list2&gt;</code> \u591a\u51fa\u6765\u7684\u5355\u8bcd\u5c06\u88ab\u590d\u5236\u5230 <code>&lt;list1&gt;</code> \u4e2d\u3002</li> <li>\u8fd4\u56de\uff1a\u8fd4\u56de\u8fde\u63a5\u8fc7\u540e\u7684\u5b57\u7b26\u4e32\u3002</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>$(join a b,.c .o)\n## return a.c b.o\n## .i\u88ab\u8f93\u51fa\n$(join a b,.c .o .i)\n## return a.c b.o .i\n## c\u539f\u6837\u8f93\u51fa\n$(join a b c,.c .o)\n## return a.c b.o c\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#48-wildcard","title":"4.8 wildcard \u5339\u914d\u901a\u914d\u7b26","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(wildcard pattern\u2026)</code></li> <li>\u529f\u80fd\uff1apattern \u6a21\u7cca\u5339\u914d\u6587\u4ef6\u540d\uff0c\u5982 <code>*.c</code>, \u8868\u793a\u5f53\u524d\u8def\u5f84\u4e0b\u6240\u6709 c \u5934\u6587\u4ef6\u6587\u4ef6</li> <li>\u8fd4\u56de\uff1a\u8fd4\u56de\u6240\u6709\u5339\u914d\u7684\u6587\u4ef6\u540d\u3002</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>## wildcard\u8fd4\u56de\u5f53\u524d\u76ee\u5f55\u4e0b\u6240\u6709\u4ee5.c\u7684\u6587\u4ef6\u540d\uff0cpatsubst\u518d\u5c06\u5176\u66ff\u6362\u4ee5.o\u7ed3\u5c3e\u7684\u6587\u4ef6\u540d\n$(patsubst %.c,%.o,$(wildcard *.c))\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#49-realpath","title":"4.9 realpath \u8fd4\u56de\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(realpath names...)</code></li> <li>\u529f\u80fd\uff1a\u8fd4\u56de\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\uff0c\u7edd\u5bf9\u8def\u5f84\u662f\u4e0d\u542b. .. \u7b49\u7b26\u53f7\u7684\u6587\u4ef6\u8def\u5f84\uff0c\u5982\u679c\u6587\u4ef6\u8def\u5f84\u4e0d\u5b58\u5728\uff0c\u5219\u8fd4\u56de\u7a7a</li> <li>\u8fd4\u56de\uff1a\u8fd4\u56de\u6587\u4ef6\u7684\u76f8\u5bf9\u8def\u5f84</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>## \u5047\u8bbe\u5f53\u524dmakefile\u5728 /home/xx/test\u76ee\u5f55\u4e0b\n$(realpath ./)\n## result /home/xx/test\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#410-abspath","title":"4.10 abspath \u8fd4\u56de\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(realpath names...)</code></li> <li>\u529f\u80fd\uff1a\u8fd4\u56de\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\uff0c\u7edd\u5bf9\u8def\u5f84\u662f\u4e0d\u542b. .. \u7b49\u7b26\u53f7\u7684\u6587\u4ef6\u8def\u5f84\uff0c\u5982\u679c\u6587\u4ef6\u8def\u5f84\u4e0d\u5b58\u5728\uff0c\u4e5f\u4f1a\u8fd4\u56de\u7edd\u5bf9\u8def\u5f84\uff0c\u8fd9\u662f\u4e0e realpath \u7684\u533a\u522b</li> <li>\u8fd4\u56de\uff1a\u8fd4\u56de\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>## \u5047\u8bbe\u5f53\u524dmakefile\u5728 /home/xx/test\u76ee\u5f55\u4e0b\n$(abspath ./)\n## result /home/xx/test\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#5","title":"5 \u6761\u4ef6\u51fd\u6570","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#51-if","title":"5.1 if","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(if condition,then-part[,else-part])</code></li> <li>\u529f\u80fd\uff1a\u5982\u679c condition \u662f\u4e00\u4e2a\u975e\u7a7a\u5b57\u7b26\uff08\u5373\u6761\u4ef6\u672a\u771f\uff09\uff0c\u6267\u884c then-part \u90e8\u5206\uff0c\u5426\u5219\u6267\u884c else-part \u90e8\u5206</li> <li>\u8fd4\u56de\uff1a\u4e0d\u8fd4\u56de\u6570\u636e\uff0c\u53ea\u6267\u884c\u6761\u4ef6\u5bf9\u5e94\u7684\u64cd\u4f5c</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>## \u7531\u4e8evar\u975e\u7a7a\uff0c\u6761\u4ef6\u4e3a\u771f\uff0c\u6267\u884cecho \"true\"\nvar:=1\nall:\n$(if $(var),echo \"true\",echo \"false\")\n## result \u6267\u884cecho \"true\"\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#52-or","title":"5.2 or","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(or condition1[,condition2[,condition3\u2026]])</code></li> <li>\u529f\u80fd\uff1a\u5224\u65ad\u662f\u5426\u6709\u4e00\u4e2a\u6761\u4ef6\u4e3a\u771f</li> <li>\u8fd4\u56de\uff1a\u4ece\u5de6\u5f80\u53f3\u5224\u65ad\u6761\u4ef6\u662f\u5426\u4e3a\u771f\uff0c\u5f53\u6709\u4e00\u4e2a\u6761\u4ef6\u4e3a\u771f\u65f6\uff0c\u8fd4\u56de\u8fd9\u4e2a\u6761\u4ef6\u771f\u7684\u5b57\u7b26\u4e32\uff1b\u5f53\u6240\u6709\u6761\u4ef6\u90fd\u4e3a\u5047\u65f6\uff0c\u8fd4\u56de\u7a7a\u5b57\u7b26</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>## \u7531\u4e8evar\u975e\u7a7a\uff0c\u6761\u4ef6\u4e3a\u771f\uff0c\u6267\u884cecho \"true\"\n## var1\u7a7a\u5b57\u7b26\uff0cvar2\u975e\u7a7a\uff0c\u8fd4\u56de\u7b2c\u4e00\u4e2a\u771f\u7684\u6761\u4ef6var2\nvar1:=\nvar2:=2\nvar3:=3\n$(or $(var1),$(var2),$(var3))\n## result 2\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#53-and","title":"5.3 and","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(and condition1[,condition2[,condition3\u2026]])</code></li> <li>\u529f\u80fd\uff1a\u5224\u65ad\u6240\u6709\u6761\u4ef6\u662f\u5426\u4e3a\u771f</li> <li>\u8fd4\u56de\uff1a\u4ece\u5de6\u5f80\u53f3\u5224\u65ad\u6761\u4ef6\u662f\u5426\u4e3a\u771f\uff0c\u5f53\u6709\u6240\u6709\u6761\u4ef6\u4e3a\u771f\u65f6\uff0c\u6700\u540e\u4e00\u4e2a\u6761\u4ef6\u771f\u7684\u5b57\u7b26\u4e32\uff1b\u5f53\u6709\u4e00\u4e2a\u6761\u4ef6\u4e3a\u5047\u65f6\uff0c\u8fd4\u56de\u7a7a\u5b57\u7b26</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>## \u7531\u4e8evar\u975e\u7a7a\uff0c\u6761\u4ef6\u4e3a\u771f\uff0c\u6267\u884cecho \"true\"\n## var1\u7a7a\u5b57\u7b26\uff0cvar2\u975e\u7a7a\uff0c\u8fd4\u56de\u7b2c\u4e00\u4e2a\u5047\u7684\u6761\u4ef6var1\nvar1:=\nvar2:=2\nvar3:=3\n$(or $(var1),$(var2),$(var3))\n## result \u7a7a\u5b57\u7b26\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#6-foreach","title":"6 foreach","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(foreach var,list,text)</code></li> <li>\u529f\u80fd\uff1a\u904d\u5386 list\uff0c\u653e\u5165 var \u4e2d\uff0c\u518d\u6267\u884c text \u5e76\u8fd4\u56de</li> <li>\u8fd4\u56de\uff1a\u8fd4\u56de test \u5185\u5bb9</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>dirs := a b c d\nfiles := $(foreach dir,$(dirs),$(wildcard $(dir)/*))\n#\u7b49\u4ef7\u4e8e\nfiles := $(wildcard a/* b/* c/* d/*)\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#7-file","title":"7 file \u8bfb\u5199\u6587\u4ef6","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(file op filename[,text])</code></li> <li>\u529f\u80fd\uff1a\u8bfb\u5199\u6587\u4ef6</li> <li><code>$(file &gt; filename [test])</code> \u8986\u76d6\u5199</li> <li><code>$(file &gt;&gt; filename [test])</code> \u8ffd\u52a0\u5199</li> <li><code>$(file &lt; filename)</code> \u8bfb\u53d6\u6587\u4ef6\uff0c\u5e76\u8fd4\u56de\u6587\u4ef6\u5185\u5bb9</li> <li>\u8fd4\u56de\uff1a\u5f53\u90fd\u6587\u4ef6\u65f6\uff0c\u8fd4\u56de\u6587\u4ef6\u5185\u5bb9\uff0c\u5199\u6587\u4ef6\uff0c\u8fd4\u56de\u7a7a</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>program: $(OBJECTS)\n$(file &gt;$@.in,$^)\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#8-call","title":"8 call \u8c03\u7528\u53c2\u6570\u5316\u51fd\u6570 (\u81ea\u5b9a\u4e49\u51fd\u6570)","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(value variable)</code></li> <li>\u529f\u80fd\uff1a\u8c03\u7528\u53c2\u6570\u5316\u51fd\u6570,param \u4f1a\u88ab\u51fd\u6570\u4e2d $(1)\u3001$ (2)...$(n) \u63a5\u6536</li> <li>\u8fd4\u56de\uff1a\u8fd4\u56de\u4ec0\u4e48\u53d6\u51b3\u4e8e variable \u6240\u5bf9\u5e94\u7684\u53c2\u6570\u5316\u51fd\u6570</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>## \u4ea4\u6362\u53c2\u6570\u503c\nreverse = $(2) $(1)\nfoo = $(call reverse,a,b)\n## result foo=b a\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#9-value","title":"9 value \u53d6\u53d8\u91cf\u503c","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(value variable)</code></li> <li>\u529f\u80fd\uff1a\u5f53 variable \u4e5f\u662f\u5f15\u7528\u4e00\u4e2a\u53d8\u91cf\u65f6\uff0c$(variable) \u4e0d\u80fd\u6b63\u786e\u5f97\u5230\u7ed3\u679c\uff0c\u4f46 value \u51fd\u6570\u80fd\u907f\u514d\u8fd9\u4e2a\u95ee\u9898</li> <li>\u8fd4\u56de\uff1a\u8fd4\u56de variable \u5f15\u7528\u7684\u503c</li> <li>\u793a\u4f8b\uff1a\u7b2c\u4e00\u4e2a echo \u4f1a\u628a$P \u5f53\u4f5c\u53d8\u91cf\uff0c\u4ece\u800c\u751f\u6210 ATH\uff0c\u7b2c\u4e8c\u4e2a echo \u624d\u80fd\u6b63\u786e\u89e3\u6790\u5230\u73af\u5883\u53d8\u91cf\u503c</li> </ul> <pre><code>FOO = $PATH\n\nall:\n@echo $(FOO)\n@echo $(value FOO)\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#10-eval","title":"10 eval","text":"<ul> <li>\u53c2\u8003</li> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(eval $(call ...))</code></li> <li>\u529f\u80fd\uff1aeval \u901a\u5e38\u7528\u4e8e\u5f53 call \u4e00\u4e2a\u81ea\u5b9a\u4e49\u51fd\u6570\u65f6\uff0c\u8fd9\u4e2a\u51fd\u6570\u91cc\u662f\u751f\u6210 makefile \u4ee3\u7801\uff0c\u8fd9\u65f6\u6267\u884c eval\uff0c\u8fd9\u6bb5 makefile \u4ee3\u7801\u624d\u80fd\u751f\u6548\u3002</li> <li>\u8fd4\u56de\uff1a\u8fd4\u56de\u503c\u662f\u7a7a</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>## eval\u5c06PROGRAM_template\u4e2d\u5b9a\u4e49\u7684\nPROGRAMS = server client\nserver_OBJS = server.o server_priv.o server_access.o\nserver_LIBS = priv protocol\nclient_OBJS = client.o client_api.o client_mem.o\nclient_LIBS = protocol\n## Everything after this is generic\n.PHONY: all\nall: $(PROGRAMS)\ndefine PROGRAM_template =\n$(1): $$($(1)_OBJS) $$($(1)_LIBS:%=-l%)\nALL_OBJS += $$($(1)_OBJS)\nendef\n$(foreach prog,$(PROGRAMS),$(eval $(call PROGRAM_template,$(prog))))\n$(PROGRAMS):\n$(LINK.o) $^ $(LDLIBS) -o $@\nclean:\nrm -f $(ALL_OBJS) $(PROGRAMS)\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#11-orign","title":"11 orign \u663e\u793a\u53d8\u91cf\u6765\u6e90","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(origin variable)</code></li> <li>\u529f\u80fd\uff1a\u663e\u793a\u6307\u5b9a\u53d8\u91cf\u7684\u6765\u6e90\uff0c\u662f\u5426\u662f\u73af\u5883\u53d8\u91cf\uff0c\u8fd8\u662f makefie \u5b9a\u4e49\u7684\uff0c\u8fd8\u662f\u672a\u5b9a\u4e49\u7684\u7b49\u7b49</li> <li>\u8fd4\u56de\uff1a\u8fd4\u56de\u503c\u662f\u53d8\u91cf\u6765\u6e90\uff0c\u6709\u4ee5\u4e0b\u51e0\u79cd</li> <li><code>undefined</code> \uff1a\u6ca1\u6709\u5b9a\u4e49\u7684\u53d8\u91cf</li> <li><code>default</code> \uff1a\u9ed8\u8ba4\u5b9a\u4e49\u7684\u53d8\u91cf\uff0c\u6bd4\u5982 CC \u5b9a\u4e49\u6210 cc\uff0cAR \u5b9a\u4e49\u6210 ar</li> <li><code>environment</code> \uff1a\u6765\u81ea\u7cfb\u7edf\u73af\u5883\u53d8\u91cf</li> <li><code>environment override</code> \uff1a\u6765\u81ea\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\uff0c\u4e14 make \u65f6\u5e26\u6709-e \u53c2\u6570</li> <li><code>file</code> \uff1amakefile \u5b9a\u4e49\u7684\u53d8\u91cf\uff0c\u5305\u62ec\u5982 MAKEFILE_LIST \u8fd9\u7c7b\u53d8\u91cf</li> <li><code>command line</code> \uff1a\u547d\u4ee4\u884c\u4f20\u8fc7\u6765\u7684\u53d8\u91cf\uff0c\u6bd4\u5982\u6267\u884c <code>make TEST=123</code>\uff0cTEST \u5c31\u662f\u8fd9\u4e2a</li> <li><code>override</code> \uff1a\u53d8\u91cf\u88ab override \u4fee\u9970\u7684</li> <li><code>automatic</code> \uff1a\u81ea\u52a8\u5316\u53d8\u91cf\uff0c\u5982 <code>$@\u3001$&lt;</code></li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>FOO=123\noverride AA=123\nall:\necho $(origin @)\necho $(origin AA)\necho $(origin FOO)\necho $(origin MAKEFILE_LIST)\necho $(origin TEST)\necho $(value FOO)\necho $(origin PATH)\necho $(origin CC)\n</code></pre> <ul> <li>\u7ed3\u679c</li> </ul> <pre><code>## \u6267\u884cmake\n$ make\necho automatic\nautomatic\necho override\noverride\necho file\nfile\necho file\nfile\necho undefined\nundefined\necho 123\n123\necho environment\nenvironment\necho default\ndefault\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#12-flavor","title":"12 flavor \u663e\u793a\u53d8\u91cf\u7b80\u5355\u4fe1\u606f","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(flavor variable)</code></li> <li>\u529f\u80fd\uff1a\u663e\u793a\u6307\u5b9a\u53d8\u91cf\u662f\u5426\u5b9a\u4e49\uff0c\u662f\u5426\u662f\u91cd\u590d\u6269\u5c55\u7c7b\u578b\uff08=\u6216 define \u5b9a\u4e49\u7684\u53d8\u91cf\uff09\uff0c\u7b80\u5355\u6269\u5c55\u7c7b\u578b\uff08\u7531:=\u5b9a\u4e49\u7684\uff09</li> <li>\u8fd4\u56de\uff1a\u8fd4\u56de\u503c\u662f\u53d8\u91cf\u6765\u6e90\uff0c\u6709\u4ee5\u4e0b\u51e0\u79cd</li> <li><code>undefined</code> \uff1a\u6ca1\u6709\u5b9a\u4e49\u7684\u53d8\u91cf</li> <li><code>recursive</code> \uff1a\u7531 <code>=</code> \u6216 <code>define</code> \u5b9a\u4e49\u7684\u53d8\u91cf</li> <li><code>simple</code> \uff1a\u7531:=\u5b9a\u4e49\u7684\u53d8\u91cf</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>bar = $(ugh)\nugh := Huh?\nFOO=123\noverride AA=123\nall:\necho $(flavor bar)\necho $(flavor ugh)\necho $(flavor xxx)\n</code></pre> <ul> <li>\u7ed3\u679c</li> </ul> <pre><code>## \u6267\u884cmake\n$ make\necho recursive\nrecursive\necho simple\nsimple\necho undefined\nundefined\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#13","title":"13 \u63d0\u793a\u7c7b\u578b\u51fd\u6570","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#131-error","title":"13.1 error","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(error text...)</code></li> <li>\u529f\u80fd\uff1a\u7ec8\u6b62 makefile \u6267\u884c\uff0c\u6253\u5370 text</li> <li>\u8fd4\u56de\uff1a\u8fd4\u56de\u503c\u4e3a\u7a7a</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>ifdef ERROR1\n$(error error is $(ERROR1))\nendif\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#132-warning","title":"13.2 warning","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(warning text...)</code></li> <li>\u529f\u80fd\uff1a\u4e0d\u7ec8\u6b62 makefile \u6267\u884c\uff0c\u4f46\u6253\u5370 text \u5230\u6807\u51c6\u8f93\u51fa</li> <li>\u8fd4\u56de\uff1a\u8fd4\u56de\u503c\u4e3a\u7a7a</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>all:\n$(warning warning...)\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#133-info","title":"13.3 info","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(info text...)</code></li> <li>\u529f\u80fd\uff1a\u6253\u5370 text \u5230\u6807\u51c6\u8f93\u51fa</li> <li>\u8fd4\u56de\uff1a\u8fd4\u56de\u503c\u4e3a\u7a7a</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>all:\n$(info info...)\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%87%BD%E6%95%B0/#14-shell-shell","title":"14 shell \u51fd\u6570\u6267\u884c shell \u6307\u4ee4","text":"<ul> <li>\u8bed\u6cd5\u5f62\u5f0f\uff1a<code>$(shell shell-command)</code></li> <li>\u529f\u80fd\uff1a\u6267\u884c shell-command</li> <li>\u8fd4\u56de\uff1a\u8fd4\u56de\u503c\u662f\u6267\u884c shell \u6307\u4ee4\u540e\u5f97\u5230\u7684\u503c</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>## \u5c06foo\u6587\u4ef6\u5185\u5bb9\u8d4b\u7ed9contents\u53d8\u91cf\ncontents := $(shell cat foo)\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/","title":"make \u53d8\u91cf","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#1","title":"1 \u8bed\u6cd5","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#11","title":"1.1 \u53d8\u91cf\u8d4b\u503c","text":"<pre><code>\u5982\u679c\u6ca1\u6709\u7279\u6b8a\u9700\u6c42\uff08\u4e0d\u9700\u8981`=`\u7684\u9012\u5f52\u6269\u5c55\u53d8\u91cf\u7279\u6027\uff09\uff0c\u5efa\u8bae\u4f7f\u7528`:=`\u8d4b\u503c\u65b9\u5f0f\u3002\n</code></pre> <p>\u53d8\u91cf\u7684\u8d4b\u503c\u6709 4 \u79cd\u7b26\u53f7\uff0c\u5982\u4e0b - \u7b80\u5355\u8d4b\u503c <code>:=</code> \u7f16\u7a0b\u8bed\u8a00\u4e2d\u5e38\u89c4\u7406\u89e3\u7684\u8d4b\u503c\u65b9\u5f0f\uff0c\u53ea\u5bf9\u5f53\u524d\u8bed\u53e5\u7684\u53d8\u91cf\u6709\u6548\u3002 - \u9012\u5f52\u8d4b\u503c <code>=</code> \u8d4b\u503c\u8bed\u53e5\u53ef\u80fd\u5f71\u54cd\u591a\u4e2a\u53d8\u91cf\uff0c\u6240\u6709\u76ee\u6807\u53d8\u91cf\u76f8\u5173\u7684\u5176\u4ed6\u53d8\u91cf\u90fd\u53d7\u5f71\u54cd\u3002 - \u6761\u4ef6\u8d4b\u503c <code>?=</code> \u5982\u679c\u53d8\u91cf\u672a\u5b9a\u4e49\uff0c\u5219\u4f7f\u7528\u7b26\u53f7\u4e2d\u7684\u503c\u5b9a\u4e49\u53d8\u91cf\u3002\u5982\u679c\u8be5\u53d8\u91cf\u5df2\u7ecf\u8d4b\u503c\uff0c\u5219\u8be5\u8d4b\u503c\u8bed\u53e5\u65e0\u6548\u3002 - \u8ffd\u52a0\u8d4b\u503c <code>+=</code> \u539f\u53d8\u91cf\u7528\u7a7a\u683c\u9694\u5f00\u7684\u65b9\u5f0f\u8ffd\u52a0\u4e00\u4e2a\u65b0\u503c\u3002</p> <p>\u5176\u4e2d <code>=</code> \u5141\u8bb8\u7b49\u53f7\u53f3\u8fb9\u7684\u53d8\u91cf\u5728\u540e\u9762\u51fa\u73b0\uff0c\u4e14\u8d4b\u503c\u50cf C++\u4e2d\u5f15\u7528\u8d4b\u503c\u4e00\u6837\uff0c\u800c <code>:=</code> \u8d4b\u503c\u5c31\u50cf C++\u4e2d\u7684\u590d\u5236\u8d4b\u503c\uff1b - <code>:=</code> \u8d4b\u503c</p> <pre><code>x:=foo\ny:=$(x)b\nx:=new\ntest\uff1a\n@echo \"y=&gt;$(y)\"\n@echo \"x=&gt;$(x)\"\n</code></pre> <ul> <li>\u7ed3\u679c\uff1a</li> </ul> <pre><code>y=&gt;foob\nx=&gt;new\n</code></pre> <ul> <li><code>=</code> \u8d4b\u503c</li> </ul> <pre><code>x=foo\ny=$(x)b\nx=new\ntest\uff1a\n@echo \"y=&gt;$(y)\"\n@echo \"x=&gt;$(x)\"\n</code></pre> <ul> <li>\u7ed3\u679c\uff1a</li> </ul> <pre><code>y=&gt;newb\nx=&gt;new\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#111","title":"1.1.1 \u53d8\u91cf\u8d4b\u503c\u89c4\u5219\u603b\u7ed3","text":"<p>\u5bf9\u4e8e\u9644\u52a0\u8fd0\u7b97\u7b26\u201c+=\u201d\uff0c\u5982\u679c\u53d8\u91cf\u4e4b\u524d\u88ab\u8bbe\u7f6e\u4e3a\u7b80\u5355\u53d8\u91cf\uff08\u201c\uff1a=\u201d\u6216\u201c\uff1a\uff1a=\u201d\uff09\uff0c\u5219\u53f3\u4fa7\u88ab\u89c6\u4e3a\u7acb\u5373 immediate\uff0c\u5426\u5219\u88ab\u5ef6\u8fdf deferred\u3002</p> <pre><code>immediate = deferred  immediate ?= deferred  immediate := immediate  immediate ::= immediate  \nimmediate += deferred or immediate  immediate != immediate  define immediate  \ndeferred  endef  \ndefine immediate =  \ndeferred  endef  \ndefine immediate ?=  \ndeferred  endef  \ndefine immediate :=  \nimmediate  endef  \ndefine immediate ::=  \nimmediate  endef  \ndefine immediate +=  \ndeferred or immediate  endef  \ndefine immediate !=\nimmediate  endef\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#12","title":"1.2 \u53d8\u91cf\u7684\u4f7f\u7528","text":"<p>\u53d8\u91cf\u4f7f\u7528\u53ef\u4ee5\u7528 3 \u79cd\u8bed\u6cd5, \u76f8\u8f83\u4e8e shell\uff0cmake \u4e2d\u53ef\u4ee5\u4f7f\u7528 <code>$(VAR)</code> \u683c\u5f0f - <code>$VAR</code> - <code>$(VAR)</code> - <code>${VAR}</code></p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#13","title":"1.3 \u66ff\u6362\u5f15\u7528","text":"<p>\u66ff\u6362\u5f15\u7528\u5b9e\u9645\u4e0a\u662f patsubst \u51fd\u6570\u7684\u7b80\u5199\u5f62\u5f0f\uff0c\u6bd4\u5982 <code>$(foo:.o=.c)</code> \u7b49\u4ef7\u4e8e <code>$(patsubst %.o,%.c,$(foo))</code></p> <pre><code>all:\n@echo top makefileg\n\nfoo := a.o b.o l.a c.o\nbar := $(foo:.o=.c)\n$(info bar:$(bar))\n</code></pre> <p>\u8f93\u51fa\u7ed3\u679c\uff1a</p> <pre><code>[shw@rocky make]$ make\nbar:a.c b.c l.a c.c\ntop makefile\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#14","title":"1.4 <code>$</code> \u548c <code>$$</code> \u7684\u4f7f\u7528\u533a\u522b","text":"<pre><code>title: \u4e3a\u4ec0\u4e48\u4f7f\u7528$$\n\u56e0\u4e3a\u5728makefile\u6587\u4ef6\u4e2d`$`\u5177\u6709\u7279\u6b8a\u51fd\u6570\u5b57\u7b26\uff0c\u5f53\u6211\u4eec\u9700\u8981`$`\u8fd9\u4e2a\u5b57\u7b26\u65f6\uff0c\u9700\u8981\u901a\u8fc7`$$`\u6765\u8fbe\u5230\u8f6c\u4e49\u4f5c\u7528\uff0c\u7c7b\u4f3cc\u8bed\u8a00\u4e2d\u8f6c\u4e49\u5b57\u7b26`\\`\u3002\n</code></pre> <p><code>$(variable)</code> \u7528\u5728 makefile \u53d8\u91cf\uff0c\u800c <code>$$(variable)</code> \u7528\u5728 shell \u53d8\u91cf\u4e2d - \u793a\u4f8b</p> <pre><code>var1=hello\ntest:\necho $var1\nvar2=2;echo $$var2\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#2","title":"2 \u7279\u6b8a\u53d8\u91cf","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#21-override","title":"2.1 override \u53d8\u91cf","text":"<ul> <li>\u529f\u80fd\uff1a\u5f53\u5728\u6267\u884c make \u65f6\uff0c\u53d8\u91cf\u8d4b\u503c\u5728\u547d\u4ee4\u884c\u53c2\u6570\u4e2d\u8bbe\u7f6e\uff0c\u6b64\u65f6\u8fd9\u4e2a\u53d8\u91cf\u518d\u6b21\u5728 makefile \u6587\u4ef6\u4e2d\u88ab\u91cd\u65b0\u8d4b\u503c\u4e0d\u4f1a\u8986\u76d6\u547d\u4ee4\u884c\u8bbe\u7f6e\u7684\u53d8\u91cf\u503c\uff0c\u9664\u975e\u5728 makefile \u6587\u4ef6\u4e2d\u7ed9\u53d8\u91cf\u589e\u52a0 override \u6307\u793a\u7b26\u3002</li> <li>\u793a\u4f8b:</li> <li>make \u547d\u4ee4\u884c</li> </ul> <pre><code>## make \u547d\u4ee4\u884c\u6307\u4ee4,\u53d8\u91cf\u8d4b\u503c\u88ab\u5355\u5f15\u53f7\u5305\u88f9\nmake print 'VAR1=hello'\n</code></pre> <ol> <li>makefile \u6587\u4ef6</li> </ol> <pre><code>## makefile \u6587\u4ef6\u90e8\u5206\u5185\u5bb9\noverride VAR1=world\nprint:\necho $(VAR1)\n</code></pre> <ol> <li>\u6267\u884c\u7ed3\u679c, \u8bbe\u7f6e override \u540e VAR1 \u88ab makefile \u91cd\u65b0\u8d4b\u503c\u4e86\uff0c\u5982\u679c\u6ca1\u6709 override\uff0c\u8f93\u51fa\u7ed3\u679c\u4f1a\u662f hello</li> </ol> <pre><code>$ make print 'VAR1=hello'\necho world\nworld\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#22-export-unexport","title":"2.2 export unexport \u53d8\u91cf","text":"<ul> <li>\u529f\u80fd\uff1a</li> <li><code>export</code> : \u5bfc\u51fa\u53d8\u91cf\u4f7f\u5b50 makefile \u4e2d\u80fd\u591f\u4f7f\u7528</li> <li><code>unexport</code> : \u53d6\u6d88\u5bfc\u51fa\u6307\u5b9a\u53d8\u91cf</li> <li>\u793a\u4f8b\uff1a\u5047\u8bbe\u5f53\u524d\u76ee\u5f55\u4e0b\u6709\u5b50\u76ee\u5f55 subdir\uff0c\u4e14 subdir \u4e2d\u6709 makefile \u6587\u4ef6</li> </ul> <pre><code>## \u7236makefile ,-C \u6307\u5b9a\u76ee\u5f55\nexport VAR1=hello\nbuild:\n$(MAKE) -C subdir\n## \u5b50makefile,\u53ef\u4ee5\u4f7f\u7528VAR1\u53d8\u91cf\nbuild:\necho $(VAR1)\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#23-define","title":"2.3 define \u591a\u884c\u53d8\u91cf\uff08\u4eff\u51fd\u6570\u5b9e\u73b0\u65b9\u5f0f\uff09","text":"<ul> <li>\u529f\u80fd\uff1a\u5b9a\u4e49\u591a\u884c\u53d8\u91cf\uff0c\u81ea\u5b9a\u4e49\u51fd\u6570\u7684\u5b9e\u73b0\u65b9\u5f0f</li> <li>\u793a\u4f8b</li> </ul> <pre><code>define printparam\n@echo \"param is\"\n@echo $1\nendef\n.PHONY: print\nprint:\n$(call printparam , hello)\n</code></pre> <ul> <li>\u6267\u884c\u7ed3\u679c</li> </ul> <pre><code>$ make print\nparam is\nhello\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#24-undefine","title":"2.4 undefine \u53d6\u6d88\u53d8\u91cf","text":"<ul> <li>\u529f\u80fd\uff1a\u4f7f\u4e4b\u524d\u5b9a\u4e49\u7684\u53d8\u91cf\u4e0d\u518d\u751f\u6548</li> <li>\u793a\u4f8b</li> </ul> <pre><code>VAR=123\nundefine VAR\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#25","title":"2.5 \u81ea\u52a8\u5316\u53d8\u91cf","text":"<ul> <li><code>$@</code> : \u8868\u793a\u76ee\u6807\u6587\u4ef6\u540d</li> <li><code>$&lt;</code> : \u8868\u793a\u4f9d\u8d56\u7684\u7b2c\u4e00\u4e2a\u6587\u4ef6\u540d</li> <li><code>$^</code> : \u8868\u793a\u6240\u6709\u4f9d\u8d56\u6587\u4ef6 (\u6bcf\u4e00\u4e2a\u6587\u4ef6\u540d\u4e4b\u95f4\u7528\u7a7a\u683c\u5206\u9694)\uff0c\u4f1a\u53bb\u9664\u91cd\u590d\u6587\u4ef6\u540d</li> <li><code>$+</code> : \u4e0e <code>$^</code> \u7c7b\u4f3c\uff0c\u4f46\u4f1a\u4fdd\u7559\u91cd\u590d\u6587\u4ef6\u540d</li> <li>\u793a\u4f8b</li> </ul> <pre><code>main:main.o math.o\ng++ $^ -o $@\nmain.o:main.cpp math.h\ng++ -c $&lt; -o main.o\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c<code>$^</code> \u6307\u7684\u662f <code>main.o math.o</code>, <code>$@</code> \u6307\u7684\u662f <code>main</code>, <code>$&lt;</code> \u6307 <code>main.cpp</code></p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#26","title":"2.6 \u76ee\u6807\u7279\u5b9a\u53d8\u91cf","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>pattern ... : variable-assignment</code></li> <li>\u5728\u76ee\u6807\u4f9d\u8d56\u91cc\u8fdb\u884c\u53d8\u91cf\u7684\u5b9a\u4e49\uff0c\u8fd9\u91cc\u5b9a\u4e49\u7684\u53d8\u91cf\u5c06\u4f1a\u9002\u7528\u6240\u6709\u7531\u8fd9\u4e2a\u76ee\u6807\u5c55\u5f00\u7684\u89c4\u5219\u4e2d\u53bb</li> </ul> <pre><code>## CFLAGS\u53d8\u91cf\u4e0d\u4ec5\u9002\u7528prog\uff0c\u8fd8\u9002\u7528\u4ee5prog.o foo.o bar.o\u4e3a\u76ee\u6807\u89c4\u5219\u4e2d\uff0c\u4e5f\u9002\u7528\u4ed6\u4eec\u4f9d\u8d56\u7684\u76ee\u6807\u7684\u89c4\u5219\u4e2d\nprog : CFLAGS = -g\nprog : prog.o foo.o bar.o\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#27","title":"2.7 \u6a21\u5f0f\u7279\u5b9a\u53d8\u91cf","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>pattern ... : variable-assignment</code></li> <li>\u7c7b\u4f3c\u4e0e\u76ee\u6807\u7279\u5b9a\u53d8\u91cf\uff0c\u6b64\u7528\u6765\u6a21\u5f0f\u5339\u914d\u76ee\u6807\u3002 \u5982\uff1a<code>%.o : CFLAGS = -O</code> \u5c06\u4f1a\u5339\u914d\u6240\u6709 <code>.O</code> \u540e\u7f00\u7684\u76ee\u6807\uff0c\u5982\u679c\u5b58\u5728\u591a\u4e2a\u6a21\u5f0f\u7279\u70b9\u53d8\u91cf\uff0c\u4f18\u5148\u5339\u914d\u5339\u914d\u9650\u5b9a\u66f4\u591a\u7684\u90a3\u4e2a\uff0c\u5982\u4e0b\uff1a</li> </ul> <pre><code>%.o: %.c  \n$(CC) -c $(CFLAGS) $(CPPFLAGS) $&lt; -o $@  lib/%.o: CFLAGS := -fPIC -g  \n%.o: CFLAGS := -g  \nall: foo.o lib/bar.o\n</code></pre> <p>\u4e0a\u9762\u5982\u679c\u76ee\u6807\u662f <code>lib/1.o</code>\uff0c\u5219\u4f18\u5148\u4f7f\u7528 <code>lib/%.o: CFLAGS := -fPIC -g</code> \u8fd9\u4e2a\u5339\u914d\u3002</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#28","title":"2.8 \u6291\u5236\u76ee\u6807\u53d8\u91cf\u7684\u7ee7\u627f","text":"<p>\u5728\u76ee\u6807\u7279\u5b9a\u53d8\u91cf\u3001\u6a21\u5f0f\u7279\u5b9a\u53d8\u91cf\u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf\u662f\u53ef\u4ee5\u88ab\u4f9d\u8d56\u7684\u76ee\u6807\u4f7f\u7528\u7684\uff0c\u5982\u679c\u4e0d\u60f3\u8981\u8fd9\u6837\uff0c\u53ef\u4ee5\u662f <code>private</code> \u6291\u5236\u53d8\u91cf\u7684\u7ee7\u627f\u3002\u5982\uff1a</p> <pre><code>EXTRA_CFLAGS =  prog: private EXTRA_CFLAGS = -L/usr/local/lib  \nprog: a.o b.o\n</code></pre> <p>\u4e0a\u9762\u7684 <code>a.o</code>\u3001<code>b.o</code> \u5c06\u4e0d\u4f1a\u7ee7\u627f EXTRA_CFLAGS \u7684\u503c\u3002</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#29","title":"2.9 \u6a21\u5f0f\u53d8\u91cf","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#291","title":"2.9.1 \u901a\u914d\u7b26%\u548c*","text":"<ul> <li><code>%</code> \u548c <code>*</code> \u90fd\u662f\u7528\u6765\u5339\u914d\u591a\u4e2a\u5b57\u7b26\u7684\u4f5c\u7528\uff0c\u4f46\u4f7f\u7528\u5730\u65b9\u4e0d\u540c</li> <li><code>%</code> \uff1a\u901a\u5e38\u5728\u76ee\u6807\u548c\u4f9d\u8d56\u4e2d\u6210\u5bf9\u51fa\u73b0\uff0c\u5982 <code>%.o:%.c</code>, \u6b64\u65f6\u5047\u8bbe\u6709 <code>test.o</code> \u7684\u76ee\u6807\u88ab\u6784\u5efa\uff0c\u5219\u4f9d\u8d56\u81ea\u52a8\u6269\u5c55\u6210 <code>test.c</code></li> <li><code>*</code> \uff1a\u4e00\u822c\u7528\u4e8e\u6a21\u7cca\u5339\u914d\u76ee\u5f55\u4e0b\u6587\u4ef6\uff0c\u5982 <code>files=*.c</code>\uff0c\u8868\u793a\u53d8\u91cf <code>files</code> \u7b49\u4e8e\u5f53\u524d\u6240\u6709\u4ee5 <code>.c</code> \u7ed3\u5c3e\u7684\u6587\u4ef6\uff1b\u4f46\u5f53\u5982\u679c\u76ee\u5f55\u4e0b\uff0c\u6ca1\u6709\u4e00\u4e2a\u4ee5 <code>.c</code> \u7ed3\u5c3e\u7684\u6587\u4ef6\u65f6\uff0c\u5c31\u4f1a\u6269\u5c55\u6210 <code>files=*c</code>\uff0c\u6240\u6709\u4e00\u822c\u8fd8\u662f\u4f7f\u7528 <code>wildcard</code> \u51fd\u6570\u6765\u53d6\u4ee3</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#292","title":"2.9.2 %\u793a\u4f8b","text":"<ul> <li>\u793a\u4f8b</li> </ul> <pre><code>.PHONY:targ1\ntarg1:1.o 2.o\n@echo %.o:%.c\n@echo \u3010%.o:%.c\u3011 \u76ee\u6807=$@ \u4f9d\u8d56=$^\n    touch $@\n%.c:\n@echo \u3010%.c:\u3011 \u76ee\u6807=$@ \u4f9d\u8d56=$^\n    touch $@\n</code></pre> <ul> <li>\u7ed3\u679c</li> </ul> <pre><code>$ make\n\u3010%.c:\u3011 \u76ee\u6807=1.c \u4f9d\u8d56=\ntouch 1.c\n\u3010%.o:%.c\u3011 \u76ee\u6807=1.o \u4f9d\u8d56=1.c\ntouch 1.o\n\u3010%.c:\u3011 \u76ee\u6807=2.c \u4f9d\u8d56=\ntouch 2.c\n\u3010%.o:%.c\u3011 \u76ee\u6807=2.o \u4f9d\u8d56=2.c\ntouch 2.o\n\nrm 2.c 1.c\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#293","title":"2.9.3 *\u793a\u4f8b","text":"<ul> <li>\u793a\u4f8b 1\uff1a\u5f53\u4e0b\u9762\u793a\u4f8b\u4e2d\u5b58\u5728\u4efb\u52a1\u4e00\u4e2a\u4ee5 <code>.c</code> \u7ed3\u5c3e\u7684\u6587\u4ef6\uff08\u5982 test.c\uff09\u65f6</li> </ul> <pre><code>.PHONY:targ1\ntarg1:*.c\n@echo \u76ee\u6807=$@ \u4f9d\u8d56=$^\n</code></pre> <ul> <li>\u6267\u884c make\uff0c\u7ed3\u679c\u5982\u4e0b\uff0c<code>*.c</code> \u6269\u5c55\u6210\u4e86 <code>test.c</code> \u6587\u4ef6</li> </ul> <pre><code>$ make\n\u76ee\u6807=targ1 \u4f9d\u8d56=test.c\n</code></pre> <ul> <li>\u793a\u4f8b 2\uff1a\u5f53\u4e0b\u9762\u793a\u4f8b\u4e2d\u5b58\u5728\u4efb\u52a1\u6ca1\u6709\u4efb\u4f55\u4ee5 <code>.c</code> \u7ed3\u5c3e\u7684\u6587\u4ef6\u65f6</li> </ul> <pre><code>.PHONY:targ1\ntarg1:*.c\n@echo \u76ee\u6807=$@ \u4f9d\u8d56=$^\n</code></pre> <ul> <li>\u6267\u884c make\uff0c\u7ed3\u679c\u5982\u4e0b, <code>*.c</code> \u6ca1\u6709\u88ab\u6269\u5c55</li> </ul> <pre><code>$ ls\nmakefile\n$ make\necho *.c\n*.c\n\u76ee\u6807=targ1 \u4f9d\u8d56=*.c\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#3","title":"3 \u5185\u7f6e\u53d8\u91cf","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#31","title":"3.1 \u5e38\u7528\u7a0b\u5e8f\u53d8\u91cf\u540d","text":"make \u53d8\u91cf \u5b9e\u9645\u503c \u8bf4\u660e <code>$(RM)</code> rm -f \u5220\u9664\u6587\u4ef6 <code>$(SHELL)</code> <code>/bin/bash</code> <code>$(AR)</code> ar \u7528\u4e8e\u751f\u6210\u9759\u6001\u5e93\u7684\u7a0b\u5e8f <code>$(AS)</code> as \u6c47\u7f16\u5de5\u5177 <code>$(MAKE)</code> make <code>$(CC)</code> cc c \u7f16\u8bd1\u5668 <code>$(CXX)</code> g++ cpp \u7f16\u8bd1\u5668 <code>$(CPP)</code> <code>$(CC) -E</code> c \u9884\u5904\u7406\u547d\u4ee4 <code>$(INSTALL)</code> install \u590d\u5236\u6587\u4ef6\u5e76\u8bbe\u7f6e\u5c5e\u6027\u7684\u5de5\u5177 <code>$(LD)</code> ld GNU \u94fe\u63a5\u5668 <code>$(LDCONFIG)</code> ldconfig \u5237\u65b0\u52a8\u6001\u94fe\u63a5\u5e93\u7f13\u5b58 <code>$(BISON)</code> bison <code>$(FLEX)</code> flex <code>$(LEX)</code> lex \u7528\u4e8e\u5c06 Lex \u8bed\u6cd5\u8f6c\u6362\u4e3a\u6e90\u4ee3\u7801\u7684\u7a0b\u5e8f <code>$(MAKEINFO)</code> makeinfo \u5c06 Texinfo \u6e90\u6587\u4ef6\u8f6c\u6362\u4e3a Info \u6587\u4ef6\u7684\u7a0b\u5e8f <code>$(RANLIB)</code> ranlib <code>$(TEXI2DVI)</code> texi2dvi <code>$(YACC)</code> yacc \u7528\u4e8e\u5c06 Yacc \u8bed\u6cd5\u8f6c\u6362\u4e3a\u6e90\u4ee3\u7801\u7684\u7a0b\u5e8f $(LINT) lint \u7528\u4e8e\u5728\u6e90\u4ee3\u7801\u4e0a\u8fd0\u884c lint \u7684\u7a0b\u5e8f"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#32","title":"3.2 \u5e38\u7528\u7684\u7f16\u8bd1\u9009\u9879","text":"make \u53d8\u91cf \u8bf4\u660e \u9ed8\u8ba4\u503c ARFLAGS ar \u5de5\u5177\u53c2\u6570 rv ASFLAGS as \u5de5\u5177\u53c2\u6570 \u7a7a CFLAGS c \u7f16\u8bd1\u5668\u9009\u9879 \u7a7a CXXFLAGS cpp \u7f16\u8bd1\u5668\u9009\u9879 \u7a7a LDFLAGS \u7528\u4e8e\u94fe\u63a5\u5e93\u7684\u53c2\u6570\uff0c\u5982 <code>-lfoo</code> LDFLAGS ld \u53c2\u6570 \u7a7a"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#33","title":"3.3 \u5176\u5b83\u53d8\u91cf","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#331-shell","title":"3.3.1 SHELL","text":"<p><code>SHELL</code> \u4e00\u822c\u662f <code>/bin/sh</code></p> <pre><code>all:\n@echo top makefile\n\n$(info SHELL:$(SHELL))\nSHELL=/bin/bash\n$(info SHELL:$(SHELL))\n</code></pre> <p>\u8f93\u51fa\u7ed3\u679c\uff1a</p> <pre><code>[shw@rocky make]$ make\nSHELL:/bin/sh\nSHELL:/bin/bash\ntop makefile\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#332-makefile_list","title":"3.3.2 MAKEFILE_LIST","text":"<p><code>MAKEFILE_LIST</code> : \u8fd9\u4e2a\u53d8\u91cf\u4f1a\u6309\u987a\u5e8f\u4fdd\u5b58\u6240\u6709\u6267\u884c\u8fc7\u7684 makefile \u6587\u4ef6\u540d\u7684\u7edd\u5bf9\u8def\u5f84\uff0c\u5982\u4e0b\u8f93\u51fa\u7ed3\u679c 2 \u4e2a makefile \u8def\u5f84 <code>makefile common/makefile</code> \uff1a</p> <pre><code>##### makefile\ninclude common/makefile\nall:\n@echo mian makefile\n@echo MAKEFILE_LIST\u5217\u8868\uff1a$(MAKEFILE_LIST)\n\n##### common/makefile\ntest:\n@echo sub makefile\n</code></pre> <p>\u8f93\u51fa\u7ed3\u679c\uff1a</p> <pre><code>[shw@rocky make]$ make test all\nsub makefile\nmian makefile\nMAKEFILE_LIST\u5217\u8868\uff1amakefile common/makefile\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#333-recipeprefix","title":"3.3.3 .RECIPEPREFIX","text":"<p>\u547d\u4ee4\u884c\u7684\u9996\u5b57\u7b26\u9ed8\u8ba4\u662f tab \u5b57\u7b26\uff0c\u901a\u8fc7\u4fee\u6539 <code>.RECIPEPREFIX</code> \u5c31\u80fd\u6539\u53d8\u547d\u4ee4\u884c\u9996\u5b57\u7b26\u3002\u6bd4\u5982\u5982\uff0c\u7528 <code>&gt;</code> \u5b57\u7b26\u66ff\u6362 tab \u5b57\u7b26 \uff1a</p> <pre><code>.RECIPEPREFIX = &gt;  all:  &gt; @echo Hello, world\n</code></pre> <p>.RCEPPEREFIX \u7684\u503c\u53ef\u4ee5\u591a\u6b21\u66f4\u6539\uff1b\u4e00\u65e6\u8bbe\u7f6e\uff0c\u5b83\u5c06\u5bf9\u89e3\u6790\u7684\u6240\u6709\u89c4\u5219\u4fdd\u6301\u6709\u6548\uff0c\u76f4\u5230\u4fee\u6539\u3002</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#334-include_dirs","title":"3.3.4 .INCLUDE_DIRS","text":"<p><code>.INCLUDE_DIRS</code> \u4fdd\u5b58\u4e86 include \u6307\u5b9a\u641c\u7d22 makefile \u6587\u4ef6\u7684\u4f4d\u7f6e\uff0c\u8fd9\u4e2a\u53d8\u91cf\u80fd\u901a\u8fc7 <code>make -I DIRECTORY, --include-dir=DIRECTORY</code> \u8bbe\u7f6e\uff0c\u5982\uff1a \u9879\u76ee\u7ed3\u6784\uff1a</p> <pre><code>[shw@rocky make]$ tree\n.\n\u251c\u2500\u2500 common\n\u2502   \u2514\u2500\u2500 sub.mk\n\u2514\u2500\u2500 makefile\n</code></pre> <p>makefile \u5982\u4e0b</p> <pre><code>include sub.mk\nall:\n@echo top makefile\n\n$(info .INCLUDE_DIRS:$(.INCLUDE_DIRS))\n</code></pre> <p>\u8f93\u51fa\u7ed3\u679c\uff1a</p> <pre><code>[shw@rocky make]$ make -I ./common\n.INCLUDE_DIRS:common /usr/include /usr/local/include /usr/include\nsub makefile\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#335-default_goal","title":"3.3.5 .DEFAULT_GOAL","text":"<p><code>.DEFAULT_GOAL</code> \u8868\u793a\u9ed8\u8ba4\u7684 target \u662f\u54ea\u4e00\u4e2a\uff0c\u8fd9\u4e2a\u503c\u4fdd\u5b58\u7684\u662f\u7b2c\u4e00\u4e2a target\uff0c include \u7684 makefile \u4e5f\u53c2\u4e0e\u8fd9\u4e2a\u89c4\u5219\u3002\u5373\u4f7f make \u662f\u6307\u5b9a\u4e86 target\uff0c\u8fd9\u4e2a\u53d8\u91cf\u4e5f\u4e0d\u4f1a\u88ab\u5f71\u54cd\u3002</p> <pre><code>test:\n@echo test target\nall:\n@echo top makefile\n\n$(info .DEFAULT_GOAL:$(.DEFAULT_GOAL))\n</code></pre> <p>\u8f93\u51fa\u7ed3\u679c\uff1a</p> <pre><code>[shw@rocky make]$ make all\n.DEFAULT_GOAL:test\ntop makefile\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#336-features","title":"3.3.6 .FEATURES","text":"<p><code>.FEATURES</code> \u53d8\u91cf\u80fd\u83b7\u53d6\u6b64\u7248\u672c\u7684 make \u652f\u6301\u7684\u7279\u6b8a\u529f\u80fd\u5217\u8868\u3002\u53ef\u80fd\u7684\u503c\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff1a - <code>archives</code> : Supports ar (archive) files using special file name syntax. - <code>check-symlink</code> : Supports the -L (--check-symlink-times) flag.  - <code>else-if</code> : Supports \u201celse if\u201d non-nested conditionals.  - <code>jobserver</code> : Supports \u201cjob server\u201d enhanced parallel builds - <code>oneshell</code> : Supports the .ONESHELL special target - <code>order-only</code> : Supports order-only prerequisites  - <code>second-expansion</code> : Supports secondary expansion of prerequisite lists. - <code>shortest-stem</code> : Uses the \u201cshortest stem\u201d method of choosing which pattern, of multiple applicable options, will be used.  - <code>target-specific</code> : Supports target-specific and pattern-specific variable assignments. - <code>undefine</code> : Supports the undefine directive - <code>guile</code> : Has GNU Guile available as an embedded extension language - <code>load</code> : Supports dynamically loadable objects for creating custom exten sions</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/make/make%E5%8F%98%E9%87%8F/#337-extra_prereqs","title":"3.3.7 .EXTRA_PREREQS","text":"<p><code>.EXTRA_PREREQS</code> \u53ef\u4ee5\u7ed9\u5355\u4e2a\u76ee\u6807\u6216\u8005\u5168\u5c40\u8bbe\u7f6e\u4f9d\u8d56\uff0c\u4f7f\u7528\u573a\u666f\uff1a\u5047\u8bbe gcc \u88ab\u66f4\u65b0\u4e86\uff0c\u6211\u4eec\u4e5f\u5e0c\u671b\u6211\u4eec\u7684\u76ee\u6807\u80fd\u591f\u91cd\u65b0\u6784\u5efa\uff0c\u8fd9\u65f6\u53ef\u4ee5\u8fd9\u6837\uff1a</p> <pre><code>myprog: myprog.o file1.o file2.o  \n$(CC) $(CFLAGS) $(LDFLAGS) -o $@ $^ $(LDLIBS)  myprog: .EXTRA_PREREQS = $(CC)\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/ninja/build.ninja/","title":"build.ninja \u6587\u4ef6","text":"<pre><code>build.ninja\u6587\u4ef6\u8981\u6709\u4e00\u4e2aEOF\u6587\u4ef6\u7ed3\u675f\u6807\u5fd7\uff0c\u8fd9\u610f\u5473\u7740\u6700\u540e\u4e00\u884c\u8981\u6709\u4e2a\u7a7a\u884c\uff0c\u5426\u5219\u4f1a\u62a5\u9519\uff1a`unexpected EOF`\n</code></pre> <p>ninja \u7684\u57fa\u672c\u7531 3 \u79cd\u8bed\u53e5\u7ec4\u6210\uff1a 1. \u53d8\u91cf\u5b9a\u4e49\uff1a\u5b9a\u4e49\u53ef\u4ee5\u91cd\u590d\u4f7f\u7528\u7684\u53d8\u91cf 2. rule \u89c4\u5219\uff1a\u5b9a\u4e49\u53ef\u4ee5\u6267\u884c\u7684\u547d\u4ee4 3. build \u89c4\u5219\uff1a\u5b9a\u4e49\u751f\u6210\u7684\u76ee\u6807\u6587\u4ef6</p> <pre><code>ninja_required_version = 1.3\n\ncflags=-o0 -Wall -Werror\nrule cc\n    command = gcc $cflags -fpic -shared $in -o $out\nbuild libmymath.so: cc mymath.cc\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/ninja/build.ninja/#1","title":"1 \u53d8\u91cf","text":"<ul> <li>\u8bed\u6cd5\uff1a<ul> <li>\u53d8\u91cf\u5b9a\u4e49\uff1a <code>\u53d8\u91cf\u540d=value</code></li> <li>\u53d8\u91cf\u4f7f\u7528\uff1a<code>$var</code> \u6216\u8005 <code>${var}</code> </li> </ul> </li> <li>\u89c4\u5219\uff1a<ul> <li>\u53d8\u91cf\u4ee5\u5b57\u7b26\u5c55\u5f00\uff0c\u7c7b\u4f3c c \u4e2d\u7684\u5b8f\u5c55\u5f00\u3002</li> <li>\u53d8\u91cf\u503c\u524d\u540e\u7684\u7a7a\u683c\u5c06\u4f1a\u5ffd\u7565\uff0c\u5373 <code>var1 = A B</code> \u7b49\u4ef7\u4e8e <code>var=A B</code></li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>cflags=-o0 -Wall -Werror\nrule cc\n    command = gcc $cflags -fpic -shared $in -o $out\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/ninja/build.ninja/#11-builddir","title":"1.1 builddir","text":"<p>builddir \u53d8\u91cf\u5b9a\u4e49\u4e86 ninja \u6784\u5efa\u751f\u6210\u7684\u65e5\u5fd7\u6587\u4ef6\u7684\u4f4d\u7f6e\uff0c\u5982 <code>builddir= build</code>\uff0c\u5c06\u4f1a\u5728\u5f53\u524d\u76ee\u5f55\u4e0b build \u76ee\u6807\u5b58\u653e.ninja_log \u6587\u4ef6\u3002</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/ninja/build.ninja/#12-ninja","title":"1.2 ninja \u7248\u672c\u53f7","text":"<p>\u7248\u672c\u53f7\u53d8\u91cf\u540d\u4e3a <code>ninja_required_version</code></p> <pre><code>ninja_required_version = 1.1\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/ninja/build.ninja/#2-rule","title":"2 rule \u89c4\u5219","text":"<p>Rule \u89c4\u5219\u58f0\u660e\u547d\u4ee4\u884c\u7684\u77ed\u540d\u79f0\u3002\u5b83\u4eec\u4ee5 rule \u5173\u952e\u5b57\u548c\u89c4\u5219\u540d\u79f0\u7ec4\u6210\u7684\u884c\u5f00\u59cb\u3002\u7136\u540e\u8ddf\u968f\u4e00\u7ec4\u7f29\u8fdb\u7684 <code>variable = value</code>\u3002</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/ninja/build.ninja/#21-phony-rule","title":"2.1 phony rule","text":"<p>\u4f5c\u7528\u548c make \u4e2d <code>.PHONY</code> \u4e00\u6837\u3002 1. \u7528\u4e8e\u4e3a\u5176\u4ed6\u76ee\u6807\u521b\u5efa\u522b\u540d\uff0c\u5982 <code>build foo: phony some/file/in/a/faraway/subdir/foo</code> 2. \u7528\u4e8e\u4e3a\u6784\u5efa\u65f6\u53ef\u80fd\u4e0d\u5b58\u5728\u7684\u6587\u4ef6\u521b\u5efa\u865a\u62df\u76ee\u6807\u3002 - \u793a\u4f8b</p> <pre><code>rule touch\n  command = touch $out\nbuild file_that_always_exists.dummy: touch\nbuild dummy_target_to_follow_a_pattern: phony file_that_always_exists.dummy\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/ninja/build.ninja/#3-build","title":"3 build \u8868\u8fbe\u5f0f","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>build\u00a0outputs:\u00a0rulename\u00a0inputs</code><ul> <li><code>build</code> \u662f\u5173\u952e\u5b57</li> <li><code>outputs</code> \u662f\u8f93\u51fa\u76ee\u6807\uff0c\u7c7b\u4f3c make \u4e2d\u7684\u76ee\u6807\uff0c\u7531 rule \u4e2d\u7684 <code>$out</code> \u53d8\u91cf\u63a5\u6536</li> <li><code>rulename</code> \u662f rule \u89c4\u5219\u4e2d\u5b9a\u4e49\u7684 rule \u540d</li> <li><code>inputs</code> \u662f\u7ed9 rule \u7684\u8f93\u5165\u53c2\u6570\uff0c\u7531 rule \u4e2d\u7684 <code>$in</code> \u53d8\u91cf\u63a5\u6536</li> </ul> </li> <li>build \u8868\u8fbe\u5f0f\u540e\u9762\u8fd8\u80fd\u8ddf\u7740\u4e00\u4e9b <code>key = value</code> \u5bf9\uff0c\u8fd9\u53ef\u4ee5\u91cd\u5199 rule \u4e2d command \u884c\u4f7f\u7528\u7684\u53d8\u91cf\u3002</li> </ul> <pre><code>cflags = -Wall -Werror\nrule cc\n  command = gcc $cflags -c $in -o $out\n\n## If left unspecified, builds get the outer $cflags.\nbuild foo.o: cc foo.c\n\n## But you can shadow variables like cflags for a particular build.\nbuild special.o: cc special.c\n  cflags = -Wall\n\n## The variable was only shadowed for the scope of special.o;\n## Subsequent build lines get the outer (original) cflags.\nbuild bar.o: cc bar.c\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/ninja/build.ninja/#31-default","title":"3.1 default \u9ed8\u8ba4\u6784\u5efa\u76ee\u6807","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>default\u00a0targets</code><ul> <li><code>default</code> \uff1a\u5173\u952e\u5b57</li> <li><code>targets</code> \uff1a\u76ee\u6807\u540d\u5217\u8868</li> </ul> </li> <li>\u89c4\u5219\uff1a<ul> <li>default \u76ee\u6807\u8868\u8fbe\u5f0f\u9700\u8981\u653e\u5728 build \u5b9a\u4e49\u7684\u76ee\u6807\u4e4b\u540e\uff0c\u5426\u5219\u4f1a\u62a5\u9519 <code>unknown target</code></li> <li>\u5982\u679c\u4e0d\u6307\u5b9a default \u6216\u8005 ninja \u547d\u4ee4\u884c\u4e0d\u6307\u5b9a\u76ee\u6807\uff0c\u9ed8\u8ba4\u4f1a\u628a\u6240\u6709 build \u8868\u8fbe\u5f0f\u6267\u884c\uff0c\u8fd9\u548c make \u53ea\u6267\u884c\u7b2c\u4e00\u4e2a\u76ee\u6807\u4e0d\u540c</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>default foo bar\ndefault baz\n</code></pre> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>ninja_required_version = 1.3\n\ncflags=-o0 -Wall -Werror\nrule cco\n    command = gcc $cflags -c $in -o $out\nrule ccso\n    command = gcc $cflags -fpic -shared $in -o $out\nbuild libmymath.so: ccso mymath.cc\nbuild mymath.o: cco mymath.cc\n\ndefault libmymath.so\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/ninja/ninja/","title":"ninja","text":"<ul> <li>https://ninja-build.org/manual.html Ninja \u662f\u4e00\u4e2a\u4f5c\u7528\u548c make \u76f8\u540c\u7684\u6e90\u4ee3\u7801\u6784\u5efa\u7cfb\u7edf\u3002</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/ninja/ninja/#1-design-goals","title":"1 Design goals","text":"<p>\u4ee5\u4e0b\u662f Ninja \u7684\u8bbe\u8ba1\u76ee\u6807\uff1a - \u975e\u5e38\u5feb\u901f\uff08\u5373\u5373\u65f6\uff09\u7684\u589e\u91cf\u6784\u5efa\uff0c\u5373\u4f7f\u5bf9\u4e8e\u975e\u5e38\u5927\u7684\u9879\u76ee\u4e5f\u662f\u5982\u6b64\u3002 - \u5173\u4e8e\u5982\u4f55\u6784\u5efa\u4ee3\u7801\u7684\u653f\u7b56\u5f88\u5c11\u3002\u4e0d\u540c\u7684\u9879\u76ee\u548c\u66f4\u9ad8\u7ea7\u522b\u7684\u6784\u5efa\u7cfb\u7edf\u5bf9\u5982\u4f55\u6784\u5efa\u4ee3\u7801\u6709\u4e0d\u540c\u7684\u770b\u6cd5\uff1b\u4f8b\u5982\uff0c\u6784\u5efa\u7684\u5bf9\u8c61\u5e94\u8be5\u4e0e\u6e90\u5171\u5b58\uff0c\u8fd8\u662f\u6240\u6709\u7684\u6784\u5efa\u8f93\u51fa\u90fd\u5e94\u8be5\u653e\u5728\u4e00\u4e2a\u5355\u72ec\u7684\u76ee\u5f55\u4e2d\uff1f\u662f\u5426\u6709\u6784\u5efa\u9879\u76ee\u53ef\u5206\u53d1\u5305\u7684\u201c\u5305\u201d\u89c4\u5219\uff1f\u56de\u907f\u8fd9\u4e9b\u51b3\u5b9a\uff0c\u5c1d\u8bd5\u5141\u8bb8\u5b9e\u73b0\uff0c\u800c\u4e0d\u662f\u9009\u62e9\uff0c\u5373\u4f7f\u8fd9\u4f1a\u5bfc\u81f4\u66f4\u591a\u7684\u5197\u957f\u3002 - \u83b7\u5f97\u6b63\u786e\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u7279\u522b\u662f\u5728\u4f7f\u7528 Makefile \u5f88\u96be\u83b7\u5f97\u6b63\u786e\u7684\u60c5\u51b5\u4e0b\uff08\u4f8b\u5982\uff0c\u8f93\u51fa\u9700\u8981\u5bf9\u7528\u4e8e\u751f\u6210\u5b83\u4eec\u7684\u547d\u4ee4\u884c\u7684\u9690\u5f0f\u4f9d\u8d56\u5173\u7cfb\uff1b\u8981\u6784\u5efa C \u6e90\u4ee3\u7801\uff0c\u9700\u8981\u4f7f\u7528 gcc \u7684\u201c-M\u201d\u6807\u5fd7\u4f5c\u4e3a\u5934\u4f9d\u8d56\u5173\u7cfb\uff09\u3002 - \u5f53\u65b9\u4fbf\u548c\u901f\u5ea6\u51b2\u7a81\u65f6\uff0c\u66f4\u559c\u6b22\u901f\u5ea6\u3002 \u91cd\u7533\u4e00\u4e0b\uff0cNinja \u6bd4\u5176\u4ed6\u6784\u5efa\u7cfb\u7edf\u66f4\u5feb\uff0c\u56e0\u4e3a\u5b83\u975e\u5e38\u7b80\u5355\u3002\u60a8\u5fc5\u987b\u544a\u8bc9 Ninja \u5728\u521b\u5efa\u9879\u76ee\u7684\u201c.Ninja\u201d\u6587\u4ef6\u65f6\u8981\u505a\u4ec0\u4e48\u3002</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/ninja/ninja/#2-comparison-to-make","title":"2 Comparison to Make","text":"<p>Ninja \u5728\u672c\u8d28\u4e0a\u548c\u529f\u80fd\u4e0a\u6700\u63a5\u8fd1 Make\uff0c\u4f9d\u8d56\u4e8e\u6587\u4ef6\u65f6\u95f4\u6233\u4e4b\u95f4\u7684\u7b80\u5355\u4f9d\u8d56\u5173\u7cfb\u3002 Ninja \u5f88\u7b80\u5355\uff0c\u629b\u5f03\u4e86 make \u4e0a\u7684\u5927\u90e8\u5206\u529f\u80fd\uff0c\u5982\uff1a\u540e\u7f00\u89c4\u5219\u3001\u51fd\u6570\u3001\u5185\u7f6e\u89c4\u5219 \u4ee5\u4e0b\u662f\u5fcd\u8005\u4e3a Make \u6dfb\u52a0\u7684\u4e00\u4e9b\u529f\u80fd\u3002\uff08\u8fd9\u4e9b\u7279\u6027\u901a\u5e38\u53ef\u4ee5\u4f7f\u7528\u66f4\u590d\u6742\u7684 Makefile \u6765\u5b9e\u73b0\uff0c\u4f46\u5b83\u4eec\u4e0d\u662f make \u672c\u8eab\u7684\u4e00\u90e8\u5206\u3002\uff09</p> <ul> <li>Ninja \u7279\u522b\u652f\u6301\u5728\u6784\u5efa\u65f6\u53d1\u73b0\u989d\u5916\u7684\u4f9d\u8d56\u9879\uff0c\u4f7f\u5176\u6613\u4e8e\u83b7\u53d6 \u6807\u5934\u4f9d\u8d56\u9879\u5bf9\u4e8e C/C++\u4ee3\u7801\u662f\u6b63\u786e\u7684\u3002</li> <li>\u6784\u5efa\u8fb9\u7f18\u53ef\u4ee5\u6709\u591a\u4e2a\u8f93\u51fa\u3002</li> <li>\u8f93\u51fa\u9690\u5f0f\u5730\u4f9d\u8d56\u4e8e\u7528\u4e8e\u751f\u6210\u5b83\u4eec\u7684\u547d\u4ee4\u884c\uff0c\u8fd9\u610f\u5473\u7740\u66f4\u6539\u4f8b\u5982\u7f16\u8bd1\u6807\u5fd7\u5c06\u5bfc\u81f4\u8f93\u51fa\u91cd\u65b0\u751f\u6210\u3002</li> <li>\u8f93\u51fa\u76ee\u5f55\u603b\u662f\u5728\u8fd0\u884c\u4f9d\u8d56\u5b83\u4eec\u7684\u547d\u4ee4\u4e4b\u524d\u9690\u5f0f\u521b\u5efa\u7684\u3002</li> <li>\u89c4\u5219\u53ef\u4ee5\u63d0\u4f9b\u6b63\u5728\u8fd0\u884c\u7684\u547d\u4ee4\u7684\u7b80\u77ed\u63cf\u8ff0\uff0c\u56e0\u6b64\u60a8\u53ef\u4ee5\u5728\u6784\u5efa\u65f6\u6253\u5370\u4f8b\u5982\u201cCCfoo.o\u201d\u800c\u4e0d\u662f\u957f\u547d\u4ee4\u884c\u3002</li> <li>\u6784\u5efa\u603b\u662f\u5e76\u884c\u8fd0\u884c\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u57fa\u4e8e\u7cfb\u7edf\u7684 CPU \u6570\u91cf\u3002\u672a\u6307\u5b9a\u7684\u751f\u6210\u4f9d\u8d56\u9879\u5c06\u5bfc\u81f4\u4e0d\u6b63\u786e\u7684\u751f\u6210\u3002</li> <li>\u547d\u4ee4\u8f93\u51fa\u59cb\u7ec8\u7f13\u51b2\u3002\u8fd9\u610f\u5473\u7740\u5e76\u884c\u8fd0\u884c\u7684\u547d\u4ee4\u4e0d\u4f1a\u4ea4\u9519\u5b83\u4eec\u7684\u8f93\u51fa\uff0c\u5f53\u547d\u4ee4\u5931\u8d25\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5176\u5931\u8d25\u8f93\u51fa\u6253\u5370\u5230\u4ea7\u751f\u5931\u8d25\u7684\u5b8c\u6574\u547d\u4ee4\u884c\u65c1\u8fb9\u3002</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/ninja/ninja/#3","title":"3 \u5b89\u88c5","text":"<ul> <li>\u65b9\u6cd5\u4e00\uff1a<code>dnf install ninja-build</code></li> <li>\u65b9\u6cd5\u4e8c\uff1a<code>pip install ninja</code></li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/ninja/ninja/#4","title":"4 \u4f7f\u7528","text":"<p>\u6267\u884c <code>ninja</code>\uff0c\u9ed8\u8ba4\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u67e5\u627e <code>build.ninja</code> \u6587\u4ef6\uff0c\u7136\u540e\u6784\u5efa\u6240\u6709\u8fc7\u65f6\u7684\u76ee\u6807\u3002</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/ninja/ninja/#5-ninja","title":"5 ninja \u547d\u4ee4\u884c\u53c2\u6570","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>ninja [options] [targets...]</code> |\u9009\u9879|\u529f\u80fd| |---|---| | <code>--version</code>|\u6253\u5370 ninja \u7248\u672c\u4fe1\u606f | | <code>-v, --verbose</code> |\u5728\u6784\u5efa\u65f6\u663e\u793a\u6240\u6709\u547d\u4ee4\u884c\u4fe1\u606f| | <code>--quiet</code> |\u4e0d\u663e\u793a\u6267\u884c\u72b6\u6001\uff0c\u53ea\u663e\u793a\u547d\u4ee4\u7ed3\u679c| | <code>-C DIR</code> |\u6307\u5b9a\u6267\u884c build.ninja \u6587\u4ef6\u7684\u8def\u5f84| | <code>-f FILE</code> |\u6307\u5b9a\u6784\u5efa\u6587\u4ef6 <code>[default=build.ninja]</code> | | <code>-j N</code> | \u5e76\u884c\u8fd0\u884c N \u4e2a jobs (0 \u610f\u5473\u65e0\u7a77\u5927) <code>[default=3 on this system]</code> | | <code>-k N</code> |\u4fdd\u6301\u6267\u884c\u76f4\u5230 N \u4e2a jobs \u90fd\u5931\u8d25 (0 \u8868\u793a\u65e0\u7a77\u5927) <code>[default=1]</code> | | <code>-l N</code> | \u5982\u679c\u8d1f\u8f7d\u5e73\u5747\u503c\u5927\u4e8e N\uff0c\u5219\u4e0d\u542f\u52a8 job| | <code>-n</code> | \u5e72\u8fd0\u884c\uff08\u4e0d\u8981\u8fd0\u884c\u547d\u4ee4\uff0c\u4f46\u8981\u50cf\u6210\u529f\u8fd0\u884c\u4e00\u6837\uff09| | <code>-d MODE</code> | \u542f\u7528\u8c03\u8bd5\uff08\u4f7f\u7528\u201c-d list\u201d\u5217\u51fa\u6a21\u5f0f\uff09| | <code>-t TOOL</code> | \u8fd0\u884c\u5b50\u5de5\u5177\uff08\u4f7f\u7528\u201c-t list\u201d\u5217\u51fa\u5b50\u5de5\u5177\uff09\u7ec8\u6b62\u9876\u5c42| options; further flags are passed to the tool | <code>-w FLAG</code> | \u8c03\u6574\u8b66\u544a\uff08\u4f7f\u7528\u201c-w list\u201d\u5217\u51fa\u8b66\u544a\uff09|</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F/rpmbuild/rpmbuild/","title":"rpmbuild","text":"<ul> <li>rpmbuild\u5b98\u65b9\u6587\u6863</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/Visual%20Studio%E6%95%99%E7%A8%8B/","title":"Visual Studio\u6559\u7a0b","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/Visual%20Studio%E6%95%99%E7%A8%8B/#1-visual-studio","title":"1 Visual Studio\u5b9e\u7528\u5feb\u6377\u952e","text":"\u529f\u80fd \u5feb\u6377\u952e \u683c\u5f0f\u5316\u4ee3\u7801 Ctrl+K+F \u6ce8\u91ca/\u6ce8\u91ca\u9009\u4e2d\u5185\u5bb9 Ctrl+K+C \u53d6\u6d88\u6ce8\u91ca Ctrl+K+U \u4ee3\u7801\u63d0\u793a Ctrl+J \u67e5\u627e/\u5feb\u901f\u67e5\u627e Ctrl+F \u5728\u6587\u4ef6\u4e2d\u67e5\u627e \u00a0Ctrl+Shift+F \u5220\u9664\u5f53\u524d\u884c\u5185\u5bb9 Ctrl+L"},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/Visual%20Studio%E6%95%99%E7%A8%8B/#2-vs","title":"2 vs\u9879\u76ee\u6587\u4ef6\u5c42\u7ea7\u914d\u7f6e","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/Visual%20Studio%E6%95%99%E7%A8%8B/#21-temp-lib-include-bin","title":"2.1 \u6b65\u9aa4\u4e00\uff1a\u8f85\u52a9Temp Lib include Bin\u6587\u4ef6\u5939\u53ca\u5176\u5b50\u6587\u4ef6\u5230\u89e3\u51b3\u65b9\u6848\u8def\u5f84\u4e0b","text":"<ol> <li>Temp \u6587\u4ef6\u5b58\u653e\u4e34\u65f6\u751f\u6210\u6587\u4ef6</li> <li>Lib\u6587\u4ef6\u5b58\u653elib\u6587\u4ef6</li> <li>include\u6587\u4ef6\u5b58\u653e\u7b2c\u4e09\u65b9\u5e93\u6587\u4ef6</li> <li>Bin\u5b58\u653eDebug/Release\u7248\u7684dll,exe\u7b49\u6587\u4ef6</li> </ol>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/Visual%20Studio%E6%95%99%E7%A8%8B/#22","title":"2.2 \u6b65\u9aa4\u4e8c\uff1a\u9879\u76ee\u5c5e\u6027\u4e2d\u8bbe\u7f6e\u4ee5\u4e0b\u5c5e\u6027","text":"<ol> <li>Output Directory\uff08\u8f93\u51fa\u76ee\u5f55\uff0c\u94fe\u63a5\u5668\uff09\u680f\u4f4d\u586b\u5165\uff1a<code>$(SolutionDir)\\Temp\\Link\\$(ProjectName)\\$(ConfigurationName)</code></li> <li>Intermediate Directory\uff08\u4e2d\u95f4\u76ee\u5f55\uff0c\u7f16\u8bd1\u5668\uff09\u680f\u4f4d\u586b\u5165\uff1a<code>$(SolutionDir)\\Temp\\Compile\\$(ProjectName)\\$(ConfigurationName)</code></li> <li>\u5728Build Event-&gt;Post-Build Event-&gt;Command Line\u4e2d\u586b\u5165\uff0cAll\u914d\u7f6e\u4e0b\uff1a<code>copy $(TargetPath) $(SolutionDir)\\Bin\\$(ConfigurationName);</code></li> <li>Debugging-&gt;Command\u4e2d\u586b\u5165\uff1a</li> </ol> <pre><code>$(SolutionDir)\\Bin\\$(ConfigurationName)\\$(TargetFileName)\n\u6216Debug\u7248\u8bbe\u7f6e $(SolutionDir)\\Bin\\Debug\\$(TargetFileName)\n\u6216Release\u7248\u8bbe\u7f6e $(SolutionDir)\\Bin\\Release\\$(TargetFileName)\n</code></pre> <ol> <li>Debugging-&gt;Working Directory\u586b\u5165\uff1a</li> </ol> <pre><code>$(SolutionDir)\\Bin\\$(ConfigurationName)\\\n\u6216Debug\u7248\u8bbe\u7f6e $(SolutionDir)\\Bin\\Debug\\\n\u6216Release\u7248\u8bbe\u7f6e $(SolutionDir)\\Bin\\Release\\\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/Visual%20Studio%E6%95%99%E7%A8%8B/#3","title":"3 \u7f16\u8bd1\u9519\u8bef\u6c47\u603b","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/Visual%20Studio%E6%95%99%E7%A8%8B/#31","title":"3.1 \u65e0\u6cd5\u89e3\u6790\u7684\u5916\u90e8\u7b26\u53f7","text":"<ol> <li>\u539f\u56e0\u4e00\uff1a\u9879\u76ee\u5305\u542b\u4e86\u5934\u6587\u4ef6\uff08.h\u6587\u4ef6\uff09\uff0c\u4f46\u6e90\u6587\u4ef6\uff08.cpp\u6587\u4ef6\uff09\u6ca1\u6709\u88ab\u5305\u542b\uff1b\u89e3\u51b3\u65b9\u6cd5\uff1a\u5c06\u6e90\u6587\u4ef6\u5305\u542b\u8fdb\u9879\u76ee\u4e2d\u3002</li> <li>\u539f\u56e0\u4e8c\uff1a\u58f0\u660e\u548c\u5b9a\u4e8e\u6ca1\u6709\u7edf\u4e00\uff0c\u6bd4\u5982\u5b9a\u4e49\u65f6\u53c2\u6570\u52a0\u4e86const\uff0c\u800c\u58f0\u660e\u65f6\u5fd8\u4e86\u52a0\u4e0aconst;\u89e3\u51b3\u65b9\u6cd5\uff1a\u4fee\u6539\u4fdd\u8bc1\u5b9a\u4e49\u4e0e\u58f0\u660e\u5b8c\u6210\u4e00\u81f4\u3002</li> <li>\u539f\u56e0\u4e09\uff1a\u4f7f\u7528\u4e86\u9759\u6001\u5e93\uff08.lib\uff09\u4f46\u6ca1\u6709\u5c06\u5e93\u5305\u542b\u8fdb\u9879\u76ee\uff1b\u89e3\u51b3\u65b9\u6cd5\uff1a\u4f7f\u7528<code>#pragma comment(lib,\"......\")</code>\u6216\u5728\u9879\u76ee\u5c5e\u6027\u94fe\u63a5\u680f\u76ee\u914d\u7f6e\u76f8\u5e94\u5c5e\u6027\u3002</li> </ol>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/Visual%20Studio%E6%95%99%E7%A8%8B/#32-fatal-error-lnk1149","title":"3.2 fatal error LNK1149 \u8f93\u51fa\u6587\u4ef6\u540d\u5339\u914d\u8f93\u5165\u6587\u4ef6\u540d","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/Visual%20Studio%E6%95%99%E7%A8%8B/#321","title":"3.2.1 \u62a5\u9519\u53ef\u80fd\u539f\u56e0","text":"<p>\u9519\u628a \u201c\u5c5e\u6027-&gt;\u751f\u6210\u4e8b\u4ef6-&gt;\u540e\u671f\u751f\u6210\u4e8b\u4ef6\u201d\u4e2d\u7684\u547d\u4ee4\u884c\u8bed\u53e5\u5199\u5728\u4e86\u201c\u5c5e\u6027-&gt;\u94fe\u63a5\u5668-&gt;\u547d\u4ee4\u884c\u201d\u4e2d</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/Visual%20Studio%E6%95%99%E7%A8%8B/#33","title":"3.3 \u89e3\u51b3\u65b9\u6cd5","text":"<p>\u5220\u9664\u201c\u5c5e\u6027-&gt;\u94fe\u63a5\u5668-&gt;\u547d\u4ee4\u884c\u201d\u4e2d\u65e0\u6548\u7684\u8bed\u53e5</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/vscode/VsCode%E6%95%99%E7%A8%8B/","title":"VsCode\u6559\u7a0b","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/vscode/VsCode%E6%95%99%E7%A8%8B/#1-vscode","title":"1 Vscode \u5b9e\u7528\u5feb\u6377\u952e","text":"<ol> <li>\u6253\u5f00\u5f53\u524d\u6587\u4ef6\u6240\u5728\u7684\u6587\u4ef6\u5939 [Shift+Alt+R]</li> <li>\u540e\u9000/\u524d\u8fdb\u64cd\u4f5c [Alt+ &lt;- ]/[Alt+ -&gt;]</li> <li>\u6253\u5f00\u547d\u4ee4\u9762\u677f [Ctrl+Shirf+P] [F1]</li> </ol>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/vscode/VsCode%E6%95%99%E7%A8%8B/#2","title":"2 \u8fdc\u7a0b\u5f00\u53d1","text":"<ol> <li>\u5b89\u88c5\u63d2\u4ef6:<code>Remote - SSH</code></li> <li>\u70b9\u51fb\u53f3\u4e0b\u89d2<code>open a remote window</code>\u56fe\u6807\uff0c\u6216\u8005\u952e\u76d8\u8f93\u5165<code>ctrl+shift+p</code>,\u7136\u540e\u8f93\u5165<code>ssh</code>\uff0c\u9009\u62e9<code>open ssh configuration file</code></li> <li>\u586b\u5199\u6253\u5f00\u7684config\u6587\u4ef6</li> </ol>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/vscode/VsCode%E6%95%99%E7%A8%8B/#21-vscode-remote-server-path","title":"2.1 \u91cd\u542f vscode-remote-server path \u4e0d\u751f\u6548","text":"<p>\u539f\u56e0\u662f\u9700\u8981\u8fdc\u7a0b\u4e3b\u673a\u4e0a\u7684 vscode-remote-server \u8fd8\u5b58\u5728\uff0c\u53ea\u9700\u8981 kill \u6389\u5373\u53ef\u3002 1. \u5173\u95ed\u8fdc\u7a0bvscode 2. \u6253\u5f00\u672c\u5730 vscode\uff0c\u6309 F1 \u6253\u5f00\u547d\u4ee4\u641c\u7d22\u680f\uff0c\u8f93\u5165 <code>Remote-SSH: Kill VS Code Server</code>\uff0c\u9009\u62e9\u8981 kill \u7684 vscode-remote-server</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/vscode/VsCode%E6%95%99%E7%A8%8B/#3","title":"3 \u63d2\u4ef6\u4f7f\u7528","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/vscode/VsCode%E6%95%99%E7%A8%8B/#31-clang-format","title":"3.1 Clang-Format","text":"<ul> <li>\u529f\u80fd\uff1a\u4ee3\u7801\u683c\u5f0f\u5316</li> <li>\u914d\u7f6e\uff1a</li> <li>\u5728Executable\u9009\u9879\u4e0b\u8bbe\u7f6eclang-format\u7684\u53ef\u6267\u884c\u6587\u4ef6\u8def\u5f84\u3002\uff08\u5982\u679c\u5df2\u5b89\u88c5C/C++\u63d2\u4ef6\u53ef\u5728\u6b64\u63d2\u4ef6\u5b89\u88c5\u76ee\u5f55\u4e0b\u67e5\u627e\uff0c\u5426\u5219\u9700\u8981\u53bb\u624b\u52a8\u4e0b\u8f7d\uff09</li> <li>\u5728Style\u9009\u9879\u4e0b\u53ef\u9009\u62e9\u683c\u5f0f\u5316\u98ce\u683c\uff08Google\uff0cLLVM\u7b49\uff09\u6216\u8005\u4f7f\u7528.clang-format\u6587\u4ef6\u3002</li> <li>\u9488\u5bf9\u4f7f\u7528.clang-format\u6587\u4ef6\uff0c\u53ef\u901a\u8fc7\u547d\u4ee4\u751f\u6210.clang-format\u6587\u4ef6\uff08clang-format -style=Google -dump-config &gt; .clang-format\uff09</li> <li>.clang-format\u6587\u4ef6\u7f16\u5199  \u53c2\u8003https://clang.llvm.org/docs/ClangFormatStyleOptions.html</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/vscode/VsCode%E6%95%99%E7%A8%8B/#4","title":"4 \u53bb\u9664\u7a7a\u884c","text":"<p>\u4f7f\u7528\u6b64\u6b63\u5219\u8868\u8fbe\u5f0f\u66ff\u6362</p> <pre><code>^\\s*(?=\\r?$)\\n\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/vscode/VsCode%E6%95%99%E7%A8%8B/#5","title":"5 \u95ee\u9898\u6c47\u603b","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/vscode/VsCode%E6%95%99%E7%A8%8B/#51-vscode-server","title":"5.1 vscode server\u4e0b\u8f7d\u5730\u5740","text":"<p>https://update.code.visualstudio.com/commit:${commit_id}/server-linux-x64/stable</p>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/vscode/VsCode%E6%95%99%E7%A8%8B/#52-vscode","title":"5.2 vscode\u8fdc\u7a0b\u8fde\u63a5\u6389\u7ebf\u5361\u987f","text":"<ul> <li>\u539f\u56e01\uff1assh\u7248\u672c\u4e0evscode\u51b2\u7a81</li> <li>\u89e3\u51b3\u529e\u6cd5\uff1a\u66f4\u65b0ssh\u7248\u672c\uff0c\u4e00\u822cgit\u81ea\u5e26ssh\uff0c\u53ef\u4ee5\u901a\u8fc7\u66f4\u65b0git\u6765\u83b7\u53d6ssh\uff0c\u540c\u65f6\u5728\u7cfb\u7edfpath\u4e0a\u5199\u5165ssh\u6240\u5728\u8def\u5f84\uff08\u4e00\u5b9a\u8981\u5c06\u6b64\u8def\u5f84\u5199\u5728\u7cfb\u7edf\u81ea\u5e26ssh\u8def\u5f84\u524d\uff09</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/vscode/VsCode%E6%95%99%E7%A8%8B/#6-cc","title":"6 C/C++\u63d2\u4ef6","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/vscode/clangd%E6%8F%92%E4%BB%B6/","title":"clangd \u63d2\u4ef6","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/vscode/clangd%E6%8F%92%E4%BB%B6/#11-clangd","title":"1.1 \u4e0b\u8f7d clangd \u53ef\u6267\u884c\u6587\u4ef6","text":"<ul> <li>\u4e0b\u8f7d\u5730\u5740</li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/vscode/clangd%E6%8F%92%E4%BB%B6/#12-clangd","title":"1.2 \u5b89\u88c5 clangd \u63d2\u4ef6","text":"<ol> <li>\u5728 vscode \u6269\u5c55\u4e2d\u641c\u7d22 clangd\uff0c\u5b89\u88c5\uff0c\u73b0\u5728\u80fd\u63d0\u793a\u7cfb\u7edf\u5e93\u91cc\u9762\u7684\u5185\u5bb9\u3002</li> </ol>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/vscode/clangd%E6%8F%92%E4%BB%B6/#13-clangd","title":"1.3 \u914d\u7f6e clangd \u5934\u6587\u4ef6\u67e5\u8be2\u76ee\u5f55","text":"<ol> <li>\u5728\u5f53\u524d\u9879\u76ee\u4e0b\uff0c\u65b0\u5efa <code>./vscode/settings.json</code> \u6587\u4ef6\uff0c\u586b\u5165\u5934\u6587\u4ef6\u6240\u5728\u76ee\u5f55\u8def\u5f84</li> <li>\u793a\u4f8b\uff0cclangsd \u4f1a\u4ece\u5f53\u524d\u9879\u76ee\u4e0b\u7684 test \u76ee\u5f55\u548c/opt/include \u67e5\u8be2\u5934\u6587\u4ef6</li> </ol> <pre><code>{\n\"clangd.fallbackFlags\":[\n\"-I${workspaceFolder}/test\",\n\"-I/opt/include\"\n]\n}\n</code></pre>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/vscode/rust-analyzer%20%E6%8F%92%E4%BB%B6/","title":"rust-analyzer \u63d2\u4ef6","text":""},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/vscode/rust-analyzer%20%E6%8F%92%E4%BB%B6/#1","title":"1 \u5b89\u88c5\u4f7f\u7528","text":"<ol> <li>\u6269\u5c55\u4e2d\u641c\u7d22 rust\uff0c\u9009\u62e9 rust-analyzer \u63d2\u4ef6\u5b89\u88c5\u3002</li> <li>\u4f7f\u7528 <code>cargo new hello_cargo</code> \u521b\u5efa\u65b0\u9879\u76ee\u3002vscode \u4e2d\u6253\u5f00 hello_cargo \u76ee\u5f55\uff08\u4e00\u5b9a\u6307\u53ea\u80fd\u6253\u5f00\u6b64\u76ee\u5f55\uff0c\u4e0d\u80fd\u65f6\u4e0a\u5c42\u76ee\u5f55\uff0c\u5426\u5219\uff0c\u63d2\u4ef6\u65e0\u6548\u3002\uff09\u5177\u4f53\u64cd\u4f5c\uff0c\u9009\u62e9 \"File\" -&gt; \"Open Folder..\" -&gt;\u9009\u62e9\u65b0\u5efa\u7684\u00a0<code>hello_cargo</code>\u00a0\u76ee\u5f55\u3002</li> </ol>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/vscode/rust-analyzer%20%E6%8F%92%E4%BB%B6/#2-rust-analyzer-failed-to-discover-workspace","title":"2 rust-analyzer failed to discover workspace \u95ee\u9898","text":"<ul> <li>https://stackoverflow.com/questions/72062935/rust-analyzer-failed-to-discover-workspace-in-vscode</li> <li>\u8be6\u89c1\u5b89\u88c5\u4f7f\u7528\u6b65\u9aa4 2 \u4e2d\u7684 vscode \u5de5\u4f5c\u76ee\u5f55\u8bbe\u7f6e </li> </ul>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/vscode/vscode%E8%BF%9C%E7%A8%8B%E6%8F%92%E4%BB%B6/","title":"\u8fdc\u7a0b\u5f00\u53d1","text":"<ol> <li>\u5b89\u88c5\u63d2\u4ef6: <code>Remote - SSH</code></li> <li>\u70b9\u51fb\u53f3\u4e0b\u89d2 <code>open a remote window</code> \u56fe\u6807\uff0c\u6216\u8005\u952e\u76d8\u8f93\u5165 <code>ctrl+shift+p</code>, \u7136\u540e\u8f93\u5165 <code>ssh</code>\uff0c\u9009\u62e9 <code>open ssh configuration file</code></li> <li>\u586b\u5199\u6253\u5f00\u7684 config \u6587\u4ef6</li> </ol>"},{"location":"Documents/C-Tool/%E7%BC%96%E8%BE%91%E5%99%A8/vscode/vscode%E8%BF%9C%E7%A8%8B%E6%8F%92%E4%BB%B6/#1-vscode-remote-server-path","title":"1 \u91cd\u542f vscode-remote-server path \u4e0d\u751f\u6548","text":"<p>\u539f\u56e0\u662f\u9700\u8981\u8fdc\u7a0b\u4e3b\u673a\u4e0a\u7684 vscode-remote-server \u8fd8\u5b58\u5728\uff0c\u53ea\u9700\u8981 kill \u6389\u5373\u53ef\u3002 1. \u5173\u95ed\u8fdc\u7a0b vscode 2. \u6253\u5f00\u672c\u5730 vscode\uff0c\u6309 F1 \u6253\u5f00\u547d\u4ee4\u641c\u7d22\u680f\uff0c\u8f93\u5165 <code>Remote-SSH: Kill VS Code Server</code>\uff0c\u9009\u62e9\u8981 kill \u7684 vscode-remote-server</p>"},{"location":"Documents/D-Interview/Linux%E7%9F%A5%E8%AF%86/","title":"Linux\u77e5\u8bc6","text":""},{"location":"Documents/D-Interview/Linux%E7%9F%A5%E8%AF%86/#1-linux","title":"1 Linux \u542f\u52a8\u6d41\u7a0b","text":"<p>\u8be6\u89c1 CS_Offer</p>"},{"location":"Documents/D-Interview/Linux%E7%9F%A5%E8%AF%86/#2-linux","title":"2 Linux\u6307\u4ee4","text":"<p>\u8be6\u89c1linuxtools-readthedocs</p>"},{"location":"Documents/D-Interview/Linux%E7%9F%A5%E8%AF%86/#3-selectpollepoll","title":"3 select\u3001poll\u3001epoll\u4e4b\u95f4\u7684\u533a\u522b","text":"<p>\u8d44\u65991 \u8d44\u65992 \u8d44\u65993</p>"},{"location":"Documents/D-Interview/Linux%E7%9F%A5%E8%AF%86/#4-shell","title":"4 \u4ec0\u4e48\u662fshell","text":"<p>Shell \u662f\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\uff0c\u5b83\u8fde\u63a5\u4e86\u7528\u6237\u548c Linux \u5185\u6838\uff0c\u8ba9\u7528\u6237\u80fd\u591f\u66f4\u52a0\u9ad8\u6548\u3001\u5b89\u5168\u3001\u4f4e\u6210\u672c\u5730\u4f7f\u7528 Linux \u5185\u6838\uff0c\u8fd9\u5c31\u662f Shell \u7684\u672c\u8d28\u3002 \u8be6\u89c1shell-c\u8bed\u8a00\u4e2d\u6587\u7f51</p>"},{"location":"Documents/D-Interview/Linux%E7%9F%A5%E8%AF%86/#5","title":"5 \u7ba1\u9053","text":"<p>\u7ba1\u9053\uff08\u82f1\u8bed\uff1aPipeline\uff09\u662f\u4e00\u7cfb\u5217\u5c06\u6807\u51c6\u8f93\u5165\u8f93\u51fa\u94fe\u63a5\u8d77\u6765\u7684\u8fdb\u7a0b\uff0c\u5176\u4e2d\u6bcf\u4e00\u4e2a\u8fdb\u7a0b\u7684\u8f93\u51fa\u88ab\u76f4\u63a5\u4f5c\u4e3a\u4e0b\u4e00\u4e2a\u8fdb\u7a0b\u7684\u8f93\u5165\u3002 \u8be6\u89c1Linux\u7684\u8fdb\u7a0b\u95f4\u901a\u4fe1\uff1a\u7ba1\u9053-\u77e5\u4e4e ::: tip \u7ba1\u9053\u9075\u5faaLinux\u4e00\u5207\u7686\u6587\u4ef6\u7684\u7406\u5ff5\uff0c\u7ba1\u9053\u5b9e\u9645\u4e0a\u4e5f\u662f\u4e00\u4e2a\u6587\u4ef6\uff0c\u4f46\u7ba1\u9053\u4e0d\u5360\u78c1\u76d8\u7a7a\u95f4\uff0c\u800c\u662f\u5b58\u50a8\u5728\u5185\u5b58\u4e0a\u3002\u6240\u4ee5\uff0cLinux\u4e0a\u7684\u7ba1\u9053\u5c31\u662f\u4e00\u4e2a\u64cd\u4f5c\u65b9\u5f0f\u4e3a\u6587\u4ef6\u7684\u5185\u5b58\u7f13\u51b2\u533a\u3002 ::: ::: warning \u7ba1\u9053\u662f\u534a\u53cc\u5de5\u7684 :::</p>"},{"location":"Documents/D-Interview/Linux%E7%9F%A5%E8%AF%86/#6-fock","title":"6 fock\u4e4b\u540e\u5148\u6267\u884c\u5b50\u8fdb\u7a0b\u8fd8\u662f\u7236\u8fdb\u7a0b","text":"<p>\u6807\u51c6\u6ca1\u6709\u89c4\u5b9a\uff0c\u8be6\u89c1\u77e5\u4e4e</p>"},{"location":"Documents/D-Interview/Linux%E7%9F%A5%E8%AF%86/#7-io","title":"7 I/O \u6a21\u578b","text":"<p>Unix \u4e0b\u67095\u79cd\u53ef\u7528\u7684 I/O \u6a21\u578b\uff0c\u5982\u4e0b\uff1a 1. \u963b\u585e\u5f0f I/O 2. \u975e\u963b\u585e\u5f0f I/O 3. I/O \u590d\u7528\uff08select \u548c poll\uff09 4. \u4fe1\u53f7\u9a71\u52a8 I/O 5. \u5f02\u6b65I/O</p>"},{"location":"Documents/D-Interview/Linux%E7%9F%A5%E8%AF%86/#8","title":"8 \u6587\u4ef6","text":""},{"location":"Documents/D-Interview/Linux%E7%9F%A5%E8%AF%86/#81","title":"8.1 \u6587\u4ef6\u7c7b\u578b","text":"<p>Linux\u7684\u6587\u4ef6\u7c7b\u578b\u6709\u4ee5\u4e0b\u51e0\u79cd:</p> \u6587\u4ef6\u7c7b\u578b ls -l \u663e\u793a \u666e\u901a\u6587\u4ef6 - \u76ee\u5f55 d \u7b26\u53f7\u94fe\u63a5 l \u5b57\u7b26\u8bbe\u5907 c \u5757\u8bbe\u5907 b \u5957\u63a5\u5b57 s \u547d\u540d\u7ba1\u9053 p"},{"location":"Documents/D-Interview/Linux%E7%9F%A5%E8%AF%86/#82","title":"8.2 \u8f6f\u94fe\u63a5\u3001\u786c\u94fe\u63a5","text":"<p>\u8f6f\u94fe\u63a5\uff1a 1. \u5f53\u6e90\u6587\u4ef6\u88ab\u5220\u9664\u540e\uff0c\u8f6f\u94fe\u63a5\u4e5f\u5c06\u5931\u6548\uff1b 2. \u5f53\u8f6f\u94fe\u63a5\u88ab\u5220\u9664\uff0c\u4e0d\u5f71\u54cd\u539f\u6587\u4ef6\uff1b</p> <pre><code>\u8f6f\u8fde\u63a5\u662f\u5efa\u7acb\u4e86\u4e00\u4e2aiNode\uff0c\u4e13\u95e8\u7528\u6765\u6307\u5411\u5b9e\u9645\u6587\u4ef6\u7684iNode\uff0c\u6709\u70b9\u50cfWin\u4e0b\u7684\u5feb\u6377\u65b9\u5f0f\u3002\u8f6f\u94fe\u63a5\u4e0e\u786c\u94fe\u63a5\u4e0d\u540c\uff0c\u82e5\u6587\u4ef6\u7528\u6237\u6570\u636e\u5757\u4e2d\u5b58\u653e\u7684\u5185\u5bb9\u662f\u53e6\u4e00\u6587\u4ef6\u7684\u8def\u5f84\u540d\u7684\u6307\u5411\uff0c\u5219\u8be5\u6587\u4ef6\u5c31\u662f\u8f6f\u8fde\u63a5\u3002\u8f6f\u94fe\u63a5\u5c31\u662f\u4e00\u4e2a\u666e\u901a\u6587\u4ef6\uff0c\u53ea\u662f\u6570\u636e\u5757\u5185\u5bb9\u6709\u70b9\u7279\u6b8a\u3002\n</code></pre> <p>\u786c\u94fe\u63a5\uff1a 3. \u5f53\u539f\u6587\u5bb6\u5220\u9664\u540e\uff0c\u786c\u94fe\u63a5\u8fd8\u80fd\u8bbf\u95ee\u6570\u636e\uff1b 4. \u5220\u9664\u786c\u94fe\u63a5\u4e5f\u4e0d\u5f71\u54cd\u539f\u6587\u4ef6\uff1b 5. \u5f53\u539f\u6587\u4ef6\u548c\u6240\u6709\u786c\u94fe\u63a5\u90fd\u88ab\u5220\u9664\u662f\uff0c\u6570\u636e\u624d\u9057\u5931\u3002</p> <pre><code>\u786c\u94fe\u63a5\u548c\u539f\u6587\u4ef6\u7684inode\u662f\u76f8\u540c\u7684\uff0c\u6240\u4ee5\u5373\u4f7f\u5220\u6389\u539f\u6587\u4ef6\uff0c\u786c\u94fe\u63a5\u4e5f\u80fd\u8bbf\u95eeinode\u6307\u5411\u7684\u6570\u636e\u5757\u3002\n</code></pre>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/","title":"\u64cd\u4f5c\u7cfb\u7edf\u77e5\u8bc6","text":"<p>\u603b\u7ed3-gihub</p>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#1-pbc","title":"1 \u8fdb\u7a0b\u3001\u7ebf\u7a0b\u3001\u7ba1\u7a0b\u3001\u534f\u7a0b\u3001PBC","text":""},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#11","title":"1.1 \u8fdb\u7a0b\u6982\u5ff5","text":"<ul> <li>\u8fdb\u7a0b\u662f\u8ba1\u7b97\u673a\u4e2d\u7684\u7a0b\u5e8f\u5173\u4e8e\u67d0\u6570\u636e\u96c6\u5408\u4e0a\u7684\u4e00\u6b21\u8fd0\u884c\u6d3b\u52a8\uff0c\u662f\u7cfb\u7edf\u8fdb\u884c\u8d44\u6e90\u5206\u914d\u548c\u8c03\u5ea6\u7684\u57fa\u672c\u5355\u4f4d\uff0c\u662f\u64cd\u4f5c\u7cfb\u7edf\u7ed3\u6784\u7684\u57fa\u7840\u3002</li> <li>\u8fdb\u7a0b\u662f\u7ebf\u7a0b\u7684\u5bb9\u5668\u3002</li> <li>\u7a0b\u5e8f\u662f\u6307\u4ee4\u3001\u6570\u636e\u53ca\u5176\u7ec4\u7ec7\u5f62\u5f0f\u7684\u63cf\u8ff0\uff0c\u8fdb\u7a0b\u662f\u7a0b\u5e8f\u7684\u5b9e\u4f53\u3002</li> </ul> <pre><code>\u8fdb\u7a0b\u63a7\u5236\u5757 (Process Control Block, PCB) \u63cf\u8ff0\u8fdb\u7a0b\u7684\u57fa\u672c\u4fe1\u606f\u548c\u8fd0\u884c\u72b6\u6001\uff0c\u6240\u8c13\u7684\u521b\u5efa\u8fdb\u7a0b\u548c\u64a4\u9500\u8fdb\u7a0b\uff0c\u90fd\u662f\u6307\u5bf9 PCB \u7684\u64cd\u4f5c\n</code></pre>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#12","title":"1.2 \u7ba1\u7a0b\u6982\u5ff5","text":"<p>\u7ba1\u7a0b(monitor)\u53ea\u662f\u4fdd\u8bc1\u4e86\u540c\u4e00\u65f6\u523b\u53ea\u6709\u4e00\u4e2a\u8fdb\u7a0b\u5728\u7ba1\u7a0b\u5185\u6d3b\u52a8,\u5373\u7ba1\u7a0b\u5185\u5b9a\u4e49\u7684\u64cd\u4f5c\u5728\u540c\u4e00\u65f6\u523b\u53ea\u88ab\u4e00\u4e2a\u8fdb\u7a0b\u8c03\u7528(\u7531\u7f16\u8bd1\u5668\u5b9e\u73b0)\u3002</p> <pre><code>\u8fdb\u7a0b\u5728\u65e0\u6cd5\u7ee7\u7eed\u6267\u884c\u7684\u65f6\u5019\u4e0d\u80fd\u4e00\u76f4\u5360\u7528\u7ba1\u7a0b\uff0c\u5426\u5219\u5176\u5b83\u8fdb\u7a0b\u6c38\u8fdc\u4e0d\u80fd\u4f7f\u7528\u7ba1\u7a0b\u3002\n\u7ba1\u7a0b\u5f15\u5165\u4e86 \u6761\u4ef6\u53d8\u91cf \u4ee5\u53ca\u76f8\u5173\u7684\u64cd\u4f5c\uff1await() \u548c signal() \u6765\u5b9e\u73b0\u540c\u6b65\u64cd\u4f5c\u3002\u5bf9\u6761\u4ef6\u53d8\u91cf\u6267\u884c wait() \u64cd\u4f5c\u4f1a\u5bfc\u81f4\u8c03\u7528\u8fdb\u7a0b\u963b\u585e\uff0c\u628a\u7ba1\u7a0b\u8ba9\u51fa\u6765\u7ed9\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u6301\u6709\u3002signal() \u64cd\u4f5c\u7528\u4e8e\u5524\u9192\u88ab\u963b\u585e\u7684\u8fdb\u7a0b\u3002\n</code></pre>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#13","title":"1.3 \u534f\u7a0b\u6982\u5ff5","text":"<p>\u534f\u7a0b\u53ef\u4ee5\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\u6682\u505c\u800c\u53bb\u6267\u884c\u5176\u5b83\u4efb\u52a1\uff0c\u5728\u9002\u5f53\u7684\u65f6\u5019\u518d\u56de\u6765\u7ee7\u7eed\u6267\u884c\u3002\u534f\u7a0b\u4e0d\u662f\u88ab\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u6240\u7ba1\u7406\uff0c\u800c\u5b8c\u5168\u662f\u7531\u7a0b\u5e8f\u6240\u63a7\u5236\uff08\u4e5f\u5c31\u662f\u5728\u7528\u6237\u6001\u6267\u884c\uff09\u3002\u8fd9\u6837\u5e26\u6765\u7684\u597d\u5904\u5c31\u662f\u6027\u80fd\u5f97\u5230\u4e86\u5f88\u5927\u7684\u63d0\u5347\uff0c\u4e0d\u4f1a\u50cf\u7ebf\u7a0b\u90a3\u6837\u9700\u8981\u4e0a\u4e0b\u6587\u5207\u6362\u6765\u6d88\u8017\u8d44\u6e90\uff0c\u56e0\u6b64\u534f\u7a0b\u7684\u5f00\u9500\u8fdc\u8fdc\u5c0f\u4e8e\u7ebf\u7a0b\u7684\u5f00\u9500\u3002</p>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#14","title":"1.4 \u8fdb\u7a0b\u4e0e\u7a0b\u5e8f\u6bd4\u8f83","text":"<p>\u8fdb\u7a0b\u4e0e\u5e94\u7528\u7a0b\u5e8f\u7684\u533a\u522b\u5728\u4e8e\u5e94\u7528\u7a0b\u5e8f\u4f5c\u4e3a\u4e00\u4e2a\u9759\u6001\u6587\u4ef6\u5b58\u50a8\u5728\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u786c\u76d8\u7b49\u5b58\u50a8\u7a7a\u95f4\u4e2d\uff0c\u800c\u8fdb\u7a0b\u5219\u662f\u5904\u4e8e\u52a8\u6001\u6761\u4ef6\u4e0b\u7531\u64cd\u4f5c\u7cfb\u7edf\u7ef4\u62a4\u7684\u7cfb\u7edf\u8d44\u6e90\u7ba1\u7406\u5b9e\u4f53\u3002</p>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#15","title":"1.5 \u8fdb\u7a0b\u4e0e\u7ebf\u7a0b\u6bd4\u8f83","text":"<ul> <li>\u8fdb\u7a0b\u662f\u7cfb\u7edf\u8fdb\u884c\u8d44\u6e90\u5206\u914d\u7684\u57fa\u672c\u5355\u4f4d\uff1b\u7ebf\u7a0b\u662f\u8fdb\u7a0b\u7684\u4e00\u4e2a\u5b9e\u4f53\uff0c\u662fCPU\u8c03\u5ea6\u548c\u5206\u6d3e\u7684\u57fa\u672c\u5355\u4f4d\uff0c\u5b83\u662f\u6bd4\u8fdb\u7a0b\u66f4\u5c0f\u7684\u80fd\u72ec\u7acb\u8fd0\u884c\u7684\u57fa\u672c\u5355\u4f4d\u3002</li> <li>\u540c\u4e00\u4e2a\u8fdb\u7a0b\u4e0b\u521b\u5efa\u7684\u7ebf\u7a0b\u5171\u4eab\u8fdb\u7a0b\u8d44\u6e90\u3002</li> <li>\u4e00\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u521b\u5efa\u6216\u5220\u9664\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u3002</li> <li>\u7ebf\u7a0b\u521b\u5efa\u5207\u6362\u5f00\u9500\u6bd4\u8fdb\u7a0b\u5c0f\u3002</li> </ul>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#16-ipc","title":"1.6 \u8fdb\u7a0b\u901a\u4fe1\uff08IPC\uff09","text":"<ol> <li>\u4fe1\u53f7\u91cf\uff1a\u5b83\u662f\u4e00\u4e2a\u8ba1\u6570\u5668\uff0c\u7528\u4e8e\u4e3a\u591a\u4e2a\u8fdb\u7a0b\u63d0\u4f9b\u5bf9\u5171\u4eab\u6570\u636e\u5bf9\u8c61\u7684\u8bbf\u95ee</li> <li>\u7ba1\u9053\u3001FIFO\u547d\u540d\u7ba1\u9053</li> <li>\u6d88\u606f\u961f\u5217</li> <li>\u5171\u4eab\u5185\u5b58</li> <li>\u5957\u63a5\u5b57(\u53ef\u7528\u4e8e\u4e0d\u540c\u673a\u5668\u95f4\u7684\u8fdb\u7a0b\u901a\u4fe1)</li> </ol> <pre><code>\u5171\u4eab\u5185\u5b58\u662f\u6700\u5feb\u7684\u8fdb\u7a0b\u901a\u4fe1\u65b9\u5f0f\uff0c\u56e0\u4e3a\u6570\u636e\u4e0d\u9700\u8981\u5728\u8fdb\u7a0b\u4e4b\u95f4\u590d\u5236\u3002\n\u6d88\u606f\u961f\u5217\u63d0\u4f9b\u4e86\u5f02\u6b65\u8fdb\u7a0b\u901a\u4fe1\u65b9\u5f0f\uff0c\u6d88\u606f\u7684\u53d1\u9001\u8005\u548c\u63a5\u6536\u8005\u4e0d\u9700\u8981\u540c\u65f6\u4e0e\u6d88\u606f\u961f\u5217\u4ea4\u4e92\u3002\u6d88\u606f\u4f1a\u4fdd\u5b58\u5728\u961f\u5217\u4e2d\uff0c\u76f4\u5230\u63a5\u6536\u8005\u53d6\u56de\u5b83\u3002\n</code></pre> <pre><code>title: \u533f\u540d\u7ba1\u9053\u548c\u6709\u540d\u7ba1\u9053\u603b\u7ed3\n1. \u7ba1\u9053\u662f\u7279\u6b8a\u7c7b\u578b\u7684\u6587\u4ef6\uff0c\u5728\u6ee1\u8db3\u5148\u5165\u5148\u51fa\u7684\u539f\u5219\u6761\u4ef6\u4e0b\u53ef\u4ee5\u8fdb\u884c\u8bfb\u5199\uff0c\u4f46\u4e0d\u80fd\u8fdb\u884c\u5b9a\u4f4d\u8bfb\u5199\u3002\n2. \u533f\u540d\u7ba1\u9053\u662f\u5355\u5411\u7684\uff0c\u53ea\u80fd\u5728\u6709\u4eb2\u7f18\u5173\u7cfb\u7684\u8fdb\u7a0b\u95f4\u901a\u4fe1\uff1b\u6709\u540d\u7ba1\u9053\u4ee5\u78c1\u76d8\u6587\u4ef6\u7684\u65b9\u5f0f\u5b58\u5728\uff0c\u53ef\u4ee5\u5b9e\u73b0\u672c\u673a\u4efb\u610f\u4e24\u4e2a\u8fdb\u7a0b\u901a\u4fe1\u3002\n3. \u65e0\u540d\u7ba1\u9053\u963b\u585e\u95ee\u9898\uff1a\u65e0\u540d\u7ba1\u9053\u65e0\u9700\u663e\u793a\u6253\u5f00\uff0c\u521b\u5efa\u65f6\u76f4\u63a5\u8fd4\u56de\u6587\u4ef6\u63cf\u8ff0\u7b26\uff0c\u5728\u8bfb\u5199\u65f6\u9700\u8981\u786e\u5b9a\u5bf9\u65b9\u7684\u5b58\u5728\uff0c\u5426\u5219\u5c06\u9000\u51fa\u3002\u5982\u679c\u5f53\u524d\u8fdb\u7a0b\u5411\u65e0\u540d\u7ba1\u9053\u7684\u4e00\u7aef\u5199\u6570\u636e\uff0c\u5fc5\u987b\u786e\u5b9a\u53e6\u4e00\u7aef\u6709\u67d0\u4e00\u8fdb\u7a0b\u3002\u5982\u679c\u5199\u5165\u65e0\u540d\u7ba1\u9053\u7684\u6570\u636e\u8d85\u8fc7\u5176\u6700\u5927\u503c\uff0c\u5199\u64cd\u4f5c\u5c06\u963b\u585e\uff0c\u5982\u679c\u7ba1\u9053\u4e2d\u6ca1\u6709\u6570\u636e\uff0c\u8bfb\u64cd\u4f5c\u5c06\u963b\u585e\uff0c\u5982\u679c\u7ba1\u9053\u53d1\u73b0\u53e6\u4e00\u7aef\u65ad\u5f00\uff0c\u5c06\u81ea\u52a8\u9000\u51fa\u3002\n4. \u6709\u540d\u7ba1\u9053\u963b\u585e\u95ee\u9898\uff1a\u6709\u540d\u7ba1\u9053\u5728\u6253\u5f00\u65f6\u9700\u8981\u786e\u8ba4\u5bf9\u65b9\u7684\u5b58\u5728\uff0c\u5426\u5219\u5c06\u963b\u585e\u3002\u5373\u4ee5\u8bfb\u65b9\u5f0f\u6253\u5f00\u67d0\u7ba1\u9053\uff0c\u5728\u6b64\u4e4b\u524d\u5fc5\u987b\u4e00\u4e2a\u8fdb\u7a0b\u4ee5\u5199\u65b9\u5f0f\u6253\u5f00\u7ba1\u9053\uff0c\u5426\u5219\u963b\u585e\u3002\u6b64\u5916\uff0c\u53ef\u4ee5\u4ee5\u8bfb\u5199\uff08O_RDWR\uff09\u6a21\u5f0f\u6253\u5f00\u6709\u540d\u7ba1\u9053\uff0c\u5373\u5f53\u524d\u8fdb\u7a0b\u8bfb\uff0c\u5f53\u524d\u8fdb\u7a0b\u5199\uff0c\u4e0d\u4f1a\u963b\u585e\u3002\n</code></pre>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#17","title":"1.7 \u8fdb\u7a0b\u540c\u6b65","text":"<ol> <li>\u4fe1\u53f7\u91cf</li> <li>\u4e34\u754c\u533a</li> <li>\u7ba1\u7a0b</li> </ol>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#18","title":"1.8 \u7ebf\u7a0b\u540c\u6b65\u65b9\u5f0f","text":"<p>\u7ebf\u7a0b\u540c\u6b65\u662f\u4e3a\u4e86\u786e\u4fdd\u7ebf\u7a0b\u5b89\u5168\u3002 1. \u4e92\u65a5\u91cf\uff1a\u786e\u4fdd\u540c\u4e00\u65f6\u95f4\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u8bbf\u95ee\u8d44\u6e90\uff0c\u672c\u8d28\u4e0a\u662f\u4e00\u628a\u9501\u3002 2. \u4fe1\u53f7\u91cf\uff1a\u5b83\u5141\u8bb8\u540c\u4e00\u65f6\u523b\u591a\u4e2a\u7ebf\u7a0b\u8bbf\u95ee\u540c\u4e00\u8d44\u6e90\uff0c\u4f46\u662f\u9700\u8981\u63a7\u5236\u540c\u4e00\u65f6\u523b\u8bbf\u95ee\u6b64\u8d44\u6e90\u7684\u6700\u5927\u7ebf\u7a0b\u6570\u91cf\u3002 3. \u4e8b\u4ef6\uff08\u4fe1\u53f7\uff09\uff1a\u901a\u8fc7\u901a\u77e5\u64cd\u4f5c\u7684\u65b9\u5f0f\u6765\u4fdd\u6301\u591a\u7ebf\u7a0b\u540c\u6b65\uff0c\u8fd8\u53ef\u4ee5\u65b9\u4fbf\u7684\u5b9e\u73b0\u591a\u7ebf\u7a0b\u4f18\u5148\u7ea7\u7684\u6bd4\u8f83\u64cd\u4f5c\u3002 4. \u6761\u4ef6\u53d8\u91cf 5. \u8bfb\u5199\u9501 6. \u81ea\u65cb\u9501 7. \u5c4f\u969c</p>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#19","title":"1.9 \u8fdb\u7a0b\u95f4\u5207\u6362","text":"<p>\u5f53\u64cd\u4f5c\u7cfb\u7edf\u628a\u63a7\u5236\u6743\u7531\u5f53\u524d\u8fdb\u7a0b\u8f6c\u79fb\u5230\u65b0\u8fdb\u7a0b\u65f6\uff0c\u9996\u5148\u9700\u8981\u8fdb\u884c\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u4fdd\u5b58\u5f53\u524d\u8fdb\u7a0b\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\uff0c\u6062\u590d\u65b0\u8fdb\u7a0b\u4e0a\u4e0b\u6587\u4fe1\u606f\uff0c\u7136\u540e\u5c06\u63a7\u5236\u6743\u8f6c\u79fb\u7ed9\u65b0\u8fdb\u7a0b\uff0c\u65b0\u8fdb\u7a0b\u4ece\u4e0a\u6b21\u505c\u6b62\u7684\u5730\u65b9\u7ee7\u7eed\u6267\u884c\u3002</p> <pre><code>\u8fd9\u91cc\u6240\u8bf4\u7684\u4e0a\u4e0b\u6587\u6307\u8fdb\u7a0b\u8fd0\u884c\u6240\u9700\u7684\u5168\u90e8\u72b6\u6001\u4fe1\u606f\uff0c\u5305\u62ecPC\uff08\u7a0b\u5e8f\u8ba1\u6570\u5668\uff09\u548c\u5bc4\u5b58\u5668\u6587\u4ef6\u5f53\u524d\u503c\uff0c\u4ee5\u53ca\u4e3b\u5b58\u5185\u5bb9\uff08\u5982\u4ee3\u7801\u3001\u6570\u636e\uff09\u3002\n</code></pre>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#110","title":"1.10 \u50f5\u5c38\u8fdb\u7a0b","text":"<ul> <li>\u5b9a\u4e49\uff1a\u4e00\u4e2a\u8fdb\u7a0b\u4f7f\u7528fork\u521b\u5efa\u5b50\u8fdb\u7a0b\uff0c\u5982\u679c\u5b50\u8fdb\u7a0b\u9000\u51fa\uff0c\u800c\u7236\u8fdb\u7a0b\u5e76\u6ca1\u6709\u8c03\u7528wait\u6216waitpid\u83b7\u53d6\u5b50\u8fdb\u7a0b\u7684\u72b6\u6001\u4fe1\u606f\uff0c\u90a3\u4e48\u5b50\u8fdb\u7a0b\u7684\u8fdb\u7a0b\u63cf\u8ff0\u7b26\u4ecd\u7136\u4fdd\u5b58\u5728\u7cfb\u7edf\u4e2d\u3002\u8fd9\u79cd\u8fdb\u7a0b\u79f0\u4e4b\u4e3a\u50f5\u5c38\u8fdb\u7a0b\u3002</li> <li>\u5371\u5bb3\uff1a\u5728\u6bcf\u4e2a\u8fdb\u7a0b\u9000\u51fa\u7684\u65f6\u5019,\u5185\u6838\u91ca\u653e\u8be5\u8fdb\u7a0b\u6240\u6709\u7684\u8d44\u6e90,\u5305\u62ec\u6253\u5f00\u7684\u6587\u4ef6,\u5360\u7528\u7684\u5185\u5b58\u7b49\u3002 \u4f46\u662f\u4ecd\u7136\u4e3a\u5176\u4fdd\u7559\u4e00\u5b9a\u7684\u4fe1\u606f(\u5305\u62ec\u8fdb\u7a0b\u53f7the process ID,\u9000\u51fa\u72b6\u6001the termination status of the process,\u8fd0\u884c\u65f6\u95f4the amount of CPU time taken by the process\u7b49)\u3002\u76f4\u5230\u7236\u8fdb\u7a0b\u901a\u8fc7wait / waitpid\u6765\u53d6\u65f6\u624d\u91ca\u653e\u3002 \u4f46\u8fd9\u6837\u5c31\u5bfc\u81f4\u4e86\u95ee\u9898\uff0c\u5982\u679c\u8fdb\u7a0b\u4e0d\u8c03\u7528wait / waitpid\u7684\u8bdd\uff0c \u90a3\u4e48\u4fdd\u7559\u7684\u90a3\u6bb5\u4fe1\u606f\u5c31\u4e0d\u4f1a\u91ca\u653e\uff0c\u5176\u8fdb\u7a0b\u53f7\u5c31\u4f1a\u4e00\u76f4\u88ab\u5360\u7528\uff0c\u4f46\u662f\u7cfb\u7edf\u6240\u80fd\u4f7f\u7528\u7684\u8fdb\u7a0b\u53f7\u662f\u6709\u9650\u7684\uff0c\u5982\u679c\u5927\u91cf\u7684\u4ea7\u751f\u50f5\u6b7b\u8fdb\u7a0b\uff0c\u5c06\u56e0\u4e3a\u6ca1\u6709\u53ef\u7528\u7684\u8fdb\u7a0b\u53f7\u800c\u5bfc\u81f4\u7cfb\u7edf\u4e0d\u80fd\u4ea7\u751f\u65b0\u7684\u8fdb\u7a0b. \u6b64\u5373\u4e3a\u50f5\u5c38\u8fdb\u7a0b\u7684\u5371\u5bb3\uff0c\u5e94\u5f53\u907f\u514d\u3002</li> <li>\u89e3\u51b3\u65b9\u6cd5\uff1a\u6740\u6b7b\u7236\u8fdb\u7a0b\uff0c\u4f7f\u5b50\u8fdb\u7a0b\u7531init\u8fdb\u7a0b\u8d1f\u8d23\u3002</li> </ul>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#111","title":"1.11 \u5b64\u513f\u8fdb\u7a0b","text":"<ul> <li>\u5b9a\u4e49\uff1a\u4e00\u4e2a\u7236\u8fdb\u7a0b\u9000\u51fa\uff0c\u800c\u5b83\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u5b50\u8fdb\u7a0b\u8fd8\u5728\u8fd0\u884c\uff0c\u90a3\u4e48\u90a3\u4e9b\u5b50\u8fdb\u7a0b\u5c06\u6210\u4e3a\u5b64\u513f\u8fdb\u7a0b\u3002\u5b64\u513f\u8fdb\u7a0b\u5c06\u88abinit\u8fdb\u7a0b(\u8fdb\u7a0b\u53f7\u4e3a1)\u6240\u6536\u517b\uff0c\u5e76\u7531init\u8fdb\u7a0b\u5bf9\u5b83\u4eec\u5b8c\u6210\u72b6\u6001\u6536\u96c6\u5de5\u4f5c\u3002</li> <li>\u5371\u5bb3\uff1a\u5b64\u513f\u8fdb\u7a0b\u6ca1\u6709\u5371\u5bb3\u3002</li> </ul>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#112","title":"1.12 \u8fdb\u7a0b\u7ec4\u3001\u4f1a\u8bdd","text":"<p>\u8fdb\u7a0b\u7ec4\u662f\u8fdb\u7a0b\u7684\u96c6\u5408\uff0c\u4f1a\u8bdd\u662f\u8fdb\u7a0b\u7ec4\u7684\u96c6\u5408\u3002 \u6bcf\u4e00\u4e2a\u8fdb\u7a0b\u90fd\u6709\u4e00\u4e2a\u8fdb\u7a0b\u7ec4\uff1b\u6bcf\u4e00\u4e2a\u8fdb\u7a0b\u7ec4\u90fd\u6709\u4e00\u4e2a\u7ec4\u957f\u8fdb\u7a0b\uff0c\u7ec4\u957f\u8fdb\u7a0b\u9000\u51fa\u4e0d\u5f71\u54cd\u8fdb\u7a0b\u7ec4\u6d88\u5931\uff1b\u53ea\u6709\u5f53\u6700\u540e\u4e00\u4e2a\u8fdb\u7a0b\u9000\u51fa\uff0c\u8fdb\u7a0b\u7ec4\u624d\u6d88\u5931\u3002\u8fdb\u7a0b\u7ec4\u4e2d\u6700\u540e\u4e00\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u7ec8\u6b62\u6216\u8005\u8f6c\u79fb\u5230\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u7ec4\u4e2d\u3002 \u4e00\u4e2a\u4f1a\u8bdd\u5f00\u59cb\u4e8e\u7528\u6237\u767b\u5f55\uff0c\u7ec8\u6b62\u4e8e\u7528\u6237\u9000\u51fa\uff0c\u5728\u6b64\u671f\u95f4\u8be5\u7528\u6237\u8fd0\u884c\u7684\u6240\u6709\u8fdb\u7a0b\u90fd\u5c5e\u4e8e\u8fd9\u4e2a\u4f1a\u8bdd\u671f\u3002</p>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#113","title":"1.13 \u63a7\u5236\u7ec8\u7aef","text":"<p>\u8be6\u89c1 http://shareinto.github.io/2016/11/17/linux-terminal/</p>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#114","title":"1.14 \u5b88\u62a4\u8fdb\u7a0b","text":"<ul> <li>\u5b9a\u4e49\uff1a\u5b88\u62a4\u8fdb\u7a0b\uff0c\u4e5f\u5373\u901a\u5e38\u6240\u8bf4\u7684 Daemon \u8fdb\u7a0b\uff0c\u662f Linux \u4e0b\u4e00\u79cd\u7279\u6b8a\u7684\u540e\u53f0\u670d\u52a1\u8fdb\u7a0b\uff0c\u5b83\u72ec\u7acb\u4e8e\u63a7\u5236\u7ec8\u7aef\u5e76\u4e14\u5468\u671f\u6027\u7684\u6267\u884c\u67d0\u79cd\u4efb\u52a1\u6216\u8005\u7b49\u5f85\u5904\u7406\u67d0\u4e9b\u53d1\u751f\u7684\u4e8b\u4ef6\u3002\u5b88\u62a4\u8fdb\u7a0b\u901a\u5e38\u5728\u7cfb\u7edf\u5f15\u5bfc\u88c5\u5165\u65f6\u542f\u52a8\uff0c\u5728\u7cfb\u7edf\u5173\u95ed\u65f6\u7ec8\u6b62\u3002Linux \u7cfb\u7edf\u4e0b\u5927\u591a\u6570\u670d\u52a1\u90fd\u662f\u901a\u8fc7\u5b88\u62a4\u8fdb\u7a0b\u5b9e\u73b0\u7684\uff0c\u5b88\u62a4\u8fdb\u7a0b\u7684\u540d\u79f0\u901a\u5e38\u4ee5 d \u7ed3\u5c3e\uff0c\u5982 httpd\u3001crond\u3001mysqld\u7b49\u3002</li> </ul>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#115","title":"1.15 \u521b\u5efa\u5b88\u62a4\u8fdb\u7a0b\u7684\u6b65\u9aa4","text":"<p>\u8be6\u89c1http://blog.chinaunix.net/uid-21411227-id-1826736.html</p>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#116-pcb","title":"1.16 PCB\u6982\u5ff5","text":"<p>\u4e3a\u4e86\u63cf\u8ff0\u63a7\u5236\u8fdb\u7a0b\u7684\u8fd0\u884c\uff0c\u7cfb\u7edf\u4e2d\u5b58\u653e\u8fdb\u7a0b\u7684\u7ba1\u7406\u548c\u63a7\u5236\u4fe1\u606f\u7684\u6570\u636e\u7ed3\u6784\u79f0\u4e3a\u8fdb\u7a0b\u63a7\u5236\u5757\uff08PCB Process Control Block\uff09\uff0c\u5b83\u662f\u8fdb\u7a0b\u5b9e\u4f53\u7684\u4e00\u90e8\u5206\uff0c\u662f\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u6700\u91cd\u8981\u7684\u8bb0\u5f55\u6027\u6570\u636e\u7ed3\u6784\u3002\u5b83\u662f\u8fdb\u7a0b\u7ba1\u7406\u548c\u63a7\u5236\u7684\u6700\u91cd\u8981\u7684\u6570\u636e\u7ed3\u6784\uff0c\u6bcf\u4e00\u4e2a\u8fdb\u7a0b\u5747\u6709\u4e00\u4e2aPCB\uff0c\u5728\u521b\u5efa\u8fdb\u7a0b\u65f6\uff0c\u5efa\u7acbPCB\uff0c\u4f34\u968f\u8fdb\u7a0b\u8fd0\u884c\u7684\u5168\u8fc7\u7a0b\uff0c\u76f4\u5230\u8fdb\u7a0b\u64a4\u6d88\u800c\u64a4\u6d88\u3002 - Linux\u4e0bPCB\u662ftask_struct\u7ed3\u6784\u4f53\uff0c\u542b\u4ee5\u4e0b\u4fe1\u606f</p> <pre><code>1. \u6807\u793a\u7b26\uff1a \u63cf\u8ff0\u672c\u8fdb\u7a0b\u7684\u552f\u4e00\u6807\u8bc6\u7b26\uff0c\u7528\u6765\u533a\u522b\u5176\u4ed6\u8fdb\u7a0b\u3002\n2. \u72b6\u6001 \uff1a\u4efb\u52a1\u72b6\u6001\uff0c\u9000\u51fa\u4ee3\u7801\uff0c\u9000\u51fa\u4fe1\u53f7\u7b49\u3002\n3. \u4f18\u5148\u7ea7 \uff1a\u76f8\u5bf9\u4e8e\u5176\u4ed6\u8fdb\u7a0b\u7684\u4f18\u5148\u7ea7\u3002\n4. \u7a0b\u5e8f\u8ba1\u6570\u5668\uff1a\u7a0b\u5e8f\u4e2d\u5373\u5c06\u88ab\u6267\u884c\u7684\u4e0b\u4e00\u6761\u6307\u4ee4\u7684\u5730\u5740\u3002\n5. \u5185\u5b58\u6307\u9488\uff1a\u5305\u62ec\u7a0b\u5e8f\u4ee3\u7801\u548c\u8fdb\u7a0b\u76f8\u5173\u6570\u636e\u7684\u6307\u9488\uff0c\u8fd8\u6709\u548c\u5176\u4ed6\u8fdb\u7a0b\u5171\u4eab\u7684\u5185\u5b58\u5757\u7684\u6307\u9488\u3002\n6. \u4e0a\u4e0b\u6587\u6570\u636e\uff1a\u8fdb\u7a0b\u6267\u884c\u65f6\u5904\u7406\u5668\u7684\u5bc4\u5b58\u5668\u4e2d\u7684\u6570\u636e\u3002\n7. I/O\u72b6\u6001\u4fe1\u606f\uff1a\u5305\u62ec\u663e\u793a\u7684I/O\u8bf7\u6c42,\u5206\u914d\u7ed9\u8fdb\u7a0b\u7684I/O\u8bbe\u5907\u548c\u88ab\u8fdb\u7a0b\u4f7f\u7528\u7684\u6587\u4ef6\u5217\u8868\u3002\n8. \u8bb0\u8d26\u4fe1\u606f\uff1a\u53ef\u80fd\u5305\u62ec\u5904\u7406\u5668\u65f6\u95f4\u603b\u548c\uff0c\u4f7f\u7528\u7684\u65f6\u949f\u6570\u603b\u548c\uff0c\u65f6\u95f4\u9650\u5236\uff0c\u8bb0\u8d26\u53f7\u7b49\u3002\n</code></pre> <ul> <li>task_struct\u6570\u636e\u7ed3\u6784\u53ca\u6ce8\u91ca\u5982\u4e0b</li> </ul> <pre><code>struct task_struct {\nvolatile long state;  //\u8bf4\u660e\u4e86\u8be5\u8fdb\u7a0b\u662f\u5426\u53ef\u4ee5\u6267\u884c,\u8fd8\u662f\u53ef\u4e2d\u65ad\u7b49\u4fe1\u606f\nunsigned long flags;  //Flage \u662f\u8fdb\u7a0b\u53f7,\u5728\u8c03\u7528fork()\u65f6\u7ed9\u51fa\nint sigpending;    //\u8fdb\u7a0b\u4e0a\u662f\u5426\u6709\u5f85\u5904\u7406\u7684\u4fe1\u53f7\nmm_segment_t addr_limit; //\u8fdb\u7a0b\u5730\u5740\u7a7a\u95f4,\u533a\u5206\u5185\u6838\u8fdb\u7a0b\u4e0e\u666e\u901a\u8fdb\u7a0b\u5728\u5185\u5b58\u5b58\u653e\u7684\u4f4d\u7f6e\u4e0d\u540c\n//0-0xBFFFFFFF for user-thead\n//0-0xFFFFFFFF for kernel-thread\n//\u8c03\u5ea6\u6807\u5fd7,\u8868\u793a\u8be5\u8fdb\u7a0b\u662f\u5426\u9700\u8981\u91cd\u65b0\u8c03\u5ea6,\u82e5\u975e0,\u5219\u5f53\u4ece\u5185\u6838\u6001\u8fd4\u56de\u5230\u7528\u6237\u6001,\u4f1a\u53d1\u751f\u8c03\u5ea6\nvolatile long need_resched;\nint lock_depth;  //\u9501\u6df1\u5ea6\nlong nice;       //\u8fdb\u7a0b\u7684\u57fa\u672c\u65f6\u95f4\u7247\n//\u8fdb\u7a0b\u7684\u8c03\u5ea6\u7b56\u7565,\u6709\u4e09\u79cd,\u5b9e\u65f6\u8fdb\u7a0b:SCHED_FIFO,SCHED_RR, \u5206\u65f6\u8fdb\u7a0b:SCHED_OTHER\nunsigned long policy;\nstruct mm_struct *mm; //\u8fdb\u7a0b\u5185\u5b58\u7ba1\u7406\u4fe1\u606f\nint processor;\n//\u82e5\u8fdb\u7a0b\u4e0d\u5728\u4efb\u4f55CPU\u4e0a\u8fd0\u884c, cpus_runnable \u7684\u503c\u662f0\uff0c\u5426\u5219\u662f1 \u8fd9\u4e2a\u503c\u5728\u8fd0\u884c\u961f\u5217\u88ab\u9501\u65f6\u66f4\u65b0\nunsigned long cpus_runnable, cpus_allowed;\nstruct list_head run_list; //\u6307\u5411\u8fd0\u884c\u961f\u5217\u7684\u6307\u9488\nunsigned long sleep_time;  //\u8fdb\u7a0b\u7684\u7761\u7720\u65f6\u95f4\n//\u7528\u4e8e\u5c06\u7cfb\u7edf\u4e2d\u6240\u6709\u7684\u8fdb\u7a0b\u8fde\u6210\u4e00\u4e2a\u53cc\u5411\u5faa\u73af\u94fe\u8868, \u5176\u6839\u662finit_task\nstruct task_struct *next_task, *prev_task;\nstruct mm_struct *active_mm;\nstruct list_head local_pages;       //\u6307\u5411\u672c\u5730\u9875\u9762      \nunsigned int allocation_order, nr_local_pages;\nstruct linux_binfmt *binfmt;  //\u8fdb\u7a0b\u6240\u8fd0\u884c\u7684\u53ef\u6267\u884c\u6587\u4ef6\u7684\u683c\u5f0f\nint exit_code, exit_signal;\nint pdeath_signal;     //\u7236\u8fdb\u7a0b\u7ec8\u6b62\u65f6\u5411\u5b50\u8fdb\u7a0b\u53d1\u9001\u7684\u4fe1\u53f7\nunsigned long personality;\n//Linux\u53ef\u4ee5\u8fd0\u884c\u7531\u5176\u4ed6UNIX\u64cd\u4f5c\u7cfb\u7edf\u751f\u6210\u7684\u7b26\u5408iBCS2\u6807\u51c6\u7684\u7a0b\u5e8f\nint did_exec:1; pid_t pid;    //\u8fdb\u7a0b\u6807\u8bc6\u7b26,\u7528\u6765\u4ee3\u8868\u4e00\u4e2a\u8fdb\u7a0b\npid_t pgrp;   //\u8fdb\u7a0b\u7ec4\u6807\u8bc6,\u8868\u793a\u8fdb\u7a0b\u6240\u5c5e\u7684\u8fdb\u7a0b\u7ec4\npid_t tty_old_pgrp;  //\u8fdb\u7a0b\u63a7\u5236\u7ec8\u7aef\u6240\u5728\u7684\u7ec4\u6807\u8bc6\npid_t session;  //\u8fdb\u7a0b\u7684\u4f1a\u8bdd\u6807\u8bc6\npid_t tgid;\nint leader;     //\u8868\u793a\u8fdb\u7a0b\u662f\u5426\u4e3a\u4f1a\u8bdd\u4e3b\u7ba1\nstruct task_struct *p_opptr,*p_pptr,*p_cptr,*p_ysptr,*p_osptr;\nstruct list_head thread_group;   //\u7ebf\u7a0b\u94fe\u8868\nstruct task_struct *pidhash_next; //\u7528\u4e8e\u5c06\u8fdb\u7a0b\u94fe\u5165HASH\u8868\nstruct task_struct **pidhash_pprev;\nwait_queue_head_t wait_chldexit;  //\u4f9bwait4()\u4f7f\u7528\nstruct completion *vfork_done;  //\u4f9bvfork() \u4f7f\u7528\nunsigned long rt_priority; //\u5b9e\u65f6\u4f18\u5148\u7ea7\uff0c\u7528\u5b83\u8ba1\u7b97\u5b9e\u65f6\u8fdb\u7a0b\u8c03\u5ea6\u65f6\u7684weight\u503c\n\n//it_real_value\uff0cit_real_incr\u7528\u4e8eREAL\u5b9a\u65f6\u5668\uff0c\u5355\u4f4d\u4e3ajiffies, \u7cfb\u7edf\u6839\u636eit_real_value\n//\u8bbe\u7f6e\u5b9a\u65f6\u5668\u7684\u7b2c\u4e00\u4e2a\u7ec8\u6b62\u65f6\u95f4. \u5728\u5b9a\u65f6\u5668\u5230\u671f\u65f6\uff0c\u5411\u8fdb\u7a0b\u53d1\u9001SIGALRM\u4fe1\u53f7\uff0c\u540c\u65f6\u6839\u636e\n//it_real_incr\u91cd\u7f6e\u7ec8\u6b62\u65f6\u95f4\uff0cit_prof_value\uff0cit_prof_incr\u7528\u4e8eProfile\u5b9a\u65f6\u5668\uff0c\u5355\u4f4d\u4e3ajiffies\u3002\n//\u5f53\u8fdb\u7a0b\u8fd0\u884c\u65f6\uff0c\u4e0d\u7ba1\u5728\u4f55\u79cd\u72b6\u6001\u4e0b\uff0c\u6bcf\u4e2atick\u90fd\u4f7fit_prof_value\u503c\u51cf\u4e00\uff0c\u5f53\u51cf\u52300\u65f6\uff0c\u5411\u8fdb\u7a0b\u53d1\u9001\n//\u4fe1\u53f7SIGPROF\uff0c\u5e76\u6839\u636eit_prof_incr\u91cd\u7f6e\u65f6\u95f4.\n//it_virt_value\uff0cit_virt_value\u7528\u4e8eVirtual\u5b9a\u65f6\u5668\uff0c\u5355\u4f4d\u4e3ajiffies\u3002\u5f53\u8fdb\u7a0b\u8fd0\u884c\u65f6\uff0c\u4e0d\u7ba1\u5728\u4f55\u79cd\n//\u72b6\u6001\u4e0b\uff0c\u6bcf\u4e2atick\u90fd\u4f7fit_virt_value\u503c\u51cf\u4e00\u5f53\u51cf\u52300\u65f6\uff0c\u5411\u8fdb\u7a0b\u53d1\u9001\u4fe1\u53f7SIGVTALRM\uff0c\u6839\u636e\n//it_virt_incr\u91cd\u7f6e\u521d\u503c\u3002\nunsigned long it_real_value, it_prof_value, it_virt_value;\nunsigned long it_real_incr, it_prof_incr, it_virt_value;\nstruct timer_list real_timer;   //\u6307\u5411\u5b9e\u65f6\u5b9a\u65f6\u5668\u7684\u6307\u9488\nstruct tms times;      //\u8bb0\u5f55\u8fdb\u7a0b\u6d88\u8017\u7684\u65f6\u95f4\nunsigned long start_time;  //\u8fdb\u7a0b\u521b\u5efa\u7684\u65f6\u95f4\n//\u8bb0\u5f55\u8fdb\u7a0b\u5728\u6bcf\u4e2aCPU\u4e0a\u6240\u6d88\u8017\u7684\u7528\u6237\u6001\u65f6\u95f4\u548c\u6838\u5fc3\u6001\u65f6\u95f4\nlong per_cpu_utime[NR_CPUS], per_cpu_stime[NR_CPUS]; //\u5185\u5b58\u7f3a\u9875\u548c\u4ea4\u6362\u4fe1\u606f:\n//min_flt, maj_flt\u7d2f\u8ba1\u8fdb\u7a0b\u7684\u6b21\u7f3a\u9875\u6570\uff08Copy on\u3000Write\u9875\u548c\u533f\u540d\u9875\uff09\u548c\u4e3b\u7f3a\u9875\u6570\uff08\u4ece\u6620\u5c04\u6587\u4ef6\u6216\u4ea4\u6362\n//\u8bbe\u5907\u8bfb\u5165\u7684\u9875\u9762\u6570\uff09\uff1b nswap\u8bb0\u5f55\u8fdb\u7a0b\u7d2f\u8ba1\u6362\u51fa\u7684\u9875\u9762\u6570\uff0c\u5373\u5199\u5230\u4ea4\u6362\u8bbe\u5907\u4e0a\u7684\u9875\u9762\u6570\u3002\n//cmin_flt, cmaj_flt, cnswap\u8bb0\u5f55\u672c\u8fdb\u7a0b\u4e3a\u7956\u5148\u7684\u6240\u6709\u5b50\u5b59\u8fdb\u7a0b\u7684\u7d2f\u8ba1\u6b21\u7f3a\u9875\u6570\uff0c\u4e3b\u7f3a\u9875\u6570\u548c\u6362\u51fa\u9875\u9762\u6570\u3002\n//\u5728\u7236\u8fdb\u7a0b\u56de\u6536\u7ec8\u6b62\u7684\u5b50\u8fdb\u7a0b\u65f6\uff0c\u7236\u8fdb\u7a0b\u4f1a\u5c06\u5b50\u8fdb\u7a0b\u7684\u8fd9\u4e9b\u4fe1\u606f\u7d2f\u8ba1\u5230\u81ea\u5df1\u7ed3\u6784\u7684\u8fd9\u4e9b\u57df\u4e2d\nunsigned long min_flt, maj_flt, nswap, cmin_flt, cmaj_flt, cnswap;\nint swappable:1; //\u8868\u793a\u8fdb\u7a0b\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u662f\u5426\u5141\u8bb8\u6362\u51fa\n//\u8fdb\u7a0b\u8ba4\u8bc1\u4fe1\u606f\n//uid,gid\u4e3a\u8fd0\u884c\u8be5\u8fdb\u7a0b\u7684\u7528\u6237\u7684\u7528\u6237\u6807\u8bc6\u7b26\u548c\u7ec4\u6807\u8bc6\u7b26\uff0c\u901a\u5e38\u662f\u8fdb\u7a0b\u521b\u5efa\u8005\u7684uid\uff0cgid\n//euid\uff0cegid\u4e3a\u6709\u6548uid,gid\n//fsuid\uff0cfsgid\u4e3a\u6587\u4ef6\u7cfb\u7edfuid,gid\uff0c\u8fd9\u4e24\u4e2aID\u53f7\u901a\u5e38\u4e0e\u6709\u6548uid,gid\u76f8\u7b49\uff0c\u5728\u68c0\u67e5\u5bf9\u4e8e\u6587\u4ef6\n//\u7cfb\u7edf\u7684\u8bbf\u95ee\u6743\u9650\u65f6\u4f7f\u7528\u4ed6\u4eec\u3002\n//suid\uff0csgid\u4e3a\u5907\u4efduid,gid\nuid_t uid,euid,suid,fsuid;\ngid_t gid,egid,sgid,fsgid;\nint ngroups; //\u8bb0\u5f55\u8fdb\u7a0b\u5728\u591a\u5c11\u4e2a\u7528\u6237\u7ec4\u4e2d\ngid_t groups[NGROUPS]; //\u8bb0\u5f55\u8fdb\u7a0b\u6240\u5728\u7684\u7ec4\n//\u8fdb\u7a0b\u7684\u6743\u80fd\uff0c\u5206\u522b\u662f\u6709\u6548\u4f4d\u96c6\u5408\uff0c\u7ee7\u627f\u4f4d\u96c6\u5408\uff0c\u5141\u8bb8\u4f4d\u96c6\u5408\nkernel_cap_t cap_effective, cap_inheritable, cap_permitted;\nint keep_capabilities:1;\nstruct user_struct *user;\nstruct rlimit rlim[RLIM_NLIMITS];  //\u4e0e\u8fdb\u7a0b\u76f8\u5173\u7684\u8d44\u6e90\u9650\u5236\u4fe1\u606f\nunsigned short used_math;   //\u662f\u5426\u4f7f\u7528FPU\nchar comm[16];   //\u8fdb\u7a0b\u6b63\u5728\u8fd0\u884c\u7684\u53ef\u6267\u884c\u6587\u4ef6\u540d\n//\u6587\u4ef6\u7cfb\u7edf\u4fe1\u606f\nint link_count, total_link_count;\n//NULL if no tty \u8fdb\u7a0b\u6240\u5728\u7684\u63a7\u5236\u7ec8\u7aef\uff0c\u5982\u679c\u4e0d\u9700\u8981\u63a7\u5236\u7ec8\u7aef\uff0c\u5219\u8be5\u6307\u9488\u4e3a\u7a7a\nstruct tty_struct *tty;\nunsigned int locks;\n//\u8fdb\u7a0b\u95f4\u901a\u4fe1\u4fe1\u606f\nstruct sem_undo *semundo;  //\u8fdb\u7a0b\u5728\u4fe1\u53f7\u706f\u4e0a\u7684\u6240\u6709undo\u64cd\u4f5c\nstruct sem_queue *semsleeping; //\u5f53\u8fdb\u7a0b\u56e0\u4e3a\u4fe1\u53f7\u706f\u64cd\u4f5c\u800c\u6302\u8d77\u65f6\uff0c\u4ed6\u5728\u8be5\u961f\u5217\u4e2d\u8bb0\u5f55\u7b49\u5f85\u7684\u64cd\u4f5c\n//\u8fdb\u7a0b\u7684CPU\u72b6\u6001\uff0c\u5207\u6362\u65f6\uff0c\u8981\u4fdd\u5b58\u5230\u505c\u6b62\u8fdb\u7a0b\u7684task_struct\u4e2d\nstruct thread_struct thread;\n//\u6587\u4ef6\u7cfb\u7edf\u4fe1\u606f\nstruct fs_struct *fs;\n//\u6253\u5f00\u6587\u4ef6\u4fe1\u606f\nstruct files_struct *files;\n//\u4fe1\u53f7\u5904\u7406\u51fd\u6570\nspinlock_t sigmask_lock;\nstruct signal_struct *sig; //\u4fe1\u53f7\u5904\u7406\u51fd\u6570\nsigset_t blocked;  //\u8fdb\u7a0b\u5f53\u524d\u8981\u963b\u585e\u7684\u4fe1\u53f7\uff0c\u6bcf\u4e2a\u4fe1\u53f7\u5bf9\u5e94\u4e00\u4f4d\nstruct sigpending pending;  //\u8fdb\u7a0b\u4e0a\u662f\u5426\u6709\u5f85\u5904\u7406\u7684\u4fe1\u53f7\nunsigned long sas_ss_sp;\nsize_t sas_ss_size;\nint (*notifier)(void *priv);\nvoid *notifier_data;\nsigset_t *notifier_mask;\nu32 parent_exec_id;\nu32 self_exec_id;\n\nspinlock_t alloc_lock;\nvoid *journal_info;\n};\n</code></pre>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#2","title":"2 \u64cd\u4f5c\u7cfb\u7edf\u3001\u5185\u6838","text":"<ul> <li>\u64cd\u4f5c\u7cfb\u7edf\uff08\u82f1\u8bed\uff1aOperating System\uff0c\u7f29\u5199\uff1aOS\uff09\u662f\u4e00\u7ec4\u4e3b\u7ba1\u5e76\u63a7\u5236\u8ba1\u7b97\u673a\u64cd\u4f5c\u3001\u8fd0\u7528\u548c\u8fd0\u884c\u786c\u4ef6\u3001\u8f6f\u4ef6\u8d44\u6e90\u548c\u63d0\u4f9b\u516c\u5171\u670d\u52a1\u6765\u7ec4\u7ec7\u7528\u6237\u4ea4\u4e92\u7684\u76f8\u4e92\u5173\u8054\u7684\u7cfb\u7edf\u8f6f\u4ef6\u7a0b\u5e8f\uff0c\u540c\u65f6\u4e5f\u662f\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u5185\u6838\u4e0e\u57fa\u77f3\u3002\u64cd\u4f5c\u7cfb\u7edf\u9700\u8981\u5904\u7406\u5982\u7ba1\u7406\u4e0e\u914d\u7f6e\u5185\u5b58\u3001\u51b3\u5b9a\u7cfb\u7edf\u8d44\u6e90\u4f9b\u9700\u7684\u4f18\u5148\u6b21\u5e8f\u3001\u63a7\u5236\u8f93\u5165\u4e0e\u8f93\u51fa\u8bbe\u5907\u3001\u64cd\u4f5c\u7f51\u7edc\u4e0e\u7ba1\u7406\u6587\u4ef6\u7cfb\u7edf\u7b49\u57fa\u672c\u4e8b\u52a1\u3002\u64cd\u4f5c\u7cfb\u7edf\u4e5f\u63d0\u4f9b\u4e00\u4e2a\u8ba9\u7528\u6237\u4e0e\u7cfb\u7edf\u4ea4\u4e92\u7684\u64cd\u4f5c\u754c\u9762\u3002</li> <li>\u5185\u6838\u662f\u64cd\u4f5c\u7cfb\u7edf\u6700\u57fa\u672c\u7684\u90e8\u5206\uff0c\u662f\u4e00\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u7684\u6838\u5fc3\u3002\u662f\u57fa\u4e8e\u786c\u4ef6\u7684\u7b2c\u4e00\u5c42\u8f6f\u4ef6\u6269\u5145\uff0c\u63d0\u4f9b\u64cd\u4f5c\u7cfb\u7edf\u7684\u6700\u57fa\u672c\u7684\u529f\u80fd\uff0c\u662f\u64cd\u4f5c\u7cfb\u7edf\u5de5\u4f5c\u7684\u57fa\u7840\uff0c\u5b83\u8d1f\u8d23\u7ba1\u7406\u7cfb\u7edf\u7684\u8fdb\u7a0b\u3001\u5185\u5b58\u3001\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u3001\u6587\u4ef6\u548c\u7f51\u7edc\u7cfb\u7edf\uff0c\u51b3\u5b9a\u7740\u7cfb\u7edf\u7684\u6027\u80fd\u548c\u7a33\u5b9a\u6027\u3002</li> <li>\u5185\u6838\u8fd8\u5206\u5b8f\u5185\u6838\u3001\u5fae\u5185\u6838\u3001\u6df7\u5408\u5185\u6838\u3001\u5916\u5185\u6838\uff0c\u8be6\u89c1\u5185\u6838-\u7ef4\u57fa\u767e\u79d1</li> </ul>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#3","title":"3 \u5185\u5b58","text":""},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#31-3","title":"3.1 3\u79cd\u5185\u5b58\u7ba1\u7406\u65b9\u5f0f","text":"<ol> <li>\u865a\u62df\u5185\u5b58\uff0c\u6700\u9002\u5408\u7528\u6765\u7ba1\u7406\u5927\u578b\u5bf9\u8c61\u6216\u8005\u7ed3\u6784\u6570\u7ec4\uff1b</li> <li>\u5185\u5b58\u6620\u5c04\u6587\u4ef6\uff0c\u6700\u9002\u5408\u7528\u6765\u7ba1\u7406\u5927\u578b\u6570\u636e\u6d41\uff08\u901a\u5e38\u6765\u81ea\u6587\u4ef6\uff09\u4ee5\u53ca\u5728\u5355\u4e2a\u8ba1\u7b97\u673a\u4e0a\u8fd0\u884c\u591a\u4e2a\u8fdb\u7a0b\u4e4b\u95f4\u5171\u4eab\u6570\u636e\uff1b</li> <li>\u5185\u5b58\u5806\u6808\uff0c\u6700\u9002\u5408\u7528\u6765\u7ba1\u7406\u5927\u91cf\u7684\u5c0f\u5bf9\u8c61\u3002</li> </ol>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#4","title":"4 \u4e2d\u65ad\u3001\u8f6e\u8be2","text":"<ul> <li>\u4e2d\u65ad\uff1a\u5b83\u80fd\u4f7fCPU\u5728\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u5bf9\u5916\u90e8\u4e8b\u4ef6\u53d1\u51fa\u7684\u4e2d\u65ad\u8bf7\u6c42\u53ca\u65f6\u5730\u8fdb\u884c\u5904\u7406\uff0c \u5904\u7406\u5b8c\u6210\u540e\u53c8\u7acb\u5373\u8fd4\u56de\u65ad\u70b9\uff0c\u7ee7\u7eed\u8fdb\u884cCPU\u539f\u6765\u7684\u5de5\u4f5c\u3002CPU\u5229\u7528\u7387\u9ad8\u3002</li> <li>\u8f6e\u8be2\uff1a\u7531cpu\u5b9a\u65f6\u5bf9\u6bcf\u4e00\u4e2aio\u8bbe\u5907\u8fdb\u884c\u8f6e\u6d41\u8be2\u95ee\u662f\u5426\u9700\u8981cpu\u670d\u52a1\u3002\u6548\u7387\u4f4e\uff0c\u7b49\u5f85\u65f6\u95f4\u5f88\u957f\uff0cCPU\u5229\u7528\u7387\u4e0d\u9ad8\u3002</li> </ul>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#41","title":"4.1 \u4e2d\u65ad\u548c\u8f6e\u8be2\u4e4b\u95f4\u7684\u533a\u522b","text":"<ul> <li>\u4e2d\u65ad\u65f6\uff0c\u8bbe\u5907\u4f1a\u901a\u77e5CPU\u5f15\u8d77\u6ce8\u610f\uff1b\u800c\u5728\u8f6e\u8be2\u4e2d\uff0cCPU\u4f1a\u7a33\u5b9a\u5730\u68c0\u67e5\u8bbe\u5907\u662f\u5426\u9700\u8981\u6ce8\u610f\u3002</li> <li>\u4e2d\u65ad\u4e0d\u662f\u534f\u8bae\uff0c\u800c\u662f\u4e00\u79cd\u786c\u4ef6\u673a\u5236\uff1b\u8f6e\u8be2\u53cd\u4e4b\u3002</li> <li>\u5728\u4e2d\u65ad\u4e2d\uff0c\u8be5\u8bbe\u5907\u7531\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u63d0\u4f9b\u670d\u52a1\uff1b\u8f6e\u8be2\u65f6\uff0c\u8be5\u8bbe\u5907\u7531CPU\u7ef4\u4fee\u3002</li> <li>\u4e2d\u65ad\u53ef\u4ee5\u968f\u65f6\u53d1\u751f\uff1b\u8f6e\u8be2\u65f6\uff0cCPU\u4f1a\u4ee5\u56fa\u5b9a\u7684\u95f4\u9694\u7a33\u5b9a\u5730\u5bf9\u8bbe\u5907\u8fdb\u884c\u6295\u7968\u3002</li> <li>\u5728\u4e2d\u65ad\u4e2d\uff0c\u4e2d\u65ad\u8bf7\u6c42\u7ebf\u7528\u4f5c\u6307\u793a\u8bbe\u5907\u9700\u8981\u7ef4\u4fee\u7684\u6307\u793a\uff1b\u5728\u8f6e\u8be2\u65f6\uff0c\u547d\u4ee4\u5c31\u7eea\u4f4d\u7528\u4f5c\u6307\u793a\uff0c\u8868\u660e\u8bbe\u5907\u9700\u8981\u7ef4\u4fee\u3002</li> <li>\u5728\u4e2d\u65ad\u4e2d\uff0c\u4e00\u65e6\u4efb\u4f55\u8bbe\u5907\u5c06\u5176\u4e2d\u65ad\uff0c\u5904\u7406\u5668\u5c31\u4f1a\u53d7\u5230\u5e72\u6270\uff1b\u5728\u8f6e\u8be2\u4e2d\uff0c\u5904\u7406\u5668\u901a\u8fc7\u91cd\u590d\u68c0\u67e5\u6bcf\u4e2a\u8bbe\u5907\u7684\u547d\u4ee4\u5c31\u7eea\u4f4d\u6765\u6d6a\u8d39\u65e0\u6570\u7684\u5904\u7406\u5668\u5468\u671f\u3002</li> </ul>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#5","title":"5 \u4e34\u754c\u533a\u3001\u4e34\u754c\u8d44\u6e90","text":"<ul> <li>\u4e34\u754c\u8d44\u6e90\uff1a\u6307\u540c\u4e00\u65f6\u95f4\u4ec5\u5141\u8bb8\u4e00\u4e2a\u8fdb\u7a0b\u8bbf\u95ee\u7684\u8d44\u6e90\uff1b\u786c\u4ef6\u6709\u6253\u5370\u673a\u3001\u78c1\u5e26\u673a\u7b49,\u8f6f\u4ef6\u6709\u6d88\u606f\u7f13\u51b2\u961f\u5217\u3001\u53d8\u91cf\u3001\u6570\u7ec4\u3001\u7f13\u51b2\u533a\u7b49\u3002</li> <li>\u4e34\u754c\u533a\uff1a\u6307\u6bcf\u4e00\u4e2a\u8fdb\u7a0b\u8bbf\u95ee\u4e34\u754c\u8d44\u6e90\u7684\u90a3\u6bb5\u4ee3\u7801\u3002</li> </ul>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#51","title":"5.1 \u4e34\u754c\u533a\u95ee\u9898\u7684\u89e3\u51b3\u65b9\u6848","text":"<ol> <li>\u4e92\u65a5\uff1a\u5982\u679c\u8fdb\u7a0b\u5728\u5176\u4e34\u754c\u533a\u5185\u6267\u884c\uff0c\u90a3\u4e48\u5176\u4ed6\u8fdb\u7a0b\u90fd\u4e0d\u80fd\u5728\u5176\u4e34\u754c\u533a\u5185\u6267\u884c\u3002</li> <li>\u6709\u9650\u7b49\u5f85\uff1a\u4ece\u4e00\u4e2a\u8fdb\u7a0b\u505a\u51fa\u8fdb\u5165\u4e34\u754c\u533a\u7684\u8bf7\u6c42\u76f4\u5230\u8fd9\u4e2a\u8bf7\u6c42\u5141\u8bb8\u4e3a\u6b62\uff0c\u5176\u4ed6\u8fdb\u7a0b\u5141\u8bb8\u8fdb\u5165\u5176\u4e34\u754c\u533a\u7684\u6b21\u6570\u5177\u6709\u4e0a\u9650\u3002</li> <li>\u8d44\u6e90\u91ca\u653e\uff1a\u5982\u679c\u8fdb\u7a0b\u4e0d\u80fd\u8fdb\u5165\u81ea\u5df1\u7684\u4e34\u754c\u533a\uff0c\u5219\u5e94\u8ba9\u51faCPU\uff0c\u907f\u514d\u8fdb\u7a0b\u51fa\u73b0\u201c\u5fd9\u7b49\u201d\u73b0\u8c61\u3002</li> </ol> <pre><code>\u5047\u8bbe\u4e34\u754c\u533aa\u548c\u4e34\u754c\u533ab\u90fd\u8bbf\u95ee\u76f8\u540c\u7684\u4e34\u754c\u8d44\u6e90\u3002\n\u5f53\u4e00\u4e2a\u8fdb\u7a0bA\u9996\u5148\u8fdb\u5165\u81ea\u5df1\u7684\u4e34\u754c\u533aa\uff0c\u8fdb\u7a0bB\u5c31\u65e0\u6cd5\u8fdb\u5165\u81ea\u5df1\u7684\u4e34\u754c\u533ab\u3002\n</code></pre>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#6","title":"6 \u6587\u4ef6\u63cf\u8ff0\u7b26","text":"<p>Linux\u4e0b\u4e00\u5207\u90fd\u662f\u6587\u4ef6\uff0c\u6bd4\u5982 C++ \u6e90\u6587\u4ef6\u3001\u89c6\u9891\u6587\u4ef6\u3001Shell\u811a\u672c\u3001\u53ef\u6267\u884c\u6587\u4ef6\u7b49\uff0c\u5c31\u8fde\u952e\u76d8\u3001\u663e\u793a\u5668\u3001\u9f20\u6807\u7b49\u786c\u4ef6\u8bbe\u5907\u4e5f\u90fd\u662f\u6587\u4ef6\u3002 \u4e00\u4e2a Linux \u8fdb\u7a0b\u53ef\u4ee5\u6253\u5f00\u6210\u767e\u4e0a\u5343\u4e2a\u6587\u4ef6\uff0c\u4e3a\u4e86\u8868\u793a\u548c\u533a\u5206\u5df2\u7ecf\u6253\u5f00\u7684\u6587\u4ef6\uff0cLinux \u4f1a\u7ed9\u6bcf\u4e2a\u6587\u4ef6\u5206\u914d\u4e00\u4e2a\u7f16\u53f7\uff08\u4e00\u4e2a ID\uff09\uff0c\u8fd9\u4e2a\u7f16\u53f7\u5c31\u662f\u4e00\u4e2a\u6574\u6570\uff0c\u88ab\u79f0\u4e3a\u6587\u4ef6\u63cf\u8ff0\u7b26\uff08File Descriptor\uff09\u3002</p> <p>\u8be6\u89c1 http://c.biancheng.net/view/3066.html</p>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#7-io","title":"7 \u4e94\u79cdIO\u6a21\u578b","text":""},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#71-io","title":"7.1 \u963b\u585eIO\u6a21\u578b","text":""},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#72-io","title":"7.2 \u975e\u963b\u585eIO\u6a21\u578b","text":""},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#73-io","title":"7.3 IO\u591a\u8def\u590d\u7528\u6a21\u578b","text":""},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#74-io","title":"7.4 \u4fe1\u53f7\u9a71\u52a8IO\u6a21\u578b","text":""},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#75-io","title":"7.5 \u5f02\u6b65IO\u6a21\u578b","text":""},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#8-io","title":"8 IO\u591a\u8def\u590d\u7528","text":"<p>\u8be6\u89c1 https://blog.csdn.net/heidou_2016/article/details/105290254</p>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#9-cpu","title":"9 \u963b\u585e\u4e0d\u4f1a\u5360\u7528cpu","text":"<p>\u89e3\u91ca\uff1a 1. \u8fdb\u7a0b3\u72b6\u6001 \u963b\u585e\u7b49\u5f85\u3001\u5c31\u7eea\u3001\u8fd0\u884c\uff0c\u963b\u585e\u539f\u56e0\u662f\u5373\u6ca1\u6709cpu\u8d44\u6e90\uff0c\u53c8\u6ca1\u6709\u5176\u5b83\u8d44\u6e90\uff08\u5982io\uff09\uff0c\u5c31\u7eea\u662f\u542b\u6709\u9664cpu\u5916\u6240\u6709\u8d44\u6e90\uff0c\u7b49\u5f85cpu\u8d44\u6e90\u3002 2. \u9664\u975e\u662f\u6b7b\u5faa\u73af\uff0c\u8fd9\u4e2a\u4e0d\u80fd\u5f52\u4e3a\u963b\u585e\uff0c\u800c\u662f\u4e00\u76f4\u6267\u884c\u4e00\u6bb5\u7a0b\u5e8f\uff0c\u5373\u4f7f\u5faa\u73af\u4f53\u4e2d\u6ca1\u6709\u8bed\u53e5\u9700\u8981\u6267\u884c\uff0c\u4ed6\u4e5f\u5360\u7528\u8d44\u6e90\u3002</p>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#10","title":"10 \u7f13\u51b2\u533a\u6ea2\u51fa","text":"<ul> <li>\u89e3\u91ca\uff1a\u7f13\u51b2\u533a\u6ea2\u51fa\u662f\u6307\u5f53\u8ba1\u7b97\u673a\u5411\u7f13\u51b2\u533a\u5185\u586b\u5145\u6570\u636e\u65f6\u8d85\u8fc7\u4e86\u7f13\u51b2\u533a\u672c\u8eab\u7684\u5bb9\u91cf\uff0c\u6ea2\u51fa\u7684\u6570\u636e\u8986\u76d6\u5728\u5408\u6cd5\u6570\u636e\u4e0a\u3002\u9020\u6210\u7f13\u51b2\u533a\u6ea2\u51fa\u7684\u4e3b\u539f\u56e0\u662f\u7a0b\u5e8f\u4e2d\u6ca1\u6709\u4ed4\u7ec6\u68c0\u67e5\u7528\u6237\u8f93\u5165\u7684\u53c2\u6570\u3002\u5178\u578b\u7684c\u51fd\u6570strcpy()\u5c31\u4f1a\u9020\u6210\u7f13\u51b2\u533a\u6ea2\u51fa\uff0c\u5728\u9ad8\u7248\u672c\u4e2d\u63d0\u4f9bstrcpy_s()\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002</li> <li>\u5371\u5bb3\uff1a</li> <li>\u7a0b\u5e8f\u5d29\u6e83\uff0c\u5bfc\u81f4\u62d2\u7edd\u670d\u52a1</li> <li>\u8df3\u8f6c\u5e76\u4e14\u6267\u884c\u4e00\u6bb5\u6076\u610f\u4ee3\u7801</li> </ul>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#11_1","title":"11 \u6b7b\u9501","text":"<p>\u6b7b\u9501\u7684\u89c4\u8303\u5b9a\u4e49\u5982\u4e0b\uff1a\u5982\u679c\u4e00\u4e2a\u8fdb\u7a0b\u96c6\u5408\u4e2d\u7684\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u5728\u7b49\u5f85\u53ea\u80fd\u7531\u8be5\u8fdb\u7a0b\u96c6\u5408\u4e2d\u5176\u4ed6\u8fdb\u7a0b\u624d\u80fd\u5f15\u53d1\u7684\u4e8b\u4ef6\uff0c\u90a3\u4e48\u8be5\u8fdb\u7a0b\u96c6\u5408\u5c31\u662f\u6b7b\u9501\u7684\u3002</p> <pre><code>title: \u4ea7\u751f\u6b7b\u9501\u7684\u56db\u4e2a\u5fc5\u8981\u6761\u4ef6\uff1a\n1. \u4e92\u65a5\u6761\u4ef6\uff1a\u6bcf\u4e2a\u8d44\u6e90\u8981\u4e48\u5df2\u7ecf\u5206\u914d\u7ed9\u4e86\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u8981\u4e48\u5c31\u662f\u53ef\u7528\u7684\u3002\n2. \u5360\u6709\u548c\u7b49\u5f85\u6761\u4ef6\uff1a\u5df2\u7ecf\u5f97\u5230\u4e86\u67d0\u4e2a\u8d44\u6e90\u7684\u8fdb\u7a0b\u53ef\u4ee5\u518d\u8bf7\u6c42\u65b0\u7684\u8d44\u6e90\u3002\n3. \u4e0d\u53ef\u62a2\u5360\u6761\u4ef6\uff1a\u5df2\u7ecf\u5206\u914d\u7ed9\u4e00\u4e2a\u8fdb\u7a0b\u7684\u8d44\u6e90\u4e0d\u80fd\u5f3a\u5236\u6027\u5730\u88ab\u62a2\u5360\uff0c\u53ea\u80fd\u88ab\u5360\u6709\u5b83\u7684\u8fdb\u7a0b\u663e\u5f0f\u5730\u91ca\u653e\uff1b\n4. \u73af\u8def\u7b49\u5f85\u6761\u4ef6\uff1a\u6b7b\u9501\u53d1\u751f\u65f6\uff0c\u7cfb\u7edf\u4e2d\u4e00\u5b9a\u6709\u4e24\u4e2a\u6216\u8005\u4e24\u4e2a\u4ee5\u4e0a\u7684\u8fdb\u7a0b\u7ec4\u6210\u7684\u4e00\u6761\u73af\u8def\uff0c\u8be5\u73af\u8def\u4e2d\u7684\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u5728\u7b49\u5f85\u7740\u4e0b\u4e00\u4e2a\u8fdb\u7a0b\u6240\u5360\u6709\u7684\u8d44\u6e90\u3002\n</code></pre> <pre><code>title: \u56db\u79cd\u5904\u7406\u6b7b\u9501\u7684\u7b56\u7565\n1. \u9e35\u9e1f\u7b56\u7565\uff08\u5ffd\u7565\u6b7b\u9501\uff09\uff1b\n2. \u68c0\u6d4b\u6b7b\u9501\u5e76\u6062\u590d\uff1b\n3. \u4ed4\u7ec6\u5bf9\u8d44\u6e90\u8fdb\u884c\u5206\u914d\uff0c\u52a8\u6001\u5730\u907f\u514d\u6b7b\u9501\uff1b\n4. \u901a\u8fc7\u7834\u574f\u5f15\u8d77\u6b7b\u9501\u7684\u56db\u4e2a\u5fc5\u8981\u6761\u4ef6\u4e4b\u4e00\uff0c\u9632\u6b62\u6b7b\u9501\u7684\u4ea7\u751f\u3002\n</code></pre>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#12_1","title":"12 \u5355\u5de5\u3001\u534a\u53cc\u5de5\u3001\u5168\u53cc\u5de5","text":"<p>\u5355\u5de5\uff1a\u6570\u636e\u53ea\u80fd\u7531\u4e00\u7aefa\u4f20\u5411\u53e6\u4e00\u7aefb\uff0c\u800c\u4e0d\u80fd\u7531\u4e00\u7aefb\u4f20\u5411\u4e00\u7aefb\u3002\u6bd4\u55bb\u6c7d\u8f66\u7684\u5355\u884c\u9053 \u534a\u53cc\u5de5\uff1a\u534a\u53cc\u5de5(Half Duplex)\u6570\u636e\u4f20\u8f93\u6307\u6570\u636e\u53ef\u4ee5\u5728\u4e00\u4e2a\u4fe1\u53f7\u8f7d\u4f53\u7684\u4e24\u4e2a\u65b9\u5411\u4e0a\u4f20\u8f93\uff0c\u4f46\u662f\u4e0d\u80fd\u540c\u65f6\u4f20\u8f93\u3002\u6bd4\u55bb\u5bf9\u8bb2\u673a\u3002 \u5168\u53cc\u5de5\uff1a\u901a\u4fe1\u5141\u8bb8\u6570\u636e\u5728\u4e24\u4e2a\u65b9\u5411\u4e0a\u540c\u65f6\u4f20\u8f93\uff0c\u5b83\u5728\u80fd\u529b\u4e0a\u76f8\u5f53\u4e8e\u4e24\u4e2a\u5355\u5de5\u901a\u4fe1\u65b9\u5f0f\u7684\u7ed3\u5408\u3002\u5168\u53cc\u5de5\u6307\u53ef\u4ee5\u540c\u65f6\uff08\u77ac\u65f6\uff09\u8fdb\u884c\u4fe1\u53f7\u7684\u53cc\u5411\u4f20\u8f93\uff08A\u2192B\u4e14B\u2192A\uff09\u3002\u6307A\u2192B\u7684\u540c\u65f6B\u2192A\uff0c\u662f\u77ac\u65f6\u540c\u6b65\u7684\u3002\u6bd4\u55bb\u6253\u7535\u8bdd\u3002</p>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#13_1","title":"13 \u5206\u5e03\u5f0f\u3001\u96c6\u7fa4\u3001\u5355\u673a","text":"<p>https://www.huaweicloud.com/articles/6809c5da1dbeb88d6b65bd29083bce2c.html</p>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#131","title":"13.1 \u5355\u673a","text":"<p>\u5355\u673a\u5c31\u662f\u628a\u505a\u7684\u7cfb\u7edf\u90e8\u7f72\u5230\u4e00\u53f0\u670d\u52a1\u5668\u4e0a\uff0c\uff0c\u6240\u6709\u7684\u8bf7\u6c42\u4e1a\u52a1\u90fd\u7531\u8fd9\u53f0\u670d\u52a1\u5668\u5904\u7406\u3002\u663e\u7136\uff0c\u5f53\u4e1a\u52a1\u589e\u957f\u5230\u4e00\u5b9a\u7a0b\u5ea6\u7684\u65f6\u5019\uff0c\u670d\u52a1\u5668\u7684\u786c\u4ef6\u4f1a\u65e0\u6cd5\u6ee1\u8db3\u4e1a\u52a1\u9700\u6c42\u3002\u5f88\u591a\u4eba\u5c31\u4f1a\u60f3\u5230\u591a\u90e8\u7f72\u51e0\u53f0\u670d\u52a1\u5668\uff0c\u8fd9\u5c31\u662f\u96c6\u7fa4\u3002</p>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#132","title":"13.2 \u96c6\u7fa4","text":"<p>\u96c6\u7fa4\u5c31\u662f\u5355\u673a\u7684\u591a\u5b9e\u4f8b\uff0c\u5728\u591a\u4e2a\u670d\u52a1\u5668\u4e0a\u90e8\u7f72\u591a\u4e2a\u670d\u52a1\uff0c\u6bcf\u4e2a\u670d\u52a1\u5c31\u662f\u4e00\u4e2a\u8282\u70b9\uff0c\u90e8\u7f72N\u4e2a\u8282\u70b9\uff0c\u5904\u7406\u4e1a\u52a1\u7684\u80fd\u529b\u5c31\u63d0\u5347 N\u500d\uff08\u5927\u7ea6\uff09\uff0c\u8fd9\u4e9b\u8282\u70b9\u7684\u96c6\u5408\u5c31\u53eb\u505a\u96c6\u7fa4\u3002 - \u4f18\u70b9\uff1a\u64cd\u4f5c\u7b80\u5355\uff0c\u5bb9\u6613\u90e8\u7f72\uff1b - \u7f3a\u70b9\uff1a\u6bcf\u4e2a\u8282\u70b9\u8d1f\u8f7d\u76f8\u540c\uff08\u8026\u5408\u5ea6\u9ad8\uff09\uff0c\u6bcf\u4e2a\u5177\u4f53\u4e1a\u52a1\u7684\u8bbf\u95ee\u91cf\u53ef\u80fd\u5dee\u5f02\u5f88\u5927\uff0c\u6bd4\u5982\u7f8e\u56e2\u5916\u5356\u7f8e\u98df\u5916\u5356\u7684\u8bbf\u95ee\u91cf\u4e00\u5b9a\u5927\u4e8e\u9c9c\u82b1\u5916\u5356\u7684\u8bbf\u95ee\u91cf\uff0c\u8fd9\u5c31\u9020\u6210\u4e86\u8d44\u6e90\u6d6a\u8d39</p>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#133","title":"13.3 \u5206\u5e03\u5f0f\uff08\u5fae\u670d\u52a1\uff09","text":"<p>\u5206\u5e03\u5f0f\u7ed3\u6784\u5c31\u662f\u5c06\u4e00\u4e2a\u5b8c\u6574\u7684\u7cfb\u7edf\uff0c\u6309\u7167\u4e1a\u52a1\u529f\u80fd\uff0c\u62c6\u5206\u6210\u4e00\u4e2a\u4e2a\u72ec\u7acb\u7684\u5b50\u7cfb\u7edf\uff0c\u5728\u5206\u5e03\u5f0f\u7ed3\u6784\u4e2d\uff0c\u6bcf\u4e2a\u5b50\u7cfb\u7edf\u5c31\u88ab\u79f0\u4e3a\u201c\u670d\u52a1\u201d\u3002\u8fd9\u4e9b\u5b50\u7cfb\u7edf\u80fd\u591f\u72ec\u7acb\u8fd0\u884c\u5728web\u5bb9\u5668\u4e2d\uff0c\u5b83\u4eec\u4e4b\u95f4\u901a\u8fc7RPC\u65b9\u5f0f\u901a\u4fe1\u3002 - \u4f18\u70b9\uff1a\u8d44\u6e90\u5229\u7528\u7387\u9ad8 - \u7f3a\u70b9\uff1a\u5b89\u5168\u6027\u4f4e\uff0c\u5982\u679c\u4e00\u53f0\u670d\u52a1\u5668\u51fa\u73b0\u95ee\u9898\u6574\u4e2a\u7cfb\u7edf\u5c31\u4f1a\u5d29\u584c</p>"},{"location":"Documents/D-Interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86/#14-rpcremote-procedure-call","title":"14 RPC(Remote Procedure Call)","text":"<p>https://www.zhihu.com/question/25536695 - \u4f5c\u7528\uff1a\u63d0\u4f9b\u5728\u4e3b\u673aA\u8c03\u7528\u4e3b\u673aB\u4e0a\u7684\u51fd\u6570\u6216\u65b9\u6cd5</p>"},{"location":"Documents/D-Interview/%E7%AE%80%E5%8E%86%E5%88%B6%E4%BD%9C/","title":"\u7b80\u5386\u5236\u4f5c","text":""},{"location":"Documents/D-Interview/%E7%AE%80%E5%8E%86%E5%88%B6%E4%BD%9C/#1","title":"1 \u5728\u7ebf\u7f51\u7ad9","text":"<p>https://www.polebrief.com/</p>"},{"location":"Documents/D-Interview/%E7%AE%97%E6%B3%95%E9%A2%98/","title":"\u7b97\u6cd5\u9898","text":""},{"location":"Documents/D-Interview/%E7%AE%97%E6%B3%95%E9%A2%98/#1","title":"1 \u7b97\u6cd5\u601d\u60f3","text":""},{"location":"Documents/D-Interview/%E7%AE%97%E6%B3%95%E9%A2%98/#11","title":"1.1 \u52a8\u6001\u89c4\u5212","text":"<ul> <li>\u7b97\u6cd5\u601d\u60f3\uff1a \u52a8\u6001\u89c4\u8303\u628a\u539f\u95ee\u9898\u5206\u89e3\u6210\u8bb8\u591a\u5b50\u95ee\u9898\uff0c\u81ea\u5e95\u5411\u4e0a\u6c42\u89e3\u5b50\u95ee\u9898\uff0c\u5408\u5e76\u5b50\u95ee\u9898\u7684\u89e3\u3002\u5b50\u95ee\u9898\u89e3\u4fdd\u5b58\u5728\u6570\u7ec4\u4e2d\uff0c\u4f9b\u540e\u7eed\u5b50\u95ee\u9898\u4f7f\u7528\uff0c\u907f\u514d\u91cd\u590d\u8ba1\u7b97\uff0c\u589e\u52a0\u7b97\u6cd5\u6548\u7387\u3002</li> <li>\u52a8\u6001\u89c4\u8303\u8981\u7d20\uff1a</li> <li>\u6700\u4f18\u5b50\u7ed3\u6784</li> <li>\u91cd\u53e0\u5b50\u95ee\u9898</li> </ul> <pre><code>title: tip \u91cd\u53e0\u5b50\u95ee\u9898\n\u5728\u6c42\u89e3\u5b50\u95ee\u9898\u8fc7\u7a0b\u4e2d\uff0c\u6709\u5927\u91cf\u5b50\u95ee\u9898\u662f\u91cd\u590d\u7684\uff0c\u53ea\u9700\u5c06\u6c42\u5f97\u7684\u5b50\u95ee\u9898\u89e3\u4fdd\u5b58\u5728\u6570\u7ec4\u4e2d\uff0c\u4ee5\u540e\u4f7f\u7528\u65f6\u76f4\u63a5\u8c03\u7528\uff0c\u589e\u52a0\u4e86\u7b97\u6cd5\u6548\u7387\u3002\u91cd\u53e0\u5b50\u95ee\u9898\u4e0d\u662f\u52a8\u6001\u89c4\u5212\u7684\u5fc5\u8981\u6761\u4ef6\uff0c\u4f46\u66f4\u80fd\u4f53\u73b0\u52a8\u6001\u89c4\u5212\u4f18\u70b9\u3002\n</code></pre>"},{"location":"Documents/D-Interview/%E7%AE%97%E6%B3%95%E9%A2%98/#2","title":"2 \u6392\u5e8f\u7b97\u6cd5","text":""},{"location":"Documents/D-Interview/%E7%AE%97%E6%B3%95%E9%A2%98/#21","title":"2.1 \u5192\u6ce1\u6392\u5e8f","text":"<ol> <li>\u4ece\u540e\u5f80\u524d\u6392</li> <li>\u76f8\u90bb2\u6570\u6bd4\u8f83\u3001\u4ea4\u6362</li> <li>2\u5c42for\u5faa\u73af</li> <li>\u65f6\u95f4\u590d\u6742\u5ea6$O(n^{2})$</li> <li>\u7a7a\u95f4\u590d\u6742\u5ea6$O(1)$</li> <li>\u793a\u4f8b</li> </ol> <pre><code>/**\n * @brief \u5192\u6ce1\u6392\u5e8f\n * \u76f8\u90bb\u5143\u7d20\u6bd4\u8f83\uff0c\u4ea4\u6362\uff0c\u6bcf\u4e00\u6b21\u5faa\u73af\u6700\u503c\u90fd\u5728\u6570\u7ec4\u9876\u90e8\n * @tparam T \n * @param data \n * @param num \n */\ntemplate &lt;typename T&gt;\nvoid sort(T data[], int num)\n{\nfor (size_t i = 0; i &lt; num; ++i)\n{\nfor (size_t j = num; j &gt; i; --j)\n{\nif (data[j] &lt; data[j - 1])\n{\nT tmp = data[j];\ndata[j] = data[j - 1];\ndata[j - 1] = tmp;\n}\n}\n}\n}\n</code></pre>"},{"location":"Documents/D-Interview/%E7%AE%97%E6%B3%95%E9%A2%98/#22","title":"2.2 \u9009\u62e9\u6392\u5e8f","text":"<ol> <li>\u6bcf\u7b2ci\u6b21\u5faa\u73af\u4ecen-i\u5143\u7d20\u4e2d\u9009\u62e9\u6700\u5c0f\u5143\u7d20k\u4e0e\u7b2ci\u5143\u7d20\u4ea4\u6362</li> <li>2\u5c42for\u5faa\u73af</li> <li>\u65f6\u95f4\u590d\u6742\u5ea6$O(n^{2})$</li> <li>\u7a7a\u95f4\u590d\u6742\u5ea6$O(1)$</li> <li>\u793a\u4f8b</li> </ol> <pre><code>/**\n * @brief \u9009\u62e9\u6392\u5e8f\n * \u4ece\u7b2ci\uff5en\u8303\u56f4\u5143\u7d20\u4e2d\u627e\u51fa\u6700\u5c0f\u503c\u5143\u7d20\u7d22\u5f15min,\u4ea4\u6362data[i]\u4e0edata[min]\u6570\u636e \n * @tparam T \n * @param data \n * @param num \n */\ntemplate &lt;typename T&gt;\nvoid sort(T data[], int num)\n{\nfor (size_t i = 0; i &lt; num - 1; ++i)\n{\n//\u6700\u5c0f\u5143\u7d20\u7d22\u5f15\nint min = i;\nfor (size_t j = i + 1; j &lt; num; ++j)\n{\nif (data[j] &lt; data[min])\nmin = j;\n}\nif (i != min)\n{\nT tmp = data[min];\ndata[min] = data[i];\ndata[i] = tmp;\n}\n}\n}\n</code></pre>"},{"location":"Documents/D-Interview/%E7%AE%97%E6%B3%95%E9%A2%98/#23","title":"2.3 \u63d2\u5165\u6392\u5e8f","text":"<ol> <li>\u5c06\u7b2ci\uff08i&gt;=2\uff09\u4e0e\u524di-1\u4e2a\u5143\u7d20\u4f9d\u6b21\u6bd4\u8f83\uff0c\u63d2\u5165\u5230\u524di-1\u4e2a\u5143\u7d20\u4e2d</li> <li>2\u5c42for\u5faa\u73af</li> <li>\u65f6\u95f4\u590d\u6742\u5ea6$O(n^{2})$</li> <li>\u7a7a\u95f4\u590d\u6742\u5ea6$O(1)$</li> <li>\u793a\u4f8b</li> </ol> <pre><code>/**\n * @brief \u63d2\u5165\u6392\u5e8f\n * \u5c06\u7b2ci\u4e2a\u5143\u7d20\u4e0e\u524di-1\u4e2a\u5143\u7d20\u6bd4\u8f83\uff0c\u627e\u5230\u5408\u9002\u4f4d\u7f6ej\uff0cj\uff5ei-1\u95f4\u5143\u7d20\u5411\u540e\u79fb\u52a8\u4ee5\u4e3a\uff0c\u5c06data[i]\u63d2\u5165data[j]\u5904\n * @tparam T \n * @param data \n * @param num \n */\ntemplate &lt;typename T&gt;\nvoid sort(T data[], int num)\n{\nfor (int i = 1; i &lt; num; ++i)\n{\nint j;\nT tmp = data[i];\nfor (j = i; j &gt; 0; --j)\n{\nif (tmp &lt; data[j - 1]) //\u5c06\u5927\u503c\u5f80\u540e\u4e00\u4f4d\ndata[j] = data[j - 1];\nelse //\u627e\u5230\u5408\u9002\u4f4d\u7f6e\nbreak;\n}\n//j\u4f4d\u7f6e\u5c31\u662f\u5408\u9002\u4f4d\u7f6e\ndata[j] = tmp;\n}\n}\n</code></pre>"},{"location":"Documents/D-Interview/%E7%AE%97%E6%B3%95%E9%A2%98/#24","title":"2.4 \u5feb\u901f\u6392\u5e8f","text":"<ol> <li>\u9996\u5c3e\u6307\u9488\uff0c\u9009\u62e9\u9996\u5143\u7d20\u4f5c\u4e3a\u57fa\u672c\u503c\uff08\u4e00\u822c\u9009\u62e9\u9996\u5c3e\u6216\u4e2d\u95f4\u503c\uff09</li> <li>\u5148\u6bd4\u8f83\u5c3e\u90e8\u5143\u7d20\u4e0e\u57fa\u672c\u503c\u5927\u5c0f\uff0c\u5c0f\u4e8e\u57fa\u672c\u503c\u4e0e\u5934\u6307\u9488\u6307\u5411\u5143\u7d20\u4ea4\u6362\uff0c\u518d\u79fb\u52a8\u5934\u6307\u9488\u5143\u7d20\u6bd4\u8f83\u76f4\u5230\u5143\u7d20\u503c\u5927\u4e8e\u57fa\u672c\u503c\uff0c\u518d\u4e0e\u5c3e\u90e8\u6307\u9488\u5143\u7d20\u4ea4\u6362\uff0c\u518d\u79fb\u52a8\u5c3e\u90e8\u6307\u9488\uff0c\u5faa\u73af\u6b64\u64cd\u4f5c\uff0c\u76f4\u5230\u5934\u5c3e\u6307\u9488\u76f8\u7b49\u3002</li> <li>\u518d\u4e0e\u5934\u5c3e\u6307\u9488\u6c47\u805a\u5904\u4f5c\u4e0a\u8ff0\u5904\u7406\uff0c\u76f4\u5230\u5206\u7ec4\u4e2d\u53ea\u542b\u4e00\u4e2a\u5143\u7d20\uff0c\u6b64\u65f6\u5143\u7d20\u4ee5\u6392\u5e8f\u3002</li> <li>\u5e73\u5747\u65f6\u95f4\u590d\u6742\u5ea6$O(n\\log_{}{n})$</li> <li>\u6700\u5dee\u65f6\u95f4\u590d\u6742\u5ea6$O(n^2)$</li> </ol>"},{"location":"Documents/D-Interview/%E7%AE%97%E6%B3%95%E9%A2%98/#25","title":"2.5 \u5f52\u5e76\u6392\u5e8f","text":"<ol> <li>\u9012\u5f52\u5c06\u6570\u7ec4\u5206\u62102\u90e8\u5206</li> <li>\u5c06\u4e24\u4e24\u5b50\u6570\u7ec4\u5408\u5e76\u5e76\u6392\u5e8f\u7ec4\u6210\u4e00\u4e2a\u5df2\u6392\u5e8f\u5b50\u6570\u7ec4</li> <li>\u6700\u7ec8\u5408\u5e76\u6210\u4e00\u4e2a\u5df2\u6392\u5e8f\u6570\u7ec4</li> <li>\u5e73\u5747\u65f6\u95f4\u590d\u6742\u5ea6$O(n\\log_{}{n})$</li> <li>\u6700\u5dee\u65f6\u95f4\u590d\u6742\u5ea6$O(n^2)$</li> <li>\u793a\u4f8b</li> </ol> <pre><code>template &lt;typename T&gt;\nvoid mergeSort(T data[], int L, int R);\ntemplate &lt;typename T&gt;\nvoid merge(T data[], int L, int R, int M);\n/**\n * @brief \u5f52\u5e76\u6392\u5e8f\n * \u5c06\u6570\u7ec4\u5206\u6210\u591a\u4e2a\u5b50\u6570\u7ec4\uff0c\u518d\u5c06\u5b50\u6570\u7ec4\u5408\u5e76\u65f6\u6392\u5e8f\uff0c\u6700\u7ec8\u5408\u5e76\u6210\u4e00\u4e2a\u6392\u5e8f\u6570\u7ec4\n * @tparam T \n * @param data \n * @param num \n */\ntemplate &lt;typename T&gt;\nvoid sort(T data[], int num)\n{\nmergeSort(data, 0, num - 1);\n}\n\ntemplate &lt;typename T&gt;\nvoid mergeSort(T data[], int L, int R)\n{\n//\u9012\u5f52\u7ec8\u6b62\u6761\u4ef6\nif (L == R)\nreturn;\nint mid = (L + R) / 2;\n//\u5206\u5272\nmergeSort(data, L, mid);\nmergeSort(data, mid + 1, R);\n//\u5408\u5e76\nmerge(data, L, R, mid);\n}\n\ntemplate &lt;typename T&gt;\nvoid merge(T data[], int L, int R, int M)\n{\nT *arr = new T[R - L + 1];\nint l = L, r = M + 1, index = 0;\n//\u6392\u5e8f\u5b8c\u6210\u6761\u4ef6\nwhile (l &lt;= M &amp;&amp; r &lt;= R)\n{\nif (data[l] &lt;= data[r])\n{\narr[index++] = data[l++];\n}\nelse\n{\narr[index++] = data[r++];\n}\n}\n//\u5c06\u5269\u4e0b\u7684\u5143\u7d20\u653e\u5165\u4e34\u65f6\u6570\u7ec4\u4e2d\nwhile(l &lt;= M)\n{ //\u5de6\u6570\u7ec4\u5269\u4f59\narr[index++]=data[l++];\n}\nwhile (r&lt;=R)\n{//\u53f3\u6570\u7ec4\u5269\u4f59\narr[index++]=data[r++];\n}\n//\u590d\u5236\u4e34\u65f6\u6570\u7ec4\u4e2d\u5143\u7d20\u5230\u539f\u6570\u7ec4\u4e2d\nfor(index=0;L&lt;=R;++L)\n{\ndata[L]=arr[index++];\n}\n//\u91ca\u653e\u4e34\u65f6\u6570\u7ec4\ndelete []arr;\n}\n</code></pre>"},{"location":"Documents/D-Interview/%E7%AE%97%E6%B3%95%E9%A2%98/#26","title":"2.6 \u5806\u6392\u5e8f","text":"<ol> <li>\u4ee5\u4e8c\u53c9\u6811\u5f62\u5f0f\u67e5\u627en\u4e2a\u5143\u7d20\u4e2d\u6700\u503c\uff0c\u5c06\u5176\u653e\u5165\u6570\u7ec4\u672b\u5c3e</li> <li>\u5728n-1\u6b21\u5faa\u73af\u5904\u7406\u4e0b\uff0c\u6570\u7ec4\u5df2\u6392\u597d\u5e8f</li> <li>\u5e73\u5747\u65f6\u95f4\u590d\u6742\u5ea6$O(n\\log_{}{n})$</li> <li>\u6700\u5dee\u65f6\u95f4\u590d\u6742\u5ea6$O(n\\log_{}{n})$</li> </ol>"},{"location":"Documents/D-Interview/%E7%AE%97%E6%B3%95%E9%A2%98/#3","title":"3 \u7b97\u6cd5\u5e38\u8bc6","text":""},{"location":"Documents/D-Interview/%E7%AE%97%E6%B3%95%E9%A2%98/#31-o","title":"3.1 \u63a8\u5bfc\u5927O\u9636\u65b9\u6cd5","text":"<ol> <li>\u7528\u5e38\u65701\u66ff\u4ee3\u6240\u6709\u52a0\u6cd5\u6027\u8d28\u7684\u5e38\u6570</li> <li>\u53ea\u4fdd\u7559\u6700\u9ad8\u9636\u9879\uff0c\u53bb\u9664\u5176\u5b83\u6b21\u8981\u9879</li> <li>\u5982\u679c\u6700\u9ad8\u9879\u542b\u5e38\u91cf\u7cfb\u6570\uff08\u59823n\u5219\u53bb\u96643\uff0c\u53ea\u4fdd\u7559n\uff09\uff0c\u5219\u53bb\u9664\u5e38\u91cf\u7cfb\u6570</li> </ol> <p>\u5e38\u7528\u65f6\u95f4\u590d\u6742\u5ea6\u6392\u5e8f\u8868 </p>"},{"location":"Documents/D-Interview/%E7%AE%97%E6%B3%95%E9%A2%98/#4","title":"4 \u82f1\u6587\u5b57\u7b26\u5927\u5c0f\u5199\u8f6c\u6362","text":"<p>\u524d\u7f6e\u77e5\u8bc6:A~Z\u8303\u56f4\u662f0x41~0x0x5a(65~90),a~z\u8303\u56f4\u662f0x61~0x7a(97~122) 1. \u4f20\u7edf\u65b9\u6cd5\uff1a\u904d\u5386\u5b57\u7b26\u4e32\u5927\u5199\u5b57\u6bcd+32\uff0c\u5c0f\u5199\u5b57\u6bcd-32 2. \u9ad8\u7ea7\u65b9\u6cd5\uff1a\u56e0\u4e3a\u5927\u5c0f\u5199\u5b57\u6bcd\u53ea\u5728\u7b2c6bit\u4f4d\u7f6e\u4e0a\u4e0d\u540c\uff0c\u5982A(0100 0001)\u548ca(0110 0001)\uff0c\u56e0\u6b64\u91c7\u7528\u5bf90x40(0010 0000)\u5f02\u6216\u8fd0\u7b97\u5c31\u80fd\u8fbe\u5230\u5927\u5c0f\u5199\u5b57\u6bcd\u8f6c\u6362\u3002\u5982<code>01000001^0x0010000</code>\u7ed3\u679c\u662f<code>01100001</code>,\u5373A\u3002</p>"},{"location":"Documents/D-Interview/%E7%AE%97%E6%B3%95%E9%A2%98/#5","title":"5 \u6811","text":"<ul> <li>\u5ea6\uff1a\u6307\u8282\u70b9\u542b\u591a\u5c11\u4e2a\u5b50\u8282\u70b9</li> <li>\u6811\u7684\u6df1\u5ea6\uff1a\u6307\u6811\u6709\u591a\u5c11\u5c42</li> <li>\u5b8c\u5168\u4e8c\u53c9\u6811\uff1a\u4ece\u5de6\u5f80\u53f3\u6309\u987a\u5e8f\u6392\u5217\u8282\u70b9\u4e8c\u53c9\u6811</li> <li>\u6ee1\u4e8c\u53c9\u6811\uff1a\u53f6\u5b50\u8282\u70b9\u90fd\u5728\u540c\u4e00\u5c42\u7684\u5b8c\u5168\u4e8c\u53c9\u6811</li> </ul>"},{"location":"Documents/D-Interview/%E7%AE%97%E6%B3%95%E9%A2%98/#51","title":"5.1 \u4e8c\u53c9\u6811","text":"<ul> <li>\u6df1\u5ea6\u4e3ak\u7684\u4e8c\u53c9\u6811\u6700\u591a\u6709$2^{k}-1(k\\ge 1)$\u4e2a\u8282\u70b9</li> <li>\u7b2ci\u5c42\u4e0a\uff0c\u6700\u591a\u6709$2^{i-1}(i\\ge1)$\u4e2a\u8282\u70b9</li> <li>\u5047\u8bbe\u53f6\u5b50\u8282\u70b9\u6811\u662f$n_{0}$,\u5ea6\u4e3a2\u7684\u8282\u70b9\u6570\u4e3a$n_{2}$,\u5219\u6709$n_{0}=n_{2}+1$</li> <li>\u5177\u6709n\u4e2a\u8282\u70b9\u7684\u5b8c\u5168\u4e8c\u53c9\u6811\u7684\u6df1\u5ea6\u4e3a${\\left \\lfloor \\log_{2}{n} \\right \\rfloor +1}(\\left \\lfloor x \\right \\rfloor\u8868\u793a\u4e0d\u5927\u4e8ex\u7684\u6700\u5927\u6574\u6570)$</li> <li>\u5177\u6709n\u4e2a\u8282\u70b9\u7684\u6ee1\u4e8c\u53c9\u6811\u7684\u6df1\u5ea6\u4e3a$log_{2}{(n+1)}$</li> </ul>"},{"location":"Documents/D-Interview/%E7%AE%97%E6%B3%95%E9%A2%98/#52","title":"5.2 \u4e8c\u53c9\u6811\u904d\u5386\u65b9\u6cd5","text":"<pre><code>\u533a\u5206\u524d\u5e8f\u3001\u4e2d\u5e8f\u3001\u540e\u5e8f\u5173\u952e\u662f\u8bbf\u95ee\u6839\u8282\u70b9\u3002\n\u524d\u5e8f\uff1a\u6839-&gt;\u5de6-&gt;\u53f3\n\u4e2d\u5e8f\uff1a\u5de6-&gt;\u6839-&gt;\u53f3\n\u540e\u5e8f\uff1a\u5de6-&gt;\u53f3-&gt;\u6839\n</code></pre>"},{"location":"Documents/D-Interview/%E7%AE%97%E6%B3%95%E9%A2%98/#521","title":"5.2.1 \u524d\u5e8f\u904d\u5386","text":"<p>\u987a\u5e8f\uff1aA-&gt;B-&gt;D-&gt;G-&gt;H-&gt;C-&gt;E-&gt;I-&gt;F</p> <p></p>"},{"location":"Documents/D-Interview/%E7%AE%97%E6%B3%95%E9%A2%98/#522","title":"5.2.2 \u4e2d\u5e8f\u904d\u5386","text":"<p>\u987a\u5e8f\uff1aG-&gt;D-&gt;H-&gt;B-&gt;A-&gt;E-&gt;I-&gt;C-&gt;F</p> <p></p>"},{"location":"Documents/D-Interview/%E7%AE%97%E6%B3%95%E9%A2%98/#523","title":"5.2.3 \u540e\u5e8f\u904d\u5386","text":"<p>\u987a\u5e8f\uff1aG-&gt;H-&gt;D-&gt;B-&gt;I-&gt;E-&gt;F-&gt;C-&gt;A</p> <p></p>"},{"location":"Documents/D-Interview/%E7%AE%97%E6%B3%95%E9%A2%98/#524","title":"5.2.4 \u5c42\u5e8f\u904d\u5386","text":"<p>\u987a\u5e8f\uff1aA-&gt;B-&gt;C-&gt;D-&gt;E-&gt;F-&gt;G-&gt;H-&gt;I</p> <p></p>"},{"location":"Documents/D-Interview/%E7%AE%97%E6%B3%95%E9%A2%98/#525","title":"5.2.5 \u904d\u5386\u7b97\u6cd5\u5b9e\u73b0","text":"<pre><code>typedef char ElemType;\ntypedef struct BiNode {\nElemType data;\nBiNode* lChild, * rChild;\n}BiNode,*BiTree;\n//\u524d\u5e8f\u904d\u5386\nvoid preOrderTraverse(BiTree T)\n{\nif (T == NULL)\nreturn;\nprintf(\"%c\", T-&gt;data);// \u5148\u6253\u5370\u8282\u70b9\u4fe1\u606f\npreOrderTraverse(T-&gt;lChild);//\u518d\u904d\u5386\u5de6\u5b50\u6811\npreOrderTraverse(T-&gt;rChild);//\u6700\u540e\u904d\u5386\u53f3\u5b50\u6811\n}\n//\u4e2d\u5e8f\u904d\u5386\nvoid inOrderTraverse(BiTree T)\n{\nif (T == NULL)\nreturn;\ninOrderTraverse(T-&gt;lChild);\nprintf(\"%c\", T-&gt;data);\ninOrderTraverse(T-&gt;rChild);\n}\n//\u540e\u5e8f\u904d\u5386\nvoid postOrderTraverse(BiTree T)\n{\nif (T == NULL)\nreturn;\npostOrderTraverse(T-&gt;lChild);\npostOrderTraverse(T-&gt;rChild);\nprintf(\"%c\", T-&gt;data);\n}\n</code></pre>"},{"location":"Documents/D-Interview/%E7%AE%97%E6%B3%95%E9%A2%98/#53","title":"5.3 \u7ea2\u9ed1\u6811","text":"<p>\u8d44\u6599\u7ea2\u9ed1\u6811-\u7ef4\u57fa\u767e\u79d1</p>"},{"location":"Documents/D-Interview/%E7%AE%97%E6%B3%95%E9%A2%98/#531","title":"5.3.1 \u6027\u8d28","text":"<ol> <li>\u8282\u70b9\u975e\u9ed1\u5373\u7ea2</li> <li>\u6839\u8282\u70b9\u5fc5\u4e3a\u9ed1</li> <li>\u6bcf\u4e2a\u53f6\u8282\u70b9\uff08NIL\u8282\u70b9\uff09\u90fd\u662f\u9ed1\u8272</li> <li>\u65b0\u63d2\u5165\u8282\u70b9\u5fc5\u4e3a\u7ea2</li> <li>\u4e0d\u80fd\u67092\u4e2a\u8fde\u7eed\u7684\u7ea2\u8272\u8282\u70b9\uff08\u5373\u7236\u8282\u70b9\u548c\u5b50\u8282\u70b9\u90fd\u4e3a\u7ea2\uff09\uff0c\u9ed1\u8272\u8282\u70b9\u4e0d\u9650\u5236\uff0c\u6216\u8005\u8bf4\u6bcf\u4e00\u4e2a\u7ea2\u8272\u8282\u70b9\u5fc5\u542b\u9ed1\u8272\u5de6\u53f3\u5b50\u8282\u70b9</li> <li>\u4ece\u4efb\u610f\u4e00\u8282\u70b9\u5230\u53f6\u5b50\u8282\u70b9\uff0c\u6240\u7ecf\u8fc7\u8def\u5f84\u4e0a\u9ed1\u8272\u8282\u70b9\u6570\u76ee\u76f8\u540c</li> </ol> <pre><code>title: NIL\u8282\u70b9\n1. NIL\u8282\u70b9\u4e5f\u5c31\u662fNULL\u8282\u70b9\n2. \u5728\u7ea2\u9ed1\u6811\u4e2d\u7528NIL\u8282\u70b9\u586b\u8865\u539f\u8282\u70b9\u4e2d\u7f3a\u5931\u7684\u5de6\u53f3\u5b50\u8282\u70b9\n3. \u5728\u7ea2\u9ed1\u6811\u4e2d\u53f6\u5b50\u8282\u70b9\u6307\u7684\u662fNIL\u8282\u70b9\n</code></pre>"},{"location":"Documents/D-Interview/%E7%AE%97%E6%B3%95%E9%A2%98/#532","title":"5.3.2 \u64cd\u4f5c","text":"<p>\u7ea2\u9ed1\u6811\u63d2\u5165\u5220\u9664\u64cd\u4f5c\u4f1a\u5bfc\u81f4\u4e0d\u6ee1\u8db3\u7ea2\u9ed1\u6811\u6027\u8d28\uff0c\u8fd9\u65f6\u53ef\u4ee5\u901a\u8fc7\u65cb\u8f6c\uff08\u5de6\u65cb\u3001\u53f3\u65cb\uff09\uff0c\u91cd\u65b0\u7740\u8272\u64cd\u4f5c\u6765\u7ef4\u6301\u7ea2\u9ed1\u6811\u3002 \u4e0b\u56fe\u5c55\u73b0\u4e86\u7ea2\u9ed1\u6811\u63d2\u5165\u7684\u51e0\u79cd\u60c5\u51b5 </p>"},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/","title":"\u7f51\u7edc\u77e5\u8bc6","text":"<p>\u53c2\u80031 \u53c2\u80032</p>"},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/#1-httphypertext-transfer-protocol","title":"1 HTTP\uff08HyperText-Transfer-Protocol\uff09","text":""},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/#11-http","title":"1.1 HTTP\u534f\u8bae\u683c\u5f0f","text":"<p> HTTP\u7684\u8bf7\u6c42\u548c\u54cd\u5e94\u7684\u6d88\u606f\u534f\u8bae\u662f\u4e00\u6837\u7684\uff0c\u5206\u4e3a\u4e09\u4e2a\u90e8\u5206\uff0c\u8d77\u59cb\u884c\u3001\u6d88\u606f\u5934\u548c\u6d88\u606f\u4f53\u3002\u8fd9\u4e09\u4e2a\u90e8\u5206\u4ee5CRLF\u4f5c\u4e3a\u5206\u9694\u7b26\u3002\u6700\u540e\u4e00\u4e2a\u6d88\u606f\u5934\u6709\u4e24\u4e2aCRLF\uff0c\u7528\u6765\u8868\u793a\u6d88\u606f\u5934\u90e8\u7684\u7ed3\u675f\u3002 1. HTTP\u8bf7\u6c42\u7684\u8d77\u59cb\u884c\u79f0\u4e3a\u8bf7\u6c42\u884c\uff0c\u5f62\u5982<code>GET /index.html HTTP/1.1</code> 2. HTTP\u54cd\u5e94\u7684\u8d77\u59cb\u884c\u79f0\u4e3a\u72b6\u6001\u884c\uff0c\u5f62\u5982<code>200 ok</code> 3. \u6d88\u606f\u5934\u90e8\u6709\u5f88\u591a\u952e\u503c\u5bf9\u7ec4\u6210\uff0c\u591a\u4e2a\u952e\u503c\u5bf9\u4e4b\u95f4\u4f7f\u7528CRLF\u4f5c\u4e3a\u5206\u9694\u7b26\uff0c\u4e5f\u53ef\u4ee5\u5b8c\u5168\u6ca1\u6709\u952e\u503c\u5bf9\u3002\u5f62\u5982<code>Content-Encoding: gzip</code> 4. \u6d88\u606f\u4f53\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u662f\u7531\u6d88\u606f\u5934\u90e8\u7684Content-Length\u952e\u6307\u5b9a\u7684\u3002</p> <p>\u5ba2\u6237\u7aef\u62a5\u6587\u793a\u4f8b  </p> <pre><code>GET /hello.txt HTTP/1.1\nUser-Agent: curl/7.16.3 libcurl/7.16.3 OpenSSL/0.9.7l zlib/1.2.3\nHost: www.example.com\nAccept-Language: en, mi\n</code></pre> <p>\u670d\u52a1\u7aef\u54cd\u5e94\u62a5\u6587\u793a\u4f8b </p> <pre><code>HTTP/1.1 200 OK\nDate: Mon, 27 Jul 2009 12:28:53 GMT\nServer: Apache\nLast-Modified: Wed, 22 Jul 2009 19:15:56 GMT\nETag: \"34aa387-d-1568eb00\"\nAccept-Ranges: bytes\nContent-Length: 51\nVary: Accept-Encoding\nContent-Type: text/plain\n</code></pre> <pre><code>GET\u3001HEAD\u8bf7\u6c42\u6ca1\u6709\u6d88\u606f\u4f53\uff0cPOST\u3001PUT\u8bf7\u6c42\u6709\u6d88\u606f\u4f53\n</code></pre>"},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/#12-http","title":"1.2 http\u72b6\u6001\u7801","text":"\u72b6\u6001\u7801 \u72b6\u6001\u7801\u82f1\u6587\u540d\u79f0 \u4e2d\u6587\u63cf\u8ff0 200 OK \u8bf7\u6c42\u6210\u529f\u3002\u4e00\u822c\u7528\u4e8eGET\u4e0ePOST\u8bf7\u6c42 301 Moved Permanently \u6c38\u4e45\u6027\u91cd\u5b9a\u5411\u3002\u8bf7\u6c42\u7684\u8d44\u6e90\u5df2\u88ab\u6c38\u4e45\u7684\u79fb\u52a8\u5230\u65b0URI\uff0c\u8fd4\u56de\u4fe1\u606f\u4f1a\u5305\u62ec\u65b0\u7684URI\uff0c\u6d4f\u89c8\u5668\u4f1a\u81ea\u52a8\u5b9a\u5411\u5230\u65b0URI\u3002\u4eca\u540e\u4efb\u4f55\u65b0\u7684\u8bf7\u6c42\u90fd\u5e94\u4f7f\u7528\u65b0\u7684URI\u4ee3\u66ff 302 Found \u4e34\u65f6\u6027\u91cd\u5b9a\u5411\u3002\u4e0e301\u7c7b\u4f3c\u3002\u4f46\u8d44\u6e90\u53ea\u662f\u4e34\u65f6\u88ab\u79fb\u52a8\u3002\u5ba2\u6237\u7aef\u5e94\u7ee7\u7eed\u4f7f\u7528\u539f\u6709URI 304 Not Modified \u6781\u5c11\u4eba\u77e5\u9053\u8fd9\u4e2a\u9519\u8bef\uff0c\u56e0\u4e3a\u5927\u90e8\u5206\u540e\u7aef\u5f00\u53d1\u8005\u7684\u524d\u7aefJavascript\u5f00\u53d1\u7ecf\u9a8c\u90fd\u4e25\u91cd\u4e0d\u8db3\u3002\u5f53\u4f60\u7528Chrome\u6253\u5f00\u4e00\u4e2a\u7ecf\u5e38\u8bbf\u95ee\u7684\u7f51\u7ad9\uff0c\u770b\u770bNetwork\u4f20\u8f93\u7684\u9759\u6001\u8d44\u6e90\u5c31\u53ef\u4ee5\u770b\u5230\u5f88\u591a304\u72b6\u6001\u7801\u3002\u5b83\u8868\u793a\u8be5\u8d44\u6e90\u88ab\u6d4f\u89c8\u5668\u7f13\u5b58\u4e86\u4e0d\u9700\u8981\u91cd\u65b0\u8bf7\u6c42\u670d\u52a1\u5668\u3002 400 Bad Request \u7528\u4e8e\u53c2\u6570\u9a8c\u8bc1\uff0c\u5c11\u4e86\u4e00\u4e2a\u53c2\u6570\u6216\u8005\u53c2\u6570\u7c7b\u578b\u9519\u8bef\u4e4b\u7c7b\u7684\u3002 401 Unauthorized \u6743\u9650\u4e0d\u8db3\uff0c\u8fd9\u4e2a\u5f88\u597d\u7406\u89e3\uff0c\u5c31\u662f\u8d44\u6e90\u5b58\u5728\u4f46\u662f\u4e0d\u8ba9\u4f60\u8bbf\u95ee\u3002 403 Forbidden \u8d44\u6e90\u7981\u6b62\u8bbf\u95ee\uff0c\u5982\u679c\u4f60\u7684IP\u5217\u4e3a\u9ed1\u540d\u5355\u4e86\uff0c\u5c31\u4f1a\u53d1\u751f\u8fd9\u79cd\u9519\u8bef\u3002 404 Not Found \u670d\u52a1\u5668\u65e0\u6cd5\u6839\u636e\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u627e\u5230\u8d44\u6e90\uff08\u7f51\u9875\uff09\u3002\u901a\u8fc7\u6b64\u4ee3\u7801\uff0c\u7f51\u7ad9\u8bbe\u8ba1\u4eba\u5458\u53ef\u8bbe\u7f6e\"\u60a8\u6240\u8bf7\u6c42\u7684\u8d44\u6e90\u65e0\u6cd5\u627e\u5230\"\u7684\u4e2a\u6027\u9875\u9762\u3002\u4e5f\u53ef\u4ee5\u5728\u670d\u52a1\u5668\u62d2\u7edd\u8bf7\u6c42\u4e14\u4e0d\u60f3\u8bf4\u660e\u7406\u7531\u65f6\u4f7f\u7528 500 Internal Server Errorv \u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef\uff0c\u65e0\u6cd5\u5b8c\u6210\u8bf7\u6c42\uff0c\u4e5f\u53ef\u80fd\u662fweb\u5e94\u7528\u5b58\u5728bug\u6216\u67d0\u4e9b\u4e34\u65f6\u6545\u969c 502 Bad Gateway \u540e\u7aef\u670d\u52a1\u6302\u6389\u6216\u8005\u538b\u529b\u8fc7\u5927\u7684\u65f6\u5019\uff0c Nginx\u63a5\u5230\u7684\u8bf7\u6c42\u65e0\u6cd5\u53ca\u65f6\u4f20\u9012\u7ed9\u540e\u7aef\u7684\u670d\u52a1\u8fdb\u884c\u5904\u7406\uff0c\u8fd9\u4e2a\u65f6\u5019\u5c31\u4f1a\u51fa\u73b0502\u9519\u8bef\u3002\u8fd9\u4e2a\u4e5f\u975e\u5e38\u5e38\u89c1\uff0c\u77e5\u4e4e\u8c46\u74e3\u7f51\u7ad9\u7ecf\u5e38\u5f00\u5c0f\u5dee\u7684\u65f6\u5019\u53d1\u751f\u7684\u9519\u8bef\u5c31\u662f\u8fd9\u4e2a\u3002 <p>\u53c2\u8003https://juejin.cn/post/6844904202863394830</p>"},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/#13-http","title":"1.3 HTTP\u8bf7\u6c42\u65b9\u6cd5","text":""},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/#131-get","title":"1.3.1 GET","text":"<ol> <li>GET \u662f\u6700\u5e38\u7528\u7684\u65b9\u6cd5\u3002\u901a\u5e38\u7528\u4e8e\u8bf7\u6c42\u670d\u52a1\u5668\u53d1\u9001\u67d0\u4e2a\u8d44\u6e90</li> </ol>"},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/#132-head","title":"1.3.2 HEAD","text":"<p>\u7c7b\u4f3c\u4e8e GET \u8bf7\u6c42\uff0c\u53ea\u4e0d\u8fc7\u8fd4\u56de\u7684\u54cd\u5e94\u4e2d\u6ca1\u6709\u5177\u4f53\u7684\u5185\u5bb9\uff0c\u7528\u4e8e\u83b7\u53d6\u62a5\u5934</p>"},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/#133-post","title":"1.3.3 POST","text":"<p>POST \u65b9\u6cd5\u8d77\u521d\u662f\u7528\u6765\u5411\u670d\u52a1\u5668\u8f93\u5165\u6570\u636e\u7684\u3002\u5b9e\u9645\u4e0a\uff0c\u901a\u5e38\u4f1a\u7528\u5b83\u6765\u652f\u6301 HTML \u7684\u8868\u5355\u3002\u8868\u5355\u4e2d\u586b\u597d\u7684\u6570\u636e\u901a\u5e38\u4f1a\u88ab\u9001\u7ed9\u670d\u52a1\u5668\uff0c\u7136\u540e\u7531\u670d\u52a1\u5668\u5c06\u5176\u53d1\u9001\u5230\u5b83\u8981\u53bb\u7684\u5730\u65b9(\u6bd4\u5982\uff0c\u9001\u5230\u4e00\u4e2a\u670d\u52a1\u5668\u7f51\u5173\u7a0b\u5e8f\u4e2d\uff0c\u7136\u540e\u7531\u8fd9\u4e2a\u7a0b\u5e8f\u5bf9\u5176\u8fdb\u884c\u5904\u7406)\u3002 </p>"},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/#134-put","title":"1.3.4 PUT","text":"<p>\u4ece\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u4f20\u9001\u7684\u6570\u636e\u53d6\u4ee3\u6307\u5b9a\u7684\u6587\u6863\u7684\u5185\u5bb9\u3002\u4e0e GET \u4ece\u670d\u52a1\u5668\u8bfb\u53d6\u6587\u6863\u76f8\u53cd\uff0cPUT \u65b9\u6cd5\u4f1a\u5411\u670d\u52a1\u5668\u5199\u5165\u6587\u6863\u3002\u6709\u4e9b\u53d1\u5e03\u7cfb\u7edf\u5141\u8bb8\u7528\u6237\u521b\u5efa Web \u9875\u9762\uff0c\u5e76\u7528 PUT \u76f4\u63a5\u5c06\u5176\u5b89\u88c5\u5230 Web \u670d\u52a1\u5668\u4e0a\u53bb\u3002</p>"},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/#14-urluniform-resource-locator","title":"1.4 \u7f51\u5740\uff0cURL\uff08Uniform Resource Locator \uff09\uff0c\u57df\u540d","text":"<p>\u7f51\u5740\u4e00\u822c\u53c8\u79f0URL\u6216\u57df\u540d\uff0c\u4f46\u57df\u540d\u548c\u7f51\u5740\u95f4\u8fd8\u662f\u6709\u70b9\u533a\u522b\u7684\u3002 \u5982<code>https://www.baidu.com</code>\uff0c\u57df\u540d\u6307<code>baidu.com</code>,\u7f51\u5740\u548curl\u662f<code>https://www.baidu.com</code></p>"},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/#15","title":"1.5 \u7f51\u5740\u7ec4\u6210","text":""},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/#16","title":"1.6 \u57df\u540d\u7ed3\u6784","text":"<p>\u57df\u540d\u7ed3\u6784\u5c42\u6b21\uff1a\u4e3b\u673a\u540d.\u673a\u6784\u540d.\u7f51\u7edc\u540d.\u9876\u7ea7\u57df\u540d  </p>"},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/#17","title":"1.7 \u57df\u540d\u670d\u52a1\u5668","text":"<p>13\u4e2a\u6839\u57df\u540dhttps://www.internic.net/domain/named.root </p>"},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/#18","title":"1.8 \u57df\u540d\u89e3\u6790\u8fc7\u7a0b","text":"<p>\u57df\u540d\u89e3\u6790\u6b65\u9aa4\uff1a 1. \u6d4f\u89c8\u5668\u7f13\u5b58    - \u5f53\u7528\u6237\u901a\u8fc7\u6d4f\u89c8\u5668\u8bbf\u95ee\u67d0\u57df\u540d\u65f6\uff0c\u6d4f\u89c8\u5668\u9996\u5148\u4f1a\u5728\u81ea\u5df1\u7684\u7f13\u5b58\u4e2d\u67e5\u627e\u662f\u5426\u6709\u8be5\u57df\u540d\u5bf9\u5e94\u7684IP\u5730\u5740\uff08\u82e5\u66fe\u7ecf\u8bbf\u95ee\u8fc7\u8be5\u57df\u540d\u4e14\u6ca1\u6709\u6e05\u7a7a\u7f13\u5b58\u4fbf\u5b58\u5728\uff09\uff1b 2. \u7cfb\u7edf\u7f13\u5b58    - \u5f53\u6d4f\u89c8\u5668\u7f13\u5b58\u4e2d\u65e0\u57df\u540d\u5bf9\u5e94IP\u5219\u4f1a\u81ea\u52a8\u68c0\u67e5\u7528\u6237\u8ba1\u7b97\u673a\u7cfb\u7edfHosts\u6587\u4ef6DNS\u7f13\u5b58\u662f\u5426\u6709\u8be5\u57df\u540d\u5bf9\u5e94IP\uff1b 3. \u8def\u7531\u5668\u7f13\u5b58    - \u5f53\u6d4f\u89c8\u5668\u53ca\u7cfb\u7edf\u7f13\u5b58\u4e2d\u5747\u65e0\u57df\u540d\u5bf9\u5e94IP\u5219\u8fdb\u5165\u8def\u7531\u5668\u7f13\u5b58\u4e2d\u68c0\u67e5\uff0c\u4ee5\u4e0a\u4e09\u6b65\u5747\u4e3a\u5ba2\u670d\u7aef\u7684DNS\u7f13\u5b58\uff1b 4. ISP\uff08\u4e92\u8054\u7f51\u670d\u52a1\u63d0\u4f9b\u5546\uff09DNS\u7f13\u5b58    - \u5f53\u5728\u7528\u6237\u5ba2\u670d\u7aef\u67e5\u627e\u4e0d\u5230\u57df\u540d\u5bf9\u5e94IP\u5730\u5740\uff0c\u5219\u5c06\u8fdb\u5165ISP DNS\u7f13\u5b58\u4e2d\u8fdb\u884c\u67e5\u8be2\u3002\u6bd4\u5982\u4f60\u7528\u7684\u662f\u7535\u4fe1\u7684\u7f51\u7edc\uff0c\u5219\u4f1a\u8fdb\u5165\u7535\u4fe1\u7684DNS\u7f13\u5b58\u670d\u52a1\u5668\u4e2d\u8fdb\u884c\u67e5\u627e\uff1b 5. \u6839\u57df\u540d\u670d\u52a1\u5668    - \u5f53\u4ee5\u4e0a\u5747\u672a\u5b8c\u6210\uff0c\u5219\u8fdb\u5165\u6839\u670d\u52a1\u5668\u8fdb\u884c\u67e5\u8be2\u3002\u5168\u7403\u4ec5\u670913\u53f0\u6839\u57df\u540d\u670d\u52a1\u5668\uff0c1\u4e2a\u4e3b\u6839\u57df\u540d\u670d\u52a1\u5668\uff0c\u5176\u4f5912\u4e3a\u8f85\u6839\u57df\u540d\u670d\u52a1\u5668\u3002\u6839\u57df\u540d\u6536\u5230\u8bf7\u6c42\u540e\u4f1a\u67e5\u770b\u533a\u57df\u6587\u4ef6\u8bb0\u5f55\uff0c\u82e5\u65e0\u5219\u5c06\u5176\u7ba1\u8f96\u8303\u56f4\u5185\u9876\u7ea7\u57df\u540d\uff08\u5982.com\uff09\u670d\u52a1\u5668IP\u544a\u8bc9\u672c\u5730DNS\u670d\u52a1\u5668\uff1b 6. \u9876\u7ea7\u57df\u540d\u670d\u52a1\u5668    - \u9876\u7ea7\u57df\u540d\u670d\u52a1\u5668\u6536\u5230\u8bf7\u6c42\u540e\u67e5\u770b\u533a\u57df\u6587\u4ef6\u8bb0\u5f55\uff0c\u82e5\u65e0\u5219\u5c06\u5176\u7ba1\u8f96\u8303\u56f4\u5185\u4e3b\u57df\u540d\u670d\u52a1\u5668\u7684IP\u5730\u5740\u544a\u8bc9\u672c\u5730DNS\u670d\u52a1\u5668\uff1b 7. \u4e3b\u57df\u540d\u670d\u52a1\u5668    - \u4e3b\u57df\u540d\u670d\u52a1\u5668\u63a5\u53d7\u5230\u8bf7\u6c42\u540e\u67e5\u8be2\u81ea\u5df1\u7684\u7f13\u5b58\uff0c\u5982\u679c\u6ca1\u6709\u5219\u8fdb\u5165\u4e0b\u4e00\u7ea7\u57df\u540d\u670d\u52a1\u5668\u8fdb\u884c\u67e5\u627e\uff0c\u5e76\u91cd\u590d\u8be5\u6b65\u9aa4\u76f4\u81f3\u627e\u5230\u6b63\u786e\u7eaa\u5f55\uff1b 8. \u4fdd\u5b58\u7ed3\u679c\u81f3\u7f13\u5b58    - \u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u628a\u8fd4\u56de\u7684\u7ed3\u679c\u4fdd\u5b58\u5230\u7f13\u5b58\uff0c\u4ee5\u5907\u4e0b\u4e00\u6b21\u4f7f\u7528\uff0c\u540c\u65f6\u5c06\u8be5\u7ed3\u679c\u53cd\u9988\u7ed9\u5ba2\u6237\u7aef\uff0c\u5ba2\u6237\u7aef\u901a\u8fc7\u8fd9\u4e2aIP\u5730\u5740\u4e0eweb\u670d\u52a1\u5668\u5efa\u7acb\u94fe\u63a5\u3002</p> <p></p>"},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/#19-dns","title":"1.9 DNS\u9012\u5f52\u67e5\u8be2\u548c\u8fed\u4ee3\u67e5\u8be2","text":"<ul> <li>\u9012\u5f52\u67e5\u8be2\uff1a\u4e3b\u673a\u5411\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u7684\u67e5\u8be2\u4e00\u822c\u90fd\u662f\u91c7\u7528\u9012\u5f52\u67e5\u8be2</li> <li>\u7279\u70b9\uff1a\u672c\u5730DNS\u670d\u52a1\u5668\u53ea\u8fd4\u56de\u4e00\u6b21\u7ed3\u679c\u7ed9\u5ba2\u6237\u7aef</li> <li>\u8fed\u4ee3\u67e5\u8be2\uff1a\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u5411\u6839\u57df\u540d\u670d\u52a1\u5668\u7684\u67e5\u8be2\u7684\u8fed\u4ee3\u67e5\u8be2\u3002</li> <li>\u7279\u70b9\uff1a\u672c\u5730DNS\u670d\u52a1\u5668\u591a\u6b21\u4e0e\u9876\u5c42DNS\u670d\u52a1\u5668\u901a\u4fe1 </li> </ul>"},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/#110-dns","title":"1.10 \u5982\u4f55\u5237\u65b0dns\u7f13\u5b58","text":"<p>windows\u4e0a</p> <pre><code>ipconfig /flushdns\n</code></pre>"},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/#111","title":"1.11 \u4ece\u6d4f\u89c8\u5668\u8f93\u5165\u7f51\u5740\u53d1\u751f\u4e86\u4ec0\u4e48","text":"<p>\u53c2\u8003https://juejin.cn/post/6844903922084085773 \u5927\u81f4\u6b65\u9aa4\u5982\u4e0b\uff1a 1. URL \u89e3\u6790 2. DNS \u67e5\u8be2 3. TCP \u8fde\u63a5 4. \u5904\u7406\u8bf7\u6c42 5. \u63a5\u53d7\u54cd\u5e94 6. \u6e32\u67d3\u9875\u9762</p>"},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/#2","title":"2 \u7f51\u7edc\u6a21\u578b","text":""},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/#21-osi","title":"2.1 OSI\u4e03\u5c42\u7f51\u7edc\u6a21\u578b","text":"<ol> <li>\u7269\u7406\u5c42 (Physical Layer)\uff1a\u7269\u7406\u5c42\u662f OSI \u53c2\u8003\u6a21\u578b\u7684\u6700\u4f4e\u5c42\uff0c\u5b83\u5229\u7528\u4f20\u8f93\u4ecb\u8d28\u4e3a\u6570\u636e\u94fe\u8def\u5c42\u63d0\u4f9b\u7269\u7406\u8fde\u63a5\u3002\u5b83\u4e3b\u8981\u5173\u5fc3\u7684\u662f\u901a\u8fc7\u7269\u7406\u94fe\u8def\u4ece\u4e00\u4e2a\u8282\u70b9\u5411\u53e6\u4e00\u4e2a\u8282\u70b9\u4f20\u9001\u6bd4\u7279\u6d41\uff0c\u7269\u7406\u94fe\u8def\u53ef\u80fd\u662f\u94dc\u7ebf\u3001\u536b\u661f\u3001\u5fae\u6ce2\u6216\u5176\u4ed6\u7684\u901a\u8baf\u5a92\u4ecb\u3002\u5b83\u5173\u5fc3\u7684\u95ee\u9898\u6709\uff1a\u591a\u5c11\u4f0f\u7535\u538b\u4ee3\u8868 1 \uff1f\u591a\u5c11\u4f0f\u7535\u538b\u4ee3\u8868 0 \uff1f\u65f6\u949f\u901f\u7387\u662f\u591a\u5c11\uff1f\u91c7\u7528\u5168\u53cc\u5de5\u8fd8\u662f\u534a\u53cc\u5de5\u4f20\u8f93\uff1f\u603b\u7684\u6765\u8bf4\u7269\u7406\u5c42\u5173\u5fc3\u7684\u662f\u94fe\u8def\u7684\u673a\u68b0\u3001\u7535\u6c14\u3001\u529f\u80fd\u548c\u89c4\u7a0b\u7279\u6027\u3002</li> <li>\u6570\u636e\u94fe\u8def\u5c42 (Data Link Layer)\uff1a\u6570\u636e\u94fe\u8def\u5c42\u662f\u4e3a\u7f51\u7edc\u5c42\u63d0\u4f9b\u670d\u52a1\u7684\uff0c\u89e3\u51b3\u4e24\u4e2a\u76f8\u90bb\u7ed3\u70b9\u4e4b\u95f4\u7684\u901a\u4fe1\u95ee\u9898\uff0c\u4f20\u9001\u7684\u534f\u8bae\u6570\u636e\u5355\u5143\u79f0\u4e3a\u6570\u636e\u5e27\u3002\u6570\u636e\u5e27\u4e2d\u5305\u542b\u7269\u7406\u5730\u5740\uff08\u53c8\u79f0 MAC \u5730\u5740\uff09\u3001\u63a7\u5236\u7801\u3001\u6570\u636e\u53ca\u6821\u9a8c\u7801\u7b49\u4fe1\u606f\u3002\u8be5\u5c42\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u901a\u8fc7\u6821\u9a8c\u3001\u786e\u8ba4\u548c\u53cd\u9988\u91cd\u53d1\u7b49\u624b\u6bb5\uff0c\u5c06\u4e0d\u53ef\u9760\u7684\u7269\u7406\u94fe\u8def\u8f6c\u6362\u6210\u5bf9\u7f51\u7edc\u5c42\u6765\u8bf4\u65e0\u5dee\u9519\u7684\u6570\u636e\u94fe\u8def\u3002\u6b64\u5916\uff0c\u6570\u636e\u94fe\u8def\u5c42\u8fd8\u8981\u534f\u8c03\u6536\u53d1\u53cc\u65b9\u7684\u6570\u636e\u4f20\u8f93\u901f\u7387\uff0c\u5373\u8fdb\u884c\u6d41\u91cf\u63a7\u5236\uff0c\u4ee5\u9632\u6b62\u63a5\u6536\u65b9\u56e0\u6765\u4e0d\u53ca\u5904\u7406\u53d1\u9001\u65b9\u6765\u7684\u9ad8\u901f\u6570\u636e\u800c\u5bfc\u81f4\u7f13\u51b2\u5668\u6ea2\u51fa\u53ca\u7ebf\u8def\u963b\u585e\u3002</li> <li>\u7f51\u7edc\u5c42 (Network Layer)\uff1a\u7f51\u7edc\u5c42\u662f\u4e3a\u4f20\u8f93\u5c42\u63d0\u4f9b\u670d\u52a1\u7684\uff0c\u4f20\u9001\u7684\u534f\u8bae\u6570\u636e\u5355\u5143\u79f0\u4e3a\u6570\u636e\u5305\uff08\u5206\u7ec4\uff09\u3002\u8be5\u5c42\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u89e3\u51b3\u5982\u4f55\u4f7f\u6570\u636e\u5305\u901a\u8fc7\u5404\u7ed3\u70b9\u4f20\u9001\u7684\u95ee\u9898\uff0c\u5373\u901a\u8fc7\u8def\u5f84\u9009\u62e9\u7b97\u6cd5\uff08\u8def\u7531\uff09\u5c06\u6570\u636e\u5305\u9001\u5230\u76ee\u7684\u5730\u3002\u53e6\u5916\uff0c\u4e3a\u907f\u514d\u901a\u4fe1\u5b50\u7f51\u4e2d\u51fa\u73b0\u8fc7\u591a\u7684\u6570\u636e\u5305\u800c\u9020\u6210\u7f51\u7edc\u963b\u585e\uff0c\u9700\u8981\u5bf9\u6d41\u5165\u7684\u6570\u636e\u5305\u6570\u91cf\u8fdb\u884c\u63a7\u5236\uff08\u62e5\u585e\u63a7\u5236\uff09\u3002\u5f53\u6570\u636e\u5305\u8981\u8de8\u8d8a\u591a\u4e2a\u901a\u4fe1\u5b50\u7f51\u624d\u80fd\u5230\u8fbe\u76ee\u7684\u5730\u65f6\uff0c\u8fd8\u8981\u89e3\u51b3\u7f51\u9645\u4e92\u8fde\u7684\u95ee\u9898\u3002</li> <li>\u4f20\u8f93\u5c42 (Transport Layer)\uff1a\u4f20\u8f93\u5c42\u7684\u4f5c\u7528\u662f\u4e3a\u4e0a\u5c42\u534f\u8bae\u63d0\u4f9b\u7aef\u5230\u7aef\u7684\u53ef\u9760\u548c\u900f\u660e\u7684\u6570\u636e\u4f20\u8f93\u670d\u52a1\uff0c\u5305\u62ec\u5904\u7406\u5dee\u9519\u63a7\u5236\u548c\u6d41\u91cf\u63a7\u5236\u7b49\u95ee\u9898\uff0c\u4f20\u8f93\u5c42\u4f20\u9001\u7684\u534f\u8bae\u6570\u636e\u5355\u5143\u79f0\u4e3a\u6570\u636e\u6bb5\uff08\u62a5\u6587\uff09\u3002\u8be5\u5c42\u5411\u9ad8\u5c42\u5c4f\u853d\u4e86\u4e0b\u5c42\u6570\u636e\u901a\u4fe1\u7684\u7ec6\u8282\uff0c\u4f7f\u9ad8\u5c42\u7528\u6237\u770b\u5230\u7684\u53ea\u662f\u5728\u4e24\u4e2a\u4f20\u8f93\u5b9e\u4f53\u95f4\u7684\u4e00\u6761\u4e3b\u673a\u5230\u4e3b\u673a\u7684\u3001\u53ef\u7531\u7528\u6237\u63a7\u5236\u548c\u8bbe\u5b9a\u7684\u3001\u53ef\u9760\u7684\u6570\u636e\u901a\u8def\u3002</li> <li>\u4f1a\u8bdd\u5c42 (Session Layer)\uff1a\u4f1a\u8bdd\u5c42\u4e3b\u8981\u529f\u80fd\u662f\u7ba1\u7406\u548c\u534f\u8c03\u4e0d\u540c\u4e3b\u673a\u4e0a\u5404\u79cd\u8fdb\u7a0b\u4e4b\u95f4\u7684\u901a\u4fe1\uff08\u5bf9\u8bdd\uff09\uff0c\u5373\u8d1f\u8d23\u5efa\u7acb\u3001\u7ba1\u7406\u548c\u7ec8\u6b62\u5e94\u7528\u7a0b\u5e8f\u4e4b\u95f4\u7684\u4f1a\u8bdd\u3002\u4f1a\u8bdd\u5c42\u5f97\u540d\u7684\u539f\u56e0\u662f\u5b83\u5f88\u7c7b\u4f3c\u4e8e\u4e24\u4e2a\u5b9e\u4f53\u95f4\u7684\u4f1a\u8bdd\u6982\u5ff5\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a\u4ea4\u4e92\u7684\u7528\u6237\u4f1a\u8bdd\u4ee5\u767b\u5f55\u5230\u8ba1\u7b97\u673a\u5f00\u59cb\uff0c\u4ee5\u6ce8\u9500\u7ed3\u675f\u3002</li> <li>\u8868\u793a\u5c42 (Presentation Layer)\uff1a\u6570\u636e\u538b\u7f29\u3001\u52a0\u5bc6\u4ee5\u53ca\u6570\u636e\u63cf\u8ff0\uff0c\u8fd9\u4f7f\u5f97\u5e94\u7528\u7a0b\u5e8f\u4e0d\u5fc5\u5173\u5fc3\u5728\u5404\u53f0\u4e3b\u673a\u4e2d\u6570\u636e\u5185\u90e8\u683c\u5f0f\u4e0d\u540c\u7684\u95ee\u9898\u3002</li> <li>\u5e94\u7528\u5c42 (Application Layer)\uff1a\u5e94\u7528\u5c42\u662f OSI \u53c2\u8003\u6a21\u578b\u7684\u6700\u9ad8\u5c42\uff0c\u662f\u7528\u6237\u4e0e\u7f51\u7edc\u7684\u63a5\u53e3\u3002\u8be5\u5c42\u901a\u8fc7\u5e94\u7528\u7a0b\u5e8f\u6765\u5b8c\u6210\u7f51\u7edc\u7528\u6237\u7684\u5e94\u7528\u9700\u6c42\uff0c\u5982\u6587\u4ef6\u4f20\u8f93\u3001\u6536\u53d1\u7535\u5b50\u90ae\u4ef6\u7b49\u3002</li> </ol> <pre><code>DNS\u5c5e\u4e8e\u5e94\u7528\u5c42\u534f\u8bae\n</code></pre>"},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/#22-tcpip","title":"2.2 TCP/IP\u6a21\u578b","text":"<p>TCP/IP\u6a21\u5f0f\u7b80\u5316\u4e86OSI\u6a21\u578b\uff0c\u53ea\u5206\u56db\u5c42 </p>"},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/#221-ip","title":"2.2.1 IP","text":"<p>IP \u5730\u5740\u88ab\u5206\u4e3a 5 \u4e2a\u7c7b\u522b  \u6b64\u5916\u8fd8\u6709\u79c1\u6709\u5730\u5740\uff0c\u4e0d\u4f1a\u5728internet\u7f51\u4e0a\u51fa\u73b0\uff0c\u7528\u4e8e\u4f01\u4e1a\u7f51\u7edc\uff08\u5185\u7f51\uff09 - 1 \u4e2aA\u7c7b\u5730\u5740\uff1a10.0.0.0~10.255.255.255/8 ($2^{24}$ \u4e2a\u5730\u5740) - 16 \u4e2aB\u7c7b\u5730\u5740\uff1a172.16.0.0~172.31.255.255/16 ($162^{16}$ \u4e2a\u5730\u5740) - 256\u4e2aC\u7c7b\u5730\u5740\uff1a192.168.0.0~192.168.255.255/24 ($2562^8$ \u4e2a\u5730\u5740)</p> <p>\u8868\u4e00:IP\u5730\u5740\u7684\u5206\u914d\u8303\u56f4</p> \u7f51\u7edc\u7c7b\u522b \u6700\u5927\u53ef\u5206\u914d\u7f51\u7edc\u6570 \u7b2c\u4e00\u4e2a\u53ef\u5206\u914d\u7f51\u7edc\u53f7 \u6700\u540e\u4e00\u4e2a\u53ef\u5206\u914d\u7f51\u7edc\u53f7 \u6bcf\u4e00\u4e2a\u7f51\u7edc\u4e2d\u4e3b\u673a\u6700\u5927\u6570 A $2^{7}-2$ 1 126 $2^{24}-2$ B $2^{14}-1$ 128.1 191.255 $2^{16}-2$ C $2^{21}-1$ 192.0.1 223.255.255 $2^{8}-2$ <p>\u8868\u4e8c:\u7279\u6b8a\u7684IP\u5730\u5740</p> \u7f51\u7edc\u53f7 \u4e3b\u673a\u53f7 \u8303\u56f4 \u6e90\u5730\u5740\u4f7f\u7528 \u76ee\u7684\u5730\u5740\u4f7f\u7528 \u542b\u4e49 0 0 0.0.0.0 \u53ef\u4ee5 \u4e0d\u53ef\u4ee5 \u5728\u672c\u7f51\u7edc\u4e0a\u7684\u672c\u4e3b\u673a 127 \u975e\u51680\u6216\u975e\u51681 \u53ef\u4ee5 \u53ef\u4ee5 \u7528\u4e8e\u672c\u5730\u8f6f\u4ef6\u73af\u56de\u6d4b\u8bd5 <p></p> <p>IP\u6570\u636e\u5305\u7ed3\u6784\u7ec4\u6210\u5982\u4e0b\uff1a  IP\u6570\u636e\u5305\u4e2d\u8bb0\u5f55\u4e86(\u90e8\u5206) - \u6e90IP\u5730\u5740\uff08Source Addresses\uff09 - \u76ee\u6807IP\u5730\u5740\uff08Destination Addresses\uff09 - \u5206\u6bb5\u5e8f\u53f7\uff08Fragment Offset\uff09 - \u751f\u5b58\u65f6\u95f4\uff08TTL\uff09 - \u4e0a\u5c42\u534f\u8bae\u7c7b\u578b(Protocol):\u7528\u4e8e\u6807\u8bc6\u6570\u636e\u5757\u4ea4\u4ed8\u7ed9udp\u8fd8\u662ftcp\u6216\u8005icmp\u7b49\u3002 - IP\u6570\u636e\u62a5\u957f\u5ea6\uff08Total Length)\uff1a$2^{16}-1=65535$\uff0c\u4f46\u8981\u53d7MTU\uff08Maximum Transmission Unit\uff09\u9650\u5236\uff0cMTU\u4e00\u822c1500\u5b57\u8282</p> <pre><code>title: IP\u5934\u90e8\u5b57\u8282\u6570\nIP\u5934\u90e8\u8303\u56f420~60\u5b57\u8282\u3002\nIP\u5934\u90e8\u5b57\u8282\u6570\u7531IHL\uff08\u53604bit\uff09\u6807\u8bc6\uff0c\u8ba1\u7b97\u516c\u5f0f=$IHL*4byte$,IHL\u53604bit\uff0c\u6700\u5927\u8868\u793a15\uff0c\u6240\u4ee5\u6700\u5927\u503c\u662f60.\n</code></pre> <pre><code>title: TTL\u4f5c\u7528\nTTL\u957f\u5ea68 bit\uff0c\u6700\u5927\u503c\u662f255\uff0cTTL\u7684\u4e00\u4e2a\u63a8\u8350\u503c\u662f64\u3002\u867d\u7136\u4ece\u5b57\u9762\u4e0a\u7ffb\u8bd1\uff0cTTL\u662fIP\u6570\u636e\u5305\u5728\u8ba1\u7b97\u673a\u7f51\u7edc\u4e2d\u7684\u5b58\u5728\u7684\u6700\u957f\u65f6\u95f4\u3002\u4f46\u5b9e\u9645\u4e0aTTL\u662fIP\u6570\u636e\u5305\u5728\u7f51\u7edc\u4e2d\u53ef\u4ee5\u8f6c\u53d1\u7684\u6700\u5927\u8df3\u6570\u3002TTL\u5b57\u6bb5\u7531IP\u6570\u636e\u5305\u7684\u53d1\u9001\u8005\u8bbe\u7f6e\uff0c\u5728IP\u6570\u636e\u5305\u4ece\u6e90\u5230\u76ee\u7684\u7684\u6574\u4e2a\u8f6c\u53d1\u8def\u5f84\u4e0a\uff0c\u6bcf\u7ecf\u8fc7\u4e00\u4e2a\u8def\u7531\u5668\uff0c\u628a\u8be5TTL\u7684\u503c\u51cf1\uff0c\u7136\u540e\u518d\u5c06IP\u5305\u8f6c\u53d1\u51fa\u53bb\u3002\u5982\u679c\u5728IP\u5305\u5230\u8fbe\u76ee\u7684IP\u4e4b\u524d\uff0cTTL\u51cf\u5c11\u4e3a0\uff0c\u8def\u7531\u5668\u5c06\u4f1a\u4e22\u5f03\u6536\u5230\u7684TTL=0\u7684IP\u5305\u5e76\u5411\u53d1\u9001\u8005\u53d1\u9001 ICMP time exceeded\u6d88\u606f\u3002TTL\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u907f\u514dIP\u5305\u5728\u7f51\u7edc\u4e2d\u7684\u65e0\u9650\u5faa\u73af\u548c\u6536\u53d1\uff0c\u8282\u7701\u4e86\u7f51\u7edc\u5e26\u5bbd\uff0c\u5e76\u80fd\u4f7fIP\u5305\u7684\u53d1\u9001\u8005\u80fd\u6536\u5230\u544a\u8b66\u6d88\u606f\u3002\u8fd9\u4e2a\u5b57\u6bb5\u53ef\u4ee5\u9632\u6b62\u7531\u4e8e\u6545\u969c\u800c\u5bfc\u81f4IP\u5305\u5728\u7f51\u7edc\u4e2d\u4e0d\u505c\u88ab\u8f6c\u53d1\u3002\n</code></pre> <pre><code>title: \u5206\u6bb5\u5e8f\u53f7\u4f5c\u7528\n\u8be5\u5b57\u6bb5\u5bf9\u5305\u542b\u5206\u6bb5\u7684\u4e0a\u5c42\u6570\u636e\u5305\u7684IP\u5305\u8d4b\u4e88\u5e8f\u53f7\u3002\u7531\u4e8eIP\u5305\u5728\u7f51\u7edc\u4e0a\u4f20\u9001\u7684\u65f6\u5019\u4e0d\u4e00\u5b9a\u80fd\u6309\u987a\u5e8f\u5230\u8fbe\uff0c\u8fd9\u4e2a\u5b57\u6bb5\u4fdd\u8bc1\u4e86\u76ee\u6807\u8def\u7531\u5668\u5728\u63a5\u53d7\u5230IP\u5305\u4e4b\u540e\u80fd\u591f\u8fd8\u539f\u5206\u6bb5\u7684\u4e0a\u5c42\u6570\u636e\u5305\u3002\u5230\u67d0\u4e2a\u5305\u542b\u5206\u6bb5\u7684\u4e0a\u5c42\u6570\u636e\u5305\u7684IP\u5305\u5728\u4f20\u9001\u662f\u4e22\u5931\uff0c\u5219\u6574\u4e2a\u4e00\u7cfb\u5217\u5305\u542b\u5206\u6bb5\u7684\u4e0a\u5c42\u6570\u636e\u5305\u7684IP\u5305\u90fd\u4f1a\u88ab\u8981\u6c42\u91cd\u4f20\u3002\n</code></pre>"},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/#222-tcp","title":"2.2.2 TCP","text":"<p>TCP(Transmission Control Protocol)\u4e3a\u5e94\u7528\u7a0b\u5e8f\u4e4b\u95f4\u63d0\u4f9b\u9762\u5411\u8fde\u63a5\u7684\u53ef\u9760\u7684\u5b57\u8282\u6d41\u670d\u52a1\u3002TCP\u4e3a\u5168\u53cc\u5de5\u534f\u8bae\uff0c\u63d0\u4f9b\u6d41\u63a7\u5236\u673a\u5236\uff0c\u5373\u5141\u8bb8\u63a5\u6536\u65b9\u63a7\u5236\u53d1\u9001\u65b9\u7684\u53d1\u9001\u901f\u5ea6\uff0c\u6b64\u5916\u8fd8\u63d0\u4f9b\u62e5\u585e\u63a7\u5236\u529f\u80fd\u3002 - TCP\u5934\u90e8\u7ec4\u6210\u5982\u4e0b    - Source Port(Destination Port)    - Sequence Number\uff1a\u7528\u4e8e\u5bf9\u5b57\u8282\u6d41\u8fdb\u884c\u7f16\u53f7\uff0c\u4f8b\u5982\u5e8f\u53f7\u4e3a 301\uff0c\u8868\u793a\u7b2c\u4e00\u4e2a\u5b57\u8282\u7684\u7f16\u53f7\u4e3a 301\uff0c\u5982\u679c\u643a\u5e26\u7684\u6570\u636e\u957f\u5ea6\u4e3a 100 \u5b57\u8282\uff0c\u90a3\u4e48\u4e0b\u4e00\u4e2a\u62a5\u6587\u6bb5\u7684\u5e8f\u53f7\u5e94\u4e3a 401\u3002\u4e3b\u8981\u7528\u6765\u89e3\u51b3\u7f51\u7edc\u62a5\u4e71\u5e8f\u7684\u95ee\u9898\uff1b    - Acknowledgment Number\uff1a\u671f\u671b\u6536\u5230\u7684\u4e0b\u4e00\u4e2a\u62a5\u6587\u6bb5\u7684\u5e8f\u53f7\u3002\u4f8b\u5982 B \u6b63\u786e\u6536\u5230 A \u53d1\u9001\u6765\u7684\u4e00\u4e2a\u62a5\u6587\u6bb5\uff0c\u5e8f\u53f7\u4e3a 501\uff0c\u643a\u5e26\u7684\u6570\u636e\u957f\u5ea6\u4e3a 200 \u5b57\u8282\uff0c\u56e0\u6b64 B \u671f\u671b\u4e0b\u4e00\u4e2a\u62a5\u6587\u6bb5\u7684\u5e8f\u53f7\u4e3a 701\uff0cB \u53d1\u9001\u7ed9 A \u7684\u786e\u8ba4\u62a5\u6587\u6bb5\u4e2d\u786e\u8ba4\u53f7\u5c31\u4e3a 701\u3002    - Window Size\uff1a\u7a97\u53e3\u5927\u5c0f\uff0c\u4e5f\u5c31\u662f\u6709\u540d\u7684\u6ed1\u52a8\u7a97\u53e3\uff0c\u7528\u6765\u8fdb\u884c\u6d41\u91cf\u63a7\u5236\u3002\u6307\u5b9a\u4ece\u88ab\u786e\u8ba4\u7684\u5b57\u8282\u7b97\u8d77\u53ef\u4ee5\u53d1\u9001\u591a\u5c11\u4e2a\u5b57\u8282\uff0c\u7a97\u53e3\u5927\u5c0f\u5b57\u6bb5\u4e3a0\u662f\u5408\u6cd5\u7684\uff0c\u8bf4\u660e\u5df2\u7ecf\u63a5\u6536\u5230\u4e86 \u786e\u8ba4\u53f7\uff0d1 \u4e2a\u5b57\u8282\uff0c\u4f46\u662f\u63a5\u6536\u7aef\u6ca1\u6709\u6765\u5f97\u53ca\u53d6\u8d70\u6570\u636e\u3002    - ACK\uff1a\u6b64\u6807\u5fd7\u8868\u793a\u5e94\u7b54\u57df\u6709\u6548\uff0c\u5c31\u662f\u8bf4\u524d\u9762\u6240\u8bf4\u7684TCP\u5e94\u7b54\u53f7\u5c06\u4f1a\u5305\u542b\u5728TCP\u6570\u636e\u5305\u4e2d\uff1b    - SYN\uff1a\u8868\u793a\u540c\u6b65\u5e8f\u53f7\uff0c\u7528\u6765\u5efa\u7acb\u8fde\u63a5\u3002SYN\u6807\u5fd7\u4f4d\u548cACK\u6807\u5fd7\u4f4d\u642d\u914d\u4f7f\u7528\uff0c\u5f53\u8fde\u63a5\u8bf7\u6c42\u7684\u65f6\u5019\uff0cSYN=1\uff0cACK=0\uff1b\u8fde\u63a5\u88ab\u54cd\u5e94\u7684\u65f6\u5019\uff0cSYN=1\uff0cACK=1\uff1b    - FIN\uff1a\u8868\u793a\u53d1\u9001\u7aef\u5df2\u7ecf\u8fbe\u5230\u6570\u636e\u672b\u5c3e\uff0c\u4e5f\u5c31\u662f\u8bf4\u53cc\u65b9\u7684\u6570\u636e\u4f20\u9001\u5b8c\u6210\uff0c\u6ca1\u6709\u6570\u636e\u53ef\u4ee5\u4f20\u9001\u4e86\u3002</p> <p></p>"},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/#223-tcp34","title":"2.2.3 TCP3\u6b21\u63e1\u624b4\u6b21\u6325\u624b","text":"<pre><code>titke: \u4e3a\u4ec0\u4e48acknum=seq+1\uff1f\n\u5728\u5efa\u7acb\u8fde\u63a5\u65f6\uff0ctcp\u643a\u5e26\u7684\u6570\u636e\u662f\u7a7a\u7684\uff0c\u8fd9\u65f6\u6807\u51c6\u9ed8\u8ba4+1\u3002\n\u5728\u4f20\u8f93\u6570\u636e\u8fc7\u7a0b\u4e2d\uff0cacknum=seq+datasize\u3002\n</code></pre> <pre><code>title: \u4e3a\u4ec0\u4e48\u9700\u89813\u6b21\u63e1\u624b\uff1f\n\u907f\u514d\u5931\u6548\u7684\u8fde\u63a5\u8bf7\u6c42\u5230\u8fbe\u670d\u52a1\u7aef\u65f6\uff0c\u670d\u52a1\u7aef\u518d\u6b21\u786e\u8ba4\u8fde\u63a5\u8bf7\u6c42\uff0c\u5e76\u53c8\u4e00\u6b21\u5411\u5ba2\u6237\u7aef\u53d1\u9001\u786e\u8ba4\u8fde\u63a5\u62a5\u6587\u6bb5\u3002\n</code></pre> <pre><code>title: \u4e3a\u4ec0\u4e48\u89814\u6b21\u6325\u624b\n\u5ba2\u6237\u7aef\u53d1\u9001FIN\u62a5\u6587\u6bb5\u7ed9\u670d\u52a1\u7aef\u65f6\uff0c\u670d\u52a1\u7aef\u9996\u5148\u54cd\u5e94\u5ba2\u6237\u7aef\u7684\u65ad\u5f00\u8bf7\u6c42\uff0c\u4f46\u670d\u52a1\u7aef\u53ef\u80fd\u8fd8\u6709\u6570\u636e\u9700\u8981\u4f20\u8f93\u7ed9\u5ba2\u6237\u7aef\uff1b\u6240\u4ee5\u5f53\u670d\u52a1\u7aef\u4e5f\u53d1\u9001\u5b8c\u6bd5\u6570\u636e\u540e\u53c8\u53d1\u9001FIN\u62a5\u6587\u6bb5\u7ed9\u5ba2\u6237\u7aef\uff0c\u8868\u660e\u6211\u6570\u636e\u4e5f\u53d1\u5b8c\u4e86\uff0c\u53ef\u4ee5\u5173\u95ed\u8fde\u63a5\u4e86\u3002\n</code></pre> <pre><code>title: \u4e3a\u4ec0\u4e48\u9700\u8981TIME_WAIT\n1. \u786e\u4fdd\u6700\u540e\u4e00\u4e2a\u786e\u8ba4\u62a5\u6587\u80fd\u591f\u5230\u8fbe\u3002\u5982\u679c B \u6ca1\u6536\u5230 A \u53d1\u9001\u6765\u7684\u786e\u8ba4\u62a5\u6587\uff0c\u90a3\u4e48\u5c31\u4f1a\u91cd\u65b0\u53d1\u9001\u8fde\u63a5\u91ca\u653e\u8bf7\u6c42\u62a5\u6587\uff0cA \u7b49\u5f85\u4e00\u6bb5\u65f6\u95f4\u5c31\u662f\u4e3a\u4e86\u5904\u7406\u8fd9\u79cd\u60c5\u51b5\u7684\u53d1\u751f\u3002\n\n2. \u7b49\u5f85\u4e00\u6bb5\u65f6\u95f4\u662f\u4e3a\u4e86\u8ba9\u672c\u8fde\u63a5\u6301\u7eed\u65f6\u95f4\u5185\u6240\u4ea7\u751f\u7684\u6240\u6709\u62a5\u6587\u90fd\u4ece\u7f51\u7edc\u4e2d\u6d88\u5931\uff0c\u4f7f\u5f97\u4e0b\u4e00\u4e2a\u65b0\u7684\u8fde\u63a5\u4e0d\u4f1a\u51fa\u73b0\u65e7\u7684\u8fde\u63a5\u8bf7\u6c42\u62a5\u6587\u3002\n</code></pre> <pre><code>title: \u4e3a\u4ec0\u4e48TIME_WAIT\u662f2MSL\n\u5176\u4e2dMSL\uff08Maximum Segment Lifetime\uff09\u8868\u793a\u62a5\u6587\u6bb5\u7684\u6700\u5927\u751f\u547d\u5468\u671f\uff0c\u5728Linux\u4e0aMSL\u662f30\u79d2\u3002\n\n1. \u4fdd\u8bc1TCP\u534f\u8bae\u7684\u5168\u53cc\u5de5\u8fde\u63a5\u80fd\u591f\u53ef\u9760\u5173\u95ed\uff08\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u5747\u6b63\u5e38\u5173\u95ed\u8fde\u63a5\uff09\n2. \u4fdd\u8bc1\u8fd9\u6b21\u8fde\u63a5\u7684\u91cd\u590d\u6570\u636e\u6bb5\u4ece\u7f51\u7edc\u4e2d\u6d88\u5931\uff08\u56e0\u4e3a\u6781\u7aef\u60c5\u51b5\u4e0b\uff0c\u4e00\u6765\u4e00\u56de\u9700\u8981\u7684\u6700\u5927\u65f6\u95f4\u5c31\u662f2MSL\u3002\uff09\n</code></pre> <pre><code>title: syn\u653b\u51fb\n\u653b\u51fb\u5ba2\u6237\u7aef\u5728\u77ed\u65f6\u95f4\u5185\u4f2a\u9020\u5927\u91cf\u4e0d\u5b58\u5728\u7684IP\u5730\u5740\uff0c\u5411\u670d\u52a1\u5668\u4e0d\u65ad\u5730\u53d1\u9001SYN\u5305\uff0c\u670d\u52a1\u5668\u56de\u590d\u786e\u8ba4\u5305\uff0c\u5e76\u7b49\u5f85\u5ba2\u6237\u7684\u786e\u8ba4\u3002\u7531\u4e8e\u6e90\u5730\u5740\u662f\u4e0d\u5b58\u5728\u7684\uff0c\u670d\u52a1\u5668\u9700\u8981\u4e0d\u65ad\u7684\u91cd\u53d1\u76f4\u81f3\u8d85\u65f6\uff0c\u8fd9\u4e9b\u4f2a\u9020\u7684SYN\u5305\u5c06\u957f\u65f6\u95f4\u5360\u7528\u672a\u8fde\u63a5\u961f\u5217\uff0c\u6b63\u5e38\u7684SYN\u8bf7\u6c42\u88ab\u4e22\u5f03\uff0c\u5bfc\u81f4\u76ee\u6807\u7cfb\u7edf\u8fd0\u884c\u7f13\u6162\uff0c\u4e25\u91cd\u8005\u4f1a\u5f15\u8d77\u7f51\u7edc\u5835\u585e\u751a\u81f3\u7cfb\u7edf\u762b\u75ea\u3002SYN \u653b\u51fb\u662f\u4e00\u79cd\u5178\u578b\u7684 DoS/DDoS \u653b\u51fb\u3002\n</code></pre> <p>\u53c2\u8003\u8d44\u65991\uff1aTCP\u7684seq\u548cack\u53f7\u8ba1\u7b97\u65b9\u6cd5</p>"},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/#224-tcp","title":"2.2.4 TCP \u6ed1\u52a8\u7a97\u53e3","text":"<ul> <li>TCP\u5934\u90e8window size\u5757\u6307\u5b9a\u4e86\u63a5\u6536\u7aef\u53ef\u4ee5\u63a5\u6536\u6570\u636e\u7684\u5927\u5c0f\uff1b</li> <li>\u53d1\u9001\u7a97\u53e3\u5185\u7684\u5b57\u8282\u90fd\u5141\u8bb8\u88ab\u53d1\u9001\uff0c\u63a5\u6536\u7a97\u53e3\u5185\u7684\u5b57\u8282\u90fd\u5141\u8bb8\u88ab\u63a5\u6536\u3002\u5982\u679c\u53d1\u9001\u7a97\u53e3\u5de6\u90e8\u7684\u5b57\u8282\u5df2\u7ecf\u53d1\u9001\u5e76\u4e14\u6536\u5230\u4e86\u786e\u8ba4\uff0c\u90a3\u4e48\u5c31\u5c06\u53d1\u9001\u7a97\u53e3\u5411\u53f3\u6ed1\u52a8\u4e00\u5b9a\u8ddd\u79bb\uff0c\u76f4\u5230\u5de6\u90e8\u7b2c\u4e00\u4e2a\u5b57\u8282\u4e0d\u662f\u5df2\u53d1\u9001\u5e76\u4e14\u5df2\u786e\u8ba4\u7684\u72b6\u6001\uff1b\u63a5\u6536\u7a97\u53e3\u7684\u6ed1\u52a8\u7c7b\u4f3c\uff0c\u63a5\u6536\u7a97\u53e3\u5de6\u90e8\u5b57\u8282\u5df2\u7ecf\u53d1\u9001\u786e\u8ba4\u5e76\u4ea4\u4ed8\u4e3b\u673a\uff0c\u5c31\u5411\u53f3\u6ed1\u52a8\u63a5\u6536\u7a97\u53e3\u3002 </li> </ul>"},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/#225-tcp","title":"2.2.5 TCP \u6d41\u91cf\u63a7\u5236","text":"<p>\u6d41\u91cf\u63a7\u5236\u662f\u4e3a\u4e86\u63a7\u5236\u53d1\u9001\u65b9\u53d1\u9001\u901f\u7387\uff0c\u4fdd\u8bc1\u63a5\u6536\u65b9\u6765\u5f97\u53ca\u63a5\u6536\u3002</p> <p>\u63a5\u6536\u65b9\u53d1\u9001\u7684\u786e\u8ba4\u62a5\u6587\u4e2d\u7684\u7a97\u53e3\u5b57\u6bb5\u53ef\u4ee5\u7528\u6765\u63a7\u5236\u53d1\u9001\u65b9\u7a97\u53e3\u5927\u5c0f\uff0c\u4ece\u800c\u5f71\u54cd\u53d1\u9001\u65b9\u7684\u53d1\u9001\u901f\u7387\u3002\u5c06\u7a97\u53e3\u5b57\u6bb5\u8bbe\u7f6e\u4e3a 0\uff0c\u5219\u53d1\u9001\u65b9\u4e0d\u80fd\u53d1\u9001\u6570\u636e\u3002</p>"},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/#226-tcp","title":"2.2.6 TCP \u62e5\u585e\u63a7\u5236","text":"<p>\u5982\u679c\u7f51\u7edc\u51fa\u73b0\u62e5\u585e\uff0c\u5206\u7ec4\u5c06\u4f1a\u4e22\u5931\uff0c\u6b64\u65f6\u53d1\u9001\u65b9\u4f1a\u7ee7\u7eed\u91cd\u4f20\uff0c\u4ece\u800c\u5bfc\u81f4\u7f51\u7edc\u62e5\u585e\u7a0b\u5ea6\u66f4\u9ad8\u3002\u56e0\u6b64\u5f53\u51fa\u73b0\u62e5\u585e\u65f6\uff0c\u5e94\u5f53\u63a7\u5236\u53d1\u9001\u65b9\u7684\u901f\u7387\u3002\u8fd9\u4e00\u70b9\u548c\u6d41\u91cf\u63a7\u5236\u5f88\u50cf\uff0c\u4f46\u662f\u51fa\u53d1\u70b9\u4e0d\u540c\u3002\u6d41\u91cf\u63a7\u5236\u662f\u4e3a\u4e86\u8ba9\u63a5\u6536\u65b9\u80fd\u6765\u5f97\u53ca\u63a5\u6536\uff0c\u800c\u62e5\u585e\u63a7\u5236\u662f\u4e3a\u4e86\u964d\u4f4e\u6574\u4e2a\u7f51\u7edc\u7684\u62e5\u585e\u7a0b\u5ea6\u3002 TCP \u4e3b\u8981\u901a\u8fc7\u56db\u4e2a\u7b97\u6cd5\u6765\u8fdb\u884c\u62e5\u585e\u63a7\u5236\uff1a 1. \u6162\u5f00\u59cb 2. \u62e5\u585e\u907f\u514d 3. \u5feb\u91cd\u4f20 4. \u5feb\u6062\u590d\u3002 </p>"},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/#3","title":"3 \u4e00\u4e9b\u7f51\u7edc\u8bbe\u8ba1\u673a\u5236","text":""},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/#31","title":"3.1 \u5fc3\u8df3\u673a\u5236","text":"<ul> <li>\u53c2\u8003</li> <li>\u5fc3\u8df3\u4f5c\u7528\uff1a</li> <li>\u4fdd\u6301\u8fde\u63a5\uff1a\u4e00\u4e2a\u5ba2\u6237\u7aef\u8fde\u63a5\u670d\u52a1\u5668\u4ee5\u540e\uff0c\u5982\u679c\u957f\u671f\u6ca1\u6709\u548c\u670d\u52a1\u5668\u6709\u6570\u636e\u6765\u5f80\uff0c\u53ef\u80fd\u4f1a\u88ab\u9632\u706b\u5899\u7a0b\u5e8f\u5173\u95ed\u8fde\u63a5\uff0c\u6709\u65f6\u5019\u6211\u4eec\u5e76\u4e0d\u60f3\u8981\u88ab\u5173\u95ed\u8fde\u63a5\u3002</li> <li>\u68c0\u6d4b\u6b7b\u94fe</li> </ul>"},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/#311-tcp-keepalive","title":"3.1.1 TCP \u7684 keepalive \u9009\u9879","text":"<ul> <li>\u8bbe\u7f6e keepalive</li> </ul> <pre><code>//on \u662f 1 \u8868\u793a\u6253\u5f00 keepalive \u9009\u9879\uff0c\u4e3a 0 \u8868\u793a\u5173\u95ed\uff0c0 \u662f\u9ed8\u8ba4\u503c  \ninton = 1;  setsockopt(fd, SOL_SOCKET, SO_KEEPALIVE, &amp;on, sizeof(on));\n</code></pre> <ul> <li>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u67e5\u770b Linux \u7cfb\u7edf\u4e0a\u7684\u4e0a\u8ff0\u4e09\u4e2a\u503c\u7684\u8bbe\u7f6e\u60c5\u51b5\uff1a\u4ee5\u4e0b linux \u4e0b\u662f\u9ed8\u8ba4\u914d\u7f6e</li> </ul> <pre><code>$ sysctl -a | grep keepalive\nnet.ipv4.tcp_keepalive_time = 7200\nnet.ipv4.tcp_keepalive_probes = 9\nnet.ipv4.tcp_keepalive_intvl = 75\n</code></pre> <p>\u4e0a\u9762\u7684 keepalive \u9009\u9879\u8868\u793a\u5982\u679c\u4e00\u4e2a\u8fde\u63a5\u4e0a 7200s \u540e\u6ca1\u6709\u4efb\u4f55\u6570\u636e\u53d1\u9001\uff0c\u5219\u8bbe\u7f6e\u4e86\u8fd9\u4e2a\u9009\u9879\u7684\u7aef\u5411\u5bf9\u7aef\u53d1\u9001 keepalive \u4fdd\u6d3b\u62a5\u6587\uff0c\u5b83\u4f1a\u6709\u5982\u4e0b\u4e09\u79cd\u7ed3\u679c\uff1a - \u5bf9\u7aef\u56de\u590dACK\u3002\u5219\u672c\u7aefTCP\u8ba4\u4e3a\u8be5\u8fde\u63a5\u4f9d\u7136\u5b58\u6d3b\u3002\u7ee7\u7eed\u7b497200s\u540e\u518d\u53d1\u9001keepalive\u62a5\u6587\u3002 - \u5bf9\u7aef\u56de\u590dRESET\u3002\u8bf4\u660e\u5bf9\u7aef\u8fdb\u7a0b\u5df2\u7ecf\u91cd\u542f\uff0c\u672c\u7aef\u7684\u5e94\u7528\u7a0b\u5e8f\u5e94\u8be5\u5173\u95ed\u8be5\u8fde\u63a5\u3002 - \u6ca1\u6709\u5bf9\u7aef\u7684\u4efb\u4f55\u56de\u590d\u3002\u5219\u672c\u7aef\u505a\u91cd\u8bd5\uff0c\u5982\u679c\u91cd\u8bd59\u6b21\uff08\u524d\u540e\u91cd\u8bd5\u95f4\u9694\u4e3a75\u79d2\uff09\u4ecd\u7136\u4e0d\u53ef\u8fbe\uff0c\u5219\u5411\u5e94\u7528\u7a0b\u5e8f\u8fd4\u56de\u9519\u8bef\u4fe1\u606f\uff0cETIMEOUT\uff08\u65e0\u4efb\u4f55\u5e94\u7b54\uff09\u6216EHOST - \u8bbe\u7f6e keepalive \u9009\u9879</p> <pre><code>//\u53d1\u9001 keepalive \u62a5\u6587\u7684\u65f6\u95f4\u95f4\u9694  \nintval = 7200;  setsockopt(fd, IPPROTO_TCP, TCP_KEEPIDLE, &amp;val, sizeof(val));  //\u4e24\u6b21\u91cd\u8bd5\u62a5\u6587\u7684\u65f6\u95f4\u95f4\u9694  \nintinterval = 75;  setsockopt(fd, IPPROTO_TCP, TCP_KEEPINTVL, &amp;interval, sizeof(interval));  intcnt = 9;  setsockopt(fd, IPPROTO_TCP, TCP_KEEPCNT, &amp;cnt, sizeof(cnt));\n</code></pre>"},{"location":"Documents/D-Interview/%E7%BD%91%E7%BB%9C%E8%B5%84%E6%BA%90/","title":"\u7f51\u7edc\u8d44\u6e90","text":"<ul> <li>CppGuide</li> </ul>"},{"location":"Documents/D-Interview/%E5%B7%A5%E4%BD%9C%E7%BB%8F%E9%AA%8C/%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5/","title":"\u751f\u4ea7\u95ee\u9898\u6392\u67e5","text":""},{"location":"Documents/D-Interview/%E5%B7%A5%E4%BD%9C%E7%BB%8F%E9%AA%8C/%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5/#1-stack","title":"1 stack\u8d44\u6e90\u9650\u5236\u5bfc\u81f4\u8fdb\u5236\u542f\u52a8\u5931\u8d25","text":"<ul> <li>\u95ee\u9898\u539f\u56e0\uff1astack size \u8bbe\u7f6e\u6210 unlimited \u540e\u5bfc\u81f4\u542f\u52a8\u5931\u8d25\uff0c\u8bbe\u7f6e\u4e00\u4e2a\u51c6\u786e\u503c\u542f\u52a8\u6210\u529f\u3002\u5177\u4f53\u539f\u56e0\u672a\u5206\u6790\u51fa\u3002</li> <li>\u5206\u6790\u8fc7\u7a0b\uff1a</li> <li>\u5728\u751f\u4ea7\u73af\u5883\u4e0a\u542f\u52a8\u811a\u672c\uff0c\u663e\u793a\u6267\u884c\u5931\u8d25\uff0c\u67e5\u770b\u65e5\u5fd7\uff0c\u6ca1\u6709\u4efb\u4f55\u4fe1\u606f\uff0c\u6253\u5f00debug\u65e5\u5fd7\uff0c\u4f9d\u7136\u6ca1\u6709\u6709\u6548\u65e5\u5fd7\u4ea7\u751f\uff1b\u67e5\u770bcore dump\u76ee\u5f55\u4e0b\u662f\u5426\u4ea7\u751fcore dump\u6587\u4ef6\uff0c\u6ca1\u6709\u3002</li> <li>\u76f4\u63a5\u542f\u52a8\u8fdb\u7a0b\uff0c\u8fdb\u7a0b\u5e76\u6ca1\u6709\u8fd4\u56de\u4efb\u4fe1\u606f\u3002</li> <li>gdb\u8c03\u8bd5\u542f\u52a8\u8fdb\u7a0b\uff0c\u7531\u4e8e\u7f16\u8bd1\u5668\u7684\u4f18\u5316\uff0c\u6548\u679c\u4e0d\u7406\u60f3\uff0c\u8fdb\u5165\u5b50\u8fdb\u7a0b\u65e0\u6cd5\u7ee7\u7eed\u8ddf\u8e2a\u3002</li> <li>\u67e5\u770b\u7cfb\u7edf\u65e5\u5fd7<code>/var/log/messages</code>\uff0cgrep \u8fc7\u6ee4\u8fdb\u7a0bA\u76f8\u5173\u65e5\u5fd7\uff0c\u53d1\u73b0\u6709\u8fdb\u7a0b\u5f02\u5e38\u9000\u51fa\u65e5\u5fd7\uff0c\u5fc5\u7136\u4f1a\u4ea7\u751fcore dump\u6587\u4ef6\uff0c\u4e8e\u662f\u4f7f\u7528<code>ulimit -a</code>\u68c0\u67e5core dump\u6587\u4ef6\u5927\u5c0f\u7b49\u4e8e0\uff0c\u518d\u67e5\u770b<code>/proc/sys/kernel/core_pattern</code>\uff0c\u91cd\u65b0\u8bbe\u7f6ecore dump\u6587\u4ef6\u751f\u6210\u4f4d\u7f6e<code>echo \"/tmp/core-%e-%p-%t\" &gt; /proc/sys/kernel/core_pattern</code>\u3002</li> <li>\u91cd\u65b0\u542f\u52a8\u8fdb\u7a0bA\uff0c\u67e5\u770bcore dump\u6587\u4ef6\uff0cgdb\u67e5\u770b\uff0c\u53d1\u73b0 core\u4f4d\u7f6e\u662f\u5728\u5bf9\u4e00\u4e2a\u6808\u5185\u5b58\u6570\u7ec4memset\u65f6\u51fa\u73b0\u95ee\u9898\u3002\u6309\u5f80\u5e38\u7ecf\u9a8c\uff08\u6808\u5185\u5b58\u8bbf\u95ee\u51fa\u9519\u5f88\u5c11\u89c1\uff09\uff0c\u6000\u7591\u662f\u5176\u5b83\u5730\u65b9\u5bfc\u81f4\u7684\u95ee\u9898\u3002\u591a\u6b21\u542f\u52a8\u8fdb\u7a0bA\uff0c\u83b7\u53d6\u591a\u4e2acore dump\u6587\u4ef6\uff0c\u67e5\u770b\uff0c\u4f9d\u7136\u662fcore\u5728memset \u6808\u5185\u5b58\u6570\u7ec4\u4e0a\u3002</li> <li>\u5f00\u59cb\u6000\u7591\u662f\u6808\u5927\u5c0f\u95ee\u9898\uff0c\u901a\u8fc7<code>ulimit -a</code>\u67e5\u770b\u6700\u5927\u6808\u5927\u5c0f\uff0c\u7ed3\u679c\u662funlimited\uff0c\u6240\u4ee5\u6392\u9664\u4e86\u6808\u7684\u95ee\u9898\u3002</li> <li>\u8be2\u95ee\u5176\u5b83\u540c\u4e8b\uff0c\u6709\u6ca1\u6709\u4fee\u6539\u8fc7\u7cfb\u7edf\u73af\u5883\uff0c\u53cd\u9988\u4fee\u6539\u8fc7stack\u5927\u5c0f\u4e3aunlimited\uff0c\u539f\u5148\u662f512000\u3002\u6000\u7591\u8fd8\u662f\u548c\u8fd9\u4e2astack\u5927\u5c0f\u6709\u5173\uff0c\u67e5\u9605\u8d44\u6599\uff0c\u53d1\u73b0\u6709\u4e9b\u4eba\u9047\u5230\u8fc7\u8bbe\u7f6estack size =unlimited\u540e\uff0c\u8fdb\u7a0b\u5f02\u5e38\u95ee\u9898\u3002</li> <li>\u4f7f\u7528<code>ulimit -s 512000</code>\u6062\u590dstack size\u540e\uff0c\u518d\u6b21\u542f\u52a8\u8fdb\u7a0bA\uff0c\u8fdb\u7a0b\u542f\u52a8\u6210\u529f\u3002</li> <li>\u8be2\u95ee\u540c\u4e8b\uff0c\u662f\u5426\u53ef\u4ee5\u5c06\u6b64\u53c2\u6570\u6062\u590d\uff0c\u5f97\u5230\u7684\u7b54\u6848\u662f\u5426\u5230\u7684\uff0c\u6240\u4ee5\uff0c\u6ca1\u6709\u53bb\u4fee\u6539<code>/etc/security/limits.conf</code>\u6587\u4ef6\u4f7f\u6c38\u4e45\u751f\u6548\uff1b\u91c7\u7528\u542f\u52a8\u8fdb\u7a0bA\u524d\uff0c\u5148<code>ulimit -s 512000</code>\uff0c\u518d\u542f\u52a8\u8fdb\u7a0b\u65b9\u5f0f\u3002</li> <li>\u95ee\u9898\u89e3\u51b3\uff1a\u5728\u542f\u52a8\u8fdb\u7a0b\u524d\uff0c\u4f7f\u7528<code>ulimit -s 131072</code>\u8bbe\u7f6estack\u5927\u5c0f\u4e3a\u4e00\u4e2a\u5177\u4f53\u503c\uff0c\u518d\u542f\u52a8\u8fdb\u7a0b\u3002</li> </ul>"},{"location":"Documents/D-Interview/%E5%B7%A5%E4%BD%9C%E7%BB%8F%E9%AA%8C/%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5/#2","title":"2 \u5f00\u53d1\u95ee\u9898\u6392\u67e5","text":""},{"location":"Documents/D-Interview/%E5%B7%A5%E4%BD%9C%E7%BB%8F%E9%AA%8C/%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5/#1-mallocfree","title":"1 malloc\u3001free \u540e\u8fdb\u7a0b\u5185\u5b58\u6ca1\u6709\u964d\u4f4e\uff1f","text":"<ul> <li>\u95ee\u9898\u539f\u56e0\uff1a\u9891\u7e41\u7684\u4f7f\u7528 malloc \u5206\u914d\u5c0f\u5185\u5b58\uff08\u9ed8\u8ba4 128k \u7531 brk \u5206\u914d\u7684\uff09\uff0c\u518d free\uff0c\u67d0\u79cd\u60c5\u51b5\u4e0b\uff0c\u5bfc\u81f4\u5806\u5185\u788e\u7247\u8fc7\u591a\uff0c\u5806\u9876\u4e00\u76f4\u5f80\u540e\u79fb\u3002</li> <li>\u89e3\u51b3\u529e\u6cd5\uff1a<ul> <li>\u4f7f\u7528 <code>malloc_trim (0)</code> \u5f3a\u5236\u56de\u6536\u5806\u9876\u5185\u5b58\uff08\u6d4b\u8bd5\u663e\u793a\u5bf9\u5185\u788e\u7247\u4e5f\u88ab\u56de\u6536\uff0c\u8fd9\u4e2a\u539f\u56e0\u4e0d\u6e05\u695a\uff09\u3002</li> <li>\u4f7f\u7528\u5185\u5b58\u6c60\u7ba1\u7406\u3002 \u53c2\u8003\u8d44\u6599</li> </ul> </li> </ul>"},{"location":"Documents/D-Interview/%E5%B7%A5%E4%BD%9C%E7%BB%8F%E9%AA%8C/%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5/#2_1","title":"2 \u4f7f\u7528\u4e86\u7ebf\u7a0b\u4e0d\u5b89\u5168\u51fd\u6570\uff0c\u5bfc\u81f4\u5076\u53d1\u95ee\u9898","text":""},{"location":"Documents/D-Interview/%E5%B7%A5%E4%BD%9C%E7%BB%8F%E9%AA%8C/%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5/#3-attr-getfattr","title":"3 \u7f16\u8bd1 attr \u6e90\u7801\u5305\u89e3\u51b3 getfattr \u4e71\u7801\u95ee\u9898","text":"<ul> <li>\u95ee\u9898\u539f\u56e0\uff1a</li> <li>\u5206\u6790\u8fc7\u7a0b\uff1a</li> </ul>"},{"location":"Documents/D-Interview/%E5%B7%A5%E4%BD%9C%E7%BB%8F%E9%AA%8C/%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5/#4-memset-stl-core","title":"4 memset \u542b stl \u7c7b\u578b\u6570\u636e\u5bfc\u81f4 core","text":"<ul> <li>\u95ee\u9898\u539f\u56e0\uff1astl \u7c7b\u578b\u53ef\u80fd\u5185\u90e8\u6709\u6307\u9488\uff0cmemset \u628a\u8fd9\u4e9b\u6307\u9488\u8d4b\u503c\u4e3a 0 \u4e86\uff0c\u5bfc\u81f4\u8bbf\u95ee\u6570\u636e\u5931\u8d25\u3002</li> <li>\u5206\u6790\u8fc7\u7a0b\uff1a</li> </ul>"},{"location":"Documents/D-Interview/%E5%B7%A5%E4%BD%9C%E7%BB%8F%E9%AA%8C/%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5/#3","title":"3 \u7f16\u8bd1\u95ee\u9898","text":""},{"location":"Documents/D-Interview/%E5%B7%A5%E4%BD%9C%E7%BB%8F%E9%AA%8C/%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5/#1-gcc-g-c","title":"1 \u4f7f\u7528 gcc \u800c\u4e0d\u662f g++\u7f16\u8bd1\uff0c\u4f9d\u7136\u6309 c++\u7f16\u8bd1","text":"<ul> <li>\u95ee\u9898\u539f\u56e0\uff1a\u539f\u7f16\u8bd1\u547d\u4ee4\u5982 <code>gcc test.c</code> \uff1b\u6307\u5b9a gcc\uff0c\u4f1a\u901a\u8fc7\u6587\u4ef6\u540d\u540e\u7f00\u6765\u91c7\u7528\u4f55\u79cd\u7f16\u8bd1\u5668\u3002\u800c\u6d4b\u8bd5\u7f16\u8bd1\u7684\u6587\u4ef6\u540d\u540e\u7f00\u662f <code>. cc</code> \u8fd9\u5c31\u5bfc\u81f4\u6ca1\u6709\u6309\u9884\u671f\u7684 c \u7f16\u8bd1\u3002</li> <li>\u89e3\u51b3\u529e\u6cd5\uff1a<ol> <li>\u6587\u4ef6\u540d\u540e\u7f00\u6539\u4e3a <code>.c</code>\uff0c\u793a\u4f8b\u5982 <code>gcc test.c</code>\u3002</li> <li>\u7f16\u8bd1\u9009\u9879\u6307\u5b9a c \u7f16\u8bd1\uff0c\u9009\u9879\u4e3a <code>-xc</code>\uff0c\u793a\u4f8b\u5982 <code>gcc -xc test.cc</code></li> </ol> </li> </ul>"},{"location":"Documents/D-Interview/%E5%B7%A5%E4%BD%9C%E7%BB%8F%E9%AA%8C/%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5/#2-struct-statvfs","title":"2 \u2018struct statvfs\u2019\u5728\u5f62\u53c2\u8868\u5185\u90e8\u58f0\u660e","text":"<ul> <li>\u9519\u8bef\u8f93\u51fa</li> </ul> <pre><code>test.h:52:49: \u8b66\u544a\uff1a\u2018struct statvfs\u2019\u5728\u5f62\u53c2\u8868\u5185\u90e8\u58f0\u660e [\u9ed8\u8ba4\u542f\u7528]\nint adapter_statfs(const char *pathname, struct statvfs *stbuf, NCDFS *sp);\n\nncdfs.h:52:49: \u8b66\u544a\uff1a\u5b83\u7684\u4f5c\u7528\u57df\u4ec5\u9650\u4e8e\u6b64\u5b9a\u4e49\u6216\u58f0\u660e\uff0c\u8fd9\u53ef\u80fd\u5e76\u4e0d\u662f\u60a8\u60f3\u8981\u7684 [\u9ed8\u8ba4\u542f\u7528]\n</code></pre> <ul> <li>\u95ee\u9898\u539f\u56e0\uff1astatvfs \u6ca1\u6709\u5728 adapter_statfs \u51fd\u6570\u4e4b\u5916\u5b9a\u4e49\u3002</li> <li>\u89e3\u51b3\u529e\u6cd5\uff1a<ol> <li>\u5305\u542b statvfs \u6240\u5728\u7684\u5934\u6587\u4ef6\uff0c\u5982 <code>#include&lt;sys/statvfs.h&gt;</code></li> <li>\u524d\u7f6e\u58f0\u660e\uff0c\u5982 <code>struct statvfs;</code></li> </ol> </li> </ul>"},{"location":"Documents/D-Technology/%E6%8A%80%E6%9C%AF%E6%9C%AF%E8%AF%AD/","title":"\u6280\u672f\u672f\u8bed","text":"<ul> <li>\u53cc\u6d3b\u6570\u636e\u4e2d\u5fc3\u6982\u5ff5\u53ca\u4f18\u7f3a\u70b9\u4ecb\u7ecd</li> </ul>"},{"location":"Documents/D-Technology/%E6%8A%80%E6%9C%AF%E6%9C%AF%E8%AF%AD/#1","title":"1 \u70ed\u5907\u3001\u51b7\u5907\u3001\u53cc\u6d3b","text":"<p>\u4e3b\u5907\u6570\u636e\u4e2d\u5fc3\u4e4b\u95f4\u4e00\u822c\u6709\u70ed\u5907\u3001\u51b7\u5907\u3001\u53cc\u6d3b\u4e09\u79cd\u5907\u4efd\u65b9\u5f0f\u3002 - \u70ed\u5907\u7684\u60c5\u51b5\u4e0b\uff0c\u53ea\u6709\u4e3b\u6570\u636e\u4e2d\u5fc3\u627f\u62c5\u7528\u6237\u7684\u4e1a\u52a1\uff0c\u5728\u4e0d\u505c\u673a\u60c5\u51b5\u4e0b\u5bf9\u4e3b\u6570\u636e\u4e2d\u5fc3\u8fdb\u884c\u5907\u4efd\u3002 - \u51b7\u5907\u7684\u60c5\u51b5\u4e0b\uff0c\u4e5f\u662f\u53ea\u6709\u4e3b\u6570\u636e\u4e2d\u5fc3\u627f\u62c5\u4e1a\u52a1\uff0c\u5728\u505c\u673a\u60c5\u51b5\u4e0b\u5bf9\u4e3b\u6570\u636e\u4e2d\u5fc3\u8fdb\u884c\u5907\u4efd\u3002 - \u53cc\u6d3b\u662f\u89c9\u5f97\u5907\u7528\u6570\u636e\u4e2d\u5fc3\u53ea\u505a\u5907\u4efd\u592a\u6d6a\u8d39\u4e86\uff0c\u6240\u4ee5\u8ba9\u4e3b\u5907\u4e24\u4e2a\u6570\u636e\u4e2d\u5fc3\u90fd\u540c\u65f6\u627f\u62c5\u7528\u6237\u7684\u4e1a\u52a1\uff0c\u6b64\u65f6\uff0c\u4e3b\u5907\u4e24\u4e2a\u6570\u636e\u4e2d\u5fc3\u4e92\u4e3a\u5907\u4efd\uff0c\u5e76\u4e14\u8fdb\u884c\u5b9e\u65f6\u5907\u4efd\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u4e3b\u6570\u636e\u4e2d\u5fc3\u7684\u8d1f\u8f7d\u53ef\u80fd\u4f1a\u591a\u4e00\u4e9b\uff0c\u6bd4\u5982\u5206\u62c560~70%\u7684\u4e1a\u52a1\uff0c\u5907\u6570\u636e\u4e2d\u5fc3\u53ea\u5206\u62c540%~30%\u7684\u4e1a\u52a1 \u3002</p>"},{"location":"Documents/D-Technology/%E6%8A%80%E6%9C%AF%E6%9C%AF%E8%AF%AD/#2","title":"2 \u4e24\u5730\u4e09\u4e2d\u5fc3","text":"<ul> <li>\u4e24\u5730 = \u672c\u5730 + \u5f02\u5730</li> <li>\u4e09\u4e2d\u5fc3 = \u672c\u5730\u4e2d\u5fc3 + \u672c\u5730\u5bb9\u707e\u4e2d\u5fc3 +\u5f02\u5730\u5907\u4efd\u4e2d\u5fc3</li> </ul>"},{"location":"Documents/D-Technology/DPDK/DPDK/","title":"DPDK","text":"<ul> <li>DPDK\u7f16\u7a0b\u6307\u5357</li> <li>sdn-handbook \u5f3a\u70c8\u5efa\u8bae\u719f\u8bfb\u300a\u6df1\u5165\u6d45\u51faDPDK\u300b\u8fd9\u672c\u4e66\u3002</li> </ul>"},{"location":"Documents/D-Technology/DPDK/DPDK/#1-dpdk","title":"1 DPDK\u7b80\u4ecb","text":"<ul> <li>DPDK\u662f\u4e00\u4e2a\u6027\u80fd\u51fa\u8272\u7684\u5305\u6570\u636e\u5904\u7406\u52a0\u901f\u8f6f\u4ef6\u5e93\u3002\u5b83\u5927\u91cf\u5229\u7528\u4e86\u6709\u52a9\u4e8e\u5305\u5904\u7406\u7684\u8f6f\u786c\u4ef6\u7279\u6027\uff0c \u5982\u5927\u9875\u3001 \u7f13\u5b58\u884c\u5bf9\u9f50\u3001 \u7ebf\u7a0b\u7ed1\u5b9a\u3001 \u9884\u53d6\u3001 NUMA\u3001 IA\u6700\u65b0\u6307\u4ee4\u7684\u5229\u7528\u3001 Intel DDIO\u3001 \u5185\u5b58\u4ea4\u53c9\u8bbf\u95ee\u7b49\u3002</li> <li>DPDK\u6700\u521d\u7684\u52a8\u673a\u5f88\u7b80\u5355\uff0c \u5c31\u662f\u8bc1\u660eIA\uff08Intel Architecture\uff09\u591a\u6838\u5904\u7406\u5668\u80fd\u591f\u652f\u6491\u9ad8\u6027\u80fd\u6570\u636e\u5305\u5904\u7406\u3002 \u968f\u7740\u65e9\u671f\u76ee\u6807\u7684\u8fbe\u6210\u548c\u66f4\u591a\u901a\u7528\u5904\u7406\u5668\u4f53\u7cfb\u7684\u52a0\u5165\uff0c DPDK\u9010\u6e10\u6210\u4e3a\u901a\u7528\u591a\u6838\u5904\u7406\u5668\u9ad8\u6027\u80fd\u6570\u636e\u5305\u5904\u7406\u7684\u4e1a\u754c\u6807\u6746\u3002</li> </ul>"},{"location":"Documents/D-Technology/DPDK/DPDK/#11","title":"1.1 \u4f20\u7edf\u7f51\u7edc\u8bbe\u5907\u7f3a\u9677","text":"<p>\u4ee5Linux\u4e3a\u4f8b\uff0c\u4f20\u7edf\u7f51\u7edc\u8bbe\u5907\u9a71\u52a8\u5305\u5904\u7406\u7684\u52a8\u4f5c\u53ef\u4ee5\u6982\u62ec\u5982\u4e0b\uff1a 1. \u6570\u636e\u5305\u5230\u8fbe\u7f51\u5361\u8bbe\u5907\u3002 2. \u7f51\u5361\u8bbe\u5907\u4f9d\u636e\u914d\u7f6e\u8fdb\u884cDMA\u64cd\u4f5c\u3002 3. \u7f51\u5361\u53d1\u9001\u4e2d\u65ad\uff0c\u5524\u9192\u5904\u7406\u5668\u3002 4. \u9a71\u52a8\u8f6f\u4ef6\u586b\u5145\u8bfb\u5199\u7f13\u51b2\u533a\u6570\u636e\u7ed3\u6784\u3002 5. \u6570\u636e\u62a5\u6587\u8fbe\u5230\u5185\u6838\u534f\u8bae\u6808\uff0c\u8fdb\u884c\u9ad8\u5c42\u5904\u7406\u3002 6. \u5982\u679c\u6700\u7ec8\u5e94\u7528\u5728\u7528\u6237\u6001\uff0c\u6570\u636e\u4ece\u5185\u6838\u642c\u79fb\u5230\u7528\u6237\u6001\u3002 7. \u5982\u679c\u6700\u7ec8\u5e94\u7528\u5728\u5185\u6838\u6001\uff0c\u5728\u5185\u6838\u7ee7\u7eed\u8fdb\u884c\u3002 \u968f\u7740\u7f51\u7edc\u63a5\u53e3\u5e26\u5bbd\u4ece\u5343\u5146\u5411\u4e07\u5146\u8fc8\u8fdb\uff0c\u539f\u5148\u6bcf\u4e2a\u62a5\u6587\u5c31\u4f1a\u89e6\u53d1\u4e00\u4e2a\u4e2d\u65ad\uff0c\u4e2d\u65ad\u5e26\u6765\u7684\u5f00\u9500\u53d8\u5f97\u7a81\u51fa\uff0c\u5927\u91cf\u6570\u636e\u5230\u6765\u4f1a\u89e6\u53d1\u9891\u7e41\u7684\u4e2d\u65ad\u5f00\u9500\uff0c\u5bfc\u81f4\u7cfb\u7edf\u65e0\u6cd5\u627f\u53d7\uff0c\u56e0\u6b64\u6709\u4eba\u5728Liux\u5185\u6838\u4e2d\u5f15\u5165\u4e86NAPI\u673a\u5236\uff0c\u5176\u7b56\u7565\u662f\u7cfb\u7edf\u88ab\u4e2d\u65ad\u5524\u9192\u540e\uff0c\u5c3d\u91cf\u4f7f\u7528\u8f6e\u8be2\u7684\u65b9\u5f0f\u4e00\u6b21\u5904\u7406\u591a\u4e2a\u6570\u636e\u5305\uff0c\u76f4\u5230\u7f51\u7edc\u518d\u6b21\u7a7a\u95f2\u91cd\u65b0\u8f6c\u5165\u4e2d\u65ad\u7b49\u5f85\u3002NAPI\u7b56\u7565\u7528\u4e8e\u9ad8\u541e\u5410\u7684\u573a\u666f\uff0c\u6548\u7387\u63d0\u5347\u660e\u663e\u3002</p>"},{"location":"Documents/D-Technology/DPDK/DPDK/#12-dpdk","title":"1.2 DPDK\u4f18\u5316\u6280\u672f","text":"<ul> <li>\u8f6e\u8be2\uff1a\u8fd9\u4e00\u70b9\u5f88\u76f4\u63a5\uff0c \u53ef\u907f\u514d\u4e2d\u65ad\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u5f00\u9500\u3002 \u4e4b\u524d\u63d0\u5230Linux\u4e5f\u91c7\u7528\u8be5\u65b9\u6cd5\u6539\u8fdb\u5bf9\u5927\u541e\u5410\u6570\u636e\u7684\u5904\u7406\uff0c \u6548\u679c\u5f88\u597d\u3002 \u5728\u7b2c7\u7ae0\uff0c \u6211\u4eec\u4f1a\u8be6\u7ec6\u8ba8\u8bba\u8f6e\u8be2\u4e0e\u4e2d\u65ad\u7684\u6743\u8861\u3002\u7528\u6237\u6001\u9a71\u52a8\uff0c \u5728\u8fd9\u79cd\u5de5\u4f5c\u65b9\u5f0f\u4e0b\uff0c \u65e2\u89c4\u907f\u4e86\u4e0d\u5fc5\u8981\u7684\u5185\u5b58\u62f7\u8d1d\u53c8\u907f\u514d\u4e86\u7cfb\u7edf\u8c03\u7528\u3002 \u4e00\u4e2a\u95f4\u63a5\u7684\u5f71\u54cd\u5728\u4e8e\uff0c \u7528\u6237\u6001\u9a71\u52a8\u4e0d\u53d7\u9650\u4e8e\u5185\u6838\u73b0\u6709\u7684\u6570\u636e\u683c\u5f0f\u548c\u884c\u4e3a\u5b9a\u4e49\u3002 \u5bf9mbuf\u5934\u683c\u5f0f\u7684\u91cd\u5b9a\u4e49\u3001 \u5bf9\u7f51\u5361DMA\u64cd\u4f5c\u7684\u91cd\u65b0\u4f18\u5316\u53ef\u4ee5\u83b7\u5f97\u66f4\u597d\u7684\u6027\u80fd\u3002 \u800c\u7528\u6237\u6001\u9a71\u52a8\u4e5f\u4fbf\u4e8e\u5feb\u901f\u5730\u8fed\u4ee3\u4f18\u5316\uff0c \u751a\u81f3\u5bf9\u4e0d\u540c\u573a\u666f\u8fdb\u884c\u4e0d\u540c\u7684\u4f18\u5316\u7ec4\u5408\u3002 \u5728\u7b2c6\u7ae0\u4e2d\uff0c \u6211\u4eec\u5c06\u63a2\u8ba8\u7528\u6237\u6001\u7f51\u5361\u6536\u53d1\u5305\u4f18\u5316\u3002  </li> <li>\u4eb2\u548c\u6027\u4e0e\u72ec\u5360\uff1a DPDK\u5de5\u4f5c\u5728\u7528\u6237\u6001\uff0c \u7ebf\u7a0b\u7684\u8c03\u5ea6\u4ecd\u7136\u4f9d\u8d56\u5185\u6838\u3002 \u5229\u7528\u7ebf\u7a0b\u7684CPU\u4eb2\u548c\u7ed1\u5b9a\u7684\u65b9\u5f0f\uff0c \u7279\u5b9a\u4efb\u52a1\u53ef\u4ee5\u88ab\u6307\u5b9a\u53ea\u5728\u67d0\u4e2a\u6838\u4e0a\u5de5\u4f5c\u3002 \u597d\u5904\u662f\u53ef\u907f\u514d\u7ebf\u7a0b\u5728\u4e0d\u540c\u6838\u95f4\u9891\u7e41\u5207\u6362\uff0c \u6838\u95f4\u7ebf\u7a0b\u5207\u6362\u5bb9\u6613\u5bfc\u81f4\u56e0cache miss\u548ccache write back\u9020\u6210\u7684\u5927\u91cf\u6027\u80fd\u635f\u5931\u3002 \u5982\u679c\u66f4\u8fdb\u4e00\u6b65\u5730\u9650\u5b9a\u67d0\u4e9b\u6838\u4e0d\u53c2\u4e0eLinux\u7cfb\u7edf\u8c03\u5ea6\uff0c \u5c31\u53ef\u80fd\u4f7f\u7ebf\u7a0b\u72ec\u5360\u8be5\u6838\uff0c \u4fdd\u8bc1\u66f4\u591acache hit\u7684\u540c\u65f6\uff0c \u4e5f\u907f\u514d\u4e86\u540c\u4e00\u4e2a\u6838\u5185\u7684\u591a\u4efb\u52a1\u5207\u6362\u5f00\u9500\u3002</li> <li>\u964d\u4f4e\u8bbf\u5b58\u5f00\u9500\uff1a \u7f51\u7edc\u6570\u636e\u5305\u5904\u7406\u662f\u4e00\u79cd\u5178\u578b\u7684I/O\u5bc6\u96c6\u578b\uff08I/O bound\uff09 \u5de5\u4f5c\u8d1f\u8f7d\u3002 \u65e0\u8bba\u662fCPU\u6307\u4ee4\u8fd8\u662fDMA\uff0c \u5bf9\u4e8e\u5185\u5b58\u5b50\u7cfb\u7edf\uff08Cache+DRAM\uff09 \u90fd\u4f1a\u8bbf\u95ee\u9891\u7e41\u3002 \u5229\u7528\u4e00\u4e9b\u5df2\u77e5\u7684\u9ad8\u6548\u65b9\u6cd5\u6765\u51cf\u5c11\u8bbf\u5b58\u7684\u5f00\u9500\u80fd\u591f\u6709\u6548\u5730\u63d0\u5347\u6027\u80fd\u3002 \u6bd4\u5982\u5229\u7528\u5185\u5b58\u5927\u9875\u80fd\u6709\u6548\u964d\u4f4eTLB miss\uff0c \u6bd4\u5982\u5229\u7528\u5185\u5b58\u591a\u901a\u9053\u7684\u4ea4\u9519\u8bbf\u95ee\u80fd\u6709\u6548\u63d0\u9ad8\u5185\u5b58\u8bbf\u95ee\u7684\u6709\u6548\u5e26\u5bbd\uff0c \u518d\u6bd4\u5982\u5229\u7528\u5bf9\u4e8e\u5185\u5b58\u975e\u5bf9\u79f0\u6027\u7684\u611f\u77e5\u53ef\u4ee5\u907f\u514d\u989d\u5916\u7684\u8bbf\u5b58\u5ef6\u8fdf\u3002 \u800ccache\u66f4\u662f\u51e0\u4e4e\u6240\u6709\u4f18\u5316\u7684\u6838\u5fc3\u5730\u5e26\uff0c\u8fd9\u4e9b\u6709\u610f\u601d\u800c\u4e14\u5bf9\u6027\u80fd\u6709\u76f4\u63a5\u5f71\u54cd\u7684\u90e8\u5206\uff0c \u5c06\u5728\u7b2c2\u7ae0\u8fdb\u884c\u66f4\u7ec6\u81f4\u7684\u4ecb\u7ecd\u3002  </li> <li>\u8f6f\u4ef6\u8c03\u4f18\uff1a\u8c03\u4f18\u672c\u8eab\u5e76\u4e0d\u80fd\u8bf4\u662f\u6700\u4f73\u5b9e\u8df5\u3002 \u8fd9\u91cc\u5176\u5b9e\u6307\u4ee3\u7684\u662f\u4e00\u7cfb\u5217\u8c03\u4f18\u5b9e\u8df5\uff0c \u6bd4\u5982\u7ed3\u6784\u7684cache line\u5bf9\u9f50\uff0c \u6bd4\u5982\u6570\u636e\u5728\u591a\u6838\u95f4\u8bbf\u95ee\u907f\u514d\u8de8cache line\u5171\u4eab\uff0c \u6bd4\u5982\u9002\u65f6\u5730\u9884\u53d6\u6570\u636e\uff0c\u518d\u5982\u591a\u5143\u6570\u636e\u6279\u91cf\u64cd\u4f5c\u3002 \u8fd9\u4e9b\u5177\u4f53\u7684\u4f18\u5316\u7b56\u7565\u6563\u5e03\u5728DPDK\u5404\u4e2a\u89d2\u843d\u3002 </li> <li>\u5229\u7528IA\u65b0\u786c\u4ef6\u6280\u672f\uff1a IA\u7684\u6700\u65b0\u6307\u4ee4\u96c6\u4ee5\u53ca\u5176\u4ed6\u65b0\u529f\u80fd\u4e00\u76f4\u662fDPDK\u81f4\u529b\u6316\u6398\u6570\u636e\u5305\u5904\u7406\u6027\u80fd\u7684\u6e90\u6cc9\u3002 \u62ffIntel \u00ae DDIO\u6280\u672f\u6765\u8bb2\uff0c \u8fd9\u4e2acache\u5b50\u7cfb\u7edf\u5bf9DMA\u8bbf\u5b58\u7684\u786c\u4ef6\u521b\u65b0\u76f4\u63a5\u52a9\u63a8\u4e86\u6027\u80fd\u8de8\u8d8a\u5f0f\u7684\u589e\u957f\u3002 \u6709\u6548\u5229\u7528SIMD\uff08Single Instruction Multiple Data\uff09 \u5e76\u7ed3\u5408\u8d85\u6807\u91cf\u6280\u672f\uff08Superscalar\uff09 \u5bf9\u6570\u636e\u5c42\u9762\u6216\u8005\u5bf9\u6307\u4ee4\u5c42\u9762\u8fdb\u884c\u6df1\u5ea6\u5e76\u884c\u5316\uff0c \u5728\u6027\u80fd\u7684\u8fdb\u4e00\u6b65\u63d0\u5347\u4e0a\u4e5f\u884c\u4e4b\u6709\u6548\u3002 \u53e6\u5916\u4e00\u4e9b\u6307\u4ee4\uff08\u6bd4\u5982cmpxchg\uff09 \uff0c \u672c\u8eab\u5c31\u662flockless\u6570\u636e\u7ed3\u6784\u7684\u57fa\u77f3\uff0c \u800ccrc32\u6307\u4ee4\u5bf9\u4e0e4Byte Key\u7684\u54c8\u5e0c\u8ba1\u7b97\u4e5f\u662f\u6539\u5584\u660e\u663e\u3002</li> <li>\u5145\u5206\u6316\u6398\u7f51\u5361\u7684\u6f5c\u80fd\uff1a \u7ecf\u8fc7DPDK I/O\u52a0\u901f\u7684\u6570\u636e\u5305\u901a\u8fc7PCIe\u7f51\u5361\u8fdb\u5165\u7cfb\u7edf\u5185\u5b58\uff0c PCIe\u5916\u8bbe\u5230\u7cfb\u7edf\u5185\u5b58\u4e4b\u95f4\u7684\u5e26\u5bbd\u5229\u7528\u6548\u7387\u3001 \u6570\u636e\u4f20\u9001\u65b9\u5f0f\uff08coalesce\u64cd\u4f5c\uff09 \u7b49\u90fd\u662f\u76f4\u63a5\u5f71\u54cdI/O\u6027\u80fd\u7684\u56e0\u7d20\u3002 \u5728\u73b0\u4ee3\u7f51\u5361\u4e2d\uff0c \u5f80\u5f80\u8fd8\u652f\u6301\u4e00\u4e9b\u5206\u6d41\uff08\u5982RSS\uff0c FDIR\u7b49\uff09 \u548c\u5378\u8f7d\uff08\u5982Chksum\uff0c TSO\u7b49\uff09 \u529f\u80fd\u3002 DPDK\u5145\u5206\u5229\u7528\u8fd9\u4e9b\u786c\u4ef6\u52a0\u901f\u7279\u6027\uff0c \u5e2e\u52a9\u5e94\u7528\u66f4\u597d\u5730\u83b7\u5f97\u76f4\u63a5\u7684\u6027\u80fd\u63d0\u5347\u3002 </li> <li>\u6b64\u5916\u8fd8\u6709DPDK I/O\u865a\u62df\u5316\uff0c\u4e1a\u754c\u5e7f\u6cdb\u4f7f\u7528\u7684\u4e24\u79cd\u4e3b\u6d41\u65b9\u5f0f\uff0c SR-IOV\u548cVirtio\u3002</li> </ul>"},{"location":"Documents/D-Technology/DPDK/DPDK/#2-dpdk","title":"2 DPDK\u4e3b\u8981\u6a21\u5757","text":"<ul> <li>\u6838\u5fc3\u5e93Core Libs\uff0c \u63d0\u4f9b\u7cfb\u7edf\u62bd\u8c61\u3001 \u5927\u9875\u5185\u5b58\u3001 \u7f13\u5b58\u6c60\u3001 \u5b9a\u65f6\u5668\u53ca\u65e0\u9501\u73af\u7b49\u57fa\u7840\u7ec4\u4ef6\u3002  </li> <li>PMD\u5e93\uff0c \u63d0\u4f9b\u5168\u7528\u6237\u6001\u7684\u9a71\u52a8\uff0c \u4ee5\u4fbf\u901a\u8fc7\u8f6e\u8be2\u548c\u7ebf\u7a0b\u7ed1\u5b9a\u5f97\u5230\u6781\u9ad8\u7684\u7f51\u7edc\u541e\u5410\uff0c \u652f\u6301\u5404\u79cd\u672c\u5730\u548c\u865a\u62df\u7684\u7f51\u5361\u3002 </li> <li>Classify\u5e93\uff0c \u652f\u6301\u7cbe\u786e\u5339\u914d\uff08Exact Match\uff09\u3001\u6700\u957f\u5339\u914d\uff08LPM\uff09 \u548c\u901a\u914d\u7b26\u5339\u914d\uff08ACL\uff09\uff0c\u63d0\u4f9b\u5e38\u7528\u5305\u5904\u7406\u7684\u67e5\u8868\u64cd\u4f5c\u3002</li> <li>QoS\u5e93\uff0c \u63d0\u4f9b\u7f51\u7edc\u670d\u52a1\u8d28\u91cf\u76f8\u5173\u7ec4\u4ef6\uff0c \u5982\u9650\u901f\uff08Meter\uff09 \u548c\u8c03\u5ea6\uff08Sched\uff09</li> </ul>"},{"location":"Documents/D-Technology/%E4%BA%91%E8%AE%A1%E7%AE%97/%E4%BA%91%E5%8E%9F%E7%94%9F/","title":"\u4e91\u539f\u751f","text":"<pre><code>title: \u4ec0\u4e48\u662f\u4e91\u539f\u751f\n</code></pre> <pre><code>title: \u4e91\u8ba1\u7b97\u548c\u4e91\u539f\u751f\u7684\u5173\u7cfb\n\nhttps://zhuanlan.zhihu.com/p/420493055\n</code></pre>"},{"location":"Documents/D-Technology/%E4%BA%91%E8%AE%A1%E7%AE%97/%E4%BA%91%E8%AE%A1%E7%AE%97/","title":"\u4e91\u8ba1\u7b97","text":"<pre><code>title: \u4ec0\u4e48\u662f\u4e91\u8ba1\u7b97\n\n\u4e91\u8ba1\u7b97\u662f\u4e00\u79cd\u670d\u52a1\uff0c\u63d0\u4f9b\u7684\u8d44\u6e90\uff0c\u5982\u865a\u62df\u673a\u3001\u5b58\u50a8\u3001\u7f51\u7edc\u548c\u64cd\u4f5c\u7cfb\u7edf\u4f9b\u4f7f\u7528\n</code></pre>"},{"location":"Documents/D-Technology/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/B%2B%E6%A0%91/","title":"B+\u6811","text":"<p>B+\u6811\u662fB\u6811\u7684\u53d8\u5f62\u6811\uff0c\u66f4\u9002\u5408\u4e0e\u6587\u4ef6\u7d22\u5f15\u7cfb\u7edf</p>"},{"location":"Documents/D-Technology/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/B%2B%E6%A0%91/#1-bb","title":"1 B+\u6811\u548cB\u6811\u7684\u533a\u522b","text":"<p>\u4e00\u68f5m\u9636\u7684B+\u6811\u548cm\u9636\u7684B\u6811\u7684\u5dee\u5f02\u5728\u4e8e\uff1a 1. \u6709n\u68f5\u5b50\u6811\u7684\u7ed3\u70b9\u4e2d\u542b\u6709n\u4e2a\u5173\u952e\u5b57\uff1b\uff08B\u6811\u662f\u542b\u6709n-1\u4e2a\u5173\u952e\u5b57\uff09 2. \u6240\u6709\u7684\u53f6\u5b50\u7ed3\u70b9\u4e2d\u5305\u542b\u4e86\u5168\u90e8\u5173\u952e\u5b57\u7684\u4fe1\u606f\uff0c\u4ee5\u53ca\u6307\u5411\u542b\u8fd9\u4e9b\u5173\u952e\u5b57\u8bb0\u5f55\u7684\u6307\u9488\uff0c\u4e14\u53f6\u5b50\u7ed3\u70b9\u672c\u8eab\u4f9d\u5173\u952e\u5b57\u7684\u5927\u5c0f\u81ea\u5c0f\u800c\u5927\u987a\u5e8f\u94fe\u63a5\uff1a 3. \u6240\u6709\u7684\u975e\u7ec8\u7aef\u7ed3\u70b9\u53ef\u4ee5\u770b\u6210\u662f\u7d22\u5f15\u90e8\u5206\uff0c\u7ed3\u70b9\u4e2d\u4ec5\u542b\u6709\u5176\u5b50\u6811\uff08\u6839\u7ed3\u70b9\uff09\u4e2d\u7684\u6700\u5927\uff08\u6216\u6700\u5c0f\uff09\u5173\u952e\u5b57\u3002</p> <p></p>"},{"location":"Documents/D-Technology/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/B%2B%E6%A0%91/#2-b","title":"2 B+\u6811\u7684\u67e5\u627e\u3001\u63d2\u5165\u548c\u5220\u9664","text":"<pre><code>B+\u6570\u7684\u67e5\u8be2\u3001\u63d2\u5165\u3001\u5220\u9664\uff0c\u6700\u7ec8\u90fd\u8981\u5230\u53f6\u5b50\u7ed3\u70b9\n</code></pre> <p>\u5728B+\u6811\u4e0a\u8fdb\u884c\u968f\u673a\u67e5\u627e\u3001\u63d2\u5165\u548c\u5220\u9664\u7684\u8fc7\u7a0b\u57fa\u672c\u4e0a\u4e0eB-\u6811\u7c7b\u4f3c\u3002 1. \u67e5\u627e\uff1a\u82e5\u975e\u7ec8\u7aef\u7ed3\u70b9\u4e0a\u7684\u5173\u952e\u5b57\u7b49\u4e8e\u7ed9\u5b9a\u503c\uff0c\u5e76\u4e0d\u7ec8\u6b62\uff0c\u800c\u662f\u7ee7\u7eed\u5411\u4e0b\u76f4\u5230\u53f6\u5b50\u7ed3\u70b9\u3002\u56e0\u6b64\uff0c\u5728B+\u6811\u4e2d\uff0c\u4e0d\u7ba1\u67e5\u627e\u6210\u529f\u4e0e\u5426\uff0c\u6bcf\u6b21\u67e5\u627e\u90fd\u662f\u8d70\u4e86\u4e00\u6761\u4ece\u6839\u5230\u53f6\u5b50\u7ed3\u70b9\u7684\u8def\u5f84\u3002B+\u6811\u67e5\u627e\u7684\u5206\u6790\u7c7b\u4f3c\u4e8eB\u6811\u3002B+\u6811\u4e0d\u4ec5\u80fd\u591f\u6709\u6548\u5730\u67e5\u627e\u5355\u4e2a\u5173\u952e\u5b57\uff0c\u800c\u4e14\u66f4\u9002\u5408\u67e5\u627e\u67d0\u4e2a\u8303\u56f4\u5185\u7684\u6240\u6709\u5173\u952e\u5b57\u3002\u4f8b\u5982\uff0c\u5728B+\u6811\u4e0a\u627e\u51fa\u8303\u56f4\u5728<code>[a,b]</code>\u4e4b\u95f4\u7684\u6240\u6709\u5173\u952e\u5b57\u503c\u3002\u5904\u7406\u65b9\u6cd5\u5982\u4e0b\uff1a\u901a\u8fc7\u4e00\u6b21\u67e5\u627e\u627e\u51fa\u5173\u952e\u5b57a,\u4e0d\u7ba1\u5b83\u662f\u5426\u5b58\u5728\uff0c\u90fd\u53ef\u4ee5\u5230\u8fbe\u53ef\u80fd\u51fa\u73b0a\u7684\u53f6\u5b50\u7ed3\u70b9\uff0c\u7136\u540e\u5728\u53f6\u5b50\u7ed3\u70b9\u4e2d\u67e5\u627e\u5173\u952e\u5b57\u503c\u7b49\u4e8ea\u6216\u5927\u4e8e\u7684\u90a3\u4e9b\u5173\u952e\u5b57\uff0c\u5bf9\u4e8e\u6240\u627e\u5230\u7684\u6bcf\u4e2a\u5173\u952e\u5b57\u90fd\u6709\u4e00\u4e2a\u6307\u9488\u6307\u5411\u76f8\u5e94\u7684\u8bb0\u5f55\uff0c\u8fd9\u4e9b\u8bb0\u5f55\u7684\u5173\u952e\u5b57\u5728\u6240\u9700\u8981\u7684\u8303\u56f4\u3002\u5982\u679c\u5728\u5f53\u524d\u7ed3\u70b9\u4e2d\u6ca1\u6709\u53d1\u73b0\u5927\u4e8eb\u7684\u5173\u952e\u5b57\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u5f53\u524d\u53f6\u5b50\u7ed3\u70b9\u7684\u6700\u540e\u4e00\u4e2a\u6307\u9488\u627e\u5230\u4e0b\u4e00\u4e2a\u53f6\u5b50\u7ed3\u70b9\uff0c\u5e76\u7ee7\u7eed\u8fdb\u884c\u540c\u6837\u7684\u5904\u7406\uff0c\u76f4\u81f3\u5728\u67d0\u4e2a\u53f6\u5b50\u7ed3\u70b9\u4e2d\u627e\u5230\u5927\u4e8eb\u7684\u5173\u952e\u5b57\uff0c\u624d\u505c\u6b62\u67e5\u627e\u3002 2. \u63d2\u5165\uff1a\u4ec5\u5728\u53f6\u5b50\u7ed3\u70b9\u4e0a\u8fdb\u884c\u63d2\u5165\uff0c\u5f53\u7ed3\u70b9\u4e2d\u7684\u5173\u952e\u5b57\u4e2a\u6570\u5927\u4e8em\u65f6\u8981\u5206\u88c2\u6210\u4e24\u4e2a\u7ed3\u70b9\uff0c\u5e73\u5206\u5173\u952e\u5b57\uff0c\u5e76\u4e14\uff0c\u5b83\u4eec\u7684\u53cc\u4eb2\u7ed3\u70b9\u4e2d\u5e94\u540c\u65f6\u5305\u542b\u8fd9\u4e24\u4e2a\u7ed3\u70b9\u4e2d\u7684\u6700\u5927\u5173\u952e\u5b57\u3002 3. \u5220\u9664\uff1aB+\u6811\u7684\u5220\u9664\u4e5f\u4ec5\u5728\u53f6\u5b50\u7ed3\u70b9\u8fdb\u884c\uff0c\u5f53\u53f6\u5b50\u7ed3\u70b9\u4e2d\u6700\u5927\u5173\u952e\u5b57\u88ab\u5220\u9664\u65f6\uff0c\u5176\u5728\u975e\u7ec8\u7aef\u7ed3\u70b9\u4e2d\u7684\u503c\u53ef\u4ee5\u4f5c\u4e3a\u4e00\u4e2a\u201c\u5206\u754c\u5173\u952e\u5b57\u201d\u5b58\u5728\u3002\u82e5\u56e0\u5220\u9664\u800c\u4f7f\u7ed3\u70b9\u4e2d\u5173\u952e\u5b57\u7684\u4e2a\u6570\u5c11\u4e8e<code>[m/2]</code>\u65f6\uff0c\u5176\u548c\u5144\u5f1f\u7ed3\u70b9\u7684\u5408\u5e76\u8fc7\u7a0b\u4ea6\u548cB\u6811\u7c7b\u4f3c\u3002</p>"},{"location":"Documents/D-Technology/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/B%E6%A0%91/","title":"B \u6811","text":""},{"location":"Documents/D-Technology/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/B%E6%A0%91/#1-b","title":"1 B\u6811\u4f7f\u7528\u573a\u666f","text":"<p>\u4e8c\u53c9\u6811\u3001\u5e73\u8861\u4e8c\u53c9\u6811\u9002\u7528\u4e8e\u5b58\u50a8\u5728\u8ba1\u7b97\u673a\u5185\u5b58\u4e2d\u8f83\u5c0f\u7684\u6587\u4ef6\uff0c\u7edf\u79f0\u4e3a\u5185\u67e5\u627e\u6cd5\u3002\u82e5\u6587\u4ef6\u5f88\u5927\u4e14\u5b58\u653e\u4e8e\u5916\u5b58\u8fdb\u884c\u67e5\u627e\u65f6\uff0c\u8fd9\u4e9b\u67e5\u627e\u65b9\u6cd5\u5c31\u4e0d\u9002\u7528\u4e86\u3002\u5185\u67e5\u627e\u6cd5\u90fd\u4ee5\u7ed3\u70b9\u4e3a\u5355\u4f4d\u8fdb\u884c\u67e5\u627e\uff0c\u8fd9\u6837\u9700\u8981\u53cd\u590d\u5730\u8fdb\u884c\u5185\u3001\u5916\u5b58\u7684\u4ea4\u6362\uff0c\u662f\u5f88\u8d39\u65f6\u7684\u30021970 \u5e74\uff0cR.Bayer \u548cE.Mccreight \u63d0\u51fa\u4e86\u4e00\u79cd\u9002\u7528\u4e8e\u5916\u67e5\u627e\u7684\u5e73\u8861\u591a\u53c9\u6811\u2014\u2014B \u6811\uff0c\u78c1\u76d8\u7ba1\u7406\u7cfb\u7edf\u4e2d\u7684\u76ee\u5f55\u7ba1\u7406\uff0c\u4ee5\u53ca\u6570\u636e\u5e93\u7cfb\u7edf\u4e2d\u7684\u7d22\u5f15\u7ec4\u7ec7\u591a\u6570\u90fd\u91c7\u7528 B\u6811\u8fd9\u79cd\u6570\u636e\u7ed3\u6784\u3002</p>"},{"location":"Documents/D-Technology/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/B%E6%A0%91/#2-b","title":"2 B\u6811\u5b9a\u4e49","text":"<ul> <li>\u6811\u7684\u9636\uff1a\u6811\u4e2d\u8282\u70b9\u6700\u5927\u5b50\u6811\u4e2a\u6570\u4e3am\uff0c\u5219\u79f0\u4e3am\u9636\u6570\u3002</li> <li>\u5173\u952e\u5b57\uff08key\uff09\uff1aB \u6811\u4e2d\u4e00\u4e2a\u8282\u70b9\u53ef\u4ee5\u6709\u591a\u4e2a\u5173\u952e\u5b57\uff0c\u6b64\u5173\u952e\u5b57\u5c31\u76f8\u5f53\u4e8e\u4e8c\u53c9\u6811\u8282\u70b9\u7684\u503c\u3002\u5173\u952e\u5b57\u6570\u91cf\u6ee1\u8db3\u5173\u7cfb <code>[m/2]&lt;=n&lt;=m-1</code></li> <li>\u4e00\u68f5m\u9636\u7684B\u6811\uff0c\u6216\u4e3a\u7a7a\u6811\uff0c\u6216\u4e3a\u6ee1\u8db3\u4e0b\u5217\u7279\u6027\u7684m\u53c9\u6811\uff1a</li> <li>\u6811\u4e2d\u6bcf\u4e2a\u7ed3\u70b9\u81f3\u591a\u6709m\u68f5\u5b50\u6811\uff1a</li> <li>\u82e5\u6839\u7ed3\u70b9\u4e0d\u662f\u53f6\u5b50\u7ed3\u70b9\uff0c\u5219\u81f3\u5c11\u6709\u4e24\u68f5\u5b50\u6811\uff1b</li> <li>\u9664\u6839\u4e4b\u5916\u7684\u6240\u6709\u975e\u7ec8\u7aef\u7ed3\u70b9\u81f3\u5c11\u6709m/2\u68f5\u5b50\u6811\uff1b</li> <li>\u6240\u6709\u7684\u53f6\u5b50\u7ed3\u70b9\u90fd\u51fa\u73b0\u5728\u540c\u4e00\u5c42\u6b21\u4e0a\uff0c\u5e76\u4e14\u4e0d\u5e26\u4fe1\u606f\uff0c\u901a\u5e38\u79f0\u4e3a\u5931\u8d25\u7ed3\u70b9\uff08\u5931\u8d25\u7ed3\u70b9\u5e76\u4e0d\u5b58\u5728\uff0c\u6307\u5411\u8fd9\u4e9b\u7ed3\u70b9\u7684\u6307\u9488\u4e3a\u7a7a\u3002\u5f15\u5165\u5931\u8d25\u7ed3\u70b9\u662f\u4e3a\u4e86\u4fbf\u4e8e\u5206\u6790B\u6811\u7684\u67e5\u627e\u6027\u80fd)\uff1a</li> <li>\u6240\u6709\u7684\u975e\u7ec8\u7aef\u7ed3\u70b9\u6700\u591a\u6709m-1\u4e2a\u5173\u952e\u5b57\uff0c\u7ed3\u70b9\u7684\u7ed3\u6784\u5982\u56fe7.21\u6240\u793a\u3002</li> </ul>"},{"location":"Documents/D-Technology/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/B%E6%A0%91/#3-b","title":"3 B\u6811\u67e5\u8be2","text":""},{"location":"Documents/D-Technology/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/B%E6%A0%91/#31","title":"3.1 \u7b97\u6cd5\u6b65\u9aa4","text":"<p>\u5c06\u7ed9\u5b9a\u503c key \u4e0e\u6839\u7ed3\u70b9\u7684\u5404\u4e2a\u5173\u952e\u5b57 K1,K2,, \u98de\uff081\u2264j\u2264m-1) \u8fdb\u884c\u6bd4\u8f83\uff0c\u7531\u4e8e\u8be5\u5173\u952e\u5b57\u5e8f\u5217\u662f\u6709\u5e8f\u7684\uff0c\u6240\u4ee5\u67e5\u627e\u65f6\u53ef\u91c7\u7528\u987a\u5e8f\u67e5\u627e\uff0c\u4e5f\u53ef\u91c7\u7528\u6298\u534a\u67e5\u627e\u3002\u67e5\u627e\u65f6\uff1a 1. \u82e5key=Ki\uff081\u2264i\u2264j),\u5219\u67e5\u627e\u6210\u529f\uff1b 2. \u82e5key&lt;K1,\u5219\u987a\u7740\u6307\u9488P0\u6240\u6307\u5411\u7684\u5b50\u6811\u7ee7\u7eed\u5411\u4e0b\u67e5\u627e\uff1b 3. \u82e5Ki&lt;keyKj\u5219\u987a\u7740\u6307\u9488Pj\u6240\u6307\u5411\u7684\u5b50\u6811\u7ee7\u7eed\u5411\u4e0b\u67e5\u627e\u3002 \u5982\u679c\u5728\u81ea\u4e0a\u800c\u4e0b\u7684\u67e5\u627e\u8fc7\u7a0b\u4e2d\uff0c\u627e\u5230\u4e86\u503c\u4e3akey\u7684\u5173\u952e\u5b57\uff0c\u5219\u67e5\u627e\u6210\u529f\uff1b\u5982\u679c\u76f4\u5230\u53f6\u5b50\u7ed3\u70b9\u4e5f\u672a\u627e\u5230\uff0c\u5219\u67e5\u627e\u5931\u8d25\u3002"},{"location":"Documents/D-Technology/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/B%E6%A0%91/#4-b","title":"4 B\u6811\u63d2\u5165","text":""},{"location":"Documents/D-Technology/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/B%E6%A0%91/#41","title":"4.1 \u63d2\u5165\u89c4\u5219","text":"<ol> <li>\u6bcf\u6b21\u63d2\u5165\u4e00\u4e2a\u5173\u952e\u5b57\u4e0d\u662f\u5728\u6811\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u53f6\u5b50\u7ed3\u70b9\uff0c\u800c\u662f\u9996\u5148\u5728\u6700\u4f4e\u5c42\u7684\u67d0\u4e2a\u975e\u7ec8\u7aef\u7ed3\u70b9\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u5173\u952e\u5b57\u3002\uff08\u5173\u952e\u5b57\u4e2a\u6570\u533a\u95f4\u4e3a<code>[m/2]&lt;=n&lt;=m-1</code>\uff09</li> <li>\u5f53\u7ed3\u70b9\u63d2\u5165\u5173\u952e\u5b57\u540e\u6570\u91cfn\u6ee1\u8db3<code>[m/2]&lt;=n&lt;=m-1</code>\uff0c\u5219\u63d2\u5165\u6210\u529f\u3002</li> <li>\u5f53\u7ed3\u70b9\u63d2\u5165\u5173\u952e\u5b57\u540e\u6570\u91cfn\u4e0d\u6ee1\u8db3<code>[m/2]&lt;=n&lt;=m-1</code>\uff0c\u5219\u9700\u8981\u5728\u540c\u4e00\u5c42\u8fdb\u884c\u7ed3\u70b9\u5206\u88c2\u3002</li> </ol>"},{"location":"Documents/D-Technology/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/B%E6%A0%91/#42","title":"4.2 \u8282\u70b9\u5206\u88c2","text":"<ol> <li>\u4ee5\u4e2d\u95f4\u5173\u952e\u5b57\u4e3a\u754c\u628a\u7ed3\u70b9\u4e00\u5206\u4e3a\u4e8c\uff0c\u6210\u4e3a\u4e24\u4e2a\u7ed3\u70b9\uff0c\u5e76\u628a\u4e2d\u95f4\u5173\u952e\u5b57\u5411\u4e0a\u63d2\u5165\u5230\u53cc\u4eb2\u7ed3\u70b9\u4e0a\u3002</li> <li>\u82e5\u53cc\u4eb2\u7ed3\u70b9\u5df2\u6ee1\uff0c\u5219\u91c7\u7528\u540c\u6837\u7684\u65b9\u6cd5\u7ee7\u7eed\u5206\u89e3\u3002</li> <li>\u6700\u574f\u7684\u60c5\u51b5\u4e0b\uff0c\u4e00\u76f4\u5206\u89e3\u5230\u6811\u6839\u7ed3\u70b9\uff0c\u8fd9\u65f6B-\u6811\u9ad8\u5ea6\u589e\u52a01\u3002</li> </ol>"},{"location":"Documents/D-Technology/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/B%E6%A0%91/#43","title":"4.3 \u7b97\u6cd5\u6b65\u9aa4","text":"<p>\u2460\u5728B-\u6811\u4e2d\u67e5\u627e\u7ed9\u5b9a\u5173\u952e\u5b57\u7684\u8bb0\u5f55\uff0c\u82e5\u67e5\u627e\u6210\u529f\uff0c\u5219\u63d2\u5165\u64cd\u4f5c\u5931\u8d25\uff1b\u5426\u5219\u5c06\u65b0\u8bb0\u5f55\u4f5c\u4e3a\u7a7a\u6307\u9488p\u63d2\u4eba\u5230\u67e5\u627e\u5931\u8d25\u7684\u53f6\u5b50\u7ed3\u70b9\u7684\u4e0a\u4e00\u5c42\u7ed3\u70b9\uff08\u7531q\u6307\u5411\uff09\u4e2d\u3002 \u2461\u82e5\u63d2\u5165\u65b0\u8bb0\u5f55\u548c\u7a7a\u6307\u9488\u540e\uff0cq\u6307\u5411\u7684\u7ed3\u70b9\u7684\u5173\u952e\u5b57\u4e2a\u6570\u672a\u8d85\u8fc7m-1,\u5219\u63d2\u5165\u64cd\u4f5c\u6210\u529f\uff0c\u5426\u5219\u8f6c\u5165\u6b65\u9aa4\u2462\u3002 \u2462\u4ee5\u8be5\u7ed3\u70b9\u7684\u7b2c<code>[m/2]</code>\u4e2a\u5173\u952e\u5b57<code>K[m/2]</code>\u4e3a\u62c6\u5206\u70b9\uff0c\u5c06\u8be5\u7ed3\u70b9\u5206\u62103\u4e2a\u90e8\u5206\uff1a<code>K[m/2]</code>\u5de6\u8fb9\u90e8\u5206\u3001<code>[Km/2]</code>\u3001<code>[Km/2]</code>\u53f3\u8fb9\u90e8\u5206\u3002<code>K[m/2]</code>\u5de6\u8fb9\u90e8\u5206\u4ecd\u7136\u4fdd\u7559\u5728\u539f\u7ed3\u70b9\u4e2d\uff1b<code>K[m/2]</code>\u53f3\u8fb9\u90e8\u5206\u5b58\u653e\u5728\u4e00\u4e2a\u65b0\u521b\u5efa\u7684\u7ed3\u70b9\uff08\u7531p\u6307\u5411\uff09\u4e2d\uff1b\u5173\u952e\u5b57\u503c\u4e3a<code>K[m/2]</code>\u7684\u8bb0\u5f55\u548c\u6307\u9488p\u63d2\u5165\u5230q\u7684\u53cc\u4eb2\u7ed3\u70b9\u4e2d\u3002\u56e0q\u7684\u53cc\u4eb2\u7ed3\u70b9\u589e\u52a0\u4e00\u4e2a\u65b0\u7684\u8bb0\u5f55\uff0c\u6240\u4ee5\u5fc5\u987b\u5bf9q\u7684\u53cc\u4eb2\u7ed3\u70b9\u91cd\u590d\u2461\u548c\u2462\u7684\u64cd\u4f5c\uff0c\u4f9d\u6b21\u7c7b\u63a8\uff0c\u76f4\u81f3\u7531q\u6307\u5411\u7684\u7ed3\u70b9\u662f\u6839\u7ed3\u70b9\uff0c\u8f6c\u5165\u6b65\u9aa4\u2463\u3002 \u2463\u7531\u4e8e\u6839\u7ed3\u70b9\u65e0\u53cc\u4eb2\uff0c\u5219\u7531\u5176\u5206\u88c2\u4ea7\u751f\u7684\u4e24\u4e2a\u7ed3\u70b9\u7684\u6307\u9488p\u548cq,\u4ee5\u53ca\u5173\u952e\u5b57\u4e3a<code>K[m/2]</code>\u7684\u8bb0\u5f55\u6784\u6210\u4e00\u4e2a\u65b0\u7684\u6839\u7ed3\u70b9\u3002\u6b64\u65f6\uff0cB\u6811\u7684\u9ad8\u5ea6\u589e\u52a01\u3002</p>"},{"location":"Documents/D-Technology/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/B%E6%A0%91/#5-b","title":"5 B\u6811\u7684\u5220\u9664","text":""},{"location":"Documents/D-Technology/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/B%E6%A0%91/#51","title":"5.1 \u5220\u9664\u89c4\u5219","text":"<ol> <li>m\u9636B\u6811\u7684\u5220\u9664\u64cd\u4f5c\u662f\u5728B-\u6811\u7684\u67d0\u4e2a\u7ed3\u70b9\u4e2d\u5220\u9664\u6307\u5b9a\u7684\u5173\u952e\u5b57\u53ca\u5176\u90bb\u8fd1\u7684\u4e00\u4e2a\u6307\u9488\uff0c\u5220\u9664\u540e\u5e94\u8be5\u8fdb\u884c\u8c03\u6574\u4f7f\u8be5\u6811\u4ecd\u7136\u6ee1\u8db3B\u6811\u7684\u5b9a\u4e49\uff0c\u4e5f\u5c31\u662f\u8981\u4fdd\u8bc1\u6bcf\u4e2a\u7ed3\u70b9\u7684\u5173\u952e\u5b57\u6570\u76ee\u8303\u56f4\u4e3a<code>[m/2]&lt;=n&lt;=m-1</code>\u3002</li> <li>\u5220\u9664\u8bb0\u5f55\u540e\uff0c\u7ed3\u70b9\u7684\u5173\u952e\u5b57\u4e2a\u6570\u5982\u679c\u5c0f\u4e8e<code>[m/2-1]</code>,\u5219\u8981\u8fdb\u884c\u201c\u5408\u5e76\u201d\u7ed3\u70b9\u7684\u64cd\u4f5c\u3002</li> <li>\u9664\u4e86\u5220\u9664\u8bb0\u5f55\uff0c\u8fd8\u8981\u5220\u9664\u8be5\u8bb0\u5f55\u90bb\u8fd1\u7684\u6307\u9488\u3002</li> <li>\u82e5\u8be5\u7ed3\u70b9\u4e3a\u6700\u4e0b\u5c42\u7684\u975e\u7ec8\u7aef\u7ed3\u70b9\uff0c\u7531\u4e8e\u5176\u6307\u9488\u5747\u4e3a\u7a7a\uff0c\u5220\u9664\u540e\u4e0d\u4f1a\u5f71\u54cd\u5176\u4ed6\u7ed3\u70b9\uff0c\u53ef\u76f4\u63a5\u5220\u9664\uff1b</li> <li>\u82e5\u8be5\u7ed3\u70b9\u4e0d\u662f\u6700\u4e0b\u5c42\u7684\u975e\u7ec8\u7aef\u7ed3\u70b9\uff0c\u90bb\u8fd1\u7684\u6307\u9488\u5219\u6307\u5411\u4e00\u68f5\u5b50\u6811\uff0c\u4e0d\u53ef\u76f4\u63a5\u5220\u9664\u3002\u6b64\u65f6\u53ef\u505a\u5982\u4e0b\u5904\u7406\uff1a\u5c06\u8981\u5220\u9664\u8bb0\u5f55\u7528\u5176\u53f3(\u5de6)\u8fb9\u90bb\u8fd1\u6307\u9488\u6307\u5411\u7684\u5b50\u6811\u4e2d\u5173\u952e\u5b57\u6700\u5c0f\uff08\u5927\uff09\u7684\u8bb0\u5f55\uff08\u8be5\u8bb0\u5f55\u5fc5\u5b9a\u5728\u6700\u4e0b\u5c42\u7684\u975e\u7ec8\u7aef\u7ed3\u70b9\u4e2d)\u66ff\u6362\u3002\u91c7\u53d6\u8fd9\u79cd\u65b9\u6cd5\u8fdb\u884c\u5904\u7406\uff0c\u65e0\u8bba\u8981\u5220\u9664\u7684\u8bb0\u5f55\u6240\u5728\u7684\u7ed3\u70b9\u662f\u5426\u4e3a\u6700\u4e0b\u5c42\u7684\u975e\u7ec8\u7aef\u7ed3\u70b9\uff0c\u90fd\u53ef\u5f52\u7ed3\u4e3a\u5728\u6700\u4e0b\u5c42\u7684\u975e\u7ec8\u7aef\u7ed3\u70b9\u4e2d\u5220\u9664\u8bb0\u5f55\u7684\u60c5\u51b5\u3002</li> </ol>"},{"location":"Documents/D-Technology/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/B%E6%A0%91/#52","title":"5.2 \u7ed3\u70b9\u5408\u5e76","text":""},{"location":"Documents/D-Technology/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/B%E6%A0%91/#53","title":"5.3 \u7b97\u6cd5\u6b65\u9aa4","text":""},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/mount/","title":"mount","text":""},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/mount/#1-mount","title":"1 mount","text":"<pre><code>Unix \u7cfb\u7edf\u4e2d\u53ef\u8bbf\u95ee\u7684\u6240\u6709\u6587\u4ef6\u90fd\u6392\u5217\u5728\u4e00\u68f5\u5927\u6811\u4e2d\uff0c\u5373\u6587\u4ef6\u5c42\u6b21\u7ed3\u6784\uff0c\u6839\u4f4d\u4e8e/\u3002\u8fd9\u4e9b\u6587\u4ef6\u53ef\u4ee5\u5206\u5e03\u5728\u591a\u4e2a\u8bbe\u5907\u4e0a\u3002mount \u547d\u4ee4\u7528\u4e8e\u5c06\u67d0\u4e9b\u8bbe\u5907\u4e0a\u7684\u6587\u4ef6\u7cfb\u7edf\u9644\u52a0\u5230\u5927\u6587\u4ef6\u6811\u3002\u76f8\u53cd\uff0cumount\u547d\u4ee4\u5c06\u518d\u6b21\u5206\u79bb\u5b83\u3002\u6587\u4ef6\u7cfb\u7edf\u7528\u4e8e\u63a7\u5236\u6570\u636e\u5982\u4f55\u5b58\u50a8\u5728\u8bbe\u5907\u4e0a\u6216\u5982\u4f55\u901a\u8fc7\u7f51\u7edc\u6216\u5176\u4ed6\u670d\u52a1\u4ee5\u865a\u62df\u65b9\u5f0f\u63d0\u4f9b\u3002\n</code></pre> <p>\u540c\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\u53ef\u4ee5\u5b89\u88c5\u591a\u6b21\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff08\u4f8b\u5982\uff0c\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\uff09\u540c\u4e00\u6587\u4ef6\u7cfb\u7edf\u53ef\u4ee5\u591a\u6b21\u5b89\u88c5\u5728\u540c\u4e00\u5b89\u88c5\u70b9\u4e0a\u3002mount \u547d\u4ee4\u672a\u5b9e\u73b0\u4efb\u4f55\u7b56\u7565\u6765\u63a7\u5236\u6b64\u884c\u4e3a\u3002\u6240\u6709\u884c\u4e3a\u90fd\u7531\u5185\u6838\u63a7\u5236\uff0c\u5e76\u4e14\u901a\u5e38\u7279\u5b9a\u4e8e\u6587\u4ef6\u7cfb\u7edf\u9a71\u52a8\u7a0b\u5e8f\u3002\u4f8b\u5916\u662f--all\uff0c\u5728\u672c\u4f8b\u4e2d\uff0c\u5df2\u5b89\u88c5\u7684\u6587\u4ef6\u7cfb\u7edf\u5c06\u88ab\u5ffd\u7565\uff08\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u7684--all\uff09\u3002 1. \u6807\u51c6\u6302\u8f7d\u547d\u4ee4\u683c\u5f0f\uff1a<code>mount -t type device dir</code> \u3002 2. \u5982\u679c\u53ea\u6307\u5b9a\u4e86\u76ee\u5f55\uff0c\u5982 <code>mount /dir</code>\uff0c\u5219\u4f1a\u67e5\u627e <code>/etc/fstab</code> \u6587\u4ef6\u4e0b\u7684\u914d\u7f6e\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/mount/#11","title":"1.1 \u547d\u4ee4\u884c\u9009\u9879","text":""},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/mount/#111-a","title":"1.1.1 -a","text":"<ul> <li>\u529f\u80fd\uff1a\u6302\u8f7d\u6240\u6709\u6765 <code>/etc/fstab</code> \u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u6587\u4ef6\u7cfb\u7edf</li> <li>\u793a\u4f8b</li> </ul> <pre><code>## cat /etc/fstab \n/dev/mapper/rl_rocky-root /                       xfs     defaults        0 0\nUUID=16b0357b-9851-481a-bfac-599482f2389b /boot                   xfs     defaults        0 0\n/dev/mapper/rl_rocky-swap none                    swap    defaults        0 0\n\n/dev/nvme0n2p1 /home/shw/code                     xfs     defaults        0 0\n## df -h\nFilesystem                 Size  Used Avail Use% Mounted on\ndevtmpfs                   1.8G     0  1.8G   0% /dev\ntmpfs                      740M  9.1M  731M   2% /run\n/dev/mapper/rl_rocky-root   17G  3.8G   14G  23% /\ntmpfs                      370M     0  370M   0% /run/user/1000\ntmpfs                      370M     0  370M   0% /run/user/0\n## mount -a\n## df -h\nFilesystem                 Size  Used Avail Use% Mounted on\ndevtmpfs                   1.8G     0  1.8G   0% /dev\ntmpfs                      740M  9.1M  731M   2% /run\n/dev/mapper/rl_rocky-root   17G  3.8G   14G  23% /\ntmpfs                      370M     0  370M   0% /run/user/1000\ntmpfs                      370M     0  370M   0% /run/user/0\n/dev/nvme0n1p1            1014M  196M  819M  20% /boot\n/dev/nvme0n2p1              20G  205M   20G   1% /home/shw/code\n</code></pre>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/mount/#112-t","title":"1.1.2 -t","text":"<ul> <li>\u529f\u80fd\uff1a\u6307\u5b9a\u6587\u4ef6\u7cfb\u7edf\u7c7b\u578b\uff0c\u5982 ext2\u3001ext3\u3001ext4\u3001xfs\u3001btrfs\u3001vfat\u3001sysfs\u3001proc\u3001nfs \u548c cifs</li> <li>\u793a\u4f8b</li> </ul> <pre><code>mount -t nfs -o vers=3 127.0.0.1:/tmp/nfs1 /tmp/cli1\n</code></pre>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/mount/#113-b","title":"1.1.3 -B","text":"<ul> <li>\u529f\u80fd\uff1a\u5728\u5176\u4ed6\u5730\u65b9\u5b89\u88c5\u5b50\u6811\uff08\u8fd9\u6837\u5b83\u7684\u5185\u5bb9\u5728\u4e24\u4e2a\u5730\u65b9\u90fd\u53ef\u7528\uff09\u3002</li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/mount/#114-o","title":"1.1.4 -o","text":"<ul> <li>\u529f\u80fd\uff1a\u6dfb\u52a0\u989d\u5916\u6302\u8f7d\u7684\u6587\u4ef6\u7cfb\u7edf\u9009\u9879\uff0c\u591a\u4e2a\u53c2\u6570\u7528 <code>,</code> \u5206\u9694\uff0c\u5982\uff1a<code>mount LABEL=mydisk -o noatime,nodev,nosuid</code>\uff0c\u8be6\u7ec6\u6302\u8f7d\u9009\u9879\u89c1\u672c\u6587\u3002</li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/mount/#115-r","title":"1.1.5 -r","text":"<ul> <li>\u529f\u80fd\uff1a\u6302\u8f7d\u7684\u6587\u4ef6\u7cfb\u7edf\u53ea\u6709\u53ea\u8bfb\u6743\u9650\uff0c\u4f5c\u7528\u540c <code>-o ro</code></li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/mount/#116-w-rw-read-write","title":"1.1.6 -w\u3001 --rw\u3001--read-write","text":"<ul> <li>\u529f\u80fd\uff1a\u6302\u8f7d\u7684\u6587\u4ef6\u7cfb\u7edf\u5177\u6709\u8bfb\u5199\u6743\u9650\uff0c\u4f5c\u7528\u540c <code>-o rw</code></li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/mount/#117-source-device-target-directory","title":"1.1.7 --source device\u3001--target directory","text":"<ul> <li>\u529f\u80fd\uff1a\u5982\u679c\u53ea\u4e3a mount \u547d\u4ee4\u63d0\u4f9b\u4e86\u4e00\u4e2a\u53c2\u6570\uff0c\u5219\u8be5\u53c2\u6570\u53ef\u80fd\u88ab\u89e3\u91ca\u4e3a target (mountpoint) \u6216 source (device)\u3002</li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/mount/#118-u-uuid","title":"1.1.8 -U, --uuid","text":"<ul> <li>\u529f\u80fd\uff1a\u6302\u8f7d\u6307\u5b9a uuid \u7684\u5206\u533a\u3002</li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/mount/#2-umount","title":"2 umount","text":"<ul> <li>\u529f\u80fd\uff1a\u5378\u8f7d\u6587\u4ef6\u7cfb\u7edf</li> <li>\u8bed\u6cd5</li> </ul> <pre><code>       umount -a [-dflnrv] [-t fstype] [-O option...]\numount [-dflnrv] {directory|device}\numount -h|-V\n</code></pre>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/mount/#211-f","title":"2.1.1 -f","text":"<ul> <li>\u529f\u80fd\uff1a\u5f3a\u5236\u5378\u8f7d\u6587\u4ef6\u7cfb\u7edf</li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/mount/#212-t","title":"2.1.2 -t","text":"<ul> <li>\u529f\u80fd\uff1a\u6307\u5b9a\u5378\u8f7d\u7684\u6587\u4ef6\u7cfb\u7edf\u7c7b\u578b\u3002</li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/mount/#213-a","title":"2.1.3 -a","text":"<ul> <li>\u529f\u80fd\uff1a\u5378\u8f7d\u6240\u6709\u6587\u4ef6\u7cfb\u7edf\uff08\u901a\u5e38\u4e0d\u4f7f\u7528\uff09</li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/mount/#22-o","title":"2.2 -o \u6302\u8f7d\u9009\u9879","text":"<pre><code>`-o` \u6307\u5b9a\u7684\u6302\u8f7d\u9009\u9879\u6709\u9002\u7528\u6240\u6709\u6587\u4ef6\u7cfb\u7edf\u7684\uff0c\u4e5f\u6709\u6587\u4ef6\u7cfb\u7edf\u7279\u6709\u7684\u3002\n</code></pre>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/mount/#221","title":"2.2.1 \u901a\u7528\u9009\u9879","text":"\u9009\u9879 \u529f\u80fd <code>async</code>\u3001<code>sync</code> \u5f02\u6b65 io\u3001\u540c\u6b65 io <code>atime</code> \u3001<code>moatime</code> \u66f4\u65b0/\u4e0d\u66f4\u65b0\u6b64\u6587\u4ef6\u7cfb\u7edf\u4e0a\u6587\u4ef6\u7684 inode \u8bbf\u95ee\u65f6\u95f4 <code>diratime</code> \u3001<code>nodiratime</code> \u66f4\u65b0/\u4e0d\u66f4\u65b0\u6b64\u6587\u4ef6\u7cfb\u7edf\u4e0a\u76ee\u5f55\u7684 inode \u8bbf\u95ee\u65f6\u95f4 <code>auto</code> \u53ef\u4ee5\u88ab <code>mount -a</code> \u6302\u8f7d <code>noauto</code> \u4e0d\u53ef\u4ee5\u88ab <code>mount -a</code> \u6302\u8f7d <code>defaults</code> \u4f7f\u7528\u9ed8\u8ba4\u9009\u9879\uff0c\u5305\u62ecrw, suid, dev, exec, auto, nouser, and async <code>exec</code> \u3001<code>noexec</code> \u5141\u8bb8/\u4e0d\u5141\u8bb8\u6267\u884c\u4e8c\u8fdb\u5236\u6587\u4ef6 <code>group</code>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/mount/#3-etcfstab","title":"3 /etc/fstab \u6587\u4ef6","text":"<p>\u6587\u4ef6 fstab \u5305\u542b\u6709\u5173\u7cfb\u7edf\u53ef\u4ee5\u88c5\u8f7d\u7684\u6587\u4ef6\u7cfb\u7edf\u7684\u63cf\u8ff0\u6027\u4fe1\u606f\u3002fstab \u4ec5\u7531\u7a0b\u5e8f\u8bfb\u53d6\uff0c\u800c\u4e0d\u662f\u5199\u5165\uff1b\u7cfb\u7edf\u7ba1\u7406\u5458\u6709\u8d23\u4efb\u6b63\u786e\u521b\u5efa\u548c\u7ef4\u62a4\u6b64\u6587\u4ef6\u3002fstab \u4e2d\u8bb0\u5f55\u7684\u987a\u5e8f\u5f88\u91cd\u8981\uff0c\u56e0\u4e3a fsck\u3001mount \u548c umount \u4f9d\u6b21\u904d\u5386 fstab \u6267\u884c\u5b83\u4eec\u7684\u64cd\u4f5c\u3002 fstab \u6587\u4ef6\u683c\u5f0f\u89c4\u5219\uff1a 1. \u6bcf\u4e2a\u6587\u4ef6\u7cfb\u7edf\u90fd\u5728\u5355\u72ec\u7684\u884c\u4e2d\u63cf\u8ff0\u3002 2. \u6bcf\u884c\u4e0a\u7684\u5b57\u6bb5\u7531\u5236\u8868\u7b26\u6216\u7a7a\u683c\u5206\u9694\u3002 3. \u4ee5\u201c#\u201d\u5f00\u5934\u7684\u884c\u662f\u6ce8\u91ca\u3002\u5c06\u5ffd\u7565\u7a7a\u884c\u3002 \u4ee5\u4e0b\u662f fstab \u6761\u76ee\u793a\u4f8b\uff1a</p> <pre><code>LABEL=t-home2   /home      ext4    defaults,auto_da_alloc      0  2\n</code></pre>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9B%B8%E5%85%B3%E6%8A%80%E6%9C%AF/","title":"\u6587\u4ef6\u7cfb\u7edf\u76f8\u5173\u6280\u672f","text":""},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9B%B8%E5%85%B3%E6%8A%80%E6%9C%AF/#1-inote","title":"1 inote","text":"<pre><code>1. inode \u7f16\u53f7\u5728\u5206\u533a\u7ea7\u522b\u662f\u552f\u4e00\u7684\u3002\u6bcf\u4e2a\u5206\u533a\u90fd\u6709\u81ea\u5df1\u7684 inode \u8868\u3002\n</code></pre>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9B%B8%E5%85%B3%E6%8A%80%E6%9C%AF/#2","title":"2 \u94fe\u63a5","text":"<pre><code>1. \u4e0d\u80fd\u5728\u4e0d\u540c\u6587\u4ef6\u7cfb\u7edf\u4e4b\u95f4\u521b\u5efa\u786c\u94fe\u63a5\uff0c\u56e0\u4e3a\u53ef\u80fdinode\u53f7\u51b2\u7a81\u3002\u800c\u8f6f\u94fe\u63a5\u53ef\u4ee5\u3002\n</code></pre>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9B%B8%E5%85%B3%E6%8A%80%E6%9C%AF/#3","title":"3 \u8bfb\u653e\u5927\u3001\u5199\u653e\u5927","text":"<ul> <li>\u5199\u653e\u5927 <p>Write Amplification : \u5199\u653e\u5927\uff0c\u5047\u8bbe\u6bcf\u79d2\u5199\u516510MB\u7684\u6570\u636e\uff0c\u4f46\u89c2\u5bdf\u5230\u786c\u76d8\u7684\u5199\u5165\u662f30MB/s\uff0c\u90a3\u4e48\u5199\u653e\u5927\u5c31\u662f3\u3002\u5199\u5206\u4e3a\u7acb\u5373\u5199\u548c\u5ef6\u8fdf\u5199\uff0c\u6bd4\u5982 redo log\u662f\u7acb\u5373\u5199\uff0c\u4f20\u7edf\u57fa\u4e8eB-Tree\u6570\u636e\u5e93\u5237\u810f\u9875\u548c LSM Compaction \u662f\u5ef6\u8fdf\u5199\u3002redo log \u4f7f\u7528 direct IO \u5199\u65f6\u81f3\u5c11\u4ee5512\u5b57\u8282\u5bf9\u9f50\uff0c\u5047\u5982 log \u8bb0\u5f55\u4e3a100\u5b57\u8282\uff0c\u78c1\u76d8\u9700\u8981\u5199\u5165512\u5b57\u8282\uff0c\u5199\u653e\u5927\u4e3a5\u3002</p> </li> <li>\u8bfb\u653e\u5927 <p>Read Amplification : \u8bfb\u653e\u5927\uff0c\u5bf9\u5e94\u4e8e\u4e00\u4e2a\u7b80\u5355 query \u9700\u8981\u8bfb\u53d6\u786c\u76d8\u7684\u6b21\u6570\u3002\u6bd4\u5982\u4e00\u4e2a\u7b80\u5355 query \u8bfb\u53d6\u4e865\u4e2a\u9875\u9762\uff0c\u53d1\u751f\u4e865\u6b21IO\uff0c\u90a3\u4e48\u8bfb\u653e\u5927\u5c31\u662f 5\u3002\u5047\u5982B-Tree \u975e\u53f6\u5b50\u8282\u70b9\u90fd\u7f13\u5b58\u5728\u5185\u5b58\u4e2d\uff0cpoint read-amp \u4e3a1\uff0c\u4e00\u6b21\u78c1\u76d8\u8bfb\u53d6\u5c31\u53ef\u4ee5\u83b7\u53d6\u5230 Leaf Block\uff1bshort range read-amp \u4e3a1~2\uff0c1~2\u6b21\u78c1\u76d8\u8bfb\u53d6\u53ef\u4ee5\u83b7\u53d6\u5230\u6240\u9700\u7684Leaf Block\u3002</p> </li> <li>\u7a7a\u95f4\u653e\u5927 <p>Space Amplification : \u7a7a\u95f4\u653e\u5927\uff0c\u5047\u8bbe\u6211\u9700\u8981\u5b58\u50a810MB\u6570\u636e\uff0c\u4f46\u5b9e\u9645\u786c\u76d8\u5360\u7528\u4e8630MB\uff0c\u90a3\u4e48\u7a7a\u95f4\u653e\u5927\u5c31\u662f3\u3002\u6709\u6bd4\u8f83\u591a\u7684\u56e0\u7d20\u4f1a\u5f71\u54cd\u7a7a\u95f4\u653e\u5927\uff0c\u6bd4\u5982\u5728Compaction \u8fc7\u7a0b\u4e2d\u9700\u8981\u4e34\u65f6\u5b58\u50a8\u7a7a\u95f4\uff0c\u7a7a\u95f4\u788e\u7247\uff0cBlock\u4e2d\u6709\u6548\u6570\u636e\u7684\u6bd4\u4f8b\u5c0f\uff0c\u65e7\u7248\u672c\u6570\u636e\u672a\u53ca\u65f6\u5220\u9664\u7b49\u7b49\u3002</p> </li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E8%B5%84%E6%BA%90/","title":"\u6587\u4ef6\u7cfb\u7edf\u8d44\u6e90","text":"<ul> <li>\u5185\u6838\u6587\u4ef6\u7cfb\u7edf\u6587\u6863</li> <li>nfs-wiki</li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ACL%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6/ACL/","title":"ACL","text":"<ul> <li>https://blog.csdn.net/qwq_qaq/article/details/54882203</li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ACL%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6/ACL/#1-getfacl","title":"1 getfacl","text":"<pre><code>$ getfacl --help\ngetfacl 2.2.51 -- get file access control lists\nUsage: getfacl [-aceEsRLPtpndvh] file ...\n  -a,  --access           display the file access control list only\n  -d, --default           display the default access control list only\n  -c, --omit-header       do not display the comment header\n  -e, --all-effective     print all effective rights\n  -E, --no-effective      print no effective rights\n  -s, --skip-base         skip files that only have the base entries\n  -R, --recursive         recurse into subdirectories\n  -L, --logical           logical walk, follow symbolic links\n  -P, --physical          physical walk, do not follow symbolic links\n  -t, --tabular           use tabular output format\n  -n, --numeric           print numeric user/group identifiers\n  -p, --absolute-names    don't strip leading '/' in pathnames\n  -v, --version           print version and exit\n-h, --help              this help text\n</code></pre>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ACL%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6/ACL/#2-setfacl","title":"2 setfacl","text":"<pre><code>$ setfacl --help\nsetfacl 2.2.51 -- set file access control lists\nUsage: setfacl [-bkndRLP] { -m|-M|-x|-X ... } file ...\n  -m, --modify=acl        modify the current ACL(s) of file(s)\n-M, --modify-file=file  read ACL entries to modify from file\n  -x, --remove=acl        remove entries from the ACL(s) of file(s)\n-X, --remove-file=file  read ACL entries to remove from file\n  -b, --remove-all        remove all extended ACL entries\n  -k, --remove-default    remove the default ACL\n      --set=acl           set the ACL of file(s), replacing the current ACL\n      --set-file=file     read ACL entries to set from file\n      --mask              do recalculate the effective rights mask\n  -n, --no-mask           don't recalculate the effective rights mask\n  -d, --default           operations apply to the default ACL\n  -R, --recursive         recurse into subdirectories\n  -L, --logical           logical walk, follow symbolic links\n  -P, --physical          physical walk, do not follow symbolic links\n      --restore=file      restore ACLs (inverse of `getfacl -R')\n--test              test mode (ACLs are not modified)\n-v, --version           print version and exit\n-h, --help              this help text\n</code></pre>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext2-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/","title":"The Second Extended Filesystem","text":"<p>\u539f\u6587\u6863\u5730\u5740 ext2 was originally released in January 1993. Written by R'emy Card, Theodore Ts\u2019o and Stephen Tweedie, it was a major rewrite of the Extended Filesystem. It is currently still (April 2001) the predominant filesystem in use by Linux. There are also implementations available for NetBSD, FreeBSD, the GNU HURD, Windows 95/98/NT, OS/2 and RISC OS.</p> <p>ext2\u6700\u521d\u4e8e1993\u5e741\u6708\u53d1\u5e03\u3002\u8fd9\u662f\u7531R'emy Card\u3001Theodore Tso\u548cStephen Tweedie\u7f16\u5199\u7684\uff0c\u662f\u5bf9\u6269\u5c55\u6587\u4ef6\u7cfb\u7edf\u7684\u4e00\u6b21\u91cd\u5927\u6539\u5199\u3002\u76ee\u524d\uff082001\u5e744\u6708\uff09\u5b83\u4ecd\u7136\u662fLinux\u4f7f\u7528\u7684\u4e3b\u8981\u6587\u4ef6\u7cfb\u7edf\u3002\u4e5f\u6709\u9002\u7528\u4e8eNetBSD\u3001FreeBSD\u3001GNU HURD\u3001Windows 95/98/NT\u3001OS/2\u548cRISC OS\u7684\u5b9e\u73b0\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext2-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#1-options","title":"1 Options","text":"<p>Most defaults are determined by the filesystem superblock, and can be set using tune2fs(8). Kernel-determined defaults are indicated by (*).</p> <p>\u5927\u591a\u6570\u9ed8\u8ba4\u503c\u7531\u6587\u4ef6\u7cfb\u7edf\u8d85\u7ea7\u5757\u51b3\u5b9a\uff0c\u53ef\u4ee5\u4f7f\u7528tune2fs\uff088\uff09\u8fdb\u884c\u8bbe\u7f6e\u3002\u5185\u6838\u786e\u5b9a\u7684\u9ed8\u8ba4\u503c\u7531\uff08*\uff09\u8868\u793a\u3002</p> bsddf (*) Makes <code>df</code> act like BSD. minixdf Makes <code>df</code> act like Minix. check=none, nocheck (*) Don\u2019t do extra checking of bitmaps on mount (check=normal and check=strict options removed) dax Use direct access (no page cache). See Direct Access for files. debug Extra debugging information is sent to the kernel syslog. Useful for developers. errors=continue Keep going on a filesystem error. errors=remount-ro Remount the filesystem read-only on an error. errors=panic Panic and halt the machine if an error occurs. grpid, bsdgroups Give objects the same group ID as their parent. nogrpid, sysvgroups New objects have the group ID of their creator. nouid32 Use 16-bit UIDs and GIDs. oldalloc Enable the old block allocator. Orlov should have better performance, we\u2019d like to get some feedback if it\u2019s the contrary for you. orlov (*) Use the Orlov block allocator. (See http://lwn.net/Articles/14633/ and http://lwn.net/Articles/14446/.) resuid=n The user ID which may use the reserved blocks. resgid=n The group ID which may use the reserved blocks. sb=n Use alternate superblock at this location. user_xattr Enable \u201cuser.\u201d POSIX Extended Attributes (requires CONFIG_EXT2_FS_XATTR). nouser_xattr Don\u2019t support \u201cuser.\u201d extended attributes. acl Enable POSIX Access Control Lists support (requires CONFIG_EXT2_FS_POSIX_ACL). noacl Don\u2019t support POSIX ACLs. quota, usrquota Enable user disk quota support (requires CONFIG_QUOTA). grpquota Enable group disk quota support (requires CONFIG_QUOTA). <p>noquota option ls silently ignored by ext2.</p> <p>noquota\u9009\u9879\u88abext2\u9ed8\u9ed8\u5ffd\u7565\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext2-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#2-specification","title":"2 Specification","text":"<p>ext2 shares many properties with traditional Unix filesystems. It has the concepts of blocks, inodes and directories. It has space in the specification for Access Control Lists (ACLs), fragments, undeletion and compression though these are not yet implemented (some are available as separate patches). There is also a versioning mechanism to allow new features (such as journalling) to be added in a maximally compatible manner.</p> <p>ext2\u4e0e\u4f20\u7edf\u7684Unix\u6587\u4ef6\u7cfb\u7edf\u5171\u4eab\u8bb8\u591a\u5c5e\u6027\u3002\u5b83\u6709\u5757\u3001\u7d22\u5f15\u8282\u70b9\u548c\u76ee\u5f55\u7684\u6982\u5ff5\u3002\u5b83\u5728\u8bbf\u95ee\u63a7\u5236\u5217\u8868\uff08ACL\uff09\u3001\u7247\u6bb5\u3001\u53d6\u6d88\u5220\u9664\u548c\u538b\u7f29\u7684\u89c4\u8303\u4e2d\u6709\u7a7a\u95f4\uff0c\u5c3d\u7ba1\u8fd9\u4e9b\u8fd8\u6ca1\u6709\u5b9e\u73b0\uff08\u6709\u4e9b\u4f5c\u4e3a\u5355\u72ec\u7684\u8865\u4e01\u63d0\u4f9b\uff09\u3002\u8fd8\u6709\u4e00\u79cd\u7248\u672c\u63a7\u5236\u673a\u5236\uff0c\u5141\u8bb8\u4ee5\u6700\u5927\u517c\u5bb9\u7684\u65b9\u5f0f\u6dfb\u52a0\u65b0\u529f\u80fd\uff08\u5982\u65e5\u5fd7\u8bb0\u5f55\uff09\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext2-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#21-blocks","title":"2.1 Blocks","text":"<p>The space in the device or file is split up into blocks. These are a fixed size, of 1024, 2048 or 4096 bytes (8192 bytes on Alpha systems), which is decided when the filesystem is created. Smaller blocks mean less wasted space per file, but require slightly more accounting overhead, and also impose other limits on the size of files and the filesystem.</p> <p>\u8bbe\u5907\u6216\u6587\u4ef6\u4e2d\u7684\u7a7a\u95f4\u88ab\u5206\u5272\u6210\u5757\u3002\u8fd9\u662f\u4e00\u4e2a\u56fa\u5b9a\u7684\u5927\u5c0f\uff0c1024\u30012048\u62164096\u5b57\u8282\uff08Alpha\u7cfb\u7edf\u4e0a\u4e3a8192\u5b57\u8282\uff09\uff0c\u7531\u521b\u5efa\u6587\u4ef6\u7cfb\u7edf\u65f6\u51b3\u5b9a\u3002\u66f4\u5c0f\u7684\u5757\u610f\u5473\u7740\u6bcf\u4e2a\u6587\u4ef6\u6d6a\u8d39\u7684\u7a7a\u95f4\u66f4\u5c11\uff0c\u4f46\u9700\u8981\u7a0d\u5fae\u66f4\u591a\u7684\u8bb0\u5e10\u5f00\u9500\uff0c\u5e76\u4e14\u8fd8\u5bf9\u6587\u4ef6\u548c\u6587\u4ef6\u7cfb\u7edf\u7684\u5927\u5c0f\u65bd\u52a0\u4e86\u5176\u4ed6\u9650\u5236\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext2-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#22-block-groups","title":"2.2 Block Groups","text":"<p>Blocks are clustered into block groups in order to reduce fragmentation and minimise the amount of head seeking when reading a large amount of consecutive data. Information about each block group is kept in a descriptor table stored in the block(s) immediately after the superblock. Two blocks near the start of each group are reserved for the block usage bitmap and the inode usage bitmap which show which blocks and inodes are in use. Since each bitmap is limited to a single block, this means that the maximum size of a block group is 8 times the size of a block.</p> <p>\u5f53\u8bfb\u53d6\u5927\u91cf\u8fde\u7eed\u6570\u636e\u65f6\uff0c\u4e3a\u4e86\u51cf\u5c11\u788e\u7247\u5e76\u6700\u5c0f\u5316\u5934\u90e8\u641c\u7d22\u91cf\uff0c\u5c06\u5757\u805a\u7c7b\u4e3a\u5757\u7ec4\u3002\u5173\u4e8e\u6bcf\u4e2a\u5757\u7ec4\u7684\u4fe1\u606f\u4fdd\u5b58\u5728\u8d85\u7ea7\u5757\u4e4b\u540e\u7acb\u5373\u5b58\u50a8\u5728\u5757\u4e2d\u7684\u63cf\u8ff0\u7b26\u8868\u4e2d\u3002\u6bcf\u4e2a\u7ec4\u5f00\u5934\u9644\u8fd1\u7684\u4e24\u4e2a\u5757\u88ab\u4fdd\u7559\u7528\u4e8e\u5757\u4f7f\u7528\u4f4d\u56fe\u548cinode\u4f7f\u7528\u4f4d\u56fe\uff0c\u5b83\u4eec\u663e\u793a\u54ea\u4e9b\u5757\u548cinode\u6b63\u5728\u4f7f\u7528\u3002\u7531\u4e8e\u6bcf\u4e2a\u4f4d\u56fe\u4ec5\u9650\u4e8e\u5355\u4e2a\u5757\uff0c\u8fd9\u610f\u5473\u7740\u5757\u7ec4\u7684\u6700\u5927\u5927\u5c0f\u662f\u5757\u5927\u5c0f\u76848\u500d\u3002</p> <p>The block(s) following the bitmaps in each block group are designated as the inode table for that block group and the remainder are the data blocks. The block allocation algorithm attempts to allocate data blocks in the same block group as the inode which contains them.</p> <p>\u6bcf\u4e2a\u5757\u7ec4\u4e2d\u4f4d\u56fe\u540e\u9762\u7684\u5757\u88ab\u6307\u5b9a\u4e3a\u8be5\u5757\u7ec4\u7684\u7d22\u5f15\u8282\u70b9\u8868\uff0c\u5176\u4f59\u7684\u662f\u6570\u636e\u5757\u3002\u5757\u5206\u914d\u7b97\u6cd5\u5c1d\u8bd5\u5728\u4e0e\u5305\u542b\u6570\u636e\u5757\u7684\u7d22\u5f15\u8282\u70b9\u76f8\u540c\u7684\u5757\u7ec4\u4e2d\u5206\u914d\u6570\u636e\u5757\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext2-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#23-the-superblock","title":"2.3 The Superblock","text":"<p>The superblock contains all the information about the configuration of the filing system. The primary copy of the superblock is stored at an offset of 1024 bytes from the start of the device, and it is essential to mounting the filesystem. Since it is so important, backup copies of the superblock are stored in block groups throughout the filesystem. The first version of ext2 (revision 0) stores a copy at the start of every block group, along with backups of the group descriptor block(s). Because this can consume a considerable amount of space for large filesystems, later revisions can optionally reduce the number of backup copies by only putting backups in specific groups (this is the sparse superblock feature). The groups chosen are 0, 1 and powers of 3, 5 and 7.</p> <p>\u8d85\u7ea7\u5757\u5305\u542b\u6709\u5173\u6587\u4ef6\u7cfb\u7edf\u914d\u7f6e\u7684\u6240\u6709\u4fe1\u606f\u3002\u8d85\u7ea7\u5757\u7684\u4e3b\u526f\u672c\u5b58\u50a8\u5728\u8ddd\u79bb\u8bbe\u5907\u5f00\u59cb\u4f4d\u7f6e1024\u5b57\u8282\u7684\u504f\u79fb\u4f4d\u7f6e\uff0c\u8fd9\u5bf9\u4e8e\u5b89\u88c5\u6587\u4ef6\u7cfb\u7edf\u81f3\u5173\u91cd\u8981\u3002\u7531\u4e8e\u8fd9\u4e00\u70b9\u975e\u5e38\u91cd\u8981\uff0c\u8d85\u7ea7\u5757\u7684\u5907\u4efd\u526f\u672c\u5b58\u50a8\u5728\u6574\u4e2a\u6587\u4ef6\u7cfb\u7edf\u7684\u5757\u7ec4\u4e2d\u3002ext2\u7684\u7b2c\u4e00\u4e2a\u7248\u672c\uff08\u4fee\u8ba2\u72480\uff09\u5728\u6bcf\u4e2a\u5757\u7ec4\u7684\u5f00\u5934\u5b58\u50a8\u4e00\u4e2a\u526f\u672c\uff0c\u4ee5\u53ca\u7ec4\u63cf\u8ff0\u7b26\u5757\u7684\u5907\u4efd\u3002\u56e0\u4e3a\u8fd9\u4f1a\u4e3a\u5927\u578b\u6587\u4ef6\u7cfb\u7edf\u6d88\u8017\u5927\u91cf\u7a7a\u95f4\uff0c\u6240\u4ee5\u4ee5\u540e\u7684\u7248\u672c\u53ef\u4ee5\u901a\u8fc7\u53ea\u5c06\u5907\u4efd\u653e\u5728\u7279\u5b9a\u7684\u7ec4\u4e2d\uff08\u8fd9\u662f\u7a00\u758f\u8d85\u7ea7\u5757\u7279\u6027\uff09\u6765\u9009\u62e9\u6027\u5730\u51cf\u5c11\u5907\u4efd\u526f\u672c\u7684\u6570\u91cf\u3002\u6240\u9009\u7684\u7ec4\u662f0\u30011\u548c3\u30015\u548c7\u7684\u5e42\u3002</p> <p>The information in the superblock contains fields such as the total number of inodes and blocks in the filesystem and how many are free, how many inodes and blocks are in each block group, when the filesystem was mounted (and if it was cleanly unmounted), when it was modified, what version of the filesystem it is (see the Revisions section below) and which OS created it.</p> <p>\u8d85\u7ea7\u5757\u4e2d\u7684\u4fe1\u606f\u5305\u542b\u4e00\u4e9b\u5b57\u6bb5\uff0c\u4f8b\u5982\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u7d22\u5f15\u8282\u70b9\u548c\u5757\u7684\u603b\u6570\u3001\u7a7a\u95f2\u7684\u6570\u91cf\u3001\u6bcf\u4e2a\u5757\u7ec4\u4e2d\u6709\u591a\u5c11\u7d22\u5f15\u8282\u70b9\u548c\u6570\u636e\u5757\u3001\u6587\u4ef6\u7cfb\u7edf\u4f55\u65f6\u88c5\u8f7d\uff08\u5982\u679c\u5df2\u5b8c\u5168\u5378\u8f7d\uff09\u3001\u4f55\u65f6\u4fee\u6539\u3001\u6587\u4ef6\u7cfb\u7edf\u7684\u7248\u672c\uff08\u8bf7\u53c2\u9605\u4e0b\u9762\u7684\u4fee\u8ba2\u90e8\u5206\uff09\u4ee5\u53ca\u521b\u5efa\u5b83\u7684\u64cd\u4f5c\u7cfb\u7edf\u3002</p> <p>If the filesystem is revision 1 or higher, then there are extra fields, such as a volume name, a unique identification number, the inode size, and space for optional filesystem features to store configuration info.</p> <p>\u5982\u679c\u6587\u4ef6\u7cfb\u7edf\u662f\u4fee\u8ba2\u72481\u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5219\u4f1a\u6709\u989d\u5916\u7684\u5b57\u6bb5\uff0c\u4f8b\u5982\u5377\u540d\u3001\u552f\u4e00\u6807\u8bc6\u53f7\u3001inode\u5927\u5c0f\u4ee5\u53ca\u53ef\u9009\u6587\u4ef6\u7cfb\u7edf\u529f\u80fd\u5b58\u50a8\u914d\u7f6e\u4fe1\u606f\u7684\u7a7a\u95f4\u3002</p> <p>All fields in the superblock (as in all other ext2 structures) are stored on the disc in little endian format, so a filesystem is portable between machines without having to know what machine it was created on.</p> <p>\u8d85\u7ea7\u5757\u4e2d\u7684\u6240\u6709\u5b57\u6bb5\uff08\u4e0e\u6240\u6709\u5176\u4ed6ext2\u7ed3\u6784\u4e2d\u7684\u5b57\u6bb5\u4e00\u6837\uff09\u90fd\u4ee5\u5c0f\u7aef\u683c\u5f0f\u5b58\u50a8\u5728\u78c1\u76d8\u4e0a\uff0c\u56e0\u6b64\u6587\u4ef6\u7cfb\u7edf\u53ef\u4ee5\u5728\u673a\u5668\u4e4b\u95f4\u79fb\u690d\uff0c\u800c\u4e0d\u5fc5\u77e5\u9053\u5b83\u662f\u5728\u4ec0\u4e48\u673a\u5668\u4e0a\u521b\u5efa\u7684\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext2-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#24-inodes","title":"2.4 Inodes","text":"<p>The inode (index node) is a fundamental concept in the ext2 filesystem. Each object in the filesystem is represented by an inode. The inode structure contains pointers to the filesystem blocks which contain the data held in the object and all of the metadata about an object except its name. The metadata about an object includes the permissions, owner, group, flags, size, number of blocks used, access time, change time, modification time, deletion time, number of links, fragments, version (for NFS) and extended attributes (EAs) and/or Access Control Lists (ACLs).</p> <p>inode\uff08\u7d22\u5f15\u8282\u70b9\uff09\u662fext2\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u4e00\u4e2a\u57fa\u672c\u6982\u5ff5\u3002\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u6bcf\u4e2a\u5bf9\u8c61\u90fd\u7531\u4e00\u4e2ainode\u8868\u793a\u3002inode\u7ed3\u6784\u5305\u542b\u6307\u5411\u6587\u4ef6\u7cfb\u7edf\u5757\u7684\u6307\u9488\uff0c\u8fd9\u4e9b\u6587\u4ef6\u7cfb\u7edf\u5757\u5305\u542b\u5bf9\u8c61\u4e2d\u4fdd\u5b58\u7684\u6570\u636e\u4ee5\u53ca\u9664\u540d\u79f0\u4e4b\u5916\u7684\u6240\u6709\u5173\u4e8e\u5bf9\u8c61\u7684\u5143\u6570\u636e\u3002\u5173\u4e8e\u5bf9\u8c61\u7684\u5143\u6570\u636e\u5305\u62ec\u6743\u9650\u3001\u6240\u6709\u8005\u3001\u7ec4\u3001\u6807\u5fd7\u3001\u5927\u5c0f\u3001\u4f7f\u7528\u7684\u5757\u6570\u3001\u8bbf\u95ee\u65f6\u95f4\u3001\u66f4\u6539\u65f6\u95f4\u3001\u4fee\u6539\u65f6\u95f4\u3001\u5220\u9664\u65f6\u95f4\u3001\u94fe\u63a5\u6570\u3001\u7247\u6bb5\u3001\u7248\u672c\uff08\u5bf9\u4e8eNFS\uff09\u548c\u6269\u5c55\u5c5e\u6027\uff08EA\uff09\u548c/\u6216\u8bbf\u95ee\u63a7\u5236\u5217\u8868\uff08ACL\uff09\u3002</p> <p>There are some reserved fields which are currently unused in the inode structure and several which are overloaded. One field is reserved for the directory ACL if the inode is a directory and alternately for the top 32 bits of the file size if the inode is a regular file (allowing file sizes larger than 2GB). The translator field is unused under Linux, but is used by the HURD to reference the inode of a program which will be used to interpret this object. Most of the remaining reserved fields have been used up for both Linux and the HURD for larger owner and group fields, The HURD also has a larger mode field so it uses another of the remaining fields to store the extra more bits.</p> <p>\u6709\u4e00\u4e9b\u4fdd\u7559\u5b57\u6bb5\u5f53\u524d\u5728inode\u7ed3\u6784\u4e2d\u672a\u4f7f\u7528\uff0c\u8fd8\u6709\u51e0\u4e2a\u5b57\u6bb5\u88ab\u91cd\u8f7d\u3002\u5982\u679c\u7d22\u5f15\u8282\u70b9\u662f\u76ee\u5f55\uff0c\u5219\u4e3a\u76ee\u5f55ACL\u4fdd\u7559\u4e00\u4e2a\u5b57\u6bb5\uff0c\u5982\u679c\u7d22\u5f15\u8282\u70b9\u4e3a\u5e38\u89c4\u6587\u4ef6\uff08\u5141\u8bb8\u6587\u4ef6\u5927\u5c0f\u5927\u4e8e2GB\uff09\uff0c\u5219\u4e3a\u6587\u4ef6\u5927\u5c0f\u7684\u524d32\u4f4d\u4fdd\u7559\u4e00\u4e2a\u3002\u8f6c\u6362\u5668\u5b57\u6bb5\u5728Linux\u4e0b\u672a\u4f7f\u7528\uff0c\u4f46HURD\u4f7f\u7528\u5b83\u6765\u5f15\u7528\u5c06\u7528\u4e8e\u89e3\u91ca\u6b64\u5bf9\u8c61\u7684\u7a0b\u5e8f\u7684inode\u3002\u5927\u591a\u6570\u5269\u4f59\u7684\u4fdd\u7559\u5b57\u6bb5\u5df2\u7528\u4e8eLinux\u548cHURD\uff0c\u7528\u4e8e\u66f4\u5927\u7684\u6240\u6709\u8005\u548c\u7ec4\u5b57\u6bb5\u3002HURD\u8fd8\u6709\u4e00\u4e2a\u66f4\u5927\u7684\u6a21\u5f0f\u5b57\u6bb5\uff0c\u56e0\u6b64\u5b83\u4f7f\u7528\u5269\u4f59\u7684\u53e6\u4e00\u4e2a\u5b57\u6bb5\u6765\u5b58\u50a8\u66f4\u591a\u7684\u4f4d\u3002</p> <p>There are pointers to the first 12 blocks which contain the file\u2019s data in the inode. There is a pointer to an indirect block (which contains pointers to the next set of blocks), a pointer to a doubly-indirect block (which contains pointers to indirect blocks) and a pointer to a trebly-indirect block (which contains pointers to doubly-indirect blocks).</p> <p>\u6709\u6307\u5411\u7d22\u5f15\u8282\u70b9\u4e2d\u5305\u542b\u6587\u4ef6\u6570\u636e\u7684\u524d12\u4e2a\u5757\u7684\u6307\u9488\u3002\u6709\u4e00\u4e2a\u6307\u5411\u95f4\u63a5\u5757\u7684\u6307\u9488\uff08\u5b83\u5305\u542b\u6307\u5411\u4e0b\u4e00\u7ec4\u5757\u7684\u6307\u9488\uff09\uff0c\u4e00\u4e2a\u6307\u5411\u53cc\u91cd\u95f4\u63a5\u5757\u7684\u6307\u793a\u5668\uff08\u5b83\u5305\u542b\u5bf9\u95f4\u63a5\u5757\u7684\u6307\u793a\uff09\u548c\u4e00\u4e2a\u6307\u5411\u4e09\u91cd\u95f4\u63a5\u5757\uff08\u5b83\u5305\u542b\u4e86\u5bf9\u53cc\u91cd\u95f4\u63a5\u5757\uff09\u7684\u6307\u9488\u3002</p> <p>The flags field contains some ext2-specific flags which aren\u2019t catered for by the standard chmod flags. These flags can be listed with lsattr and changed with the chattr command, and allow specific filesystem behaviour on a per-file basis. There are flags for secure deletion, undeletable, compression, synchronous updates, immutability, append-only, dumpable, no-atime, indexed directories, and data-journaling. Not all of these are supported yet.</p> <p>flags\u5b57\u6bb5\u5305\u542b\u4e00\u4e9b\u6807\u51c6chmod\u6807\u5fd7\u65e0\u6cd5\u6ee1\u8db3\u7684ext2\u7279\u5b9a\u6807\u5fd7\u3002\u8fd9\u4e9b\u6807\u5fd7\u53ef\u4ee5\u7528lsattr\u5217\u51fa\uff0c\u4e5f\u53ef\u4ee5\u7528chattr\u547d\u4ee4\u66f4\u6539\uff0c\u5e76\u5141\u8bb8\u6bcf\u4e2a\u6587\u4ef6\u7684\u7279\u5b9a\u6587\u4ef6\u7cfb\u7edf\u884c\u4e3a\u3002\u6709\u5b89\u5168\u5220\u9664\u3001\u4e0d\u53ef\u5220\u9664\u3001\u538b\u7f29\u3001\u540c\u6b65\u66f4\u65b0\u3001\u4e0d\u53d8\u6027\u3001\u4ec5\u8ffd\u52a0\u3001\u53ef\u8f6c\u50a8\u3001\u65e0\u5ef6\u8fdf\u3001\u7d22\u5f15\u76ee\u5f55\u548c\u6570\u636e\u65e5\u5fd7\u7684\u6807\u5fd7\u3002\u5e76\u975e\u6240\u6709\u8fd9\u4e9b\u90fd\u5f97\u5230\u652f\u6301\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext2-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#25-directories","title":"2.5 Directories","text":"<p>A directory is a filesystem object and has an inode just like a file. It is a specially formatted file containing records which associate each name with an inode number. Later revisions of the filesystem also encode the type of the object (file, directory, symlink, device, fifo, socket) to avoid the need to check the inode itself for this information (support for taking advantage of this feature does not yet exist in Glibc 2.2).</p> <p>\u76ee\u5f55\u662f\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\u5bf9\u8c61\uff0c\u5b83\u6709\u4e00\u4e2a\u50cf\u6587\u4ef6\u4e00\u6837\u7684inode\u3002\u5b83\u662f\u4e00\u4e2a\u7279\u6b8a\u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u5305\u542b\u5c06\u6bcf\u4e2a\u540d\u79f0\u4e0einode\u7f16\u53f7\u5173\u8054\u7684\u8bb0\u5f55\u3002\u6587\u4ef6\u7cfb\u7edf\u7684\u540e\u7eed\u7248\u672c\u8fd8\u5bf9\u5bf9\u8c61\u7684\u7c7b\u578b\uff08\u6587\u4ef6\u3001\u76ee\u5f55\u3001\u7b26\u53f7\u94fe\u63a5\u3001\u8bbe\u5907\u3001fifo\u3001\u5957\u63a5\u5b57\uff09\u8fdb\u884c\u7f16\u7801\uff0c\u4ee5\u907f\u514d\u9700\u8981\u68c0\u67e5inode\u672c\u8eab\u4ee5\u83b7\u53d6\u6b64\u4fe1\u606f\uff08Glibc 2.2\u4e2d\u5c1a\u4e0d\u652f\u6301\u5229\u7528\u6b64\u529f\u80fd\uff09\u3002</p> <p>The inode allocation code tries to assign inodes which are in the same block group as the directory in which they are first created.</p> <p>inode\u5206\u914d\u4ee3\u7801\u5c1d\u8bd5\u5206\u914d\u4e0e\u6700\u521d\u521b\u5efa\u5b83\u4eec\u7684\u76ee\u5f55\u5728\u540c\u4e00\u5757\u7ec4\u4e2d\u7684inode\u3002</p> <p>The current implementation of ext2 uses a singly-linked list to store the filenames in the directory; a pending enhancement uses hashing of the filenames to allow lookup without the need to scan the entire directory.</p> <p>ext2\u7684\u5f53\u524d\u5b9e\u73b0\u4f7f\u7528\u5355\u94fe\u63a5\u5217\u8868\u6765\u5b58\u50a8\u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\u540d\uff1b\u4e00\u4e2a\u5f85\u5b9a\u7684\u589e\u5f3a\u4f7f\u7528\u6587\u4ef6\u540d\u7684\u54c8\u5e0c\u6765\u5141\u8bb8\u67e5\u627e\uff0c\u800c\u65e0\u9700\u626b\u63cf\u6574\u4e2a\u76ee\u5f55\u3002</p> <p>The current implementation never removes empty directory blocks once they have been allocated to hold more files.</p> <p>\u5f53\u524d\u7684\u5b9e\u73b0\u5728\u5206\u914d\u4e86\u7a7a\u76ee\u5f55\u5757\u4ee5\u5bb9\u7eb3\u66f4\u591a\u6587\u4ef6\u540e\uff0c\u4e0d\u4f1a\u5220\u9664\u5b83\u4eec\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext2-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#26-special-files","title":"2.6 Special files","text":"<p>Symbolic links are also filesystem objects with inodes. They deserve special mention because the data for them is stored within the inode itself if the symlink is less than 60 bytes long. It uses the fields which would normally be used to store the pointers to data blocks. This is a worthwhile optimisation as it we avoid allocating a full block for the symlink, and most symlinks are less than 60 characters long.</p> <p>\u7b26\u53f7\u94fe\u63a5\u4e5f\u662f\u5177\u6709\u7d22\u5f15\u8282\u70b9\u7684\u6587\u4ef6\u7cfb\u7edf\u5bf9\u8c61\u3002\u5b83\u4eec\u503c\u5f97\u7279\u522b\u6ce8\u610f\uff0c\u56e0\u4e3a\u5982\u679c\u7b26\u53f7\u94fe\u63a5\u957f\u5ea6\u5c0f\u4e8e60\u5b57\u8282\uff0c\u5219\u5b83\u4eec\u7684\u6570\u636e\u5b58\u50a8\u5728inode\u672c\u8eab\u4e2d\u3002\u5b83\u4f7f\u7528\u901a\u5e38\u7528\u4e8e\u5b58\u50a8\u6570\u636e\u5757\u6307\u9488\u7684\u5b57\u6bb5\u3002\u8fd9\u662f\u4e00\u4e2a\u503c\u5f97\u7684\u4f18\u5316\uff0c\u56e0\u4e3a\u6211\u4eec\u907f\u514d\u4e3a\u7b26\u53f7\u94fe\u63a5\u5206\u914d\u4e00\u4e2a\u5b8c\u6574\u7684\u5757\uff0c\u5e76\u4e14\u5927\u591a\u6570\u7b26\u53f7\u94fe\u63a5\u7684\u957f\u5ea6\u90fd\u5c0f\u4e8e60\u4e2a\u5b57\u7b26\u3002</p> <p>Character and block special devices never have data blocks assigned to them. Instead, their device number is stored in the inode, again reusing the fields which would be used to point to the data blocks.</p> <p>\u5b57\u7b26\u548c\u5757\u4e13\u7528\u8bbe\u5907\u4ece\u4e0d\u5206\u914d\u6570\u636e\u5757\u3002\u76f8\u53cd\uff0c\u5b83\u4eec\u7684\u8bbe\u5907\u53f7\u5b58\u50a8\u5728inode\u4e2d\uff0c\u518d\u6b21\u91cd\u7528\u5c06\u7528\u4e8e\u6307\u5411\u6570\u636e\u5757\u7684\u5b57\u6bb5\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext2-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#27-reserved-space","title":"2.7 Reserved Space","text":"<p>In ext2, there is a mechanism for reserving a certain number of blocks for a particular user (normally the super-user). This is intended to allow for the system to continue functioning even if non-privileged users fill up all the space available to them (this is independent of filesystem quotas). It also keeps the filesystem from filling up entirely which helps combat fragmentation.</p> <p>\u5728ext2\u4e2d\uff0c\u6709\u4e00\u79cd\u673a\u5236\u4e3a\u7279\u5b9a\u7528\u6237\uff08\u901a\u5e38\u662f\u8d85\u7ea7\u7528\u6237\uff09\u4fdd\u7559\u4e00\u5b9a\u6570\u91cf\u7684\u5757\u3002\u8fd9\u662f\u4e3a\u4e86\u5141\u8bb8\u7cfb\u7edf\u7ee7\u7eed\u8fd0\u884c\uff0c\u5373\u4f7f\u975e\u7279\u6743\u7528\u6237\u5360\u7528\u4e86\u6240\u6709\u53ef\u7528\u7a7a\u95f4\uff08\u8fd9\u4e0e\u6587\u4ef6\u7cfb\u7edf\u914d\u989d\u65e0\u5173\uff09\u3002\u5b83\u8fd8\u9632\u6b62\u6587\u4ef6\u7cfb\u7edf\u5b8c\u5168\u586b\u6ee1\uff0c\u8fd9\u6709\u52a9\u4e8e\u9632\u6b62\u788e\u7247\u5316\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext2-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#28-filesystem-check","title":"2.8 Filesystem check","text":"<p>At boot time, most systems run a consistency check (e2fsck) on their filesystems. The superblock of the ext2 filesystem contains several fields which indicate whether fsck should actually run (since checking the filesystem at boot can take a long time if it is large). fsck will run if the filesystem was not cleanly unmounted, if the maximum mount count has been exceeded or if the maximum time between checks has been exceeded.</p> <p>\u5728\u542f\u52a8\u65f6\uff0c\u5927\u591a\u6570\u7cfb\u7edf\u5728\u5176\u6587\u4ef6\u7cfb\u7edf\u4e0a\u8fd0\u884c\u4e00\u81f4\u6027\u68c0\u67e5\uff08e2fsck\uff09\u3002ext2\u6587\u4ef6\u7cfb\u7edf\u7684\u8d85\u7ea7\u5757\u5305\u542b\u51e0\u4e2a\u5b57\u6bb5\uff0c\u8fd9\u4e9b\u5b57\u6bb5\u6307\u793afsck\u662f\u5426\u5e94\u8be5\u5b9e\u9645\u8fd0\u884c\uff08\u56e0\u4e3a\u5982\u679c\u6587\u4ef6\u7cfb\u7edf\u5f88\u5927\uff0c\u5728\u542f\u52a8\u65f6\u68c0\u67e5\u6587\u4ef6\u7cfb\u7edf\u53ef\u80fd\u9700\u8981\u5f88\u957f\u65f6\u95f4\uff09\u3002\u5982\u679c\u6587\u4ef6\u7cfb\u7edf\u672a\u5b8c\u5168\u5378\u8f7d\uff0c\u5982\u679c\u5df2\u8d85\u8fc7\u6700\u5927\u88c5\u8f7d\u8ba1\u6570\uff0c\u6216\u8005\u5df2\u8d85\u8fc7\u68c0\u67e5\u95f4\u9694\u7684\u6700\u957f\u65f6\u95f4\uff0c\u5219fsck\u5c06\u8fd0\u884c\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext2-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#29-feature-compatibility","title":"2.9 Feature Compatibility\u529f\u80fd\u517c\u5bb9\u6027","text":"<p>The compatibility feature mechanism used in ext2 is sophisticated. It safely allows features to be added to the filesystem, without unnecessarily sacrificing compatibility with older versions of the filesystem code. The feature compatibility mechanism is not supported by the original revision 0 (EXT2_GOOD_OLD_REV) of ext2, but was introduced in revision 1. There are three 32-bit fields, one for compatible features (COMPAT), one for read-only compatible (RO_COMPAT) features and one for incompatible (INCOMPAT) features.</p> <p>ext2\u4e2d\u4f7f\u7528\u7684\u517c\u5bb9\u6027\u7279\u6027\u673a\u5236\u975e\u5e38\u590d\u6742\u3002\u5b83\u5b89\u5168\u5730\u5141\u8bb8\u5c06\u7279\u6027\u6dfb\u52a0\u5230\u6587\u4ef6\u7cfb\u7edf\u4e2d\uff0c\u800c\u4e0d\u4f1a\u4e0d\u5fc5\u8981\u5730\u727a\u7272\u4e0e\u65e7\u7248\u672c\u6587\u4ef6\u7cfb\u7edf\u4ee3\u7801\u7684\u517c\u5bb9\u6027\u3002EXT2\u7684\u539f\u59cb\u7248\u672c0\uff08EXT2_GOOD_OLD_REV\uff09\u4e0d\u652f\u6301\u529f\u80fd\u517c\u5bb9\u6027\u673a\u5236\uff0c\u4f46\u5728\u7248\u672c1\u4e2d\u5f15\u5165\u4e86\u8be5\u673a\u5236\u3002\u6709\u4e09\u4e2a32\u4f4d\u5b57\u6bb5\uff0c\u4e00\u4e2a\u7528\u4e8e\u517c\u5bb9\u529f\u80fd\uff08COMPAT\uff09\u3001\u4e00\u4e2a\u7528\u4e8e\u53ea\u8bfb\u517c\u5bb9\u529f\u80fd\uff08RO_COMPAT\uff09\u548c\u4e00\u4e2a\u7528\u4e8e\u4e0d\u517c\u5bb9\u529f\u80fd\uff08INCOMPAT\uff09\u3002</p> <p>These feature flags have specific meanings for the kernel as follows:</p> <p>\u8fd9\u4e9b\u529f\u80fd\u6807\u5fd7\u5bf9\u5185\u6838\u5177\u6709\u5982\u4e0b\u7279\u5b9a\u542b\u4e49\uff1a</p> <p>A COMPAT flag indicates that a feature is present in the filesystem, but the on-disk format is 100% compatible with older on-disk formats, so a kernel which didn\u2019t know anything about this feature could read/write the filesystem without any chance of corrupting the filesystem (or even making it inconsistent). This is essentially just a flag which says \u201cthis filesystem has a (hidden) feature\u201d that the kernel or e2fsck may want to be aware of (more on e2fsck and feature flags later). The ext3 HAS_JOURNAL feature is a COMPAT flag because the ext3 journal is simply a regular file with data blocks in it so the kernel does not need to take any special notice of it if it doesn\u2019t understand ext3 journaling.</p> <p>COMPAT\u6807\u5fd7\u8868\u793a\u6587\u4ef6\u7cfb\u7edf\u4e2d\u5b58\u5728\u4e00\u4e2a\u529f\u80fd\uff0c\u4f46\u78c1\u76d8\u683c\u5f0f\u4e0e\u65e7\u7684\u78c1\u76d8\u683c\u5f0f100%\u517c\u5bb9\uff0c\u56e0\u6b64\u4e0d\u4e86\u89e3\u8be5\u529f\u80fd\u7684\u5185\u6838\u53ef\u4ee5\u8bfb\u53d6/\u5199\u5165\u6587\u4ef6\u7cfb\u7edf\uff0c\u800c\u4e0d\u4f1a\u635f\u574f\u6587\u4ef6\u7cfb\u7edf\uff08\u751a\u81f3\u4f7f\u5176\u4e0d\u4e00\u81f4\uff09\u3002\u8fd9\u672c\u8d28\u4e0a\u53ea\u662f\u4e00\u4e2a\u6807\u5fd7\uff0c\u5b83\u8868\u793a\u201c\u8fd9\u4e2a\u6587\u4ef6\u7cfb\u7edf\u6709\u4e00\u4e2a\uff08\u9690\u85cf\u7684\uff09\u7279\u6027\u201d\uff0c\u5185\u6838\u6216e2fsck\u53ef\u80fd\u60f3\u77e5\u9053\u8fd9\u4e2a\u7279\u6027\uff08\u7a0d\u540e\u5c06\u8be6\u7ec6\u4ecb\u7ecde2fsck\u548c\u7279\u6027\u6807\u5fd7\uff09\u3002ext3 HAS_JOURNAL\u7279\u6027\u662f\u4e00\u4e2aCOMPAT\u6807\u5fd7\uff0c\u56e0\u4e3aext3\u65e5\u5fd7\u53ea\u662f\u4e00\u4e2a\u5305\u542b\u6570\u636e\u5757\u7684\u5e38\u89c4\u6587\u4ef6\uff0c\u6240\u4ee5\u5982\u679c\u5185\u6838\u4e0d\u7406\u89e3ext3\u65e5\u5fd7\uff0c\u5c31\u4e0d\u9700\u8981\u7279\u522b\u6ce8\u610f\u5b83\u3002</p> <p>An RO_COMPAT flag indicates that the on-disk format is 100% compatible with older on-disk formats for reading (i.e. the feature does not change the visible on-disk format). However, an old kernel writing to such a filesystem would/could corrupt the filesystem, so this is prevented. The most common such feature, SPARSE_SUPER, is an RO_COMPAT feature because sparse groups allow file data blocks where superblock/group descriptor backups used to live, and ext2_free_blocks() refuses to free these blocks, which would leading to inconsistent bitmaps. An old kernel would also get an error if it tried to free a series of blocks which crossed a group boundary, but this is a legitimate layout in a SPARSE_SUPER filesystem.</p> <p>RO_COMPAT\u6807\u5fd7\u8868\u793a\u78c1\u76d8\u4e0a\u7684\u683c\u5f0f\u4e0e\u65e7\u7684\u78c1\u76d8\u4e0a\u7684\u8bfb\u53d6\u683c\u5f0f100%\u517c\u5bb9\uff08\u5373\uff0c\u8be5\u529f\u80fd\u4e0d\u4f1a\u66f4\u6539\u53ef\u89c1\u7684\u78c1\u76d8\u4e0a\u683c\u5f0f\uff09\u3002\u7136\u800c\uff0c\u65e7\u5185\u6838\u5199\u5165\u8fd9\u6837\u7684\u6587\u4ef6\u7cfb\u7edf\u4f1a\u635f\u574f\u6587\u4ef6\u7cfb\u7edf\uff0c\u56e0\u6b64\u8fd9\u662f\u53ef\u4ee5\u9632\u6b62\u7684\u3002\u6700\u5e38\u89c1\u7684\u8fd9\u79cd\u7279\u6027SPARSE_SUPER\u662fRO_COMPAT\u7279\u6027\uff0c\u56e0\u4e3a\u7a00\u758f\u7ec4\u5141\u8bb8\u8d85\u7ea7\u5757/\u7ec4\u63cf\u8ff0\u7b26\u5907\u4efd\u6240\u5728\u7684\u6587\u4ef6\u6570\u636e\u5757\uff0c\u800cext2_free_block\uff08\uff09\u62d2\u7edd\u91ca\u653e\u8fd9\u4e9b\u5757\uff0c\u8fd9\u5c06\u5bfc\u81f4\u4f4d\u56fe\u4e0d\u4e00\u81f4\u3002\u5982\u679c\u65e7\u5185\u6838\u8bd5\u56fe\u91ca\u653e\u4e00\u7cfb\u5217\u8de8\u8d8a\u7ec4\u8fb9\u754c\u7684\u5757\uff0c\u4e5f\u4f1a\u51fa\u73b0\u9519\u8bef\uff0c\u4f46\u8fd9\u662fSPARSE_SUPER\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u5408\u6cd5\u5e03\u5c40\u3002</p> <p>An INCOMPAT flag indicates the on-disk format has changed in some way that makes it unreadable by older kernels, or would otherwise cause a problem if an old kernel tried to mount it. FILETYPE is an INCOMPAT flag because older kernels would think a filename was longer than 256 characters, which would lead to corrupt directory listings. The COMPRESSION flag is an obvious INCOMPAT flag - if the kernel doesn\u2019t understand compression, you would just get garbage back from read() instead of it automatically decompressing your data. The ext3 RECOVER flag is needed to prevent a kernel which does not understand the ext3 journal from mounting the filesystem without replaying the journal.</p> <p>INCOMPAT\u6807\u5fd7\u8868\u793a\u78c1\u76d8\u4e0a\u7684\u683c\u5f0f\u53d1\u751f\u4e86\u67d0\u79cd\u53d8\u5316\uff0c\u4f7f\u5f97\u65e7\u5185\u6838\u65e0\u6cd5\u8bfb\u53d6\u8be5\u683c\u5f0f\uff0c\u6216\u8005\u5982\u679c\u65e7\u5185\u6838\u8bd5\u56fe\u88c5\u8f7d\u8be5\u683c\u5f0f\uff0c\u5219\u4f1a\u5bfc\u81f4\u95ee\u9898\u3002FILETYPE\u662f\u4e00\u4e2aINCOMPATT\u6807\u5fd7\uff0c\u56e0\u4e3a\u65e7\u5185\u6838\u4f1a\u8ba4\u4e3a\u6587\u4ef6\u540d\u8d85\u8fc7256\u4e2a\u5b57\u7b26\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u76ee\u5f55\u5217\u8868\u635f\u574f\u3002COMPRESSION\u6807\u5fd7\u662f\u4e00\u4e2a\u660e\u663e\u7684INCOMPAT\u6807\u5fd7\u2014\u2014\u5982\u679c\u5185\u6838\u4e0d\u7406\u89e3\u538b\u7f29\uff0c\u60a8\u53ea\u9700\u8981\u4eceread\uff08\uff09\u4e2d\u83b7\u53d6\u5783\u573e\uff0c\u800c\u4e0d\u662f\u81ea\u52a8\u89e3\u538b\u7f29\u6570\u636e\u3002\u9700\u8981ext3 RECOVER\u6807\u5fd7\u6765\u9632\u6b62\u4e0d\u7406\u89e3ext3\u65e5\u5fd7\u7684\u5185\u6838\u5728\u4e0d\u91cd\u653e\u65e5\u5fd7\u7684\u60c5\u51b5\u4e0b\u88c5\u8f7d\u6587\u4ef6\u7cfb\u7edf\u3002</p> <p>For e2fsck, it needs to be more strict with the handling of these flags than the kernel. If it doesn\u2019t understand ANY of the COMPAT, RO_COMPAT, or INCOMPAT flags it will refuse to check the filesystem, because it has no way of verifying whether a given feature is valid or not. Allowing e2fsck to succeed on a filesystem with an unknown feature is a false sense of security for the user. Refusing to check a filesystem with unknown features is a good incentive for the user to update to the latest e2fsck. This also means that anyone adding feature flags to ext2 also needs to update e2fsck to verify these features.</p> <p>\u5bf9\u4e8ee2fsck\uff0c\u5b83\u9700\u8981\u6bd4\u5185\u6838\u66f4\u4e25\u683c\u5730\u5904\u7406\u8fd9\u4e9b\u6807\u5fd7\u3002\u5982\u679c\u5b83\u4e0d\u7406\u89e3COMPAT\u3001RO_COMPAT\u6216INCOMPAT\u6807\u5fd7\uff0c\u5b83\u5c06\u62d2\u7edd\u68c0\u67e5\u6587\u4ef6\u7cfb\u7edf\uff0c\u56e0\u4e3a\u5b83\u65e0\u6cd5\u9a8c\u8bc1\u7ed9\u5b9a\u529f\u80fd\u662f\u5426\u6709\u6548\u3002\u5bf9\u4e8e\u7528\u6237\u6765\u8bf4\uff0c\u5141\u8bb8e2fsck\u5728\u5177\u6709\u672a\u77e5\u7279\u6027\u7684\u6587\u4ef6\u7cfb\u7edf\u4e0a\u6210\u529f\u662f\u4e00\u79cd\u9519\u8bef\u7684\u5b89\u5168\u611f\u3002\u62d2\u7edd\u68c0\u67e5\u5177\u6709\u672a\u77e5\u7279\u6027\u7684\u6587\u4ef6\u7cfb\u7edf\u662f\u7528\u6237\u66f4\u65b0\u5230\u6700\u65b0e2fsck\u7684\u826f\u597d\u6fc0\u52b1\u3002\u8fd9\u4e5f\u610f\u5473\u7740\u4efb\u4f55\u5411ext2\u6dfb\u52a0\u7279\u6027\u6807\u5fd7\u7684\u4eba\u90fd\u9700\u8981\u66f4\u65b0e2fsck\u6765\u9a8c\u8bc1\u8fd9\u4e9b\u7279\u6027\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext2-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#210-metadata","title":"2.10 Metadata","text":"<p>It is frequently claimed that the ext2 implementation of writing asynchronous metadata is faster than the ffs synchronous metadata scheme but less reliable. Both methods are equally resolvable by their respective fsck programs.</p> <p>\u4eba\u4eec\u7ecf\u5e38\u58f0\u79f0\uff0c\u7f16\u5199\u5f02\u6b65\u5143\u6570\u636e\u7684ext2\u5b9e\u73b0\u6bd4ffs\u540c\u6b65\u5143\u6570\u636e\u65b9\u6848\u66f4\u5feb\uff0c\u4f46\u4e0d\u592a\u53ef\u9760\u3002\u8fd9\u4e24\u79cd\u65b9\u6cd5\u90fd\u53ef\u4ee5\u901a\u8fc7\u5404\u81ea\u7684fsck\u7a0b\u5e8f\u8fdb\u884c\u540c\u6837\u7684\u89e3\u6790\u3002</p> <p>If you\u2019re exceptionally paranoid, there are 3 ways of making metadata writes synchronous on ext2:</p> <ul> <li>per-file if you have the program source: use the O_SYNC flag to open()</li> <li>per-file if you don\u2019t have the source: use \u201cchattr +S\u201d on the file</li> <li>per-filesystem: add the \u201csync\u201d option to mount (or in /etc/fstab)</li> </ul> <p>\u5982\u679c\u60a8\u5f02\u5e38\u504f\u6267\uff0c\u67093\u79cd\u65b9\u6cd5\u53ef\u4ee5\u4f7fext2\u4e0a\u7684\u5143\u6570\u636e\u5199\u5165\u540c\u6b65\uff1a</p> <ul> <li>\u6bcf\u4e2a\u6587\u4ef6\uff08\u5982\u679c\u6709\u7a0b\u5e8f\u6e90\uff09\uff1a\u4f7f\u7528O_SYNC\u6807\u5fd7open()</li> <li>\u5982\u679c\u6ca1\u6709\u6e90\u4ee3\u7801\uff0c\u8bf7\u6309\u6587\u4ef6\uff1a\u5728\u6587\u4ef6\u4e0a\u4f7f\u7528\u201cchattr+S\u201d</li> <li>\u6bcf\u4e2a\u6587\u4ef6\u7cfb\u7edf\uff1a\u6dfb\u52a0\u201csync\u201d\u9009\u9879\u4ee5\u88c5\u8f7d\uff08\u6216\u5728/etc/fstab\u4e2d\uff09</li> </ul> <p>the first and last are not ext2 specific but do force the metadata to be written synchronously. See also Journaling below.</p> <p>\u7b2c\u4e00\u4e2a\u548c\u6700\u540e\u4e00\u4e2a\u4e0d\u662fext2\u7279\u5b9a\u7684\uff0c\u4f46\u786e\u5b9e\u5f3a\u5236\u540c\u6b65\u5199\u5165\u5143\u6570\u636e\u3002\u53e6\u8bf7\u53c2\u9605\u4e0b\u9762\u7684\u65e5\u5fd7\u8bb0\u5f55\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext2-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#211-limitations","title":"2.11 Limitations","text":"<p>There are various limits imposed by the on-disk layout of ext2. Other limits are imposed by the current implementation of the kernel code. Many of the limits are determined at the time the filesystem is first created, and depend upon the block size chosen. The ratio of inodes to data blocks is fixed at filesystem creation time, so the only way to increase the number of inodes is to increase the size of the filesystem. No tools currently exist which can change the ratio of inodes to blocks.</p> <p>ext2\u7684\u78c1\u76d8\u5e03\u5c40\u6709\u5404\u79cd\u9650\u5236\u3002\u5176\u4ed6\u9650\u5236\u662f\u7531\u5185\u6838\u4ee3\u7801\u7684\u5f53\u524d\u5b9e\u73b0\u5f3a\u52a0\u7684\u3002\u8bb8\u591a\u9650\u5236\u662f\u5728\u9996\u6b21\u521b\u5efa\u6587\u4ef6\u7cfb\u7edf\u65f6\u786e\u5b9a\u7684\uff0c\u5e76\u53d6\u51b3\u4e8e\u6240\u9009\u7684\u5757\u5927\u5c0f\u3002\u7d22\u5f15\u8282\u70b9\u4e0e\u6570\u636e\u5757\u7684\u6bd4\u7387\u5728\u6587\u4ef6\u7cfb\u7edf\u521b\u5efa\u65f6\u662f\u56fa\u5b9a\u7684\uff0c\u56e0\u6b64\u589e\u52a0\u7d22\u5f15\u8282\u70b9\u6570\u91cf\u7684\u552f\u4e00\u65b9\u6cd5\u662f\u589e\u52a0\u6587\u4ef6\u7cfb\u7edf\u7684\u5927\u5c0f\u3002\u76ee\u524d\u6ca1\u6709\u5de5\u5177\u53ef\u4ee5\u6539\u53d8\u7d22\u5f15\u8282\u70b9\u4e0e\u5757\u7684\u6bd4\u7387\u3002</p> <p>Most of these limits could be overcome with slight changes in the on-disk format and using a compatibility flag to signal the format change (at the expense of some compatibility).</p> <p>\u8fd9\u4e9b\u9650\u5236\u4e2d\u7684\u5927\u591a\u6570\u90fd\u53ef\u4ee5\u901a\u8fc7\u5bf9\u78c1\u76d8\u683c\u5f0f\u8fdb\u884c\u8f7b\u5fae\u66f4\u6539\u5e76\u4f7f\u7528\u517c\u5bb9\u6027\u6807\u5fd7\u6765\u8868\u793a\u683c\u5f0f\u66f4\u6539\uff08\u4ee5\u727a\u7272\u67d0\u4e9b\u517c\u5bb9\u6027\u4e3a\u4ee3\u4ef7\uff09\u6765\u514b\u670d\u3002</p> Filesystem block size 1kB 2kB 4kB 8kB File size limit 16GB 256GB 2048GB 2048GB Filesystem size limit 2047GB 8192GB 16384GB 32768GB <p>There is a 2.4 kernel limit of 2048GB for a single block device, so no filesystem larger than that can be created at this time. There is also an upper limit on the block size imposed by the page size of the kernel, so 8kB blocks are only allowed on Alpha systems (and other architectures which support larger pages).</p> <p>\u5355\u4e2a\u5757\u8bbe\u5907\u76842.4\u5185\u6838\u9650\u5236\u4e3a2048GB\uff0c\u56e0\u6b64\u6b64\u65f6\u4e0d\u80fd\u521b\u5efa\u5927\u4e8e\u6b64\u503c\u7684\u6587\u4ef6\u7cfb\u7edf\u3002\u5185\u6838\u7684\u9875\u9762\u5927\u5c0f\u5bf9\u5757\u5927\u5c0f\u4e5f\u6709\u4e0a\u9650\uff0c\u56e0\u6b64\u4ec5\u5728Alpha\u7cfb\u7edf\uff08\u4ee5\u53ca\u5176\u4ed6\u652f\u6301\u8f83\u5927\u9875\u9762\u7684\u67b6\u6784\uff09\u4e0a\u5141\u8bb88kB\u7684\u5757\u3002</p> <p>There is an upper limit of 32000 subdirectories in a single directory.</p> <p>\u5355\u4e2a\u76ee\u5f55\u4e2d\u670932000\u4e2a\u5b50\u76ee\u5f55\u7684\u4e0a\u9650\u3002</p> <p>There is a \u201csoft\u201d upper limit of about 10-15k files in a single directory with the current linear linked-list directory implementation. This limit stems from performance problems when creating and deleting (and also finding) files in such large directories. Using a hashed directory index (under development) allows 100k-1M+ files in a single directory without performance problems (although RAM size becomes an issue at this point).</p> <p>\u5728\u5f53\u524d\u7684\u7ebf\u6027\u94fe\u8868\u76ee\u5f55\u5b9e\u73b0\u4e2d\uff0c\u5355\u4e2a\u76ee\u5f55\u4e2d\u7684\u201c\u8f6f\u201d\u4e0a\u9650\u7ea6\u4e3a10-15k\u4e2a\u6587\u4ef6\u3002\u8fd9\u79cd\u9650\u5236\u6e90\u4e8e\u5728\u5982\u6b64\u5927\u7684\u76ee\u5f55\u4e2d\u521b\u5efa\u548c\u5220\u9664\uff08\u4ee5\u53ca\u67e5\u627e\uff09\u6587\u4ef6\u65f6\u7684\u6027\u80fd\u95ee\u9898\u3002\u4f7f\u7528\u6563\u5217\u76ee\u5f55\u7d22\u5f15\uff08\u6b63\u5728\u5f00\u53d1\u4e2d\uff09\u5141\u8bb8\u5728\u5355\u4e2a\u76ee\u5f55\u4e2d\u5b58\u50a8100k-1M+\u6587\u4ef6\uff0c\u800c\u4e0d\u4f1a\u51fa\u73b0\u6027\u80fd\u95ee\u9898\uff08\u5c3d\u7ba1\u6b64\u65f6RAM\u5927\u5c0f\u5df2\u6210\u4e3a\u4e00\u4e2a\u95ee\u9898\uff09\u3002</p> <p>The (meaningless) absolute upper limit of files in a single directory (imposed by the file size, the realistic limit is obviously much less) is over 130 trillion files. It would be higher except there are not enough 4-character names to make up unique directory entries, so they have to be 8 character filenames, even then we are fairly close to running out of unique filenames.</p> <p>\u5355\u4e2a\u76ee\u5f55\u4e2d\u6587\u4ef6\u7684\uff08\u65e0\u610f\u4e49\u7684\uff09\u7edd\u5bf9\u4e0a\u9650\uff08\u7531\u6587\u4ef6\u5927\u5c0f\u51b3\u5b9a\uff0c\u5b9e\u9645\u9650\u5236\u663e\u7136\u8981\u5c0f\u5f97\u591a\uff09\u8d85\u8fc7130\u4e07\u4ebf\u4e2a\u6587\u4ef6\u3002\u9664\u975e\u6ca1\u6709\u8db3\u591f\u76844\u4e2a\u5b57\u7b26\u7684\u540d\u79f0\u6765\u7ec4\u6210\u552f\u4e00\u7684\u76ee\u5f55\u6761\u76ee\uff0c\u5426\u5219\u5b83\u4f1a\u66f4\u9ad8\uff0c\u6240\u4ee5\u5b83\u4eec\u5fc5\u987b\u662f8\u4e2a\u5b57\u7b26\u7684\u6587\u4ef6\u540d\uff0c\u5373\u4f7f\u8fd9\u6837\uff0c\u6211\u4eec\u7684\u552f\u4e00\u6587\u4ef6\u540d\u4e5f\u5feb\u8981\u7528\u5b8c\u4e86\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext2-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#212-journaling","title":"2.12 Journaling","text":"<p>A journaling extension to the ext2 code has been developed by Stephen Tweedie. It avoids the risks of metadata corruption and the need to wait for e2fsck to complete after a crash, without requiring a change to the on-disk ext2 layout. In a nutshell, the journal is a regular file which stores whole metadata (and optionally data) blocks that have been modified, prior to writing them into the filesystem. This means it is possible to add a journal to an existing ext2 filesystem without the need for data conversion.</p> <p>StephenTweedie\u5f00\u53d1\u4e86ext2\u4ee3\u7801\u7684\u65e5\u5fd7\u6269\u5c55\u3002\u5b83\u907f\u514d\u4e86\u5143\u6570\u636e\u635f\u574f\u7684\u98ce\u9669\uff0c\u4ee5\u53ca\u5728\u5d29\u6e83\u540e\u7b49\u5f85e2fsck\u5b8c\u6210\u7684\u9700\u8981\uff0c\u800c\u4e0d\u9700\u8981\u66f4\u6539\u78c1\u76d8\u4e0a\u7684ext2\u5e03\u5c40\u3002\u7b80\u8a00\u4e4b\uff0c\u65e5\u5fd7\u662f\u4e00\u4e2a\u5e38\u89c4\u6587\u4ef6\uff0c\u5b83\u5b58\u50a8\u5728\u5199\u5165\u6587\u4ef6\u7cfb\u7edf\u4e4b\u524d\u5df2\u4fee\u6539\u7684\u6240\u6709\u5143\u6570\u636e\uff08\u4ee5\u53ca\u53ef\u9009\u7684\u6570\u636e\uff09\u5757\u3002\u8fd9\u610f\u5473\u7740\u53ef\u4ee5\u5c06\u65e5\u5fd7\u6dfb\u52a0\u5230\u73b0\u6709\u7684ext2\u6587\u4ef6\u7cfb\u7edf\u4e2d\uff0c\u800c\u4e0d\u9700\u8981\u6570\u636e\u8f6c\u6362\u3002</p> <p>When changes to the filesystem (e.g. a file is renamed) they are stored in a transaction in the journal and can either be complete or incomplete at the time of a crash. If a transaction is complete at the time of a crash (or in the normal case where the system does not crash), then any blocks in that transaction are guaranteed to represent a valid filesystem state, and are copied into the filesystem. If a transaction is incomplete at the time of the crash, then there is no guarantee of consistency for the blocks in that transaction so they are discarded (which means any filesystem changes they represent are also lost). Check Documentation/filesystems/ext4/ if you want to read more about ext4 and journaling.</p> <p>\u5f53\u5bf9\u6587\u4ef6\u7cfb\u7edf\u7684\u66f4\u6539\uff08\u4f8b\u5982\uff0c\u6587\u4ef6\u88ab\u91cd\u547d\u540d\uff09\u65f6\uff0c\u8fd9\u4e9b\u66f4\u6539\u5b58\u50a8\u5728\u65e5\u5fd7\u4e2d\u7684\u4e8b\u52a1\u4e2d\uff0c\u5e76\u4e14\u5728\u5d29\u6e83\u65f6\u53ef\u4ee5\u662f\u5b8c\u6574\u7684\u6216\u4e0d\u5b8c\u6574\u7684\u3002\u5982\u679c\u4e00\u4e2a\u4e8b\u52a1\u5728\u5d29\u6e83\u65f6\uff08\u6216\u8005\u5728\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u7cfb\u7edf\u6ca1\u6709\u5d29\u6e83\uff09\u5b8c\u6210\uff0c\u90a3\u4e48\u8be5\u4e8b\u52a1\u4e2d\u7684\u4efb\u4f55\u5757\u90fd\u4fdd\u8bc1\u8868\u793a\u6709\u6548\u7684\u6587\u4ef6\u7cfb\u7edf\u72b6\u6001\uff0c\u5e76\u88ab\u590d\u5236\u5230\u6587\u4ef6\u7cfb\u7edf\u4e2d\u3002\u5982\u679c\u4e00\u4e2a\u4e8b\u52a1\u5728\u5d29\u6e83\u65f6\u4e0d\u5b8c\u6574\uff0c\u90a3\u4e48\u65e0\u6cd5\u4fdd\u8bc1\u8be5\u4e8b\u52a1\u4e2d\u7684\u5757\u7684\u4e00\u81f4\u6027\uff0c\u56e0\u6b64\u5b83\u4eec\u5c06\u88ab\u4e22\u5f03\uff08\u8fd9\u610f\u5473\u7740\u5b83\u4eec\u6240\u4ee3\u8868\u7684\u4efb\u4f55\u6587\u4ef6\u7cfb\u7edf\u66f4\u6539\u4e5f\u5c06\u4e22\u5931\uff09\u3002\u5982\u679c\u60a8\u60f3\u4e86\u89e3\u6709\u5173ext4\u548c\u65e5\u5fd7\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770bDocumentation/filess/ext4/\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext2-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#3-references","title":"3 References","text":"The kernel source file:/usr/src/linux/fs/ext2/ e2fsprogs (e2fsck) http://e2fsprogs.sourceforge.net/ Design &amp; Implementation http://e2fsprogs.sourceforge.net/ext2intro.html Journaling (ext3) ftp://ftp.uk.linux.org/pub/linux/sct/fs/jfs/ Filesystem Resizing http://ext2resize.sourceforge.net/ Compression 1 http://e2compr.sourceforge.net/ <p>Implementations for:</p> Windows 95/98/NT/2000 http://www.chrysocome.net/explore2fs Windows 95 1 http://www.yipton.net/content.html#FSDEXT2 DOS client 1 ftp://metalab.unc.edu/pub/Linux/system/filesystems/ext2/ OS/2 2 ftp://metalab.unc.edu/pub/Linux/system/filesystems/ext2/ RISC OS client http://www.esw-heim.tu-clausthal.de/~marco/smorbrod/IscaFS/ <ul> <li>1(1,2,3)</li> </ul> <p>no longer actively developed/supported (as of Apr 2001)</p> <ul> <li>2</li> </ul> <p>no longer actively developed/supported (as of Mar 2009)</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/","title":"ext4 Data Structures and Algorithms","text":"<p>\u672c\u6587\u6863\u5730\u5740</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#1-about-this-book","title":"1 About this Book","text":"<p>\u672c\u6587\u6863\u8bd5\u56fe\u63cf\u8ff0ext4\u6587\u4ef6\u7cfb\u7edf\u7684\u78c1\u76d8\u683c\u5f0f\u3002\u540c\u6837\u7684\u4e00\u822c\u601d\u60f3\u4e5f\u5e94\u9002\u7528\u4e8eext2/3\u6587\u4ef6\u7cfb\u7edf\uff0c\u5c3d\u7ba1\u5b83\u4eec\u4e0d\u652f\u6301ext4\u652f\u6301\u7684\u6240\u6709\u529f\u80fd\uff0c\u5b57\u6bb5\u4e5f\u4f1a\u66f4\u77ed\u3002</p> <p>NOTE: This is a work in progress, based on notes that the author (djwong) made while picking apart a filesystem by hand. The data structure definitions should be current as of Linux 4.18 and e2fsprogs-1.44. All comments and corrections are welcome, since there is undoubtedly plenty of lore that might not be reflected in freshly created demonstration filesystems.</p> <p>\u6ce8\uff1a\u8fd9\u662f\u4e00\u9879\u6b63\u5728\u8fdb\u884c\u7684\u5de5\u4f5c\uff0c\u57fa\u4e8e\u4f5c\u8005\uff08djwong\uff09\u5728\u624b\u52a8\u62c6\u5206\u6587\u4ef6\u7cfb\u7edf\u65f6\u6240\u505a\u7684\u6ce8\u91ca\u3002\u4eceLinux4.18\u548ce2fsprogs-1.44\u5f00\u59cb\uff0c\u6570\u636e\u7ed3\u6784\u5b9a\u4e49\u5e94\u8be5\u662f\u6700\u65b0\u7684\u3002\u6b22\u8fce\u6240\u6709\u8bc4\u8bba\u548c\u66f4\u6b63\uff0c\u56e0\u4e3a\u6beb\u65e0\u7591\u95ee\uff0c\u65b0\u521b\u5efa\u7684\u6f14\u793a\u6587\u4ef6\u7cfb\u7edf\u4e2d\u53ef\u80fd\u6ca1\u6709\u53cd\u6620\u51fa\u5927\u91cf\u7684\u77e5\u8bc6\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#11-license","title":"1.1 License","text":"<p>This book is licensed under the terms of the GNU Public License, v2.</p> <p>\u672c\u4e66\u6839\u636eGNU\u516c\u5171\u8bb8\u53ef\u8bc1\u7b2c2\u7248\u7684\u6761\u6b3e\u83b7\u5f97\u8bb8\u53ef\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#12-terminology","title":"1.2 Terminology","text":"<p>ext4 divides a storage device into an array of logical blocks both to reduce bookkeeping overhead and to increase throughput by forcing larger transfer sizes. Generally, the block size will be 4KiB (the same size as pages on x86 and the block layer\u2019s default block size), though the actual size is calculated as 2 ^ (10 + <code>sb.s_log_block_size</code>) bytes. Throughout this document, disk locations are given in terms of these logical blocks, not raw LBAs, and not 1024-byte blocks. For the sake of convenience, the logical block size will be referred to as <code>$block_size</code> throughout the rest of the document.</p> <p>ext4\u5c06\u5b58\u50a8\u8bbe\u5907\u5212\u5206\u4e3a\u903b\u8f91\u5757\u9635\u5217\uff0c\u4ee5\u51cf\u5c11\u8bb0\u8d26\u5f00\u9500\uff0c\u5e76\u901a\u8fc7\u5f3a\u5236\u66f4\u5927\u7684\u4f20\u8f93\u5927\u5c0f\u6765\u63d0\u9ad8\u541e\u5410\u91cf\u3002\u901a\u5e38\uff0c\u5757\u5927\u5c0f\u5c06\u4e3a4KiB\uff08\u4e0ex86\u4e0a\u7684\u9875\u9762\u5927\u5c0f\u548c\u5757\u5c42\u7684\u9ed8\u8ba4\u5757\u5927\u5c0f\u76f8\u540c\uff09\uff0c\u4f46\u5b9e\u9645\u5927\u5c0f\u8ba1\u7b97\u4e3a2^\uff0810+\u201csb.s_log_block_size\u201d\uff09\u5b57\u8282\u3002\u5728\u672c\u6587\u6863\u4e2d\uff0c\u78c1\u76d8\u4f4d\u7f6e\u662f\u4ee5\u8fd9\u4e9b\u903b\u8f91\u5757\u800c\u975e\u539f\u59cbLBA\u548c1024\u5b57\u8282\u5757\u7684\u5f62\u5f0f\u7ed9\u51fa\u7684\u3002\u4e3a\u4e86\u65b9\u4fbf\u8d77\u89c1\uff0c\u5728\u6587\u6863\u7684\u5176\u4f59\u90e8\u5206\u4e2d\uff0c\u903b\u8f91\u5757\u5927\u5c0f\u5c06\u88ab\u79f0\u4e3a\u201c$block_size\u201d\u3002</p> <p>When referenced in <code>preformatted text</code> blocks, <code>sb</code> refers to fields in the super block, and <code>inode</code> refers to fields in an inode table entry.</p> <p>\u5f53\u5728\u201c\u9884\u683c\u5f0f\u5316\u6587\u672c\u201d\u5757\u4e2d\u5f15\u7528\u65f6\uff0c\u201csb\u201d\u6307\u4ee3\u8d85\u7ea7\u5757\u4e2d\u7684\u5b57\u6bb5\uff0c\u800c\u201cinode\u201d\u6307\u4ee3inode\u8868\u6761\u76ee\u4e2d\u7684\u5b57\u6bb5\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#13-other-references","title":"1.3 Other References","text":"<p>Also see https://www.nongnu.org/ext2-doc/ for quite a collection of information about ext2/3. Here\u2019s another old reference: http://wiki.osdev.org/Ext2</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#2-high-level-design","title":"2 High Level Design","text":"<p>An ext4 file system is split into a series of block groups. To reduce performance difficulties due to fragmentation, the block allocator tries very hard to keep each file\u2019s blocks within the same group, thereby reducing seek times. The size of a block group is specified in <code>sb.s_blocks_per_group</code> blocks, though it can also calculated as 8 * <code>block_size_in_bytes</code>. With the default block size of 4KiB, each group will contain 32,768 blocks, for a length of 128MiB. The number of block groups is the size of the device divided by the size of a block group.</p> <p>ext4\u6587\u4ef6\u7cfb\u7edf\u88ab\u5206\u6210\u4e00\u7cfb\u5217\u5757\u7ec4\u3002\u4e3a\u4e86\u51cf\u5c11\u7531\u4e8e\u788e\u7247\u5bfc\u81f4\u7684\u6027\u80fd\u56f0\u96be\uff0c\u5757\u5206\u914d\u5668\u975e\u5e38\u52aa\u529b\u5730\u5c06\u6bcf\u4e2a\u6587\u4ef6\u7684\u5757\u4fdd\u6301\u5728\u540c\u4e00\u7ec4\u4e2d\uff0c\u4ece\u800c\u51cf\u5c11\u67e5\u627e\u65f6\u95f4\u3002\u5757\u7ec4\u7684\u5927\u5c0f\u5728\u201csb.s_blocks_per_group\u201d\u5757\u4e2d\u6307\u5b9a\uff0c\u4f46\u4e5f\u53ef\u4ee5\u8ba1\u7b97\u4e3a8*\u201cblock_size_in_bytes\u201d\u3002\u9ed8\u8ba4\u5757\u5927\u5c0f\u4e3a4KiB\uff0c\u6bcf\u7ec4\u5c06\u5305\u542b32768\u4e2a\u5757\uff0c\u957f\u5ea6\u4e3a128MiB\u3002\u5757\u7ec4\u7684\u6570\u91cf\u662f\u8bbe\u5907\u7684\u5927\u5c0f\u9664\u4ee5\u5757\u7ec4\u7684\u5927\u5c0f\u3002</p> <p>All fields in ext4 are written to disk in little-endian order. HOWEVER, all fields in jbd2 (the journal) are written to disk in big-endian order.</p> <p>ext4\u4e2d\u7684\u6240\u6709\u5b57\u6bb5\u90fd\u4ee5\u5c0f\u7aef\u5e8f\u5199\u5165\u78c1\u76d8\u3002\u7136\u800c\uff0cjbd2\uff08\u65e5\u5fd7\uff09\u4e2d\u7684\u6240\u6709\u5b57\u6bb5\u90fd\u4ee5\u5927\u7aef\u987a\u5e8f\u5199\u5165\u78c1\u76d8\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#21-blocks","title":"2.1 Blocks","text":"<p>ext4 allocates storage space in units of \u201cblocks\u201d. A block is a group of sectors between 1KiB and 64KiB, and the number of sectors must be an integral power of 2. Blocks are in turn grouped into larger units called block groups. Block size is specified at mkfs time and typically is 4KiB. You may experience mounting problems if block size is greater than page size (i.e. 64KiB blocks on a i386 which only has 4KiB memory pages). By default a filesystem can contain 2^32 blocks; if the \u201864bit\u2019 feature is enabled, then a filesystem can have 2^64 blocks. The location of structures is stored in terms of the block number the structure lives in and not the absolute offset on disk.</p> <p>ext4\u4ee5\u201c\u5757\u201d\u4e3a\u5355\u4f4d\u5206\u914d\u5b58\u50a8\u7a7a\u95f4\u3002\u5757\u662f1KiB\u548c64KiB\u4e4b\u95f4\u7684\u4e00\u7ec4\u6247\u533a\uff0c\u6247\u533a\u6570\u5fc5\u987b\u662f2\u7684\u6574\u6570\u6b21\u65b9\u3002\u5757\u4f9d\u6b21\u5206\u7ec4\u4e3a\u66f4\u5927\u7684\u5355\u5143\uff0c\u79f0\u4e3a\u5757\u7ec4\u3002\u5757\u5927\u5c0f\u5728mkfs\u65f6\u95f4\u6307\u5b9a\uff0c\u901a\u5e38\u4e3a4KiB\u3002\u5982\u679c\u5757\u5927\u5c0f\u5927\u4e8e\u9875\u9762\u5927\u5c0f\uff08\u5373i386\u4e0a\u53ea\u67094KiB\u5185\u5b58\u9875\u768464KiB\u5757\uff09\uff0c\u60a8\u53ef\u80fd\u4f1a\u9047\u5230\u5b89\u88c5\u95ee\u9898\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6587\u4ef6\u7cfb\u7edf\u53ef\u4ee5\u5305\u542b2^32\u4e2a\u5757\uff1b\u5982\u679c\u542f\u7528\u4e86\u201c64\u4f4d\u201d\u529f\u80fd\uff0c\u90a3\u4e48\u6587\u4ef6\u7cfb\u7edf\u53ef\u4ee5\u67092^64\u4e2a\u5757\u3002\u7ed3\u6784\u7684\u4f4d\u7f6e\u662f\u6839\u636e\u7ed3\u6784\u6240\u5728\u7684\u5757\u53f7\u800c\u4e0d\u662f\u78c1\u76d8\u4e0a\u7684\u7edd\u5bf9\u504f\u79fb\u91cf\u6765\u5b58\u50a8\u7684\u3002</p> <p>For 32-bit filesystems, limits are as follows:</p> Item 1KiB 2KiB 4KiB 64KiB Blocks 2^32 2^32 2^32 2^32 Inodes 2^32 2^32 2^32 2^32 File System Size 4TiB 8TiB 16TiB 256TiB Blocks Per Block Group 8,192 16,384 32,768 524,288 Inodes Per Block Group 8,192 16,384 32,768 524,288 Block Group Size 8MiB 32MiB 128MiB 32GiB Blocks Per File, Extents 2^32 2^32 2^32 2^32 Blocks Per File, Block Maps 16,843,020 134,480,396 1,074,791,436 4,398,314,962,956 (really 2^32 due to field size limitations) File Size, Extents 4TiB 8TiB 16TiB 256TiB File Size, Block Maps 16GiB 256GiB 4TiB 256TiB <p>For 64-bit filesystems, limits are as follows:</p> Item 1KiB 2KiB 4KiB 64KiB Blocks 2^64 2^64 2^64 2^64 Inodes 2^32 2^32 2^32 2^32 File System Size 16ZiB 32ZiB 64ZiB 1YiB Blocks Per Block Group 8,192 16,384 32,768 524,288 Inodes Per Block Group 8,192 16,384 32,768 524,288 Block Group Size 8MiB 32MiB 128MiB 32GiB Blocks Per File, Extents 2^32 2^32 2^32 2^32 Blocks Per File, Block Maps 16,843,020 134,480,396 1,074,791,436 4,398,314,962,956 (really 2^32 due to field size limitations) File Size, Extents 4TiB 8TiB 16TiB 256TiB File Size, Block Maps 16GiB 256GiB 4TiB 256TiB <p>Note: Files not using extents (i.e. files using block maps) must be placed within the first 2^32 blocks of a filesystem. Files with extents must be placed within the first 2^48 blocks of a filesystem. It\u2019s not clear what happens with larger filesystems.</p> <p>\u6ce8\u610f\uff1a\u4e0d\u4f7f\u7528\u6269\u5c55\u6570\u636e\u5757\u7684\u6587\u4ef6\uff08\u5373\u4f7f\u7528\u5757\u6620\u5c04\u7684\u6587\u4ef6\uff09\u5fc5\u987b\u653e\u5728\u6587\u4ef6\u7cfb\u7edf\u7684\u524d2^32\u4e2a\u5757\u5185\u3002\u5e26\u6709\u6269\u5c55\u6570\u636e\u5757\u7684\u6587\u4ef6\u5fc5\u987b\u653e\u5728\u6587\u4ef6\u7cfb\u7edf\u7684\u524d2^48\u4e2a\u5757\u5185\u3002\u76ee\u524d\u8fd8\u4e0d\u6e05\u695a\u5927\u578b\u6587\u4ef6\u7cfb\u7edf\u4f1a\u53d1\u751f\u4ec0\u4e48\u60c5\u51b5\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#22-layout","title":"2.2 Layout","text":"<p>The layout of a standard block group is approximately as follows (each of these fields is discussed in a separate section below):</p> <p>\u6807\u51c6\u5757\u7ec4\u7684\u5e03\u5c40\u5927\u81f4\u5982\u4e0b\uff08\u4ee5\u4e0b\u5355\u72ec\u4e00\u8282\u8ba8\u8bba\u4e86\u6bcf\u4e2a\u5b57\u6bb5\uff09\uff1a</p> Group 0 Padding ext4 Super Block Group Descriptors Reserved GDT Blocks Data Block Bitmap inode Bitmap inode Table Data Blocks 1024 bytes 1 block many blocks many blocks 1 block 1 block many blocks many more blocks <p>For the special case of block group 0, the first 1024 bytes are unused, to allow for the installation of x86 boot sectors and other oddities. The superblock will start at offset 1024 bytes, whichever block that happens to be (usually 0). However, if for some reason the block size = 1024, then block 0 is marked in use and the superblock goes in block 1. For all other block groups, there is no padding.</p> <p>\u5bf9\u4e8e\u5757\u7ec40\u7684\u7279\u6b8a\u60c5\u51b5\uff0c\u524d1024\u4e2a\u5b57\u8282\u662f\u672a\u4f7f\u7528\u7684\uff0c\u4ee5\u5141\u8bb8\u5b89\u88c5x86\u5f15\u5bfc\u6247\u533a\u548c\u5176\u4ed6\u5947\u602a\u7684\u4e1c\u897f\u3002\u8d85\u7ea7\u5757\u5c06\u4ece\u504f\u79fb1024\u5b57\u8282\u5f00\u59cb\uff0c\u65e0\u8bba\u54ea\u4e2a\u5757\u6070\u597d\u662f\uff08\u901a\u5e38\u4e3a0\uff09\u3002\u7136\u800c\uff0c\u5982\u679c\u7531\u4e8e\u67d0\u79cd\u539f\u56e0\uff0c\u5757\u5927\u5c0f\uff1d1024\uff0c\u90a3\u4e48\u57570\u88ab\u6807\u8bb0\u4e3a\u6b63\u5728\u4f7f\u7528\uff0c\u8d85\u7ea7\u5757\u8fdb\u5165\u57571\u3002\u5bf9\u4e8e\u6240\u6709\u5176\u4ed6\u5757\u7ec4\uff0c\u6ca1\u6709\u586b\u5145\u3002</p> <p>The ext4 driver primarily works with the superblock and the group descriptors that are found in block group 0. Redundant copies of the superblock and group descriptors are written to some of the block groups across the disk in case the beginning of the disk gets trashed, though not all block groups necessarily host a redundant copy (see following paragraph for more details). If the group does not have a redundant copy, the block group begins with the data block bitmap. Note also that when the filesystem is freshly formatted, mkfs will allocate \u201creserve GDT block\u201d space after the block group descriptors and before the start of the block bitmaps to allow for future expansion of the filesystem. By default, a filesystem is allowed to increase in size by a factor of 1024x over the original filesystem size.</p> <p>ext4\u9a71\u52a8\u7a0b\u5e8f\u4e3b\u8981\u4f7f\u7528\u5757\u7ec40\u4e2d\u7684\u8d85\u7ea7\u5757\u548c\u7ec4\u63cf\u8ff0\u7b26\u3002\u8d85\u7ea7\u5757\u548c\u7ec4\u63cf\u8ff0\u7b26\u7684\u5197\u4f59\u526f\u672c\u5c06\u5199\u5165\u78c1\u76d8\u4e0a\u7684\u67d0\u4e9b\u5757\u7ec4\uff0c\u4ee5\u9632\u78c1\u76d8\u7684\u5f00\u5934\u88ab\u4e22\u5f03\uff0c\u4f46\u5e76\u975e\u6240\u6709\u5757\u7ec4\u90fd\u5fc5\u987b\u62e5\u6709\u5197\u4f59\u526f\u672c\uff08\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u4ee5\u4e0b\u6bb5\u843d\uff09\u3002\u5982\u679c\u7ec4\u6ca1\u6709\u5197\u4f59\u526f\u672c\uff0c\u5219\u5757\u7ec4\u4ee5\u6570\u636e\u5757\u4f4d\u56fe\u5f00\u59cb\u3002\u8fd8\u8981\u6ce8\u610f\uff0c\u5f53\u6587\u4ef6\u7cfb\u7edf\u662f\u65b0\u683c\u5f0f\u5316\u7684\u65f6\uff0cmkfs\u5c06\u5728\u5757\u7ec4\u63cf\u8ff0\u7b26\u4e4b\u540e\u548c\u5757\u4f4d\u56fe\u5f00\u59cb\u4e4b\u524d\u5206\u914d\u201c\u4fdd\u7559GDT\u5757\u201d\u7a7a\u95f4\uff0c\u4ee5\u5141\u8bb8\u5c06\u6765\u6269\u5c55\u6587\u4ef6\u7cfb\u7edf\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5141\u8bb8\u6587\u4ef6\u7cfb\u7edf\u7684\u5927\u5c0f\u6bd4\u539f\u59cb\u6587\u4ef6\u7cfb\u7edf\u5927\u5c0f\u589e\u52a01024\u500d\u3002</p> <p>The location of the inode table is given by <code>grp.bg_inode_table_*</code>. It is continuous range of blocks large enough to contain <code>sb.s_inodes_per_group * sb.s_inode_size</code> bytes.</p> <p>inode\u8868\u7684\u4f4d\u7f6e\u7531\u201cgrp.bg_node_table_\u201d\u7ed9\u51fa\u3002\u5b83\u662f\u4e00\u4e2a\u8fde\u7eed\u7684\u5757\u8303\u56f4\uff0c\u8db3\u591f\u5927\uff0c\u53ef\u4ee5\u5305\u542b\u201csb.s_inodes_per_groupsb.s_index_size\u201d\u5b57\u8282\u3002</p> <p>As for the ordering of items in a block group, it is generally established that the super block and the group descriptor table, if present, will be at the beginning of the block group. The bitmaps and the inode table can be anywhere, and it is quite possible for the bitmaps to come after the inode table, or for both to be in different groups (flex_bg). Leftover space is used for file data blocks, indirect block maps, extent tree blocks, and extended attributes.</p> <p>\u5173\u4e8e\u5757\u7ec4\u4e2d\u9879\u76ee\u7684\u6392\u5e8f\uff0c\u901a\u5e38\u786e\u5b9a\u8d85\u7ea7\u5757\u548c\u7ec4\u63cf\u8ff0\u7b26\u8868\uff08\u5982\u679c\u5b58\u5728\uff09\u5c06\u4f4d\u4e8e\u5757\u7ec4\u7684\u5f00\u5934\u3002\u4f4d\u56fe\u548cinode\u8868\u53ef\u4ee5\u4f4d\u4e8e\u4efb\u4f55\u4f4d\u7f6e\uff0c\u4f4d\u56fe\u5f88\u53ef\u80fd\u4f4d\u4e8einode\u8868\u4e4b\u540e\uff0c\u6216\u8005\u4e24\u8005\u4f4d\u4e8e\u4e0d\u540c\u7684\u7ec4\u4e2d\uff08flex_bg\uff09\u3002\u5269\u4f59\u7a7a\u95f4\u7528\u4e8e\u6587\u4ef6\u6570\u636e\u5757\u3001\u95f4\u63a5\u5757\u6620\u5c04\u3001\u6570\u636e\u5757\u6811\u5757\u548c\u6269\u5c55\u5c5e\u6027\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#23-flexible-block-groups","title":"2.3 Flexible Block Groups","text":"<p>Starting in ext4, there is a new feature called flexible block groups (flex_bg). In a flex_bg, several block groups are tied together as one logical block group; the bitmap spaces and the inode table space in the first block group of the flex_bg are expanded to include the bitmaps and inode tables of all other block groups in the flex_bg. For example, if the flex_bg size is 4, then group 0 will contain (in order) the superblock, group descriptors, data block bitmaps for groups 0-3, inode bitmaps for groups 0-3, inode tables for groups 0-3, and the remaining space in group 0 is for file data. The effect of this is to group the block group metadata close together for faster loading, and to enable large files to be continuous on disk. Backup copies of the superblock and group descriptors are always at the beginning of block groups, even if flex_bg is enabled. The number of block groups that make up a flex_bg is given by 2 ^ <code>sb.s_log_groups_per_flex</code>.</p> <p>\u4eceext4\u5f00\u59cb\uff0c\u6709\u4e00\u4e2a\u65b0\u7279\u6027\u53eb\u505aflexible block groups\uff08flex_bg\uff09\u3002\u5728flex_bg\u4e2d\uff0c\u51e0\u4e2a\u5757\u7ec4\u4f5c\u4e3a\u4e00\u4e2a\u903b\u8f91\u5757\u7ec4\u8fde\u63a5\u5728\u4e00\u8d77\uff1b\u6269\u5c55flex_ bg\u7684\u7b2c\u4e00\u5757\u7ec4\u4e2d\u7684\u4f4d\u56fe\u7a7a\u95f4\u548cinode\u8868\u7a7a\u95f4\uff0c\u4ee5\u5305\u62ecflex_bg\u3002\u4f8b\u5982\uff0c\u5982\u679cflex_bg\u5927\u5c0f\u4e3a4\uff0c\u5219\u7ec40\u5c06\u5305\u542b\uff08\u6309\u987a\u5e8f\uff09\u8d85\u7ea7\u5757\u3001\u7ec4\u63cf\u8ff0\u7b26\u3001\u7ec40-3\u7684\u6570\u636e\u5757\u4f4d\u56fe\u3001\u7ec40-30\u7684inode\u4f4d\u56fe\u3001\u7ec410-3\u7684inode\u8868\uff0c\u7ec40\u4e2d\u7684\u5269\u4f59\u7a7a\u95f4\u7528\u4e8e\u6587\u4ef6\u6570\u636e\u3002\u8fd9\u6837\u505a\u7684\u6548\u679c\u662f\u5c06\u5757\u7ec4\u5143\u6570\u636e\u5206\u7ec4\u5728\u4e00\u8d77\uff0c\u4ee5\u4fbf\u66f4\u5feb\u5730\u52a0\u8f7d\uff0c\u5e76\u4f7f\u5927\u578b\u6587\u4ef6\u80fd\u591f\u5728\u78c1\u76d8\u4e0a\u8fde\u7eed\u3002\u8d85\u7ea7\u5757\u548c\u7ec4\u63cf\u8ff0\u7b26\u7684\u5907\u4efd\u526f\u672c\u59cb\u7ec8\u4f4d\u4e8e\u5757\u7ec4\u7684\u5f00\u5934\uff0c\u5373\u4f7f\u542f\u7528\u4e86flex_bg\u3002\u7ec4\u6210flex_bg\u7684\u5757\u7ec4\u7684\u6570\u91cf\u75312^sb.s_log_groups_per_flex\u7ed9\u51fa\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#24-meta-block-groups","title":"2.4 Meta Block Groups","text":"<p>Without the option META_BG, for safety concerns, all block group descriptors copies are kept in the first block group. Given the default 128MiB(2^27 bytes) block group size and 64-byte group descriptors, ext4 can have at most 2^27/64 = 2^21 block groups. This limits the entire filesystem size to 2^21 * 2^27 = 2^48bytes or 256TiB.</p> <p>\u5982\u679c\u6ca1\u6709\u9009\u9879META_BG\uff0c\u51fa\u4e8e\u5b89\u5168\u8003\u8651\uff0c\u6240\u6709\u5757\u7ec4\u63cf\u8ff0\u7b26\u526f\u672c\u90fd\u4fdd\u5b58\u5728\u7b2c\u4e00\u4e2a\u5757\u7ec4\u4e2d\u3002\u7ed9\u5b9a\u9ed8\u8ba4128MiB\uff082^27\u5b57\u8282\uff09\u5757\u7ec4\u5927\u5c0f\u548c64\u5b57\u8282\u7ec4\u63cf\u8ff0\u7b26\uff0cext4\u6700\u591a\u53ef\u4ee5\u67092^27/64=2^21\u4e2a\u5757\u7ec4\u3002\u8fd9\u5c06\u6574\u4e2a\u6587\u4ef6\u7cfb\u7edf\u5927\u5c0f\u9650\u5236\u4e3a2^21*2^27=2^48\u5b57\u8282\u6216256TiB\u3002</p> <p>The solution to this problem is to use the metablock group feature (META_BG), which is already in ext3 for all 2.6 releases. With the META_BG feature, ext4 filesystems are partitioned into many metablock groups. Each metablock group is a cluster of block groups whose group descriptor structures can be stored in a single disk block. For ext4 filesystems with 4 KB block size, a single metablock group partition includes 64 block groups, or 8 GiB of disk space. The metablock group feature moves the location of the group descriptors from the congested first block group of the whole filesystem into the first group of each metablock group itself. The backups are in the second and last group of each metablock group. This increases the 2^21 maximum block groups limit to the hard limit 2^32, allowing support for a 512PiB filesystem.</p> <p>\u8fd9\u4e2a\u95ee\u9898\u7684\u89e3\u51b3\u65b9\u6848\u662f\u4f7f\u7528\u5143\u5757\u7ec4\u7279\u6027\uff08META_BG\uff09\uff0c\u5b83\u5df2\u7ecf\u5728\u6240\u67092.6\u7248\u672c\u7684ext3\u4e2d\u3002\u901a\u8fc7META_BG\u7279\u6027\uff0cext4\u6587\u4ef6\u7cfb\u7edf\u88ab\u5212\u5206\u4e3a\u8bb8\u591a\u5143\u5757\u7ec4\u3002\u6bcf\u4e2a\u5143\u5757\u7ec4\u662f\u4e00\u7ec4\u5757\u7ec4\uff0c\u5176\u7ec4\u63cf\u8ff0\u7b26\u7ed3\u6784\u53ef\u4ee5\u5b58\u50a8\u5728\u5355\u4e2a\u78c1\u76d8\u5757\u4e2d\u3002\u5bf9\u4e8e\u5757\u5927\u5c0f\u4e3a4KB\u7684ext4\u6587\u4ef6\u7cfb\u7edf\uff0c\u5355\u4e2a\u5143\u5757\u7ec4\u5206\u533a\u5305\u62ec64\u4e2a\u5757\u7ec4\uff0c\u53738GB\u7684\u78c1\u76d8\u7a7a\u95f4\u3002\u5143\u5757\u7ec4\u7279\u5f81\u5c06\u7ec4\u63cf\u8ff0\u7b26\u7684\u4f4d\u7f6e\u4ece\u6574\u4e2a\u6587\u4ef6\u7cfb\u7edf\u7684\u62e5\u585e\u7684\u7b2c\u4e00\u5757\u7ec4\u79fb\u52a8\u5230\u6bcf\u4e2a\u5143\u5757\u7ec4\u672c\u8eab\u7684\u7b2c\u4e00\u7ec4\u3002\u5907\u4efd\u4f4d\u4e8e\u6bcf\u4e2a\u5143\u5757\u7ec4\u7684\u7b2c\u4e8c\u4e2a\u4e5f\u662f\u6700\u540e\u4e00\u4e2a\u7ec4\u4e2d\u3002\u8fd9\u5c062^21\u6700\u5927\u5757\u7ec4\u9650\u5236\u589e\u52a0\u5230\u786c\u9650\u52362^32\uff0c\u5141\u8bb8\u652f\u6301512PiB\u6587\u4ef6\u7cfb\u7edf\u3002</p> <p>The change in the filesystem format replaces the current scheme where the superblock is followed by a variable-length set of block group descriptors. Instead, the superblock and a single block group descriptor block is placed at the beginning of the first, second, and last block groups in a meta-block group. A meta-block group is a collection of block groups which can be described by a single block group descriptor block. Since the size of the block group descriptor structure is 32 bytes, a meta-block group contains 32 block groups for filesystems with a 1KB block size, and 128 block groups for filesystems with a 4KB blocksize. Filesystems can either be created using this new block group descriptor layout, or existing filesystems can be resized on-line, and the field s_first_meta_bg in the superblock will indicate the first block group using this new layout.</p> <p>\u6587\u4ef6\u7cfb\u7edf\u683c\u5f0f\u7684\u6539\u53d8\u53d6\u4ee3\u4e86\u5f53\u524d\u7684\u65b9\u6848\uff0c\u5176\u4e2d\u8d85\u7ea7\u5757\u540e\u9762\u8ddf\u7740\u4e00\u7ec4\u53ef\u53d8\u957f\u5ea6\u7684\u5757\u7ec4\u63cf\u8ff0\u7b26\u3002\u76f8\u53cd\uff0c\u8d85\u7ea7\u5757\u548c\u5355\u4e2a\u5757\u7ec4\u63cf\u8ff0\u7b26\u5757\u88ab\u653e\u7f6e\u5728\u5143\u5757\u7ec4\u4e2d\u7b2c\u4e00\u4e2a\u3001\u7b2c\u4e8c\u4e2a\u548c\u6700\u540e\u4e00\u4e2a\u5757\u7ec4\u7684\u5f00\u5934\u3002\u5143\u5757\u7ec4\u662f\u53ef\u4ee5\u7531\u5355\u4e2a\u5757\u7ec4\u63cf\u8ff0\u7b26\u5757\u63cf\u8ff0\u7684\u5757\u7ec4\u7684\u96c6\u5408\u3002\u7531\u4e8e\u5757\u7ec4\u63cf\u8ff0\u7b26\u7ed3\u6784\u7684\u5927\u5c0f\u4e3a32\u5b57\u8282\uff0c\u56e0\u6b64\u5143\u5757\u7ec4\u5305\u542b32\u4e2a\u5757\u7ec4\uff08\u7528\u4e8e1KB\u5757\u5927\u5c0f\u7684\u6587\u4ef6\u7cfb\u7edf\uff09\u548c128\u4e2a\u5757\u7ec4\uff0c\u7528\u4e8e4KB\u5757\u5927\u5c0f\u6587\u4ef6\u7cfb\u7edf\u3002\u53ef\u4ee5\u4f7f\u7528\u6b64\u65b0\u7684\u5757\u7ec4\u63cf\u8ff0\u7b26\u5e03\u5c40\u521b\u5efa\u6587\u4ef6\u7cfb\u7edf\uff0c\u4e5f\u53ef\u4ee5\u5728\u7ebf\u8c03\u6574\u73b0\u6709\u6587\u4ef6\u7cfb\u7edf\u7684\u5927\u5c0f\uff0c\u8d85\u7ea7\u5757\u4e2d\u7684\u5b57\u6bb5s_first_meta_bg\u5c06\u6307\u793a\u4f7f\u7528\u6b64\u65b0\u5e03\u5c40\u7684\u7b2c\u4e00\u4e2a\u5757\u7ec4\u3002</p> <p>Please see an important note about <code>BLOCK_UNINIT</code> in the section about block and inode bitmaps.</p> <p>\u8bf7\u53c2\u9605\u5173\u4e8e\u5757\u548cinode\u4f4d\u56fe\u7684\u90e8\u5206\u4e2d\u6709\u5173<code>BLOCK_UNINIT</code>\u7684\u91cd\u8981\u8bf4\u660e\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#25-lazy-block-group-initialization","title":"2.5 Lazy Block Group Initialization","text":"<p>A new feature for ext4 are three block group descriptor flags that enable mkfs to skip initializing other parts of the block group metadata. Specifically, the INODE_UNINIT and BLOCK_UNINIT flags mean that the inode and block bitmaps for that group can be calculated and therefore the on-disk bitmap blocks are not initialized. This is generally the case for an empty block group or a block group containing only fixed-location block group metadata. The INODE_ZEROED flag means that the inode table has been initialized; mkfs will unset this flag and rely on the kernel to initialize the inode tables in the background.</p> <p>ext4\u7684\u4e00\u4e2a\u65b0\u7279\u6027\u662f\u4e09\u4e2a\u5757\u7ec4\u63cf\u8ff0\u7b26\u6807\u5fd7\uff0c\u4f7fmkfs\u80fd\u591f\u8df3\u8fc7\u521d\u59cb\u5316\u5757\u7ec4\u5143\u6570\u636e\u7684\u5176\u4ed6\u90e8\u5206\u3002\u5177\u4f53\u6765\u8bf4\uff0cINODE_UNINIT\u548cBLOCK_UNINIIT\u6807\u5fd7\u610f\u5473\u7740\u53ef\u4ee5\u8ba1\u7b97\u8be5\u7ec4\u7684INODE\u548c\u5757\u4f4d\u56fe\uff0c\u56e0\u6b64\u4e0d\u4f1a\u521d\u59cb\u5316\u78c1\u76d8\u4e0a\u7684\u4f4d\u56fe\u5757\u3002\u8fd9\u901a\u5e38\u9002\u7528\u4e8e\u7a7a\u5757\u7ec4\u6216\u4ec5\u5305\u542b\u56fa\u5b9a\u4f4d\u7f6e\u5757\u7ec4\u5143\u6570\u636e\u7684\u5757\u7ec4\u3002INODE_ZEROED\u6807\u5fd7\u8868\u793a\u7d22\u5f15\u8282\u70b9\u8868\u5df2\u521d\u59cb\u5316\uff1bmkfs\u5c06\u53d6\u6d88\u8bbe\u7f6e\u6b64\u6807\u5fd7\uff0c\u5e76\u4f9d\u8d56\u5185\u6838\u5728\u540e\u53f0\u521d\u59cb\u5316inode\u8868\u3002</p> <p>By not writing zeroes to the bitmaps and inode table, mkfs time is reduced considerably. Note the feature flag is RO_COMPAT_GDT_CSUM, but the dumpe2fs output prints this as \u201cuninit_bg\u201d. They are the same thing.</p> <p>\u901a\u8fc7\u4e0d\u5bf9\u4f4d\u56fe\u548cinode\u8868\u5199\u5165\u96f6\uff0cmkfs\u65f6\u95f4\u5927\u5927\u51cf\u5c11\u3002\u6ce8\u610f\uff0c\u7279\u6027\u6807\u5fd7\u662fRO_COMPAT_GDT_CSUM\uff0c\u4f46dumpe2fs\u8f93\u51fa\u5c06\u5176\u6253\u5370\u4e3a\u201cuninit_bg\u201d\u3002\u5b83\u4eec\u662f\u4e00\u6837\u7684\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#26-special-inodes","title":"2.6 Special inodes","text":"<p>ext4 reserves some inode for special features, as follows:</p> <p>ext4\u4e3a\u7279\u6b8a\u529f\u80fd\u4fdd\u7559\u4e86\u4e00\u4e9binode\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> inode Number Purpose 0 Doesn\u2019t exist; there is no inode 0. 1 List of defective blocks. 2 Root directory. 3 User quota. 4 Group quota. 5 Boot loader. 6 Undelete directory. 7 Reserved group descriptors inode. (\u201cresize inode\u201d) 8 Journal inode. 9 The \u201cexclude\u201d inode, for snapshots(?) 10 Replica inode, used for some non-upstream feature? 11 Traditional first non-reserved inode. Usually this is the lost+found directory. See s_first_ino in the superblock. <p>Note that there are also some inodes allocated from non-reserved inode numbers for other filesystem features which are not referenced from standard directory hierarchy. These are generally reference from the superblock. They are:</p> <p>\u8bf7\u6ce8\u610f\uff0c\u8fd8\u6709\u4e00\u4e9b\u7d22\u5f15\u8282\u70b9\u662f\u4ece\u975e\u4fdd\u7559\u7d22\u5f15\u8282\u70b9\u7f16\u53f7\u5206\u914d\u7ed9\u5176\u4ed6\u6587\u4ef6\u7cfb\u7edf\u7279\u6027\u7684\uff0c\u8fd9\u4e9b\u7279\u6027\u4e0d\u662f\u4ece\u6807\u51c6\u76ee\u5f55\u5c42\u6b21\u7ed3\u6784\u4e2d\u5f15\u7528\u7684\u3002\u8fd9\u4e9b\u901a\u5e38\u6765\u81ea\u8d85\u7ea7\u5757\u3002\u4ed6\u4eec\u662f\uff1a</p> Superblock field Description s_lpf_ino Inode number of lost+found directory. s_prj_quota_inum Inode number of quota file tracking project quotas s_orphan_file_inum Inode number of file tracking orphan inodes."},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#27-block-and-inode-allocation-policy","title":"2.7 Block and Inode Allocation Policy","text":"<p>ext4 recognizes (better than ext3, anyway) that data locality is generally a desirably quality of a filesystem. On a spinning disk, keeping related blocks near each other reduces the amount of movement that the head actuator and disk must perform to access a data block, thus speeding up disk IO. On an SSD there of course are no moving parts, but locality can increase the size of each transfer request while reducing the total number of requests. This locality may also have the effect of concentrating writes on a single erase block, which can speed up file rewrites significantly. Therefore, it is useful to reduce fragmentation whenever possible.</p> <p>ext4\u8ba4\u8bc6\u5230\uff08\u65e0\u8bba\u5982\u4f55\u6bd4ext3\u66f4\u597d\uff09\u6570\u636e\u4f4d\u7f6e\u901a\u5e38\u662f\u6587\u4ef6\u7cfb\u7edf\u7684\u7406\u60f3\u8d28\u91cf\u3002\u5728\u65cb\u8f6c\u7684\u78c1\u76d8\u4e0a\uff0c\u4fdd\u6301\u76f8\u5173\u5757\u5f7c\u6b64\u9760\u8fd1\u53ef\u4ee5\u51cf\u5c11\u78c1\u5934\u9a71\u52a8\u5668\u548c\u78c1\u76d8\u8bbf\u95ee\u6570\u636e\u5757\u65f6\u5fc5\u987b\u6267\u884c\u7684\u79fb\u52a8\u91cf\uff0c\u4ece\u800c\u52a0\u5feb\u78c1\u76d8IO\u3002\u5728SSD\u4e0a\uff0c\u5f53\u7136\u6ca1\u6709\u79fb\u52a8\u90e8\u4ef6\uff0c\u4f46\u4f4d\u7f6e\u53ef\u4ee5\u589e\u52a0\u6bcf\u4e2a\u4f20\u8f93\u8bf7\u6c42\u7684\u5927\u5c0f\uff0c\u540c\u65f6\u51cf\u5c11\u8bf7\u6c42\u603b\u6570\u3002\u6b64\u4f4d\u7f6e\u8fd8\u53ef\u80fd\u4f1a\u5c06\u5199\u5165\u96c6\u4e2d\u5728\u5355\u4e2a\u64e6\u9664\u5757\u4e0a\uff0c\u4ece\u800c\u663e\u8457\u52a0\u5feb\u6587\u4ef6\u91cd\u5199\u901f\u5ea6\u3002\u56e0\u6b64\uff0c\u5c3d\u53ef\u80fd\u51cf\u5c11\u788e\u7247\u5316\u662f\u6709\u7528\u7684\u3002</p> <p>The first tool that ext4 uses to combat fragmentation is the multi-block allocator. When a file is first created, the block allocator speculatively allocates 8KiB of disk space to the file on the assumption that the space will get written soon. When the file is closed, the unused speculative allocations are of course freed, but if the speculation is correct (typically the case for full writes of small files) then the file data gets written out in a single multi-block extent. A second related trick that ext4 uses is delayed allocation. Under this scheme, when a file needs more blocks to absorb file writes, the filesystem defers deciding the exact placement on the disk until all the dirty buffers are being written out to disk. By not committing to a particular placement until it\u2019s absolutely necessary (the commit timeout is hit, or sync() is called, or the kernel runs out of memory), the hope is that the filesystem can make better location decisions.</p> <p>ext4\u7528\u6765\u5bf9\u6297\u788e\u7247\u7684\u7b2c\u4e00\u4e2a\u5de5\u5177\u662f\u591a\u5757\u5206\u914d\u5668\u3002\u5f53\u7b2c\u4e00\u6b21\u521b\u5efa\u6587\u4ef6\u65f6\uff0c\u5757\u5206\u914d\u5668\u4f1a\u63a8\u6d4b\u4e3a\u8be5\u6587\u4ef6\u5206\u914d8KiB\u7684\u78c1\u76d8\u7a7a\u95f4\uff0c\u524d\u63d0\u662f\u8be5\u7a7a\u95f4\u5f88\u5feb\u5c31\u4f1a\u88ab\u5199\u5165\u3002\u5f53\u6587\u4ef6\u5173\u95ed\u65f6\uff0c\u672a\u4f7f\u7528\u7684\u63a8\u6d4b\u5206\u914d\u5f53\u7136\u4f1a\u88ab\u91ca\u653e\uff0c\u4f46\u5982\u679c\u63a8\u6d4b\u6b63\u786e\uff08\u901a\u5e38\u662f\u5bf9\u5c0f\u6587\u4ef6\u7684\u5b8c\u5168\u5199\u5165\uff09\uff0c\u5219\u6587\u4ef6\u6570\u636e\u5c06\u5728\u5355\u4e2a\u591a\u5757\u6570\u636e\u5757\u4e2d\u88ab\u5199\u5165\u3002ext4\u4f7f\u7528\u7684\u7b2c\u4e8c\u4e2a\u76f8\u5173\u6280\u5de7\u662f\u5ef6\u8fdf\u5206\u914d\u3002\u5728\u8fd9\u79cd\u65b9\u6848\u4e0b\uff0c\u5f53\u6587\u4ef6\u9700\u8981\u66f4\u591a\u7684\u5757\u6765\u5438\u6536\u6587\u4ef6\u5199\u5165\u65f6\uff0c\u6587\u4ef6\u7cfb\u7edf\u4f1a\u63a8\u8fdf\u51b3\u5b9a\u78c1\u76d8\u4e0a\u7684\u786e\u5207\u4f4d\u7f6e\uff0c\u76f4\u5230\u6240\u6709\u810f\u7f13\u51b2\u533a\u90fd\u88ab\u5199\u5165\u78c1\u76d8\u3002\u901a\u8fc7\u5728\u7edd\u5bf9\u5fc5\u8981\u65f6\u624d\u63d0\u4ea4\u5230\u7279\u5b9a\u4f4d\u7f6e\uff08\u63d0\u4ea4\u8d85\u65f6\u88ab\u547d\u4e2d\uff0c\u6216\u8005sync\uff08\uff09\u88ab\u8c03\u7528\uff0c\u6216\u8005\u5185\u6838\u5185\u5b58\u8017\u5c3d\uff09\uff0c\u5e0c\u671b\u6587\u4ef6\u7cfb\u7edf\u80fd\u591f\u505a\u51fa\u66f4\u597d\u7684\u4f4d\u7f6e\u51b3\u5b9a\u3002</p> <p>The third trick that ext4 (and ext3) uses is that it tries to keep a file\u2019s data blocks in the same block group as its inode. This cuts down on the seek penalty when the filesystem first has to read a file\u2019s inode to learn where the file\u2019s data blocks live and then seek over to the file\u2019s data blocks to begin I/O operations.</p> <p>ext4\uff08\u548cext3\uff09\u4f7f\u7528\u7684\u7b2c\u4e09\u4e2a\u6280\u5de7\u662f\uff0c\u5b83\u8bd5\u56fe\u5c06\u6587\u4ef6\u7684\u6570\u636e\u5757\u4e0e\u5176inode\u4fdd\u6301\u5728\u540c\u4e00\u5757\u7ec4\u4e2d\u3002\u5f53\u6587\u4ef6\u7cfb\u7edf\u9996\u5148\u5fc5\u987b\u8bfb\u53d6\u6587\u4ef6\u7684inode\u4ee5\u4e86\u89e3\u6587\u4ef6\u7684\u6570\u636e\u5757\u6240\u5728\u4f4d\u7f6e\uff0c\u7136\u540e\u67e5\u627e\u5230\u6587\u4ef6\u7684\u6570\u636e\u6570\u636e\u5757\u4ee5\u5f00\u59cbI/O\u64cd\u4f5c\u65f6\uff0c\u8fd9\u6837\u53ef\u4ee5\u51cf\u5c11\u67e5\u627e\u4ee3\u4ef7\u3002</p> <p>The fourth trick is that all the inodes in a directory are placed in the same block group as the directory, when feasible. The working assumption here is that all the files in a directory might be related, therefore it is useful to try to keep them all together.</p> <p>\u7b2c\u56db\u4e2a\u6280\u5de7\u662f\uff0c\u5728\u53ef\u884c\u7684\u60c5\u51b5\u4e0b\uff0c\u76ee\u5f55\u4e2d\u7684\u6240\u6709\u7d22\u5f15\u8282\u70b9\u90fd\u653e\u5728\u4e0e\u76ee\u5f55\u76f8\u540c\u7684\u5757\u7ec4\u4e2d\u3002\u8fd9\u91cc\u7684\u5de5\u4f5c\u5047\u8bbe\u662f\uff0c\u4e00\u4e2a\u76ee\u5f55\u4e2d\u7684\u6240\u6709\u6587\u4ef6\u90fd\u53ef\u80fd\u662f\u76f8\u5173\u7684\uff0c\u56e0\u6b64\u5c06\u5b83\u4eec\u653e\u5728\u4e00\u8d77\u662f\u5f88\u6709\u7528\u7684\u3002</p> <p>The fifth trick is that the disk volume is cut up into 128MB block groups; these mini-containers are used as outlined above to try to maintain data locality. However, there is a deliberate quirk \u2013 when a directory is created in the root directory, the inode allocator scans the block groups and puts that directory into the least heavily loaded block group that it can find. This encourages directories to spread out over a disk; as the top-level directory/file blobs fill up one block group, the allocators simply move on to the next block group. Allegedly this scheme evens out the loading on the block groups, though the author suspects that the directories which are so unlucky as to land towards the end of a spinning drive get a raw deal performance-wise.</p> <p>\u7b2c\u4e94\u4e2a\u6280\u5de7\u662f\u5c06\u78c1\u76d8\u5377\u5206\u6210128MB\u7684\u5757\u7ec4\uff1b\u5982\u4e0a\u6240\u8ff0\uff0c\u4f7f\u7528\u8fd9\u4e9b\u5c0f\u578b\u5bb9\u5668\u6765\u7ef4\u62a4\u6570\u636e\u4f4d\u7f6e\u3002\u7136\u800c\uff0c\u6709\u4e00\u4e2a\u6545\u610f\u7684\u602a\u7656\u2014\u2014\u5f53\u5728\u6839\u76ee\u5f55\u4e2d\u521b\u5efa\u76ee\u5f55\u65f6\uff0cinode\u5206\u914d\u5668\u4f1a\u626b\u63cf\u5757\u7ec4\uff0c\u5e76\u5c06\u8be5\u76ee\u5f55\u653e\u5165\u5b83\u80fd\u627e\u5230\u7684\u8d1f\u8f7d\u6700\u5c11\u7684\u5757\u7ec4\u4e2d\u3002\u8fd9\u9f13\u52b1\u76ee\u5f55\u5728\u78c1\u76d8\u4e0a\u5206\u6563\uff1b\u5f53\u9876\u7ea7\u76ee\u5f55/\u6587\u4ef6blob\u586b\u6ee1\u4e00\u4e2a\u5757\u7ec4\u65f6\uff0c\u5206\u914d\u5668\u53ea\u9700\u79fb\u52a8\u5230\u4e0b\u4e00\u5757\u7ec4\u3002\u636e\u79f0\uff0c\u8fd9\u4e00\u65b9\u6848\u5747\u8861\u4e86\u5757\u7ec4\u7684\u8d1f\u8f7d\uff0c\u5c3d\u7ba1\u4f5c\u8005\u6000\u7591\uff0c\u5728\u65cb\u8f6c\u9a71\u52a8\u5668\u5373\u5c06\u7ed3\u675f\u65f6\u4e0d\u5e78\u7740\u9646\u7684\u76ee\u5f55\u5728\u6027\u80fd\u65b9\u9762\u8868\u73b0\u4e0d\u4f73\u3002</p> <p>Of course if all of these mechanisms fail, one can always use e4defrag to defragment files.</p> <p>\u5f53\u7136\uff0c\u5982\u679c\u6240\u6709\u8fd9\u4e9b\u673a\u5236\u90fd\u5931\u8d25\u4e86\uff0c\u53ef\u4ee5\u59cb\u7ec8\u4f7f\u7528e4defrag\u5bf9\u6587\u4ef6\u8fdb\u884c\u788e\u7247\u6574\u7406\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#28-checksums","title":"2.8 Checksums","text":"<p>Starting in early 2012, metadata checksums were added to all major ext4 and jbd2 data structures. The associated feature flag is metadata_csum. The desired checksum algorithm is indicated in the superblock, though as of October 2012 the only supported algorithm is crc32c. Some data structures did not have space to fit a full 32-bit checksum, so only the lower 16 bits are stored. Enabling the 64bit feature increases the data structure size so that full 32-bit checksums can be stored for many data structures. However, existing 32-bit filesystems cannot be extended to enable 64bit mode, at least not without the experimental resize2fs patches to do so.</p> <p>\u4ece2012\u5e74\u521d\u5f00\u59cb\uff0c\u5143\u6570\u636e\u6821\u9a8c\u548c\u88ab\u6dfb\u52a0\u5230\u6240\u6709\u4e3b\u8981\u7684ext4\u548cjbd2\u6570\u636e\u7ed3\u6784\u4e2d\u3002\u76f8\u5173\u7684\u7279\u5f81\u6807\u5fd7\u662fmetadata_csum\u3002\u6240\u9700\u7684\u6821\u9a8c\u548c\u7b97\u6cd5\u663e\u793a\u5728\u8d85\u7ea7\u5757\u4e2d\uff0c\u4f46\u622a\u81f32012\u5e7410\u6708\uff0c\u552f\u4e00\u652f\u6301\u7684\u7b97\u6cd5\u662fcrc32c\u3002\u67d0\u4e9b\u6570\u636e\u7ed3\u6784\u6ca1\u6709\u7a7a\u95f4\u5bb9\u7eb3\u5b8c\u6574\u768432\u4f4d\u6821\u9a8c\u548c\uff0c\u56e0\u6b64\u53ea\u5b58\u50a8\u8f83\u4f4e\u768416\u4f4d\u3002\u542f\u752864\u4f4d\u529f\u80fd\u4f1a\u589e\u52a0\u6570\u636e\u7ed3\u6784\u7684\u5927\u5c0f\uff0c\u4ece\u800c\u53ef\u4ee5\u4e3a\u8bb8\u591a\u6570\u636e\u7ed3\u6784\u5b58\u50a8\u5b8c\u6574\u768432\u4f4d\u6821\u9a8c\u548c\u3002\u7136\u800c\uff0c\u73b0\u6709\u768432\u4f4d\u6587\u4ef6\u7cfb\u7edf\u65e0\u6cd5\u6269\u5c55\u5230\u542f\u752864\u4f4d\u6a21\u5f0f\uff0c\u81f3\u5c11\u5728\u6ca1\u6709\u5b9e\u9a8c\u6027\u7684resize2fs\u8865\u4e01\u7684\u60c5\u51b5\u4e0b\u662f\u5982\u6b64\u3002</p> <p>Existing filesystems can have checksumming added by running <code>tune2fs -O metadata_csum</code> against the underlying device. If tune2fs encounters directory blocks that lack sufficient empty space to add a checksum, it will request that you run <code>e2fsck -D</code> to have the directories rebuilt with checksums. This has the added benefit of removing slack space from the directory files and rebalancing the htree indexes. If you ignore this step, your directories will not be protected by a checksum!</p> <p>\u73b0\u6709\u6587\u4ef6\u7cfb\u7edf\u53ef\u4ee5\u901a\u8fc7\u5bf9\u5e95\u5c42\u8bbe\u5907\u8fd0\u884c<code>tune2fs-O metadata_csum</code>\u6765\u6dfb\u52a0\u6821\u9a8c\u548c\u3002\u5982\u679ctune2fs\u9047\u5230\u7f3a\u5c11\u8db3\u591f\u7684\u7a7a\u767d\u7a7a\u95f4\u6765\u6dfb\u52a0\u6821\u9a8c\u548c\u7684\u76ee\u5f55\u5757\uff0c\u5b83\u5c06\u8bf7\u6c42\u60a8\u8fd0\u884c<code>e2fsck-D</code>\u4ee5\u4f7f\u7528\u6821\u9a8c\u548c\u91cd\u5efa\u76ee\u5f55\u3002\u8fd9\u8fd8\u6709\u4e00\u4e2a\u989d\u5916\u7684\u597d\u5904\uff0c\u5373\u4ece\u76ee\u5f55\u6587\u4ef6\u4e2d\u5220\u9664\u7a7a\u95f2\u7a7a\u95f4\u5e76\u91cd\u65b0\u5e73\u8861htree\u7d22\u5f15\u3002\u5982\u679c\u5ffd\u7565\u6b64\u6b65\u9aa4\uff0c\u60a8\u7684\u76ee\u5f55\u5c06\u4e0d\u4f1a\u53d7\u5230\u6821\u9a8c\u548c\u7684\u4fdd\u62a4\uff01</p> <p>The following table describes the data elements that go into each type of checksum. The checksum function is whatever the superblock describes (crc32c as of October 2013) unless noted otherwise.</p> Metadata Length Ingredients Superblock __le32 The entire superblock up to the checksum field. The UUID lives inside the superblock. MMP __le32 UUID + the entire MMP block up to the checksum field. Extended Attributes __le32 UUID + the entire extended attribute block. The checksum field is set to zero. Directory Entries __le32 UUID + inode number + inode generation + the directory block up to the fake entry enclosing the checksum field. HTREE Nodes __le32 UUID + inode number + inode generation + all valid extents + HTREE tail. The checksum field is set to zero. Extents __le32 UUID + inode number + inode generation + the entire extent block up to the checksum field. Bitmaps __le32 or __le16 UUID + the entire bitmap. Checksums are stored in the group descriptor, and truncated if the group descriptor size is 32 bytes (i.e. ^64bit) Inodes __le32 UUID + inode number + inode generation + the entire inode. The checksum field is set to zero. Each inode has its own checksum. Group Descriptors __le16 If metadata_csum, then UUID + group number + the entire descriptor; else if gdt_csum, then crc16(UUID + group number + the entire descriptor). In all cases, only the lower 16 bits are stored. <p>\u4e0b\u8868\u63cf\u8ff0\u4e86\u8fdb\u5165\u6bcf\u79cd\u7c7b\u578b\u6821\u9a8c\u548c\u7684\u6570\u636e\u5143\u7d20\u3002\u9664\u975e\u53e6\u6709\u8bf4\u660e\uff0c\u5426\u5219\u6821\u9a8c\u548c\u51fd\u6570\u662f\u8d85\u7ea7\u5757\u6240\u63cf\u8ff0\u7684\uff08\u622a\u81f32013\u5e7410\u6708\u7684crc32c\uff09\u3002</p> \u5143\u6570\u636e \u957f\u5ea6 \u6210\u5206 \u8d85\u7ea7\u5757 __le32 \u76f4\u5230\u6821\u9a8c\u548c\u5b57\u6bb5\u7684\u6574\u4e2a\u8d85\u7ea7\u5757\u3002UUID\u4f4d\u4e8e\u8d85\u7ea7\u5757\u5185 MMP __le32 UUID+\u6574\u4e2aMMP\u5757\uff0c\u76f4\u5230\u6821\u9a8c\u548c\u5b57\u6bb5 \u6269\u5c55\u5c5e\u6027 __le32 UUID+\u6574\u4e2a\u6269\u5c55\u5c5e\u6027\u5757\u3002\u6821\u9a8c\u548c\u5b57\u6bb5\u8bbe\u7f6e\u4e3a\u96f6 \u76ee\u5f55\u6761\u76ee __le32 UUID+\u7d22\u5f15\u8282\u70b9\u7f16\u53f7+\u7d22\u5f15\u8282\u70b9\u751f\u6210+\u76f4\u5230\u5305\u542b\u6821\u9a8c\u548c\u5b57\u6bb5\u7684\u5047\u6761\u76ee\u7684\u76ee\u5f55\u5757 HTREE\u8282\u70b9 __le32 UUID+\u7d22\u5f15\u8282\u70b9\u7f16\u53f7+\u7d22\u5f15\u8282\u70b9\u751f\u6210+\u6240\u6709\u6709\u6548\u6570\u636e\u5757+HTREE\u5c3e\u90e8\u3002\u6821\u9a8c\u548c\u5b57\u6bb5\u8bbe\u7f6e\u4e3a\u96f6 \u533a\u6bb5 __le32 UUID+\u7d22\u5f15\u8282\u70b9\u7f16\u53f7+\u7d22\u5f15\u8282\u70b9\u751f\u6210+\u6574\u4e2a\u533a\u6bb5\u5757\uff0c\u76f4\u5230\u6821\u9a8c\u548c\u5b57\u6bb5 \u4f4d\u56fe __le32\u6216__le16 UUID+\u6574\u4e2a\u4f4d\u56fe\u3002\u6821\u9a8c\u548c\u5b58\u50a8\u5728\u7ec4\u63cf\u8ff0\u7b26\u4e2d\uff0c\u5982\u679c\u7ec4\u63cf\u8ff0\u7b26\u5927\u5c0f\u4e3a32\u5b57\u8282\uff08\u5373^64\u4f4d\uff09\uff0c\u6821\u9a8c\u548c\u5c06\u88ab\u622a\u65ad \u7d22\u5f15\u8282\u70b9 __le32 UUID+\u7d22\u5f15\u8282\u70b9\u7f16\u53f7+\u7d22\u5f15\u8282\u70b9\u751f\u6210+\u6574\u4e2a\u7d22\u5f15\u8282\u70b9\u3002\u6821\u9a8c\u548c\u5b57\u6bb5\u8bbe\u7f6e\u4e3a\u96f6\u3002\u6bcf\u4e2ainode\u90fd\u6709\u81ea\u5df1\u7684\u6821\u9a8c\u548c \u7ec4\u63cf\u8ff0\u7b26 __le16 \u5982\u679cmetadata_csum\uff0c\u5219UUID+\u7ec4\u7f16\u53f7+\u6574\u4e2a\u63cf\u8ff0\u7b26\uff1b\u5426\u5219\uff0c\u5982\u679cgdt_csum\uff0c\u5219\u4e3acrc16\uff08UUID+\u7ec4\u53f7+\u6574\u4e2a\u63cf\u8ff0\u7b26\uff09\u3002\u5728\u6240\u6709\u60c5\u51b5\u4e0b\uff0c\u4ec5\u5b58\u50a8\u8f83\u4f4e\u768416\u4f4d"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#29-bigalloc","title":"2.9 Bigalloc","text":"<p>At the moment, the default size of a block is 4KiB, which is a commonly supported page size on most MMU-capable hardware. This is fortunate, as ext4 code is not prepared to handle the case where the block size exceeds the page size. However, for a filesystem of mostly huge files, it is desirable to be able to allocate disk blocks in units of multiple blocks to reduce both fragmentation and metadata overhead. The bigalloc feature provides exactly this ability.</p> <p>\u76ee\u524d\uff0c\u5757\u7684\u9ed8\u8ba4\u5927\u5c0f\u662f4KiB\uff0c\u8fd9\u662f\u5927\u591a\u6570\u652f\u6301MMU\u7684\u786c\u4ef6\u4e0a\u901a\u5e38\u652f\u6301\u7684\u9875\u9762\u5927\u5c0f\u3002\u8fd9\u662f\u5e78\u8fd0\u7684\uff0c\u56e0\u4e3aext4\u4ee3\u7801\u4e0d\u51c6\u5907\u5904\u7406\u5757\u5927\u5c0f\u8d85\u8fc7\u9875\u9762\u5927\u5c0f\u7684\u60c5\u51b5\u3002\u7136\u800c\uff0c\u5bf9\u4e8e\u5305\u542b\u5927\u91cf\u6587\u4ef6\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u6700\u597d\u80fd\u591f\u4ee5\u591a\u4e2a\u5757\u4e3a\u5355\u4f4d\u5206\u914d\u78c1\u76d8\u5757\uff0c\u4ee5\u51cf\u5c11\u788e\u7247\u548c\u5143\u6570\u636e\u5f00\u9500\u3002bigalalloc\u7279\u6027\u6b63\u597d\u63d0\u4f9b\u4e86\u8fd9\u79cd\u80fd\u529b\u3002</p> <p>The bigalloc feature (EXT4_FEATURE_RO_COMPAT_BIGALLOC) changes ext4 to use clustered allocation, so that each bit in the ext4 block allocation bitmap addresses a power of two number of blocks. For example, if the file system is mainly going to be storing large files in the 4-32 megabyte range, it might make sense to set a cluster size of 1 megabyte. This means that each bit in the block allocation bitmap now addresses 256 4k blocks. This shrinks the total size of the block allocation bitmaps for a 2T file system from 64 megabytes to 256 kilobytes. It also means that a block group addresses 32 gigabytes instead of 128 megabytes, also shrinking the amount of file system overhead for metadata.</p> <p>bigalalloc\u7279\u6027\uff08EXT4_feature_RO_COMPAT_bigalloc\uff09\u5c06EXT4\u66f4\u6539\u4e3a\u4f7f\u7528\u96c6\u7fa4\u5206\u914d\uff0c\u4ee5\u4fbfEXT4\u5757\u5206\u914d\u4f4d\u56fe\u4e2d\u7684\u6bcf\u4e2a\u4f4d\u90fd\u5bfb\u5740\u4e24\u4e2a\u5757\u7684\u5e42\u3002\u4f8b\u5982\uff0c\u5982\u679c\u6587\u4ef6\u7cfb\u7edf\u4e3b\u8981\u5b58\u50a84-32\u5146\u5b57\u8282\u8303\u56f4\u5185\u7684\u5927\u578b\u6587\u4ef6\uff0c\u90a3\u4e48\u5c06\u96c6\u7fa4\u5927\u5c0f\u8bbe\u7f6e\u4e3a1\u5146\u5b57\u8282\u53ef\u80fd\u662f\u6709\u610f\u4e49\u7684\u3002\u8fd9\u610f\u5473\u7740\u5757\u5206\u914d\u4f4d\u56fe\u4e2d\u7684\u6bcf\u4e2a\u6bd4\u7279\u73b0\u5728\u5bfb\u5740256\u4e2a4k\u5757\u3002\u8fd9\u5c062T\u6587\u4ef6\u7cfb\u7edf\u7684\u5757\u5206\u914d\u4f4d\u56fe\u7684\u603b\u5927\u5c0f\u4ece64 MB\u7f29\u51cf\u5230256 KB\u3002\u8fd9\u4e5f\u610f\u5473\u7740\u5757\u7ec4\u7684\u5730\u5740\u4e3a32\u5343\u5146\u5b57\u8282\uff0c\u800c\u4e0d\u662f128\u5146\u5b57\u8282\uff0c\u8fd9\u4e5f\u51cf\u5c11\u4e86\u5143\u6570\u636e\u7684\u6587\u4ef6\u7cfb\u7edf\u5f00\u9500\u3002</p> <p>The administrator can set a block cluster size at mkfs time (which is stored in the s_log_cluster_size field in the superblock); from then on, the block bitmaps track clusters, not individual blocks. This means that block groups can be several gigabytes in size (instead of just 128MiB); however, the minimum allocation unit becomes a cluster, not a block, even for directories. TaoBao had a patchset to extend the \u201cuse units of clusters instead of blocks\u201d to the extent tree, though it is not clear where those patches went\u2013 they eventually morphed into \u201cextent tree v2\u201d but that code has not landed as of May 2015.</p> <p>\u7ba1\u7406\u5458\u53ef\u4ee5\u5728mkfs\u65f6\u95f4\u8bbe\u7f6e\u5757\u96c6\u7fa4\u5927\u5c0f\uff08\u5b58\u50a8\u5728\u8d85\u7ea7\u5757\u7684s_log_cluster_size\u5b57\u6bb5\u4e2d\uff09\uff1b\u4ece\u90a3\u65f6\u8d77\uff0c\u5757\u4f4d\u56fe\u8ddf\u8e2a\u7c07\uff0c\u800c\u4e0d\u662f\u5355\u4e2a\u5757\u3002\u8fd9\u610f\u5473\u7740\u5757\u7ec4\u7684\u5927\u5c0f\u53ef\u4ee5\u662f\u51e0GB\uff08\u800c\u4e0d\u662f128MiB\uff09\uff1b\u7136\u800c\uff0c\u5373\u4f7f\u5bf9\u4e8e\u76ee\u5f55\uff0c\u6700\u5c0f\u5206\u914d\u5355\u5143\u4e5f\u53d8\u6210\u4e86\u96c6\u7fa4\uff0c\u800c\u4e0d\u662f\u5757\u3002TaoBao\u6709\u4e00\u4e2a\u8865\u4e01\u96c6\uff0c\u5c06\u201c\u4f7f\u7528\u96c6\u7fa4\u800c\u4e0d\u662f\u5757\u7684\u5355\u4f4d\u201d\u6269\u5c55\u5230\u8303\u56f4\u6811\uff0c\u5c3d\u7ba1\u4e0d\u6e05\u695a\u8fd9\u4e9b\u8865\u4e01\u53bb\u4e86\u54ea\u91cc\u2014\u2014\u5b83\u4eec\u6700\u7ec8\u6f14\u53d8\u6210\u4e86\u201c\u8303\u56f4\u6811v2\u201d\uff0c\u4f46\u622a\u81f32015\u5e745\u6708\uff0c\u8be5\u4ee3\u7801\u5c1a\u672a\u53d1\u5e03\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#210-inline-data","title":"2.10 Inline Data","text":"<p>The inline data feature was designed to handle the case that a file\u2019s data is so tiny that it readily fits inside the inode, which (theoretically) reduces disk block consumption and reduces seeks. If the file is smaller than 60 bytes, then the data are stored inline in <code>inode.i_block</code>. If the rest of the file would fit inside the extended attribute space, then it might be found as an extended attribute \u201csystem.data\u201d within the inode body (\u201cibody EA\u201d). This of course constrains the amount of extended attributes one can attach to an inode. If the data size increases beyond i_block + ibody EA, a regular block is allocated and the contents moved to that block.</p> <p>\u5185\u8054\u6570\u636e\u7279\u6027\u7684\u8bbe\u8ba1\u76ee\u7684\u662f\u5904\u7406\u6587\u4ef6\u6570\u636e\u592a\u5c0f\u4ee5\u81f3\u4e8e\u5f88\u5bb9\u6613\u653e\u5165inode\u7684\u60c5\u51b5\uff0c\u8fd9\uff08\u7406\u8bba\u4e0a\uff09\u51cf\u5c11\u4e86\u78c1\u76d8\u5757\u6d88\u8017\u5e76\u51cf\u5c11\u4e86\u67e5\u627e\u3002\u5982\u679c\u6587\u4ef6\u5c0f\u4e8e60\u4e2a\u5b57\u8282\uff0c\u5219\u6570\u636e\u4ee5\u5185\u8054\u65b9\u5f0f\u5b58\u50a8\u5728<code>inode.i_block</code>\u4e2d\u3002\u5982\u679c\u6587\u4ef6\u7684\u5176\u4f59\u90e8\u5206\u9002\u5408\u6269\u5c55\u5c5e\u6027\u7a7a\u95f4\uff0c\u5219\u53ef\u80fd\u4f1a\u5728inode\u4e3b\u4f53\uff08\u201cibody EA\u201d\uff09\u4e2d\u627e\u5230\u6269\u5c55\u5c5e\u6027\u201csystem.data\u201d\u3002\u5f53\u7136\uff0c\u8fd9\u9650\u5236\u4e86\u53ef\u4ee5\u9644\u52a0\u5230inode\u7684\u6269\u5c55\u5c5e\u6027\u7684\u6570\u91cf\u3002\u5982\u679c\u6570\u636e\u5927\u5c0f\u8d85\u8fc7i_block+ibody EA\uff0c\u5219\u4f1a\u5206\u914d\u4e00\u4e2a\u5e38\u89c4\u5757\uff0c\u5e76\u5c06\u5185\u5bb9\u79fb\u52a8\u5230\u8be5\u5757\u3002</p> <p>Pending a change to compact the extended attribute key used to store inline data, one ought to be able to store 160 bytes of data in a 256-byte inode (as of June 2015, when i_extra_isize is 28). Prior to that, the limit was 156 bytes due to inefficient use of inode space.</p> <p>\u5728\u66f4\u6539\u538b\u7f29\u7528\u4e8e\u5b58\u50a8\u5185\u8054\u6570\u636e\u7684\u6269\u5c55\u5c5e\u6027\u952e\u4e4b\u524d\uff0c\u5e94\u8be5\u80fd\u591f\u5728256\u5b57\u8282\u7684inode\u4e2d\u5b58\u50a8160\u5b57\u8282\u7684\u6570\u636e\uff08\u622a\u81f32015\u5e746\u6708\uff0ci_extra_isize\u4e3a28\uff09\u3002\u5728\u6b64\u4e4b\u524d\uff0c\u7531\u4e8einode\u7a7a\u95f4\u4f7f\u7528\u6548\u7387\u4f4e\u4e0b\uff0c\u9650\u5236\u4e3a156\u5b57\u8282\u3002</p> <p>The inline data feature requires the presence of an extended attribute for \u201csystem.data\u201d, even if the attribute value is zero length.</p> <p>\u5185\u8054\u6570\u636e\u7279\u6027\u8981\u6c42\u5b58\u5728\u201csystem.data\u201d\u7684\u6269\u5c55\u5c5e\u6027\uff0c\u5373\u4f7f\u5c5e\u6027\u503c\u957f\u5ea6\u4e3a\u96f6\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#2101-inline-directories","title":"2.10.1 Inline Directories","text":"<p>The first four bytes of i_block are the inode number of the parent directory. Following that is a 56-byte space for an array of directory entries; see <code>struct ext4_dir_entry</code>. If there is a \u201csystem.data\u201d attribute in the inode body, the EA value is an array of <code>struct ext4_dir_entry</code> as well. Note that for inline directories, the i_block and EA space are treated as separate dirent blocks; directory entries cannot span the two.</p> <p>i_block\u7684\u524d\u56db\u4e2a\u5b57\u8282\u662f\u7236\u76ee\u5f55\u7684\u7d22\u5f15\u8282\u70b9\u53f7\u3002\u63a5\u4e0b\u6765\u662f\u4e00\u4e2a56\u5b57\u8282\u7684\u76ee\u5f55\u6761\u76ee\u6570\u7ec4\u7a7a\u95f4\uff1b\u8bf7\u53c2\u89c1<code>struct ext4_dir_entry</code>\u3002\u5982\u679cinode\u4e3b\u4f53\u4e2d\u6709\u201csystem.data\u201d\u5c5e\u6027\uff0c\u5219EA\u503c\u4e5f\u662f<code>structext4_dir_entry</code>\u6570\u7ec4\u3002\u6ce8\u610f\uff0c\u5bf9\u4e8e\u5185\u8054\u76ee\u5f55\uff0ci_block\u548cEA\u7a7a\u95f4\u88ab\u89c6\u4e3a\u5355\u72ec\u7684\u76ee\u5f55\u5757\uff1b\u76ee\u5f55\u6761\u76ee\u4e0d\u80fd\u8de8\u8d8a\u4e24\u8005\u3002</p> <p>Inline directory entries are not checksummed, as the inode checksum should protect all inline data contents.</p> <p>\u5185\u8054\u76ee\u5f55\u6761\u76ee\u4e0d\u8fdb\u884c\u6821\u9a8c\u548c\uff0c\u56e0\u4e3ainode\u6821\u9a8c\u548c\u5e94\u4fdd\u62a4\u6240\u6709\u5185\u8054\u6570\u636e\u5185\u5bb9\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#211-large-extended-attribute-values","title":"2.11 Large Extended Attribute Values","text":"<p>To enable ext4 to store extended attribute values that do not fit in the inode or in the single extended attribute block attached to an inode, the EA_INODE feature allows us to store the value in the data blocks of a regular file inode. This \u201cEA inode\u201d is linked only from the extended attribute name index and must not appear in a directory entry. The inode\u2019s i_atime field is used to store a checksum of the xattr value; and i_ctime/i_version store a 64-bit reference count, which enables sharing of large xattr values between multiple owning inodes. For backward compatibility with older versions of this feature, the i_mtime/i_generation may store a back-reference to the inode number and i_generation of the one owning inode (in cases where the EA inode is not referenced by multiple inodes) to verify that the EA inode is the correct one being accessed.</p> <p>\u4e3a\u4e86\u4f7fext4\u80fd\u591f\u5b58\u50a8\u4e0d\u9002\u5408inode\u6216\u9644\u52a0\u5230inode\u7684\u5355\u4e2a\u6269\u5c55\u5c5e\u6027\u5757\u7684\u6269\u5c55\u5c5e\u6027\u503c\uff0cEA_inode\u7279\u6027\u5141\u8bb8\u6211\u4eec\u5c06\u503c\u5b58\u50a8\u5728\u5e38\u89c4\u6587\u4ef6inode\u7684\u6570\u636e\u5757\u4e2d\u3002\u6b64\u201cEA inode\u201d\u4ec5\u4ece\u6269\u5c55\u5c5e\u6027\u540d\u79f0\u7d22\u5f15\u94fe\u63a5\uff0c\u4e0d\u5f97\u51fa\u73b0\u5728\u76ee\u5f55\u6761\u76ee\u4e2d\u3002inode\u7684i_atime\u5b57\u6bb5\u7528\u4e8e\u5b58\u50a8xattr\u503c\u7684\u6821\u9a8c\u548c\uff1b\u548ci_ctime/iversion\u5b58\u50a8\u4e00\u4e2a64\u4f4d\u7684\u5f15\u7528\u8ba1\u6570\uff0c\u8fd9\u5141\u8bb8\u5728\u591a\u4e2a\u62e5\u6709\u7684inode\u4e4b\u95f4\u5171\u4eab\u5927\u578bxattr\u503c\u3002\u4e3a\u4e86\u4e0e\u6b64\u529f\u80fd\u7684\u65e7\u7248\u672c\u5411\u540e\u517c\u5bb9\uff0ci_mtime/i_generation\u53ef\u4ee5\u5b58\u50a8\u5bf9\u4e00\u4e2a\u62e5\u6709\u7684\u7d22\u5f15\u8282\u70b9\u7684\u7d22\u5f15\u8282\u70b9\u53f7\u548ci_generation\u7684\u53cd\u5411\u5f15\u7528\uff08\u5728\u591a\u4e2a\u7d22\u5f15\u8282\u70b9\u672a\u5f15\u7528EA\u7d22\u5f15\u8282\u70b9\u7684\u60c5\u51b5\u4e0b\uff09\uff0c\u4ee5\u9a8c\u8bc1EA\u7d22\u5f15\u8282\u70b9\u662f\u6b63\u786e\u7684\u88ab\u8bbf\u95ee\u7d22\u5f15\u8282\u70b9\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#212-verity-files","title":"2.12 Verity files","text":"<p>ext4 supports fs-verity, which is a filesystem feature that provides Merkle tree based hashing for individual readonly files. Most of fs-verity is common to all filesystems that support it; see Documentation/filesystems/fsverity.rst for the fs-verity documentation. However, the on-disk layout of the verity metadata is filesystem-specific. On ext4, the verity metadata is stored after the end of the file data itself, in the following format:</p> <p>ext4\u652f\u6301fsverity\uff0c\u8fd9\u662f\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\u7279\u6027\uff0c\u4e3a\u5355\u4e2a\u53ea\u8bfb\u6587\u4ef6\u63d0\u4f9b\u57fa\u4e8eMerkle\u6811\u7684\u54c8\u5e0c\u3002\u5927\u591a\u6570fs verity\u5bf9\u6240\u6709\u652f\u6301\u5b83\u7684\u6587\u4ef6\u7cfb\u7edf\u90fd\u662f\u901a\u7528\u7684\uff1b\u8bf7\u53c2\u89c1Documentation/filess/fsverity.rst\u6587\u6863\u3002\u7136\u800c\uff0cverity\u5143\u6570\u636e\u7684\u78c1\u76d8\u5e03\u5c40\u662f\u7279\u5b9a\u4e8e\u6587\u4ef6\u7cfb\u7edf\u7684\u3002\u5728ext4\u4e0a\uff0cverity\u5143\u6570\u636e\u5b58\u50a8\u5728\u6587\u4ef6\u6570\u636e\u672c\u8eab\u7ed3\u675f\u540e\uff0c\u683c\u5f0f\u5982\u4e0b\uff1a</p> <ul> <li>Zero-padding to the next 65536-byte boundary. This padding need not actually be allocated on-disk, i.e. it may be a hole.</li> <li>\u4e0b\u4e00\u4e2a65536\u5b57\u8282\u8fb9\u754c\u7684\u96f6\u586b\u5145\u3002\u8fd9\u4e2a\u586b\u5145\u5b9e\u9645\u4e0a\u4e0d\u9700\u8981\u5728\u78c1\u76d8\u4e0a\u5206\u914d\uff0c\u4e5f\u5c31\u662f\u8bf4\u5b83\u53ef\u80fd\u662f\u4e00\u4e2a\u6d1e\u3002</li> <li>The Merkle tree, as documented in Documentation/filesystems/fsverity.rst, with the tree levels stored in order from root to leaf, and the tree blocks within each level stored in their natural order.</li> <li>Merkle\u6811\uff0c\u5982Documentation/filess/fsverity.rst\u4e2d\u6240\u8ff0\uff0c\u6811\u7ea7\u522b\u6309\u4ece\u6839\u5230\u53f6\u7684\u987a\u5e8f\u5b58\u50a8\uff0c\u6bcf\u4e2a\u7ea7\u522b\u4e2d\u7684\u6811\u5757\u6309\u5176\u81ea\u7136\u987a\u5e8f\u5b58\u50a8\u3002</li> <li>Zero-padding to the next filesystem block boundary.</li> <li>\u96f6\u586b\u5145\u5230\u4e0b\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\u5757\u8fb9\u754c\u3002</li> <li>The verity descriptor, as documented in Documentation/filesystems/fsverity.rst, with optionally appended signature blob.</li> <li>verity\u63cf\u8ff0\u7b26\uff0c\u5982Documentation/filess/fsverity.rst\u4e2d\u6240\u8ff0\uff0c\u5e76\u53ef\u9009\u5730\u9644\u52a0\u7b7e\u540dblob\u3002</li> <li>Zero-padding to the next offset that is 4 bytes before a filesystem block boundary.</li> <li>\u96f6\u586b\u5145\u5230\u6587\u4ef6\u7cfb\u7edf\u5757\u8fb9\u754c\u524d4\u5b57\u8282\u7684\u4e0b\u4e00\u4e2a\u504f\u79fb\u91cf\u3002</li> <li>The size of the verity descriptor in bytes, as a 4-byte little endian integer.</li> <li>verity\u63cf\u8ff0\u7b26\u7684\u5927\u5c0f\uff08\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\uff09\uff0c\u4f5c\u4e3a4\u5b57\u8282\u7684\u5c0f\u7aef\u6574\u6570\u3002</li> </ul> <p>Verity inodes have EXT4_VERITY_FL set, and they must use extents, i.e. EXT4_EXTENTS_FL must be set and EXT4_INLINE_DATA_FL must be clear. They can have EXT4_ENCRYPT_FL set, in which case the verity metadata is encrypted as well as the data itself.</p> <p>Verity inode\u5df2\u8bbe\u7f6eEXT4_Verity_FL\uff0c\u5e76\u4e14\u5b83\u4eec\u5fc5\u987b\u4f7f\u7528\u8303\u56f4\uff0c\u5373\u5fc5\u987b\u8bbe\u7f6eEXT4_extents_FL\uff0c\u5e76\u4e14\u5fc5\u987b\u6e05\u9664EXT4_INLINE_DATA_FL\u3002\u5b83\u4eec\u53ef\u4ee5\u8bbe\u7f6eEXT4_ENCRYPT_FL\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u9a8c\u8bc1\u5143\u6570\u636e\u548c\u6570\u636e\u672c\u8eab\u90fd\u88ab\u52a0\u5bc6\u3002</p> <p>Verity files cannot have blocks allocated past the end of the verity metadata.</p> <p>Verity\u6587\u4ef6\u4e0d\u80fd\u5206\u914d\u8d85\u8fc7Verity\u5143\u6570\u636e\u672b\u5c3e\u7684\u5757\u3002</p> <p>Verity and DAX are not compatible and attempts to set both of these flags on a file will fail.</p> <p>Verity\u548cDAX\u4e0d\u517c\u5bb9\uff0c\u5c1d\u8bd5\u5728\u6587\u4ef6\u4e0a\u8bbe\u7f6e\u8fd9\u4e24\u4e2a\u6807\u5fd7\u5c06\u5931\u8d25\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#3-global-structures","title":"3 Global Structures","text":"<p>The filesystem is sharded into a number of block groups, each of which have static metadata at fixed locations.</p> <p>\u6587\u4ef6\u7cfb\u7edf\u88ab\u5206\u6210\u591a\u4e2a\u5757\u7ec4\uff0c\u6bcf\u4e2a\u5757\u7ec4\u5728\u56fa\u5b9a\u4f4d\u7f6e\u90fd\u6709\u9759\u6001\u5143\u6570\u636e\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#31-super-block","title":"3.1 Super Block","text":"<p>The superblock records various information about the enclosing filesystem, such as block counts, inode counts, supported features, maintenance information, and more.</p> <p>\u8d85\u7ea7\u5757\u8bb0\u5f55\u6709\u5173\u5c01\u95ed\u6587\u4ef6\u7cfb\u7edf\u7684\u5404\u79cd\u4fe1\u606f\uff0c\u5982\u5757\u8ba1\u6570\u3001\u7d22\u5f15\u8282\u70b9\u8ba1\u6570\u3001\u652f\u6301\u7684\u529f\u80fd\u3001\u7ef4\u62a4\u4fe1\u606f\u7b49\u3002</p> <p>If the sparse_super feature flag is set, redundant copies of the superblock and group descriptors are kept only in the groups whose group number is either 0 or a power of 3, 5, or 7. If the flag is not set, redundant copies are kept in all groups.</p> <p>\u5982\u679c\u8bbe\u7f6e\u4e86spare_super\u7279\u5f81\u6807\u5fd7\uff0c\u5219\u8d85\u7ea7\u5757\u548c\u7ec4\u63cf\u8ff0\u7b26\u7684\u5197\u4f59\u526f\u672c\u4ec5\u4fdd\u7559\u5728\u7ec4\u7f16\u53f7\u4e3a0\u62163\u30015\u62167\u7684\u5e42\u7684\u7ec4\u4e2d\u3002\u5982\u679c\u672a\u8bbe\u7f6e\u8be5\u6807\u5fd7\uff0c\u5219\u5728\u6240\u6709\u7ec4\u4e2d\u4fdd\u7559\u5197\u4f59\u526f\u672c\u3002</p> <p>The superblock checksum is calculated against the superblock structure, which includes the FS UUID.</p> <p>\u8d85\u7ea7\u5757\u6821\u9a8c\u548c\u662f\u6839\u636e\u8d85\u7ea7\u5757\u7ed3\u6784\uff08\u5305\u62ecFSUUID\uff09\u8ba1\u7b97\u7684\u3002</p> <p>The ext4 superblock is laid out as follows in <code>struct ext4_super_block</code>:</p> Offset Size Name Description 0x0 __le32 s_inodes_count Total inode count. 0x4 __le32 s_blocks_count_lo Total block count. 0x8 __le32 s_r_blocks_count_lo This number of blocks can only be allocated by the super-user. 0xC __le32 s_free_blocks_count_lo Free block count. 0x10 __le32 s_free_inodes_count Free inode count. 0x14 __le32 s_first_data_block First data block. This must be at least 1 for 1k-block filesystems and is typically 0 for all other block sizes. 0x18 __le32 s_log_block_size Block size is 2 ^ (10 + s_log_block_size). 0x1C __le32 s_log_cluster_size Cluster size is 2 ^ (10 + s_log_cluster_size) blocks if bigalloc is enabled. Otherwise s_log_cluster_size must equal s_log_block_size. 0x20 __le32 s_blocks_per_group Blocks per group. 0x24 __le32 s_clusters_per_group Clusters per group, if bigalloc is enabled. Otherwise s_clusters_per_group must equal s_blocks_per_group. 0x28 __le32 s_inodes_per_group Inodes per group. 0x2C __le32 s_mtime Mount time, in seconds since the epoch. 0x30 __le32 s_wtime Write time, in seconds since the epoch. 0x34 __le16 s_mnt_count Number of mounts since the last fsck. 0x36 __le16 s_max_mnt_count Number of mounts beyond which a fsck is needed. 0x38 __le16 s_magic Magic signature, 0xEF53 0x3A __le16 s_state File system state. See super_state for more info. 0x3C __le16 s_errors Behaviour when detecting errors. See super_errors for more info. 0x3E __le16 s_minor_rev_level Minor revision level. 0x40 __le32 s_lastcheck Time of last check, in seconds since the epoch. 0x44 __le32 s_checkinterval Maximum time between checks, in seconds. 0x48 __le32 s_creator_os Creator OS. See the table super_creator for more info. 0x4C __le32 s_rev_level Revision level. See the table super_revision for more info. 0x50 __le16 s_def_resuid Default uid for reserved blocks. 0x52 __le16 s_def_resgid Default gid for reserved blocks. These fields are for EXT4_DYNAMIC_REV superblocks only.Note: the difference between the compatible feature set and the incompatible feature set is that if there is a bit set in the incompatible feature set that the kernel doesn\u2019t know about, it should refuse to mount the filesystem.e2fsck\u2019s requirements are more strict; if it doesn\u2019t know about a feature in either the compatible or incompatible feature set, it must abort and not try to meddle with things it doesn\u2019t understand\u2026 0x54 __le32 s_first_ino First non-reserved inode. 0x58 __le16 s_inode_size Size of inode structure, in bytes. 0x5A __le16 s_block_group_nr Block group ## of this superblock. 0x5C __le32 s_feature_compat Compatible feature set flags. Kernel can still read/write this fs even if it doesn\u2019t understand a flag; fsck should not do that. See the super_compat table for more info. 0x60 __le32 s_feature_incompat Incompatible feature set. If the kernel or fsck doesn\u2019t understand one of these bits, it should stop. See the super_incompat table for more info. 0x64 __le32 s_feature_ro_compat Readonly-compatible feature set. If the kernel doesn\u2019t understand one of these bits, it can still mount read-only. See the super_rocompat table for more info. 0x68 __u8 s_uuid[16] 128-bit UUID for volume. 0x78 char s_volume_name[16] Volume label. 0x88 char s_last_mounted[64] Directory where filesystem was last mounted. 0xC8 __le32 s_algorithm_usage_bitmap For compression (Not used in e2fsprogs/Linux) Performance hints. Directory preallocation should only happen if the EXT4_FEATURE_COMPAT_DIR_PREALLOC flag is on. 0xCC __u8 s_prealloc_blocks #. of blocks to try to preallocate for \u2026 files? (Not used in e2fsprogs/Linux) 0xCD __u8 s_prealloc_dir_blocks #. of blocks to preallocate for directories. (Not used in e2fsprogs/Linux) 0xCE __le16 s_reserved_gdt_blocks Number of reserved GDT entries for future filesystem expansion. Journalling support is valid only if EXT4_FEATURE_COMPAT_HAS_JOURNAL is set. 0xD0 __u8 s_journal_uuid[16] UUID of journal superblock 0xE0 __le32 s_journal_inum inode number of journal file. 0xE4 __le32 s_journal_dev Device number of journal file, if the external journal feature flag is set. 0xE8 __le32 s_last_orphan Start of list of orphaned inodes to delete. 0xEC __le32 s_hash_seed[4] HTREE hash seed. 0xFC __u8 s_def_hash_version Default hash algorithm to use for directory hashes. See super_def_hash for more info. 0xFD __u8 s_jnl_backup_type If this value is 0 or EXT3_JNL_BACKUP_BLOCKS (1), then the <code>s_jnl_blocks</code> field contains a duplicate copy of the inode\u2019s <code>i_block[]</code> array and <code>i_size</code>. 0xFE __le16 s_desc_size Size of group descriptors, in bytes, if the 64bit incompat feature flag is set. 0x100 __le32 s_default_mount_opts Default mount options. See the super_mountopts table for more info. 0x104 __le32 s_first_meta_bg First metablock block group, if the meta_bg feature is enabled. 0x108 __le32 s_mkfs_time When the filesystem was created, in seconds since the epoch. 0x10C __le32 s_jnl_blocks[17] Backup copy of the journal inode\u2019s <code>i_block[]</code> array in the first 15 elements and i_size_high and i_size in the 16th and 17th elements, respectively. 64bit support is valid only if EXT4_FEATURE_COMPAT_64BIT is set. 0x150 __le32 s_blocks_count_hi High 32-bits of the block count. 0x154 __le32 s_r_blocks_count_hi High 32-bits of the reserved block count. 0x158 __le32 s_free_blocks_count_hi High 32-bits of the free block count. 0x15C __le16 s_min_extra_isize All inodes have at least ## bytes. 0x15E __le16 s_want_extra_isize New inodes should reserve ## bytes. 0x160 __le32 s_flags Miscellaneous flags. See the super_flags table for more info. 0x164 __le16 s_raid_stride RAID stride. This is the number of logical blocks read from or written to the disk before moving to the next disk. This affects the placement of filesystem metadata, which will hopefully make RAID storage faster. 0x166 __le16 s_mmp_interval #. seconds to wait in multi-mount prevention (MMP) checking. In theory, MMP is a mechanism to record in the superblock which host and device have mounted the filesystem, in order to prevent multiple mounts. This feature does not seem to be implemented\u2026 0x168 __le64 s_mmp_block Block ## for multi-mount protection data. 0x170 __le32 s_raid_stripe_width RAID stripe width. This is the number of logical blocks read from or written to the disk before coming back to the current disk. This is used by the block allocator to try to reduce the number of read-modify-write operations in a RAID5/6. 0x174 __u8 s_log_groups_per_flex Size of a flexible block group is 2 ^ <code>s_log_groups_per_flex</code>. 0x175 __u8 s_checksum_type Metadata checksum algorithm type. The only valid value is 1 (crc32c). 0x176 __le16 s_reserved_pad 0x178 __le64 s_kbytes_written Number of KiB written to this filesystem over its lifetime. 0x180 __le32 s_snapshot_inum inode number of active snapshot. (Not used in e2fsprogs/Linux.) 0x184 __le32 s_snapshot_id Sequential ID of active snapshot. (Not used in e2fsprogs/Linux.) 0x188 __le64 s_snapshot_r_blocks_count Number of blocks reserved for active snapshot\u2019s future use. (Not used in e2fsprogs/Linux.) 0x190 __le32 s_snapshot_list inode number of the head of the on-disk snapshot list. (Not used in e2fsprogs/Linux.) 0x194 __le32 s_error_count Number of errors seen. 0x198 __le32 s_first_error_time First time an error happened, in seconds since the epoch. 0x19C __le32 s_first_error_ino inode involved in first error. 0x1A0 __le64 s_first_error_block Number of block involved of first error. 0x1A8 __u8 s_first_error_func[32] Name of function where the error happened. 0x1C8 __le32 s_first_error_line Line number where error happened. 0x1CC __le32 s_last_error_time Time of most recent error, in seconds since the epoch. 0x1D0 __le32 s_last_error_ino inode involved in most recent error. 0x1D4 __le32 s_last_error_line Line number where most recent error happened. 0x1D8 __le64 s_last_error_block Number of block involved in most recent error. 0x1E0 __u8 s_last_error_func[32] Name of function where the most recent error happened. 0x200 __u8 s_mount_opts[64] ASCIIZ string of mount options. 0x240 __le32 s_usr_quota_inum Inode number of user quota file. 0x244 __le32 s_grp_quota_inum Inode number of group quota file. 0x248 __le32 s_overhead_blocks Overhead blocks/clusters in fs. (Huh? This field is always zero, which means that the kernel calculates it dynamically.) 0x24C __le32 s_backup_bgs[2] Block groups containing superblock backups (if sparse_super2) 0x254 __u8 s_encrypt_algos[4] Encryption algorithms in use. There can be up to four algorithms in use at any time; valid algorithm codes are given in the super_encrypt table below. 0x258 __u8 s_encrypt_pw_salt[16] Salt for the string2key algorithm for encryption. 0x268 __le32 s_lpf_ino Inode number of lost+found 0x26C __le32 s_prj_quota_inum Inode that tracks project quotas. 0x270 __le32 s_checksum_seed Checksum seed used for metadata_csum calculations. This value is crc32c(~0, $orig_fs_uuid). 0x274 __u8 s_wtime_hi Upper 8 bits of the s_wtime field. 0x275 __u8 s_mtime_hi Upper 8 bits of the s_mtime field. 0x276 __u8 s_mkfs_time_hi Upper 8 bits of the s_mkfs_time field. 0x277 __u8 s_lastcheck_hi Upper 8 bits of the s_lastcheck field. 0x278 __u8 s_first_error_time_hi Upper 8 bits of the s_first_error_time field. 0x279 __u8 s_last_error_time_hi Upper 8 bits of the s_last_error_time field. 0x27A __u8 s_pad[2] Zero padding. 0x27C __le16 s_encoding Filename charset encoding. 0x27E __le16 s_encoding_flags Filename charset encoding flags. 0x280 __le32 s_orphan_file_inum Orphan file inode number. 0x284 __le32 s_reserved[94] Padding to the end of the block. 0x3FC __le32 s_checksum Superblock checksum. <p>The superblock state is some combination of the following:</p> <p>\u8d85\u7ea7\u5757\u72b6\u6001\u662f\u4ee5\u4e0b\u5404\u9879\u7684\u7ec4\u5408\uff1a</p> Value Description 0x0001 Cleanly umounted 0x0002 Errors detected 0x0004 Orphans being recovered <p>The superblock error policy is one of the following:</p> <p>\u8d85\u7ea7\u5757\u9519\u8bef\u7b56\u7565\u662f\u4ee5\u4e0b\u4e4b\u4e00\uff1a</p> Value Description 1 Continue 2 Remount read-only 3 Panic <p>The filesystem creator is one of the following:</p> <p>\u6587\u4ef6\u7cfb\u7edf\u521b\u5efa\u8005\u662f\u4ee5\u4e0b\u4e4b\u4e00\uff1a</p> Value Description 0 Linux 1 Hurd 2 Masix 3 FreeBSD 4 Lites <p>The superblock revision is one of the following:</p> <p>\u8d85\u7ea7\u5757\u7248\u672c\u5982\u4e0b\uff1a</p> Value Description 0 Original format 1 v2 format w/ dynamic inode sizes <p>Note that <code>EXT4_DYNAMIC_REV</code> refers to a revision 1 or newer filesystem.</p> <p>\u8bf7\u6ce8\u610f\uff0c\u201cEXT4_DYNAMIC_REV\u201d\u6307\u7684\u662f\u7248\u672c1\u6216\u66f4\u65b0\u7684\u6587\u4ef6\u7cfb\u7edf\u3002</p> <p>The superblock compatible features field is a combination of any of the following:</p> <p>\u8d85\u7ea7\u5757\u517c\u5bb9\u529f\u80fd\u5b57\u6bb5\u662f\u4ee5\u4e0b\u4efb\u4e00\u9879\u7684\u7ec4\u5408\uff1a</p> Value Description 0x1 Directory preallocation (COMPAT_DIR_PREALLOC). 0x2 \u201cimagic inodes\u201d. Not clear from the code what this does (COMPAT_IMAGIC_INODES). 0x4 Has a journal (COMPAT_HAS_JOURNAL). 0x8 Supports extended attributes (COMPAT_EXT_ATTR). 0x10 Has reserved GDT blocks for filesystem expansion (COMPAT_RESIZE_INODE). Requires RO_COMPAT_SPARSE_SUPER. 0x20 Has directory indices (COMPAT_DIR_INDEX). 0x40 \u201cLazy BG\u201d. Not in Linux kernel, seems to have been for uninitialized block groups? (COMPAT_LAZY_BG) 0x80 \u201cExclude inode\u201d. Not used. (COMPAT_EXCLUDE_INODE). 0x100 \u201cExclude bitmap\u201d. Seems to be used to indicate the presence of snapshot-related exclude bitmaps? Not defined in kernel or used in e2fsprogs (COMPAT_EXCLUDE_BITMAP). 0x200 Sparse Super Block, v2. If this flag is set, the SB field s_backup_bgs points to the two block groups that contain backup superblocks (COMPAT_SPARSE_SUPER2). 0x400 Fast commits supported. Although fast commits blocks are backward incompatible, fast commit blocks are not always present in the journal. If fast commit blocks are present in the journal, JBD2 incompat feature (JBD2_FEATURE_INCOMPAT_FAST_COMMIT) gets set (COMPAT_FAST_COMMIT). 0x1000 Orphan file allocated. This is the special file for more efficient tracking of unlinked but still open inodes. When there may be any entries in the file, we additionally set proper rocompat feature (RO_COMPAT_ORPHAN_PRESENT). <p>The superblock incompatible features field is a combination of any of the following:</p> <p>\u8d85\u7ea7\u5757\u4e0d\u517c\u5bb9\u529f\u80fd\u5b57\u6bb5\u662f\u4ee5\u4e0b\u4efb\u4e00\u9879\u7684\u7ec4\u5408\uff1a</p> Value Description 0x1 Compression (INCOMPAT_COMPRESSION). 0x2 Directory entries record the file type. See ext4_dir_entry_2 below (INCOMPAT_FILETYPE). 0x4 Filesystem needs recovery (INCOMPAT_RECOVER). 0x8 Filesystem has a separate journal device (INCOMPAT_JOURNAL_DEV). 0x10 Meta block groups. See the earlier discussion of this feature (INCOMPAT_META_BG). 0x40 Files in this filesystem use extents (INCOMPAT_EXTENTS). 0x80 Enable a filesystem size of 2^64 blocks (INCOMPAT_64BIT). 0x100 Multiple mount protection (INCOMPAT_MMP). 0x200 Flexible block groups. See the earlier discussion of this feature (INCOMPAT_FLEX_BG). 0x400 Inodes can be used to store large extended attribute values (INCOMPAT_EA_INODE). 0x1000 Data in directory entry (INCOMPAT_DIRDATA). (Not implemented?) 0x2000 Metadata checksum seed is stored in the superblock. This feature enables the administrator to change the UUID of a metadata_csum filesystem while the filesystem is mounted; without it, the checksum definition requires all metadata blocks to be rewritten (INCOMPAT_CSUM_SEED). 0x4000 Large directory &gt;2GB or 3-level htree (INCOMPAT_LARGEDIR). Prior to this feature, directories could not be larger than 4GiB and could not have an htree more than 2 levels deep. If this feature is enabled, directories can be larger than 4GiB and have a maximum htree depth of 3. 0x8000 Data in inode (INCOMPAT_INLINE_DATA). 0x10000 Encrypted inodes are present on the filesystem. (INCOMPAT_ENCRYPT). <p>The superblock read-only compatible features field is a combination of any of the following:</p> <p>\u8d85\u7ea7\u5757\u53ea\u8bfb\u517c\u5bb9\u529f\u80fd\u5b57\u6bb5\u662f\u4ee5\u4e0b\u4efb\u4e00\u9879\u7684\u7ec4\u5408\uff1a</p> Value Description 0x1 Sparse superblocks. See the earlier discussion of this feature (RO_COMPAT_SPARSE_SUPER). 0x2 This filesystem has been used to store a file greater than 2GiB (RO_COMPAT_LARGE_FILE). 0x4 Not used in kernel or e2fsprogs (RO_COMPAT_BTREE_DIR). 0x8 This filesystem has files whose sizes are represented in units of logical blocks, not 512-byte sectors. This implies a very large file indeed! (RO_COMPAT_HUGE_FILE) 0x10 Group descriptors have checksums. In addition to detecting corruption, this is useful for lazy formatting with uninitialized groups (RO_COMPAT_GDT_CSUM). 0x20 Indicates that the old ext3 32,000 subdirectory limit no longer applies (RO_COMPAT_DIR_NLINK). A directory\u2019s i_links_count will be set to 1 if it is incremented past 64,999. 0x40 Indicates that large inodes exist on this filesystem (RO_COMPAT_EXTRA_ISIZE). 0x80 This filesystem has a snapshot (RO_COMPAT_HAS_SNAPSHOT). 0x100 Quota (RO_COMPAT_QUOTA). 0x200 This filesystem supports \u201cbigalloc\u201d, which means that file extents are tracked in units of clusters (of blocks) instead of blocks (RO_COMPAT_BIGALLOC). 0x400 This filesystem supports metadata checksumming. (RO_COMPAT_METADATA_CSUM; implies RO_COMPAT_GDT_CSUM, though GDT_CSUM must not be set) 0x800 Filesystem supports replicas. This feature is neither in the kernel nor e2fsprogs. (RO_COMPAT_REPLICA) 0x1000 Read-only filesystem image; the kernel will not mount this image read-write and most tools will refuse to write to the image. (RO_COMPAT_READONLY) 0x2000 Filesystem tracks project quotas. (RO_COMPAT_PROJECT) 0x8000 Verity inodes may be present on the filesystem. (RO_COMPAT_VERITY) 0x10000 Indicates orphan file may have valid orphan entries and thus we need to clean them up when mounting the filesystem (RO_COMPAT_ORPHAN_PRESENT). <p>The <code>s_def_hash_version</code> field is one of the following:</p> Value Description 0x0 Legacy. 0x1 Half MD4. 0x2 Tea. 0x3 Legacy, unsigned. 0x4 Half MD4, unsigned. 0x5 Tea, unsigned. <p>The <code>s_default_mount_opts</code> field is any combination of the following:</p> Value Description 0x0001 Print debugging info upon (re)mount. (EXT4_DEFM_DEBUG) 0x0002 New files take the gid of the containing directory (instead of the fsgid of the current process). (EXT4_DEFM_BSDGROUPS) 0x0004 Support userspace-provided extended attributes. (EXT4_DEFM_XATTR_USER) 0x0008 Support POSIX access control lists (ACLs). (EXT4_DEFM_ACL) 0x0010 Do not support 32-bit UIDs. (EXT4_DEFM_UID16) 0x0020 All data and metadata are commited to the journal. (EXT4_DEFM_JMODE_DATA) 0x0040 All data are flushed to the disk before metadata are committed to the journal. (EXT4_DEFM_JMODE_ORDERED) 0x0060 Data ordering is not preserved; data may be written after the metadata has been written. (EXT4_DEFM_JMODE_WBACK) 0x0100 Disable write flushes. (EXT4_DEFM_NOBARRIER) 0x0200 Track which blocks in a filesystem are metadata and therefore should not be used as data blocks. This option will be enabled by default on 3.18, hopefully. (EXT4_DEFM_BLOCK_VALIDITY) 0x0400 Enable DISCARD support, where the storage device is told about blocks becoming unused. (EXT4_DEFM_DISCARD) 0x0800 Disable delayed allocation. (EXT4_DEFM_NODELALLOC) <p>The <code>s_flags</code> field is any combination of the following:</p> Value Description 0x0001 Signed directory hash in use. 0x0002 Unsigned directory hash in use. 0x0004 To test development code. <p>The <code>s_encrypt_algos</code> list can contain any of the following:</p> Value Description 0 Invalid algorithm (ENCRYPTION_MODE_INVALID). 1 256-bit AES in XTS mode (ENCRYPTION_MODE_AES_256_XTS). 2 256-bit AES in GCM mode (ENCRYPTION_MODE_AES_256_GCM). 3 256-bit AES in CBC mode (ENCRYPTION_MODE_AES_256_CBC). <p>Total size of the superblock is 1024 bytes.</p> <p>\u8d85\u7ea7\u5757\u7684\u603b\u5927\u5c0f\u4e3a1024\u5b57\u8282\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#32-block-group-descriptors","title":"3.2 Block Group Descriptors","text":"<p>Each block group on the filesystem has one of these descriptors associated with it. As noted in the Layout section above, the group descriptors (if present) are the second item in the block group. The standard configuration is for each block group to contain a full copy of the block group descriptor table unless the sparse_super feature flag is set.</p> <p>\u6587\u4ef6\u7cfb\u7edf\u4e0a\u7684\u6bcf\u4e2a\u5757\u7ec4\u90fd\u6709\u4e00\u4e2a\u4e0e\u4e4b\u76f8\u5173\u7684\u63cf\u8ff0\u7b26\u3002\u5982\u4e0a\u9762\u7684\u5e03\u5c40\u90e8\u5206\u6240\u8ff0\uff0c\u7ec4\u63cf\u8ff0\u7b26\uff08\u5982\u679c\u5b58\u5728\uff09\u662f\u5757\u7ec4\u4e2d\u7684\u7b2c\u4e8c\u9879\u3002\u6807\u51c6\u914d\u7f6e\u662f\u6bcf\u4e2a\u5757\u7ec4\u5305\u542b\u5757\u7ec4\u63cf\u8ff0\u7b26\u8868\u7684\u5b8c\u6574\u526f\u672c\uff0c\u9664\u975e\u8bbe\u7f6e\u4e86spare_super\u7279\u5f81\u6807\u5fd7\u3002</p> <p>Notice how the group descriptor records the location of both bitmaps and the inode table (i.e. they can float). This means that within a block group, the only data structures with fixed locations are the superblock and the group descriptor table. The flex_bg mechanism uses this property to group several block groups into a flex group and lay out all of the groups\u2019 bitmaps and inode tables into one long run in the first group of the flex group.</p> <p>\u6ce8\u610f\u7ec4\u63cf\u8ff0\u7b26\u5982\u4f55\u8bb0\u5f55\u4f4d\u56fe\u548c\u7d22\u5f15\u8282\u70b9\u8868\u7684\u4f4d\u7f6e\uff08\u5373\u5b83\u4eec\u53ef\u4ee5\u6d6e\u52a8\uff09\u3002\u8fd9\u610f\u5473\u7740\u5728\u5757\u7ec4\u4e2d\uff0c\u552f\u4e00\u5177\u6709\u56fa\u5b9a\u4f4d\u7f6e\u7684\u6570\u636e\u7ed3\u6784\u662f\u8d85\u7ea7\u5757\u548c\u7ec4\u63cf\u8ff0\u7b26\u8868\u3002flex_bg\u673a\u5236\u4f7f\u7528\u6b64\u5c5e\u6027\u5c06\u591a\u4e2a\u5757\u7ec4\u5206\u7ec4\u5230\u4e00\u4e2aflex\u7ec4\u4e2d\uff0c\u5e76\u5728flex\u7ec4\u7684\u7b2c\u4e00\u4e2a\u7ec4\u4e2d\u5c06\u6240\u6709\u7ec4\u7684\u4f4d\u56fe\u548cinode\u8868\u5e03\u7f6e\u6210\u4e00\u4e2a\u957f\u8fd0\u884c\u3002</p> <p>If the meta_bg feature flag is set, then several block groups are grouped together into a meta group. Note that in the meta_bg case, however, the first and last two block groups within the larger meta group contain only group descriptors for the groups inside the meta group.</p> <p>\u5982\u679c\u8bbe\u7f6e\u4e86meta_bg\u7279\u5f81\u6807\u5fd7\uff0c\u5219\u5c06\u591a\u4e2a\u5757\u7ec4\u7ec4\u5408\u6210\u4e00\u4e2a\u5143\u7ec4\u3002\u6ce8\u610f\uff0c\u7136\u800c\uff0c\u5728meta_bg\u7684\u60c5\u51b5\u4e0b\uff0c\u8f83\u5927\u5143\u7ec4\u5185\u7684\u7b2c\u4e00\u4e2a\u548c\u6700\u540e\u4e24\u4e2a\u5757\u7ec4\u4ec5\u5305\u542b\u5143\u7ec4\u5185\u7ec4\u7684\u7ec4\u63cf\u8ff0\u7b26\u3002</p> <p>flex_bg and meta_bg do not appear to be mutually exclusive features.</p> <p>flex_bg\u548cmeta_bg\u4f3c\u4e4e\u4e0d\u662f\u4e92\u65a5\u7684\u7279\u6027\u3002</p> <p>In ext2, ext3, and ext4 (when the 64bit feature is not enabled), the block group descriptor was only 32 bytes long and therefore ends at bg_checksum. On an ext4 filesystem with the 64bit feature enabled, the block group descriptor expands to at least the 64 bytes described below; the size is stored in the superblock.</p> <p>\u5728ext2\u3001ext3\u548cext4\uff08\u672a\u542f\u752864\u4f4d\u7279\u6027\u65f6\uff09\u4e2d\uff0c\u5757\u7ec4\u63cf\u8ff0\u7b26\u53ea\u670932\u5b57\u8282\u957f\uff0c\u56e0\u6b64\u4ee5bg_checksum\u7ed3\u5c3e\u3002\u5728\u542f\u7528\u4e8664\u4f4d\u7279\u6027\u7684ext4\u6587\u4ef6\u7cfb\u7edf\u4e0a\uff0c\u5757\u7ec4\u63cf\u8ff0\u7b26\u81f3\u5c11\u6269\u5c55\u5230\u4e0b\u9762\u63cf\u8ff0\u768464\u4e2a\u5b57\u8282\uff1b\u5927\u5c0f\u5b58\u50a8\u5728\u8d85\u7ea7\u5757\u4e2d\u3002</p> <p>If gdt_csum is set and metadata_csum is not set, the block group checksum is the crc16 of the FS UUID, the group number, and the group descriptor structure. If metadata_csum is set, then the block group checksum is the lower 16 bits of the checksum of the FS UUID, the group number, and the group descriptor structure. Both block and inode bitmap checksums are calculated against the FS UUID, the group number, and the entire bitmap.</p> <p>\u5982\u679c\u8bbe\u7f6e\u4e86gdt_csum\u800c\u672a\u8bbe\u7f6emetadata_csum\uff0c\u5219\u5757\u7ec4\u6821\u9a8c\u548c\u662fFS UUID\u3001\u7ec4\u7f16\u53f7\u548c\u7ec4\u63cf\u8ff0\u7b26\u7ed3\u6784\u7684crc16\u3002\u5982\u679c\u8bbe\u7f6e\u4e86metadata_csum\uff0c\u5219\u5757\u7ec4\u6821\u9a8c\u548c\u662fFS UUID\u3001\u7ec4\u7f16\u53f7\u548c\u7ec4\u63cf\u8ff0\u7b26\u7ed3\u6784\u7684\u6821\u9a8c\u548c\u7684\u4f4e16\u4f4d\u3002\u5757\u548c\u7d22\u5f15\u8282\u70b9\u4f4d\u56fe\u6821\u9a8c\u548c\u90fd\u662f\u6839\u636eFS UUID\u3001\u7ec4\u53f7\u548c\u6574\u4e2a\u4f4d\u56fe\u8ba1\u7b97\u7684\u3002</p> <p>The block group descriptor is laid out in <code>struct ext4_group_desc</code>.</p> <p>\u5757\u7ec4\u63cf\u8ff0\u7b26\u4f4d\u4e8e<code>struct ext4_group_desc</code>\u4e2d\u3002</p> Offset Size Name Description 0x0 __le32 bg_block_bitmap_lo Lower 32-bits of location of block bitmap. 0x4 __le32 bg_inode_bitmap_lo Lower 32-bits of location of inode bitmap. 0x8 __le32 bg_inode_table_lo Lower 32-bits of location of inode table. 0xC __le16 bg_free_blocks_count_lo Lower 16-bits of free block count. 0xE __le16 bg_free_inodes_count_lo Lower 16-bits of free inode count. 0x10 __le16 bg_used_dirs_count_lo Lower 16-bits of directory count. 0x12 __le16 bg_flags Block group flags. See the bgflags table below. 0x14 __le32 bg_exclude_bitmap_lo Lower 32-bits of location of snapshot exclusion bitmap. 0x18 __le16 bg_block_bitmap_csum_lo Lower 16-bits of the block bitmap checksum. 0x1A __le16 bg_inode_bitmap_csum_lo Lower 16-bits of the inode bitmap checksum. 0x1C __le16 bg_itable_unused_lo Lower 16-bits of unused inode count. If set, we needn\u2019t scan past the <code>(sb.s_inodes_per_group - gdt.bg_itable_unused)</code> th entry in the inode table for this group. 0x1E __le16 bg_checksum Group descriptor checksum; crc16(sb_uuid+group_num+bg_desc) if the RO_COMPAT_GDT_CSUM feature is set, or crc32c(sb_uuid+group_num+bg_desc) &amp; 0xFFFF if the RO_COMPAT_METADATA_CSUM feature is set. The bg_checksum field in bg_desc is skipped when calculating crc16 checksum, and set to zero if crc32c checksum is used. These fields only exist if the 64bit feature is enabled and s_desc_size &gt; 32. 0x20 __le32 bg_block_bitmap_hi Upper 32-bits of location of block bitmap. 0x24 __le32 bg_inode_bitmap_hi Upper 32-bits of location of inodes bitmap. 0x28 __le32 bg_inode_table_hi Upper 32-bits of location of inodes table. 0x2C __le16 bg_free_blocks_count_hi Upper 16-bits of free block count. 0x2E __le16 bg_free_inodes_count_hi Upper 16-bits of free inode count. 0x30 __le16 bg_used_dirs_count_hi Upper 16-bits of directory count. 0x32 __le16 bg_itable_unused_hi Upper 16-bits of unused inode count. 0x34 __le32 bg_exclude_bitmap_hi Upper 32-bits of location of snapshot exclusion bitmap. 0x38 __le16 bg_block_bitmap_csum_hi Upper 16-bits of the block bitmap checksum. 0x3A __le16 bg_inode_bitmap_csum_hi Upper 16-bits of the inode bitmap checksum. 0x3C __u32 bg_reserved Padding to 64 bytes. <p>Block group flags can be any combination of the following:</p> <p>\u5757\u7ec4\u6807\u5fd7\u53ef\u4ee5\u662f\u4ee5\u4e0b\u4efb\u610f\u7ec4\u5408\uff1a</p> Value Description 0x1 inode table and bitmap are not initialized (EXT4_BG_INODE_UNINIT). 0x2 block bitmap is not initialized (EXT4_BG_BLOCK_UNINIT). 0x4 inode table is zeroed (EXT4_BG_INODE_ZEROED)."},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#33-block-and-inode-bitmaps","title":"3.3 Block and inode Bitmaps","text":"<p>The data block bitmap tracks the usage of data blocks within the block group.</p> <p>\u6570\u636e\u5757\u4f4d\u56fe\u8ddf\u8e2a\u5757\u7ec4\u4e2d\u6570\u636e\u5757\u7684\u4f7f\u7528\u60c5\u51b5\u3002</p> <p>The inode bitmap records which entries in the inode table are in use.</p> <p>inode\u4f4d\u56fe\u8bb0\u5f55inode\u8868\u4e2d\u54ea\u4e9b\u6761\u76ee\u6b63\u5728\u4f7f\u7528\u3002</p> <p>As with most bitmaps, one bit represents the usage status of one data block or inode table entry. This implies a block group size of 8 * number_of_bytes_in_a_logical_block.</p> <p>\u4e0e\u5927\u591a\u6570\u4f4d\u56fe\u4e00\u6837\uff0c\u4e00\u4f4d\u8868\u793a\u4e00\u4e2a\u6570\u636e\u5757\u6216\u7d22\u5f15\u8282\u70b9\u8868\u9879\u7684\u4f7f\u7528\u72b6\u6001\u3002\u8fd9\u610f\u5473\u7740\u5757\u7ec4\u5927\u5c0f\u4e3a8*number_of_bytes_in_a_logical_block\u3002</p> <p>NOTE: If <code>BLOCK_UNINIT</code> is set for a given block group, various parts of the kernel and e2fsprogs code pretends that the block bitmap contains zeros (i.e. all blocks in the group are free). However, it is not necessarily the case that no blocks are in use \u2013 if <code>meta_bg</code> is set, the bitmaps and group descriptor live inside the group. Unfortunately, ext2fs_test_block_bitmap2() will return \u20180\u2019 for those locations, which produces confusing debugfs output.</p> <p>\u6ce8\u610f\uff1a\u5982\u679c\u4e3a\u7ed9\u5b9a\u7684\u5757\u7ec4\u8bbe\u7f6e\u4e86<code>BLOCK_UNINIT</code>\uff0c\u5185\u6838\u548ce2fsprogs\u4ee3\u7801\u7684\u5404\u4e2a\u90e8\u5206\u4f1a\u5047\u88c5\u5757\u4f4d\u56fe\u5305\u542b\u96f6\uff08\u5373\u7ec4\u4e2d\u7684\u6240\u6709\u5757\u90fd\u662f\u7a7a\u95f2\u7684\uff09\u3002\u4f46\u662f\uff0c\u4e0d\u4e00\u5b9a\u6ca1\u6709\u5757\u5728\u4f7f\u7528\u2013\u5982\u679c\u8bbe\u7f6e\u4e86<code>meta_bg</code>\uff0c\u4f4d\u56fe\u548c\u7ec4\u63cf\u8ff0\u7b26\u5c06\u4f4d\u4e8e\u7ec4\u5185\u3002\u4e0d\u5e78\u7684\u662f\uff0cext2fs_test_block_bitmap2\uff08\uff09\u5c06\u4e3a\u8fd9\u4e9b\u4f4d\u7f6e\u8fd4\u56de\u201c0\u201d\uff0c\u8fd9\u4f1a\u4ea7\u751f\u4ee4\u4eba\u56f0\u60d1\u7684debugfs\u8f93\u51fa\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#34-inode-table","title":"3.4 Inode Table","text":"<p>Inode tables are statically allocated at mkfs time. Each block group descriptor points to the start of the table, and the superblock records the number of inodes per group. See the section on inodes for more information.</p> <p>Inode\u8868\u5728mkfs\u65f6\u9759\u6001\u5206\u914d\u3002\u6bcf\u4e2a\u5757\u7ec4\u63cf\u8ff0\u7b26\u6307\u5411\u8868\u7684\u5f00\u5934\uff0c\u8d85\u7ea7\u5757\u8bb0\u5f55\u6bcf\u4e2a\u7ec4\u7684\u7d22\u5f15\u8282\u70b9\u6570\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605inode\u4e00\u8282\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#35-multiple-mount-protection","title":"3.5 Multiple Mount Protection","text":"<p>Multiple mount protection (MMP) is a feature that protects the filesystem against multiple hosts trying to use the filesystem simultaneously. When a filesystem is opened (for mounting, or fsck, etc.), the MMP code running on the node (call it node A) checks a sequence number. If the sequence number is EXT4_MMP_SEQ_CLEAN, the open continues. If the sequence number is EXT4_MMP_SEQ_FSCK, then fsck is (hopefully) running, and open fails immediately. Otherwise, the open code will wait for twice the specified MMP check interval and check the sequence number again. If the sequence number has changed, then the filesystem is active on another machine and the open fails. If the MMP code passes all of those checks, a new MMP sequence number is generated and written to the MMP block, and the mount proceeds.</p> <p>\u591a\u88c5\u8f7d\u4fdd\u62a4\uff08MMP\uff09\u662f\u4e00\u79cd\u4fdd\u62a4\u6587\u4ef6\u7cfb\u7edf\u514d\u53d7\u591a\u4e2a\u4e3b\u673a\u540c\u65f6\u4f7f\u7528\u6587\u4ef6\u7cfb\u7edf\u7684\u529f\u80fd\u3002\u5f53\u6587\u4ef6\u7cfb\u7edf\u6253\u5f00\uff08\u7528\u4e8e\u88c5\u8f7d\u6216fsck\u7b49\uff09\u65f6\uff0c\u8282\u70b9\uff08\u79f0\u4e3a\u8282\u70b9a\uff09\u4e0a\u8fd0\u884c\u7684MMP\u4ee3\u7801\u4f1a\u68c0\u67e5\u5e8f\u5217\u53f7\u3002\u5982\u679c\u5e8f\u5217\u53f7\u4e3aEXT4_MMP_SEQ_CLEAN\uff0c\u5219\u6253\u5f00\u7ee7\u7eed\u3002\u5982\u679c\u5e8f\u5217\u53f7\u662fEXT4_MMP_SEQ_FSCK\uff0c\u5219FSCK\uff08\u5e0c\u671b\uff09\u6b63\u5728\u8fd0\u884c\uff0copen\u5c06\u7acb\u5373\u5931\u8d25\u3002\u5426\u5219\uff0c\u6253\u5f00\u7684\u4ee3\u7801\u5c06\u7b49\u5f85\u6307\u5b9a\u7684MMP\u68c0\u67e5\u95f4\u9694\u7684\u4e24\u500d\uff0c\u7136\u540e\u518d\u6b21\u68c0\u67e5\u5e8f\u5217\u53f7\u3002\u5982\u679c\u5e8f\u5217\u53f7\u5df2\u66f4\u6539\uff0c\u5219\u6587\u4ef6\u7cfb\u7edf\u5728\u53e6\u4e00\u53f0\u8ba1\u7b97\u673a\u4e0a\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\uff0c\u6253\u5f00\u5931\u8d25\u3002\u5982\u679cMMP\u4ee3\u7801\u901a\u8fc7\u4e86\u6240\u6709\u8fd9\u4e9b\u68c0\u67e5\uff0c\u5c06\u751f\u6210\u4e00\u4e2a\u65b0\u7684MMP\u5e8f\u5217\u53f7\u5e76\u5c06\u5176\u5199\u5165MMP\u5757\uff0c\u7136\u540e\u7ee7\u7eed\u88c5\u8f7d\u3002</p> <p>While the filesystem is live, the kernel sets up a timer to re-check the MMP block at the specified MMP check interval. To perform the re-check, the MMP sequence number is re-read; if it does not match the in-memory MMP sequence number, then another node (node B) has mounted the filesystem, and node A remounts the filesystem read-only. If the sequence numbers match, the sequence number is incremented both in memory and on disk, and the re-check is complete.</p> <p>\u5f53\u6587\u4ef6\u7cfb\u7edf\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\u65f6\uff0c\u5185\u6838\u8bbe\u7f6e\u4e00\u4e2a\u8ba1\u65f6\u5668\uff0c\u4ee5\u6307\u5b9a\u7684MMP\u68c0\u67e5\u95f4\u9694\u91cd\u65b0\u68c0\u67e5MMP\u5757\u3002\u4e3a\u4e86\u6267\u884c\u91cd\u65b0\u68c0\u67e5\uff0c\u91cd\u65b0\u8bfb\u53d6MMP\u5e8f\u5217\u53f7\uff1b\u5982\u679c\u5b83\u4e0e\u5185\u5b58\u4e2d\u7684MMP\u5e8f\u5217\u53f7\u4e0d\u5339\u914d\uff0c\u5219\u53e6\u4e00\u4e2a\u8282\u70b9\uff08\u8282\u70b9B\uff09\u5df2\u5b89\u88c5\u6587\u4ef6\u7cfb\u7edf\uff0c\u8282\u70b9A\u4ee5\u53ea\u8bfb\u65b9\u5f0f\u91cd\u65b0\u5b89\u88c5\u6587\u4ef6\u7cfb\u7edf\u3002\u5982\u679c\u5e8f\u5217\u53f7\u5339\u914d\uff0c\u5219\u5e8f\u5217\u53f7\u5728\u5185\u5b58\u548c\u78c1\u76d8\u4e0a\u90fd\u4f1a\u9012\u589e\uff0c\u5e76\u4e14\u91cd\u65b0\u68c0\u67e5\u5b8c\u6210\u3002</p> <p>The hostname and device filename are written into the MMP block whenever an open operation succeeds. The MMP code does not use these values; they are provided purely for informational purposes.</p> <p>\u6bcf\u5f53\u6253\u5f00\u64cd\u4f5c\u6210\u529f\u65f6\uff0c\u4e3b\u673a\u540d\u548c\u8bbe\u5907\u6587\u4ef6\u540d\u90fd\u4f1a\u5199\u5165MMP\u5757\u3002MMP\u4ee3\u7801\u4e0d\u4f7f\u7528\u8fd9\u4e9b\u503c\uff1b\u63d0\u4f9b\u5b83\u4eec\u7eaf\u7cb9\u662f\u4e3a\u4e86\u63d0\u4f9b\u4fe1\u606f\u3002</p> <p>The checksum is calculated against the FS UUID and the MMP structure. The MMP structure (<code>struct mmp_struct</code>) is as follows:</p> <p>\u6839\u636eFS UUID\u548cMMP\u7ed3\u6784\u8ba1\u7b97\u6821\u9a8c\u548c\u3002MMP\u7ed3\u6784\uff08\u201cstruct MMP_struct\u201d\uff09\u5982\u4e0b\uff1a</p> Offset Type Name Description 0x0 __le32 mmp_magic Magic number for MMP, 0x004D4D50 (\u201cMMP\u201d). 0x4 __le32 mmp_seq Sequence number, updated periodically. 0x8 __le64 mmp_time Time that the MMP block was last updated. 0x10 char[64] mmp_nodename Hostname of the node that opened the filesystem. 0x50 char[32] mmp_bdevname Block device name of the filesystem. 0x70 __le16 mmp_check_interval The MMP re-check interval, in seconds. 0x72 __le16 mmp_pad1 Zero. 0x74 __le32[226] mmp_pad2 Zero. 0x3FC __le32 mmp_checksum Checksum of the MMP block."},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#36-journal-jbd2","title":"3.6 Journal (jbd2)","text":"<p>Introduced in ext3, the ext4 filesystem employs a journal to protect the filesystem against metadata inconsistencies in the case of a system crash. Up to 10,240,000 file system blocks (see man mke2fs(8) for more details on journal size limits) can be reserved inside the filesystem as a place to land \u201cimportant\u201d data writes on-disk as quickly as possible. Once the important data transaction is fully written to the disk and flushed from the disk write cache, a record of the data being committed is also written to the journal. At some later point in time, the journal code writes the transactions to their final locations on disk (this could involve a lot of seeking or a lot of small read-write-erases) before erasing the commit record. Should the system crash during the second slow write, the journal can be replayed all the way to the latest commit record, guaranteeing the atomicity of whatever gets written through the journal to the disk. The effect of this is to guarantee that the filesystem does not become stuck midway through a metadata update.</p> <p>\u5728ext3\u4e2d\u4ecb\u7ecd\u4e86\uff0cext4\u6587\u4ef6\u7cfb\u7edf\u5b83\u4f7f\u7528\u65e5\u5fd7\u6765\u4fdd\u62a4\u6587\u4ef6\u7cfb\u7edf\u5728\u7cfb\u7edf\u5d29\u6e83\u65f6\u4e0d\u53d7\u5143\u6570\u636e\u4e0d\u4e00\u81f4\u7684\u5f71\u54cd\u3002\u53ef\u4ee5\u5728\u6587\u4ef6\u7cfb\u7edf\u4e2d\u4fdd\u7559\u591a\u8fbe10240000\u4e2a\u6587\u4ef6\u7cfb\u7edf\u5757\uff08\u6709\u5173\u65e5\u5fd7\u5927\u5c0f\u9650\u5236\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\uff08\u8bf7\u53c2\u9605man mke2fs(8)\uff09\uff0c\u4f5c\u4e3a\u5c3d\u5feb\u5c06\u201c\u91cd\u8981\u201d\u6570\u636e\u5199\u5165\u78c1\u76d8\u7684\u5730\u65b9\u3002\u4e00\u65e6\u5c06\u91cd\u8981\u6570\u636e\u4e8b\u52a1\u5b8c\u5168\u5199\u5165\u78c1\u76d8\u5e76\u4ece\u78c1\u76d8\u5199\u7f13\u5b58\u4e2d\u5237\u65b0\uff0c\u5219\u63d0\u4ea4\u7684\u6570\u636e\u8bb0\u5f55\u4e5f\u5c06\u5199\u5165\u65e5\u5fd7\u3002\u5728\u7a0d\u540e\u7684\u67d0\u4e2a\u65f6\u95f4\u70b9\uff0c\u65e5\u5fd7\u4ee3\u7801\u4f1a\u5728\u64e6\u9664\u63d0\u4ea4\u8bb0\u5f55\u4e4b\u524d\u5c06\u4e8b\u52a1\u5199\u5165\u78c1\u76d8\u4e0a\u7684\u6700\u7ec8\u4f4d\u7f6e\uff08\u8fd9\u53ef\u80fd\u6d89\u53ca\u5927\u91cf\u67e5\u627e\u6216\u5927\u91cf\u5c0f\u7684\u8bfb\u5199\u64e6\u9664\uff09\u3002\u5982\u679c\u7cfb\u7edf\u5728\u7b2c\u4e8c\u6b21\u6162\u5199\u671f\u95f4\u5d29\u6e83\uff0c\u65e5\u5fd7\u53ef\u4ee5\u4e00\u76f4\u91cd\u653e\u5230\u6700\u65b0\u7684\u63d0\u4ea4\u8bb0\u5f55\uff0c\u4ece\u800c\u4fdd\u8bc1\u901a\u8fc7\u65e5\u5fd7\u5199\u5165\u78c1\u76d8\u7684\u4efb\u4f55\u5185\u5bb9\u7684\u539f\u5b50\u6027\u3002\u8fd9\u6837\u505a\u7684\u6548\u679c\u662f\u786e\u4fdd\u6587\u4ef6\u7cfb\u7edf\u4e0d\u4f1a\u5728\u5143\u6570\u636e\u66f4\u65b0\u7684\u4e2d\u9014\u5361\u4f4f\u3002</p> <p>For performance reasons, ext4 by default only writes filesystem metadata through the journal. This means that file data blocks are /not/ guaranteed to be in any consistent state after a crash. If this default guarantee level (<code>data=ordered</code>) is not satisfactory, there is a mount option to control journal behavior. If <code>data=journal</code>, all data and metadata are written to disk through the journal. This is slower but safest. If <code>data=writeback</code>, dirty data blocks are not flushed to the disk before the metadata are written to disk through the journal.</p> <p>\u51fa\u4e8e\u6027\u80fd\u539f\u56e0\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cext4\u53ea\u901a\u8fc7\u65e5\u5fd7\u5199\u5165\u6587\u4ef6\u7cfb\u7edf\u5143\u6570\u636e\u3002\u8fd9\u610f\u5473\u7740\u6587\u4ef6\u6570\u636e\u5757\u5728\u5d29\u6e83\u540e/\u4e0d/\u4fdd\u8bc1\u5904\u4e8e\u4efb\u4f55\u4e00\u81f4\u72b6\u6001\u3002\u5982\u679c\u6b64\u9ed8\u8ba4\u4fdd\u8bc1\u7ea7\u522b\uff08<code>data=ordered</code>\uff09\u4e0d\u4ee4\u4eba\u6ee1\u610f\uff0c\u5219\u6709\u4e00\u4e2a\u88c5\u8f7d\u9009\u9879\u6765\u63a7\u5236\u65e5\u5fd7\u884c\u4e3a\u3002\u5982\u679c\u201cdata=journal\u201d\uff0c\u5219\u6240\u6709\u6570\u636e\u548c\u5143\u6570\u636e\u90fd\u901a\u8fc7\u65e5\u5fd7\u5199\u5165\u78c1\u76d8\u3002\u8fd9\u901f\u5ea6\u8f83\u6162\uff0c\u4f46\u6700\u5b89\u5168\u3002\u5982\u679c\u201cdata=writeback\u201d\uff0c\u5219\u5728\u5143\u6570\u636e\u901a\u8fc7\u65e5\u5fd7\u5199\u5165\u78c1\u76d8\u4e4b\u524d\uff0c\u810f\u6570\u636e\u5757\u4e0d\u4f1a\u88ab\u5237\u65b0\u5230\u78c1\u76d8\u3002</p> <p>In case of <code>data=ordered</code> mode, Ext4 also supports fast commits which help reduce commit latency significantly. The default <code>data=ordered</code> mode works by logging metadata blocks to the journal. In fast commit mode, Ext4 only stores the minimal delta needed to recreate the affected metadata in fast commit space that is shared with JBD2. Once the fast commit area fills in or if fast commit is not possible or if JBD2 commit timer goes off, Ext4 performs a traditional full commit. A full commit invalidates all the fast commits that happened before it and thus it makes the fast commit area empty for further fast commits. This feature needs to be enabled at mkfs time.</p> <p>\u5728<code>data=ordered</code>\u6a21\u5f0f\u4e0b\uff0cExt4\u8fd8\u652f\u6301\u5feb\u901f\u63d0\u4ea4\uff0c\u8fd9\u6709\u52a9\u4e8e\u663e\u8457\u51cf\u5c11\u63d0\u4ea4\u5ef6\u8fdf\u3002\u9ed8\u8ba4\u7684<code>data=ordered</code>\u6a21\u5f0f\u901a\u8fc7\u5c06\u5143\u6570\u636e\u5757\u8bb0\u5f55\u5230\u65e5\u5fd7\u4e2d\u6765\u5de5\u4f5c\u3002\u5728\u5feb\u901f\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0cExt4\u53ea\u5b58\u50a8\u5728\u4e0eJBD2\u5171\u4eab\u7684\u5feb\u901f\u63d0\u4ea4\u7a7a\u95f4\u4e2d\u91cd\u65b0\u521b\u5efa\u53d7\u5f71\u54cd\u7684\u5143\u6570\u636e\u6240\u9700\u7684\u6700\u5c0f\u589e\u91cf\u3002\u4e00\u65e6\u5feb\u901f\u63d0\u4ea4\u533a\u57df\u586b\u6ee1\uff0c\u6216\u8005\u5982\u679c\u5feb\u901f\u63d0\u4ea4\u4e0d\u53ef\u80fd\uff0c\u6216\u8005JBD2\u63d0\u4ea4\u8ba1\u65f6\u5668\u5173\u95ed\uff0cExt4\u5c06\u6267\u884c\u4f20\u7edf\u7684\u5b8c\u5168\u63d0\u4ea4\u3002\u5b8c\u5168\u63d0\u4ea4\u4f1a\u4f7f\u4e4b\u524d\u53d1\u751f\u7684\u6240\u6709\u5feb\u901f\u63d0\u4ea4\u65e0\u6548\uff0c\u56e0\u6b64\u5b83\u4f1a\u4f7f\u5feb\u901f\u63d0\u4ea4\u533a\u57df\u4e3a\u7a7a\uff0c\u4ee5\u4fbf\u8fdb\u4e00\u6b65\u5feb\u901f\u63d0\u4ea4\u3002\u6b64\u529f\u80fd\u9700\u8981\u5728mkfs\u65f6\u542f\u7528\u3002</p> <p>The journal inode is typically inode 8. The first 68 bytes of the journal inode are replicated in the ext4 superblock. The journal itself is normal (but hidden) file within the filesystem. The file usually consumes an entire block group, though mke2fs tries to put it in the middle of the disk.</p> <p>\u65e5\u5fd7\u7d22\u5f15\u8282\u70b9\u901a\u5e38\u662f\u7d22\u5f15\u8282\u70b98\u3002\u65e5\u5fd7\u7d22\u5f15\u8282\u70b9\u7684\u524d68\u4e2a\u5b57\u8282\u590d\u5236\u5230ext4\u8d85\u7ea7\u5757\u4e2d\u3002\u65e5\u5fd7\u672c\u8eab\u662f\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u6b63\u5e38\uff08\u4f46\u9690\u85cf\uff09\u6587\u4ef6\u3002\u5c3d\u7ba1mke2fs\u8bd5\u56fe\u5c06\u6587\u4ef6\u653e\u5728\u78c1\u76d8\u7684\u4e2d\u95f4\uff0c\u4f46\u8be5\u6587\u4ef6\u901a\u5e38\u4f1a\u5360\u7528\u6574\u4e2a\u5757\u7ec4\u3002</p> <p>All fields in jbd2 are written to disk in big-endian order. This is the opposite of ext4.</p> <p>jbd2\u4e2d\u7684\u6240\u6709\u5b57\u6bb5\u90fd\u4ee5\u5927\u7aef\u987a\u5e8f\u5199\u5165\u78c1\u76d8\u3002\u8fd9\u4e0eext4\u76f8\u53cd\u3002</p> <p>NOTE: Both ext4 and ocfs2 use jbd2.</p> <p>\u6ce8\u610f\uff1aext4\u548cocfs2\u90fd\u4f7f\u7528jbd2\u3002</p> <p>The maximum size of a journal embedded in an ext4 filesystem is 2^32 blocks. jbd2 itself does not seem to care.</p> <p>\u5d4c\u5165ext4\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u65e5\u5fd7\u7684\u6700\u5927\u5927\u5c0f\u4e3a2^32\u4e2a\u5757\u3002jbd2\u672c\u8eab\u4f3c\u4e4e\u5e76\u4e0d\u5728\u610f\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#361-layout","title":"3.6.1 Layout","text":"<p>Generally speaking, the journal has this format:</p> Superblock descriptor_block (data_blocks or revocation_block) [more data or revocations] commmit_block [more transactions\u2026] One transaction <p>Notice that a transaction begins with either a descriptor and some data, or a block revocation list. A finished transaction always ends with a commit. If there is no commit record (or the checksums don\u2019t match), the transaction will be discarded during replay.</p> <p>\u8bf7\u6ce8\u610f\uff0c\u4e8b\u52a1\u4ee5\u63cf\u8ff0\u7b26\u548c\u4e00\u4e9b\u6570\u636e\u6216\u5757\u64a4\u9500\u5217\u8868\u5f00\u59cb\u3002\u5b8c\u6210\u7684\u4e8b\u52a1\u603b\u662f\u4ee5\u63d0\u4ea4\u7ed3\u675f\u3002\u5982\u679c\u6ca1\u6709\u63d0\u4ea4\u8bb0\u5f55\uff08\u6216\u6821\u9a8c\u548c\u4e0d\u5339\u914d\uff09\uff0c\u5219\u5728\u91cd\u653e\u671f\u95f4\u5c06\u4e22\u5f03\u4e8b\u52a1\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#362-external-journal","title":"3.6.2 External Journal","text":"<p>Optionally, an ext4 filesystem can be created with an external journal device (as opposed to an internal journal, which uses a reserved inode). In this case, on the filesystem device, <code>s_journal_inum</code> should be zero and <code>s_journal_uuid</code> should be set. On the journal device there will be an ext4 super block in the usual place, with a matching UUID. The journal superblock will be in the next full block after the superblock.</p> <p>\u53ef\u9009\u5730\uff0c\u53ef\u4ee5\u4f7f\u7528\u5916\u90e8\u65e5\u5fd7\u8bbe\u5907\u521b\u5efaext4\u6587\u4ef6\u7cfb\u7edf\uff08\u800c\u4e0d\u662f\u4f7f\u7528\u4fdd\u7559\u7d22\u5f15\u8282\u70b9\u7684\u5185\u90e8\u65e5\u5fd7\uff09\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5728\u6587\u4ef6\u7cfb\u7edf\u8bbe\u5907\u4e0a\uff0c<code>s_journal_inum</code>\u5e94\u4e3a\u96f6\uff0c\u5e76\u4e14\u5e94\u8bbe\u7f6e<code>s_johannal_uuid</code>\u3002\u5728\u65e5\u5fd7\u8bbe\u5907\u4e0a\uff0c\u5728\u901a\u5e38\u7684\u4f4d\u7f6e\u5c06\u6709\u4e00\u4e2aext4\u8d85\u7ea7\u5757\uff0c\u5177\u6709\u5339\u914d\u7684UUID\u3002\u65e5\u5fd7\u8d85\u7ea7\u5757\u5c06\u4f4d\u4e8e\u8d85\u7ea7\u5757\u4e4b\u540e\u7684\u4e0b\u4e00\u4e2a\u5b8c\u6574\u5757\u4e2d\u3002</p> 1024 bytes of padding ext4 Superblock Journal Superblock descriptor_block (data_blocks or revocation_block) [more data or revocations] commmit_block [more transactions\u2026] One transaction"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#363-block-header","title":"3.6.3 Block Header","text":"<p>Every block in the journal starts with a common 12-byte header <code>struct journal_header_s</code>:</p> <p>\u65e5\u5fd7\u4e2d\u7684\u6bcf\u4e2a\u5757\u90fd\u4ee5\u4e00\u4e2a\u516c\u5171\u768412\u5b57\u8282\u6807\u9898<code>struct journal_header_s</code>\u5f00\u5934\uff1a</p> Offset Type Name Description 0x0 __be32 h_magic jbd2 magic number, 0xC03B3998. 0x4 __be32 h_blocktype Description of what this block contains. See the jbd2_blocktype table below. 0x8 __be32 h_sequence The transaction ID that goes with this block. <p>The journal block type can be any one of:</p> <p>\u65e5\u8bb0\u8d26\u5757\u7c7b\u578b\u53ef\u4ee5\u662f\u4ee5\u4e0b\u4efb\u4e00\u7c7b\u578b\uff1a</p> Value Description 1 Descriptor. This block precedes a series of data blocks that were written through the journal during a transaction. 2 Block commit record. This block signifies the completion of a transaction. 3 Journal superblock, v1. 4 Journal superblock, v2. 5 Block revocation records. This speeds up recovery by enabling the journal to skip writing blocks that were subsequently rewritten."},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#364-super-block","title":"3.6.4 Super Block","text":"<p>The super block for the journal is much simpler as compared to ext4\u2019s. The key data kept within are size of the journal, and where to find the start of the log of transactions.</p> <p>\u4e0eext4\u76f8\u6bd4\uff0c\u65e5\u5fd7\u7684\u8d85\u7ea7\u5757\u8981\u7b80\u5355\u5f97\u591a\u3002\u4fdd\u5b58\u5728\u65e5\u5fd7\u4e2d\u7684\u5173\u952e\u6570\u636e\u662f\u65e5\u5fd7\u7684\u5927\u5c0f\uff0c\u4ee5\u53ca\u5728\u4f55\u5904\u67e5\u627e\u4e8b\u52a1\u65e5\u5fd7\u7684\u5f00\u59cb\u3002</p> <p>The journal superblock is recorded as <code>struct journal_superblock_s</code>, which is 1024 bytes long:</p> <p>\u65e5\u5fd7\u8d85\u7ea7\u5757\u8bb0\u5f55\u4e3a<code>struct journal_superblock_s</code>\uff0c\u957f\u5ea6\u4e3a1024\u5b57\u8282\uff1a</p> Offset Type Name Description Static information describing the journal. 0x0 journal_header_t (12 bytes) s_header Common header identifying this as a superblock. 0xC __be32 s_blocksize Journal device block size. 0x10 __be32 s_maxlen Total number of blocks in this journal. 0x14 __be32 s_first First block of log information. Dynamic information describing the current state of the log. 0x18 __be32 s_sequence First commit ID expected in log. 0x1C __be32 s_start Block number of the start of log. Contrary to the comments, this field being zero does not imply that the journal is clean! 0x20 __be32 s_errno Error value, as set by <code>jbd2_journal_abort()</code>. The remaining fields are only valid in a v2 superblock. 0x24 __be32 s_feature_compat; Compatible feature set. See the table jbd2_compat below. 0x28 __be32 s_feature_incompat Incompatible feature set. See the table jbd2_incompat below. 0x2C __be32 s_feature_ro_compat Read-only compatible feature set. There aren\u2019t any of these currently. 0x30 __u8 s_uuid[16] 128-bit uuid for journal. This is compared against the copy in the ext4 super block at mount time. 0x40 __be32 s_nr_users Number of file systems sharing this journal. 0x44 __be32 s_dynsuper Location of dynamic super block copy. (Not used?) 0x48 __be32 s_max_transaction Limit of journal blocks per transaction. (Not used?) 0x4C __be32 s_max_trans_data Limit of data blocks per transaction. (Not used?) 0x50 __u8 s_checksum_type Checksum algorithm used for the journal. See jbd2_checksum_type for more info. 0x51 __u8[3] s_padding2 0x54 __be32 s_num_fc_blocks Number of fast commit blocks in the journal. 0x58 __u32 s_padding[42] 0xFC __be32 s_checksum Checksum of the entire superblock, with this field set to zero. 0x100 __u8 s_users[16*48] ids of all file systems sharing the log. e2fsprogs/Linux don\u2019t allow shared external journals, but I imagine Lustre (or ocfs2?), which use the jbd2 code, might. <p>The journal compat features are any combination of the following:</p> <p>\u65e5\u5fd7\u517c\u5bb9\u529f\u80fd\u662f\u4ee5\u4e0b\u5404\u9879\u7684\u4efb\u610f\u7ec4\u5408\uff1a</p> Value Description 0x1 Journal maintains checksums on the data blocks. (JBD2_FEATURE_COMPAT_CHECKSUM) <p>The journal incompat features are any combination of the following:</p> <p>\u65e5\u5fd7\u4e0d\u517c\u5bb9\u529f\u80fd\u662f\u4ee5\u4e0b\u5404\u9879\u7684\u4efb\u610f\u7ec4\u5408\uff1a</p> Value Description 0x1 Journal has block revocation records. (JBD2_FEATURE_INCOMPAT_REVOKE) 0x2 Journal can deal with 64-bit block numbers. (JBD2_FEATURE_INCOMPAT_64BIT) 0x4 Journal commits asynchronously. (JBD2_FEATURE_INCOMPAT_ASYNC_COMMIT) 0x8 This journal uses v2 of the checksum on-disk format. Each journal metadata block gets its own checksum, and the block tags in the descriptor table contain checksums for each of the data blocks in the journal. (JBD2_FEATURE_INCOMPAT_CSUM_V2) 0x10 This journal uses v3 of the checksum on-disk format. This is the same as v2, but the journal block tag size is fixed regardless of the size of block numbers. (JBD2_FEATURE_INCOMPAT_CSUM_V3) 0x20 Journal has fast commit blocks. (JBD2_FEATURE_INCOMPAT_FAST_COMMIT) <p>Journal checksum type codes are one of the following. crc32 or crc32c are the most likely choices.</p> <p>\u65e5\u8bb0\u8d26\u6821\u9a8c\u548c\u7c7b\u578b\u4ee3\u7801\u662f\u4ee5\u4e0b\u4ee3\u7801\u4e4b\u4e00\u3002crc32\u6216crc32c\u662f\u6700\u53ef\u80fd\u7684\u9009\u62e9\u3002</p> Value Description 1 CRC32 2 MD5 3 SHA1 4 CRC32C"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#365-descriptor-block","title":"3.6.5 Descriptor Block","text":"<p>The descriptor block contains an array of journal block tags that describe the final locations of the data blocks that follow in the journal. Descriptor blocks are open-coded instead of being completely described by a data structure, but here is the block structure anyway. Descriptor blocks consume at least 36 bytes, but use a full block:</p> <p>\u63cf\u8ff0\u7b26\u5757\u5305\u542b\u4e00\u7ec4\u65e5\u5fd7\u5757\u6807\u8bb0\uff0c\u7528\u4e8e\u63cf\u8ff0\u65e5\u5fd7\u4e2d\u540e\u7eed\u6570\u636e\u5757\u7684\u6700\u7ec8\u4f4d\u7f6e\u3002\u63cf\u8ff0\u7b26\u5757\u662f\u5f00\u653e\u7f16\u7801\u7684\uff0c\u800c\u4e0d\u662f\u5b8c\u5168\u7531\u6570\u636e\u7ed3\u6784\u63cf\u8ff0\uff0c\u4f46\u65e0\u8bba\u5982\u4f55\uff0c\u8fd9\u91cc\u662f\u5757\u7ed3\u6784\u3002\u63cf\u8ff0\u7b26\u5757\u81f3\u5c11\u6d88\u801736\u4e2a\u5b57\u8282\uff0c\u4f46\u4f7f\u7528\u5b8c\u6574\u7684\u5757\uff1a</p> Offset Type Name Descriptor 0x0 journal_header_t (open coded) Common block header. 0xC struct journal_block_tag_s open coded array[] Enough tags either to fill up the block or to describe all the data blocks that follow this descriptor block. <p>Journal block tags have any of the following formats, depending on which journal feature and block tag flags are set.</p> <p>\u65e5\u5fd7\u5757\u6807\u8bb0\u5177\u6709\u4ee5\u4e0b\u4efb\u4f55\u683c\u5f0f\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u8bbe\u7f6e\u7684\u65e5\u5fd7\u7279\u5f81\u548c\u5757\u6807\u8bb0\u6807\u5fd7\u3002</p> <p>If JBD2_FEATURE_INCOMPAT_CSUM_V3 is set, the journal block tag is defined as <code>struct journal_block_tag3_s</code>, which looks like the following. The size is 16 or 32 bytes.</p> <p>\u5982\u679c\u8bbe\u7f6e\u4e86JBD2_FEATURE_COMPAT_CSUM_V3\uff0c\u5219\u65e5\u5fd7\u5757\u6807\u8bb0\u5b9a\u4e49\u4e3a\u201cstruct journal_block_tag3_s\u201d\uff0c\u5982\u4e0b\u6240\u793a\u3002\u5927\u5c0f\u4e3a16\u621632\u5b57\u8282\u3002</p> Offset Type Name Descriptor 0x0 __be32 t_blocknr Lower 32-bits of the location of where the corresponding data block should end up on disk. 0x4 __be32 t_flags Flags that go with the descriptor. See the table jbd2_tag_flags for more info. 0x8 __be32 t_blocknr_high Upper 32-bits of the location of where the corresponding data block should end up on disk. This is zero if JBD2_FEATURE_INCOMPAT_64BIT is not enabled. 0xC __be32 t_checksum Checksum of the journal UUID, the sequence number, and the data block. This field appears to be open coded. It always comes at the end of the tag, after t_checksum. This field is not present if the \u201csame UUID\u201d flag is set. 0x8 or 0xC char uuid[16] A UUID to go with this tag. This field appears to be copied from the <code>j_uuid</code> field in <code>struct journal_s</code>, but only tune2fs touches that field. <p>The journal tag flags are any combination of the following:</p> <p>\u65e5\u5fd7\u6807\u8bb0\u6807\u5fd7\u662f\u4ee5\u4e0b\u5404\u9879\u7684\u4efb\u610f\u7ec4\u5408\uff1a</p> Value Description 0x1 On-disk block is escaped. The first four bytes of the data block just happened to match the jbd2 magic number. 0x2 This block has the same UUID as previous, therefore the UUID field is omitted. 0x4 The data block was deleted by the transaction. (Not used?) 0x8 This is the last tag in this descriptor block. <p>If JBD2_FEATURE_INCOMPAT_CSUM_V3 is NOT set, the journal block tag is defined as <code>struct journal_block_tag_s</code>, which looks like the following. The size is 8, 12, 24, or 28 bytes:</p> <p>\u5982\u679c\u672a\u8bbe\u7f6eJBD2_FEATURE_COMPAT_CSUM_V3\uff0c\u5219\u65e5\u5fd7\u5757\u6807\u8bb0\u5b9a\u4e49\u4e3a<code>struct journal_block_tag_s</code>\uff0c\u5982\u4e0b\u6240\u793a\u3002\u5927\u5c0f\u4e3a8\u300112\u300124\u621628\u5b57\u8282\uff1a</p> Offset Type Name Descriptor 0x0 __be32 t_blocknr Lower 32-bits of the location of where the corresponding data block should end up on disk. 0x4 __be16 t_checksum Checksum of the journal UUID, the sequence number, and the data block. Note that only the lower 16 bits are stored. 0x6 __be16 t_flags Flags that go with the descriptor. See the table jbd2_tag_flags for more info. This next field is only present if the super block indicates support for 64-bit block numbers. 0x8 __be32 t_blocknr_high Upper 32-bits of the location of where the corresponding data block should end up on disk. This field appears to be open coded. It always comes at the end of the tag, after t_flags or t_blocknr_high. This field is not present if the \u201csame UUID\u201d flag is set. 0x8 or 0xC char uuid[16] A UUID to go with this tag. This field appears to be copied from the <code>j_uuid</code> field in <code>struct journal_s</code>, but only tune2fs touches that field. <p>If JBD2_FEATURE_INCOMPAT_CSUM_V2 or JBD2_FEATURE_INCOMPAT_CSUM_V3 are set, the end of the block is a <code>struct jbd2_journal_block_tail</code>, which looks like this:</p> <p>\u5982\u679c\u8bbe\u7f6e\u4e86JBD2_FEATURE_COMPAT_CSUM_V2\u6216JBD2_FEATURE_COMPACT_CSUM_V3\uff0c\u5219\u5757\u7684\u7ed3\u5c3e\u662f\u201cstruct JBD2_journal_block_tail\u201d\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> Offset Type Name Descriptor 0x0 __be32 t_checksum Checksum of the journal UUID + the descriptor block, with this field set to zero."},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#366-data-block","title":"3.6.6 Data Block","text":"<p>In general, the data blocks being written to disk through the journal are written verbatim into the journal file after the descriptor block. However, if the first four bytes of the block match the jbd2 magic number then those four bytes are replaced with zeroes and the \u201cescaped\u201d flag is set in the descriptor block tag.</p> <p>\u901a\u5e38\uff0c\u901a\u8fc7\u65e5\u5fd7\u5199\u5165\u78c1\u76d8\u7684\u6570\u636e\u5757\u5728\u63cf\u8ff0\u7b26\u5757\u4e4b\u540e\u9010\u5b57\u5199\u5165\u65e5\u5fd7\u6587\u4ef6\u3002\u4f46\u662f\uff0c\u5982\u679c\u5757\u7684\u524d\u56db\u4e2a\u5b57\u8282\u4e0ejbd2\u5e7b\u6570\u5339\u914d\uff0c\u5219\u8fd9\u56db\u4e2a\u5b57\u8282\u5c06\u66ff\u6362\u4e3a\u96f6\uff0c\u5e76\u5728\u63cf\u8ff0\u7b26\u5757\u6807\u8bb0\u4e2d\u8bbe\u7f6e\u201c\u8f6c\u4e49\u201d\u6807\u5fd7\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#367-revocation-block","title":"3.6.7 Revocation Block","text":"<p>A revocation block is used to prevent replay of a block in an earlier transaction. This is used to mark blocks that were journalled at one time but are no longer journalled. Typically this happens if a metadata block is freed and re-allocated as a file data block; in this case, a journal replay after the file block was written to disk will cause corruption.</p> <p>\u64a4\u9500\u5757\u7528\u4e8e\u9632\u6b62\u5728\u65e9\u671f\u4e8b\u52a1\u4e2d\u91cd\u653e\u5757\u3002\u8fd9\u7528\u4e8e\u6807\u8bb0\u4e00\u6b21\u8bb0\u5f55\u4f46\u4e0d\u518d\u8bb0\u5f55\u7684\u5757\u3002\u901a\u5e38\uff0c\u5982\u679c\u5143\u6570\u636e\u5757\u88ab\u91ca\u653e\u5e76\u91cd\u65b0\u5206\u914d\u4e3a\u6587\u4ef6\u6570\u636e\u5757\uff0c\u5c31\u4f1a\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\uff1b\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6587\u4ef6\u5757\u5199\u5165\u78c1\u76d8\u540e\u7684\u65e5\u5fd7\u91cd\u653e\u5c06\u5bfc\u81f4\u635f\u574f\u3002</p> <p>NOTE: This mechanism is NOT used to express \u201cthis journal block is superseded by this other journal block\u201d, as the author (djwong) mistakenly thought. Any block being added to a transaction will cause the removal of all existing revocation records for that block.</p> <p>\u6ce8\uff1a\u6b63\u5982\u4f5c\u8005\uff08djwong\uff09\u9519\u8bef\u5730\u8ba4\u4e3a\u7684\u90a3\u6837\uff0c\u6b64\u673a\u5236\u4e0d\u7528\u4e8e\u8868\u793a\u201c\u6b64\u65e5\u5fd7\u5757\u88ab\u5176\u4ed6\u65e5\u5fd7\u5757\u53d6\u4ee3\u201d\u3002\u6dfb\u52a0\u5230\u4e8b\u52a1\u4e2d\u7684\u4efb\u4f55\u5757\u90fd\u5c06\u5bfc\u81f4\u5220\u9664\u8be5\u5757\u7684\u6240\u6709\u73b0\u6709\u540a\u9500\u8bb0\u5f55\u3002</p> <p>Revocation blocks are described in <code>struct jbd2_journal_revoke_header_s</code>, are at least 16 bytes in length, but use a full block:</p> <p>\u540a\u9500\u5757\u5728<code>struct jbd2_journal_revoke_header_s</code>\u4e2d\u63cf\u8ff0\uff0c\u957f\u5ea6\u81f3\u5c11\u4e3a16\u5b57\u8282\uff0c\u4f46\u4f7f\u7528\u5b8c\u6574\u5757\uff1a</p> Offset Type Name Description 0x0 journal_header_t r_header Common block header. 0xC __be32 r_count Number of bytes used in this block. 0x10 __be32 or __be64 blocks[0] Blocks to revoke. <p>After r_count is a linear array of block numbers that are effectively revoked by this transaction. The size of each block number is 8 bytes if the superblock advertises 64-bit block number support, or 4 bytes otherwise.</p> <p>r_count\u4e4b\u540e\u662f\u4e00\u4e2a\u7ebf\u6027\u6570\u7ec4\uff0c\u7531\u8be5\u4e8b\u52a1\u6709\u6548\u64a4\u9500\u3002\u5982\u679c\u8d85\u7ea7\u5757\u901a\u544a64\u4f4d\u5757\u53f7\u652f\u6301\uff0c\u5219\u6bcf\u4e2a\u5757\u53f7\u7684\u5927\u5c0f\u4e3a8\u5b57\u8282\uff0c\u5426\u5219\u4e3a4\u5b57\u8282\u3002</p> <p>If JBD2_FEATURE_INCOMPAT_CSUM_V2 or JBD2_FEATURE_INCOMPAT_CSUM_V3 are set, the end of the revocation block is a <code>struct jbd2_journal_revoke_tail</code>, which has this format:</p> <p>\u5982\u679c\u8bbe\u7f6e\u4e86JBD2_FEATURE_COMPAT_CSUM_V2\u6216JBD2_FEATURE_COMPACT_CSUM_V3\uff0c\u5219\u540a\u9500\u5757\u7684\u7ed3\u5c3e\u4e3a<code>struct JBD2_journal_revoke_tail</code>\uff0c\u5176\u683c\u5f0f\u5982\u4e0b\uff1a</p> Offset Type Name Description 0x0 __be32 r_checksum Checksum of the journal UUID + revocation block"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#368-commit-block","title":"3.6.8 Commit Block","text":"<p>The commit block is a sentry that indicates that a transaction has been completely written to the journal. Once this commit block reaches the journal, the data stored with this transaction can be written to their final locations on disk.</p> <p>\u63d0\u4ea4\u5757\u662f\u4e00\u4e2a\u54e8\u5175\uff0c\u6307\u793a\u4e8b\u52a1\u5df2\u5b8c\u5168\u5199\u5165\u65e5\u5fd7\u3002\u4e00\u65e6\u8be5\u63d0\u4ea4\u5757\u5230\u8fbe\u65e5\u5fd7\uff0c\u4e0e\u8be5\u4e8b\u52a1\u4e00\u8d77\u5b58\u50a8\u7684\u6570\u636e\u5c31\u53ef\u4ee5\u5199\u5165\u78c1\u76d8\u4e0a\u7684\u6700\u7ec8\u4f4d\u7f6e\u3002</p> <p>The commit block is described by <code>struct commit_header</code>, which is 32 bytes long (but uses a full block):</p> <p>\u63d0\u4ea4\u5757\u7531<code>struct commit_header</code>\u63cf\u8ff0\uff0c\u5b83\u957f32\u5b57\u8282\uff08\u4f46\u4f7f\u7528\u5b8c\u6574\u5757\uff09\uff1a</p> Offset Type Name Descriptor 0x0 journal_header_s (open coded) Common block header. 0xC unsigned char h_chksum_type The type of checksum to use to verify the integrity of the data blocks in the transaction. See jbd2_checksum_type for more info. 0xD unsigned char h_chksum_size The number of bytes used by the checksum. Most likely 4. 0xE unsigned char h_padding[2] 0x10 __be32 h_chksum[JBD2_CHECKSUM_BYTES] 32 bytes of space to store checksums. If JBD2_FEATURE_INCOMPAT_CSUM_V2 or JBD2_FEATURE_INCOMPAT_CSUM_V3 are set, the first <code>__be32</code> is the checksum of the journal UUID and the entire commit block, with this field zeroed. If JBD2_FEATURE_COMPAT_CHECKSUM is set, the first <code>__be32</code> is the crc32 of all the blocks already written to the transaction. 0x30 __be64 h_commit_sec The time that the transaction was committed, in seconds since the epoch. 0x38 __be32 h_commit_nsec Nanoseconds component of the above timestamp."},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#369-fast-commits","title":"3.6.9 Fast commits","text":"<p>Fast commit area is organized as a log of tag length values. Each TLV has a <code>struct ext4_fc_tl</code> in the beginning which stores the tag and the length of the entire field. It is followed by variable length tag specific value. Here is the list of supported tags and their meanings:</p> <p>\u5feb\u901f\u63d0\u4ea4\u533a\u57df\u88ab\u7ec4\u7ec7\u4e3a\u6807\u8bb0\u957f\u5ea6\u503c\u7684\u65e5\u5fd7\u3002\u6bcf\u4e2aTLV\u7684\u5f00\u5934\u90fd\u6709\u4e00\u4e2a<code>structext4_fc_tl</code>\uff0c\u7528\u4e8e\u5b58\u50a8\u6807\u8bb0\u548c\u6574\u4e2a\u5b57\u6bb5\u7684\u957f\u5ea6\u3002\u5176\u540e\u662f\u53ef\u53d8\u957f\u5ea6\u6807\u8bb0\u7279\u5b9a\u503c\u3002\u4ee5\u4e0b\u662f\u652f\u6301\u7684\u6807\u8bb0\u53ca\u5176\u542b\u4e49\u5217\u8868\uff1a</p> Tag Meaning Value struct Description EXT4_FC_TAG_HEAD Fast commit area header <code>struct ext4_fc_head</code> Stores the TID of the transaction after which these fast commits should be applied. EXT4_FC_TAG_ADD_RANGE Add extent to inode <code>struct ext4_fc_add_range</code> Stores the inode number and extent to be added in this inode EXT4_FC_TAG_DEL_RANGE Remove logical offsets to inode <code>struct ext4_fc_del_range</code> Stores the inode number and the logical offset range that needs to be removed EXT4_FC_TAG_CREAT Create directory entry for a newly created file <code>struct ext4_fc_dentry_info</code> Stores the parent inode number, inode number and directory entry of the newly created file EXT4_FC_TAG_LINK Link a directory entry to an inode <code>struct ext4_fc_dentry_info</code> Stores the parent inode number, inode number and directory entry EXT4_FC_TAG_UNLINK Unlink a directory entry of an inode <code>struct ext4_fc_dentry_info</code> Stores the parent inode number, inode number and directory entry EXT4_FC_TAG_PAD Padding (unused area) None Unused bytes in the fast commit area. EXT4_FC_TAG_TAIL Mark the end of a fast commit <code>struct ext4_fc_tail</code> Stores the TID of the commit, CRC of the fast commit of which this tag represents the end of"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#3610-fast-commit-replay-idempotence","title":"3.6.10 Fast Commit Replay Idempotence\u5feb\u901f\u63d0\u4ea4\u91cd\u653e\u5373\u65f6\u6027","text":"<p>Fast commits tags are idempotent in nature provided the recovery code follows certain rules. The guiding principle that the commit path follows while committing is that it stores the result of a particular operation instead of storing the procedure.</p> <p>\u53ea\u8981\u6062\u590d\u4ee3\u7801\u9075\u5faa\u67d0\u4e9b\u89c4\u5219\uff0c\u5feb\u901f\u63d0\u4ea4\u6807\u7b7e\u672c\u8d28\u4e0a\u662f\u5e42\u7b49\u7684\u3002\u63d0\u4ea4\u65f6\u63d0\u4ea4\u8def\u5f84\u9075\u5faa\u7684\u6307\u5bfc\u539f\u5219\u662f\uff0c\u5b83\u5b58\u50a8\u7279\u5b9a\u64cd\u4f5c\u7684\u7ed3\u679c\uff0c\u800c\u4e0d\u662f\u5b58\u50a8\u8fc7\u7a0b\u3002</p> <p>Let\u2019s consider this rename operation: \u2018mv /a /b\u2019. Let\u2019s assume dirent \u2018/a\u2019 was associated with inode 10. During fast commit, instead of storing this operation as a procedure \u201crename a to b\u201d, we store the resulting file system state as a \u201cseries\u201d of outcomes:</p> <ul> <li>Link dirent b to inode 10</li> <li>Unlink dirent a</li> <li>Inode 10 with valid refcount</li> </ul> <p>\u8ba9\u6211\u4eec\u8003\u8651\u4e00\u4e0b\u8fd9\u4e2a\u91cd\u547d\u540d\u64cd\u4f5c\uff1a\u201cmv/a/b\u201d\u3002\u8ba9\u6211\u4eec\u5047\u8bbe\u76ee\u5f55\u201c/a\u201d\u4e0e\u7d22\u5f15\u8282\u70b910\u76f8\u5173\u8054\u3002\u5728\u5feb\u901f\u63d0\u4ea4\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u5c06\u751f\u6210\u7684\u6587\u4ef6\u7cfb\u7edf\u72b6\u6001\u5b58\u50a8\u4e3a\u201c\u4e00\u7cfb\u5217\u201d\u7ed3\u679c\uff0c\u800c\u4e0d\u662f\u5c06\u6b64\u64cd\u4f5c\u5b58\u50a8\u4e3a\u201c\u5c06a\u91cd\u547d\u540d\u4e3ab\u201d\u7684\u8fc7\u7a0b\uff1a</p> <ul> <li>\u5c06\u76ee\u5f55b\u94fe\u63a5\u5230\u7d22\u5f15\u8282\u70b910</li> <li>\u53d6\u6d88\u94fe\u63a5\u76ee\u5f55</li> <li>\u5177\u6709\u6709\u6548\u5f15\u7528\u8ba1\u6570\u7684\u7d22\u5f15\u8282\u70b910</li> </ul> <p>Now when recovery code runs, it needs \u201cenforce\u201d this state on the file system. This is what guarantees idempotence of fast commit replay.</p> <p>\u73b0\u5728\uff0c\u5f53\u6062\u590d\u4ee3\u7801\u8fd0\u884c\u65f6\uff0c\u5b83\u9700\u8981\u5728\u6587\u4ef6\u7cfb\u7edf\u4e0a\u201c\u5f3a\u5236\u201d\u6b64\u72b6\u6001\u3002\u8fd9\u5c31\u662f\u4fdd\u8bc1\u5feb\u901f\u63d0\u4ea4\u91cd\u653e\u7684\u5e42\u7b49\u6027\u7684\u539f\u56e0\u3002</p> <p>Let\u2019s take an example of a procedure that is not idempotent and see how fast commits make it idempotent. Consider following sequence of operations:</p> <p>\u8ba9\u6211\u4eec\u4ee5\u4e00\u4e2a\u975e\u5e42\u7b49\u7684\u8fc7\u7a0b\u4e3a\u4f8b\uff0c\u770b\u770b\u63d0\u4ea4\u7684\u901f\u5ea6\u5982\u4f55\u4f7f\u5176\u6210\u4e3a\u5e42\u7b49\u7684\u3002\u8003\u8651\u4ee5\u4e0b\u64cd\u4f5c\u987a\u5e8f\uff1a</p> <ol> <li>rm A</li> <li>mv B A</li> <li>read A</li> </ol> <p>If we store this sequence of operations as is then the replay is not idempotent. Let\u2019s say while in replay, we crash after (2). During the second replay, file A (which was actually created as a result of \u201cmv B A\u201d operation) would get deleted. Thus, file named A would be absent when we try to read A. So, this sequence of operations is not idempotent. However, as mentioned above, instead of storing the procedure fast commits store the outcome of each procedure. Thus the fast commit log for above procedure would be as follows:</p> <p>\u5982\u679c\u6211\u4eec\u6309\u539f\u6837\u5b58\u50a8\u6b64\u64cd\u4f5c\u5e8f\u5217\uff0c\u5219\u91cd\u653e\u4e0d\u662f\u5e42\u7b49\u7684\u3002\u8ba9\u6211\u4eec\u5047\u8bbe\u5728\u56de\u653e\u65f6\uff0c\u6211\u4eec\u5728\uff082\uff09\u4e4b\u540e\u5d29\u6e83\u3002\u5728\u7b2c\u4e8c\u6b21\u56de\u653e\u671f\u95f4\uff0c\u6587\u4ef6A\uff08\u5b9e\u9645\u4e0a\u662f\u4f5c\u4e3a\u201cmv B A\u201d\u64cd\u4f5c\u7684\u7ed3\u679c\u521b\u5efa\u7684\uff09\u5c06\u88ab\u5220\u9664\u3002\u56e0\u6b64\uff0c\u5f53\u6211\u4eec\u5c1d\u8bd5\u8bfb\u53d6A\u65f6\uff0c\u540d\u4e3aA\u7684\u6587\u4ef6\u5c06\u4e0d\u5b58\u5728\u3002\u56e0\u6b64\uff0c\u6b64\u64cd\u4f5c\u5e8f\u5217\u4e0d\u662f\u5e42\u7b49\u7684\u3002\u7136\u800c\uff0c\u5982\u4e0a\u6240\u8ff0\uff0c\u5feb\u901f\u63d0\u4ea4\u4e0d\u662f\u5b58\u50a8\u8fc7\u7a0b\uff0c\u800c\u662f\u5b58\u50a8\u6bcf\u4e2a\u8fc7\u7a0b\u7684\u7ed3\u679c\u3002\u56e0\u6b64\uff0c\u4e0a\u8ff0\u8fc7\u7a0b\u7684\u5feb\u901f\u63d0\u4ea4\u65e5\u5fd7\u5982\u4e0b\uff1a</p> <p>(Let\u2019s assume dirent A was linked to inode 10 and dirent B was linked to inode 11 before the replay)</p> <p>\uff08\u5047\u8bbe\u76ee\u5f55A\u5728\u91cd\u653e\u4e4b\u524d\u94fe\u63a5\u5230\u7d22\u5f15\u8282\u70b910\uff0c\u76ee\u5f55B\u5728\u91cd\u653e\u4e4b\u524d\u8fde\u63a5\u5230\u7d22\u5f15\u8282\u70b911\uff09</p> <ol> <li>Unlink A</li> <li>Link A to inode 11</li> <li>Unlink B</li> <li>Inode 11</li> </ol> <p>If we crash after (3) we will have file A linked to inode 11. During the second replay, we will remove file A (inode 11). But we will create it back and make it point to inode 11. We won\u2019t find B, so we\u2019ll just skip that step. At this point, the refcount for inode 11 is not reliable, but that gets fixed by the replay of last inode 11 tag. Thus, by converting a non-idempotent procedure into a series of idempotent outcomes, fast commits ensured idempotence during the replay.</p> <p>\u5982\u679c\u6211\u4eec\u5728\uff083\uff09\u4e4b\u540e\u5d29\u6e83\uff0c\u90a3\u4e48\u6587\u4ef6A\u5c06\u94fe\u63a5\u5230inode 11\u3002\u5728\u7b2c\u4e8c\u6b21\u56de\u653e\u671f\u95f4\uff0c\u6211\u4eec\u5c06\u5220\u9664\u6587\u4ef6A\uff08inode 11\uff09\u3002\u4f46\u662f\u6211\u4eec\u5c06\u521b\u5efa\u5b83\u5e76\u4f7f\u5176\u6307\u5411inode 11\u3002\u6211\u4eec\u627e\u4e0d\u5230B\uff0c\u6240\u4ee5\u6211\u4eec\u8df3\u8fc7\u8fd9\u4e00\u6b65\u3002\u6b64\u65f6\uff0cinode 11\u7684refcount\u4e0d\u53ef\u9760\uff0c\u4f46\u901a\u8fc7\u56de\u653e\u6700\u540e\u4e00\u4e2ainode 11\u6807\u8bb0\uff0c\u8fd9\u4e00\u70b9\u5f97\u5230\u4e86\u89e3\u51b3\u3002\u56e0\u6b64\uff0c\u901a\u8fc7\u5c06\u975e\u5e42\u7b49\u8fc7\u7a0b\u8f6c\u6362\u4e3a\u4e00\u7cfb\u5217\u5e42\u7b49\u7ed3\u679c\uff0c\u5feb\u901f\u63d0\u4ea4\u786e\u4fdd\u4e86\u91cd\u653e\u671f\u95f4\u7684\u5e42\u7b49\u6027\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#3611-journal-checkpoint","title":"3.6.11 Journal Checkpoint\u65e5\u5fd7\u68c0\u67e5\u70b9","text":"<p>Checkpointing the journal ensures all transactions and their associated buffers are submitted to the disk. In-progress transactions are waited upon and included in the checkpoint. Checkpointing is used internally during critical updates to the filesystem including journal recovery, filesystem resizing, and freeing of the journal_t structure.</p> <p>\u68c0\u67e5\u65e5\u5fd7\u53ef\u786e\u4fdd\u6240\u6709\u4e8b\u52a1\u53ca\u5176\u76f8\u5173\u7f13\u51b2\u533a\u90fd\u63d0\u4ea4\u5230\u78c1\u76d8\u3002\u6b63\u5728\u8fdb\u884c\u7684\u4e8b\u52a1\u88ab\u7b49\u5f85\u5e76\u5305\u542b\u5728\u68c0\u67e5\u70b9\u4e2d\u3002\u68c0\u67e5\u70b9\u5728\u6587\u4ef6\u7cfb\u7edf\u7684\u5173\u952e\u66f4\u65b0\uff08\u5305\u62ec\u65e5\u5fd7\u6062\u590d\u3001\u6587\u4ef6\u7cfb\u7edf\u5927\u5c0f\u8c03\u6574\u548c\u91ca\u653ejournal_t\u7ed3\u6784\uff09\u671f\u95f4\u5728\u5185\u90e8\u4f7f\u7528\u3002</p> <p>A journal checkpoint can be triggered from userspace via the ioctl EXT4_IOC_CHECKPOINT. This ioctl takes a single, u64 argument for flags. Currently, three flags are supported. First, EXT4_IOC_CHECKPOINT_FLAG_DRY_RUN can be used to verify input to the ioctl. It returns error if there is any invalid input, otherwise it returns success without performing any checkpointing. This can be used to check whether the ioctl exists on a system and to verify there are no issues with arguments or flags. The other two flags are EXT4_IOC_CHECKPOINT_FLAG_DISCARD and EXT4_IOC_CHECKPOINT_FLAG_ZEROOUT. These flags cause the journal blocks to be discarded or zero-filled, respectively, after the journal checkpoint is complete. EXT4_IOC_CHECKPOINT_FLAG_DISCARD and EXT4_IOC_CHECKPOINT_FLAG_ZEROOUT cannot both be set. The ioctl may be useful when snapshotting a system or for complying with content deletion SLOs.</p> <p>\u65e5\u5fd7\u68c0\u67e5\u70b9\u53ef\u4ee5\u901a\u8fc7ioctl EXT4_IOC_checkpoint\u4ece\u7528\u6237\u7a7a\u95f4\u89e6\u53d1\u3002\u8fd9\u4e2aioctl\u4f7f\u7528\u4e00\u4e2au64\u53c2\u6570\u4f5c\u4e3a\u6807\u5fd7\u3002\u76ee\u524d\uff0c\u652f\u6301\u4e09\u4e2a\u6807\u5fd7\u3002\u9996\u5148\uff0cEXT4_IOC_CHECKPOINT_FLAG_DRY_RUN\u53ef\u7528\u4e8e\u9a8c\u8bc1ioctl\u7684\u8f93\u5165\u3002\u5982\u679c\u6709\u4efb\u4f55\u65e0\u6548\u8f93\u5165\uff0c\u5b83\u5c06\u8fd4\u56de\u9519\u8bef\uff0c\u5426\u5219\u5b83\u5c06\u8fd4\u56de\u6210\u529f\uff0c\u800c\u4e0d\u6267\u884c\u4efb\u4f55\u68c0\u67e5\u70b9\u3002\u8fd9\u53ef\u7528\u4e8e\u68c0\u67e5\u7cfb\u7edf\u4e0a\u662f\u5426\u5b58\u5728ioctl\uff0c\u5e76\u9a8c\u8bc1\u53c2\u6570\u6216\u6807\u5fd7\u662f\u5426\u5b58\u5728\u95ee\u9898\u3002\u5176\u4ed6\u4e24\u4e2a\u6807\u5fd7\u662fEXT4_IOC_CHECKPPOINT_FLAG_DISCARD\u548cEXT4_IOC_COHECKPPOInt_FLAG_ZEROOUT\u3002\u5728\u65e5\u5fd7\u68c0\u67e5\u70b9\u5b8c\u6210\u540e\uff0c\u8fd9\u4e9b\u6807\u5fd7\u5206\u522b\u5bfc\u81f4\u65e5\u5fd7\u5757\u88ab\u4e22\u5f03\u6216\u88ab\u96f6\u586b\u5145\u3002EXT4_IOC_CHECKPOINT_FLAG_DISCARD\u548cEXT4_IOC_COHECKPOInt_FLAG_ZEROOUT\u4e0d\u80fd\u540c\u65f6\u8bbe\u7f6e\u3002ioctl\u5728\u62cd\u6444\u7cfb\u7edf\u5feb\u7167\u6216\u9075\u5b88\u5185\u5bb9\u5220\u9664SLO\u65f6\u53ef\u80fd\u5f88\u6709\u7528\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#37-orphan-file","title":"3.7 Orphan file\u5b64\u513f\u6587\u4ef6","text":"<p>In unix there can inodes that are unlinked from directory hierarchy but that are still alive because they are open. In case of crash the filesystem has to clean up these inodes as otherwise they (and the blocks referenced from them) would leak. Similarly if we truncate or extend the file, we need not be able to perform the operation in a single journalling transaction. In such case we track the inode as orphan so that in case of crash extra blocks allocated to the file get truncated.</p> <p>\u5728unix\u4e2d\uff0c\u53ef\u4ee5\u6709\u4ece\u76ee\u5f55\u5c42\u6b21\u7ed3\u6784\u4e2d\u53d6\u6d88\u94fe\u63a5\u7684inode\uff0c\u4f46\u7531\u4e8e\u5b83\u4eec\u662f\u6253\u5f00\u7684\uff0c\u6240\u4ee5\u5b83\u4eec\u4ecd\u7136\u6709\u6548\u3002\u5982\u679c\u53d1\u751f\u5d29\u6e83\uff0c\u6587\u4ef6\u7cfb\u7edf\u5fc5\u987b\u6e05\u7406\u8fd9\u4e9binode\uff0c\u5426\u5219\u5b83\u4eec\uff08\u4ee5\u53ca\u4ece\u5b83\u4eec\u5f15\u7528\u7684\u5757\uff09\u5c06\u6cc4\u6f0f\u3002\u7c7b\u4f3c\u5730\uff0c\u5982\u679c\u6211\u4eec\u622a\u65ad\u6216\u6269\u5c55\u6587\u4ef6\uff0c\u6211\u4eec\u4e0d\u9700\u8981\u5728\u5355\u4e2a\u65e5\u5fd7\u4e8b\u52a1\u4e2d\u6267\u884c\u8be5\u64cd\u4f5c\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5c06inode\u4f5c\u4e3a\u5b64\u513f\u8fdb\u884c\u8ddf\u8e2a\uff0c\u4ee5\u4fbf\u5728\u53d1\u751f\u5d29\u6e83\u65f6\u622a\u65ad\u5206\u914d\u7ed9\u6587\u4ef6\u7684\u989d\u5916\u5757\u3002</p> <p>Traditionally ext4 tracks orphan inodes in a form of single linked list where superblock contains the inode number of the last orphan inode (s_last_orphan field) and then each inode contains inode number of the previously orphaned inode (we overload i_dtime inode field for this). However this filesystem global single linked list is a scalability bottleneck for workloads that result in heavy creation of orphan inodes. When orphan file feature (COMPAT_ORPHAN_FILE) is enabled, the filesystem has a special inode (referenced from the superblock through s_orphan_file_inum) with several blocks. Each of these blocks has a structure:</p> <p>\u4f20\u7edf\u4e0a\uff0cext4\u4ee5\u5355\u94fe\u63a5\u5217\u8868\u7684\u5f62\u5f0f\u8ddf\u8e2a\u5b64\u513f\u7d22\u5f15\u8282\u70b9\uff0c\u5176\u4e2d\u8d85\u7ea7\u5757\u5305\u542b\u6700\u540e\u4e00\u4e2a\u5b64\u513f\u7d22\u5f15\u8282\u70b9\u7684\u7d22\u5f15\u8282\u70b9\u53f7\uff08s_last_orphan\u5b57\u6bb5\uff09\uff0c\u7136\u540e\u6bcf\u4e2a\u7d22\u5f15\u8282\u70b9\u5305\u542b\u5148\u524d\u5b64\u513f\u7d22\u5f15\u8282\u70b9\uff08\u4e3a\u6b64\u6211\u4eec\u91cd\u8f7di_dtime\u7d22\u5f15\u8282\u70b9\u5b57\u6bb5\uff09\u3002\u7136\u800c\uff0c\u5bf9\u4e8e\u5bfc\u81f4\u5927\u91cf\u521b\u5efa\u5b64\u7acbinode\u7684\u5de5\u4f5c\u8d1f\u8f7d\u6765\u8bf4\uff0c\u8fd9\u4e2a\u6587\u4ef6\u7cfb\u7edf\u5168\u5c40\u5355\u94fe\u63a5\u5217\u8868\u662f\u4e00\u4e2a\u53ef\u6269\u5c55\u6027\u74f6\u9888\u3002\u5f53\u542f\u7528\u5b64\u7acb\u6587\u4ef6\u529f\u80fd\uff08COMPAT_orphan_file\uff09\u65f6\uff0c\u6587\u4ef6\u7cfb\u7edf\u6709\u4e00\u4e2a\u7279\u6b8a\u7684inode\uff08\u901a\u8fc7s_orphan_file_inum\u4ece\u8d85\u7ea7\u5757\u5f15\u7528\uff09\uff0c\u5176\u4e2d\u5305\u542b\u51e0\u4e2a\u5757\u3002\u8fd9\u4e9b\u5757\u4e2d\u7684\u6bcf\u4e00\u4e2a\u90fd\u6709\u4e00\u4e2a\u7ed3\u6784\uff1a</p> Offset Type Name Description 0x0 Array of __le32 entries Orphan inode entries Each __le32 entry is either empty (0) or it contains inode number of an orphan inode. blocksize-8 __le32 ob_magic Magic value stored in orphan block tail (0x0b10ca04) blocksize-4 __le32 ob_checksum Checksum of the orphan block. <p>When a filesystem with orphan file feature is writeably mounted, we set RO_COMPAT_ORPHAN_PRESENT feature in the superblock to indicate there may be valid orphan entries. In case we see this feature when mounting the filesystem, we read the whole orphan file and process all orphan inodes found there as usual. When cleanly unmounting the filesystem we remove the RO_COMPAT_ORPHAN_PRESENT feature to avoid unnecessary scanning of the orphan file and also make the filesystem fully compatible with older kernels.</p> <p>\u5f53\u5177\u6709\u5b64\u7acb\u6587\u4ef6\u7279\u6027\u7684\u6587\u4ef6\u7cfb\u7edf\u4ee5\u53ef\u5199\u65b9\u5f0f\u88c5\u5165\u65f6\uff0c\u6211\u4eec\u5728\u8d85\u7ea7\u5757\u4e2d\u8bbe\u7f6eRO_COMPAT_orphan_PRESENT\u7279\u6027\uff0c\u4ee5\u6307\u793a\u53ef\u80fd\u5b58\u5728\u6709\u6548\u7684\u5b64\u7acb\u6761\u76ee\u3002\u5982\u679c\u6211\u4eec\u5728\u5b89\u88c5\u6587\u4ef6\u7cfb\u7edf\u65f6\u770b\u5230\u8fd9\u4e2a\u7279\u6027\uff0c\u6211\u4eec\u5c06\u8bfb\u53d6\u6574\u4e2a\u5b64\u7acb\u6587\u4ef6\uff0c\u5e76\u50cf\u5f80\u5e38\u4e00\u6837\u5904\u7406\u5728\u90a3\u91cc\u627e\u5230\u7684\u6240\u6709\u5b64\u7acbinode\u3002\u5728\u5f7b\u5e95\u5378\u8f7d\u6587\u4ef6\u7cfb\u7edf\u65f6\uff0c\u6211\u4eec\u5220\u9664\u4e86RO_COMPAT_ORPHAN_PRESENT\u7279\u6027\uff0c\u4ee5\u907f\u514d\u5bf9\u5b64\u7acb\u6587\u4ef6\u8fdb\u884c\u4e0d\u5fc5\u8981\u7684\u626b\u63cf\uff0c\u5e76\u4f7f\u6587\u4ef6\u7cfb\u7edf\u4e0e\u65e7\u5185\u6838\u5b8c\u5168\u517c\u5bb9\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#4-dynamic-structures","title":"4 Dynamic Structures","text":"<p>Dynamic metadata are created on the fly when files and blocks are allocated to files.</p> <p>\u5f53\u6587\u4ef6\u548c\u5757\u5206\u914d\u7ed9\u6587\u4ef6\u65f6\uff0c\u52a8\u6001\u5143\u6570\u636e\u4f1a\u52a8\u6001\u521b\u5efa\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#41-index-nodes","title":"4.1 Index Nodes","text":"<p>In a regular UNIX filesystem, the inode stores all the metadata pertaining to the file (time stamps, block maps, extended attributes, etc), not the directory entry. To find the information associated with a file, one must traverse the directory files to find the directory entry associated with a file, then load the inode to find the metadata for that file. ext4 appears to cheat (for performance reasons) a little bit by storing a copy of the file type (normally stored in the inode) in the directory entry. (Compare all this to FAT, which stores all the file information directly in the directory entry, but does not support hard links and is in general more seek-happy than ext4 due to its simpler block allocator and extensive use of linked lists.)</p> <p>\u5728\u5e38\u89c4UNIX\u6587\u4ef6\u7cfb\u7edf\u4e2d\uff0cinode\u5b58\u50a8\u4e0e\u6587\u4ef6\u76f8\u5173\u7684\u6240\u6709\u5143\u6570\u636e\uff08\u65f6\u95f4\u6233\u3001\u5757\u6620\u5c04\u3001\u6269\u5c55\u5c5e\u6027\u7b49\uff09\uff0c\u800c\u4e0d\u662f\u76ee\u5f55\u6761\u76ee\u3002\u8981\u67e5\u627e\u4e0e\u6587\u4ef6\u76f8\u5173\u7684\u4fe1\u606f\uff0c\u5fc5\u987b\u904d\u5386\u76ee\u5f55\u6587\u4ef6\u4ee5\u67e5\u627e\u4e0e\u6587\u4ef6\u5173\u8054\u7684\u76ee\u5f55\u6761\u76ee\uff0c\u7136\u540e\u52a0\u8f7d\u7d22\u5f15\u8282\u70b9\u4ee5\u67e5\u627e\u8be5\u6587\u4ef6\u7684\u5143\u6570\u636e\u3002ext4\u901a\u8fc7\u5728\u76ee\u5f55\u6761\u76ee\u4e2d\u5b58\u50a8\u6587\u4ef6\u7c7b\u578b\u7684\u526f\u672c\uff08\u901a\u5e38\u5b58\u50a8\u5728inode\u4e2d\uff09\uff0c\u4f3c\u4e4e\u6709\u70b9\u4f5c\u5f0a\uff08\u51fa\u4e8e\u6027\u80fd\u539f\u56e0\uff09\u3002\uff08\u5c06\u6240\u6709\u8fd9\u4e9b\u4e0eFAT\u8fdb\u884c\u6bd4\u8f83\uff0cFAT\u5c06\u6240\u6709\u6587\u4ef6\u4fe1\u606f\u76f4\u63a5\u5b58\u50a8\u5728\u76ee\u5f55\u6761\u76ee\u4e2d\uff0c\u4f46\u4e0d\u652f\u6301\u786c\u94fe\u63a5\uff0c\u5e76\u4e14\u7531\u4e8e\u5176\u66f4\u7b80\u5355\u7684\u5757\u5206\u914d\u5668\u548c\u5927\u91cf\u4f7f\u7528\u94fe\u63a5\u5217\u8868\uff0c\u56e0\u6b64\u901a\u5e38\u6bd4ext4\u66f4\u6613\u4e8e\u67e5\u627e\u3002\uff09</p> <p>The inode table is a linear array of <code>struct ext4_inode</code>. The table is sized to have enough blocks to store at least <code>sb.s_inode_size * sb.s_inodes_per_group</code> bytes. The number of the block group containing an inode can be calculated as <code>(inode_number - 1) / sb.s_inodes_per_group</code>, and the offset into the group\u2019s table is <code>(inode_number - 1) % sb.s_inodes_per_group</code>. There is no inode 0.</p> <p>inode\u8868\u662f\u201cstructext4_inode\u201d\u7684\u7ebf\u6027\u6570\u7ec4\u3002\u8be5\u8868\u7684\u5927\u5c0f\u8db3\u4ee5\u5b58\u50a8\u81f3\u5c11<code>sb.s_inode_size*sb.s_index_per_group</code>\u5b57\u8282\u7684\u5757\u3002\u5305\u542b\u7d22\u5f15\u8282\u70b9\u7684\u5757\u7ec4\u7684\u6570\u91cf\u53ef\u4ee5\u8ba1\u7b97\u4e3a<code>(inode_number-1)/sb.s_inodes_per_group</code>\uff0c\u7ec4\u8868\u4e2d\u7684\u504f\u79fb\u91cf\u4e3a<code>(node_number-1)%sb.s_inode_per_group</code>\u3002\u6ca1\u6709\u7d22\u5f15\u8282\u70b90\u3002</p> <p>The inode checksum is calculated against the FS UUID, the inode number, and the inode structure itself.</p> <p>\u7d22\u5f15\u8282\u70b9\u6821\u9a8c\u548c\u662f\u6839\u636eFS UUID\u3001\u7d22\u5f15\u8282\u70b9\u7f16\u53f7\u548c\u7d22\u5f15\u8282\u70b9\u7ed3\u6784\u672c\u8eab\u8ba1\u7b97\u7684\u3002</p> <p>The inode table entry is laid out in <code>struct ext4_inode</code>.</p> <p>inode\u8868\u6761\u76ee\u5728<code>structext4_inode</code>\u4e2d\u8fdb\u884c\u5e03\u5c40\u3002</p> Offset Size Name Description 0x0 __le16 i_mode File mode. See the table i_mode below. 0x2 __le16 i_uid Lower 16-bits of Owner UID. 0x4 __le32 i_size_lo Lower 32-bits of size in bytes. 0x8 __le32 i_atime Last access time, in seconds since the epoch. However, if the EA_INODE inode flag is set, this inode stores an extended attribute value and this field contains the checksum of the value. 0xC __le32 i_ctime Last inode change time, in seconds since the epoch. However, if the EA_INODE inode flag is set, this inode stores an extended attribute value and this field contains the lower 32 bits of the attribute value\u2019s reference count. 0x10 __le32 i_mtime Last data modification time, in seconds since the epoch. However, if the EA_INODE inode flag is set, this inode stores an extended attribute value and this field contains the number of the inode that owns the extended attribute. 0x14 __le32 i_dtime Deletion Time, in seconds since the epoch. 0x18 __le16 i_gid Lower 16-bits of GID. 0x1A __le16 i_links_count Hard link count. Normally, ext4 does not permit an inode to have more than 65,000 hard links. This applies to files as well as directories, which means that there cannot be more than 64,998 subdirectories in a directory (each subdirectory\u2019s \u2018..\u2019 entry counts as a hard link, as does the \u2018.\u2019 entry in the directory itself). With the DIR_NLINK feature enabled, ext4 supports more than 64,998 subdirectories by setting this field to 1 to indicate that the number of hard links is not known. 0x1C __le32 i_blocks_lo Lower 32-bits of \u201cblock\u201d count. If the huge_file feature flag is not set on the filesystem, the file consumes <code>i_blocks_lo</code> 512-byte blocks on disk. If huge_file is set and EXT4_HUGE_FILE_FL is NOT set in <code>inode.i_flags</code>, then the file consumes <code>i_blocks_lo + (i_blocks_hi &lt;&lt; 32)</code> 512-byte blocks on disk. If huge_file is set and EXT4_HUGE_FILE_FL IS set in <code>inode.i_flags</code>, then this file consumes (<code>i_blocks_lo + i_blocks_hi</code> &lt;&lt; 32) filesystem blocks on disk. 0x20 __le32 i_flags Inode flags. See the table i_flags below. 0x24 4 bytes i_osd1 See the table i_osd1 for more details. 0x28 60 bytes i_block[EXT4_N_BLOCKS=15] Block map or extent tree. See the section \u201cThe Contents of inode.i_block\u201d. 0x64 __le32 i_generation File version (for NFS). 0x68 __le32 i_file_acl_lo Lower 32-bits of extended attribute block. ACLs are of course one of many possible extended attributes; I think the name of this field is a result of the first use of extended attributes being for ACLs. 0x6C __le32 i_size_high / i_dir_acl Upper 32-bits of file/directory size. In ext2/3 this field was named i_dir_acl, though it was usually set to zero and never used. 0x70 __le32 i_obso_faddr (Obsolete) fragment address. 0x74 12 bytes i_osd2 See the table i_osd2 for more details. 0x80 __le16 i_extra_isize Size of this inode - 128. Alternately, the size of the extended inode fields beyond the original ext2 inode, including this field. 0x82 __le16 i_checksum_hi Upper 16-bits of the inode checksum. 0x84 __le32 i_ctime_extra Extra change time bits. This provides sub-second precision. See Inode Timestamps section. 0x88 __le32 i_mtime_extra Extra modification time bits. This provides sub-second precision. 0x8C __le32 i_atime_extra Extra access time bits. This provides sub-second precision. 0x90 __le32 i_crtime File creation time, in seconds since the epoch. 0x94 __le32 i_crtime_extra Extra file creation time bits. This provides sub-second precision. 0x98 __le32 i_version_hi Upper 32-bits for version number. 0x9C __le32 i_projid Project ID. <p>The <code>i_mode</code> value is a combination of the following flags:</p> Value Description 0x1 S_IXOTH (Others may execute) 0x2 S_IWOTH (Others may write) 0x4 S_IROTH (Others may read) 0x8 S_IXGRP (Group members may execute) 0x10 S_IWGRP (Group members may write) 0x20 S_IRGRP (Group members may read) 0x40 S_IXUSR (Owner may execute) 0x80 S_IWUSR (Owner may write) 0x100 S_IRUSR (Owner may read) 0x200 S_ISVTX (Sticky bit) 0x400 S_ISGID (Set GID) 0x800 S_ISUID (Set UID) These are mutually-exclusive file types: 0x1000 S_IFIFO (FIFO) 0x2000 S_IFCHR (Character device) 0x4000 S_IFDIR (Directory) 0x6000 S_IFBLK (Block device) 0x8000 S_IFREG (Regular file) 0xA000 S_IFLNK (Symbolic link) 0xC000 S_IFSOCK (Socket) <p>The <code>i_flags</code> field is a combination of these values:</p> Value Description 0x1 This file requires secure deletion (EXT4_SECRM_FL). (not implemented) 0x2 This file should be preserved, should undeletion be desired (EXT4_UNRM_FL). (not implemented) 0x4 File is compressed (EXT4_COMPR_FL). (not really implemented) 0x8 All writes to the file must be synchronous (EXT4_SYNC_FL). 0x10 File is immutable (EXT4_IMMUTABLE_FL). 0x20 File can only be appended (EXT4_APPEND_FL). 0x40 The dump(1) utility should not dump this file (EXT4_NODUMP_FL). 0x80 Do not update access time (EXT4_NOATIME_FL). 0x100 Dirty compressed file (EXT4_DIRTY_FL). (not used) 0x200 File has one or more compressed clusters (EXT4_COMPRBLK_FL). (not used) 0x400 Do not compress file (EXT4_NOCOMPR_FL). (not used) 0x800 Encrypted inode (EXT4_ENCRYPT_FL). This bit value previously was EXT4_ECOMPR_FL (compression error), which was never used. 0x1000 Directory has hashed indexes (EXT4_INDEX_FL). 0x2000 AFS magic directory (EXT4_IMAGIC_FL). 0x4000 File data must always be written through the journal (EXT4_JOURNAL_DATA_FL). 0x8000 File tail should not be merged (EXT4_NOTAIL_FL). (not used by ext4) 0x10000 All directory entry data should be written synchronously (see <code>dirsync</code>) (EXT4_DIRSYNC_FL). 0x20000 Top of directory hierarchy (EXT4_TOPDIR_FL). 0x40000 This is a huge file (EXT4_HUGE_FILE_FL). 0x80000 Inode uses extents (EXT4_EXTENTS_FL). 0x100000 Verity protected file (EXT4_VERITY_FL). 0x200000 Inode stores a large extended attribute value in its data blocks (EXT4_EA_INODE_FL). 0x400000 This file has blocks allocated past EOF (EXT4_EOFBLOCKS_FL). (deprecated) 0x01000000 Inode is a snapshot (<code>EXT4_SNAPFILE_FL</code>). (not in mainline) 0x04000000 Snapshot is being deleted (<code>EXT4_SNAPFILE_DELETED_FL</code>). (not in mainline) 0x08000000 Snapshot shrink has completed (<code>EXT4_SNAPFILE_SHRUNK_FL</code>). (not in mainline) 0x10000000 Inode has inline data (EXT4_INLINE_DATA_FL). 0x20000000 Create children with the same project ID (EXT4_PROJINHERIT_FL). 0x80000000 Reserved for ext4 library (EXT4_RESERVED_FL). Aggregate flags: 0x705BDFFF User-visible flags. 0x604BC0FF User-modifiable flags. Note that while EXT4_JOURNAL_DATA_FL and EXT4_EXTENTS_FL can be set with setattr, they are not in the kernel\u2019s EXT4_FL_USER_MODIFIABLE mask, since it needs to handle the setting of these flags in a special manner and they are masked out of the set of flags that are saved directly to i_flags. <p>The <code>osd1</code> field has multiple meanings depending on the creator:</p> <p>Linux:</p> Offset Size Name Description 0x0 __le32 l_i_version Inode version. However, if the EA_INODE inode flag is set, this inode stores an extended attribute value and this field contains the upper 32 bits of the attribute value\u2019s reference count. <p>Hurd:</p> Offset Size Name Description 0x0 __le32 h_i_translator ?? <p>Masix:</p> Offset Size Name Description 0x0 __le32 m_i_reserved ?? <p>The <code>osd2</code> field has multiple meanings depending on the filesystem creator:</p> <p><code>osd2</code>\u5b57\u6bb5\u6709\u591a\u79cd\u542b\u4e49\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u6587\u4ef6\u7cfb\u7edf\u521b\u5efa\u8005\uff1a</p> <p>Linux:</p> Offset Size Name Description 0x0 __le16 l_i_blocks_high Upper 16-bits of the block count. Please see the note attached to i_blocks_lo. 0x2 __le16 l_i_file_acl_high Upper 16-bits of the extended attribute block (historically, the file ACL location). See the Extended Attributes section below. 0x4 __le16 l_i_uid_high Upper 16-bits of the Owner UID. 0x6 __le16 l_i_gid_high Upper 16-bits of the GID. 0x8 __le16 l_i_checksum_lo Lower 16-bits of the inode checksum. 0xA __le16 l_i_reserved Unused. <p>Hurd:</p> Offset Size Name Description 0x0 __le16 h_i_reserved1 ?? 0x2 __u16 h_i_mode_high Upper 16-bits of the file mode. 0x4 __le16 h_i_uid_high Upper 16-bits of the Owner UID. 0x6 __le16 h_i_gid_high Upper 16-bits of the GID. 0x8 __u32 h_i_author Author code? <p>Masix:</p> Offset Size Name Description 0x0 __le16 h_i_reserved1 ?? 0x2 __u16 m_i_file_acl_high Upper 16-bits of the extended attribute block (historically, the file ACL location). 0x4 __u32 m_i_reserved2[2] ??"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#411-inode-size","title":"4.1.1 Inode Size","text":"<p>In ext2 and ext3, the inode structure size was fixed at 128 bytes (<code>EXT2_GOOD_OLD_INODE_SIZE</code>) and each inode had a disk record size of 128 bytes. Starting with ext4, it is possible to allocate a larger on-disk inode at format time for all inodes in the filesystem to provide space beyond the end of the original ext2 inode. The on-disk inode record size is recorded in the superblock as <code>s_inode_size</code>. The number of bytes actually used by struct ext4_inode beyond the original 128-byte ext2 inode is recorded in the <code>i_extra_isize</code> field for each inode, which allows struct ext4_inode to grow for a new kernel without having to upgrade all of the on-disk inodes. Access to fields beyond EXT2_GOOD_OLD_INODE_SIZE should be verified to be within <code>i_extra_isize</code>. By default, ext4 inode records are 256 bytes, and (as of August 2019) the inode structure is 160 bytes (<code>i_extra_isize = 32</code>). The extra space between the end of the inode structure and the end of the inode record can be used to store extended attributes. Each inode record can be as large as the filesystem block size, though this is not terribly efficient.</p> <p>\u5728ext2\u548cext3\u4e2d\uff0cinode\u7ed3\u6784\u5927\u5c0f\u56fa\u5b9a\u4e3a128\u5b57\u8282\uff08<code>ext2_GOOD_OLD_inode_size</code>\uff09\uff0c\u6bcf\u4e2ainode\u7684\u78c1\u76d8\u8bb0\u5f55\u5927\u5c0f\u4e3a128\u5b57\u8282\u3002\u4eceext4\u5f00\u59cb\uff0c\u53ef\u4ee5\u5728\u683c\u5f0f\u5316\u65f6\u4e3a\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u6240\u6709inode\u5206\u914d\u66f4\u5927\u7684\u78c1\u76d8\u4e0ainode\uff0c\u4ee5\u63d0\u4f9b\u8d85\u51fa\u539f\u59cbext2 inode\u672b\u5c3e\u7684\u7a7a\u95f4\u3002\u78c1\u76d8\u4e0a\u7684inode\u8bb0\u5f55\u5927\u5c0f\u5728\u8d85\u7ea7\u5757\u4e2d\u8bb0\u5f55\u4e3a<code>s_inode_size</code>\u3002\u7ed3\u6784ext4_inode\u5b9e\u9645\u4f7f\u7528\u7684\u5b57\u8282\u6570\u8d85\u51fa\u4e86\u539f\u59cb\u7684128\u5b57\u8282ext2 inode\uff0c\u8bb0\u5f55\u5728\u6bcf\u4e2ainode\u7684<code>i_extra_isize</code>\u5b57\u6bb5\u4e2d\uff0c\u8fd9\u5141\u8bb8\u7ed3\u6784ext4_node\u4e3a\u65b0\u5185\u6838\u589e\u957f\uff0c\u800c\u4e0d\u5fc5\u5347\u7ea7\u6240\u6709\u78c1\u76d8\u4e0a\u7684inode\u3002\u5e94\u9a8c\u8bc1\u5bf9EXT2_GOOD_OLD_INODE_SIZE\u4ee5\u5916\u5b57\u6bb5\u7684\u8bbf\u95ee\u662f\u5426\u5728<code>i_extra_isize</code>\u8303\u56f4\u5185\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cext4 inode\u8bb0\u5f55\u4e3a256\u5b57\u8282\uff0c\uff08\u622a\u81f32019\u5e748\u6708\uff09inode\u7ed3\u6784\u4e3a160\u5b57\u8282\uff08<code>i_extra_isize=32</code>\uff09\u3002\u7d22\u5f15\u8282\u70b9\u7ed3\u6784\u672b\u7aef\u548c\u7d22\u5f15\u8282\u70b9\u8bb0\u5f55\u672b\u7aef\u4e4b\u95f4\u7684\u989d\u5916\u7a7a\u95f4\u53ef\u7528\u4e8e\u5b58\u50a8\u6269\u5c55\u5c5e\u6027\u3002\u6bcf\u4e2ainode\u8bb0\u5f55\u53ef\u4ee5\u4e0e\u6587\u4ef6\u7cfb\u7edf\u5757\u5927\u5c0f\u4e00\u6837\u5927\uff0c\u5c3d\u7ba1\u8fd9\u5e76\u4e0d\u662f\u975e\u5e38\u6709\u6548\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#412-finding-an-inode","title":"4.1.2 Finding an Inode","text":"<p>Each block group contains <code>sb-&gt;s_inodes_per_group</code> inodes. Because inode 0 is defined not to exist, this formula can be used to find the block group that an inode lives in: <code>bg = (inode_num - 1) / sb-&gt;s_inodes_per_group</code>. The particular inode can be found within the block group\u2019s inode table at <code>index = (inode_num - 1) % sb-&gt;s_inodes_per_group</code>. To get the byte address within the inode table, use <code>offset = index * sb-&gt;s_inode_size</code>.</p> <p>\u6bcf\u4e2a\u5757\u7ec4\u5305\u542b<code>sb-&gt;s_inodes_per_group</code>inode\u3002\u56e0\u4e3ainode 0\u88ab\u5b9a\u4e49\u4e3a\u4e0d\u5b58\u5728\uff0c\u6240\u4ee5\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u516c\u5f0f\u6765\u67e5\u627einode\u6240\u5728\u7684\u5757\u7ec4\uff1a<code>bg=\uff08inode_num-1\uff09/sb-&gt;s_inodes_per_group</code>\u3002\u53ef\u4ee5\u5728\u5757\u7ec4\u7684\u7d22\u5f15\u8282\u70b9\u8868\u4e2d\u7684<code>index=\uff08inode_num-1\uff09%sb-&gt;s_inodes_per_group</code>\u5904\u627e\u5230\u7279\u5b9a\u7684\u7d22\u5f15\u8282\u70b9\u3002\u8981\u83b7\u53d6inode\u8868\u4e2d\u7684\u5b57\u8282\u5730\u5740\uff0c\u8bf7\u4f7f\u7528<code>offset=index*sb-&gt;s_inode_size</code>\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#413-inode-timestamps","title":"4.1.3 Inode Timestamps","text":"<p>Four timestamps are recorded in the lower 128 bytes of the inode structure \u2013 inode change time (ctime), access time (atime), data modification time (mtime), and deletion time (dtime). The four fields are 32-bit signed integers that represent seconds since the Unix epoch (1970-01-01 00:00:00 GMT), which means that the fields will overflow in January 2038. If the filesystem does not have orphan_file feature, inodes that are not linked from any directory but are still open (orphan inodes) have the dtime field overloaded for use with the orphan list. The superblock field <code>s_last_orphan</code> points to the first inode in the orphan list; dtime is then the number of the next orphaned inode, or zero if there are no more orphans.</p> <p>\u7d22\u5f15\u8282\u70b9\u7ed3\u6784\u7684\u8f83\u4f4e128\u5b57\u8282\u4e2d\u8bb0\u5f55\u4e86\u56db\u4e2a\u65f6\u95f4\u6233\uff1a\u7d22\u5f15\u8282\u70b9\u66f4\u6539\u65f6\u95f4\uff08ctime\uff09\u3001\u8bbf\u95ee\u65f6\u95f4\uff08atime\uff09\u3001\u6570\u636e\u4fee\u6539\u65f6\u95f4\uff08mtime\uff09\u548c\u5220\u9664\u65f6\u95f4\uff08dtime\uff09\u3002\u8fd9\u56db\u4e2a\u5b57\u6bb5\u662f32\u4f4d\u6709\u7b26\u53f7\u6574\u6570\uff0c\u8868\u793a\u81eaUnix\u65f6\u4ee3\uff081970-01-01 00:00:00 GMT\uff09\u4ee5\u6765\u7684\u79d2\u6570\uff0c\u8fd9\u610f\u5473\u7740\u8fd9\u4e9b\u5b57\u6bb5\u5c06\u57282038\u5e741\u6708\u6ea2\u51fa\u3002\u5982\u679c\u6587\u4ef6\u7cfb\u7edf\u4e0d\u5177\u6709orphan_file\u7279\u6027\uff0c\u5219\u672a\u4ece\u4efb\u4f55\u76ee\u5f55\u94fe\u63a5\u4f46\u4ecd\u5904\u4e8e\u6253\u5f00\u72b6\u6001\u7684inode\uff08\u5b64\u513finode\uff09\u4f1a\u91cd\u8f7ddtime\u5b57\u6bb5\uff0c\u4ee5\u4fbf\u4e0e\u5b64\u513f\u5217\u8868\u4e00\u8d77\u4f7f\u7528\u3002\u8d85\u7ea7\u5757\u5b57\u6bb5\u201cs_last_orphan\u201d\u6307\u5411\u5b64\u513f\u5217\u8868\u4e2d\u7684\u7b2c\u4e00\u4e2ainode\uff1bdtime\u662f\u4e0b\u4e00\u4e2a\u5b64\u513finode\u7684\u6570\u91cf\uff0c\u5982\u679c\u6ca1\u6709\u66f4\u591a\u5b64\u513finode\uff0c\u5219\u4e3a\u96f6\u3002</p> <p>If the inode structure size <code>sb-&gt;s_inode_size</code> is larger than 128 bytes and the <code>i_inode_extra</code> field is large enough to encompass the respective <code>i_[cma]time_extra</code> field, the ctime, atime, and mtime inode fields are widened to 64 bits. Within this \u201cextra\u201d 32-bit field, the lower two bits are used to extend the 32-bit seconds field to be 34 bit wide; the upper 30 bits are used to provide nanosecond timestamp accuracy. Therefore, timestamps should not overflow until May 2446. dtime was not widened. There is also a fifth timestamp to record inode creation time (crtime); this field is 64-bits wide and decoded in the same manner as 64-bit [cma]time. Neither crtime nor dtime are accessible through the regular stat() interface, though debugfs will report them.</p> <p>\u5982\u679cinode\u7ed3\u6784\u5927\u5c0f<code>sb-&gt;s_inode_size</code>\u5927\u4e8e128\u5b57\u8282\uff0c\u5e76\u4e14<code>i_inode_extra</code>\u5b57\u6bb5\u8db3\u591f\u5927\uff0c\u8db3\u4ee5\u5305\u542b\u76f8\u5e94\u7684<code>i_[cma]time_extra</code>\u5b57\u6bb5\uff0c\u5219ctime\u3001atime\u548cmtime inode\u5b57\u6bb5\u5c06\u6269\u5c55\u523064\u4f4d\u3002\u5728\u8fd9\u4e2a\u201c\u989d\u5916\u201d32\u4f4d\u5b57\u6bb5\u4e2d\uff0c\u8f83\u4f4e\u7684\u4e24\u4f4d\u7528\u4e8e\u5c0632\u4f4d\u79d2\u5b57\u6bb5\u6269\u5c55\u523034\u4f4d\u5bbd\uff1b\u9ad830\u4f4d\u7528\u4e8e\u63d0\u4f9b\u7eb3\u79d2\u65f6\u95f4\u6233\u7cbe\u5ea6\u3002\u56e0\u6b64\uff0c\u65f6\u95f4\u6233\u5e94\u8be5\u57285\u67082446\u65e5\u4e4b\u524d\u4e0d\u4f1a\u6ea2\u51fa\u3002\u65f6\u95f4\u6ca1\u6709\u5ef6\u957f\u3002\u8fd8\u6709\u7b2c\u4e94\u4e2a\u65f6\u95f4\u6233\u6765\u8bb0\u5f55inode\u521b\u5efa\u65f6\u95f4\uff08crtime\uff09\uff1b\u8be5\u5b57\u6bb5\u4e3a64\u6bd4\u7279\u5bbd\uff0c\u5e76\u4e14\u4ee5\u4e0e64\u6bd4\u7279[cma]\u65f6\u95f4\u76f8\u540c\u7684\u65b9\u5f0f\u89e3\u7801\u3002crtime\u548cdtime\u90fd\u4e0d\u80fd\u901a\u8fc7\u5e38\u89c4stat\uff08\uff09\u63a5\u53e3\u8bbf\u95ee\uff0c\u5c3d\u7ba1debugfs\u4f1a\u62a5\u544a\u5b83\u4eec\u3002</p> <p>We use the 32-bit signed time value plus (2^32 * (extra epoch bits)). In other words:</p> <p>\u6211\u4eec\u4f7f\u752832\u4f4d\u6709\u7b26\u53f7\u65f6\u95f4\u503c\u52a0\uff082^32*\uff08\u989d\u5916\u7684\u5386\u5143\u4f4d\uff09\uff09\u3002\u6362\u53e5\u8bdd\u8bf4\uff1a</p> Extra epoch bits MSB of 32-bit time Adjustment for signed 32-bit to 64-bit tv_sec Decoded 64-bit tv_sec valid time range 0 0 1 0 <code>-0x80000000 - -0x00000001</code> 1901-12-13 to 1969-12-31 0 0 0 0 <code>0x000000000 - 0x07fffffff</code> 1970-01-01 to 2038-01-19 0 1 1 0x100000000 <code>0x080000000 - 0x0ffffffff</code> 2038-01-19 to 2106-02-07 0 1 0 0x100000000 <code>0x100000000 - 0x17fffffff</code> 2106-02-07 to 2174-02-25 1 0 1 0x200000000 <code>0x180000000 - 0x1ffffffff</code> 2174-02-25 to 2242-03-16 1 0 0 0x200000000 <code>0x200000000 - 0x27fffffff</code> 2242-03-16 to 2310-04-04 1 1 1 0x300000000 <code>0x280000000 - 0x2ffffffff</code> 2310-04-04 to 2378-04-22 1 1 0 0x300000000 <code>0x300000000 - 0x37fffffff</code> 2378-04-22 to 2446-05-10 <p>This is a somewhat odd encoding since there are effectively seven times as many positive values as negative values. There have also been long-standing bugs decoding and encoding dates beyond 2038, which don\u2019t seem to be fixed as of kernel 3.12 and e2fsprogs 1.42.8. 64-bit kernels incorrectly use the extra epoch bits 1,1 for dates between 1901 and 1970. At some point the kernel will be fixed and e2fsck will fix this situation, assuming that it is run before 2310.</p> <p>\u8fd9\u662f\u4e00\u79cd\u6709\u70b9\u5947\u602a\u7684\u7f16\u7801\uff0c\u56e0\u4e3a\u5b9e\u9645\u4e0a\u6b63\u503c\u7684\u6570\u91cf\u662f\u8d1f\u503c\u7684\u4e03\u500d\u3002\u57282038\u5e74\u4e4b\u540e\uff0c\u89e3\u7801\u548c\u7f16\u7801\u4e5f\u5b58\u5728\u7740\u957f\u671f\u5b58\u5728\u7684\u9519\u8bef\uff0c\u4ece\u5185\u68383.12\u548ce2fsprogs 1.42.8\u5f00\u59cb\uff0c\u8fd9\u4e9b\u95ee\u9898\u4f3c\u4e4e\u8fd8\u6ca1\u6709\u5f97\u5230\u89e3\u51b3\u300264\u4f4d\u5185\u6838\u9519\u8bef\u5730\u5c06\u989d\u5916\u7684\u5386\u5143\u4f4d1\uff0c1\u7528\u4e8e1901\u5e74\u81f31970\u5e74\u4e4b\u95f4\u7684\u65e5\u671f\u3002\u5728\u67d0\u4e2a\u65f6\u523b\uff0c\u5185\u6838\u5c06\u88ab\u4fee\u590d\uff0ce2fsck\u5c06\u4fee\u590d\u8fd9\u79cd\u60c5\u51b5\uff0c\u5047\u8bbe\u5b83\u57282310\u4e4b\u524d\u8fd0\u884c\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#42-the-contents-of-inodei_block","title":"4.2 The Contents of inode.i_block","text":"<p>Depending on the type of file an inode describes, the 60 bytes of storage in <code>inode.i_block</code> can be used in different ways. In general, regular files and directories will use it for file block indexing information, and special files will use it for special purposes.</p> <p>\u6839\u636einode\u63cf\u8ff0\u7684\u6587\u4ef6\u7c7b\u578b\uff0c<code>inode.i_block</code>\u4e2d\u768460\u5b57\u8282\u5b58\u50a8\u53ef\u4ee5\u4ee5\u4e0d\u540c\u7684\u65b9\u5f0f\u4f7f\u7528\u3002\u901a\u5e38\uff0c\u5e38\u89c4\u6587\u4ef6\u548c\u76ee\u5f55\u4f1a\u5c06\u5176\u7528\u4e8e\u6587\u4ef6\u5757\u7d22\u5f15\u4fe1\u606f\uff0c\u800c\u7279\u6b8a\u6587\u4ef6\u4f1a\u5c06\u5176\u7528\u4f5c\u7279\u6b8a\u7528\u9014\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#421-symbolic-links","title":"4.2.1 Symbolic Links","text":"<p>The target of a symbolic link will be stored in this field if the target string is less than 60 bytes long. Otherwise, either extents or block maps will be used to allocate data blocks to store the link target.</p> <p>\u5982\u679c\u76ee\u6807\u5b57\u7b26\u4e32\u957f\u5ea6\u5c0f\u4e8e60\u5b57\u8282\uff0c\u5219\u7b26\u53f7\u94fe\u63a5\u7684\u76ee\u6807\u5c06\u5b58\u50a8\u5728\u6b64\u5b57\u6bb5\u4e2d\u3002\u5426\u5219\uff0c\u5c06\u4f7f\u7528\u533a\u6bb5\u6216\u5757\u6620\u5c04\u6765\u5206\u914d\u6570\u636e\u5757\u4ee5\u5b58\u50a8\u94fe\u63a5\u76ee\u6807\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#422-directindirect-block-addressing","title":"4.2.2 Direct/Indirect Block Addressing","text":"<p>In ext2/3, file block numbers were mapped to logical block numbers by means of an (up to) three level 1-1 block map. To find the logical block that stores a particular file block, the code would navigate through this increasingly complicated structure. Notice that there is neither a magic number nor a checksum to provide any level of confidence that the block isn\u2019t full of garbage.</p> <p></p> <p>\u5728ext2/3\u4e2d\uff0c\u6587\u4ef6\u5757\u53f7\u901a\u8fc7\u4e09\u7ea71-1\u5757\u6620\u5c04\u6620\u5c04\u5230\u903b\u8f91\u5757\u53f7\u3002\u4e3a\u4e86\u627e\u5230\u5b58\u50a8\u7279\u5b9a\u6587\u4ef6\u5757\u7684\u903b\u8f91\u5757\uff0c\u4ee3\u7801\u5c06\u5728\u8fd9\u4e2a\u65e5\u76ca\u590d\u6742\u7684\u7ed3\u6784\u4e2d\u5bfc\u822a\u3002\u8bf7\u6ce8\u610f\uff0c\u65e2\u6ca1\u6709\u5e7b\u6570\u4e5f\u6ca1\u6709\u6821\u9a8c\u548c\u6765\u63d0\u4f9b\u4efb\u4f55\u7ea7\u522b\u7684\u7f6e\u4fe1\u5ea6\uff0c\u5373\u8be5\u5757\u6ca1\u6709\u5145\u6ee1\u5783\u573e\u3002</p> i.i_block\u504f\u79fb \u6307\u5411\u4f55\u5904 0\u523011 \u76f4\u63a5\u6620\u5c04\u5230\u6587\u4ef6\u57570\u523011 12 \u95f4\u63a5\u5757\uff1a\uff08\u6587\u4ef6\u575712\u5230\uff08<code>$block_size</code>/4\uff09+11\uff0c\u5982\u679c\u662f4KiB\u5757\uff0c\u5219\u4e3a12\u52301035\uff09\u95f4\u63a5\u5757\u504f\u79fb\u6307\u5411\uff08<code>$block _size</code>/4\uff09\u76f4\u63a5\u6620\u5c04\u5230\uff08<code>$sblock_size</code>/4\uff09\u5757\uff08\u5982\u679c\u662f4K iB\u5757\u5219\u4e3a1024\uff09 13 \u53cc\u95f4\u63a5\u5757\uff1a\uff08\u6587\u4ef6\u5757<code>$block_size</code>/4+12\u5230\uff08<code>$blocks_size</code>/4\uff09^2+\uff08<code>$block _size</code>+4\uff09+11\uff0c\u62161036\u81f31049611\uff08\u5982\u679c\u662f4KiB\u5757\uff09\u53cc\u95f4\u63a5\u5757\u504f\u79fb\u6307\u5411\uff08<code>$Block_size</code>/4\uff09\u6620\u5c04\u5230\uff08<code>$Block _size</code>/4\uff09\u95f4\u63a5\u5757\uff08\u5982\u679c\u662f4KiB\u5757\uff0c\u5219\u4e3a1024\uff09 14 \u4e09\u91cd\u95f4\u63a5\u5757\uff1a\uff08\u6587\u4ef6\u5757\uff08<code>$block_size</code>/4\uff09^2+\uff08<code>$block _size</code>/4\uff09+12\u5230\uff08<code>$block_size</code>/4\uff09^3+\uff08<code>$block_size</code>/4\uff09^ 2+\uff08<code>$block_size</code>/4\uff09+12\uff0c\u62161049612\u81f31074791436\uff08\u5982\u679c\u662f4KiB\u5757\uff09\u4e09\u91cd\u95f4\u63a5\u5757\u504f\u79fb0\u6307\u5411\uff08<code>$Block_size</code>/4\uff09\u6620\u5c04\u5230\uff08<code>$Block _size</code>/4\uff09\u4e24\u4e2a\u95f4\u63a5\u5757\uff08\u5982\u679c\u662f4KiB\u5757\uff0c\u5219\u4e3a1024\uff09\u4e24\u6b21\u95f4\u63a5\u5757\u504f\u79fb1\u6307\u5411\uff08<code>$sblock_size</code>/4\uff09\u4e09\u91cd\u5757\u504f\u79fb0\u5230\uff08<code>$sock_size</code>\uff09\u6620\u5c04\u5230\uff08<code>$block_size</code>/4\uff09\u4e2a\u5757\uff08\u5982\u679c\u662f4KiB\u5757\uff0c\u5219\u4e3a1024\u4e2a\uff09 <p>Note that with this block mapping scheme, it is necessary to fill out a lot of mapping data even for a large contiguous file! This inefficiency led to the creation of the extent mapping scheme, discussed below.</p> <p>\u8bf7\u6ce8\u610f\uff0c\u4f7f\u7528\u6b64\u5757\u6620\u5c04\u65b9\u6848\uff0c\u5373\u4f7f\u5bf9\u4e8e\u5927\u578b\u8fde\u7eed\u6587\u4ef6\uff0c\u4e5f\u9700\u8981\u586b\u5199\u5927\u91cf\u6620\u5c04\u6570\u636e\uff01\u8fd9\u79cd\u4f4e\u6548\u7387\u5bfc\u81f4\u4e86\u4ee5\u4e0b\u8ba8\u8bba\u7684\u8303\u56f4\u6620\u5c04\u65b9\u6848\u7684\u521b\u5efa\u3002</p> <p>Notice also that a file using this mapping scheme cannot be placed higher than 2^32 blocks.</p> <p>\u8bf7\u6ce8\u610f\uff0c\u4f7f\u7528\u6b64\u6620\u5c04\u65b9\u6848\u7684\u6587\u4ef6\u4e0d\u80fd\u653e\u7f6e\u5728\u9ad8\u4e8e2^32\u5757\u7684\u4f4d\u7f6e\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#423-extent-tree","title":"4.2.3 Extent Tree","text":"<p>In ext4, the file to logical block map has been replaced with an extent tree. Under the old scheme, allocating a contiguous run of 1,000 blocks requires an indirect block to map all 1,000 entries; with extents, the mapping is reduced to a single <code>struct ext4_extent</code> with <code>ee_len = 1000</code>. If flex_bg is enabled, it is possible to allocate very large files with a single extent, at a considerable reduction in metadata block use, and some improvement in disk efficiency. The inode must have the extents flag (0x80000) flag set for this feature to be in use.</p> <p>\u5728ext4\u4e2d\uff0c\u6587\u4ef6\u5230\u903b\u8f91\u5757\u6620\u5c04\u5df2\u88ab\u6269\u5c55\u6811\u66ff\u6362\u3002\u6839\u636e\u65e7\u65b9\u6848\uff0c\u5206\u914d1000\u4e2a\u5757\u7684\u8fde\u7eed\u8fd0\u884c\u9700\u8981\u4e00\u4e2a\u95f4\u63a5\u5757\u6765\u6620\u5c04\u6240\u67091000\u4e2a\u6761\u76ee\uff1b\u5bf9\u4e8e\u6269\u5c55\u533a\uff0c\u6620\u5c04\u88ab\u7b80\u5316\u4e3a\u5355\u4e2a<code>structext4_extent</code>\uff0c<code>ee_len=1000</code>\u3002\u5982\u679c\u542f\u7528\u4e86flex_bg\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u5355\u4e2a\u6269\u5c55\u533a\u5206\u914d\u975e\u5e38\u5927\u7684\u6587\u4ef6\uff0c\u540c\u65f6\u5927\u5927\u51cf\u5c11\u4e86\u5143\u6570\u636e\u5757\u7684\u4f7f\u7528\uff0c\u5e76\u63d0\u9ad8\u4e86\u78c1\u76d8\u6548\u7387\u3002\u7d22\u5f15\u8282\u70b9\u5fc5\u987b\u8bbe\u7f6e\u6269\u5c55\u533a\u6807\u5fd7\uff080x80000\uff09\uff0c\u624d\u80fd\u4f7f\u7528\u6b64\u529f\u80fd\u3002</p> <p>Extents are arranged as a tree. Each node of the tree begins with a <code>struct ext4_extent_header</code>. If the node is an interior node (<code>eh.eh_depth</code> &gt; 0), the header is followed by <code>eh.eh_entries</code> instances of <code>struct ext4_extent_idx</code>; each of these index entries points to a block containing more nodes in the extent tree. If the node is a leaf node (<code>eh.eh_depth == 0</code>), then the header is followed by <code>eh.eh_entries</code> instances of <code>struct ext4_extent</code>; these instances point to the file\u2019s data blocks. The root node of the extent tree is stored in <code>inode.i_block</code>, which allows for the first four extents to be recorded without the use of extra metadata blocks.</p> <p>\u8303\u56f4\u4ee5\u6811\u7684\u5f62\u5f0f\u6392\u5217\u3002\u6811\u7684\u6bcf\u4e2a\u8282\u70b9\u90fd\u4ee5<code>struct ext4_extent_header</code>\u5f00\u5934\u3002\u5982\u679c\u8be5\u8282\u70b9\u662f\u5185\u90e8\u8282\u70b9\uff08<code>eh.eh_depth</code>&gt;0\uff09\uff0c\u5219\u6807\u5934\u540e\u9762\u8ddf\u7740<code>struct ext4_extent_idx</code>\u7684<code>eh.eh-entries</code>\u5b9e\u4f8b\uff1b\u8fd9\u4e9b\u7d22\u5f15\u6761\u76ee\u4e2d\u7684\u6bcf\u4e00\u4e2a\u90fd\u6307\u5411\u6269\u5c55\u6811\u4e2d\u5305\u542b\u66f4\u591a\u8282\u70b9\u7684\u5757\u3002\u5982\u679c\u8282\u70b9\u662f\u53f6\u8282\u70b9\uff08<code>eh.eh_deph==0</code>\uff09\uff0c\u5219\u6807\u5934\u540e\u9762\u8ddf\u7740<code>structext4_extent</code>\u7684<code>eh.eh-entries</code>\u5b9e\u4f8b\uff1b\u8fd9\u4e9b\u5b9e\u4f8b\u6307\u5411\u6587\u4ef6\u7684\u6570\u636e\u5757\u3002\u6570\u636e\u5757\u6811\u7684\u6839\u8282\u70b9\u5b58\u50a8\u5728<code>inode.i_block</code>\u4e2d\uff0c\u8fd9\u5141\u8bb8\u5728\u4e0d\u4f7f\u7528\u989d\u5916\u5143\u6570\u636e\u5757\u7684\u60c5\u51b5\u4e0b\u8bb0\u5f55\u524d\u56db\u4e2a\u6570\u636e\u5757\u3002</p> <p>The extent tree header is recorded in <code>struct ext4_extent_header</code>, which is 12 bytes long:</p> <p>\u533a\u6bb5\u6811\u6807\u5934\u8bb0\u5f55\u5728<code>struct ext4_extent_header</code>\u4e2d\uff0c\u957f\u5ea6\u4e3a12\u5b57\u8282\uff1a</p> Offset Size Name Description 0x0 __le16 eh_magic Magic number, 0xF30A. 0x2 __le16 eh_entries Number of valid entries following the header. 0x4 __le16 eh_max Maximum number of entries that could follow the header. 0x6 __le16 eh_depth Depth of this extent node in the extent tree. 0 = this extent node points to data blocks; otherwise, this extent node points to other extent nodes. The extent tree can be at most 5 levels deep: a logical block number can be at most <code>2^32</code>, and the smallest <code>n</code> that satisfies <code>4*(((blocksize - 12)/12)^n) &gt;= 2^32</code> is 5. 0x8 __le32 eh_generation Generation of the tree. (Used by Lustre, but not standard ext4). <p>Internal nodes of the extent tree, also known as index nodes, are recorded as <code>struct ext4_extent_idx</code>, and are 12 bytes long:</p> <p>\u6570\u636e\u5757\u6811\u7684\u5185\u90e8\u8282\u70b9\u4e5f\u79f0\u4e3a\u7d22\u5f15\u8282\u70b9\uff0c\u8bb0\u5f55\u4e3a<code>struct ext4_extent_idx</code>\uff0c\u957f\u5ea6\u4e3a12\u5b57\u8282\uff1a</p> Offset Size Name Description 0x0 __le32 ei_block This index node covers file blocks from \u2018block\u2019 onward. 0x4 __le32 ei_leaf_lo Lower 32-bits of the block number of the extent node that is the next level lower in the tree. The tree node pointed to can be either another internal node or a leaf node, described below. 0x8 __le16 ei_leaf_hi Upper 16-bits of the previous field. 0xA __u16 ei_unused <p>Leaf nodes of the extent tree are recorded as <code>struct ext4_extent</code>, and are also 12 bytes long:</p> <p>\u533a\u6bb5\u6811\u7684\u53f6\u8282\u70b9\u8bb0\u5f55\u4e3a<code>struct ext4_extent</code>\uff0c\u957f\u5ea6\u4e5f\u4e3a12\u5b57\u8282\uff1a</p> Offset Size Name Description 0x0 __le32 ee_block First file block number that this extent covers. 0x4 __le16 ee_len Number of blocks covered by extent. If the value of this field is &lt;= 32768, the extent is initialized. If the value of the field is &gt; 32768, the extent is uninitialized and the actual extent length is <code>ee_len</code> - 32768. Therefore, the maximum length of a initialized extent is 32768 blocks, and the maximum length of an uninitialized extent is 32767. 0x6 __le16 ee_start_hi Upper 16-bits of the block number to which this extent points. 0x8 __le32 ee_start_lo Lower 32-bits of the block number to which this extent points. <p>Prior to the introduction of metadata checksums, the extent header + extent entries always left at least 4 bytes of unallocated space at the end of each extent tree data block (because (2^x % 12) &gt;= 4). Therefore, the 32-bit checksum is inserted into this space. The 4 extents in the inode do not need checksumming, since the inode is already checksummed. The checksum is calculated against the FS UUID, the inode number, the inode generation, and the entire extent block leading up to (but not including) the checksum itself.</p> <p>\u5728\u5f15\u5165\u5143\u6570\u636e\u6821\u9a8c\u548c\u4e4b\u524d\uff0c\u6570\u636e\u5757\u6807\u5934+\u6570\u636e\u5757\u6761\u76ee\u603b\u662f\u5728\u6bcf\u4e2a\u6570\u636e\u5757\u6811\u6570\u636e\u5757\u7684\u672b\u5c3e\u7559\u4e0b\u81f3\u5c114\u5b57\u8282\u7684\u672a\u5206\u914d\u7a7a\u95f4\uff08\u56e0\u4e3a\uff082^x%12\uff09&gt;=4\uff09\u3002\u56e0\u6b64\uff0c\u5c0632\u4f4d\u6821\u9a8c\u548c\u63d2\u5165\u6b64\u7a7a\u95f4\u3002\u7d22\u5f15\u8282\u70b9\u4e2d\u76844\u4e2a\u533a\u6bb5\u4e0d\u9700\u8981\u6821\u9a8c\u548c\uff0c\u56e0\u4e3a\u7d22\u5f15\u8282\u70b9\u5df2\u7ecf\u8fdb\u884c\u4e86\u6821\u9a8c\u548c\u3002\u6821\u9a8c\u548c\u662f\u6839\u636eFS UUID\u3001\u7d22\u5f15\u8282\u70b9\u7f16\u53f7\u3001\u7d22\u5f15\u8282\u70b9\u751f\u6210\u4ee5\u53ca\u5bfc\u81f4\uff08\u4f46\u4e0d\u5305\u62ec\uff09\u6821\u9a8c\u548c\u672c\u8eab\u7684\u6574\u4e2a\u6570\u636e\u5757\u6765\u8ba1\u7b97\u7684\u3002</p> <p><code>struct ext4_extent_tail</code> is 4 bytes long:</p> Offset Size Name Description 0x0 __le32 eb_checksum Checksum of the extent block, crc32c(uuid+inum+igeneration+extentblock)"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#424-inline-data","title":"4.2.4 Inline Data","text":"<p>If the inline data feature is enabled for the filesystem and the flag is set for the inode, it is possible that the first 60 bytes of the file data are stored here.</p> <p>\u5982\u679c\u4e3a\u6587\u4ef6\u7cfb\u7edf\u542f\u7528\u4e86\u5185\u8054\u6570\u636e\u529f\u80fd\uff0c\u5e76\u4e14\u4e3ainode\u8bbe\u7f6e\u4e86\u6807\u5fd7\uff0c\u5219\u6587\u4ef6\u6570\u636e\u7684\u524d60\u4e2a\u5b57\u8282\u53ef\u80fd\u5b58\u50a8\u5728\u8fd9\u91cc\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#43-directory-entries","title":"4.3 Directory Entries","text":"<p>In an ext4 filesystem, a directory is more or less a flat file that maps an arbitrary byte string (usually ASCII) to an inode number on the filesystem. There can be many directory entries across the filesystem that reference the same inode number\u2013these are known as hard links, and that is why hard links cannot reference files on other filesystems. As such, directory entries are found by reading the data block(s) associated with a directory file for the particular directory entry that is desired.</p> <p>\u5728ext4\u6587\u4ef6\u7cfb\u7edf\u4e2d\uff0c\u76ee\u5f55\u6216\u591a\u6216\u5c11\u662f\u4e00\u4e2a\u5e73\u9762\u6587\u4ef6\uff0c\u5b83\u5c06\u4efb\u610f\u5b57\u8282\u5b57\u7b26\u4e32\uff08\u901a\u5e38\u662fASCII\uff09\u6620\u5c04\u5230\u6587\u4ef6\u7cfb\u7edf\u4e0a\u7684\u7d22\u5f15\u8282\u70b9\u53f7\u3002\u6587\u4ef6\u7cfb\u7edf\u4e2d\u53ef\u80fd\u6709\u8bb8\u591a\u76ee\u5f55\u6761\u76ee\u5f15\u7528\u76f8\u540c\u7684\u7d22\u5f15\u8282\u70b9\u53f7\uff0c\u8fd9\u4e9b\u6761\u76ee\u79f0\u4e3a\u786c\u94fe\u63a5\uff0c\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u786c\u94fe\u63a5\u4e0d\u80fd\u5f15\u7528\u5176\u4ed6\u6587\u4ef6\u7cfb\u7edf\u4e0a\u7684\u6587\u4ef6\u7684\u539f\u56e0\u3002\u8fd9\u6837\uff0c\u901a\u8fc7\u8bfb\u53d6\u4e0e\u671f\u671b\u7684\u7279\u5b9a\u76ee\u5f55\u6761\u76ee\u7684\u76ee\u5f55\u6587\u4ef6\u76f8\u5173\u8054\u7684\u6570\u636e\u5757\u6765\u627e\u5230\u76ee\u5f55\u6761\u76ee\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#431-linear-classic-directories","title":"4.3.1 Linear (Classic) Directories","text":"<p>By default, each directory lists its entries in an \u201calmost-linear\u201d array. I write \u201calmost\u201d because it\u2019s not a linear array in the memory sense because directory entries are not split across filesystem blocks. Therefore, it is more accurate to say that a directory is a series of data blocks and that each block contains a linear array of directory entries. The end of each per-block array is signified by reaching the end of the block; the last entry in the block has a record length that takes it all the way to the end of the block. The end of the entire directory is of course signified by reaching the end of the file. Unused directory entries are signified by inode = 0. By default the filesystem uses <code>struct ext4_dir_entry_2</code> for directory entries unless the \u201cfiletype\u201d feature flag is not set, in which case it uses <code>struct ext4_dir_entry</code>.</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6bcf\u4e2a\u76ee\u5f55\u90fd\u4ee5\u201c\u51e0\u4e4e\u7ebf\u6027\u201d\u6570\u7ec4\u5217\u51fa\u5176\u6761\u76ee\u3002\u6211\u5199\u201c\u51e0\u4e4e\u201d\u662f\u56e0\u4e3a\u5b83\u4e0d\u662f\u5185\u5b58\u610f\u4e49\u4e0a\u7684\u7ebf\u6027\u9635\u5217\uff0c\u56e0\u4e3a\u76ee\u5f55\u6761\u76ee\u4e0d\u4f1a\u5728\u6587\u4ef6\u7cfb\u7edf\u5757\u4e2d\u62c6\u5206\u3002\u56e0\u6b64\uff0c\u66f4\u51c6\u786e\u7684\u8bf4\u6cd5\u662f\uff0c\u4e00\u4e2a\u76ee\u5f55\u662f\u4e00\u7cfb\u5217\u6570\u636e\u5757\uff0c\u6bcf\u4e2a\u5757\u5305\u542b\u4e00\u4e2a\u7ebf\u6027\u7684\u76ee\u5f55\u6761\u76ee\u6570\u7ec4\u3002\u6bcf\u4e2a\u6bcf\u4e2a\u5757\u9635\u5217\u7684\u7ed3\u675f\u901a\u8fc7\u5230\u8fbe\u5757\u7684\u7ed3\u675f\u6765\u8868\u793a\uff1b\u5757\u4e2d\u7684\u6700\u540e\u4e00\u4e2a\u6761\u76ee\u5177\u6709\u4e00\u4e2a\u8bb0\u5f55\u957f\u5ea6\uff0c\u8be5\u957f\u5ea6\u5c06\u5176\u4e00\u76f4\u5e26\u5230\u5757\u7684\u672b\u5c3e\u3002\u5f53\u7136\uff0c\u6574\u4e2a\u76ee\u5f55\u7684\u7ed3\u5c3e\u662f\u901a\u8fc7\u5230\u8fbe\u6587\u4ef6\u7684\u7ed3\u5c3e\u6765\u8868\u793a\u7684\u3002\u672a\u4f7f\u7528\u7684\u76ee\u5f55\u6761\u76ee\u7531inode=0\u8868\u793a\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6587\u4ef6\u7cfb\u7edf\u5bf9\u76ee\u5f55\u6761\u76ee\u4f7f\u7528<code>struct ext4_dir_entry_2</code>\uff0c\u9664\u975e\u672a\u8bbe\u7f6e\u201cfiletype\u201d\u529f\u80fd\u6807\u5fd7\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b83\u4f7f\u7528<code>structext4_dir-entry</code>\u3002</p> <p>The original directory entry format is <code>struct ext4_dir_entry</code>, which is at most 263 bytes long, though on disk you\u2019ll need to reference <code>dirent.rec_len</code> to know for sure.</p> <p>\u539f\u59cb\u76ee\u5f55\u6761\u76ee\u683c\u5f0f\u4e3a<code>structext4_dir_entry</code>\uff0c\u6700\u591a263\u4e2a\u5b57\u8282\uff0c\u4f46\u5728\u78c1\u76d8\u4e0a\u9700\u8981\u5f15\u7528<code>dirent.rec_len</code>\u624d\u80fd\u786e\u5b9a\u3002</p> Offset Size Name Description 0x0 __le32 inode Number of the inode that this directory entry points to. 0x4 __le16 rec_len Length of this directory entry. Must be a multiple of 4. 0x6 __le16 name_len Length of the file name. 0x8 char name[EXT4_NAME_LEN] File name. <p>Since file names cannot be longer than 255 bytes, the new directory entry format shortens the name_len field and uses the space for a file type flag, probably to avoid having to load every inode during directory tree traversal. This format is <code>ext4_dir_entry_2</code>, which is at most 263 bytes long, though on disk you\u2019ll need to reference <code>dirent.rec_len</code> to know for sure.</p> <p>\u7531\u4e8e\u6587\u4ef6\u540d\u4e0d\u80fd\u8d85\u8fc7255\u4e2a\u5b57\u8282\uff0c\u56e0\u6b64\u65b0\u7684\u76ee\u5f55\u6761\u76ee\u683c\u5f0f\u7f29\u77ed\u4e86name_len\u5b57\u6bb5\uff0c\u5e76\u4f7f\u7528\u7a7a\u95f4\u4f5c\u4e3a\u6587\u4ef6\u7c7b\u578b\u6807\u5fd7\uff0c\u8fd9\u53ef\u80fd\u662f\u4e3a\u4e86\u907f\u514d\u5728\u76ee\u5f55\u6811\u904d\u5386\u671f\u95f4\u52a0\u8f7d\u6bcf\u4e2ainode\u3002\u6b64\u683c\u5f0f\u4e3a<code>ext4_dir_entry_2</code>\uff0c\u6700\u957f263\u5b57\u8282\uff0c\u4f46\u5728\u78c1\u76d8\u4e0a\u9700\u8981\u5f15\u7528<code>dirent.rec_len</code>\u624d\u80fd\u786e\u5b9a\u3002</p> Offset Size Name Description 0x0 __le32 inode Number of the inode that this directory entry points to. 0x4 __le16 rec_len Length of this directory entry. 0x6 __u8 name_len Length of the file name. 0x7 __u8 file_type File type code, see ftype table below. 0x8 char name[EXT4_NAME_LEN] File name. <p>The directory file type is one of the following values:</p> Value Description 0x0 Unknown. 0x1 Regular file. 0x2 Directory. 0x3 Character device file. 0x4 Block device file. 0x5 FIFO. 0x6 Socket. 0x7 Symbolic link. <p>To support directories that are both encrypted and casefolded directories, we must also include hash information in the directory entry. We append <code>ext4_extended_dir_entry_2</code> to <code>ext4_dir_entry_2</code> except for the entries for dot and dotdot, which are kept the same. The structure follows immediately after <code>name</code> and is included in the size listed by <code>rec_len</code> If a directory entry uses this extension, it may be up to 271 bytes.</p> <p>\u4e3a\u4e86\u652f\u6301\u65e2\u52a0\u5bc6\u53c8\u6298\u53e0\u7684\u76ee\u5f55\uff0c\u6211\u4eec\u8fd8\u5fc5\u987b\u5728\u76ee\u5f55\u6761\u76ee\u4e2d\u5305\u542b\u54c8\u5e0c\u4fe1\u606f\u3002\u6211\u4eec\u5c06<code>ext4_extended_dir_entry_2</code>\u9644\u52a0\u5230<code>ext4_dir_entry_2</code>\uff0c\u4f46dot\u548cdotdot\u7684\u6761\u76ee\u4fdd\u6301\u4e0d\u53d8\u3002\u8be5\u7ed3\u6784\u7d27\u8ddf\u5728<code>name</code>\u4e4b\u540e\uff0c\u5e76\u5305\u542b\u5728<code>rec_len</code>\u5217\u51fa\u7684\u5927\u5c0f\u4e2d\u3002\u5982\u679c\u76ee\u5f55\u6761\u76ee\u4f7f\u7528\u6b64\u6269\u5c55\u540d\uff0c\u5219\u8be5\u6269\u5c55\u540d\u6700\u591a\u53ef\u8fbe271\u5b57\u8282\u3002</p> Offset Size Name Description 0x0 __le32 hash The hash of the directory name 0x4 __le32 minor_hash The minor hash of the directory name <p>In order to add checksums to these classic directory blocks, a phony <code>struct ext4_dir_entry</code> is placed at the end of each leaf block to hold the checksum. The directory entry is 12 bytes long. The inode number and name_len fields are set to zero to fool old software into ignoring an apparently empty directory entry, and the checksum is stored in the place where the name normally goes. The structure is <code>struct ext4_dir_entry_tail</code>:</p> <p>\u4e3a\u4e86\u5411\u8fd9\u4e9b\u7ecf\u5178\u7684\u76ee\u5f55\u5757\u6dfb\u52a0\u6821\u9a8c\u548c\uff0c\u5728\u6bcf\u4e2a\u53f6\u5757\u7684\u672b\u5c3e\u653e\u7f6e\u4e00\u4e2a\u5047\u7684<code>structext4_dir_entry</code>\u6765\u4fdd\u5b58\u6821\u9a8c\u548c\u3002\u76ee\u5f55\u6761\u76ee\u957f\u5ea6\u4e3a12\u5b57\u8282\u3002inode number\u548cname_len\u5b57\u6bb5\u8bbe\u7f6e\u4e3a\u96f6\uff0c\u4ee5\u6b3a\u9a97\u65e7\u8f6f\u4ef6\u5ffd\u7565\u4e00\u4e2a\u660e\u663e\u4e3a\u7a7a\u7684\u76ee\u5f55\u6761\u76ee\uff0c\u5e76\u4e14\u6821\u9a8c\u548c\u5b58\u50a8\u5728\u540d\u79f0\u901a\u5e38\u6240\u5728\u7684\u4f4d\u7f6e\u3002\u7ed3\u6784\u4e3a<code>struct ext4_dir_entry_tail</code>\uff1a</p> Offset Size Name Description 0x0 __le32 det_reserved_zero1 Inode number, which must be zero. 0x4 __le16 det_rec_len Length of this directory entry, which must be 12. 0x6 __u8 det_reserved_zero2 Length of the file name, which must be zero. 0x7 __u8 det_reserved_ft File type, which must be 0xDE. 0x8 __le32 det_checksum Directory leaf block checksum. <p>The leaf directory block checksum is calculated against the FS UUID, the directory\u2019s inode number, the directory\u2019s inode generation number, and the entire directory entry block up to (but not including) the fake directory entry.</p> <p>\u53f6\u76ee\u5f55\u5757\u6821\u9a8c\u548c\u662f\u6839\u636eFS UUID\u3001\u76ee\u5f55\u7684inode\u7f16\u53f7\u3001\u76ee\u5f55\u7684\u7d22\u5f15\u8282\u70b9\u751f\u6210\u7f16\u53f7\u548c\u6574\u4e2a\u76ee\u5f55\u6761\u76ee\u5757\uff08\u76f4\u5230\uff08\u4f46\u4e0d\u5305\u62ec\uff09\u5047\u76ee\u5f55\u6761\u76ee\uff09\u8ba1\u7b97\u7684\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#432-hash-tree-directories","title":"4.3.2 Hash Tree Directories","text":"<p>A linear array of directory entries isn\u2019t great for performance, so a new feature was added to ext3 to provide a faster (but peculiar) balanced tree keyed off a hash of the directory entry name. If the EXT4_INDEX_FL (0x1000) flag is set in the inode, this directory uses a hashed btree (htree) to organize and find directory entries. For backwards read-only compatibility with ext2, this tree is actually hidden inside the directory file, masquerading as \u201cempty\u201d directory data blocks! It was stated previously that the end of the linear directory entry table was signified with an entry pointing to inode 0; this is (ab)used to fool the old linear-scan algorithm into thinking that the rest of the directory block is empty so that it moves on.</p> <p>\u4e00\u4e2a\u7ebf\u6027\u7684\u76ee\u5f55\u6761\u76ee\u6570\u7ec4\u5bf9\u4e8e\u6027\u80fd\u6765\u8bf4\u5e76\u4e0d\u662f\u5f88\u597d\uff0c\u6240\u4ee5ext3\u4e2d\u6dfb\u52a0\u4e86\u4e00\u4e2a\u65b0\u7279\u6027\uff0c\u4ee5\u63d0\u4f9b\u4e00\u4e2a\u66f4\u5feb\uff08\u4f46\u5f88\u72ec\u7279\uff09\u7684\u5e73\u8861\u6811\uff0c\u8be5\u6811\u901a\u8fc7\u76ee\u5f55\u6761\u76ee\u540d\u79f0\u7684\u6563\u5217\u6765\u5b9e\u73b0\u3002\u5982\u679c\u5728inode\u4e2d\u8bbe\u7f6e\u4e86EXT4_INDEX_FL\uff080x1000\uff09\u6807\u5fd7\uff0c\u5219\u8be5\u76ee\u5f55\u4f7f\u7528\u54c8\u5e0cbtree\uff08htree\uff09\u6765\u7ec4\u7ec7\u548c\u67e5\u627e\u76ee\u5f55\u6761\u76ee\u3002\u4e3a\u4e86\u4e0eext2\u5411\u540e\u53ea\u8bfb\u517c\u5bb9\uff0c\u8be5\u6811\u5b9e\u9645\u4e0a\u9690\u85cf\u5728\u76ee\u5f55\u6587\u4ef6\u4e2d\uff0c\u4f2a\u88c5\u6210\u201c\u7a7a\u201d\u76ee\u5f55\u6570\u636e\u5757\uff01\u524d\u9762\u8bf4\u8fc7\uff0c\u7ebf\u6027\u76ee\u5f55\u6761\u76ee\u8868\u7684\u672b\u5c3e\u7528\u6307\u5411inode 0\u7684\u6761\u76ee\u8868\u793a\uff1b\u8fd9\u662f\uff08ab\uff09\u7528\u6765\u6b3a\u9a97\u65e7\u7684\u7ebf\u6027\u626b\u63cf\u7b97\u6cd5\uff0c\u4f7f\u5176\u8ba4\u4e3a\u76ee\u5f55\u5757\u7684\u5176\u4f59\u90e8\u5206\u662f\u7a7a\u7684\uff0c\u4ece\u800c\u7ee7\u7eed\u524d\u8fdb\u3002</p> <p>The root of the tree always lives in the first data block of the directory. By ext2 custom, the \u2018.\u2019 and \u2018..\u2019 entries must appear at the beginning of this first block, so they are put here as two <code>struct ext4_dir_entry_2</code> s and not stored in the tree. The rest of the root node contains metadata about the tree and finally a hash-&gt;block map to find nodes that are lower in the htree. If <code>dx_root.info.indirect_levels</code> is non-zero then the htree has two levels; the data block pointed to by the root node\u2019s map is an interior node, which is indexed by a minor hash. Interior nodes in this tree contains a zeroed out <code>struct ext4_dir_entry_2</code> followed by a minor_hash-&gt;block map to find leafe nodes. Leaf nodes contain a linear array of all <code>struct ext4_dir_entry_2</code>; all of these entries (presumably) hash to the same value. If there is an overflow, the entries simply overflow into the next leaf node, and the least-significant bit of the hash (in the interior node map) that gets us to this next leaf node is set.</p> <p>\u6811\u7684\u6839\u59cb\u7ec8\u4f4d\u4e8e\u76ee\u5f55\u7684\u7b2c\u4e00\u4e2a\u6570\u636e\u5757\u4e2d\u3002\u901a\u8fc7ext2\u81ea\u5b9a\u4e49\uff0c\u201c.\u201d\u548c\u201c..\u201d\u6761\u76ee\u5fc5\u987b\u51fa\u73b0\u5728\u7b2c\u4e00\u4e2a\u5757\u7684\u5f00\u5934\uff0c\u56e0\u6b64\u5b83\u4eec\u5728\u8fd9\u91cc\u4f5c\u4e3a\u4e24\u4e2a<code>structext4_dir_entry2</code>\u653e\u7f6e\uff0c\u800c\u4e0d\u662f\u5b58\u50a8\u5728\u6811\u4e2d\u3002\u6839\u8282\u70b9\u7684\u5176\u4f59\u90e8\u5206\u5305\u542b\u5173\u4e8e\u6811\u7684\u5143\u6570\u636e\uff0c\u6700\u540e\u662f\u4e00\u4e2ahash-&gt;\u5757\u6620\u5c04\uff0c\u7528\u4e8e\u67e5\u627ehtree\u4e2d\u8f83\u4f4e\u7684\u8282\u70b9\u3002\u5982\u679c<code>dx_root.info.indirect_levels</code>\u4e3a\u975e\u96f6\uff0c\u5219htree\u6709\u4e24\u4e2a\u7ea7\u522b\uff1b\u6839\u8282\u70b9\u6620\u5c04\u6240\u6307\u5411\u7684\u6570\u636e\u5757\u662f\u4e00\u4e2a\u5185\u90e8\u8282\u70b9\uff0c\u5b83\u7531\u4e00\u4e2a\u5c0f\u6563\u5217\u7d22\u5f15\u3002\u6b64\u6811\u4e2d\u7684\u5185\u90e8\u8282\u70b9\u5305\u542b\u4e00\u4e2a\u6e05\u96f6\u7684<code>struct ext4_dir_entry_2</code>\uff0c\u540e\u8ddf\u4e00\u4e2aminor_hash-&gt;\u5757\u6620\u5c04\u4ee5\u67e5\u627e\u53f6\u8282\u70b9\u3002\u53f6\u8282\u70b9\u5305\u542b\u6240\u6709<code>struct ext4_dir_entry_2</code>\u7684\u7ebf\u6027\u6570\u7ec4\uff1b\u6240\u6709\u8fd9\u4e9b\u6761\u76ee\uff08\u53ef\u80fd\uff09\u6563\u5217\u5230\u76f8\u540c\u7684\u503c\u3002\u5982\u679c\u5b58\u5728\u6ea2\u51fa\uff0c\u5219\u6761\u76ee\u53ea\u4f1a\u6ea2\u51fa\u5230\u4e0b\u4e00\u4e2a\u53f6\u8282\u70b9\uff0c\u5e76\u8bbe\u7f6e\u5c06\u6211\u4eec\u5e26\u5230\u4e0b\u4e00\u53f6\u8282\u70b9\u7684\u54c8\u5e0c\uff08\u5728\u5185\u90e8\u8282\u70b9\u6620\u5c04\u4e2d\uff09\u7684\u6700\u4f4e\u6709\u6548\u4f4d\u3002</p> <p>To traverse the directory as a htree, the code calculates the hash of the desired file name and uses it to find the corresponding block number. If the tree is flat, the block is a linear array of directory entries that can be searched; otherwise, the minor hash of the file name is computed and used against this second block to find the corresponding third block number. That third block number will be a linear array of directory entries.</p> <p>\u8981\u4f5c\u4e3ahtree\u904d\u5386\u76ee\u5f55\uff0c\u4ee3\u7801\u8ba1\u7b97\u6240\u9700\u6587\u4ef6\u540d\u7684\u54c8\u5e0c\u503c\uff0c\u5e76\u4f7f\u7528\u5b83\u67e5\u627e\u76f8\u5e94\u7684\u5757\u53f7\u3002\u5982\u679c\u6811\u662f\u5e73\u7684\uff0c\u5219\u5757\u662f\u53ef\u4ee5\u641c\u7d22\u7684\u76ee\u5f55\u6761\u76ee\u7684\u7ebf\u6027\u9635\u5217\uff1b\u5426\u5219\uff0c\u8ba1\u7b97\u6587\u4ef6\u540d\u7684\u5c0f\u6563\u5217\uff0c\u5e76\u9488\u5bf9\u8be5\u7b2c\u4e8c\u5757\u4f7f\u7528\u8be5\u5c0f\u6563\u5217\u6765\u67e5\u627e\u5bf9\u5e94\u7684\u7b2c\u4e09\u5757\u7f16\u53f7\u3002\u7b2c\u4e09\u4e2a\u5757\u7f16\u53f7\u5c06\u662f\u76ee\u5f55\u6761\u76ee\u7684\u7ebf\u6027\u9635\u5217\u3002</p> <p>To traverse the directory as a linear array (such as the old code does), the code simply reads every data block in the directory. The blocks used for the htree will appear to have no entries (aside from \u2018.\u2019 and \u2018..\u2019) and so only the leaf nodes will appear to have any interesting content.</p> <p>\u8981\u4ee5\u7ebf\u6027\u9635\u5217\u7684\u5f62\u5f0f\u904d\u5386\u76ee\u5f55\uff08\u5982\u65e7\u4ee3\u7801\u6240\u505a\u7684\uff09\uff0c\u4ee3\u7801\u53ea\u9700\u8bfb\u53d6\u76ee\u5f55\u4e2d\u7684\u6bcf\u4e2a\u6570\u636e\u5757\u3002\u7528\u4e8ehtree\u7684\u5757\u770b\u8d77\u6765\u6ca1\u6709\u4efb\u4f55\u6761\u76ee\uff08\u9664\u4e86\u201c.\u201d\u548c\u201c..\u201d\uff09\uff0c\u56e0\u6b64\u53ea\u6709\u53f6\u8282\u70b9\u770b\u8d77\u6765\u6709\u4efb\u4f55\u6709\u8da3\u7684\u5185\u5bb9\u3002</p> <p>The root of the htree is in <code>struct dx_root</code>, which is the full length of a data block:</p> <p>htree\u7684\u6839\u4f4d\u4e8e<code>structdx_root</code>\u4e2d\uff0c\u5b83\u662f\u6570\u636e\u5757\u7684\u5b8c\u6574\u957f\u5ea6\uff1a</p> Offset Type Name Description 0x0 __le32 dot.inode inode number of this directory. 0x4 __le16 dot.rec_len Length of this record, 12. 0x6 u8 dot.name_len Length of the name, 1. 0x7 u8 dot.file_type File type of this entry, 0x2 (directory) (if the feature flag is set). 0x8 char dot.name[4] \u201c.000\u201d 0xC __le32 dotdot.inode inode number of parent directory. 0x10 __le16 dotdot.rec_len block_size - 12. The record length is long enough to cover all htree data. 0x12 u8 dotdot.name_len Length of the name, 2. 0x13 u8 dotdot.file_type File type of this entry, 0x2 (directory) (if the feature flag is set). 0x14 char dotdot_name[4] \u201c..00\u201d 0x18 __le32 struct dx_root_info.reserved_zero Zero. 0x1C u8 struct dx_root_info.hash_version Hash type, see dirhash table below. 0x1D u8 struct dx_root_info.info_length Length of the tree information, 0x8. 0x1E u8 struct dx_root_info.indirect_levels Depth of the htree. Cannot be larger than 3 if the INCOMPAT_LARGEDIR feature is set; cannot be larger than 2 otherwise. 0x1F u8 struct dx_root_info.unused_flags 0x20 __le16 limit Maximum number of dx_entries that can follow this header, plus 1 for the header itself. 0x22 __le16 count Actual number of dx_entries that follow this header, plus 1 for the header itself. 0x24 __le32 block The block number (within the directory file) that goes with hash=0. 0x28 struct dx_entry entries[0] As many 8-byte <code>struct dx_entry</code> as fits in the rest of the data block. <p>The directory hash is one of the following values:</p> Value Description 0x0 Legacy. 0x1 Half MD4. 0x2 Tea. 0x3 Legacy, unsigned. 0x4 Half MD4, unsigned. 0x5 Tea, unsigned. 0x6 Siphash. <p>Interior nodes of an htree are recorded as <code>struct dx_node</code>, which is also the full length of a data block:</p> <p>htree\u7684\u5185\u90e8\u8282\u70b9\u8bb0\u5f55\u4e3a<code>struct dx_node</code>\uff0c\u8fd9\u4e5f\u662f\u6570\u636e\u5757\u7684\u5b8c\u6574\u957f\u5ea6\uff1a</p> Offset Type Name Description 0x0 __le32 fake.inode Zero, to make it look like this entry is not in use. 0x4 __le16 fake.rec_len The size of the block, in order to hide all of the dx_node data. 0x6 u8 name_len Zero. There is no name for this \u201cunused\u201d directory entry. 0x7 u8 file_type Zero. There is no file type for this \u201cunused\u201d directory entry. 0x8 __le16 limit Maximum number of dx_entries that can follow this header, plus 1 for the header itself. 0xA __le16 count Actual number of dx_entries that follow this header, plus 1 for the header itself. 0xE __le32 block The block number (within the directory file) that goes with the lowest hash value of this block. This value is stored in the parent block. 0x12 struct dx_entry entries[0] As many 8-byte <code>struct dx_entry</code> as fits in the rest of the data block. <p>The hash maps that exist in both <code>struct dx_root</code> and <code>struct dx_node</code> are recorded as <code>struct dx_entry</code>, which is 8 bytes long:</p> <p><code>struct dx_root</code>\u548c<code>struct dx_node</code>\u4e2d\u5b58\u5728\u7684\u54c8\u5e0c\u6620\u5c04\u8bb0\u5f55\u4e3a<code>struct dx_entry</code>\uff0c\u957f\u5ea6\u4e3a8\u5b57\u8282\uff1a</p> Offset Type Name Description 0x0 __le32 hash Hash code. 0x4 __le32 block Block number (within the directory file, not filesystem blocks) of the next node in the htree. <p>(If you think this is all quite clever and peculiar, so does the author.)</p> <p>\uff08\u5982\u679c\u4f60\u8ba4\u4e3a\u8fd9\u4e00\u5207\u90fd\u5f88\u806a\u660e\u548c\u5947\u7279\uff0c\u4f5c\u8005\u4e5f\u662f\u5982\u6b64\u3002\uff09</p> <p>If metadata checksums are enabled, the last 8 bytes of the directory block (precisely the length of one dx_entry) are used to store a <code>struct dx_tail</code>, which contains the checksum. The <code>limit</code> and <code>count</code> entries in the dx_root/dx_node structures are adjusted as necessary to fit the dx_tail into the block. If there is no space for the dx_tail, the user is notified to run e2fsck -D to rebuild the directory index (which will ensure that there\u2019s space for the checksum. The dx_tail structure is 8 bytes long and looks like this:</p> <p>\u5982\u679c\u542f\u7528\u4e86\u5143\u6570\u636e\u6821\u9a8c\u548c\uff0c\u5219\u76ee\u5f55\u5757\u7684\u6700\u540e8\u4e2a\u5b57\u8282\uff08\u6b63\u597d\u662f\u4e00\u4e2adx_entry\u7684\u957f\u5ea6\uff09\u5c06\u7528\u4e8e\u5b58\u50a8\u5305\u542b\u6821\u9a8c\u548c\u7684<code>struct dx_tail</code>\u3002\u6839\u636e\u9700\u8981\u8c03\u6574dx_root/dx_node\u7ed3\u6784\u4e2d\u7684<code>limit</code>\u548c<code>count</code>\u6761\u76ee\uff0c\u4ee5\u5c06dx_tail\u9002\u914d\u5230\u5757\u4e2d\u3002\u5982\u679cdx_tail\u6ca1\u6709\u7a7a\u95f4\uff0c\u5219\u901a\u77e5\u7528\u6237\u8fd0\u884ce2fsck-D\u6765\u91cd\u5efa\u76ee\u5f55\u7d22\u5f15\uff08\u8fd9\u5c06\u786e\u4fdd\u6709\u7a7a\u95f4\u7528\u4e8e\u6821\u9a8c\u548c\uff09\u3002dx_tail\u7ed3\u6784\u957f8\u5b57\u8282\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> Offset Type Name Description 0x0 u32 dt_reserved Zero. 0x4 __le32 dt_checksum Checksum of the htree directory block. <p>The checksum is calculated against the FS UUID, the htree index header (dx_root or dx_node), all of the htree indices (dx_entry) that are in use, and the tail block (dx_tail).</p> <p>\u6821\u9a8c\u548c\u662f\u6839\u636eFS UUID\u3001htree\u7d22\u5f15\u5934\uff08dx_root\u6216dx_node\uff09\u3001\u6b63\u5728\u4f7f\u7528\u7684\u6240\u6709htree\u7d22\u5f15\uff08dx_entry\uff09\u548c\u5c3e\u90e8\u5757\uff08dx_tail\uff09\u8ba1\u7b97\u7684\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#44-extended-attributes","title":"4.4 Extended Attributes","text":"<p>Extended attributes (xattrs) are typically stored in a separate data block on the disk and referenced from inodes via <code>inode.i_file_acl*</code>. The first use of extended attributes seems to have been for storing file ACLs and other security data (selinux). With the <code>user_xattr</code> mount option it is possible for users to store extended attributes so long as all attribute names begin with \u201cuser\u201d; this restriction seems to have disappeared as of Linux 3.0.</p> <p>\u6269\u5c55\u5c5e\u6027\uff08xattrs\uff09\u901a\u5e38\u5b58\u50a8\u5728\u78c1\u76d8\u4e0a\u7684\u5355\u72ec\u6570\u636e\u5757\u4e2d\uff0c\u5e76\u901a\u8fc7<code>inode.i_file_acl*</code>\u4eceinode\u5f15\u7528\u3002\u6269\u5c55\u5c5e\u6027\u7684\u7b2c\u4e00\u4e2a\u7528\u9014\u4f3c\u4e4e\u662f\u5b58\u50a8\u6587\u4ef6acl\u548c\u5176\u4ed6\u5b89\u5168\u6570\u636e\uff08selinux\uff09\u3002\u4f7f\u7528<code>user_xattr</code>mount\u9009\u9879\uff0c\u53ea\u8981\u6240\u6709\u5c5e\u6027\u540d\u79f0\u90fd\u4ee5\u201cuser\u201d\u5f00\u5934\uff0c\u7528\u6237\u5c31\u53ef\u4ee5\u5b58\u50a8\u6269\u5c55\u5c5e\u6027\uff1b\u4eceLinux3.0\u5f00\u59cb\uff0c\u8fd9\u79cd\u9650\u5236\u4f3c\u4e4e\u5df2\u7ecf\u6d88\u5931\u3002</p> <p>There are two places where extended attributes can be found. The first place is between the end of each inode entry and the beginning of the next inode entry. For example, if inode.i_extra_isize = 28 and sb.inode_size = 256, then there are 256 - (128 + 28) = 100 bytes available for in-inode extended attribute storage. The second place where extended attributes can be found is in the block pointed to by <code>inode.i_file_acl</code>. As of Linux 3.11, it is not possible for this block to contain a pointer to a second extended attribute block (or even the remaining blocks of a cluster). In theory it is possible for each attribute\u2019s value to be stored in a separate data block, though as of Linux 3.11 the code does not permit this.</p> <p>\u6709\u4e24\u4e2a\u5730\u65b9\u53ef\u4ee5\u627e\u5230\u6269\u5c55\u5c5e\u6027\u3002\u7b2c\u4e00\u4e2a\u4f4d\u7f6e\u4f4d\u4e8e\u6bcf\u4e2ainode\u6761\u76ee\u7684\u7ed3\u5c3e\u548c\u4e0b\u4e00\u4e2ainode\u6761\u76ee\u5f00\u5934\u4e4b\u95f4\u3002\u4f8b\u5982\uff0c\u5982\u679cinode.i_extra_isize=28\uff0csb.inode_size=256\uff0c\u5219\u6709256-\uff08128+28\uff09=100\u5b57\u8282\u53ef\u7528\u4e8einode\u5185\u6269\u5c55\u5c5e\u6027\u5b58\u50a8\u3002\u7b2c\u4e8c\u4e2a\u53ef\u4ee5\u627e\u5230\u6269\u5c55\u5c5e\u6027\u7684\u5730\u65b9\u662f<code>inode.i_file_acl</code>\u6240\u6307\u5411\u7684\u5757\u3002\u4eceLinux 3.11\u5f00\u59cb\uff0c\u8be5\u5757\u4e0d\u53ef\u80fd\u5305\u542b\u6307\u5411\u7b2c\u4e8c\u4e2a\u6269\u5c55\u5c5e\u6027\u5757\uff08\u751a\u81f3\u96c6\u7fa4\u7684\u5269\u4f59\u5757\uff09\u7684\u6307\u9488\u3002\u7406\u8bba\u4e0a\uff0c\u6bcf\u4e2a\u5c5e\u6027\u7684\u503c\u90fd\u6709\u53ef\u80fd\u5b58\u50a8\u5728\u5355\u72ec\u7684\u6570\u636e\u5757\u4e2d\uff0c\u5c3d\u7ba1\u4eceLinux 3.11\u5f00\u59cb\uff0c\u4ee3\u7801\u4e0d\u5141\u8bb8\u8fd9\u6837\u505a\u3002</p> <p>Keys are generally assumed to be ASCIIZ strings, whereas values can be strings or binary data.</p> <p>\u952e\u901a\u5e38\u5047\u5b9a\u4e3aASCIIZ\u5b57\u7b26\u4e32\uff0c\u800c\u503c\u53ef\u4ee5\u662f\u5b57\u7b26\u4e32\u6216\u4e8c\u8fdb\u5236\u6570\u636e\u3002</p> <p>Extended attributes, when stored after the inode, have a header <code>ext4_xattr_ibody_header</code> that is 4 bytes long:</p> <p>\u6269\u5c55\u5c5e\u6027\u5b58\u50a8\u5728inode\u4e4b\u540e\u65f6\uff0c\u5177\u67094\u4e2a\u5b57\u8282\u957f\u7684\u5934<code>ext4_xattr_ibody_header</code>\uff1a</p> Offset Type Name Description 0x0 __le32 h_magic Magic number for identification, 0xEA020000. This value is set by the Linux driver, though e2fsprogs doesn\u2019t seem to check it(?) <p>The beginning of an extended attribute block is in <code>struct ext4_xattr_header</code>, which is 32 bytes long:</p> <p>\u6269\u5c55\u5c5e\u6027\u5757\u7684\u5f00\u5934\u4f4d\u4e8e<code>struct ext4_xattr_header</code>\u4e2d\uff0c\u957f\u5ea6\u4e3a32\u5b57\u8282\uff1a</p> Offset Type Name Description 0x0 __le32 h_magic Magic number for identification, 0xEA020000. 0x4 __le32 h_refcount Reference count. 0x8 __le32 h_blocks Number of disk blocks used. 0xC __le32 h_hash Hash value of all attributes. 0x10 __le32 h_checksum Checksum of the extended attribute block. 0x14 __u32 h_reserved[3] Zero. <p>The checksum is calculated against the FS UUID, the 64-bit block number of the extended attribute block, and the entire block (header + entries).</p> <p>\u6839\u636eFS UUID\u3001\u6269\u5c55\u5c5e\u6027\u5757\u768464\u4f4d\u5757\u53f7\u548c\u6574\u4e2a\u5757\uff08\u6807\u9898+\u6761\u76ee\uff09\u8ba1\u7b97\u6821\u9a8c\u548c\u3002</p> <p>Following the <code>struct ext4_xattr_header</code> or <code>struct ext4_xattr_ibody_header</code> is an array of <code>struct ext4_xattr_entry</code>; each of these entries is at least 16 bytes long. When stored in an external block, the <code>struct ext4_xattr_entry</code> entries must be stored in sorted order. The sort order is <code>e_name_index</code>, then <code>e_name_len</code>, and finally <code>e_name</code>. Attributes stored inside an inode do not need be stored in sorted order.</p> <p>\u5728<code>struct ext4_xattr_header</code>\u6216<code>struct text4_xattr_ibody_header</code>\u540e\u9762\u662f\u4e00\u4e2a<code>struct xt4_xattr_entry</code>\u6570\u7ec4\uff1b\u8fd9\u4e9b\u6761\u76ee\u4e2d\u7684\u6bcf\u4e00\u4e2a\u81f3\u5c11\u670916\u4e2a\u5b57\u8282\u957f\u3002\u5f53\u5b58\u50a8\u5728\u5916\u90e8\u5757\u4e2d\u65f6\uff0c<code>struct ext4_xattr_entry</code>\u6761\u76ee\u5fc5\u987b\u6309\u6392\u5e8f\u987a\u5e8f\u5b58\u50a8\u3002\u6392\u5e8f\u987a\u5e8f\u4e3a<code>e_name_index</code>\uff0c\u7136\u540e\u662f<code>e_name_len</code>\uff0c\u6700\u540e\u662f<code>e_name</code>\u3002\u5b58\u50a8\u5728inode\u4e2d\u7684\u5c5e\u6027\u4e0d\u9700\u8981\u6309\u6392\u5e8f\u987a\u5e8f\u5b58\u50a8\u3002</p> Offset Type Name Description 0x0 __u8 e_name_len Length of name. 0x1 __u8 e_name_index Attribute name index. There is a discussion of this below. 0x2 __le16 e_value_offs Location of this attribute\u2019s value on the disk block where it is stored. Multiple attributes can share the same value. For an inode attribute this value is relative to the start of the first entry; for a block this value is relative to the start of the block (i.e. the header). 0x4 __le32 e_value_inum The inode where the value is stored. Zero indicates the value is in the same block as this entry. This field is only used if the INCOMPAT_EA_INODE feature is enabled. 0x8 __le32 e_value_size Length of attribute value. 0xC __le32 e_hash Hash value of attribute name and attribute value. The kernel doesn\u2019t update the hash for in-inode attributes, so for that case this value must be zero, because e2fsck validates any non-zero hash regardless of where the xattr lives. 0x10 char e_name[e_name_len] Attribute name. Does not include trailing NULL. <p>Attribute values can follow the end of the entry table. There appears to be a requirement that they be aligned to 4-byte boundaries. The values are stored starting at the end of the block and grow towards the xattr_header/xattr_entry table. When the two collide, the overflow is put into a separate disk block. If the disk block fills up, the filesystem returns -ENOSPC.</p> <p>\u5c5e\u6027\u503c\u53ef\u4ee5\u5728\u6761\u76ee\u8868\u7684\u672b\u5c3e\u3002\u4f3c\u4e4e\u9700\u8981\u5c06\u5b83\u4eec\u4e0e4\u5b57\u8282\u8fb9\u754c\u5bf9\u9f50\u3002\u8fd9\u4e9b\u503c\u4ece\u5757\u7684\u672b\u5c3e\u5f00\u59cb\u5b58\u50a8\uff0c\u5e76\u5411xattr_header/xattr_entry\u8868\u589e\u957f\u3002\u5f53\u4e24\u8005\u53d1\u751f\u51b2\u7a81\u65f6\uff0c\u6ea2\u51fa\u5c06\u88ab\u653e\u5165\u4e00\u4e2a\u5355\u72ec\u7684\u78c1\u76d8\u5757\u4e2d\u3002\u5982\u679c\u78c1\u76d8\u5757\u5df2\u6ee1\uff0c\u6587\u4ef6\u7cfb\u7edf\u5c06\u8fd4\u56de-ENOPC\u3002</p> <p>The first four fields of the <code>ext4_xattr_entry</code> are set to zero to mark the end of the key list.</p> <p><code>ext4_xattr_entry</code>\u7684\u524d\u56db\u4e2a\u5b57\u6bb5\u8bbe\u7f6e\u4e3a\u96f6\uff0c\u4ee5\u6807\u8bb0\u5bc6\u94a5\u5217\u8868\u7684\u7ed3\u675f\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#441-attribute-name-indices","title":"4.4.1 Attribute Name Indices","text":"<p>Logically speaking, extended attributes are a series of key=value pairs. The keys are assumed to be NULL-terminated strings. To reduce the amount of on-disk space that the keys consume, the beginning of the key string is matched against the attribute name index. If a match is found, the attribute name index field is set, and matching string is removed from the key name. Here is a map of name index values to key prefixes:</p> <p>\u4ece\u903b\u8f91\u4e0a\u8bb2\uff0c\u6269\u5c55\u5c5e\u6027\u662f\u4e00\u7cfb\u5217\u952e=\u503c\u5bf9\u3002\u5047\u8bbe\u5bc6\u94a5\u662f\u4ee5NULL\u7ed3\u5c3e\u7684\u5b57\u7b26\u4e32\u3002\u4e3a\u4e86\u51cf\u5c11\u952e\u5360\u7528\u7684\u78c1\u76d8\u7a7a\u95f4\u91cf\uff0c\u5c06\u952e\u5b57\u7b26\u4e32\u7684\u5f00\u5934\u4e0e\u5c5e\u6027\u540d\u79f0\u7d22\u5f15\u76f8\u5339\u914d\u3002\u5982\u679c\u627e\u5230\u5339\u914d\u9879\uff0c\u5219\u8bbe\u7f6e\u5c5e\u6027\u540d\u79f0\u7d22\u5f15\u5b57\u6bb5\uff0c\u5e76\u4ece\u5173\u952e\u5b57\u540d\u79f0\u4e2d\u5220\u9664\u5339\u914d\u5b57\u7b26\u4e32\u3002\u4ee5\u4e0b\u662f\u540d\u79f0\u7d22\u5f15\u503c\u5230\u5173\u952e\u5b57\u524d\u7f00\u7684\u6620\u5c04\uff1a</p> Name Index Key Prefix 0 (no prefix) 1 \u201cuser.\u201d 2 \u201csystem.posix_acl_access\u201d 3 \u201csystem.posix_acl_default\u201d 4 \u201ctrusted.\u201d 6 \u201csecurity.\u201d 7 \u201csystem.\u201d (inline_data only?) 8 \u201csystem.richacl\u201d (SuSE kernels only?) <p>For example, if the attribute key is \u201cuser.fubar\u201d, the attribute name index is set to 1 and the \u201cfubar\u201d name is recorded on disk.</p> <p>\u4f8b\u5982\uff0c\u5982\u679c\u5c5e\u6027\u952e\u662f\u201cuser.fubar\u201d\uff0c\u5219\u5c5e\u6027\u540d\u79f0\u7d22\u5f15\u8bbe\u7f6e\u4e3a1\uff0c\u201cfubar\u201d\u540d\u79f0\u8bb0\u5f55\u5728\u78c1\u76d8\u4e0a\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#442-posix-acls","title":"4.4.2 POSIX ACLs","text":"<p>POSIX ACLs are stored in a reduced version of the Linux kernel (and libacl\u2019s) internal ACL format. The key difference is that the version number is different (1) and the <code>e_id</code> field is only stored for named user and group ACLs.</p> <p>POSIX ACL\u4ee5\u7cbe\u7b80\u7248\u7684Linux\u5185\u6838\uff08\u548clibacl\uff09\u5185\u90e8ACL\u683c\u5f0f\u5b58\u50a8\u3002\u5173\u952e\u533a\u522b\u5728\u4e8e\u7248\u672c\u53f7\u4e0d\u540c\uff081\uff09\uff0c\u5e76\u4e14<code>e_id</code>\u5b57\u6bb5\u4ec5\u4e3a\u547d\u540d\u7528\u6237\u548c\u7ec4ACL\u5b58\u50a8\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4/","title":"ext4","text":"<ul> <li>\u5185\u6838\u6587\u6863-ext4</li> <li>https://zhuanlan.zhihu.com/p/476377123</li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4/#1","title":"1 \u7279\u70b9","text":"<ol> <li>64bit \u6587\u4ef6\u7cfb\u7edf\uff0cblock \u5927\u5c0f 4kiB \u4e0b\uff0c\u5355\u4e2a\u6587\u4ef6\u6700\u5927 16TiB\uff0c\u6587\u4ef6\u7cfb\u7edf\u6700\u5927 64ZiB\u3002</li> <li>32bit \u6587\u4ef6\u7cfb\u7edf\uff0cblock \u5927\u5c0f 4kiB \u4e0b\uff0c\u5355\u4e2a\u6587\u4ef6\u6700\u5927 4TiB\uff0c\u6587\u4ef6\u7cfb\u7edf\u6700\u5927 16TiB\u3002</li> <li>inode \u5927\u5c0f 256Byte</li> </ol>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4/#2","title":"2 \u7ec4\u6210\u4e0e\u5e03\u5c40","text":"<p>ext4 \u6587\u4ef6\u7cfb\u7edf\u88ab\u62c6\u5206\u6210\u4e00\u7cfb\u5217 block groups\uff0c\u6bcf\u4e00\u4e2a block groups \u5305\u542b\u4e00\u7cfb\u5217\u7684 blocks\uff0c\u6bcf\u4e00\u4e2a block \u7684\u5927\u5c0f\u662f\u76f8\u540c\u7684\uff0c\u53ef\u4ee5\u5728 mkfs \u65f6\u8bbe\u7f6e\u3002\u9ed8\u8ba4\u914d\u7f6e\u4e0b block \u5927\u5c0f\u662f 4kiB\uff0cblock groups \u5305\u542b 32, 768 \u4e2a block\uff0c\u603b\u5927\u5c0f\u662f 128MiB\u3002 - \u603b\u4f53\u5e03\u5c40\u56fe </p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4/#21-block-groups","title":"2.1 block groups \u5e03\u5c40","text":"<p>ext4 \u5757\u7ec4\u5206\u6210 3 \u7c7b\u5e03\u5c40\uff1a 1. 0 \u53f7\u5757\u7ec4\uff1a\u524d 1024 \u4e2a\u5b57\u8282\u672a\u4f7f\u7528\uff0c\u4ee5\u5141\u8bb8\u5b89\u88c5 x86 \u5f15\u5bfc\u6247\u533a\u548c\u5176\u4ed6\u7528\u9014\u3002 2. \u5197\u4f59\u5907\u4efd\u5757\u7ec4\uff1a0 \u53f7\u5757\u7ec4\u542b\u6709\u8d85\u7ea7\u5757\u548c\u7ec4\u63cf\u8ff0\u7b26\uff0c\u4f46\u7cfb\u7edf\u4e3a\u4e86\u5b89\u5168\uff0c\u505a\u4e86\u5197\u4f59\u5907\u4efd\uff0c\u8fd9\u7c7b\u5757\u7ec4\u4f1a\u5907\u4efd\u8d85\u7ea7\u5757\u548c\u7ec4\u63cf\u8ff0\u7b26\u3002 3. \u666e\u901a\u5757\u7ec4\uff1a\u8fd9\u7c7b\u5757\u7ec4\u4ee5\u6570\u636e\u5757\u4f4d\u56fe\u5f00\u59cb\uff0c\u4e0d\u542b\u6709\u5197\u4f59\u7684\u8d85\u7ea7\u5757\u548c\u7ec4\u63cf\u8ff0\u7b26\u3002 - 0 \u53f7\u5757\u7ec4\u7684\u7ec4\u6210 | Group 0 Padding | ext4 Super Block | Group Descriptors | Reserved GDT Blocks | Data Block Bitmap | inode Bitmap | inode Table | Data Blocks | | --------------- | ---------------- | ----------------- | ------------------- | ----------------- | ------------ | ----------- | ---------------- | | 1024 bytes | 1 block | many blocks | many blocks | 1 block | 1 block | many blocks | many more blocks | - \u5197\u4f59\u5907\u4efd\u5757\u7ec4\u7684\u7ec4\u6210 | ext4 Super Block | Group Descriptors | Reserved GDT Blocks | Data Block Bitmap | inode Bitmap | inode Table | Data Blocks | | ---------------- | ----------------- | ------------------- | ----------------- | ------------ | ----------- | ---------------- | | 1 block | many blocks | many blocks | 1 block | 1 block|many blocks|many more blocks| - \u666e\u901a\u5757\u7ec4\u7684\u7ec4\u6210 | Data Block Bitmap | inode Bitmap | inode Table | Data Blocks | | ----------------- | ------------ | ----------- | ---------------- | | 1 block | 1 block| many blocks | many blocks |</p> <p>\u5197\u4f59\u5757\u7ec4\u7684\u5907\u4efd\u7b56\u7565\u5728 mkfs \u65f6\uff0c\u6709\u4e00\u4e2a\u9ed8\u8ba4\u7684\u9009\u9879 sparse_super\uff0c\u6ee1\u8db3\u4ee5\u4e0b 2 \u4e2a\u6761\u4ef6\u7684\u9700\u8981\u5907\u4efd\u8d85\u7ea7\u5757\u548c\u7ec4\u63cf\u8ff0\u7b26\u3002\u53c2\u8003 - \u5757\u7ec40 - \u5757\u7ec4id\u4e3a3 \u62165 \u62167\u7684\u5e42(\u6ce8\u610f\uff0c\u5757\u7ec4\uff031\u662f3\u76840\u6b21\u5e42\uff0c\u56e0\u6b64\u4e5f\u6709backup superblock)\u3002 \u4ece\u4e0b\u9762\u8f93\u51fa\u4e2d\u4e0d\u96be\u770b\u51fa\uff0c</p> <pre><code>\uff031  32768  =  \uff0832876\uff09\uff0a3^0\n\uff033  98304  =   (32768) *3^1\n\uff035  163840 =   (32768) *5^1\n\uff037  229376 =   (32768) *7^1\n\uff039  294912 =   (32768) *3^2\n#25  \n</code></pre> <pre><code>...\nroot@node-1:~## dumpe2fs /dev/sdb2|grep super\ndumpe2fs 1.42 (29-Nov-2011)\nFilesystem features:      has_journal ext_attr resize_inode dir_index filetype needs_recovery extent flex_bg sparse_super large_file huge_file uninit_bg dir_nlink extra_isize\n  Primary superblock at 0, Group descriptors at 1-464\n  Backup superblock at 32768, Group descriptors at 32769-33232\n  Backup superblock at 98304, Group descriptors at 98305-98768\n  Backup superblock at 163840, Group descriptors at 163841-164304\n  Backup superblock at 229376, Group descriptors at 229377-229840\n  Backup superblock at 294912, Group descriptors at 294913-295376\n  Backup superblock at 819200, Group descriptors at 819201-819664\n  Backup superblock at 884736, Group descriptors at 884737-885200\n  Backup superblock at 1605632, Group descriptors at 1605633-1606096\n  Backup superblock at 2654208, Group descriptors at 2654209-2654672\n  Backup superblock at 4096000, Group descriptors at 4096001-4096464\n  Backup superblock at 7962624, Group descriptors at 7962625-7963088\n  Backup superblock at 11239424, Group descriptors at 11239425-11239888\n  Backup superblock at 20480000, Group descriptors at 20480001-20480464\n  Backup superblock at 23887872, Group descriptors at 23887873-23888336\n  Backup superblock at 71663616, Group descriptors at 71663617-71664080\n  Backup superblock at 78675968, Group descriptors at 78675969-78676432\n  Backup superblock at 102400000, Group descriptors at 102400001-102400464\n  Backup superblock at 214990848, Group descriptors at 214990849-214991312\n  Backup superblock at 512000000, Group descriptors at 512000001-512000464\n  Backup superblock at 550731776, Group descriptors at 550731777-550732240\n  Backup superblock at 644972544, Group descriptors at 644972545-644973008\n  Backup superblock at 1934917632, Group descriptors at 1934917633-1934918096\n</code></pre>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4/#3","title":"3 \u5bb9\u91cf\u7684\u8ba1\u7b97","text":"<p>ext4 allocates storage space in units of \u201cblocks\u201d. A block is a group of sectors between 1KiB and 64KiB, and the number of sectors must be an integral power of 2. Blocks are in turn grouped into larger units called block groups. Block size is specified at mkfs time and typically is 4KiB. You may experience mounting problems if block size is greater than page size (i.e. 64KiB blocks on a i386 which only has 4KiB memory pages). By default a filesystem can contain 2^32 blocks; if the \u201864bit\u2019 feature is enabled, then a filesystem can have 2^64 blocks. The location of structures is stored in terms of the block number the structure lives in and not the absolute offset on disk.</p> <p>For 32-bit filesystems, limits are as follows:</p> Item 1KiB 2KiB 4KiB 64KiB Blocks 2^32 2^32 2^32 2^32 Inodes 2^32 2^32 2^32 2^32 File System Size 4TiB 8TiB 16TiB 256TiB Blocks Per Block Group 8,192 16,384 32,768 524,288 Inodes Per Block Group 8,192 16,384 32,768 524,288 Block Group Size 8MiB 32MiB 128MiB 32GiB Blocks Per File, Extents 2^32 2^32 2^32 2^32 Blocks Per File, Block Maps 16,843,020 134,480,396 1,074,791,436 4,398,314,962,956 (really 2^32 due to field size limitations) File Size, Extents 4TiB 8TiB 16TiB 256TiB File Size, Block Maps 16GiB 256GiB 4TiB 256TiB <p>For 64-bit filesystems, limits are as follows:</p> Item 1KiB 2KiB 4KiB 64KiB Blocks 2^64 2^64 2^64 2^64 Inodes 2^32 2^32 2^32 2^32 File System Size 16ZiB 32ZiB 64ZiB 1YiB Blocks Per Block Group 8,192 16,384 32,768 524,288 Inodes Per Block Group 8,192 16,384 32,768 524,288 Block Group Size 8MiB 32MiB 128MiB 32GiB Blocks Per File, Extents 2^32 2^32 2^32 2^32 Blocks Per File, Block Maps 16,843,020 134,480,396 1,074,791,436 4,398,314,962,956 (really 2^32 due to field size limitations) File Size, Extents 4TiB 8TiB 16TiB 256TiB File Size, Block Maps 16GiB 256GiB 4TiB 256TiB <p>Note: Files not using extents (i.e. files using block maps) must be placed within the first 2^32 blocks of a filesystem. Files with extents must be placed within the first 2^48 blocks of a filesystem. It\u2019s not clear what happens with larger filesystems.</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4/#31","title":"3.1 \u8ba1\u7b97\u516c\u5f0f","text":"<ul> <li>block \u5927\u5c0f\uff1amkfs \u65f6\u6307\u5b9a\uff0c\u9ed8\u8ba4 4KiB</li> <li>\u6587\u4ef6\u7cfb\u7edf block \u6700\u5927\u6570\u91cf\uff1a\u56fa\u5b9a\u503c 32 \u4f4d\u7cfb\u7edf $2^{32}$\uff0c64 \u4f4d\u7cfb\u7edf $2^{64}$</li> <li>\u6587\u4ef6\u7cfb\u7edf\u6700\u5927\u5bb9\u91cf\uff1a<code>\u6587\u4ef6\u7cfb\u7edfblock\u6700\u5927\u6570\u91cf * block\u5927\u5c0f</code>\u3002\u5982 $2^{32}*4KiB=16TiB$</li> <li>Data Block Bitmap Per Block Group\uff1a\u56fa\u5b9a\u53601 \u4e2a block</li> <li>inode Bitmap Per Block Group\uff1a\u56fa\u5b9a\u5360 1 \u4e2a block</li> <li>Blocks Per Block Group\uff1a<code>8 * \u5757\u7684\u5927\u5c0f * \u6570\u636e\u4f4d\u56fe\u5757\u6570</code>\u3002\u5982 $84^{10}1=32768$</li> <li>Block Group Size\uff1a<code>\u5757\u7ec4\u4e2dblock\u6570\u91cf * block\u5927\u5c0f</code>\u3002\u5982 $30768*4KiB=128MiB$</li> <li>\u5355\u4e2a\u6587\u4ef6\u6700\u5927\u5927\u5c0f\uff08bitmap \u6a21\u5f0f\uff09\uff1a\u901a\u8fc7\u591a\u7ea7\u5bfb\u5740\u8ba1\u7b97\u5f97\u5230\u53c2\u8003</li> </ul> <p>\u8868 1. \u5404\u79cd\u6570\u636e\u5757\u5bf9\u5e94\u7684\u6587\u4ef6\u5bfb\u5740\u8303\u56f4</p> \u5757\u5927\u5c0f \u76f4\u63a5\u5bfb\u5740 \u95f4\u63a5\u5bfb\u5740 \u4e8c\u6b21\u95f4\u63a5\u5bfb\u5740 \u4e09\u6b21\u95f4\u63a5\u5bfb\u5740 1024 12KB 268KB 64.26MB 16.06GB 2048 24KB 1.02MB 513.02MB 265.5GB 4096 48KB 4.04MB 4GB ~ 4TB <ul> <li>ext3 \u6587\u4ef6\u7cfb\u7edf inode \u591a\u7ea7\u5bfb\u5740\u7ed3\u6784 </li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/ext/ext4/#4-super-block","title":"4 \u8d85\u7ea7\u5757\uff08Super Block\uff09","text":"<p>\u8d85\u7ea7\u5757\u8bb0\u5f55\u6709\u5173\u5c01\u95ed\u6587\u4ef6\u7cfb\u7edf\u7684\u5404\u79cd\u4fe1\u606f\uff0c\u4f8b\u5982\u5757\u8ba1\u6570\u3001\u7d22\u5f15\u8282\u70b9\u8ba1\u6570\u3001\u652f\u6301\u7684\u529f\u80fd\u3001\u7ef4\u62a4\u4fe1\u606f\u7b49\u3002 \u5982\u679c\u8bbe\u7f6e\u4e86\u7a00\u758f_\u8d85\u7ea7\u7279\u5f81\u6807\u5fd7\uff0c\u5219\u4ec5\u5728\u7ec4\u53f7\u4e3a 0 \u6216 3\u30015 \u6216 7 \u7684\u5e42\u7684\u7ec4\u4e2d\u4fdd\u7559\u8d85\u7ea7\u5757\u548c\u7ec4\u63cf\u8ff0\u7b26\u7684\u5197\u4f59\u526f\u672c\u3002\u5982\u679c\u672a\u8bbe\u7f6e\u8be5\u6807\u5fd7\uff0c\u5219\u5728\u6240\u6709\u7ec4\u4e2d\u4fdd\u7559\u5197\u4f59\u526f\u672c\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/fuse/FUSE-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/","title":"FUSE","text":"<p>\u539f\u6587\u6863\u5730\u5740</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/fuse/FUSE-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#1-definitions","title":"1 Definitions","text":"<ul> <li>Userspace filesystem\u7528\u6237\u7a7a\u95f4\u6587\u4ef6\u7cfb\u7edf:</li> </ul> <p>A filesystem in which data and metadata are provided by an ordinary userspace process. The filesystem can be accessed normally through the kernel interface.   \u7531\u666e\u901a\u7528\u6237\u7a7a\u95f4\u8fdb\u7a0b\u63d0\u4f9b\u6570\u636e\u548c\u5143\u6570\u636e\u7684\u6587\u4ef6\u7cfb\u7edf\u3002\u6587\u4ef6\u7cfb\u7edf\u53ef\u4ee5\u901a\u8fc7\u5185\u6838\u63a5\u53e3\u6b63\u5e38\u8bbf\u95ee\u3002</p> <ul> <li>Filesystem daemon\u6587\u4ef6\u7cfb\u7edf\u5b88\u62a4\u7a0b\u5e8f:</li> </ul> <p>The process(es) providing the data and metadata of the filesystem.</p> <p>\u63d0\u4f9b\u6587\u4ef6\u7cfb\u7edf\u6570\u636e\u548c\u5143\u6570\u636e\u7684\u8fc7\u7a0b\u3002</p> <ul> <li>Non-privileged mount (or user mount)\u975e\u7279\u6743\u6302\u8f7d\uff08\u6216\u7528\u6237\u6302\u8f7d\uff09:</li> </ul> <p>A userspace filesystem mounted by a non-privileged (non-root) user. The filesystem daemon is running with the privileges of the mounting user. NOTE: this is not the same as mounts allowed with the \u201cuser\u201d option in /etc/fstab, which is not discussed here.</p> <p>\u7531\u975e\u7279\u6743\uff08\u975eroot\uff09\u7528\u6237\u5b89\u88c5\u7684\u7528\u6237\u7a7a\u95f4\u6587\u4ef6\u7cfb\u7edf\u3002\u6587\u4ef6\u7cfb\u7edf\u5b88\u62a4\u7a0b\u5e8f\u4ee5\u6302\u8f7d\u7528\u6237\u7684\u6743\u9650\u8fd0\u884c\u3002\u6ce8\u610f\uff1a\u8fd9\u4e0e/etc/fstab\u4e2d\u7684\u201cuser\u201d\u9009\u9879\u6240\u5141\u8bb8\u7684\u6302\u8f7d\u4e0d\u540c\uff0c\u8fd9\u91cc\u4e0d\u8ba8\u8bba\u3002</p> <ul> <li>Filesystem connection\u6587\u4ef6\u7cfb\u7edf\u8fde\u63a5:</li> </ul> <p>A connection between the filesystem daemon and the kernel. The connection exists until either the daemon dies, or the filesystem is umounted. Note that detaching (or lazy umounting) the filesystem does not break the connection, in this case it will exist until the last reference to the filesystem is released.</p> <p>\u6587\u4ef6\u7cfb\u7edf\u5b88\u62a4\u7a0b\u5e8f\u548c\u5185\u6838\u4e4b\u95f4\u7684\u8fde\u63a5\u3002\u8fde\u63a5\u4e00\u76f4\u5b58\u5728\uff0c\u76f4\u5230\u5b88\u62a4\u7a0b\u5e8f\u7ec8\u6b62\uff0c\u6216\u8005\u6587\u4ef6\u7cfb\u7edf\u7ec8\u6b62\u3002\u8bf7\u6ce8\u610f\uff0c\u5206\u79bb\uff08\u6216\u5ef6\u8fdf\u5378\u8f7d\uff09\u6587\u4ef6\u7cfb\u7edf\u4e0d\u4f1a\u65ad\u5f00\u8fde\u63a5\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b83\u5c06\u4e00\u76f4\u5b58\u5728\uff0c\u76f4\u5230\u91ca\u653e\u5bf9\u6587\u4ef6\u7cfb\u7edf\u7684\u6700\u540e\u4e00\u6b21\u5f15\u7528\u3002</p> <ul> <li>Mount owner\u6302\u8f7d\u62e5\u6709\u8005:</li> </ul> <p>The user who does the mounting.</p> <p>\u6267\u884c\u5b89\u88c5\u7684\u7528\u6237\u3002</p> <ul> <li>User\u7528\u6237:</li> </ul> <p>The user who is performing filesystem operations.</p> <p>\u6b63\u5728\u6267\u884c\u6587\u4ef6\u7cfb\u7edf\u64cd\u4f5c\u7684\u7528\u6237\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/fuse/FUSE-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#2-what-is-fuse","title":"2 What is FUSE?","text":"<p>FUSE is a userspace filesystem framework. It consists of a kernel module (fuse.ko), a userspace library (<code>libfuse.*</code>) and a mount utility (<code>fusermount</code>).</p> <p>FUSE \u662f\u4e00\u4e2a\u7528\u6237\u7a7a\u95f4\u6587\u4ef6\u7cfb\u7edf\u6846\u67b6\u3002\u5b83\u7531\u5185\u6838\u6a21\u5757\uff08fuse.ko\uff09\u3001\u7528\u6237\u7a7a\u95f4\u5e93\uff08<code>libfuse.*</code>\uff09\u548c\u88c5\u8f7d\u5b9e\u7528\u7a0b\u5e8f\uff08<code>fusermount</code>\uff09\u7ec4\u6210\u3002</p> <p>One of the most important features of FUSE is allowing secure, non-privileged mounts. This opens up new possibilities for the use of filesystems. A good example is sshfs: a secure network filesystem using the sftp protocol.</p> <p>FUSE\u6700\u91cd\u8981\u7684\u7279\u6027\u4e4b\u4e00\u662f\u5141\u8bb8\u5b89\u5168\u3001\u975e\u7279\u6743\u7684\u88c5\u8f7d\u3002\u8fd9\u4e3a\u6587\u4ef6\u7cfb\u7edf\u7684\u4f7f\u7528\u5f00\u8f9f\u4e86\u65b0\u7684\u53ef\u80fd\u6027\u3002\u4e00\u4e2a\u5f88\u597d\u7684\u4f8b\u5b50\u662fsshfs\uff1a\u4e00\u4e2a\u4f7f\u7528sftp\u534f\u8bae\u7684\u5b89\u5168\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\u3002</p> <p>The userspace library and utilities are available from the FUSE homepage: \u7528\u6237\u7a7a\u95f4\u5e93\u548c\u5b9e\u7528\u7a0b\u5e8f\u53ef\u4eceFUSE\u4e3b\u9875\u83b7\u53d6</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/fuse/FUSE-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#3-filesystem-type","title":"3 Filesystem type","text":"<p>The filesystem type given to mount(2) can be one of the following:</p> <ul> <li>fuse</li> </ul> <p>This is the usual way to mount a FUSE filesystem. The first argument of the mount system call may contain an arbitrary string, which is not interpreted by the kernel.</p> <p>\u8fd9\u662f\u5b89\u88c5FUSE\u6587\u4ef6\u7cfb\u7edf\u7684\u5e38\u7528\u65b9\u6cd5\u3002mount\u7cfb\u7edf\u8c03\u7528\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u53ef\u80fd\u5305\u542b\u4e00\u4e2a\u4efb\u610f\u5b57\u7b26\u4e32\uff0c\u5185\u6838\u4e0d\u4f1a\u89e3\u91ca\u8be5\u5b57\u7b26\u4e32\u3002</p> <ul> <li>fuseblk</li> </ul> <p>The filesystem is block device based. The first argument of the mount system call is interpreted as the name of the device.</p> <p>\u6587\u4ef6\u7cfb\u7edf\u662f\u57fa\u4e8e\u5757\u8bbe\u5907\u7684\u3002\u88c5\u8f7d\u7cfb\u7edf\u8c03\u7528\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u88ab\u89e3\u91ca\u4e3a\u8bbe\u5907\u7684\u540d\u79f0\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/fuse/FUSE-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#4-mount-options","title":"4 Mount options","text":"<ul> <li>fd=N</li> </ul> <p>The file descriptor to use for communication between the userspace filesystem and the kernel. The file descriptor must have been obtained by opening the FUSE device (\u2018/dev/fuse\u2019).</p> <p>\u7528\u4e8e\u7528\u6237\u7a7a\u95f4\u6587\u4ef6\u7cfb\u7edf\u548c\u5185\u6838\u4e4b\u95f4\u901a\u4fe1\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u3002\u6587\u4ef6\u63cf\u8ff0\u7b26\u5fc5\u987b\u662f\u901a\u8fc7\u6253\u5f00FUSE\u8bbe\u5907\uff08\u201c/dev/FUSE\u201d\uff09\u83b7\u5f97\u7684\u3002</p> <ul> <li>rootmode=M</li> </ul> <p>The file mode of the filesystem\u2019s root in octal representation.</p> <p>\u4ee5\u516b\u8fdb\u5236\u8868\u793a\u7684\u6587\u4ef6\u7cfb\u7edf\u6839\u7684\u6587\u4ef6\u6a21\u5f0f\u3002</p> <ul> <li>user_id=N</li> </ul> <p>The numeric user id of the mount owner.</p> <p>\u88c5\u8f7d\u6240\u6709\u8005\u7684\u6570\u5b57\u7528\u6237id\u3002</p> <ul> <li>group_id=N</li> </ul> <p>The numeric group id of the mount owner.</p> <p>\u88c5\u8f7d\u6240\u6709\u8005\u7684\u6570\u5b57\u7ec4id\u3002</p> <ul> <li>default_permissions</li> </ul> <p>By default FUSE doesn\u2019t check file access permissions, the filesystem is free to implement its access policy or leave it to the underlying file access mechanism (e.g. in case of network filesystems). This option enables permission checking, restricting access based on file mode. It is usually useful together with the \u2018allow_other\u2019 mount option.</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cFUSE\u4e0d\u68c0\u67e5\u6587\u4ef6\u8bbf\u95ee\u6743\u9650\uff0c\u6587\u4ef6\u7cfb\u7edf\u53ef\u4ee5\u81ea\u7531\u5b9e\u73b0\u5176\u8bbf\u95ee\u7b56\u7565\u6216\u5c06\u5176\u7559\u7ed9\u5e95\u5c42\u6587\u4ef6\u8bbf\u95ee\u673a\u5236\uff08\u4f8b\u5982\uff0c\u5728\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\u7684\u60c5\u51b5\u4e0b\uff09\u3002\u6b64\u9009\u9879\u542f\u7528\u6743\u9650\u68c0\u67e5\uff0c\u6839\u636e\u6587\u4ef6\u6a21\u5f0f\u9650\u5236\u8bbf\u95ee\u3002\u5b83\u901a\u5e38\u4e0e\u201callow_other\u201d\u88c5\u8f7d\u9009\u9879\u4e00\u8d77\u4f7f\u7528\u3002</p> <ul> <li>allow_other</li> </ul> <p>This option overrides the security measure restricting file access to the user mounting the filesystem. This option is by default only allowed to root, but this restriction can be removed with a (userspace) configuration option.</p> <p>\u6b64\u9009\u9879\u5c06\u8986\u76d6\u9650\u5236\u5b89\u88c5\u6587\u4ef6\u7cfb\u7edf\u7684\u7528\u6237\u8bbf\u95ee\u6587\u4ef6\u7684\u5b89\u5168\u63aa\u65bd\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6b64\u9009\u9879\u4ec5\u5141\u8bb8root\u7528\u6237\u4f7f\u7528\uff0c\u4f46\u53ef\u4ee5\u4f7f\u7528\uff08\u7528\u6237\u7a7a\u95f4\uff09\u914d\u7f6e\u9009\u9879\u5220\u9664\u6b64\u9650\u5236\u3002</p> <ul> <li>max_read=N</li> </ul> <p>With this option the maximum size of read operations can be set. The default is infinite. Note that the size of read requests is limited anyway to 32 pages (which is 128kbyte on i386).</p> <p>\u4f7f\u7528\u6b64\u9009\u9879\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u8bfb\u53d6\u64cd\u4f5c\u7684\u6700\u5927\u5927\u5c0f\u3002\u9ed8\u8ba4\u503c\u4e3a\u65e0\u9650\u3002\u8bf7\u6ce8\u610f\uff0c\u8bfb\u53d6\u8bf7\u6c42\u7684\u5927\u5c0f\u65e0\u8bba\u5982\u4f55\u90fd\u9650\u5236\u4e3a32\u9875\uff08\u5728i386\u4e0a\u4e3a128kbyte\uff09\u3002</p> <ul> <li>blksize=N</li> </ul> <p>Set the block size for the filesystem. The default is 512. This option is only valid for \u2018fuseblk\u2019 type mounts.</p> <p>\u8bbe\u7f6e\u6587\u4ef6\u7cfb\u7edf\u7684\u5757\u5927\u5c0f\u3002\u9ed8\u8ba4\u503c\u4e3a512\u3002\u6b64\u9009\u9879\u4ec5\u5bf9\u201cfuseblk\u201d\u7c7b\u578b\u7684\u88c5\u8f7d\u6709\u6548\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/fuse/FUSE-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#5-control-filesystem","title":"5 Control filesystem","text":"<p>There\u2019s a control filesystem for FUSE, which can be mounted by:</p> <pre><code>mount -t fusectl none /sys/fs/fuse/connections\n</code></pre> <p>Mounting it under the \u2018/sys/fs/fuse/connections\u2019 directory makes it backwards compatible with earlier versions.</p> <p>Under the fuse control filesystem each connection has a directory named by a unique number.</p> <p>For each connection the following files exist within this directory:</p> <ul> <li>waiting</li> </ul> <p>The number of requests which are waiting to be transferred to userspace or being processed by the filesystem daemon. If there is no filesystem activity and \u2018waiting\u2019 is non-zero, then the filesystem is hung or deadlocked.</p> <ul> <li>abort</li> </ul> <p>Writing anything into this file will abort the filesystem connection. This means that all waiting requests will be aborted an error returned for all aborted and new requests.</p> <p>Only the owner of the mount may read or write these files.</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/fuse/FUSE-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#51-interrupting-filesystem-operations","title":"5.1 Interrupting filesystem operations","text":"<p>If a process issuing a FUSE filesystem request is interrupted, the following will happen:</p> <p>\u5982\u679c\u53d1\u51faFUSE\u6587\u4ef6\u7cfb\u7edf\u8bf7\u6c42\u7684\u8fdb\u7a0b\u88ab\u4e2d\u65ad\uff0c\u5c06\u53d1\u751f\u4ee5\u4e0b\u60c5\u51b5\uff1a</p> <ul> <li>If the request is not yet sent to userspace AND the signal is fatal (SIGKILL or unhandled fatal signal), then the request is dequeued and returns immediately.\u5982\u679c\u8bf7\u6c42\u5c1a\u672a\u53d1\u9001\u5230\u7528\u6237\u7a7a\u95f4\uff0c\u5e76\u4e14\u4fe1\u53f7\u662f\u81f4\u547d\u7684\uff08SIGKILL\u6216\u672a\u5904\u7406\u7684\u81f4\u547d\u4fe1\u53f7\uff09\uff0c\u90a3\u4e48\u8bf7\u6c42\u5c06\u9000\u51fa\u961f\u5217\u5e76\u7acb\u5373\u8fd4\u56de\u3002</li> <li>If the request is not yet sent to userspace AND the signal is not fatal, then an interrupted flag is set for the request. When the request has been successfully transferred to userspace and this flag is set, an INTERRUPT request is queued.\u5982\u679c\u8bf7\u6c42\u5c1a\u672a\u53d1\u9001\u5230\u7528\u6237\u7a7a\u95f4\uff0c\u5e76\u4e14\u4fe1\u53f7\u4e0d\u662f\u81f4\u547d\u7684\uff0c\u5219\u4e3a\u8bf7\u6c42\u8bbe\u7f6e\u4e2d\u65ad\u6807\u5fd7\u3002\u5f53\u8bf7\u6c42\u6210\u529f\u4f20\u8f93\u5230\u7528\u6237\u7a7a\u95f4\u5e76\u4e14\u8bbe\u7f6e\u4e86\u6b64\u6807\u5fd7\u65f6\uff0cINTERRUPT\u8bf7\u6c42\u5c06\u6392\u961f\u3002</li> <li>If the request is already sent to userspace, then an INTERRUPT request is queued.\u5982\u679c\u8bf7\u6c42\u5df2\u53d1\u9001\u5230\u7528\u6237\u7a7a\u95f4\uff0c\u5219INTERRUPT\u8bf7\u6c42\u5c06\u6392\u961f\u3002</li> </ul> <p>INTERRUPT requests take precedence over other requests, so the userspace filesystem will receive queued INTERRUPTs before any others.</p> <p>INTERRUPT\u8bf7\u6c42\u4f18\u5148\u4e8e\u5176\u4ed6\u8bf7\u6c42\uff0c\u56e0\u6b64\u7528\u6237\u7a7a\u95f4\u6587\u4ef6\u7cfb\u7edf\u5c06\u5148\u4e8e\u5176\u4ed6\u8bf7\u6c42\u63a5\u6536\u6392\u961f\u7684INTERRUPT\u3002</p> <p>The userspace filesystem may ignore the INTERRUPT requests entirely, or may honor them by sending a reply to the original request, with the error set to EINTR.</p> <p>\u7528\u6237\u7a7a\u95f4\u6587\u4ef6\u7cfb\u7edf\u53ef\u4ee5\u5b8c\u5168\u5ffd\u7565INTERRUPT\u8bf7\u6c42\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u53d1\u9001\u5bf9original\u8bf7\u6c42\u7684\u56de\u590d\u6765\u5151\u73b0\u8fd9\u4e9b\u8bf7\u6c42\uff0c\u9519\u8bef\u8bbe\u7f6e\u4e3aEINTR\u3002</p> <p>It is also possible that there\u2019s a race between processing the original request and its INTERRUPT request. There are two possibilities:</p> <p>\u5904\u7406\u539f\u59cb\u8bf7\u6c42\u548c\u5176INTERRUPT\u8bf7\u6c42\u4e4b\u95f4\u4e5f\u53ef\u80fd\u5b58\u5728\u7ade\u4e89\u3002\u6709\u4e24\u79cd\u53ef\u80fd\u6027\uff1a</p> <ol> <li>The INTERRUPT request is processed before the original request is processed\u5728\u5904\u7406\u539f\u59cb\u8bf7\u6c42\u4e4b\u524d\u5904\u7406INTERRUPT\u8bf7\u6c42</li> <li>The INTERRUPT request is processed after the original request has been answeredINTERRUPT\u8bf7\u6c42\u5728\u539f\u59cb\u8bf7\u6c42\u5f97\u5230\u54cd\u5e94\u540e\u8fdb\u884c\u5904\u7406</li> </ol> <p>If the filesystem cannot find the original request, it should wait for some timeout and/or a number of new requests to arrive, after which it should reply to the INTERRUPT request with an EAGAIN error. In case 1) the INTERRUPT request will be requeued. In case 2) the INTERRUPT reply will be ignored.</p> <p>\u5982\u679c\u6587\u4ef6\u7cfb\u7edf\u627e\u4e0d\u5230\u539f\u59cb\u8bf7\u6c42\uff0c\u5b83\u5e94\u8be5\u7b49\u5f85\u4e00\u4e9b\u8d85\u65f6\u548c/\u6216\u4e00\u4e9b\u65b0\u8bf7\u6c42\u5230\u8fbe\uff0c\u4e4b\u540e\u5b83\u5e94\u8be5\u7528EAGAIN\u9519\u8bef\u56de\u590dINTERRUPT\u8bf7\u6c42\u3002\u5728\u60c5\u51b51\uff09\u4e2d\uff0c\u4e2d\u65ad\u8bf7\u6c42\u5c06\u88ab\u91cd\u65b0\u6392\u961f\u3002\u5728\u60c5\u51b52\uff09\u4e0b\uff0cINTERRUPT\u56de\u590d\u5c06\u88ab\u5ffd\u7565\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/fuse/FUSE-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#6-aborting-a-filesystem-connection","title":"6 Aborting a filesystem connection","text":"<p>It is possible to get into certain situations where the filesystem is not responding. Reasons for this may be:</p> <p>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6587\u4ef6\u7cfb\u7edf\u6ca1\u6709\u54cd\u5e94\u662f\u53ef\u80fd\u7684\u3002\u539f\u56e0\u53ef\u80fd\u662f\uff1a</p> <p>a. Broken userspace filesystem implementation\u635f\u574f\u7684\u7528\u6237\u7a7a\u95f4\u6587\u4ef6\u7cfb\u7edf\u5b9e\u73b0 b. Network connection down\u7f51\u7edc\u8fde\u63a5\u65ad\u5f00 c. Accidental deadlock\u610f\u5916\u6b7b\u9501 d. Malicious deadlock\u6076\u610f\u6b7b\u9501</p> <p>(For more on c) and d) see later sections)</p> <p>In either of these cases it may be useful to abort the connection to the filesystem. There are several ways to do this:</p> <p>\u5728\u8fd9\u4e24\u79cd\u60c5\u51b5\u4e0b\uff0c\u4e2d\u6b62\u4e0e\u6587\u4ef6\u7cfb\u7edf\u7684\u8fde\u63a5\u53ef\u80fd\u90fd\u5f88\u6709\u7528\u3002\u6709\u51e0\u79cd\u65b9\u6cd5\u53ef\u4ee5\u505a\u5230\u8fd9\u4e00\u70b9\uff1a</p> <ul> <li>Kill the filesystem daemon. Works in case of a) and b)\u5173\u95ed\u6587\u4ef6\u7cfb\u7edf\u5b88\u62a4\u7a0b\u5e8f\u3002a\uff09\u548cb\uff09\u60c5\u51b5\u4e0b\u7684\u5de5\u7a0b</li> <li>Kill the filesystem daemon and all users of the filesystem. Works in all cases except some malicious deadlocks\u6740\u6b7b\u6587\u4ef6\u7cfb\u7edf\u5b88\u62a4\u7a0b\u5e8f\u548c\u6587\u4ef6\u7cfb\u7edf\u7684\u6240\u6709\u7528\u6237\u3002\u9664\u67d0\u4e9b\u6076\u610f\u6b7b\u9501\u5916\uff0c\u5728\u6240\u6709\u60c5\u51b5\u4e0b\u90fd\u6709\u6548</li> <li>Use forced umount (umount -f). Works in all cases but only if filesystem is still attached (it hasn\u2019t been lazy unmounted)\u4f7f\u7528\u5f3a\u5236\u7684umount\uff08umount-f\uff09\u3002\u5728\u6240\u6709\u60c5\u51b5\u4e0b\u90fd\u53ef\u4ee5\u5de5\u4f5c\uff0c\u4f46\u4ec5\u5f53\u6587\u4ef6\u7cfb\u7edf\u4ecd\u7136\u8fde\u63a5\u65f6\uff08\u5b83\u8fd8\u6ca1\u6709\u88ab\u5ef6\u8fdf\u5378\u8f7d\uff09</li> <li>Abort filesystem through the FUSE control filesystem. Most powerful method, always works.\u901a\u8fc7FUSE\u63a7\u5236\u6587\u4ef6\u7cfb\u7edf\u4e2d\u6b62\u6587\u4ef6\u7cfb\u7edf\u3002\u6700\u5f3a\u5927\u7684\u65b9\u6cd5\uff0c\u603b\u662f\u6709\u6548\u7684\u3002</li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/fuse/FUSE-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#7-how-do-non-privileged-mounts-work","title":"7 How do non-privileged mounts work?","text":"<p>Since the mount() system call is a privileged operation, a helper program (fusermount) is needed, which is installed setuid root.</p> <p>\u7531\u4e8emount\uff08\uff09\u7cfb\u7edf\u8c03\u7528\u662f\u4e00\u4e2a\u7279\u6743\u64cd\u4f5c\uff0c\u56e0\u6b64\u9700\u8981\u4e00\u4e2a\u52a9\u624b\u7a0b\u5e8f\uff08fusermount\uff09\uff0c\u5b83\u5b89\u88c5\u5728setuid root\u4e2d\u3002</p> <p>The implication of providing non-privileged mounts is that the mount owner must not be able to use this capability to compromise the system. Obvious requirements arising from this are:</p> <p>\u63d0\u4f9b\u975e\u7279\u6743\u88c5\u8f7d\u7684\u542b\u4e49\u662f\uff0c\u88c5\u8f7d\u6240\u6709\u8005\u4e0d\u80fd\u4f7f\u7528\u6b64\u529f\u80fd\u5371\u5bb3\u7cfb\u7edf\u3002\u7531\u6b64\u4ea7\u751f\u7684\u660e\u663e\u8981\u6c42\u5982\u4e0b\uff1a</p> <p>A. mount owner should not be able to get elevated privileges with the help of the mounted filesystem\u88c5\u8f7d\u6240\u6709\u8005\u5e94\u8be5\u65e0\u6cd5\u5728\u88c5\u8f7d\u7684\u6587\u4ef6\u7cfb\u7edf\u7684\u5e2e\u52a9\u4e0b\u83b7\u5f97\u63d0\u5347\u7684\u6743\u9650 B. mount owner should not get illegitimate access to information from other users\u2019 and the super user\u2019s processes\u88c5\u8f7d\u6240\u6709\u8005\u4e0d\u5e94\u975e\u6cd5\u8bbf\u95ee\u5176\u4ed6\u7528\u6237\u548c\u8d85\u7ea7\u7528\u6237\u8fdb\u7a0b\u4e2d\u7684\u4fe1\u606f C. mount owner should not be able to induce undesired behavior in other users\u2019 or the super user\u2019s processes\u88c5\u8f7d\u6240\u6709\u8005\u4e0d\u5e94\u5728\u5176\u4ed6\u7528\u6237\u6216\u8d85\u7ea7\u7528\u6237\u7684\u8fdb\u7a0b\u4e2d\u5f15\u53d1\u4e0d\u671f\u671b\u7684\u884c\u4e3a</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/fuse/FUSE-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#8-how-are-requirements-fulfilled","title":"8 How are requirements fulfilled?\u5982\u4f55\u6ee1\u8db3\u8981\u6c42\uff1f","text":"<ol> <li> <p>(A)The mount owner could gain elevated privileges by either:\u88c5\u8f7d\u6240\u6709\u8005\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u4efb\u4e00\u65b9\u5f0f\u83b7\u5f97\u63d0\u5347\u7684\u6743\u9650\uff1a</p> <ol> <li>creating a filesystem containing a device file, then opening this device\u521b\u5efa\u5305\u542b\u8bbe\u5907\u6587\u4ef6\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u7136\u540e\u6253\u5f00\u8be5\u8bbe\u5907</li> <li>creating a filesystem containing a suid or sgid application, then executing this application\u521b\u5efa\u5305\u542bsuid\u6216sgid\u5e94\u7528\u7a0b\u5e8f\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u7136\u540e\u6267\u884c\u8be5\u5e94\u7528\u7a0b\u5e8f</li> </ol> </li> </ol> <p>The solution is not to allow opening device files and ignore setuid and setgid bits when executing programs. To ensure this fusermount always adds \u201cnosuid\u201d and \u201cnodev\u201d to the mount options for non-privileged mounts.</p> <p>\u89e3\u51b3\u65b9\u6848\u662f\u4e0d\u5141\u8bb8\u5728\u6267\u884c\u7a0b\u5e8f\u65f6\u6253\u5f00\u8bbe\u5907\u6587\u4ef6\u5e76\u5ffd\u7565setuid\u548csetgid\u4f4d\u3002\u4e3a\u4e86\u786e\u4fdd\u6b64fusermount\u59cb\u7ec8\u5728\u975e\u7279\u6743\u88c5\u8f7d\u7684\u88c5\u8f7d\u9009\u9879\u4e2d\u6dfb\u52a0\u201cnosuid\u201d\u548c\u201cnodev\u201d\u3002</p> <ol> <li> <p>(B)If another user is accessing files or directories in the filesystem, the filesystem daemon serving requests can record the exact sequence and timing of operations performed. This information is otherwise inaccessible to the mount owner, so this counts as an information leak.\u5982\u679c\u53e6\u4e00\u4e2a\u7528\u6237\u6b63\u5728\u8bbf\u95ee\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u6587\u4ef6\u6216\u76ee\u5f55\uff0c\u670d\u52a1\u8bf7\u6c42\u7684\u6587\u4ef6\u7cfb\u7edf\u5b88\u62a4\u7a0b\u5e8f\u53ef\u4ee5\u8bb0\u5f55\u6240\u6267\u884c\u64cd\u4f5c\u7684\u786e\u5207\u987a\u5e8f\u548c\u65f6\u95f4\u3002\u5426\u5219\uff0c\u88c5\u8f7d\u6240\u6709\u8005\u65e0\u6cd5\u8bbf\u95ee\u6b64\u4fe1\u606f\uff0c\u56e0\u6b64\u8fd9\u5c06\u88ab\u89c6\u4e3a\u4fe1\u606f\u6cc4\u6f0f\u3002</p> <p>The solution to this problem will be presented in point 2) of C).\u8be5\u95ee\u9898\u7684\u89e3\u51b3\u65b9\u6848\u5c06\u5728C.2\uff09\u70b9\u4e2d\u7ed9\u51fa\u3002</p> </li> <li> <p>(C)There are several ways in which the mount owner can induce undesired behavior in other users\u2019 processes, such as:\u88c5\u8f7d\u6240\u6709\u8005\u53ef\u4ee5\u901a\u8fc7\u591a\u79cd\u65b9\u5f0f\u5728\u5176\u4ed6\u7528\u6237\u7684\u8fdb\u7a0b\u4e2d\u8bf1\u5bfc\u4e0d\u671f\u671b\u7684\u884c\u4e3a\uff0c\u4f8b\u5982\uff1a</p> <ol> <li>mounting a filesystem over a file or directory which the mount owner could otherwise not be able to modify (or could only make limited modifications).\u5c06\u6587\u4ef6\u7cfb\u7edf\u88c5\u8f7d\u5230\u88c5\u8f7d\u6240\u6709\u8005\u65e0\u6cd5\u4fee\u6539\uff08\u6216\u53ea\u80fd\u8fdb\u884c\u6709\u9650\u4fee\u6539\uff09\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u4e0a\u3002</li> </ol> <p>This is solved in fusermount, by checking the access permissions on the mountpoint and only allowing the mount if the mount owner can do unlimited modification (has write access to the mountpoint, and mountpoint is not a \u201csticky\u201d directory)</p> <p>\u8fd9\u53ef\u4ee5\u5728fusermount\u4e2d\u89e3\u51b3\uff0c\u65b9\u6cd5\u662f\u68c0\u67e5\u88c5\u8f7d\u70b9\u4e0a\u7684\u8bbf\u95ee\u6743\u9650\uff0c\u5e76\u4ec5\u5728\u88c5\u8f7d\u6240\u6709\u8005\u53ef\u4ee5\u8fdb\u884c\u65e0\u9650\u4fee\u6539\u65f6\u624d\u5141\u8bb8\u88c5\u8f7d\uff08\u5177\u6709\u5bf9\u88c5\u8f7d\u70b9\u7684\u5199\u5165\u6743\u9650\uff0c\u5e76\u4e14\u88c5\u8f7d\u70b9\u4e0d\u662f\u201c\u7c98\u6027\u201d\u76ee\u5f55\uff09</p> <ol> <li>Even if 1) is solved the mount owner can change the behavior of other users\u2019 processes.\u5373\u4f7f\u89e3\u51b3\u4e861\uff09\uff0c\u88c5\u8f7d\u6240\u6709\u8005\u4e5f\u53ef\u4ee5\u66f4\u6539\u5176\u4ed6\u7528\u6237\u8fdb\u7a0b\u7684\u884c\u4e3a\u3002</li> </ol> <ol> <li>(i)It can slow down or indefinitely delay the execution of a filesystem operation creating a DoS against the user or the whole system. For example a suid application locking a system file, and then accessing a file on the mount owner\u2019s filesystem could be stopped, and thus causing the system file to be locked forever.\u5b83\u53ef\u4ee5\u51cf\u6162\u6216\u65e0\u9650\u671f\u5ef6\u8fdf\u6587\u4ef6\u7cfb\u7edf\u64cd\u4f5c\u7684\u6267\u884c\uff0c\u4ece\u800c\u5bf9\u7528\u6237\u6216\u6574\u4e2a\u7cfb\u7edf\u9020\u6210DoS\u3002\u4f8b\u5982\uff0c\u4e00\u4e2asuid\u5e94\u7528\u7a0b\u5e8f\u9501\u5b9a\u4e00\u4e2a\u7cfb\u7edf\u6587\u4ef6\uff0c\u7136\u540e\u8bbf\u95ee\u88c5\u8f7d\u6240\u6709\u8005\u7684\u6587\u4ef6\u7cfb\u7edf\u4e0a\u7684\u6587\u4ef6\uff0c\u53ef\u80fd\u4f1a\u88ab\u505c\u6b62\uff0c\u4ece\u800c\u5bfc\u81f4\u7cfb\u7edf\u6587\u4ef6\u88ab\u6c38\u4e45\u9501\u5b9a\u3002</li> <li>(ii)It can present files or directories of unlimited length, or directory structures of unlimited depth, possibly causing a system process to eat up diskspace, memory or other resources, again causing DoS.\u5b83\u53ef\u4ee5\u5448\u73b0\u65e0\u9650\u957f\u5ea6\u7684\u6587\u4ef6\u6216\u76ee\u5f55\uff0c\u6216\u65e0\u9650\u6df1\u5ea6\u7684\u76ee\u5f55\u7ed3\u6784\uff0c\u53ef\u80fd\u5bfc\u81f4\u7cfb\u7edf\u8fdb\u7a0b\u5360\u7528\u78c1\u76d8\u7a7a\u95f4\u3001\u5185\u5b58\u6216\u5176\u4ed6\u8d44\u6e90\uff0c\u518d\u6b21\u5bfc\u81f4DoS\u3002</li> </ol> <p>The solution to this as well as B) is not to allow processes to access the filesystem, which could otherwise not be monitored or manipulated by the mount owner. Since if the mount owner can ptrace a process, it can do all of the above without using a FUSE mount, the same criteria as used in ptrace can be used to check if a process is allowed to access the filesystem or not.</p> <p>\u89e3\u51b3\u8fd9\u4e00\u95ee\u9898\u7684\u65b9\u6cd5\u4ee5\u53caB\uff09\u662f\u4e0d\u5141\u8bb8\u8fdb\u7a0b\u8bbf\u95ee\u6587\u4ef6\u7cfb\u7edf\uff0c\u5426\u5219\u88c5\u8f7d\u6240\u6709\u8005\u53ef\u80fd\u65e0\u6cd5\u76d1\u89c6\u6216\u64cd\u7eb5\u6587\u4ef6\u7cfb\u7edf\u3002\u7531\u4e8e\u5982\u679c\u88c5\u8f7d\u6240\u6709\u8005\u53ef\u4ee5\u5bf9\u8fdb\u7a0b\u8fdb\u884cptrace\uff0c\u90a3\u4e48\u5b83\u53ef\u4ee5\u5728\u4e0d\u4f7f\u7528FUSE\u88c5\u8f7d\u7684\u60c5\u51b5\u4e0b\u6267\u884c\u4e0a\u8ff0\u6240\u6709\u64cd\u4f5c\uff0c\u56e0\u6b64\u53ef\u4ee5\u4f7f\u7528ptrace\u4e2d\u4f7f\u7528\u7684\u76f8\u540c\u6807\u51c6\u6765\u68c0\u67e5\u662f\u5426\u5141\u8bb8\u8fdb\u7a0b\u8bbf\u95ee\u6587\u4ef6\u7cfb\u7edf\u3002</p> <p>Note that the ptrace check is not strictly necessary to prevent C/2/i, it is enough to check if mount owner has enough privilege to send signal to the process accessing the filesystem, since SIGSTOP can be used to get a similar effect.</p> <p>\u6ce8\u610f\uff0cptrace\u68c0\u67e5\u5bf9\u4e8e\u9632\u6b62C/2/i\u5e76\u4e0d\u662f\u4e25\u683c\u5fc5\u8981\u7684\uff0c\u68c0\u67e5\u6302\u8f7d\u6240\u6709\u8005\u662f\u5426\u6709\u8db3\u591f\u7684\u6743\u9650\u5411\u8bbf\u95ee\u6587\u4ef6\u7cfb\u7edf\u7684\u8fdb\u7a0b\u53d1\u9001\u4fe1\u53f7\u5c31\u8db3\u591f\u4e86\uff0c\u56e0\u4e3aSIGSTOP\u53ef\u4ee5\u7528\u4e8e\u83b7\u5f97\u7c7b\u4f3c\u7684\u6548\u679c\u3002</p> </li> </ol>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/fuse/FUSE-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#9-think-these-limitations-are-unacceptable","title":"9 think these limitations are unacceptable?\u8ba4\u4e3a\u8fd9\u4e9b\u9650\u5236\u662f\u4e0d\u53ef\u63a5\u53d7\u7684\u5417\uff1f","text":"<p>If a sysadmin trusts the users enough, or can ensure through other measures, that system processes will never enter non-privileged mounts, it can relax the last limitation in several ways:\u5982\u679c\u7cfb\u7edf\u7ba1\u7406\u5458\u8db3\u591f\u4fe1\u4efb\u7528\u6237\uff0c\u6216\u8005\u53ef\u4ee5\u901a\u8fc7\u5176\u4ed6\u63aa\u65bd\u786e\u4fdd\u7cfb\u7edf\u8fdb\u7a0b\u6c38\u8fdc\u4e0d\u4f1a\u8fdb\u5165\u975e\u7279\u6743\u88c5\u8f7d\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u51e0\u79cd\u65b9\u5f0f\u653e\u5bbd\u6700\u540e\u4e00\u4e2a\u9650\u5236\uff1a</p> <ul> <li>With the \u2018user_allow_other\u2019 config option. If this config option is set, the mounting user can add the \u2018allow_other\u2019 mount option which disables the check for other users\u2019 processes.\u4f7f\u7528\u201cuser_allow_other\u201d\u914d\u7f6e\u9009\u9879\u3002\u5982\u679c\u8bbe\u7f6e\u4e86\u6b64\u914d\u7f6e\u9009\u9879\uff0c\u5219\u88c5\u8f7d\u7528\u6237\u53ef\u4ee5\u6dfb\u52a0\u201callow_other\u201d\u88c5\u8f7d\u9009\u9879\uff0c\u8be5\u9009\u9879\u5c06\u7981\u7528\u5bf9\u5176\u4ed6\u7528\u6237\u8fdb\u7a0b\u7684\u68c0\u67e5\u3002</li> </ul> <p>User namespaces have an unintuitive interaction with \u2018allow_other\u2019: an unprivileged user - normally restricted from mounting with \u2018allow_other\u2019 - could do so in a user namespace where they\u2019re privileged. If any process could access such an \u2018allow_other\u2019 mount this would give the mounting user the ability to manipulate processes in user namespaces where they\u2019re unprivileged. For this reason \u2018allow_other\u2019 restricts access to users in the same userns or a descendant.\u7528\u6237\u540d\u79f0\u7a7a\u95f4\u4e0e\u201callow_other\u201d\u6709\u4e00\u79cd\u4e0d\u76f4\u89c2\u7684\u4ea4\u4e92\uff1a\u4e00\u4e2a\u6ca1\u6709\u7279\u6743\u7684\u7528\u6237\uff08\u901a\u5e38\u88ab\u9650\u5236\u4f7f\u7528\u201callow_other\u201d\u8fdb\u884c\u88c5\u8f7d\uff09\u53ef\u4ee5\u5728\u4ed6\u4eec\u6709\u7279\u6743\u7684\u7528\u6237\u540d\u79f0\u7a7a\u95f4\u4e2d\u8fd9\u6837\u505a\u3002\u5982\u679c\u4efb\u4f55\u8fdb\u7a0b\u90fd\u53ef\u4ee5\u8bbf\u95ee\u8fd9\u6837\u7684\u201callow_other\u201d\u88c5\u8f7d\uff0c\u8fd9\u5c06\u4f7f\u88c5\u8f7d\u7528\u6237\u80fd\u591f\u5728\u6ca1\u6709\u7279\u6743\u7684\u7528\u6237\u547d\u540d\u7a7a\u95f4\u4e2d\u64cd\u7eb5\u8fdb\u7a0b\u3002\u56e0\u6b64\uff0c\u201callow_other\u201d\u9650\u5236\u540c\u4e00\u7528\u6237\u6216\u540e\u4ee3\u7684\u7528\u6237\u8bbf\u95ee\u3002</p> <ul> <li>With the \u2018allow_sys_admin_access\u2019 module option. If this option is set, super user\u2019s processes have unrestricted access to mounts irrespective of allow_other setting or user namespace of the mounting user.\u4f7f\u7528\u201callow_sys_admin_access\u201d\u6a21\u5757\u9009\u9879\u3002\u5982\u679c\u8bbe\u7f6e\u4e86\u6b64\u9009\u9879\uff0c\u5219\u8d85\u7ea7\u7528\u6237\u7684\u8fdb\u7a0b\u53ef\u4ee5\u4e0d\u53d7\u9650\u5236\u5730\u8bbf\u95ee\u88c5\u8f7d\uff0c\u800c\u4e0d\u7ba1\u88c5\u8f7d\u7528\u6237\u7684allow_other\u8bbe\u7f6e\u6216\u7528\u6237\u540d\u79f0\u7a7a\u95f4\u5982\u4f55\u3002</li> </ul> <p>Note that both of these relaxations expose the system to potential information leak or DoS as described in points B and C/2/i-ii in the preceding section.</p> <p>\u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e24\u79cd\u677e\u5f1b\u90fd\u4f1a\u4f7f\u7cfb\u7edf\u66b4\u9732\u4e8e\u6f5c\u5728\u7684\u4fe1\u606f\u6cc4\u6f0f\u6216DoS\uff0c\u5982\u524d\u4e00\u8282\u4e2dB\u70b9\u548cC/2/i-ii\u6240\u8ff0\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/fuse/FUSE-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#10-kernel-userspace-interface","title":"10 Kernel - userspace interface","text":"<p>The following diagram shows how a filesystem operation (in this example unlink) is performed in FUSE.</p> <p>\u4e0b\u56fe\u663e\u793a\u4e86\u5982\u4f55\u5728FUSE\u4e2d\u6267\u884c\u6587\u4ef6\u7cfb\u7edf\u64cd\u4f5c\uff08\u5728\u672c\u4f8b\u4e2d\u4e3aunlink\uff09\u3002</p> <pre><code>|  \"rm /mnt/fuse/file\"               |  FUSE filesystem daemon\n|                                    |\n|                                    |  &gt;sys_read()\n|                                    |    &gt;fuse_dev_read()\n|                                    |      &gt;request_wait()\n|                                    |        [sleep on fc-&gt;waitq]\n|                                    |\n|  &gt;sys_unlink()                     |\n|    &gt;fuse_unlink()                  |\n|      [get request from             |\n|       fc-&gt;unused_list]             |\n|      &gt;request_send()               |\n|        [queue req on fc-&gt;pending]  |\n|        [wake up fc-&gt;waitq]         |        [woken up]\n|        &gt;request_wait_answer()      |\n|          [sleep on req-&gt;waitq]     |\n|                                    |      &lt;request_wait()\n|                                    |      [remove req from fc-&gt;pending]\n|                                    |      [copy req to read buffer]\n|                                    |      [add req to fc-&gt;processing]\n|                                    |    &lt;fuse_dev_read()\n|                                    |  &lt;sys_read()\n|                                    |\n|                                    |  [perform unlink]\n|                                    |\n|                                    |  &gt;sys_write()\n|                                    |    &gt;fuse_dev_write()\n|                                    |      [look up req in fc-&gt;processing]\n|                                    |      [remove from fc-&gt;processing]\n|                                    |      [copy write buffer to req]\n|          [woken up]                |      [wake up req-&gt;waitq]\n|                                    |    &lt;fuse_dev_write()\n|                                    |  &lt;sys_write()\n|        &lt;request_wait_answer()      |\n|      &lt;request_send()               |\n|      [add request to               |\n|       fc-&gt;unused_list]             |\n|    &lt;fuse_unlink()                  |\n|  &lt;sys_unlink()                     |\n</code></pre> <p>Note</p> <p>Everything in the description above is greatly simplified</p> <p>\u4e0a\u9762\u63cf\u8ff0\u4e2d\u7684\u6240\u6709\u5185\u5bb9\u90fd\u5927\u5927\u7b80\u5316\u4e86</p> <p>There are a couple of ways in which to deadlock a FUSE filesystem. Since we are talking about unprivileged userspace programs, something must be done about these.</p> <p>\u6709\u4e24\u79cd\u65b9\u6cd5\u53ef\u4ee5\u6b7b\u9501FUSE\u6587\u4ef6\u7cfb\u7edf\u3002\u7531\u4e8e\u6211\u4eec\u8ba8\u8bba\u7684\u662f\u975e\u7279\u6743\u7528\u6237\u7a7a\u95f4\u7a0b\u5e8f\uff0c\u56e0\u6b64\u5fc5\u987b\u5bf9\u6b64\u91c7\u53d6\u4e00\u4e9b\u63aa\u65bd\u3002</p> <p>Scenario 1 - Simple deadlock:</p> <pre><code>|  \"rm /mnt/fuse/file\"               |  FUSE filesystem daemon\n|                                    |\n|  &gt;sys_unlink(\"/mnt/fuse/file\")     |\n|    [acquire inode semaphore        |\n|     for \"file\"]                    |\n|    &gt;fuse_unlink()                  |\n|      [sleep on req-&gt;waitq]         |\n|                                    |  &lt;sys_read()\n|                                    |  &gt;sys_unlink(\"/mnt/fuse/file\")\n|                                    |    [acquire inode semaphore\n|                                    |     for \"file\"]\n|                                    |    *DEADLOCK*\n</code></pre> <p>The solution for this is to allow the filesystem to be aborted.</p> <p>Scenario 2 - Tricky deadlock</p> <p>This one needs a carefully crafted filesystem. It\u2019s a variation on the above, only the call back to the filesystem is not explicit, but is caused by a pagefault.</p> <pre><code>|  Kamikaze filesystem thread 1      |  Kamikaze filesystem thread 2\n|                                    |\n|  [fd = open(\"/mnt/fuse/file\")]     |  [request served normally]\n|  [mmap fd to 'addr']               |\n|  [close fd]                        |  [FLUSH triggers 'magic' flag]\n|  [read a byte from addr]           |\n|    &gt;do_page_fault()                |\n|      [find or create page]         |\n|      [lock page]                   |\n|      &gt;fuse_readpage()              |\n|         [queue READ request]       |\n|         [sleep on req-&gt;waitq]      |\n|                                    |  [read request to buffer]\n|                                    |  [create reply header before addr]\n|                                    |  &gt;sys_write(addr - headerlength)\n|                                    |    &gt;fuse_dev_write()\n|                                    |      [look up req in fc-&gt;processing]\n|                                    |      [remove from fc-&gt;processing]\n|                                    |      [copy write buffer to req]\n|                                    |        &gt;do_page_fault()\n|                                    |           [find or create page]\n|                                    |           [lock page]\n|                                    |           * DEADLOCK *\n</code></pre> <p>The solution is basically the same as above.</p> <p>\u89e3\u51b3\u65b9\u6848\u4e0e\u4e0a\u8ff0\u57fa\u672c\u76f8\u540c\u3002</p> <p>An additional problem is that while the write buffer is being copied to the request, the request must not be interrupted/aborted. This is because the destination address of the copy may not be valid after the request has returned.</p> <p>\u53e6\u5916\u4e00\u4e2a\u95ee\u9898\u662f\uff0c\u5f53\u5199\u5165\u7f13\u51b2\u533a\u88ab\u590d\u5236\u5230\u8bf7\u6c42\u65f6\uff0c\u8bf7\u6c42\u4e0d\u80fd\u88ab\u4e2d\u65ad/\u4e2d\u6b62\u3002\u8fd9\u662f\u56e0\u4e3a\u8bf7\u6c42\u8fd4\u56de\u540e\uff0c\u526f\u672c\u7684\u76ee\u6807\u5730\u5740\u53ef\u80fd\u65e0\u6548\u3002</p> <p>This is solved with doing the copy atomically, and allowing abort while the page(s) belonging to the write buffer are faulted with get_user_pages(). The \u2018req-&gt;locked\u2019 flag indicates when the copy is taking place, and abort is delayed until this flag is unset.</p> <p>\u8fd9\u53ef\u4ee5\u901a\u8fc7\u539f\u5b50\u590d\u5236\u6765\u89e3\u51b3\uff0c\u5e76\u5141\u8bb8\u5728\u5c5e\u4e8e\u5199\u5165\u7f13\u51b2\u533a\u7684\u9875\u9762\u51fa\u73b0get_user_pages\uff08\uff09\u6545\u969c\u65f6\u4e2d\u6b62\u3002\u201creq-&gt;locked\u201d\u6807\u5fd7\u8868\u793a\u590d\u5236\u53d1\u751f\u7684\u65f6\u95f4\uff0c\u4e2d\u6b62\u88ab\u5ef6\u8fdf\uff0c\u76f4\u5230\u8be5\u6807\u5fd7\u672a\u8bbe\u7f6e\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/fuse/FUSE-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#2-fuse-io-modes","title":"2 Fuse I/O Modes\u00b6","text":"<p>Fuse supports the following I/O modes\u4fdd\u9669\u4e1d\u652f\u6301\u4ee5\u4e0bI/O\u6a21\u5f0f:</p> <ul> <li>direct-io\u76f4\u63a5io</li> <li>cached + write-through + writeback-cache\u7f13\u5b58+\u76f4\u5199+\u56de\u5199\u7f13\u5b58</li> </ul> <p>The direct-io mode can be selected with the FOPEN_DIRECT_IO flag in the FUSE_OPEN reply.</p> <p>\u53ef\u4ee5\u4f7f\u7528FUSE_OPEN\u56de\u590d\u4e2d\u7684FOPEN_DIRECT_IO\u6807\u5fd7\u9009\u62e9direct-io\u6a21\u5f0f\u3002</p> <p>In direct-io mode the page cache is completely bypassed for reads and writes. No read-ahead takes place. Shared mmap is disabled.</p> <p>\u5728direct-io\u6a21\u5f0f\u4e0b\uff0c\u9875\u9762\u7f13\u5b58\u88ab\u5b8c\u5168\u7ed5\u8fc7\u8fdb\u884c\u8bfb\u53d6\u548c\u5199\u5165\u3002\u4e0d\u8fdb\u884c\u9884\u8bfb\u3002\u5171\u4eabmmap\u5df2\u7981\u7528\u3002</p> <p>In cached mode reads may be satisfied from the page cache, and data may be read-ahead by the kernel to fill the cache. The cache is always kept consistent after any writes to the file. All mmap modes are supported.</p> <p>\u5728\u7f13\u5b58\u6a21\u5f0f\u4e0b\uff0c\u53ef\u4ee5\u4ece\u9875\u9762\u7f13\u5b58\u4e2d\u6ee1\u8db3\u8bfb\u53d6\uff0c\u5e76\u4e14\u5185\u6838\u53ef\u4ee5\u63d0\u524d\u8bfb\u53d6\u6570\u636e\u4ee5\u586b\u5145\u7f13\u5b58\u3002\u5728\u5199\u5165\u6587\u4ef6\u540e\uff0c\u7f13\u5b58\u59cb\u7ec8\u4fdd\u6301\u4e00\u81f4\u3002\u652f\u6301\u6240\u6709mmap\u6a21\u5f0f\u3002</p> <p>The cached mode has two sub modes controlling how writes are handled. The write-through mode is the default and is supported on all kernels. The writeback-cache mode may be selected by the FUSE_WRITEBACK_CACHE flag in the FUSE_INIT reply.</p> <p>\u7f13\u5b58\u6a21\u5f0f\u6709\u4e24\u4e2a\u5b50\u6a21\u5f0f\uff0c\u63a7\u5236\u5982\u4f55\u5904\u7406\u5199\u5165\u3002\u76f4\u5199\u6a21\u5f0f\u662f\u9ed8\u8ba4\u6a21\u5f0f\uff0c\u6240\u6709\u5185\u6838\u90fd\u652f\u6301\u8be5\u6a21\u5f0f\u3002\u53ef\u901a\u8fc7FUSE_INIT\u56de\u590d\u4e2d\u7684FUSE_WRITEBACK_CACHE\u6807\u5fd7\u9009\u62e9\u5199\u56de\u7f13\u5b58\u6a21\u5f0f\u3002</p> <p>In write-through mode each write is immediately sent to userspace as one or more WRITE requests, as well as updating any cached pages (and caching previously uncached, but fully written pages). No READ requests are ever sent for writes, so when an uncached page is partially written, the page is discarded.</p> <p>\u5728\u76f4\u5199\u6a21\u5f0f\u4e0b\uff0c\u6bcf\u6b21\u5199\u5165\u90fd\u4f1a\u7acb\u5373\u4f5c\u4e3a\u4e00\u4e2a\u6216\u591a\u4e2awrite\u8bf7\u6c42\u53d1\u9001\u5230\u7528\u6237\u7a7a\u95f4\uff0c\u4ee5\u53ca\u66f4\u65b0\u4efb\u4f55\u7f13\u5b58\u7684\u9875\u9762\uff08\u4ee5\u53ca\u7f13\u5b58\u4ee5\u524d\u672a\u7f13\u5b58\u4f46\u5df2\u5b8c\u5168\u5199\u5165\u7684\u9875\u9762\uff09\u3002\u5199\u5165\u65f6\u4e0d\u4f1a\u53d1\u9001\u4efb\u4f55READ\u8bf7\u6c42\uff0c\u56e0\u6b64\u5f53\u672a\u7f13\u5b58\u9875\u88ab\u90e8\u5206\u5199\u5165\u65f6\uff0c\u8be5\u9875\u5c06\u88ab\u4e22\u5f03\u3002</p> <p>In writeback-cache mode (enabled by the FUSE_WRITEBACK_CACHE flag) writes go to the cache only, which means that the write(2) syscall can often complete very fast. Dirty pages are written back implicitly (background writeback or page reclaim on memory pressure) or explicitly (invoked by close(2), fsync(2) and when the last ref to the file is being released on munmap(2)). This mode assumes that all changes to the filesystem go through the FUSE kernel module (size and atime/ctime/mtime attributes are kept up-to-date by the kernel), so it\u2019s generally not suitable for network filesystems. If a partial page is written, then the page needs to be first read from userspace. This means, that even for files opened for O_WRONLY it is possible that READ requests will be generated by the kernel.</p> <p>\u5728\u5199\u56de\u7f13\u5b58\u6a21\u5f0f\u4e0b\uff08\u7531FUSE_WRITEBACK_CACHE\u6807\u5fd7\u542f\u7528\uff09\uff0c\u5199\u64cd\u4f5c\u53ea\u80fd\u8fdb\u5165\u7f13\u5b58\uff0c\u8fd9\u610f\u5473\u7740 write\uff082\uff09\u7cfb\u7edf\u8c03\u7528\u901a\u5e38\u53ef\u4ee5\u975e\u5e38\u5feb\u5730\u5b8c\u6210\u3002\u810f\u9875\u88ab\u9690\u5f0f\u5730\u5199\u56de\uff08\u540e\u53f0\u5199\u56de\u6216\u5185\u5b58\u538b\u529b\u4e0b\u7684\u9875\u9762\u56de\u6536\uff09\u6216\u663e\u5f0f\u5730\u5199\uff08\u7531close\uff082\uff09\u3001fsync\uff082\uff09\u8c03\u7528\uff0c\u5e76\u4e14\u5f53\u6587\u4ef6\u7684\u6700\u540e\u4e00\u4e2a\u5f15\u7528\u5728munmap\uff082\uff09\u4e0a\u91ca\u653e\u65f6\uff09\u3002\u8be5\u6a21\u5f0f\u5047\u8bbe\u5bf9\u6587\u4ef6\u7cfb\u7edf\u7684\u6240\u6709\u66f4\u6539\u90fd\u901a\u8fc7FUSE\u5185\u6838\u6a21\u5757\uff08\u5927\u5c0f\u548catime/ctime/mtime\u5c5e\u6027\u7531\u5185\u6838\u4fdd\u6301\u6700\u65b0\uff09\uff0c\u56e0\u6b64\u901a\u5e38\u4e0d\u9002\u7528\u4e8e\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\u3002\u5982\u679c\u5199\u5165\u4e86\u90e8\u5206\u9875\u9762\uff0c\u5219\u9700\u8981\u9996\u5148\u4ece\u7528\u6237\u7a7a\u95f4\u8bfb\u53d6\u8be5\u9875\u9762\u3002\u8fd9\u610f\u5473\u7740\uff0c\u5373\u4f7f\u662f\u4e3aO_WRONLY\u6253\u5f00\u7684\u6587\u4ef6\uff0c\u5185\u6838\u4e5f\u53ef\u80fd\u4f1a\u751f\u6210READ\u8bf7\u6c42\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/fuse/fuse/","title":"fuse","text":"<ul> <li>https://github.com/libfuse/libfuse</li> <li>https://github.com/libfuse/libfuse/wiki/</li> <li>http://libfuse.github.io/doxygen/</li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/fuse/fuse/#2","title":"2 \u67b6\u6784","text":"<p>fuse \u7531\u5185\u6838\u6a21\u5757\uff08<code>fuse.ko</code>\uff09\u3001\u7528\u6237\u7a7a\u95f4\u5e93\uff08<code>libfuse.*</code>\uff09\u548c\u88c5\u8f7d\u5b9e\u7528\u7a0b\u5e8f\uff08<code>fusermount</code>\uff09\u7ec4\u6210\u3002\u5176\u4e2d\u7528\u6237\u6001\u7684\u5e93\u4e3a\u7a0b\u5e8f\u5f00\u53d1\u63d0\u4f9b\u63a5\u53e3\uff0c\u4e5f\u662f\u6211\u4eec\u5b9e\u9645\u5f00\u53d1\u65f6\u7528\u7684\u63a5\u53e3\uff0c\u6211\u4eec\u901a\u8fc7\u8fd9\u4e9b\u63a5\u53e3\u5c06\u8bf7\u6c42\u5904\u7406\u529f\u80fd\u6ce8\u518c\u5230 fuse \u4e2d\u3002\u5185\u6838\u6001\u6a21\u5757\u662f\u5177\u4f53\u7684\u6570\u636e\u6d41\u7a0b\u7684\u529f\u80fd\u5b9e\u73b0\uff0c\u5b83\u622a\u83b7\u6587\u4ef6\u7684\u8bbf\u95ee\u8bf7\u6c42\uff0c\u7136\u540e\u8c03\u7528\u7528\u6237\u6001\u6ce8\u518c\u7684\u51fd\u6570\u8fdb\u884c\u5904\u7406\u3002 </p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/","title":"NFS","text":"<p>\u539f\u6587\u6863\u5730\u5740</p> <pre><code>title: principal\u662f\u4ec0\u4e48\uff1f\n\u53c2\u4e0e\u7f51\u7edc\u901a\u4fe1\u6d3b\u52a8\u5e76\u4e14\u5177\u6709\u552f\u4e00\u540d\u79f0\u7684\u5ba2\u6237\u673a/\u7528\u6237\u6216\u670d\u52a1\u5668/\u670d\u52a1\u5b9e\u4f8b\u3002\n</code></pre>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#1-nfsv4-client-identifier","title":"1 NFSv4 client identifier","text":"<p>This document explains how the NFSv4 protocol identifies client instances in order to maintain file open and lock state during system restarts. A special identifier and principal are maintained on each client. These can be set by administrators, scripts provided by site administrators, or tools provided by Linux distributors.</p> <p>\u672c\u6587\u6863\u8bf4\u660eNFSv4\u534f\u8bae\u5982\u4f55\u8bc6\u522b\u5ba2\u6237\u7aef\u5b9e\u4f8b\uff0c\u4ee5\u4fbf\u5728\u7cfb\u7edf\u91cd\u65b0\u542f\u52a8\u671f\u95f4\u4fdd\u6301\u6587\u4ef6\u6253\u5f00\u548c\u9501\u5b9a\u72b6\u6001\u3002\u5728\u6bcf\u4e2a\u5ba2\u6237\u673a\u4e0a\u7ef4\u62a4\u4e00\u4e2a\u7279\u6b8a\u7684\u6807\u8bc6\u7b26\u548c\u4e3b\u4f53\u3002\u8fd9\u4e9b\u53ef\u4ee5\u7531\u7ba1\u7406\u5458\u3001\u7ad9\u70b9\u7ba1\u7406\u5458\u63d0\u4f9b\u7684\u811a\u672c\u6216Linux\u53d1\u884c\u5546\u63d0\u4f9b\u7684\u5de5\u5177\u8bbe\u7f6e\u3002</p> <p>There are risks if a client\u2019s NFSv4 identifier and its principal are not chosen carefully.</p> <p>\u5982\u679c\u672a\u4ed4\u7ec6\u9009\u62e9\u5ba2\u6237\u7684NFSv4\u6807\u8bc6\u7b26\u53ca\u5176\u4e3b\u4f53\uff0c\u5219\u5b58\u5728\u98ce\u9669\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#11-introduction","title":"1.1 Introduction","text":"<p>The NFSv4 protocol uses \u201clease-based file locking\u201d. Leases help NFSv4 servers provide file lock guarantees and manage their resources.</p> <p>NFSv4\u534f\u8bae\u4f7f\u7528\u201c\u57fa\u4e8e\u79df\u7ea6\u7684\u6587\u4ef6\u9501\u201d\u3002\u79df\u7ea6\u5e2e\u52a9NFSv4\u670d\u52a1\u5668\u63d0\u4f9b\u6587\u4ef6\u9501\u4fdd\u8bc1\u5e76\u7ba1\u7406\u5176\u8d44\u6e90\u3002</p> <p>Simply put, an NFSv4 server creates a lease for each NFSv4 client. The server collects each client\u2019s file open and lock state under the lease for that client.</p> <p>\u7b80\u5355\u5730\u8bf4\uff0cNFSv4\u670d\u52a1\u5668\u4e3a\u6bcf\u4e2aNFSv4\u5ba2\u6237\u7aef\u521b\u5efa\u79df\u7ea6\u3002\u670d\u52a1\u5668\u6536\u96c6\u6bcf\u4e2a\u5ba2\u6237\u7aef\u5728\u79df\u7ea6\u4e0b\u7684\u6587\u4ef6\u6253\u5f00\u548c\u9501\u5b9a\u72b6\u6001\u3002</p> <p>The client is responsible for periodically renewing its leases. While a lease remains valid, the server holding that lease guarantees the file locks the client has created remain in place.</p> <p>\u5ba2\u6237\u8d1f\u8d23\u5b9a\u671f\u7eed\u8ba2\u79df\u7ea6\u3002\u5f53\u79df\u7ea6\u4ecd\u7136\u6709\u6548\u65f6\uff0c\u6301\u6709\u79df\u7ea6\u7684\u670d\u52a1\u5668\u4fdd\u8bc1\u5ba2\u6237\u7aef\u521b\u5efa\u7684\u6587\u4ef6\u9501\u4fdd\u6301\u4e0d\u53d8\u3002</p> <p>If a client stops renewing its lease (for example, if it crashes), the NFSv4 protocol allows the server to remove the client\u2019s open and lock state after a certain period of time. When a client restarts, it indicates to servers that open and lock state associated with its previous leases is no longer valid and can be destroyed immediately.</p> <p>\u5982\u679c\u5ba2\u6237\u7aef\u505c\u6b62\u7eed\u8ba2\u5176\u79df\u7ea6\uff08\u4f8b\u5982\uff0c\u5982\u679c\u5b83\u5d29\u6e83\uff09\uff0cNFSv4\u534f\u8bae\u5141\u8bb8\u670d\u52a1\u5668\u5728\u4e00\u5b9a\u65f6\u95f4\u540e\u5220\u9664\u5ba2\u6237\u7aef\u7684\u6253\u5f00\u548c\u9501\u5b9a\u72b6\u6001\u3002\u5f53\u5ba2\u6237\u673a\u91cd\u65b0\u542f\u52a8\u65f6\uff0c\u5b83\u4f1a\u5411\u670d\u52a1\u5668\u6307\u793a\u4e0e\u5176\u4ee5\u524d\u7684\u79df\u7ea6\u5173\u8054\u7684\u6253\u5f00\u548c\u9501\u5b9a\u72b6\u6001\u4e0d\u518d\u6709\u6548\uff0c\u53ef\u4ee5\u7acb\u5373\u9500\u6bc1\u3002</p> <p>In addition, each NFSv4 server manages a persistent list of client leases. When the server restarts and clients attempt to recover their state, the server uses this list to distinguish amongst clients that held state before the server restarted and clients sending fresh OPEN and LOCK requests. This enables file locks to persist safely across server restarts.</p> <p>\u6b64\u5916\uff0c\u6bcf\u4e2aNFSv4\u670d\u52a1\u5668\u90fd\u7ba1\u7406\u4e00\u4e2a\u5ba2\u6237\u7aef\u79df\u7ea6\u7684\u6301\u4e45\u5217\u8868\u3002\u5f53\u670d\u52a1\u5668\u91cd\u65b0\u542f\u52a8\u5e76\u4e14\u5ba2\u6237\u7aef\u5c1d\u8bd5\u6062\u590d\u5176\u72b6\u6001\u65f6\uff0c\u670d\u52a1\u5668\u4f7f\u7528\u6b64\u5217\u8868\u6765\u533a\u5206\u5728\u670d\u52a1\u5668\u91cd\u65b0\u542f\u52a8\u4e4b\u524d\u4fdd\u6301\u72b6\u6001\u7684\u5ba2\u6237\u7aef\u548c\u53d1\u9001\u65b0\u7684OPEN\u548cLOCK\u8bf7\u6c42\u7684\u5ba2\u6237\u7aef\u3002\u8fd9\u4f7f\u6587\u4ef6\u9501\u5b9a\u80fd\u591f\u5728\u670d\u52a1\u5668\u91cd\u65b0\u542f\u52a8\u671f\u95f4\u5b89\u5168\u5730\u4fdd\u6301\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#12-nfsv4-client-identifiers","title":"1.2 NFSv4 client identifiers","text":"<p>Each NFSv4 client presents an identifier to NFSv4 servers so that they can associate the client with its lease. Each client\u2019s identifier consists of two elements:</p> <p>\u6bcf\u4e2aNFSv4\u5ba2\u6237\u7aef\u5411NFSv4\u670d\u52a1\u5668\u63d0\u4f9b\u4e00\u4e2a\u6807\u8bc6\u7b26\uff0c\u4ee5\u4fbf\u5b83\u4eec\u53ef\u4ee5\u5c06\u5ba2\u6237\u7aef\u4e0e\u5176\u79df\u7ea6\u76f8\u5173\u8054\u3002\u6bcf\u4e2a\u5ba2\u6237\u7aef\u7684\u6807\u8bc6\u7b26\u7531\u4e24\u4e2a\u5143\u7d20\u7ec4\u6210\uff1a</p> <ul> <li>co_ownerid: An arbitrary but fixed string.\u4efb\u610f\u4f46\u56fa\u5b9a\u7684\u5b57\u7b26\u4e32\u3002</li> <li>boot verifier: A 64-bit incarnation verifier that enables a server to distinguish successive boot epochs of the same client.64\u4f4d\u5316\u8eab\u9a8c\u8bc1\u5668\uff0c\u4f7f\u670d\u52a1\u5668\u80fd\u591f\u533a\u5206\u540c\u4e00\u5ba2\u6237\u7aef\u7684\u8fde\u7eed\u5f15\u5bfc\u65f6\u671f\u3002</li> </ul> <p>The NFSv4.0 specification refers to these two items as an \u201cnfs_client_id4\u201d. The NFSv4.1 specification refers to these two items as a \u201cclient_owner4\u201d.</p> <p>NFSv4.0\u89c4\u8303\u5c06\u8fd9\u4e24\u9879\u79f0\u4e3a\u201cnfs_client_id4\u201d\u3002NFSv4.1\u89c4\u8303\u5c06\u8fd9\u4e24\u9879\u79f0\u4e3a\u201cclient_owner4\u201d\u3002</p> <p>NFSv4 servers tie this identifier to the principal and security flavor that the client used when presenting it. Servers use this principal to authorize subsequent lease modification operations sent by the client. Effectively this principal is a third element of the identifier.</p> <p>NFSv4\u670d\u52a1\u5668\u5c06\u6b64\u6807\u8bc6\u7b26\u7ed1\u5b9a\u5230\u5ba2\u6237\u7aef\u5728\u5448\u73b0\u5b83\u65f6\u4f7f\u7528\u7684\u4e3b\u4f53\u548c\u5b89\u5168\u98ce\u683c\u3002\u670d\u52a1\u5668\u4f7f\u7528\u6b64\u4e3b\u4f53\u6765\u6388\u6743\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u540e\u7eed\u79df\u7ea6\u4fee\u6539\u64cd\u4f5c\u3002\u5b9e\u9645\u4e0a\uff0c\u8fd9\u4e2a\u4e3b\u4f53\u662f\u6807\u8bc6\u7b26\u7684\u7b2c\u4e09\u4e2a\u5143\u7d20\u3002</p> <p>As part of the identity presented to servers, a good \u201cco_ownerid\u201d string has several important properties:</p> <p>\u4f5c\u4e3a\u5448\u73b0\u7ed9\u670d\u52a1\u5668\u7684\u6807\u8bc6\u7684\u4e00\u90e8\u5206\uff0c\u4e00\u4e2a\u597d\u7684\u201cco_ownerid\u201d\u5b57\u7b26\u4e32\u5177\u6709\u51e0\u4e2a\u91cd\u8981\u5c5e\u6027\uff1a</p> <ul> <li>The \u201cco_ownerid\u201d string identifies the client during reboot recovery, therefore the string is persistent across client reboots.\u201cco_ownerid\u201d\u5b57\u7b26\u4e32\u5728\u91cd\u65b0\u542f\u52a8\u6062\u590d\u671f\u95f4\u6807\u8bc6\u5ba2\u6237\u7aef\uff0c\u56e0\u6b64\u8be5\u5b57\u7b26\u4e32\u5728\u5ba2\u6237\u7aef\u91cd\u65b0\u542f\u52a8\u671f\u95f4\u662f\u6301\u4e45\u7684\u3002</li> <li>The \u201cco_ownerid\u201d string helps servers distinguish the client from others, therefore the string is globally unique. Note that there is no central authority that assigns \u201cco_ownerid\u201d strings.\u201ccoownerid\u201d\u5b57\u7b26\u4e32\u5e2e\u52a9\u670d\u52a1\u5668\u533a\u5206\u5ba2\u6237\u673a\u548c\u5176\u4ed6\u5ba2\u6237\u673a\uff0c\u56e0\u6b64\u8be5\u5b57\u7b26\u4e32\u662f\u5168\u5c40\u552f\u4e00\u7684\u3002\u6ce8\u610f\uff0c\u6ca1\u6709\u5206\u914d\u201cco_ownerid\u201d\u5b57\u7b26\u4e32\u7684\u4e2d\u592e\u673a\u6784\u3002</li> <li>Because it often appears on the network in the clear, the \u201cco_ownerid\u201d string does not reveal private information about the client itself.\u56e0\u4e3a\u201cco_ownerid\u201d\u5b57\u7b26\u4e32\u7ecf\u5e38\u51fa\u73b0\u5728\u7f51\u7edc\u4e0a\uff0c\u6240\u4ee5\u5b83\u4e0d\u4f1a\u900f\u9732\u6709\u5173\u5ba2\u6237\u7aef\u672c\u8eab\u7684\u79c1\u4eba\u4fe1\u606f\u3002</li> <li>The content of the \u201cco_ownerid\u201d string is set and unchanging before the client attempts NFSv4 mounts after a restart.\u201ccoownerid\u201d\u5b57\u7b26\u4e32\u7684\u5185\u5bb9\u5728\u91cd\u65b0\u542f\u52a8\u540e\u5ba2\u6237\u7aef\u5c1d\u8bd5NFSv4\u88c5\u8f7d\u4e4b\u524d\u8bbe\u7f6e\u5e76\u4fdd\u6301\u4e0d\u53d8\u3002</li> <li>The NFSv4 protocol places a 1024-byte limit on the size of the \u201cco_ownerid\u201d string.NFSv4\u534f\u8bae\u5bf9\u201cco_ownerid\u201d\u5b57\u7b26\u4e32\u7684\u5927\u5c0f\u8bbe\u7f6e\u4e861024\u5b57\u8282\u7684\u9650\u5236\u3002</li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#13-protecting-nfsv4-lease-state","title":"1.3 Protecting NFSv4 lease state","text":"<p>NFSv4 servers utilize the \u201cclient_owner4\u201d as described above to assign a unique lease to each client. Under this scheme, there are circumstances where clients can interfere with each other. This is referred to as \u201clease stealing\u201d.</p> <p>NFSv4\u670d\u52a1\u5668\u5229\u7528\u5982\u4e0a\u6240\u8ff0\u7684\u201cclient_owner4\u201d\u4e3a\u6bcf\u4e2a\u5ba2\u6237\u7aef\u5206\u914d\u552f\u4e00\u7684\u79df\u7ea6\u3002\u5728\u8fd9\u4e00\u65b9\u6848\u4e0b\uff0c\u6709\u4e9b\u60c5\u51b5\u4e0b\u5ba2\u6237\u53ef\u4ee5\u76f8\u4e92\u5e72\u6270\u3002\u8fd9\u88ab\u79f0\u4e3a\u201c\u5077\u79df\u201d\u3002</p> <p>If distinct clients present the same \u201cco_ownerid\u201d string and use the same principal (for example, AUTH_SYS and UID 0), a server is unable to tell that the clients are not the same. Each distinct client presents a different boot verifier, so it appears to the server as if there is one client that is rebooting frequently. Neither client can maintain open or lock state in this scenario.</p> <p>\u5982\u679c\u4e0d\u540c\u7684\u5ba2\u6237\u7aef\u5448\u73b0\u76f8\u540c\u7684\u201cco_ownerid\u201d\u5b57\u7b26\u4e32\u5e76\u4f7f\u7528\u76f8\u540c\u7684\u4e3b\u4f53\uff08\u4f8b\u5982\uff0cAUTH_SYS\u548cUID 0\uff09\uff0c\u5219\u670d\u52a1\u5668\u65e0\u6cd5\u5224\u65ad\u5ba2\u6237\u7aef\u662f\u5426\u76f8\u540c\u3002\u6bcf\u4e2a\u4e0d\u540c\u7684\u5ba2\u6237\u673a\u90fd\u6709\u4e00\u4e2a\u4e0d\u540c\u7684\u5f15\u5bfc\u9a8c\u8bc1\u5668\uff0c\u56e0\u6b64\u5728\u670d\u52a1\u5668\u4e0a\u770b\u8d77\u6765\u5c31\u50cf\u6709\u4e00\u4e2a\u5ba2\u6237\u673a\u9891\u7e41\u91cd\u542f\u4e00\u6837\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5ba2\u6237\u7aef\u90fd\u4e0d\u80fd\u4fdd\u6301\u6253\u5f00\u6216\u9501\u5b9a\u72b6\u6001\u3002</p> <p>If distinct clients present the same \u201cco_ownerid\u201d string and use distinct principals, the server is likely to allow the first client to operate normally but reject subsequent clients with the same \u201cco_ownerid\u201d string.</p> <p>\u5982\u679c\u4e0d\u540c\u7684\u5ba2\u6237\u7aef\u5448\u73b0\u76f8\u540c\u7684\u201cco_ownerid\u201d\u5b57\u7b26\u4e32\u5e76\u4f7f\u7528\u4e0d\u540c\u7684\u4e3b\u4f53\uff0c\u5219\u670d\u52a1\u5668\u53ef\u80fd\u4f1a\u5141\u8bb8\u7b2c\u4e00\u4e2a\u5ba2\u6237\u7aef\u6b63\u5e38\u8fd0\u884c\uff0c\u4f46\u62d2\u7edd\u5177\u6709\u76f8\u540c\u201cco_ownrid\u201d\u5b57\u7b26\u4e32\u7684\u540e\u7eed\u5ba2\u6237\u7aef\u3002</p> <p>If a client\u2019s \u201cco_ownerid\u201d string or principal are not stable, state recovery after a server or client reboot is not guaranteed. If a client unexpectedly restarts but presents a different \u201cco_ownerid\u201d string or principal to the server, the server orphans the client\u2019s previous open and lock state. This blocks access to locked files until the server removes the orphaned state.</p> <p>\u5982\u679c\u5ba2\u6237\u7aef\u7684\u201cco_ownerid\u201d\u5b57\u7b26\u4e32\u6216\u4e3b\u4f53\u4e0d\u7a33\u5b9a\uff0c\u5219\u65e0\u6cd5\u4fdd\u8bc1\u5728\u670d\u52a1\u5668\u6216\u5ba2\u6237\u7aef\u91cd\u65b0\u542f\u52a8\u540e\u6062\u590d\u72b6\u6001\u3002\u5982\u679c\u5ba2\u6237\u673a\u610f\u5916\u91cd\u65b0\u542f\u52a8\uff0c\u4f46\u5411\u670d\u52a1\u5668\u63d0\u4f9b\u4e86\u4e0d\u540c\u7684\u201cco_ownerid\u201d\u5b57\u7b26\u4e32\u6216\u4e3b\u4f53\uff0c\u5219\u670d\u52a1\u5668\u5c06\u5b64\u7acb\u5ba2\u6237\u673a\u4ee5\u524d\u7684\u6253\u5f00\u548c\u9501\u5b9a\u72b6\u6001\u3002\u8fd9\u5c06\u963b\u6b62\u5bf9\u9501\u5b9a\u6587\u4ef6\u7684\u8bbf\u95ee\uff0c\u76f4\u5230\u670d\u52a1\u5668\u5220\u9664\u5b64\u7acb\u72b6\u6001\u3002</p> <p>If the server restarts and a client presents a changed \u201cco_ownerid\u201d string or principal to the server, the server will not allow the client to reclaim its open and lock state, and may give those locks to other clients in the meantime. This is referred to as \u201clock stealing\u201d.</p> <p>\u5982\u679c\u670d\u52a1\u5668\u91cd\u65b0\u542f\u52a8\uff0c\u5e76\u4e14\u5ba2\u6237\u673a\u5411\u670d\u52a1\u5668\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5df2\u66f4\u6539\u7684\u201cco_ownrid\u201d\u5b57\u7b26\u4e32\u6216\u4e3b\u4f53\uff0c\u5219\u670d\u52a1\u5668\u5c06\u4e0d\u5141\u8bb8\u5ba2\u6237\u673a\u6062\u590d\u5176\u6253\u5f00\u548c\u9501\u5b9a\u72b6\u6001\uff0c\u540c\u65f6\u53ef\u80fd\u4f1a\u5c06\u8fd9\u4e9b\u9501\u4ea4\u7ed9\u5176\u4ed6\u5ba2\u6237\u673a\u3002\u8fd9\u88ab\u79f0\u4e3a\u201c\u5077\u9501\u201d\u3002</p> <p>Lease stealing and lock stealing increase the potential for denial of service and in rare cases even data corruption.</p> <p>\u79df\u8d41\u76d7\u7a83\u548c\u9501\u76d7\u7a83\u589e\u52a0\u4e86\u62d2\u7edd\u670d\u52a1\u7684\u53ef\u80fd\u6027\uff0c\u5728\u6781\u5c11\u6570\u60c5\u51b5\u4e0b\u751a\u81f3\u4f1a\u5bfc\u81f4\u6570\u636e\u635f\u574f\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#14-selecting-an-appropriate-client-identifier","title":"1.4 Selecting an appropriate client identifier","text":"<p>By default, the Linux NFSv4 client implementation constructs its \u201cco_ownerid\u201d string starting with the words \u201cLinux NFS\u201d followed by the client\u2019s UTS node name (the same node name, incidentally, that is used as the \u201cmachine name\u201d in an AUTH_SYS credential). In small deployments, this construction is usually adequate. Often, however, the node name by itself is not adequately unique, and can change unexpectedly. Problematic situations include:</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cLinux NFSv4\u5ba2\u6237\u7aef\u5b9e\u73b0\u6784\u9020\u5176\u201cco_ownerid\u201d\u5b57\u7b26\u4e32\uff0c\u4ee5\u5355\u8bcd\u201cLinux NFS\u201d\u5f00\u5934\uff0c\u540e\u8ddf\u5ba2\u6237\u7aef\u7684UTS\u8282\u70b9\u540d\uff08\u987a\u4fbf\u63d0\u4e00\u4e0b\uff0c\u8be5\u8282\u70b9\u540d\u5728AUTH_SYS\u51ed\u636e\u4e2d\u7528\u4f5c\u201c\u673a\u5668\u540d\u201d\uff09\u3002\u5728\u5c0f\u578b\u90e8\u7f72\u4e2d\uff0c\u8fd9\u79cd\u7ed3\u6784\u901a\u5e38\u662f\u8db3\u591f\u7684\u3002\u7136\u800c\uff0c\u8282\u70b9\u540d\u79f0\u672c\u8eab\u5f80\u5f80\u4e0d\u591f\u552f\u4e00\uff0c\u53ef\u80fd\u4f1a\u610f\u5916\u66f4\u6539\u3002\u95ee\u9898\u60c5\u51b5\u5305\u62ec\uff1a</p> <ul> <li>NFS-root (diskless) clients, where the local DCHP server (or equivalent) does not provide a unique host name.NFS\u6839\uff08\u65e0\u76d8\uff09\u5ba2\u6237\u7aef\uff0c\u5176\u4e2d\u672c\u5730DCHP\u670d\u52a1\u5668\uff08\u6216\u7b49\u6548\u670d\u52a1\u5668\uff09\u4e0d\u63d0\u4f9b\u552f\u4e00\u7684\u4e3b\u673a\u540d\u3002</li> <li>\u201cContainers\u201d within a single Linux host. If each container has a separate network namespace, but does not use the UTS namespace to provide a unique host name, then there can be multiple NFS client instances with the same host name.\u5355\u4e2aLinux\u4e3b\u673a\u4e2d\u7684\u201c\u5bb9\u5668\u201d\u3002\u5982\u679c\u6bcf\u4e2a\u5bb9\u5668\u90fd\u6709\u4e00\u4e2a\u5355\u72ec\u7684\u7f51\u7edc\u540d\u79f0\u7a7a\u95f4\uff0c\u4f46\u4e0d\u4f7f\u7528UTS\u540d\u79f0\u7a7a\u95f4\u6765\u63d0\u4f9b\u552f\u4e00\u7684\u4e3b\u673a\u540d\uff0c\u90a3\u4e48\u53ef\u4ee5\u6709\u591a\u4e2a\u5177\u6709\u76f8\u540c\u4e3b\u673a\u540d\u7684NFS\u5ba2\u6237\u7aef\u5b9e\u4f8b\u3002</li> <li>Clients across multiple administrative domains that access a common NFS server. If hostnames are not assigned centrally then uniqueness cannot be guaranteed unless a domain name is included in the hostname.\u8de8\u591a\u4e2a\u7ba1\u7406\u57df\u8bbf\u95ee\u516c\u5171NFS\u670d\u52a1\u5668\u7684\u5ba2\u6237\u7aef\u3002\u5982\u679c\u6ca1\u6709\u96c6\u4e2d\u5206\u914d\u4e3b\u673a\u540d\uff0c\u5219\u65e0\u6cd5\u4fdd\u8bc1\u552f\u4e00\u6027\uff0c\u9664\u975e\u4e3b\u673a\u540d\u4e2d\u5305\u542b\u57df\u540d\u3002</li> </ul> <p>Linux provides two mechanisms to add uniqueness to its \u201cco_ownerid\u201d string:</p> <p>Linux\u63d0\u4f9b\u4e86\u4e24\u79cd\u673a\u5236\u6765\u4e3a\u5176\u201cco_ownerid\u201d\u5b57\u7b26\u4e32\u6dfb\u52a0\u552f\u4e00\u6027\uff1a</p> <ul> <li>nfs.nfs4_unique_id</li> </ul> <p>This module parameter can set an arbitrary uniquifier string via the kernel command line, or when the \u201cnfs\u201d module is loaded.</p> <p>\u8be5\u6a21\u5757\u53c2\u6570\u53ef\u4ee5\u901a\u8fc7\u5185\u6838\u547d\u4ee4\u884c\u6216\u5728\u52a0\u8f7d\u201cnfs\u201d\u6a21\u5757\u65f6\u8bbe\u7f6e\u4efb\u610f\u7684uniquifier\u5b57\u7b26\u4e32\u3002</p> <ul> <li>/sys/fs/nfs/client/net/identifier</li> </ul> <p>This virtual file, available since Linux 5.3, is local to the network namespace in which it is accessed and so can provide distinction between network namespaces (containers) when the hostname remains uniform.</p> <p>\u8fd9\u4e2a\u865a\u62df\u6587\u4ef6\u4eceLinux 5.3\u5f00\u59cb\u53ef\u7528\uff0c\u5b83\u662f\u8bbf\u95ee\u5b83\u7684\u7f51\u7edc\u540d\u79f0\u7a7a\u95f4\u7684\u672c\u5730\u6587\u4ef6\uff0c\u56e0\u6b64\u5f53\u4e3b\u673a\u540d\u4fdd\u6301\u4e00\u81f4\u65f6\uff0c\u53ef\u4ee5\u63d0\u4f9b\u7f51\u7edc\u540d\u79f0\u7a7a\u95f4\uff08\u5bb9\u5668\uff09\u4e4b\u95f4\u7684\u533a\u522b\u3002</p> <p>Note that this file is empty on name-space creation. If the container system has access to some sort of per-container identity then that uniquifier can be used. For example, a uniquifier might be formed at boot using the container\u2019s internal identifier:</p> <p>\u8bf7\u6ce8\u610f\uff0c\u5728\u521b\u5efa\u540d\u79f0\u7a7a\u95f4\u65f6\uff0c\u6b64\u6587\u4ef6\u4e3a\u7a7a\u3002\u5982\u679c\u5bb9\u5668\u7cfb\u7edf\u53ef\u4ee5\u8bbf\u95ee\u67d0\u79cd\u7c7b\u578b\u7684\u6bcf\u4e2a\u5bb9\u5668\u6807\u8bc6\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u8be5uniquifier\u3002\u4f8b\u5982\uff0c\u53ef\u4ee5\u5728\u542f\u52a8\u65f6\u4f7f\u7528\u5bb9\u5668\u7684\u5185\u90e8\u6807\u8bc6\u7b26\u5f62\u6210\u4e00\u4e2auniquifier\uff1a</p> <ul> <li>sha256sum /etc/machine-id | awk \u2018{print $1}\u2019 \\</li> </ul> <p>/sys/fs/nfs/client/net/identifier</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#15-security-considerations","title":"1.5 Security considerations","text":"<p>The use of cryptographic security for lease management operations is strongly encouraged.</p> <p>\u5f3a\u70c8\u9f13\u52b1\u5728\u79df\u8d41\u7ba1\u7406\u64cd\u4f5c\u4e2d\u4f7f\u7528\u52a0\u5bc6\u5b89\u5168\u3002</p> <p>If NFS with Kerberos is not configured, a Linux NFSv4 client uses AUTH_SYS and UID 0 as the principal part of its client identity. This configuration is not only insecure, it increases the risk of lease and lock stealing. However, it might be the only choice for client configurations that have no local persistent storage. \u201cco_ownerid\u201d string uniqueness and persistence is critical in this case.</p> <p>\u5982\u679c\u672a\u914d\u7f6e\u5e26\u6709Kerberos\u7684NFS\uff0c\u5219Linux NFSv4\u5ba2\u6237\u7aef\u4f7f\u7528AUTH_SYS\u548cUID 0\u4f5c\u4e3a\u5176\u5ba2\u6237\u7aef\u6807\u8bc6\u7684\u4e3b\u8981\u90e8\u5206\u3002\u8fd9\u79cd\u914d\u7f6e\u4e0d\u4ec5\u4e0d\u5b89\u5168\uff0c\u8fd8\u4f1a\u589e\u52a0\u79df\u8d41\u548c\u9501\u88ab\u76d7\u7684\u98ce\u9669\u3002\u4f46\u662f\uff0c\u5bf9\u4e8e\u6ca1\u6709\u672c\u5730\u6301\u4e45\u5b58\u50a8\u7684\u5ba2\u6237\u7aef\u914d\u7f6e\uff0c\u5b83\u53ef\u80fd\u662f\u552f\u4e00\u7684\u9009\u62e9\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u201cco_ownerid\u201d\u5b57\u7b26\u4e32\u7684\u552f\u4e00\u6027\u548c\u6301\u4e45\u6027\u81f3\u5173\u91cd\u8981\u3002</p> <p>When a Kerberos keytab is present on a Linux NFS client, the client attempts to use one of the principals in that keytab when identifying itself to servers. The \u201csec=\u201d mount option does not control this behavior. Alternately, a single-user client with a Kerberos principal can use that principal in place of the client\u2019s host principal.</p> <p>\u5f53Linux NFS\u5ba2\u6237\u7aef\u4e0a\u5b58\u5728Kerberos\u5bc6\u94a5\u8868\u65f6\uff0c\u5ba2\u6237\u7aef\u5728\u5411\u670d\u52a1\u5668\u6807\u8bc6\u81ea\u5df1\u65f6\u4f1a\u5c1d\u8bd5\u4f7f\u7528\u8be5\u5bc6\u94a5\u8868\u4e2d\u7684\u4e00\u4e2a\u4e3b\u4f53\u3002\u201csec=\u201d\u88c5\u8f7d\u9009\u9879\u4e0d\u63a7\u5236\u6b64\u884c\u4e3a\u3002\u6216\u8005\uff0c\u5177\u6709Kerberos\u4e3b\u4f53\u7684\u5355\u7528\u6237\u5ba2\u6237\u7aef\u53ef\u4ee5\u4f7f\u7528\u8be5\u4e3b\u4f53\u4ee3\u66ff\u5ba2\u6237\u7aef\u7684\u4e3b\u673a\u4e3b\u4f53\u3002</p> <p>Using Kerberos for this purpose enables the client and server to use the same lease for operations covered by all \u201csec=\u201d settings. Additionally, the Linux NFS client uses the RPCSEC_GSS security flavor with Kerberos and the integrity QOS to prevent in-transit modification of lease modification requests.</p> <p>\u4e3a\u6b64\u76ee\u7684\u4f7f\u7528Kerberos\u4f7f\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u80fd\u591f\u5bf9\u6240\u6709\u201csec=\u201d\u8bbe\u7f6e\u6240\u6db5\u76d6\u7684\u64cd\u4f5c\u4f7f\u7528\u76f8\u540c\u7684\u79df\u7ea6\u3002\u6b64\u5916\uff0cLinux NFS\u5ba2\u6237\u7aef\u4f7f\u7528\u5e26\u6709Kerberos\u548c\u5b8c\u6574\u6027QOS\u7684RPCSEC_GSS\u5b89\u5168\u7279\u6027\uff0c\u4ee5\u9632\u6b62\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u4fee\u6539\u79df\u7ea6\u4fee\u6539\u8bf7\u6c42\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#16-additional-notes","title":"1.6 Additional notes","text":"<p>The Linux NFSv4 client establishes a single lease on each NFSv4 server it accesses. NFSv4 mounts from a Linux NFSv4 client of a particular server then share that lease.</p> <p>Linux NFSv4\u5ba2\u6237\u7aef\u5728\u5176\u8bbf\u95ee\u7684\u6bcf\u4e2aNFSv4\u670d\u52a1\u5668\u4e0a\u5efa\u7acb\u4e00\u4e2a\u79df\u7ea6\u3002NFSv4\u4ece\u7279\u5b9a\u670d\u52a1\u5668\u7684Linux NFSv4\u5ba2\u6237\u7aef\u88c5\u8f7d\uff0c\u7136\u540e\u5171\u4eab\u8be5\u79df\u7ea6\u3002</p> <p>Once a client establishes open and lock state, the NFSv4 protocol enables lease state to transition to other servers, following data that has been migrated. This hides data migration completely from running applications. The Linux NFSv4 client facilitates state migration by presenting the same \u201cclient_owner4\u201d to all servers it encounters.</p> <p>\u4e00\u65e6\u5ba2\u6237\u673a\u5efa\u7acb\u4e86\u6253\u5f00\u548c\u9501\u5b9a\u72b6\u6001\uff0cNFSv4\u534f\u8bae\u5c31\u53ef\u4ee5\u5728\u8fc1\u79fb\u6570\u636e\u4e4b\u540e\u5c06\u79df\u7ea6\u72b6\u6001\u8f6c\u6362\u5230\u5176\u4ed6\u670d\u52a1\u5668\u3002\u8fd9\u5c06\u5bf9\u8fd0\u884c\u7684\u5e94\u7528\u7a0b\u5e8f\u5b8c\u5168\u9690\u85cf\u6570\u636e\u8fc1\u79fb\u3002Linux NFSv4\u5ba2\u6237\u673a\u901a\u8fc7\u5411\u9047\u5230\u7684\u6240\u6709\u670d\u52a1\u5668\u5448\u73b0\u76f8\u540c\u7684\u201cclient_owner4\u201d\u6765\u4fc3\u8fdb\u72b6\u6001\u8fc1\u79fb\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#2-see-also","title":"2 See Also","text":"<ul> <li>nfs(5)</li> <li>kerberos(7)</li> <li>RFC 7530 for the NFSv4.0 specification</li> <li>RFC 8881 for the NFSv4.1 specification.</li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#3-making-filesystems-exportable","title":"3 Making Filesystems Exportable","text":""},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#31-overview","title":"3.1 Overview","text":"<p>All filesystem operations require a dentry (or two) as a starting point. Local applications have a reference-counted hold on suitable dentries via open file descriptors or cwd/root. However remote applications that access a filesystem via a remote filesystem protocol such as NFS may not be able to hold such a reference, and so need a different way to refer to a particular dentry. As the alternative form of reference needs to be stable across renames, truncates, and server-reboot (among other things, though these tend to be the most problematic), there is no simple answer like \u2018filename\u2019.</p> <p>\u6240\u6709\u6587\u4ef6\u7cfb\u7edf\u64cd\u4f5c\u90fd\u9700\u8981\u4e00\u4e2adentry\uff08\u6216\u4e24\u4e2a\uff09\u4f5c\u4e3a\u8d77\u70b9\u3002\u672c\u5730\u5e94\u7528\u7a0b\u5e8f\u901a\u8fc7\u6253\u5f00\u6587\u4ef6\u63cf\u8ff0\u7b26\u6216cwd/root\u5bf9\u9002\u5f53\u7684dentry\u8fdb\u884c\u5f15\u7528\u8ba1\u6570\u3002\u7136\u800c\uff0c\u901a\u8fc7\u8fdc\u7a0b\u6587\u4ef6\u7cfb\u7edf\u534f\u8bae\uff08\u5982NFS\uff09\u8bbf\u95ee\u6587\u4ef6\u7cfb\u7edf\u7684\u8fdc\u7a0b\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u65e0\u6cd5\u4fdd\u5b58\u8fd9\u6837\u7684\u5f15\u7528\uff0c\u56e0\u6b64\u9700\u8981\u4e0d\u540c\u7684\u65b9\u5f0f\u6765\u5f15\u7528\u7279\u5b9a\u7684dentry\u3002\u7531\u4e8e\u53e6\u4e00\u79cd\u5f15\u7528\u5f62\u5f0f\u9700\u8981\u5728\u91cd\u547d\u540d\u3001\u622a\u65ad\u548c\u670d\u52a1\u5668\u91cd\u65b0\u542f\u52a8\u671f\u95f4\u4fdd\u6301\u7a33\u5b9a\uff08\u9664\u5176\u4ed6\u5916\uff0c\u8fd9\u4e9b\u5f80\u5f80\u662f\u6700\u6709\u95ee\u9898\u7684\uff09\uff0c\u56e0\u6b64\u6ca1\u6709\u50cf\u201c\u6587\u4ef6\u540d\u201d\u8fd9\u6837\u7684\u7b80\u5355\u7b54\u6848\u3002</p> <p>The mechanism discussed here allows each filesystem implementation to specify how to generate an opaque (outside of the filesystem) byte string for any dentry, and how to find an appropriate dentry for any given opaque byte string. This byte string will be called a \u201cfilehandle fragment\u201d as it corresponds to part of an NFS filehandle.</p> <p>\u8fd9\u91cc\u8ba8\u8bba\u7684\u673a\u5236\u5141\u8bb8\u6bcf\u4e2a\u6587\u4ef6\u7cfb\u7edf\u5b9e\u73b0\u6307\u5b9a\u5982\u4f55\u4e3a\u4efb\u4f55dentry\u751f\u6210\u4e0d\u900f\u660e\uff08\u6587\u4ef6\u7cfb\u7edf\u5916\u90e8\uff09\u5b57\u8282\u5b57\u7b26\u4e32\uff0c\u4ee5\u53ca\u5982\u4f55\u4e3a\u4efb\u4f55\u7ed9\u5b9a\u7684\u4e0d\u900f\u660e\u5b57\u8282\u5b57\u7b26\u4e32\u627e\u5230\u5408\u9002\u7684dentry\u3002\u6b64\u5b57\u8282\u5b57\u7b26\u4e32\u5c06\u88ab\u79f0\u4e3a\u201c\u6587\u4ef6\u53e5\u67c4\u7247\u6bb5\u201d\uff0c\u56e0\u4e3a\u5b83\u5bf9\u5e94\u4e8eNFS\u6587\u4ef6\u53e5\u67c4\u7684\u4e00\u90e8\u5206\u3002</p> <p>A filesystem which supports the mapping between filehandle fragments and dentries will be termed \u201cexportable\u201d.</p> <p>\u652f\u6301\u6587\u4ef6\u53e5\u67c4\u7247\u6bb5\u548cdentry\u4e4b\u95f4\u6620\u5c04\u7684\u6587\u4ef6\u7cfb\u7edf\u5c06\u88ab\u79f0\u4e3a\u201c\u53ef\u5bfc\u51fa\u201d\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#32-dcache-issues","title":"3.2 Dcache Issues","text":"<p>The dcache normally contains a proper prefix of any given filesystem tree. This means that if any filesystem object is in the dcache, then all of the ancestors of that filesystem object are also in the dcache. As normal access is by filename this prefix is created naturally and maintained easily (by each object maintaining a reference count on its parent).</p> <p>dcache\u901a\u5e38\u5305\u542b\u4efb\u4f55\u7ed9\u5b9a\u6587\u4ef6\u7cfb\u7edf\u6811\u7684\u9002\u5f53\u524d\u7f00\u3002\u8fd9\u610f\u5473\u7740\uff0c\u5982\u679c\u4efb\u4f55\u6587\u4ef6\u7cfb\u7edf\u5bf9\u8c61\u90fd\u5728dcache\u4e2d\uff0c\u90a3\u4e48\u8be5\u6587\u4ef6\u7cfb\u7edf\u5bf9\u8c61\u7684\u6240\u6709\u7956\u5148\u4e5f\u90fd\u5728dccache\u4e2d\u3002\u7531\u4e8e\u6b63\u5e38\u8bbf\u95ee\u662f\u901a\u8fc7\u6587\u4ef6\u540d\u8fdb\u884c\u7684\uff0c\u56e0\u6b64\u524d\u7f00\u662f\u81ea\u7136\u521b\u5efa\u7684\uff0c\u5e76\u4e14\u6613\u4e8e\u7ef4\u62a4\uff08\u901a\u8fc7\u6bcf\u4e2a\u5bf9\u8c61\u5728\u5176\u7236\u5bf9\u8c61\u4e0a\u7ef4\u62a4\u5f15\u7528\u8ba1\u6570\uff09\u3002</p> <p>However when objects are included into the dcache by interpreting a filehandle fragment, there is no automatic creation of a path prefix for the object. This leads to two related but distinct features of the dcache that are not needed for normal filesystem access.</p> <p>\u4f46\u662f\uff0c\u5f53\u901a\u8fc7\u89e3\u91ca\u6587\u4ef6\u53e5\u67c4\u7247\u6bb5\u5c06\u5bf9\u8c61\u5305\u542b\u5230dcache\u4e2d\u65f6\uff0c\u4e0d\u4f1a\u81ea\u52a8\u521b\u5efa\u5bf9\u8c61\u7684\u8def\u5f84\u524d\u7f00\u3002\u8fd9\u5bfc\u81f4\u4e86dcache\u7684\u4e24\u4e2a\u76f8\u5173\u4f46\u4e0d\u540c\u7684\u7279\u6027\uff0c\u8fd9\u662f\u6b63\u5e38\u6587\u4ef6\u7cfb\u7edf\u8bbf\u95ee\u6240\u4e0d\u9700\u8981\u7684\u3002</p> <ol> <li>The dcache must sometimes contain objects that are not part of the proper prefix. i.e that are not connected to the root. dcache\u6709\u65f6\u5fc5\u987b\u5305\u542b\u4e0d\u5c5e\u4e8e\u6b63\u786e\u524d\u7f00\u7684\u5bf9\u8c61\u3002\u6bd4\u5982\u672a\u8fde\u63a5\u5230 root\u3002</li> <li>The dcache must be prepared for a newly found (via -&gt;lookup) directory to already have a (non-connected) dentry, and must be able to move that dentry into place (based on the parent and name in the -&gt;lookup). This is particularly needed for directories as it is a dcache invariant that directories only have one dentry. dcache\u5fc5\u987b\u4e3a\u65b0\u627e\u5230\u7684\uff08\u901a\u8fc7-&gt;\u67e5\u627e\uff09\u76ee\u5f55\u51c6\u5907\u597d\uff0c\u4ee5\u4fbf\u5df2\u7ecf\u6709\u4e00\u4e2a\uff08\u672a\u8fde\u63a5\u7684\uff09dentry\uff0c\u5e76\u4e14\u5fc5\u987b\u80fd\u591f\u5c06\u8be5dentry\u79fb\u52a8\u5230\u4f4d\uff08\u57fa\u4e8e-&gt;\u67e5\u627e\u4e2d\u7684\u7236\u76ee\u5f55\u548c\u540d\u79f0\uff09\u3002\u8fd9\u5bf9\u4e8e\u76ee\u5f55\u5c24\u5176\u9700\u8981\uff0c\u56e0\u4e3a\u76ee\u5f55\u53ea\u6709\u4e00\u4e2adentry\u662fdcache\u4e0d\u53d8\u91cf\u3002</li> </ol> <p>To implement these features, the dcache has:</p> <p>\u4e3a\u4e86\u5b9e\u73b0\u8fd9\u4e9b\u529f\u80fd\uff0cdcache\u5177\u6709\uff1a</p> <ol> <li>A dentry flag DCACHE_DISCONNECTED which is set on any dentry that might not be part of the proper prefix. This is set when anonymous dentries are created, and cleared when a dentry is noticed to be a child of a dentry which is in the proper prefix. If the refcount on a dentry with this flag set becomes zero, the dentry is immediately discarded, rather than being kept in the dcache. If a dentry that is not already in the dcache is repeatedly accessed by filehandle (as NFSD might do), an new dentry will be a allocated for each access, and discarded at the end of the access. dentry\u6807\u5fd7DCACHE_DISCONNECTED\uff0c\u5b83\u8bbe\u7f6e\u5728\u53ef\u80fd\u4e0d\u662f\u6b63\u786e\u524d\u7f00\u4e00\u90e8\u5206\u7684\u4efb\u4f55dentry\u4e0a\u3002\u8fd9\u5728\u521b\u5efa\u533f\u540ddentry\u65f6\u8bbe\u7f6e\uff0c\u5f53\u6ce8\u610f\u5230dentry\u662f\u6b63\u786e\u524d\u7f00\u4e2ddentry\u7684\u5b50\u7ea7\u65f6\u6e05\u9664\u3002\u5982\u679c\u8bbe\u7f6e\u4e86\u6b64\u6807\u5fd7\u7684dentry\u4e0a\u7684refcount\u53d8\u4e3a\u96f6\uff0c\u5219dentry\u5c06\u7acb\u5373\u88ab\u4e22\u5f03\uff0c\u800c\u4e0d\u662f\u4fdd\u5b58\u5728dcache\u4e2d\u3002\u5982\u679c\u6587\u4ef6\u53e5\u67c4\u91cd\u590d\u8bbf\u95ee\u5c1a\u672a\u5728dcache\u4e2d\u7684dentry\uff08NFSD\u53ef\u80fd\u4f1a\u8fd9\u6837\u505a\uff09\uff0c\u5219\u5c06\u4e3a\u6bcf\u6b21\u8bbf\u95ee\u5206\u914d\u4e00\u4e2a\u65b0\u7684dentry\uff0c\u5e76\u5728\u8bbf\u95ee\u7ed3\u675f\u65f6\u4e22\u5f03\u3002</li> </ol> <p>Note that such a dentry can acquire children, name, ancestors, etc. without losing DCACHE_DISCONNECTED - that flag is only cleared when subtree is successfully reconnected to root. Until then dentries in such subtree are retained only as long as there are references; refcount reaching zero means immediate eviction, same as for unhashed dentries. That guarantees that we won\u2019t need to hunt them down upon umount.</p> <p>\u8bf7\u6ce8\u610f\uff0c\u8fd9\u6837\u7684dentry\u53ef\u4ee5\u5728\u4e0d\u4e22\u5931DCACHE_DISCONNECTED\u7684\u60c5\u51b5\u4e0b\u83b7\u53d6\u5b50\u7ea7\u3001\u540d\u79f0\u3001\u7956\u5148\u7b49\u2014\u53ea\u6709\u5f53\u5b50\u6811\u6210\u529f\u91cd\u65b0\u8fde\u63a5\u5230\u6839\u76ee\u5f55\u65f6\uff0c\u624d\u4f1a\u6e05\u9664\u8be5\u6807\u5fd7\u3002\u5728\u6b64\u4e4b\u524d\uff0c\u8fd9\u79cd\u5b50\u6811\u4e2d\u7684dentry\u53ea\u5728\u6709\u5f15\u7528\u7684\u60c5\u51b5\u4e0b\u88ab\u4fdd\u7559\uff1brefcount\u8fbe\u5230\u96f6\u610f\u5473\u7740\u7acb\u5373\u9a71\u9010\uff0c\u4e0e\u672a\u5904\u7406\u7684dentry\u76f8\u540c\u3002\u8fd9\u4fdd\u8bc1\u4e86\u6211\u4eec\u4e0d\u9700\u8981\u5728\u6b7b\u540e\u8ffd\u6355\u4ed6\u4eec\u3002</p> <ol> <li>A primitive for creation of secondary roots - d_obtain_root(inode). Those do not bear DCACHE_DISCONNECTED. They are placed on the per-superblock list (-&gt;s_roots), so they can be located at umount time for eviction purposes.\u7528\u4e8e\u521b\u5efa\u6b21\u6839\u7684\u57fa\u5143-d_againn_root\uff08inode\uff09\u3002\u8fd9\u4e9b\u4e0d\u5e26\u6709DCACHE_DISCONNECTED\u3002\u5b83\u4eec\u88ab\u653e\u7f6e\u5728\u6bcf\u4e2a\u8d85\u7ea7\u5757\u5217\u8868\uff08-&gt;s_roots\uff09\u4e2d\uff0c\u56e0\u6b64\u5b83\u4eec\u53ef\u4ee5\u5728\u6b7b\u65f6\u88ab\u5b9a\u4f4d\u4ee5\u7528\u4e8e\u9a71\u9010\u3002</li> <li>Helper routines to allocate anonymous dentries, and to help attach loose directory dentries at lookup time. They are:\u5e2e\u52a9\u7a0b\u5e8f\u4f8b\u7a0b\u5206\u914d\u533f\u540ddentry\uff0c\u5e76\u5e2e\u52a9\u5728\u67e5\u627e\u65f6\u9644\u52a0\u677e\u6563\u76ee\u5f55dentry\u3002\u4ed6\u4eec\u662f\uff1a</li> </ol> <ul> <li>d_obtain_alias(inode) will return a dentry for the given inode.</li> </ul> <p>If the inode already has a dentry, one of those is returned.If it doesn\u2019t, a new anonymous (IS_ROOT and DCACHE_DISCONNECTED) dentry is allocated and attached.In the case of a directory, care is taken that only one dentry can ever be attached.</p> <p>\u5982\u679cinode\u5df2\u7ecf\u6709\u4e00\u4e2adentry\uff0c\u5219\u8fd4\u56de\u5176\u4e2d\u4e00\u4e2a\u3002\u5982\u679c\u6ca1\u6709\uff0c\u5219\u5206\u914d\u5e76\u9644\u52a0\u4e00\u4e2a\u65b0\u7684\u533f\u540d\uff08is_ROOT\u548cDCACHE_DISCONNECTED\uff09dentry\u3002\u5bf9\u4e8e\u76ee\u5f55\uff0c\u8bf7\u6ce8\u610f\u53ea\u80fd\u9644\u52a0\u4e00\u4e2adenty\u3002</p> <ul> <li>d_splice_alias(inode, dentry) will introduce a new dentry into the tree;</li> </ul> <p>either the passed-in dentry or a preexisting alias for the given inode (such as an anonymous one created by d_obtain_alias), if appropriate. It returns NULL when the passed-in dentry is used, following the calling convention of -&gt;lookup.</p> <p>\u4f20\u5165\u7684dentry\u6216\u7ed9\u5b9ainode\u7684\u9884\u5148\u5b58\u5728\u7684\u522b\u540d\uff08\u4f8b\u5982\u7531dgetinalias\u521b\u5efa\u7684\u533f\u540d\u522b\u540d\uff09\uff08\u5982\u679c\u5408\u9002\uff09\u3002\u5f53\u4f7f\u7528\u4f20\u5165\u7684dentry\u65f6\uff0c\u5b83\u8fd4\u56deNULL\uff0c\u9075\u5faa\u8c03\u7528\u60ef\u4f8b-&gt;\u67e5\u627e\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#33-filesystem-issues","title":"3.3 Filesystem Issues","text":"<p>For a filesystem to be exportable it must:</p> <ol> <li> <p>provide the filehandle fragment routines described below.\u63d0\u4f9b\u4e0b\u9762\u63cf\u8ff0\u7684\u6587\u4ef6\u53e5\u67c4\u7247\u6bb5\u4f8b\u7a0b\u3002</p> </li> <li> <p>make sure that d_splice_alias is used rather than d_add when -&gt;lookup finds an inode for a given parent and name.</p> </li> </ol> <p>If inode is NULL, d_splice_alias(inode, dentry) is equivalent to:</p> <pre><code>d_add(dentry, inode), NULL\n</code></pre> <p>Similarly, d_splice_alias(ERR_PTR(err), dentry) = ERR_PTR(err)</p> <p>Typically the -&gt;lookup routine will simply end with a:</p> <p><pre><code>        return d_splice_alias(inode, dentry);\n}\n</code></pre> </p> <p>A file system implementation declares that instances of the filesystem are exportable by setting the s_export_op field in the struct super_block. This field must point to a \u201cstruct export_operations\u201d struct which has the following members:</p> <p>\u6587\u4ef6\u7cfb\u7edf\u5b9e\u73b0\u901a\u8fc7\u5728\u7ed3\u6784super_block\u4e2d\u8bbe\u7f6es_export_op\u5b57\u6bb5\u6765\u58f0\u660e\u6587\u4ef6\u7cfb\u7edf\u7684\u5b9e\u4f8b\u662f\u53ef\u5bfc\u51fa\u7684\u3002\u6b64\u5b57\u6bb5\u5fc5\u987b\u6307\u5411\u5177\u6709\u4ee5\u4e0b\u6210\u5458\u7684\u201cstruct export_operations\u201d\u7ed3\u6784\uff1a</p> <ul> <li>encode_fh (optional)</li> </ul> <p>Takes a dentry and creates a filehandle fragment which can later be used to find or create a dentry for the same object. The default implementation creates a filehandle fragment that encodes a 32bit inode and generation number for the inode encoded, and if necessary the same information for the parent.fh_to_dentry (mandatory)Given a filehandle fragment, this should find the implied object and create a dentry for it (possibly with d_obtain_alias).fh_to_parent (optional but strongly recommended)Given a filehandle fragment, this should find the parent of the implied object and create a dentry for it (possibly with d_obtain_alias). May fail if the filehandle fragment is too small.get_parent (optional but strongly recommended)When given a dentry for a directory, this should return a dentry for the parent. Quite possibly the parent dentry will have been allocated by d_alloc_anon. The default get_parent function just returns an error so any filehandle lookup that requires finding a parent will fail. -&gt;lookup(\u201c..\u201d) is not used as a default as it can leave \u201c..\u201d entries in the dcache which are too messy to work with.get_name (optional)When given a parent dentry and a child dentry, this should find a name in the directory identified by the parent dentry, which leads to the object identified by the child dentry. If no get_name function is supplied, a default implementation is provided which uses vfs_readdir to find potential names, and matches inode numbers to find the correct match.flagsSome filesystems may need to be handled differently than others. The export_operations struct also includes a flags field that allows the filesystem to communicate such information to nfsd. See the Export Operations Flags section below for more explanation.</p> <p>\u83b7\u53d6dentry\u5e76\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u53e5\u67c4\u7247\u6bb5\uff0c\u8be5\u7247\u6bb5\u7a0d\u540e\u53ef\u7528\u4e8e\u67e5\u627e\u6216\u521b\u5efa\u540c\u4e00\u5bf9\u8c61\u7684dentry\u3002\u9ed8\u8ba4\u5b9e\u73b0\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u53e5\u67c4\u7247\u6bb5\uff0c\u8be5\u7247\u6bb5\u7f16\u780132\u4f4dinode\u548c\u7f16\u7801\u7684inode\u7684\u4ee3\u53f7\uff0c\u5982\u679c\u9700\u8981\uff0c\u8fd8\u53ef\u4ee5\u4e3aparent.fh_to_entry\uff08\u5f3a\u5236\uff09\u63d0\u4f9b\u76f8\u540c\u7684\u4fe1\u606f\uff0c\u8fd9\u5e94\u8be5\u627e\u5230\u9690\u542b\u5bf9\u8c61\u5e76\u4e3a\u5176\u521b\u5efadentry\uff08\u53ef\u80fd\u4f7f\u7528d_gainn_alias\uff09\u3002fh-to_parent\uff08\u53ef\u9009\u4f46\u5f3a\u70c8\u5efa\u8bae\uff09\u7ed9\u5b9a\u6587\u4ef6\u53e5\u67c4\u7247\u6bb5\uff0c\u8fd9\u5e94\u8be5\u627e\u5230\u8be5\u9690\u542b\u5bf9\u8c61\u7684\u7236\u5bf9\u8c61\u5e76\u4e3a\u5b83\u521b\u5efadenty\uff08\u53ef\u80fd\u4f7f\u7528d-gainn_aias\uff09\u3002\u5982\u679cfilehandle\u7247\u6bb5\u592a\u5c0f\uff0c\u5219\u53ef\u80fd\u4f1a\u5931\u8d25\u3002get_parent\uff08\u53ef\u9009\u4f46\u5f3a\u70c8\u5efa\u8bae\uff09\u5982\u679c\u4e3a\u76ee\u5f55\u63d0\u4f9bdentry\uff0c\u5219\u5e94\u8be5\u4e3a\u7236\u76ee\u5f55\u8fd4\u56dedentry\u3002\u7236dentry\u5f88\u53ef\u80fd\u5df2\u7ecf\u7531d_alloc_anon\u5206\u914d\u3002\u9ed8\u8ba4\u7684get_parent\u51fd\u6570\u53ea\u8fd4\u56de\u4e00\u4e2a\u9519\u8bef\uff0c\u56e0\u6b64\u4efb\u4f55\u9700\u8981\u67e5\u627e\u7236\u7ea7\u7684\u6587\u4ef6\u53e5\u67c4\u67e5\u627e\u90fd\u5c06\u5931\u8d25\u3002-&gt;lookup\uff08\u201c..\u201d\uff09\u4e0d\u7528\u4f5c\u9ed8\u8ba4\u503c\uff0c\u56e0\u4e3a\u5b83\u53ef\u80fd\u4f1a\u5728dcache\u4e2d\u7559\u4e0b\u201c..\u201d\u6761\u76ee\uff0c\u8fd9\u4e9b\u6761\u76ee\u592a\u4e71\uff0c\u65e0\u6cd5\u4f7f\u7528.get_name\uff08\u53ef\u9009\uff09\u5f53\u7ed9\u5b9a\u7236dentry\u548c\u5b50dentry\u65f6\uff0c\u5e94\u8be5\u4f1a\u5728\u7236dentry\u6807\u8bc6\u7684\u76ee\u5f55\u4e2d\u627e\u5230\u4e00\u4e2a\u540d\u79f0\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u5b50dentry\u6807\u8bc6\u5bf9\u8c61\u3002\u5982\u679c\u672a\u63d0\u4f9bget_name\u51fd\u6570\uff0c\u5219\u4f1a\u63d0\u4f9b\u4e00\u4e2a\u9ed8\u8ba4\u5b9e\u73b0\uff0c\u8be5\u5b9e\u73b0\u4f7f\u7528vfs_readdir\u67e5\u627e\u6f5c\u5728\u540d\u79f0\uff0c\u5e76\u5339\u914dinode\u7f16\u53f7\u4ee5\u67e5\u627e\u6b63\u786e\u7684\u5339\u914d\u9879\u3002flags\u67d0\u4e9b\u6587\u4ef6\u7cfb\u7edf\u53ef\u80fd\u9700\u8981\u4e0e\u5176\u4ed6\u6587\u4ef6\u7cfb\u7edf\u4e0d\u540c\u7684\u5904\u7406\u65b9\u5f0f\u3002export_operations\u7ed3\u6784\u8fd8\u5305\u62ec\u4e00\u4e2a\u6807\u5fd7\u5b57\u6bb5\uff0c\u5141\u8bb8\u6587\u4ef6\u7cfb\u7edf\u5c06\u6b64\u7c7b\u4fe1\u606f\u4f20\u9012\u7ed9nfsd\u3002\u6709\u5173\u8be6\u7ec6\u8bf4\u660e\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u7684\u5bfc\u51fa\u64cd\u4f5c\u6807\u5fd7\u90e8\u5206\u3002</p> <p>A filehandle fragment consists of an array of 1 or more 4byte words, together with a one byte \u201ctype\u201d. The decode_fh routine should not depend on the stated size that is passed to it. This size may be larger than the original filehandle generated by encode_fh, in which case it will have been padded with nuls. Rather, the encode_fh routine should choose a \u201ctype\u201d which indicates the decode_fh how much of the filehandle is valid, and how it should be interpreted.</p> <p>\u6587\u4ef6\u53e5\u67c4\u7247\u6bb5\u75311\u4e2a\u6216\u591a\u4e2a4\u5b57\u8282\u5355\u8bcd\u7684\u6570\u7ec4\u4ee5\u53ca\u4e00\u4e2a1\u5b57\u8282\u7684\u201c\u7c7b\u578b\u201d\u7ec4\u6210\u3002decode_fh\u4f8b\u7a0b\u4e0d\u5e94\u53d6\u51b3\u4e8e\u4f20\u9012\u7ed9\u5b83\u7684\u6307\u5b9a\u5927\u5c0f\u3002\u6b64\u5927\u5c0f\u53ef\u80fd\u5927\u4e8eencode_fh\u751f\u6210\u7684\u539f\u59cb\u6587\u4ef6\u53e5\u67c4\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b83\u5c06\u88ab\u586b\u5145nul\u3002\u76f8\u53cd\uff0cencode_fh\u4f8b\u7a0b\u5e94\u8be5\u9009\u62e9\u4e00\u4e2a\u201c\u7c7b\u578b\u201d\uff0c\u8be5\u7c7b\u578b\u6307\u793adecode_fh\u6587\u4ef6\u53e5\u67c4\u7684\u591a\u5c11\u662f\u6709\u6548\u7684\uff0c\u4ee5\u53ca\u5e94\u8be5\u5982\u4f55\u89e3\u91ca\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#34-export-operations-flags","title":"3.4 Export Operations Flags","text":"<p>In addition to the operation vector pointers, struct export_operations also contains a \u201cflags\u201d field that allows the filesystem to communicate to nfsd that it may want to do things differently when dealing with it. The following flags are defined:</p> <p>\u9664\u4e86\u64cd\u4f5c\u5411\u91cf\u6307\u9488\u4e4b\u5916\uff0cstruct export_operations\u8fd8\u5305\u542b\u4e00\u4e2a\u201cflags\u201d\u5b57\u6bb5\uff0c\u8be5\u5b57\u6bb5\u5141\u8bb8\u6587\u4ef6\u7cfb\u7edf\u4e0enfsd\u8fdb\u884c\u901a\u4fe1\uff0c\u8868\u660e\u6587\u4ef6\u7cfb\u7edf\u5728\u5904\u7406\u5b83\u65f6\u53ef\u80fd\u5e0c\u671b\u91c7\u53d6\u4e0d\u540c\u7684\u65b9\u5f0f\u3002\u5b9a\u4e49\u4e86\u4ee5\u4e0b\u6807\u5fd7\uff1a</p> <ul> <li>EXPORT_OP_NOWCC - disable NFSv3 WCC attributes on this filesystem</li> </ul> <p>RFC 1813 recommends that servers always send weak cache consistency (WCC) data to the client after each operation. The server should atomically collect attributes about the inode, do an operation on it, and then collect the attributes afterward. This allows the client to skip issuing GETATTRs in some situations but means that the server is calling vfs_getattr for almost all RPCs. On some filesystems (particularly those that are clustered or networked) this is expensive and atomicity is difficult to guarantee. This flag indicates to nfsd that it should skip providing WCC attributes to the client in NFSv3 replies when doing operations on this filesystem. Consider enabling this on filesystems that have an expensive -&gt;getattr inode operation, or when atomicity between pre and post operation attribute collection is impossible to guarantee.</p> <p>RFC 1813\u5efa\u8bae\u670d\u52a1\u5668\u5728\u6bcf\u6b21\u64cd\u4f5c\u540e\u59cb\u7ec8\u5411\u5ba2\u6237\u7aef\u53d1\u9001\u5f31\u7f13\u5b58\u4e00\u81f4\u6027\uff08WCC\uff09\u6570\u636e\u3002\u670d\u52a1\u5668\u5e94\u8be5\u81ea\u52a8\u6536\u96c6\u6709\u5173inode\u7684\u5c5e\u6027\uff0c\u5bf9\u5176\u6267\u884c\u64cd\u4f5c\uff0c\u7136\u540e\u6536\u96c6\u5c5e\u6027\u3002\u8fd9\u5141\u8bb8\u5ba2\u6237\u7aef\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u8df3\u8fc7\u53d1\u51faGEATTR\uff0c\u4f46\u610f\u5473\u7740\u670d\u52a1\u5668\u6b63\u5728\u4e3a\u51e0\u4e4e\u6240\u6709RPC\u8c03\u7528vfs_getattr\u3002\u5728\u67d0\u4e9b\u6587\u4ef6\u7cfb\u7edf\uff08\u7279\u522b\u662f\u96c6\u7fa4\u6216\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\uff09\u4e0a\uff0c\u8fd9\u662f\u6602\u8d35\u7684\uff0c\u800c\u4e14\u5f88\u96be\u4fdd\u8bc1\u539f\u5b50\u6027\u3002\u8be5\u6807\u5fd7\u5411nfsd\u8868\u660e\uff0c\u5728\u5bf9\u8be5\u6587\u4ef6\u7cfb\u7edf\u6267\u884c\u64cd\u4f5c\u65f6\uff0c\u5b83\u5e94\u8be5\u8df3\u8fc7\u5728NFSv3\u5e94\u7b54\u4e2d\u5411\u5ba2\u6237\u7aef\u63d0\u4f9bWCC\u5c5e\u6027\u3002\u8003\u8651\u5728\u5177\u6709\u6602\u8d35\u7684-&gt;getattr inode\u64cd\u4f5c\u7684\u6587\u4ef6\u7cfb\u7edf\u4e0a\u542f\u7528\u6b64\u529f\u80fd\uff0c\u6216\u8005\u5728\u65e0\u6cd5\u4fdd\u8bc1\u64cd\u4f5c\u524d\u548c\u64cd\u4f5c\u540e\u5c5e\u6027\u96c6\u5408\u4e4b\u95f4\u7684\u539f\u5b50\u6027\u65f6\u542f\u7528\u6b64\u529f\u80fd\u3002</p> <ul> <li>EXPORT_OP_NOSUBTREECHK - disallow subtree checking on this fs</li> </ul> <p>Many NFS operations deal with filehandles, which the server must then vet to ensure that they live inside of an exported tree. When the export consists of an entire filesystem, this is trivial. nfsd can just ensure that the filehandle live on the filesystem. When only part of a filesystem is exported however, then nfsd must walk the ancestors of the inode to ensure that it\u2019s within an exported subtree. This is an expensive operation and not all filesystems can support it properly. This flag exempts the filesystem from subtree checking and causes exportfs to get back an error if it tries to enable subtree checking on it.</p> <p>\u8bb8\u591aNFS\u64cd\u4f5c\u5904\u7406\u6587\u4ef6\u53e5\u67c4\uff0c\u7136\u540e\u670d\u52a1\u5668\u5fc5\u987b\u5bf9\u5176\u8fdb\u884c\u68c0\u67e5\uff0c\u4ee5\u786e\u4fdd\u5b83\u4eec\u4f4d\u4e8e\u5bfc\u51fa\u7684\u6811\u4e2d\u3002\u5f53\u5bfc\u51fa\u5305\u542b\u6574\u4e2a\u6587\u4ef6\u7cfb\u7edf\u65f6\uff0c\u8fd9\u662f\u5fae\u4e0d\u8db3\u9053\u7684\u3002nfsd\u53ea\u80fd\u786e\u4fdd\u6587\u4ef6\u53e5\u67c4\u4f4d\u4e8e\u6587\u4ef6\u7cfb\u7edf\u4e0a\u3002\u4f46\u662f\uff0c\u5f53\u4ec5\u5bfc\u51fa\u6587\u4ef6\u7cfb\u7edf\u7684\u4e00\u90e8\u5206\u65f6\uff0cnfsd\u5fc5\u987b\u904d\u5386inode\u7684\u7956\u5148\uff0c\u4ee5\u786e\u4fdd\u5b83\u4f4d\u4e8e\u5bfc\u51fa\u7684\u5b50\u6811\u4e2d\u3002\u8fd9\u662f\u4e00\u9879\u6602\u8d35\u7684\u64cd\u4f5c\uff0c\u5e76\u975e\u6240\u6709\u6587\u4ef6\u7cfb\u7edf\u90fd\u80fd\u6b63\u786e\u652f\u6301\u5b83\u3002\u8be5\u6807\u5fd7\u514d\u9664\u4e86\u6587\u4ef6\u7cfb\u7edf\u7684\u5b50\u6811\u68c0\u67e5\uff0c\u5e76\u5bfc\u81f4exportfs\u5728\u5c1d\u8bd5\u542f\u7528\u5b50\u6811\u68c0\u67e5\u65f6\u8fd4\u56de\u9519\u8bef\u3002</p> <ul> <li>EXPORT_OP_CLOSE_BEFORE_UNLINK - always close cached files before unlinking</li> </ul> <p>On some exportable filesystems (such as NFS) unlinking a file that is still open can cause a fair bit of extra work. For instance, the NFS client will do a \u201csillyrename\u201d to ensure that the file sticks around while it\u2019s still open. When reexporting, that open file is held by nfsd so we usually end up doing a sillyrename, and then immediately deleting the sillyrenamed file just afterward when the link count actually goes to zero. Sometimes this delete can race with other operations (for instance an rmdir of the parent directory). This flag causes nfsd to close any open files for this inode before calling into the vfs to do an unlink or a rename that would replace an existing file.</p> <p>\u5728\u67d0\u4e9b\u53ef\u5bfc\u51fa\u7684\u6587\u4ef6\u7cfb\u7edf\uff08\u5982NFS\uff09\u4e0a\uff0c\u53d6\u6d88\u94fe\u63a5\u4ecd\u7136\u6253\u5f00\u7684\u6587\u4ef6\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5927\u91cf\u989d\u5916\u7684\u5de5\u4f5c\u3002\u4f8b\u5982\uff0cNFS\u5ba2\u6237\u7aef\u5c06\u6267\u884c\u4e00\u4e2a\u201c\u611a\u8822\u7684\u540d\u79f0\u201d\uff0c\u4ee5\u786e\u4fdd\u6587\u4ef6\u5728\u6253\u5f00\u65f6\u4ecd\u7136\u5b58\u5728\u3002\u91cd\u65b0\u5bfc\u51fa\u65f6\uff0c\u6253\u5f00\u7684\u6587\u4ef6\u7531nfsd\u4fdd\u5b58\uff0c\u56e0\u6b64\u6211\u4eec\u901a\u5e38\u4f1a\u6267\u884c\u4e00\u4e2asillyrename\uff0c\u7136\u540e\u5728\u94fe\u63a5\u8ba1\u6570\u5b9e\u9645\u4e3a\u96f6\u65f6\u7acb\u5373\u5220\u9664\u8be5sillyrenamed\u6587\u4ef6\u3002\u6709\u65f6\uff0c\u6b64\u5220\u9664\u4f1a\u4e0e\u5176\u4ed6\u64cd\u4f5c\uff08\u4f8b\u5982\u7236\u76ee\u5f55\u7684rmdir\uff09\u7ade\u4e89\u3002\u6b64\u6807\u5fd7\u4f1a\u5bfc\u81f4nfsd\u5173\u95ed\u6b64inode\u7684\u6240\u6709\u6253\u5f00\u6587\u4ef6_before_\u8c03\u7528vfs\u4ee5\u6267\u884c\u53d6\u6d88\u94fe\u63a5\u6216\u91cd\u547d\u540d\u4ee5\u66ff\u6362\u73b0\u6709\u6587\u4ef6\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#4-reference-counting-in-pnfs","title":"4 Reference counting in pnfs","text":"<p>The are several inter-related caches. We have layouts which can reference multiple devices, each of which can reference multiple data servers. Each data server can be referenced by multiple devices. Each device can be referenced by multiple layouts. To keep all of this straight, we need to reference count.</p> <p>\u6709\u51e0\u4e2a\u76f8\u4e92\u5173\u8054\u7684\u7f13\u5b58\u3002\u6211\u4eec\u6709\u53ef\u4ee5\u5f15\u7528\u591a\u4e2a\u8bbe\u5907\u7684\u5e03\u5c40\uff0c\u6bcf\u4e2a\u8bbe\u5907\u53ef\u4ee5\u5f15\u7528\u591a\u53f0\u6570\u636e\u670d\u52a1\u5668\u3002\u6bcf\u4e2a\u6570\u636e\u670d\u52a1\u5668\u53ef\u4ee5\u88ab\u591a\u4e2a\u8bbe\u5907\u5f15\u7528\u3002\u6bcf\u4e2a\u8bbe\u5907\u53ef\u4ee5\u88ab\u591a\u4e2a\u5e03\u5c40\u5f15\u7528\u3002\u4e3a\u4e86\u4fdd\u6301\u8fd9\u4e00\u5207\uff0c\u6211\u4eec\u9700\u8981\u5f15\u7528count\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#41-struct-pnfs_layout_hdr","title":"4.1 struct pnfs_layout_hdr","text":"<p>The on-the-wire command LAYOUTGET corresponds to struct pnfs_layout_segment, usually referred to by the variable name lseg. Each nfs_inode may hold a pointer to a cache of these layout segments in nfsi-&gt;layout, of type struct pnfs_layout_hdr.</p> <p>on-the-wire\u547d\u4ee4LAYOUTGET\u5bf9\u5e94\u4e8e\u7ed3\u6784pnfs_layout_segment\uff0c\u901a\u5e38\u7531\u53d8\u91cf\u540dlseg\u5f15\u7528\u3002\u6bcf\u4e2anfs_inode\u53ef\u4ee5\u4fdd\u5b58\u6307\u5411nfsi-&gt;layout\u4e2d\u8fd9\u4e9b\u5e03\u5c40\u6bb5\u7684\u7f13\u5b58\u7684\u6307\u9488\uff0c\u7c7b\u578b\u4e3astruct pnfs_layout_hdr\u3002</p> <p>We reference the header for the inode pointing to it, across each outstanding RPC call that references it (LAYOUTGET, LAYOUTRETURN, LAYOUTCOMMIT), and for each lseg held within.</p> <p>\u6211\u4eec\u5f15\u7528\u6307\u5411\u5b83\u7684inode\u7684\u5934\uff0c\u8de8\u5f15\u7528\u5b83\u7684\u6bcf\u4e2a\u672a\u5b8c\u6210RPC\u8c03\u7528\uff08LAYOUTGET\u3001LAYOUTRETURN\u3001LAYOUTCOMMIT\uff09\uff0c\u4ee5\u53ca\u5176\u4e2d\u5305\u542b\u7684\u6bcf\u4e2alseg\u3002</p> <p>Each header is also (when non-empty) put on a list associated with struct nfs_client (cl_layouts). Being put on this list does not bump the reference count, as the layout is kept around by the lseg that keeps it in the list.</p> <p>\u6bcf\u4e2a\u5934\u4e5f\uff08\u5f53\u975e\u7a7a\u65f6\uff09\u653e\u5728\u4e0e\u7ed3\u6784nfs_client\uff08cl_layouts\uff09\u5173\u8054\u7684\u5217\u8868\u4e2d\u3002\u653e\u5728\u8fd9\u4e2a\u5217\u8868\u4e2d\u4e0d\u4f1a\u5f71\u54cd\u5f15\u7528\u8ba1\u6570\uff0c\u56e0\u4e3a\u5e03\u5c40\u662f\u7531lseg\u4fdd\u6301\u5728\u5217\u8868\u4e2d\u7684\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#42-deviceid_cache","title":"4.2 deviceid_cache","text":"<p>lsegs reference device ids, which are resolved per nfs_client and layout driver type. The device ids are held in a RCU cache (struct nfs4_deviceid_cache). The cache itself is referenced across each mount. The entries (struct nfs4_deviceid) themselves are held across the lifetime of each lseg referencing them.</p> <p>lsegs\u5f15\u7528\u8bbe\u5907id\uff0c\u6839\u636enfsclient\u548c\u5e03\u5c40\u9a71\u52a8\u7a0b\u5e8f\u7c7b\u578b\u89e3\u6790\u3002\u8bbe\u5907ID\u4fdd\u5b58\u5728RCU\u7f13\u5b58\uff08\u7ed3\u6784nfs4_deviceid_cache\uff09\u4e2d\u3002\u7f13\u5b58\u672c\u8eab\u5728\u6bcf\u4e2a\u88c5\u8f7d\u4e2d\u88ab\u5f15\u7528\u3002\u6761\u76ee\uff08struct nfs4_deviceid\uff09\u672c\u8eab\u5728\u5f15\u7528\u5b83\u4eec\u7684\u6bcf\u4e2alseg\u7684\u751f\u547d\u5468\u671f\u4e2d\u4fdd\u5b58\u3002</p> <p>RCU is used because the deviceid is basically a write once, read many data structure. The hlist size of 32 buckets needs better justification, but seems reasonable given that we can have multiple deviceid\u2019s per filesystem, and multiple filesystems per nfs_client.</p> <p>\u4e4b\u6240\u4ee5\u4f7f\u7528RCU\uff0c\u662f\u56e0\u4e3adeviceid\u57fa\u672c\u4e0a\u662f\u4e00\u4e2a\u4e00\u6b21\u5199\u5165\u3001\u591a\u6b21\u8bfb\u53d6\u7684\u6570\u636e\u7ed3\u6784\u300232\u4e2a\u5b58\u50a8\u6876\u7684\u6700\u5927\u5217\u8868\u5927\u5c0f\u9700\u8981\u66f4\u597d\u7684\u7406\u7531\uff0c\u4f46\u8003\u8651\u5230\u6bcf\u4e2a\u6587\u4ef6\u7cfb\u7edf\u53ef\u4ee5\u6709\u591a\u4e2a\u8bbe\u5907ID\uff0c\u6bcf\u4e2anfs_client\u53ef\u4ee5\u6709\u591a\u6587\u4ef6\u7cfb\u7edf\uff0c\u8fd9\u4f3c\u4e4e\u662f\u5408\u7406\u7684\u3002</p> <p>The hash code is copied from the nfsd code base. A discussion of hashing and variations of this algorithm can be found here.</p> <p>\u54c8\u5e0c\u4ee3\u7801\u662f\u4ecenfsd\u4ee3\u7801\u5e93\u590d\u5236\u7684\u3002\u6b64\u5904\u53ef\u4ee5\u627e\u5230\u5bf9\u54c8\u5e0c\u548c\u8be5\u7b97\u6cd5\u53d8\u4f53\u7684\u8ba8\u8bba</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#43-data-server-cache","title":"4.3 data server cache","text":"<p>file driver devices refer to data servers, which are kept in a module level cache. Its reference is held over the lifetime of the deviceid pointing to it.</p> <p>\u6587\u4ef6\u9a71\u52a8\u7a0b\u5e8f\u8bbe\u5907\u662f\u6307\u4fdd\u5b58\u5728\u6a21\u5757\u7ea7\u7f13\u5b58\u4e2d\u7684\u6570\u636e\u670d\u52a1\u5668\u3002\u5b83\u7684\u5f15\u7528\u5728\u6307\u5411\u5b83\u7684\u8bbe\u5907ID\u7684\u751f\u547d\u5468\u671f\u5185\u4fdd\u6301\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#44-lseg","title":"4.4 lseg","text":"<p>lseg maintains an extra reference corresponding to the NFS_LSEG_VALID bit which holds it in the pnfs_layout_hdr\u2019s list. When the final lseg is removed from the pnfs_layout_hdr\u2019s list, the NFS_LAYOUT_DESTROYED bit is set, preventing any new lsegs from being added.</p> <p>lseg\u7ef4\u62a4\u4e0eNFS_LSEG_VALID\u4f4d\u76f8\u5bf9\u5e94\u7684\u989d\u5916\u5f15\u7528\uff0c\u8be5\u4f4d\u5c06\u5176\u4fdd\u5b58\u5728pnfs_layout_hdr\u7684\u5217\u8868\u4e2d\u3002\u5f53\u4ecepnfs_layout_hdr\u7684\u5217\u8868\u4e2d\u5220\u9664\u6700\u540e\u7684lseg\u65f6\uff0c\u5c06\u8bbe\u7f6eNFS_LAYOUT_DESTROYED \u4f4d\uff0c\u9632\u6b62\u6dfb\u52a0\u4efb\u4f55\u65b0\u7684lseg\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#45-layout-drivers","title":"4.5 layout drivers","text":"<p>PNFS utilizes what is called layout drivers. The STD defines 4 basic layout types: \u201cfiles\u201d, \u201cobjects\u201d, \u201cblocks\u201d, and \u201cflexfiles\u201d. For each of these types there is a layout-driver with a common function-vectors table which are called by the nfs-client pnfs-core to implement the different layout types.</p> <p>PNFS\u5229\u7528\u6240\u8c13\u7684\u5e03\u5c40\u9a71\u52a8\u7a0b\u5e8f\u3002STD\u5b9a\u4e49\u4e864\u79cd\u57fa\u672c\u5e03\u5c40\u7c7b\u578b\uff1a\u201c\u6587\u4ef6\u201d\u3001\u201c\u5bf9\u8c61\u201d\u3001\u201c\u5757\u201d\u548c\u201c\u67d4\u6027\u6587\u4ef6\u201d\u3002\u5bf9\u4e8e\u8fd9\u4e9b\u7c7b\u578b\u4e2d\u7684\u6bcf\u4e00\u79cd\uff0c\u90fd\u6709\u4e00\u4e2a\u5e03\u5c40\u9a71\u52a8\u7a0b\u5e8f\uff0c\u5176\u4e2d\u5305\u542b\u4e00\u4e2a\u516c\u5171\u51fd\u6570\u5411\u91cf\u8868\uff0cnfs\u5ba2\u6237\u7aefpnfs\u5185\u6838\u8c03\u7528\u8be5\u8868\u6765\u5b9e\u73b0\u4e0d\u540c\u7684\u5e03\u5c40\u7c7b\u578b\u3002</p> <p>Files-layout-driver code is in: fs/nfs/filelayout/.. directory Blocks-layout-driver code is in: fs/nfs/blocklayout/.. directory Flexfiles-layout-driver code is in: fs/nfs/flexfilelayout/.. directory</p> <p>\u6587\u4ef6\u5e03\u5c40\u9a71\u52a8\u7a0b\u5e8f\u4ee3\u7801\u4f4d\u4e8e\uff1afs/nfs/filayout/.. \u76ee\u5f55\u5757\u5e03\u5c40\u9a71\u52a8\u7a0b\u5e8f\u4ee3\u7801\u4f4d\u4e8e\uff1afs/nfs/blocklayout/.. \u76ee\u5f55Flexfiles\u5e03\u5c40\u9a71\u52a8\u7a0b\u5e8f\u4ee3\u7801\u4f4d\u4e8e\uff1afs/nfs/flexfilelayout/.. \u76ee\u5f55</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#46-blocks-layout-setup","title":"4.6 blocks-layout setup","text":"<p>TODO: Document the setup needs of the blocks layout driver</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#5-rpc-cache","title":"5 RPC Cache","text":"<p>This document gives a brief introduction to the caching mechanisms in the sunrpc layer that is used, in particular, for NFS authentication.</p> <p>\u672c\u6587\u7b80\u8981\u4ecb\u7ecd\u4e86sunrpc\u5c42\u4e2d\u7684\u7f13\u5b58\u673a\u5236\uff0c\u7279\u522b\u662f\u7528\u4e8eNFS\u8eab\u4efd\u9a8c\u8bc1\u7684\u7f13\u5b58\u673a\u5236\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#51-caches","title":"5.1 Caches","text":"<p>The caching replaces the old exports table and allows for a wide variety of values to be caches.</p> <p>\u7f13\u5b58\u66ff\u6362\u4e86\u65e7\u7684\u5bfc\u51fa\u8868\uff0c\u5e76\u5141\u8bb8\u7f13\u5b58\u591a\u79cd\u503c\u3002</p> <p>There are a number of caches that are similar in structure though quite possibly very different in content and use. There is a corpus of common code for managing these caches.</p> <p>\u6709\u8bb8\u591a\u7f13\u5b58\u7ed3\u6784\u76f8\u4f3c\uff0c\u4f46\u5185\u5bb9\u548c\u4f7f\u7528\u53ef\u80fd\u975e\u5e38\u4e0d\u540c\u3002\u6709\u4e00\u4e2a\u7528\u4e8e\u7ba1\u7406\u8fd9\u4e9b\u7f13\u5b58\u7684\u901a\u7528\u4ee3\u7801\u5e93\u3002</p> <p>Examples of caches that are likely to be needed are:</p> <ul> <li>mapping from IP address to client name\u4eceIP\u5730\u5740\u5230\u5ba2\u6237\u7aef\u540d\u79f0\u7684\u6620\u5c04</li> <li>mapping from client name and filesystem to export options\u4ece\u5ba2\u6237\u673a\u540d\u79f0\u548c\u6587\u4ef6\u7cfb\u7edf\u5230\u5bfc\u51fa\u9009\u9879\u7684\u6620\u5c04</li> <li>mapping from UID to list of GIDs, to work around NFS\u2019s limitation of 16 gids.\u4eceUID\u5230GID\u5217\u8868\u7684\u6620\u5c04\uff0c\u4ee5\u89e3\u51b3NFS\u5bf916\u4e2aGID\u7684\u9650\u5236\u3002</li> <li>mappings between local UID/GID and remote UID/GID for sites that do not have uniform uid assignment\u5bf9\u4e8e\u6ca1\u6709\u7edf\u4e00UID\u5206\u914d\u7684\u7ad9\u70b9\uff0c\u672c\u5730UID/GID\u548c\u8fdc\u7a0bUID/GIID\u4e4b\u95f4\u7684\u6620\u5c04</li> <li>mapping from network identify to public key for crypto authentication.\u4ece\u7f51\u7edc\u6807\u8bc6\u6620\u5c04\u5230\u52a0\u5bc6\u8ba4\u8bc1\u7684\u516c\u94a5\u3002</li> </ul> <p>The common code handles such things as:</p> <ul> <li>general cache lookup with correct locking\u5177\u6709\u6b63\u786e\u9501\u5b9a\u7684\u5e38\u89c4\u7f13\u5b58\u67e5\u627e</li> <li>supporting \u2018NEGATIVE\u2019 as well as positive entries\u652f\u6301\u201c\u5426\u5b9a\u201d\u548c\u80af\u5b9a\u6761\u76ee</li> <li>allowing an EXPIRED time on cache items, and removing items after they expire, and are no longer in-use.\u5141\u8bb8\u7f13\u5b58\u9879\u76ee\u6709\u4e00\u4e2aEXPIRED\u65f6\u95f4\uff0c\u5e76\u5728\u9879\u76ee\u8fc7\u671f\u4e14\u4e0d\u518d\u4f7f\u7528\u540e\u5220\u9664\u9879\u76ee\u3002</li> <li>making requests to user-space to fill in cache entries\u8bf7\u6c42\u7528\u6237\u7a7a\u95f4\u586b\u5145\u7f13\u5b58\u6761\u76ee</li> <li>allowing user-space to directly set entries in the cache\u5141\u8bb8\u7528\u6237\u7a7a\u95f4\u76f4\u63a5\u5728\u7f13\u5b58\u4e2d\u8bbe\u7f6e\u6761\u76ee</li> <li>delaying RPC requests that depend on as-yet incomplete cache entries, and replaying those requests when the cache entry is complete.\u5ef6\u8fdf\u4f9d\u8d56\u4e8e\u5c1a\u672a\u5b8c\u6210\u7684\u7f13\u5b58\u9879\u7684RPC\u8bf7\u6c42\uff0c\u5e76\u5728\u7f13\u5b58\u9879\u5b8c\u6210\u65f6\u91cd\u64ad\u8fd9\u4e9b\u8bf7\u6c42\u3002</li> <li>clean out old entries as they expire.\u5728\u8fc7\u671f\u65f6\u6e05\u9664\u65e7\u6761\u76ee\u3002</li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#511-creating-a-cache","title":"5.1.1 Creating a Cache","text":"<ul> <li>A cache needs a datum to store. This is in the form of a structure definition that must contain a struct cache_head as an element, usually the first. It will also contain a key and some content. Each cache element is reference counted and contains expiry and update times for use in cache management.\u7f13\u5b58\u9700\u8981\u4e00\u4e2a\u6570\u636e\u6765\u5b58\u50a8\u3002\u8fd9\u662f\u4e00\u4e2a\u7ed3\u6784\u5b9a\u4e49\u7684\u5f62\u5f0f\uff0c\u5b83\u5fc5\u987b\u5305\u542b\u4e00\u4e2a\u7ed3\u6784cache_head\u4f5c\u4e3a\u5143\u7d20\uff0c\u901a\u5e38\u662f\u7b2c\u4e00\u4e2a\u3002\u5b83\u8fd8\u5c06\u5305\u542b\u4e00\u4e2a\u5bc6\u94a5\u548c\u4e00\u4e9b\u5185\u5bb9\u3002\u6bcf\u4e2a\u7f13\u5b58\u5143\u7d20\u90fd\u662f\u5f15\u7528\u8ba1\u6570\u7684\uff0c\u5e76\u5305\u542b\u7528\u4e8e\u7f13\u5b58\u7ba1\u7406\u7684\u8fc7\u671f\u65f6\u95f4\u548c\u66f4\u65b0\u65f6\u95f4\u3002</li> <li>A cache needs a \u201ccache_detail\u201d structure that describes the cache. This stores the hash table, some parameters for cache management, and some operations detailing how to work with particular cache items.\u7f13\u5b58\u9700\u8981\u63cf\u8ff0\u7f13\u5b58\u7684\u201ccache_detail\u201d\u7ed3\u6784\u3002\u5b83\u5b58\u50a8\u54c8\u5e0c\u8868\u3001\u7f13\u5b58\u7ba1\u7406\u7684\u4e00\u4e9b\u53c2\u6570\u4ee5\u53ca\u8be6\u7ec6\u8bf4\u660e\u5982\u4f55\u4f7f\u7528\u7279\u5b9a\u7f13\u5b58\u9879\u7684\u4e00\u4e9b\u64cd\u4f5c\u3002</li> </ul> <p>The operations are:</p> <ul> <li><code>struct cache_head *alloc (void)</code></li> </ul> <p>This simply allocates appropriate memory and returns a pointer to the cache_detail embedded within the structure</p> <p>\u8fd9\u53ea\u9700\u5206\u914d\u9002\u5f53\u7684\u5185\u5b58\u5e76\u8fd4\u56de\u4e00\u4e2a\u6307\u5411\u7ed3\u6784\u4e2d\u5d4c\u5165\u7684cache_detail\u7684\u6307\u9488</p> <ul> <li><code>void cache_put(struct kref *)</code></li> </ul> <p>This is called when the last reference to an item is dropped. The pointer passed is to the \u2018ref\u2019 field in the cache_head. cache_put should release any references create by \u2018cache_init\u2019 and, if CACHE_VALID is set, any references created by cache_update. It should then release the memory allocated by \u2018alloc\u2019.</p> <p>\u5f53\u5220\u9664\u5bf9\u9879\u7684\u6700\u540e\u4e00\u4e2a\u5f15\u7528\u65f6\uff0c\u5c06\u8c03\u7528\u6b64\u51fd\u6570\u3002\u4f20\u9012\u7684\u6307\u9488\u6307\u5411cache_head\u4e2d\u7684\u201cref\u201d\u5b57\u6bb5\u3002cache_put\u5e94\u91ca\u653e\u7531\u201ccache_init\u201d\u521b\u5efa\u7684\u4efb\u4f55\u5f15\u7528\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86CACHE_VALID\uff0c\u5219\u91ca\u653e\u7531cache_update\u521b\u5efa\u7684\u6240\u6709\u5f15\u7528\u3002\u7136\u540e\u5e94\u8be5\u91ca\u653e\u201calloc\u201d\u5206\u914d\u7684\u5185\u5b58\u3002</p> <ul> <li><code>int match(struct cache_head *orig, struct cache_head *new)</code></li> </ul> <p>test if the keys in the two structures match. Return 1 if they do, 0 if they don\u2019t.</p> <p>\u6d4b\u8bd5\u4e24\u4e2a\u7ed3\u6784\u4e2d\u7684\u952e\u662f\u5426\u5339\u914d\u3002\u5982\u679c\u8fd4\u56de1\uff0c\u5219\u8fd4\u56de0\u3002</p> <ul> <li><code>void init(struct cache_head *orig, struct cache_head *new)</code></li> </ul> <p>Set the \u2018key\u2019 fields in \u2018new\u2019 from \u2018orig\u2019. This may include taking references to shared objects.</p> <p>\u4ece\u201corig\u201d\u8bbe\u7f6e\u201cnew\u201d\u4e2d\u7684\u201ckey\u201d\u5b57\u6bb5\u3002\u8fd9\u53ef\u80fd\u5305\u62ec\u5f15\u7528\u5171\u4eab\u5bf9\u8c61\u3002</p> <ul> <li><code>void update(struct cache_head *orig, struct cache_head *new)</code></li> </ul> <p>Set the \u2018content\u2019 fileds in \u2018new\u2019 from \u2018orig\u2019.</p> <p>\u4ece\u201corig\u201d\u8bbe\u7f6e\u201cnew\u201d\u4e2d\u7684\u201ccontent\u201d\u6587\u4ef6\u3002</p> <ul> <li><code>int cache_show(struct seq_file *m, struct cache_detail *cd, struct cache_head *h)</code></li> </ul> <p>Optional. Used to provide a /proc file that lists the contents of a cache. This should show one item, usually on just one line.</p> <p>\u53ef\u9009\u62e9\u7684\u7528\u4e8e\u63d0\u4f9b\u5217\u51fa\u7f13\u5b58\u5185\u5bb9\u7684/proc\u6587\u4ef6\u3002\u8fd9\u5e94\u8be5\u663e\u793a\u4e00\u4e2a\u9879\u76ee\uff0c\u901a\u5e38\u53ea\u663e\u793a\u4e00\u884c\u3002</p> <ul> <li><code>int cache_request(struct cache_detail *cd, struct cache_head *h, char **bpp, int *blen)</code></li> </ul> <p>Format a request to be send to user-space for an item to be instantiated. <code>*bpp</code> is a buffer of size <code>*blen</code>. bpp should be moved forward over the encoded message, and <code>*blen</code> should be reduced to show how much free space remains. Return 0 on success or &lt;0 if not enough room or other problem.</p> <p>\u4e3a\u8981\u5b9e\u4f8b\u5316\u7684\u9879\u8bbe\u7f6e\u8981\u53d1\u9001\u5230\u7528\u6237\u7a7a\u95f4\u7684\u8bf7\u6c42\u7684\u683c\u5f0f<code>*bpp</code>\u662f\u5927\u5c0f\u4e3a<code>*blen</code>\u7684\u7f13\u51b2\u533a\u3002bpp\u5e94\u8be5\u5728\u7f16\u7801\u7684\u6d88\u606f\u4e0a\u5411\u524d\u79fb\u52a8\uff0c\u5e76\u4e14<code>*blen</code>\u5e94\u8be5\u51cf\u5c11\uff0c\u4ee5\u663e\u793a\u5269\u4f59\u7684\u7a7a\u95f2\u7a7a\u95f4\u3002\u6210\u529f\u65f6\u8fd4\u56de0\uff0c\u5982\u679c\u6ca1\u6709\u8db3\u591f\u7684\u7a7a\u95f4\u6216\u5176\u4ed6\u95ee\u9898\uff0c\u5219\u8fd4\u56de&lt;0\u3002</p> <ul> <li><code>int cache_parse(struct cache_detail *cd, char *buf, int len)</code></li> </ul> <p>A message from user space has arrived to fill out a cache entry. It is in \u2018buf\u2019 of length \u2018len\u2019. cache_parse should parse this, find the item in the cache with sunrpc_cache_lookup_rcu, and update the item with sunrpc_cache_update.</p> <p>\u6765\u81ea\u7528\u6237\u7a7a\u95f4\u7684\u6d88\u606f\u5df2\u5230\u8fbe\u4ee5\u586b\u5145\u7f13\u5b58\u6761\u76ee\u3002\u957f\u5ea6\u4e3a\u201clen\u201d\u7684\u201cbuf\u201d\u3002cacheparse\u5e94\u8be5\u89e3\u6790\u8fd9\u4e2a\uff0c\u7528sunrpc_cache_lookup_cru\u5728\u7f13\u5b58\u4e2d\u627e\u5230\u8be5\u9879\uff0c\u5e76\u7528sunrpccache_update\u66f4\u65b0\u8be5\u9879\u3002</p> <ul> <li>A cache needs to be registered using cache_register(). This includes it on a list of caches that will be regularly cleaned to discard old data.\u9700\u8981\u4f7f\u7528cache_register\uff08\uff09\u6ce8\u518c\u7f13\u5b58\u3002\u8fd9\u5c06\u5176\u5305\u542b\u5728\u7f13\u5b58\u5217\u8868\u4e2d\uff0c\u8fd9\u4e9b\u7f13\u5b58\u5c06\u5b9a\u671f\u6e05\u7406\u4ee5\u4e22\u5f03\u65e7\u6570\u636e\u3002</li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#512-using-a-cache","title":"5.1.2 Using a cache","text":"<p>To find a value in a cache, call sunrpc_cache_lookup_rcu passing a pointer to the cache_head in a sample item with the \u2018key\u2019 fields filled in. This will be passed to -&gt;match to identify the target entry. If no entry is found, a new entry will be create, added to the cache, and marked as not containing valid data.</p> <p>\u8981\u5728\u7f13\u5b58\u4e2d\u67e5\u627e\u503c\uff0c\u8bf7\u8c03\u7528sunrpc_cache_lookup_cru\uff0c\u5c06\u6307\u9488\u4f20\u9012\u7ed9\u793a\u4f8b\u9879\u4e2d\u7684cache_head\uff0c\u5e76\u586b\u5145\u201ckey\u201d\u5b57\u6bb5\u3002\u8fd9\u5c06\u4f20\u9012\u7ed9-&gt;match\u4ee5\u6807\u8bc6\u76ee\u6807\u9879\u3002\u5982\u679c\u627e\u4e0d\u5230\u6761\u76ee\uff0c\u5c06\u521b\u5efa\u4e00\u4e2a\u65b0\u6761\u76ee\uff0c\u5c06\u5176\u6dfb\u52a0\u5230\u7f13\u5b58\u4e2d\uff0c\u5e76\u6807\u8bb0\u4e3a\u4e0d\u5305\u542b\u6709\u6548\u6570\u636e\u3002</p> <p>The item returned is typically passed to cache_check which will check if the data is valid, and may initiate an up-call to get fresh data. cache_check will return -ENOENT in the entry is negative or if an up call is needed but not possible, -EAGAIN if an upcall is pending, or 0 if the data is valid;</p> <p>\u8fd4\u56de\u7684\u9879\u901a\u5e38\u4f1a\u4f20\u9012\u7ed9cache_check\uff0c\u5b83\u5c06\u68c0\u67e5\u6570\u636e\u662f\u5426\u6709\u6548\uff0c\u5e76\u53ef\u80fd\u4f1a\u542f\u52a8up\u8c03\u7528\u4ee5\u83b7\u53d6\u65b0\u6570\u636e\u3002cache_check\u5c06\u5728\u6761\u76ee\u4e2d\u8fd4\u56de-ENOENT\u4e3a\u8d1f\uff0c\u6216\u8005\u5982\u679c\u9700\u8981\u4f46\u4e0d\u53ef\u80fd\u8fdb\u884c\u4e0a\u8c03\uff0c\u5219\u8fd4\u56de-EGAIN\uff0c\u5982\u679c\u4e0a\u8c03\u6302\u8d77\uff0c\u5219\u8fd4\u56de0\uff0c\u5982\u679c\u6570\u636e\u6709\u6548\u5219\u8fd4\u56de0\uff1b</p> <p>cache_check can be passed a \u201cstruct cache_req*\u201d. This structure is typically embedded in the actual request and can be used to create a deferred copy of the request (struct cache_deferred_req). This is done when the found cache item is not uptodate, but the is reason to believe that userspace might provide information soon. When the cache item does become valid, the deferred copy of the request will be revisited (-&gt;revisit). It is expected that this method will reschedule the request for processing.</p> <p>cache_check\u53ef\u4ee5\u4f20\u9012\u201cstruct cache_req*\u201d\u3002\u6b64\u7ed3\u6784\u901a\u5e38\u5d4c\u5165\u5728\u5b9e\u9645\u8bf7\u6c42\u4e2d\uff0c\u53ef\u7528\u4e8e\u521b\u5efa\u8bf7\u6c42\u7684\u5ef6\u8fdf\u526f\u672c\uff08\u7ed3\u6784cache_deferred_req\uff09\u3002\u8fd9\u662f\u5728\u627e\u5230\u7684\u7f13\u5b58\u9879\u4e0d\u662f\u6700\u65b0\u7684\u60c5\u51b5\u4e0b\u5b8c\u6210\u7684\uff0c\u4f46\u6709\u7406\u7531\u76f8\u4fe1\u7528\u6237\u7a7a\u95f4\u53ef\u80fd\u4f1a\u5f88\u5feb\u63d0\u4f9b\u4fe1\u606f\u3002\u5f53\u7f13\u5b58\u9879\u53d8\u4e3a\u6709\u6548\u65f6\uff0c\u5c06\u91cd\u65b0\u8bbf\u95ee\u8bf7\u6c42\u7684\u5ef6\u8fdf\u526f\u672c\uff08-&gt;revisit\uff09\u3002\u9884\u8ba1\u6b64\u65b9\u6cd5\u5c06\u91cd\u65b0\u5b89\u6392\u5904\u7406\u8bf7\u6c42\u3002</p> <p>The value returned by sunrpc_cache_lookup_rcu can also be passed to sunrpc_cache_update to set the content for the item. A second item is passed which should hold the content. If the item found by _lookup has valid data, then it is discarded and a new item is created. This saves any user of an item from worrying about content changing while it is being inspected. If the item found by _lookup does not contain valid data, then the content is copied across and CACHE_VALID is set.</p> <p>sunrpc_cache_lookup_cru\u8fd4\u56de\u7684\u503c\u4e5f\u53ef\u4ee5\u4f20\u9012\u7ed9sunrpc_ccache_update\u4ee5\u8bbe\u7f6e\u9879\u76ee\u7684\u5185\u5bb9\u3002\u4f20\u9012\u7b2c\u4e8c\u4e2a\u9879\u76ee\uff0c\u8be5\u9879\u76ee\u5e94\u5305\u542b\u5185\u5bb9\u3002\u5982\u679c<code>_lookup</code>\u627e\u5230\u7684\u9879\u5177\u6709\u6709\u6548\u6570\u636e\uff0c\u5219\u4e22\u5f03\u8be5\u9879\u5e76\u521b\u5efa\u65b0\u9879\u3002\u8fd9\u53ef\u4ee5\u907f\u514d\u9879\u76ee\u7684\u4efb\u4f55\u7528\u6237\u5728\u68c0\u67e5\u9879\u76ee\u65f6\u62c5\u5fc3\u5185\u5bb9\u53d1\u751f\u53d8\u5316\u3002\u5982\u679c_lookup\u627e\u5230\u7684\u9879\u4e0d\u5305\u542b\u6709\u6548\u6570\u636e\uff0c\u5219\u590d\u5236\u5185\u5bb9\u5e76\u8bbe\u7f6eCACHE_VALID \u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#513-populating-a-cache","title":"5.1.3 Populating a cache","text":"<p>Each cache has a name, and when the cache is registered, a directory with that name is created in /proc/net/rpc</p> <p>\u6bcf\u4e2a\u7f13\u5b58\u90fd\u6709\u4e00\u4e2a\u540d\u79f0\uff0c\u5f53\u6ce8\u518c\u7f13\u5b58\u65f6\uff0c\u5c06\u5728/proc/net/rpc\u4e2d\u521b\u5efa\u4e00\u4e2a\u5177\u6709\u8be5\u540d\u79f0\u7684\u76ee\u5f55</p> <p>This directory contains a file called \u2018channel\u2019 which is a channel for communicating between kernel and user for populating the cache. This directory may later contain other files of interacting with the cache.</p> <p>\u6b64\u76ee\u5f55\u5305\u542b\u4e00\u4e2a\u540d\u4e3a\u201cchannel\u201d\u7684\u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u662f\u5185\u6838\u548c\u7528\u6237\u4e4b\u95f4\u7528\u4e8e\u586b\u5145\u7f13\u5b58\u7684\u901a\u4fe1\u901a\u9053\u3002\u6b64\u76ee\u5f55\u7a0d\u540e\u53ef\u80fd\u5305\u542b\u4e0e\u7f13\u5b58\u4ea4\u4e92\u7684\u5176\u4ed6\u6587\u4ef6\u3002</p> <p>The \u2018channel\u2019 works a bit like a datagram socket. Each \u2018write\u2019 is passed as a whole to the cache for parsing and interpretation. Each cache can treat the write requests differently, but it is expected that a message written will contain:</p> <p>\u201c\u901a\u9053\u201d\u7684\u5de5\u4f5c\u65b9\u5f0f\u6709\u70b9\u50cf\u6570\u636e\u62a5\u5957\u63a5\u5b57\u3002\u6bcf\u4e2a\u201cwrite\u201d\u90fd\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u4f20\u9012\u7ed9\u7f13\u5b58\u8fdb\u884c\u89e3\u6790\u548c\u89e3\u91ca\u3002\u6bcf\u4e2a\u7f13\u5b58\u53ef\u4ee5\u4e0d\u540c\u5730\u5bf9\u5f85\u5199\u5165\u8bf7\u6c42\uff0c\u4f46\u9884\u671f\u5199\u5165\u7684\u6d88\u606f\u5c06\u5305\u542b\uff1a</p> <ul> <li>a key</li> <li>an expiry time</li> <li>a content.</li> </ul> <p>with the intention that an item in the cache with the give key should be create or updated to have the given content, and the expiry time should be set on that item.</p> <p>\u610f\u56fe\u662f\u5e94\u8be5\u521b\u5efa\u6216\u66f4\u65b0\u7f13\u5b58\u4e2d\u5177\u6709\u7ed9\u5b9a\u5bc6\u94a5\u7684\u9879\u76ee\u4ee5\u5177\u6709\u7ed9\u5b9a\u5185\u5bb9\uff0c\u5e76\u4e14\u5e94\u8be5\u4e3a\u8be5\u9879\u76ee\u8bbe\u7f6e\u5230\u671f\u65f6\u95f4\u3002</p> <p>Reading from a channel is a bit more interesting. When a cache lookup fails, or when it succeeds but finds an entry that may soon expire, a request is lodged for that cache item to be updated by user-space. These requests appear in the channel file.</p> <p>\u4ece\u9891\u9053\u4e0a\u9605\u8bfb\u66f4\u6709\u8da3\u3002\u5f53\u7f13\u5b58\u67e5\u627e\u5931\u8d25\u65f6\uff0c\u6216\u8005\u5f53\u7f13\u5b58\u67e5\u627e\u6210\u529f\u4f46\u627e\u5230\u4e00\u4e2a\u53ef\u80fd\u5f88\u5feb\u8fc7\u671f\u7684\u6761\u76ee\u65f6\uff0c\u5c06\u63d0\u4ea4\u4e00\u4e2a\u8bf7\u6c42\uff0c\u8981\u6c42\u7528\u6237\u7a7a\u95f4\u66f4\u65b0\u8be5\u7f13\u5b58\u9879\u3002\u8fd9\u4e9b\u8bf7\u6c42\u663e\u793a\u5728\u9891\u9053\u6587\u4ef6\u4e2d\u3002</p> <p>Successive reads will return successive requests. If there are no more requests to return, read will return EOF, but a select or poll for read will block waiting for another request to be added.</p> <p>\u8fde\u7eed\u8bfb\u53d6\u5c06\u8fd4\u56de\u8fde\u7eed\u8bf7\u6c42\u3002\u5982\u679c\u6ca1\u6709\u66f4\u591a\u7684\u8bf7\u6c42\u8981\u8fd4\u56de\uff0cread\u5c06\u8fd4\u56deEOF\uff0c\u4f46\u5bf9read\u7684\u9009\u62e9\u6216\u8f6e\u8be2\u5c06\u963b\u6b62\u7b49\u5f85\u6dfb\u52a0\u53e6\u4e00\u4e2a\u8bf7\u6c42\u3002</p> <p>Thus a user-space helper is likely to:</p> <p>\u56e0\u6b64\uff0c\u7528\u6237\u7a7a\u95f4\u52a9\u624b\u53ef\u80fd\u4f1a\uff1a</p> <pre><code>open the channel.\n  select for readable\n  read a request\n  write a response\nloop.\n</code></pre> <p>If it dies and needs to be restarted, any requests that have not been answered will still appear in the file and will be read by the new instance of the helper.</p> <p>\u5982\u679c\u5b83\u6b7b\u4e86\uff0c\u9700\u8981\u91cd\u65b0\u542f\u52a8\uff0c\u90a3\u4e48\u4efb\u4f55\u5c1a\u672a\u5e94\u7b54\u7684\u8bf7\u6c42\u90fd\u5c06\u4ecd\u7136\u51fa\u73b0\u5728\u6587\u4ef6\u4e2d\uff0c\u5e76\u5c06\u7531\u52a9\u624b\u7684\u65b0\u5b9e\u4f8b\u8bfb\u53d6\u3002</p> <p>Each cache should define a \u201ccache_parse\u201d method which takes a message written from user-space and processes it. It should return an error (which propagates back to the write syscall) or 0.</p> <p>\u6bcf\u4e2a\u7f13\u5b58\u90fd\u5e94\u8be5\u5b9a\u4e49\u4e00\u4e2a\u201ccache_parse\u201d\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u63a5\u6536\u4ece\u7528\u6237\u7a7a\u95f4\u5199\u5165\u7684\u6d88\u606f\u5e76\u5bf9\u5176\u8fdb\u884c\u5904\u7406\u3002\u5b83\u5e94\u8be5\u8fd4\u56de\u4e00\u4e2a\u9519\u8bef\uff08\u4f1a\u4f20\u64ad\u56dewrite\u7cfb\u7edf\u8c03\u7528\uff09\u62160\u3002</p> <p>Each cache should also define a \u201ccache_request\u201d method which takes a cache item and encodes a request into the buffer provided.</p> <p>\u6bcf\u4e2a\u7f13\u5b58\u8fd8\u5e94\u5b9a\u4e49\u4e00\u4e2a\u201ccache_request\u201d\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u83b7\u53d6\u7f13\u5b58\u9879\u5e76\u5c06\u8bf7\u6c42\u7f16\u7801\u5230\u63d0\u4f9b\u7684\u7f13\u51b2\u533a\u4e2d\u3002</p> <p>Note</p> <p>If a cache has no active readers on the channel, and has had not active readers for more than 60 seconds, further requests will not be added to the channel but instead all lookups that do not find a valid entry will fail. This is partly for backward compatibility: The previous nfs exports table was deemed to be authoritative and a failed lookup meant a definite \u2018no\u2019.</p> <p>\u5982\u679c\u7f13\u5b58\u5728\u901a\u9053\u4e0a\u6ca1\u6709\u6d3b\u52a8\u7684\u8bfb\u5361\u5668\uff0c\u5e76\u4e14\u5728\u8d85\u8fc760\u79d2\u7684\u65f6\u95f4\u5185\u6ca1\u6709\u6d3b\u52a8\u7684\u8bfb\u5361\u5668\uff0c\u5219\u4e0d\u4f1a\u5411\u901a\u9053\u6dfb\u52a0\u8fdb\u4e00\u6b65\u7684\u8bf7\u6c42\uff0c\u800c\u662f\u6240\u6709\u672a\u627e\u5230\u6709\u6548\u6761\u76ee\u7684\u67e5\u627e\u90fd\u5c06\u5931\u8d25\u3002\u8fd9\u90e8\u5206\u662f\u4e3a\u4e86\u5411\u540e\u517c\u5bb9\uff1a\u4ee5\u524d\u7684nfs\u5bfc\u51fa\u8868\u88ab\u8ba4\u4e3a\u662f\u6743\u5a01\u7684\uff0c\u5931\u8d25\u7684\u67e5\u627e\u610f\u5473\u7740\u660e\u786e\u7684\u201cno\u201d\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#514-requestresponse-format","title":"5.1.4 request/response format","text":"<p>While each cache is free to use its own format for requests and responses over channel, the following is recommended as appropriate and support routines are available to help: Each request or response record should be printable ASCII with precisely one newline character which should be at the end. Fields within the record should be separated by spaces, normally one. If spaces, newlines, or nul characters are needed in a field they much be quoted. two mechanisms are available:</p> <p>\u867d\u7136\u6bcf\u4e2a\u7f13\u5b58\u90fd\u53ef\u4ee5\u81ea\u7531\u4f7f\u7528\u81ea\u5df1\u7684\u683c\u5f0f\u901a\u8fc7\u901a\u9053\u8fdb\u884c\u8bf7\u6c42\u548c\u54cd\u5e94\uff0c\u4f46\u5efa\u8bae\u9002\u5f53\u4f7f\u7528\u4ee5\u4e0b\u683c\u5f0f\uff0c\u5e76\u63d0\u4f9b\u652f\u6301\u4f8b\u7a0b\u6765\u5e2e\u52a9\uff1a\u6bcf\u4e2a\u8bf7\u6c42\u6216\u54cd\u5e94\u8bb0\u5f55\u90fd\u5e94\u8be5\u662f\u53ef\u6253\u5370\u7684ASCII\u7801\uff0c\u5e76\u5728\u7ed3\u5c3e\u5904\u6b63\u597d\u6709\u4e00\u4e2a\u6362\u884c\u7b26\u3002\u8bb0\u5f55\u4e2d\u7684\u5b57\u6bb5\u5e94\u8be5\u7528\u7a7a\u683c\u9694\u5f00\uff0c\u901a\u5e38\u662f\u4e00\u4e2a\u3002\u5982\u679c\u5b57\u6bb5\u4e2d\u9700\u8981\u7a7a\u683c\u3001\u6362\u884c\u7b26\u6216nul\u5b57\u7b26\uff0c\u5219\u5fc5\u987b\u5f15\u7528\u5b83\u4eec\u3002\u6709\u4e24\u79cd\u673a\u5236\u53ef\u7528\uff1a</p> <ul> <li>If a field begins \u2018x\u2019 then it must contain an even number of hex digits, and pairs of these digits provide the bytes in the field.\u5982\u679c\u5b57\u6bb5\u4ee5\u201cx\u201d\u5f00\u5934\uff0c\u5219\u5b83\u5fc5\u987b\u5305\u542b\u5076\u6570\u4e2a\u5341\u516d\u8fdb\u5236\u6570\u5b57\uff0c\u8fd9\u4e9b\u6570\u5b57\u5bf9\u63d0\u4f9b\u5b57\u6bb5\u4e2d\u7684\u5b57\u8282\u3002</li> <li>otherwise a in the field must be followed by 3 octal digits which give the code for a byte. Other characters are treated as them selves. At the very least, space, newline, nul, and \u2018' must be quoted in this way.\u5426\u5219\uff0c\u5b57\u6bb5\u4e2d\u7684a\u5fc5\u987b\u540e\u8ddf3\u4e2a\u516b\u8fdb\u5236\u6570\u5b57\uff0c\u8fd9\u4e9b\u6570\u5b57\u7ed9\u51fa\u4e00\u4e2a\u5b57\u8282\u7684\u4ee3\u7801\u3002\u5176\u4ed6\u89d2\u8272\u88ab\u89c6\u4e3a\u81ea\u5df1\u3002\u81f3\u5c11\uff0c\u7a7a\u683c\u3001\u6362\u884c\u7b26\u3001nul\u548c\u201c\u201d\u5fc5\u987b\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u5f15\u7528\u3002</li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#6-rpcsec_gss-support-for-kernel-rpc-servers","title":"6 rpcsec_gss support for kernel RPC servers","text":"<p>This document gives references to the standards and protocols used to implement RPCGSS authentication in kernel RPC servers such as the NFS server and the NFS client\u2019s NFSv4.0 callback server. (But note that NFSv4.1 and higher don\u2019t require the client to act as a server for the purposes of authentication.)</p> <p>\u672c\u6587\u6863\u5f15\u7528\u4e86\u7528\u4e8e\u5728\u5185\u6838RPC\u670d\u52a1\u5668\uff08\u5982NFS\u670d\u52a1\u5668\u548cNFS\u5ba2\u6237\u7aef\u7684NFSv4.0\u56de\u8c03\u670d\u52a1\u5668\uff09\u4e2d\u5b9e\u73b0RPCGSS\u8eab\u4efd\u9a8c\u8bc1\u7684\u6807\u51c6\u548c\u534f\u8bae\u3002\uff08\u4f46\u8bf7\u6ce8\u610f\uff0cNFSv4.1\u53ca\u66f4\u9ad8\u7248\u672c\u4e0d\u8981\u6c42\u5ba2\u6237\u7aef\u4f5c\u4e3a\u670d\u52a1\u5668\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002\uff09</p> <p>RPCGSS is specified in a few IETF documents:</p> <ul> <li>RFC2203 v1: https://tools.ietf.org/rfc/rfc2203.txt</li> <li>RFC5403 v2: https://tools.ietf.org/rfc/rfc5403.txt</li> </ul> <p>There is a third version that we don\u2019t currently implement:</p> <ul> <li>RFC7861 v3: https://tools.ietf.org/rfc/rfc7861.txt</li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#61-background","title":"6.1 Background","text":"<p>The RPCGSS Authentication method describes a way to perform GSSAPI Authentication for NFS. Although GSSAPI is itself completely mechanism agnostic, in many cases only the KRB5 mechanism is supported by NFS implementations.</p> <p>RPCGSS\u8eab\u4efd\u9a8c\u8bc1\u65b9\u6cd5\u63cf\u8ff0\u4e86\u4e00\u79cd\u4e3aNFS\u6267\u884cGSSAPI\u8eab\u4efd\u9a8c\u8bc1\u7684\u65b9\u6cd5\u3002\u5c3d\u7ba1GSSAPI\u672c\u8eab\u5b8c\u5168\u4e0d\u4f9d\u8d56\u4e8e\u673a\u5236\uff0c\u4f46\u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\uff0cNFS\u5b9e\u73b0\u53ea\u652f\u6301KRB5\u673a\u5236\u3002</p> <p>The Linux kernel, at the moment, supports only the KRB5 mechanism, and depends on GSSAPI extensions that are KRB5 specific.</p> <p>\u76ee\u524d\uff0cLinux\u5185\u6838\u4ec5\u652f\u6301KRB5\u673a\u5236\uff0c\u5e76\u4e14\u4f9d\u8d56\u4e8eKRB5\u7279\u5b9a\u7684GSSAPI\u6269\u5c55\u3002</p> <p>GSSAPI is a complex library, and implementing it completely in kernel is unwarranted. However GSSAPI operations are fundementally separable in 2 parts:</p> <p>GSSAPI\u662f\u4e00\u4e2a\u590d\u6742\u7684\u5e93\uff0c\u5b8c\u5168\u5728\u5185\u6838\u4e2d\u5b9e\u73b0\u5b83\u662f\u6ca1\u6709\u5fc5\u8981\u7684\u3002\u7136\u800c\uff0cGSSAPI\u7684\u8fd0\u8425\u57fa\u672c\u4e0a\u53ef\u5206\u4e3a\u4e24\u90e8\u5206\uff1a</p> <ul> <li>initial context establishment\u521d\u59cb\u4e0a\u4e0b\u6587\u5efa\u7acb</li> <li>integrity/privacy protection (signing and encrypting of individual packets)\u5b8c\u6574\u6027/\u9690\u79c1\u4fdd\u62a4\uff08\u5355\u4e2a\u6570\u636e\u5305\u7684\u7b7e\u540d\u548c\u52a0\u5bc6\uff09</li> </ul> <p>The former is more complex and policy-independent, but less performance-sensitive. The latter is simpler and needs to be very fast.</p> <p>\u524d\u8005\u66f4\u4e3a\u590d\u6742\uff0c\u4e0e\u653f\u7b56\u65e0\u5173\uff0c\u4f46\u5bf9\u6027\u80fd\u4e0d\u592a\u654f\u611f\u3002\u540e\u8005\u66f4\u7b80\u5355\uff0c\u9700\u8981\u975e\u5e38\u5feb\u3002</p> <p>Therefore, we perform per-packet integrity and privacy protection in the kernel, but leave the initial context establishment to userspace. We need upcalls to request userspace to perform context establishment.</p> <p>\u56e0\u6b64\uff0c\u6211\u4eec\u5728\u5185\u6838\u4e2d\u6267\u884c\u6bcf\u5305\u5b8c\u6574\u6027\u548c\u9690\u79c1\u4fdd\u62a4\uff0c\u4f46\u5c06\u521d\u59cb\u4e0a\u4e0b\u6587\u5efa\u7acb\u7559\u7ed9\u7528\u6237\u7a7a\u95f4\u3002\u6211\u4eec\u9700\u8981upcall\u6765\u8bf7\u6c42\u7528\u6237\u7a7a\u95f4\u6267\u884c\u4e0a\u4e0b\u6587\u5efa\u7acb\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#62-nfs-server-legacy-upcall-mechanism","title":"6.2 NFS Server Legacy Upcall Mechanism","text":"<p>The classic upcall mechanism uses a custom text based upcall mechanism to talk to a custom daemon called rpc.svcgssd that is provide by the nfs-utils package.</p> <p>\u7ecf\u5178\u7684upcall\u673a\u5236\u4f7f\u7528\u57fa\u4e8e\u6587\u672c\u7684\u81ea\u5b9a\u4e49upcall\u673a\u5236\u4e0enfs-utils\u5305\u63d0\u4f9b\u7684\u540d\u4e3arpc.svcgssd\u7684\u81ea\u5b9a\u4e49\u5b88\u62a4\u8fdb\u7a0b\u8fdb\u884c\u901a\u4fe1\u3002</p> <p>This upcall mechanism has 2 limitations:</p> <p>\u8fd9\u79cd\u4e0a\u8c03\u673a\u5236\u6709\u4e24\u4e2a\u9650\u5236\uff1a</p> <ol> <li>It can handle tokens that are no bigger than 2KiB</li> </ol> <p>In some Kerberos deployment GSSAPI tokens can be quite big, up and beyond 64KiB in size due to various authorization extensions attacked to the Kerberos tickets, that needs to be sent through the GSS layer in order to perform context establishment.</p> <p>\u5728\u67d0\u4e9bKerberos\u90e8\u7f72\u4e2d\uff0cGSSAPI\u4ee4\u724c\u53ef\u80fd\u975e\u5e38\u5927\uff0c\u5927\u5c0f\u8d85\u8fc764KiB\uff0c\u8fd9\u662f\u7531\u4e8eKerberos\u7968\u8bc1\u53d7\u5230\u5404\u79cd\u6388\u6743\u6269\u5c55\u7684\u653b\u51fb\uff0c\u9700\u8981\u901a\u8fc7GSS\u5c42\u53d1\u9001\u624d\u80fd\u6267\u884c\u4e0a\u4e0b\u6587\u5efa\u7acb\u3002</p> <p>B) It does not properly handle creds where the user is member of more than a few thousand groups (the current hard limit in the kernel is 65K groups) due to limitation on the size of the buffer that can be send back to the kernel (4KiB).</p> <p>B\uff09 \u7531\u4e8e\u53ef\u4ee5\u53d1\u9001\u56de\u5185\u6838\u7684\u7f13\u51b2\u533a\u5927\u5c0f\uff084KiB\uff09\u7684\u9650\u5236\uff0c\u5f53\u7528\u6237\u662f\u6570\u5343\u4e2a\u4ee5\u4e0a\u7ec4\u7684\u6210\u5458\u65f6\uff08\u5185\u6838\u4e2d\u5f53\u524d\u7684\u786c\u9650\u5236\u662f65K\u7ec4\uff09\uff0c\u5b83\u65e0\u6cd5\u6b63\u786e\u5904\u7406cred\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#63-nfs-server-new-rpc-upcall-mechanism","title":"6.3 NFS Server New RPC Upcall Mechanism","text":"<p>The newer upcall mechanism uses RPC over a unix socket to a daemon called gss-proxy, implemented by a userspace program called Gssproxy.</p> <p>\u66f4\u65b0\u7684upcall\u673a\u5236\u901a\u8fc7unix\u5957\u63a5\u5b57\u4f7f\u7528RPC\u8fde\u63a5\u5230\u4e00\u4e2a\u540d\u4e3agss-proxy\u7684\u5b88\u62a4\u8fdb\u7a0b\uff0c\u8be5\u5b88\u62a4\u8fdb\u7a0b\u7531\u540d\u4e3aGssproxy\u7684\u7528\u6237\u7a7a\u95f4\u7a0b\u5e8f\u5b9e\u73b0\u3002</p> <p>The gss_proxy RPC protocol is currently documented here.</p> <p>gss_proxy RPC\u534f\u8bae\u76ee\u524d\u5df2\u8bb0\u5f55\u6b64\u5904.</p> <p>This upcall mechanism uses the kernel rpc client and connects to the gssproxy userspace program over a regular unix socket. The gssproxy protocol does not suffer from the size limitations of the legacy protocol.</p> <p>\u6b64\u4e0a\u8c03\u673a\u5236\u4f7f\u7528\u5185\u6838rpc\u5ba2\u6237\u7aef\uff0c\u5e76\u901a\u8fc7\u5e38\u89c4unix\u5957\u63a5\u5b57\u8fde\u63a5\u5230gssproxy\u7528\u6237\u7a7a\u95f4\u7a0b\u5e8f\u3002gssproxy\u534f\u8bae\u4e0d\u53d7\u4f20\u7edf\u534f\u8bae\u7684\u5927\u5c0f\u9650\u5236\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#64-negotiating-upcall-mechanisms","title":"6.4 Negotiating Upcall Mechanisms","text":"<p>To provide backward compatibility, the kernel defaults to using the legacy mechanism. To switch to the new mechanism, gss-proxy must bind to /var/run/gssproxy.sock and then write \u201c1\u201d to /proc/net/rpc/use-gss-proxy. If gss-proxy dies, it must repeat both steps.</p> <p>\u4e3a\u4e86\u63d0\u4f9b\u5411\u540e\u517c\u5bb9\u6027\uff0c\u5185\u6838\u9ed8\u8ba4\u4f7f\u7528\u4f20\u7edf\u673a\u5236\u3002\u8981\u5207\u6362\u5230\u65b0\u673a\u5236\uff0cgss-proxy\u5fc5\u987b\u7ed1\u5b9a\u5230/var/run/gsproxy.sock\uff0c\u7136\u540e\u5c06\u201c1\u201d\u5199\u5165/proc/net/rpc/use-gss-proxy\u3002\u5982\u679cgss\u4ee3\u7406\u5931\u6548\uff0c\u5b83\u5fc5\u987b\u91cd\u590d\u8fd9\u4e24\u4e2a\u6b65\u9aa4\u3002</p> <p>Once the upcall mechanism is chosen, it cannot be changed. To prevent locking into the legacy mechanisms, the above steps must be performed before starting nfsd. Whoever starts nfsd can guarantee this by reading from /proc/net/rpc/use-gss-proxy and checking that it contains a \u201c1\u201d\u2013the read will block until gss-proxy has done its write to the file.</p> <p>\u4e00\u65e6\u9009\u62e9\u4e86\u4e0a\u8c03\u673a\u5236\uff0c\u5c31\u4e0d\u80fd\u66f4\u6539\u3002\u4e3a\u4e86\u9632\u6b62\u9501\u5b9a\u5230\u9057\u7559\u673a\u5236\u4e2d\uff0c\u5fc5\u987b\u5728\u542f\u52a8nfsd\u4e4b\u524d\u6267\u884c\u4ee5\u4e0a\u6b65\u9aa4\u3002\u65e0\u8bba\u8c01\u542f\u52a8nfsd\uff0c\u90fd\u53ef\u4ee5\u901a\u8fc7\u8bfb\u53d6/proc/net/rpc/use gss\u4ee3\u7406\u5e76\u68c0\u67e5\u5b83\u662f\u5426\u5305\u542b\u201c1\u201d\u6765\u4fdd\u8bc1\u8fd9\u4e00\u70b9\u2014\u2014\u5728gss\u4ee3\u7406\u5b8c\u6210\u5bf9\u6587\u4ef6\u7684\u5199\u5165\u4e4b\u524d\uff0c\u8bfb\u53d6\u5c06\u88ab\u963b\u6b62\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#7-nfsv41-server-implementation","title":"7 NFSv4.1 Server Implementation","text":"<p>Server support for minorversion 1 can be controlled using the /proc/fs/nfsd/versions control file. The string output returned by reading this file will contain either \u201c+4.1\u201d or \u201c-4.1\u201d correspondingly.</p> <p>\u53ef\u4ee5\u4f7f\u7528/proc/fs/nfsd/versions\u63a7\u5236\u6587\u4ef6\u6765\u63a7\u5236\u5bf9minorversion 1\u7684\u670d\u52a1\u5668\u652f\u6301\u3002\u8bfb\u53d6\u6b64\u6587\u4ef6\u8fd4\u56de\u7684\u5b57\u7b26\u4e32\u8f93\u51fa\u5c06\u76f8\u5e94\u5730\u5305\u542b\u201c+4.1\u201d\u6216\u201c-4.1\u201d\u3002</p> <p>Currently, server support for minorversion 1 is enabled by default. It can be disabled at run time by writing the string \u201c-4.1\u201d to the /proc/fs/nfsd/versions control file. Note that to write this control file, the nfsd service must be taken down. You can use rpc.nfsd for this; see rpc.nfsd(8).</p> <p>\u76ee\u524d\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5df2\u542f\u7528minorversion 1\u7684\u670d\u52a1\u5668\u652f\u6301\u3002\u901a\u8fc7\u5c06\u5b57\u7b26\u4e32\u201c-4.1\u201d\u5199\u5165/proc/fs/nfsd/versions\u63a7\u5236\u6587\u4ef6\uff0c\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u7981\u7528\u5b83\u3002\u6ce8\u610f\uff0c\u8981\u5199\u5165\u6b64\u63a7\u5236\u6587\u4ef6\uff0c\u5fc5\u987b\u5173\u95ednfsd\u670d\u52a1\u3002\u60a8\u53ef\u4ee5\u4e3a\u6b64\u4f7f\u7528rpc.nfsd\uff1b\u8bf7\u53c2\u9605rpc.nfsd\uff088\uff09\u3002</p> <p>(Warning: older servers will interpret \u201c+4.1\u201d and \u201c-4.1\u201d as \u201c+4\u201d and \u201c-4\u201d, respectively. Therefore, code meant to work on both new and old kernels must turn 4.1 on or off before turning support for version 4 on or off; rpc.nfsd does this correctly.)</p> <p>\uff08\u8b66\u544a\uff1a\u8f83\u65e7\u7684\u670d\u52a1\u5668\u4f1a\u5c06\u201c+4.1\u201d\u548c\u201c-4.1\u201d\u5206\u522b\u89e3\u91ca\u4e3a\u201c+4\u201d\u548c\u201c-4\u201d\u3002\u56e0\u6b64\uff0c\u7528\u4e8e\u65b0\u5185\u6838\u548c\u65e7\u5185\u6838\u7684\u4ee3\u7801\u5fc5\u987b\u5148\u6253\u5f00\u6216\u5173\u95ed4.1\uff0c\u7136\u540e\u624d\u80fd\u6253\u5f00\u6216\u5173\u95ed\u5bf9\u7248\u672c4\u7684\u652f\u6301\uff1brpc.nfsd\u4f1a\u6b63\u786e\u6267\u884c\u6b64\u64cd\u4f5c\u3002\uff09</p> <p>The NFSv4 minorversion 1 (NFSv4.1) implementation in nfsd is based on RFC 5661.</p> <p>nfsd\u4e2d\u7684NFSv4 minorversion 1\uff08NFSv4.1\uff09\u5b9e\u73b0\u57fa\u4e8eRFC 5661\u3002</p> <p>From the many new features in NFSv4.1 the current implementation focuses on the mandatory-to-implement NFSv4.1 Sessions, providing \u201cexactly once\u201d semantics and better control and throttling of the resources allocated for each client.</p> <p>\u4eceNFSv4.1\u4e2d\u7684\u8bb8\u591a\u65b0\u7279\u6027\u6765\u770b\uff0c\u5f53\u524d\u7684\u5b9e\u73b0\u4fa7\u91cd\u4e8e\u5f3a\u5236\u5b9e\u73b0NFSv4.1\u4f1a\u8bdd\uff0c\u63d0\u4f9b\u201c\u7cbe\u786e\u4e00\u6b21\u201d\u8bed\u4e49\uff0c\u5e76\u66f4\u597d\u5730\u63a7\u5236\u548c\u9650\u5236\u4e3a\u6bcf\u4e2a\u5ba2\u6237\u7aef\u5206\u914d\u7684\u8d44\u6e90\u3002</p> <p>The table below, taken from the NFSv4.1 document, lists the operations that are mandatory to implement (REQ), optional (OPT), and NFSv4.0 operations that are required not to implement (MNI) in minor version 1. The first column indicates the operations that are not supported yet by the linux server implementation.</p> <p>\u4e0b\u8868\u6458\u81eaNFSv4.1\u6587\u4ef6\uff0c\u5217\u51fa\u4e86\u6b21\u8981\u7248\u672c1\u4e2d\u5f3a\u5236\u5b9e\u65bd\uff08REQ\uff09\u3001\u53ef\u9009\uff08OPT\uff09\u548c\u4e0d\u5f3a\u5236\u5b9e\u65bd\uff08MNI\uff09\u7684NFSv4.0\u64cd\u4f5c\u3002\u7b2c\u4e00\u5217\u8868\u793alinux\u670d\u52a1\u5668\u5b9e\u73b0\u5c1a\u4e0d\u652f\u6301\u7684\u64cd\u4f5c\u3002</p> <p>The OPTIONAL features identified and their abbreviations are as follows:</p> <p>\u8bc6\u522b\u7684\u53ef\u9009\u529f\u80fd\u53ca\u5176\u7f29\u5199\u5982\u4e0b\uff1a</p> <ul> <li>pNFS Parallel NFS\u5e76\u884cNFS</li> <li>FDELG File Delegations\u6587\u4ef6\u59d4\u6d3e</li> <li>DDELG Directory Delegations\u76ee\u5f55\u59d4\u6d3e</li> </ul> <p>The following abbreviations indicate the linux server implementation status.</p> <p>\u4ee5\u4e0b\u7f29\u5199\u8868\u793alinux\u670d\u52a1\u5668\u5b9e\u73b0\u72b6\u6001\u3002</p> <ul> <li>I Implemented NFSv4.1 operations.\u5b9e\u65bdNFSv4.1\u64cd\u4f5c\u3002</li> <li>NS Not Supported.\u4e0d\u652f\u6301\u3002</li> <li>NS* Unimplemented optional feature.\u672a\u5b9e\u73b0\u7684\u53ef\u9009\u529f\u80fd\u3002</li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#71-operations","title":"7.1 Operations","text":"Implementation status Operation REQ,REC, OPT or NMI Feature (REQ, REC or OPT) Definition ACCESS REQ Section 18.1 l BACKCHANNEL_CTL REQ Section 18.33 I BIND_CONN_TO_SESSION REQ Section 18.34 CLOSE REQ Section 18.2 COMMIT REQ Section 18.3 CREATE REQ Section 18.4 I CREATE_SESSION REQ Section 18.36 NS* DELEGPURGE OPT FDELG (REQ) Section 18.5 DELEGRETURN OPT FDELG, Section 18.6 DDELG, pNFS (REQ) I DESTROY_CLIENTID REQ Section 18.50 I DESTROY_SESSION REQ Section 18.37 I EXCHANGE_ID REQ Section 18.35 I FREE_STATEID REQ Section 18.38 GETATTR REQ Section 18.7 I GETDEVICEINFO OPT pNFS (REQ) Section 18.40 NS* GETDEVICELIST OPT pNFS (OPT) Section 18.41 GETFH REQ Section 18.8 NS* GET_DIR_DELEGATION OPT DDELG (REQ) Section 18.39 I LAYOUTCOMMIT OPT pNFS (REQ) Section 18.42 I LAYOUTGET OPT pNFS (REQ) Section 18.43 I LAYOUTRETURN OPT pNFS (REQ) Section 18.44 LINK OPT Section 18.9 LOCK REQ Section 18.10 LOCKT REQ Section 18.11 LOCKU REQ Section 18.12 LOOKUP REQ Section 18.13 LOOKUPP REQ Section 18.14 NVERIFY REQ Section 18.15 OPEN REQ Section 18.16 NS* OPENATTR OPT Section 18.17 OPEN_CONFIRM MNI N/A OPEN_DOWNGRADE REQ Section 18.18 PUTFH REQ Section 18.19 PUTPUBFH REQ Section 18.20 PUTROOTFH REQ Section 18.21 READ REQ Section 18.22 READDIR REQ Section 18.23 READLINK OPT Section 18.24 RECLAIM_COMPLETE REQ Section 18.51 RELEASE_LOCKOWNER MNI N/A REMOVE REQ Section 18.25 RENAME REQ Section 18.26 RENEW MNI N/A RESTOREFH REQ Section 18.27 SAVEFH REQ Section 18.28 SECINFO REQ Section 18.29 I SECINFO_NO_NAME REC pNFS files Section 18.45, layout (REQ) Section 13.12 I SEQUENCE REQ Section 18.46 SETATTR REQ Section 18.30 SETCLIENTID MNI N/A SETCLIENTID_CONFIRM MNI N/A NS SET_SSV REQ Section 18.47 I TEST_STATEID REQ Section 18.48 VERIFY REQ Section 18.31 NS* WANT_DELEGATION OPT FDELG (OPT) Section 18.49 WRITE REQ Section 18.32"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#72-callback-operations","title":"7.2 Callback Operations","text":"Implementation status Operation REQ,REC, OPT or NMI Feature (REQ, REC or OPT) Definition CB_GETATTR OPT FDELG (REQ) Section 20.1 I CB_LAYOUTRECALL OPT pNFS (REQ) Section 20.3 NS* CB_NOTIFY OPT DDELG (REQ) Section 20.4 NS* CB_NOTIFY_DEVICEID OPT pNFS (OPT) Section 20.12 NS* CB_NOTIFY_LOCK OPT Section 20.11 NS* CB_PUSH_DELEG OPT FDELG (OPT) Section 20.5 CB_RECALL OPT FDELG, Section 20.2 DDELG, pNFS (REQ) NS* CB_RECALL_ANY OPT FDELG, Section 20.6 DDELG, pNFS (REQ) NS CB_RECALL_SLOT REQ Section 20.8 NS* CB_RECALLABLE_OBJ_AVAIL OPT DDELG, pNFS Section 20.7 (REQ) I CB_SEQUENCE OPT FDELG, Section 20.9 DDELG, pNFS (REQ) NS* CB_WANTS_CANCELLED OPT FDELG, Section 20.10 DDELG, pNFS (REQ)"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#73-implementation-notes","title":"7.3 Implementation notes","text":"<ul> <li>SSV:</li> </ul> <p>The spec claims this is mandatory, but we don\u2019t actually know of any implementations, so we\u2019re ignoring it for now. The server returns NFS4ERR_ENCR_ALG_UNSUPP on EXCHANGE_ID, which should be future-proof.</p> <p>\u89c4\u8303\u58f0\u79f0\u8fd9\u662f\u5f3a\u5236\u6027\u7684\uff0c\u4f46\u6211\u4eec\u5b9e\u9645\u4e0a\u4e0d\u77e5\u9053\u4efb\u4f55\u5b9e\u73b0\uff0c\u6240\u4ee5\u6211\u4eec\u73b0\u5728\u5ffd\u7565\u4e86\u5b83\u3002\u670d\u52a1\u5668\u5728EXCHANGE_ID\u4e0a\u8fd4\u56deNFS4ERR_ENCR_ALG_UNSUPP\uff0c\u8fd9\u5e94\u8be5\u662f\u5c06\u6765\u7684\u8bc1\u660e\u3002</p> <ul> <li>GSS on the backchannel:</li> </ul> <p>Again, theoretically required but not widely implemented (in particular, the current Linux client doesn\u2019t request it). We return NFS4ERR_ENCR_ALG_UNSUPP on CREATE_SESSION.</p> <p>\u540c\u6837\uff0c\u7406\u8bba\u4e0a\u9700\u8981\uff0c\u4f46\u6ca1\u6709\u5e7f\u6cdb\u5b9e\u73b0\uff08\u7279\u522b\u662f\uff0c\u5f53\u524d\u7684Linux\u5ba2\u6237\u673a\u4e0d\u9700\u8981\uff09\u3002\u6211\u4eec\u5728CREATE_SSESSION\u4e0a\u8fd4\u56deNFS4ERR_ENCR_ALG_UNSUPP\u3002</p> <ul> <li>DELEGPURGE:</li> </ul> <p>mandatory only for servers that support CLAIM_DELEGATE_PREV and/or CLAIM_DELEG_PREV_FH (which allows clients to keep delegations that persist across client reboots). Thus we need not implement this for now.</p> <p>\u4ec5\u5bf9\u4e8e\u652f\u6301CLAIM_DELEGATE_REV\u548c/\u6216CLAIM_DELegE_REV_FH\uff08\u5141\u8bb8\u5ba2\u6237\u7aef\u4fdd\u7559\u5728\u5ba2\u6237\u7aef\u91cd\u65b0\u542f\u52a8\u671f\u95f4\u6301\u7eed\u5b58\u5728\u7684\u59d4\u6d3e\uff09\u7684\u670d\u52a1\u5668\u662f\u5fc5\u9700\u7684\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u73b0\u5728\u4e0d\u9700\u8981\u5b9e\u65bd\u8fd9\u4e00\u70b9\u3002</p> <ul> <li>EXCHANGE_ID:</li> </ul> <p>implementation ids are ignored</p> <p>\u5ffd\u7565\u5b9e\u73b0ID</p> <ul> <li>CREATE_SESSION:</li> </ul> <p>backchannel attributes are ignored</p> <p>\u53cd\u5411\u901a\u9053\u5c5e\u6027\u88ab\u5ffd\u7565</p> <ul> <li>SEQUENCE:</li> </ul> <p>no support for dynamic slot table renegotiation (optional)</p> <p>\u4e0d\u652f\u6301\u52a8\u6001\u69fd\u8868\u91cd\u65b0\u534f\u5546\uff08\u53ef\u9009\uff09</p> <ul> <li>Nonstandard compound limitations:</li> </ul> <p>No support for a sessions fore channel RPC compound that requires both a ca_maxrequestsize request and a ca_maxresponsesize reply, so we may fail to live up to the promise we made in CREATE_SESSION fore channel negotiation.</p> <p>\u4e0d\u652f\u6301\u540c\u65f6\u9700\u8981ca_maxrequestsize\u8bf7\u6c42\u548cca_maxrresponsesize\u56de\u590d\u7684\u4f1a\u8bdd\u524d\u901a\u9053RPC\u590d\u5408\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u80fd\u65e0\u6cd5\u5151\u73b0\u5728CREATE_SESESSION\u524d\u901a\u9053\u534f\u5546\u4e2d\u6240\u505a\u7684\u627f\u8bfa\u3002</p> <p>See also http://wiki.linux-nfs.org/wiki/index.php/Server_4.0_and_4.1_issues.</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#8-kernel-nfs-server-statistics","title":"8 Kernel NFS Server Statistics","text":"<ul> <li>Authors</li> </ul> <p>Greg Banks &lt;gnb@sgi.com&gt; - 26 Mar 2009</p> <p>This document describes the format and semantics of the statistics which the kernel NFS server makes available to userspace. These statistics are available in several text form pseudo files, each of which is described separately below.</p> <p>\u672c\u6587\u6863\u63cf\u8ff0\u4e86\u5185\u6838NFS\u670d\u52a1\u5668\u5411\u7528\u6237\u7a7a\u95f4\u63d0\u4f9b\u7684\u7edf\u8ba1\u4fe1\u606f\u7684\u683c\u5f0f\u548c\u8bed\u4e49\u3002\u8fd9\u4e9b\u7edf\u8ba1\u4fe1\u606f\u53ef\u4ee5\u5728\u51e0\u4e2a\u6587\u672c\u5f62\u5f0f\u7684\u4f2a\u6587\u4ef6\u4e2d\u627e\u5230\uff0c\u4e0b\u9762\u5c06\u5206\u522b\u63cf\u8ff0\u6bcf\u4e2a\u4f2a\u6587\u4ef6\u3002</p> <p>In most cases you don\u2019t need to know these formats, as the nfsstat(8) program from the nfs-utils distribution provides a helpful command-line interface for extracting and printing them.</p> <p>\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u60a8\u4e0d\u9700\u8981\u77e5\u9053\u8fd9\u4e9b\u683c\u5f0f\uff0c\u56e0\u4e3anfs-utils\u53d1\u884c\u7248\u4e2d\u7684nfsstat\uff088\uff09\u7a0b\u5e8f\u4e3a\u63d0\u53d6\u548c\u6253\u5370\u8fd9\u4e9b\u683c\u5f0f\u63d0\u4f9b\u4e86\u4e00\u4e2a\u6709\u7528\u7684\u547d\u4ee4\u884c\u754c\u9762\u3002</p> <p>All the files described here are formatted as a sequence of text lines, separated by newline \u2018n\u2019 characters. Lines beginning with a hash \u2018#\u2019 character are comments intended for humans and should be ignored by parsing routines. All other lines contain a sequence of fields separated by whitespace.</p> <p>\u8fd9\u91cc\u63cf\u8ff0\u7684\u6240\u6709\u6587\u4ef6\u90fd\u88ab\u683c\u5f0f\u5316\u4e3a\u4e00\u7cfb\u5217\u6587\u672c\u884c\uff0c\u7528\u6362\u884c\u7b26\u201cn\u201d\u5206\u9694\u3002\u4ee5\u54c8\u5e0c\u201c#\u201d\u5b57\u7b26\u5f00\u5934\u7684\u884c\u662f\u9488\u5bf9\u4eba\u7c7b\u7684\u6ce8\u91ca\uff0c\u89e3\u6790\u4f8b\u7a0b\u5e94\u5ffd\u7565\u8fd9\u4e9b\u6ce8\u91ca\u3002\u6240\u6709\u5176\u4ed6\u884c\u90fd\u5305\u542b\u4e00\u7cfb\u5217\u7528\u7a7a\u683c\u5206\u9694\u7684\u5b57\u6bb5\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#81-procfsnfsdpool_stats","title":"8.1 /proc/fs/nfsd/pool_stats","text":"<p>This file is available in kernels from 2.6.30 onwards, if the /proc/fs/nfsd filesystem is mounted (it almost always should be).</p> <p>\u4ece2.6.30\u5f00\u59cb\uff0c\u5982\u679c\u5b89\u88c5\u4e86/proc/fs/nfsd\u6587\u4ef6\u7cfb\u7edf\uff0c\u8be5\u6587\u4ef6\u5728\u5185\u6838\u4e2d\u53ef\u7528\uff08\u51e0\u4e4e\u603b\u662f\u8fd9\u6837\uff09\u3002</p> <p>The first line is a comment which describes the fields present in all the other lines. The other lines present the following data as a sequence of unsigned decimal numeric fields. One line is shown for each NFS thread pool.</p> <p>\u7b2c\u4e00\u884c\u662f\u4e00\u6761\u6ce8\u91ca\uff0c\u63cf\u8ff0\u4e86\u6240\u6709\u5176\u4ed6\u884c\u4e2d\u7684\u5b57\u6bb5\u3002\u5176\u4ed6\u884c\u4ee5\u65e0\u7b26\u53f7\u5341\u8fdb\u5236\u6570\u5b57\u5b57\u6bb5\u5e8f\u5217\u5f62\u5f0f\u663e\u793a\u4ee5\u4e0b\u6570\u636e\u3002\u6bcf\u4e2aNFS\u7ebf\u7a0b\u6c60\u663e\u793a\u4e00\u884c\u3002</p> <p>All counters are 64 bits wide and wrap naturally. There is no way to zero these counters, instead applications should do their own rate conversion.</p> <p>\u6240\u6709\u8ba1\u6570\u5668\u90fd\u662f64\u4f4d\u5bbd\uff0c\u81ea\u7136\u6362\u884c\u3002\u6ca1\u6709\u529e\u6cd5\u5c06\u8fd9\u4e9b\u8ba1\u6570\u5668\u5f52\u96f6\uff0c\u5e94\u7528\u7a0b\u5e8f\u5e94\u8be5\u81ea\u5df1\u8fdb\u884c\u901f\u7387\u8f6c\u6362\u3002</p> <ul> <li>pool</li> </ul> <p>The id number of the NFS thread pool to which this line applies. This number does not change.Thread pool ids are a contiguous set of small integers starting at zero. The maximum value depends on the thread pool mode, but currently cannot be larger than the number of CPUs in the system. Note that in the default case there will be a single thread pool which contains all the nfsd threads and all the CPUs in the system, and thus this file will have a single line with a pool id of \u201c0\u201d.</p> <p>\u5e94\u7528\u6b64\u884c\u7684NFS\u7ebf\u7a0b\u6c60\u7684id\u53f7\u3002\u8fd9\u4e2a\u6570\u5b57\u4e0d\u4f1a\u6539\u53d8\u3002\u7ebf\u7a0b\u6c60ID\u662f\u4e00\u7ec4\u8fde\u7eed\u7684\u5c0f\u6574\u6570\uff0c\u4ece\u96f6\u5f00\u59cb\u3002\u6700\u5927\u503c\u53d6\u51b3\u4e8e\u7ebf\u7a0b\u6c60\u6a21\u5f0f\uff0c\u4f46\u5f53\u524d\u4e0d\u80fd\u5927\u4e8e\u7cfb\u7edf\u4e2d\u7684CPU\u6570\u91cf\u3002\u6ce8\u610f\uff0c\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5c06\u6709\u4e00\u4e2a\u5305\u542b\u7cfb\u7edf\u4e2d\u6240\u6709nfsd\u7ebf\u7a0b\u548c\u6240\u6709CPU\u7684\u5355\u7ebf\u7a0b\u6c60\uff0c\u56e0\u6b64\u8be5\u6587\u4ef6\u5c06\u6709\u4e00\u884c\u6c60id\u4e3a\u201c0\u201d\u3002</p> <ul> <li>packets-arrived</li> </ul> <p>Counts how many NFS packets have arrived. More precisely, this is the number of times that the network stack has notified the sunrpc server layer that new data may be available on a transport (e.g. an NFS or UDP socket or an NFS/RDMA endpoint).Depending on the NFS workload patterns and various network stack effects (such as Large Receive Offload) which can combine packets on the wire, this may be either more or less than the number of NFS calls received (which statistic is available elsewhere). However this is a more accurate and less workload-dependent measure of how much CPU load is being placed on the sunrpc server layer due to NFS network traffic.</p> <p>\u7edf\u8ba1\u5df2\u5230\u8fbe\u7684NFS\u6570\u636e\u5305\u6570\u3002\u66f4\u51c6\u786e\u5730\u8bf4\uff0c\u8fd9\u662f\u7f51\u7edc\u5806\u6808\u901a\u77e5sunrpc\u670d\u52a1\u5668\u5c42\u4f20\u8f93\uff08\u4f8b\u5982NFS\u6216UDP\u5957\u63a5\u5b57\u6216NFS/RDMA\u7aef\u70b9\uff09\u4e0a\u53ef\u80fd\u6709\u65b0\u6570\u636e\u7684\u6b21\u6570\uff0c\u8fd9\u53ef\u80fd\u5927\u4e8e\u6216\u5c0f\u4e8e\u6240\u63a5\u6536\u7684NFS\u8c03\u7528\u7684\u6570\u91cf\uff08\u8be5\u7edf\u8ba1\u6570\u636e\u5728\u5176\u4ed6\u5730\u65b9\u53ef\u7528\uff09\u3002\u7136\u800c\uff0c\u8fd9\u662f\u4e00\u4e2a\u66f4\u51c6\u786e\u3001\u66f4\u5c11\u4f9d\u8d56\u4e8e\u5de5\u4f5c\u8d1f\u8f7d\u7684\u5ea6\u91cf\uff0c\u53ef\u4ee5\u8861\u91cf\u7531\u4e8eNFS\u7f51\u7edc\u6d41\u91cf\u800c\u5728sunrpc\u670d\u52a1\u5668\u5c42\u4e0a\u653e\u7f6e\u4e86\u591a\u5c11CPU\u8d1f\u8f7d\u3002</p> <ul> <li>sockets-enqueued</li> </ul> <p>Counts how many times an NFS transport is enqueued to wait for an nfsd thread to service it, i.e. no nfsd thread was considered available.The circumstance this statistic tracks indicates that there was NFS network-facing work to be done but it couldn\u2019t be done immediately, thus introducing a small delay in servicing NFS calls. The ideal rate of change for this counter is zero; significantly non-zero values may indicate a performance limitation.This can happen because there are too few nfsd threads in the thread pool for the NFS workload (the workload is thread-limited), in which case configuring more nfsd threads will probably improve the performance of the NFS workload.</p> <p>\u7edf\u8ba1NFS\u4f20\u8f93\u6392\u961f\u7b49\u5f85nfsd\u7ebf\u7a0b\u4e3a\u5176\u63d0\u4f9b\u670d\u52a1\u7684\u6b21\u6570\uff0c\u5373\u6ca1\u6709nfsd\u7ebf\u7a0b\u53ef\u7528\u3002\u6b64\u7edf\u8ba1\u4fe1\u606f\u8ddf\u8e2a\u7684\u60c5\u51b5\u8868\u660e\uff0c\u9700\u8981\u5b8c\u6210\u9762\u5411NFS\u7f51\u7edc\u7684\u5de5\u4f5c\uff0c\u4f46\u65e0\u6cd5\u7acb\u5373\u5b8c\u6210\uff0c\u56e0\u6b64\u5728\u4e3aNFS\u8c03\u7528\u63d0\u4f9b\u670d\u52a1\u65f6\u4f1a\u6709\u4e00\u70b9\u5ef6\u8fdf\u3002\u8be5\u8ba1\u6570\u5668\u7684\u7406\u60f3\u53d8\u5316\u7387\u4e3a\u96f6\uff1b\u663e\u8457\u975e\u96f6\u503c\u53ef\u80fd\u8868\u793a\u6027\u80fd\u9650\u5236\u3002\u8fd9\u53ef\u80fd\u662f\u56e0\u4e3aNFS\u5de5\u4f5c\u8d1f\u8f7d\u7684\u7ebf\u7a0b\u6c60\u4e2dnfsd\u7ebf\u7a0b\u592a\u5c11\uff08\u5de5\u4f5c\u8d1f\u8f7d\u53d7\u7ebf\u7a0b\u9650\u5236\uff09\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u914d\u7f6e\u66f4\u591anfsd\u7ebf\u7a0b\u53ef\u80fd\u4f1a\u63d0\u9ad8NFS\u5de5\u4f5c\u8d1f\u8f7d\u6027\u80fd\u3002</p> <ul> <li>threads-woken</li> </ul> <p>Counts how many times an idle nfsd thread is woken to try to receive some data from an NFS transport.This statistic tracks the circumstance where incoming network-facing NFS work is being handled quickly, which is a good thing. The ideal rate of change for this counter will be close to but less than the rate of change of the packets-arrived counter.</p> <p>\u7edf\u8ba1\u7a7a\u95f2nfsd\u7ebf\u7a0b\u88ab\u5524\u9192\u4ee5\u5c1d\u8bd5\u4eceNFS\u4f20\u8f93\u63a5\u6536\u67d0\u4e9b\u6570\u636e\u7684\u6b21\u6570\u3002\u6b64\u7edf\u8ba1\u4fe1\u606f\u8ddf\u8e2a\u5feb\u901f\u5904\u7406\u4f20\u5165\u7f51\u7edc\u7684NFS\u5de5\u4f5c\u7684\u60c5\u51b5\uff0c\u8fd9\u662f\u4e00\u4ef6\u597d\u4e8b\u3002\u6b64\u8ba1\u6570\u5668\u7684\u7406\u60f3\u53d8\u5316\u7387\u5c06\u63a5\u8fd1\u4f46\u5c0f\u4e8e\u6570\u636e\u5305\u5230\u8fbe\u8ba1\u6570\u5668\u7684\u53d8\u5316\u7387\u3002</p> <ul> <li>threads-timedout</li> </ul> <p>Counts how many times an nfsd thread triggered an idle timeout, i.e. was not woken to handle any incoming network packets for some time.This statistic counts a circumstance where there are more nfsd threads configured than can be used by the NFS workload. This is a clue that the number of nfsd threads can be reduced without affecting performance. Unfortunately, it\u2019s only a clue and not a strong indication, for a couple of reasons:Currently the rate at which the counter is incremented is quite slow; the idle timeout is 60 minutes. Unless the NFS workload remains constant for hours at a time, this counter is unlikely to be providing information that is still useful.It is usually a wise policy to provide some slack, i.e. configure a few more nfsds than are currently needed, to allow for future spikes in load.</p> <p>\u7edf\u8ba1nfsd\u7ebf\u7a0b\u89e6\u53d1\u7a7a\u95f2\u8d85\u65f6\u7684\u6b21\u6570\uff0c\u5373\u5728\u4e00\u6bb5\u65f6\u95f4\u5185\u672a\u88ab\u5524\u9192\u4ee5\u5904\u7406\u4efb\u4f55\u4f20\u5165\u7684\u7f51\u7edc\u6570\u636e\u5305\u3002\u6b64\u7edf\u8ba1\u4fe1\u606f\u7edf\u8ba1\u914d\u7f6e\u7684nfsd\u7ebf\u7a0b\u6570\u8d85\u8fc7NFS\u5de5\u4f5c\u8d1f\u8f7d\u53ef\u4f7f\u7528\u7684\u6570\u91cf\u7684\u60c5\u51b5\u3002\u8fd9\u8868\u660e\u53ef\u4ee5\u51cf\u5c11nfsd\u7ebf\u7a0b\u7684\u6570\u91cf\u800c\u4e0d\u5f71\u54cd\u6027\u80fd\u3002\u4e0d\u5e78\u7684\u662f\uff0c\u8fd9\u53ea\u662f\u4e00\u4e2a\u7ebf\u7d22\uff0c\u5e76\u4e0d\u662f\u4e00\u4e2a\u5f3a\u6709\u529b\u7684\u6307\u793a\uff0c\u539f\u56e0\u6709\u4e24\u4e2a\uff1a\u76ee\u524d\u8ba1\u6570\u5668\u7684\u9012\u589e\u901f\u5ea6\u76f8\u5f53\u7f13\u6162\uff1b\u7a7a\u95f2\u8d85\u65f6\u4e3a60\u5206\u949f\u3002\u9664\u975eNFS\u5de5\u4f5c\u8d1f\u8f7d\u4e00\u6b21\u4fdd\u6301\u6570\u5c0f\u65f6\u4e0d\u53d8\uff0c\u5426\u5219\u6b64\u8ba1\u6570\u5668\u4e0d\u592a\u53ef\u80fd\u63d0\u4f9b\u4ecd\u7136\u6709\u7528\u7684\u4fe1\u606f\u3002\u63d0\u4f9b\u4e00\u4e9b\u7a7a\u95f2\u65f6\u95f4\u901a\u5e38\u662f\u660e\u667a\u7684\u7b56\u7565\uff0c\u5373\u914d\u7f6e\u6bd4\u5f53\u524d\u9700\u8981\u7684\u66f4\u591a\u7684nfsd\uff0c\u4ee5\u5141\u8bb8\u5c06\u6765\u7684\u8d1f\u8f7d\u5cf0\u503c\u3002</p> <p>Note that incoming packets on NFS transports will be dealt with in one of three ways. An nfsd thread can be woken (threads-woken counts this case), or the transport can be enqueued for later attention (sockets-enqueued counts this case), or the packet can be temporarily deferred because the transport is currently being used by an nfsd thread. This last case is not very interesting and is not explicitly counted, but can be inferred from the other counters thus:</p> <p>\u8bf7\u6ce8\u610f\uff0cNFS\u4f20\u8f93\u4e0a\u7684\u4f20\u5165\u6570\u636e\u5305\u5c06\u901a\u8fc7\u4ee5\u4e0b\u4e09\u79cd\u65b9\u5f0f\u4e4b\u4e00\u8fdb\u884c\u5904\u7406\u3002nfsd\u7ebf\u7a0b\u53ef\u4ee5\u88ab\u5524\u9192\uff08\u8fd9\u79cd\u60c5\u51b5\u4e0b\u88ab\u5524\u9192\u7684\u7ebf\u7a0b\u6570\uff09\uff0c\u6216\u8005\u4f20\u8f93\u53ef\u4ee5\u88ab\u6392\u961f\u4ee5\u4f9b\u4ee5\u540e\u6ce8\u610f\uff08\u8fd9\u79cd\u60c5\u51b5\u4e2d\u88ab\u6392\u961f\u7684\u5957\u63a5\u5b57\u6570\uff09\uff0c\u6216\u6570\u636e\u5305\u53ef\u4ee5\u88ab\u6682\u65f6\u5ef6\u8fdf\uff0c\u56e0\u4e3a\u4f20\u8f93\u5f53\u524d\u6b63\u88abnfsd\u7ebf\u7a0b\u4f7f\u7528\u3002\u6700\u540e\u4e00\u79cd\u60c5\u51b5\u4e0d\u662f\u5f88\u6709\u8da3\uff0c\u4e5f\u6ca1\u6709\u660e\u786e\u8ba1\u7b97\uff0c\u4f46\u53ef\u4ee5\u4ece\u5176\u4ed6\u8ba1\u6570\u5668\u4e2d\u63a8\u65ad\u51fa\uff1a</p> <pre><code>packets-deferred = packets-arrived - ( sockets-enqueued + threads-woken )\n</code></pre>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#82-more","title":"8.2 More","text":"<p>Descriptions of the other statistics file should go here.</p> <p>\u6b64\u5904\u5e94\u663e\u793a\u5176\u4ed6\u7edf\u8ba1\u6587\u4ef6\u7684\u8bf4\u660e\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs/","title":"nfs","text":"<ul> <li>\u53c2\u80031</li> <li>\u53c2\u80032</li> <li>\u53c2\u80033</li> <li>\u53c2\u80034</li> <li>NFS \u67b6\u6784 <p>\u4ee5\u4e0b\u6559\u7a0b\u4f7f\u7528\u7684 linux \u73af\u5883\u4e3a <code>Linux rocky 5.14.0-70.13.1.el9_0.x86_64</code></p> </li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs/#1","title":"1 \u5b89\u88c5","text":"<pre><code>- \u670d\u52a1\u7aef\u3001\u5ba2\u6237\u7aef\u5747\u5b89\u88c5 `nfs-utils` \u548c `rpcbind` \u5de5\u5177\n- \u670d\u52a1\u7aef\u5148\u542f\u52a8 rpc \u670d\u52a1\uff0c\u518d\u542f\u52a8 nfs \u670d\u52a1\n- \u5ba2\u6237\u7aef\u542f\u52a8 rpc \u670d\u52a1\n</code></pre> <ol> <li>\u5b89\u88c5 nfs \u670d\u52a1\uff1a <code>dnf install nfs-utils</code> \uff0c\u4f1a\u88c5\u4e00\u4e9b\u4f9d\u8d56\uff0c\u5305\u62ec rpcbind \u670d\u52a1\uff1a</li> <li>\u542f\u52a8 nfs \u670d\u52a1\uff1a<code>systemctl start nfs-server</code>\uff0c\u540c\u65f6\u4f1a\u5c06 rpcbind \u670d\u52a1\u542f\u52a8\uff08\u5176\u5b83\u5185\u6838\u53ef\u80fd\u662fnfs\uff09</li> <li>\u68c0\u6d4b nfs \u670d\u52a1\u8fd0\u884c\u60c5\u51b5\uff1a<code>rpcinfo -p</code></li> </ol>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs/#2","title":"2 \u6302\u8f7d","text":"<p>https://www.cnblogs.com/yanling-coder/p/13028552.html 1. <code>-t nfs</code> \uff1a\u6307\u5b9a nfs\uff0c\u6216\u8005\u76f4\u63a5 <code>-t nfs4</code>, <code>-o</code> \u6307\u5b9a\u53c2\u6570\uff0c<code>vers=n</code> \u6307\u5b9a nfs \u7248\u672c\u53f7\u3002</p> <pre><code>mount -t nfs -o vers=3 127.0.0.1:/tmp/nfs1 /tmp/cli1\n</code></pre>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs/#21-nfs","title":"2.1 NFS \u5ba2\u6237\u7aef\u6302\u8f7d\u53c2\u6570","text":"<ul> <li>\u6302\u8f7d\u65f6\u6700\u597d\u9009\u62e9 hard +intr \uff1a\u4e3a\u4e86\u9632\u6b62\u6574\u4e2a\u7cfb\u7edf\u88ab NFS \u9501\u6b7b\uff0c\u56e0\u4e3a hard \u8fde\u63a5\u7684\u65f6\u5019\uff0c\u5373\u4f7f\u670d\u52a1\u7aef NFS \u6ca1\u8d77\u6765\uff0c\u5ba2\u6237\u7aef\u4e5f\u662f\u4e00\u76f4\u5728\u5c1d\u8bd5\u8fdb\u884c\u8fde\u63a5\uff0c\u5bfc\u81f4 df -h \u65e0\u8f93\u51fa\uff0c\u5982\u679c\u6dfb\u52a0\u4e86 intr, \u53ef\u4ee5\u6309 ctrl+c \u4e2d\u65ad</li> <li><code>rsize</code> \u548c <code>wsize</code> \uff1a\u6027\u80fd\u4f18\u5316\u53c2\u6570\uff0c\u8fd9\u4e2a\u8bbe\u7f6e\u53ef\u4ee5\u5f71\u54cd\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u4f20\u8f93\u6570\u636e\u7684\u7f13\u51b2\u5b58\u50a8\u91cf\uff0c\u4e00\u822c\u6765\u8bf4\u5728\u5c40\u57df\u7f51\u5185\uff0c\u5e76\u4e14\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u90fd\u8db3\u591f\u5927\u5185\u5b58\u53ef\u4ee5\u8bbe\u7f6e\u5927\u4e00\u70b9\uff0c\u6bd4\u5982 65535 \u6216\u8005 131072\uff0c\u63d0\u5347\u7f13\u51b2\u533a\u53ef\u63d0\u5347 NFS \u6587\u4ef6\u7cfb\u7edf\u4f20\u8f93\u80fd\u529b\uff0c\u4f46\u662f\u4e5f\u4e0d\u8981\u592a\u5927\u4e86\uff0c\u6700\u597d\u662f\u5728\u7f51\u7edc\u80fd\u4f20\u8f93\u7684\u6700\u5927\u503c\uff0c\u4e00\u822c\u9ed8\u8ba4\u662f\uff1a32768\u3002NFS \u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u4e4b\u95f4\u4f20\u8f93\u7684\u6570\u636e\u5757\u5927\u5c0f\u3002\u4e5f\u5c31\u662f\u6587\u4ef6 io block \u7684\u5927\u5c0f\u3002</li> <li>\u5ba2\u6237\u7aef\u6302\u8f7d\u52a0\u53c2\u6570\u547d\u4ee4\u683c\u5f0f\u4e3a\uff1a<code>mount -t nfs -o bg,hard,intr,rsize=131072,wsize=131072 10.0.0.7:/data /mnt</code></li> <li><code>async</code> \uff1a\u5f02\u6b65</li> <li><code>sync</code> \uff1a\u540c\u6b65</li> <li><code>ro</code> \uff1a\u53ea\u8bfb</li> <li><code>rw</code> \uff1a\u8bfb\u5199</li> <li><code>auto</code> \uff1a\u53ef\u4ee5\u901a\u8fc7 mount -a \u81ea\u52a8\u6302\u8f7d\uff0c\u4f46\u662f\u524d\u63d0\u8981\u5199\u5165/etc/fstab \u6587\u4ef6</li> <li><code>defaults</code> \uff1afstab \u7684\u7f3a\u7701\u503c\u5305\u62ec\uff1arw,suid,dev,exec,auto,nouser,async</li> <li><code>exec</code> \uff1a\u5141\u8bb8\u6587\u4ef6\u7cfb\u7edf\u6267\u884c\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u53d6\u6d88\u8fd9\u4e2a\u53c2\u6570\u53ef\u4ee5\u63d0\u5347\u5b89\u5168\uff0c\u56e0\u4e3a\u5373\u4f7f\u88ab\u4e0a\u4f20\u4e5f\u4e0d\u80fd\u88ab\u6267\u884c\uff0c\u9002\u7528\u4e8e\u90a3\u79cd\u4ed3\u5e93\u5b58\u50a8</li> <li><code>noatime</code> \uff1a\u4e0d\u66f4\u65b0\u6587\u4ef6\u7cfb\u7edf\u4e0a\u7684 inode \u8bbf\u95ee\u65f6\u95f4\uff0c\u9ad8\u5e76\u53d1\u73af\u5883\u63a8\u8350\uff0c\u53ef\u4ee5\u663e\u8457\u63d0\u9ad8\u6027\u80fd</li> <li><code>nodiratime</code> \uff1a\u4e0d\u66f4\u65b0\u6587\u4ef6\u7cfb\u7edf\u4e0a\u7684\u76ee\u5f55\u8282\u70b9\u8bbf\u95ee\u65f6\u95f4\uff0c\u9ad8\u5e76\u53d1\u73af\u5883\u63a8\u8350\uff0c\u53ef\u4ee5\u663e\u8457\u63d0\u9ad8\u6027\u80fd</li> <li><code>nosuid</code> \uff1a\u4e0d\u5141\u8bb8\u6743\u9650\u4f4d\u751f\u6548\uff0c\u53ef\u4ee5\u63d0\u9ad8\u5b89\u5168</li> <li><code>noexec</code> : \u4e0d\u5141\u8bb8\u6587\u4ef6\u7cfb\u7edf\u6267\u884c\u4e8c\u8fdb\u5236\u6587\u4ef6</li> <li><code>remount</code> \uff1amount -o remount\uff0crw (\u5f53\u7cfb\u7edf\u51fa\u9519\u8fdb\u5165\u6551\u63f4\u6a21\u5f0f\u65f6\u65e0\u6cd5\u5199\u7cfb\u7edf\uff0c\u53ef\u5229\u7528 remount \u53c2\u6570)</li> <li>\u5ba2\u6237\u7aef\u7684\u5b89\u5168\u6302\u8f7d\u547d\u4ee4\uff1a<code>mount -t nfs -o nosuid,noexec,nodev,rw 192.168.50.1:/data /mnt</code></li> <li>\u5ba2\u6237\u7aef\u7684\u6027\u80fd\u6302\u8f7d\u547d\u4ee4\uff1a<code>mount -t nfs -o noatime,nodiratime,rw 192.168.50.1:/data /mnt</code></li> <li>\u5ba2\u6237\u7aef\u7684\u5b89\u5168\u52a0\u6027\u80fd\u53c2\u6570\u4e3a\uff1a<code>mount -t nfs -o noatime,nodiratime,nosuid,noexec,nodev,rw,hard,intr,rsize=131072,wsize=131072 192.168.50.1:/data /mnt</code></li> <li>\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u6302\u8f7d\uff1a<code>mount /dev/sdb1 /mnt -o defaults,async,noatime,data=writeback,barrier=0</code></li> <li>\u5982\u679c\u5378\u8f7d\u6587\u4ef6\u7cfb\u7edf\u65f6\uff0c\u6709\u7528\u6237\u6216\u8005\u8fdb\u7a0b\u5728\u8bbf\u95ee\uff0c\u5bfc\u81f4\u5378\u8f7d\u7684\u65f6\u5019\u63d0\u793a\u8bbe\u5907\u5fd9\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528 umount -lf /mnt</li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs/#3-etcexports","title":"3 /etc/exports \u914d\u7f6e","text":"<pre><code>1. \u53ef\u4ee5\u5728linux\u4e0a\u901a\u8fc7`man exports`\u67e5\u770b\u6709\u54ea\u4e9b\u914d\u7f6e\u9879\u3002\n2. \u5efa\u8bae\u5bfc\u51fa\u7684\u5171\u4eab\u76ee\u5f55\u662f**\u6574\u4e2a\u6587\u4ef6\u7cfb\u7edf**\uff0c\u800c\u4e0d\u662f\u67d0\u4e2a\u6587\u4ef6\u7cfb\u7edf\u7684\u5b50\u76ee\u5f55\u3002\u56e0\u4e3a\u5bfc\u51fa\u5b50\u76ee\u5f55\u4f1a\u4ea7\u751f\u4e00\u4e9b\u5176\u5b83\u95ee\u9898\u3002\n</code></pre> <p><code>/etc/exports</code> \u6587\u4ef6\u5305\u542b NFS \u670d\u52a1\u5668\u4e0a\u53ef\u4f9b NFS \u5ba2\u6237\u7aef\u8bbf\u95ee\u7684\u672c\u5730\u7269\u7406\u6587\u4ef6\u7cfb\u7edf\u7684\u5217\u8868\u3002\u6bcf\u4e00\u884c\u8868\u793a\u4e00\u4e2a\u5bfc\u51fa\u70b9\u3002\u6bcf\u4e00\u884c\u5728\u8def\u5f84\u540d\u4e4b\u540e\u53ef\u80fd\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u9ed8\u8ba4\u9009\u9879\u3002\u4ee5 <code>#</code> \u5f00\u59cb\u7684\u884c\u4f5c\u4e3a\u6ce8\u91ca\u884c\uff0c\u4e0d\u4f1a\u88ab\u89e3\u6790\u3002 \u8981\u5bf9\u6b64\u6587\u4ef6\u5e94\u7528\u66f4\u6539\uff0c\u8bf7\u8fd0\u884c <code>exportfs -rav</code> \u6216\u91cd\u65b0\u542f\u52a8 NFS \u670d\u52a1\u5668\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs/#31","title":"3.1 \u8bed\u6cd5\u683c\u5f0f","text":"<pre><code>directory    Machine(option)[ Machine(option)[ Machine(option)[ ...]]]\n</code></pre> <p>\u5982 <code>/mnt 192.0.2.0/24(rw) trusty(rw,no_root_squash)</code>\uff0c\u6bcf\u4e00\u884c\u4e00\u4e2a\u6302\u8f7d\u70b9\uff0c\u4e14\u53ef\u4ee5\u8bbe\u7f6e\u591a\u4e2a\u4e3b\u673a\u5339\u914d\u89c4\u5219\uff0c\u901a\u8fc7\u7a7a\u683c\u5206\u9694\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs/#32","title":"3.2 \u5ba2\u6237\u7aef\u4e3b\u673a\u540d\u79f0\u683c\u5f0f","text":"<ol> <li>ipv4 \uff08<code>192.0.2.0/24</code>\uff09\u548c ipv6\uff08<code>2001:db8:9:e54::/64</code>\uff09\uff1aip \u540e\u9762\u7684\u63a9\u7801\u90e8\u5206\u53ef\u9009\uff0c\u5982 <code>192.0.2.0</code></li> <li>\u4e3b\u673a\u540d\uff08<code>hostname</code> \uff09\uff1ahostname \u662f\u5728 <code>/etc/hosts</code> \u914d\u7f6e\u7684</li> <li>\u57df\u540d\uff08<code>cs.foo.edu</code>\uff09\uff1a\u57df\u540d\u53ef\u7531 DNS \u57df\u540d\u670d\u52a1\u5668\u8bbe\u7f6e</li> <li>\u7f51\u7edc\u7ec4\uff08<code>@group</code>\uff09\uff1a</li> <li>\u533f\u540d\u7f51\u7edc\uff08<code>*</code>\uff09\uff1a\u8868\u793a\u6240\u6709\u7f51\u7edc\u5ba2\u6237\u7aef\u5747\u53ef\u8bbf\u95ee</li> <li>\u901a\u914d\u7b26\uff1a\u901a\u914d\u7b26 <code>*</code> \u548c <code>?</code> \u53ef\u4ee5\u7528\u5728\u57df\u540d\u4e2d\uff0c\u5982 <code>*.cs.foo.edu</code> \u4f1a\u5339\u914d\u6240\u6709\u5728\u57df\u540d <code>cs.foo.edu</code> \u4e0b\u7684\u4e3b\u673a</li> </ol>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs/#33","title":"3.3 \u9009\u9879","text":""},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs/#331","title":"3.3.1 \u7528\u6237\u6620\u5c04","text":"<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5ba2\u6237\u7aef\u4ee5\u4efb\u4f55\u7528\u6237\u8bbf\u95ee nfs \u670d\u52a1\u7aef\uff0c\u7528\u6237\u4f1a\u6620\u5c04\u5230 nfs \u7684\u533f\u540d\u7528\u6237\uff08nobody \u7528\u6237\uff09\uff0c\u8fd9\u4e2a\u533f\u540d\u7528\u6237\u53ef\u4ee5\u901a\u8fc7 anonuid\u3001anongid \u8bbe\u7f6e\u3002</p> \u9009\u9879 \u529f\u80fd <code>root_squash</code> \u5c06\u5ba2\u6237\u7aef\u7684 uid/gid \u4e3a 0\uff08\u5373 root \u7528\u6237/\u7ec4\uff09 \u7684\u6620\u5c04\u5230 anonymous \u7528\u6237/\u7ec4\u7684 uid/gid <code>no_root_squash</code> \u4e0d\u8fdb\u884c uid/gid \u4e3a 0 \uff08\u5373 root\uff09\u7684\u6620\u5c04\uff0c\u76f8\u5f53\u4e8e nfs \u670d\u52a1\u7aef\u8fd8\u662f\u4f7f\u7528 uid/gid \u4e3a 0 \uff08root\uff09\u7684\u8eab\u4efd\u8bbf\u95ee <code>all_squash</code> \u5c06\u5ba2\u6237\u7aef\u6240\u6709 uid/gid \u6620\u5c04\u5230 anonymous \u7684 uid/gid\uff08\u9ed8\u8ba4\u9009\u9879\uff09 <code>no_all_squash</code> \u6240\u6709\u7528\u6237\u4e0d\u8fdb\u884c uid/gid \u6620\u5c04 <code>anonuid</code> \u6307\u5b9a anonymous \u7528\u6237\u7684 uid\uff08\u9ed8\u8ba4\u662fnobody\u7528\u6237\uff09 <code>anongid</code> \u6307\u5b9a anonymous \u7ec4\u7684 gid\uff08\u9ed8\u8ba4\u662f nobody \u7ec4\uff09 <ul> <li><code>no_root_squash</code> \uff1a\u5982\u679c\u5bf9\u4e8e\u8bbf\u95ee NFS server \u5171\u4eab\u76ee\u5f55\u7528\u6237\u662f root \u7684\u8bdd\uff0c\u90a3\u8fd9\u4e2a\u5ba2\u6237\u7aef\u5bf9\u8fd9\u4e2a\u5171\u4eab\u76ee\u5f55\u5177\u6709 root \u6743\u9650</li> <li><code>root_squash</code> \uff1a\u5982\u679c\u5bf9\u4e8e\u8bbf\u95ee NFS server \u5171\u4eab\u76ee\u5f55\u7528\u6237\u662f root \u7684\u8bdd, \u90a3\u88ab\u5199\u5165\u7684\u6570\u636e\u7684\u6743\u9650\u4f1a\u88ab\u538b\u7f29\u6210\u533f\u540d\u7528\u6237\uff0cUID \u548c GID \u901a\u5e38\u4f1a\u53d8\u6210 nfsnobody, \u8fd9\u4e2a\u7528\u6237\u662f\u53ef\u4ee5\u6539\u7684\uff0c\u53ea\u662f\u901a\u5e38\u9ed8\u8ba4\u662f\u8fd9\u4e2a\u3002</li> <li><code>all_squash</code> \uff1a\u4e0d\u7ba1\u8bbf\u95ee NFS server \u5171\u4eab\u76ee\u5f55\u7528\u6237\u662f root \u8fd8\u662f\u666e\u901a\u7528\u6237\u90fd\u4f1a\u88ab\u538b\u7f29\u6210\u533f\u540d\u7528\u6237\uff0cUID \u548c GID \u901a\u5e38\u4f1a\u53d8\u6210 nfsnobody, \u8fd9\u4e2a\u7528\u6237\u662f\u53ef\u4ee5\u6539\u7684\uff0c\u53ea\u662f\u901a\u5e38\u9ed8\u8ba4\u662f\u8fd9\u4e2a\u3002</li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs/#332","title":"3.3.2 \u5176\u5b83\u9009\u9879","text":"\u9009\u9879 \u529f\u80fd <code>rw</code> \u8bfb\u5199\u6743\u9650 <code>ro</code> \u53ea\u8bfb\u6743\u9650 <code>secure</code> \u9650\u5236\u5ba2\u6237\u7aef\u53ea\u80fd\u4ece 0~1024 tcp/ip\u7aef\u53e3\u8bbf\u95ee\uff08\u9ed8\u8ba4\u9009\u9879\uff09 <code>insecure</code> \u53d6\u6d88\u7aef\u53e3\u53f7\u9650\u5236 <code>fsid=num/root/uuid</code> \u7528\u4e8e\u6807\u8bc6\u6bcf\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\uff0c\u53ef\u4ee5\u662f 32 \u4f4d\u6570\u5b57\u3001root \u6216\u8005uuid <code>async</code> \u6570\u636e\u5f02\u6b65\u5199\u5165\uff0c\u6027\u80fd\u9ad8\uff0c\u4f46\u6709\u98ce\u9669 <code>sync</code> \u6570\u636e\u540c\u6b65\u5199\u5165\uff0c\u6027\u80fd\u8f83\u4f4e\uff0c\u4f46\u6570\u636e\u4e0d\u4f1a\u4e22\u5931 <code>no_wdelay</code> \u53d6\u6d88\u5ef6\u8fdf\u63d0\u4ea4\u529f\u80fd\uff1b\u5982\u679c\u8bbe\u7f6e\u4e86 <code>async</code> \u5219\u5931\u6548\u3002 <code>wdelay</code> \u5ef6\u8fdf\u63d0\u4ea4\u5199\u8bf7\u6c42\uff0c\u4ee5\u4fbf\u4e8e\u591a\u4e2a\u5199\u8bf7\u6c42\u5408\u5e76\u63d0\u4ea4\uff0c\u4ee5\u63d0\u5347\u6027\u80fd\uff1b\u5982\u679c\u4e3b\u8981\u662f\u4e0d\u76f8\u5173\u7684\u5c0f\u8bf7\u6c42\uff0c\u6027\u80fd\u53cd\u800c\u4f1a\u4e0b\u964d\u3002 <code>no_hide</code> \u4e0d\u9690\u85cf\u5b50\u76ee\u5f55\uff0c\u4ece\u800c\u53ef\u4ee5\u540c\u65f6 export \u76ee\u5f55\u548c\u5b83\u7684\u5b50\u76ee\u5f55\u3002nfs4 \u9ed8\u8ba4\u5f00\u542f\uff0cnfs2\u3001nfs3 \u9ed8\u8ba4 <code>hide</code> \u9009\u9879 <code>hide</code> \u9690\u85cf\u5b50\u76ee\u5f55\uff0c\u5373\u4e0d\u80fd\u5171\u4eab\u4e86\u7236\u76ee\u5f55\u540e\u8fd8\u5171\u4eab\u5b83\u7684\u5b50\u76ee\u5f55 <code>no_subtree_check</code> \u4e0d\u68c0\u67e5\u5171\u4eab\u76ee\u5f55\u7684\u7236\u7ea7\u76ee\u5f55\u662f\u5426\u6709\u6743\u9650 <code>subtree_check</code> \u68c0\u67e5\u5171\u4eab\u76ee\u5f55\u7684\u7236\u7ea7\u76ee\u5f55\u662f\u5426\u6709\u6743\u9650\uff0c\u6bd4\u5982\u5171\u4eab\u76ee\u5f55 <code>/mnt/fs1</code>, \u5f53\u5ba2\u6237\u7aef\u8bf7\u6c42\u5230\u6765\u65f6\uff0c\u8fd8\u8981\u68c0\u67e5\u7236\u7ea7\u76ee\u5f55 <code>/mnt</code> \u662f\u5426\u4e5f\u6709\u6743\u9650 <ul> <li><code>sync</code> \uff1a\u540c\u6b65\u5ba2\u6237\u7aef\u5f80\u670d\u52a1\u7aef\u5199\u6570\u636e\uff0c\u5199\u6210\u529f\u540e\u624d\u8fd4\u56de OK\uff0c\u5b89\u5168\u4e0d\u4f1a\u4e22\u6570\u636e\uff0c\u4f46\u662f\u6027\u80fd\u6ca1 async \u90a3\u4e48\u597d\u3002</li> <li><code>async</code> : \u5f02\u6b65\u8bf7\u6c42\u5199\u5165\u6570\u636e\u65f6\uff0c\u5148\u8fd4\u56de\u8bf7\u6c42\uff0c\u518d\u5c06\u6570\u636e\u5199\u5165\u5230\u5185\u5b58\uff0c\u5982\u679c\u670d\u52a1\u5668\u4e2d\u9014\u65ad\u7535\uff0c\u53ef\u80fd\u5185\u5b58\u5185\u7684\u6570\u636e\u6765\u4e0d\u53ca\u5411\u786c\u4e2d\u5199\u5165\uff0c\u6240\u4ee5\u53ef\u80fd\u4f1a\u4e22\u6570\u636e\uff0c\u4f46\u662f\u6548\u7387\u9ad8\uff0c\u56e0\u4e3a\u662f\u5f80\u5bf9\u65b9\u5185\u4e2d\u5199\u6570\u636e\uff0c\u7535\u5546\u79d2\u6740\u662f\u5f02\u6b65\uff0c\u77ed\u65f6\u95f4\u5185\u6570\u636e\u4f1a\u7a0d\u5fae\u5ef6\u8fdf\u3002</li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs/#34","title":"3.4 \u914d\u7f6e\u793a\u4f8b","text":"<pre><code>/               master(rw) trusty(rw,no_root_squash)\n/projects       proj*.local.domain(rw)\n/usr            *.local.domain(ro) @trusted(rw)\n/home/joe       pc001(rw,all_squash,anonuid=150,anongid=100)\n/pub            *(ro,insecure,all_squash)\n/srv/www        -sync,rw server @trusted @external(ro)\n/foo            2001:db8:9:e54::/64(rw) 192.0.2.0/24(rw)\n/build          buildhost[0-9].local.domain(rw)\n</code></pre> <ol> <li>The first line exports the entire filesystem to machines master and trusty. In addition to write access, all uid squashing is turned off for host trusty. </li> <li>The second and third entry show examples for wildcard hostnames and netgroups (this is the entry <code>@trusted</code>). </li> <li>The fourth line shows the entry for the PC/NFS client discussed above. </li> <li>Line 5 exports the public FTP directory to every host in the world, executing all requests under the nobody account. The insecure option in this entry also allows clients with NFS implementations that don't use a reserved port for NFS.   </li> <li>The sixth line exports a directory read-write to the machine 'server' as well as the <code>@trusted</code> netgroup, and read-only to netgroup <code>@external</code>, all three mounts with the <code>sync</code> option enabled. </li> <li>The seventh line exports a directory to both an IPv6 and an IPv4 subnet. The eighth line demonstrates a character class wildcard match.</li> </ol>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs/#4-exportfs","title":"4 exportfs \u547d\u4ee4","text":"<pre><code>-a \u548c -v \u4e0d\u592a\u6e05\u695a\u5177\u4f53\u533a\u522b\u5728\u54ea\u3002\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u7ef4\u62a4\u5bfc\u51fa\u7684 NFS \u6587\u4ef6\u7cfb\u7edf\u8868\uff0c\u4e3b\u8981\u4f7f\u7528 <code>/etc/exports</code> \u6587\u4ef6</li> </ul> <pre><code>       /usr/sbin/exportfs [-avi] [-o options,..] [client:/path ..]\n/usr/sbin/exportfs -r [-v]\n/usr/sbin/exportfs [-av] -u [client:/path ..]\n/usr/sbin/exportfs [-v]\n/usr/sbin/exportfs -f\n       /usr/sbin/exportfs -s\n</code></pre>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs/#41-d-kind","title":"4.1 -d kind","text":""},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs/#42-i","title":"4.2 -i","text":"<ul> <li>\u529f\u80fd\uff1a\u5ffd\u7565/etc/exports \u6587\u4ef6\u548c/etc/exports.d \u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u3002\u4ec5\u4f7f\u7528\u9ed8\u8ba4\u9009\u9879\u548c\u547d\u4ee4\u884c\u4e0a\u7ed9\u5b9a\u7684\u9009\u9879\u3002</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>## exportfs -i\n/tmp/nfs1       &lt;world&gt;\n</code></pre>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs/#43-a","title":"4.3 -a","text":"<ul> <li>\u529f\u80fd\uff1a\u5bfc\u51fa\u6216\u53d6\u6d88\u5bfc\u51fa\u6240\u6709\u76ee\u5f55\u3002</li> </ul> <pre><code>## exportfs -av\nexporting 127.0.0.1:/tmp/nfs1\n</code></pre>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs/#44-r","title":"4.4 -r","text":"<ul> <li>\u529f\u80fd\uff1a\u91cd\u65b0\u5bfc\u51fa\u6240\u6709\u76ee\u5f55</li> <li>\u793a\u4f8b</li> </ul> <pre><code>## exportfs -rv\nexporting 127.0.0.1:/tmp/nfs1\n</code></pre>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs/#45-u","title":"4.5 -u","text":"<ul> <li>\u529f\u80fd\uff1a\u5378\u8f7d\u4e00\u4e2a\u6216\u591a\u4e2a\u5bfc\u51fa\u76ee\u5f55\uff08\u5ba2\u6237\u7aef\u6302\u8f7d\u70b9\u4e5f\u4f1a\u88ab\u5378\u8f7d\uff0c\u5982\u679c\u53c8\u88ab\u5bfc\u51fa\uff0c\u5ba2\u6237\u7aef\u53c8\u4f1a\u88ab\u6302\u8f7d\uff0c\u8be6\u89c1\u793a\u4f8b\uff09</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>## mount -t nfs 127.0.0.1:/tmp/nfs1 /tmp/cli1\n## df -h|grep /tmp/cli1\n127.0.0.1:/tmp/nfs1         17G  3.8G   14G  23% /tmp/cli1\n## exportfs -vu 127.0.0.1:/tmp/nfs1\nunexporting 127.0.0.1:/tmp/nfs1\n## df -h|grep /tmp/cli1\n## exportfs -av\nexporting 127.0.0.1:/tmp/nfs1\n## df -h|grep /tmp/cli1\n127.0.0.1:/tmp/nfs1         17G  3.8G   14G  23% /tmp/cli1\n</code></pre>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs/#46-s","title":"4.6 -s","text":"<pre><code>\u8fd9\u4e2a\u9009\u9879\u5728\u663e\u793a\u5bfc\u51fa\u5217\u8868\u4fe1\u606f\u65f6\u5f88\u50cf\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u663e\u793a/etc/exports \u5f53\u524d\u5bfc\u51fa\u5217\u8868\u3002</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>## exportfs -s\n/tmp/nfs1  *(sync,wdelay,hide,no_subtree_check,fsid=1,sec=sys,rw,secure,root_squash,no_all_squash)\n</code></pre>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs/#47-v","title":"4.7 -v","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793a\u8be6\u7ec6\u4fe1\u606f\u3002\u5bfc\u51fa\u6216\u53d6\u6d88\u5bfc\u51fa\u65f6\uff0c\u663e\u793a\u6b63\u5728\u8fdb\u884c\u7684\u64cd\u4f5c\uff1b\u663e\u793a\u5f53\u524d\u5bfc\u51fa\u5217\u8868\u65f6\uff0c\u8fd8\u663e\u793a\u5bfc\u51fa\u9009\u9879\u5217\u8868\u3002</li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>## 5 exportfs -v\n/tmp/nfs1       &lt;world&gt;(sync,wdelay,hide,no_subtree_check,fsid=1,sec=sys,rw,secure,root_squash,no_all_squash)\n</code></pre>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs/#5-showmount","title":"5 showmount","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793a NFS \u670d\u52a1\u5668\u7684\u6302\u8f7d\u4fe1\u606f</li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs/#51-e","title":"5.1 -e","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793a nfs \u670d\u52a1\u7aef\u7684 exports \u5bfc\u51fa\u5217\u8868</li> <li>\u793a\u4f8b</li> </ul> <pre><code>## showmount -e 192.168.211.3\nExport list for 192.168.211.3:\n/tmp/nfs1 127.0.0.1\n</code></pre>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs/#52-a-d","title":"5.2 -a\u3001-d","text":"<ul> <li>\u529f\u80fd\uff1a<ul> <li><code>-a</code> \u4ee5\u00a0<code>HostName:Directory</code>\u00a0\u683c\u5f0f\u663e\u793a\u6240\u6709\u8fdc\u7a0b\u5ba2\u6237\u673a\u6302\u8f7d\uff0c\u5176\u4e2d\u00a0HostName\u662f\u5ba2\u6237\u673a\u7684\u540d\u79f0\uff0cDirectory\u00a0\u662f\u8fdc\u7a0b\u6302\u8f7d\u7684\u76ee\u5f55\u8def\u5f84\u540d</li> <li><code>-d</code> \uff1a\u4ec5\u5217\u51fa\u5ba2\u6237\u673a\u6302\u8f7d\u7684\u76ee\u5f55</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>## showmount -a 192.168.211.3\nAll mount points on 192.168.211.3:\n127.0.0.1:/tmp/nfs1\n## showmount -d 192.168.211.3\nDirectories on 192.168.211.3:\n/tmp/nfs1\n</code></pre>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs/#6-nfsstat","title":"6 nfsstat","text":""},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs/#61-m","title":"6.1 -m","text":"<ul> <li>\u529f\u80fd\uff1a\u6253\u5370\u6709\u5173\u6bcf\u4e2a\u5df2\u6302\u8f7d NFS \u6587\u4ef6\u7cfb\u7edf\u7684\u4fe1\u606f\u3002</li> <li>\u793a\u4f8b</li> </ul> <pre><code>## nfsstat -m\n/tmp/cli1 from 127.0.0.1:/tmp/nfs1\n Flags: rw,relatime,vers=3,rsize=524288,wsize=524288,namlen=255,hard,proto=tcp,timeo=600,retrans=2,sec=sys,mountaddr=127.0.0.1,mountvers=3,mountport=20048,mountproto=udp,local_lock=none,addr=127.0.0.1\n</code></pre>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs/#62-n","title":"6.2 -n","text":"<ul> <li>\u529f\u80fd\uff1a\u6307\u5b9a nfs \u7248\u672c\uff0c\u5305\u62ec 2\u30013\u30014</li> <li>\u793a\u4f8b</li> </ul> <pre><code>## nfsstat -3 -c\nClient rpc stats:\ncalls      retrans    authrefrsh\n93         0          93      \n\nClient nfs v3:\nnull             getattr          setattr          lookup           access           2        12%     5        31%     0         0%     0         0%     0         0%     \nreadlink         read             write            create           mkdir            0         0%     0         0%     0         0%     0         0%     0         0%     \nsymlink          mknod            remove           rmdir            rename           0         0%     0         0%     0         0%     0         0%     0         0%     \nlink             readdir          readdirplus      fsstat           fsinfo           0         0%     0         0%     0         0%     3        18%     4        25%     \npathconf         commit           2        12%     0         0%    </code></pre>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs/#63-s-c","title":"6.3 -s\u3001-c","text":"<pre><code>\u9ed8\u8ba4\u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u4fe1\u606f\u90fd\u4f1a\u6253\u5370\n</code></pre> <ul> <li>\u529f\u80fd\uff1a<ul> <li><code>-s</code>\uff1a \u4ec5\u6253\u5370\u670d\u52a1\u5668\u7aef\u7edf\u8ba1\u4fe1\u606f</li> <li><code>-c</code> \uff1a \u4ec5\u6253\u5370\u5ba2\u6237\u7aef\u7edf\u8ba1\u4fe1\u606f</li> </ul> </li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs/#64-r","title":"6.4 -r","text":"<ul> <li>\u529f\u80fd\uff1a\u6253\u5370 rpc \u7edf\u8ba1\u4fe1\u606f</li> <li>\u793a\u4f8b</li> </ul> <pre><code>## nfsstat -r\nServer rpc stats:\ncalls      badcalls   badfmt     badauth    badclnt\n97         0          0          0          0       \n\nClient rpc stats:\ncalls      retrans    authrefrsh\n93         0          93     </code></pre>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs/#65-l","title":"6.5 -l","text":"<ul> <li>\u529f\u80fd\uff1a\u4ee5\u5217\u8868\u5f62\u5f0f\u6253\u5370\u4fe1\u606f</li> <li>\u793a\u4f8b</li> </ul> <pre><code>## nfsstat -l\nnfs v3 server        total:       18 \n------------- ------------- --------\nnfs v3 server         null:        4 \nnfs v3 server      getattr:        5 \nnfs v3 server       fsstat:        3 \nnfs v3 server       fsinfo:        4 \nnfs v3 server     pathconf:        2 </code></pre>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/nfs/nfs/#7-nfs","title":"7 NFS \u5b9e\u7528\u547d\u4ee4","text":"<ul> <li><code>showmount -e 127.0.0.1</code> \uff1a\u663e\u793a\u53ef\u4ee5\u6302\u8f7d\u7684\u6587\u4ef6\u7cfb\u7edf</li> <li><code>rpcinfo -p localhost</code> \u67e5\u770b nfs \u6ce8\u518c\u7684\u7aef\u53e3\u53f7</li> <li><code>mount -t nfs 192.168.50.1:/data /mnt</code> \u6302\u8f7d nfs \u6587\u4ef6\u7cfb\u7edf</li> <li><code>/etc/init.d/nfs reload</code> \u5e73\u6ed1\u91cd\u542f\u670d\u52a1</li> <li><code>cat /proc/mounts |grep \"root/nfs\"</code> \u5ba2\u6237\u7aef\u67e5\u770b\u6302\u8f7d\u53c2\u6570</li> <li><code>cat /var/lib/nfs/etab</code> \u670d\u52a1\u7aef\u67e5\u770b nfs \u914d\u7f6e\u53c2\u6570</li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/vfs/Core%20VFS%20documentation-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/","title":"Core VFS documentation","text":"<p>https://docs.kernel.org/filesystems/vfs.html</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/xfs/XFS%20Logging%20Design-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/","title":"XFS Logging Design","text":"<p>\u539f\u6587\u6863\u5730\u5740</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/xfs/XFS%20Logging%20Design-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#1-preamble","title":"1 Preamble","text":"<p>This document describes the design and algorithms that the XFS journalling subsystem is based on. This document describes the design and algorithms that the XFS journalling subsystem is based on so that readers may familiarize themselves with the general concepts of how transaction processing in XFS works.</p> <p>\u672c\u6587\u6863\u63cf\u8ff0\u4e86XFS\u65e5\u5fd7\u8bb0\u5f55\u5b50\u7cfb\u7edf\u6240\u57fa\u4e8e\u7684\u8bbe\u8ba1\u548c\u7b97\u6cd5\u3002\u672c\u6587\u6863\u63cf\u8ff0XFS\u65e5\u5fd7\u5b50\u7cfb\u7edf\u6240\u4f9d\u636e\u7684\u8bbe\u8ba1\u548c\u8ba1\u7b97\u65b9\u6cd5\uff0c\u4ee5\u4fbf\u8bfb\u8005\u719f\u6089XFS\u4e2d\u4e8b\u52a1\u5904\u7406\u7684\u4e00\u822c\u6982\u5ff5\u3002</p> <p>We begin with an overview of transactions in XFS, followed by describing how transaction reservations are structured and accounted, and then move into how we guarantee forwards progress for long running transactions with finite initial reservations bounds. At this point we need to explain how relogging works. With the basic concepts covered, the design of the delayed logging mechanism is documented.</p> <p>\u6211\u4eec\u9996\u5148\u6982\u8ff0\u4e86XFS\u4e2d\u7684\u4e8b\u52a1\uff0c\u7136\u540e\u63cf\u8ff0\u4e86\u4e8b\u52a1\u4fdd\u7559\u662f\u5982\u4f55\u6784\u9020\u548c\u8bb0\u8d26\u7684\uff0c\u7136\u540e\u8fdb\u5165\u5982\u4f55\u4fdd\u8bc1\u5728\u6709\u9650\u7684\u521d\u59cb\u4fdd\u7559\u8fb9\u754c\u4e0b\u957f\u671f\u8fd0\u884c\u4e8b\u52a1\u7684\u5411\u524d\u8fdb\u5c55\u3002\u6b64\u65f6\uff0c\u6211\u4eec\u9700\u8981\u89e3\u91ca\u91cd\u65b0\u8bb0\u5f55\u7684\u5de5\u4f5c\u539f\u7406\u3002\u5728\u6db5\u76d6\u57fa\u672c\u6982\u5ff5\u540e\uff0c\u5c06\u8bb0\u5f55\u5ef6\u8fdf\u65e5\u5fd7\u8bb0\u5f55\u673a\u5236\u7684\u8bbe\u8ba1\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/xfs/XFS%20Logging%20Design-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#2-introduction","title":"2 Introduction","text":"<p>XFS uses Write Ahead Logging for ensuring changes to the filesystem metadata are atomic and recoverable. For reasons of space and time efficiency, the logging mechanisms are varied and complex, combining intents, logical and physical logging mechanisms to provide the necessary recovery guarantees the filesystem requires.</p> <p>XFS\u4f7f\u7528\u9884\u5199\u65e5\u5fd7\u8bb0\u5f55\u6765\u786e\u4fdd\u5bf9\u6587\u4ef6\u7cfb\u7edf\u5143\u6570\u636e\u7684\u66f4\u6539\u662f\u539f\u5b50\u7684\u548c\u53ef\u6062\u590d\u7684\u3002\u7531\u4e8e\u7a7a\u95f4\u548c\u65f6\u95f4\u6548\u7387\u7684\u539f\u56e0\uff0c\u65e5\u5fd7\u673a\u5236\u591a\u79cd\u591a\u6837\u4e14\u590d\u6742\uff0c\u5c06\u610f\u56fe\u3001\u903b\u8f91\u548c\u7269\u7406\u65e5\u5fd7\u673a\u5236\u7ed3\u5408\u8d77\u6765\uff0c\u4ee5\u63d0\u4f9b\u6587\u4ef6\u7cfb\u7edf\u6240\u9700\u7684\u5fc5\u8981\u6062\u590d\u4fdd\u8bc1\u3002</p> <p>Some objects, such as inodes and dquots, are logged in logical format where the details logged are made up of the changes to in-core structures rather than on-disk structures. Other objects - typically buffers - have their physical changes logged. Long running atomic modifications have individual changes chained together by intents, ensuring that journal recovery can restart and finish an operation that was only partially done when the system stopped functioning.</p> <p>\u67d0\u4e9b\u5bf9\u8c61\uff08\u5982inode\u548cdquot\uff09\u4ee5\u903b\u8f91\u683c\u5f0f\u8bb0\u5f55\uff0c\u5176\u4e2d\u8bb0\u5f55\u7684\u8be6\u7ec6\u4fe1\u606f\u7531\u5185\u6838\u7ed3\u6784\u800c\u975e\u78c1\u76d8\u7ed3\u6784\u7684\u66f4\u6539\u7ec4\u6210\u3002\u5176\u4ed6\u5bf9\u8c61\uff08\u901a\u5e38\u662f\u7f13\u51b2\u533a\uff09\u4f1a\u8bb0\u5f55\u5176\u7269\u7406\u66f4\u6539\u3002\u957f\u671f\u8fd0\u884c\u7684\u539f\u5b50\u4fee\u6539\u901a\u8fc7\u610f\u56fe\u5c06\u5355\u4e2a\u66f4\u6539\u94fe\u63a5\u5728\u4e00\u8d77\uff0c\u786e\u4fdd\u65e5\u5fd7\u6062\u590d\u53ef\u4ee5\u91cd\u65b0\u542f\u52a8\u5e76\u5b8c\u6210\u7cfb\u7edf\u505c\u6b62\u8fd0\u884c\u65f6\u4ec5\u90e8\u5206\u5b8c\u6210\u7684\u64cd\u4f5c\u3002</p> <p>The reason for these differences is to keep the amount of log space and CPU time required to process objects being modified as small as possible and hence the logging overhead as low as possible. Some items are very frequently modified, and some parts of objects are more frequently modified than others, so keeping the overhead of metadata logging low is of prime importance.</p> <p>\u8fd9\u4e9b\u5dee\u5f02\u7684\u539f\u56e0\u662f\u4e3a\u4e86\u5c3d\u53ef\u80fd\u51cf\u5c11\u5904\u7406\u88ab\u4fee\u6539\u5bf9\u8c61\u6240\u9700\u7684\u65e5\u5fd7\u7a7a\u95f4\u548cCPU\u65f6\u95f4\uff0c\u4ece\u800c\u5c3d\u53ef\u80fd\u964d\u4f4e\u65e5\u5fd7\u5f00\u9500\u3002\u6709\u4e9b\u9879\u975e\u5e38\u9891\u7e41\u5730\u88ab\u4fee\u6539\uff0c\u5bf9\u8c61\u7684\u67d0\u4e9b\u90e8\u5206\u6bd4\u5176\u4ed6\u90e8\u5206\u66f4\u9891\u7e41\u5730\u88ab\u66f4\u6539\uff0c\u56e0\u6b64\u4fdd\u6301\u5143\u6570\u636e\u65e5\u5fd7\u8bb0\u5f55\u7684\u5f00\u9500\u4f4e\u662f\u6700\u91cd\u8981\u7684\u3002</p> <p>The method used to log an item or chain modifications together isn\u2019t particularly important in the scope of this document. It suffices to know that the method used for logging a particular object or chaining modifications together are different and are dependent on the object and/or modification being performed. The logging subsystem only cares that certain specific rules are followed to guarantee forwards progress and prevent deadlocks.</p> <p>\u5728\u672c\u6587\u6863\u7684\u8303\u56f4\u5185\uff0c\u7528\u4e8e\u4e00\u8d77\u8bb0\u5f55\u9879\u6216\u94fe\u4fee\u6539\u7684\u65b9\u6cd5\u5e76\u4e0d\u7279\u522b\u91cd\u8981\u3002\u53ea\u8981\u77e5\u9053\uff0c\u7528\u4e8e\u8bb0\u5f55\u7279\u5b9a\u5bf9\u8c61\u6216\u5c06\u4fee\u6539\u94fe\u63a5\u5728\u4e00\u8d77\u7684\u65b9\u6cd5\u662f\u4e0d\u540c\u7684\uff0c\u5e76\u4e14\u53d6\u51b3\u4e8e\u6b63\u5728\u6267\u884c\u7684\u5bf9\u8c61\u548c/\u6216\u4fee\u6539\u3002\u65e5\u5fd7\u8bb0\u5f55\u5b50\u7cfb\u7edf\u53ea\u5173\u5fc3\u9075\u5faa\u67d0\u4e9b\u7279\u5b9a\u7684\u89c4\u5219\u6765\u4fdd\u8bc1\u8f6c\u53d1\u8fdb\u5ea6\u5e76\u9632\u6b62\u6b7b\u9501\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/xfs/XFS%20Logging%20Design-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#3-transactions-in-xfs","title":"3 Transactions in XFS","text":"<p>XFS has two types of high level transactions, defined by the type of log space reservation they take. These are known as \u201cone shot\u201d and \u201cpermanent\u201d transactions. Permanent transaction reservations can take reservations that span commit boundaries, whilst \u201cone shot\u201d transactions are for a single atomic modification.</p> <p>XFS\u6709\u4e24\u79cd\u7c7b\u578b\u7684\u9ad8\u7ea7\u4e8b\u52a1\uff0c\u7531\u5b83\u4eec\u4fdd\u7559\u7684\u65e5\u5fd7\u7a7a\u95f4\u7c7b\u578b\u5b9a\u4e49\u3002\u8fd9\u4e9b\u4ea4\u6613\u88ab\u79f0\u4e3a\u201c\u4e00\u6b21\u6027\u201d\u548c\u201c\u6c38\u4e45\u6027\u201d\u4ea4\u6613\u3002\u6c38\u4e45\u4e8b\u52a1\u4fdd\u7559\u53ef\u4ee5\u63a5\u53d7\u8de8\u8d8a\u63d0\u4ea4\u8fb9\u754c\u7684\u4fdd\u7559\uff0c\u800c\u201c\u4e00\u6b21\u6027\u201d\u4e8b\u52a1\u7528\u4e8e\u5355\u4e2a\u539f\u5b50\u4fee\u6539\u3002</p> <p>The type and size of reservation must be matched to the modification taking place. This means that permanent transactions can be used for one-shot modifications, but one-shot reservations cannot be used for permanent transactions.</p> <p>\u9884\u8ba2\u7684\u7c7b\u578b\u548c\u5927\u5c0f\u5fc5\u987b\u4e0e\u6b63\u5728\u8fdb\u884c\u7684\u4fee\u6539\u76f8\u5339\u914d\u3002\u8fd9\u610f\u5473\u7740\u6c38\u4e45\u4e8b\u52a1\u53ef\u4ee5\u7528\u4e8e\u4e00\u6b21\u6027\u4fee\u6539\uff0c\u4f46\u4e00\u6b21\u6027\u4fdd\u7559\u4e0d\u80fd\u7528\u4e8e\u6c38\u4e45\u4e8b\u52a1\u3002</p> <p>In the code, a one-shot transaction pattern looks somewhat like this:</p> <pre><code>tp = xfs_trans_alloc(&lt;reservation&gt;)\n&lt;lock items&gt;\n&lt;join item to transaction&gt;\n&lt;do modification&gt;\nxfs_trans_commit(tp);\n</code></pre> <p>As items are modified in the transaction, the dirty regions in those items are tracked via the transaction handle. Once the transaction is committed, all resources joined to it are released, along with the remaining unused reservation space that was taken at the transaction allocation time.</p> <p>\u5728\u4e8b\u52a1\u4e2d\u4fee\u6539\u9879\u76ee\u65f6\uff0c\u901a\u8fc7\u4e8b\u52a1\u53e5\u67c4\u8ddf\u8e2a\u8fd9\u4e9b\u9879\u76ee\u4e2d\u7684\u810f\u533a\u57df\u3002\u63d0\u4ea4\u4e8b\u52a1\u540e\uff0c\u5c06\u91ca\u653e\u4e0e\u4e4b\u8fde\u63a5\u7684\u6240\u6709\u8d44\u6e90\uff0c\u4ee5\u53ca\u5728\u4e8b\u52a1\u5206\u914d\u65f6\u5360\u7528\u7684\u5269\u4f59\u672a\u4f7f\u7528\u4fdd\u7559\u7a7a\u95f4\u3002</p> <p>In contrast, a permanent transaction is made up of multiple linked individual transactions, and the pattern looks like this:</p> <pre><code>tp = xfs_trans_alloc(&lt;reservation&gt;)\nxfs_ilock(ip, XFS_ILOCK_EXCL)\n\nloop {\n        xfs_trans_ijoin(tp, 0);\n        &lt;do modification&gt;\n        xfs_trans_log_inode(tp, ip);\n        xfs_trans_roll(&amp;tp);\n}\n\nxfs_trans_commit(tp);\nxfs_iunlock(ip, XFS_ILOCK_EXCL);\n</code></pre> <p>While this might look similar to a one-shot transaction, there is an important difference: xfs_trans_roll() performs a specific operation that links two transactions together:</p> <p>\u867d\u7136\u8fd9\u770b\u8d77\u6765\u7c7b\u4f3c\u4e8e\u4e00\u6b21\u6027\u4e8b\u52a1\uff0c\u4f46\u6709\u4e00\u4e2a\u91cd\u8981\u7684\u533a\u522b\uff1a<code>xfs_trans_roll()</code>\u6267\u884c\u5c06\u4e24\u4e2a\u4e8b\u52a1\u94fe\u63a5\u5728\u4e00\u8d77\u7684\u7279\u5b9a\u64cd\u4f5c\uff1a</p> <pre><code>ntp = xfs_trans_dup(tp);\nxfs_trans_commit(tp);\nxfs_trans_reserve(ntp);\n</code></pre> <p>This results in a series of \u201crolling transactions\u201d where the inode is locked across the entire chain of transactions. Hence while this series of rolling transactions is running, nothing else can read from or write to the inode and this provides a mechanism for complex changes to appear atomic from an external observer\u2019s point of view.</p> <p>\u8fd9\u5bfc\u81f4\u4e86\u4e00\u7cfb\u5217\u201c\u6eda\u52a8\u4e8b\u52a1\u201d\uff0c\u5176\u4e2dinode\u5728\u6574\u4e2a\u4e8b\u52a1\u94fe\u4e2d\u88ab\u9501\u5b9a\u3002\u56e0\u6b64\uff0c\u5f53\u8fd9\u4e00\u7cfb\u5217\u6eda\u52a8\u4e8b\u52a1\u6b63\u5728\u8fd0\u884c\u65f6\uff0c\u5176\u4ed6\u4efb\u4f55\u4e8b\u52a1\u90fd\u65e0\u6cd5\u8bfb\u53d6\u6216\u5199\u5165inode\uff0c\u8fd9\u4e3a\u590d\u6742\u7684\u66f4\u6539\u63d0\u4f9b\u4e86\u4e00\u79cd\u673a\u5236\uff0c\u4ece\u5916\u90e8\u89c2\u5bdf\u8005\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u8fd9\u4e9b\u66f4\u6539\u4f3c\u4e4e\u662f\u539f\u5b50\u7684\u3002</p> <p>It is important to note that a series of rolling transactions in a permanent transaction does not form an atomic change in the journal. While each individual modification is atomic, the chain is not atomic. If we crash half way through, then recovery will only replay up to the last transactional modification the loop made that was committed to the journal.</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u6c38\u4e45\u4e8b\u52a1\u4e2d\u7684\u4e00\u7cfb\u5217\u6eda\u52a8\u4e8b\u52a1\u4e0d\u4f1a\u5728\u65e5\u5fd7\u4e2d\u5f62\u6210\u539f\u5b50\u53d8\u5316\u3002\u867d\u7136\u6bcf\u4e2a\u5355\u72ec\u7684\u4fee\u6539\u90fd\u662f\u539f\u5b50\u7684\uff0c\u4f46\u94fe\u4e0d\u662f\u539f\u5b50\u7684\u3002\u5982\u679c\u6211\u4eec\u4e2d\u9014\u5d29\u6e83\uff0c\u90a3\u4e48\u6062\u590d\u5c06\u53ea\u56de\u653e\u5230\u63d0\u4ea4\u5230\u65e5\u5fd7\u7684\u5faa\u73af\u6240\u505a\u7684\u6700\u540e\u4e00\u6b21\u4e8b\u52a1\u4fee\u6539\u3002</p> <p>This affects long running permanent transactions in that it is not possible to predict how much of a long running operation will actually be recovered because there is no guarantee of how much of the operation reached stale storage. Hence if a long running operation requires multiple transactions to fully complete, the high level operation must use intents and deferred operations to guarantee recovery can complete the operation once the first transactions is persisted in the on-disk journal.</p> <p>\u8fd9\u4f1a\u5f71\u54cd\u957f\u65f6\u95f4\u8fd0\u884c\u7684\u6c38\u4e45\u4e8b\u52a1\uff0c\u56e0\u4e3a\u65e0\u6cd5\u9884\u6d4b\u5b9e\u9645\u6062\u590d\u7684\u957f\u65f6\u95f4\u8fd0\u884c\u64cd\u4f5c\u7684\u6570\u91cf\uff0c\u56e0\u4e3a\u65e0\u6cd5\u4fdd\u8bc1\u6709\u591a\u5c11\u64cd\u4f5c\u5230\u8fbe\u4e86\u8fc7\u65f6\u7684\u5b58\u50a8\u3002\u56e0\u6b64\uff0c\u5982\u679c\u957f\u65f6\u95f4\u8fd0\u884c\u7684\u64cd\u4f5c\u9700\u8981\u591a\u4e2a\u4e8b\u52a1\u624d\u80fd\u5b8c\u5168\u5b8c\u6210\uff0c\u5219\u9ad8\u7ea7\u64cd\u4f5c\u5fc5\u987b\u4f7f\u7528\u610f\u56fe\u548c\u5ef6\u8fdf\u64cd\u4f5c\uff0c\u4ee5\u786e\u4fdd\u5728\u78c1\u76d8\u65e5\u5fd7\u4e2d\u4fdd\u7559\u7b2c\u4e00\u4e2a\u4e8b\u52a1\u540e\uff0c\u6062\u590d\u53ef\u4ee5\u5b8c\u6210\u64cd\u4f5c\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/xfs/XFS%20Logging%20Design-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#4-transactions-are-asynchronous","title":"4 Transactions are Asynchronous","text":"<p>In XFS, all high level transactions are asynchronous by default. This means that xfs_trans_commit() does not guarantee that the modification has been committed to stable storage when it returns. Hence when a system crashes, not all the completed transactions will be replayed during recovery.</p> <p>\u5728XFS\u4e2d\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u9ad8\u7ea7\u4e8b\u52a1\u90fd\u662f\u5f02\u6b65\u7684\u3002\u8fd9\u610f\u5473\u7740xfs_trans_commit\uff08\uff09\u4e0d\u80fd\u4fdd\u8bc1\u4fee\u6539\u8fd4\u56de\u65f6\u5df2\u63d0\u4ea4\u5230\u7a33\u5b9a\u7684\u5b58\u50a8\u4e2d\u3002\u56e0\u6b64\uff0c\u5f53\u7cfb\u7edf\u5d29\u6e83\u65f6\uff0c\u5e76\u4e0d\u662f\u6240\u6709\u5df2\u5b8c\u6210\u7684\u4e8b\u52a1\u90fd\u4f1a\u5728\u6062\u590d\u671f\u95f4\u91cd\u64ad\u3002</p> <p>However, the logging subsystem does provide global ordering guarantees, such that if a specific change is seen after recovery, all metadata modifications that were committed prior to that change will also be seen.</p> <p>\u7136\u800c\uff0c\u65e5\u5fd7\u8bb0\u5f55\u5b50\u7cfb\u7edf\u786e\u5b9e\u63d0\u4f9b\u4e86\u5168\u5c40\u6392\u5e8f\u4fdd\u8bc1\uff0c\u8fd9\u6837\uff0c\u5982\u679c\u5728\u6062\u590d\u540e\u770b\u5230\u7279\u5b9a\u7684\u66f4\u6539\uff0c\u90a3\u4e48\u4e5f\u5c06\u770b\u5230\u5728\u8be5\u66f4\u6539\u4e4b\u524d\u63d0\u4ea4\u7684\u6240\u6709\u5143\u6570\u636e\u4fee\u6539\u3002</p> <p>For single shot operations that need to reach stable storage immediately, or ensuring that a long running permanent transaction is fully committed once it is complete, we can explicitly tag a transaction as synchronous. This will trigger a \u201clog force\u201d to flush the outstanding committed transactions to stable storage in the journal and wait for that to complete.</p> <p>\u5bf9\u4e8e\u9700\u8981\u7acb\u5373\u8fbe\u5230\u7a33\u5b9a\u5b58\u50a8\u7684\u5355\u6b21\u5feb\u7167\u64cd\u4f5c\uff0c\u6216\u8005\u786e\u4fdd\u4e00\u4e2a\u957f\u671f\u8fd0\u884c\u7684\u6c38\u4e45\u4e8b\u52a1\u4e00\u65e6\u5b8c\u6210\u5c31\u88ab\u5b8c\u5168\u63d0\u4ea4\uff0c\u6211\u4eec\u53ef\u4ee5\u663e\u5f0f\u5730\u5c06\u4e00\u4e2a\u4e8b\u52a1\u6807\u8bb0\u4e3a\u540c\u6b65\u3002\u8fd9\u5c06\u89e6\u53d1\u201c\u65e5\u5fd7\u5f3a\u5236\u201d\uff0c\u5c06\u672a\u5b8c\u6210\u7684\u5df2\u63d0\u4ea4\u4e8b\u52a1\u5237\u65b0\u5230\u65e5\u5fd7\u4e2d\u7684\u7a33\u5b9a\u5b58\u50a8\u4e2d\uff0c\u5e76\u7b49\u5f85\u5176\u5b8c\u6210\u3002</p> <p>Synchronous transactions are rarely used, however, because they limit logging throughput to the IO latency limitations of the underlying storage. Instead, we tend to use log forces to ensure modifications are on stable storage only when a user operation requires a synchronisation point to occur (e.g. fsync).</p> <p>\u7136\u800c\uff0c\u5f88\u5c11\u4f7f\u7528\u540c\u6b65\u4e8b\u52a1\uff0c\u56e0\u4e3a\u5b83\u4eec\u5c06\u65e5\u5fd7\u541e\u5410\u91cf\u9650\u5236\u5728\u5e95\u5c42\u5b58\u50a8\u7684IO\u5ef6\u8fdf\u9650\u5236\u4e4b\u5185\u3002\u76f8\u53cd\uff0c\u6211\u4eec\u503e\u5411\u4e8e\u4f7f\u7528\u65e5\u5fd7\u5f3a\u5236\uff0c\u4ee5\u786e\u4fdd\u53ea\u6709\u5728\u7528\u6237\u64cd\u4f5c\u9700\u8981\u540c\u6b65\u70b9\u65f6\uff08\u4f8b\u5982fsync\uff09\uff0c\u4fee\u6539\u624d\u4f1a\u5728\u7a33\u5b9a\u7684\u5b58\u50a8\u4e0a\u8fdb\u884c\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/xfs/XFS%20Logging%20Design-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#5-transaction-reservations","title":"5 Transaction Reservations","text":"<p>It has been mentioned a number of times now that the logging subsystem needs to provide a forwards progress guarantee so that no modification ever stalls because it can\u2019t be written to the journal due to a lack of space in the journal. This is achieved by the transaction reservations that are made when a transaction is first allocated. For permanent transactions, these reservations are maintained as part of the transaction rolling mechanism.</p> <p>\u73b0\u5728\u5df2\u7ecf\u591a\u6b21\u63d0\u5230\uff0c\u65e5\u5fd7\u8bb0\u5f55\u5b50\u7cfb\u7edf\u9700\u8981\u63d0\u4f9b\u4e00\u4e2a\u8f6c\u53d1\u8fdb\u5ea6\u4fdd\u8bc1\uff0c\u8fd9\u6837\u5c31\u4e0d\u4f1a\u56e0\u4e3a\u65e5\u5fd7\u4e2d\u7f3a\u5c11\u7a7a\u95f4\u800c\u65e0\u6cd5\u5199\u5165\u65e5\u5fd7\u800c\u5bfc\u81f4\u4fee\u6539\u6682\u505c\u3002\u8fd9\u662f\u901a\u8fc7\u5728\u9996\u6b21\u5206\u914d\u4e8b\u52a1\u65f6\u8fdb\u884c\u7684\u4e8b\u52a1\u9884\u7559\u6765\u5b9e\u73b0\u7684\u3002\u5bf9\u4e8e\u6c38\u4e45\u4ea4\u6613\uff0c\u8fd9\u4e9b\u4fdd\u7559\u4f5c\u4e3a\u4ea4\u6613\u6eda\u52a8\u673a\u5236\u7684\u4e00\u90e8\u5206\u8fdb\u884c\u7ef4\u62a4\u3002</p> <p>A transaction reservation provides a guarantee that there is physical log space available to write the modification into the journal before we start making modifications to objects and items. As such, the reservation needs to be large enough to take into account the amount of metadata that the change might need to log in the worst case. This means that if we are modifying a btree in the transaction, we have to reserve enough space to record a full leaf-to-root split of the btree. As such, the reservations are quite complex because we have to take into account all the hidden changes that might occur.</p> <p>\u4e8b\u52a1\u4fdd\u7559\u63d0\u4f9b\u4e86\u4e00\u79cd\u4fdd\u8bc1\uff0c\u5373\u5728\u6211\u4eec\u5f00\u59cb\u4fee\u6539\u5bf9\u8c61\u548c\u9879\u76ee\u4e4b\u524d\uff0c\u6709\u7269\u7406\u65e5\u5fd7\u7a7a\u95f4\u53ef\u7528\u4e8e\u5c06\u4fee\u6539\u5199\u5165\u65e5\u5fd7\u3002\u56e0\u6b64\uff0c\u4fdd\u7559\u9700\u8981\u8db3\u591f\u5927\uff0c\u4ee5\u8003\u8651\u5728\u6700\u574f\u60c5\u51b5\u4e0b\u66f4\u6539\u53ef\u80fd\u9700\u8981\u8bb0\u5f55\u7684\u5143\u6570\u636e\u91cf\u3002\u8fd9\u610f\u5473\u7740\uff0c\u5982\u679c\u6211\u4eec\u5728\u4e8b\u52a1\u4e2d\u4fee\u6539btree\uff0c\u6211\u4eec\u5fc5\u987b\u4fdd\u7559\u8db3\u591f\u7684\u7a7a\u95f4\u6765\u8bb0\u5f55btree\u7684\u5b8c\u6574\u53f6\u5230\u6839\u5206\u5272\u3002\u56e0\u6b64\uff0c\u4fdd\u7559\u610f\u89c1\u975e\u5e38\u590d\u6742\uff0c\u56e0\u4e3a\u6211\u4eec\u5fc5\u987b\u8003\u8651\u5230\u53ef\u80fd\u53d1\u751f\u7684\u6240\u6709\u9690\u85cf\u53d8\u5316\u3002</p> <p>For example, a user data extent allocation involves allocating an extent from free space, which modifies the free space trees. That\u2019s two btrees. Inserting the extent into the inode\u2019s extent map might require a split of the extent map btree, which requires another allocation that can modify the free space trees again. Then we might have to update reverse mappings, which modifies yet another btree which might require more space. And so on. Hence the amount of metadata that a \u201csimple\u201d operation can modify can be quite large.</p> <p>\u4f8b\u5982\uff0c\u7528\u6237\u6570\u636e\u533a\u6bb5\u5206\u914d\u6d89\u53ca\u4ece\u7a7a\u95f2\u7a7a\u95f4\u5206\u914d\u533a\u6bb5\uff0c\u8fd9\u4f1a\u4fee\u6539\u7a7a\u95f2\u7a7a\u95f4\u6811\u3002\u8fd9\u662f\u4e24\u4e2abtree\u3002\u5c06\u6570\u636e\u5757\u63d2\u5165inode\u7684\u6570\u636e\u5757\u6620\u5c04\u53ef\u80fd\u9700\u8981\u62c6\u5206\u6570\u636e\u5757\u6620\u5c04btree\uff0c\u8fd9\u9700\u8981\u53e6\u4e00\u4e2a\u53ef\u4ee5\u518d\u6b21\u4fee\u6539\u7a7a\u95f2\u7a7a\u95f4\u6811\u7684\u5206\u914d\u3002\u7136\u540e\u6211\u4eec\u53ef\u80fd\u9700\u8981\u66f4\u65b0\u53cd\u5411\u6620\u5c04\uff0c\u8fd9\u5c06\u4fee\u6539\u53e6\u4e00\u4e2a\u53ef\u80fd\u9700\u8981\u66f4\u591a\u7a7a\u95f4\u7684btree\u3002\u56e0\u6b64\uff0c\u201c\u7b80\u5355\u201d\u64cd\u4f5c\u53ef\u4ee5\u4fee\u6539\u7684\u5143\u6570\u636e\u91cf\u53ef\u80fd\u975e\u5e38\u5927\u3002</p> <p>This \u201cworst case\u201d calculation provides us with the static \u201cunit reservation\u201d for the transaction that is calculated at mount time. We must guarantee that the log has this much space available before the transaction is allowed to proceed so that when we come to write the dirty metadata into the log we don\u2019t run out of log space half way through the write.</p> <p>\u8fd9\u79cd\u201c\u6700\u574f\u60c5\u51b5\u201d\u8ba1\u7b97\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u5728\u88c5\u8f7d\u65f6\u8ba1\u7b97\u7684\u4e8b\u52a1\u7684\u9759\u6001\u201c\u5355\u5143\u9884\u7559\u201d\u3002\u6211\u4eec\u5fc5\u987b\u786e\u4fdd\u5728\u5141\u8bb8\u4e8b\u52a1\u7ee7\u7eed\u4e4b\u524d\uff0c\u65e5\u5fd7\u6709\u8db3\u591f\u7684\u53ef\u7528\u7a7a\u95f4\uff0c\u4ee5\u4fbf\u5728\u5c06\u810f\u5143\u6570\u636e\u5199\u5165\u65e5\u5fd7\u65f6\uff0c\u4e0d\u4f1a\u5728\u5199\u5165\u8fc7\u7a0b\u4e2d\u8017\u5c3d\u65e5\u5fd7\u7a7a\u95f4\u3002</p> <p>For one-shot transactions, a single unit space reservation is all that is required for the transaction to proceed. For permanent transactions, however, we also have a \u201clog count\u201d that affects the size of the reservation that is to be made.</p> <p>\u5bf9\u4e8e\u4e00\u6b21\u6027\u4e8b\u52a1\uff0c\u53ea\u9700\u4fdd\u7559\u4e00\u4e2a\u5355\u5143\u7a7a\u95f4\u5373\u53ef\u8fdb\u884c\u4e8b\u52a1\u3002\u7136\u800c\uff0c\u5bf9\u4e8e\u6c38\u4e45\u4e8b\u52a1\uff0c\u6211\u4eec\u4e5f\u6709\u4e00\u4e2a\u201c\u65e5\u5fd7\u8ba1\u6570\u201d\uff0c\u5b83\u4f1a\u5f71\u54cd\u8981\u8fdb\u884c\u7684\u4fdd\u7559\u7684\u5927\u5c0f\u3002</p> <p>While a permanent transaction can get by with a single unit of space reservation, it is somewhat inefficient to do this as it requires the transaction rolling mechanism to re-reserve space on every transaction roll. We know from the implementation of the permanent transactions how many transaction rolls are likely for the common modifications that need to be made.</p> <p>\u867d\u7136\u6c38\u4e45\u4e8b\u52a1\u53ef\u4ee5\u901a\u8fc7\u5355\u4e2a\u7a7a\u95f4\u4fdd\u7559\u5355\u5143\u6765\u5904\u7406\uff0c\u4f46\u8fd9\u6837\u505a\u6709\u4e9b\u4f4e\u6548\uff0c\u56e0\u4e3a\u5b83\u9700\u8981\u4e8b\u52a1\u6eda\u52a8\u673a\u5236\u5728\u6bcf\u4e2a\u4e8b\u52a1\u6eda\u52a8\u4e0a\u91cd\u65b0\u4fdd\u7559\u7a7a\u95f4\u3002\u6211\u4eec\u4ece\u6c38\u4e45\u4e8b\u52a1\u7684\u5b9e\u73b0\u4e2d\u77e5\u9053\uff0c\u5bf9\u4e8e\u9700\u8981\u8fdb\u884c\u7684\u5e38\u89c1\u4fee\u6539\uff0c\u53ef\u80fd\u6709\u591a\u5c11\u4e8b\u52a1\u6eda\u52a8\u3002</p> <p>For example, an inode allocation is typically two transactions - one to physically allocate a free inode chunk on disk, and another to allocate an inode from an inode chunk that has free inodes in it. Hence for an inode allocation transaction, we might set the reservation log count to a value of 2 to indicate that the common/fast path transaction will commit two linked transactions in a chain. Each time a permanent transaction rolls, it consumes an entire unit reservation.</p> <p>\u4f8b\u5982\uff0c\u4e00\u4e2ainode\u5206\u914d\u901a\u5e38\u662f\u4e24\u4e2a\u4e8b\u52a1\u2014\u2014\u4e00\u4e2a\u7528\u4e8e\u7269\u7406\u5206\u914d\u78c1\u76d8\u4e0a\u7684\u7a7a\u95f2inode\u5757\uff0c\u53e6\u4e00\u4e2a\u7528\u4e8e\u4ece\u5176\u4e2d\u6709\u7a7a\u95f2inode\u7684inode\u5757\u5206\u914dinode\u3002\u56e0\u6b64\uff0c\u5bf9\u4e8einode\u5206\u914d\u4e8b\u52a1\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u4fdd\u7559\u65e5\u5fd7\u8ba1\u6570\u8bbe\u7f6e\u4e3a2\uff0c\u4ee5\u6307\u793a\u516c\u5171/\u5feb\u901f\u8def\u5f84\u4e8b\u52a1\u5c06\u5728\u4e00\u4e2a\u94fe\u4e2d\u63d0\u4ea4\u4e24\u4e2a\u94fe\u63a5\u7684\u4e8b\u52a1\u3002\u6bcf\u6b21\u4e00\u4e2a\u6c38\u4e45\u4e8b\u52a1\u6eda\u52a8\u65f6\uff0c\u5b83\u90fd\u4f1a\u6d88\u8017\u6574\u4e2a\u5355\u5143\u9884\u7559\u3002</p> <p>Hence when the permanent transaction is first allocated, the log space reservation is increased from a single unit reservation to multiple unit reservations. That multiple is defined by the reservation log count, and this means we can roll the transaction multiple times before we have to re-reserve log space when we roll the transaction. This ensures that the common modifications we make only need to reserve log space once.</p> <p>\u56e0\u6b64\uff0c\u5f53\u9996\u6b21\u5206\u914d\u6c38\u4e45\u4e8b\u52a1\u65f6\uff0c\u65e5\u5fd7\u7a7a\u95f4\u4fdd\u7559\u4ece\u5355\u4e2a\u5355\u5143\u4fdd\u7559\u589e\u52a0\u5230\u591a\u4e2a\u5355\u5143\u4fdd\u7559\u3002\u8be5\u500d\u6570\u7531\u4fdd\u7559\u65e5\u5fd7\u8ba1\u6570\u5b9a\u4e49\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u53ef\u4ee5\u5728\u56de\u6eda\u4e8b\u52a1\u65f6\u91cd\u65b0\u4fdd\u7559\u65e5\u5fd7\u7a7a\u95f4\u4e4b\u524d\u591a\u6b21\u56de\u6eda\u4e8b\u52a1\u3002\u8fd9\u786e\u4fdd\u4e86\u6211\u4eec\u6240\u505a\u7684\u5e38\u89c1\u4fee\u6539\u53ea\u9700\u8981\u4fdd\u7559\u4e00\u6b21\u65e5\u5fd7\u7a7a\u95f4\u3002</p> <p>If the log count for a permanent transaction reaches zero, then it needs to re-reserve physical space in the log. This is somewhat complex, and requires an understanding of how the log accounts for space that has been reserved.</p> <p>\u5982\u679c\u6c38\u4e45\u4e8b\u52a1\u7684\u65e5\u5fd7\u8ba1\u6570\u4e3a\u96f6\uff0c\u5219\u9700\u8981\u5728\u65e5\u5fd7\u4e2d\u91cd\u65b0\u4fdd\u7559\u7269\u7406\u7a7a\u95f4\u3002\u8fd9\u6709\u70b9\u590d\u6742\uff0c\u9700\u8981\u4e86\u89e3\u65e5\u5fd7\u5982\u4f55\u8bb0\u5f55\u5df2\u4fdd\u7559\u7684\u7a7a\u95f4\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/xfs/XFS%20Logging%20Design-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#6-log-space-accounting","title":"6 Log Space Accounting","text":"<p>The position in the log is typically referred to as a Log Sequence Number (LSN). The log is circular, so the positions in the log are defined by the combination of a cycle number - the number of times the log has been overwritten - and the offset into the log. A LSN carries the cycle in the upper 32 bits and the offset in the lower 32 bits. The offset is in units of \u201cbasic blocks\u201d (512 bytes). Hence we can do realtively simple LSN based math to keep track of available space in the log.</p> <p>\u65e5\u5fd7\u4e2d\u7684\u4f4d\u7f6e\u901a\u5e38\u79f0\u4e3a\u65e5\u5fd7\u5e8f\u5217\u53f7\uff08LSN\uff09\u3002\u65e5\u5fd7\u662f\u5faa\u73af\u7684\uff0c\u56e0\u6b64\u65e5\u5fd7\u4e2d\u7684\u4f4d\u7f6e\u7531\u5faa\u73af\u6570\uff08\u65e5\u5fd7\u88ab\u8986\u76d6\u7684\u6b21\u6570\uff09\u548c\u65e5\u5fd7\u4e2d\u7684\u504f\u79fb\u91cf\u7684\u7ec4\u5408\u6765\u5b9a\u4e49\u3002LSN\u5728\u9ad8\u4f4d32\u4f4d\u4e2d\u643a\u5e26\u5468\u671f\uff0c\u5728\u4f4e\u4f4d32\u4f4d\u4e2d\u627f\u8f7d\u504f\u79fb\u3002\u504f\u79fb\u91cf\u4ee5\u201c\u57fa\u672c\u5757\u201d\uff08512\u5b57\u8282\uff09\u4e3a\u5355\u4f4d\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u8fdb\u884c\u975e\u5e38\u7b80\u5355\u7684\u57fa\u4e8eLSN\u7684\u6570\u5b66\u6765\u8ddf\u8e2a\u65e5\u5fd7\u4e2d\u7684\u53ef\u7528\u7a7a\u95f4\u3002</p> <p>Log space accounting is done via a pair of constructs called \u201cgrant heads\u201d. The position of the grant heads is an absolute value, so the amount of space available in the log is defined by the distance between the position of the grant head and the current log tail. That is, how much space can be reserved/consumed before the grant heads would fully wrap the log and overtake the tail position.</p> <p>\u65e5\u5fd7\u7a7a\u95f4\u6838\u7b97\u662f\u901a\u8fc7\u4e00\u5bf9\u79f0\u4e3a\u201c\u6388\u6743\u5934\u201d\u7684\u7ed3\u6784\u5b8c\u6210\u7684\u3002\u6388\u6743\u5934\u7684\u4f4d\u7f6e\u662f\u4e00\u4e2a\u7edd\u5bf9\u503c\uff0c\u56e0\u6b64\u65e5\u5fd7\u4e2d\u53ef\u7528\u7684\u7a7a\u95f4\u91cf\u7531\u6388\u6743\u5934\u4f4d\u7f6e\u548c\u5f53\u524d\u65e5\u5fd7\u5c3e\u90e8\u4e4b\u95f4\u7684\u8ddd\u79bb\u5b9a\u4e49\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5728\u6388\u4e88\u8005\u5b8c\u5168\u5305\u88f9\u539f\u6728\u5e76\u8d85\u8d8a\u5c3e\u90e8\u4f4d\u7f6e\u4e4b\u524d\uff0c\u53ef\u4ee5\u4fdd\u7559/\u6d88\u8017\u591a\u5c11\u7a7a\u95f4\u3002</p> <p>The first grant head is the \u201creserve\u201d head. This tracks the byte count of the reservations currently held by active transactions. It is a purely in-memory accounting of the space reservation and, as such, actually tracks byte offsets into the log rather than basic blocks. Hence it technically isn\u2019t using LSNs to represent the log position, but it is still treated like a split {cycle,offset} tuple for the purposes of tracking reservation space.</p> <p>\u7b2c\u4e00\u4e2a\u8d60\u6b3e\u9879\u76ee\u662f\u201c\u50a8\u5907\u201d\u9879\u76ee\u3002\u5b83\u8ddf\u8e2a\u6d3b\u52a8\u4e8b\u52a1\u5f53\u524d\u4fdd\u7559\u7684\u5b57\u8282\u6570\u3002\u5b83\u662f\u5bf9\u7a7a\u95f4\u4fdd\u7559\u7684\u4e00\u79cd\u7eaf\u7cb9\u7684\u5185\u5b58\u5185\u6838\u7b97\uff0c\u56e0\u6b64\uff0c\u5b83\u5b9e\u9645\u4e0a\u8ddf\u8e2a\u65e5\u5fd7\u4e2d\u7684\u5b57\u8282\u504f\u79fb\u91cf\uff0c\u800c\u4e0d\u662f\u57fa\u672c\u5757\u3002\u56e0\u6b64\uff0c\u4ece\u6280\u672f\u4e0a\u8bb2\uff0c\u5b83\u4e0d\u4f7f\u7528LSN\u6765\u8868\u793a\u65e5\u5fd7\u4f4d\u7f6e\uff0c\u4f46\u4e3a\u4e86\u8ddf\u8e2a\u4fdd\u7559\u7a7a\u95f4\uff0c\u5b83\u4ecd\u7136\u88ab\u89c6\u4e3a\u62c6\u5206{\u5faa\u73af\uff0c\u504f\u79fb}\u5143\u7ec4\u3002</p> <p>The reserve grant head is used to accurately account for exact transaction reservations amounts and the exact byte count that modifications actually make and need to write into the log. The reserve head is used to prevent new transactions from taking new reservations when the head reaches the current tail. It will block new reservations in a FIFO queue and as the log tail moves forward it will wake them in order once sufficient space is available. This FIFO mechanism ensures no transaction is starved of resources when log space shortages occur.</p> <p>\u4fdd\u7559\u6388\u6743\u5934\u7528\u4e8e\u51c6\u786e\u5730\u8bf4\u660e\u786e\u5207\u7684\u4e8b\u52a1\u4fdd\u7559\u91cf\u548c\u5b9e\u9645\u8fdb\u884c\u7684\u4fee\u6539\u4ee5\u53ca\u9700\u8981\u5199\u5165\u65e5\u5fd7\u7684\u786e\u5207\u5b57\u8282\u6570\u3002\u4fdd\u7559\u5934\u90e8\u7528\u4e8e\u9632\u6b62\u65b0\u4e8b\u52a1\u5728\u5934\u90e8\u5230\u8fbe\u5f53\u524d\u5c3e\u90e8\u65f6\u8fdb\u884c\u65b0\u7684\u4fdd\u7559\u3002\u5b83\u5c06\u963b\u6b62FIFO\u961f\u5217\u4e2d\u7684\u65b0\u4fdd\u7559\uff0c\u5f53\u65e5\u5fd7\u5c3e\u90e8\u5411\u524d\u79fb\u52a8\u65f6\uff0c\u4e00\u65e6\u6709\u8db3\u591f\u7684\u7a7a\u95f4\u53ef\u7528\uff0c\u5b83\u5c06\u6309\u987a\u5e8f\u5524\u9192\u5b83\u4eec\u3002\u8fd9\u79cdFIFO\u673a\u5236\u786e\u4fdd\u5728\u65e5\u5fd7\u7a7a\u95f4\u4e0d\u8db3\u65f6\u4e0d\u4f1a\u51fa\u73b0\u4e8b\u52a1\u8d44\u6e90\u4e0d\u8db3\u7684\u60c5\u51b5\u3002</p> <p>The other grant head is the \u201cwrite\u201d head. Unlike the reserve head, this grant head contains an LSN and it tracks the physical space usage in the log. While this might sound like it is accounting the same state as the reserve grant head - and it mostly does track exactly the same location as the reserve grant head - there are critical differences in behaviour between them that provides the forwards progress guarantees that rolling permanent transactions require.</p> <p>\u53e6\u4e00\u4e2a\u8d60\u6b3e\u8d1f\u8d23\u4eba\u662f\u201c\u5199\u201d\u8d1f\u8d23\u4eba\u3002\u4e0e\u4fdd\u7559\u6807\u5934\u4e0d\u540c\uff0c\u6b64\u6388\u6743\u6807\u5934\u5305\u542bLSN\uff0c\u5e76\u8ddf\u8e2a\u65e5\u5fd7\u4e2d\u7684\u7269\u7406\u7a7a\u95f4\u4f7f\u7528\u60c5\u51b5\u3002\u867d\u7136\u8fd9\u542c\u8d77\u6765\u50cf\u662f\u5728\u8ba1\u7b97\u4e0e\u50a8\u5907\u8d60\u6b3e\u8d1f\u8d23\u4eba\u76f8\u540c\u7684\u72b6\u6001-\u800c\u4e14\u5b83\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u786e\u5b9e\u8ddf\u8e2a\u4e0e\u50a8\u5907\u8d60\u6b3e\u4e3b\u7ba1\u5b8c\u5168\u76f8\u540c\u7684\u4f4d\u7f6e-\u4f46\u5b83\u4eec\u4e4b\u95f4\u7684\u884c\u4e3a\u5b58\u5728\u91cd\u5927\u5dee\u5f02\uff0c\u63d0\u4f9b\u4e86\u6eda\u52a8\u6c38\u4e45\u4ea4\u6613\u6240\u9700\u7684\u8fdc\u671f\u8fdb\u5ea6\u4fdd\u8bc1\u3002</p> <p>These differences when a permanent transaction is rolled and the internal \u201clog count\u201d reaches zero and the initial set of unit reservations have been exhausted. At this point, we still require a log space reservation to continue the next transaction in the sequeunce, but we have none remaining. We cannot sleep during the transaction commit process waiting for new log space to become available, as we may end up on the end of the FIFO queue and the items we have locked while we sleep could end up pinning the tail of the log before there is enough free space in the log to fulfill all of the pending reservations and then wake up transaction commit in progress.</p> <p>\u5f53\u4e00\u4e2a\u6c38\u4e45\u4e8b\u52a1\u88ab\u56de\u6eda\uff0c\u5185\u90e8\u201c\u65e5\u5fd7\u8ba1\u6570\u201d\u4e3a\u96f6\uff0c\u5e76\u4e14\u521d\u59cb\u7684\u5355\u5143\u4fdd\u7559\u96c6\u5df2\u7528\u5b8c\u65f6\uff0c\u8fd9\u4e9b\u5dee\u5f02\u5c31\u4f1a\u51fa\u73b0\u3002\u6b64\u65f6\uff0c\u6211\u4eec\u4ecd\u7136\u9700\u8981\u4fdd\u7559\u65e5\u5fd7\u7a7a\u95f4\u4ee5\u7ee7\u7eed\u540e\u7eed\u7684\u4e0b\u4e00\u4e2a\u4e8b\u52a1\uff0c\u4f46\u6211\u4eec\u6ca1\u6709\u5269\u4f59\u7684\u4e8b\u52a1\u3002\u5728\u4e8b\u52a1\u63d0\u4ea4\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u4e0d\u80fd\u5728\u7b49\u5f85\u65b0\u7684\u65e5\u5fd7\u7a7a\u95f4\u53d8\u4e3a\u53ef\u7528\u65f6\u7761\u89c9\uff0c\u56e0\u4e3a\u6211\u4eec\u53ef\u80fd\u4f1a\u5728FIFO\u961f\u5217\u7684\u672b\u5c3e\u7ed3\u675f\uff0c\u800c\u6211\u4eec\u5728\u7761\u89c9\u65f6\u9501\u5b9a\u7684\u9879\u76ee\u53ef\u80fd\u4f1a\u5728\u65e5\u5fd7\u4e2d\u6709\u8db3\u591f\u7684\u53ef\u7528\u7a7a\u95f4\u6765\u5b8c\u6210\u6240\u6709\u5f85\u51b3\u4fdd\u7559\u4e4b\u524d\u9501\u5b9a\u65e5\u5fd7\u7684\u5c3e\u90e8\uff0c\u7136\u540e\u5524\u9192\u6b63\u5728\u8fdb\u884c\u7684\u4e8b\u52a1\u63d0\u4ea4\u3002</p> <p>To take a new reservation without sleeping requires us to be able to take a reservation even if there is no reservation space currently available. That is, we need to be able to overcommit the log reservation space. As has already been detailed, we cannot overcommit physical log space. However, the reserve grant head does not track physical space - it only accounts for the amount of reservations we currently have outstanding. Hence if the reserve head passes over the tail of the log all it means is that new reservations will be throttled immediately and remain throttled until the log tail is moved forward far enough to remove the overcommit and start taking new reservations. In other words, we can overcommit the reserve head without violating the physical log head and tail rules.</p> <p>\u8981\u5728\u4e0d\u7761\u89c9\u7684\u60c5\u51b5\u4e0b\u8fdb\u884c\u65b0\u7684\u9884\u8ba2\uff0c\u6211\u4eec\u9700\u8981\u80fd\u591f\u8fdb\u884c\u9884\u8ba2\uff0c\u5373\u4f7f\u5f53\u524d\u6ca1\u6709\u53ef\u7528\u7684\u9884\u8ba2\u7a7a\u95f4\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u9700\u8981\u80fd\u591f\u201c\u8fc7\u5ea6\u4f7f\u7528\u201d\u65e5\u5fd7\u4fdd\u7559\u7a7a\u95f4\u3002\u5982\u524d\u6240\u8ff0\uff0c\u6211\u4eec\u4e0d\u80fd\u8fc7\u5ea6\u4f7f\u7528\u7269\u7406\u65e5\u5fd7\u7a7a\u95f4\u3002\u7136\u800c\uff0c\u50a8\u5907\u8d60\u6b3e\u8d1f\u8d23\u4eba\u5e76\u4e0d\u8ddf\u8e2a\u5b9e\u9645\u7a7a\u95f4\u2014\u2014\u5b83\u53ea\u8bf4\u660e\u6211\u4eec\u76ee\u524d\u5c1a\u672a\u5b8c\u6210\u7684\u50a8\u5907\u6570\u91cf\u3002\u56e0\u6b64\uff0c\u5982\u679c\u4fdd\u7559\u5934\u90e8\u8d8a\u8fc7\u65e5\u5fd7\u5c3e\u90e8\uff0c\u5219\u610f\u5473\u7740\u65b0\u7684\u4fdd\u7559\u5c06\u7acb\u5373\u88ab\u6291\u5236\uff0c\u5e76\u4fdd\u6301\u6291\u5236\u72b6\u6001\uff0c\u76f4\u5230\u65e5\u5fd7\u5c3e\u90e8\u5411\u524d\u79fb\u52a8\u8db3\u591f\u8fdc\uff0c\u4ee5\u6d88\u9664\u8fc7\u5ea6\u627f\u8bfa\u5e76\u5f00\u59cb\u91c7\u53d6\u65b0\u7684\u4fdd\u7559\u3002\u6362\u8a00\u4e4b\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u4e0d\u8fdd\u53cd\u7269\u7406\u65e5\u5fd7\u5934\u548c\u5c3e\u89c4\u5219\u7684\u60c5\u51b5\u4e0b\u8fc7\u5ea6\u4f7f\u7528\u4fdd\u7559\u5934\u3002</p> <p>As a result, permanent transactions only \u201cregrant\u201d reservation space during xfs_trans_commit() calls, while the physical log space reservation - tracked by the write head - is then reserved separately by a call to xfs_log_reserve() after the commit completes. Once the commit completes, we can sleep waiting for physical log space to be reserved from the write grant head, but only if one critical rule has been observed:</p> <p>\u56e0\u6b64\uff0c\u5728xfs_trans_commit\uff08\uff09\u8c03\u7528\u671f\u95f4\uff0c\u6c38\u4e45\u4e8b\u52a1\u53ea\u201c\u91cd\u65b0\u5206\u914d\u201d\u4fdd\u7559\u7a7a\u95f4\uff0c\u800c\u7269\u7406\u65e5\u5fd7\u7a7a\u95f4\u4fdd\u7559\uff08\u7531\u5199\u5934\u8ddf\u8e2a\uff09\u5219\u5728\u63d0\u4ea4\u5b8c\u6210\u540e\u901a\u8fc7\u8c03\u7528xfs_log_reserve\uff08\uff09\u5355\u72ec\u4fdd\u7559\u3002\u63d0\u4ea4\u5b8c\u6210\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u4f11\u7720\uff0c\u7b49\u5f85\u4ece\u5199\u5165\u6388\u6743\u5934\u4fdd\u7559\u7269\u7406\u65e5\u5fd7\u7a7a\u95f4\uff0c\u4f46\u524d\u63d0\u662f\u5fc5\u987b\u9075\u5b88\u4e00\u6761\u5173\u952e\u89c4\u5219\uff1a</p> <pre><code>Code using permanent reservations must always log the items they hold\nlocked across each transaction they roll in the chain.\n</code></pre> <p>\u201cRe-logging\u201d the locked items on every transaction roll ensures that the items attached to the transaction chain being rolled are always relocated to the physical head of the log and so do not pin the tail of the log. If a locked item pins the tail of the log when we sleep on the write reservation, then we will deadlock the log as we cannot take the locks needed to write back that item and move the tail of the log forwards to free up write grant space. Re-logging the locked items avoids this deadlock and guarantees that the log reservation we are making cannot self-deadlock.</p> <p>\u201c\u91cd\u65b0\u8bb0\u5f55\u201d\u6bcf\u4e2a\u4e8b\u52a1\u5377\u4e0a\u7684\u9501\u5b9a\u9879\u53ef\u786e\u4fdd\u9644\u52a0\u5230\u6b63\u5728\u6eda\u52a8\u7684\u4e8b\u52a1\u94fe\u7684\u9879\u59cb\u7ec8\u91cd\u65b0\u5b9a\u4f4d\u5230\u65e5\u5fd7\u7684\u7269\u7406\u5934\u90e8\uff0c\u56e0\u6b64\u4e0d\u4f1a\u56fa\u5b9a\u65e5\u5fd7\u7684\u5c3e\u90e8\u3002\u5982\u679c\u5f53\u6211\u4eec\u5728\u5199\u4fdd\u7559\u4e0a\u4f11\u7720\u65f6\uff0c\u9501\u5b9a\u9879\u9501\u5b9a\u4e86\u65e5\u5fd7\u7684\u5c3e\u90e8\uff0c\u90a3\u4e48\u6211\u4eec\u5c06\u6b7b\u9501\u65e5\u5fd7\uff0c\u56e0\u4e3a\u6211\u4eec\u65e0\u6cd5\u83b7\u53d6\u5199\u56de\u8be5\u9879\u6240\u9700\u7684\u9501\uff0c\u5e76\u5411\u524d\u79fb\u52a8\u65e5\u5fd7\u5c3e\u90e8\u4ee5\u91ca\u653e\u5199\u6388\u6743\u7a7a\u95f4\u3002\u91cd\u65b0\u8bb0\u5f55\u9501\u5b9a\u9879\u53ef\u4ee5\u907f\u514d\u8fd9\u79cd\u6b7b\u9501\uff0c\u5e76\u786e\u4fdd\u6211\u4eec\u6b63\u5728\u8fdb\u884c\u7684\u65e5\u5fd7\u4fdd\u7559\u4e0d\u4f1a\u81ea\u6b7b\u9501\u3002</p> <p>If all rolling transactions obey this rule, then they can all make forwards progress independently because nothing will block the progress of the log tail moving forwards and hence ensuring that write grant space is always (eventually) made available to permanent transactions no matter how many times they roll.</p> <p>\u5982\u679c\u6240\u6709\u6eda\u52a8\u4e8b\u52a1\u90fd\u9075\u5b88\u6b64\u89c4\u5219\uff0c\u90a3\u4e48\u5b83\u4eec\u90fd\u53ef\u4ee5\u72ec\u7acb\u5730\u5411\u524d\u79fb\u52a8\uff0c\u56e0\u4e3a\u6ca1\u6709\u4efb\u4f55\u4e1c\u897f\u4f1a\u963b\u6b62\u65e5\u5fd7\u5c3e\u90e8\u5411\u524d\u79fb\u52a8\u7684\u8fdb\u7a0b\uff0c\u56e0\u6b64\u786e\u4fdd\u65e0\u8bba\u6c38\u4e45\u4e8b\u52a1\u6eda\u52a8\u591a\u5c11\u6b21\uff0c\u5199\u5165\u6388\u6743\u7a7a\u95f4\u59cb\u7ec8\uff08\u6700\u7ec8\uff09\u53ef\u7528\u4e8e\u6c38\u4e45\u4e8b\u52a1\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/xfs/XFS%20Logging%20Design-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#7-re-logging-explained","title":"7 Re-logging Explained","text":"<p>XFS allows multiple separate modifications to a single object to be carried in the log at any given time. This allows the log to avoid needing to flush each change to disk before recording a new change to the object. XFS does this via a method called \u201cre-logging\u201d. Conceptually, this is quite simple - all it requires is that any new change to the object is recorded with a new copy of all the existing changes in the new transaction that is written to the log.</p> <p>XFS\u5141\u8bb8\u5728\u4efb\u4f55\u7ed9\u5b9a\u65f6\u95f4\u5728\u65e5\u5fd7\u4e2d\u643a\u5e26\u5bf9\u5355\u4e2a\u5bf9\u8c61\u7684\u591a\u4e2a\u5355\u72ec\u4fee\u6539\u3002\u8fd9\u5141\u8bb8\u65e5\u5fd7\u907f\u514d\u5728\u8bb0\u5f55\u5bf9\u8c61\u7684\u65b0\u66f4\u6539\u4e4b\u524d\u5c06\u6bcf\u4e2a\u66f4\u6539\u5237\u65b0\u5230\u78c1\u76d8\u3002XFS\u901a\u8fc7\u4e00\u79cd\u53eb\u505a\u201c\u91cd\u65b0\u8bb0\u5f55\u201d\u7684\u65b9\u6cd5\u6765\u5b9e\u73b0\u8fd9\u4e00\u70b9\u3002\u4ece\u6982\u5ff5\u4e0a\u8bb2\uff0c\u8fd9\u975e\u5e38\u7b80\u5355\u2014\u2014\u5b83\u6240\u9700\u8981\u7684\u5c31\u662f\uff0c\u5bf9\u5bf9\u8c61\u7684\u4efb\u4f55\u65b0\u66f4\u6539\u90fd\u8981\u8bb0\u5f55\u5230\u65b0\u4e8b\u52a1\u4e2d\u6240\u6709\u73b0\u6709\u66f4\u6539\u7684\u65b0\u526f\u672c\u4e2d\uff0c\u8fd9\u4e9b\u66f4\u6539\u5c06\u5199\u5165\u65e5\u5fd7\u3002</p> <p>That is, if we have a sequence of changes A through to F, and the object was written to disk after change D, we would see in the log the following series of transactions, their contents and the log sequence number (LSN) of the transaction:</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u6211\u4eec\u6709\u4e00\u7cfb\u5217\u4ecea\u5230F\u7684\u66f4\u6539\uff0c\u5e76\u4e14\u5bf9\u8c61\u5728\u66f4\u6539D\u4e4b\u540e\u88ab\u5199\u5165\u78c1\u76d8\uff0c\u6211\u4eec\u5c06\u5728\u65e5\u5fd7\u4e2d\u770b\u5230\u4ee5\u4e0b\u4e00\u7cfb\u5217\u4e8b\u52a1\u3001\u5b83\u4eec\u7684\u5185\u5bb9\u548c\u4e8b\u52a1\u7684\u65e5\u5fd7\u5e8f\u5217\u53f7\uff08LSN\uff09\uff1a</p> <pre><code>Transaction             Contents        LSN\n   A                       A               X\n   B                      A+B             X+n\n   C                     A+B+C           X+n+m\n   D                    A+B+C+D         X+n+m+o\n    &lt;object written to disk&gt;\n   E                       E               Y (&gt; X+n+m+o)\n   F                      E+F             Y+p\n</code></pre> <p>In other words, each time an object is relogged, the new transaction contains the aggregation of all the previous changes currently held only in the log.</p> <p>\u6362\u53e5\u8bdd\u8bf4\uff0c\u6bcf\u6b21\u91cd\u65b0\u8bb0\u5f55\u5bf9\u8c61\u65f6\uff0c\u65b0\u4e8b\u52a1\u90fd\u5305\u542b\u5f53\u524d\u4ec5\u4fdd\u5b58\u5728\u65e5\u5fd7\u4e2d\u7684\u6240\u6709\u5148\u524d\u66f4\u6539\u7684\u805a\u5408\u3002</p> <p>This relogging technique allows objects to be moved forward in the log so that an object being relogged does not prevent the tail of the log from ever moving forward. This can be seen in the table above by the changing (increasing) LSN of each subsequent transaction, and it\u2019s the technique that allows us to implement long-running, multiple-commit permanent transactions.</p> <p>\u8fd9\u79cd\u91cd\u65b0\u8bb0\u5f55\u6280\u672f\u5141\u8bb8\u5bf9\u8c61\u5728\u65e5\u5fd7\u4e2d\u5411\u524d\u79fb\u52a8\uff0c\u4ee5\u4fbf\u91cd\u65b0\u8bb0\u5f55\u7684\u5bf9\u8c61\u4e0d\u4f1a\u963b\u6b62\u65e5\u5fd7\u7684\u5c3e\u90e8\u5411\u524d\u79fb\u52a8\u3002\u4ece\u4e0a\u8868\u4e2d\u53ef\u4ee5\u770b\u51fa\uff0c\u6bcf\u4e2a\u540e\u7eed\u4e8b\u52a1\u7684LSN\u90fd\u5728\u53d8\u5316\uff08\u589e\u52a0\uff09\uff0c\u8fd9\u662f\u4e00\u79cd\u5141\u8bb8\u6211\u4eec\u5b9e\u73b0\u957f\u65f6\u95f4\u8fd0\u884c\u3001\u591a\u6b21\u63d0\u4ea4\u6c38\u4e45\u4e8b\u52a1\u7684\u6280\u672f\u3002</p> <p>A typical example of a rolling transaction is the removal of extents from an inode which can only be done at a rate of two extents per transaction because of reservation size limitations. Hence a rolling extent removal transaction keeps relogging the inode and btree buffers as they get modified in each removal operation. This keeps them moving forward in the log as the operation progresses, ensuring that current operation never gets blocked by itself if the log wraps around.</p> <p>\u6eda\u52a8\u4e8b\u52a1\u7684\u4e00\u4e2a\u5178\u578b\u793a\u4f8b\u662f\u4eceinode\u4e2d\u5220\u9664\u6269\u5c55\u6570\u636e\u5757\uff0c\u7531\u4e8e\u4fdd\u7559\u5927\u5c0f\u7684\u9650\u5236\uff0c\u53ea\u80fd\u4ee5\u6bcf\u4e2a\u4e8b\u52a1\u4e24\u4e2a\u6269\u5c55\u6570\u636e\u5757\u7684\u901f\u7387\u8fdb\u884c\u5220\u9664\u3002\u56e0\u6b64\uff0c\u6eda\u52a8\u6570\u636e\u5757\u5220\u9664\u4e8b\u52a1\u4f1a\u5728\u6bcf\u6b21\u5220\u9664\u64cd\u4f5c\u4e2d\u4fee\u6539\u7d22\u5f15\u8282\u70b9\u548cbtree\u7f13\u51b2\u533a\u65f6\u4e0d\u65ad\u91cd\u65b0\u8bb0\u5f55\u5b83\u4eec\u3002\u8fd9\u4f1a\u4f7f\u5b83\u4eec\u5728\u64cd\u4f5c\u8fdb\u884c\u8fc7\u7a0b\u4e2d\u5728\u65e5\u5fd7\u4e2d\u7ee7\u7eed\u524d\u8fdb\uff0c\u786e\u4fdd\u5728\u65e5\u5fd7\u7ed3\u675f\u65f6\u5f53\u524d\u64cd\u4f5c\u4e0d\u4f1a\u88ab\u81ea\u8eab\u963b\u6b62\u3002</p> <p>Hence it can be seen that the relogging operation is fundamental to the correct working of the XFS journalling subsystem. From the above description, most people should be able to see why the XFS metadata operations writes so much to the log - repeated operations to the same objects write the same changes to the log over and over again. Worse is the fact that objects tend to get dirtier as they get relogged, so each subsequent transaction is writing more metadata into the log.</p> <p>\u56e0\u6b64\u53ef\u4ee5\u770b\u51fa\uff0c\u91cd\u65b0\u8bb0\u5f55\u64cd\u4f5c\u662fXFS\u65e5\u5fd7\u5b50\u7cfb\u7edf\u6b63\u786e\u5de5\u4f5c\u7684\u57fa\u7840\u3002\u4ece\u4e0a\u9762\u7684\u63cf\u8ff0\u4e2d\uff0c\u5927\u591a\u6570\u4eba\u5e94\u8be5\u80fd\u591f\u7406\u89e3\u4e3a\u4ec0\u4e48XFS\u5143\u6570\u636e\u64cd\u4f5c\u4f1a\u5411\u65e5\u5fd7\u5199\u5165\u8fd9\u4e48\u591a\u5185\u5bb9\u2014\u2014\u5bf9\u76f8\u540c\u5bf9\u8c61\u7684\u91cd\u590d\u64cd\u4f5c\u4f1a\u4e00\u6b21\u53c8\u4e00\u6b21\u5730\u5411\u65e5\u5fd7\u5199\u5165\u76f8\u540c\u7684\u66f4\u6539\u3002\u66f4\u7cdf\u7cd5\u7684\u662f\uff0c\u5f53\u5bf9\u8c61\u88ab\u91cd\u65b0\u8bb0\u5f55\u65f6\uff0c\u5b83\u4eec\u5f80\u5f80\u4f1a\u53d8\u5f97\u66f4\u810f\uff0c\u56e0\u6b64\u6bcf\u4e2a\u540e\u7eed\u4e8b\u52a1\u90fd\u4f1a\u5411\u65e5\u5fd7\u4e2d\u5199\u5165\u66f4\u591a\u5143\u6570\u636e\u3002</p> <p>It should now also be obvious how relogging and asynchronous transactions go hand in hand. That is, transactions don\u2019t get written to the physical journal until either a log buffer is filled (a log buffer can hold multiple transactions) or a synchronous operation forces the log buffers holding the transactions to disk. This means that XFS is doing aggregation of transactions in memory - batching them, if you like - to minimise the impact of the log IO on transaction throughput.</p> <p>\u73b0\u5728\uff0c\u91cd\u65b0\u8bb0\u5f55\u548c\u5f02\u6b65\u4e8b\u52a1\u662f\u5982\u4f55\u5e76\u884c\u7684\uff0c\u8fd9\u4e00\u70b9\u4e5f\u5e94\u8be5\u5f88\u660e\u663e\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u76f4\u5230\u65e5\u5fd7\u7f13\u51b2\u533a\u88ab\u586b\u6ee1\uff08\u65e5\u5fd7\u7f13\u51b2\u533a\u53ef\u4ee5\u5bb9\u7eb3\u591a\u4e2a\u4e8b\u52a1\uff09\uff0c\u6216\u8005\u540c\u6b65\u64cd\u4f5c\u5f3a\u5236\u5c06\u4fdd\u5b58\u4e8b\u52a1\u7684\u65e5\u5fd7\u7f13\u51b2\u533a\u5199\u5165\u78c1\u76d8\uff0c\u4e8b\u52a1\u624d\u4f1a\u5199\u5165\u7269\u7406\u65e5\u5fd7\u3002\u8fd9\u610f\u5473\u7740XFS\u6b63\u5728\u5185\u5b58\u4e2d\u805a\u5408\u4e8b\u52a1\u2014\u2014\u5982\u679c\u60a8\u613f\u610f\uff0c\u53ef\u4ee5\u5bf9\u5b83\u4eec\u8fdb\u884c\u6279\u5904\u7406\u2014\u2014\u4ee5\u6700\u5927\u9650\u5ea6\u5730\u51cf\u5c11\u65e5\u5fd7IO\u5bf9\u4e8b\u52a1\u541e\u5410\u91cf\u7684\u5f71\u54cd\u3002</p> <p>The limitation on asynchronous transaction throughput is the number and size of log buffers made available by the log manager. By default there are 8 log buffers available and the size of each is 32kB - the size can be increased up to 256kB by use of a mount option.</p> <p>\u5f02\u6b65\u4e8b\u52a1\u541e\u5410\u91cf\u7684\u9650\u5236\u662f\u65e5\u5fd7\u7ba1\u7406\u5668\u63d0\u4f9b\u7684\u65e5\u5fd7\u7f13\u51b2\u533a\u7684\u6570\u91cf\u548c\u5927\u5c0f\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u67098\u4e2a\u53ef\u7528\u7684\u65e5\u5fd7\u7f13\u51b2\u533a\uff0c\u6bcf\u4e2a\u7f13\u51b2\u533a\u7684\u5927\u5c0f\u4e3a32kB-\u901a\u8fc7\u4f7f\u7528\u88c5\u8f7d\u9009\u9879\uff0c\u5927\u5c0f\u53ef\u4ee5\u589e\u52a0\u5230256kB\u3002</p> <p>Effectively, this gives us the maximum bound of outstanding metadata changes that can be made to the filesystem at any point in time - if all the log buffers are full and under IO, then no more transactions can be committed until the current batch completes. It is now common for a single current CPU core to be to able to issue enough transactions to keep the log buffers full and under IO permanently. Hence the XFS journalling subsystem can be considered to be IO bound.</p> <p>\u5b9e\u9645\u4e0a\uff0c\u8fd9\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u5728\u4efb\u4f55\u65f6\u95f4\u70b9\u90fd\u53ef\u4ee5\u5bf9\u6587\u4ef6\u7cfb\u7edf\u8fdb\u884c\u7684\u672a\u5b8c\u6210\u5143\u6570\u636e\u66f4\u6539\u7684\u6700\u5927\u9650\u5ea6\u2014\u2014\u5982\u679c\u6240\u6709\u65e5\u5fd7\u7f13\u51b2\u533a\u90fd\u5df2\u6ee1\u4e14\u5904\u4e8eIO\u72b6\u6001\uff0c\u5219\u5728\u5f53\u524d\u6279\u5904\u7406\u5b8c\u6210\u4e4b\u524d\uff0c\u65e0\u6cd5\u63d0\u4ea4\u66f4\u591a\u4e8b\u52a1\u3002\u73b0\u5728\uff0c\u5355\u4e2a\u5f53\u524dCPU\u5185\u6838\u80fd\u591f\u53d1\u51fa\u8db3\u591f\u7684\u4e8b\u52a1\uff0c\u4ee5\u4fdd\u6301\u65e5\u5fd7\u7f13\u51b2\u533a\u5df2\u6ee1\u5e76\u6c38\u4e45\u5904\u4e8eIO\u72b6\u6001\u662f\u5f88\u5e38\u89c1\u7684\u3002\u56e0\u6b64\uff0cXFS\u65e5\u5fd7\u5b50\u7cfb\u7edf\u53ef\u4ee5\u88ab\u8ba4\u4e3a\u662fIO\u7ed1\u5b9a\u7684\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/xfs/XFS%20Logging%20Design-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#8-delayed-logging-concepts","title":"8 Delayed Logging: Concepts","text":"<p>The key thing to note about the asynchronous logging combined with the relogging technique XFS uses is that we can be relogging changed objects multiple times before they are committed to disk in the log buffers. If we return to the previous relogging example, it is entirely possible that transactions A through D are committed to disk in the same log buffer.</p> <p>\u5173\u4e8e\u4e0eXFS\u4f7f\u7528\u7684\u91cd\u65b0\u8bb0\u5f55\u6280\u672f\u76f8\u7ed3\u5408\u7684\u5f02\u6b65\u65e5\u5fd7\u8bb0\u5f55\uff0c\u9700\u8981\u6ce8\u610f\u7684\u4e00\u70b9\u662f\uff0c\u5728\u5c06\u66f4\u6539\u7684\u5bf9\u8c61\u63d0\u4ea4\u5230\u65e5\u5fd7\u7f13\u51b2\u533a\u4e2d\u7684\u78c1\u76d8\u4e4b\u524d\uff0c\u6211\u4eec\u53ef\u4ee5\u591a\u6b21\u91cd\u65b0\u8bb0\u5f55\u5b83\u4eec\u3002\u5982\u679c\u6211\u4eec\u56de\u5230\u524d\u9762\u7684\u91cd\u65b0\u8bb0\u5f55\u793a\u4f8b\uff0c\u4e8b\u52a1A\u5230D\u5b8c\u5168\u6709\u53ef\u80fd\u88ab\u63d0\u4ea4\u5230\u540c\u4e00\u65e5\u5fd7\u7f13\u51b2\u533a\u4e2d\u7684\u78c1\u76d8\u3002</p> <p>That is, a single log buffer may contain multiple copies of the same object, but only one of those copies needs to be there - the last one \u201cD\u201d, as it contains all the changes from the previous changes. In other words, we have one necessary copy in the log buffer, and three stale copies that are simply wasting space. When we are doing repeated operations on the same set of objects, these \u201cstale objects\u201d can be over 90% of the space used in the log buffers. It is clear that reducing the number of stale objects written to the log would greatly reduce the amount of metadata we write to the log, and this is the fundamental goal of delayed logging.</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e00\u4e2a\u65e5\u5fd7\u7f13\u51b2\u533a\u53ef\u80fd\u5305\u542b\u540c\u4e00\u4e2a\u5bf9\u8c61\u7684\u591a\u4e2a\u526f\u672c\uff0c\u4f46\u8fd9\u4e9b\u526f\u672c\u4e2d\u53ea\u9700\u8981\u6709\u4e00\u4e2a\u526f\u672c\uff0c\u5373\u6700\u540e\u4e00\u4e2a\u201cD\u201d\uff0c\u56e0\u4e3a\u5b83\u5305\u542b\u4ee5\u524d\u66f4\u6539\u7684\u6240\u6709\u66f4\u6539\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u6211\u4eec\u5728\u65e5\u5fd7\u7f13\u51b2\u533a\u4e2d\u6709\u4e00\u4e2a\u5fc5\u8981\u7684\u526f\u672c\uff0c\u8fd8\u6709\u4e09\u4e2a\u8fc7\u65f6\u7684\u526f\u672c\uff0c\u8fd9\u53ea\u662f\u5728\u6d6a\u8d39\u7a7a\u95f4\u3002\u5f53\u6211\u4eec\u5bf9\u540c\u4e00\u7ec4\u5bf9\u8c61\u6267\u884c\u91cd\u590d\u64cd\u4f5c\u65f6\uff0c\u8fd9\u4e9b\u201c\u8fc7\u65f6\u5bf9\u8c61\u201d\u53ef\u80fd\u5360\u65e5\u5fd7\u7f13\u51b2\u533a\u4e2d\u4f7f\u7528\u7a7a\u95f4\u768490%\u4ee5\u4e0a\u3002\u5f88\u660e\u663e\uff0c\u51cf\u5c11\u5199\u5165\u65e5\u5fd7\u7684\u8fc7\u65f6\u5bf9\u8c61\u7684\u6570\u91cf\u5c06\u5927\u5927\u51cf\u5c11\u6211\u4eec\u5199\u5165\u65e5\u5fd7\u7684\u5143\u6570\u636e\u91cf\uff0c\u8fd9\u662f\u5ef6\u8fdf\u65e5\u5fd7\u7684\u57fa\u672c\u76ee\u6807\u3002</p> <p>From a conceptual point of view, XFS is already doing relogging in memory (where memory == log buffer), only it is doing it extremely inefficiently. It is using logical to physical formatting to do the relogging because there is no infrastructure to keep track of logical changes in memory prior to physically formatting the changes in a transaction to the log buffer. Hence we cannot avoid accumulating stale objects in the log buffers.</p> <p>\u4ece\u6982\u5ff5\u7684\u89d2\u5ea6\u6765\u770b\uff0cXFS\u5df2\u7ecf\u5728\u5185\u5b58\u4e2d\u8fdb\u884c\u4e86\u91cd\u65b0\u8bb0\u5f55\uff08\u5176\u4e2d\u5185\u5b58==\u65e5\u5fd7\u7f13\u51b2\u533a\uff09\uff0c\u4f46\u6548\u7387\u6781\u4f4e\u3002\u5b83\u4f7f\u7528\u903b\u8f91\u5230\u7269\u7406\u683c\u5f0f\u5316\u6765\u8fdb\u884c\u91cd\u65b0\u8bb0\u5f55\uff0c\u56e0\u4e3a\u5728\u5c06\u4e8b\u52a1\u4e2d\u7684\u66f4\u6539\u7269\u7406\u683c\u5f0f\u5316\u5230\u65e5\u5fd7\u7f13\u51b2\u533a\u4e4b\u524d\uff0c\u6ca1\u6709\u57fa\u7840\u8bbe\u65bd\u6765\u8ddf\u8e2a\u5185\u5b58\u4e2d\u7684\u903b\u8f91\u66f4\u6539\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u65e0\u6cd5\u907f\u514d\u5728\u65e5\u5fd7\u7f13\u51b2\u533a\u4e2d\u7d2f\u79ef\u8fc7\u65f6\u7684\u5bf9\u8c61\u3002</p> <p>Delayed logging is the name we\u2019ve given to keeping and tracking transactional changes to objects in memory outside the log buffer infrastructure. Because of the relogging concept fundamental to the XFS journalling subsystem, this is actually relatively easy to do - all the changes to logged items are already tracked in the current infrastructure. The big problem is how to accumulate them and get them to the log in a consistent, recoverable manner. Describing the problems and how they have been solved is the focus of this document.</p> <p>\u5ef6\u8fdf\u65e5\u5fd7\u8bb0\u5f55\u662f\u6211\u4eec\u4e3a\u5728\u65e5\u5fd7\u7f13\u51b2\u533a\u57fa\u7840\u7ed3\u6784\u4e4b\u5916\u7684\u5185\u5b58\u4e2d\u4fdd\u5b58\u548c\u8ddf\u8e2a\u5bf9\u8c61\u7684\u4e8b\u52a1\u6027\u66f4\u6539\u6240\u53d6\u7684\u540d\u79f0\u3002\u7531\u4e8eXFS\u65e5\u5fd7\u8bb0\u5f55\u5b50\u7cfb\u7edf\u57fa\u672c\u7684\u91cd\u65b0\u8bb0\u5f55\u6982\u5ff5\uff0c\u8fd9\u5b9e\u9645\u4e0a\u662f\u76f8\u5bf9\u5bb9\u6613\u505a\u5230\u7684\u2014\u2014\u5bf9\u8bb0\u5f55\u9879\u7684\u6240\u6709\u66f4\u6539\u90fd\u5df2\u7ecf\u5728\u5f53\u524d\u57fa\u7840\u7ed3\u6784\u4e2d\u8fdb\u884c\u4e86\u8ddf\u8e2a\u3002\u6700\u5927\u7684\u95ee\u9898\u662f\u5982\u4f55\u7d2f\u79ef\u5b83\u4eec\uff0c\u5e76\u4ee5\u4e00\u81f4\u3001\u53ef\u6062\u590d\u7684\u65b9\u5f0f\u5c06\u5b83\u4eec\u5199\u5165\u65e5\u5fd7\u3002\u63cf\u8ff0\u95ee\u9898\u53ca\u5176\u89e3\u51b3\u65b9\u6cd5\u662f\u672c\u6587\u4ef6\u7684\u91cd\u70b9\u3002</p> <p>One of the key changes that delayed logging makes to the operation of the journalling subsystem is that it disassociates the amount of outstanding metadata changes from the size and number of log buffers available. In other words, instead of there only being a maximum of 2MB of transaction changes not written to the log at any point in time, there may be a much greater amount being accumulated in memory. Hence the potential for loss of metadata on a crash is much greater than for the existing logging mechanism.</p> <p>\u5ef6\u8fdf\u65e5\u5fd7\u8bb0\u5f55\u5bf9\u65e5\u5fd7\u8bb0\u5f55\u5b50\u7cfb\u7edf\u7684\u64cd\u4f5c\u9020\u6210\u7684\u4e00\u4e2a\u5173\u952e\u53d8\u5316\u662f\uff0c\u5b83\u5c06\u672a\u5b8c\u6210\u7684\u5143\u6570\u636e\u66f4\u6539\u91cf\u4e0e\u53ef\u7528\u65e5\u5fd7\u7f13\u51b2\u533a\u7684\u5927\u5c0f\u548c\u6570\u91cf\u5206\u79bb\u3002\u6362\u8a00\u4e4b\uff0c\u5728\u4efb\u4f55\u65f6\u95f4\u70b9\uff0c\u6ca1\u6709\u5199\u5165\u65e5\u5fd7\u7684\u4e8b\u52a1\u66f4\u6539\u6700\u591a\u4e3a2MB\uff0c\u800c\u5185\u5b58\u4e2d\u7684\u7d2f\u79ef\u91cf\u53ef\u80fd\u66f4\u5927\u3002\u56e0\u6b64\uff0c\u4e0e\u73b0\u6709\u7684\u65e5\u5fd7\u8bb0\u5f55\u673a\u5236\u76f8\u6bd4\uff0c\u5d29\u6e83\u65f6\u5143\u6570\u636e\u4e22\u5931\u7684\u53ef\u80fd\u6027\u8981\u5927\u5f97\u591a\u3002</p> <p>It should be noted that this does not change the guarantee that log recovery will result in a consistent filesystem. What it does mean is that as far as the recovered filesystem is concerned, there may be many thousands of transactions that simply did not occur as a result of the crash. This makes it even more important that applications that care about their data use fsync() where they need to ensure application level data integrity is maintained.</p> <p>\u5e94\u8be5\u6ce8\u610f\uff0c\u8fd9\u4e0d\u4f1a\u6539\u53d8\u65e5\u5fd7\u6062\u590d\u5c06\u5bfc\u81f4\u4e00\u81f4\u6587\u4ef6\u7cfb\u7edf\u7684\u4fdd\u8bc1\u3002\u8fd9\u610f\u5473\u7740\uff0c\u5c31\u6062\u590d\u7684\u6587\u4ef6\u7cfb\u7edf\u800c\u8a00\uff0c\u53ef\u80fd\u6709\u6210\u5343\u4e0a\u4e07\u7684\u4e8b\u52a1\u6839\u672c\u6ca1\u6709\u56e0\u4e3a\u5d29\u6e83\u800c\u53d1\u751f\u3002\u8fd9\u4f7f\u5f97\u5173\u5fc3\u6570\u636e\u7684\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528fsync\uff08\uff09\u6765\u786e\u4fdd\u5e94\u7528\u7a0b\u5e8f\u7ea7\u6570\u636e\u7684\u5b8c\u6574\u6027\u53d8\u5f97\u66f4\u52a0\u91cd\u8981\u3002</p> <p>It should be noted that delayed logging is not an innovative new concept that warrants rigorous proofs to determine whether it is correct or not. The method of accumulating changes in memory for some period before writing them to the log is used effectively in many filesystems including ext3 and ext4. Hence no time is spent in this document trying to convince the reader that the concept is sound. Instead it is simply considered a \u201csolved problem\u201d and as such implementing it in XFS is purely an exercise in software engineering.</p> <p>\u5e94\u8be5\u6ce8\u610f\u7684\u662f\uff0c\u5ef6\u8fdf\u65e5\u5fd7\u8bb0\u5f55\u4e0d\u662f\u4e00\u4e2a\u521b\u65b0\u7684\u65b0\u6982\u5ff5\uff0c\u5b83\u9700\u8981\u4e25\u683c\u7684\u8bc1\u636e\u6765\u786e\u5b9a\u5b83\u662f\u5426\u6b63\u786e\u3002\u5728\u5c06\u66f4\u6539\u5199\u5165\u65e5\u5fd7\u4e4b\u524d\u5728\u5185\u5b58\u4e2d\u7d2f\u79ef\u4e00\u6bb5\u65f6\u95f4\u7684\u65b9\u6cd5\u5728\u5305\u62ecext3\u548cext4\u5728\u5185\u7684\u8bb8\u591a\u6587\u4ef6\u7cfb\u7edf\u4e2d\u5f97\u5230\u4e86\u6709\u6548\u7684\u4f7f\u7528\u3002\u56e0\u6b64\uff0c\u5728\u672c\u6587\u6863\u4e2d\u6ca1\u6709\u82b1\u8d39\u4efb\u4f55\u65f6\u95f4\u8bd5\u56fe\u8bf4\u670d\u8bfb\u8005\u8be5\u6982\u5ff5\u662f\u6b63\u786e\u7684\u3002\u76f8\u53cd\uff0c\u5b83\u53ea\u662f\u88ab\u8ba4\u4e3a\u662f\u4e00\u4e2a\u201c\u5df2\u89e3\u51b3\u7684\u95ee\u9898\u201d\uff0c\u56e0\u6b64\u5728XFS\u4e2d\u5b9e\u73b0\u5b83\u7eaf\u7cb9\u662f\u8f6f\u4ef6\u5de5\u7a0b\u4e2d\u7684\u7ec3\u4e60\u3002</p> <p>The fundamental requirements for delayed logging in XFS are simple:</p> <ol> <li>Reduce the amount of metadata written to the log by at least an order of magnitude.</li> <li>Supply sufficient statistics to validate Requirement #1.</li> <li>Supply sufficient new tracing infrastructure to be able to debug problems with the new code.</li> <li>No on-disk format change (metadata or log format).</li> <li>Enable and disable with a mount option.</li> <li>No performance regressions for synchronous transaction workloads.</li> </ol> <p>XFS\u4e2d\u5ef6\u8fdf\u65e5\u5fd7\u8bb0\u5f55\u7684\u57fa\u672c\u8981\u6c42\u5f88\u7b80\u5355\uff1a</p> <ol> <li>\u5c06\u5199\u5165\u65e5\u5fd7\u7684\u5143\u6570\u636e\u91cf\u81f3\u5c11\u51cf\u5c11\u4e00\u4e2a\u6570\u91cf\u7ea7\u3002</li> <li>\u63d0\u4f9b\u8db3\u591f\u7684\u7edf\u8ba1\u6570\u636e\u4ee5\u9a8c\u8bc1\u8981\u6c421\u3002</li> <li>\u63d0\u4f9b\u8db3\u591f\u7684\u65b0\u8ddf\u8e2a\u57fa\u7840\u8bbe\u65bd\uff0c\u4ee5\u4fbf\u80fd\u591f\u4f7f\u7528\u65b0\u4ee3\u7801\u8c03\u8bd5\u95ee\u9898\u3002</li> <li>\u6ca1\u6709\u78c1\u76d8\u683c\u5f0f\u66f4\u6539\uff08\u5143\u6570\u636e\u6216\u65e5\u5fd7\u683c\u5f0f\uff09\u3002</li> <li>\u4f7f\u7528\u88c5\u8f7d\u9009\u9879\u542f\u7528\u548c\u7981\u7528\u3002</li> <li>\u540c\u6b65\u4e8b\u52a1\u5de5\u4f5c\u8d1f\u8f7d\u6ca1\u6709\u6027\u80fd\u56de\u5f52\u3002</li> </ol>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/xfs/XFS%20Logging%20Design-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#9-delayed-logging-design","title":"9 Delayed Logging: Design","text":""},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/xfs/XFS%20Logging%20Design-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#91-storing-changes","title":"9.1 Storing Changes","text":"<p>The problem with accumulating changes at a logical level (i.e. just using the existing log item dirty region tracking) is that when it comes to writing the changes to the log buffers, we need to ensure that the object we are formatting is not changing while we do this. This requires locking the object to prevent concurrent modification. Hence flushing the logical changes to the log would require us to lock every object, format them, and then unlock them again.</p> <p>\u5728\u903b\u8f91\u7ea7\u522b\u7d2f\u79ef\u66f4\u6539\uff08\u5373\u4ec5\u4f7f\u7528\u73b0\u6709\u7684\u65e5\u5fd7\u9879\u810f\u533a\u57df\u8ddf\u8e2a\uff09\u7684\u95ee\u9898\u662f\uff0c\u5728\u5c06\u66f4\u6539\u5199\u5165\u65e5\u5fd7\u7f13\u51b2\u533a\u65f6\uff0c\u6211\u4eec\u9700\u8981\u786e\u4fdd\u6211\u4eec\u6b63\u5728\u683c\u5f0f\u5316\u7684\u5bf9\u8c61\u5728\u6267\u884c\u6b64\u64cd\u4f5c\u65f6\u4e0d\u4f1a\u53d1\u751f\u66f4\u6539\u3002\u8fd9\u9700\u8981\u9501\u5b9a\u5bf9\u8c61\u4ee5\u9632\u6b62\u5e76\u53d1\u4fee\u6539\u3002\u56e0\u6b64\uff0c\u5c06\u903b\u8f91\u66f4\u6539\u5237\u65b0\u5230\u65e5\u5fd7\u9700\u8981\u6211\u4eec\u9501\u5b9a\u6bcf\u4e2a\u5bf9\u8c61\uff0c\u683c\u5f0f\u5316\u5b83\u4eec\uff0c\u7136\u540e\u518d\u6b21\u89e3\u9501\u5b83\u4eec\u3002</p> <p>This introduces lots of scope for deadlocks with transactions that are already running. For example, a transaction has object A locked and modified, but needs the delayed logging tracking lock to commit the transaction. However, the flushing thread has the delayed logging tracking lock already held, and is trying to get the lock on object A to flush it to the log buffer. This appears to be an unsolvable deadlock condition, and it was solving this problem that was the barrier to implementing delayed logging for so long.</p> <p>\u8fd9\u4e3a\u5df2\u7ecf\u5728\u8fd0\u884c\u7684\u4e8b\u52a1\u5e26\u6765\u4e86\u5f88\u591a\u6b7b\u9501\u7684\u7a7a\u95f4\u3002\u4f8b\u5982\uff0c\u4e8b\u52a1\u9501\u5b9a\u5e76\u4fee\u6539\u4e86\u5bf9\u8c61a\uff0c\u4f46\u9700\u8981\u5ef6\u8fdf\u65e5\u5fd7\u8ddf\u8e2a\u9501\u6765\u63d0\u4ea4\u4e8b\u52a1\u3002\u7136\u800c\uff0c\u5237\u65b0\u7ebf\u7a0b\u5df2\u7ecf\u6301\u6709\u5ef6\u8fdf\u65e5\u5fd7\u8ddf\u8e2a\u9501\uff0c\u5e76\u4e14\u6b63\u5728\u5c1d\u8bd5\u83b7\u53d6\u5bf9\u8c61A\u4e0a\u7684\u9501\uff0c\u4ee5\u5c06\u5176\u5237\u65b0\u5230\u65e5\u5fd7\u7f13\u51b2\u533a\u3002\u8fd9\u4f3c\u4e4e\u662f\u4e00\u4e2a\u65e0\u6cd5\u89e3\u51b3\u7684\u6b7b\u9501\u72b6\u6001\uff0c\u800c\u6b63\u662f\u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898\uff0c\u8fd9\u662f\u5b9e\u73b0\u5ef6\u8fdf\u65e5\u5fd7\u8bb0\u5f55\u7684\u969c\u788d\u3002</p> <p>The solution is relatively simple - it just took a long time to recognise it. Put simply, the current logging code formats the changes to each item into an vector array that points to the changed regions in the item. The log write code simply copies the memory these vectors point to into the log buffer during transaction commit while the item is locked in the transaction. Instead of using the log buffer as the destination of the formatting code, we can use an allocated memory buffer big enough to fit the formatted vector.</p> <p>\u89e3\u51b3\u65b9\u6848\u76f8\u5bf9\u7b80\u5355-\u53ea\u662f\u82b1\u4e86\u5f88\u957f\u65f6\u95f4\u624d\u8bc6\u522b\u51fa\u6765\u3002\u7b80\u5355\u5730\u8bf4\uff0c\u5f53\u524d\u7684\u65e5\u5fd7\u4ee3\u7801\u5c06\u6bcf\u4e2a\u9879\u76ee\u7684\u66f4\u6539\u683c\u5f0f\u5316\u4e3a\u6307\u5411\u9879\u76ee\u4e2d\u66f4\u6539\u533a\u57df\u7684\u77e2\u91cf\u6570\u7ec4\u3002\u65e5\u5fd7\u5199\u5165\u4ee3\u7801\u53ea\u9700\u5728\u4e8b\u52a1\u63d0\u4ea4\u671f\u95f4\u5c06\u8fd9\u4e9b\u5411\u91cf\u6307\u5411\u7684\u5185\u5b58\u590d\u5236\u5230\u65e5\u5fd7\u7f13\u51b2\u533a\u4e2d\uff0c\u540c\u65f6\u5c06\u9879\u9501\u5b9a\u5728\u4e8b\u52a1\u4e2d\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8db3\u591f\u5927\u7684\u5185\u5b58\u7f13\u51b2\u533a\u6765\u5bb9\u7eb3\u683c\u5f0f\u5316\u7684\u5411\u91cf\uff0c\u800c\u4e0d\u662f\u4f7f\u7528\u65e5\u5fd7\u7f13\u51b2\u533a\u4f5c\u4e3a\u683c\u5f0f\u5316\u4ee3\u7801\u7684\u76ee\u6807\u3002</p> <p>If we then copy the vector into the memory buffer and rewrite the vector to point to the memory buffer rather than the object itself, we now have a copy of the changes in a format that is compatible with the log buffer writing code. that does not require us to lock the item to access. This formatting and rewriting can all be done while the object is locked during transaction commit, resulting in a vector that is transactionally consistent and can be accessed without needing to lock the owning item.</p> <p>\u5982\u679c\u6211\u4eec\u968f\u540e\u5c06\u5411\u91cf\u590d\u5236\u5230\u5185\u5b58\u7f13\u51b2\u533a\uff0c\u5e76\u91cd\u5199\u5411\u91cf\u4ee5\u6307\u5411\u5185\u5b58\u7f13\u51b2\u533a\u800c\u4e0d\u662f\u5bf9\u8c61\u672c\u8eab\uff0c\u90a3\u4e48\u6211\u4eec\u73b0\u5728\u5c31\u6709\u4e86\u4e0e\u65e5\u5fd7\u7f13\u51b2\u533a\u7f16\u5199\u4ee3\u7801\u517c\u5bb9\u7684\u683c\u5f0f\u7684\u66f4\u6539\u526f\u672c\u3002\u8fd9\u4e0d\u9700\u8981\u6211\u4eec\u9501\u5b9a\u9879\u76ee\u624d\u80fd\u8bbf\u95ee\u3002\u8fd9\u79cd\u683c\u5f0f\u5316\u548c\u91cd\u5199\u90fd\u53ef\u4ee5\u5728\u4e8b\u52a1\u63d0\u4ea4\u671f\u95f4\u9501\u5b9a\u5bf9\u8c61\u65f6\u5b8c\u6210\uff0c\u4ece\u800c\u751f\u6210\u4e00\u4e2a\u4e8b\u52a1\u4e00\u81f4\u7684\u5411\u91cf\uff0c\u65e0\u9700\u9501\u5b9a\u6240\u5c5e\u9879\u5373\u53ef\u8bbf\u95ee\u3002</p> <p>Hence we avoid the need to lock items when we need to flush outstanding asynchronous transactions to the log. The differences between the existing formatting method and the delayed logging formatting can be seen in the diagram below.</p> <p>\u56e0\u6b64\uff0c\u5f53\u6211\u4eec\u9700\u8981\u5c06\u672a\u5b8c\u6210\u7684\u5f02\u6b65\u4e8b\u52a1\u5237\u65b0\u5230\u65e5\u5fd7\u65f6\uff0c\u6211\u4eec\u907f\u514d\u4e86\u9501\u5b9a\u9879\u7684\u9700\u8981\u3002\u73b0\u6709\u683c\u5f0f\u65b9\u6cd5\u548c\u5ef6\u8fdf\u65e5\u5fd7\u683c\u5f0f\u4e4b\u95f4\u7684\u5dee\u5f02\u53ef\u4ee5\u5728\u4e0b\u56fe\u4e2d\u770b\u5230\u3002</p> <p>Current format log vector:</p> <pre><code>Object    +---------------------------------------------+\nVector 1      +----+\nVector 2                    +----+\nVector 3                                   +----------+\n</code></pre> <p>After formatting:</p> <pre><code>Log Buffer    +-V1-+-V2-+----V3----+\n</code></pre> <p>Delayed logging vector:</p> <pre><code>Object    +---------------------------------------------+\nVector 1      +----+\nVector 2                    +----+\nVector 3                                   +----------+\n</code></pre> <p>After formatting:</p> <pre><code>Memory Buffer +-V1-+-V2-+----V3----+\nVector 1      +----+\nVector 2           +----+\nVector 3                +----------+\n</code></pre> <p>The memory buffer and associated vector need to be passed as a single object, but still need to be associated with the parent object so if the object is relogged we can replace the current memory buffer with a new memory buffer that contains the latest changes.</p> <p>\u5185\u5b58\u7f13\u51b2\u533a\u548c\u5173\u8054\u5411\u91cf\u9700\u8981\u4f5c\u4e3a\u5355\u4e2a\u5bf9\u8c61\u4f20\u9012\uff0c\u4f46\u4ecd\u9700\u8981\u4e0e\u7236\u5bf9\u8c61\u5173\u8054\uff0c\u56e0\u6b64\u5982\u679c\u5bf9\u8c61\u88ab\u91cd\u65b0\u8bb0\u5f55\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u5305\u542b\u6700\u65b0\u66f4\u6539\u7684\u65b0\u5185\u5b58\u7f13\u51b2\u533a\u66ff\u6362\u5f53\u524d\u5185\u5b58\u7f13\u51b2\u533a\u3002</p> <p>The reason for keeping the vector around after we\u2019ve formatted the memory buffer is to support splitting vectors across log buffer boundaries correctly. If we don\u2019t keep the vector around, we do not know where the region boundaries are in the item, so we\u2019d need a new encapsulation method for regions in the log buffer writing (i.e. double encapsulation). This would be an on-disk format change and as such is not desirable. It also means we\u2019d have to write the log region headers in the formatting stage, which is problematic as there is per region state that needs to be placed into the headers during the log write.</p> <p>\u683c\u5f0f\u5316\u5185\u5b58\u7f13\u51b2\u533a\u540e\u4fdd\u6301\u77e2\u91cf\u4e0d\u53d8\u7684\u539f\u56e0\u662f\u4e3a\u4e86\u652f\u6301\u5728\u65e5\u5fd7\u7f13\u51b2\u533a\u8fb9\u754c\u4e0a\u6b63\u786e\u5206\u5272\u77e2\u91cf\u3002\u5982\u679c\u6211\u4eec\u4e0d\u4fdd\u7559\u5411\u91cf\uff0c\u6211\u4eec\u5c31\u4e0d\u77e5\u9053\u533a\u57df\u8fb9\u754c\u5728\u9879\u76ee\u4e2d\u7684\u4f4d\u7f6e\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u4e3a\u65e5\u5fd7\u7f13\u51b2\u533a\u5199\u5165\u4e2d\u7684\u533a\u57df\u63d0\u4f9b\u4e00\u79cd\u65b0\u7684\u5c01\u88c5\u65b9\u6cd5\uff08\u5373\u53cc\u91cd\u5c01\u88c5\uff09\u3002\u8fd9\u5c06\u662f\u78c1\u76d8\u4e0a\u7684\u683c\u5f0f\u66f4\u6539\uff0c\u56e0\u6b64\u662f\u4e0d\u53ef\u53d6\u7684\u3002\u8fd9\u4e5f\u610f\u5473\u7740\u6211\u4eec\u5fc5\u987b\u5728\u683c\u5f0f\u5316\u9636\u6bb5\u5199\u5165\u65e5\u5fd7\u533a\u57df\u6807\u5934\uff0c\u8fd9\u662f\u6709\u95ee\u9898\u7684\uff0c\u56e0\u4e3a\u5728\u65e5\u5fd7\u5199\u5165\u671f\u95f4\u9700\u8981\u5c06\u6bcf\u4e2a\u533a\u57df\u7684\u72b6\u6001\u653e\u5165\u6807\u5934\u4e2d\u3002</p> <p>Hence we need to keep the vector, but by attaching the memory buffer to it and rewriting the vector addresses to point at the memory buffer we end up with a self-describing object that can be passed to the log buffer write code to be handled in exactly the same manner as the existing log vectors are handled. Hence we avoid needing a new on-disk format to handle items that have been relogged in memory.</p> <p>\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u4fdd\u7559\u5411\u91cf\uff0c\u4f46\u901a\u8fc7\u5c06\u5185\u5b58\u7f13\u51b2\u533a\u9644\u52a0\u5230\u5b83\u5e76\u91cd\u5199\u5411\u91cf\u5730\u5740\u4ee5\u6307\u5411\u5185\u5b58\u7f13\u51b2\u533a\uff0c\u6211\u4eec\u6700\u7ec8\u5f97\u5230\u4e86\u4e00\u4e2a\u81ea\u6211\u63cf\u8ff0\u7684\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u53ef\u4ee5\u4f20\u9012\u7ed9\u65e5\u5fd7\u7f13\u51b2\u533a\u5199\u4ee3\u7801\uff0c\u4ee5\u4e0e\u5904\u7406\u73b0\u6709\u65e5\u5fd7\u5411\u91cf\u5b8c\u5168\u76f8\u540c\u7684\u65b9\u5f0f\u8fdb\u884c\u5904\u7406\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u907f\u514d\u4e86\u9700\u8981\u65b0\u7684\u78c1\u76d8\u683c\u5f0f\u6765\u5904\u7406\u5df2\u91cd\u65b0\u8bb0\u5f55\u5728\u5185\u5b58\u4e2d\u7684\u9879\u76ee\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/xfs/XFS%20Logging%20Design-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#92-tracking-changes","title":"9.2 Tracking Changes","text":"<p>Now that we can record transactional changes in memory in a form that allows them to be used without limitations, we need to be able to track and accumulate them so that they can be written to the log at some later point in time. The log item is the natural place to store this vector and buffer, and also makes sense to be the object that is used to track committed objects as it will always exist once the object has been included in a transaction.</p> <p>\u73b0\u5728\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u5185\u5b58\u4e2d\u4ee5\u5141\u8bb8\u65e0\u9650\u5236\u4f7f\u7528\u7684\u5f62\u5f0f\u8bb0\u5f55\u4e8b\u52a1\u6027\u66f4\u6539\uff0c\u6211\u4eec\u9700\u8981\u80fd\u591f\u8ddf\u8e2a\u548c\u7d2f\u79ef\u5b83\u4eec\uff0c\u4ee5\u4fbf\u5728\u7a0d\u540e\u7684\u67d0\u4e2a\u65f6\u95f4\u70b9\u5c06\u5b83\u4eec\u5199\u5165\u65e5\u5fd7\u3002\u65e5\u5fd7\u9879\u662f\u5b58\u50a8\u6b64\u5411\u91cf\u548c\u7f13\u51b2\u533a\u7684\u81ea\u7136\u4f4d\u7f6e\uff0c\u4e5f\u662f\u7528\u4e8e\u8ddf\u8e2a\u5df2\u63d0\u4ea4\u5bf9\u8c61\u7684\u5bf9\u8c61\uff0c\u56e0\u4e3a\u4e00\u65e6\u5bf9\u8c61\u5305\u542b\u5728\u4e8b\u52a1\u4e2d\uff0c\u5b83\u5c06\u59cb\u7ec8\u5b58\u5728\u3002</p> <p>The log item is already used to track the log items that have been written to the log but not yet written to disk. Such log items are considered \u201cactive\u201d and as such are stored in the Active Item List (AIL) which is a LSN-ordered double linked list. Items are inserted into this list during log buffer IO completion, after which they are unpinned and can be written to disk. An object that is in the AIL can be relogged, which causes the object to be pinned again and then moved forward in the AIL when the log buffer IO completes for that transaction.</p> <p>\u65e5\u5fd7\u9879\u5df2\u7528\u4e8e\u8ddf\u8e2a\u5df2\u5199\u5165\u65e5\u5fd7\u4f46\u5c1a\u672a\u5199\u5165\u78c1\u76d8\u7684\u65e5\u5fd7\u9879\u3002\u6b64\u7c7b\u65e5\u5fd7\u9879\u88ab\u89c6\u4e3a\u201c\u6d3b\u52a8\u201d\uff0c\u56e0\u6b64\u5b58\u50a8\u5728\u6d3b\u52a8\u9879\u5217\u8868\uff08AIL\uff09\u4e2d\uff0c\u8be5\u5217\u8868\u662f\u4e00\u4e2aLSN\u6392\u5e8f\u7684\u53cc\u94fe\u63a5\u5217\u8868\u3002\u5728\u65e5\u5fd7\u7f13\u51b2\u533aIO\u5b8c\u6210\u671f\u95f4\uff0c\u9879\u76ee\u5c06\u63d2\u5165\u6b64\u5217\u8868\uff0c\u4e4b\u540e\u5c06\u53d6\u6d88\u56fa\u5b9a\uff0c\u5e76\u53ef\u4ee5\u5199\u5165\u78c1\u76d8\u3002AIL\u4e2d\u7684\u5bf9\u8c61\u53ef\u4ee5\u91cd\u65b0\u8bb0\u5f55\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u8be5\u5bf9\u8c61\u518d\u6b21\u56fa\u5b9a\uff0c\u7136\u540e\u5728\u8be5\u4e8b\u52a1\u7684\u65e5\u5fd7\u7f13\u51b2\u533aIO\u5b8c\u6210\u65f6\u5728AIL\u4e2d\u5411\u524d\u79fb\u52a8\u3002</p> <p>Essentially, this shows that an item that is in the AIL can still be modified and relogged, so any tracking must be separate to the AIL infrastructure. As such, we cannot reuse the AIL list pointers for tracking committed items, nor can we store state in any field that is protected by the AIL lock. Hence the committed item tracking needs its own locks, lists and state fields in the log item.</p> <p>\u672c\u8d28\u4e0a\uff0c\u8fd9\u8868\u660eAIL\u4e2d\u7684\u9879\u76ee\u4ecd\u7136\u53ef\u4ee5\u88ab\u4fee\u6539\u548c\u91cd\u65b0\u8bb0\u5f55\uff0c\u56e0\u6b64\u4efb\u4f55\u8ddf\u8e2a\u90fd\u5fc5\u987b\u4e0eAIL\u57fa\u7840\u8bbe\u65bd\u5206\u5f00\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u4e0d\u80fd\u91cd\u7528AIL\u5217\u8868\u6307\u9488\u6765\u8ddf\u8e2a\u63d0\u4ea4\u7684\u9879\u76ee\uff0c\u4e5f\u4e0d\u80fd\u5c06\u72b6\u6001\u5b58\u50a8\u5728\u53d7AIL\u9501\u4fdd\u62a4\u7684\u4efb\u4f55\u5b57\u6bb5\u4e2d\u3002\u56e0\u6b64\uff0c\u63d0\u4ea4\u7684\u9879\u8ddf\u8e2a\u9700\u8981\u65e5\u5fd7\u9879\u4e2d\u81ea\u5df1\u7684\u9501\u3001\u5217\u8868\u548c\u72b6\u6001\u5b57\u6bb5\u3002</p> <p>Similar to the AIL, tracking of committed items is done through a new list called the Committed Item List (CIL). The list tracks log items that have been committed and have formatted memory buffers attached to them. It tracks objects in transaction commit order, so when an object is relogged it is removed from its place in the list and re-inserted at the tail. This is entirely arbitrary and done to make it easy for debugging - the last items in the list are the ones that are most recently modified. Ordering of the CIL is not necessary for transactional integrity (as discussed in the next section) so the ordering is done for convenience/sanity of the developers.</p> <p>\u4e0eAIL\u7c7b\u4f3c\uff0c\u901a\u8fc7\u540d\u4e3acommitted Item list\uff08CIL\uff09\u7684\u65b0\u5217\u8868\u6765\u8ddf\u8e2a\u63d0\u4ea4\u7684\u9879\u76ee\u3002\u8be5\u5217\u8868\u8ddf\u8e2a\u5df2\u63d0\u4ea4\u7684\u65e5\u5fd7\u9879\uff0c\u5e76\u5c06\u683c\u5f0f\u5316\u7684\u5185\u5b58\u7f13\u51b2\u533a\u9644\u52a0\u5230\u65e5\u5fd7\u9879\u3002\u5b83\u6309\u7167\u4e8b\u52a1\u63d0\u4ea4\u987a\u5e8f\u8ddf\u8e2a\u5bf9\u8c61\uff0c\u56e0\u6b64\u5f53\u5bf9\u8c61\u88ab\u91cd\u65b0\u8bb0\u5f55\u65f6\uff0c\u5b83\u5c06\u4ece\u5217\u8868\u4e2d\u7684\u4f4d\u7f6e\u79fb\u9664\uff0c\u5e76\u5728\u5c3e\u90e8\u91cd\u65b0\u63d2\u5165\u3002\u8fd9\u5b8c\u5168\u662f\u4efb\u610f\u7684\uff0c\u800c\u4e14\u8fd9\u6837\u505a\u662f\u4e3a\u4e86\u4fbf\u4e8e\u8c03\u8bd5\u2014\u2014\u5217\u8868\u4e2d\u7684\u6700\u540e\u4e00\u9879\u662f\u6700\u8fd1\u4fee\u6539\u8fc7\u7684\u3002CIL\u7684\u6392\u5e8f\u5bf9\u4e8e\u4e8b\u52a1\u5b8c\u6574\u6027\u6765\u8bf4\u662f\u4e0d\u5fc5\u8981\u7684\uff08\u5982\u4e0b\u4e00\u8282\u6240\u8ba8\u8bba\u7684\uff09\uff0c\u6240\u4ee5\u6392\u5e8f\u662f\u4e3a\u4e86\u5f00\u53d1\u4eba\u5458\u7684\u65b9\u4fbf/\u5065\u5168\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/xfs/XFS%20Logging%20Design-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#93-delayed-logging-checkpoints","title":"9.3 Delayed Logging: Checkpoints","text":"<p>When we have a log synchronisation event, commonly known as a \u201clog force\u201d, all the items in the CIL must be written into the log via the log buffers. We need to write these items in the order that they exist in the CIL, and they need to be written as an atomic transaction. The need for all the objects to be written as an atomic transaction comes from the requirements of relogging and log replay - all the changes in all the objects in a given transaction must either be completely replayed during log recovery, or not replayed at all. If a transaction is not replayed because it is not complete in the log, then no later transactions should be replayed, either.</p> <p>\u5f53\u53d1\u751f\u65e5\u5fd7\u540c\u6b65\u4e8b\u4ef6\uff08\u901a\u5e38\u79f0\u4e3a\u201c\u65e5\u5fd7\u5f3a\u5236\u201d\uff09\u65f6\uff0cCIL\u4e2d\u7684\u6240\u6709\u9879\u76ee\u90fd\u5fc5\u987b\u901a\u8fc7\u65e5\u5fd7\u7f13\u51b2\u533a\u5199\u5165\u65e5\u5fd7\u3002\u6211\u4eec\u9700\u8981\u6309\u7167\u8fd9\u4e9b\u9879\u76ee\u5728CIL\u4e2d\u7684\u5b58\u5728\u987a\u5e8f\u6765\u7f16\u5199\u8fd9\u4e9b\u9879\u76ee\uff0c\u5e76\u4e14\u5b83\u4eec\u9700\u8981\u4f5c\u4e3a\u4e00\u4e2a\u539f\u5b50\u4e8b\u52a1\u6765\u7f16\u5199\u3002\u9700\u8981\u5c06\u6240\u6709\u5bf9\u8c61\u4f5c\u4e3a\u539f\u5b50\u4e8b\u52a1\u5199\u5165\uff0c\u8fd9\u6e90\u4e8e\u91cd\u65b0\u8bb0\u5f55\u548c\u65e5\u5fd7\u91cd\u653e\u7684\u8981\u6c42\u2014\u2014\u7ed9\u5b9a\u4e8b\u52a1\u4e2d\u6240\u6709\u5bf9\u8c61\u7684\u6240\u6709\u66f4\u6539\u5fc5\u987b\u5728\u65e5\u5fd7\u6062\u590d\u671f\u95f4\u5b8c\u5168\u91cd\u653e\uff0c\u6216\u8005\u6839\u672c\u4e0d\u91cd\u653e\u3002\u5982\u679c\u67d0\u4e2a\u4e8b\u52a1\u7531\u4e8e\u5728\u65e5\u5fd7\u4e2d\u672a\u5b8c\u6210\u800c\u672a\u88ab\u91cd\u653e\uff0c\u5219\u4e5f\u4e0d\u5e94\u91cd\u653e\u4ee5\u540e\u7684\u4e8b\u52a1\u3002</p> <p>To fulfill this requirement, we need to write the entire CIL in a single log transaction. Fortunately, the XFS log code has no fixed limit on the size of a transaction, nor does the log replay code. The only fundamental limit is that the transaction cannot be larger than just under half the size of the log. The reason for this limit is that to find the head and tail of the log, there must be at least one complete transaction in the log at any given time. If a transaction is larger than half the log, then there is the possibility that a crash during the write of a such a transaction could partially overwrite the only complete previous transaction in the log. This will result in a recovery failure and an inconsistent filesystem and hence we must enforce the maximum size of a checkpoint to be slightly less than a half the log.</p> <p>\u4e3a\u4e86\u6ee1\u8db3\u8fd9\u4e00\u8981\u6c42\uff0c\u6211\u4eec\u9700\u8981\u5728\u4e00\u4e2a\u65e5\u5fd7\u4e8b\u52a1\u4e2d\u5199\u5165\u6574\u4e2aCIL\u3002\u5e78\u8fd0\u7684\u662f\uff0cXFS\u65e5\u5fd7\u4ee3\u7801\u5bf9\u4e8b\u52a1\u7684\u5927\u5c0f\u6ca1\u6709\u56fa\u5b9a\u7684\u9650\u5236\uff0c\u65e5\u5fd7\u56de\u653e\u4ee3\u7801\u4e5f\u6ca1\u6709\u3002\u552f\u4e00\u7684\u57fa\u672c\u9650\u5236\u662f\u4e8b\u52a1\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc7\u65e5\u5fd7\u5927\u5c0f\u7684\u4e00\u534a\u3002\u8fd9\u4e2a\u9650\u5236\u7684\u539f\u56e0\u662f\uff0c\u4e3a\u4e86\u627e\u5230\u65e5\u5fd7\u7684\u5f00\u5934\u548c\u7ed3\u5c3e\uff0c\u5728\u4efb\u4f55\u7ed9\u5b9a\u7684\u65f6\u95f4\uff0c\u65e5\u5fd7\u4e2d\u5fc5\u987b\u81f3\u5c11\u6709\u4e00\u4e2a\u5b8c\u6574\u7684\u4e8b\u52a1\u3002\u5982\u679c\u4e8b\u52a1\u5927\u4e8e\u65e5\u5fd7\u7684\u4e00\u534a\uff0c\u5219\u5728\u5199\u5165\u6b64\u7c7b\u4e8b\u52a1\u671f\u95f4\u53d1\u751f\u5d29\u6e83\u53ef\u80fd\u4f1a\u90e8\u5206\u8986\u76d6\u65e5\u5fd7\u4e2d\u552f\u4e00\u5b8c\u6574\u7684\u5148\u524d\u4e8b\u52a1\u3002\u8fd9\u5c06\u5bfc\u81f4\u6062\u590d\u5931\u8d25\u548c\u6587\u4ef6\u7cfb\u7edf\u4e0d\u4e00\u81f4\uff0c\u56e0\u6b64\u6211\u4eec\u5fc5\u987b\u5f3a\u5236\u68c0\u67e5\u70b9\u7684\u6700\u5927\u5927\u5c0f\u7565\u5c0f\u4e8e\u65e5\u5fd7\u7684\u4e00\u534a\u3002</p> <p>Apart from this size requirement, a checkpoint transaction looks no different to any other transaction - it contains a transaction header, a series of formatted log items and a commit record at the tail. From a recovery perspective, the checkpoint transaction is also no different - just a lot bigger with a lot more items in it. The worst case effect of this is that we might need to tune the recovery transaction object hash size.</p> <p>\u9664\u4e86\u8fd9\u4e2a\u5927\u5c0f\u8981\u6c42\u4e4b\u5916\uff0c\u68c0\u67e5\u70b9\u4e8b\u52a1\u770b\u8d77\u6765\u4e0e\u4efb\u4f55\u5176\u4ed6\u4e8b\u52a1\u90fd\u6ca1\u6709\u4ec0\u4e48\u4e0d\u540c\u2014\u2014\u5b83\u5305\u542b\u4e00\u4e2a\u4e8b\u52a1\u5934\u3001\u4e00\u7cfb\u5217\u683c\u5f0f\u5316\u7684\u65e5\u5fd7\u9879\u548c\u5c3e\u90e8\u7684\u63d0\u4ea4\u8bb0\u5f55\u3002\u4ece\u6062\u590d\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u68c0\u67e5\u70b9\u4e8b\u52a1\u4e5f\u6ca1\u6709\u4ec0\u4e48\u4e0d\u540c-\u53ea\u662f\u66f4\u5927\u4e86\uff0c\u5176\u4e2d\u6709\u66f4\u591a\u7684\u9879\u76ee\u3002\u6700\u574f\u7684\u60c5\u51b5\u662f\uff0c\u6211\u4eec\u53ef\u80fd\u9700\u8981\u8c03\u6574\u6062\u590d\u4e8b\u52a1\u5bf9\u8c61\u54c8\u5e0c\u5927\u5c0f\u3002</p> <p>Because the checkpoint is just another transaction and all the changes to log items are stored as log vectors, we can use the existing log buffer writing code to write the changes into the log. To do this efficiently, we need to minimise the time we hold the CIL locked while writing the checkpoint transaction. The current log write code enables us to do this easily with the way it separates the writing of the transaction contents (the log vectors) from the transaction commit record, but tracking this requires us to have a per-checkpoint context that travels through the log write process through to checkpoint completion.</p> <p>\u56e0\u4e3a\u68c0\u67e5\u70b9\u53ea\u662f\u53e6\u4e00\u4e2a\u4e8b\u52a1\uff0c\u5bf9\u65e5\u5fd7\u9879\u7684\u6240\u6709\u66f4\u6539\u90fd\u5b58\u50a8\u4e3a\u65e5\u5fd7\u5411\u91cf\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u73b0\u6709\u7684\u65e5\u5fd7\u7f13\u51b2\u533a\u7f16\u5199\u4ee3\u7801\u5c06\u66f4\u6539\u5199\u5165\u65e5\u5fd7\u3002\u4e3a\u4e86\u6709\u6548\u5730\u505a\u5230\u8fd9\u4e00\u70b9\uff0c\u6211\u4eec\u9700\u8981\u5c3d\u91cf\u51cf\u5c11\u5728\u5199\u5165\u68c0\u67e5\u70b9\u4e8b\u52a1\u65f6\u9501\u5b9aCIL\u7684\u65f6\u95f4\u3002\u5f53\u524d\u7684\u65e5\u5fd7\u5199\u5165\u4ee3\u7801\u4f7f\u6211\u4eec\u80fd\u591f\u901a\u8fc7\u5c06\u4e8b\u52a1\u5185\u5bb9\uff08\u65e5\u5fd7\u5411\u91cf\uff09\u7684\u5199\u5165\u4e0e\u4e8b\u52a1\u63d0\u4ea4\u8bb0\u5f55\u5206\u5f00\u7684\u65b9\u5f0f\u8f7b\u677e\u5730\u5b8c\u6210\u8fd9\u4e00\u70b9\uff0c\u4f46\u8ddf\u8e2a\u8fd9\u4e00\u70b9\u9700\u8981\u6211\u4eec\u6709\u4e00\u4e2a\u8d2f\u7a7f\u65e5\u5fd7\u5199\u5165\u8fc7\u7a0b\u76f4\u81f3\u68c0\u67e5\u70b9\u5b8c\u6210\u7684\u6bcf\u4e2a\u68c0\u67e5\u70b9\u4e0a\u4e0b\u6587\u3002</p> <p>Hence a checkpoint has a context that tracks the state of the current checkpoint from initiation to checkpoint completion. A new context is initiated at the same time a checkpoint transaction is started. That is, when we remove all the current items from the CIL during a checkpoint operation, we move all those changes into the current checkpoint context. We then initialise a new context and attach that to the CIL for aggregation of new transactions.</p> <p>\u56e0\u6b64\uff0c\u68c0\u67e5\u70b9\u5177\u6709\u8ddf\u8e2a\u5f53\u524d\u68c0\u67e5\u70b9\u4ece\u542f\u52a8\u5230\u68c0\u67e5\u70b9\u5b8c\u6210\u7684\u72b6\u6001\u7684\u4e0a\u4e0b\u6587\u3002\u5728\u542f\u52a8\u68c0\u67e5\u70b9\u4e8b\u52a1\u7684\u540c\u65f6\u542f\u52a8\u65b0\u4e0a\u4e0b\u6587\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5f53\u6211\u4eec\u5728\u68c0\u67e5\u70b9\u64cd\u4f5c\u671f\u95f4\u4eceCIL\u4e2d\u5220\u9664\u6240\u6709\u5f53\u524d\u9879\u65f6\uff0c\u6211\u4eec\u5c06\u6240\u6709\u8fd9\u4e9b\u66f4\u6539\u79fb\u52a8\u5230\u5f53\u524d\u68c0\u67e5\u70b9\u4e0a\u4e0b\u6587\u4e2d\u3002\u7136\u540e\uff0c\u6211\u4eec\u521d\u59cb\u5316\u4e00\u4e2a\u65b0\u7684\u4e0a\u4e0b\u6587\uff0c\u5e76\u5c06\u5176\u9644\u52a0\u5230CIL\u4ee5\u805a\u5408\u65b0\u4e8b\u52a1\u3002</p> <p>This allows us to unlock the CIL immediately after transfer of all the committed items and effectively allows new transactions to be issued while we are formatting the checkpoint into the log. It also allows concurrent checkpoints to be written into the log buffers in the case of log force heavy workloads, just like the existing transaction commit code does. This, however, requires that we strictly order the commit records in the log so that checkpoint sequence order is maintained during log replay.</p> <p>\u8fd9\u5141\u8bb8\u6211\u4eec\u5728\u4f20\u8f93\u6240\u6709\u63d0\u4ea4\u7684\u9879\u76ee\u540e\u7acb\u5373\u89e3\u9501CIL\uff0c\u5e76\u6709\u6548\u5730\u5141\u8bb8\u5728\u5c06\u68c0\u67e5\u70b9\u683c\u5f0f\u5316\u5230\u65e5\u5fd7\u4e2d\u65f6\u53d1\u51fa\u65b0\u7684\u4e8b\u52a1\u3002\u5b83\u8fd8\u5141\u8bb8\u5728\u65e5\u5fd7\u5f3a\u5236\u7e41\u91cd\u7684\u5de5\u4f5c\u8d1f\u8f7d\u60c5\u51b5\u4e0b\u5c06\u5e76\u53d1\u68c0\u67e5\u70b9\u5199\u5165\u65e5\u5fd7\u7f13\u51b2\u533a\uff0c\u5c31\u50cf\u73b0\u6709\u7684\u4e8b\u52a1\u63d0\u4ea4\u4ee3\u7801\u4e00\u6837\u3002\u7136\u800c\uff0c\u8fd9\u8981\u6c42\u6211\u4eec\u4e25\u683c\u6392\u5e8f\u65e5\u5fd7\u4e2d\u7684\u63d0\u4ea4\u8bb0\u5f55\uff0c\u4ee5\u4fbf\u5728\u65e5\u5fd7\u56de\u653e\u671f\u95f4\u4fdd\u6301\u68c0\u67e5\u70b9\u987a\u5e8f\u3002</p> <p>To ensure that we can be writing an item into a checkpoint transaction at the same time another transaction modifies the item and inserts the log item into the new CIL, then checkpoint transaction commit code cannot use log items to store the list of log vectors that need to be written into the transaction. Hence log vectors need to be able to be chained together to allow them to be detached from the log items. That is, when the CIL is flushed the memory buffer and log vector attached to each log item needs to be attached to the checkpoint context so that the log item can be released. In diagrammatic form, the CIL would look like this before the flush:</p> <p>\u4e3a\u4e86\u786e\u4fdd\u6211\u4eec\u53ef\u4ee5\u5728\u53e6\u4e00\u4e2a\u4e8b\u52a1\u4fee\u6539\u9879\u5e76\u5c06\u65e5\u5fd7\u9879\u63d2\u5165\u65b0CIL\u7684\u540c\u65f6\u5c06\u9879\u5199\u5165\u68c0\u67e5\u70b9\u4e8b\u52a1\uff0c\u68c0\u67e5\u70b9\u4e8b\u52a1\u63d0\u4ea4\u4ee3\u7801\u4e0d\u80fd\u4f7f\u7528\u65e5\u5fd7\u9879\u6765\u5b58\u50a8\u9700\u8981\u5199\u5165\u4e8b\u52a1\u7684\u65e5\u5fd7\u5411\u91cf\u5217\u8868\u3002\u56e0\u6b64\uff0c\u65e5\u5fd7\u5411\u91cf\u9700\u8981\u80fd\u591f\u94fe\u63a5\u5728\u4e00\u8d77\uff0c\u4ee5\u5141\u8bb8\u5b83\u4eec\u4e0e\u65e5\u5fd7\u9879\u5206\u79bb\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5f53\u5237\u65b0CIL\u65f6\uff0c\u9700\u8981\u5c06\u9644\u52a0\u5230\u6bcf\u4e2a\u65e5\u5fd7\u9879\u7684\u5185\u5b58\u7f13\u51b2\u533a\u548c\u65e5\u5fd7\u5411\u91cf\u9644\u52a0\u5230\u68c0\u67e5\u70b9\u4e0a\u4e0b\u6587\uff0c\u4ee5\u4fbf\u53ef\u4ee5\u91ca\u653e\u65e5\u5fd7\u9879\u3002\u4ee5\u56fe\u89e3\u5f62\u5f0f\uff0c\u51b2\u6d17\u524d\u7684CIL\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>CIL Head\n   |\n   V\nLog Item &lt;-&gt; log vector 1       -&gt; memory buffer\n   |                            -&gt; vector array\n   V\nLog Item &lt;-&gt; log vector 2       -&gt; memory buffer\n   |                            -&gt; vector array\n   V\n......\n   |\n   V\nLog Item &lt;-&gt; log vector N-1     -&gt; memory buffer\n   |                            -&gt; vector array\n   V\nLog Item &lt;-&gt; log vector N       -&gt; memory buffer\n                                -&gt; vector array\n</code></pre> <p>And after the flush the CIL head is empty, and the checkpoint context log vector list would look like:</p> <p>\u5237\u65b0\u540e\uff0cCIL\u5934\u4e3a\u7a7a\uff0c\u68c0\u67e5\u70b9\u4e0a\u4e0b\u6587\u65e5\u5fd7\u5411\u91cf\u5217\u8868\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>Checkpoint Context\n   |\n   V\nlog vector 1    -&gt; memory buffer\n   |            -&gt; vector array\n   |            -&gt; Log Item\n   V\nlog vector 2    -&gt; memory buffer\n   |            -&gt; vector array\n   |            -&gt; Log Item\n   V\n......\n   |\n   V\nlog vector N-1  -&gt; memory buffer\n   |            -&gt; vector array\n   |            -&gt; Log Item\n   V\nlog vector N    -&gt; memory buffer\n                -&gt; vector array\n                -&gt; Log Item\n</code></pre> <p>Once this transfer is done, the CIL can be unlocked and new transactions can start, while the checkpoint flush code works over the log vector chain to commit the checkpoint.</p> <p>\u4f20\u8f93\u5b8c\u6210\u540e\uff0cCIL\u53ef\u4ee5\u89e3\u9501\uff0c\u65b0\u7684\u4e8b\u52a1\u53ef\u4ee5\u542f\u52a8\uff0c\u800c\u68c0\u67e5\u70b9\u5237\u65b0\u4ee3\u7801\u5728\u65e5\u5fd7\u5411\u91cf\u94fe\u4e0a\u5de5\u4f5c\u4ee5\u63d0\u4ea4\u68c0\u67e5\u70b9\u3002</p> <p>Once the checkpoint is written into the log buffers, the checkpoint context is attached to the log buffer that the commit record was written to along with a completion callback. Log IO completion will call that callback, which can then run transaction committed processing for the log items (i.e. insert into AIL and unpin) in the log vector chain and then free the log vector chain and checkpoint context.</p> <p>\u5c06\u68c0\u67e5\u70b9\u5199\u5165\u65e5\u5fd7\u7f13\u51b2\u533a\u540e\uff0c\u68c0\u67e5\u70b9\u4e0a\u4e0b\u6587\u5c06\u4e0e\u5b8c\u6210\u56de\u8c03\u4e00\u8d77\u9644\u52a0\u5230\u5199\u5165\u63d0\u4ea4\u8bb0\u5f55\u7684\u65e5\u5fd7\u7f13\u51b2\u533a\u3002\u65e5\u5fd7IO\u5b8c\u6210\u5c06\u8c03\u7528\u8be5\u56de\u8c03\uff0c\u7136\u540e\u53ef\u4ee5\u5bf9\u65e5\u5fd7\u5411\u91cf\u94fe\u4e2d\u7684\u65e5\u5fd7\u9879\u8fd0\u884c\u4e8b\u52a1\u63d0\u4ea4\u5904\u7406\uff08\u5373\u63d2\u5165AIL\u548c\u53d6\u6d88\u9501\u5b9a\uff09\uff0c\u7136\u540e\u91ca\u653e\u65e5\u5fd7\u5411\u91cf\u94fe\u548c\u68c0\u67e5\u70b9\u4e0a\u4e0b\u6587\u3002</p> <p>Discussion Point: I am uncertain as to whether the log item is the most efficient way to track vectors, even though it seems like the natural way to do it. The fact that we walk the log items (in the CIL) just to chain the log vectors and break the link between the log item and the log vector means that we take a cache line hit for the log item list modification, then another for the log vector chaining. If we track by the log vectors, then we only need to break the link between the log item and the log vector, which means we should dirty only the log item cachelines. Normally I wouldn\u2019t be concerned about one vs two dirty cachelines except for the fact I\u2019ve seen upwards of 80,000 log vectors in one checkpoint transaction. I\u2019d guess this is a \u201cmeasure and compare\u201d situation that can be done after a working and reviewed implementation is in the dev tree\u2026.</p> <p>\u8ba8\u8bba\u70b9\uff1a\u6211\u4e0d\u786e\u5b9a\u65e5\u5fd7\u9879\u662f\u5426\u662f\u8ddf\u8e2a\u5411\u91cf\u7684\u6700\u6709\u6548\u65b9\u5f0f\uff0c\u5c3d\u7ba1\u8fd9\u770b\u8d77\u6765\u662f\u6700\u81ea\u7136\u7684\u65b9\u5f0f\u3002\u4e8b\u5b9e\u4e0a\uff0c\u6211\u4eec\u904d\u5386\u65e5\u5fd7\u9879\uff08\u5728CIL\u4e2d\uff09\u53ea\u662f\u4e3a\u4e86\u94fe\u63a5\u65e5\u5fd7\u5411\u91cf\u5e76\u65ad\u5f00\u65e5\u5fd7\u9879\u548c\u65e5\u5fd7\u5411\u91cf\u4e4b\u95f4\u7684\u94fe\u63a5\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u5bf9\u65e5\u5fd7\u9879\u5217\u8868\u4fee\u6539\u8fdb\u884c\u7f13\u5b58\u884c\u547d\u4e2d\uff0c\u7136\u540e\u53e6\u4e00\u4e2a\u7528\u4e8e\u5bf9\u6570\u5411\u91cf\u94fe\u3002\u5982\u679c\u6211\u4eec\u901a\u8fc7\u65e5\u5fd7\u5411\u91cf\u8fdb\u884c\u8ddf\u8e2a\uff0c\u90a3\u4e48\u6211\u4eec\u53ea\u9700\u8981\u65ad\u5f00\u65e5\u5fd7\u9879\u548c\u65e5\u5fd7\u5411\u91cf\u4e4b\u95f4\u7684\u94fe\u63a5\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u5e94\u8be5\u53ea\u6e05\u7406\u65e5\u5fd7\u9879\u7f13\u5b58\u884c\u3002\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u6211\u4e0d\u4f1a\u62c5\u5fc3\u4e00\u4e2a\u6216\u4e24\u4e2a\u810f\u7f13\u5b58\u884c\uff0c\u9664\u975e\u6211\u5728\u4e00\u4e2a\u68c0\u67e5\u70b9\u4e8b\u52a1\u4e2d\u770b\u5230\u4e86\u8d85\u8fc780000\u4e2a\u65e5\u5fd7\u5411\u91cf\u3002\u6211\u60f3\u8fd9\u662f\u4e00\u79cd\u201c\u8861\u91cf\u548c\u6bd4\u8f83\u201d\u7684\u60c5\u51b5\uff0c\u53ef\u4ee5\u5728\u5f00\u53d1\u6811\u4e2d\u627e\u5230\u4e00\u4e2a\u7ecf\u8fc7\u5de5\u4f5c\u548c\u5ba1\u67e5\u7684\u5b9e\u73b0\u4e4b\u540e\u5b8c\u6210\u2026\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/xfs/XFS%20Logging%20Design-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#94-delayed-logging-checkpoint-sequencing","title":"9.4 Delayed Logging: Checkpoint Sequencing","text":"<p>One of the key aspects of the XFS transaction subsystem is that it tags committed transactions with the log sequence number of the transaction commit. This allows transactions to be issued asynchronously even though there may be future operations that cannot be completed until that transaction is fully committed to the log. In the rare case that a dependent operation occurs (e.g. re-using a freed metadata extent for a data extent), a special, optimised log force can be issued to force the dependent transaction to disk immediately.</p> <p>XFS\u4e8b\u52a1\u5b50\u7cfb\u7edf\u7684\u4e00\u4e2a\u5173\u952e\u65b9\u9762\u662f\uff0c\u5b83\u7528\u4e8b\u52a1\u63d0\u4ea4\u7684\u65e5\u5fd7\u5e8f\u5217\u53f7\u6807\u8bb0\u63d0\u4ea4\u7684\u4e8b\u52a1\u3002\u8fd9\u5141\u8bb8\u5f02\u6b65\u53d1\u51fa\u4e8b\u52a1\uff0c\u5373\u4f7f\u5728\u4e8b\u52a1\u5b8c\u5168\u63d0\u4ea4\u5230\u65e5\u5fd7\u4e4b\u524d\u53ef\u80fd\u4f1a\u6709\u65e0\u6cd5\u5b8c\u6210\u7684\u672a\u6765\u64cd\u4f5c\u3002\u5728\u53d1\u751f\u4ece\u5c5e\u64cd\u4f5c\u7684\u7f55\u89c1\u60c5\u51b5\u4e0b\uff08\u4f8b\u5982\uff0c\u5c06\u91ca\u653e\u7684\u5143\u6570\u636e\u6570\u636e\u5757\u91cd\u65b0\u7528\u4e8e\u6570\u636e\u6570\u636e\u5757\uff09\uff0c\u53ef\u4ee5\u53d1\u51fa\u7279\u6b8a\u7684\u4f18\u5316\u65e5\u5fd7\u5f3a\u5236\uff0c\u4ee5\u5f3a\u5236\u5c06\u4ece\u5c5e\u4e8b\u52a1\u7acb\u5373\u5199\u5165\u78c1\u76d8\u3002</p> <p>To do this, transactions need to record the LSN of the commit record of the transaction. This LSN comes directly from the log buffer the transaction is written into. While this works just fine for the existing transaction mechanism, it does not work for delayed logging because transactions are not written directly into the log buffers. Hence some other method of sequencing transactions is required.</p> <p>\u4e3a\u6b64\uff0c\u4e8b\u52a1\u9700\u8981\u8bb0\u5f55\u4e8b\u52a1\u63d0\u4ea4\u8bb0\u5f55\u7684LSN\u3002\u8be5LSN\u76f4\u63a5\u6765\u81ea\u4e8b\u52a1\u5199\u5165\u7684\u65e5\u5fd7\u7f13\u51b2\u533a\u3002\u867d\u7136\u8fd9\u5bf9\u73b0\u6709\u7684\u4e8b\u52a1\u673a\u5236\u5f88\u597d\uff0c\u4f46\u5bf9\u5ef6\u8fdf\u65e5\u5fd7\u8bb0\u5f55\u4e0d\u8d77\u4f5c\u7528\uff0c\u56e0\u4e3a\u4e8b\u52a1\u4e0d\u4f1a\u76f4\u63a5\u5199\u5165\u65e5\u5fd7\u7f13\u51b2\u533a\u3002\u56e0\u6b64\uff0c\u9700\u8981\u4e00\u4e9b\u5176\u4ed6\u6392\u5e8f\u4e8b\u52a1\u7684\u65b9\u6cd5\u3002</p> <p>As discussed in the checkpoint section, delayed logging uses per-checkpoint contexts, and as such it is simple to assign a sequence number to each checkpoint. Because the switching of checkpoint contexts must be done atomically, it is simple to ensure that each new context has a monotonically increasing sequence number assigned to it without the need for an external atomic counter - we can just take the current context sequence number and add one to it for the new context.</p> <p>\u6b63\u5982\u68c0\u67e5\u70b9\u90e8\u5206\u6240\u8ba8\u8bba\u7684\uff0c\u5ef6\u8fdf\u65e5\u5fd7\u8bb0\u5f55\u4f7f\u7528\u6bcf\u4e2a\u68c0\u67e5\u70b9\u4e0a\u4e0b\u6587\uff0c\u56e0\u6b64\uff0c\u4e3a\u6bcf\u4e2a\u68c0\u67e5\u70b9\u5206\u914d\u5e8f\u5217\u53f7\u5f88\u7b80\u5355\u3002\u7531\u4e8e\u68c0\u67e5\u70b9\u4e0a\u4e0b\u6587\u7684\u5207\u6362\u5fc5\u987b\u4ee5\u539f\u5b50\u65b9\u5f0f\u8fdb\u884c\uff0c\u56e0\u6b64\u5f88\u5bb9\u6613\u786e\u4fdd\u6bcf\u4e2a\u65b0\u4e0a\u4e0b\u6587\u90fd\u5206\u914d\u4e86\u5355\u8c03\u9012\u589e\u7684\u5e8f\u5217\u53f7\uff0c\u800c\u4e0d\u9700\u8981\u5916\u90e8\u539f\u5b50\u8ba1\u6570\u5668-\u6211\u4eec\u53ea\u9700\u83b7\u53d6\u5f53\u524d\u4e0a\u4e0b\u6587\u5e8f\u5217\u53f7\uff0c\u5e76\u4e3a\u65b0\u4e0a\u4e0b\u6587\u6dfb\u52a0\u4e00\u4e2a\u5e8f\u5217\u53f7\u3002</p> <p>Then, instead of assigning a log buffer LSN to the transaction commit LSN during the commit, we can assign the current checkpoint sequence. This allows operations that track transactions that have not yet completed know what checkpoint sequence needs to be committed before they can continue. As a result, the code that forces the log to a specific LSN now needs to ensure that the log forces to a specific checkpoint.</p> <p>\u7136\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u6307\u5b9a\u5f53\u524d\u68c0\u67e5\u70b9\u5e8f\u5217\uff0c\u800c\u4e0d\u662f\u5728\u63d0\u4ea4\u671f\u95f4\u4e3a\u4e8b\u52a1\u63d0\u4ea4LSN\u5206\u914d\u65e5\u5fd7\u7f13\u51b2\u533aLSN\u3002\u8fd9\u5141\u8bb8\u8ddf\u8e2a\u5c1a\u672a\u5b8c\u6210\u7684\u4e8b\u52a1\u7684\u64cd\u4f5c\u77e5\u9053\u9700\u8981\u63d0\u4ea4\u4ec0\u4e48\u68c0\u67e5\u70b9\u5e8f\u5217\u624d\u80fd\u7ee7\u7eed\u3002\u56e0\u6b64\uff0c\u5f3a\u5236\u65e5\u5fd7\u5230\u7279\u5b9aLSN\u7684\u4ee3\u7801\u73b0\u5728\u9700\u8981\u786e\u4fdd\u65e5\u5fd7\u5f3a\u5236\u5230\u7279\u5b9a\u68c0\u67e5\u70b9\u3002</p> <p>To ensure that we can do this, we need to track all the checkpoint contexts that are currently committing to the log. When we flush a checkpoint, the context gets added to a \u201ccommitting\u201d list which can be searched. When a checkpoint commit completes, it is removed from the committing list. Because the checkpoint context records the LSN of the commit record for the checkpoint, we can also wait on the log buffer that contains the commit record, thereby using the existing log force mechanisms to execute synchronous forces.</p> <p>\u4e3a\u4e86\u786e\u4fdd\u6211\u4eec\u80fd\u591f\u505a\u5230\u8fd9\u4e00\u70b9\uff0c\u6211\u4eec\u9700\u8981\u8ddf\u8e2a\u5f53\u524d\u63d0\u4ea4\u5230\u65e5\u5fd7\u7684\u6240\u6709\u68c0\u67e5\u70b9\u4e0a\u4e0b\u6587\u3002\u5f53\u6211\u4eec\u5237\u65b0\u68c0\u67e5\u70b9\u65f6\uff0c\u4e0a\u4e0b\u6587\u88ab\u6dfb\u52a0\u5230\u53ef\u4ee5\u641c\u7d22\u7684\u201c\u63d0\u4ea4\u201d\u5217\u8868\u4e2d\u3002\u5f53\u68c0\u67e5\u70b9\u63d0\u4ea4\u5b8c\u6210\u65f6\uff0c\u5b83\u5c06\u4ece\u63d0\u4ea4\u5217\u8868\u4e2d\u5220\u9664\u3002\u56e0\u4e3a\u68c0\u67e5\u70b9\u4e0a\u4e0b\u6587\u8bb0\u5f55\u4e86\u68c0\u67e5\u70b9\u63d0\u4ea4\u8bb0\u5f55\u7684LSN\uff0c\u6240\u4ee5\u6211\u4eec\u8fd8\u53ef\u4ee5\u7b49\u5f85\u5305\u542b\u63d0\u4ea4\u8bb0\u5f55\u7684\u65e5\u5fd7\u7f13\u51b2\u533a\uff0c\u4ece\u800c\u4f7f\u7528\u73b0\u6709\u7684\u65e5\u5fd7\u5f3a\u5236\u673a\u5236\u6765\u6267\u884c\u540c\u6b65\u5f3a\u5236\u3002</p> <p>It should be noted that the synchronous forces may need to be extended with mitigation algorithms similar to the current log buffer code to allow aggregation of multiple synchronous transactions if there are already synchronous transactions being flushed. Investigation of the performance of the current design is needed before making any decisions here.</p> <p>\u5e94\u8be5\u6ce8\u610f\uff0c\u5982\u679c\u5df2\u7ecf\u6709\u540c\u6b65\u4e8b\u52a1\u88ab\u5237\u65b0\uff0c\u5219\u53ef\u80fd\u9700\u8981\u4f7f\u7528\u7c7b\u4f3c\u4e8e\u5f53\u524d\u65e5\u5fd7\u7f13\u51b2\u4ee3\u7801\u7684\u7f13\u89e3\u7b97\u6cd5\u6765\u6269\u5c55\u540c\u6b65\u529b\uff0c\u4ee5\u5141\u8bb8\u805a\u5408\u591a\u4e2a\u540c\u6b65\u4e8b\u52a1\u3002\u5728\u505a\u51fa\u4efb\u4f55\u51b3\u5b9a\u4e4b\u524d\uff0c\u9700\u8981\u5bf9\u5f53\u524d\u8bbe\u8ba1\u7684\u6027\u80fd\u8fdb\u884c\u8c03\u67e5\u3002</p> <p>The main concern with log forces is to ensure that all the previous checkpoints are also committed to disk before the one we need to wait for. Therefore we need to check that all the prior contexts in the committing list are also complete before waiting on the one we need to complete. We do this synchronisation in the log force code so that we don\u2019t need to wait anywhere else for such serialisation - it only matters when we do a log force.</p> <p>\u65e5\u5fd7\u529b\u91cf\u7684\u4e3b\u8981\u5173\u6ce8\u70b9\u662f\u786e\u4fdd\u5728\u6211\u4eec\u9700\u8981\u7b49\u5f85\u7684\u68c0\u67e5\u70b9\u4e4b\u524d\uff0c\u6240\u6709\u5148\u524d\u7684\u68c0\u67e5\u70b9\u90fd\u5df2\u63d0\u4ea4\u5230\u78c1\u76d8\u3002\u56e0\u6b64\uff0c\u5728\u7b49\u5f85\u9700\u8981\u5b8c\u6210\u7684\u4e0a\u4e0b\u6587\u4e4b\u524d\uff0c\u6211\u4eec\u9700\u8981\u68c0\u67e5\u63d0\u4ea4\u5217\u8868\u4e2d\u7684\u6240\u6709\u5148\u524d\u4e0a\u4e0b\u6587\u662f\u5426\u4e5f\u5df2\u5b8c\u6210\u3002\u6211\u4eec\u5728log force\u4ee3\u7801\u4e2d\u8fdb\u884c\u540c\u6b65\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u4e0d\u9700\u8981\u5728\u5176\u4ed6\u5730\u65b9\u7b49\u5f85\u8fd9\u6837\u7684\u4e32\u884c\u5316\u4e86\u2014\u2014\u8fd9\u53ea\u5728\u6211\u4eec\u8fdb\u884clog force\u65f6\u624d\u91cd\u8981\u3002</p> <p>The only remaining complexity is that a log force now also has to handle the case where the forcing sequence number is the same as the current context. That is, we need to flush the CIL and potentially wait for it to complete. This is a simple addition to the existing log forcing code to check the sequence numbers and push if required. Indeed, placing the current sequence checkpoint flush in the log force code enables the current mechanism for issuing synchronous transactions to remain untouched (i.e. commit an asynchronous transaction, then force the log at the LSN of that transaction) and so the higher level code behaves the same regardless of whether delayed logging is being used or not.</p> <p>\u552f\u4e00\u5269\u4e0b\u7684\u590d\u6742\u6027\u662f\uff0c\u65e5\u5fd7\u5f3a\u5236\u73b0\u5728\u8fd8\u5fc5\u987b\u5904\u7406\u5f3a\u5236\u5e8f\u5217\u53f7\u4e0e\u5f53\u524d\u4e0a\u4e0b\u6587\u76f8\u540c\u7684\u60c5\u51b5\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u9700\u8981\u5237\u65b0CIL\uff0c\u5e76\u53ef\u80fd\u7b49\u5f85\u5176\u5b8c\u6210\u3002\u8fd9\u662f\u5bf9\u73b0\u6709\u65e5\u5fd7\u5f3a\u5236\u4ee3\u7801\u7684\u7b80\u5355\u6dfb\u52a0\uff0c\u7528\u4e8e\u68c0\u67e5\u5e8f\u5217\u53f7\u5e76\u5728\u9700\u8981\u65f6\u8fdb\u884c\u63a8\u9001\u3002\u4e8b\u5b9e\u4e0a\uff0c\u5c06\u5f53\u524d\u5e8f\u5217\u68c0\u67e5\u70b9\u5237\u65b0\u653e\u5728\u65e5\u5fd7\u5f3a\u5236\u4ee3\u7801\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u5f53\u524d\u53d1\u5e03\u540c\u6b65\u4e8b\u52a1\u7684\u673a\u5236\u4fdd\u6301\u4e0d\u53d8\uff08\u5373\u63d0\u4ea4\u5f02\u6b65\u4e8b\u52a1\uff0c\u7136\u540e\u5728\u8be5\u4e8b\u52a1\u7684LSN\u5904\u5f3a\u5236\u65e5\u5fd7\uff09\uff0c\u56e0\u6b64\u65e0\u8bba\u662f\u5426\u4f7f\u7528\u5ef6\u8fdf\u65e5\u5fd7\u8bb0\u5f55\uff0c\u66f4\u9ad8\u7ea7\u522b\u7684\u4ee3\u7801\u90fd\u8868\u73b0\u76f8\u540c\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/xfs/XFS%20Logging%20Design-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#95-delayed-logging-checkpoint-log-space-accounting","title":"9.5 Delayed Logging: Checkpoint Log Space Accounting","text":"<p>The big issue for a checkpoint transaction is the log space reservation for the transaction. We don\u2019t know how big a checkpoint transaction is going to be ahead of time, nor how many log buffers it will take to write out, nor the number of split log vector regions are going to be used. We can track the amount of log space required as we add items to the commit item list, but we still need to reserve the space in the log for the checkpoint.</p> <p>\u68c0\u67e5\u70b9\u4e8b\u52a1\u7684\u6700\u5927\u95ee\u9898\u662f\u4e8b\u52a1\u7684\u65e5\u5fd7\u7a7a\u95f4\u4fdd\u7559\u3002\u6211\u4eec\u4e0d\u77e5\u9053\u68c0\u67e5\u70b9\u4e8b\u52a1\u63d0\u524d\u4f1a\u6709\u591a\u5927\uff0c\u4e5f\u4e0d\u77e5\u9053\u5199\u51fa\u6765\u9700\u8981\u591a\u5c11\u65e5\u5fd7\u7f13\u51b2\u533a\uff0c\u4e5f\u4e0d\u6e05\u695a\u8981\u4f7f\u7528\u7684\u5206\u5272\u65e5\u5fd7\u5411\u91cf\u533a\u57df\u7684\u6570\u91cf\u3002\u5f53\u6211\u4eec\u5411\u63d0\u4ea4\u9879\u5217\u8868\u4e2d\u6dfb\u52a0\u9879\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u8ddf\u8e2a\u6240\u9700\u7684\u65e5\u5fd7\u7a7a\u95f4\u91cf\uff0c\u4f46\u6211\u4eec\u4ecd\u7136\u9700\u8981\u5728\u65e5\u5fd7\u4e2d\u4e3a\u68c0\u67e5\u70b9\u4fdd\u7559\u7a7a\u95f4\u3002</p> <p>A typical transaction reserves enough space in the log for the worst case space usage of the transaction. The reservation accounts for log record headers, transaction and region headers, headers for split regions, buffer tail padding, etc. as well as the actual space for all the changed metadata in the transaction. While some of this is fixed overhead, much of it is dependent on the size of the transaction and the number of regions being logged (the number of log vectors in the transaction).</p> <p>\u5178\u578b\u7684\u4e8b\u52a1\u5728\u65e5\u5fd7\u4e2d\u4fdd\u7559\u4e86\u8db3\u591f\u7684\u7a7a\u95f4\uff0c\u4ee5\u4fbf\u5728\u6700\u574f\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528\u4e8b\u52a1\u7684\u7a7a\u95f4\u3002\u4fdd\u7559\u65e5\u5fd7\u8bb0\u5f55\u5934\u3001\u4e8b\u52a1\u548c\u533a\u57df\u5934\u3001\u62c6\u5206\u533a\u57df\u5934\u3001\u7f13\u51b2\u533a\u5c3e\u586b\u5145\u7b49\uff0c\u4ee5\u53ca\u4e8b\u52a1\u4e2d\u6240\u6709\u66f4\u6539\u5143\u6570\u636e\u7684\u5b9e\u9645\u7a7a\u95f4\u3002\u867d\u7136\u5176\u4e2d\u4e00\u4e9b\u5f00\u9500\u662f\u56fa\u5b9a\u7684\uff0c\u4f46\u5927\u90e8\u5206\u5f00\u9500\u53d6\u51b3\u4e8e\u4e8b\u52a1\u7684\u5927\u5c0f\u548c\u8bb0\u5f55\u7684\u533a\u57df\u6570\uff08\u4e8b\u52a1\u4e2d\u7684\u65e5\u5fd7\u5411\u91cf\u6570\uff09\u3002</p> <p>An example of the differences would be logging directory changes versus logging inode changes. If you modify lots of inode cores (e.g. <code>chmod -R g+w *</code>), then there are lots of transactions that only contain an inode core and an inode log format structure. That is, two vectors totaling roughly 150 bytes. If we modify 10,000 inodes, we have about 1.5MB of metadata to write in 20,000 vectors. Each vector is 12 bytes, so the total to be logged is approximately 1.75MB. In comparison, if we are logging full directory buffers, they are typically 4KB each, so we in 1.5MB of directory buffers we\u2019d have roughly 400 buffers and a buffer format structure for each buffer - roughly 800 vectors or 1.51MB total space. From this, it should be obvious that a static log space reservation is not particularly flexible and is difficult to select the \u201coptimal value\u201d for all workloads.</p> <p>\u533a\u522b\u7684\u4e00\u4e2a\u4f8b\u5b50\u662f\u8bb0\u5f55\u76ee\u5f55\u66f4\u6539\u4e0e\u8bb0\u5f55inode\u66f4\u6539\u3002\u5982\u679c\u60a8\u4fee\u6539\u4e86\u8bb8\u591ainode\u6838\u5fc3\uff08\u4f8b\u5982\u201cchmod-R g+w*\u201d\uff09\uff0c\u90a3\u4e48\u6709\u5f88\u591a\u4e8b\u52a1\u53ea\u5305\u542binode\u6838\u5fc3\u548cinode\u65e5\u5fd7\u683c\u5f0f\u7ed3\u6784\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e24\u4e2a\u77e2\u91cf\u603b\u8ba1\u7ea6150\u5b57\u8282\u3002\u5982\u679c\u6211\u4eec\u4fee\u653910000\u4e2a\u7d22\u5f15\u8282\u70b9\uff0c\u90a3\u4e48\u6211\u4eec\u6709\u5927\u7ea61.5MB\u7684\u5143\u6570\u636e\u53ef\u4ee5\u5199\u516520000\u4e2a\u5411\u91cf\u3002\u6bcf\u4e2a\u5411\u91cf\u662f12\u4e2a\u5b57\u8282\uff0c\u56e0\u6b64\u8981\u8bb0\u5f55\u7684\u603b\u5927\u5c0f\u5927\u7ea6\u4e3a1.75MB\u3002\u76f8\u6bd4\u4e4b\u4e0b\uff0c\u5982\u679c\u6211\u4eec\u8bb0\u5f55\u7684\u662f\u5b8c\u6574\u7684\u76ee\u5f55\u7f13\u51b2\u533a\uff0c\u5b83\u4eec\u901a\u5e38\u6bcf\u4e2a\u90fd\u662f4KB\uff0c\u56e0\u6b64\u57281.5MB\u7684\u76ee\u5f55\u7f13\u51b2\u4e2d\uff0c\u6211\u4eec\u5c06\u6709\u5927\u7ea6400\u4e2a\u7f13\u51b2\u533a\uff0c\u6bcf\u4e2a\u7f13\u51b2\u533a\u90fd\u6709\u4e00\u4e2a\u7f13\u51b2\u533a\u683c\u5f0f\u7ed3\u6784-\u5927\u7ea6800\u4e2a\u5411\u91cf\u62161.51MB\u7684\u603b\u7a7a\u95f4\u3002\u7531\u6b64\u53ef\u89c1\uff0c\u9759\u6001\u65e5\u5fd7\u7a7a\u95f4\u4fdd\u7559\u4e0d\u662f\u7279\u522b\u7075\u6d3b\uff0c\u5f88\u96be\u4e3a\u6240\u6709\u5de5\u4f5c\u8d1f\u8f7d\u9009\u62e9\u201c\u6700\u4f73\u503c\u201d\u3002</p> <p>Further, if we are going to use a static reservation, which bit of the entire reservation does it cover? We account for space used by the transaction reservation by tracking the space currently used by the object in the CIL and then calculating the increase or decrease in space used as the object is relogged. This allows for a checkpoint reservation to only have to account for log buffer metadata used such as log header records.</p> <p>\u6b64\u5916\uff0c\u5982\u679c\u6211\u4eec\u8981\u4f7f\u7528\u9759\u6001\u4fdd\u7559\uff0c\u5b83\u5c06\u8986\u76d6\u6574\u4e2a\u4fdd\u7559\u7684\u54ea\u4e00\u90e8\u5206\uff1f\u6211\u4eec\u901a\u8fc7\u8ddf\u8e2aCIL\u4e2d\u5bf9\u8c61\u5f53\u524d\u4f7f\u7528\u7684\u7a7a\u95f4\uff0c\u7136\u540e\u5728\u91cd\u65b0\u8bb0\u5f55\u5bf9\u8c61\u65f6\u8ba1\u7b97\u6240\u4f7f\u7528\u7a7a\u95f4\u7684\u589e\u52a0\u6216\u51cf\u5c11\uff0c\u6765\u8ba1\u7b97\u4e8b\u52a1\u4fdd\u7559\u4f7f\u7528\u7684\u7a7a\u95f4\u3002\u8fd9\u5141\u8bb8\u68c0\u67e5\u70b9\u4fdd\u7559\u4ec5\u8003\u8651\u4f7f\u7528\u7684\u65e5\u5fd7\u7f13\u51b2\u533a\u5143\u6570\u636e\uff0c\u5982\u65e5\u5fd7\u5934\u8bb0\u5f55\u3002</p> <p>However, even using a static reservation for just the log metadata is problematic. Typically log record headers use at least 16KB of log space per 1MB of log space consumed (512 bytes per 32k) and the reservation needs to be large enough to handle arbitrary sized checkpoint transactions. This reservation needs to be made before the checkpoint is started, and we need to be able to reserve the space without sleeping. For a 8MB checkpoint, we need a reservation of around 150KB, which is a non-trivial amount of space.</p> <p>\u7136\u800c\uff0c\u5373\u4f7f\u53ea\u5bf9\u65e5\u5fd7\u5143\u6570\u636e\u4f7f\u7528\u9759\u6001\u4fdd\u7559\u4e5f\u662f\u6709\u95ee\u9898\u7684\u3002\u901a\u5e38\uff0c\u65e5\u5fd7\u8bb0\u5f55\u5934\u6bcf\u6d88\u80171MB\u7684\u65e5\u5fd7\u7a7a\u95f4\u81f3\u5c11\u4f7f\u752816KB\u7684\u65e5\u5fd7\u7a7a\u95f4\uff08\u6bcf32k 512\u5b57\u8282\uff09\uff0c\u5e76\u4e14\u4fdd\u7559\u7a7a\u95f4\u9700\u8981\u8db3\u591f\u5927\uff0c\u4ee5\u5904\u7406\u4efb\u610f\u5927\u5c0f\u7684\u68c0\u67e5\u70b9\u4e8b\u52a1\u3002\u8fd9\u4e2a\u9884\u7559\u9700\u8981\u5728\u68c0\u67e5\u70b9\u542f\u52a8\u4e4b\u524d\u8fdb\u884c\uff0c\u6211\u4eec\u9700\u8981\u80fd\u591f\u5728\u4e0d\u7761\u89c9\u7684\u60c5\u51b5\u4e0b\u9884\u7559\u7a7a\u95f4\u3002\u5bf9\u4e8e8MB\u7684\u68c0\u67e5\u70b9\uff0c\u6211\u4eec\u9700\u8981\u5927\u7ea6150KB\u7684\u9884\u7559\u7a7a\u95f4\uff0c\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u5c0f\u7684\u7a7a\u95f4\u91cf\u3002</p> <p>A static reservation needs to manipulate the log grant counters - we can take a permanent reservation on the space, but we still need to make sure we refresh the write reservation (the actual space available to the transaction) after every checkpoint transaction completion. Unfortunately, if this space is not available when required, then the regrant code will sleep waiting for it.</p> <p>\u9759\u6001\u4fdd\u7559\u9700\u8981\u64cd\u4f5c\u65e5\u5fd7\u6388\u4e88\u8ba1\u6570\u5668-\u6211\u4eec\u53ef\u4ee5\u5bf9\u7a7a\u95f4\u8fdb\u884c\u6c38\u4e45\u4fdd\u7559\uff0c\u4f46\u4ecd\u9700\u8981\u786e\u4fdd\u5728\u6bcf\u4e2a\u68c0\u67e5\u70b9\u4e8b\u52a1\u5b8c\u6210\u540e\u5237\u65b0\u5199\u4fdd\u7559\uff08\u4e8b\u52a1\u7684\u5b9e\u9645\u53ef\u7528\u7a7a\u95f4\uff09\u3002\u4e0d\u5e78\u7684\u662f\uff0c\u5982\u679c\u8fd9\u4e2a\u7a7a\u95f4\u5728\u9700\u8981\u65f6\u4e0d\u53ef\u7528\uff0c\u90a3\u4e48\u518d\u751f\u4ee3\u7801\u5c06\u4f11\u7720\u7b49\u5f85\u5b83\u3002</p> <p>The problem with this is that it can lead to deadlocks as we may need to commit checkpoints to be able to free up log space (refer back to the description of rolling transactions for an example of this). Hence we must always have space available in the log if we are to use static reservations, and that is very difficult and complex to arrange. It is possible to do, but there is a simpler way.</p> <p>\u8fd9\u6837\u505a\u7684\u95ee\u9898\u662f\uff0c\u5b83\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6b7b\u9501\uff0c\u56e0\u4e3a\u6211\u4eec\u53ef\u80fd\u9700\u8981\u63d0\u4ea4\u68c0\u67e5\u70b9\u6765\u91ca\u653e\u65e5\u5fd7\u7a7a\u95f4\uff08\u6709\u5173\u6b64\u793a\u4f8b\uff0c\u8bf7\u53c2\u9605\u6eda\u52a8\u4e8b\u52a1\u7684\u63cf\u8ff0\uff09\u3002\u56e0\u6b64\uff0c\u5982\u679c\u8981\u4f7f\u7528\u9759\u6001\u9884\u8ba2\uff0c\u6211\u4eec\u5fc5\u987b\u5728\u65e5\u5fd7\u4e2d\u59cb\u7ec8\u6709\u53ef\u7528\u7a7a\u95f4\uff0c\u8fd9\u662f\u975e\u5e38\u56f0\u96be\u548c\u590d\u6742\u7684\u3002\u8fd9\u662f\u53ef\u80fd\u7684\uff0c\u4f46\u6709\u4e00\u79cd\u66f4\u7b80\u5355\u7684\u65b9\u6cd5\u3002</p> <p>The simpler way of doing this is tracking the entire log space used by the items in the CIL and using this to dynamically calculate the amount of log space required by the log metadata. If this log metadata space changes as a result of a transaction commit inserting a new memory buffer into the CIL, then the difference in space required is removed from the transaction that causes the change. Transactions at this level will always have enough space available in their reservation for this as they have already reserved the maximal amount of log metadata space they require, and such a delta reservation will always be less than or equal to the maximal amount in the reservation.</p> <p>\u66f4\u7b80\u5355\u7684\u65b9\u6cd5\u662f\u8ddf\u8e2aCIL\u4e2d\u9879\u76ee\u6240\u4f7f\u7528\u7684\u6574\u4e2a\u65e5\u5fd7\u7a7a\u95f4\uff0c\u5e76\u4f7f\u7528\u8be5\u65b9\u6cd5\u52a8\u6001\u8ba1\u7b97\u65e5\u5fd7\u5143\u6570\u636e\u6240\u9700\u7684\u65e5\u5fd7\u7a7a\u95f4\u91cf\u3002\u5982\u679c\u7531\u4e8e\u4e8b\u52a1\u63d0\u4ea4\u5c06\u65b0\u7684\u5185\u5b58\u7f13\u51b2\u533a\u63d2\u5165CIL\u800c\u5bfc\u81f4\u65e5\u5fd7\u5143\u6570\u636e\u7a7a\u95f4\u53d1\u751f\u66f4\u6539\uff0c\u5219\u6240\u9700\u7a7a\u95f4\u7684\u5dee\u5f02\u5c06\u4ece\u5bfc\u81f4\u66f4\u6539\u7684\u4e8b\u52a1\u4e2d\u5220\u9664\u3002\u6b64\u7ea7\u522b\u7684\u4e8b\u52a1\u5728\u5176\u4fdd\u7559\u4e2d\u5c06\u59cb\u7ec8\u6709\u8db3\u591f\u7684\u7a7a\u95f4\u53ef\u7528\uff0c\u56e0\u4e3a\u5b83\u4eec\u5df2\u7ecf\u4fdd\u7559\u4e86\u6240\u9700\u7684\u6700\u5927\u65e5\u5fd7\u5143\u6570\u636e\u7a7a\u95f4\u91cf\uff0c\u5e76\u4e14\u8fd9\u79cd\u589e\u91cf\u4fdd\u7559\u5c06\u59cb\u7ec8\u5c0f\u4e8e\u6216\u7b49\u4e8e\u4fdd\u7559\u4e2d\u7684\u6700\u5927\u91cf\u3002</p> <p>Hence we can grow the checkpoint transaction reservation dynamically as items are added to the CIL and avoid the need for reserving and regranting log space up front. This avoids deadlocks and removes a blocking point from the checkpoint flush code.</p> <p>\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u5c06\u9879\u76ee\u6dfb\u52a0\u5230CIL\u65f6\u52a8\u6001\u589e\u52a0\u68c0\u67e5\u70b9\u4e8b\u52a1\u4fdd\u7559\uff0c\u5e76\u907f\u514d\u9884\u5148\u4fdd\u7559\u548c\u91cd\u65b0\u5206\u914d\u65e5\u5fd7\u7a7a\u95f4\u7684\u9700\u8981\u3002\u8fd9\u907f\u514d\u4e86\u6b7b\u9501\uff0c\u5e76\u4ece\u68c0\u67e5\u70b9\u6e05\u9664\u4ee3\u7801\u4e2d\u5220\u9664\u4e86\u4e00\u4e2a\u963b\u585e\u70b9\u3002</p> <p>As mentioned early, transactions can\u2019t grow to more than half the size of the log. Hence as part of the reservation growing, we need to also check the size of the reservation against the maximum allowed transaction size. If we reach the maximum threshold, we need to push the CIL to the log. This is effectively a \u201cbackground flush\u201d and is done on demand. This is identical to a CIL push triggered by a log force, only that there is no waiting for the checkpoint commit to complete. This background push is checked and executed by transaction commit code.</p> <p>\u5982\u524d\u6240\u8ff0\uff0c\u4e8b\u52a1\u4e0d\u80fd\u589e\u957f\u5230\u65e5\u5fd7\u5927\u5c0f\u7684\u4e00\u534a\u4ee5\u4e0a\u3002\u56e0\u6b64\uff0c\u4f5c\u4e3a\u9884\u8ba2\u589e\u957f\u7684\u4e00\u90e8\u5206\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u6839\u636e\u5141\u8bb8\u7684\u6700\u5927\u4ea4\u6613\u5927\u5c0f\u68c0\u67e5\u9884\u8ba2\u7684\u5927\u5c0f\u3002\u5982\u679c\u8fbe\u5230\u6700\u5927\u9608\u503c\uff0c\u6211\u4eec\u9700\u8981\u5c06CIL\u63a8\u5230\u65e5\u5fd7\u4e2d\u3002\u8fd9\u5b9e\u9645\u4e0a\u662f\u4e00\u79cd\u201c\u540e\u53f0\u5237\u65b0\u201d\uff0c\u5e76\u4e14\u662f\u6309\u9700\u5b8c\u6210\u7684\u3002\u8fd9\u4e0e\u65e5\u5fd7\u5f3a\u5236\u89e6\u53d1\u7684CIL\u63a8\u9001\u76f8\u540c\uff0c\u53ea\u662f\u4e0d\u9700\u8981\u7b49\u5f85\u68c0\u67e5\u70b9\u63d0\u4ea4\u5b8c\u6210\u3002\u6b64\u540e\u53f0\u63a8\u9001\u7531\u4e8b\u52a1\u63d0\u4ea4\u4ee3\u7801\u68c0\u67e5\u548c\u6267\u884c\u3002</p> <p>If the transaction subsystem goes idle while we still have items in the CIL, they will be flushed by the periodic log force issued by the xfssyncd. This log force will push the CIL to disk, and if the transaction subsystem stays idle, allow the idle log to be covered (effectively marked clean) in exactly the same manner that is done for the existing logging method. A discussion point is whether this log force needs to be done more frequently than the current rate which is once every 30s.</p> <p>\u5982\u679c\u4e8b\u52a1\u5b50\u7cfb\u7edf\u5728CIL\u4e2d\u4ecd\u6709\u9879\u76ee\u65f6\u5904\u4e8e\u7a7a\u95f2\u72b6\u6001\uff0c\u90a3\u4e48xfssyncd\u53d1\u51fa\u7684\u5468\u671f\u6027\u65e5\u5fd7\u5f3a\u5236\u5c06\u5237\u65b0\u8fd9\u4e9b\u9879\u76ee\u3002\u6b64\u65e5\u5fd7\u5f3a\u5236\u5c06CIL\u63a8\u9001\u5230\u78c1\u76d8\uff0c\u5982\u679c\u4e8b\u52a1\u5b50\u7cfb\u7edf\u4fdd\u6301\u7a7a\u95f2\uff0c\u5219\u5141\u8bb8\u4ee5\u4e0e\u73b0\u6709\u65e5\u5fd7\u8bb0\u5f55\u65b9\u6cd5\u5b8c\u5168\u76f8\u540c\u7684\u65b9\u5f0f\u8986\u76d6\u7a7a\u95f2\u65e5\u5fd7\uff08\u6709\u6548\u6807\u8bb0\u4e3a\u6e05\u9664\uff09\u3002\u4e00\u4e2a\u8ba8\u8bba\u70b9\u662f\uff0c\u662f\u5426\u9700\u8981\u6bd4\u5f53\u524d\u7684\u9891\u7387\uff08\u6bcf30\u79d2\u4e00\u6b21\uff09\u66f4\u9891\u7e41\u5730\u6267\u884c\u6b64\u5bf9\u6570\u5f3a\u5236\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/xfs/XFS%20Logging%20Design-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#96-delayed-logging-log-item-pinning","title":"9.6 Delayed Logging: Log Item Pinning","text":"<p>Currently log items are pinned during transaction commit while the items are still locked. This happens just after the items are formatted, though it could be done any time before the items are unlocked. The result of this mechanism is that items get pinned once for every transaction that is committed to the log buffers. Hence items that are relogged in the log buffers will have a pin count for every outstanding transaction they were dirtied in. When each of these transactions is completed, they will unpin the item once. As a result, the item only becomes unpinned when all the transactions complete and there are no pending transactions. Thus the pinning and unpinning of a log item is symmetric as there is a 1:1 relationship with transaction commit and log item completion.</p> <p>\u5f53\u524d\u65e5\u5fd7\u9879\u5728\u4e8b\u52a1\u63d0\u4ea4\u671f\u95f4\u88ab\u9501\u5b9a\uff0c\u800c\u8fd9\u4e9b\u9879\u4ecd\u88ab\u9501\u5b9a\u3002\u8fd9\u53d1\u751f\u5728\u9879\u76ee\u683c\u5f0f\u5316\u4e4b\u540e\uff0c\u5c3d\u7ba1\u53ef\u4ee5\u5728\u9879\u76ee\u89e3\u9501\u4e4b\u524d\u968f\u65f6\u8fdb\u884c\u3002\u8fd9\u79cd\u673a\u5236\u7684\u7ed3\u679c\u662f\uff0c\u5bf9\u4e8e\u63d0\u4ea4\u5230\u65e5\u5fd7\u7f13\u51b2\u533a\u7684\u6bcf\u4e2a\u4e8b\u52a1\uff0c\u9879\u90fd\u88ab\u56fa\u5b9a\u4e00\u6b21\u3002\u56e0\u6b64\uff0c\u91cd\u65b0\u8bb0\u5f55\u5728\u65e5\u5fd7\u7f13\u51b2\u533a\u4e2d\u7684\u9879\u76ee\u5c06\u5bf9\u5b83\u4eec\u88ab\u6e05\u9664\u7684\u6bcf\u4e2a\u672a\u5b8c\u6210\u4e8b\u52a1\u90fd\u6709\u4e00\u4e2apin\u8ba1\u6570\u3002\u5f53\u8fd9\u4e9b\u4e8b\u52a1\u4e2d\u7684\u6bcf\u4e2a\u4e8b\u52a1\u5b8c\u6210\u65f6\uff0c\u5b83\u4eec\u5c06\u53d6\u6d88\u56fa\u5b9a\u8be5\u9879\u76ee\u4e00\u6b21\u3002\u56e0\u6b64\uff0c\u53ea\u6709\u5f53\u6240\u6709\u4e8b\u52a1\u90fd\u5b8c\u6210\u5e76\u4e14\u6ca1\u6709\u6302\u8d77\u7684\u4e8b\u52a1\u65f6\uff0c\u9879\u76ee\u624d\u4f1a\u53d8\u4e3a\u672a\u56fa\u5b9a\u3002\u56e0\u6b64\uff0c\u65e5\u5fd7\u9879\u7684\u56fa\u5b9a\u548c\u53d6\u6d88\u56fa\u5b9a\u662f\u5bf9\u79f0\u7684\uff0c\u56e0\u4e3a\u4e8b\u52a1\u63d0\u4ea4\u548c\u65e5\u5fd7\u9879\u5b8c\u6210\u4e4b\u95f4\u5b58\u57281:1\u7684\u5173\u7cfb\u3002</p> <p>For delayed logging, however, we have an asymmetric transaction commit to completion relationship. Every time an object is relogged in the CIL it goes through the commit process without a corresponding completion being registered. That is, we now have a many-to-one relationship between transaction commit and log item completion. The result of this is that pinning and unpinning of the log items becomes unbalanced if we retain the \u201cpin on transaction commit, unpin on transaction completion\u201d model.</p> <p>\u7136\u800c\uff0c\u5bf9\u4e8e\u5ef6\u8fdf\u65e5\u5fd7\u8bb0\u5f55\uff0c\u6211\u4eec\u6709\u4e00\u4e2a\u4e0d\u5bf9\u79f0\u7684\u4e8b\u52a1\u63d0\u4ea4\u5b8c\u6210\u5173\u7cfb\u3002\u6bcf\u6b21\u5728CIL\u4e2d\u91cd\u65b0\u8bb0\u5f55\u5bf9\u8c61\u65f6\uff0c\u5b83\u90fd\u4f1a\u7ecf\u8fc7\u63d0\u4ea4\u8fc7\u7a0b\uff0c\u800c\u4e0d\u4f1a\u6ce8\u518c\u76f8\u5e94\u7684\u5b8c\u6210\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u73b0\u5728\u5728\u4e8b\u52a1\u63d0\u4ea4\u548c\u65e5\u5fd7\u9879\u5b8c\u6210\u4e4b\u95f4\u6709\u4e00\u4e2a\u591a\u5bf9\u4e00\u7684\u5173\u7cfb\u3002\u8fd9\u6837\u505a\u7684\u7ed3\u679c\u662f\uff0c\u5982\u679c\u6211\u4eec\u4fdd\u7559\u201c\u4e8b\u52a1\u63d0\u4ea4\u65f6\u56fa\u5b9a\uff0c\u4e8b\u52a1\u5b8c\u6210\u65f6\u53d6\u6d88\u56fa\u5b9a\u201d\u6a21\u578b\uff0c\u5219\u65e5\u5fd7\u9879\u7684\u56fa\u5b9a\u548c\u53d6\u6d88\u56fa\u5b9a\u5c06\u53d8\u5f97\u4e0d\u5e73\u8861\u3002</p> <p>To keep pin/unpin symmetry, the algorithm needs to change to a \u201cpin on insertion into the CIL, unpin on checkpoint completion\u201d. In other words, the pinning and unpinning becomes symmetric around a checkpoint context. We have to pin the object the first time it is inserted into the CIL - if it is already in the CIL during a transaction commit, then we do not pin it again. Because there can be multiple outstanding checkpoint contexts, we can still see elevated pin counts, but as each checkpoint completes the pin count will retain the correct value according to its context.</p> <p>\u4e3a\u4e86\u4fdd\u6301\u56fa\u5b9a/\u53d6\u6d88\u56fa\u5b9a\u5bf9\u79f0\uff0c\u7b97\u6cd5\u9700\u8981\u66f4\u6539\u4e3a\u201c\u63d2\u5165CIL\u65f6\u56fa\u5b9a\uff0c\u68c0\u67e5\u70b9\u5b8c\u6210\u65f6\u53d6\u6d88\u56fa\u5b9a\u201d\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u56fa\u5b9a\u548c\u53d6\u6d88\u56fa\u5b9a\u5728\u68c0\u67e5\u70b9\u4e0a\u4e0b\u6587\u5468\u56f4\u53d8\u5f97\u5bf9\u79f0\u3002\u6211\u4eec\u5fc5\u987b\u5728\u5bf9\u8c61\u7b2c\u4e00\u6b21\u63d2\u5165CIL\u65f6\u9501\u5b9a\u5b83\u2014\u2014\u5982\u679c\u5728\u4e8b\u52a1\u63d0\u4ea4\u671f\u95f4\u5b83\u5df2\u7ecf\u5728CIL\u4e2d\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u4e0d\u518d\u9501\u5b9a\u5b83\u3002\u56e0\u4e3a\u53ef\u80fd\u6709\u591a\u4e2a\u672a\u5b8c\u6210\u7684\u68c0\u67e5\u70b9\u4e0a\u4e0b\u6587\uff0c\u6211\u4eec\u4ecd\u7136\u53ef\u4ee5\u770b\u5230\u63d0\u5347\u7684pin\u8ba1\u6570\uff0c\u4f46\u968f\u7740\u6bcf\u4e2a\u68c0\u67e5\u70b9\u5b8c\u6210\uff0cpin\u8ba1\u6570\u5c06\u6839\u636e\u5176\u4e0a\u4e0b\u6587\u4fdd\u6301\u6b63\u786e\u7684\u503c\u3002</p> <p>Just to make matters slightly more complex, this checkpoint level context for the pin count means that the pinning of an item must take place under the CIL commit/flush lock. If we pin the object outside this lock, we cannot guarantee which context the pin count is associated with. This is because of the fact pinning the item is dependent on whether the item is present in the current CIL or not. If we don\u2019t pin the CIL first before we check and pin the object, we have a race with CIL being flushed between the check and the pin (or not pinning, as the case may be). Hence we must hold the CIL flush/commit lock to guarantee that we pin the items correctly.</p> <p>\u4e3a\u4e86\u8ba9\u4e8b\u60c5\u7a0d\u5fae\u590d\u6742\u4e00\u70b9\uff0cpin\u8ba1\u6570\u7684\u68c0\u67e5\u70b9\u7ea7\u522b\u4e0a\u4e0b\u6587\u610f\u5473\u7740\u9879\u76ee\u7684\u9501\u5b9a\u5fc5\u987b\u5728CIL\u63d0\u4ea4/\u5237\u65b0\u9501\u4e0b\u8fdb\u884c\u3002\u5982\u679c\u6211\u4eec\u5c06\u5bf9\u8c61\u9501\u5b9a\u5728\u8fd9\u4e2a\u9501\u4e4b\u5916\uff0c\u6211\u4eec\u65e0\u6cd5\u4fdd\u8bc1\u9501\u5b9a\u8ba1\u6570\u4e0e\u54ea\u4e2a\u4e0a\u4e0b\u6587\u76f8\u5173\u8054\u3002\u8fd9\u662f\u56e0\u4e3a\u56fa\u5b9a\u9879\u76ee\u53d6\u51b3\u4e8e\u5f53\u524dCIL\u4e2d\u662f\u5426\u5b58\u5728\u8be5\u9879\u76ee\u3002\u5982\u679c\u6211\u4eec\u5728\u68c0\u67e5\u548c\u9501\u5b9a\u5bf9\u8c61\u4e4b\u524d\u6ca1\u6709\u9996\u5148\u9501\u5b9aCIL\uff0c\u90a3\u4e48\u6211\u4eec\u4f1a\u5728\u68c0\u67e5\u548c\u5f15\u811a\u4e4b\u95f4\u4ea7\u751fCIL\u88ab\u5237\u65b0\u7684\u7ade\u4e89\uff08\u6216\u8005\u4e0d\u9501\u5b9a\uff0c\u89c6\u60c5\u51b5\u800c\u5b9a\uff09\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5fc5\u987b\u6301\u6709CIL\u5237\u65b0/\u63d0\u4ea4\u9501\uff0c\u4ee5\u786e\u4fdd\u6b63\u786e\u9501\u5b9a\u9879\u76ee\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/xfs/XFS%20Logging%20Design-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#97-delayed-logging-concurrent-scalability","title":"9.7 Delayed Logging: Concurrent Scalability","text":"<p>A fundamental requirement for the CIL is that accesses through transaction commits must scale to many concurrent commits. The current transaction commit code does not break down even when there are transactions coming from 2048 processors at once. The current transaction code does not go any faster than if there was only one CPU using it, but it does not slow down either.</p> <p>CIL\u7684\u4e00\u4e2a\u57fa\u672c\u8981\u6c42\u662f\uff0c\u901a\u8fc7\u4e8b\u52a1\u63d0\u4ea4\u8fdb\u884c\u7684\u8bbf\u95ee\u5fc5\u987b\u6269\u5c55\u5230\u8bb8\u591a\u5e76\u53d1\u63d0\u4ea4\u3002\u5373\u4f7f\u540c\u65f6\u67092048\u4e2a\u5904\u7406\u5668\u53d1\u51fa\u7684\u4e8b\u52a1\uff0c\u5f53\u524d\u4e8b\u52a1\u63d0\u4ea4\u4ee3\u7801\u4e5f\u4e0d\u4f1a\u5d29\u6e83\u3002\u5f53\u524d\u4e8b\u52a1\u4ee3\u7801\u7684\u901f\u5ea6\u4e0d\u4f1a\u6bd4\u53ea\u6709\u4e00\u4e2aCPU\u4f7f\u7528\u5b83\u65f6\u5feb\uff0c\u4f46\u4e5f\u4e0d\u4f1a\u51cf\u6162\u901f\u5ea6\u3002</p> <p>As a result, the delayed logging transaction commit code needs to be designed for concurrency from the ground up. It is obvious that there are serialisation points in the design - the three important ones are:</p> <ol> <li>Locking out new transaction commits while flushing the CIL</li> <li>Adding items to the CIL and updating item space accounting</li> <li>Checkpoint commit ordering</li> </ol> <p>\u56e0\u6b64\uff0c\u5ef6\u8fdf\u65e5\u5fd7\u8bb0\u5f55\u4e8b\u52a1\u63d0\u4ea4\u4ee3\u7801\u9700\u8981\u4ece\u5934\u5f00\u59cb\u4e3a\u5e76\u53d1\u6027\u800c\u8bbe\u8ba1\u3002\u5f88\u660e\u663e\uff0c\u8bbe\u8ba1\u4e2d\u5b58\u5728\u4e32\u884c\u5316\u70b9\u2014\u2014\u4e09\u4e2a\u91cd\u8981\u70b9\u662f\uff1a</p> <ol> <li>\u5237\u65b0CIL\u65f6\u9501\u5b9a\u65b0\u4e8b\u52a1\u63d0\u4ea4</li> <li>\u5411CIL\u6dfb\u52a0\u9879\u76ee\u5e76\u66f4\u65b0\u9879\u76ee\u7a7a\u95f4\u6838\u7b97</li> <li>\u68c0\u67e5\u70b9\u63d0\u4ea4\u987a\u5e8f</li> </ol> <p>Looking at the transaction commit and CIL flushing interactions, it is clear that we have a many-to-one interaction here. That is, the only restriction on the number of concurrent transactions that can be trying to commit at once is the amount of space available in the log for their reservations. The practical limit here is in the order of several hundred concurrent transactions for a 128MB log, which means that it is generally one per CPU in a machine.</p> <p>\u770b\u770b\u4e8b\u52a1\u63d0\u4ea4\u548cCIL\u5237\u65b0\u4ea4\u4e92\uff0c\u5f88\u660e\u663e\u6211\u4eec\u8fd9\u91cc\u6709\u4e00\u4e2a\u591a\u5bf9\u4e00\u7684\u4ea4\u4e92\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5bf9\u53ef\u4ee5\u5c1d\u8bd5\u4e00\u6b21\u63d0\u4ea4\u7684\u5e76\u53d1\u4e8b\u52a1\u6570\u91cf\u7684\u552f\u4e00\u9650\u5236\u662f\u65e5\u5fd7\u4e2d\u53ef\u7528\u4e8e\u4fdd\u7559\u7684\u7a7a\u95f4\u91cf\u3002\u8fd9\u91cc\u7684\u5b9e\u9645\u9650\u5236\u662f128MB\u65e5\u5fd7\u7684\u6570\u767e\u4e2a\u5e76\u53d1\u4e8b\u52a1\u6570\u91cf\u7ea7\uff0c\u8fd9\u610f\u5473\u7740\u5728\u4e00\u53f0\u673a\u5668\u4e2d\uff0c\u6bcf\u4e2aCPU\u901a\u5e38\u6709\u4e00\u4e2a\u5e76\u53d1\u4e8b\u52a1\u3002</p> <p>The amount of time a transaction commit needs to hold out a flush is a relatively long period of time - the pinning of log items needs to be done while we are holding out a CIL flush, so at the moment that means it is held across the formatting of the objects into memory buffers (i.e. while <code>memcpy()</code>s are in progress). Ultimately a two pass algorithm where the formatting is done separately to the pinning of objects could be used to reduce the hold time of the transaction commit side. \u4e8b\u52a1\u63d0\u4ea4\u6267\u884c\u5237\u65b0\u6240\u9700\u7684\u65f6\u95f4\u76f8\u5bf9\u8f83\u957f-\u5728\u6267\u884cCIL\u5237\u65b0\u65f6\u9700\u8981\u9501\u5b9a\u65e5\u5fd7\u9879\uff0c\u56e0\u6b64\u76ee\u524d\u8fd9\u610f\u5473\u7740\u5728\u5c06\u5bf9\u8c61\u683c\u5f0f\u5316\u4e3a\u5185\u5b58\u7f13\u51b2\u533a\u65f6\uff08\u5373<code>memcpy\uff08\uff09</code>s\u6b63\u5728\u8fdb\u884c\u4e2d\uff09\u3002\u6700\u7ec8\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e24\u6b21\u4f20\u9012\u7b97\u6cd5\u6765\u51cf\u5c11\u4e8b\u52a1\u63d0\u4ea4\u7aef\u7684\u4fdd\u6301\u65f6\u95f4\uff0c\u5176\u4e2d\u683c\u5f0f\u5316\u662f\u5355\u72ec\u5bf9\u5bf9\u8c61\u8fdb\u884c\u56fa\u5b9a\u7684\u3002</p> <p>Because of the number of potential transaction commit side holders, the lock really needs to be a sleeping lock - if the CIL flush takes the lock, we do not want every other CPU in the machine spinning on the CIL lock. Given that flushing the CIL could involve walking a list of tens of thousands of log items, it will get held for a significant time and so spin contention is a significant concern. Preventing lots of CPUs spinning doing nothing is the main reason for choosing a sleeping lock even though nothing in either the transaction commit or CIL flush side sleeps with the lock held.</p> <p>\u7531\u4e8e\u6f5c\u5728\u7684\u4e8b\u52a1\u63d0\u4ea4\u65b9\u6301\u6709\u8005\u7684\u6570\u91cf\uff0c\u9501\u786e\u5b9e\u9700\u8981\u662f\u4f11\u7720\u9501-\u5982\u679cCIL\u5237\u65b0\u5360\u7528\u4e86\u9501\uff0c\u6211\u4eec\u4e0d\u5e0c\u671b\u673a\u5668\u4e2d\u7684\u5176\u4ed6CPU\u90fd\u5728CIL\u9501\u4e0a\u65cb\u8f6c\u3002\u8003\u8651\u5230\u5237\u65b0CIL\u53ef\u80fd\u9700\u8981\u904d\u5386\u6570\u4e07\u4e2a\u65e5\u5fd7\u9879\u7684\u5217\u8868\uff0c\u5b83\u5c06\u88ab\u4fdd\u5b58\u5f88\u957f\u65f6\u95f4\uff0c\u56e0\u6b64\u65cb\u8f6c\u4e89\u7528\u662f\u4e00\u4e2a\u91cd\u8981\u7684\u95ee\u9898\u3002\u5373\u4f7f\u4e8b\u52a1\u63d0\u4ea4\u6216CIL\u5237\u65b0\u7aef\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u90fd\u4e0d\u4f1a\u5728\u9501\u4fdd\u6301\u7684\u60c5\u51b5\u4e0b\u4f11\u7720\uff0c\u4f46\u9632\u6b62\u5927\u91cfCPU\u7a7a\u8f6c\uff0c\u8fd9\u662f\u9009\u62e9\u4f11\u7720\u9501\u7684\u4e3b\u8981\u539f\u56e0\u3002</p> <p>It should also be noted that CIL flushing is also a relatively rare operation compared to transaction commit for asynchronous transaction workloads - only time will tell if using a read-write semaphore for exclusion will limit transaction commit concurrency due to cache line bouncing of the lock on the read side.</p> <p>\u8fd8\u5e94\u6ce8\u610f\uff0c\u4e0e\u5f02\u6b65\u4e8b\u52a1\u5de5\u4f5c\u8d1f\u8f7d\u7684\u4e8b\u52a1\u63d0\u4ea4\u76f8\u6bd4\uff0cCIL\u5237\u65b0\u4e5f\u662f\u4e00\u79cd\u76f8\u5bf9\u7f55\u89c1\u7684\u64cd\u4f5c\u2014\u2014\u53ea\u6709\u65f6\u95f4\u624d\u80fd\u5224\u65ad\u4f7f\u7528\u8bfb\u5199\u4fe1\u53f7\u91cf\u8fdb\u884c\u6392\u9664\u662f\u5426\u4f1a\u7531\u4e8e\u8bfb\u53d6\u7aef\u9501\u7684\u7f13\u5b58\u7ebf\u8df3\u52a8\u800c\u9650\u5236\u4e8b\u52a1\u63d0\u4ea4\u5e76\u53d1\u6027\u3002</p> <p>The second serialisation point is on the transaction commit side where items are inserted into the CIL. Because transactions can enter this code concurrently, the CIL needs to be protected separately from the above commit/flush exclusion. It also needs to be an exclusive lock but it is only held for a very short time and so a spin lock is appropriate here. It is possible that this lock will become a contention point, but given the short hold time once per transaction I think that contention is unlikely.</p> <p>\u7b2c\u4e8c\u4e2a\u4e32\u884c\u5316\u70b9\u4f4d\u4e8e\u4e8b\u52a1\u63d0\u4ea4\u7aef\uff0c\u9879\u76ee\u63d2\u5165CIL\u3002\u56e0\u4e3a\u4e8b\u52a1\u53ef\u4ee5\u540c\u65f6\u8f93\u5165\u6b64\u4ee3\u7801\uff0c\u6240\u4ee5CIL\u9700\u8981\u4e0e\u4e0a\u8ff0\u63d0\u4ea4/\u5237\u65b0\u6392\u9664\u5206\u5f00\u4fdd\u62a4\u3002\u5b83\u8fd8\u9700\u8981\u662f\u4e00\u4e2a\u72ec\u5360\u9501\uff0c\u4f46\u5b83\u53ea\u4fdd\u6301\u5f88\u77ed\u7684\u65f6\u95f4\uff0c\u56e0\u6b64\u65cb\u8f6c\u9501\u5728\u8fd9\u91cc\u662f\u5408\u9002\u7684\u3002\u8fd9\u4e2a\u9501\u53ef\u80fd\u4f1a\u6210\u4e3a\u4e89\u7528\u70b9\uff0c\u4f46\u8003\u8651\u5230\u6bcf\u4e2a\u4e8b\u52a1\u4e00\u6b21\u7684\u4fdd\u6301\u65f6\u95f4\u5f88\u77ed\uff0c\u6211\u8ba4\u4e3a\u4e89\u7528\u662f\u4e0d\u53ef\u80fd\u7684\u3002</p> <p>The final serialisation point is the checkpoint commit record ordering code that is run as part of the checkpoint commit and log force sequencing. The code path that triggers a CIL flush (i.e. whatever triggers the log force) will enter an ordering loop after writing all the log vectors into the log buffers but before writing the commit record. This loop walks the list of committing checkpoints and needs to block waiting for checkpoints to complete their commit record write. As a result it needs a lock and a wait variable. Log force sequencing also requires the same lock, list walk, and blocking mechanism to ensure completion of checkpoints.</p> <p>\u6700\u540e\u4e00\u4e2a\u4e32\u884c\u5316\u70b9\u662f\u68c0\u67e5\u70b9\u63d0\u4ea4\u8bb0\u5f55\u6392\u5e8f\u4ee3\u7801\uff0c\u5b83\u4f5c\u4e3a\u68c0\u67e5\u70b9\u63d0\u4ea4\u548c\u65e5\u5fd7\u5f3a\u5236\u6392\u5e8f\u7684\u4e00\u90e8\u5206\u8fd0\u884c\u3002\u89e6\u53d1CIL\u5237\u65b0\u7684\u4ee3\u7801\u8def\u5f84\uff08\u5373\u4efb\u4f55\u89e6\u53d1\u65e5\u5fd7\u5f3a\u5236\u7684\u4ee3\u7801\uff09\u5c06\u5728\u5c06\u6240\u6709\u65e5\u5fd7\u5411\u91cf\u5199\u5165\u65e5\u5fd7\u7f13\u51b2\u533a\u4e4b\u540e\u4f46\u5728\u5199\u5165\u63d0\u4ea4\u8bb0\u5f55\u4e4b\u524d\u8fdb\u5165\u6392\u5e8f\u5faa\u73af\u3002\u6b64\u5faa\u73af\u904d\u5386\u63d0\u4ea4\u68c0\u67e5\u70b9\u5217\u8868\uff0c\u5e76\u9700\u8981\u963b\u6b62\u7b49\u5f85\u68c0\u67e5\u70b9\u5b8c\u6210\u63d0\u4ea4\u8bb0\u5f55\u5199\u5165\u3002\u56e0\u6b64\uff0c\u5b83\u9700\u8981\u4e00\u4e2a\u9501\u548c\u4e00\u4e2a\u7b49\u5f85\u53d8\u91cf\u3002\u65e5\u5fd7\u5f3a\u5236\u6392\u5e8f\u8fd8\u9700\u8981\u76f8\u540c\u7684\u9501\u5b9a\u3001\u5217\u8868\u904d\u5386\u548c\u963b\u585e\u673a\u5236\uff0c\u4ee5\u786e\u4fdd\u5b8c\u6210\u68c0\u67e5\u70b9\u3002</p> <p>These two sequencing operations can use the mechanism even though the events they are waiting for are different. The checkpoint commit record sequencing needs to wait until checkpoint contexts contain a commit LSN (obtained through completion of a commit record write) while log force sequencing needs to wait until previous checkpoint contexts are removed from the committing list (i.e. they\u2019ve completed). A simple wait variable and broadcast wakeups (thundering herds) has been used to implement these two serialisation queues. They use the same lock as the CIL, too. If we see too much contention on the CIL lock, or too many context switches as a result of the broadcast wakeups these operations can be put under a new spinlock and given separate wait lists to reduce lock contention and the number of processes woken by the wrong event.</p> <p>\u8fd9\u4e24\u4e2a\u6392\u5e8f\u64cd\u4f5c\u53ef\u4ee5\u4f7f\u7528\u8be5\u673a\u5236\uff0c\u5373\u4f7f\u5b83\u4eec\u7b49\u5f85\u7684\u4e8b\u4ef6\u4e0d\u540c\u3002\u68c0\u67e5\u70b9\u63d0\u4ea4\u8bb0\u5f55\u6392\u5e8f\u9700\u8981\u7b49\u5f85\u76f4\u5230\u68c0\u67e5\u70b9\u4e0a\u4e0b\u6587\u5305\u542b\u63d0\u4ea4LSN\uff08\u901a\u8fc7\u5b8c\u6210\u63d0\u4ea4\u8bb0\u5f55\u5199\u5165\u83b7\u5f97\uff09\uff0c\u800c\u65e5\u5fd7\u5f3a\u5236\u6392\u5e8f\u9700\u8981\u7b49\u5f85\uff0c\u76f4\u5230\u4e4b\u524d\u7684\u68c0\u67e5\u70b9\u4e0a\u4e0b\u6587\u4ece\u63d0\u4ea4\u5217\u8868\u4e2d\u5220\u9664\uff08\u5373\uff0c\u5b83\u4eec\u5df2\u5b8c\u6210\uff09\u3002\u4e00\u4e2a\u7b80\u5355\u7684\u7b49\u5f85\u53d8\u91cf\u548c\u5e7f\u64ad\u5524\u9192\uff08\u96f7\u9706\u7fa4\uff09\u5df2\u7528\u4e8e\u5b9e\u73b0\u8fd9\u4e24\u4e2a\u4e32\u884c\u5316\u961f\u5217\u3002\u4ed6\u4eec\u4e5f\u4f7f\u7528\u4e0eCIL\u76f8\u540c\u7684\u9501\u3002\u5982\u679c\u6211\u4eec\u5728CIL\u9501\u4e0a\u770b\u5230\u592a\u591a\u4e89\u7528\uff0c\u6216\u8005\u7531\u4e8e\u5e7f\u64ad\u5524\u9192\u800c\u5bfc\u81f4\u592a\u591a\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u5219\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u64cd\u4f5c\u7f6e\u4e8e\u65b0\u7684\u81ea\u65cb\u9501\u4e0b\uff0c\u5e76\u7ed9\u51fa\u5355\u72ec\u7684\u7b49\u5f85\u5217\u8868\uff0c\u4ee5\u51cf\u5c11\u9501\u4e89\u7528\u548c\u88ab\u9519\u8bef\u4e8b\u4ef6\u5524\u9192\u7684\u8fdb\u7a0b\u6570\u91cf\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/xfs/XFS%20Logging%20Design-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#98-lifecycle-changes","title":"9.8 Lifecycle Changes","text":"<p>The existing log item life cycle is as follows:</p> <p>\u73b0\u6709\u65e5\u5fd7\u9879\u751f\u547d\u5468\u671f\u5982\u4e0b\uff1a</p> <pre><code>1. Transaction allocate\n2. Transaction reserve\n3. Lock item\n4. Join item to transaction\n        If not already attached,\n                Allocate log item\n                Attach log item to owner item\n        Attach log item to transaction\n5. Modify item\n        Record modifications in log item\n6. Transaction commit\n        Pin item in memory\n        Format item into log buffer\n        Write commit LSN into transaction\n        Unlock item\n        Attach transaction to log buffer\n\n&lt;log buffer IO dispatched&gt;\n&lt;log buffer IO completes&gt;\n\n7. Transaction completion\n        Mark log item committed\n        Insert log item into AIL\n                Write commit LSN into log item\n        Unpin log item\n8. AIL traversal\n        Lock item\n        Mark log item clean\n        Flush item to disk\n\n&lt;item IO completion&gt;\n\n9. Log item removed from AIL\n        Moves log tail\n        Item unlocked\n</code></pre> <p>Essentially, steps 1-6 operate independently from step 7, which is also independent of steps 8-9. An item can be locked in steps 1-6 or steps 8-9 at the same time step 7 is occurring, but only steps 1-6 or 8-9 can occur at the same time. If the log item is in the AIL or between steps 6 and 7 and steps 1-6 are re-entered, then the item is relogged. Only when steps 8-9 are entered and completed is the object considered clean.</p> <p>\u57fa\u672c\u4e0a\uff0c\u6b65\u9aa41-6\u72ec\u7acb\u4e8e\u6b65\u9aa47\u64cd\u4f5c\uff0c\u6b65\u9aa47\u4e5f\u72ec\u7acb\u4e8e\u6b65\u9aa48-9\u3002\u5728\u6b65\u9aa47\u53d1\u751f\u7684\u540c\u65f6\uff0c\u53ef\u4ee5\u5728\u6b65\u9aa41-6\u6216\u6b65\u9aa48-9\u4e2d\u9501\u5b9a\u9879\u76ee\uff0c\u4f46\u540c\u65f6\u53ea\u80fd\u53d1\u751f\u6b65\u9aa41-6\u62168-9\u3002\u5982\u679c\u65e5\u5fd7\u9879\u5728AIL\u4e2d\u6216\u5728\u6b65\u9aa46\u548c7\u4e4b\u95f4\uff0c\u5e76\u4e14\u91cd\u65b0\u8f93\u5165\u6b65\u9aa41-6\uff0c\u5219\u91cd\u65b0\u8bb0\u5f55\u8be5\u9879\u3002\u53ea\u6709\u5f53\u8fdb\u5165\u5e76\u5b8c\u6210\u6b65\u9aa48-9\u65f6\uff0c\u5bf9\u8c61\u624d\u88ab\u8ba4\u4e3a\u662f\u5e72\u51c0\u7684\u3002</p> <p>With delayed logging, there are new steps inserted into the life cycle:</p> <p>\u5bf9\u4e8e\u5ef6\u8fdf\u65e5\u5fd7\u8bb0\u5f55\uff0c\u5728\u751f\u547d\u5468\u671f\u4e2d\u63d2\u5165\u4e86\u65b0\u6b65\u9aa4\uff1a</p> <pre><code>1. Transaction allocate\n2. Transaction reserve\n3. Lock item\n4. Join item to transaction\n        If not already attached,\n                Allocate log item\n                Attach log item to owner item\n        Attach log item to transaction\n5. Modify item\n        Record modifications in log item\n6. Transaction commit\n        Pin item in memory if not pinned in CIL\n        Format item into log vector + buffer\n        Attach log vector and buffer to log item\n        Insert log item into CIL\n        Write CIL context sequence into transaction\n        Unlock item\n\n&lt;next log force&gt;\n\n7. CIL push\n        lock CIL flush\n        Chain log vectors and buffers together\n        Remove items from CIL\n        unlock CIL flush\n        write log vectors into log\n        sequence commit records\n        attach checkpoint context to log buffer\n\n&lt;log buffer IO dispatched&gt;\n&lt;log buffer IO completes&gt;\n\n8. Checkpoint completion\n        Mark log item committed\n        Insert item into AIL\n                Write commit LSN into log item\n        Unpin log item\n9. AIL traversal\n        Lock item\n        Mark log item clean\n        Flush item to disk\n&lt;item IO completion&gt;\n10. Log item removed from AIL\n        Moves log tail\n        Item unlocked\n</code></pre> <p>From this, it can be seen that the only life cycle differences between the two logging methods are in the middle of the life cycle - they still have the same beginning and end and execution constraints. The only differences are in the committing of the log items to the log itself and the completion processing. Hence delayed logging should not introduce any constraints on log item behaviour, allocation or freeing that don\u2019t already exist.</p> <p>\u7531\u6b64\u53ef\u4ee5\u770b\u51fa\uff0c\u8fd9\u4e24\u79cd\u65e5\u5fd7\u8bb0\u5f55\u65b9\u6cd5\u4e4b\u95f4\u552f\u4e00\u7684\u751f\u547d\u5468\u671f\u5dee\u5f02\u662f\u5728\u751f\u547d\u5468\u671f\u7684\u4e2d\u95f4\u2014\u2014\u5b83\u4eec\u4ecd\u7136\u5177\u6709\u76f8\u540c\u7684\u5f00\u59cb\u3001\u7ed3\u675f\u548c\u6267\u884c\u7ea6\u675f\u3002\u552f\u4e00\u7684\u533a\u522b\u5728\u4e8e\u5c06\u65e5\u5fd7\u9879\u63d0\u4ea4\u5230\u65e5\u5fd7\u672c\u8eab\u548c\u5b8c\u6210\u5904\u7406\u3002\u56e0\u6b64\uff0c\u5ef6\u8fdf\u65e5\u5fd7\u8bb0\u5f55\u4e0d\u5e94\u5728\u65e5\u5fd7\u9879\u884c\u4e3a\u3001\u5206\u914d\u6216\u91ca\u653e\u65b9\u9762\u5f15\u5165\u4efb\u4f55\u73b0\u6709\u7684\u7ea6\u675f\u3002</p> <p>As a result of this zero-impact \u201cinsertion\u201d of delayed logging infrastructure and the design of the internal structures to avoid on disk format changes, we can basically switch between delayed logging and the existing mechanism with a mount option. Fundamentally, there is no reason why the log manager would not be able to swap methods automatically and transparently depending on load characteristics, but this should not be necessary if delayed logging works as designed.</p> <p>\u7531\u4e8e\u5ef6\u8fdf\u65e5\u5fd7\u8bb0\u5f55\u57fa\u7840\u8bbe\u65bd\u7684\u96f6\u5f71\u54cd\u201c\u63d2\u5165\u201d\u4ee5\u53ca\u5185\u90e8\u7ed3\u6784\u7684\u8bbe\u8ba1\u4ee5\u907f\u514d\u78c1\u76d8\u683c\u5f0f\u66f4\u6539\uff0c\u6211\u4eec\u57fa\u672c\u4e0a\u53ef\u4ee5\u901a\u8fc7\u88c5\u8f7d\u9009\u9879\u5728\u5ef6\u8fdf\u65e5\u5fd7\u8bb0\u5f55\u548c\u73b0\u6709\u673a\u5236\u4e4b\u95f4\u5207\u6362\u3002\u4ece\u6839\u672c\u4e0a\u8bb2\uff0c\u65e5\u5fd7\u7ba1\u7406\u5668\u6ca1\u6709\u7406\u7531\u4e0d\u80fd\u6839\u636e\u8d1f\u8f7d\u7279\u6027\u81ea\u52a8\u548c\u900f\u660e\u5730\u4ea4\u6362\u65b9\u6cd5\uff0c\u4f46\u5982\u679c\u5ef6\u8fdf\u65e5\u5fd7\u6309\u8bbe\u8ba1\u5de5\u4f5c\uff0c\u5219\u4e0d\u9700\u8981\u8fd9\u6837\u505a\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/xfs/XFS%20Self%20Describing%20Metadata-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/","title":"XFS Self Describing Metadata","text":"<p>\u539f\u6587\u6863\u5730\u5740</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/xfs/XFS%20Self%20Describing%20Metadata-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#1-introduction","title":"1 Introduction","text":"<p>The largest scalability problem facing XFS is not one of algorithmic scalability, but of verification of the filesystem structure. Scalabilty of the structures and indexes on disk and the algorithms for iterating them are adequate for supporting PB scale filesystems with billions of inodes, however it is this very scalability that causes the verification problem.</p> <p>XFS\u9762\u4e34\u7684\u6700\u5927\u7684\u53ef\u4f38\u7f29\u6027\u95ee\u9898\u4e0d\u662f\u7b97\u6cd5\u53ef\u4f38\u7f29\u6027\uff0c\u800c\u662f\u6587\u4ef6\u7cfb\u7edf\u7ed3\u6784\u7684\u9a8c\u8bc1\u3002\u78c1\u76d8\u4e0a\u7684\u7ed3\u6784\u548c\u7d22\u5f15\u53ca\u5176\u8fed\u4ee3\u7b97\u6cd5\u7684\u53ef\u6269\u5c55\u6027\u8db3\u4ee5\u652f\u6301\u5177\u6709\u6570\u5341\u4ebf\u4e2a\u7d22\u5f15\u8282\u70b9\u7684PB\u7ea7\u6587\u4ef6\u7cfb\u7edf\uff0c\u4f46\u6b63\u662f\u8fd9\u79cd\u53ef\u6269\u5c55\u6027\u5bfc\u81f4\u4e86\u9a8c\u8bc1\u95ee\u9898\u3002</p> <p>Almost all metadata on XFS is dynamically allocated. The only fixed location metadata is the allocation group headers (SB, AGF, AGFL and AGI), while all other metadata structures need to be discovered by walking the filesystem structure in different ways. While this is already done by userspace tools for validating and repairing the structure, there are limits to what they can verify, and this in turn limits the supportable size of an XFS filesystem.</p> <p>XFS\u4e0a\u51e0\u4e4e\u6240\u6709\u7684\u5143\u6570\u636e\u90fd\u662f\u52a8\u6001\u5206\u914d\u7684\u3002\u552f\u4e00\u56fa\u5b9a\u4f4d\u7f6e\u7684\u5143\u6570\u636e\u662f\u5206\u914d\u7ec4\u6807\u5934\uff08SB\u3001AGF\u3001AGFL\u548cAGI\uff09\uff0c\u800c\u6240\u6709\u5176\u4ed6\u5143\u6570\u636e\u7ed3\u6784\u90fd\u9700\u8981\u901a\u8fc7\u4ee5\u4e0d\u540c\u65b9\u5f0f\u904d\u5386\u6587\u4ef6\u7cfb\u7edf\u7ed3\u6784\u6765\u53d1\u73b0\u3002\u867d\u7136\u8fd9\u5df2\u7ecf\u7531\u7528\u4e8e\u9a8c\u8bc1\u548c\u4fee\u590d\u7ed3\u6784\u7684\u7528\u6237\u7a7a\u95f4\u5de5\u5177\u5b8c\u6210\uff0c\u4f46\u4ed6\u4eec\u53ef\u4ee5\u9a8c\u8bc1\u7684\u5185\u5bb9\u5b58\u5728\u9650\u5236\uff0c\u8fd9\u53cd\u8fc7\u6765\u53c8\u9650\u5236\u4e86XFS\u6587\u4ef6\u7cfb\u7edf\u7684\u53ef\u652f\u6301\u5927\u5c0f\u3002</p> <p>For example, it is entirely possible to manually use xfs_db and a bit of scripting to analyse the structure of a 100TB filesystem when trying to determine the root cause of a corruption problem, but it is still mainly a manual task of verifying that things like single bit errors or misplaced writes weren\u2019t the ultimate cause of a corruption event. It may take a few hours to a few days to perform such forensic analysis, so for at this scale root cause analysis is entirely possible.</p> <p>\u4f8b\u5982\uff0c\u5728\u8bd5\u56fe\u786e\u5b9a\u635f\u574f\u95ee\u9898\u7684\u6839\u672c\u539f\u56e0\u65f6\uff0c\u5b8c\u5168\u53ef\u4ee5\u624b\u52a8\u4f7f\u7528xfs_db\u548c\u4e00\u4e9b\u811a\u672c\u6765\u5206\u6790100TB\u6587\u4ef6\u7cfb\u7edf\u7684\u7ed3\u6784\uff0c\u4f46\u8fd9\u4ecd\u7136\u4e3b\u8981\u662f\u4e00\u9879\u624b\u52a8\u4efb\u52a1\uff0c\u5373\u9a8c\u8bc1\u8bf8\u5982\u5355\u4f4d\u9519\u8bef\u6216\u9519\u8bef\u5199\u5165\u4e4b\u7c7b\u7684\u4e8b\u60c5\u4e0d\u662f\u635f\u574f\u4e8b\u4ef6\u7684\u6700\u7ec8\u539f\u56e0\u3002\u6267\u884c\u6b64\u7c7b\u6cd5\u533b\u5206\u6790\u53ef\u80fd\u9700\u8981\u51e0\u4e2a\u5c0f\u65f6\u5230\u51e0\u5929\u7684\u65f6\u95f4\uff0c\u56e0\u6b64\u5728\u8fd9\u79cd\u89c4\u6a21\u4e0b\u6839\u672c\u539f\u56e0\u5206\u6790\u662f\u5b8c\u5168\u53ef\u80fd\u7684\u3002</p> <p>However, if we scale the filesystem up to 1PB, we now have 10x as much metadata to analyse and so that analysis blows out towards weeks/months of forensic work. Most of the analysis work is slow and tedious, so as the amount of analysis goes up, the more likely that the cause will be lost in the noise. Hence the primary concern for supporting PB scale filesystems is minimising the time and effort required for basic forensic analysis of the filesystem structure.</p> <p>\u7136\u800c\uff0c\u5982\u679c\u6211\u4eec\u5c06\u6587\u4ef6\u7cfb\u7edf\u6269\u5c55\u52301PB\uff0c\u90a3\u4e48\u6211\u4eec\u73b0\u5728\u9700\u8981\u5206\u6790\u7684\u5143\u6570\u636e\u662f\u539f\u6765\u768410\u500d\uff0c\u56e0\u6b64\u5206\u6790\u5de5\u4f5c\u5c06\u6301\u7eed\u6570\u5468/\u6570\u6708\u3002\u5927\u591a\u6570\u5206\u6790\u5de5\u4f5c\u90fd\u662f\u7f13\u6162\u800c\u4e4f\u5473\u7684\uff0c\u56e0\u6b64\u968f\u7740\u5206\u6790\u91cf\u7684\u589e\u52a0\uff0c\u539f\u56e0\u8d8a\u6709\u53ef\u80fd\u5728\u566a\u58f0\u4e2d\u6d88\u5931\u3002\u56e0\u6b64\uff0c\u652f\u6301PB\u7ea7\u6587\u4ef6\u7cfb\u7edf\u7684\u4e3b\u8981\u5173\u6ce8\u70b9\u662f\u6700\u5c0f\u5316\u5bf9\u6587\u4ef6\u7cfb\u7edf\u7ed3\u6784\u8fdb\u884c\u57fa\u672c\u53d6\u8bc1\u5206\u6790\u6240\u9700\u7684\u65f6\u95f4\u548c\u7cbe\u529b\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/xfs/XFS%20Self%20Describing%20Metadata-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#2-self-describing-metadata","title":"2 Self Describing Metadata","text":"<p>One of the problems with the current metadata format is that apart from the magic number in the metadata block, we have no other way of identifying what it is supposed to be. We can\u2019t even identify if it is the right place. Put simply, you can\u2019t look at a single metadata block in isolation and say \u201cyes, it is supposed to be there and the contents are valid\u201d.</p> <p>\u5f53\u524d\u5143\u6570\u636e\u683c\u5f0f\u7684\u4e00\u4e2a\u95ee\u9898\u662f\uff0c\u9664\u4e86\u5143\u6570\u636e\u5757\u4e2d\u7684\u795e\u5947\u6570\u5b57\u4e4b\u5916\uff0c\u6211\u4eec\u6ca1\u6709\u5176\u4ed6\u65b9\u6cd5\u6765\u786e\u5b9a\u5b83\u5e94\u8be5\u662f\u4ec0\u4e48\u3002\u6211\u4eec\u751a\u81f3\u65e0\u6cd5\u786e\u5b9a\u5b83\u662f\u5426\u662f\u6b63\u786e\u7684\u4f4d\u7f6e\u3002\u7b80\u5355\u5730\u8bf4\uff0c\u4f60\u4e0d\u80fd\u5b64\u7acb\u5730\u770b\u4e00\u4e2a\u5143\u6570\u636e\u5757\uff0c\u7136\u540e\u8bf4\u201c\u662f\u7684\uff0c\u5b83\u5e94\u8be5\u5728\u90a3\u91cc\uff0c\u5185\u5bb9\u662f\u6709\u6548\u7684\u201d\u3002</p> <p>Hence most of the time spent on forensic analysis is spent doing basic verification of metadata values, looking for values that are in range (and hence not detected by automated verification checks) but are not correct. Finding and understanding how things like cross linked block lists (e.g. sibling pointers in a btree end up with loops in them) are the key to understanding what went wrong, but it is impossible to tell what order the blocks were linked into each other or written to disk after the fact.</p> <p>\u56e0\u6b64\uff0c\u7528\u4e8e\u6cd5\u533b\u5206\u6790\u7684\u5927\u90e8\u5206\u65f6\u95f4\u90fd\u7528\u4e8e\u5bf9\u5143\u6570\u636e\u503c\u8fdb\u884c\u57fa\u672c\u9a8c\u8bc1\uff0c\u67e5\u627e\u8303\u56f4\u5185\uff08\u56e0\u6b64\u672a\u901a\u8fc7\u81ea\u52a8\u9a8c\u8bc1\u68c0\u67e5\u68c0\u6d4b\u5230\uff09\u4f46\u4e0d\u6b63\u786e\u7684\u503c\u3002\u627e\u5230\u5e76\u7406\u89e3\u4ea4\u53c9\u94fe\u63a5\u7684\u5757\u5217\u8868\uff08\u4f8b\u5982\uff0cbtree\u4e2d\u7684\u5144\u5f1f\u6307\u9488\u4ee5\u5faa\u73af\u7ed3\u5c3e\uff09\u662f\u7406\u89e3\u9519\u8bef\u7684\u5173\u952e\uff0c\u4f46\u65e0\u6cd5\u77e5\u9053\u8fd9\u4e9b\u5757\u662f\u6309\u7167\u4ec0\u4e48\u987a\u5e8f\u94fe\u63a5\u5230\u5f7c\u6b64\u6216\u5199\u5165\u78c1\u76d8\u7684\u3002</p> <p>Hence we need to record more information into the metadata to allow us to quickly determine if the metadata is intact and can be ignored for the purpose of analysis. We can\u2019t protect against every possible type of error, but we can ensure that common types of errors are easily detectable. Hence the concept of self describing metadata.</p> <p>\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u5c06\u66f4\u591a\u7684\u4fe1\u606f\u8bb0\u5f55\u5230\u5143\u6570\u636e\u4e2d\uff0c\u4ee5\u4fbf\u5feb\u901f\u786e\u5b9a\u5143\u6570\u636e\u662f\u5426\u5b8c\u6574\uff0c\u5e76\u4e14\u53ef\u4ee5\u51fa\u4e8e\u5206\u6790\u76ee\u7684\u800c\u5ffd\u7565\u3002\u6211\u4eec\u4e0d\u80fd\u9632\u6b62\u6bcf\u4e00\u79cd\u53ef\u80fd\u7684\u9519\u8bef\uff0c\u4f46\u6211\u4eec\u53ef\u4ee5\u786e\u4fdd\u5e38\u89c1\u7c7b\u578b\u7684\u9519\u8bef\u5f88\u5bb9\u6613\u88ab\u68c0\u6d4b\u5230\u3002\u56e0\u6b64\u51fa\u73b0\u4e86\u81ea\u6211\u63cf\u8ff0\u5143\u6570\u636e\u7684\u6982\u5ff5\u3002</p> <p>The first, fundamental requirement of self describing metadata is that the metadata object contains some form of unique identifier in a well known location. This allows us to identify the expected contents of the block and hence parse and verify the metadata object. IF we can\u2019t independently identify the type of metadata in the object, then the metadata doesn\u2019t describe itself very well at all!</p> <p>\u81ea\u6211\u63cf\u8ff0\u5143\u6570\u636e\u7684\u7b2c\u4e00\u4e2a\u57fa\u672c\u8981\u6c42\u662f\u5143\u6570\u636e\u5bf9\u8c61\u5728\u5df2\u77e5\u4f4d\u7f6e\u5305\u542b\u67d0\u79cd\u5f62\u5f0f\u7684\u552f\u4e00\u6807\u8bc6\u7b26\u3002\u8fd9\u5141\u8bb8\u6211\u4eec\u8bc6\u522b\u5757\u7684\u9884\u671f\u5185\u5bb9\uff0c\u4ece\u800c\u89e3\u6790\u548c\u9a8c\u8bc1\u5143\u6570\u636e\u5bf9\u8c61\u3002\u5982\u679c\u6211\u4eec\u4e0d\u80fd\u72ec\u7acb\u5730\u8bc6\u522b\u5bf9\u8c61\u4e2d\u7684\u5143\u6570\u636e\u7c7b\u578b\uff0c\u90a3\u4e48\u5143\u6570\u636e\u6839\u672c\u5c31\u4e0d\u80fd\u5f88\u597d\u5730\u63cf\u8ff0\u81ea\u5df1\uff01</p> <p>Luckily, almost all XFS metadata has magic numbers embedded already - only the AGFL, remote symlinks and remote attribute blocks do not contain identifying magic numbers. Hence we can change the on-disk format of all these objects to add more identifying information and detect this simply by changing the magic numbers in the metadata objects. That is, if it has the current magic number, the metadata isn\u2019t self identifying. If it contains a new magic number, it is self identifying and we can do much more expansive automated verification of the metadata object at runtime, during forensic analysis or repair.</p> <p>\u5e78\u8fd0\u7684\u662f\uff0c\u51e0\u4e4e\u6240\u6709XFS\u5143\u6570\u636e\u90fd\u5df2\u7ecf\u5d4c\u5165\u4e86\u5e7b\u6570\u2014\u2014\u53ea\u6709AGFL\u3001\u8fdc\u7a0b\u7b26\u53f7\u94fe\u63a5\u548c\u8fdc\u7a0b\u5c5e\u6027\u5757\u4e0d\u5305\u542b\u8bc6\u522b\u5e7b\u6570\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u66f4\u6539\u6240\u6709\u8fd9\u4e9b\u5bf9\u8c61\u7684\u78c1\u76d8\u683c\u5f0f\uff0c\u4ee5\u6dfb\u52a0\u66f4\u591a\u6807\u8bc6\u4fe1\u606f\uff0c\u5e76\u53ea\u9700\u66f4\u6539\u5143\u6570\u636e\u5bf9\u8c61\u4e2d\u7684\u5e7b\u6570\u5373\u53ef\u68c0\u6d4b\u5230\u8fd9\u4e9b\u4fe1\u606f\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u5b83\u6709\u5f53\u524d\u7684\u5e7b\u6570\uff0c\u5143\u6570\u636e\u5c31\u4e0d\u80fd\u81ea\u6211\u8bc6\u522b\u3002\u5982\u679c\u5b83\u5305\u542b\u4e00\u4e2a\u65b0\u7684\u5e7b\u6570\uff0c\u5b83\u662f\u81ea\u6211\u8bc6\u522b\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u3001\u6cd5\u533b\u5206\u6790\u6216\u4fee\u590d\u671f\u95f4\u5bf9\u5143\u6570\u636e\u5bf9\u8c61\u8fdb\u884c\u66f4\u5e7f\u6cdb\u7684\u81ea\u52a8\u9a8c\u8bc1\u3002</p> <p>As a primary concern, self describing metadata needs some form of overall integrity checking. We cannot trust the metadata if we cannot verify that it has not been changed as a result of external influences. Hence we need some form of integrity check, and this is done by adding CRC32c validation to the metadata block. If we can verify the block contains the metadata it was intended to contain, a large amount of the manual verification work can be skipped.</p> <p>\u4f5c\u4e3a\u4e3b\u8981\u5173\u6ce8\u70b9\uff0c\u81ea\u6211\u63cf\u8ff0\u5143\u6570\u636e\u9700\u8981\u67d0\u79cd\u5f62\u5f0f\u7684\u6574\u4f53\u5b8c\u6574\u6027\u68c0\u67e5\u3002\u5982\u679c\u6211\u4eec\u65e0\u6cd5\u9a8c\u8bc1\u5143\u6570\u636e\u6ca1\u6709\u56e0\u5916\u90e8\u5f71\u54cd\u800c\u66f4\u6539\uff0c\u6211\u4eec\u5c31\u65e0\u6cd5\u4fe1\u4efb\u5143\u6570\u636e\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u67d0\u79cd\u5f62\u5f0f\u7684\u5b8c\u6574\u6027\u68c0\u67e5\uff0c\u8fd9\u662f\u901a\u8fc7\u5411\u5143\u6570\u636e\u5757\u6dfb\u52a0CRC32c\u9a8c\u8bc1\u6765\u5b8c\u6210\u7684\u3002\u82e5\u6211\u4eec\u53ef\u4ee5\u9a8c\u8bc1\u8be5\u5757\u662f\u5426\u5305\u542b\u5b83\u60f3\u8981\u5305\u542b\u7684\u5143\u6570\u636e\uff0c\u5219\u53ef\u4ee5\u8df3\u8fc7\u5927\u91cf\u7684\u624b\u52a8\u9a8c\u8bc1\u5de5\u4f5c\u3002</p> <p>CRC32c was selected as metadata cannot be more than 64k in length in XFS and hence a 32 bit CRC is more than sufficient to detect multi-bit errors in metadata blocks. CRC32c is also now hardware accelerated on common CPUs so it is fast. So while CRC32c is not the strongest of possible integrity checks that could be used, it is more than sufficient for our needs and has relatively little overhead. Adding support for larger integrity fields and/or algorithms does really provide any extra value over CRC32c, but it does add a lot of complexity and so there is no provision for changing the integrity checking mechanism.</p> <p>\u9009\u62e9CRC32c\u662f\u56e0\u4e3a\u5143\u6570\u636e\u5728XFS\u4e2d\u7684\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc764k\uff0c\u56e0\u6b6432\u4f4dCRC\u8db3\u4ee5\u68c0\u6d4b\u5143\u6570\u636e\u5757\u4e2d\u7684\u591a\u4f4d\u9519\u8bef\u3002CRC32c\u73b0\u5728\u4e5f\u5728\u666e\u901aCPU\u4e0a\u8fdb\u884c\u4e86\u786c\u4ef6\u52a0\u901f\uff0c\u56e0\u6b64\u901f\u5ea6\u5f88\u5feb\u3002\u56e0\u6b64\uff0c\u867d\u7136CRC32c\u4e0d\u662f\u53ef\u80fd\u4f7f\u7528\u7684\u6700\u5f3a\u5927\u7684\u5b8c\u6574\u6027\u68c0\u67e5\uff0c\u4f46\u5b83\u8db3\u4ee5\u6ee1\u8db3\u6211\u4eec\u7684\u9700\u6c42\uff0c\u5e76\u4e14\u5f00\u9500\u76f8\u5bf9\u8f83\u5c0f\u3002\u589e\u52a0\u5bf9\u66f4\u5927\u7684\u5b8c\u6574\u6027\u5b57\u6bb5\u548c/\u6216\u7b97\u6cd5\u7684\u652f\u6301\u786e\u5b9e\u6bd4CRC32c\u63d0\u4f9b\u4e86\u4efb\u4f55\u989d\u5916\u7684\u4ef7\u503c\uff0c\u4f46\u5b83\u786e\u5b9e\u589e\u52a0\u4e86\u5f88\u591a\u590d\u6742\u6027\uff0c\u56e0\u6b64\u6ca1\u6709\u6539\u53d8\u5b8c\u6574\u6027\u68c0\u67e5\u673a\u5236\u7684\u89c4\u5b9a\u3002</p> <p>Self describing metadata needs to contain enough information so that the metadata block can be verified as being in the correct place without needing to look at any other metadata. This means it needs to contain location information. Just adding a block number to the metadata is not sufficient to protect against mis-directed writes - a write might be misdirected to the wrong LUN and so be written to the \u201ccorrect block\u201d of the wrong filesystem. Hence location information must contain a filesystem identifier as well as a block number.</p> <p>\u81ea\u6211\u63cf\u8ff0\u5143\u6570\u636e\u9700\u8981\u5305\u542b\u8db3\u591f\u7684\u4fe1\u606f\uff0c\u4ee5\u4fbf\u53ef\u4ee5\u9a8c\u8bc1\u5143\u6570\u636e\u5757\u662f\u5426\u4f4d\u4e8e\u6b63\u786e\u7684\u4f4d\u7f6e\uff0c\u800c\u65e0\u9700\u67e5\u770b\u4efb\u4f55\u5176\u4ed6\u5143\u6570\u636e\u3002\u8fd9\u610f\u5473\u7740\u5b83\u9700\u8981\u5305\u542b\u4f4d\u7f6e\u4fe1\u606f\u3002\u4ec5\u5411\u5143\u6570\u636e\u4e2d\u6dfb\u52a0\u5757\u53f7\u4e0d\u8db3\u4ee5\u9632\u6b62\u9519\u8bef\u5b9a\u5411\u7684\u5199\u5165\u2014\u5199\u5165\u53ef\u80fd\u88ab\u9519\u8bef\u5b9a\u5411\u5230\u9519\u8bef\u7684LUN\uff0c\u56e0\u6b64\u88ab\u5199\u5165\u9519\u8bef\u6587\u4ef6\u7cfb\u7edf\u7684\u201c\u6b63\u786e\u5757\u201d\u3002\u56e0\u6b64\uff0c\u4f4d\u7f6e\u4fe1\u606f\u5fc5\u987b\u5305\u542b\u6587\u4ef6\u7cfb\u7edf\u6807\u8bc6\u7b26\u548c\u5757\u53f7\u3002</p> <p>Another key information point in forensic analysis is knowing who the metadata block belongs to. We already know the type, the location, that it is valid and/or corrupted, and how long ago that it was last modified. Knowing the owner of the block is important as it allows us to find other related metadata to determine the scope of the corruption. For example, if we have a extent btree object, we don\u2019t know what inode it belongs to and hence have to walk the entire filesystem to find the owner of the block. Worse, the corruption could mean that no owner can be found (i.e. it\u2019s an orphan block), and so without an owner field in the metadata we have no idea of the scope of the corruption. If we have an owner field in the metadata object, we can immediately do top down validation to determine the scope of the problem.</p> <p>\u6cd5\u533b\u5206\u6790\u4e2d\u7684\u53e6\u4e00\u4e2a\u5173\u952e\u4fe1\u606f\u70b9\u662f\u77e5\u9053\u5143\u6570\u636e\u5757\u5c5e\u4e8e\u8c01\u3002\u6211\u4eec\u5df2\u7ecf\u77e5\u9053\u5143\u6570\u636e\u5757\u7684\u7c7b\u578b\u3001\u4f4d\u7f6e\u3001\u5b83\u662f\u5426\u6709\u6548\u548c/\u6216\u5df2\u635f\u574f\uff0c\u4ee5\u53ca\u5b83\u4e0a\u6b21\u88ab\u4fee\u6539\u7684\u65f6\u95f4\u3002\u4e86\u89e3\u5757\u7684\u6240\u6709\u8005\u5f88\u91cd\u8981\uff0c\u56e0\u4e3a\u5b83\u5141\u8bb8\u6211\u4eec\u627e\u5230\u5176\u4ed6\u76f8\u5173\u7684\u5143\u6570\u636e\u6765\u786e\u5b9a\u635f\u574f\u7684\u8303\u56f4\u3002\u4f8b\u5982\uff0c\u5982\u679c\u6211\u4eec\u6709\u4e00\u4e2a\u533a\u6bb5btree\u5bf9\u8c61\uff0c\u6211\u4eec\u4e0d\u77e5\u9053\u5b83\u5c5e\u4e8e\u54ea\u4e2ainode\uff0c\u56e0\u6b64\u5fc5\u987b\u904d\u5386\u6574\u4e2a\u6587\u4ef6\u7cfb\u7edf\u624d\u80fd\u627e\u5230\u5757\u7684\u6240\u6709\u8005\u3002\u66f4\u7cdf\u7cd5\u7684\u662f\uff0c\u635f\u574f\u53ef\u80fd\u610f\u5473\u7740\u627e\u4e0d\u5230\u6240\u6709\u8005\uff08\u5373\u5b83\u662f\u4e00\u4e2a\u5b64\u7acb\u5757\uff09\uff0c\u56e0\u6b64\u5982\u679c\u5143\u6570\u636e\u4e2d\u6ca1\u6709\u6240\u6709\u8005\u5b57\u6bb5\uff0c\u6211\u4eec\u5c31\u4e0d\u77e5\u9053\u635f\u574f\u7684\u8303\u56f4\u3002\u5982\u679c\u6211\u4eec\u5728\u5143\u6570\u636e\u5bf9\u8c61\u4e2d\u6709\u6240\u6709\u8005\u5b57\u6bb5\uff0c\u6211\u4eec\u53ef\u4ee5\u7acb\u5373\u8fdb\u884c\u81ea\u9876\u5411\u4e0b\u7684\u9a8c\u8bc1\uff0c\u4ee5\u786e\u5b9a\u95ee\u9898\u7684\u8303\u56f4\u3002</p> <p>Different types of metadata have different owner identifiers. For example, directory, attribute and extent tree blocks are all owned by an inode, while freespace btree blocks are owned by an allocation group. Hence the size and contents of the owner field are determined by the type of metadata object we are looking at. The owner information can also identify misplaced writes (e.g. freespace btree block written to the wrong AG). \u4e0d\u540c\u7c7b\u578b\u7684\u5143\u6570\u636e\u5177\u6709\u4e0d\u540c\u7684\u6240\u6709\u8005\u6807\u8bc6\u7b26\u3002\u4f8b\u5982\uff0c\u76ee\u5f55\u3001\u5c5e\u6027\u548c\u6570\u636e\u5757\u6811\u5757\u90fd\u5f52inode\u6240\u6709\uff0c\u800c\u81ea\u7531\u7a7a\u95f4btree\u5757\u5f52\u5206\u914d\u7ec4\u6240\u6709\u3002\u56e0\u6b64\uff0c\u6240\u6709\u8005\u5b57\u6bb5\u7684\u5927\u5c0f\u548c\u5185\u5bb9\u53d6\u51b3\u4e8e\u6211\u4eec\u6b63\u5728\u67e5\u770b\u7684\u5143\u6570\u636e\u5bf9\u8c61\u7684\u7c7b\u578b\u3002\u6240\u6709\u8005\u4fe1\u606f\u8fd8\u53ef\u4ee5\u8bc6\u522b\u9519\u8bef\u7684\u5199\u5165\uff08\u4f8b\u5982\uff0c\u5199\u5165\u9519\u8befAG\u7684freespace btree\u5757\uff09\u3002</p> <p>Self describing metadata also needs to contain some indication of when it was written to the filesystem. One of the key information points when doing forensic analysis is how recently the block was modified. Correlation of set of corrupted metadata blocks based on modification times is important as it can indicate whether the corruptions are related, whether there\u2019s been multiple corruption events that lead to the eventual failure, and even whether there are corruptions present that the run-time verification is not detecting.</p> <p>\u81ea\u6211\u63cf\u8ff0\u5143\u6570\u636e\u8fd8\u9700\u8981\u5305\u542b\u4e00\u4e9b\u4f55\u65f6\u5c06\u5176\u5199\u5165\u6587\u4ef6\u7cfb\u7edf\u7684\u6307\u793a\u3002\u8fdb\u884c\u6cd5\u533b\u5206\u6790\u65f6\u7684\u4e00\u4e2a\u5173\u952e\u4fe1\u606f\u70b9\u662f\u533a\u5757\u6700\u8fd1\u88ab\u4fee\u6539\u7684\u65f6\u95f4\u3002\u57fa\u4e8e\u4fee\u6539\u65f6\u95f4\u7684\u635f\u574f\u5143\u6570\u636e\u5757\u96c6\u7684\u76f8\u5173\u6027\u5f88\u91cd\u8981\uff0c\u56e0\u4e3a\u5b83\u53ef\u4ee5\u6307\u793a\u635f\u574f\u662f\u5426\u76f8\u5173\uff0c\u662f\u5426\u5b58\u5728\u5bfc\u81f4\u6700\u7ec8\u5931\u8d25\u7684\u591a\u4e2a\u635f\u574f\u4e8b\u4ef6\uff0c\u751a\u81f3\u662f\u5426\u5b58\u5728\u8fd0\u884c\u65f6\u9a8c\u8bc1\u672a\u68c0\u6d4b\u5230\u7684\u635f\u574f\u3002</p> <p>For example, we can determine whether a metadata object is supposed to be free space or still allocated if it is still referenced by its owner by looking at when the free space btree block that contains the block was last written compared to when the metadata object itself was last written. If the free space block is more recent than the object and the object\u2019s owner, then there is a very good chance that the block should have been removed from the owner.</p> <p>\u4f8b\u5982\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u67e5\u770b\u5305\u542b\u8be5\u5757\u7684\u81ea\u7531\u7a7a\u95f4btree\u5757\u4e0a\u6b21\u5199\u5165\u7684\u65f6\u95f4\u4e0e\u5143\u6570\u636e\u5bf9\u8c61\u672c\u8eab\u4e0a\u6b21\u5199\u5165\u7684\u65f6\u5019\u76f8\u6bd4\uff0c\u6765\u786e\u5b9a\u5143\u6570\u636e\u5bf9\u8c61\u662f\u5426\u5e94\u8be5\u662f\u81ea\u7531\u7a7a\u95f4\uff0c\u6216\u8005\u5982\u679c\u5b83\u4ecd\u7136\u88ab\u5176\u6240\u6709\u8005\u5f15\u7528\uff0c\u5219\u5b83\u4ecd\u7136\u88ab\u5206\u914d\u3002\u5982\u679c\u53ef\u7528\u7a7a\u95f4\u5757\u6bd4\u5bf9\u8c61\u548c\u5bf9\u8c61\u7684\u6240\u6709\u8005\u66f4\u65b0\uff0c\u5219\u5f88\u6709\u53ef\u80fd\u8be5\u5757\u5df2\u4ece\u6240\u6709\u8005\u5904\u5220\u9664\u3002</p> <p>To provide this \u201cwritten timestamp\u201d, each metadata block gets the Log Sequence Number (LSN) of the most recent transaction it was modified on written into it. This number will always increase over the life of the filesystem, and the only thing that resets it is running xfs_repair on the filesystem. Further, by use of the LSN we can tell if the corrupted metadata all belonged to the same log checkpoint and hence have some idea of how much modification occurred between the first and last instance of corrupt metadata on disk and, further, how much modification occurred between the corruption being written and when it was detected.</p> <p>\u4e3a\u4e86\u63d0\u4f9b\u8fd9\u4e2a\u201c\u5199\u5165\u7684\u65f6\u95f4\u6233\u201d\uff0c\u6bcf\u4e2a\u5143\u6570\u636e\u5757\u90fd\u4f1a\u5f97\u5230\u5b83\u5728\u5199\u5165\u65f6\u4fee\u6539\u7684\u6700\u8fd1\u4e8b\u52a1\u7684\u65e5\u5fd7\u5e8f\u5217\u53f7\uff08LSN\uff09\u3002\u8fd9\u4e2a\u6570\u5b57\u5728\u6587\u4ef6\u7cfb\u7edf\u7684\u751f\u547d\u5468\u671f\u5185\u59cb\u7ec8\u4f1a\u589e\u52a0\uff0c\u552f\u4e00\u91cd\u7f6e\u5b83\u7684\u662f\u5728\u6587\u4ef6\u7cfb\u7edf\u4e0a\u8fd0\u884cxfs_repair\u3002\u6b64\u5916\uff0c\u901a\u8fc7\u4f7f\u7528LSN\uff0c\u6211\u4eec\u53ef\u4ee5\u5224\u65ad\u635f\u574f\u7684\u5143\u6570\u636e\u662f\u5426\u90fd\u5c5e\u4e8e\u540c\u4e00\u4e2a\u65e5\u5fd7\u68c0\u67e5\u70b9\uff0c\u4ece\u800c\u4e86\u89e3\u78c1\u76d8\u4e0a\u635f\u574f\u7684\u5143\u6570\u636e\u7684\u7b2c\u4e00\u4e2a\u548c\u6700\u540e\u4e00\u4e2a\u5b9e\u4f8b\u4e4b\u95f4\u53d1\u751f\u4e86\u591a\u5c11\u4fee\u6539\uff0c\u6b64\u5916\uff0c\u5728\u5199\u5165\u635f\u574f\u548c\u68c0\u6d4b\u5230\u635f\u574f\u4e4b\u95f4\u53d1\u751f\u4e86\u591a\u5927\u4fee\u6539\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/xfs/XFS%20Self%20Describing%20Metadata-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#3-runtime-validation","title":"3 Runtime Validation","text":"<p>Validation of self-describing metadata takes place at runtime in two places:</p> <ul> <li>immediately after a successful read from disk</li> <li>immediately prior to write IO submission</li> </ul> <p>\u81ea\u63cf\u8ff0\u5143\u6570\u636e\u7684\u9a8c\u8bc1\u5728\u8fd0\u884c\u65f6\u5728\u4e24\u4e2a\u5730\u65b9\u8fdb\u884c\uff1a</p> <p>-\u6210\u529f\u8bfb\u53d6\u78c1\u76d8\u540e\u7acb\u5373 -\u5728\u63d0\u4ea4\u5199IO\u4e4b\u524d</p> <p>The verification is completely stateless - it is done independently of the modification process, and seeks only to check that the metadata is what it says it is and that the metadata fields are within bounds and internally consistent. As such, we cannot catch all types of corruption that can occur within a block as there may be certain limitations that operational state enforces of the metadata, or there may be corruption of interblock relationships (e.g. corrupted sibling pointer lists). Hence we still need stateful checking in the main code body, but in general most of the per-field validation is handled by the verifiers.</p> <p>\u9a8c\u8bc1\u662f\u5b8c\u5168\u65e0\u72b6\u6001\u7684\u2014\u2014\u5b83\u662f\u72ec\u7acb\u4e8e\u4fee\u6539\u8fc7\u7a0b\u8fdb\u884c\u7684\uff0c\u5e76\u4e14\u53ea\u8bd5\u56fe\u68c0\u67e5\u5143\u6570\u636e\u662f\u5426\u662f\u5b83\u6240\u8bf4\u7684\uff0c\u4ee5\u53ca\u5143\u6570\u636e\u5b57\u6bb5\u662f\u5426\u5728\u8fb9\u754c\u5185\u5e76\u4e14\u5185\u90e8\u4e00\u81f4\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u65e0\u6cd5\u6355\u83b7\u5757\u5185\u53ef\u80fd\u53d1\u751f\u7684\u6240\u6709\u7c7b\u578b\u7684\u635f\u574f\uff0c\u56e0\u4e3a\u64cd\u4f5c\u72b6\u6001\u5bf9\u5143\u6570\u636e\u7684\u5f3a\u5236\u6267\u884c\u53ef\u80fd\u5b58\u5728\u67d0\u4e9b\u9650\u5236\uff0c\u6216\u8005\u53ef\u80fd\u5b58\u5728\u5757\u95f4\u5173\u7cfb\u7684\u635f\u574f\uff08\u4f8b\u5982\u635f\u574f\u7684\u5144\u5f1f\u6307\u9488\u5217\u8868\uff09\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u4ecd\u7136\u9700\u8981\u5728\u4e3b\u4ee3\u7801\u4f53\u4e2d\u8fdb\u884c\u6709\u72b6\u6001\u68c0\u67e5\uff0c\u4f46\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u6bcf\u4e2a\u5b57\u6bb5\u7684\u5927\u591a\u6570\u9a8c\u8bc1\u90fd\u7531\u9a8c\u8bc1\u7a0b\u5e8f\u5904\u7406\u3002</p> <p>For read verification, the caller needs to specify the expected type of metadata that it should see, and the IO completion process verifies that the metadata object matches what was expected. If the verification process fails, then it marks the object being read as EFSCORRUPTED. The caller needs to catch this error (same as for IO errors), and if it needs to take special action due to a verification error it can do so by catching the EFSCORRUPTED error value. If we need more discrimination of error type at higher levels, we can define new error numbers for different errors as necessary.</p> <p>\u5bf9\u4e8e\u8bfb\u53d6\u9a8c\u8bc1\uff0c\u8c03\u7528\u8005\u9700\u8981\u6307\u5b9a\u5b83\u5e94\u8be5\u770b\u5230\u7684\u5143\u6570\u636e\u7684\u9884\u671f\u7c7b\u578b\uff0cIO\u5b8c\u6210\u8fc7\u7a0b\u9a8c\u8bc1\u5143\u6570\u636e\u5bf9\u8c61\u662f\u5426\u4e0e\u9884\u671f\u5339\u914d\u3002\u5982\u679c\u9a8c\u8bc1\u8fc7\u7a0b\u5931\u8d25\uff0c\u5219\u5c06\u88ab\u8bfb\u53d6\u7684\u5bf9\u8c61\u6807\u8bb0\u4e3aEFSCORRUPTED\u3002\u8c03\u7528\u8005\u9700\u8981\u6355\u83b7\u6b64\u9519\u8bef\uff08\u4e0eIO\u9519\u8bef\u76f8\u540c\uff09\uff0c\u5982\u679c\u7531\u4e8e\u9a8c\u8bc1\u9519\u8bef\u800c\u9700\u8981\u91c7\u53d6\u7279\u6b8a\u64cd\u4f5c\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u6355\u83b7EFSCORRUPTED\u9519\u8bef\u503c\u6765\u6267\u884c\u3002\u5982\u679c\u6211\u4eec\u9700\u8981\u5728\u66f4\u9ad8\u7ea7\u522b\u4e0a\u5bf9\u9519\u8bef\u7c7b\u578b\u8fdb\u884c\u66f4\u591a\u7684\u533a\u5206\uff0c\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u9700\u8981\u4e3a\u4e0d\u540c\u7684\u9519\u8bef\u5b9a\u4e49\u65b0\u7684\u9519\u8bef\u7f16\u53f7\u3002</p> <p>The first step in read verification is checking the magic number and determining whether CRC validating is necessary. If it is, the CRC32c is calculated and compared against the value stored in the object itself. Once this is validated, further checks are made against the location information, followed by extensive object specific metadata validation. If any of these checks fail, then the buffer is considered corrupt and the EFSCORRUPTED error is set appropriately.</p> <p>\u8bfb\u53d6\u9a8c\u8bc1\u7684\u7b2c\u4e00\u6b65\u662f\u68c0\u67e5\u5e7b\u6570\u5e76\u786e\u5b9a\u662f\u5426\u9700\u8981CRC\u9a8c\u8bc1\u3002\u5982\u679c\u662f\uff0c\u5219\u8ba1\u7b97CRC32c\u5e76\u4e0e\u5b58\u50a8\u5728\u5bf9\u8c61\u672c\u8eab\u4e2d\u7684\u503c\u8fdb\u884c\u6bd4\u8f83\u3002\u4e00\u65e6\u9a8c\u8bc1\u4e86\u8fd9\u4e00\u70b9\uff0c\u5c06\u5bf9\u4f4d\u7f6e\u4fe1\u606f\u8fdb\u884c\u8fdb\u4e00\u6b65\u68c0\u67e5\uff0c\u7136\u540e\u8fdb\u884c\u5e7f\u6cdb\u7684\u7279\u5b9a\u4e8e\u5bf9\u8c61\u7684\u5143\u6570\u636e\u9a8c\u8bc1\u3002\u5982\u679c\u8fd9\u4e9b\u68c0\u67e5\u4e2d\u7684\u4efb\u4f55\u4e00\u9879\u5931\u8d25\uff0c\u5219\u8ba4\u4e3a\u7f13\u51b2\u533a\u5df2\u635f\u574f\uff0c\u5e76\u6b63\u786e\u8bbe\u7f6eEFSCORRUPTED\u9519\u8bef\u3002</p> <p>Write verification is the opposite of the read verification - first the object is extensively verified and if it is OK we then update the LSN from the last modification made to the object, After this, we calculate the CRC and insert it into the object. Once this is done the write IO is allowed to continue. If any error occurs during this process, the buffer is again marked with a EFSCORRUPTED error for the higher layers to catch.</p> <p>\u5199\u5165\u9a8c\u8bc1\u4e0e\u8bfb\u53d6\u9a8c\u8bc1\u76f8\u53cd-\u9996\u5148\u5bf9\u5bf9\u8c61\u8fdb\u884c\u5e7f\u6cdb\u9a8c\u8bc1\uff0c\u5982\u679c\u6b63\u786e\uff0c\u5219\u66f4\u65b0\u5bf9\u5bf9\u8c61\u8fdb\u884c\u7684\u6700\u540e\u4fee\u6539\u7684LSN\u3002\u4e4b\u540e\uff0c\u6211\u4eec\u8ba1\u7b97CRC\u5e76\u5c06\u5176\u63d2\u5165\u5bf9\u8c61\u3002\u5b8c\u6210\u540e\uff0c\u5141\u8bb8\u5199\u5165IO\u7ee7\u7eed\u3002\u5982\u679c\u5728\u6b64\u8fc7\u7a0b\u4e2d\u53d1\u751f\u4efb\u4f55\u9519\u8bef\uff0c\u7f13\u51b2\u533a\u5c06\u518d\u6b21\u6807\u8bb0\u4e3aEFSCORRUPTED\u9519\u8bef\uff0c\u4ee5\u4f9b\u66f4\u9ad8\u5c42\u6355\u83b7\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/xfs/XFS%20Self%20Describing%20Metadata-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#4-structures","title":"4 Structures","text":"<p>A typical on-disk structure needs to contain the following information:</p> <p>\u5178\u578b\u7684\u78c1\u76d8\u7ed3\u6784\u9700\u8981\u5305\u542b\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <pre><code>struct xfs_ondisk_hdr {\n        __be32  magic;              /* magic number */\n        __be32  crc;                /* CRC, not logged */\n        uuid_t  uuid;               /* filesystem identifier */\n        __be64  owner;              /* parent object */\n        __be64  blkno;              /* location on disk */\n        __be64  lsn;                /* last modification in log, not logged */\n};\n</code></pre> <p>Depending on the metadata, this information may be part of a header structure separate to the metadata contents, or may be distributed through an existing structure. The latter occurs with metadata that already contains some of this information, such as the superblock and AG headers.</p> <p>\u53d6\u51b3\u4e8e\u5143\u6570\u636e\uff0c\u8be5\u4fe1\u606f\u53ef\u4ee5\u662f\u4e0e\u5143\u6570\u636e\u5185\u5bb9\u5206\u79bb\u7684\u62a5\u5934\u7ed3\u6784\u7684\u4e00\u90e8\u5206\uff0c\u6216\u8005\u53ef\u4ee5\u901a\u8fc7\u73b0\u6709\u7ed3\u6784\u5206\u53d1\u3002\u540e\u8005\u53d1\u751f\u5728\u5df2\u7ecf\u5305\u542b\u4e00\u4e9b\u4fe1\u606f\u7684\u5143\u6570\u636e\u4e2d\uff0c\u4f8b\u5982\u8d85\u7ea7\u5757\u548cAG\u5934\u3002</p> <p>Other metadata may have different formats for the information, but the same level of information is generally provided. For example:</p> <ul> <li>short btree blocks have a 32 bit owner (ag number) and a 32 bit block number for location. The two of these combined provide the same information as @owner and @blkno in eh above structure, but using 8 bytes less space on disk.</li> <li>directory/attribute node blocks have a 16 bit magic number, and the header that contains the magic number has other information in it as well. hence the additional metadata headers change the overall format of the metadata.</li> </ul> <p>\u5176\u4ed6\u5143\u6570\u636e\u53ef\u4ee5\u5177\u6709\u4e0d\u540c\u7684\u4fe1\u606f\u683c\u5f0f\uff0c\u4f46\u901a\u5e38\u63d0\u4f9b\u76f8\u540c\u7ea7\u522b\u7684\u4fe1\u606f\u3002\u4f8b\u5982\uff1a</p> <ul> <li> <p>\u77edbtree\u5757\u5177\u670932\u4f4d\u6240\u6709\u8005\uff08ag\u7f16\u53f7\uff09\u548c32\u4f4d\u5757\u7f16\u53f7\u3002\u8fd9\u4e24\u4e2a\u7ec4\u5408\u63d0\u4f9b\u4e86\u4e0e\u4e0a\u8ff0\u7ed3\u6784\u4e2d\u7684@owner\u548c@blkno\u76f8\u540c\u7684\u4fe1\u606f\uff0c\u4f46\u4f7f\u7528\u7684\u78c1\u76d8\u7a7a\u95f4\u5c11\u4e868\u5b57\u8282\u3002</p> </li> <li> <p>directory/attribute\u8282\u70b9\u5757\u6709\u4e00\u4e2a16\u4f4d\u5e7b\u6570\uff0c\u5305\u542b\u5e7b\u6570\u7684\u6807\u5934\u4e2d\u4e5f\u6709\u5176\u4ed6\u4fe1\u606f\u3002\u56e0\u6b64\uff0c\u9644\u52a0\u7684\u5143\u6570\u636e\u62a5\u5934\u6539\u53d8\u4e86\u5143\u6570\u636e\u7684\u6574\u4f53\u683c\u5f0f\u3002</p> </li> </ul> <p>A typical buffer read verifier is structured as follows:</p> <p>\u5178\u578b\u7684\u7f13\u51b2\u533a\u8bfb\u53d6\u9a8c\u8bc1\u5668\u7684\u7ed3\u6784\u5982\u4e0b\uff1a</p> <pre><code>#define XFS_FOO_CRC_OFF             offsetof(struct xfs_ondisk_hdr, crc)\n\nstatic void\nxfs_foo_read_verify(\n        struct xfs_buf      *bp)\n{\n    struct xfs_mount *mp = bp-&gt;b_mount;\n\n        if ((xfs_sb_version_hascrc(&amp;mp-&gt;m_sb) &amp;&amp;\n            !xfs_verify_cksum(bp-&gt;b_addr, BBTOB(bp-&gt;b_length),\n                                        XFS_FOO_CRC_OFF)) ||\n            !xfs_foo_verify(bp)) {\n                XFS_CORRUPTION_ERROR(__func__, XFS_ERRLEVEL_LOW, mp, bp-&gt;b_addr);\n                xfs_buf_ioerror(bp, EFSCORRUPTED);\n        }\n}\n</code></pre> <p>The code ensures that the CRC is only checked if the filesystem has CRCs enabled by checking the superblock of the feature bit, and then if the CRC verifies OK (or is not needed) it verifies the actual contents of the block.</p> <p>\u8be5\u4ee3\u7801\u786e\u4fdd\u53ea\u6709\u5f53\u6587\u4ef6\u7cfb\u7edf\u901a\u8fc7\u68c0\u67e5\u7279\u5f81\u4f4d\u7684\u8d85\u7ea7\u5757\u542f\u7528CRC\u65f6\uff0c\u624d\u68c0\u67e5CRC\uff0c\u7136\u540e\u5982\u679cCRC\u9a8c\u8bc1OK\uff08\u6216\u4e0d\u9700\u8981\uff09\uff0c\u5219\u9a8c\u8bc1\u5757\u7684\u5b9e\u9645\u5185\u5bb9\u3002</p> <p>The verifier function will take a couple of different forms, depending on whether the magic number can be used to determine the format of the block. In the case it can\u2019t, the code is structured as follows:</p> <p>\u9a8c\u8bc1\u5668\u51fd\u6570\u5c06\u91c7\u7528\u591a\u79cd\u4e0d\u540c\u7684\u5f62\u5f0f\uff0c\u8fd9\u53d6\u51b3\u4e8e\u662f\u5426\u53ef\u4ee5\u4f7f\u7528\u5e7b\u6570\u6765\u786e\u5b9a\u5757\u7684\u683c\u5f0f\u3002\u5982\u679c\u4e0d\u80fd\uff0c\u4ee3\u7801\u7ed3\u6784\u5982\u4e0b\uff1a</p> <pre><code>static bool\nxfs_foo_verify(\n        struct xfs_buf              *bp)\n{\n        struct xfs_mount    *mp = bp-&gt;b_mount;\n        struct xfs_ondisk_hdr       *hdr = bp-&gt;b_addr;\n\n        if (hdr-&gt;magic != cpu_to_be32(XFS_FOO_MAGIC))\n                return false;\n\n        if (!xfs_sb_version_hascrc(&amp;mp-&gt;m_sb)) {\n                if (!uuid_equal(&amp;hdr-&gt;uuid, &amp;mp-&gt;m_sb.sb_uuid))\n                        return false;\n                if (bp-&gt;b_bn != be64_to_cpu(hdr-&gt;blkno))\n                        return false;\n                if (hdr-&gt;owner == 0)\n                        return false;\n        }\n\n        /* object specific verification checks here */\n\n        return true;\n}\n</code></pre> <p>If there are different magic numbers for the different formats, the verifier will look like:</p> <p>\u5982\u679c\u4e0d\u540c\u683c\u5f0f\u6709\u4e0d\u540c\u7684\u5e7b\u6570\uff0c\u9a8c\u8bc1\u7a0b\u5e8f\u5c06\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>static bool\nxfs_foo_verify(\n        struct xfs_buf              *bp)\n{\n        struct xfs_mount    *mp = bp-&gt;b_mount;\n        struct xfs_ondisk_hdr       *hdr = bp-&gt;b_addr;\n\n        if (hdr-&gt;magic == cpu_to_be32(XFS_FOO_CRC_MAGIC)) {\n                if (!uuid_equal(&amp;hdr-&gt;uuid, &amp;mp-&gt;m_sb.sb_uuid))\n                        return false;\n                if (bp-&gt;b_bn != be64_to_cpu(hdr-&gt;blkno))\n                        return false;\n                if (hdr-&gt;owner == 0)\n                        return false;\n        } else if (hdr-&gt;magic != cpu_to_be32(XFS_FOO_MAGIC))\n                return false;\n\n        /* object specific verification checks here */\n\n        return true;\n}\n</code></pre> <p>Write verifiers are very similar to the read verifiers, they just do things in the opposite order to the read verifiers. A typical write verifier:</p> <p>\u5199\u6821\u9a8c\u5668\u4e0e\u8bfb\u6821\u9a8c\u5668\u975e\u5e38\u76f8\u4f3c\uff0c\u5b83\u4eec\u53ea\u662f\u6309\u7167\u4e0e\u8bfb\u6821\u9a8c\u7b26\u76f8\u53cd\u7684\u987a\u5e8f\u8fdb\u884c\u64cd\u4f5c\u3002\u5178\u578b\u7684\u5199\u9a8c\u8bc1\u5668\uff1a</p> <pre><code>static void\nxfs_foo_write_verify(\n        struct xfs_buf      *bp)\n{\n        struct xfs_mount    *mp = bp-&gt;b_mount;\n        struct xfs_buf_log_item     *bip = bp-&gt;b_fspriv;\n\n        if (!xfs_foo_verify(bp)) {\n                XFS_CORRUPTION_ERROR(__func__, XFS_ERRLEVEL_LOW, mp, bp-&gt;b_addr);\n                xfs_buf_ioerror(bp, EFSCORRUPTED);\n                return;\n        }\n\n        if (!xfs_sb_version_hascrc(&amp;mp-&gt;m_sb))\n                return;\n\n\n        if (bip) {\n                struct xfs_ondisk_hdr       *hdr = bp-&gt;b_addr;\n                hdr-&gt;lsn = cpu_to_be64(bip-&gt;bli_item.li_lsn);\n        }\n        xfs_update_cksum(bp-&gt;b_addr, BBTOB(bp-&gt;b_length), XFS_FOO_CRC_OFF);\n}\n</code></pre> <p>This will verify the internal structure of the metadata before we go any further, detecting corruptions that have occurred as the metadata has been modified in memory. If the metadata verifies OK, and CRCs are enabled, we then update the LSN field (when it was last modified) and calculate the CRC on the metadata. Once this is done, we can issue the IO.</p> <p>\u8fd9\u5c06\u9a8c\u8bc1\u5143\u6570\u636e\u7684\u5185\u90e8\u7ed3\u6784\uff0c\u7136\u540e\u518d\u8fdb\u4e00\u6b65\uff0c\u68c0\u6d4b\u5728\u5185\u5b58\u4e2d\u4fee\u6539\u5143\u6570\u636e\u65f6\u53d1\u751f\u7684\u635f\u574f\u3002\u5982\u679c\u5143\u6570\u636e\u9a8c\u8bc1\u4e3aOK\uff0c\u5e76\u4e14\u542f\u7528\u4e86CRC\uff0c\u5219\u66f4\u65b0LSN\u5b57\u6bb5\uff08\u4e0a\u6b21\u4fee\u6539\u65f6\uff09\u5e76\u8ba1\u7b97\u5143\u6570\u636e\u7684CRC\u3002\u4e00\u65e6\u5b8c\u6210\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u53d1\u5e03IO\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/xfs/XFS%20Self%20Describing%20Metadata-%E4%B8%AD%E8%8B%B1%E5%AF%B9%E7%85%A7/#5-inodes-and-dquots","title":"5 Inodes and Dquots","text":"<p>Inodes and dquots are special snowflakes. They have per-object CRC and self-identifiers, but they are packed so that there are multiple objects per buffer. Hence we do not use per-buffer verifiers to do the work of per-object verification and CRC calculations. The per-buffer verifiers simply perform basic identification of the buffer - that they contain inodes or dquots, and that there are magic numbers in all the expected spots. All further CRC and verification checks are done when each inode is read from or written back to the buffer.</p> <p>Inodes\u548cdquos\u662f\u7279\u6b8a\u7684\u96ea\u82b1\u3002\u5b83\u4eec\u5177\u6709\u6bcf\u4e2a\u5bf9\u8c61\u7684CRC\u548c\u81ea\u6807\u8bc6\u7b26\uff0c\u4f46\u5b83\u4eec\u662f\u6253\u5305\u7684\uff0c\u56e0\u6b64\u6bcf\u4e2a\u7f13\u51b2\u533a\u6709\u591a\u4e2a\u5bf9\u8c61\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u4e0d\u4f7f\u7528\u6bcf\u4e2a\u7f13\u51b2\u533a\u9a8c\u8bc1\u5668\u6765\u5b8c\u6210\u6bcf\u4e2a\u5bf9\u8c61\u9a8c\u8bc1\u548cCRC\u8ba1\u7b97\u7684\u5de5\u4f5c\u3002\u6bcf\u4e2a\u7f13\u51b2\u533a\u9a8c\u8bc1\u5668\u53ea\u9700\u6267\u884c\u7f13\u51b2\u533a\u7684\u57fa\u672c\u6807\u8bc6\uff0c\u5373\u5b83\u4eec\u5305\u542binode\u6216dquot\uff0c\u5e76\u4e14\u5728\u6240\u6709\u9884\u671f\u7684\u70b9\u4e2d\u90fd\u6709\u5e7b\u6570\u3002\u6240\u6709\u8fdb\u4e00\u6b65\u7684CRC\u548c\u9a8c\u8bc1\u68c0\u67e5\u90fd\u662f\u5728\u4ece\u7f13\u51b2\u533a\u8bfb\u53d6\u6216\u5199\u56de\u6bcf\u4e2ainode\u65f6\u5b8c\u6210\u7684\u3002</p> <p>The structure of the verifiers and the identifiers checks is very similar to the buffer code described above. The only difference is where they are called. For example, inode read verification is done in xfs_inode_from_disk() when the inode is first read out of the buffer and the struct xfs_inode is instantiated. The inode is already extensively verified during writeback in xfs_iflush_int, so the only addition here is to add the LSN and CRC to the inode as it is copied back into the buffer.</p> <p>\u9a8c\u8bc1\u8005\u548c\u6807\u8bc6\u7b26\u68c0\u67e5\u7684\u7ed3\u6784\u4e0e\u4e0a\u8ff0\u7f13\u51b2\u4ee3\u7801\u975e\u5e38\u76f8\u4f3c\u3002\u552f\u4e00\u7684\u533a\u522b\u662f\u5728\u54ea\u91cc\u8c03\u7528\u5b83\u4eec\u3002\u4f8b\u5982\uff0c\u5f53\u9996\u6b21\u4ece\u7f13\u51b2\u533a\u4e2d\u8bfb\u53d6inode\u5e76\u5b9e\u4f8b\u5316\u7ed3\u6784xfs_inode\u65f6\uff0c\u5728xfs_inode_from_disk\uff08\uff09\u4e2d\u5b8c\u6210inode\u8bfb\u53d6\u9a8c\u8bc1\u3002\u5728xfs_iflush_int\u7684\u5199\u56de\u8fc7\u7a0b\u4e2d\uff0cinode\u5df2\u7ecf\u5f97\u5230\u4e86\u5e7f\u6cdb\u7684\u9a8c\u8bc1\uff0c\u56e0\u6b64\u8fd9\u91cc\u552f\u4e00\u7684\u6dfb\u52a0\u662f\u5728\u5c06inode\u590d\u5236\u56de\u7f13\u51b2\u533a\u65f6\u5c06LSN\u548cCRC\u6dfb\u52a0\u5230inode\u4e2d\u3002</p> <p>XXX: inode unlinked list modification doesn\u2019t recalculate the inode CRC! None of the unlinked list modifications check or update CRCs, neither during unlink nor log recovery. So, it\u2019s gone unnoticed until now. This won\u2019t matter immediately - repair will probably complain about it - but it needs to be fixed.</p> <p>XXX\uff1a inode\u672a\u94fe\u63a5\u5217\u8868\u4fee\u6539\u4e0d\u4f1a\u91cd\u65b0\u8ba1\u7b97inode CRC\uff01\u65e0\u8bba\u662f\u5728\u53d6\u6d88\u94fe\u63a5\u8fd8\u662f\u65e5\u5fd7\u6062\u590d\u671f\u95f4\uff0c\u672a\u94fe\u63a5\u7684\u5217\u8868\u4fee\u6539\u90fd\u4e0d\u4f1a\u68c0\u67e5\u6216\u66f4\u65b0CRC\u3002\u6240\u4ee5\uff0c\u76f4\u5230\u73b0\u5728\uff0c\u5b83\u90fd\u6ca1\u6709\u88ab\u6ce8\u610f\u5230\u3002\u8fd9\u4e0d\u4f1a\u7acb\u5373\u53d1\u751f\uff0c\u7ef4\u4fee\u4eba\u5458\u53ef\u80fd\u4f1a\u62b1\u6028\uff0c\u4f46\u9700\u8981\u4fee\u590d\u3002</p>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/xfs/xfs/","title":"xfs","text":"<ul> <li>https://xfs.wiki.kernel.org/</li> <li>XFS\u6587\u4ef6\u7cfb\u7edf\u7ed3\u6784</li> </ul>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/xfs/xfs/#1","title":"1 \u7279\u70b9","text":"<ol> <li>blocks \u8303\u56f4\uff1a\u6700\u5c0f 512B\uff0c\u6700\u5927 64KiB</li> </ol>"},{"location":"Documents/D-Technology/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/xfs/xfs/#2","title":"2 \u5e03\u5c40","text":"<p>XFS \u6587\u4ef6\u7cfb\u7edf\u88ab\u5212\u5206\u4e3a\u591a\u4e2a\u5927\u5c0f\u76f8\u7b49\u7684\u5757\uff0c\u79f0\u4e3a\u5206\u914d\u7ec4\uff08Allocation Groups \u7b80\u79f0 AG\uff09\u3002\u6bcf\u4e2a AG \u51e0\u4e4e\u53ef\u4ee5\u770b\u4f5c\u662f\u4e00\u4e2a\u5355\u72ec\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u5b83\u7ef4\u62a4\u81ea\u5df1\u7684\u7a7a\u95f4\u4f7f\u7528\u3001\u7d22\u5f15\u8282\u70b9\u548c\u5176\u4ed6\u8f85\u52a9\u5143\u6570\u636e\u3002\u62e5\u6709\u591a\u4e2a AG \u5141\u8bb8 XFS \u5e76\u884c\u5904\u7406\u5927\u591a\u6570\u64cd\u4f5c\uff0c\u800c\u4e0d\u4f1a\u968f\u7740\u5e76\u53d1\u8bbf\u95ee\u6570\u91cf\u7684\u589e\u52a0\u800c\u964d\u4f4e\u6027\u80fd\u3002\u6bcf\u4e2a\u5206\u914d\u7ec4\u4f7f\u7528\u591a\u4e2a B+\u6811\u6765\u7ef4\u62a4\u8bb0\u8d26\u8bb0\u5f55\uff0c\u4f8b\u5982\u7a7a\u95f2\u5757\u7684\u4f4d\u7f6e\u3001\u5df2\u5206\u914d\u7d22\u5f15\u8282\u70b9\u7684\u4f4d\u7f6e\u548c\u7a7a\u95f2\u7d22\u5f15\u8282\u70b9\u7684\u5730\u5740\u3002 </p>"},{"location":"Documents/D-Technology/%E6%B1%A0%E5%8C%96%E6%8A%80%E6%9C%AF/%E5%86%85%E5%AD%98%E6%B1%A0%E8%AE%BE%E8%AE%A1/","title":"\u5185\u5b58\u6c60\u8bbe\u8ba1","text":"<p>aliases: \u5185\u5b58\u6c60\u8bbe\u8ba1 cssclass: source: title: \u5185\u5b58\u6c60\u8bbe\u8ba1 date: 2021-11-09 sidebarDepth: 2 tags: \u5185\u5b58\u6c60\u8bbe\u8ba1 categories: [\u67b6\u6784\u8bbe\u8ba1] created: 2022-11-06 03:57:07 updated: 2022-11-25 11:09:23</p>"},{"location":"Documents/D-Technology/%E6%B1%A0%E5%8C%96%E6%8A%80%E6%9C%AF/%E5%AF%B9%E8%B1%A1%E6%B1%A0%E8%AE%BE%E8%AE%A1/","title":"\u5bf9\u8c61\u6c60\u8bbe\u8ba1","text":"<ul> <li>\u5bf9\u8c61\u6c60\uff1a\u5bf9\u8c61\u6c60\u5177\u6709\u9884\u5148\u5206\u914d\u4e00\u4e9b\u5bf9\u8c61\uff0c\u4f7f\u7528\uff08new\u5bf9\u8c61\uff09\u65f6\u4ece\u6c60\u4e2d\u83b7\u53d6\u5bf9\u8c61\uff0c\u91ca\u653e\uff08delete\u5bf9\u8c61\uff09\u65f6\u5f52\u8fd8\u6c60\u4e2d\u7684\u529f\u80fd\u3002</li> <li>\u4f18\u70b9\uff1a\u51cf\u5c11\u5bf9\u8c61\u521b\u5efa\u9500\u6bc1\u7684\u65f6\u95f4\uff0c\u548c\u989d\u5916\u7684\u5185\u5b58</li> <li>\u7f3a\u70b9\uff1a\u521d\u59cb\u5185\u5b58\u5360\u7528\u589e\u591a</li> <li>\u4f7f\u7528\u573a\u666f\uff1a\u5bf9\u8c61\u521b\u5efa\u9891\u7e41\u7684\uff0c\u6210\u672c\u6bd4\u8f83\u5927\u7684</li> </ul>"},{"location":"Documents/D-Technology/%E6%B1%A0%E5%8C%96%E6%8A%80%E6%9C%AF/%E5%AF%B9%E8%B1%A1%E6%B1%A0%E8%AE%BE%E8%AE%A1/#1","title":"1 \u5bf9\u8c61\u6c60\u67b6\u6784","text":"<p>\u5bf9\u8c61\u6c60\u901a\u5e38\u7531\u4ee5\u4e0b2\u90e8\u5206\u7ec4\u6210\uff1a 1. \u5bf9\u8c61\u6c60\uff1a\u5b9e\u73b0\u5bf9\u8c61\u5206\u914d\u3001\u56de\u6536 2. \u5bf9\u8c61\u6c60\u7ba1\u7406\uff1a\u7ba1\u7406\u5bf9\u8c61\u6c60\u7684\u751f\u547d\u5468\u671f\u3001\u6269\u5bb9\u3001\u7f29\u5bb9\u7b49</p>"},{"location":"Documents/D-Technology/%E6%B1%A0%E5%8C%96%E6%8A%80%E6%9C%AF/%E5%AF%B9%E8%B1%A1%E6%B1%A0%E8%AE%BE%E8%AE%A1/#2","title":"2 \u5bf9\u8c61\u6c60\u7c7b\u8bbe\u8ba1","text":"<ol> <li>\u91cd\u5199\u5bf9\u8c61\u521b\u5efa\u548c\u9500\u6bc1\u64cd\u4f5c\uff0c\u521b\u5efa\u4f18\u5148\u4ece\u6c60\u4e2d\u83b7\u53d6\uff0c\u9500\u6bc1\u5219\u5c06\u5bf9\u8c61\u7f6e\u4e3a\u53ef\u7528</li> <li>\u652f\u6301\u5bf9\u8c61\u6c60\u7ba1\u7406\u7c7b\u7684\u6269\u7f29\u5bb9\u529f\u80fd</li> <li>\u5b9e\u73b0\u9501\u673a\u5236\uff0c\u4fdd\u8bc1\u7ebf\u7a0b\u5b89\u5168</li> </ol>"},{"location":"Documents/D-Technology/%E6%B1%A0%E5%8C%96%E6%8A%80%E6%9C%AF/%E5%AF%B9%E8%B1%A1%E6%B1%A0%E8%AE%BE%E8%AE%A1/#3","title":"3 \u5bf9\u8c61\u6c60\u7ba1\u7406\u7c7b\u8bbe\u8ba1","text":"<ol> <li>\u5355\u4f8b\u7c7b</li> <li>\u521b\u5efa\u3001\u9500\u6bc1\u3001\u7ba1\u7406\u5bf9\u8c61\u6c60\u529f\u80fd</li> <li>\u4ece\u5bf9\u8c61\u6c60\u83b7\u53d6\u3001\u5f52\u8fd8\u5bf9\u8c61\u529f\u80fd</li> </ol>"},{"location":"Documents/D-Technology/%E6%B1%A0%E5%8C%96%E6%8A%80%E6%9C%AF/%E5%AF%B9%E8%B1%A1%E6%B1%A0%E8%AE%BE%E8%AE%A1/#4","title":"4 \u6e90\u7801\u8bbe\u8ba1","text":"<ul> <li>\u5bf9\u8c61\u6c60\u4ee3\u7801\uff1a</li> </ul> <pre><code>#ifndef _ObjectPoolBase_hpp_\n#define _ObjectPoolBase_hpp_\n\n\n#include&lt;stdlib.h&gt;\n#include&lt;assert.h&gt;\n#include&lt;mutex&gt;\n\n#ifdef _DEBUG\n#ifndef xPrintf\n#include&lt;stdio.h&gt;\n#define xPrintf(...) printf(__VA_ARGS__)\n#endif\n#else\n#ifndef xPrintf\n#define xPrintf(...)\n#endif\n#endif // _DEBUG\n//\u6a21\u677f\u7ed9\u5bf9\u8c61\u6c60\u63d0\u4f9b\u53c2\u6570\u63a5\u53e3\ntemplate&lt;class Type, size_t nPoolSzie&gt;\n//\u5bf9\u8c61\u6c60\u7684\u5b9e\u73b0\nclass CELLObjectPool\n{\npublic:\nCELLObjectPool()\n{\ninitPool();\n}\n\n~CELLObjectPool()\n{\nif (_pBuf)\ndelete[] _pBuf;\n}\nprivate:\n//NodeHeader\u662f\u6bcf\u4e2a\u5bf9\u8c61\u7684\u63cf\u8ff0\u4fe1\u606f\nclass NodeHeader\n{\npublic:\n//\u4e0b\u4e00\u5757\u4f4d\u7f6e\nNodeHeader* pNext;\n//\u5185\u5b58\u5757\u7f16\u53f7\nint nID;\n//\u5f15\u7528\u6b21\u6570\nchar nRef;\n//\u662f\u5426\u5728\u5185\u5b58\u6c60\u4e2d\nbool bPool;\nprivate:\n//\u9884\u7559\nchar c1;\nchar c2;\n};\npublic:\n//\u91ca\u653e\u5bf9\u8c61\u5185\u5b58\nvoid freeObjMemory(void* pMem)\n{\n//\u9996\u5730\u5740\u5f80\u524d\u504f\u79fb\uff0c\u5bf9\u8c61\u548c\u5bf9\u8c61\u63cf\u8ff0\u4fe1\u606f\u7684\u5185\u5b58\u4e00\u8d77\u91ca\u653e\nNodeHeader* pBlock = (NodeHeader*)((char*)pMem - sizeof(NodeHeader));\nxPrintf(\"freeObjMemory: %llx, id=%d\\n\", pBlock, pBlock-&gt;nID);\nassert(1 == pBlock-&gt;nRef);\n//\u5185\u5b58\u5728\u5bf9\u8c61\u6c60\u7684\u90e8\u5206\u91ca\u653e\u4e4b\u540e\uff0c\u6307\u9488\u56de\u5230\u7b2c\u4e00\u4e2a\u672a\u5206\u914d\u7684\u5bf9\u8c61\nif (pBlock-&gt;bPool)\n{\nstd::lock_guard&lt;std::mutex&gt; lg(_mutex);\nif (--pBlock-&gt;nRef != 0)\n{\nreturn;\n}\npBlock-&gt;pNext = _pHeader;\n_pHeader = pBlock;\n}\nelse {\nif (--pBlock-&gt;nRef != 0)\n{\nreturn;\n}\n//\u4e0d\u5728\u5bf9\u8c61\u6c60\u7684\u76f4\u63a5\u91ca\u653e\u5185\u5b58\ndelete[] pBlock;\n}\n}\n//\u7533\u8bf7\u5bf9\u8c61\u5185\u5b58\uff0c\u4f18\u5148\u5411\u5185\u5b58\u6c60\u7533\u8bf7\u5185\u5b58\uff0c\u5185\u5b58\u6c60\u4e0d\u591f\u5728\u5411\u7cfb\u7edf\u7533\u8bf7\u5185\u5b58\nvoid* allocObjMemory(size_t nSize)\n{\nstd::lock_guard&lt;std::mutex&gt; lg(_mutex);\nNodeHeader* pReturn = nullptr;\n//\u5982\u679c\u5bf9\u8c61\u6c60\u5df2\u7ecf\u6ee1\u4e86\uff0c\u6570\u91cf\u8fbe\u5230\u4e0a\u9650\uff0c\u9700\u8981\u5411\u7cfb\u7edf\u7533\u8bf7\u5185\u5b58\nif (nullptr == _pHeader)\n{\n//\u8ba1\u7b97\u5bf9\u8c61\u6c60\u5927\u5c0f=\u5bf9\u8c61\u6570\u91cf*\uff08\u4e00\u4e2a\u5bf9\u8c61\u5185\u5b58\u5927\u5c0f+\u5bf9\u8c61\u63cf\u8ff0\u4fe1\u606f\u5185\u5b58\u5927\u5c0f\uff09\npReturn = (NodeHeader*)new char[sizeof(Type) + sizeof(NodeHeader)];\npReturn-&gt;bPool = false;\npReturn-&gt;nID = -1;\npReturn-&gt;nRef = 1;\npReturn-&gt;pNext = nullptr;\n}\nelse {\npReturn = _pHeader;\n_pHeader = _pHeader-&gt;pNext;\nassert(0 == pReturn-&gt;nRef);\npReturn-&gt;nRef = 1;\n}\nxPrintf(\"allocObjMemory: %llx, id=%d, size=%d\\n\", pReturn, pReturn-&gt;nID, nSize);\nreturn ((char*)pReturn + sizeof(NodeHeader));\n}\nprivate:\n//\u521d\u59cb\u5316\u5bf9\u8c61\u6c60\nvoid initPool()\n{\n//\u65ad\u8a00\nassert(nullptr == _pBuf);\n//\u5bf9\u8c61\u6c60\u4e0d\u4e3a\u7a7a\uff08\u5df2\u7ecf\u521d\u59cb\u5316\u8fc7\uff09\uff0c\u4e0d\u521d\u59cb\u5316\u76f4\u63a5\u8fd4\u56de\nif (_pBuf)\nreturn;\n//\u8ba1\u7b97\u5bf9\u8c61\u6c60\u5927\u5c0f=\u5bf9\u8c61\u6570\u91cf*\uff08\u4e00\u4e2a\u5bf9\u8c61\u5185\u5b58\u5927\u5c0f+\u5bf9\u8c61\u63cf\u8ff0\u4fe1\u606f\u5185\u5b58\u5927\u5c0f\uff09\nsize_t realSzie = sizeof(Type) + sizeof(NodeHeader);\nsize_t n = nPoolSzie * realSzie;\n//\u7533\u8bf7\u6c60\u7684\u5185\u5b58\n_pBuf = new char[n];\n//\u521d\u59cb\u5316\u5185\u5b58\u6c60\n_pHeader = (NodeHeader*)_pBuf;\n_pHeader-&gt;bPool = true;\n_pHeader-&gt;nID = 0;\n_pHeader-&gt;nRef = 0;\n_pHeader-&gt;pNext = nullptr;\n//\u904d\u5386\u5185\u5b58\u5757\u8fdb\u884c\u521d\u59cb\u5316\nNodeHeader* pTemp1 = _pHeader;\n\nfor (size_t n = 1; n &lt; nPoolSzie; n++)\n{\nNodeHeader* pTemp2 = (NodeHeader*)(_pBuf + (n* realSzie));\npTemp2-&gt;bPool = true;\npTemp2-&gt;nID = n;\npTemp2-&gt;nRef = 0;\npTemp2-&gt;pNext = nullptr;\npTemp1-&gt;pNext = pTemp2;\npTemp1 = pTemp2;\n}\n}\nprivate:\n//\u63cf\u8ff0\u4fe1\u606f\u5757\u5730\u5740\nNodeHeader* _pHeader;\n//\u5bf9\u8c61\u6c60\u5185\u5b58\u7f13\u5b58\u533a\u5730\u5740\nchar* _pBuf;\n//\u591a\u7ebf\u7a0b\u4f7f\u7528\u9700\u8981\u52a0\u9501\nstd::mutex _mutex;\n};\n\n//\u6a21\u677f\u7c7b\u7ed9\u4e3b\u51fd\u6570\u4f7f\u7528\u5bf9\u8c61\u6c60\u63d0\u4f9b\u63a5\u53e3\ntemplate&lt;class Type, size_t nPoolSzie&gt;\n//\u4f7f\u7528\u5bf9\u8c61\u6c60\u7684\u7c7b\nclass ObjectPoolBase\n{\npublic:\n//\u91cd\u8f7d\u7ed9\u5bf9\u8c61\u7533\u8bf7\u5185\u5b58\u7684new\u64cd\u4f5c\nvoid* operator new(size_t nSize)\n{\nreturn objectPool().allocObjMemory(nSize);\n}\n//\u91cd\u8f7d\u7ed9\u5bf9\u8c61\u91ca\u653e\u5185\u5b58\u7684delete\u64cd\u4f5c\nvoid operator delete(void* p)\n{\nobjectPool().freeObjMemory(p);\n}\n\n//\u521b\u5efa\u5bf9\u8c61\uff0c\u7528\u6a21\u677f\u7c7b\u63d0\u4f9b\u5bf9\u5916\u7684\u53ef\u53d8\u53c2\u6570\u7684\u63a5\u53e3\n//\u8fd9\u91cc\u7684\u6a21\u677f\u4e3a\u5565\u8981\u7528\u53ef\u53d8\u53c2\u6570\uff1f\n//\u8fd9\u91cc\u521b\u5efa\u4e00\u4e2a\u5bf9\u8c61\u7684\u65f6\u5019\u8fd8\u53ef\u80fd\u5e26\u6709\u521d\u59cb\u5316\u7684\u53c2\u6570\uff0c\u8fd9\u4e2a\u53c2\u6570\u7684\u4e2a\u6570\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u6240\u6709\u6a21\u677f\u7684\u53c2\u6570\u9700\u8981\u53d8\u53c2\n//\ntemplate&lt;typename ...Args&gt;\nstatic Type* createObject(Args ... args)\n{   //\u4e0d\u5b9a\u53c2\u6570  \u53ef\u53d8\u53c2\u6570\nType* obj = new Type(args...);\n//\u53ef\u4ee5\u505a\u70b9\u5176\u5b83\u7684\u4e8b\u60c5\uff0c\u6bd4\u5982\u8bf4\u5bf9\u8c61\u7684\u653e\u9010\u548c\u9a71\u9010\nreturn obj;\n}\n//\u9500\u6bc1\u5bf9\u8c61\nstatic void destroyObject(Type* obj)\n{\ndelete obj;\n}\nprivate:\n//\u5b9a\u4e49\u4e0d\u540c\u7c7b\u578b\u7684\u5bf9\u8c61\u6c60\ntypedef CELLObjectPool&lt;Type, nPoolSzie&gt; ClassTypePool;\n//\u5355\u4f8b-\u997f\u6c49\u6a21\u5f0f\uff0c\u5b9e\u4f8b\u5316\u4e00\u4e2a\u5bf9\u8c61\u6c60\nstatic ClassTypePool&amp; objectPool()\n{   //\u9759\u6001CELLObjectPool\u5bf9\u8c61\nstatic ClassTypePool sPool;\nreturn sPool;\n}\n};\n#endif\n</code></pre> <ul> <li>\u6d4b\u8bd5\u4ee3\u7801</li> </ul> <pre><code>#include&lt;stdlib.h&gt;\n#include&lt;iostream&gt;\n#include&lt;thread&gt;\n#include&lt;mutex&gt;//\u9501\n#include&lt;memory&gt;\n\n#include\"ObjectPoolBase.hpp\"\n\nusing namespace std;\n\n//10\u662f\u6c60\u5185\u5bf9\u8c61\u7684\u6700\u5927\u6570\u91cf\uff0c\u901a\u8fc7\u7ee7\u627fObjectPoolBase\u6765\u4f7f\u7528\u5bf9\u8c61\u6c60\nclass ClassA : public ObjectPoolBase&lt;ClassA, 10&gt;\n{\npublic:\nClassA(int n)\n{\nnum = n;\nprintf(\"ClassA\\n\");\n}\n\n~ClassA()\n{\nprintf(\"~ClassA\\n\");\n}\npublic:\nint num = 0;\n};\n\nclass ClassB : public ObjectPoolBase&lt;ClassB, 10&gt;\n{\npublic:\nClassB(int n, int m)\n{\nnum = n * m;\nprintf(\"ClassB\\n\");\n}\n\n~ClassB()\n{\nprintf(\"~ClassB\\n\");\n}\npublic:\nint num = 0;\n};\n\n\nint main()\n{\n{\n//\u5bf9\u8c61\u6c60\u7684\u4f7f\u7528\u8fc7\u7a0b\u662f\u5728\u4f7f\u7528new\u7684\u65f6\u5019\uff0c\u56e0\u4e3a\u4f60\u8981\u521b\u5efa\u7684\u7c7b\u7ee7\u627f\u4e86\u5bf9\u8c61\u6c60\u7ba1\u7406\u7684\u7c7b\uff0c\n//\u5bf9\u8c61\u6c60\u7ba1\u7406\u7c7b\u4f1a\u6839\u636e\u4f60\u8bbe\u8ba1\u7684\u5bf9\u8c61\u6570\u91cf\u521b\u5efa\uff08\u521d\u59cb\u5316\uff09\u5bf9\u8c61\u6c60\uff0c\n//\u8fdb\u5165\u5bf9\u8c61\u6c60\u7684\u65f6\u5019\u9996\u5148\u5224\u65ad\u8be5\u5bf9\u8c61\u6c60\u662f\u5426\u521d\u59cb\u5316\uff0c\u521d\u59cb\u5316\u8fc7\u8bf4\u660e\u8be5\u5bf9\u8c61\u6c60\u5df2\u7ecf\u5b58\u5728\n//\u672a\u521d\u59cb\u5316\u8bf4\u660e\u8fd8\u6ca1\u6709\u8be5\u7c7b\u578b\u7684\u5bf9\u8c61\u6c60\n\n//\u5982\u679c\u8be5\u5bf9\u8c61\u6c60\u6ca1\u6709\u521d\u59cb\u5316\uff0c\u5c31\u8fdb\u884c\u521d\u59cb\u5316\uff08\u521b\u5efa\u4e00\u4e2a\u5bf9\u8c61\u6c60\uff09\n//\u5df2\u7ecf\u521d\u59cb\u5316\u5c31\u76f4\u63a5\u4ece\u8be5\u5bf9\u8c61\u6c60\u4e2d\u5206\u914d\u4e00\u4e2a\u5bf9\u8c61\n//\u7136\u540e\u901a\u8fc7new\u64cd\u4f5c\u5728\u5bf9\u8c61\u6c60\u4e2d\u5206\u914d\u4e00\u4e2a\u5df2\u7ecf\u521b\u5efa\u597d\u7684\u5bf9\u8c61\n\n//\u518d\u6839\u636e\u5bf9\u8c61\u4f20\u8fdb\u6765\u7684\u53c2\u6570\uff0c\u786e\u5b9a\u5bf9\u8c61\u6c60\u5141\u8bb8\u6709\u51e0\u4e2a\u5bf9\u8c61\n//\u7136\u540e\u7533\u8bf7\u76f8\u5e94\u5927\u5c0f\u7684\u5185\u5b58\uff0c\u9010\u4e2a\u4ee5\u94fe\u8868\u7684\u5f62\u5f0f\u8fdb\u884c\u521d\u59cb\u5316\n\n//\u4e24\u79cd\u521b\u5efa\u5bf9\u8c61\u7684\u65b9\u6cd5\n//\u76f4\u63a5\u7528new\u521b\u5efa\u5bf9\u8c61\uff0c\u628anew\u548cdelete\u66b4\u9732\u5728\u5916\uff0c\u4f7f\u7528\u4e0d\u7075\u6d3b\uff0c\u521d\u59cb\u5316\u5bf9\u8c61\u4e0d\u65b9\u4fbf\nClassA* a1 = new ClassA(5);\n//delete a1;\n\n//\u628anew\u548cdelete\u5c01\u88c5\u6210\u4e00\u4e2a\u51fd\u6570\uff0c\u53ef\u4ee5\u66f4\u7075\u6d3b\u7684\u5bf9\u5bf9\u8c61\u8fdb\u884c\u64cd\u4f5c\uff0c\u6bd4\u5982\u5728\u521b\u5efa\u7684\u65f6\u5019\u521d\u59cb\u5316\u5bf9\u8c61\nClassA* a2 = ClassA::createObject(6);\n//ClassA::destroyObject(a2);\n\ndelete a1;\nClassA::destroyObject(a2);\nClassB* b1 = new ClassB(5, 6);\ndelete b1;\n\nClassB* b2 = ClassB::createObject(5, 6);\nClassB::destroyObject(b2);\n}\nsystem(\"pause\");\nreturn 0;\n}\n</code></pre>"},{"location":"Documents/D-Technology/%E6%B1%A0%E5%8C%96%E6%8A%80%E6%9C%AF/%E7%BA%BF%E7%A8%8B%E6%B1%A0%E8%AE%BE%E8%AE%A1/","title":"\u7ebf\u7a0b\u6c60\u8bbe\u8ba1","text":"<ul> <li>\u7ebf\u7a0b\u6c60\uff1a\u7ebf\u7a0b\u6c60\u5177\u6709\u9884\u5148\u5206\u914d\u4e00\u4e9b\u7ebf\u7a0b\uff0c\u81ea\u52a8\u4ece\u4efb\u52a1\u961f\u5217\u83b7\u53d6\u4efb\u52a1\u6267\u884c\u7684\u529f\u80fd\u3002</li> <li>\u4f18\u70b9\uff1a\u51cf\u5c11\u7ebf\u7a0b\u521b\u5efa\u9500\u6bc1\u7684\u65f6\u95f4\uff0c\u63d0\u9ad8\u6548\u5e94\u901f\u5ea6</li> <li>\u7f3a\u70b9\uff1a\u5185\u5b58\u5360\u7528\u589e\u52a0</li> <li>\u4f7f\u7528\u573a\u666f\uff1a\u7ebf\u7a0b\u521b\u5efa\u9891\u7e41\u7684\uff0c\u6210\u672c\u6bd4\u8f83\u5927\u7684</li> </ul>"},{"location":"Documents/D-Technology/%E6%B1%A0%E5%8C%96%E6%8A%80%E6%9C%AF/%E7%BA%BF%E7%A8%8B%E6%B1%A0%E8%AE%BE%E8%AE%A1/#1","title":"1 \u7ebf\u7a0b\u6c60\u67b6\u6784","text":""},{"location":"Documents/D-Technology/%E6%B1%A0%E5%8C%96%E6%8A%80%E6%9C%AF/%E7%BA%BF%E7%A8%8B%E6%B1%A0%E8%AE%BE%E8%AE%A1/#2","title":"2 \u7ebf\u7a0b\u6c60\u7c7b\u8bbe\u8ba1","text":"<ol> <li>\u7ebf\u7a0b\u51fd\u6570</li> <li>\u51fd\u6570\u9700\u8981\u4e00\u76f4\u6267\u884c\uff0c\u901a\u5e38while\u5faa\u73af\u5b9e\u73b0</li> <li>\u80fd\u591f\u54cd\u5e94\u4efb\u52a1\u7684\u6267\u884c\u4fe1\u53f7\u548c\u7ebf\u7a0b\u7684\u505c\u6b62\u4fe1\u53f7\uff0c\u901a\u5e38\u901a\u8fc7\u6761\u4ef6\u53d8\u91cf\u963b\u585e\u7b49\u5f85\u6267\u884c\u4fe1\u53f7\u5230\u6765</li> <li>\u4efb\u52a1\u961f\u5217</li> <li>\u4efb\u52a1\u961f\u5217\u91cc\u7684\u51fd\u6570\u539f\u578b\u901a\u5e38\u662f<code>void()</code>\u578b\uff0c\u5373\u65e0\u8fd4\u56de\u503c\uff0c\u65e0\u53c2\u6570\uff1b</li> <li>\u4efb\u52a1\u961f\u5217\u51fd\u6570\u5b9e\u73b0\u80fd\u5bb9\u7eb3\u4efb\u52a1\u7c7b\u578b\u7684\u51fd\u6570\uff0c\u901a\u5e38\u5229\u7528lambda\u51fd\u6570\u5c06\u5916\u9762\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\u5bfc\u5165\u51fd\u6570\u5185\u90e8\u4f7f\u7528</li> </ol>"},{"location":"Documents/D-Technology/%E6%B1%A0%E5%8C%96%E6%8A%80%E6%9C%AF/%E7%BA%BF%E7%A8%8B%E6%B1%A0%E8%AE%BE%E8%AE%A1/#3","title":"3 \u7ebf\u7a0b\u6c60\u7ba1\u7406\u7c7b\u8bbe\u8ba1","text":"<ol> <li>\u63a7\u5236\u7ebf\u7a0b\u6c60\u7684\u6269\u7f29\u5bb9\uff0c\u9500\u6bc1\u529f\u80fd</li> </ol>"},{"location":"Documents/D-Technology/%E6%B1%A0%E5%8C%96%E6%8A%80%E6%9C%AF/%E7%BA%BF%E7%A8%8B%E6%B1%A0%E8%AE%BE%E8%AE%A1/#4","title":"4 \u6e90\u7801\u8bbe\u8ba1","text":"<ul> <li>\u7ebf\u7a0b\u6c60\u4ee3\u7801</li> </ul> <pre><code>#include&lt;functional&gt;\n#include&lt;type_traits&gt;\n#include&lt;memory&gt;\n#include&lt;mutex&gt;\n#include&lt;future&gt;\n#include&lt;atomic&gt;\n#include&lt;condition_variable&gt;\n#include&lt;thread&gt;\n#include&lt;queue&gt;\n#include&lt;vector&gt;\nclass ThreadPool\n{\nprivate:\nusing task = std::function&lt;void()&gt;;\nprivate:\nint m_tNum;//\u7ebf\u7a0b\u6c60\u5927\u5c0f\nint m_tunusedNum;//\u53ef\u7528\u7ebf\u7a0b\u6570\nstd::queue&lt;task&gt; m_tasks;//\u4efb\u52a1\u961f\u5217\nstd::vector&lt;std::thread&gt; m_threads;//\u7ebf\u7a0b\u5bb9\u5668\nstd::mutex m_m;\nstd::condition_variable m_cv;\nstd::atomic&lt;bool&gt; m_stop{ false };\npublic:\nThreadPool(const unsigned int&amp; sz);\n~ThreadPool();\ntemplate&lt;typename F, typename ...Args&gt;\nauto addTask(F&amp;&amp; f, Args&amp;&amp; ...args)-&gt;std::future&lt;typename std::result_of_t&lt;F(Args...)&gt;&gt;;\nprivate:\nvoid createThreadPool(const unsigned int&amp; sz);\n};\nThreadPool::ThreadPool(const unsigned int&amp; sz) :m_tNum(sz)\n{\n//\u521b\u5efa\u7ebf\u7a0b\ncreateThreadPool(sz);\n}\nThreadPool::~ThreadPool()\n{\nm_stop.store(true);\nm_cv.notify_all();\nfor (auto&amp; t : m_threads)\n{\nif (t.joinable())\nt.join();\n}\n\n}\nvoid ThreadPool::createThreadPool(const unsigned int&amp; sz)\n{\nfor (size_t i = 0; i &lt; sz; ++i)\n{\nm_threads.emplace_back([this]() {\nwhile (true)\n{\ntask t;\n{\nstd::unique_lock&lt;std::mutex&gt; lg(m_m);\n//\u6fc0\u6d3b\u6761\u4ef6\uff1a1.\u7ebf\u7a0b\u6c60\u4e0d\u518d\u4f7f\u7528\u30022.\u4efb\u52a1\u961f\u5217\u4e0d\u4e3a\u7a7a\u3002\nm_cv.wait(lg, [this]()-&gt;bool {\nreturn m_stop.load() || !m_tasks.empty();\n});\n//\u7ebf\u7a0b\u6c60\u4e0d\u518d\u4f7f\u7528\uff0c\u7ec8\u7ed3\u6b64\u7ebf\u7a0b\nif (m_stop.load())\nreturn;\n//\u4ece\u4efb\u52a1\u961f\u5217\u53d6\u51fa\u4efb\u52a1\uff0c\u5e76\u6267\u884c\nt = m_tasks.front();\nm_tasks.pop();\n}\n//\u6267\u884c\u4efb\u52a1\nt();\n}\n});\n}\n}\n\ntemplate&lt;typename F, typename ...Args&gt;\nauto ThreadPool::addTask(F&amp;&amp; f, Args&amp;&amp; ...args)-&gt;std::future&lt;typename std::result_of_t&lt;F(Args...)&gt;&gt;\n{\nusing RET_TYPE = typename std::result_of_t&lt;F(Args...)&gt;;\n//\u521b\u5efa\u667a\u80fd\u6307\u9488\u4fdd\u5b58 packaged_task\u7c7b\u578b\u5bf9\u8c61,packaged_task\u6301\u6709ET_TYPE()\u51fd\u6570\nauto sh_task = std::make_shared&lt;std::packaged_task&lt;RET_TYPE()&gt;&gt;(std::bind(std::forward&lt;F&gt;(f), std::forward&lt;Args&gt;(args)...));\n//\u5c06\u65b0\u4efb\u52a1\u653e\u5165\u4efb\u52a1\u961f\u5217\u4e2d\n{\nstd::unique_lock&lt;std::mutex&gt; lg(m_m);\n//\u5c06\u4efb\u52a1\u653e\u5165void()\u51fd\u6570\u4e2d\uff0c\u518d\u653e\u5165\u4efb\u52a1\u961f\u5217\u4e2d\nm_tasks.emplace([sh_task] {\n(*sh_task)();\n});\n}\n//\u5524\u9192\u4e00\u4e2a\u7ebf\u7a0b\nm_cv.notify_one();\nreturn sh_task-&gt;get_future();\n}\n</code></pre> <ul> <li>\u6d4b\u8bd5\u4ee3\u7801</li> </ul> <pre><code>#include&lt;iostream&gt;\nusing namespace std;\nint main() {\nThreadPool pool(5);\nvector&lt;future&lt;int&gt;&gt; res;\nfor (size_t i = 0; i &lt; 5; i++)\n{\nres.emplace_back(pool.addTask([](int j) {\nprintf(\"\u51fd\u6570%d,\u7ebf\u7a0bID %d\\n\",j,this_thread::get_id());\nreturn j*j;\n},i));\n}\nfor (auto &amp; elm:res)\n{\ncout &lt;&lt; elm.get() &lt;&lt; endl;\n}   }\n</code></pre>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/00-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","title":"\u8bbe\u8ba1\u6a21\u5f0f","text":"<ul> <li>https://www.runoob.com/design-pattern/design-pattern-tutorial.html</li> <li>MODERNES C++ patterns</li> </ul>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/00-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#1-23","title":"1 23\u79cd\u8bbe\u8ba1\u6a21\u5f0f","text":"\u5e8f\u53f7 \u6a21\u5f0f &amp; \u63cf\u8ff0 \u5305\u62ec 1 \u521b\u5efa\u578b\u6a21\u5f0f \u8fd9\u4e9b\u8bbe\u8ba1\u6a21\u5f0f\u63d0\u4f9b\u4e86\u4e00\u79cd\u5728\u521b\u5efa\u5bf9\u8c61\u7684\u540c\u65f6\u9690\u85cf\u521b\u5efa\u903b\u8f91\u7684\u65b9\u5f0f\uff0c\u800c\u4e0d\u662f\u4f7f\u7528 new \u8fd0\u7b97\u7b26\u76f4\u63a5\u5b9e\u4f8b\u5316\u5bf9\u8c61\u3002\u8fd9\u4f7f\u5f97\u7a0b\u5e8f\u5728\u5224\u65ad\u9488\u5bf9\u67d0\u4e2a\u7ed9\u5b9a\u5b9e\u4f8b\u9700\u8981\u521b\u5efa\u54ea\u4e9b\u5bf9\u8c61\u65f6\u66f4\u52a0\u7075\u6d3b\u3002 \u5de5\u5382\u6a21\u5f0f\uff08Factory Pattern\uff09 \u62bd\u8c61\u5de5\u5382\u6a21\u5f0f\uff08Abstract Factory Pattern\uff09 \u5355\u4f8b\u6a21\u5f0f\uff08Singleton Pattern\uff09 \u5efa\u9020\u8005\u6a21\u5f0f\uff08Builder Pattern\uff09 \u539f\u578b\u6a21\u5f0f\uff08Prototype Pattern\uff09 2 \u7ed3\u6784\u578b\u6a21\u5f0f \u8fd9\u4e9b\u8bbe\u8ba1\u6a21\u5f0f\u5173\u6ce8\u7c7b\u548c\u5bf9\u8c61\u7684\u7ec4\u5408\u3002\u7ee7\u627f\u7684\u6982\u5ff5\u88ab\u7528\u6765\u7ec4\u5408\u63a5\u53e3\u548c\u5b9a\u4e49\u7ec4\u5408\u5bf9\u8c61\u83b7\u5f97\u65b0\u529f\u80fd\u7684\u65b9\u5f0f\u3002 \u9002\u914d\u5668\u6a21\u5f0f\uff08Adapter Pattern\uff09 \u6865\u63a5\u6a21\u5f0f\uff08Bridge Pattern\uff09 \u8fc7\u6ee4\u5668\u6a21\u5f0f\uff08Filter\u3001Criteria Pattern\uff09 \u7ec4\u5408\u6a21\u5f0f\uff08Composite Pattern\uff09 \u88c5\u9970\u5668\u6a21\u5f0f\uff08Decorator Pattern\uff09 \u5916\u89c2\u6a21\u5f0f\uff08Facade Pattern\uff09 \u4eab\u5143\u6a21\u5f0f\uff08Flyweight Pattern\uff09 \u4ee3\u7406\u6a21\u5f0f\uff08Proxy Pattern\uff09 3 \u884c\u4e3a\u578b\u6a21\u5f0f \u8fd9\u4e9b\u8bbe\u8ba1\u6a21\u5f0f\u7279\u522b\u5173\u6ce8\u5bf9\u8c61\u4e4b\u95f4\u7684\u901a\u4fe1\u3002 \u8d23\u4efb\u94fe\u6a21\u5f0f\uff08Chain of Responsibility Pattern\uff09 \u547d\u4ee4\u6a21\u5f0f\uff08Command Pattern\uff09 \u89e3\u91ca\u5668\u6a21\u5f0f\uff08Interpreter Pattern\uff09 \u8fed\u4ee3\u5668\u6a21\u5f0f\uff08Iterator Pattern\uff09 \u4e2d\u4ecb\u8005\u6a21\u5f0f\uff08Mediator Pattern\uff09 \u5907\u5fd8\u5f55\u6a21\u5f0f\uff08Memento Pattern\uff09 \u89c2\u5bdf\u8005\u6a21\u5f0f\uff08Observer Pattern\uff09 \u72b6\u6001\u6a21\u5f0f\uff08State Pattern\uff09 \u7a7a\u5bf9\u8c61\u6a21\u5f0f\uff08Null Object Pattern\uff09 \u7b56\u7565\u6a21\u5f0f\uff08Strategy Pattern\uff09 \u6a21\u677f\u6a21\u5f0f\uff08Template Pattern\uff09 \u8bbf\u95ee\u8005\u6a21\u5f0f\uff08Visitor Pattern\uff09 4 J2EE \u6a21\u5f0f \u8fd9\u4e9b\u8bbe\u8ba1\u6a21\u5f0f\u7279\u522b\u5173\u6ce8\u8868\u793a\u5c42\u3002\u8fd9\u4e9b\u6a21\u5f0f\u662f\u7531 Sun Java Center \u9274\u5b9a\u7684\u3002 MVC \u6a21\u5f0f\uff08MVC Pattern\uff09 \u4e1a\u52a1\u4ee3\u8868\u6a21\u5f0f\uff08Business Delegate Pattern\uff09 \u7ec4\u5408\u5b9e\u4f53\u6a21\u5f0f\uff08Composite Entity Pattern\uff09 \u6570\u636e\u8bbf\u95ee\u5bf9\u8c61\u6a21\u5f0f\uff08Data Access Object Pattern\uff09 \u524d\u7aef\u63a7\u5236\u5668\u6a21\u5f0f\uff08Front Controller Pattern\uff09 \u62e6\u622a\u8fc7\u6ee4\u5668\u6a21\u5f0f\uff08Intercepting Filter Pattern\uff09 \u670d\u52a1\u5b9a\u4f4d\u5668\u6a21\u5f0f\uff08Service Locator Pattern\uff09 \u4f20\u8f93\u5bf9\u8c61\u6a21\u5f0f\uff08Transfer Object Pattern\uff09 <ul> <li>\u8bbe\u8ba1\u6a21\u5f0f\u7684\u6574\u4f53\u5173\u7cfb </li> </ul>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/00-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#2","title":"2 \u8bbe\u8ba1\u6a21\u5f0f\u7684\u516d\u5927\u539f\u5219","text":"<p>1\u3001\u5f00\u95ed\u539f\u5219\uff08Open Close Principle\uff09  \u5f00\u95ed\u539f\u5219\u7684\u610f\u601d\u662f\uff1a\u5bf9\u6269\u5c55\u5f00\u653e\uff0c\u5bf9\u4fee\u6539\u5173\u95ed\u3002\u5728\u7a0b\u5e8f\u9700\u8981\u8fdb\u884c\u62d3\u5c55\u7684\u65f6\u5019\uff0c\u4e0d\u80fd\u53bb\u4fee\u6539\u539f\u6709\u7684\u4ee3\u7801\uff0c\u5b9e\u73b0\u4e00\u4e2a\u70ed\u63d2\u62d4\u7684\u6548\u679c\u3002\u7b80\u8a00\u4e4b\uff0c\u662f\u4e3a\u4e86\u4f7f\u7a0b\u5e8f\u7684\u6269\u5c55\u6027\u597d\uff0c\u6613\u4e8e\u7ef4\u62a4\u548c\u5347\u7ea7\u3002\u60f3\u8981\u8fbe\u5230\u8fd9\u6837\u7684\u6548\u679c\uff0c\u6211\u4eec\u9700\u8981\u4f7f\u7528\u63a5\u53e3\u548c\u62bd\u8c61\u7c7b\uff0c\u540e\u9762\u7684\u5177\u4f53\u8bbe\u8ba1\u4e2d\u6211\u4eec\u4f1a\u63d0\u5230\u8fd9\u70b9\u3002</p> <p>2\u3001\u91cc\u6c0f\u4ee3\u6362\u539f\u5219\uff08Liskov Substitution Principle\uff09 \u91cc\u6c0f\u4ee3\u6362\u539f\u5219\u662f\u9762\u5411\u5bf9\u8c61\u8bbe\u8ba1\u7684\u57fa\u672c\u539f\u5219\u4e4b\u4e00\u3002 \u91cc\u6c0f\u4ee3\u6362\u539f\u5219\u4e2d\u8bf4\uff0c\u4efb\u4f55\u57fa\u7c7b\u53ef\u4ee5\u51fa\u73b0\u7684\u5730\u65b9\uff0c\u5b50\u7c7b\u4e00\u5b9a\u53ef\u4ee5\u51fa\u73b0\u3002LSP \u662f\u7ee7\u627f\u590d\u7528\u7684\u57fa\u77f3\uff0c\u53ea\u6709\u5f53\u6d3e\u751f\u7c7b\u53ef\u4ee5\u66ff\u6362\u6389\u57fa\u7c7b\uff0c\u4e14\u8f6f\u4ef6\u5355\u4f4d\u7684\u529f\u80fd\u4e0d\u53d7\u5230\u5f71\u54cd\u65f6\uff0c\u57fa\u7c7b\u624d\u80fd\u771f\u6b63\u88ab\u590d\u7528\uff0c\u800c\u6d3e\u751f\u7c7b\u4e5f\u80fd\u591f\u5728\u57fa\u7c7b\u7684\u57fa\u7840\u4e0a\u589e\u52a0\u65b0\u7684\u884c\u4e3a\u3002\u91cc\u6c0f\u4ee3\u6362\u539f\u5219\u662f\u5bf9\u5f00\u95ed\u539f\u5219\u7684\u8865\u5145\u3002\u5b9e\u73b0\u5f00\u95ed\u539f\u5219\u7684\u5173\u952e\u6b65\u9aa4\u5c31\u662f\u62bd\u8c61\u5316\uff0c\u800c\u57fa\u7c7b\u4e0e\u5b50\u7c7b\u7684\u7ee7\u627f\u5173\u7cfb\u5c31\u662f\u62bd\u8c61\u5316\u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u6240\u4ee5\u91cc\u6c0f\u4ee3\u6362\u539f\u5219\u662f\u5bf9\u5b9e\u73b0\u62bd\u8c61\u5316\u7684\u5177\u4f53\u6b65\u9aa4\u7684\u89c4\u8303\u3002</p> <p>3\u3001\u4f9d\u8d56\u5012\u8f6c\u539f\u5219\uff08Dependence Inversion Principle\uff09 \u8fd9\u4e2a\u539f\u5219\u662f\u5f00\u95ed\u539f\u5219\u7684\u57fa\u7840\uff0c\u5177\u4f53\u5185\u5bb9\uff1a\u9488\u5bf9\u63a5\u53e3\u7f16\u7a0b\uff0c\u4f9d\u8d56\u4e8e\u62bd\u8c61\u800c\u4e0d\u4f9d\u8d56\u4e8e\u5177\u4f53\u3002</p> <p>4\u3001\u63a5\u53e3\u9694\u79bb\u539f\u5219\uff08Interface Segregation Principle\uff09 \u8fd9\u4e2a\u539f\u5219\u7684\u610f\u601d\u662f\uff1a\u4f7f\u7528\u591a\u4e2a\u9694\u79bb\u7684\u63a5\u53e3\uff0c\u6bd4\u4f7f\u7528\u5355\u4e2a\u63a5\u53e3\u8981\u597d\u3002\u5b83\u8fd8\u6709\u53e6\u5916\u4e00\u4e2a\u610f\u601d\u662f\uff1a\u964d\u4f4e\u7c7b\u4e4b\u95f4\u7684\u8026\u5408\u5ea6\u3002\u7531\u6b64\u53ef\u89c1\uff0c\u5176\u5b9e\u8bbe\u8ba1\u6a21\u5f0f\u5c31\u662f\u4ece\u5927\u578b\u8f6f\u4ef6\u67b6\u6784\u51fa\u53d1\u3001\u4fbf\u4e8e\u5347\u7ea7\u548c\u7ef4\u62a4\u7684\u8f6f\u4ef6\u8bbe\u8ba1\u601d\u60f3\uff0c\u5b83\u5f3a\u8c03\u964d\u4f4e\u4f9d\u8d56\uff0c\u964d\u4f4e\u8026\u5408\u3002</p> <p>5\u3001\u8fea\u7c73\u7279\u6cd5\u5219\uff0c\u53c8\u79f0\u6700\u5c11\u77e5\u9053\u539f\u5219\uff08Demeter Principle\uff09 \u6700\u5c11\u77e5\u9053\u539f\u5219\u662f\u6307\uff1a\u4e00\u4e2a\u5b9e\u4f53\u5e94\u5f53\u5c3d\u91cf\u5c11\u5730\u4e0e\u5176\u4ed6\u5b9e\u4f53\u4e4b\u95f4\u53d1\u751f\u76f8\u4e92\u4f5c\u7528\uff0c\u4f7f\u5f97\u7cfb\u7edf\u529f\u80fd\u6a21\u5757\u76f8\u5bf9\u72ec\u7acb\u3002</p> <p>6\u3001\u5408\u6210\u590d\u7528\u539f\u5219\uff08Composite Reuse Principle\uff09 \u5408\u6210\u590d\u7528\u539f\u5219\u662f\u6307\uff1a\u5c3d\u91cf\u4f7f\u7528\u5408\u6210/\u805a\u5408\u7684\u65b9\u5f0f\uff0c\u800c\u4e0d\u662f\u4f7f\u7528\u7ee7\u627f\u3002</p>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/1-%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F%EF%BC%88Adapter%20Pattern%EF%BC%89/","title":"\u9002\u914d\u5668\u6a21\u5f0f","text":"<ul> <li>\u4f5c\u7528\uff1a\u9002\u914d\u5668\u6a21\u5f0f\uff08Adapter Pattern\uff09\u662f\u57282\u4e2a\u63a5\u53e3\u4e0d\u517c\u5bb9\u7684\u7c7b\u4e2d\u626e\u6f14\u7740\u6865\u6881\u7684\u89d2\u8272\uff0c\u9002\u914d\u63a5\u53e3\uff0c\u8ba9\u5176\u4e2d\u4e00\u4e2a\u7c7b\u80fd\u591f\u901a\u8fc7\u9002\u914d\u5668\u7c7b\u8bbf\u95ee\u53e6\u4e00\u4e2a\u7c7b </li> </ul>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2-%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F%EF%BC%88Bridge%20Pattern%EF%BC%89/","title":"\u6865\u63a5\u6a21\u5f0f","text":"<ul> <li>\u4f5c\u7528\uff1a\u6865\u63a5\uff08Bridge Pattern\uff09\u662f\u7528\u4e8e\u628a\u62bd\u8c61\u5316\u4e0e\u5b9e\u73b0\u5316\u89e3\u8026\uff0c\u4f7f\u5f97\u4e8c\u8005\u53ef\u4ee5\u72ec\u7acb\u53d8\u5316</li> </ul> <pre><code>\u201c\u5b9e\u73b0\u201d\u7279\u522b\u662f\u548c\u201c\u62bd\u8c61\u201d \u653e\u5728\u4e00\u8d77\u7684\u65f6\u5019\u6211\u4eec\u201c\u9ed8\u8ba4\u201d \u7684\u7406\u89e3\u662f\u201c\u5b9e\u73b0\u201d \u5c31\u662f\u201c\u62bd\u8c61\u201d \u7684\u5177\u4f53\u5b50\u7c7b\u7684\u5b9e\u73b0\uff0c\u4f46\u662f\u8fd9\u91cc\u6240\u8c13\u7684\u201c\u5b9e\u73b0\u201d\u7684\u542b\u4e49\u4e0d\u662f\u6307\u62bd\u8c61\u57fa\u7c7b\u7684\u5177\u4f53\u5b50\u7c7b\u5bf9\u62bd\u8c61\u57fa\u7c7b\u4e2d\u865a\u51fd\u6570\uff08\u63a5\u53e3\uff09 \u7684\u5b9e\u73b0\uff0c \u662f\u548c\u7ee7\u627f\u7ed3\u5408\u5728\u4e00\u8d77\u7684\u3002 \u800c\u8fd9\u91cc\u7684\u201c\u5b9e\u73b0\u201d \u7684\u542b\u4e49\u6307\u7684\u662f\u600e\u4e48\u53bb\u5b9e\u73b0\u7528\u6237\u7684\u9700\u6c42\uff0c\u5e76\u4e14\u6307\u7684\u662f\u901a\u8fc7&lt;font color=#FF0211&gt;\u7ec4\u5408&lt;/font&gt;\uff08\u59d4\u6258\uff09 \u7684\u65b9\u5f0f\u5b9e\u73b0\u7684\uff0c \u56e0\u6b64\u8fd9\u91cc\u7684\u5b9e\u73b0\u4e0d\u662f\u6307\u7684\u7ee7\u627f\u57fa\u7c7b\u3001\u5b9e\u73b0\u57fa\u7c7b\u63a5\u53e3\uff0c\u800c\u662f\u6307\u7684\u662f\u901a\u8fc7\u5bf9\u8c61\u7ec4\u5408\u5b9e\u73b0\u7528\u6237\u7684\u9700\u6c42\u3002\n</code></pre>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/3-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%EF%BC%88Proxy%20Pattern%EF%BC%89/","title":"\u4ee3\u7406\u6a21\u5f0f","text":"<pre><code>\u667a\u80fd\u6307\u9488\u6a21\u62df C++ \u4e2d\u7684\u4ee3\u7406\u6a21\u5f0f\u3002\u6b64\u5916\uff0cRAII Idiom \u662f\u4ee3\u7406\u6a21\u5f0f\u7684 C++ \u6539\u7f16\u7248\u3002\n</code></pre> <p>The Proxy Pattern is probably the most influential design pattern for C++. The Proxy provides a placeholder for accessing another object. </p> <p>The proxy pattern is one of the seven structural patterns from the book \"Design Patterns: Elements of Reusable Object-Oriented Software\". A proxy controls access to another object, allowing you to perform additional operations before or after you access the original object. Sound familiar? Which idiom is characteristic of C++? Right: RAII (Resource Acquisition Is Initialization). RAII is the C++ way to implement the Proxy Pattern. Here are the facts about the Proxy Pattern.</p>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/3-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%EF%BC%88Proxy%20Pattern%EF%BC%89/#1-proxy-pattern","title":"1 Proxy Pattern","text":""},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/3-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%EF%BC%88Proxy%20Pattern%EF%BC%89/#11-purpose","title":"1.1 Purpose","text":"<ul> <li>Provides a placeholder for accessing another object.</li> </ul>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/3-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%EF%BC%88Proxy%20Pattern%EF%BC%89/#12-also-known-as","title":"1.2 Also Known As","text":"<ul> <li>Surrogate</li> </ul>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/3-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%EF%BC%88Proxy%20Pattern%EF%BC%89/#13-use-case","title":"1.3 Use Case","text":"<ul> <li>Control access to another object</li> <li>Remote proxy (acts as an intermediary for a remote service)</li> <li>Virtual proxy (creates an object lazily on request)</li> <li>Security proxy (adds security to a request)</li> <li>Caching proxy (delivers cached requests)</li> </ul>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/3-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%EF%BC%88Proxy%20Pattern%EF%BC%89/#14-structure","title":"1.4 Structure","text":"<p> <code>Proxy</code> - Controls the access and lifetime of the <code>RealSubject</code> - Supports the same interface as <code>RealSubject</code> <code>Subject</code> - Defines the interface of the <code>Proxy</code> and the <code>RealSubject</code> <code>RealSubject</code> - Implements the interface</p>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/3-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%EF%BC%88Proxy%20Pattern%EF%BC%89/#15-example","title":"1.5 Example","text":"<p>The following examples use two generic proxies: <code>std::unique_ptr</code> and <code>std::shared_ptr</code>.</p> <pre><code>// proxy.cpp\n#include &lt;iostream&gt;\n#include &lt;memory&gt;\nclass MyInt{\n public:\n    MyInt(int i):i_(i){}\n    int getValue() const {\n        return i_;\n    }\n private:\n    int i_;\n};\nint main(){\n    std::cout &lt;&lt; '\\n';\n    MyInt* myInt = new MyInt(1998);                     // (3)\n    std::cout &lt;&lt; \"myInt-&gt;getValue(): \" &lt;&lt; myInt-&gt;getValue() &lt;&lt; '\\n';\n    std::unique_ptr&lt;MyInt&gt; uniquePtr{new MyInt(1998)};  // (1)\n    std::cout &lt;&lt; \"uniquePtr-&gt;getValue(): \" &lt;&lt; uniquePtr-&gt;getValue() &lt;&lt; '\\n';\n    std::shared_ptr&lt;MyInt&gt; sharedPtr{new MyInt(1998)};  // (2)\n    std::cout &lt;&lt; \"sharedPtr-&gt;getValue(): \" &lt;&lt; sharedPtr-&gt;getValue() &lt;&lt; '\\n';\n    std::cout &lt;&lt; '\\n';\n}\n</code></pre> <p>Both smart pointers can transparently access the member function<code>getValue</code> of <code>MyInt</code>. It makes no difference if you call the member function <code>getValue</code> on the <code>std::unique_ptr</code>, (line 1) on the<code>std::shared_ptr</code>, (line 2), or on the object directly. All calls return the same value:  </p>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/3-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%EF%BC%88Proxy%20Pattern%EF%BC%89/#16-known-uses","title":"1.6 Known Uses","text":"<p>The smart pointers model the Proxy Pattern in C++. Additionally, the RAII Idiom is the C++ adaption of the Proxy Pattern. RAII is the crucial idiom in C++. I will write more about it in a few lines.</p>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/3-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%EF%BC%88Proxy%20Pattern%EF%BC%89/#17-related-patterns","title":"1.7 Related Patterns","text":"<ul> <li>TheAdaptor Pattern adjusts an existing interface, but the Facade creates a new simplified interface.</li> <li>TheDecorator Pattern is structurally similar to the Proxy, but the Decorator has a different purpose. A Decorator extends an object with additional responsibilities. A Proxy controls access to an object.</li> <li>The Facade Pattern is similar to the Proxy because it encapsulates access to an object. The Facade does not support the same interface as the Proxy but supports a simplified one.</li> </ul>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/3-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%EF%BC%88Proxy%20Pattern%EF%BC%89/#18-pros-and-cons","title":"1.8 Pros and Cons","text":""},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/3-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%EF%BC%88Proxy%20Pattern%EF%BC%89/#181-pros","title":"1.8.1 Pros","text":"<ul> <li>The underlying object is fully transparent to the client.</li> <li>The proxy can answer requests directly without using the client</li> <li>The proxy can be transparently extended or replaced with another proxy.</li> </ul>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/3-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%EF%BC%88Proxy%20Pattern%EF%BC%89/#182-cons","title":"1.8.2 Cons","text":"<ul> <li>The separation of the proxy and the object makes the code more difficult</li> <li>The forwarded proxy calls may be performance critical</li> </ul>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/3-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%EF%BC%88Proxy%20Pattern%EF%BC%89/#2-raii-idiom","title":"2 RAII Idiom","text":"<p>RAII stands for Resource Acquisition Is Initialization. The most crucial idiom in C++ is that a resource should be acquired in the constructor and released in the object's destructor. The key idea is that the destructor will automatically be called if the object goes out of scope. Or, to put it differently: A resource's lifetime is bound to a local variable's lifetime, and C++ automatically manages the lifetime of locals. There is one big difference between the Proxy Pattern and the RAII Idiom in C++. In the classical Proxy Pattern, the Proxy and the RealObject (object) implement the same interface. Therefore, you invoke a member function on the proxy, and this call is delegated to the object. On the contrary, it is typical for RAII to do the operation on the object implicitly. The following example shows the deterministic behavior of RAII in C++.</p> <pre><code>// raii.cpp\n#include &lt;iostream&gt;\n#include &lt;new&gt;\n#include &lt;string&gt;\nclass ResourceGuard{\n  private:\n    const std::string resource;\n  public:\n    ResourceGuard(const std::string&amp; res):resource(res){\n      std::cout &lt;&lt; \"Acquire the \" &lt;&lt; resource &lt;&lt; \".\" &lt;&lt;  '\\n';\n    }\n    ~ResourceGuard(){\n      std::cout &lt;&lt; \"Release the \"&lt;&lt; resource &lt;&lt; \".\" &lt;&lt; '\\n';\n    }\n};\nint main() {\n  std::cout &lt;&lt; '\\n';\n  ResourceGuard resGuard1{\"memoryBlock1\"};              // (1)\n  std::cout &lt;&lt; \"\\nBefore local scope\" &lt;&lt; '\\n';\n  {\n    ResourceGuard resGuard2{\"memoryBlock2\"};            // (3)\n  }                                                     // (4)\n  std::cout &lt;&lt; \"After local scope\" &lt;&lt; '\\n';\n\n  std::cout &lt;&lt; '\\n';\n  std::cout &lt;&lt; \"\\nBefore try-catch block\" &lt;&lt; '\\n';\n  try{\n      ResourceGuard resGuard3{\"memoryBlock3\"};\n      throw std::bad_alloc();                          // (5)\n  }   \n  catch (std::bad_alloc&amp; e){                           // (6)\n      std::cout &lt;&lt; e.what();\n  }\n  std::cout &lt;&lt; \"\\nAfter try-catch block\" &lt;&lt; '\\n';\n\n  std::cout &lt;&lt; '\\n';\n}                                                     // (2)\n</code></pre> <p>ResourceGuard is a guard that manages its resource. In this case, the string stands for the resource. ResourceGuard creates in its constructor the resource and releases the resource in its destructor. It does its job very decent. The destructor of resGuard1 (line 1) is called at the end of the main function (line 2). The lifetime of resGuard2 (line 3) already ends in line 4. Therefore, the destructor is automatically executed. Even the throwing of an exception does not affect the reliability of resGuard3 (line 5). The destructor is called at the end of the try block (line 6). The screenshot shows the lifetimes of the objects.  It's pretty easy to apply the RAII Idiom to make out the <code>ResourceGuard</code> a <code>LockGuard</code>:</p> <pre><code>class LockGuard{\n  private:\n    static inline std::mutex m;\n  public:\n    LockGuard() {\n        m.lock();\n    }\n    ~LockGuard() {\n        m.unlock();\n    }\n};\n</code></pre> <p>All instances of <code>LockGuard</code> share the same mutex <code>m</code>. When an instance goes out of scope, it automatically unlocks its mutex <code>m</code>. I wrote that the RAII Idiom is the most crucial idiom in C++. Let me name a few prominent examples.</p>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/3-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%EF%BC%88Proxy%20Pattern%EF%BC%89/#21-applications-of-raii","title":"2.1 Applications of RAII","text":"<ul> <li>Containers of the STL, including<code>std::string</code>: they automatically allocate in the constructor and deallocate in their destructor</li> <li>Smart Pointers: <code>std::unqiue_ptr</code> and<code>std::shared_ptr</code> take ownership of the underlying raw pointer; they delete the underlying raw pointer if it is not needed anymore.</li> <li>Locks: <code>std::lock_guard</code>, <code>std::unique_lock</code>, <code>std::shared_lock</code>, and <code>std::scoped_lock</code>lock in their constructor the underlying mutex and unlock it in their destructor automatically</li> <li><code>**std::jthread**</code>: <code>std::jthread</code> in C++20 is an improved <code>std::thread</code> from C++11;<code>std::jthread</code> automatically joins in its destructor if necessary</li> </ul>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/4-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%EF%BC%88Observer%20Pattern%EF%BC%89/","title":"\u89c2\u5bdf\u8005\u6a21\u5f0f","text":"<ul> <li>\u4ee5\u4e0b\u5185\u5bb9\u6765\u6e90</li> </ul> <p>The Observer Pattern solves a classical design issue: How can you ensure that all prospects are automatically notified if an important event has taken place?</p>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/4-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%EF%BC%88Observer%20Pattern%EF%BC%89/#1-the-observer-pattern","title":"1 The Observer Pattern","text":""},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/4-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%EF%BC%88Observer%20Pattern%EF%BC%89/#11-purpose","title":"1.1 Purpose","text":"<ul> <li>Defines 1-to-n dependencies between objects so that changes to one object cause all dependent objects to be notified.</li> </ul>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/4-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%EF%BC%88Observer%20Pattern%EF%BC%89/#12-also-known-as","title":"1.2 Also known as","text":"<ul> <li>Publisher-Subscriber (short Pub/Sub)</li> </ul>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/4-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%EF%BC%88Observer%20Pattern%EF%BC%89/#13-use-case","title":"1.3 Use Case","text":"<ul> <li>One abstraction depends on the state of another abstraction</li> <li>A change to one object implies a change to another object</li> <li>Objects should be notified of state changes of another object without being tightly coupled</li> </ul>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/4-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%EF%BC%88Observer%20Pattern%EF%BC%89/#14-structure","title":"1.4 Structure","text":"<p><code>Subject</code></p> <ul> <li>Manages its collection of observers</li> <li>Allows the observers to register and unregister themself``</li> </ul> <p><code>Observer</code></p> <ul> <li><code>**Defines an interface to notify the observers   **</code></li> </ul> <p><code>ConcreteObserver</code></p> <ul> <li>Implements the interface</li> <li>Is notified by the<code>Subject</code></li> </ul>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/4-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%EF%BC%88Observer%20Pattern%EF%BC%89/#15-example","title":"1.5 Example","text":"<p>The following program <code>observer.cpp</code> directly implements the previous class diagram.</p> <pre><code>// observer.cpp\n\n#include &lt;iostream&gt;\n#include &lt;list&gt;\n#include &lt;string&gt;\n\nclass Observer {\n public:\n  virtual ~Observer(){};\n  virtual void notify() const = 0;\n};\n\nclass Subject {\n public:\n  void registerObserver(Observer* observer) {\n    observers.push_back(observer);\n  }\n  void unregisterObserver(Observer* observer) {\n    observers.remove(observer);\n  }\n  void notifyObservers() const {                             // (2)\n    for (auto observer: observers) observer-&gt;notify();\n  }\n\n private:\n  std::list&lt;Observer *&gt; observers;\n};\n\nclass ConcreteObserverA : public Observer {\n public:\n    ConcreteObserverA(Subject&amp; subject) : subject_(subject) {\n        subject_.registerObserver(this);\n    }\n    void notify() const override {\n        std::cout &lt;&lt; \"ConcreteObserverA::notify\\n\";\n    }\n private: \n    Subject&amp; subject_;                                    // (3)\n};\n\nclass ConcreteObserverB : public Observer {\n public:\n    ConcreteObserverB(Subject&amp; subject) : subject_(subject) {\n        subject_.registerObserver(this);\n    }\n    void notify() const override {\n        std::cout &lt;&lt; \"ConcreteObserverB::notify\\n\";\n    }\n private: \n    Subject&amp; subject_;                                   // (4)\n};\n\n\nint main() {\n\n    std::cout &lt;&lt; '\\n';    Subject subject;   \n    ConcreteObserverA observerA(subject);\n    ConcreteObserverB observerB(subject);\n\n    subject.notifyObservers();\n    std::cout &lt;&lt;  \"    subject.unregisterObserver(observerA)\\n\";\n    subject.unregisterObserver(&amp;observerA);         // (1)\n    subject.notifyObservers();    std::cout &lt;&lt; '\\n';\n\n}\n</code></pre> <p>The <code>Observer</code> supports the member function <code>notify</code>, and the <code>Subject</code> supports the member functions <code>registerObserver</code>, <code>unregisterObserver</code>, and <code>notifyObservers</code>. The concrete observers receive the subject in their constructor and use them to register themself for the notification. They have a reference to the subject (lines 3 and 4). Only <code>observerA</code> is unregistered in line (1). The member function <code>notifyObservers</code> goes through all registered observers and notifies them (line 2).</p> <p>The following screenshot shows the output of the program:</p> <p></p> <p>By the way, you may have noticed that I used no memory allocation in the previous program <code>observer.cpp</code>. This is how virtuality is typically used if you aren't allowed to allocate memory, such as in deeply embedded systems. Here is the corresponding main function using memory allocation:</p> <pre><code>int main() {    std::cout &lt;&lt; '\\n';\n\n    Subject* subject = new Subject;\n    Observer* observerA = new ConcreteObserverA(*subject);\n    Observer* observerB = new ConcreteObserverB(*subject);\n\n    subject-&gt;notifyObservers();\n    std::cout &lt;&lt;  \"    subject-&gt;unregisterObserver(observerA)\" &lt;&lt; \"\\n\";\n    subject-&gt;unregisterObserver(observerA);\n    subject-&gt;notifyObservers();\n\n    delete observerA;\n    delete observerB;\n\n    delete subject;    std::cout &lt;&lt; '\\n';\n\n}\n</code></pre>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/4-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%EF%BC%88Observer%20Pattern%EF%BC%89/#16-know-uses","title":"1.6 Know Uses","text":"<p>The Observer Patten is often used in architectural patterns such as Model-View-Controller (MVC) for graphical user interfaces or Reactor for event handling.</p> <ul> <li>Model-View-Controller: The model represents the data and its logic. The model notifies its dependent component, such as the views. The views are responsible for representing the data, and the controller is for the user input.</li> <li>Reactor: The Reactor registers the event handlers. The synchronous event demultiplexer (<code>select</code>) notifies the handles if an event occurs.</li> </ul> <p>I will dedicate an entire future post to both architectural patterns.</p>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/4-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%EF%BC%88Observer%20Pattern%EF%BC%89/#17-variations","title":"1.7 Variations","text":"<p>The <code>Subject</code> in the program <code>observer.cpp</code> simply sends a notification. However, more advanced workflows are often implemented:</p> <p>The <code>Subject</code> sends a</p> <ul> <li>value.</li> <li>notification that a value is available. Afterward, the Observer has to pick it up.</li> <li>notification, including an indication of which value is available. The Observer picks it up if necessary.</li> </ul>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/4-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%EF%BC%88Observer%20Pattern%EF%BC%89/#18-related-patterns","title":"1.8 Related Patterns","text":"<ul> <li>TheMediator Patternestablishes communication between the sender and the receiver. Each communication between the two endpoints goes, therefore, through the mediator. The Mediator and the Observer are pretty similar. The goal of the mediator is to decouple the sender and the receiver. On the contrary, the Observer established a one-way communication between the publisher and the subscriber.</li> </ul>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/4-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%EF%BC%88Observer%20Pattern%EF%BC%89/#19-pros-and-cons","title":"1.9 Pros and Cons","text":""},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/4-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%EF%BC%88Observer%20Pattern%EF%BC%89/#191-pros","title":"1.9.1 Pros","text":"<ul> <li>New observers (subscribes) can easily be added to the publisher</li> <li>Observers can register and unregister themself at run time</li> </ul>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/4-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%EF%BC%88Observer%20Pattern%EF%BC%89/#192-cons","title":"1.9.2 Cons","text":"<ul> <li>Neither does the publisher provides a guarantee in which order the subscribers are notified, nor does it gives the assertion of how long the notification takes when you have many subscribers.</li> <li>The publisher may send a notification, but a subscriber is not alive anymore. To avoid this drawback, you can implement the destructor of the concrete observers in such a way that the concrete observers unregister themself in its destructor:</li> </ul> <pre><code>class ConcreteObserverA : public Observer {\n public:\n    ConcreteObserverA(Subject&amp; subject) : subject_(subject) {\n        subject_.registerObserver(this);\n    }\n    ~ConcreteObserverA() noexcept {\n        subject_.unregisterObserver(this);\n    }\n    void notify() const override {\n        std::cout &lt;&lt; \"ConcreteObserverA::notify\\n\";\n    }\n private: \n    Subject&amp; subject_;\n};\n</code></pre> <p>The concrete observer <code>ConcreteObserverA</code> models the RAII Idiom: It registers itself in its constructor and unregisters itself in its destructor.</p>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/5-%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F%EF%BC%88Decorator%20Pattern%EF%BC%89/","title":"\u88c5\u9970\u5668\u6a21\u5f0f","text":"<p>\u529f\u80fd\uff1a\u88c5\u9970\u5668\u6a21\u5f0f\uff08Decorator Pattern\uff09\u5141\u8bb8\u52a8\u6001\u6269\u5c55\uff08\u6dfb\u52a0\u6216\u79fb\u9664\uff09\u5bf9\u8c61\u65b0\u7684\u529f\u80fd\uff0c\u540c\u65f6\u53c8\u4e0d\u6539\u53d8\u5176\u7ed3\u6784\u3002 </p> <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>// decoratorFrame.cpp (based on https://en.wikipedia.org/wiki/Decorator_pattern)\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nstruct Shape{\nvirtual std::string str() const = 0;\n};\n\nclass Circle : public Shape{\nfloat radius = 10.0f;\n\npublic:\nstd::string str() const override{\nreturn std::string(\"A circle of radius \") + std::to_string(radius);\n}\n};\n\nclass ColoredShape : public Shape{\nstd::string color;\nShape&amp; shape;\npublic:\nColoredShape(std::string c, Shape&amp; s): color{c}, shape{s} {}\nstd::string str() const override{\nreturn shape.str() + std::string(\" which is coloured \") + color;\n}\n};\n\nclass FramedShape : public Shape{\nShape&amp; shape;\npublic:\nFramedShape(Shape&amp; s): shape{s} {}\nstd::string str() const override{\nreturn shape.str() + std::string(\" and has a frame\");\n}\n};\n\nint main(){\n\nCircle circle;\nColoredShape coloredShape(\"red\", circle);    // (1)\nFramedShape framedShape1(circle);            // (2)\nFramedShape framedShape2(coloredShape);      // (3)\n\nstd::cout &lt;&lt; circle.str() &lt;&lt; '\\n';\nstd::cout &lt;&lt; coloredShape.str() &lt;&lt; '\\n';\nstd::cout &lt;&lt; framedShape1.str() &lt;&lt; '\\n';\nstd::cout &lt;&lt; framedShape2.str() &lt;&lt; '\\n';\n\n}\n</code></pre> <ul> <li>\u53ef\u80fd\u7684\u8f93\u51fa</li> </ul> <pre><code>A circle of radius 10.000000\nA circle of radius 10.000000 which is coloured red\nA circle of radius 10.000000 and has a frame\nA circle of radius 10.000000 which is coloured red and has a frame\n</code></pre>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/5-%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F%EF%BC%88Decorator%20Pattern%EF%BC%89/#1","title":"1 \u88c5\u9970\u5668\u6a21\u5f0f\u548c\u7ec4\u5408\u6a21\u5f0f\u6bd4\u8f83","text":"<ul> <li>\u88c5\u9970\u5668\u6a21\u5f0f\u548c\u7ec4\u5408\u6a21\u5f0f\u5f88\u76f8\u4f3c\uff0c\u4f46\u529f\u80fd\u4fa7\u91cd\u70b9\u4e0d\u540c\uff0c\u88c5\u9970\u5668\u662f\u4e3a\u4e86\u7ed9\u5bf9\u8c61\u6269\u5c55\u4e00\u4e2a\u529f\u80fd\uff0c\u800c\u7ec4\u5408\u6a21\u5f0f\u662f\u4e3a\u4e86\u6784\u6210\u6811\u5f62\u7ed3\u6784\u3002</li> <li>\u88c5\u9970\u5668\u6a21\u5f0f\u6709\u4e00\u4e2a 1 \u5bf9 1 \u7684\u5173\u7cfb\uff0c\u800c\u7ec4\u5408\u6a21\u5f0f\u6709\u4e00\u4e2a 1 \u5bf9 n \u7684\u5173\u7cfb\u3002\u8fd9\u6837\u5c31\u4f7f\u7ec4\u5408\u6a21\u5f0f\u53ef\u4ee5\u5f62\u6210\u6811\u5f62\u7ed3\u6784\uff0c\u800c\u88c5\u9970\u5668\u53ea\u80fd\u662f\u94fe\u5f0f\u7ed3\u6784\u3002</li> </ul>"},{"location":"Documents/D-Technology/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/6-%20%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F%EF%BC%88Composite%20Pattern%EF%BC%89/","title":"\u7ec4\u5408\u6a21\u5f0f","text":"<p>\u7ec4\u5408\u6a21\u5f0f\uff08Composite Pattern\uff09\uff0c\u4f9d\u636e\u6811\u5f62\u7ed3\u6784\u6765\u7ec4\u5408\u5bf9\u8c61\uff0c\u7528\u6765\u8868\u793a\u90e8\u5206\u4ee5\u53ca\u6574\u4f53\u5c42\u6b21\u3002\u5b83\u521b\u5efa\u4e86\u5bf9\u8c61\u7ec4\u7684\u6811\u5f62\u7ed3\u6784\u3002  - Component \u662f\u62bd\u8c61\u7c7b\uff0cComposite \u548c Leaf \u7ee7\u627f\u81ea Component\u3002 - Composite \u4f5c\u4e3a\u6811\u7684\u975e\u53f6\u5b50\u8282\u70b9\uff0c\u5185\u90e8\u4ee5 1 \u5bf9 n \uff08\u5bb9\u5668\uff09\u7684\u7ec4\u5408\u65b9\u5f0f\u5305\u542b\u4e86\u5176\u4ed6\u6811\u8282\u70b9\uff08\u53ef\u4ee5\u662f Leaf\u3001Composite\uff09\u3002\uff08\u7528\u4e8e\u9012\u5f52\u7ec4\u5408\u6570\u7ed3\u6784\uff09 - Leaf \u4f5c\u4e3a\u6811\u7684\u53f6\u5b50\u8282\u70b9\u3002\uff08\u7528\u4e8e\u6811\u7ec8\u7ed3\u9012\u5f52\uff09 - \u793a\u4f8b\u4ee3\u7801\uff1a\u4ee5\u4e0b\u793a\u4f8b\u53ef\u4ee5\u8c03\u7528 <code>print()</code> \u4e00\u4e2a\u63a5\u53e3\uff0c\u6253\u5370\u5176\u6240\u6709\u5b50\u6811\u4fe1\u606f\u3002</p> <pre><code>// composite.cpp\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nclass Graphic {\npublic:\nvirtual void print() const = 0;\nvirtual ~Graphic() {} };\n\nclass GraphicComposite : public Graphic {\nstd::vector&lt;const Graphic*&gt; children;                          // (1)\nconst std::string&amp; name;\npublic:\nexplicit GraphicComposite(const std::string&amp; n): name(n){}\nvoid print() const override {                                  // (5)\nstd::cout &lt;&lt; name &lt;&lt; \" \";\nfor (auto c: children) c-&gt;print();\n}\n\nvoid add(const Graphic* component) {                           // (2)\nchildren.push_back(component);\n}\n\nvoid remove(const Graphic* component) {                        // (3)\nstd::erase(children, component);\n}\n};\n\nclass Ellipse: public Graphic {\nprivate:\nconst std::string&amp; name;\npublic:\nexplicit Ellipse(const std::string&amp; n): name (n) {}\nvoid print() const override {                                 // (4)\nstd::cout &lt;&lt; name &lt;&lt; \" \";\n}\n};\n\nint main(){\n\nstd::cout &lt;&lt; '\\n';\n\nconst std::string el1 = \"ellipse1\";\nconst std::string el2 = \"ellipse2\";\nconst std::string el3 = \"ellipse3\";\nconst std::string el4 = \"ellipse4\";\n\nEllipse ellipse1(el1);\nEllipse ellipse2(el2);\nEllipse ellipse3(el3);\nEllipse ellipse4(el4);\n\nconst std::string graph1 = \"graphic1\";\nconst std::string graph2 = \"graphic2\";\nconst std::string graph3 = \"graphic3\";\n\nGraphicComposite graphic1(graph1);\nGraphicComposite graphic2(graph2);\nGraphicComposite graphic(graph3);\n\ngraphic1.add(&amp;ellipse1);\ngraphic1.add(&amp;ellipse2);\ngraphic1.add(&amp;ellipse3);\n\ngraphic2.add(&amp;ellipse4);\n\ngraphic.add(&amp;graphic1);\ngraphic.add(&amp;graphic2);\n\ngraphic1.print();\nstd::cout &lt;&lt; '\\n';\n\ngraphic2.print();\nstd::cout &lt;&lt; '\\n';\n\ngraphic.print();                                       // (6)\n\nstd::cout &lt;&lt; '\\n';\n\ngraphic.remove(&amp;graphic1);\ngraphic.print();                                       // (7)\n\nstd::cout &lt;&lt; \"\\n\\n\";\n\n}\n</code></pre> <ul> <li>\u53ef\u80fd\u7684\u8f93\u51fa</li> </ul> <pre><code>graphic1 ellipse1 ellipse2 ellipse3 \ngraphic2 ellipse4 \ngraphic3 graphic1 ellipse1 ellipse2 ellipse3 graphic2 ellipse4 \ngraphic3 graphic2 ellipse4 </code></pre>"},{"location":"Documents/D-Technology/%E9%94%81/CAS/","title":"CAS","text":"<ul> <li>CAS\uff08Compare and swap\uff09\uff0c\u662f\u4e00\u79cd\u901a\u8fc7\u786c\u4ef6\u5b9e\u73b0\u5e76\u53d1\u5b89\u5168\u7684\u5e38\u7528\u6280\u672f\uff0c\u5e95\u5c42\u901a\u8fc7\u5229\u7528 CPU \u7684 CAS \u6307\u4ee4\u5bf9\u7f13\u5b58\u52a0\u9501\u6216\u603b\u7ebf\u52a0\u9501\u7684\u65b9\u5f0f\u6765\u5b9e\u73b0\u591a\u5904\u7406\u5668\u4e4b\u95f4\u7684\u539f\u5b50\u64cd\u4f5c\u3002\u6700\u7ec8\u7684\u6c47\u7f16\u6307\u4ee4\u4e2d\u6709 lock cmpxchg \u6307\u4ee4</li> </ul> <pre><code>CAS \u8fd8\u662f\u4f1a\u4f7f\u7528\u9501\u673a\u5236\uff0c\u56e0\u6b64\u5176\u5b83\u57fa\u4e8eCAS\u5b9e\u73b0\u7684\u65e0\u9501\u961f\u5217\u7b49\u5e76\u4e0d\u662f\u771f\u6b63\u610f\u4e49\u4e0a\u7684\u65e0\u9501\n</code></pre> <pre><code>title: CAS\u7684\u5b9e\u73b0\u601d\u8def\uff1f\nCAS\u7684\u601d\u60f3\u6bd4\u8f83\u7b80\u5355\uff0c\u4e3b\u8981\u6d89\u53ca\u5230\u4e09\u4e2a\u503c\uff1a**\u5f53\u524d\u5185\u5b58\u503cV**\u3001**\u9884\u671f\u503c(\u65e7\u7684\u5185\u5b58\u503c)O**\u3001**\u5373\u5c06\u66f4\u65b0\u7684\u5185\u5b58\u503cU**,\u5f53\u4e14\u4ec5**\u5f53\u9884\u671f\u503cO\u4e0e\u5f53\u524d\u5185\u5b58\u503cV\u76f8\u7b49\u65f6\uff0c\u5c06\u5185\u5b58\u503cV\u4fee\u6539\u4e3a\u66f4\u65b0\u503cU**\uff0c\u5e76\u8fd4\u56detrue\uff0c\u5426\u5219\u8fd4\u56defalse\u3002\n</code></pre> <pre><code>title: CAS\u4f7f\u7528\u573a\u666f\uff1f\nCAS\u4e3b\u8981\u4f7f\u7528\u5728\u4e00\u4e9b\u9700\u8981\u4e0a\u9501\u7684\u573a\u666f\u5145\u5f53**\u4e50\u89c2\u9501\u89e3\u51b3\u65b9\u6848**\uff0c\u4e00\u822c\u5728\u4e00\u4e9b\u7b80\u5355\u4e14\u8981\u4e0a\u9501\u7684\u64cd\u4f5c\u4f46\u53c8\u4e0d\u60f3\u5f15\u5165\u9501\u573a\u666f\uff0c\u8fd9\u65f6\u5019\u6765\u4f7f\u7528CAS\u4ee3\u66ff\u9501\u3002\n</code></pre> <pre><code>title: CAS\u5f15\u51fa\u7684\u95ee\u9898\uff1f\nABA\u95ee\u9898\u3001\u81ea\u65cb\u5e26\u6765\u7684\u6d88\u8017\u3001CAS\u53ea\u80fd\u5355\u53d8\u91cf\n</code></pre> <pre><code>title: ABA \u95ee\u9898\u662f\u4ec0\u4e48?\u600e\u4e48\u89e3\u51b3\uff1f\n- ABA \u95ee\u9898\u662f\u6307\u6709\u4e00\u4e2a\u7ebf\u7a0b t1 \u5728\u8fdb\u884c CAS \u64cd\u4f5c\u65f6\uff0c\u5176\u4ed6\u7ebf\u7a0b t2 \u5c06\u53d8\u91cf A \u6539\u6210\u4e86 B\uff0c\u7136\u540e\u53c8\u5c06\u5176\u6539\u6210 A\uff0c\u8fd9\u65f6\u5019 t1 \u53d1\u73b0 A \u5e76\u6ca1\u6709\u6539\u53d8\uff0c\u56e0\u6b64\u8fdb\u884c\u4e86\u4ea4\u6362\u64cd\u4f5c\uff0c\u7531\u4e8e\u5728\u4ea4\u6362\u64cd\u4f5c\u8fdb\u884c\u524d\u53d8\u91cf A \u5176\u5b9e\u662f\u6709\u53d8\u5316\u7684\uff0c\u53ea\u4e0d\u8fc7\u6700\u7ec8\u53c8\u4fee\u6539\u56de A \u4e86\uff0c\u6b64 A \u975e\u5f7c A\uff0c\u8fd9\u65f6\u5019\u8fdb\u884c\u4ea4\u6362\u64cd\u4f5c\u5728\u4e00\u4e9b\u4e1a\u52a1\u573a\u666f\u4e0b\u5f88\u53ef\u80fd\u8981\u51fa\u95ee\u9898\uff0c\u8981\u89e3\u51b3 ABA \u95ee\u9898\u6709 2 \u79cd\u65b9\u6848\u3002\n- \u89e3\u51b3\u65b9\u6cd5\uff1a\u5728\u5bf9\u53d8\u91cf\u8fdb\u884c\u64cd\u4f5c\u7684\u65f6\u5019\u7ed9\u53d8\u91cf\u52a0\u4e00\u4e2a\u7248\u672c\u53f7\uff0c\u6bcf\u6b21\u5bf9\u53d8\u91cf\u64cd\u4f5c\u90fd\u5c06\u7248\u672c\u53f7\u52a0 1\uff0c\u5e38\u89c1\u5728\u6570\u636e\u5e93\u7684\u4e50\u89c2\u9501\u4e2d\u53ef\u89c1\u3002\n</code></pre>"},{"location":"Documents/D-Technology/%E9%94%81/CAS/#1-ccas","title":"1 C++CAS \u63a5\u53e3","text":"<ul> <li>atomic_compare_exchange</li> <li>\u4f2a\u4ee3\u7801</li> </ul> <pre><code>if (memcmp(obj, expected, sizeof *obj) == 0) {\nmemcpy(obj, &amp;desired, sizeof *obj);\nreturn true\n} else {\nmemcpy(expected, obj, sizeof *obj);\nreturn false;\n}\n</code></pre>"},{"location":"Documents/D-Technology/%E9%94%81/%E4%B9%90%E8%A7%82%E9%94%81%E3%80%81%E6%82%B2%E4%BC%A4%E9%94%81/","title":"\u4e50\u89c2\u9501\u3001\u60b2\u4f24\u9501","text":"<ul> <li>\u9762\u8bd5\u5fc5\u5907\u4e4b\u4e50\u89c2\u9501\u4e0e\u60b2\u89c2\u9501</li> </ul> <pre><code>title: \u4e24\u79cd\u9501\u7684\u4f7f\u7528\u573a\u666f?\n- \u4e50\u89c2\u9501\u9002\u7528\u4e8e**\u591a\u8bfb\u573a\u666f**\n- \u60b2\u89c2\u9501\u9002\u7528\u4e8e**\u591a\u5199\u573a\u666f**\n</code></pre>"},{"location":"Documents/D-Technology/%E9%94%81/%E4%B9%90%E8%A7%82%E9%94%81%E3%80%81%E6%82%B2%E4%BC%A4%E9%94%81/#1","title":"1 \u60b2\u89c2\u9501","text":"<p>\u603b\u662f\u5047\u8bbe\u6700\u574f\u7684\u60c5\u51b5\uff0c\u6bcf\u6b21\u53bb\u62ff\u6570\u636e\u7684\u65f6\u5019\u90fd\u8ba4\u4e3a\u522b\u4eba\u4f1a\u4fee\u6539\uff0c\u6240\u4ee5\u6bcf\u6b21\u5728\u62ff\u6570\u636e\u7684\u65f6\u5019\u90fd\u4f1a\u4e0a\u9501\uff0c\u8fd9\u6837\u522b\u4eba\u60f3\u62ff\u8fd9\u4e2a\u6570\u636e\u5c31\u4f1a\u963b\u585e\u76f4\u5230\u5b83\u62ff\u5230\u9501\uff08\u5171\u4eab\u8d44\u6e90\u6bcf\u6b21\u53ea\u7ed9\u4e00\u4e2a\u7ebf\u7a0b\u4f7f\u7528\uff0c\u5176\u5b83\u7ebf\u7a0b\u963b\u585e\uff0c\u7528\u5b8c\u540e\u518d\u628a\u8d44\u6e90\u8f6c\u8ba9\u7ed9\u5176\u5b83\u7ebf\u7a0b\uff09\u3002\u4f20\u7edf\u7684\u5173\u7cfb\u578b\u6570\u636e\u5e93\u91cc\u8fb9\u5c31\u7528\u5230\u4e86\u5f88\u591a\u8fd9\u79cd\u9501\u673a\u5236\uff0c\u6bd4\u5982\u884c\u9501\uff0c\u8868\u9501\u7b49\uff0c\u8bfb\u9501\uff0c\u5199\u9501\u7b49\uff0c\u90fd\u662f\u5728\u505a\u64cd\u4f5c\u4e4b\u524d\u5148\u4e0a\u9501\u3002</p>"},{"location":"Documents/D-Technology/%E9%94%81/%E4%B9%90%E8%A7%82%E9%94%81%E3%80%81%E6%82%B2%E4%BC%A4%E9%94%81/#2","title":"2 \u4e50\u89c2\u9501","text":"<p>\u603b\u662f\u5047\u8bbe\u6700\u597d\u7684\u60c5\u51b5\uff0c\u6bcf\u6b21\u53bb\u62ff\u6570\u636e\u7684\u65f6\u5019\u90fd\u8ba4\u4e3a\u522b\u4eba\u4e0d\u4f1a\u4fee\u6539\uff0c\u6240\u4ee5\u4e0d\u4f1a\u4e0a\u9501\uff0c\u4f46\u662f\u5728\u66f4\u65b0\u7684\u65f6\u5019\u4f1a\u5224\u65ad\u4e00\u4e0b\u5728\u6b64\u671f\u95f4\u522b\u4eba\u6709\u6ca1\u6709\u53bb\u66f4\u65b0\u8fd9\u4e2a\u6570\u636e\uff0c\u53ef\u4ee5\u4f7f\u7528\u7248\u672c\u53f7\u673a\u5236\u548cCAS\u7b97\u6cd5\u5b9e\u73b0\u3002\u4e50\u89c2\u9501\u9002\u7528\u4e8e\u591a\u8bfb\u7684\u5e94\u7528\u7c7b\u578b\uff0c\u8fd9\u6837\u53ef\u4ee5\u63d0\u9ad8\u541e\u5410\u91cf\uff0c\u50cf\u6570\u636e\u5e93\u63d0\u4f9b\u7684\u7c7b\u4f3c\u4e8ewrite_condition\u673a\u5236\uff0c\u5176\u5b9e\u90fd\u662f\u63d0\u4f9b\u7684\u4e50\u89c2\u9501\u3002</p>"},{"location":"Documents/D-Technology/%E9%94%81/%E4%B9%90%E8%A7%82%E9%94%81%E3%80%81%E6%82%B2%E4%BC%A4%E9%94%81/#3","title":"3 \u4e50\u89c2\u9501\u5e38\u89c1\u7684\u4e24\u79cd\u5b9e\u73b0\u65b9\u5f0f","text":"<p>\u4e50\u89c2\u9501\u4e00\u822c\u4f1a\u4f7f\u7528\u7248\u672c\u53f7\u673a\u5236\u6216CAS\u7b97\u6cd5\u5b9e\u73b0\u3002 1. \u7248\u672c\u53f7\u673a\u5236 \u4e00\u822c\u662f\u5728\u6570\u636e\u8868\u4e2d\u52a0\u4e0a\u4e00\u4e2a\u6570\u636e\u7248\u672c\u53f7version\u5b57\u6bb5\uff0c\u8868\u793a\u6570\u636e\u88ab\u4fee\u6539\u7684\u6b21\u6570\uff0c\u5f53\u6570\u636e\u88ab\u4fee\u6539\u65f6\uff0cversion\u503c\u4f1a\u52a0\u4e00\u3002\u5f53\u7ebf\u7a0bA\u8981\u66f4\u65b0\u6570\u636e\u503c\u65f6\uff0c\u5728\u8bfb\u53d6\u6570\u636e\u7684\u540c\u65f6\u4e5f\u4f1a\u8bfb\u53d6version\u503c\uff0c\u5728\u63d0\u4ea4\u66f4\u65b0\u65f6\uff0c\u82e5\u521a\u624d\u8bfb\u53d6\u5230\u7684version\u503c\u4e3a\u5f53\u524d\u6570\u636e\u5e93\u4e2d\u7684version\u503c\u76f8\u7b49\u65f6\u624d\u66f4\u65b0\uff0c\u5426\u5219\u91cd\u8bd5\u66f4\u65b0\u64cd\u4f5c\uff0c\u76f4\u5230\u66f4\u65b0\u6210\u529f\u3002 \u4e3e\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff1a \u5047\u8bbe\u6570\u636e\u5e93\u4e2d\u5e10\u6237\u4fe1\u606f\u8868\u4e2d\u6709\u4e00\u4e2a version \u5b57\u6bb5\uff0c\u5f53\u524d\u503c\u4e3a 1 \uff1b\u800c\u5f53\u524d\u5e10\u6237\u4f59\u989d\u5b57\u6bb5\uff08 balance \uff09\u4e3a $100 \u3002 1. \u64cd\u4f5c\u5458 A \u6b64\u65f6\u5c06\u5176\u8bfb\u51fa\uff08 version=1 \uff09\uff0c\u5e76\u4ece\u5176\u5e10\u6237\u4f59\u989d\u4e2d\u6263\u9664 $50\uff08 $100-$50 \uff09\u3002 2. \u5728\u64cd\u4f5c\u5458 A \u64cd\u4f5c\u7684\u8fc7\u7a0b\u4e2d\uff0c\u64cd\u4f5c\u5458B \u4e5f\u8bfb\u5165\u6b64\u7528\u6237\u4fe1\u606f\uff08 version=1 \uff09\uff0c\u5e76\u4ece\u5176\u5e10\u6237\u4f59\u989d\u4e2d\u6263\u9664 $20 \uff08 $100-$20 \uff09\u3002 3. \u64cd\u4f5c\u5458 A \u5b8c\u6210\u4e86\u4fee\u6539\u5de5\u4f5c\uff0c\u5c06\u6570\u636e\u7248\u672c\u53f7\u52a0\u4e00\uff08 version=2 \uff09\uff0c\u8fde\u540c\u5e10\u6237\u6263\u9664\u540e\u4f59\u989d\uff08 balance=$50 \uff09\uff0c\u63d0\u4ea4\u81f3\u6570\u636e\u5e93\u66f4\u65b0\uff0c\u6b64\u65f6\u7531\u4e8e\u63d0\u4ea4\u6570\u636e\u7248\u672c\u5927\u4e8e\u6570\u636e\u5e93\u8bb0\u5f55\u5f53\u524d\u7248\u672c\uff0c\u6570\u636e\u88ab\u66f4\u65b0\uff0c\u6570\u636e\u5e93\u8bb0\u5f55 version \u66f4\u65b0\u4e3a 2 \u3002 4. \u64cd\u4f5c\u5458 B \u5b8c\u6210\u4e86\u64cd\u4f5c\uff0c\u4e5f\u5c06\u7248\u672c\u53f7\u52a0\u4e00\uff08 version=2 \uff09\u8bd5\u56fe\u5411\u6570\u636e\u5e93\u63d0\u4ea4\u6570\u636e\uff08 balance=$80 \uff09\uff0c\u4f46\u6b64\u65f6\u6bd4\u5bf9\u6570\u636e\u5e93\u8bb0\u5f55\u7248\u672c\u65f6\u53d1\u73b0\uff0c\u64cd\u4f5c\u5458 B \u63d0\u4ea4\u7684\u6570\u636e\u7248\u672c\u53f7\u4e3a 2 \uff0c\u6570\u636e\u5e93\u8bb0\u5f55\u5f53\u524d\u7248\u672c\u4e5f\u4e3a 2 \uff0c\u4e0d\u6ee1\u8db3 \u201c \u63d0\u4ea4\u7248\u672c\u5fc5\u987b\u5927\u4e8e\u8bb0\u5f55\u5f53\u524d\u7248\u672c\u624d\u80fd\u6267\u884c\u66f4\u65b0 \u201c \u7684\u4e50\u89c2\u9501\u7b56\u7565\uff0c\u56e0\u6b64\uff0c\u64cd\u4f5c\u5458 B \u7684\u63d0\u4ea4\u88ab\u9a73\u56de\u3002 \u8fd9\u6837\uff0c\u5c31\u907f\u514d\u4e86\u64cd\u4f5c\u5458 B \u7528\u57fa\u4e8e version=1 \u7684\u65e7\u6570\u636e\u4fee\u6539\u7684\u7ed3\u679c\u8986\u76d6\u64cd\u4f5c\u5458A \u7684\u64cd\u4f5c\u7ed3\u679c\u7684\u53ef\u80fd\u3002</p>"},{"location":"Documents/E-Architecture/Reactor%E5%92%8CProactor%E6%A8%A1%E5%BC%8F/","title":"Reactor \u548c Proactor \u6a21\u5f0f","text":"<ul> <li>\u4e24\u79cd\u9ad8\u6548\u7684\u4e8b\u4ef6\u5904\u7406\u6a21\u5f0f</li> </ul> <pre><code>- Reactor\u548cProactor\u6a21\u5f0f\u662fI/O\u591a\u8def\u590d\u7528\u6a21\u5f0f\u7684\u4e24\u79cd\u5b9e\u73b0\u3002\n- ***Reactor \u6a21\u5f0f\u91c7\u7528\u540c\u6b65 IO***\uff0c\u800c ***Proactor \u91c7\u7528\u5f02\u6b65 IO***\u3002\n- \u5728 Linux \u64cd\u4f5c\u7cfb\u7edf\u4e0b\u5b9e\u73b0\u9ad8\u5e76\u53d1\u7f51\u7edc\u7f16\u7a0b\u4f9d\u7136\u4ee5Reactor \u6a21\u5f0f\u4e3a\u4e3b\u3002\n</code></pre>"},{"location":"Documents/E-Architecture/Reactor%E5%92%8CProactor%E6%A8%A1%E5%BC%8F/#1-io","title":"1 IO \u591a\u8def\u590d\u7528","text":"<pre><code>title: IO\u591a\u8def\u590d\u7528\u4e00\u822c\u5b9e\u73b0\u5305\u542b\uff1f\n- \u4e8b\u4ef6\u591a\u8def\u5206\u79bb\u5668 (Event Demultiplexer)\n- \u4e8b\u4ef6\u5904\u7406\u5668 (Event Handler)\uff08\u6216\u8005\u662f\u56de\u8c03\u51fd\u6570\uff09\n</code></pre> <ul> <li>\u4e00\u822c\u5730,I/O \u591a\u8def\u590d\u7528\u673a\u5236\u90fd\u4f9d\u8d56\u4e8e\u4e00\u4e2a\u4e8b\u4ef6\u591a\u8def\u5206\u79bb\u5668 (Event Demultiplexer)\u3002\u5206\u79bb\u5668\u5bf9\u8c61\u53ef\u5c06\u6765\u81ea\u4e8b\u4ef6\u6e90\u7684 I/O \u4e8b\u4ef6\u5206\u79bb\u51fa\u6765\uff0c\u5e76\u5206\u53d1\u5230\u5bf9\u5e94\u7684 read/write \u4e8b\u4ef6\u5904\u7406\u5668 (Event Handler)\u3002</li> <li>\u5f00\u53d1\u4eba\u5458\u9884\u5148\u6ce8\u518c\u9700\u8981\u5904\u7406\u7684\u4e8b\u4ef6\u53ca\u5176\u4e8b\u4ef6\u5904\u7406\u5668\uff08\u6216\u56de\u8c03\u51fd\u6570\uff09\uff1b\u4e8b\u4ef6\u5206\u79bb\u5668\u8d1f\u8d23\u5c06\u8bf7\u6c42\u4e8b\u4ef6\u4f20\u9012\u7ed9\u4e8b\u4ef6\u5904\u7406\u5668\u3002</li> <li>\u4e24\u4e2a\u4e0e\u4e8b\u4ef6\u5206\u79bb\u5668\u6709\u5173\u7684\u6a21\u5f0f\u662f Reactor \u548c Proactor\u3002</li> <li>Reactor \u6a21\u5f0f\u91c7\u7528\u540c\u6b65 IO\uff0c\u800c Proactor \u91c7\u7528\u5f02\u6b65 IO\u3002</li> </ul>"},{"location":"Documents/E-Architecture/Reactor%E5%92%8CProactor%E6%A8%A1%E5%BC%8F/#2-reactor","title":"2 Reactor \u6a21\u5f0f","text":"<p>\u5728 Reactor \u4e2d\uff0c\u4e8b\u4ef6\u5206\u79bb\u5668\u8d1f\u8d23\u7b49\u5f85\u6587\u4ef6\u63cf\u8ff0\u7b26\u6216 socket \u4e3a\u8bfb\u5199\u64cd\u4f5c\u51c6\u5907\u5c31\u7eea\uff0c\u7136\u540e\u5c06\u5c31\u7eea\u4e8b\u4ef6\u4f20\u9012\u7ed9\u5bf9\u5e94\u7684\u5904\u7406\u5668\uff0c\u6700\u540e\u7531\u5904\u7406\u5668\u8d1f\u8d23\u5b8c\u6210\u5b9e\u9645\u7684\u8bfb\u5199\u5de5\u4f5c\u3002 \u5728 Reactor \u4e2d\u5b9e\u73b0\u8bfb\uff1a - \u6ce8\u518c\u8bfb\u5c31\u7eea\u4e8b\u4ef6\u548c\u76f8\u5e94\u7684\u4e8b\u4ef6\u5904\u7406\u5668 - \u4e8b\u4ef6\u5206\u79bb\u5668\u7b49\u5f85\u4e8b\u4ef6 - \u4e8b\u4ef6\u5230\u6765\uff0c\u6fc0\u6d3b\u5206\u79bb\u5668\uff0c\u5206\u79bb\u5668\u8c03\u7528\u4e8b\u4ef6\u5bf9\u5e94\u7684\u5904\u7406\u5668\u3002 - \u4e8b\u4ef6\u5904\u7406\u5668\u5b8c\u6210\u5b9e\u9645\u7684\u8bfb\u64cd\u4f5c\uff0c\u5904\u7406\u8bfb\u5230\u7684\u6570\u636e\uff0c\u6ce8\u518c\u65b0\u7684\u4e8b\u4ef6\uff0c\u7136\u540e\u8fd4\u8fd8\u63a7\u5236\u6743\u3002</p>"},{"location":"Documents/E-Architecture/Reactor%E5%92%8CProactor%E6%A8%A1%E5%BC%8F/#3-proactor","title":"3 Proactor \u6a21\u5f0f","text":"<pre><code>**Proactor\u5173\u6ce8\u7684\u4e0d\u662f\u5c31\u7eea\u4e8b\u4ef6\uff0c\u800c\u662f\u5b8c\u6210\u4e8b\u4ef6\uff0c\u8fd9\u662f\u533a\u5206Reactor\u6a21\u5f0f\u7684\u5173\u952e\u70b9**\n</code></pre> <p>\u5728 Proactor \u6a21\u5f0f\u4e2d\uff0c\u5904\u7406\u5668\u6216\u8005\u517c\u4efb\u5904\u7406\u5668\u7684\u4e8b\u4ef6\u5206\u79bb\u5668\uff0c\u53ea\u8d1f\u8d23\u53d1\u8d77\u5f02\u6b65\u8bfb\u5199\u64cd\u4f5c\u3002IO \u64cd\u4f5c\u672c\u8eab\u7531\u64cd\u4f5c\u7cfb\u7edf\u6765\u5b8c\u6210\u3002\u4f20\u9012\u7ed9\u64cd\u4f5c\u7cfb\u7edf\u7684\u53c2\u6570\u9700\u8981\u5305\u62ec\u7528\u6237\u5b9a\u4e49\u7684\u6570\u636e\u7f13\u51b2\u533a\u5730\u5740\u548c\u6570\u636e\u5927\u5c0f\uff0c\u64cd\u4f5c\u7cfb\u7edf\u624d\u80fd\u4ece\u4e2d\u5f97\u5230\u5199\u51fa\u64cd\u4f5c\u6240\u9700\u6570\u636e\uff0c\u6216\u5199\u5165\u4ece socket \u8bfb\u5230\u7684\u6570\u636e\u3002\u4e8b\u4ef6\u5206\u79bb\u5668\u6355\u83b7 IO \u64cd\u4f5c\u5b8c\u6210\u4e8b\u4ef6\uff0c\u7136\u540e\u5c06\u4e8b\u4ef6\u4f20\u9012\u7ed9\u5bf9\u5e94\u5904\u7406\u5668\u3002 \u5728 Proactor \u4e2d\u5b9e\u73b0\u8bfb\uff1a - \u5904\u7406\u5668\u53d1\u8d77\u5f02\u6b65\u8bfb\u64cd\u4f5c\uff08\u6ce8\u610f\uff1a\u64cd\u4f5c\u7cfb\u7edf\u5fc5\u987b\u652f\u6301\u5f02\u6b65 IO\uff09\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5904\u7406\u5668\u65e0\u89c6 IO \u5c31\u7eea\u4e8b\u4ef6\uff0c\u5b83\u5173\u6ce8\u7684\u662f\u5b8c\u6210\u4e8b\u4ef6\u3002 - \u4e8b\u4ef6\u5206\u79bb\u5668\u7b49\u5f85\u64cd\u4f5c\u5b8c\u6210\u4e8b\u4ef6 - \u5728\u5206\u79bb\u5668\u7b49\u5f85\u8fc7\u7a0b\u4e2d\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5229\u7528\u5e76\u884c\u7684\u5185\u6838\u7ebf\u7a0b\u6267\u884c\u5b9e\u9645\u7684\u8bfb\u64cd\u4f5c\uff0c\u5e76\u5c06\u7ed3\u679c\u6570\u636e\u5b58\u5165\u7528\u6237\u81ea\u5b9a\u4e49\u7f13\u51b2\u533a\uff0c\u6700\u540e\u901a\u77e5\u4e8b\u4ef6\u5206\u79bb\u5668\u8bfb\u64cd\u4f5c\u5b8c\u6210\u3002 - \u4e8b\u4ef6\u5206\u79bb\u5668\u547c\u5524\u5904\u7406\u5668\u3002 - \u4e8b\u4ef6\u5904\u7406\u5668\u5904\u7406\u7528\u6237\u81ea\u5b9a\u4e49\u7f13\u51b2\u533a\u4e2d\u7684\u6570\u636e\uff0c\u7136\u540e\u542f\u52a8\u4e00\u4e2a\u65b0\u7684\u5f02\u6b65\u64cd\u4f5c\uff0c\u5e76\u5c06\u63a7\u5236\u6743\u8fd4\u56de\u4e8b\u4ef6\u5206\u79bb\u5668\u3002</p>"},{"location":"Documents/E-Architecture/Reactor%E5%92%8CProactor%E6%A8%A1%E5%BC%8F/#4-reactor-proactor","title":"4 Reactor \u548c Proactor \u5bf9\u6bd4","text":"<pre><code>title: Proactor\u6a21\u5f0f\u4e0eReactor\u6a21\u5f0f \u7684\u533a\u522b\n-   Reactor \u6a21\u5f0f\u6ce8\u518c\u7684\u662f\u6587\u4ef6\u63cf\u8ff0\u7b26\u7684\u5c31\u7eea\u4e8b\u4ef6\u3002\u5f53Reactor \u6a21\u5f0f\u6709\u4e8b\u4ef6\u53d1\u751f\u65f6\uff0c\u5b83\u9700\u8981\u5224\u65ad\u5f53\u524d\u4e8b\u4ef6\u662f\u8bfb\u4e8b\u4ef6\u8fd8\u662f\u5199\u4e8b\u4ef6\uff0c\u7136\u540e\u5728\u8c03\u7528\u7cfb\u7edf\u7684`read`\u6216\u8005`write`\u5c06\u6570\u636e\u4ece\u5185\u6838\u4e2d\u62f7\u8d1d\u5230\u7528\u6237\u6570\u636e\u533a\uff0c\u7136\u540e\u8fdb\u884c\u4e1a\u52a1\u5904\u7406\u3002  \n-   Proactor\u6a21\u5f0f\u6ce8\u518c\u7684\u5219\u662f\u5b8c\u6210\u4e8b\u4ef6\u3002\u5373\u53d1\u8d77\u5f02\u6b65\u64cd\u4f5c\u540e\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5c06\u5728\u5185\u6838\u6001\u5b8c\u6210I/O\u5e76\u62f7\u8d1d\u6570\u636e\u5230\u7528\u6237\u63d0\u4f9b\u7684\u7f13\u51b2\u533a\u4e2d\uff0c\u5b8c\u6210\u540e\u901a\u77e5Proactor\u8fdb\u884c\u56de\u8c03\uff0c\u7528\u6237\u53ea\u9700\u8981\u5904\u7406\u540e\u7eed\u7684\u4e1a\u52a1\u5373\u53ef\u3002\n-   Reactor\u6a21\u5f0f\u5b9e\u73b0`\u540c\u6b65I/O\u591a\u8def\u5206\u53d1`    \n-   Proactor\u6a21\u5f0f\u5b9e\u73b0`\u5f02\u6b65I/O\u5206\u53d1`\u3002\n</code></pre> <p>\u53ef\u4ee5\u770b\u51fa\uff0c\u4e24\u4e2a\u6a21\u5f0f\u7684\u76f8\u540c\u70b9\uff0c\u90fd\u662f\u5bf9\u67d0\u4e2a IO \u4e8b\u4ef6\u7684\u4e8b\u4ef6\u901a\u77e5 (\u5373\u544a\u8bc9\u67d0\u4e2a\u6a21\u5757\uff0c\u8fd9\u4e2a IO \u64cd\u4f5c\u53ef\u4ee5\u8fdb\u884c\u6216\u5df2\u7ecf\u5b8c\u6210)\u3002 - \u76f8\u540c\u70b9\uff1ademultiplexor \u8d1f\u8d23\u63d0\u4ea4 IO \u64cd\u4f5c (\u5f02\u6b65)\u3001\u67e5\u8be2\u8bbe\u5907\u662f\u5426\u53ef\u64cd\u4f5c (\u540c\u6b65)\uff0c\u7136\u540e\u5f53\u6761\u4ef6\u6ee1\u8db3\u65f6\uff0c\u5c31\u56de\u8c03 handler\uff1b - \u4e0d\u540c\u70b9\uff1a\u5f02\u6b65\u60c5\u51b5\u4e0b (Proactor)\uff0c\u5f53\u56de\u8c03 handler \u65f6\uff0c\u8868\u793a IO \u64cd\u4f5c\u5df2\u7ecf\u5b8c\u6210\uff1b\u540c\u6b65\u60c5\u51b5\u4e0b (Reactor)\uff0c\u56de\u8c03 handler \u65f6\uff0c\u8868\u793a IO \u8bbe\u5907\u53ef\u4ee5\u8fdb\u884c\u67d0\u4e2a\u64cd\u4f5c (can read or can write)\u3002</p>"},{"location":"Documents/E-Architecture/Service%20Mesh/","title":"Service Mesh","text":"<ul> <li>\u53c2\u8003\u6587\u6863</li> </ul> <pre><code>title: \u4ec0\u4e48\u662fService Mesh\n\n\u670d\u52a1\u7f51\u683c\uff08Service Mesh\uff09\u662f\u5904\u7406\u670d\u52a1\u95f4\u901a\u4fe1\u7684\u57fa\u7840\u8bbe\u65bd\u5c42\u3002\u5b83\u8d1f\u8d23\u6784\u6210\u73b0\u4ee3\u4e91\u539f\u751f\u5e94\u7528\u7a0b\u5e8f\u7684\u590d\u6742\u670d\u52a1\u62d3\u6251\u6765\u53ef\u9760\u5730\u4ea4\u4ed8\u8bf7\u6c42\u3002\u5728\u5b9e\u8df5\u4e2d\uff0cService Mesh \u901a\u5e38\u4ee5\u8f7b\u91cf\u7ea7\u7f51\u7edc\u4ee3\u7406\u9635\u5217\u7684\u5f62\u5f0f\u5b9e\u73b0\uff0c\u8fd9\u4e9b\u4ee3\u7406\u4e0e\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801\u90e8\u7f72\u5728\u4e00\u8d77\uff0c\u5bf9\u5e94\u7528\u7a0b\u5e8f\u6765\u8bf4\u65e0\u9700\u611f\u77e5\u4ee3\u7406\u7684\u5b58\u5728\u3002\n</code></pre>"},{"location":"Documents/E-Architecture/SideCar%E6%A8%A1%E5%BC%8F/","title":"SideCar\u6a21\u5f0f","text":"<pre><code>title:\u4ec0\u4e48\u662fSideCar\u6a21\u5f0f\n\n\u5c06\u5e94\u7528\u7a0b\u5e8f\u7684\u529f\u80fd\u5212\u5206\u4e3a\u5355\u72ec\u7684\u8fdb\u7a0b\u53ef\u4ee5\u88ab\u89c6\u4e3a\u00a0**Sidecar \u6a21\u5f0f**\u3002Sidecar \u6a21\u5f0f\u5141\u8bb8\u60a8\u5728\u5e94\u7528\u7a0b\u5e8f\u65c1\u8fb9\u6dfb\u52a0\u66f4\u591a\u529f\u80fd\uff0c\u800c\u65e0\u9700\u989d\u5916\u7b2c\u4e09\u65b9\u7ec4\u4ef6\u914d\u7f6e\u6216\u4fee\u6539\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801\n</code></pre>"},{"location":"Documents/E-Architecture/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/","title":"\u5206\u5e03\u5f0f\u67b6\u6784","text":""},{"location":"Documents/E-Architecture/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/#1","title":"1 \u5206\u5e03\u5f0f\u7cfb\u7edf\u6982\u8ff0","text":""},{"location":"Documents/E-Architecture/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/#11","title":"1.1 \u5206\u5e03\u5f0f\u8bf7\u6c42\u4e09\u6001","text":"<p>\u4e00\u4e2a\u8bf7\u6c42\u6267\u884c\u7684\u7ed3\u679c\u6709\u4e09\u79cd\u72b6\u6001\uff1a\u201c\u6210\u529f\u201d\u3001\u201c\u5931\u8d25\u201d\u3001\u201c\u8d85\u65f6\uff08\u672a\u77e5\uff09\u201d\uff0c\u79f0\u4e4b\u4e3a\u5206\u5e03\u5f0f\u7cfb\u7edf\u7684\u4e09\u6001\u3002</p>"},{"location":"Documents/E-Architecture/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/#12","title":"1.2 \u8861\u91cf\u5206\u5e03\u5f0f\u7cfb\u7edf\u7684\u6307\u6807","text":"<ol> <li>\u6027\u80fd\uff1a\u5e38\u89c1\u7684\u6027\u80fd\u6307\u6807\u6709\uff1a\u541e\u5410\u80fd\u529b\u3001\u54cd\u5e94\u5ef6\u8fdf\u3001\u5e76\u53d1\u80fd\u529b\uff0c\u4e09\u4e2a\u6027\u80fd\u6307\u6807\u5f80\u5f80\u4f1a\u76f8\u4e92\u5236\u7ea6\uff0c\u8ffd\u6c42\u9ad8\u541e\u5410\u7684\u7cfb\u7edf\uff0c\u5f80\u5f80\u5f88\u96be\u505a\u5230\u4f4e\u5ef6\u8fdf\uff1b\u7cfb\u7edf\u5e73\u5747\u54cd\u5e94\u65f6\u95f4\u8f83\u957f\u65f6\uff0c\u4e5f\u5f88\u96be\u63d0\u9ad8 QPS\u3002<ol> <li>\u7cfb\u7edf\u7684\u541e\u5410\u80fd\u529b\uff0c\u6307\u7cfb\u7edf\u5728\u67d0 \u4e00\u65f6\u95f4\u53ef\u4ee5\u5904\u7406\u7684\u6570\u636e\u603b\u91cf\uff0c\u901a\u5e38\u53ef\u4ee5\u7528\u7cfb\u7edf\u6bcf\u79d2\u5904\u7406\u7684\u603b\u7684\u6570\u636e\u91cf\u6765\u8861\u91cf\uff1b</li> <li>\u7cfb\u7edf\u7684\u54cd\u5e94\u5ef6\u8fdf\uff0c\u6307\u7cfb\u7edf\u5b8c\u6210\u67d0\u4e00\u529f\u80fd\u9700\u8981\u4f7f\u7528\u7684\u65f6\u95f4\uff1b</li> <li>\u7cfb\u7edf\u7684\u5e76\u53d1\u80fd\u529b\uff0c\u6307\u7cfb\u7edf\u53ef\u4ee5\u540c\u65f6\u5b8c\u6210\u67d0\u4e00\u529f\u80fd\u7684\u80fd\u529b\uff0c\u901a\u5e38 \u4e5f\u7528 QPS(query per second)\u6765\u8861\u91cf\u3002</li> </ol> </li> <li>\u53ef\u7528\u6027\uff1a\u7cfb\u7edf\u7684\u53ef\u7528\u6027(availability)\u6307\u7cfb\u7edf\u5728\u9762\u5bf9\u5404\u79cd\u5f02\u5e38\u65f6\u53ef\u4ee5\u6b63\u786e\u63d0\u4f9b\u670d\u52a1\u7684\u80fd\u529b\u3002\u7cfb\u7edf\u7684\u53ef\u7528\u6027\u53ef\u4ee5\u7528\u7cfb\u7edf\u505c\u670d\u52a1\u7684\u65f6\u95f4\u4e0e\u6b63\u5e38\u670d\u52a1\u7684\u65f6\u95f4\u7684\u6bd4\u4f8b\u6765\u8861\u91cf\uff0c\u4e5f\u53ef\u4ee5\u7528\u67d0\u529f\u80fd\u7684\u5931\u8d25\u6b21\u6570\u4e0e\u6210\u529f\u6b21\u6570\u7684\u6bd4\u4f8b\u6765\u8861\u91cf\u3002\u53ef\u7528\u6027\u662f\u5206\u5e03\u5f0f\u7684\u91cd\u8981\u6307\u6807\uff0c\u8861\u91cf\u4e86\u7cfb\u7edf\u7684\u9c81\u68d2\u6027\uff0c\u662f\u7cfb\u7edf\u5bb9\u9519\u80fd\u529b\u7684\u4f53\u73b0\u3002</li> <li>\u53ef\u6269\u5c55\u6027\uff1a\u7cfb\u7edf\u7684\u53ef\u6269\u5c55\u6027(scalability)\u6307\u5206\u5e03\u5f0f\u7cfb\u7edf\u901a\u8fc7\u6269\u5c55\u96c6\u7fa4\u673a\u5668\u89c4\u6a21\u63d0\u9ad8\u7cfb\u7edf\u6027\u80fd\uff08\u541e\u5410\u3001\u5ef6\u8fdf\u3001\u5e76\u53d1\uff09\u3001\u5b58\u50a8\u5bb9\u91cf\u3001\u8ba1\u7b97\u80fd\u529b\u7684\u7279\u6027\u3002\u53ef\u6269\u5c55\u6027\u662f\u5206\u5e03\u5f0f\u7cfb\u7edf\u7684\u7279\u6709\u6027\u8d28\u3002</li> <li>\u4e00\u81f4\u6027\uff1a\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e3a\u4e86\u63d0\u9ad8\u53ef\u7528\u6027\uff0c\u603b\u662f\u4e0d\u53ef\u907f\u514d\u7684\u4f7f\u7528\u526f\u672c\u7684\u673a\u5236\uff0c\u4ece\u800c\u5f15\u53d1\u526f\u672c\u4e00\u81f4\u6027\u7684\u95ee\u9898\u3002\u6839\u636e\u5177\u4f53\u7684\u4e1a\u52a1\u9700\u6c42\u7684\u4e0d\u540c\uff0c\u5206\u5e03\u5f0f\u7cfb\u7edf\u603b\u662f\u63d0\u4f9b\u67d0\u79cd\u4e00\u81f4\u6027\u6a21\u578b\uff0c\u5e76\u57fa\u4e8e\u6b64\u6a21\u578b\u63d0\u4f9b\u5177\u4f53\u7684\u670d\u52a1\u3002</li> </ol>"},{"location":"Documents/E-Architecture/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/#2-acid","title":"2 ACID\u7406\u8bba","text":"<ul> <li>A\uff1aAtomicity\uff08\u539f\u5b50\u6027\uff09\uff0c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u7684\u6240\u6709\u64cd\u4f5c\uff0c\u8981\u4e48\u5168\u90e8\u5b8c\u6210\uff0c\u8981\u4e48\u5168\u90e8\u4e0d\u5b8c\u6210\uff0c\u4e0d\u4f1a\u7ed3\u675f\u5728\u4e2d\u95f4\u67d0\u4e2a\u73af\u8282\u3002\u4e8b\u52a1\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\u53d1\u751f\u9519\u8bef\uff0c\u4f1a\u88ab\u6062\u590d\u5230\u4e8b\u52a1\u5f00\u59cb\u524d\u7684\u72b6\u6001\uff0c\u5c31\u50cf\u8fd9\u4e2a\u4e8b\u52a1\u4ece\u6765\u6ca1\u6709\u6267\u884c\u8fc7\u4e00\u6837\u3002</li> <li>C\uff1aConsistency\uff08\u4e00\u81f4\u6027\uff09\uff0c\u5728\u4e8b\u52a1\u5f00\u59cb\u4e4b\u524d\u548c\u4e8b\u52a1\u7ed3\u675f\u4ee5\u540e\uff0c\u6570\u636e\u5e93\u7684\u5b8c\u6574\u6027\u6ca1\u6709\u88ab\u7834\u574f\u3002\u5b8c\u6574\u6027\u5305\u62ec\u5916\u952e\u7ea6\u675f\u3001\u5e94\u7528\u5b9a\u4e49\u7684\u7b49\u7ea6\u675f\u4e0d\u4f1a\u88ab\u7834\u574f\u3002</li> <li>I\uff1aIsolation\uff08\u9694\u79bb\u6027\uff09\uff0c\u6570\u636e\u5e93\u5141\u8bb8\u591a\u4e2a\u5e76\u53d1\u4e8b\u52a1\u540c\u65f6\u5bf9\u5176\u6570\u636e\u8fdb\u884c\u8bfb\u5199\u548c\u4fee\u6539\u7684\u80fd\u529b\uff0c\u9694\u79bb\u6027\u53ef\u4ee5\u9632\u6b62\u591a\u4e2a\u4e8b\u52a1\u5e76\u53d1\u6267\u884c\u65f6\u7531\u4e8e\u4ea4\u53c9\u6267\u884c\u800c\u5bfc\u81f4\u6570\u636e\u7684\u4e0d\u4e00\u81f4\u3002</li> <li>D\uff1aDurability\uff08\u6301\u4e45\u6027\uff09\uff0c\u4e8b\u52a1\u5904\u7406\u7ed3\u675f\u540e\uff0c\u5bf9\u6570\u636e\u7684\u4fee\u6539\u5c31\u662f\u6c38\u4e45\u7684\uff0c\u5373\u4fbf\u7cfb\u7edf\u6545\u969c\u4e5f\u4e0d\u4f1a\u4e22\u5931\u3002</li> </ul>"},{"location":"Documents/E-Architecture/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/#3-cap","title":"3 CAP\u7406\u8bba","text":"<pre><code>title: CAP\u53ea\u80fd\u540c\u65f6\u6ee1\u8db3\u5176\u4e2d2\u70b9\nCAP\u539f\u7406\u8bc1\u660e\uff0c\u4efb\u4f55\u5206\u5e03\u5f0f\u7cfb\u7edf\u53ea\u53ef\u540c\u65f6\u6ee1\u8db3\u4ee5\u4e0a\u4e24\u70b9\uff0c\u65e0\u6cd5\u4e09\u8005\u517c\u987e\u3002\u7531\u4e8e\u5173\u7cfb\u578b\u6570\u636e\u5e93\u662f\u5355\u8282\u70b9\u65e0\u590d\u5236\u7684\uff0c\u56e0\u6b64\u4e0d\u5177\u6709\u5206\u533a\u5bb9\u5fcd\u6027\uff0c\u4f46\u662f\u5177\u6709\u4e00\u81f4\u6027\u548c\u53ef\u7528\u6027\uff0c\u800c\u5206\u5e03\u5f0f\u7684\u670d\u52a1\u5316\u7cfb\u7edf\u90fd\u9700\u8981\u6ee1\u8db3\u5206\u533a\u5bb9\u5fcd\u6027\uff0c\u90a3\u4e48\u6211\u4eec\u5fc5\u987b\u5728\u4e00\u81f4\u6027\u548c\u53ef\u7528\u6027\u4e4b\u95f4\u8fdb\u884c\u6743\u8861\u3002\u5982\u679c\u5728\u7f51\u7edc\u4e0a\u6709\u6d88\u606f\u4e22\u5931\uff0c\u4e5f\u5c31\u662f\u51fa\u73b0\u4e86\u7f51\u7edc\u5206\u533a\uff0c\u5219\u590d\u5236\u64cd\u4f5c\u53ef\u80fd\u4f1a\u88ab\u5ef6\u540e\uff0c\u5982\u679c\u8fd9\u65f6\u6211\u4eec\u7684\u4f7f\u7528\u65b9\u7b49\u5f85\u590d\u5236\u5b8c\u6210\u518d\u8fd4\u56de\uff0c\u5219\u53ef\u80fd\u5bfc\u81f4\u5728\u6709\u9650\u65f6\u95f4\u5185\u65e0\u6cd5\u8fd4\u56de\uff0c\u5c31\u5931\u53bb\u4e86\u53ef\u7528\u6027\uff1a\u800c\u5982\u679c\u4f7f\u7528\u65b9\u4e0d\u7b49\u5f85\u590d\u5236\u5b8c\u6210\uff0c\u800c\u5728\u4e3b\u5206\u7247\u5199\u5b8c\u540e\u76f4\u63a5\u8fd4\u56de\uff0c\u5219\u5177\u6709\u4e86\u53ef\u7528\u6027\uff0c\u4f46\u662f\u5931\u53bb\u4e86\u4e00\u81f4\u6027\u3002\n</code></pre> <ul> <li>C\uff1aConsistency\uff08\u4e00\u81f4\u6027\uff09\uff0c\u5728\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\u7684\u6240\u6709\u6570\u636e\uff0c\u5728\u540c\u4e00\u65f6\u523b\u5177\u6709\u540c\u6837\u7684\u503c\uff1b\u6240\u6709\u8282\u70b9\u5728\u540c\u4e00\u65f6\u523b\u8bfb\u53d6\u7684\u6570\u636e\u90fd\u662f\u6700\u65b0\u7684\u6570\u636e\u526f\u672c\u3002</li> <li>A\uff1aAvailability\uff08\u53ef\u7528\u6027\uff09\uff0c\u5b8c\u5168\u7684\u53ef\u7528\u6027\u6307\u7684\u662f\u5728\u4efb\u4f55\u6545\u969c\u6a21\u578b\u4e0b\uff0c\u670d\u52a1\u90fd\u4f1a\u5728\u6709\u9650\u7684\u65f6\u95f4\u5185\u5904\u7406\u5b8c\u6210\u5e76\u8fdb\u884c\u54cd\u5e94\u3002</li> <li>P\uff1aPartition tolerance\uff08\u5206\u533a\u5bb9\u9519\u6027\uff09\uff0c\u5c3d\u7ba1\u7f51\u7edc\u4e0a\u6709\u90e8\u5206\u6d88\u606f\u4e22\u5931\uff0c\u4f46\u7cfb\u7edf\u4ecd\u7136\u53ef\u7ee7\u7eed\u5de5\u4f5c\u3002</li> </ul>"},{"location":"Documents/E-Architecture/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/#4-base","title":"4 BASE\u7406\u8bba","text":"<pre><code>1. BASE\u601d\u60f3\u89e3\u51b3\u4e86CAP\u63d0\u51fa\u7684\u5206\u5e03\u5f0f\u7cfb\u7edf\u7684\u4e00\u81f4\u6027\u548c\u53ef\u7528\u6027\u4e0d\u53ef\u517c\u5f97\u7684\u95ee\u9898\u3002\n2. BASE\u601d\u60f3\u4e0eACID\u539f\u7406\u622a\u7136\u4e0d\u540c\uff0c\u5b83\u6ee1\u8db3CAP\u539f\u7406\uff0c\u901a\u8fc7\u727a\u7272\u5f3a\u4e00\u81f4\u6027\u83b7\u5f97\u53ef\u7528\u6027\uff0c\u4e00\u822c\u5e94\u7528\u4e8e\u670d\u52a1\u5316\u7cfb\u7edf\u7684\u5e94\u7528\u5c42\u6216\u8005\u5927\u6570\u636e\u5904\u7406\u7cfb\u7edf\u4e2d\uff0c\u901a\u8fc7\u8fbe\u5230\u6700\u7ec8\u4e00\u81f4\u6027\u6765\u5c3d\u91cf\u6ee1\u8db3\u4e1a\u52a1\u7684\u7edd\u5927\u591a\u6570\u9700\u6c42\u3002\n3. \u8f6f\u72b6\u6001\u662f\u5b9e\u73b0BASE\u601d\u60f3\u7684\u65b9\u6cd5\uff0c\u57fa\u672c\u53ef\u7528\u548c\u6700\u7ec8\u4e00\u81f4\u662f\u76ee\u6807\u3002\u4ee5BASE\u601d\u60f3\u5b9e\u73b0\u7684\u7cfb\u7edf\u7531\u4e8e\u4e0d\u4fdd\u8bc1\u5f3a\u4e00\u81f4\u6027\uff0c\u6240\u4ee5\u7cfb\u7edf\u5728\u5904\u7406\u8bf7\u6c42\u7684\u8fc7\u7a0b\u4e2d\u53ef\u4ee5\u5b58\u5728\u77ed\u6682\u7684\u4e0d\u4e00\u81f4\uff0c\u5728\u77ed\u6682\u7684\u4e0d\u4e00\u81f4\u7684\u65f6\u95f4\u7a97\u53e3\u5185\uff0c\u8bf7\u6c42\u5904\u7406\u5904\u4e8e\u4e34\u65f6\u72b6\u6001\u4e2d\uff0c\u7cfb\u7edf\u5728\u8fdb\u884c\u6bcf\u6b65\u64cd\u4f5c\u65f6\uff0c\u901a\u8fc7\u8bb0\u5f55\u6bcf\u4e2a\u4e34\u65f6\u72b6\u6001\uff0c\u5728\u7cfb\u7edf\u51fa\u73b0\u6545\u969c\u65f6\u53ef\u4ee5\u4ece\u8fd9\u4e9b\u4e2d\u95f4\u72b6\u6001\u7ee7\u7eed\u5904\u7406\u672a\u5b8c\u6210\u7684\u8bf7\u6c42\u6216\u8005\u9000\u56de\u5230\u539f\u59cb\u72b6\u6001\uff0c\u6700\u7ec8\u8fbe\u5230\u4e00\u81f4\u72b6\u6001\u3002\n</code></pre> <ul> <li>B\uff1aBasiclly Available(\u57fa\u672c\u53ef\u7528)\uff1a</li> <li>S\uff1aSoft state(\u8f6f\u72b6\u6001)\uff0c\u72b6\u6001\u53ef\u4ee5\u5728\u4e00\u6bb5\u65f6\u95f4\u5185\u4e0d\u540c\u6b65\u3002</li> <li>E\uff1aEventually consistent(\u6700\u7ec8\u4e00\u81f4\u6027)\uff1a\u5728\u4e00\u5b9a\u7684\u65f6\u95f4\u7a97\u53e3\u5185\uff0c\u6700\u7ec8\u6570\u636e\u8fbe\u6210\u4e00\u81f4\u5373\u53ef\u3002</li> </ul>"},{"location":"Documents/E-Architecture/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/#5","title":"5 \u4e00\u81f4\u6027","text":"<ul> <li>\u4e00\u81f4\u6027\uff1a\u591a\u4e2a\u526f\u672c\u95f4\u6570\u636e\u662f\u5426\u76f8\u540c</li> <li>\u5f3a\u4e00\u81f4\u6027\uff1a\u66f4\u65b0\u540e\u4efb\u4f55\u65f6\u95f4\u8bfb\u6570\u636e\u662f\u6700\u65b0\u6570\u636e<ul> <li>\u6a21\u578b\uff1a</li> <li>Paxos</li> <li>Raft\uff08muti-paxos\uff09</li> <li>ZAB\uff08muti-paxos\uff09</li> </ul> </li> <li>\u5f31\u4e00\u81f4\u6027\uff1a\u66f4\u65b0\u540e\u5141\u8bb8\u5728\u4e00\u5b9a\u65f6\u95f4\u5185\u8bfb\u53d6\u7684\u6570\u636e\u4e0d\u662f\u6700\u65b0\u6570\u636e<ul> <li>\u6a21\u578b\uff1a</li> <li>Gossi</li> <li>DNS\u7cfb\u7edf</li> </ul> </li> <li>\u4e00\u81f4\u6027\u7b97\u6cd5\uff1a\u53c2\u8003</li> <li>\u53c2\u8003</li> </ul>"},{"location":"Documents/E-Architecture/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/#51-paxos","title":"5.1 \u4e00\u81f4\u6027\u7b97\u6cd5Paxos","text":"<ul> <li>\u53c2\u8003</li> <li>\u53c2\u8003</li> </ul>"},{"location":"Documents/E-Architecture/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/#6","title":"6 \u6570\u636e\u5206\u5e03\u65b9\u5f0f","text":"<pre><code>\u901a\u5e38\u6570\u636e\u4f1a\u6309\u4e00\u5b9a\u7684\u5927\u5c0f\u8fdb\u884c\u5206\u6bb5\uff08\u6570\u636e\u6bb5\u6709\u5f88\u591a\u4e0d\u540c\u7684\u79f0\u8c13\uff0c segment\uff0c fragment\uff0c chunk\uff0c partition \u7b49\u7b49\uff09\u5207\u5206\uff0c\u4ee5\u63d0\u5347\u6570\u636e\u5904\u7406\u6027\u80fd\uff0c\u540c\u6837\u4ece\u526f\u672c\u6570\u636e\u4e2d\u6062\u590d\u6570\u636e\u4e5f\u80fd\u66f4\u597d\u7684\u53d1\u6325\u6240\u6709\u96c6\u7fa4\u4e2d\u8282\u70b9\u5904\u7406\u80fd\u529b\u3002\n</code></pre> <p>\u5c06\u4e00\u4e2a\u5355\u673a\u95ee\u9898\u4f7f\u7528\u5206\u5e03\u5f0f\u89e3\u51b3\uff0c\u9996\u5148\u8981\u89e3\u51b3\u7684\u5c31\u662f\u5982\u4f55\u5c06\u95ee\u9898\u62c6\u89e3\u4e3a\u53ef\u4ee5\u4f7f\u7528\u591a\u673a\u5206\u5e03\u5f0f\u89e3\u51b3\uff0c\u4f7f\u5f97\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\u7684\u6bcf\u53f0\u673a\u5668\u8d1f\u8d23\u539f\u95ee\u9898\u7684\u4e00\u4e2a\u5b50\u96c6\u3002\u7531\u4e8e\u65e0\u8bba\u662f\u8ba1\u7b97\u8fd8\u662f\u5b58\u50a8\uff0c\u5176\u95ee\u9898\u8f93\u5165\u5bf9\u8c61\u90fd\u662f\u6570\u636e\uff0c\u6240\u4ee5\u5982\u4f55\u62c6\u89e3\u5206\u5e03\u5f0f\u7cfb\u7edf\u7684\u8f93\u5165\u6570\u636e\u6210\u4e3a\u5206\u5e03\u5f0f\u7cfb\u7edf\u7684\u57fa\u672c\u95ee\u9898\uff0c\u8fd9\u6837\u7684\u6570\u636e\u62c6\u89e3\u4e3a\u6570\u636e\u5206\u5e03\u65b9\u5f0f\u3002 \u5e38\u7528\u7684\u6570\u636e\u5206\u5e03\u65b9\u5f0f\u6709\uff1a 1. \u54c8\u5e0c 2. \u4e00\u81f4\u6027\u54c8\u5e0c\uff08\u54c8\u5e0c\u73af\u3001\u865a\u62df\u8282\u70b9\uff09 3. \u6309\u6570\u636e\u8303\u56f4\u5206 4. \u6309\u6570\u636e\u91cf\u5206</p>"},{"location":"Documents/E-Architecture/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/#7","title":"7 \u526f\u672c\u534f\u8bae","text":""},{"location":"Documents/E-Architecture/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/#71","title":"7.1 \u4e2d\u5fc3\u5316\u526f\u672c\u63a7\u5236\u534f\u8bae","text":"<p>\u4e2d\u5fc3\u5316\u526f\u672c\u63a7\u5236\u534f\u8bae\uff1a\u57fa\u672c\u601d\u8def\u662f\u7531\u4e00\u4e2a\u4e2d\u5fc3\u8282\u70b9\u534f\u8c03\u526f\u672c\u6570\u636e\u7684\u66f4\u65b0\u3001\u7ef4\u62a4\u526f\u672c\u4e4b\u95f4\u7684\u4e00\u81f4\u6027\u3002 - \u4f18\u52bf\uff1a     - \u534f\u8bae\u76f8\u5bf9\u8f83\u4e3a\u7b80\u5355\uff0c \u6240\u6709\u7684\u526f\u672c\u76f8\u5173\u7684\u63a7\u5236\u4ea4\u7531\u4e2d\u5fc3\u8282\u70b9\u5b8c\u6210\u3002     - \u5e76\u53d1\u63a7\u5236\u5c06\u7531\u4e2d\u5fc3\u8282\u70b9\u5b8c\u6210\uff0c\u4ece\u800c\u4f7f\u5f97\u4e00\u4e2a\u5206\u5e03\u5f0f\u5e76\u53d1\u63a7\u5236\u95ee\u9898\uff0c\u7b80\u5316\u4e3a\u4e00\u4e2a\u5355\u673a\u5e76\u53d1\u63a7\u5236\u95ee\u9898\u3002\uff08\u6240\u8c13\u5e76\u53d1\u63a7\u5236\uff0c\u5373\u591a\u4e2a\u8282\u70b9\u540c\u65f6\u9700\u8981\u4fee\u6539\u526f\u672c\u6570\u636e\u65f6\uff0c\u9700\u8981\u89e3\u51b3\u201c\u5199\u5199\u201d\u3001\u201c\u8bfb\u5199\u201d\u7b49\u5e76\u53d1\u51b2\u7a81\u3002\u5355\u673a\u7cfb\u7edf\u4e0a\u5e38\u7528\u52a0\u9501\u7b49\u65b9\u5f0f\u8fdb\u884c\u5e76\u53d1\u63a7\u5236\u3002\u5bf9\u4e8e\u5206\u5e03\u5f0f\u5e76\u53d1\u63a7\u5236\uff0c\u52a0\u9501\u4e5f\u662f\u4e00\u4e2a\u5e38\u7528\u7684\u65b9\u6cd5\uff0c\u4f46\u5982\u679c\u6ca1\u6709\u4e2d\u5fc3\u8282\u70b9\u7edf\u4e00\u8fdb\u884c\u9501\u7ba1\u7406\uff0c\u5c31\u9700\u8981\u5b8c\u5168\u5206\u5e03\u5f0f\u5316\u7684\u9501\u7cfb\u7edf\u3002 - \u52a3\u52bf\uff1a     - \u7cfb\u7edf\u7684\u53ef\u7528\u6027\u4f9d\u8d56\u4e8e\u4e2d\u5fc3\u5316\u8282\u70b9\uff0c\u5f53\u4e2d\u5fc3\u8282\u70b9\u5f02\u5e38\u6216\u4e0e\u4e2d\u5fc3\u8282\u70b9\u901a\u4fe1\u4e2d\u65ad\u65f6\uff0c\u7cfb\u7edf\u5c06\u5931\u53bb\u67d0\u4e9b\u670d\u52a1\uff08\u901a\u5e38\u81f3\u5c11\u5931\u53bb\u66f4\u65b0\u670d\u52a1\uff09 - \u4e2d\u5fc3\u5316\u526f\u672c\u63a7\u5236\u534f\u8bae\u7ed3\u6784\u4f53\u5982\u4e0b  </p>"},{"location":"Documents/E-Architecture/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/#72","title":"7.2 \u53bb\u4e2d\u5fc3\u5316\u526f\u672c\u63a7\u5236\u534f\u8bae","text":"<p>\u53bb\u4e2d\u5fc3\u5316\u526f\u672c\u63a7\u5236\u534f\u8bae\uff1a\u6ca1\u6709\u4e2d\u5fc3\u8282\u70b9\uff0c\u534f\u8bae\u4e2d\u6240\u6709\u7684\u8282\u70b9\u90fd\u662f\u5b8c\u5168\u5bf9\u7b49\u7684\uff0c \u8282\u70b9\u4e4b\u95f4\u901a\u8fc7\u5e73\u7b49\u534f\u5546\u8fbe\u5230\u4e00\u81f4\u3002 \u4ece\u800c\u53bb\u4e2d\u5fc3\u5316\u534f\u8bae\u6ca1\u6709\u56e0\u4e3a\u4e2d\u5fc3\u5316\u8282\u70b9\u5f02\u5e38\u800c\u5e26\u6765\u7684\u505c\u670d\u52a1\u7b49\u95ee\u9898\u3002 - \u4f18\u52bf\uff1a     - \u76f8\u6bd4\u4e2d\u5fc3\u5316\u534f\u8bae\uff0c\u4e0d\u53d7\u4e2d\u5fc3\u5316\u8282\u70b9\u7684\u5f02\u5e38\u800c\u670d\u52a1\u505c\u6b62\u95ee\u9898\u3002 - \u52a3\u52bf\uff1a     - \u534f\u8bae\u8fc7\u7a0b\u901a\u5e38\u6bd4\u8f83\u590d\u6742     - \u7531\u4e8e\u6d41\u7a0b\u7684\u590d\u6742\uff0c\u53bb\u4e2d\u5fc3\u5316\u534f\u8bae\u7684\u6548\u7387\u6216\u8005\u6027\u80fd\u4e00\u822c\u4e5f\u8f83\u4e2d\u5fc3\u5316\u534f\u8bae - \u53bb\u4e2d\u5fc3\u5316\u526f\u672c\u63a7\u5236\u534f\u8bae\u7ed3\u6784\u56fe </p>"},{"location":"Documents/E-Architecture/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/#73-primary-secondary","title":"7.3 primary-secondary \u534f\u8bae","text":"<p>primary-secondary \u534f\u8bae\uff1a\u526f\u672c\u88ab\u5206\u4e3a\u4e24\u5927\u7c7b\uff0c\u5176\u4e2d\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a\u526f\u672c\u4f5c\u4e3a primary \u526f\u672c\uff0c\u9664 primary \u4ee5\u5916\u7684\u526f\u672c\u90fd\u4f5c\u4e3a secondary \u526f\u672c\u3002\u7ef4\u62a4 primary \u526f\u672c\u7684\u8282\u70b9\u4f5c\u4e3a\u4e2d\u5fc3\u8282\u70b9\uff0c\u4e2d\u5fc3\u8282\u70b9\u8d1f\u8d23\u7ef4\u62a4\u6570\u636e\u7684\u66f4\u65b0\u3001\u5e76\u53d1\u63a7\u5236\u3001\u534f\u8c03\u526f\u672c\u7684\u4e00\u81f4\u6027\u3002 - primary-secondary \u534f\u8bae\u7ed3\u6784\u4f53\u5982\u4e0b </p>"},{"location":"Documents/E-Architecture/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/#8","title":"8 \u8d1f\u8f7d\u5747\u8861","text":"<p>\u4e3a\u4e86\u5b9e\u73b0\u7cfb\u7edf\u7684\u9ad8\u6027\u80fd\u3001\u9ad8\u5e76\u53d1\u3001\u9ad8\u53ef\u7528\uff0c\u5728\u6784\u67b6\u4e2d\u90fd\u4f1a\u8fdb\u884c\u8d1f\u8f7d\u5747\u8861\u8bbe\u8ba1\uff0c\u5b83\u662f\u5206\u5e03\u5f0f\u7cfb\u7edf\u7684\u6838\u5fc3\u548c\u4e2d\u67a2\uff0c\u8d1f\u8f7d\u5747\u8861\u7684\u597d\u574f\u76f4\u63a5\u5f71\u54cd\u7740\u6574\u4e2a\u7cfb\u7edf\u7684\u6027\u80fd\u3002\u8d1f\u8f7d\u5747\u8861\u5206\u4e3a\u8f6f\u4ef6\u5747\u8861\u548c\u786c\u4ef6\u5747\u8861\u4e24\u7c7b\uff0c\u6bd4\u5982apache\u3001nginx\u3001dubbo \u7b49\u5c5e\u4e8e\u8f6f\u4ef6\u8d1f\u8f7d\u5747\u8861\uff0cF5\u5c5e\u4e8e\u786c\u4ef6\u8d1f\u8f7d\u5747\u8861\uff0c\u5f53\u7136\u4ed6\u4eec\u90fd\u4f1a\u4f7f\u7528\u5230\u8d1f\u8f7d\u5747\u8861\u7b97\u6cd5\u3002 \u5e38\u89c1\u7684\u8d1f\u8f7d\u5747\u8861\u7b97\u6cd5\u5305\u542b\uff1a 1. \u8f6e\u8be2\u6cd5\uff08Round Robin\uff09 2. \u52a0\u6743\u8f6e\u8be2\u6cd5\uff08Weight Round Robin\uff09 3. \u968f\u673a\u6cd5\uff08Random\uff09 4. \u52a0\u6743\u968f\u673a\u6cd5\uff08Weight Random\uff09 5. \u5e73\u6ed1\u52a0\u6743\u8f6e\u8be2\u6cd5\uff08Smooth Weight Round Robin\uff09 6. \u6e90\u5730\u5740\u54c8\u5e0c\u6cd5\uff08Hash\uff09 7. \u6700\u5c0f\u8fde\u63a5\u6570\u6cd5\uff08Least Connections\uff09</p>"},{"location":"Documents/E-Architecture/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/#9-id","title":"9 \u5206\u5e03\u5f0fID","text":"<ul> <li>\u53c2\u8003</li> <li>\u53c2\u8003</li> </ul>"},{"location":"Documents/E-Architecture/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/#10","title":"10 \u5206\u5e03\u5f0f\u9501","text":""},{"location":"Documents/E-Architecture/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/#11_1","title":"11 \u5206\u5e03\u5f0f\u4e8b\u52a1","text":"<ul> <li>\u53c2\u8003 \u4e8b\u52a1\u5177\u6709 4 \u4e2a\u5c5e\u6027\uff1a\u539f\u5b50\u6027\u3001\u4e00\u81f4\u6027\u3001\u9694\u79bb\u6027\u3001\u6301\u4e45\u6027\u3002\u8fd9\u56db\u4e2a\u5c5e\u6027\u901a\u5e38\u79f0\u4e3a ACID \u7279\u6027\u3002</li> </ul>"},{"location":"Documents/E-Architecture/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/#111","title":"11.1 \u4e8b\u52a1\u9694\u79bb\u7ea7\u522b","text":"<pre><code>title: \u4e0d\u53ef\u91cd\u590d\u8bfb\u548c\u5e7b\u8bfb\u5230\u5e95\u6709\u4ec0\u4e48\u533a\u522b\u5462\uff1f\n(1) \u4e0d\u53ef\u91cd\u590d\u8bfb\u662f\u8bfb\u53d6\u4e86\u5176\u4ed6\u4e8b\u52a1\u66f4\u6539\u7684\u6570\u636e\uff0c**\u9488\u5bf9update\u64cd\u4f5c**\n\u89e3\u51b3\uff1a\u4f7f\u7528\u884c\u7ea7\u9501\uff0c\u9501\u5b9a\u8be5\u884c\uff0c\u4e8b\u52a1A\u591a\u6b21\u8bfb\u53d6\u64cd\u4f5c\u5b8c\u6210\u540e\u624d\u91ca\u653e\u8be5\u9501\uff0c\u8fd9\u4e2a\u65f6\u5019\u624d\u5141\u8bb8\u5176\u4ed6\u4e8b\u52a1\u66f4\u6539\u521a\u624d\u7684\u6570\u636e\u3002\n\n(2) \u5e7b\u8bfb\u662f\u8bfb\u53d6\u4e86\u5176\u4ed6\u4e8b\u52a1\u65b0\u589e\u7684\u6570\u636e\uff0c**\u9488\u5bf9insert\u548cdelete\u64cd\u4f5c**\n\u89e3\u51b3\uff1a\u4f7f\u7528\u8868\u7ea7\u9501\uff0c\u9501\u5b9a\u6574\u5f20\u8868\uff0c\u4e8b\u52a1A\u591a\u6b21\u8bfb\u53d6\u6570\u636e\u603b\u91cf\u4e4b\u540e\u624d\u91ca\u653e\u8be5\u9501\uff0c\u8fd9\u4e2a\u65f6\u5019\u624d\u5141\u8bb8\u5176\u4ed6\u4e8b\u52a1\u65b0\u589e\u6570\u636e\u3002\n\u8fd9\u65f6\u5019\u518d\u7406\u89e3\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b\u5c31\u7b80\u5355\u591a\u4e86\u5462\u3002\n</code></pre> <ul> <li>\u810f\u8bfb\uff08dirty read\uff0cDR\uff09\uff1a\u8bfb\u53d6\u672a\u63d0\u4ea4\u6570\u636e\uff1b\u4e8b\u52a1T1\u4fee\u6539\u4e00\u4e2a\u6570\u636e\uff0c\u4e8b\u52a1T2\u5728T1\u63d0\u4ea4\u6216\u8005\u56de\u6eda\u4e4b\u524d\u8bfb\u53d6\u5230\u4e86\u8fd9\u4e2a\u6570\u636e\u3002\u5982\u679cT1\u6267\u884c\u4e86\u56de\u6eda\uff0c\u90a3\u4e48T2\u5c31\u8bfb\u53d6\u5230\u4e86\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u503c\u3002</li> <li>\u4e0d\u53ef\u91cd\u590d\u8bfb\uff08non-repeatable read\uff0cNRR\uff09\uff1a\u524d\u540e\u591a\u6b21\u8bfb\u53d6\uff0c\u6570\u636e\u5185\u5bb9\u4e0d\u4e00\u81f4\uff1b\u4e8b\u52a1T1\u8bfb\u53d6\u4e00\u4e2a\u6570\u636e\uff0c\u7136\u540e\u4e8b\u52a1T2\u4fee\u6539\u6216\u8005\u5220\u9664\u8fd9\u4e2a\u6570\u636e\u5e76\u63d0\u4ea4\u3002\u63a5\u4e0b\u6765\uff0c\u5982\u679cT1\u8bd5\u56fe\u518d\u6b21\u8bfb\u53d6\u8fd9\u4e2a\u6570\u636e\uff0c\u90a3\u4e48\u5b83\u4f1a\u8bfb\u53d6\u5230\u4e00\u4e2a\u4fee\u6539\u8fc7\u7684\u503c\uff0c\u6216\u8005\u53d1\u73b0\u8fd9\u4e2a\u6570\u636e\u5df2\u7ecf\u88ab\u5220\u9664\u4e86</li> <li>\u5e7b\u8bfb\uff08phantom read\uff0cPR\uff09\uff1a\u524d\u540e\u591a\u6b21\u8bfb\u53d6\uff0c\u6570\u636e\u603b\u91cf\u4e0d\u4e00\u81f4\uff1b\u52a1T1\u8bfb\u53d6\u4e00\u7ec4\u6ee1\u8db3\u67d0\u4e00\u67e5\u8be2\u6761\u4ef6\u7684\u6570\u636e\uff0c\u7136\u540e\u4e8b\u52a1T2\u521b\u5efa\u4e00\u7ec4\u6ee1\u8db3T1\u67e5\u8be2\u6761\u4ef6\u7684\u65b0\u6570\u636e\u5e76\u63d0\u4ea4\u3002\u5982\u679cT1\u518d\u6b21\u6309\u8fd9\u4e00\u67e5\u8be2\u6761\u4ef6\u8bfb\u53d6\uff0c\u90a3\u4e48\u5b83\u5c06\u83b7\u5f97\u4e0d\u540c\u4e8e\u7b2c\u4e00\u6b21\u8bfb\u53d6\u7684\u6570\u636e\u3002</li> <li>\u6570\u636e\u5e93\u7684\u9694\u79bb\u7ea7\u522b<ul> <li>\u8bfb\u672a\u63d0\u4ea4\uff08read uncommitted\uff0cRU\uff09</li> <li>\u8bfb\u5df2\u63d0\u4ea4\uff08read committed\uff0cRC\uff09</li> <li>\u53ef\u91cd\u590d\u8bfb\uff08repeatable read\uff0cRR\uff09</li> <li>\u53ef\u4e32\u884c\u5316\uff08serializable\uff09 </li> </ul> </li> </ul>"},{"location":"Documents/E-Architecture/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/#112-xa","title":"11.2 \u4e24\u9636\u6bb5\u63d0\u4ea4/XA","text":"<pre><code>\u4e24\u9636\u6bb5\u63d0\u4ea4\u534f\u8bae\u628a\u5206\u5e03\u5f0f\u4e8b\u52a1\u5206\u4e3a\u4e24\u4e2a\u9636\u6bb5\uff0c\u4e00\u4e2a\u662f\u51c6\u5907\u9636\u6bb5\uff0c\u53e6\u4e00\u4e2a\u662f\u63d0\u4ea4\u9636\u6bb5\u3002\u51c6\u5907\u9636\u6bb5\u548c\u63d0\u4ea4\u9636\u6bb5\u90fd\u662f\u7531\u4e8b\u52a1\u7ba1\u7406\u5668\u53d1\u8d77\u7684\uff0c\u4e3a\u4e86\u63a5\u4e0b\u6765\u8bb2\u89e3\u65b9\u4fbf\uff0c\u6211\u4eec\u5c06\u4e8b\u52a1\u7ba1\u7406\u5668\u79f0\u4e3a\u534f\u8c03\u8005\uff0c\u5c06\u8d44\u6e90\u7ba1\u7406\u5668\u79f0\u4e3a\u53c2\u4e0e\u8005\u3002\n</code></pre> <ul> <li>\u51c6\u5907\u9636\u6bb5\uff1a\u534f\u8c03\u8005\u5411\u53c2\u4e0e\u8005\u53d1\u8d77\u6307\u4ee4\uff0c\u53c2\u4e0e\u8005\u8bc4\u4f30\u81ea\u5df1\u7684\u72b6\u6001\uff0c\u5982\u679c\u53c2\u4e0e\u8005\u8bc4\u4f30\u6307\u4ee4\u53ef\u4ee5\u5b8c\u6210\uff0c\u5219\u4f1a\u5199redo\u6216\u8005undo\u65e5\u5fd7\uff08Write-Ahead Log\u7684\u4e00\u79cd\uff09\uff0c\u7136\u540e\u9501\u5b9a\u8d44\u6e90\uff0c\u6267\u884c\u64cd\u4f5c\uff0c\u4f46\u662f\u5e76\u4e0d\u63d0\u4ea4\u3002</li> <li>\u63d0\u4ea4\u9636\u6bb5\uff1a\u5982\u679c\u6bcf\u4e2a\u53c2\u4e0e\u8005\u660e\u786e\u8fd4\u56de\u51c6\u5907\u6210\u529f\uff0c\u4e5f\u5c31\u662f\u9884\u7559\u8d44\u6e90\u548c\u6267\u884c\u64cd\u4f5c\u6210\u529f\uff0c\u5219\u534f\u8c03\u8005\u5411\u53c2\u4e0e\u8005\u53d1\u8d77\u63d0\u4ea4\u6307\u4ee4\uff0c\u53c2\u4e0e\u8005\u63d0\u4ea4\u8d44\u6e90\u53d8\u66f4\u7684\u4e8b\u52a1\uff0c\u91ca\u653e\u9501\u5b9a\u7684\u8d44\u6e90\uff1b\u5982\u679c\u4efb\u4f55\u4e00\u4e2a\u53c2\u4e0e\u8005\u660e\u786e\u8fd4\u56de\u51c6\u5907\u5931\u8d25\uff0c\u4e5f\u5c31\u662f\u9884\u7559\u8d44\u6e90\u6216\u8005\u6267\u884c\u64cd\u4f5c\u5931\u8d25\uff0c\u5219\u534f\u8c03\u8005\u5411\u53c2\u4e0e\u8005\u53d1\u8d77\u4e2d\u6b62\u6307\u4ee4\uff0c\u53c2\u4e0e\u8005\u53d6\u6d88\u5df2\u7ecf\u53d8\u66f4\u7684\u4e8b\u52a1\uff0c\u6267\u884cundo\u65e5\u5fd7\uff0c\u91ca\u653e\u9501\u5b9a\u7684\u8d44\u6e90\u3002</li> <li>\u963b\u585e\uff1a\u4ece\u4e0a\u9762\u7684\u63cf\u8ff0\u6765\u770b\uff0c\u5bf9\u4e8e\u4efb\u4f55\u4e00\u6b21\u6307\u4ee4\u90fd\u5fc5\u987b\u6536\u5230\u660e\u786e\u7684\u54cd\u5e94\uff0c\u624d\u4f1a\u7ee7\u7eed\u8fdb\u884c\u4e0b\u4e00\u6b65\uff0c\u5426\u5219\u5904\u4e8e\u963b\u585e\u72b6\u6001\uff0c\u5360\u7528\u7684\u8d44\u6e90\u88ab\u4e00\u76f4\u9501\u5b9a\uff0c\u4e0d\u4f1a\u88ab\u91ca\u653e\u3002</li> <li>\u5355\u70b9\u6545\u969c\uff1a\u5982\u679c\u534f\u8c03\u8005\u5b95\u673a\uff0c\u53c2\u4e0e\u8005\u6ca1\u6709\u534f\u8c03\u8005\u6307\u6325\uff0c\u5219\u4f1a\u4e00\u76f4\u963b\u585e\uff0c\u5c3d\u7ba1\u53ef\u4ee5\u901a\u8fc7\u9009\u4e3e\u65b0\u7684\u534f\u8c03\u8005\u66ff\u4ee3\u539f\u6709\u534f\u8c03\u8005\uff0c\u4f46\u662f\u5982\u679c\u534f\u8c03\u8005\u5728\u53d1\u9001\u4e00\u4e2a\u63d0\u4ea4\u6307\u4ee4\u540e\u5b95\u673a\uff0c\u800c\u63d0\u4ea4\u6307\u4ee4\u4ec5\u4ec5\u88ab\u4e00\u4e2a\u53c2\u4e0e\u8005\u63a5\u6536\uff0c\u5e76\u4e14\u53c2\u4e0e\u8005\u63a5\u6536\u540e\u4e5f\u5b95\u673a\uff0c\u5219\u65b0\u4e0a\u4efb\u7684\u534f\u8c03\u8005\u65e0\u6cd5\u5904\u7406\u8fd9\u79cd\u60c5\u51b5\u3002</li> <li>\u8111\u88c2\uff1a\u534f\u8c03\u8005\u53d1\u9001\u63d0\u4ea4\u6307\u4ee4\uff0c\u6709\u7684\u53c2\u4e0e\u8005\u63a5\u6536\u5230\u5e76\u6267\u884c\u4e86\u4e8b\u52a1\uff0c\u6709\u7684\u53c2\u4e0e\u8005\u6ca1\u6709\u63a5\u6536\u5230\u4e8b\u52a1\u5c31\u6ca1\u6709\u6267\u884c\u4e8b\u52a1\uff0c\u591a\u4e2a\u53c2\u4e0e\u8005\u4e4b\u95f4\u662f\u4e0d\u4e00\u81f4\u7684\u3002</li> <li>\u4e24\u9636\u6bb5\u63d0\u4ea4\u56fe\u793a\u5982\u4e0b\uff1a </li> </ul>"},{"location":"Documents/E-Architecture/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/#113","title":"11.3 \u4e09\u9636\u6bb5\u63d0\u4ea4","text":"<pre><code>\u4e09\u9636\u6bb5\u63d0\u4ea4\u534f\u8bae\u662f\u4e24\u9636\u6bb5\u63d0\u4ea4\u534f\u8bae\u7684\u6539\u8fdb\u7248\u672c\u3002\u5b83\u901a\u8fc7\u8d85\u65f6\u673a\u5236\u89e3\u51b3\u4e86\u963b\u585e\u7684\u95ee\u9898\uff0c\u5e76\u4e14\u628a\u4e24\u4e2a\u9636\u6bb5\u589e\u52a0\u4e3a\u4ee5\u4e0b\u4e09\u4e2a\u9636\u6bb5\uff08\u589e\u52a0\u4e86\u8be2\u95ee\u9636\u6bb5\uff0c\u51c6\u5907\u9636\u6bb5\u3001\u63d0\u4ea4\u9636\u6bb5\u57fa\u672c\u548c\u4e24\u9636\u6bb5\u63d0\u4ea4\u4e00\u81f4\uff09\u3002\n</code></pre> <pre><code>title:\u4e09\u9636\u6bb5\u63d0\u4ea4\u76f8\u6bd4\u4e24\u9636\u6bb5\u63d0\u4ea4\u4f18\u52bf\n1. \u589e\u52a0\u4e86\u4e00\u4e2a\u8be2\u95ee\u9636\u6bb5\uff0c\u8be2\u95ee\u9636\u6bb5\u53ef\u4ee5\u786e\u4fdd\u5c3d\u53ef\u80fd\u65e9\u5730\u53d1\u73b0\u65e0\u6cd5\u6267\u884c\u64cd\u4f5c\u800c\u9700\u8981\u4e2d\u6b62\u7684\u884c\u4e3a\uff0c\u4f46\u662f\u5b83\u5e76\u4e0d\u80fd\u53d1\u73b0\u6240\u6709\u8fd9\u79cd\u884c\u4e3a\uff0c\u53ea\u4f1a\u51cf\u5c11\u8fd9\u79cd\u60c5\u51b5\u7684\u53d1\u751f\u3002\n2. \u5728\u51c6\u5907\u9636\u6bb5\u4ee5\u540e\uff0c\u534f\u8c03\u8005\u548c\u53c2\u4e0e\u8005\u6267\u884c\u7684\u4efb\u52a1\u4e2d\u90fd\u589e\u52a0\u4e86\u8d85\u65f6\uff0c\u4e00\u65e6\u8d85\u65f6\uff0c\u5219\u534f\u8c03\u8005\u548c\u53c2\u4e0e\u8005\u90fd\u4f1a\u7ee7\u7eed\u63d0\u4ea4\u4e8b\u52a1\uff0c\u9ed8\u8ba4\u4e3a\u6210\u529f\uff0c\u8fd9\u4e5f\u662f\u6839\u636e\u6982\u7387\u7edf\u8ba1\u8d85\u65f6\u540e\u9ed8\u8ba4\u4e3a\u6210\u529f\u7684\u6b63\u786e\u6027\u6700\u5927\u3002\n</code></pre> <ul> <li>\u8be2\u95ee\u9636\u6bb5\uff1a\u534f\u8c03\u8005\u8be2\u95ee\u53c2\u4e0e\u8005\u662f\u5426\u53ef\u4ee5\u5b8c\u6210\u6307\u4ee4\uff0c\u534f\u8c03\u8005\u53ea\u9700\u8981\u56de\u7b54\u662f\u6216\u4e0d\u662f\uff0c\u800c\u4e0d\u9700\u8981\u505a\u771f\u6b63\u7684\u64cd\u4f5c\uff0c\u8fd9\u4e2a\u9636\u6bb5\u8d85\u65f6\u4f1a\u5bfc\u81f4\u4e2d\u6b62\u3002</li> <li>\u51c6\u5907\u9636\u6bb5\uff1a\u5982\u679c\u5728\u8be2\u95ee\u9636\u6bb5\u6240\u6709\u53c2\u4e0e\u8005\u90fd\u8fd4\u56de\u53ef\u4ee5\u6267\u884c\u64cd\u4f5c\uff0c\u5219\u534f\u8c03\u8005\u5411\u53c2\u4e0e\u8005\u53d1\u9001\u9884\u6267\u884c\u8bf7\u6c42\uff0c\u7136\u540e\u53c2\u4e0e\u8005\u5199redo\u548cundo\u65e5\u5fd7\uff0c\u6267\u884c\u64cd\u4f5c\u4f46\u662f\u4e0d\u63d0\u4ea4\u64cd\u4f5c\uff1a\u5982\u679c\u5728\u8be2\u95ee\u9636\u6bb5\u4efb\u610f\u53c2\u4e0e\u8005\u8fd4\u56de\u4e0d\u80fd\u6267\u884c\u64cd\u4f5c\u7684\u7ed3\u679c\uff0c\u5219\u534f\u8c03\u8005\u5411\u53c2\u4e0e\u8005\u53d1\u9001\u4e2d\u6b62\u8bf7\u6c42\uff0c\u8fd9\u91cc\u7684\u903b\u8f91\u4e0e\u4e24\u9636\u6bb5\u63d0\u4ea4\u534f\u8bae\u7684\u51c6\u5907\u9636\u6bb5\u662f\u76f8\u4f3c\u7684\u3002</li> <li>\u63d0\u4ea4\u9636\u6bb5\uff1a\u5982\u679c\u6bcf\u4e2a\u53c2\u4e0e\u8005\u5728\u51c6\u5907\u9636\u6bb5\u8fd4\u56de\u51c6\u5907\u6210\u529f\uff0c\u4e5f\u5c31\u662f\u8bf4\u9884\u7559\u8d44\u6e90\u548c\u6267\u884c\u64cd\u4f5c\u6210\u529f\uff0c\u5219\u534f\u8c03\u8005\u5411\u53c2\u4e0e\u8005\u53d1\u8d77\u63d0\u4ea4\u6307\u4ee4\uff0c\u53c2\u4e0e\u8005\u63d0\u4ea4\u8d44\u6e90\u53d8\u66f4\u7684\u4e8b\u52a1\uff0c\u91ca\u653e\u9501\u5b9a\u7684\u8d44\u6e90\uff1a\u5982\u679c\u4efb\u4f55\u53c2\u4e0e\u8005\u8fd4\u56de\u51c6\u5907\u5931\u8d25\uff0c\u4e5f\u5c31\u662f\u8bf4\u9884\u7559\u8d44\u6e90\u6216\u8005\u6267\u884c\u64cd\u4f5c\u5931\u8d25\uff0c\u5219\u534f\u8c03\u8005\u5411\u53c2\u4e0e\u8005\u53d1\u8d77\u4e2d\u6b62\u6307\u4ee4\uff0c\u53c2\u4e0e\u8005\u53d6\u6d88\u5df1\u7ecf\u53d8\u66f4\u7684\u4e8b\u52a1\uff0c\u6267\u884cundo\u65e5\u5fd7\uff0c\u91ca\u653e\u9501\u5b9a\u7684\u8d44\u6e90\uff0c\u8fd9\u91cc\u7684\u903b\u8f91\u4e0e\u4e24\u9636\u6bb5\u63d0\u4ea4\u534f\u8bae\u7684\u63d0\u4ea4\u9636\u6bb5\u4e00\u81f4\u3002</li> <li>\u4e09\u9636\u6bb5\u63d0\u4ea4\u56fe\u793a\u5982\u4e0b\uff1a </li> </ul>"},{"location":"Documents/E-Architecture/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/#114-saga","title":"11.4 SAGA","text":""},{"location":"Documents/E-Architecture/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/#115-tcc","title":"11.5 TCC","text":"<pre><code>\u4e24\u9636\u6bb5\u53ca\u4e09\u9636\u6bb5\u65b9\u6848\u4e2d\u90fd\u5305\u542b\u591a\u4e2a\u53c2\u4e0e\u8005\u3001\u591a\u4e2a\u9636\u6bb5\u5b9e\u73b0\u4e00\u4e2a\u4e8b\u52a1\uff0c\u5b9e\u73b0\u590d\u6742\uff0c\u6027\u80fd\u4e5f\u662f\u4e00\u4e2a\u5f88\u5927\u7684\u95ee\u9898\uff0c\u56e0\u6b64\uff0c\u5728\u4e92\u8054\u7f51\u7684\u9ad8\u5e76\u53d1\u7cfb\u7edf\u4e2d\uff0c\u9c9c\u6709\u4f7f\u7528\u4e24\u9636\u6bb5\u63d0\u4ea4\u548c\u4e09\u9636\u6bb5\u63d0\u4ea4\u534f\u8bae\u7684\u573a\u666f\u3002\n</code></pre> <p>TCC\u534f\u8bae\u5c06\u4e00\u4e2a\u4efb\u52a1\u62c6\u5206\u6210Try\u3001Confirm\u3001Cancel\u4e09\u4e2a\u6b65\u9aa4\uff0c\u6b63\u5e38\u7684\u6d41\u7a0b\u4f1a\u5148\u6267\u884cTry\uff0c\u5982\u679c\u6267\u884c\u6ca1\u6709\u95ee\u9898\uff0c\u5219\u518d\u6267\u884cConfirm\uff0c\u5982\u679c\u6267\u884c\u8fc7\u7a0b\u4e2d\u51fa\u4e86\u95ee\u9898\uff0c\u5219\u6267\u884c\u64cd\u4f5c\u7684\u9006\u64cd\u4f5cCancel\u3002\u4ece\u6b63\u5e38\u7684\u6d41\u7a0b\u4e0a\u8bb2\uff0c\u8fd9\u4ecd\u7136\u662f\u4e00\u4e2a\u4e24\u9636\u6bb5\u63d0\u4ea4\u534f\u8bae\uff0c\u4f46\u662f\u5728\u6267\u884c\u51fa\u73b0\u95ee\u9898\u65f6\u6709\u4e00\u5b9a\u7684\u81ea\u6211\u4fee\u590d\u80fd\u529b\uff0c\u5982\u679c\u4efb\u4f55\u53c2\u4e0e\u8005\u51fa\u73b0\u4e86\u95ee\u9898\uff0c\u5219\u534f\u8c03\u8005\u901a\u8fc7\u6267\u884c\u64cd\u4f5c\u7684\u9006\u64cd\u4f5c\u6765Cancel\u4e4b\u524d\u7684\u64cd\u4f5c\uff0c\u8fbe\u5230\u6700\u7ec8\u7684\u4e00\u81f4\u72b6\u6001\u3002 - \u95ee\u9898\uff1a\u5982\u679c\u9047\u5230\u6781\u7aef\u60c5\u51b5\uff0c\u5219TCC\u4f1a\u6709\u5f88\u591a\u95ee\u9898\uff0c\u4f8b\u5982\uff0c\u5982\u679c\u5728\u53d6\u6d88\u65f6\u4e00\u4e9b\u53c2\u4e0e\u8005\u6536\u5230\u6307\u4ee4\uff0c\u800c\u53e6\u4e00\u4e9b\u53c2\u4e0e\u8005\u6ca1\u6709\u6536\u5230\u6307\u4ee4\uff0c\u5219\u6574\u4e2a\u7cfb\u7edf\u4ecd\u7136\u662f\u4e0d\u4e00\u81f4\u7684\u3002\u5bf9\u4e8e\u8fd9\u79cd\u590d\u6742\u7684\u60c5\u51b5\uff0c\u7cfb\u7edf\u9996\u5148\u4f1a\u901a\u8fc7\u8865\u507f\u7684\u65b9\u5f0f\u5c1d\u8bd5\u81ea\u52a8\u4fee\u590d\uff0c\u5982\u679c\u7cfb\u7edf\u65e0\u6cd5\u4fee\u590d\uff0c\u5219\u5fc5\u987b\u7531\u4eba\u5de5\u53c2\u4e0e\u89e3\u51b3\u3002 - TCC\u56fe\u793a\u5982\u4e0b\uff1a </p>"},{"location":"Documents/E-Architecture/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/#12_1","title":"12 \u4e3b\u4ece\u590d\u5236","text":""},{"location":"Documents/E-Architecture/%E5%BC%82%E6%AD%A5%E5%AE%9A%E6%97%B6%E5%99%A8/","title":"\u5f02\u6b65\u5b9a\u65f6\u5668","text":"<ul> <li>c++11\u5b9e\u73b0\u5f02\u6b65\u5b9a\u65f6\u5668</li> </ul>"},{"location":"Documents/E-Architecture/%E5%BC%82%E6%AD%A5%E5%AE%9A%E6%97%B6%E5%99%A8/#1","title":"1 \u5f02\u6b65\u5b9a\u65f6\u5668\u5b9e\u73b0\u601d\u8def","text":"<ol> <li>\u5b9a\u65f6\u5668\u8981\u6c42\u5f02\u6b65\u6267\u884c\u4efb\u52a1\uff1a\u5f00\u8f9f\u72ec\u7acb\u7684\u7ebf\u7a0b</li> <li>\u5b9a\u65f6\u5668\u8981\u6c42\u80fd\u591f\u542f\u52a8\u548c\u53d6\u6d88\uff1a\u63d0\u4f9b\u5b89\u5168\u7684\u53d6\u6d88\u64cd\u4f5c\uff0c\u4f7f\u7528\u4e92\u65a5\u91cf\u548c\u4fe1\u53f7\u91cf</li> </ol>"},{"location":"Documents/E-Architecture/%E5%BC%82%E6%AD%A5%E5%AE%9A%E6%97%B6%E5%99%A8/#11","title":"1.1 \u53c2\u8003\u4ee3\u7801","text":"<pre><code>#ifndef TIMER_H_\n#define TIMER_H_\n#include&lt;functional&gt;\n#include&lt;chrono&gt;\n#include&lt;thread&gt;\n#include&lt;atomic&gt;\n#include&lt;memory&gt;\n#include&lt;mutex&gt;\n#include&lt;condition_variable&gt;\nclass Timer{\npublic:\nTimer() :expired_(true), try_to_expire_(false){\n}\n\nTimer(const Timer&amp; t){\nexpired_ = t.expired_.load();\ntry_to_expire_ = t.try_to_expire_.load();\n}\n~Timer(){\nExpire();\n//      std::cout &lt;&lt; \"timer destructed!\" &lt;&lt; std::endl;\n}\n\nvoid StartTimer(int interval, std::function&lt;void()&gt; task){\nif (expired_ == false){\n//          std::cout &lt;&lt; \"timer is currently running, please expire it first...\" &lt;&lt; std::endl;\nreturn;\n}\nexpired_ = false;\nstd::thread([this, interval, task](){\nwhile (!try_to_expire_){\nstd::this_thread::sleep_for(std::chrono::milliseconds(interval));\ntask();\n}\n//          std::cout &lt;&lt; \"stop task...\" &lt;&lt; std::endl;\n{\nstd::lock_guard&lt;std::mutex&gt; locker(mutex_);\nexpired_ = true;\nexpired_cond_.notify_one();\n}\n}).detach();\n}\n\nvoid Expire(){\nif (expired_){\nreturn;\n}\n\nif (try_to_expire_){\n//          std::cout &lt;&lt; \"timer is trying to expire, please wait...\" &lt;&lt; std::endl;\nreturn;\n}\ntry_to_expire_ = true;\n{\nstd::unique_lock&lt;std::mutex&gt; locker(mutex_);\nexpired_cond_.wait(locker, [this]{return expired_ == true; });\nif (expired_ == true){\n//              std::cout &lt;&lt; \"timer expired!\" &lt;&lt; std::endl;\ntry_to_expire_ = false;\n}\n}\n}\n\ntemplate&lt;typename callable, class... arguments&gt;\nvoid SyncWait(int after, callable&amp;&amp; f, arguments&amp;&amp;... args){\n\nstd::function&lt;typename std::result_of&lt;callable(arguments...)&gt;::type()&gt; task\n(std::bind(std::forward&lt;callable&gt;(f), std::forward&lt;arguments&gt;(args)...));\nstd::this_thread::sleep_for(std::chrono::milliseconds(after));\ntask();\n}\ntemplate&lt;typename callable, class... arguments&gt;\nvoid AsyncWait(int after, callable&amp;&amp; f, arguments&amp;&amp;... args){\nstd::function&lt;typename std::result_of&lt;callable(arguments...)&gt;::type()&gt; task\n(std::bind(std::forward&lt;callable&gt;(f), std::forward&lt;arguments&gt;(args)...));\n\nstd::thread([after, task](){\nstd::this_thread::sleep_for(std::chrono::milliseconds(after));\ntask();\n}).detach();\n}\n\nprivate:\nstd::atomic&lt;bool&gt; expired_;\nstd::atomic&lt;bool&gt; try_to_expire_;\nstd::mutex mutex_;\nstd::condition_variable expired_cond_;\n};\n#endif\n\n////////////////////test.cpp\n#include&lt;iostream&gt;\n#include&lt;string&gt;\n#include&lt;memory&gt;\n#include\"Timer.hpp\"\nusing namespace std;\nvoid EchoFunc(std::string&amp;&amp; s){\nstd::cout &lt;&lt; \"test : \" &lt;&lt; s &lt;&lt; endl;\n}\n\nint main(){\nTimer t;\n//\u5468\u671f\u6027\u6267\u884c\u5b9a\u65f6\u4efb\u52a1\nt.StartTimer(1000, std::bind(EchoFunc,\"hello world!\"));\nstd::this_thread::sleep_for(std::chrono::seconds(4));\nstd::cout &lt;&lt; \"try to expire timer!\" &lt;&lt; std::endl;\nt.Expire();\n\n//\u5468\u671f\u6027\u6267\u884c\u5b9a\u65f6\u4efb\u52a1\nt.StartTimer(1000, std::bind(EchoFunc,  \"hello c++11!\"));\nstd::this_thread::sleep_for(std::chrono::seconds(4));\nstd::cout &lt;&lt; \"try to expire timer!\" &lt;&lt; std::endl;\nt.Expire();\n\nstd::this_thread::sleep_for(std::chrono::seconds(2));\n\n//\u53ea\u6267\u884c\u4e00\u6b21\u5b9a\u65f6\u4efb\u52a1\n//\u540c\u6b65\nt.SyncWait(1000, EchoFunc, \"hello world!\");\n//\u5f02\u6b65\nt.AsyncWait(1000, EchoFunc, \"hello c++11!\");\n\nstd::this_thread::sleep_for(std::chrono::seconds(2));\n\nreturn 0;\n}\n</code></pre>"},{"location":"Documents/E-Architecture/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84/","title":"\u5fae\u670d\u52a1\u67b6\u6784","text":"<pre><code>title: \u4ec0\u4e48\u662f\u5fae\u670d\u52a1\uff1f\n\n1. \u5fae\u670d\u52a1\u67b6\u6784\uff08\u901a\u5e38\u7b80\u79f0\u4e3a\u5fae\u670d\u52a1\uff09\u662f\u6307\u5f00\u53d1\u5e94\u7528\u6240\u7528\u7684\u4e00\u79cd\u67b6\u6784\u5f62\u5f0f\u3002\u901a\u8fc7\u5fae\u670d\u52a1\uff0c\u53ef\u5c06\u5927\u578b\u5e94\u7528\u5206\u89e3\u6210\u591a\u4e2a\u72ec\u7acb\u7684\u7ec4\u4ef6\uff0c\u5176\u4e2d\u6bcf\u4e2a\u7ec4\u4ef6\u90fd\u6709\u5404\u81ea\u7684\u8d23\u4efb\u9886\u57df\u3002\u5728\u5904\u7406\u4e00\u4e2a\u7528\u6237\u8bf7\u6c42\u65f6\uff0c\u57fa\u4e8e\u5fae\u670d\u52a1\u7684\u5e94\u7528\u53ef\u80fd\u4f1a\u8c03\u7528\u8bb8\u591a\u5185\u90e8\u5fae\u670d\u52a1\u6765\u5171\u540c\u751f\u6210\u5176\u54cd\u5e94\u3002\n2. \u6bcf\u4e2a\u670d\u52a1\u8fd0\u884c\u5728\u4e00\u4e2a\u5355\u72ec\u7684\u8fdb\u7a0b\u4e2d\u3002\n3. \u6bcf\u4e2a\u670d\u52a1\u6709\u591a\u4e2a\u5b9e\u4f8b\u5728\u8fd0\u884c\uff0c\u6bcf\u4e2a\u5b9e\u4f8b\u53ef\u4ee5\u8fd0\u884c\u5728\u5bb9\u5668\u5316\u5e73\u53f0\u5185\uff0c\u8fbe\u5230\u5e73\u6ed1\u4f38\u7f29\u7684\u6548\u679c\u3002\n4. \u5404\u5fae\u670d\u52a1\u95f4\u4e00\u822c\u901a\u8fc7RESTful API\u6765\u8fdb\u884c\u901a\u4fe1\u3002\n5. \u5fae\u670d\u52a1\u67b6\u6784\u81f4\u529b\u4e8e\u677e\u8026\u5408\u548c\u9ad8\u5185\u805a\u7684\u6548\u679c\u3002\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/Asio/00-asio/","title":"Asio","text":"<ul> <li>\u5b98\u7f51 ASIO \u662f\u7528\u4e8e\u00a0<code>network \u548c low-level I/O</code> \u7f16\u7a0b\u7684\u8de8\u5e73\u53f0 C++\u5e93\uff0c\u5b83\u4f7f\u7528\u73b0\u4ee3 C++\u65b9\u6cd5\u4e3a\u5f00\u53d1\u4eba\u5458\u63d0\u4f9b\u4e00\u81f4\u7684\u5f02\u6b65\u6a21\u578b\u3002Asio \u4e0d\u4ec5\u4ec5\u662f\u4e00\u4e2a\u7f51\u7edc\u5e93\uff0casio \u7684\u5f02\u6b65\u64cd\u4f5c\u5e76\u4e0d\u5c40\u9650\u4e8e\u7f51\u7edc\u7f16\u7a0b\uff0c\u5b83\u8fd8\u652f\u6301 UNIX \u4fe1\u53f7\u3001\u5b9a\u65f6\u5668\u3001\u4e32\u53e3\u8bfb\u5199\u3001 SSL \u7b49\u529f\u80fd\u3002 </li> </ul>"},{"location":"Documents/F-Open-Source-Project/Asio/00-asio/#1","title":"1 \u4ee3\u7801\u98ce\u683c","text":"<ul> <li>asio \u4e2d\u5f02\u6b65\u63a5\u53e3\u4f1a\u6709 <code>async_</code> \u524d\u7f00\uff0c\u5982 <code>async_accept</code>\u3002</li> <li>asio \u4e3a\u4e86\u7b80\u5316\uff0c\u5f88\u591a\u7c7b\u578b\u5176\u5b9e\u662f\u6a21\u677f\u5177\u4f53\u5316\u7c7b\u7684 typedef\uff0c\u5982 <code>tcp::socket</code> \u662f <code>typedef basic_stream_socket&lt;tcp&gt; socket;</code></li> <li>asio \u4e2d\u6709\u9700\u8981\u5c01\u88c5\u7c7b\u63a5\u53e3\u7684\u5168\u5c40\u63a5\u53e3\uff0c\u6bd4\u5982 <code>asio::async_write</code> \u6700\u7ec8\u4f1a\u8c03\u7528\u5230 <code>socket::async_write</code>\uff0c<code>asio::connect</code> \u6700\u7ec8\u8c03\u7528\u5230 <code>socket:\uff1aconnect</code></li> </ul>"},{"location":"Documents/F-Open-Source-Project/Asio/00-asio/#2-asio","title":"2 Asio \u6a21\u578b","text":""},{"location":"Documents/F-Open-Source-Project/Asio/00-asio/#3","title":"3 \u53c2\u8003\u8d44\u6599","text":"<ul> <li>https://www.cnblogs.com/ishen/p/14593598.html</li> </ul>"},{"location":"Documents/F-Open-Source-Project/Asio/01-endpoint/","title":"endpoint","text":"<ul> <li>\u529f\u80fd\uff1a\u5bf9 socket address \u7684\u5c01\u88c5\uff0c\u6301\u6709\u7aef\u53e3\u548c ip \u5730\u5740\u4fe1\u606f\uff0c\u652f\u6301 ipv4 \u548c ipv6\u3002</li> </ul>"},{"location":"Documents/F-Open-Source-Project/Asio/01-endpoint/#1-endpoint","title":"1 endpoint \u7c7b\u6210\u5458","text":"<p>endpoint \u7c7b\u6700\u91cd\u8981\u7684\u662f\u8fd9\u4e2a\u8054\u5408\u4f53\u6210\u5458\uff0c\u662f\u5bf9\u901a\u7528\u5957\u63a5\u5b57\u5730\u5740\u7ed3\u6784 sockaddr\u3001ipv4 \u5957\u63a5\u5b57\u5730\u5740\u7ed3\u6784 sockaddr_in\u3001ipv6 \u5957\u63a5\u5b57\u5730\u5740\u7ed3\u6784 sockaddr_in6\u7684\u5c01\u88c5\u3002</p> <pre><code>class endpoint\n{\n... \u7701\u7565 ...\nunion data_union\n{\nasio::detail::socket_addr_type base; //\u5bf9\u5e94 sockaddr\nasio::detail::sockaddr_in4_type v4;  //\u5bf9\u5e94 sockaddr_in\nasio::detail::sockaddr_in6_type v6;  //\u5bf9\u5e94 sockaddr_in6\n} data_;\n}\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/Asio/01-endpoint/#2-endpoint","title":"2 endpoint \u7c7b\u6784\u9020","text":"<p>\u6b64\u6784\u9020\u53ea\u662f\u4f17\u591a\u6784\u9020\u51fd\u6570\u4e2d\u7684\u4e00\u4e2a\uff0c\u4e3b\u8981\u662f\u6839\u636e <code>family</code>\u3001<code>port</code> \u521d\u59cb\u5316\u6210\u5458 <code>data_</code>\u3002</p> <pre><code>endpoint::endpoint(int family, unsigned short port_num) ASIO_NOEXCEPT\n: data_()\n{\nusing namespace std; // For memcpy.\nif (family == ASIO_OS_DEF(AF_INET))\n{\ndata_.v4.sin_family = ASIO_OS_DEF(AF_INET);\ndata_.v4.sin_port =\nasio::detail::socket_ops::host_to_network_short(port_num);\ndata_.v4.sin_addr.s_addr = ASIO_OS_DEF(INADDR_ANY);\n}\nelse\n{\ndata_.v6.sin6_family = ASIO_OS_DEF(AF_INET6);\ndata_.v6.sin6_port =\nasio::detail::socket_ops::host_to_network_short(port_num);\ndata_.v6.sin6_flowinfo = 0;\ndata_.v6.sin6_addr.s6_addr[0] = 0; data_.v6.sin6_addr.s6_addr[1] = 0;\ndata_.v6.sin6_addr.s6_addr[2] = 0; data_.v6.sin6_addr.s6_addr[3] = 0;\ndata_.v6.sin6_addr.s6_addr[4] = 0; data_.v6.sin6_addr.s6_addr[5] = 0;\ndata_.v6.sin6_addr.s6_addr[6] = 0; data_.v6.sin6_addr.s6_addr[7] = 0;\ndata_.v6.sin6_addr.s6_addr[8] = 0; data_.v6.sin6_addr.s6_addr[9] = 0;\ndata_.v6.sin6_addr.s6_addr[10] = 0; data_.v6.sin6_addr.s6_addr[11] = 0;\ndata_.v6.sin6_addr.s6_addr[12] = 0; data_.v6.sin6_addr.s6_addr[13] = 0;\ndata_.v6.sin6_addr.s6_addr[14] = 0; data_.v6.sin6_addr.s6_addr[15] = 0;\ndata_.v6.sin6_scope_id = 0;\n}\n}\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/Asio/01-endpoint/#3-basic_endpoint","title":"3 basic_endpoint \u6a21\u677f\u7c7b","text":"<p>basic_endpoint \u7c7b\u662f\u5bf9 endpoint \u7c7b\u7684\u5c01\u88c5\uff0c\u6a21\u677f\u53c2\u6570\u662f\u534f\u8bae\u7c7b\u578b\u7c7b\uff0c\u5982 tcp \u7c7b\u578b\u6709 tcp \u7c7b\uff0cudp \u534f\u8bae\u6709 udp \u7c7b - \u793a\u4f8b</p> <pre><code>class tcp\n{\npublic:\n/// The type of a TCP endpoint.\ntypedef basic_endpoint&lt;tcp&gt; endpoint;\n... \u7701\u7565 ...\n}\nclass udp\n{\npublic:\n/// The type of a UDP endpoint.\ntypedef basic_endpoint&lt;udp&gt; endpoint;\n... \u7701\u7565 ...\n}\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/Asio/02-address/","title":"address","text":"<ul> <li>\u529f\u80fd\uff1a\u63d0\u4f9b\u4f7f\u7528 ipv4 \u548c ipv6 \u5730\u5740\u7684\u80fd\u529b\u3002\u540c\u65f6\u63d0\u4f9b\u4e86\u8bb8\u591a\u5b9e\u7528\u8f6c\u6362\u65b9\u6cd5\u3002</li> </ul>"},{"location":"Documents/F-Open-Source-Project/Asio/02-address/#1-address","title":"1 address \u6210\u5458","text":"<pre><code>class address\n{\n... \u7701\u7565 ... private:\n// The type of the address.\nenum { ipv4, ipv6 } type_;\n\n// The underlying IPv4 address.\nasio::ip::address_v4 ipv4_address_;\n\n// The underlying IPv6 address.\nasio::ip::address_v6 ipv6_address_;\n};\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/Asio/02-address/#2-address","title":"2 address \u65b9\u6cd5","text":"<p>address \u7c7b\u63d0\u4f9b\u4e86\u5f88\u591a\u65b9\u6cd5\uff0c\u6bd4\u5982\u70b9\u5206 ip \u5730\u5740\u8f6c address\u3002</p> <pre><code>class\n{\n... \u7701\u7565 ... /// Get whether the address is an IP version 4 address.\nbool is_v4() const ASIO_NOEXCEPT\n{\nreturn type_ == ipv4;\n}\n\n/// Get whether the address is an IP version 6 address.\nbool is_v6() const ASIO_NOEXCEPT\n{\nreturn type_ == ipv6;\n}\n\n/// Get the address as an IP version 4 address.\nASIO_DECL asio::ip::address_v4 to_v4() const;\n\n/// Get the address as an IP version 6 address.\nASIO_DECL asio::ip::address_v6 to_v6() const;\n\n/// Get the address as a string.\nASIO_DECL std::string to_string() const;\n\n#if !defined(ASIO_NO_DEPRECATED)\n/// (Deprecated: Use other overload.) Get the address as a string.\nASIO_DECL std::string to_string(asio::error_code&amp; ec) const;\n\n/// (Deprecated: Use make_address().) Create an address from an IPv4 address\n/// string in dotted decimal form, or from an IPv6 address in hexadecimal\n/// notation.\nstatic address from_string(const char* str);\n... \u7701\u7565 ...   }\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/Asio/03-socket/","title":"socket","text":"<pre><code>socket\u7c7b\u63d0\u4f9b\u4e86**connect\u3001bind\u7b49\u7f51\u7edc\u901a\u4fe1\u63a5\u53e3**\uff0c\u540c\u65f6\u63d0\u4f9b\u4e86**\u5f02\u6b65/\u540c\u6b65\u8bfb\u5199\u7b49\u63a5\u53e3**\u3002\n</code></pre> <p>socket \u662f\u5404\u79cd\u534f\u8bae\u7c7b\u578b\u7684 socket \u522b\u540d, \u5b83\u4eec\u6700\u7ec8\u6765\u81ea <code>class basic_socket: public socket_base</code>**** - udp\u3001tcp \u534f\u8bae\u7684 socket \u522b\u540d\u5982\u4e0b</p> <pre><code>class udp\n{\n/// The UDP socket type.\ntypedef basic_datagram_socket&lt;udp&gt; socket;\n... \u7701\u7565 ... }\nclass tcp\n{\n/// The TCP socket type.\ntypedef basic_stream_socket&lt;tcp&gt; socket;\n... \u7701\u7565 ... }\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/Asio/03-socket/#1-sokcet","title":"1 sokcet \u7c7b\u7684\u540c\u6b65\u3001\u5f02\u6b65\u63a5\u53e3","text":"<pre><code>`asio::async_write\u3001asio::write\u3001asio::async_read\u3001asio::read` \u7b49\u662f\u5bf9 socket \u8bfb\u5199\u7684\u5c01\u88c5\uff0c\u6700\u7ec8\u8fd8\u662f\u4f1a\u8c03\u7528\u5230 `socket::write\u3001socket::async_write`\u7b49\u8bfb\u5199\u63a5\u53e3\n</code></pre> <p>sokcet \u7c7b\u5b9e\u73b0\u4e86\u5f88\u591a\u540c\u6b65/\u5f02\u6b65\u63a5\u53e3\uff0c\u4e0d\u4ec5\u6709\u8bfb\u5199\u63a5\u53e3\u3002 - basic_stream_socket \u7c7b\u5b9e\u73b0\u7684\u540c\u6b65\u5f02\u6b65\u8bfb\u5199\u63a5\u53e3  - basic_socket \u5b9e\u73b0\u7684 connect\u3001bind \u7b49\u63a5\u53e3 </p>"},{"location":"Documents/F-Open-Source-Project/Ceph/Ceph/","title":"Ceph","text":""},{"location":"Documents/F-Open-Source-Project/Ceph/Ceph/#11","title":"1.1. \u8d44\u6599","text":"<ul> <li>\u5feb\u901f\u5165\u95e8Ceph</li> <li>Ceph\u6e90\u7801\u5206\u6790</li> </ul>"},{"location":"Documents/F-Open-Source-Project/Ceph/Ceph/#12-ceph","title":"1.2. ceph\u67b6\u6784","text":"<pre><code>1. cephfs\u4e0d\u9700\u8981\u7ecf\u8fc7\u4e2d\u95f4\u5c42librados\uff0c\u76f4\u63a5\u4f7f\u7528osdc\uff0clibrados\u4f1a\u4f7f\u7528osdc\n2. ceph-osd \u662fosd\u5b88\u62a4\u7a0b\u5e8f\uff0c\u751f\u6210\u8fc7\u7a0b\u5728src\u76ee\u5f55CMakeLists.txt\u4e2d\u5b9a\u4e49\uff0cceph-osd\u9700\u8981\u8fde\u63a5osd\u3001os\u7b49\u5e93\n3. ceph-mds \u662fmds\u5b88\u62a4\u7a0b\u5e8f\uff0c\u4f4dcephfs\u63d0\u4f9b\u5143\u6570\u636e\u670d\u52a1\u3002\u751f\u6210\u8fc7\u7a0b\u5728src\u76ee\u5f55CMakeLists.txt\u4e2d\u5b9a\u4e49\uff0cceph-mds\u9700\u8981\u8fde\u63a5mds\u7b49\u5e93\n4. ceph-mon \u662fosd\u76d1\u63a7\u5b88\u62a4\u7a0b\u5e8f\uff0c\u751f\u6210\u8fc7\u7a0b\u5728src\u76ee\u5f55CMakeLists.txt\u4e2d\u5b9a\u4e49\uff0cceph-mon\u9700\u8981\u94fe\u63a5mon\u3001os\u7b49\u5e93\n5. ceph-mgr \u662fosd\u7ba1\u7406\u6a21\u5757\u5b88\u62a4\u7a0b\u5e8f\uff0c\u751f\u6210\u8fc7\u7a0b\u5728src/mgr\u4e2d\u5b9a\u4e49\uff0c\u9700\u8981\u8fde\u63a5osdc\u3001client\u7b49\u5e93\n7. ceph-fuse\n8. os \u662fceph\u5b58\u50a8\u7684\u6700\u5e95\u5c42\uff0c\u5b9e\u73b0\u4e86filestore\u3001bluestore\u3001kstore\u3001memstore\u7b49\u5b58\u50a8\u5f15\u64ce\n</code></pre> <ul> <li>\u5b98\u7f51\u67b6\u6784\u6587\u6863  ceph\u5b58\u50a8\u96c6\u7fa4\u5305\u542b\u4ee5\u4e0b\u51e0\u7c7bdaemons\u670d\u52a1:</li> <li>Ceph Monitor\uff1aCeph Monitor \u7ef4\u62a4\u96c6\u7fa4\u6620\u5c04\u7684\u4e3b\u526f\u672c\u3002 Ceph \u76d1\u89c6\u5668\u96c6\u7fa4\u53ef\u786e\u4fdd\u76d1\u89c6\u5668\u5b88\u62a4\u7a0b\u5e8f\u53d1\u751f\u6545\u969c\u65f6\u7684\u9ad8\u53ef\u7528\u6027\u3002\u5b58\u50a8\u96c6\u7fa4\u5ba2\u6237\u7aef\u4ece Ceph Monitor \u68c0\u7d22\u96c6\u7fa4\u6620\u5c04\u7684\u526f\u672c\u3002</li> <li>Ceph OSD Daemon\uff1aCeph OSD \u5b88\u62a4\u8fdb\u7a0b\u68c0\u67e5\u81ea\u5df1\u7684\u72b6\u6001\u548c\u5176\u4ed6 OSD \u7684\u72b6\u6001\uff0c\u7136\u540e\u5411\u76d1\u89c6\u5668\u62a5\u544a\u3002</li> <li>Ceph Manager\uff1aCeph Manager \u5145\u5f53\u76d1\u63a7\u3001\u7f16\u6392\u548c\u63d2\u4ef6\u6a21\u5757\u7684\u7aef\u70b9\u3002</li> <li>Ceph Metadata Server\uff1a\u5f53 CephFS \u7528\u4e8e\u63d0\u4f9b\u6587\u4ef6\u670d\u52a1\u65f6\uff0cCeph \u5143\u6570\u636e\u670d\u52a1\u5668 (MDS) \u7ba1\u7406\u6587\u4ef6\u5143\u6570\u636e\u3002 \u5b58\u50a8\u96c6\u7fa4\u5ba2\u6237\u7aef\u548c\u6bcf\u4e2a Ceph OSD \u5b88\u62a4\u8fdb\u7a0b\u4f7f\u7528 CRUSH \u7b97\u6cd5\u6765\u6709\u6548\u5730\u8ba1\u7b97\u6709\u5173\u6570\u636e\u4f4d\u7f6e\u7684\u4fe1\u606f\uff0c\u800c\u4e0d\u5fc5\u4f9d\u8d56\u4e8e\u4e2d\u5fc3\u5316\u67e5\u627e\u8868\u3002 Ceph \u7684\u9ad8\u7ea7\u7279\u6027\u5305\u62ec\u901a\u8fc7 librados \u8fde\u63a5\u5230 Ceph \u5b58\u50a8\u96c6\u7fa4\u7684\u672c\u5730\u63a5\u53e3\uff0c\u4ee5\u53ca\u5728 librados \u4e4b\u4e0a\u6784\u5efa\u7684\u8bb8\u591a\u670d\u52a1\u63a5\u53e3\u3002</li> </ul>"},{"location":"Documents/F-Open-Source-Project/Ceph/Ceph/#13","title":"1.3. \u540d\u79f0\u89e3\u91ca","text":"<ul> <li>\u5b98\u7f51\u8bcd\u6c47\u6587\u6863</li> <li>RADOS(Reliable Autonomic Distributed Object Store)\u00a0\uff1a\u53ef\u9760\u3001\u81ea\u52a8\uff0c\u5206\u5e03\u5f0f\u5bf9\u8c61\u5b58\u50a8\uff0c\u662fceph\u5b58\u50a8\u7684\u6838\u5fc3\u7ec4\u4ef6\u4f4d\u4e8eceph\u6700\u5e95\u5c42\u3002</li> <li>RADOS\uff08Ceph Storage Cluster\u3001Ceph Object Store\u3001RADOS Cluster\u3001Reliable Autonomic Distributed Object Store\uff09<ul> <li>The core set of storage software which stores the user\u2019s data (MON+OSD).</li> </ul> </li> <li>Ceph Cluster Map\uff08Cluster Map\uff09<ul> <li>The set of maps comprising the monitor map, OSD map, PG map, MDS map and CRUSH map. See\u00a0Cluster Map\u00a0for details.</li> </ul> </li> <li>Ceph Object Storage<ul> <li>The object storage \u201cproduct\u201d, service or capabilities, which consists essentially of a Ceph Storage Cluster and a Ceph Object Gateway.</li> </ul> </li> <li>RGW\uff08Ceph Object Gateway\u3001RADOS Gateway\uff09<ul> <li>The S3/Swift gateway component of Ceph.</li> </ul> </li> <li>RBD\uff08Ceph Block Device\uff09<ul> <li>The block storage component of Ceph.</li> </ul> </li> <li>Ceph Block Storage<ul> <li>The block storage \u201cproduct,\u201d service or capabilities when used in conjunction with\u00a0<code>librbd</code>, a hypervisor such as QEMU or Xen, and a hypervisor abstraction layer such as\u00a0<code>libvirt</code>.</li> </ul> </li> <li>CephFS\uff08Ceph FS\u3001Ceph File System\uff09<ul> <li>The POSIX filesystem components of Ceph. Refer\u00a0CephFS Architecture\u00a0and\u00a0Ceph File System\u00a0for more details.</li> </ul> </li> <li>Cloud Platforms\uff08Cloud Stacks\uff09<ul> <li>Third party cloud provisioning platforms such as OpenStack, CloudStack, OpenNebula, Proxmox VE, etc.</li> </ul> </li> <li>OSD\uff08Object Storage Device\uff09<ul> <li>A physical or logical storage unit (e.g., LUN). Sometimes, Ceph users use the term \u201cOSD\u201d to refer to\u00a0Ceph OSD Daemon, though the proper term is \u201cCeph OSD\u201d.</li> </ul> </li> <li>Ceph OSD\uff08Ceph OSD Daemon\u3001Ceph OSD Daemons\uff09<ul> <li>The Ceph OSD software, which interacts with a logical disk (OSD). Sometimes, Ceph users use the term \u201cOSD\u201d to refer to \u201cCeph OSD Daemon\u201d, though the proper term is \u201cCeph OSD\u201d.</li> </ul> </li> <li>OSD id<ul> <li>The integer that defines an OSD. It is generated by the monitors as part of the creation of a new OSD.</li> </ul> </li> <li>OSD fsid<ul> <li>This is a unique identifier used to further improve the uniqueness of an OSD and it is found in the OSD path in a file called\u00a0<code>osd_fsid</code>. This\u00a0<code>fsid</code>\u00a0term is used interchangeably with\u00a0<code>uuid</code></li> </ul> </li> <li>OSD uuid<ul> <li>Just like the OSD fsid, this is the OSD unique identifier and is used interchangeably with\u00a0<code>fsid</code></li> </ul> </li> <li>bluestore<ul> <li>OSD BlueStore is a new back end for OSD daemons (kraken and newer versions). Unlike\u00a0filestore\u00a0it stores objects directly on the Ceph block devices without any file system interface.</li> </ul> </li> <li>filestore<ul> <li>A back end for OSD daemons, where a Journal is needed and files are written to the filesystem.</li> </ul> </li> <li>MON\uff08Ceph Monitor\uff09<ul> <li>The Ceph monitor software.</li> </ul> </li> <li>MGR\uff08Ceph Manage\uff09<ul> <li>The Ceph manager software, which collects all the state from the whole cluster in one place.</li> </ul> </li> <li>MDS\uff08Ceph Metadata Server\uff09<ul> <li>The Ceph metadata software.</li> </ul> </li> <li>Dashboard\uff08Ceph Manager Dashboard\u3001Ceph Dashboar\u3001Dashboard Module\u3001Dashboard Plugin\uff09<ul> <li>A built-in web-based Ceph management and monitoring application to administer various aspects and objects of the cluster. The dashboard is implemented as a Ceph Manager module. See\u00a0Ceph Dashboard\u00a0for more details.</li> </ul> </li> <li>Ceph Client\uff08Ceph Clients\uff09<ul> <li>The collection of Ceph components which can access a Ceph Storage Cluster. These include the Ceph Object Gateway, the Ceph Block Device, the Ceph File System, and their corresponding libraries, kernel modules, and FUSEs.</li> </ul> </li> <li>CRUSH<ul> <li>Controlled Replication Under Scalable Hashing. It is the algorithm Ceph uses to compute object storage locations.</li> </ul> </li> <li>CRUSH rule<ul> <li>The CRUSH data placement rule that applies to a particular pool(s).</li> </ul> </li> <li>Pool\uff08Pools\uff09<ul> <li>Pools are logical partitions for storing objects.</li> </ul> </li> <li>systemd oneshot<ul> <li>A systemd\u00a0<code>type</code>\u00a0where a command is defined in\u00a0<code>ExecStart</code>\u00a0which will exit upon completion (it is not intended to daemonize)</li> </ul> </li> <li>LVM tags<ul> <li>Extensible metadata for LVM volumes and groups. It is used to store Ceph-specific information about devices and its relationship with OSDs.</li> </ul> </li> </ul>"},{"location":"Documents/F-Open-Source-Project/Ceph/CephFS/","title":"CephFS","text":"<p>CephFS\u662fceph\u5b9e\u73b0\u7684\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\u3002\u4e3b\u5e72\u6e90\u7801\u5305\u62ec<code>src/ceph_fuse.cc</code>\u548c<code>src/client</code>\u76ee\u5f55\u4e0b\u6587\u4ef6\uff0c\u5176\u4e2d<code>src/ceph_fuse.cc</code>\u63d0\u4f9b\u4e86main\u65b9\u6cd5\uff0c\u662ffuse\u6587\u4ef6\u7cfb\u7edf\u7684\u5165\u53e3\u3002</p>"},{"location":"Documents/F-Open-Source-Project/Ceph/CephFS/#1","title":"1 \u57fa\u672c\u6d41\u7a0b","text":"<ol> <li><code>src/ceph_fuse.cc</code>\uff1aceph\u5bf9\u63a5fuse\u7684\u5165\u53e3\uff0c\u5b9a\u4e49\u4e86main\u51fd\u6570\uff0c\u505a\u4e9b\u521d\u59cb\u5316\u3001\u6302\u8f7d\u5378\u8f7d\u64cd\u4f5c\uff0c\u4f1a\u8c03\u7528<code>src/client</code>\u4e0b\u6587\u4ef6\u5b9a\u4e49\u7684\u63a5\u53e3\u3002</li> <li><code>fuse_ll.h fuse_ll.cc</code>\uff1a\u662ffuse\u4e0eceph\u95f4\u8fde\u63a5\u7684\u6865\u6881\u3002</li> <li>\u901a\u8fc7\u5b9e\u4f8b\u5316fuse_lowlevel_ops\u7ed3\u6784\uff0c\u5c06fuse\u9700\u8981\u5b9e\u73b0\u7684\u63a5\u53e3\uff08\u6bd4\u5982open\u3001read\u3001write\u63a5\u53e3\uff09\u4e0eceph\u5b9e\u73b0\u7ed1\u5b9a\uff0c\u8fd9\u6837\u901a\u8fc7fuse\u6302\u8f7d\u540e\uff0c\u5c31\u80fd\u81ea\u52a8\u8c03\u7528\u5230ceph\u5b9e\u73b0\u6d41\u7a0b\u3002</li> <li><code>CephFuse</code>\u7c7b\uff1a<code>src/ceph_fuse.cc</code>\u4f1a\u5b9e\u4f8b\u5316\u6b64\u7c7b<ol> <li>\u6301\u6709\u5d4c\u5957\u7c7bCephFuse::Handle\u5b9e\u4f8b\uff0cCephFuse::Handle\u7c7b\u6301\u6709\u7c7bClinet\u5b9e\u4f8b\uff0cClinet\u5b9e\u4f8b\u5b9e\u73b0\u4e86\u6587\u4ef6\u64cd\u4f5c\u63a5\u53e3\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0cfuse\u4e2d\u9700\u8981\u5b9e\u73b0\u7684\u63a5\u53e3\uff0c\u5b9e\u9645\u4e0a\u5168\u5728Clinet\u5b9e\u73b0\u3002</li> </ol> </li> <li><code>Client.h Client.cc</code>\uff1a\u662f\u6587\u4ef6\u7cfb\u7edf\u5bf9\u63a5\u4e0b\u6b21\u5b58\u50a8\u63a5\u53e3\u7684\u6865\u6881\u3002\u4e0e\u5143\u6570\u636e\u670d\u52a1\u5668\u548cosd\u670d\u52a1\u5668\u901a\u4fe1\u3002</li> <li>Client\u7c7b\u4e2d\u4f1a\u4f7f\u7528\u5230<code>MetaRequest.h</code>\u4e2d\u5b9a\u4e49\u7684<code>MetaRequest</code>\u7c7b\uff0c\u548c<code>MetaSession.h</code>\u4e2d\u5b9a\u4e49\u7684<code>MetaSession</code>\u7c7b</li> <li>Client\u7c7b\u4e2d\u4f1a\u4f7f\u7528\u5230<code>MDSMap</code>\u7c7b\uff0c\u7528\u4e8e\u4ece\u4e2d\u83b7\u53d6\u5143\u6570\u636e\u670d\u52a1\u5668</li> <li><code>MetaRequest.h MetaRequest.cc</code></li> <li><code>MetaSession.h MetaSession.cc</code></li> </ol>"},{"location":"Documents/F-Open-Source-Project/Ceph/ceph%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/","title":"ceph\u76ee\u5f55\u8bf4\u660e","text":""},{"location":"Documents/F-Open-Source-Project/Ceph/ceph%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#1","title":"1 \u6839\u76ee\u5f55","text":"<ul> <li>src \uff1a\u5404\u529f\u80fd\u67d0\u5757\u7684\u6e90\u4ee3\u7801</li> <li>qa \uff1a\u5404\u4e2a\u6a21\u5757\u7684\u529f\u80fd\u6d4b\u8bd5\uff08\u6d4b\u8bd5\u811a\u672c\u548c\u6d4b\u8bd5\u4ee3\u7801\uff09</li> <li>wireshark \uff1a wireshark\u7684ceph\u63d2\u4ef6 \u3002</li> <li>admin \uff1a\u7ba1\u7406\u5de5\u5177\uff0c\u7528\u4e8e\u67b6\u8bbe\u6587\u6863\u670d\u52a1\u5668\u7b49</li> <li>debian \uff1a\u7528\u4e8e\u5236\u4f5c debian\uff08Ubuntu\uff09\u5b89\u88c5\u5305\u7684\u76f8\u5173\u811a\u672c\u548c\u6587\u4ef6</li> <li>doc \uff1a\u7528\u4e8e\u751f\u6210\u9879\u76ee\u6587\u6863\uff0c\u751f\u6210\u7ed3\u679c\u53c2\u8003&lt; http://ceph.com/docs/master/&gt;</li> <li>man \uff1aceph \u5404\u547d\u4ee4\u884c\u5de5\u5177\u7684 man \u6587\u4ef6</li> <li>configure.ac\uff1a\u7528\u4e8e\u751f\u6210configure\u7684\u811a\u672c</li> <li>Makefile.am\uff1a\u7528\u4e8e\u751f\u6210Makefile\u7684\u811a\u672c</li> <li>autogen.sh\uff1a\u8d1f\u8d23\u751f\u6210configure\u3002</li> <li>do_autogen.sh\uff1a\u751f\u6210configure\u7684\u811a\u672c\uff0c\u5b9e\u9645\u4e0a\u901a\u8fc7\u8c03\u7528autogen.sh\u5b9e\u73b0</li> <li>ceph.spec.in\uff1aRPM\u5305\u5236\u4f5c\u6587\u4ef6</li> </ul>"},{"location":"Documents/F-Open-Source-Project/Ceph/ceph%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/#2-src","title":"2 src\u76ee\u5f55","text":"<ul> <li>include\uff1a\u5934\u6587\u4ef6\uff0c\u5305\u542b\u5404\u79cd\u57fa\u672c\u7c7b\u578b\u7684\u5b9a\u4e49\uff0c\u7b80\u5355\u901a\u7528\u529f\u80fd\u7b49\u3002</li> <li>common\uff1a\u5171\u6709\u6a21\u5757\uff0c\u5305\u542b\u5404\u7c7b\u5171\u6709\u673a\u5236\u7684\u5b9e\u73b0\uff0c\u4f8b\u5982\u7ebf\u7a0b\u6c60\u3001\u7ba1\u7406\u7aef\u53e3\u3001\u8282\u6d41\u9600\u7b49\u3002</li> <li>log\uff1a\u65e5\u5fd7\u6a21\u5757\uff0c\u4e3b\u8981\u8d1f\u8d23\u8bb0\u5f55\u672c\u5730log\u4fe1\u606f\uff08\u9ed8\u8ba4/var/log/ceph/\u76ee\u5f55\uff09</li> <li>global\uff1a\u5168\u5c40\u6a21\u5757\uff0c\u4e3b\u8981\u662f\u58f0\u660e\u548c\u521d\u59cb\u5316\u5404\u7c7b\u5168\u5c40\u53d8\u91cf\uff08\u5168\u5c40\u4e0a\u4e0b\u6587\uff09\u3001\u6784\u5efa\u9a7b\u7559\u8fdb\u7a0b\u3001\u4fe1\u53f7\u5904\u7406\u7b49\u3002</li> <li>auth\uff1a\u6388\u6743\u6a21\u5757\uff0c\u5b9e\u73b0\u4e86\u4e09\u65b9\u8ba4\u77e5\u673a\u5236\u3002</li> <li>crush\uff1aCrush\u6a21\u5757\uff0cCeph\u7684\u6570\u636e\u5206\u5e03\u7b97\u6cd5</li> <li>msg\uff1a\u6d88\u606f\u901a\u8baf\u6a21\u5757\uff0c\u5305\u62ec\u7528\u4e8e\u5b9a\u4e49\u901a\u8baf\u529f\u80fd\u7684\u62bd\u8c61\u7c7bMessenger\u4ee5\u53ca\u76ee\u524d\u7684\u5b9e\u73b0SimpleMessager</li> <li>messages\uff1a\u6d88\u606f\u6a21\u5757\uff0c\u5b9a\u4e49\u4e86Ceph\u5404\u8282\u70b9\u4e4b\u95f4\u6d88\u606f\u901a\u8baf\u4e2d\u7528\u5230\u7684\u6d88\u606f\u7c7b\u578b\u3002</li> <li>os\uff1a\u5bf9\u8c61\uff08Object Store\uff09\u6a21\u5757\uff0c\u7528\u4e8e\u5b9e\u73b0\u672c\u5730\u7684\u5bf9\u8c61\u5b58\u50a8\u529f\u80fd\uff0c</li> <li>osdc\uff1aOSD\u5ba2\u6237\u7aef\uff08OSD Client\uff09\uff0c\u5c01\u88c5\u4e86\u5404\u7c7b\u8bbf\u95eeOSD\u7684\u65b9\u6cd5\u3002</li> <li>mon\uff1amon\u6a21\u5757</li> <li>osd\uff1aosd\u90e8\u5206</li> <li>mds\uff1amds\u6a21\u5757</li> <li>rgw\uff1argw\u6a21\u5757\u7684</li> <li>librados\uff1arados\u5e93\u6a21\u5757\u7684\u4ee3\u7801</li> <li>librdb\uff1alibbd\u5e93\u6a21\u5757\u7684\u4ee3\u7801</li> <li>client\uff1aclient\u6a21\u5757\uff0c\u5b9e\u73b0\u4e86\u7528\u6237\u6001\u7684CephFS\u5ba2\u6237\u7aef</li> <li>mount\uff1amount\u6a21\u5757</li> <li>tools\uff1a\u5404\u7c7b\u5de5\u5177</li> <li>test\uff1a\u5355\u5143\u6d4b\u8bd5</li> <li>perfglue\uff1a\u4e0e\u6027\u80fd\u4f18\u5316\u76f8\u5173\u7684\u6e90\u4ee3\u7801</li> <li>json_spirit\uff1a\u5916\u90e8\u9879\u76eejson_spirit</li> <li>leveldb\uff1a\u5916\u90e8\u9879\u76eeleveldb from google</li> <li>gtest\uff1agtest\u5355\u5143\u6d4b\u8bd5\u6846\u67b6</li> <li>doc\uff1a\u5173\u4e8e\u4ee3\u7801\u7684\u4e00\u4e9b\u8bf4\u660e\u6587\u6863</li> <li>bash_completion\uff1a\u90e8\u5206bash\u811a\u672c\u7684\u5b9e\u73b0</li> <li>pybind\uff1apython\u7684\u5305\u88c5\u5668</li> <li>script\uff1a\u5404\u79cdpython\u811a\u672c</li> <li>upstart\uff1a\u5404\u79cd\u914d\u7f6e\u6587\u4ef6</li> </ul>"},{"location":"Documents/F-Open-Source-Project/Ceph/os/","title":"os","text":"<p>os\u7c7b\u63d0\u4f9b\u4e86osd\u8bbf\u95ee\u786c\u76d8\u3001\u5b58\u50a8\u6570\u636e\u7684\u65b9\u6cd5\uff0c\u4e3b\u8981\u5b9e\u73b0\u4ee5\u4e0b\u51e0\u79cd\u5b58\u50a8\u7c7b\u578b\uff1a 1. FileStore 2. BlueStore 3. KStore 4. MemStore</p>"},{"location":"Documents/F-Open-Source-Project/Ceph/os/#1-objectstore","title":"1 ObjectStore\u7c7b","text":"<p>ObjectStore\u7c7b\u662f FileStore\u3001BlueStore\u3001KStore\u3001MemStore\u7b49\u7c7b\u7684\u57fa\u7c7b</p>"},{"location":"Documents/F-Open-Source-Project/libfuse/libfuse/","title":"libfuse","text":"<ul> <li>[doxygen\u6587\u6863]https://libfuse.github.io/doxygen/index.html</li> <li>[Github\u4ed3\u5e93]https://github.com/libfuse/libfuse/</li> </ul>"},{"location":"Documents/F-Open-Source-Project/rocksdb/rocksdb%E5%8E%9F%E7%90%86/","title":"rocksdb\u539f\u7406","text":""},{"location":"Documents/F-Open-Source-Project/rocksdb/rocksdb%E5%8E%9F%E7%90%86/#11-memtable","title":"1.1. MemTable","text":"<p>MemTable \u662f\u4e00\u79cd\u5185\u5b58\u6570\u636e\u7ed3\u6784\uff08\u8df3\u8868\u5b9e\u73b0\uff09\uff0c\u5728\u5c06\u6570\u636e\u5237\u65b0\u5230 SST \u6587\u4ef6\u4e4b\u524d\u4fdd\u5b58\u6570\u636e\u3002\u5b83\u540c\u65f6\u63d0\u4f9b\u8bfb\u53d6\u548c\u5199\u5165\u670d\u52a1 \u3002 1. \u65b0\u5199\u5165\u59cb\u7ec8\u5c06\u6570\u636e\u63d2\u5165\u5230 memtable \u4e2d\uff0c\u5e76\u4e14\u8bfb\u53d6\u5fc5\u987b\u5728\u4ece SST \u6587\u4ef6\u8bfb\u53d6\u4e4b\u524d\u67e5\u8be2 memtable\uff0c\u56e0\u4e3a memtable \u4e2d\u7684\u6570\u636e\u662f\u6700\u65b0\u7684\u3002 2. \u5f53 memtable \u6ee1\u65f6\uff0c\u5b83\u5c31\u53d8\u5f97\u4e0d\u53ef\u53d8\uff0c\u5e76\u88ab\u4e00\u4e2a\u65b0\u7684 memtable \u66ff\u6362\u3002\u540e\u53f0\u7ebf\u7a0b\u4f1a\u5c06 memtable \u7684\u5185\u5bb9\u5237\u65b0\u5230 SST \u6587\u4ef6\u4e2d\uff0c\u4e4b\u540e\u53ef\u4ee5\u9500\u6bc1 \u65e7\u7684memtable\u3002</p>"},{"location":"Documents/F-Open-Source-Project/rocksdb/rocksdb%E5%8E%9F%E7%90%86/#111","title":"1.1.1. \u8df3\u8868","text":"<p>\u57fa\u4e8e Skiplist \u7684 memtable \u4e3a\u8bfb\u5199\u3001\u968f\u673a\u8bbf\u95ee\u548c\u987a\u5e8f\u626b\u63cf\u63d0\u4f9b\u4e86\u4e00\u822c\u826f\u597d\u7684\u6027\u80fd\u3002\u6b64\u5916\uff0c\u5b83\u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e9b\u5176\u4ed6 memtable \u5b9e\u73b0\u5f53\u524d\u4e0d\u652f\u6301\u7684\u6709\u7528\u529f\u80fd\uff0c\u4f8b\u5982\u5e76\u53d1\u63d2\u5165\u548c\u5e26\u63d0\u793a\u7684\u63d2\u5165\u3002</p>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/","title":"zookeeper\u547d\u4ee4","text":"<ul> <li>\u672c\u6559\u7a0b\u4f7f\u7528\u7684\u7248\u672c\u662fzookeeper-3.7.1</li> </ul>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#1-zookeeper","title":"1 \u8fde\u63a5zookeeper\u670d\u52a1\u7aef","text":"<ol> <li>\u672c\u5730\u8fde\u63a5\uff1a<code>sh zkCli.sh</code></li> <li>\u96c6\u7fa4\u8fde\u63a5\uff1a<ol> <li>\u8fde\u63a5\u5355\u53f0\uff1a<code>sh zkCli.sh -server ip:port</code></li> <li>\u968f\u673a\u8fde\u63a5\u96c6\u7fa4\uff1a<code>sh zkCli.sh -server ip:port[,ip:port]</code>\uff0c\u591a\u4e2a\u670d\u52a1\u7531\u9017\u53f7\u5206\u5272</li> </ol> </li> </ol>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#2-create","title":"2 create","text":"<ul> <li>\u529f\u80fd\uff1a\u521b\u5efa\u8282\u70b9</li> <li>\u8bed\u6cd5\uff1a<code>create [-s] [-e] [-c] [-t ttl] path [data] [acl]</code><ul> <li><code>-s</code>\uff1a\u6709\u5e8f\u8282\u70b9\uff08\u8282\u70b9\u8def\u5f84\u540e\u5e26\u6709\u9012\u589e\u5e8f\u53f7\uff09</li> <li><code>-e</code>\uff1a\u4e34\u65f6\u8282\u70b9\uff08\u5ba2\u6237\u7aef\u65ad\u5f00\u8fde\u63a5\u5373\u5220\u9664\uff09</li> <li><code>-c</code>\uff1a\u5bb9\u5668\u8282\u70b9\uff08\u5b50\u8282\u70b9\u5220\u9664\u4e86\uff0c\u8282\u70b9\u5c31\u4f1a\u88ab\u5220\u9664\uff09</li> <li><code>-t ttl</code>\uff1a\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\uff08\u9700\u8981\u5728\u6301\u4e45\u8282\u70b9\uff09</li> <li><code>path</code>\uff1a\u8282\u70b9\u8def\u5f84\uff08\u4ee5/\u5f00\u59cb\u7684\u7edd\u5bf9\u8def\u5f84\uff09</li> <li><code>data</code>\uff1a\u8282\u70b9\u6570\u636e</li> <li><code>acl</code>\uff1a\u8bbe\u7f6e\u8282\u70b9\u6743\u9650\uff08\u521b\u5efa\u8282\u70b9\u65f6\u662f\u5440acl\uff0c\u9700\u8981\u8bbe\u7f6edata\uff0c\u5426\u5219\u4f1a\u628aacl\u89e3\u6790\u6210data\uff09</li> </ul> </li> <li>\u793a\u4f8b1</li> </ul> <pre><code>[zk: localhost:2181(CONNECTED) 0]create /persistent_node \"hello world\"\nCreated /persistent_node\n[zk: localhost:2181(CONNECTED) 1] create -s /persistent_sequential_node 123\nCreated /persistent_sequential_node0000000005\n[zk: localhost:2181(CONNECTED) 2] create -e /ephemeral_node\nCreated /ephemeral_node\n[zk: localhost:2181(CONNECTED) 3] create -c /container_node\nCreated /container_node\n[zk: localhost:2181(CONNECTED) 4] create /container_node/child_1\nCreated /container_node/child_1\n[zk: localhost:2181(CONNECTED) 5] create /container_node/child_2\nCreated /container_node/child_2\n#### \u7b49\u5f8560s\uff0c\u518d\u6b21\u67e5\u770b/container_node\n[zk: localhost:2181(CONNECTED) 7] get /container_node \nNode does not exist: /container_node\n\n# create the ttl node.\n# set zookeeper.extendedTypesEnabled=true\n# Otherwise:KeeperErrorCode = Unimplemented for /ttl_node\n[zk: localhost:2181(CONNECTED) 8] create -t 3000 /ttl_node Created /ttl_node\n# after 3s later \uff08\u5b9e\u9645\u6d4b\u8bd5\u8fdc\u4e0d\u6b623s\uff0c\u9700\u8981\u7b49\u5f85\u66f4\u957f\u7684\u65f6\u95f4\uff09\n[zk: localhost:2181(CONNECTED) 9] get /ttl_node\n    org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode for /ttl_node\n</code></pre> <ul> <li>\u793a\u4f8b2\uff1a\u521b\u5efaacl\u8ba4\u8bc1\u8282\u70b9</li> </ul> <pre><code>[zk: localhost:6666(CONNECTED) 0] addauth digest  user01:12345\n[zk: localhost:6666(CONNECTED) 1] create /node 1 auth:user01:crwda\nCreated /node\n[zk: localhost:6666(CONNECTED) 2] getAcl /node\n'digest,'user01:2V1RbjS129q4paBdYYQ4buzFceU=\n: cdrwa\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#3-set","title":"3 set","text":"<ul> <li>\u529f\u80fd\uff1a\u8bbe\u7f6e\u6216\u66f4\u65b0\u8282\u70b9\u6570\u636e</li> <li>\u8bed\u6cd5\uff1a<code>set [-s] [-v version] path data</code><ul> <li><code>-s</code>\uff1a\u663e\u793a\u72b6\u6001\u4fe1\u606f</li> <li><code>-v</code>\uff1a\u6307\u5b9a\u5f53\u524d\u8282\u70b9\u7684<code>dataVersion</code>\uff08\u5982\u679c\u7248\u672c\u53f7\u4e0d\u4e00\u81f4\uff0c\u66f4\u65b0\u5931\u8d25\uff09</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>[zk: localhost:2181(CONNECTED) 24] stat /node cZxid = 0x700000025\nctime = Sun Jul 24 19:21:19 CST 2022\nmZxid = 0x70000002c\nmtime = Sun Jul 24 19:26:10 CST 2022\npZxid = 0x700000030\ncversion = 4\ndataVersion = 6\naclVersion = 0\nephemeralOwner = 0x0\ndataLength = 3\nnumChildren = 2\n### \u5f53\u524ddataVersion = 6\uff0c\u6307\u5b9a-v 1\u5c31\u4f1a\u66f4\u65b0\u5931\u8d25\uff0c\u9700\u8981\u6307\u5b9a-v 6\uff0c\u6216\u8005\u4e0d\u6307\u5b9adataVersion\n[zk: localhost:2181(CONNECTED) 25] set -v 1 /node 123\nversion No is not valid : /node\n[zk: localhost:2181(CONNECTED) 26] set -v 6 /node 123\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#4-ls","title":"4 ls","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793a\u8282\u70b9\u5217\u8868</li> <li>\u8bed\u6cd5\uff1a<code>ls [-s] [-w] [-R] path</code><ul> <li><code>-s</code>\uff1a\u663e\u793a\u72b6\u6001\u4fe1\u606f</li> <li><code>-w</code>\uff1a\u76d1\u542c\u5b50\u8282\u70b9\u7684\u6539\u53d8</li> <li><code>-R</code>\uff1a\u9012\u5f52\u663e\u793a\u6240\u6709\u5b50\u8282\u70b9</li> </ul> </li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>[zk: localhost:2181(CONNECTED) 16] ls -R /node\n/node\n/node/child_1\n/node/child_2\n[zk: localhost:2181(CONNECTED) 17] ls -w /node\n[child_1, child_2]\n### \u53e6\u5916\u542f\u52a8\u4e00\u4e2a\u5ba2\u6237\u7aef\uff0c\u5220\u9664\u6216\u589e\u52a0/node\u7684\u5b50\u8282\u70b9\uff0c\u6b64\u5ba2\u6237\u7aef\u4f1a\u5f39\u51fa\u5982\u4e0b\u63d0\u793a\n[zk: localhost:2181(CONNECTED) 18] \nWATCHER::\n\nWatchedEvent state:SyncConnected type:NodeChildrenChanged path:/node\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#5-get","title":"5 get","text":"<ul> <li>\u529f\u80fd\uff1a\u83b7\u53d6\u8282\u70b9\u6570\u636e</li> <li>\u8bed\u6cd5\uff1a<code>get [-s] [-w] path</code><ul> <li><code>-s</code>\uff1a\u663e\u793a\u72b6\u6001\u4fe1\u606f\uff0c\uff08stat\u663e\u793a\u7684\uff09</li> <li><code>-w</code>\uff1a\u76d1\u542c\u8282\u70b9\u6570\u636e\u53d8\u5316</li> </ul> </li> <li>\u793a\u4f8b1\uff1a</li> </ul> <pre><code>[zk: localhost:2181(CONNECTED) 1] get /node\n12345\n[zk: localhost:2181(CONNECTED) 2] create /node 12345\nCreated /node\n[zk: localhost:2181(CONNECTED) 3] get -s /node\n12345\ncZxid = 0x700000025\nctime = Sun Jul 24 19:21:19 CST 2022\nmZxid = 0x700000025\nmtime = Sun Jul 24 19:21:19 CST 2022\npZxid = 0x700000025\ncversion = 0\ndataVersion = 0\naclVersion = 0\nephemeralOwner = 0x0\ndataLength = 5\nnumChildren = 0\n</code></pre> <ul> <li>\u793a\u4f8b2\uff1a-w\u76d1\u542c\u8282\u70b9</li> </ul> <pre><code>[zk: localhost:2181(CONNECTED) 1] get -w /node\n111\n### \u53e6\u5916\u542f\u52a8\u4e00\u4e2a\u5ba2\u6237\u7aef\uff0c\u4fee\u6539/node\u6570\u636e\uff0c\u6b64\u5ba2\u6237\u7aef\u4f1a\u5f39\u51fa\u5982\u4e0b\u63d0\u793a\n[zk: localhost:2181(CONNECTED) 2] \nWATCHER::\n\nWatchedEvent state:SyncConnected type:NodeDataChanged path:/node\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#6-delete","title":"6 delete","text":"<ul> <li>\u529f\u80fd\uff1a\u5220\u9664\u8282\u70b9\uff08\u4e0d\u80fd\u5220\u9664\u542b\u6709\u5b50\u8282\u70b9\u7684\u8282\u70b9\uff09</li> <li>\u8bed\u6cd5\uff1a<code>delete [-v version] path</code><ul> <li><code>-v version</code>\uff1a\u6307\u5b9adataVersion\uff08\u5728\u5220\u9664\u6570\u636e\u65f6\u6307\u5b9a\u6570\u636e\u7248\u672c\u53f7\uff0c\u5982\u679c\u6570\u636e\u5f53\u524d\u7248\u672c\u53f7\u548c\u6307\u5b9a\u7684\u7248\u672c\u53f7\u4e0d\u540c\uff0c\u5c31\u662f\u5220\u9664\u5931\u8d25\uff09</li> </ul> </li> <li>\u793a\u4f8b1</li> </ul> <pre><code>[zk: localhost:2181(CONNECTED) 0] create /config\nCreated /config\n[zk: localhost:2181(CONNECTED) 1] delete /config [zk: localhost:2181(CONNECTED) 2] ls /config\nNode does not exist: /config\n</code></pre> <ul> <li>\u793a\u4f8b2\uff1a-v version\u6307\u5b9a\u7248\u672c\u53f7:\u5f53\u524d\u6570\u636e\u7684\u7248\u672c\u53f7\u662f2\uff0c\u6307\u5b9a\u7248\u672c\u53f71\u5220\u9664\u5931\u8d25\uff0c\u6307\u5b9a\u7248\u672c\u53f72\u5220\u9664\u6210\u529f</li> </ul> <pre><code>[zk: localhost:2181(CONNECTED) 47] get -s /version_node 2\ncZxid = 0x70000001a\nctime = Sun Jul 24 19:15:03 CST 2022\nmZxid = 0x70000001c\nmtime = Sun Jul 24 19:15:29 CST 2022\npZxid = 0x70000001a\ncversion = 0\ndataVersion = 2\naclVersion = 0\nephemeralOwner = 0x0\ndataLength = 1\nnumChildren = 0\n[zk: localhost:2181(CONNECTED) 48] delete -v 1 /version_node \nversion No is not valid : /version_node\n[zk: localhost:2181(CONNECTED) 49] delete -v 2 /version_node </code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#7-deleteall","title":"7 deleteall","text":"<ul> <li>\u529f\u80fd\uff1a\u5220\u9664\u8282\u70b9\u4e0b\u6240\u6709\u8282\u70b9\uff08\u5305\u62ec\u5b50\u8282\u70b9\uff09</li> <li>\u8bed\u6cd5\uff1a<code>deleteall path [-b batch size]</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>[zk: localhost:2181(CONNECTED) 0] ls -R /config \n/config\n/config/topics\n/config/topics/test\n[zk: localhost:2181(CONNECTED) ]1 deleteall /config\n[zk: localhost:2181(CONNECTED) 2] ls /config\nNode does not exist: /config\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#8-stat","title":"8 stat","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793a\u8282\u70b9\u7684\u5143\u6570\u636e\u4fe1\u606f</li> <li>\u8bed\u6cd5\uff1a<code>stat [-w] path</code><ul> <li><code>-w</code>\uff1a\u76d1\u542c\u8282\u70b9\u5143\u6570\u636e\u53d8\u5316</li> </ul> </li> </ul> \u72b6\u6001\u5c5e\u6027 \u8282\u70b9\u8bf4\u660e cZxid \u6570\u636e\u8282\u70b9\u521b\u5efa\u65f6\u7684\u4e8b\u52a1ID ctime \u6570\u636e\u8282\u70b9\u521b\u5efa\u4e16\u7684\u65f6\u95f4 mZxid \u6570\u636e\u8282\u70b9\u6700\u540e\u4e00\u4e2a\u66f4\u65b0\u662f\u7684\u4e8b\u52a1ID mtime \u6570\u636e\u8282\u70b9\u6700\u540e\u4e00\u4e2a\u8ddf\u65b0\u65f6\u7684\u65f6\u95f4 pZxid \u6570\u636e\u8282\u70b9\u7684\u5b50\u8282\u70b9\u6700\u540e\u4e00\u4e2a\u88ab\u4fee\u6539\u65f6\u7684\u4e8b\u52a1ID cversion \u5b50\u8282\u70b9\u7684\u66f4\u6539\u6b21\u6570 dataVerion \u8282\u70b9\u6570\u636e\u7684\u66f4\u6539\u6b21\u6570 aclVersion \u8282\u70b9ACL\u7684\u66f4\u6539\u6b21\u6570 ephemeralOwner \u5982\u679c\u8282\u70b9\u662f\u4e34\u65f6\u8282\u70b9\uff0c\u5219\u8868\u793a\u521b\u5efa\u8be5\u8282\u70b9\u7684\u4f1a\u8bdd\u7684SeeesionID;\u5982\u679c\u662f\u6301\u4e45\u8282\u70b9\uff0c\u5219\u8be5\u5c5e\u6027\u503c\u4e3a0 dataLength \u6570\u636e\u5185\u5bb9\u7684\u957f\u5ea6 numChildren \u6570\u636e\u8282\u70b9\u5f53\u524d\u7684\u5b50\u8282\u70b9\u4e2a\u6570 <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>[zk: localhost:2181(CONNECTED) 0] stat  /node\ncZxid = 0x700000025\nctime = Sun Jul 24 19:21:19 CST 2022\nmZxid = 0x700000033\nmtime = Sun Jul 24 19:48:00 CST 2022\npZxid = 0x700000030\ncversion = 4\ndataVersion = 8\naclVersion = 0\nephemeralOwner = 0x0\ndataLength = 3\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#9-sync","title":"9 sync","text":"<ul> <li>\u529f\u80fd\uff1a\u5728leader\u548cfollowers\u95f4\u540c\u6b65\u8282\u70b9\u6570\u636e\uff08\u5f02\u6b65\uff09</li> <li>\u8bed\u6cd5\uff1a<code>sync path</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>[zk: localhost:2181(CONNECTED) 15] sync /node\nSync is OK\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#10-whoami","title":"10 whoami","text":"<ul> <li>\u529f\u80fd\uff1a\u7ed9\u51fa\u6dfb\u52a0\u5230\u5f53\u524d\u4f1a\u8bdd\u4e2d\u7684\u6240\u6709\u8eab\u4efd\u9a8c\u8bc1\u4fe1\u606f</li> <li>\u8bed\u6cd5\uff1a<code>whoami</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>[zk: 192.168.211.6:2181(CONNECTED) 0] whoami\nAuth scheme: User\nip: 192.168.211.6\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#2-quotas","title":"2. \u914d\u989dQuotas","text":"<ul> <li>\u5b98\u65b9\u6587\u6863-Quotas</li> </ul> <pre><code>1. zookeeper\u53ef\u4ee5\u8bbe\u7f6e\u8282\u70b9\u914d\u989d\uff0c\u5305\u62ec\u5b50\u8282\u70b9\u6570\u91cf\u3001\u6570\u636e\u957f\u5ea6\u9650\u5236\n2. zookeeper\u914d\u7f6e\u4fe1\u606f\u5b58\u5728**/zookeeper/quota**\u4e0b\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#1-setquota","title":"1 setquota","text":"<ul> <li>\u529f\u80fd\uff1a\u8bbe\u7f6e\u8282\u70b9\u914d\u989d</li> <li>\u8bed\u6cd5\uff1a<code>setquota -n|-b|-N|-B val path</code><ul> <li><code>-n</code>\uff1a\u9650\u5236\u5b50\u8282\u70b9\u6570\u91cf\uff08\u4ec5\u4ec5\u63d0\u793awanging\uff0c\u5b50\u8282\u70b9\u521b\u5efa\u6210\u529f\uff09</li> <li><code>-N</code>\uff1a\u9650\u5236\u5b50\u8282\u70b9\u6570\u91cf\uff08\u8d85\u8fc7\u62a5\u9519\uff0c\u5b50\u8282\u70b9\u521b\u5efa\u5931\u8d25\uff09</li> <li><code>-b</code>\uff1a\u9650\u5236\u8282\u70b9\u6570\u636e\u957f\u5ea6\uff08byte\u5355\u4f4d\uff09\uff08\u4ec5\u4ec5\u63d0\u793awanging\uff0c\u6570\u636e\u5199\u5165\u6210\u529f\uff09</li> <li><code>-B</code>\uff1a\u9650\u5236\u8282\u70b9\u6570\u636e\u957f\u5ea6\uff08byte\u5355\u4f4d\uff09\uff08\u8d85\u8fc7\u62a5\u9519\uff0c\u6570\u636e\u5199\u5165\u5931\u8d25\uff09</li> </ul> </li> <li>\u793a\u4f8b\uff1azookeeper-3.7.1\u7248\u672c\u6d4b\u8bd5\u53d1\u73b0\u4e0d\u8d77\u4f5c\u7528\uff0c\u4ee5\u4e0b\u793a\u4f8b\u6765\u81ea\u5b98\u65b9\u6587\u6863</li> </ul> <pre><code># -n to limit the number of child nodes(included itself)\n[zkshell: 18] setquota -n 2 /quota_test\n[zkshell: 19] create /quota_test/child_1\n    Created /quota_test/child_1\n[zkshell: 20] create /quota_test/child_2\n    Created /quota_test/child_2\n[zkshell: 21] create /quota_test/child_3\n    Created /quota_test/child_3\n# Notice:don't have a hard constraint,just log the warning info\n2019-03-07 11:22:36,680 [myid:1] - WARN  [SyncThread:0:DataTree@374] - Quota exceeded: /quota_test count=3 limit=2\n2019-03-07 11:22:41,861 [myid:1] - WARN  [SyncThread:0:DataTree@374] - Quota exceeded: /quota_test count=4 limit=2\n\n# -b to limit the bytes(data length) of one path\n[zkshell: 22] setquota -b 5 /brokers\n[zkshell: 23] set /brokers \"I_love_zookeeper\"\n# Notice:don't have a hard constraint,just log the warning info\nWARN  [CommitProcWorkThread-7:DataTree@379] - Quota exceeded: /brokers bytes=4206 limit=5\n\n# -N count Hard quota\n[zkshell: 3] create /c1\nCreated /c1\n[zkshell: 4] setquota -N 2 /c1\n[zkshell: 5] listquota /c1\nabsolute path is /zookeeper/quota/c1/zookeeper_limits\nOutput quota for /c1 count=-1,bytes=-1=;byteHardLimit=-1;countHardLimit=2\nOutput stat for /c1 count=2,bytes=0\n[zkshell: 6] create /c1/ch-3\nCount Quota has exceeded : /c1/ch-3\n\n# -B byte Hard quota\n[zkshell: 3] create /c2\n[zkshell: 4] setquota -B 4 /c2\n[zkshell: 5] set /c2 \"foo\"\n[zkshell: 6] set /c2 \"foo-bar\"\nBytes Quota has exceeded : /c2\n[zkshell: 7] get /c2\nfoo\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#2-listquota","title":"2 listquota","text":"<ul> <li>\u529f\u80fd\uff1a\u5217\u51fa\u8282\u70b9\u914d\u989d\u4fe1\u606f</li> <li>\u8bed\u6cd5\uff1a<code>listquota path</code></li> <li>\u793a\u4f8b<ul> <li><code>count</code>\u5b57\u6bb5\u7531<code>setquate -n</code>\u8bbe\u7f6e</li> <li><code>bytes</code>\u5b57\u6bb5\u7531<code>setquate -b</code>\u8bbe\u7f6e</li> <li><code>byteHardLimit</code>\u5b57\u6bb5\u7531<code>setquate -B</code>\u8bbe\u7f6e</li> <li><code>countHardLimit</code>\u5b57\u6bb5\u7531<code>setquate -N</code>\u8bbe\u7f6e</li> </ul> </li> </ul> <pre><code>[zk: 192.168.211.6:2181,192.168.211.6:2182,192.168.211.6:2183(CONNECTED) 2] setquota -b 5 /node\n[zk: 192.168.211.6:2181,192.168.211.6:2182,192.168.211.6:2183(CONNECTED) 3] listquota /node \nabsolute path is /zookeeper/quota/node/zookeeper_limits\nOutput quota for /node count=-1,bytes=5=;byteHardLimit=-1;countHardLimit=-1\nOutput stat for /node count=1,bytes=3\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#3-delquota","title":"3 delquota","text":"<ul> <li>\u529f\u80fd\uff1a\u5220\u9664\u914d\u989d</li> <li>\u8bed\u6cd5\uff1a<code>delquota [-n|-b|-N|-B] path</code>\uff0c\u9009\u9879\u5bf9\u5e94<code>setquot</code>\u8bbe\u7f6e\u7684</li> <li>\u793a\u4f8b</li> </ul> <pre><code>[zk: 192.168.211.6:2181,192.168.211.6:2182,192.168.211.6:2183(CONNECTED) 3] listquota /node \nabsolute path is /zookeeper/quota/node/zookeeper_limits\nOutput quota for /node count=-1,bytes=5=;byteHardLimit=-1;countHardLimit=-1\nOutput stat for /node count=1,bytes=3\n[zk: 192.168.211.6:2181,192.168.211.6:2182,192.168.211.6:2183(CONNECTED) 4] delquota -b /node\n[zk: 192.168.211.6:2181,192.168.211.6:2182,192.168.211.6:2183(CONNECTED) 5] listquota /node \nabsolute path is /zookeeper/quota/node/zookeeper_limits\nOutput quota for /node count=-1,bytes=-1=;byteHardLimit=-1;countHardLimit=-1\nOutput stat for /node count=1,bytes=3\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#3","title":"3. \u7cfb\u7edf\u529f\u80fd\u547d\u4ee4","text":""},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#1-connect","title":"1 connect","text":"<pre><code>1. \u672c\u5730\u8fde\u63a5\u6267\u884cconnect\u5373\u53ef\n2. \u8fdc\u7a0b\u8fde\u63a5\u6307\u5b9azookeeper\u670d\u52a1\uff0c\u6307\u5b9aip\u3001\u7aef\u53e3\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u8fde\u63a5zookeeper\u670d\u52a1</li> <li>\u8bed\u6cd5\uff1a<code>connect [host:port]</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>[zk: localhost:2181(CONNECTED) 9] connect 192.168.211.6:2182\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#2-close","title":"2 close","text":"<pre><code>close\u548cquit\u7684\u533a\u522b\uff1f\n- close\u53ea\u662f\u65ad\u5f00\u4e86\u670d\u52a1\u5668\u7684\u8fde\u63a5\uff0c\u4e0d\u4f1a\u9000\u51faookeeper\u5ba2\u6237\u7aef\u7684\u547d\u4ee4\u884c\u754c\u9762\n- quit\u4e0d\u4ec5\u65ad\u5f00\u4e86\u670d\u52a1\u5668\u8fde\u63a5\uff0c\u8fd8\u4f1a\u9000\u51fazookeeper\u5ba2\u6237\u7aef\u7684\u547d\u4ee4\u884c\u754c\u9762\n</code></pre> <ul> <li>\u529f\u80fd\uff1a\u65ad\u5f00\u4e0ezookeeper\u670d\u52a1\u7684\u8fde\u63a5\uff08\u4e0d\u9000\u51fa\u547d\u4ee4\u884c\uff09</li> <li>\u8bed\u6cd5\uff1a<code>close</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>[zk: localhost:2181(CONNECTED) 0] close\n\nWATCHER::\n\nWatchedEvent state:Closed type:None path:null\n2022-07-24 20:15:10,675 [myid:] - INFO  [main:ZooKeeper@1288] - Session: 0x1000001496a0008 closed\n2022-07-24 20:15:10,675 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@568] - EventThread shut down for session: 0x1000001496a0008\n[zk: localhost:2181(CLOSED) 1] ls /\nNot connected\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#3-quit","title":"3 quit","text":"<ul> <li>\u529f\u80fd\uff1a\u9000\u51fa\u5ba2\u6237\u7aef\u547d\u4ee4\u884c\u754c\u9762</li> <li>\u8bed\u6cd5\uff1a<code>quit</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>[zk: localhost:2181(CLOSED) 0] quit\n2022-07-24 20:14:30,165 [myid:] - INFO  [main:ServiceUtils@45] - Exiting JVM with code 0\n[root@zookeeper bin]# \n</code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#4-version","title":"4 version","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793azookeeper\u7248\u672c\u4fe1\u606f</li> <li>\u8bed\u6cd5\uff1a<code>version</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>[zk: localhost:2181(CONNECTED) 0] version\nZooKeeper CLI version: 3.7.1-a2fb57c55f8e59cdd76c34b357ad5181df1258d5, built on 2022-05-07 06:45 UTC\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#5-history","title":"5 history","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793a\u6700\u8fd1\u6267\u884c\u7684\u547d\u4ee4\uff08\u9ed8\u8ba411\u6761\uff09</li> <li>\u8bed\u6cd5\uff1a<code>history</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>[zk: localhost:2181(CONNECTED) 6] history\n0 - close\n1 - ls /\n2 - history\n3 - connect 4 - ls /\n5 - get /node\n6 - history\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#6-config","title":"6 config","text":"<ul> <li>\u529f\u80fd\uff1a\u663e\u793azookeeper\u96c6\u7fa4\u5217\u8868\u4fe1\u606f</li> <li>\u8bed\u6cd5\uff1a<code>config [-c] [-w] [-s]</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>[zk: localhost:2181(CONNECTED) 0] config \nserver.1=localhost:2287:3387:participant\nserver.2=localhost:2288:3388:participant\nserver.3=localhost:2289:3389:participant\nversion=0\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#7-printwatches","title":"7 printwatches","text":"<ul> <li>\u529f\u80fd\uff1a\u63a7\u5236\u662f\u5426\u6253\u5370\u76d1\u542c\u4e8b\u4ef6\u7684\u5f00\u5173</li> <li>\u8bed\u6cd5\uff1a<code>printwatches on|off</code><ul> <li><code>printwatches</code>\uff1a\u663e\u793a\u5f00\u5173\u72b6\u6001</li> <li><code>printwatches on</code>\uff1a\u6253\u5f00</li> <li><code>printwatches off</code>\uff1a\u5173\u95ed</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>[zk: localhost:2181(CONNECTED) 0] printwatches is on\n[zk: localhost:2181(CONNECTED) 1] printwatches off\n[zk: localhost:2181(CONNECTED) 2] printwatches\nprintwatches is off\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#4","title":"4. \u6743\u9650\u8ba4\u8bc1\u547d\u4ee4","text":"<pre><code>title: acl\u6743\u9650\u8303\u56f4\nzookeeper acl\u53ea\u9650\u5236\u6307\u5b9a\u7684znode\uff0c\u800c\u4e0d\u80fd\u9012\u5f52\u7684\u4f5c\u7528\u5728\u5176\u5b50\u8282\u70b9\u4e0a\u3002\u56e0\u6b64\u5982\u679c/node\u53ea\u80fd\u88ab\u67d0\u4e2a\u7528\u6237\u64cd\u4f5c\uff0c\u4f46/node/child\u53ef\u4ee5\u88ab\u4efb\u610f\u7528\u6237\u64cd\u4f5c\u3002\n</code></pre> <p>acl\u6743\u9650\u63a7\u5236\uff0c\u4f7f\u7528scheme\uff1aid\uff1apermission\u6765\u8868\u793a\uff0c\u4e3b\u8981\u6db5\u76d63\u4e2a\u65b9\u9762\uff1a - \u6743\u9650\u6a21\u5f0f(scheme)\uff1a\u6388\u6743\u7684\u7b56\u7565 - \u6388\u6743\u5bf9\u8c61(id)\uff1a\u6388\u6743\u7684\u5bf9\u8c61 - \u6743\u9650(permission)\uff1a\u6388\u4e88\u7684\u6743\u9650</p>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#1","title":"1 \u6743\u9650\u6a21\u5f0f","text":"<pre><code>1. acl\u9ed8\u8ba4\u662fworld:anyone\u6743\u9650\uff0c\u5373\u6240\u6709\u4eba\u90fd\u5177\u6709\u6743\u9650\n</code></pre> <pre><code>title: auth\u548cdigest\u7684\u533a\u522b\uff1f\n1.  auth\u65b9\u5f0f, \u5bf9\u4e8e\u4e00\u4e2aZNode\u53ef\u4ee5\u540c\u65f6\u8bbe\u7f6e\u591a\u4e2a\u7528\u6237\u8bbf\u95ee\u6743\u9650, \u53ea\u4e0d\u8fc7\u8fd9\u4e9b\u7528\u6237\u7684\u6743\u9650\u662f\u76f8\u540c\u7684: \u4f7f\u7528addAuth \u8ba4\u8bc1\u591a\u4e2a\u7528\u6237\u5373\u53ef\n2.  digest\u65b9\u5f0f, \u8bbe\u7f6e\u6743\u9650\u65f6, \u4e00\u4e2a\u8282\u70b9\u53ea\u80fd\u8bbe\u7f6e\u4e00\u4e2a\u7528\u6237\u8bbf\u95ee\n3.  digest \u65b9\u5f0f\u8bbe\u7f6e\u65f6, \u5bc6\u7801\u9700\u8981\u4f7f\u7528\u5bc6\u6587, \u5426\u5219\u4e0d\u80fd\u8bbf\u95ee, \u5177\u4f53\u5bc6\u6587\u83b7\u53d6\u65b9\u5f0f\u53ef\u901a\u8fc7zookeeper \u4e2d\u81ea\u5e26\u5de5\u5177\u5b9e\u73b0\n</code></pre> \u65b9\u6848 \u63cf\u8ff0 \u793a\u4f8b world \u53ea\u6709\u4e00\u4e2a\u7528\u6237\uff1aanyone\uff0c\u4ee3\u8868\u767b\u5f55zooleeper\u6240\u6709\u4eba\uff08\u9ed8\u8ba4\uff09 set /node world:anyone:cdrwa ip \u5bf9\u5ba2\u6237\u7aef\u4f7f\u7528ip\u5730\u5740\u8ba4\u8bc1 set /node ip:192.168.0.0/16:cdrwa auth \u4f7f\u7528\u5df2\u6dfb\u52a0\u8ba4\u8bc1\u7684\u7528\u6237\u8ba4\u8bc1 set /node auth user01:12345:cdrwa digest \u4f7f\u7528\u201c\u7528\u6237\u540d\uff1a\u5bc6\u7801\u201d\u65b9\u5f0f\u8ba4\u8bc1 set /node digest:user01:2V1RbjS129q4paBdYYQ4buzFceU=:cdrwa"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#11-world","title":"1.1 world","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>set /node world:anyone:cdrwa</code>\uff1a\u56fa\u5b9a\u642d\u914d\uff0cworld\u53ea\u6709anyone\uff0c\u8868\u793a\u6240\u6709\u7528\u6237\u90fd\u6709\u6743\u9650\uff0czookeeper\u8282\u70b9\u9ed8\u8ba4\u662f\u8fd9\u4e2a\u6743\u9650</li> </ul>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#12-ip","title":"1.2 ip","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>set /node ip:192.168.0.0/16:cdrwa</code><ul> <li>\u5176\u4e2dip\u90e8\u5206\u53ef\u4ee5\u6709\u63a9\u7801\u90e8\u5206\uff0c\u8868\u793a\u67d0\u4e2a\u7f51\u6bb5\u5185\uff0c\u5982\u679c\u6ca1\u6709\u63a9\u7801\u8868\u793a\u67d0\u4e2a\u5177\u4f53ip</li> </ul> </li> </ul>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#13-auth","title":"1.3 auth","text":"<ul> <li>\u8bed\u6cd5\uff1a<ul> <li><code>set /node auth:user:cdrwa</code>\uff1a\u6307\u5b9a\u67d0\u7528\u6237\u767b\u5f55\uff08\u5f53user\u5df2\u7ecf\u901a\u8fc7addauth\u8ba4\u8bc1\uff0cpasswd\u53ef\u4ee5\u4e0d\u5199\uff09</li> <li><code>set /node auth:user:passwd:cdrwa</code>\uff1a\u6307\u5b9a\u67d0\u7528\u6237\u767b\u5f55\uff0cuser\u548cpasswd\u662f\u660e\u6587\uff0c\u5982\uff1a<code>set /node auth:user01:12345:cdrwa</code></li> <li><code>set /node auth::cdrwa</code>\uff1a\u6388\u6743\u7ed9\u5f53\u524d\u6240\u6709\u5df2\u8ba4\u8bc1\u7684\u7528\u6237\uff08\u5728\u5f53\u524d\u8fde\u63a5\u4e2d\uff0c\u6240\u6709\u901a\u8fc7addauth\u547d\u4ee4\u8ba4\u8bc1\u7684\u7528\u6237\uff09</li> </ul> </li> </ul>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#14-digest","title":"1.4 digest","text":"<ul> <li>\u8bed\u6cd5\uff1a<code>set /node digest:user:base64(SHA1(pwd)):cdrwa</code>\uff0c\u5176\u4e2dbase64\u7f16\u7801\u53ef\u7528\u5982\u4e0b\u6307\u4ee4\u83b7\u53d6</li> <li>\u53ef\u7528\u6b64\u547d\u4ee4\u5f97\u5230\uff1a</li> </ul> <pre><code>[root@zookeeper ~]# echo -n user01:12345 | openssl dgst -binary -sha1 | openssl base64\n2V1RbjS129q4paBdYYQ4buzFceU=\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#2","title":"2 \u6388\u4e88\u7684\u6743\u9650","text":"<pre><code>- create\u3001delete\u3001read\u3001writer\u3001admin\u4e5f\u5c31\u662f\u589e\u3001\u5220\u3001\u6539\u3001\u67e5\u3001\u7ba1\u7406\u6743\u9650\uff0c\u8fd95\u4e2d\u6743\u9650\u7b80\u5199\u4e3acdrwa\u3001\u6ce8\u610f\uff1a\u8fd95\u4e2d\u6743\u9650\u4e2d\uff0cdelete\u662f\u6307\u5bf9\u5b50\u8282\u70b9\u7684\u5220\u9664\u6743\u9650\uff0c\u5176\u4ed64\u79cd\u6743\u9650\u503c\u5bf9\u81ea\u8eab\u8282\u70b9\u7684\u6743\u9650\u64cd\u4f5c\u3002\n</code></pre> \u6743\u9650 ACL\u7b80\u5199 \u63cf\u8ff0 create c \u53ef\u4ee5\u521b\u5efa\u5b50\u8282\u70b9 delete d \u53ef\u4ee5\u5220\u9664\u5b50\u8282\u70b9(\u4ec5\u4e0b\u4e00\u7ea7\u8282\u70b9) read r \u53ef\u4ee5\u8bfb\u53d6\u8282\u70b9\u6570\u636e\u53ca\u663e\u793a\u5b50\u8282\u70b9\u5217\u8868 write w \u53ef\u4ee5\u8bbe\u7f6e\u8282\u70b9\u6570\u636e admin a \u53ef\u4ee5\u8bbe\u7f6e\u8282\u70b9\u8bbf\u95ee\u63a7\u5236\u5217\u8868\u6743\u9650"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#3_1","title":"3 \u6388\u6743\u7684\u76f8\u5173\u547d\u4ee4","text":"\u547d\u4ee4 \u4f7f\u7528\u65b9\u5f0f \u63cf\u8ff0 getAcl <code>getAcl &lt;path&gt;</code> \u8bfb\u53d6ACL\u6743\u9650 setAcl <code>setAcl &lt;path&gt; &lt;acl&gt;</code> \u8bbe\u7f6eACL\u6743\u9650 addauth <code>addauth &lt;scheme&gt; &lt;auth&gt;</code> \u6dfb\u52a0\u8ba4\u8bc1\u7528\u6237"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#4-addauth","title":"4 addauth","text":"<ul> <li>\u529f\u80fd\uff1a\u7530\u95f4acl\u7528\u6237</li> <li>\u8bed\u6cd5\uff1a<code>setAcl [-s] [-v version] [-R] path acl</code></li> <li>\u793a\u4f8b</li> </ul> <pre><code>[zk: localhost:2181(CONNECTED) 4] ls -R /node\n/node\n/node/child_1\n/node/child_2\n[zk: localhost:2181(CONNECTED) 5] addauth digest user01:12345\n[zk: localhost:2181(CONNECTED) 6] setAcl /node auth:user01:12345:cdrwa\n[zk: localhost:2181(CONNECTED) 7] getAcl /node\n'digest,'user01:2V1RbjS129q4paBdYYQ4buzFceU=\n: cdrwa\n\n### \u91cd\u65b0\u542f\u52a8\u4e00\u4e2a\u5ba2\u6237\u7aef\uff0c\u6267\u884c\u663e\u793a\u6ca1\u6709\u6743\u9650\uff0c\u9700\u8981\u5bf9\u6b64\u8282\u70b9acl\u6388\u6743\n[zk: localhost:2181(CONNECTED) 0] ls /node \nInsufficient permission : /node\n[zk: localhost:2181(CONNECTED) 2] addauth digest user01:12345\n[zk: localhost:2181(CONNECTED) 3] ls /node [child_1, child_2]\n\n### \u91cd\u65b0\u542f\u52a8\u4e00\u4e2a\u5ba2\u6237\u7aef,\u67e5\u770b\u5b50\u8282\u70b9acl\uff0c\u53d1\u73b0\u662f\u6709\u6743\u9650\u7684\n[zk: localhost:2181(CONNECTED) 0] getAcl /node/child_1\n'world,'anyone\n: cdrwa\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#5-setacl","title":"5 setAcl","text":"<ul> <li>\u529f\u80fd\uff1a\u6dfb\u52a0acl\u6743\u9650\u8ba4\u8bc1</li> <li>\u8bed\u6cd5\uff1a<code>setAcl [-s] [-v version] [-R] path acl</code><ul> <li><code>-s</code>\uff1a\u663e\u793a\u8282\u70b9\u5143\u6570\u636e</li> <li><code>-v version</code>\uff1a\u6307\u5b9aaclVersion\uff08\u5982\u679caclVersion\u4e0d\u7b49\u4e8e\u5f53\u524d\u7248\u672c\u5c31\u4f1a\u5931\u8d25\uff09</li> <li><code>-R</code>\uff1a\u9012\u5f52\u5b50\u8282\u70b9\u8ba4\u8bc1</li> <li><code>acl</code>\uff1a\u4efb\u610f\u4e00\u79cdacl\u8ba4\u8bc1\uff08world\u3001ip\u3001auth\u3001digest\uff09</li> </ul> </li> <li>\u793a\u4f8b1\uff1a\u7ed9\u6307\u5b9a\u7528\u6237\u6388\u6743</li> <li>\u793a\u4f8b2\uff1a\u7ed9\u6240\u6709\u5df2\u8ba4\u8bc1\u7684\u7528\u6237\u6388\u6743</li> </ul> <pre><code>[zk: localhost:2181(CONNECTED) 1] addauth digest user01:12345\n[zk: localhost:2181(CONNECTED) 2] addauth digest user02:12345\n[zk: localhost:2181(CONNECTED) 3] setAcl /node auth::crwda\n[zk: localhost:2181(CONNECTED) 4] getAcl /node5\n'digest,'user02:rm9fm1I2P4iDRU7zvVL9HFuTmPk=\n: cdrwa\n'digest,'user01:2V1RbjS129q4paBdYYQ4buzFceU=\n: cdrwa\n</code></pre> <ul> <li>\u793a\u4f8b3\uff1a\u6307\u5b9aaclVersion</li> </ul> <pre><code>[zk: localhost:2181(CONNECTED) 1] setAcl -s /node5 auth::crwda\ncZxid = 0x800000011\nctime = Mon Jul 25 01:00:18 CST 2022\nmZxid = 0x800000011\nmtime = Mon Jul 25 01:00:18 CST 2022\npZxid = 0x800000011\ncversion = 0\ndataVersion = 0\naclVersion = 4\nephemeralOwner = 0x0\ndataLength = 11\nnumChildren = 0\n[zk: localhost:2181(CONNECTED) 2] getAcl /node5\n'digest,'user02:rm9fm1I2P4iDRU7zvVL9HFuTmPk=\n: cdrwa\n'digest,'user01:2V1RbjS129q4paBdYYQ4buzFceU=\n: cdrwa\n[zk: localhost:2181(CONNECTED) 3] setAcl -v 3 /node5 auth::crwda\nversion No is not valid : /node5\n[zk: localhost:2181(CONNECTED) 4] setAcl -v 4 /node5 auth::crwda\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#6-getacl","title":"6 getAcl","text":"<ul> <li>\u529f\u80fd\uff1a\u83b7\u53d6acl\u6743\u9650\u8ba4\u8bc1\u4fe1\u606f</li> <li>\u8bed\u6cd5\uff1a<code>getAcl [-s] path</code><ul> <li><code>-s</code>\uff1a\u663e\u793a\u8282\u70b9\u5143\u4fe1\u606f</li> </ul> </li> <li>\u793a\u4f8b</li> </ul> <pre><code>[zk: localhost:2181(CONNECTED) 1] getAcl /node5\n'digest,'user02:rm9fm1I2P4iDRU7zvVL9HFuTmPk=\n: cdrwa\n'digest,'user01:2V1RbjS129q4paBdYYQ4buzFceU=\n: cdrwa\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E5%91%BD%E4%BB%A4/#7","title":"7 \u7ba1\u7406\u5458\u7528\u6237","text":"<ol> <li>\u521b\u5efa\u7ba1\u7406\u5458\u7528\u6237\uff0c\u5bc6\u7801\u9700\u8981base64\u7f16\u7801\uff0c\u7528\u6237\u5bc6\u7801\u81ea\u5b9a\u4e49\uff0c\u5982\u7528\u6237admin\uff0c\u5bc6\u7801admin\u3002</li> </ol> <pre><code>[root@zookeeper bin]# echo -n admin:admin | openssl dgst -binary -sha1 | openssl base64\nx1nq8J5GOJVPY6zgzhtTtA9izLc=\n</code></pre> <ol> <li>\u7f16\u8f91zkServer.sh\u6587\u4ef6\uff0c\u65b0\u589e\u542f\u52a8\u53c2\u6570<code>\"-Dzookeeper.DigestAuthenticationProvider.superDigest=admin:x1nq8J5GOJVPY6zgzhtTtA9izLc=\" \\</code>,\u91cd\u65b0\u542f\u52a8zookeeper\u96c6\u7fa4</li> <li>\u793a\u4f8b\uff1a\u4ee5\u4e0b\u662f<code>sh zkServer.sh start</code>\u542f\u52a8\u547d\u4ee4\u793a\u4f8b\uff0c\u5982\u679c\u662f\u4ee5<code>sh zkServer.sh start-foreground</code>\u542f\u52a8\uff0c\u5c31\u4fee\u6539\u811a\u672c\u91cc\u9762\u5bf9\u5e94\u7684\u5730\u65b9</li> </ol> <pre><code> nohup \"$JAVA\" $ZOO_DATADIR_AUTOCREATE \"-Dzookeeper.log.dir=${ZOO_LOG_DIR}\" \\\n\"-Dzookeeper.log.file=${ZOO_LOG_FILE}\" \"-Dzookeeper.root.logger=${ZOO_LOG4J_PROP}\" \\\n\"-Dzookeeper.DigestAuthenticationProvider.superDigest=admin:x1nq8J5GOJVPY6zgzhtTtA9izLc=\" \\\n-XX:+HeapDumpOnOutOfMemoryError -XX:OnOutOfMemoryError='kill -9 %p' \\\n-cp \"$CLASSPATH\" $JVMFLAGS $ZOOMAIN \"$ZOOCFG\" &gt; \"$_ZOO_DAEMON_OUT\" 2&gt;&amp;1 &lt; /dev/null &amp;\n</code></pre> <ul> <li>\u6d4b\u8bd5\u793a\u4f8b\uff1a\u8ba4\u8bc1admin\u7528\u6237\uff0c\u5373\u53ef\u5177\u6709\u5176\u5b83\u7528\u6237\u7684\u6743\u9650</li> </ul> <pre><code>[zk: localhost:6666(CONNECTED) 0] getAcl /node\nInsufficient permission : /node\n[zk: localhost:6666(CONNECTED) 1] addauth digest admin:admin\n[zk: localhost:6666(CONNECTED) 2] getAcl /node\n'digest,'user01:2V1RbjS129q4paBdYYQ4buzFceU=\n: cdrwa\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E9%83%A8%E7%BD%B2/","title":"zookeeper\u90e8\u7f72","text":""},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E9%83%A8%E7%BD%B2/#1-jdk","title":"1 \u5b89\u88c5jdk","text":""},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E9%83%A8%E7%BD%B2/#11-yum","title":"1.1 yum\u5b89\u88c5","text":"<pre><code># \u67e5\u627e\u53ef\u7528jdk\u5b89\u88c5\n[root@zookeeper ~]# yum search jdk\n# \u5b89\u88c5\u6307\u5b9a\u7248\u672cjdk\n[root@zookeeper ~]# yum install  java-1.8.0-openjdk-devel java-1.8.0-openjdk\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E9%83%A8%E7%BD%B2/#2-zookeeper","title":"2 \u4e0b\u8f7dzookeeper","text":"<ul> <li>\u5b98\u65b9\u4e0b\u8f7d\u5730\u5740</li> <li>\u4e0b\u8f7dbin.tar.gz\u7ed3\u5c3e\u7684\u5b89\u88c5\u5305\uff0c\u5982<code>apache-zookeeper-3.7.1-bin.tar.gz</code></li> </ul>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E9%83%A8%E7%BD%B2/#3-zookeeper","title":"3 \u5355\u673a\u5b89\u88c5zookeeper","text":"<ol> <li>\u89e3\u538b\u5b89\u88c5\u5305</li> <li>\u91cd\u547d\u540d\uff08\u53ef\u9009\uff09</li> <li>\u4fee\u6539\u914d\u7f6e<ol> <li>\u4fee\u6539<code>dataDir</code>\u3001<code>clientPort</code>\u914d\u7f6e</li> </ol> </li> <li>\u542f\u52a8\u670d\u52a1\u7aef\uff1a\u8fdb\u5165\u5b89\u88c5\u76ee\u5f55\u4e0b\u7684bin\u76ee\u5f55\uff0c\u6267\u884c<code>sh zkServer.sh start</code></li> <li>\u67e5\u770b\u72b6\u6001\uff1a\u8fdb\u5165\u5b89\u88c5\u76ee\u5f55\u4e0b\u7684bin\u76ee\u5f55\uff0c\u6267\u884c<code>sh zkServer.sh status</code></li> <li>\u5ba2\u6237\u7aef\u8fde\u63a5\uff1a<code>sh zkCli.sh -server 127.0.0.1:port</code>\uff0c\u5982\u679cport\u6539\u53d8\u4e86\uff0c\u9700\u8981\u6307\u5b9a\u7aef\u53e3\uff0c\u9ed8\u8ba4\u8fde\u63a5\u7684\u65f62181\u7aef\u53e3</li> </ol> <pre><code>[root@zookeeper ~]# tar -xzf apache-zookeeper-3.7.1-bin.tar.gz &amp;&amp;\\\nmv apache-zookeeper-3.7.1-bin zookeeper-3.7.1 &amp;&amp;\\\ncd zookeeper-3.7.1/conf/ &amp;&amp;\\\ncp zoo_sample.cfg zoo.cfg &amp;&amp;\\\nvi zoo.cfg\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E9%83%A8%E7%BD%B2/#4-zookeeper","title":"4 \u96c6\u7fa4\u5b89\u88c5zookeeper","text":"<ol> <li>\u914d\u7f6ezoo.cfg\u6587\u4ef6\uff0c\u6dfb\u52a0\u4e0a\u96c6\u7fa4\u4e2d\u670d\u52a1ip\u3001port</li> <li>\u5728data\u76ee\u5f55\u4e0b\u65b0\u5efamyid\u6587\u4ef6\uff0c\u5e76\u5199\u5165\u5bf9\u5e94\u7684id\uff0c\u5373zoo.cfg\u4e2d\u914d\u7f6e\u7684server.1\u3001server.2\u4e2d\u7684\u6570\u503c1\u30012</li> <li>\u542f\u52a8\u96c6\u7fa4\u4e2d\u6bcf\u4e00\u4e2azookeeper\u670d\u52a1</li> </ol> <pre><code># The number of milliseconds of each tick\ntickTime=2000\n# The number of ticks that the initial\n# synchronization phase can take\ninitLimit=10\n# The number of ticks that can pass between\n# sending a request and getting an acknowledgement\nsyncLimit=5\n# the directory where the snapshot is stored.\n# do not use /tmp for storage, /tmp here is just\n# example sakes.\ndataDir=/root/zookeeper-3.7.1-1/data\n# the port at which the clients will connect\nclientPort=2181\n# the maximum number of client connections.\n# increase this if you need to handle more clients\n#maxClientCnxns=60\n#\n# Be sure to read the maintenance section of the\n# administrator guide before turning on autopurge.\n#\n# http://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_maintenance\n#\n# The number of snapshots to retain in dataDir\n#autopurge.snapRetainCount=3\n# Purge task interval in hours\n# Set to \"0\" to disable auto purge feature\n#autopurge.purgeInterval=1\n\n## Metrics Providers\n#\n# https://prometheus.io Metrics Exporter\n#metricsProvider.className=org.apache.zookeeper.metrics.prometheus.PrometheusMetricsProvider\n#metricsProvider.httpPort=7000\n#metricsProvider.exportJvmInfo=true\nextendedTypesEnabled=true\nserver.1=192.168.211.6:2287:3387\nserver.2=192.168.211.7:2288:3388\nserver.3=192.168.211.8:2289:3389\n</code></pre> <pre><code>## \u8fdb\u5165\u6253\u4ed6\u76ee\u5f55\uff0c\u7f16\u8f91myid\u6587\u4ef6\n### \u5728server.1\u4e0a\n[root@zookeeper data]# echo 1 &gt; myid\n### \u5728server.2\u4e0a\n[root@zookeeper data]# echo 2 &gt; myid\n### \u5728server.3\u4e0a\n[root@zookeeper data]# echo 3 &gt; myid\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E9%83%A8%E7%BD%B2/#5-zookeeper","title":"5 zookeeper\u96c6\u7fa4\u542f\u505c\u811a\u672c","text":""},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E9%83%A8%E7%BD%B2/#51","title":"5.1 \u4f2a\u96c6\u7fa4\u811a\u672c","text":"<ul> <li>\u542f\u52a8\uff1a<code>sh zk.sh start</code></li> <li>\u505c\u6b62\uff1a<code>sh zk.sh stop</code></li> <li>\u67e5\u72b6\u6001\uff1a<code>sh zk.sh status</code></li> </ul> <pre><code>#!/bin/bash\n#filename=zk.sh\nZKPATH=/root/zookeeper-3.7.1\noption_num=$#\noption=$1\noptions=(\"start\" \"stop\" \"status\")\ncheck()\n{\nlocal exist_flag=0\nif [ ${option_num} -ne 1 ]\nthen\nhelp\nfi\nfor op in ${options[*]}\ndo\nif [ \"$option\" != \"$op\" ]\nthen\nexist_flag=0\ncontinue\nelse\nexist_flag=1\nbreak\nfi\ndone\nif [ $exist_flag -eq 0 ]\nthen\nhelp\nfi\n}\nhelp()\n{\necho \"---------------------------------------------------------------\"\necho \"\u8f93\u5165\u8bed\u6cd5\u9519\u8bef\"\necho \"\u542f\u52a8zookeeper\u96c6\u7fa4\uff1a    sh ${0} start\"\necho \"\u505c\u6b62zookeeper\u96c6\u7fa4\uff1a    sh ${0} stop\"\necho \"\u67e5\u770bzookeeper\u96c6\u7fa4\u72b6\u6001\uff1ash ${0} status\"\necho \"---------------------------------------------------------------\"\nexit 1\n}\nmain()\n{\nfor((i=1;i&lt;=3;i++))\ndo\necho \"------------------zookeeper-${i} $option-----------------------\"\ncd \"${ZKPATH}-${i}/bin\" &amp;&amp; sh zkServer.sh $option\ndone\n}\ncheck\nmain\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E9%85%8D%E7%BD%AE/","title":"zookeeper\u914d\u7f6e","text":""},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E9%85%8D%E7%BD%AE/#1","title":"1 \u6700\u5c0f\u914d\u7f6e","text":""},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E9%85%8D%E7%BD%AE/#11-clientport","title":"1.1 clientPort","text":"<ul> <li>clientPort\u00a0: \u5ba2\u6237\u7aef\u8fde\u63a5\u670d\u52a1\u7aef\u7684port</li> </ul>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E9%85%8D%E7%BD%AE/#12-datadir","title":"1.2 dataDir","text":"<pre><code>\u5c0f\u5fc3\u653e\u7f6e\u4e8b\u52a1\u65e5\u5fd7\u7684\u5730\u65b9\u3002\u4e13\u7528\u7684\u4e8b\u52a1\u65e5\u5fd7\u8bbe\u5907\u662f\u4fdd\u6301\u826f\u597d\u6027\u80fd\u7684\u5173\u952e\u3002\u5c06\u65e5\u5fd7\u653e\u5728\u7e41\u5fd9\u7684\u8bbe\u5907\u4e0a\u4f1a\u5bf9\u6027\u80fd\u4ea7\u751f\u4e0d\u5229\u5f71\u54cd\u3002\n</code></pre> <ul> <li>dataDir\u00a0: \u5b58\u50a8\u5185\u5b58\u6570\u636e\u5e93\u5feb\u7167\u7684\u4f4d\u7f6e\uff0c\u4ee5\u53ca\u6570\u636e\u5e93\u66f4\u65b0\u7684\u4e8b\u52a1\u65e5\u5fd7</li> </ul>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E9%85%8D%E7%BD%AE/#13-ticktime","title":"1.3 tickTime","text":"<ul> <li>tickTime_: \u5355\u6b21tick\u7684\u65f6\u95f4\uff0c\u5355\u4f4dms\uff0c\u7528\u4e8e\u5fc3\u8df3\u3001\u8d85\u65f6\u68c0\u6d4b\u3002</li> </ul>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E9%85%8D%E7%BD%AE/#2","title":"2 \u9ad8\u7ea7\u914d\u7f6e","text":""},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E9%85%8D%E7%BD%AE/#21-initlimit","title":"2.1 initLimit","text":"<ul> <li>\u89e3\u91ca\uff1a\u5728\u521d\u59cb\u5316\u96c6\u7fa4\uff08leader\u9009\u4e3e\uff09\u65f6followers\u548cleader\u540c\u6b65\u7684tick\u6570\uff0c\u8d85\u8fc7\u6b21\u6570\uff0c\u6b64\u6b21\u9009\u4e3e\u5c31\u4f1a\u5931\u8d25\u3002</li> </ul>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E9%85%8D%E7%BD%AE/#22-synclimit","title":"2.2 syncLimit","text":"<ul> <li>\u89e3\u91ca\uff1afollowers\u548cleader\u540c\u6b65\u7684tick\u6570\uff0c\u8d85\u8fc7\u6b21\u6570\uff0cleader\u5c31\u4f1a\u629b\u5f03follower</li> </ul>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E9%85%8D%E7%BD%AE/#3-server","title":"3 server","text":"<ul> <li>\u89e3\u91ca\uff1a\u96c6\u7fa4\u4e2d\u6bcf\u4e00\u4e2a\u670d\u52a1\u7684ip\u3001port</li> <li>\u793a\u4f8b</li> </ul> <pre><code>server.1=192.168.211.6:2287:3387\nserver.2=192.168.211.7:2288:3388\nserver.3=192.168.211.8:2289:3389\n</code></pre>"},{"location":"Documents/F-Open-Source-Project/zookeeper/zookeeper%E9%85%8D%E7%BD%AE/#4","title":"4 \u52a8\u6001\u914d\u7f6e","text":""},{"location":"Documents/G-System/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/","title":"\u7cfb\u7edf\u67b6\u6784","text":""},{"location":"Documents/G-System/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/#1-x86-arm","title":"1 X86 \u548c ARM","text":"<ul> <li>X86 \u548c ARM \u90fd\u662f\u6307 CPU \u7684\u5185\u6838\u3002</li> <li>X86 \u7c7b\u578b\u7684\u5904\u7406\u5668\u662f\u5178\u578b\u7684 CISC\uff0c\u6307\u4ee4\u96c6\u4e30\u5bcc\uff0c\u6027\u80fd\u5f3a\u3002\u6211\u4eec\u76ee\u524d\u5728\u684c\u9762\u7535\u8111\uff0c\u7b14\u8bb0\u672c\u7535\u8111\u4e2d\u4f7f\u7528\u7684 Intel\u3001AMD \u5904\u7406\u5668\uff0c\u5c31\u662f X86 \u5904\u7406\u5668\u3002</li> <li>ARM \u662f\u4e00\u5bb6\u82f1\u56fd\u7684\u5904\u7406\u5668\u8bbe\u8ba1\u516c\u53f8\uff0c\u5176\u8bbe\u8ba1\u7684\u5904\u7406\u5668\u91c7\u7528\u4e86 ARM \u5185\u6838\u3002ARM \u5904\u7406\u5668\u662f\u5178\u578b\u7684 RISC\uff0c\u6307\u4ee4\u96c6\u8f83 X86 \u8981\u7cbe\u7b80\u5f88\u591a\uff0c\u4e32\u884c\u6027\u80fd\u8981\u8fdc\u8fdc\u5f31\u4e8e X86\u3002\u4f46 ARM \u6307\u4ee4\u96c6\u5c11\uff0c\u7535\u8def\u89c4\u6a21\u5c0f\uff0c\u529f\u8017\u4f4e\uff0c\u53d1\u70ed\u4f4e\uff0c\u975e\u5e38\u9002\u5408\u4e8e\u5d4c\u5165\u5f0f\u3001\u4fbf\u643a\u5f0f\u7535\u5b50\u4ea7\u54c1\uff0c\u5982\u624b\u673a\u3001\u5e73\u677f\uff0c\u4ee5\u53ca\u5de5\u4e1a\u5d4c\u5165\u5f0f\u7b49\u3002</li> </ul>"},{"location":"Documents/G-System/CPU/CPU/","title":"CPU","text":""},{"location":"Documents/G-System/CPU/CPU/#1-cpu","title":"1 cpu\u7ec4\u6210","text":"<pre><code>\u968f\u7740\u82af\u7247\u96c6\u6210\u5ea6\u7684\u4e0d\u65ad\u63d0\u9ad8\uff0c\u73b0\u4ee3CPU\u9664\u4e86\u542b\u6709\u8fd0\u7b97\u5668\u548c\u63a7\u5236\u5668\u5916\uff0c\u5e38\u5e38\u8fd8\u96c6\u6210\u4e86\u5176\u5b83\u90e8\u4ef6\uff0c\u6bd4\u5982\u9ad8\u901f\u7f13\u5b58\uff08Cache\uff09\u90e8\u4ef6\u3001\u5185\u5b58\u63a7\u5236\u5668\u7b49\n</code></pre> <ul> <li>CPU\u57fa\u7840\u77e5\u8bc6-CPU\u7684\u7ec4\u6210 \u8fd0\u7b97\u5668\u3001\u63a7\u5236\u5668\u3001\u5bc4\u5b58\u5668</li> <li>CPU\u5185\u90e8\u4e3b\u8981\u7531\u8fd0\u7b97\u5668\u3001\u63a7\u5236\u5668\u3001\u5bc4\u5b58\u5668\u4e09\u5927\u90e8\u5206\u7ec4\u6210\u3002<ul> <li>\u8fd0\u7b97\u5668\uff1a\u8d1f\u8d23\u7b97\u672f\u8fd0\u7b97\uff08+ - * / \u57fa\u672c\u8fd0\u7b97\u548c\u9644\u52a0\u8fd0\u7b97\uff09\u548c\u903b\u8f91\u8fd0\u7b97\uff08\u5305\u62ec \u79fb\u4f4d\u3001\u903b\u8f91\u6d4b\u8bd5\u6216\u6bd4\u8f83\u4e24\u4e2a\u503c\u7b49\uff09\u3002  </li> <li>\u63a7\u5236\u5668\uff1a\u8d1f\u8d23\u5e94\u5bf9\u6240\u6709\u7684\u4fe1\u606f\u60c5\u51b5\uff0c\u8c03\u5ea6\u8fd0\u7b97\u5668\u628a\u8ba1\u7b97\u505a\u597d\u3002  </li> <li>\u5bc4\u5b58\u5668\uff1a\u5b83\u4eec\u53ef\u7528\u6765\u6682\u5b58\u6307\u4ee4\u3001\u6570\u636e\u548c\u5730\u5740\u3002\u65e2\u8981\u5bf9\u63a5\u63a7\u5236\u5668\u7684\u547d\u4ee4\uff0c\u4f20\u8fbe\u547d\u4ee4\u7ed9\u8fd0\u7b97\u5668\uff1b\u8fd8\u8981\u5e2e\u8fd0\u7b97\u5668\u8bb0\u5f55\u5904\u7406\u5b8c\u6216\u8005\u5c06\u8981\u5904\u7406\u7684\u6570\u636e\u3002</li> </ul> </li> </ul>"},{"location":"Documents/G-System/CPU/CPU/#11","title":"1.1 \u63a7\u5236\u5668","text":"<p>\u63a7\u5236\u5668\u7531\u7a0b\u5e8f\u8ba1\u6570\u5668\uff08PC\uff0cProgram Counter\uff09\u3001\u6307\u4ee4\u5bc4\u5b58\u5668\uff08IR\uff0cInstruction Register\uff09\u3001\u6307\u4ee4\u8bd1\u7801\u5668\uff08ID\uff0cInstruction Decoder\uff09\u3001\u65f6\u5e8f\u4ea7\u751f\u5668\uff08Timing Generator\uff09\u3001\u64cd\u4f5c\u63a7\u5236\u5668\uff08Control Unit\uff09\u7ec4\u6210\u3002 <code>\u6307\u4ee4\u5bc4\u5b58\u5668IR</code>\uff0c\u662f\u7528\u6765\u5b58\u653e\u5f53\u524d\u6b63\u5728\u6267\u884c\u7684\u7684\u4e00\u6761\u6307\u4ee4\uff0c\u5b58\u653e\u7684\u5185\u5bb9\u6765\u81ea\u4e8e\u6570\u636e\u5bc4\u5b58\u5668\uff08DR\uff0cData Register\uff09\u3002\u5f53\u4e00\u6761\u6307\u4ee4\u9700\u8981\u88ab\u6267\u884c\u65f6\uff0c\u5148\u8981\u628a\u5b83\u4ece\u5185\u5b58\u53d6\u5230\u6570\u636e\u5bc4\u5b58\u5668\uff0c\u7136\u540e\u518d\u9001\u5230\u6307\u4ee4\u5bc4\u5b58\u5668IR\u4e2d\u3002 <code>\u6307\u4ee4\u8bd1\u7801\u5668ID</code>\uff0c\u5728\u8ba1\u7b97\u673a\u6267\u884c\u4e00\u6761\u6307\u5b9a\u7684\u6307\u4ee4\u65f6\uff0c\u5fc5\u987b\u9996\u5148\u5206\u6790\u8fd9\u6761\u6307\u4ee4\u7684\u64cd\u4f5c\u7801\u662f\u4ec0\u4e48\uff0c\u4ee5\u51b3\u5b9a\u64cd\u4f5c\u7684\u6027\u8d28\u548c\u65b9\u6cd5\uff0c\u7136\u540e\u63a7\u5236\u8ba1\u7b97\u673a\u7684\u5176\u4ed6\u5404\u90e8\u4ef6\u534f\u540c\u5b8c\u6210\u6307\u4ee4\u8868\u8fbe\u7684\u529f\u80fd\uff0c\u8fd9\u4e2d\u95f4\u7684\u5206\u6790\u5de5\u4f5c\u5c31\u662f\u6307\u4ee4\u8bd1\u7801\u5668ID\u5b8c\u6210\u7684\u3002 <code>\u7a0b\u5e8f\u8ba1\u6570\u5668PC</code>\uff0c\u7528\u6765\u5b58\u653e\u4e0b\u4e00\u6761\u8981\u6267\u884c\u6307\u4ee4\u7684\u5730\u5740\uff0c\u5b83\u4e0e\u5b58\u50a8\u5668\uff08\u5185\u5b58\uff09\u4e4b\u95f4\u6709\u4e00\u6761\u76f4\u63a5\u901a\u8def\u3002\u6267\u884c\u6307\u4ee4\u65f6\uff0c\u9996\u5148\u9700\u8981\u6839\u636e\u7a0b\u5e8f\u8ba1\u6570\u5668PC\u4e2d\u5b58\u653e\u7684\u6307\u4ee4\u5730\u5740\uff0c\u5c06\u6307\u4ee4\u7531\u5185\u5b58\u53d6\u5230\u6307\u4ee4\u5bc4\u5b58\u5668IR\uff0c\u5b8c\u6210\u201c\u53d6\u6307\u4ee4\u201d\u7684\u64cd\u4f5c\u3002\u7a0b\u5e8f\u8ba1\u6570\u5668PC\u672c\u8eab\u5177\u6709\u81ea\u52a8\u52a01\u7684\u529f\u80fd\uff0c\u53ef\u4ee5\u81ea\u52a8\u7ed9\u51fa\u4e0b\u4e00\u6761\u6307\u4ee4\u7684\u5730\u5740\uff0c\u5982\u6b64\u5faa\u73af\uff0c\u6267\u884c\u6bcf\u4e00\u6761\u6307\u4ee4\u3002 <code>\u65f6\u5e8f\u4ea7\u751f\u5668</code>\uff0c\u7c7b\u4f3c\u4e8e\u201c\u65f6\u95f4\u4f5c\u606f\u8868\u201d\uff0c\u7ed9\u8ba1\u7b97\u673a\u5404\u90e8\u5206\u63d0\u4f9b\u5de5\u4f5c\u6240\u9700\u7684\u65f6\u95f4\u6807\u5fd7\uff0c\u4e00\u822c\u662f\u5229\u7528\u5b9a\u65f6\u8109\u51b2\u7684\u987a\u5e8f\u548c\u4e0d\u540c\u7684\u8109\u51b2\u95f4\u9694\u6765\u5b9e\u73b0\u3002 <code>\u64cd\u4f5c\u63a7\u5236\u5668</code>\uff0c\u6839\u636e\u6307\u4ee4\u6240\u9700\u5b8c\u6210\u7684\u64cd\u4f5c\u548c\u4fe1\u53f7\uff0c\u53d1\u51fa\u5404\u79cd\u5fae\u64cd\u4f5c\u547d\u4ee4\u5e8f\u5217\uff0c\u7528\u4ee5\u63a7\u5236\u6240\u6709\u88ab\u63a7\u5bf9\u8c61\uff0c\u5b8c\u6210\u6307\u4ee4\u7684\u6267\u884c\u3002 \u6574\u4e2a\u63a7\u5236\u5668\u7684\u8fd0\u884c\u903b\u8f91\u662f\u5148\u6309\u7167<code>\u7a0b\u5e8f\u8ba1\u6570\u5668</code>\u6240\u6307\u51fa\u7684\u6307\u4ee4\u5730\u5740\uff0c\u4ece\u5185\u5b58\u4e2d\u53d6\u51fa\u4e00\u6761\u6307\u4ee4\u5230<code>\u6307\u4ee4\u5bc4\u5b58\u5668IR</code>\uff0c\u7136\u540e<code>\u6307\u4ee4\u8bd1\u7801\u5668ID</code>\u5bf9\u6307\u4ee4\u8fdb\u884c\u5206\u6790\uff0c\u4e4b\u540e<code>\u64cd\u4f5c\u63a7\u5236\u5668</code>\u6839\u636e\u6307\u4ee4\u7684\u529f\u80fd\u5411\u6709\u5173\u90e8\u4ef6\u53d1\u51fa\u63a7\u5236\u547d\u4ee4\uff0c\u6267\u884c\u63a7\u5236\u6307\u4ee4\u7684\u64cd\u4f5c\u3002\u5b8c\u6210\u64cd\u4f5c\u4e4b\u540e\uff0c<code>\u7a0b\u5e8f\u8ba1\u6570\u5668</code>\u52a01\uff0c\u518d\u91cd\u590d\u6267\u884c\u4e0a\u8ff0\u64cd\u4f5c\u3002</p>"},{"location":"Documents/G-System/CPU/CPU/#12","title":"1.2 \u8fd0\u7b97\u5668","text":"<p>\u8fd0\u7b97\u5668\uff0c\u4e00\u822c\u6700\u5c11\u5305\u62ec3\u4e2a<code>\u5bc4\u5b58\u5668</code>\u548c1\u4e2a<code>\u7b97\u672f\u903b\u8f91\u5355\u5143(ALU)</code>\uff0c\u73b0\u4ee3\u8ba1\u7b97\u673a\u5185\u90e8\u5f80\u5f80\u8bbe\u6709\u901a\u7528\u5bc4\u5b58\u5668\u7ec4\u3002</p> <p>\u5bc4\u5b58\u5668\uff0c\u4e00\u79cd\u6709\u9650\u5b58\u50a8\u5bb9\u91cf\u7684\u9ad8\u901f\u5b58\u50a8\u90e8\u4ef6\uff0c\u53ef\u7528\u6765\u6682\u5b58\u6307\u4ee4\u3001\u6570\u636e\u548c\u4f4d\u5740\u3002\u5bc4\u5b58\u5668\u6709\u5f88\u591a\u79cd\u7c7b\uff0c\u4e00\u822c\u6d89\u53ca\u5230\u56db\u5219\u8fd0\u7b97\u7684\u67093\u7c7b\uff0cACC\uff08Accumulator\uff09\u4e3a\u7d2f\u52a0\u5668\uff0cMQ\uff08Multiplier-Quotient Register\uff09\u4e3a\u4e58\u5546\u5bc4\u5b58\u5668\uff0cX\u4e3a\u64cd\u4f5c\u6570\u5bc4\u5b58\u5668\uff0c3\u7c7b\u5bc4\u5b58\u5668\u5728\u5b8c\u6210\u4e0d\u540c\u8fd0\u7b97\u65f6\uff0c\u6240\u5b58\u653e\u7684\u64cd\u4f5c\u6570\u7c7b\u522b\u4e5f\u5404\u4e0d\u76f8\u540c\u3002</p> <p></p> <p>\u5173\u4e8e\u4e58\u79ef\u9ad8\u4f4d\u548c\u4e58\u79ef\u4f4e\u4f4d\u7684\u6982\u5ff5\uff0c\u4ee5\u5341\u8fdb\u5236\u4e3a\u4f8b\uff0c\u767e\u4f4d\u5c31\u662f\u5341\u4f4d\u7684\u9ad8\u4f4d\uff0c\u5341\u4f4d\u662f\u767e\u4f4d\u7684\u4f4e\u4f4d\u3002\u4e24\u4e2a16\u4f4d\u6570\u76f8\u4e58\uff0c\u7ed3\u679c\u53ef\u80fd\u4f1a\u670932\u4f4d\uff0c\u90a3\u5de6\u534a\u90e8\u5206\u768416\u4f4d\u5c31\u662f\u4e58\u79ef\u9ad8\u4f4d\uff0c\u5b58\u50a8\u5230ACC\u4e2d\uff0c\u53f3\u534a\u90e8\u5206\u768416\u4f4d\u5c31\u662f\u4e58\u79ef\u4f4e\u4f4d\uff0c\u5b58\u50a8\u5230MQ\u4e2d\u3002 \u7b97\u672f\u903b\u8f91\u5355\u5143\uff08ALU\uff0cArithmetic and Logic Unit\uff09\uff0c\u662f\u7b97\u672f\u8fd0\u7b97\u548c\u903b\u8f91\u8fd0\u7b97\u7684\u90e8\u4ef6\u3002\u7b97\u672f\u8fd0\u7b97\u5305\u62ec\u52a0\u3001\u51cf\u3001\u4e58\u7684\u6574\u6570\u8fd0\u7b97\uff0c\u903b\u8f91\u8fd0\u7b97\u662f\u4e0e\u3001\u6216\u3001\u975e\u548c\u5f02\u6216\u7b49\u903b\u8f91\u64cd\u4f5c\uff0c\u8fd8\u6709\u79fb\u4f4d\u3001\u6bd4\u8f83\u548c\u4f20\u9001\u7b49\u64cd\u4f5c\u3002 \u79fb\u4f4d\u8fd0\u7b97\uff0c\u5c06\u4e00\u4e2a\u5b57\u7b26\u5411\u5de6\u6216\u5411\u53f3\u79fb\u52a8\u4f4d\uff0c\u6216\u662f\u6d6e\u52a8\u7279\u5b9a\u4f4d\uff0c\u5305\u542b\u5e26\u7b26\u53f7\u5ef6\u4f38\u548c\u65e0\u7b26\u53f7\u5ef6\u4f38\uff0c\u5728\u7a0b\u5e8f\u4e2d\u5e94\u7528\u5f88\u5e7f\u6cdb\u3002</p>"},{"location":"Documents/G-System/CPU/CPU/#13","title":"1.3 \u5bc4\u5b58\u5668","text":"<p>\u5728CPU\u4e2d\u81f3\u5c11\u8981\u6709\u516d\u7c7b\u5bc4\u5b58\u5668\uff1a\u6307\u4ee4\u5bc4\u5b58\u5668\uff08IR\uff09\u3001\u7a0b\u5e8f\u8ba1\u6570\u5668\uff08PC\uff09\u3001\u5730\u5740\u5bc4\u5b58\u5668\uff08AR\uff09\u3001\u6570\u636e\u5bc4\u5b58\u5668\uff08DR\uff09\u3001\u7d2f\u52a0\u5bc4\u5b58\u5668\uff08AC\uff09\u3001\u7a0b\u5e8f\u72b6\u6001\u5b57\u5bc4\u5b58\u5668\uff08PSW\uff09\u3002\u8fd9\u4e9b\u5bc4\u5b58\u5668\u7528\u6765\u6682\u5b58\u4e00\u4e2a\u8ba1\u7b97\u673a\u5b57\uff0c\u5176\u6570\u76ee\u53ef\u4ee5\u6839\u636e\u9700\u8981\u8fdb\u884c\u6269\u5145\u3002 1. \u6570\u636e\u5bc4\u5b58\u5668     1. \u6570\u636e\u5bc4\u5b58\u5668\uff08Data Register\uff0c<code>DR</code>\uff09\u53c8\u79f0\u6570\u636e\u7f13\u51b2\u5bc4\u5b58\u5668\uff0c\u5176\u4e3b\u8981\u529f\u80fd\u662f\u4f5c\u4e3aCPU\u548c\u4e3b\u5b58\u3001\u5916\u8bbe\u4e4b\u95f4\u4fe1\u606f\u4f20\u8f93\u7684\u4e2d\u8f6c\u7ad9\uff0c\u7528\u4ee5\u5f25\u8865CPU\u548c\u4e3b\u5b58\u3001\u5916\u8bbe\u4e4b\u95f4\u64cd\u4f5c\u901f\u5ea6\u4e0a\u7684\u5dee\u5f02\u3002     2. \u6570\u636e\u5bc4\u5b58\u5668\u7528\u6765\u6682\u65f6\u5b58\u653e\u7531\u4e3b\u5b58\u50a8\u5668\u8bfb\u51fa\u7684\u4e00\u6761\u6307\u4ee4\u6216\u4e00\u4e2a\u6570\u636e\u5b57\uff1b\u53cd\u4e4b\uff0c\u5f53\u5411\u4e3b\u5b58\u5b58\u5165\u4e00\u6761\u6307\u4ee4\u6216\u4e00\u4e2a\u6570\u636e\u5b57\u65f6\uff0c\u4e5f\u5c06\u5b83\u4eec\u6682\u65f6\u5b58\u653e\u5728\u6570\u636e\u5bc4\u5b58\u5668\u4e2d\u3002     3. \u6570\u636e\u5bc4\u5b58\u5668\u7684\u4f5c\u7528\u662f \uff1a         1. \u4f5c\u4e3aCPU\u548c\u4e3b\u5b58\u3001\u5916\u56f4\u8bbe\u5907\u4e4b\u95f4\u4fe1\u606f\u4f20\u9001\u7684\u4e2d\u8f6c\u7ad9\uff1b         2. \u5f25\u8865CPU\u548c\u4e3b\u5b58\u3001\u5916\u56f4\u8bbe\u5907\u4e4b\u95f4\u5728\u64cd\u4f5c\u901f\u5ea6\u4e0a\u7684\u5dee\u5f02\uff1b         3. \u5728\u5355\u7d2f\u52a0\u5668\u7ed3\u6784\u7684\u8fd0\u7b97\u5668\u4e2d\uff0c\u6570\u636e\u5bc4\u5b58\u5668\u8fd8\u53ef\u517c\u4f5c\u64cd\u4f5c\u6570\u5bc4\u5b58\u5668\u3002 2. \u6307\u4ee4\u5bc4\u5b58\u5668     1. \u6307\u4ee4\u5bc4\u5b58\u5668\uff08Instruction Register\uff0c<code>IR</code>\uff09\u7528\u6765\u4fdd\u5b58\u5f53\u524d\u6b63\u5728\u6267\u884c\u7684\u4e00\u6761\u6307\u4ee4\u3002     2. \u5f53\u6267\u884c\u4e00\u6761\u6307\u4ee4\u65f6\uff0c\u9996\u5148\u628a\u8be5\u6307\u4ee4\u4ece\u4e3b\u5b58\u8bfb\u53d6\u5230\u6570\u636e\u5bc4\u5b58\u5668\u4e2d\uff0c\u7136\u540e\u518d\u4f20\u9001\u81f3\u6307\u4ee4\u5bc4\u5b58\u5668\u3002     3. \u6307\u4ee4\u5305\u62ec\u64cd\u4f5c\u7801\u548c\u5730\u5740\u7801\u4e24\u4e2a\u5b57\u6bb5\uff0c\u4e3a\u4e86\u6267\u884c\u6307\u4ee4\uff0c\u5fc5\u987b\u5bf9\u64cd\u4f5c\u7801\u8fdb\u884c\u6d4b\u8bd5\uff0c\u8bc6\u522b\u51fa\u6240\u8981\u6c42\u7684\u64cd\u4f5c\uff0c\u6307\u4ee4\u8bd1\u7801\u5668\uff08Instruction Decoder\uff0cID\uff09\u5c31\u662f\u5b8c\u6210\u8fd9\u9879\u5de5\u4f5c\u7684\u3002\u6307\u4ee4\u8bd1\u7801\u5668\u5bf9\u6307\u4ee4\u5bc4\u5b58\u5668\u7684\u64cd\u4f5c\u7801\u90e8\u5206\u8fdb\u884c\u8bd1\u7801\uff0c\u4ee5\u4ea7\u751f\u6307\u4ee4\u6240\u8981\u6c42\u64cd\u4f5c\u7684\u63a7\u5236\u7535\u4f4d\uff0c\u5e76\u5c06\u5176\u9001\u5230\u5fae\u64cd\u4f5c\u63a7\u5236\u7ebf\u8def\u4e0a\uff0c\u5728\u65f6\u5e8f\u90e8\u4ef6\u5b9a\u65f6\u4fe1\u53f7\u7684\u4f5c\u7528\u4e0b\uff0c\u4ea7\u751f\u5177\u4f53\u7684\u64cd\u4f5c\u63a7\u5236\u4fe1\u53f7\u3002     4. \u6307\u4ee4\u5bc4\u5b58\u5668\u4e2d\u64cd\u4f5c\u7801\u5b57\u6bb5\u7684\u8f93\u51fa\u5c31\u662f\u6307\u4ee4\u8bd1\u7801\u5668\u7684\u8f93\u5165\u3002\u64cd\u4f5c\u7801\u4e00\u7ecf\u8bd1\u7801\uff0c\u5373\u53ef\u5411\u64cd\u4f5c\u63a7\u5236\u5668\u53d1\u51fa\u5177\u4f53\u64cd\u4f5c\u7684\u7279\u5b9a\u4fe1\u53f7\u3002 3. \u7a0b\u5e8f\u8ba1\u6570\u5668     1. \u7a0b\u5e8f\u8ba1\u6570\u5668\uff08Program Counter\uff0c<code>PC</code>\uff09\u7528\u6765\u6307\u51fa\u4e0b\u4e00\u6761\u6307\u4ee4\u5728\u4e3b\u5b58\u50a8\u5668\u4e2d\u7684\u5730\u5740\u3002     2. \u5728\u7a0b\u5e8f\u6267\u884c\u4e4b\u524d\uff0c\u9996\u5148\u5fc5\u987b\u5c06\u7a0b\u5e8f\u7684\u9996\u5730\u5740\uff0c\u5373\u7a0b\u5e8f\u7b2c\u4e00\u6761\u6307\u4ee4\u6240\u5728\u4e3b\u5b58\u5355\u5143\u7684\u5730\u5740\u9001\u5165PC\uff0c\u56e0\u6b64PC\u7684\u5185\u5bb9\u5373\u662f\u4ece\u4e3b\u5b58\u63d0\u53d6\u7684\u7b2c\u4e00\u6761\u6307\u4ee4\u7684\u5730\u5740\u3002     3. \u5f53\u6267\u884c\u6307\u4ee4\u65f6\uff0cCPU\u80fd\u81ea\u52a8\u9012\u589ePC\u7684\u5185\u5bb9\uff0c\u4f7f\u5176\u59cb\u7ec8\u4fdd\u5b58\u5c06\u8981\u6267\u884c\u7684\u4e0b\u4e00\u6761\u6307\u4ee4\u7684\u4e3b\u5b58\u5730\u5740\uff0c\u4e3a\u53d6\u4e0b\u4e00\u6761\u6307\u4ee4\u505a\u597d\u51c6\u5907\u3002\u82e5\u4e3a\u5355\u5b57\u957f\u6307\u4ee4\uff0c\u5219(PC)+1\u00e0PC\uff0c\u82e5\u4e3a\u53cc\u5b57\u957f\u6307\u4ee4\uff0c\u5219(PC)+2\u00e0PC\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002     4. \u4f46\u662f\uff0c\u5f53\u9047\u5230\u8f6c\u79fb\u6307\u4ee4\u65f6\uff0c\u4e0b\u4e00\u6761\u6307\u4ee4\u7684\u5730\u5740\u5c06\u7531\u8f6c\u79fb\u6307\u4ee4\u7684\u5730\u5740\u7801\u5b57\u6bb5\u6765\u6307\u5b9a\uff0c\u800c\u4e0d\u662f\u50cf\u901a\u5e38\u7684\u90a3\u6837\u901a\u8fc7\u987a\u5e8f\u9012\u589ePC\u7684\u5185\u5bb9\u6765\u53d6\u5f97\u3002      5. \u56e0\u6b64\uff0c\u7a0b\u5e8f\u8ba1\u6570\u5668\u7684\u7ed3\u6784\u5e94\u5f53\u662f\u5177\u6709\u5bc4\u5b58\u4fe1\u606f\u548c\u8ba1\u6570\u4e24\u79cd\u529f\u80fd\u7684\u7ed3\u6784\u3002 4. \u5730\u5740\u5bc4\u5b58\u5668     1. \u5730\u5740\u5bc4\u5b58\u5668\uff08Address Register\uff0c<code>AR</code>\uff09\u7528\u6765\u4fdd\u5b58CPU\u5f53\u524d\u6240\u8bbf\u95ee\u7684\u4e3b\u5b58\u5355\u5143\u7684\u5730\u5740\u3002     2. \u7531\u4e8e\u5728\u4e3b\u5b58\u548cCPU\u4e4b\u95f4\u5b58\u5728\u64cd\u4f5c\u901f\u5ea6\u4e0a\u7684\u5dee\u5f02\uff0c\u6240\u4ee5\u5fc5\u987b\u4f7f\u7528\u5730\u5740\u5bc4\u5b58\u5668\u6765\u6682\u65f6\u4fdd\u5b58\u4e3b\u5b58\u7684\u5730\u5740\u4fe1\u606f\uff0c\u76f4\u5230\u4e3b\u5b58\u7684\u5b58\u53d6\u64cd\u4f5c\u5b8c\u6210\u4e3a\u6b62\u3002     3. \u5f53CPU\u548c\u4e3b\u5b58\u8fdb\u884c\u4fe1\u606f\u4ea4\u6362\uff0c\u5373CPU\u5411\u4e3b\u5b58\u5b58\u5165\u6570\u636e/\u6307\u4ee4\u6216\u8005\u4ece\u4e3b\u5b58\u8bfb\u51fa\u6570\u636e/\u6307\u4ee4\u65f6\uff0c\u90fd\u8981\u4f7f\u7528\u5730\u5740\u5bc4\u5b58\u5668\u548c\u6570\u636e\u5bc4\u5b58\u5668\u3002     4. \u5982\u679c\u6211\u4eec\u628a\u5916\u56f4\u8bbe\u5907\u4e0e\u4e3b\u5b58\u5355\u5143\u8fdb\u884c\u7edf\u4e00\u7f16\u5740\uff0c\u90a3\u4e48\uff0c\u5f53CPU\u548c\u5916\u56f4\u8bbe\u5907\u4ea4\u6362\u4fe1\u606f\u65f6\uff0c\u6211\u4eec\u540c\u6837\u8981\u4f7f\u7528\u5730\u5740\u5bc4\u5b58\u5668\u548c\u6570\u636e\u5bc4\u5b58\u5668\u3002</p> <ol> <li> <p>\u7d2f\u52a0\u5bc4\u5b58\u5668  </p> <ol> <li>\u7d2f\u52a0\u5bc4\u5b58\u5668\u901a\u5e38\u7b80\u79f0\u7d2f\u52a0\u5668\uff08Accumulator\uff0c<code>AC</code>\uff09\uff0c\u662f\u4e00\u4e2a\u901a\u7528\u5bc4\u5b58\u5668\u3002  </li> <li>\u7d2f\u52a0\u5668\u7684\u529f\u80fd\u662f\uff1a\u5f53\u8fd0\u7b97\u5668\u7684\u7b97\u672f\u903b\u8f91\u5355\u5143ALU\u6267\u884c\u7b97\u672f\u6216\u903b\u8f91\u8fd0\u7b97\u65f6\uff0c\u4e3aALU\u63d0\u4f9b\u4e00\u4e2a\u5de5\u4f5c\u533a\uff0c\u53ef\u4ee5\u4e3aALU\u6682\u65f6\u4fdd\u5b58\u4e00\u4e2a\u64cd\u4f5c\u6570\u6216\u8fd0\u7b97\u7ed3\u679c\u3002  </li> <li>\u663e\u7136\uff0c\u8fd0\u7b97\u5668\u4e2d\u81f3\u5c11\u8981\u6709\u4e00\u4e2a\u7d2f\u52a0\u5bc4\u5b58\u5668\u3002</li> </ol> </li> <li> <p>\u7a0b\u5e8f\u72b6\u6001\u5b57\u5bc4\u5b58\u5668  </p> <ol> <li>\u7a0b\u5e8f\u72b6\u6001\u5b57\uff08Program Status Word\uff0c<code>PSW</code>\uff09\u7528\u6765\u8868\u5f81\u5f53\u524d\u8fd0\u7b97\u7684\u72b6\u6001\u53ca\u7a0b\u5e8f\u7684\u5de5\u4f5c\u65b9\u5f0f\u3002  </li> <li>\u7a0b\u5e8f\u72b6\u6001\u5b57\u5bc4\u5b58\u5668\u7528\u6765\u4fdd\u5b58\u7531\u7b97\u672f/\u903b\u8f91\u6307\u4ee4\u8fd0\u884c\u6216\u6d4b\u8bd5\u7684\u7ed3\u679c\u6240\u5efa\u7acb\u8d77\u6765\u7684\u5404\u79cd\u6761\u4ef6\u7801\u5185\u5bb9\uff0c\u5982\u8fd0\u7b97\u7ed3\u679c\u8fdb/\u501f\u4f4d\u6807\u5fd7\uff08C\uff09\u3001\u8fd0\u7b97\u7ed3\u679c\u6ea2\u51fa\u6807\u5fd7\uff08O\uff09\u3001\u8fd0\u7b97\u7ed3\u679c\u4e3a\u96f6\u6807\u5fd7\uff08Z\uff09\u3001\u8fd0\u7b97\u7ed3\u679c\u4e3a\u8d1f\u6807\u5fd7\uff08N\uff09\u3001\u8fd0\u7b97\u7ed3\u679c\u7b26\u53f7\u6807\u5fd7\uff08S\uff09\u7b49\uff0c\u8fd9\u4e9b\u6807\u5fd7\u4f4d\u901a\u5e38\u75281\u4f4d\u89e6\u53d1\u5668\u6765\u4fdd\u5b58\u3002  </li> <li>\u9664\u6b64\u4e4b\u5916\uff0c\u7a0b\u5e8f\u72b6\u6001\u5b57\u5bc4\u5b58\u5668\u8fd8\u7528\u6765\u4fdd\u5b58\u4e2d\u65ad\u548c\u7cfb\u7edf\u5de5\u4f5c\u72b6\u6001\u7b49\u4fe1\u606f\uff0c\u4ee5\u4fbfCPU\u548c\u7cfb\u7edf\u53ca\u65f6\u4e86\u89e3\u673a\u5668\u8fd0\u884c\u72b6\u6001\u548c\u7a0b\u5e8f\u8fd0\u884c\u72b6\u6001\u3002  </li> <li>\u56e0\u6b64\uff0c\u7a0b\u5e8f\u72b6\u6001\u5b57\u5bc4\u5b58\u5668\u662f\u4e00\u4e2a\u4fdd\u5b58\u5404\u79cd\u72b6\u6001\u6761\u4ef6\u6807\u5fd7\u7684\u5bc4\u5b58\u5668\u3002</li> </ol> </li> </ol>"},{"location":"Documents/G-System/CPU/CPU/#2-cpu","title":"2 \u65f6\u949f\u9891\u7387\u3001CPU \u5468\u671f\u3001\u65f6\u949f\u5468\u671f\u3001\u6307\u4ee4\u5468\u671f","text":"<pre><code>\u901a\u5e38\u5bf9\u4e8e\u5927\u591a\u6570\u5904\u7406\u5668\u6765\u8bf4\uff0c\u4e00\u4e2a\u673a\u5668\u5468\u671f\u9700\u8981\u5341\u4e8c\u4e2a\u65f6\u949f\u5468\u671f\u624d\u80fd\u5b8c\u6210\u3002\u4e00\u4e2a\u6307\u4ee4\u5468\u671f\u53ef\u80fd\u9700\u8981\u4e00\u4e2a\u6216\u6700\u591a\u56db\u4e2a\u673a\u5668\u5468\u671f\u6765\u6267\u884c\u4e00\u6761\u6307\u4ee4\u3002\n</code></pre>"},{"location":"Documents/G-System/CPU/CPU/#21","title":"2.1 \u65f6\u949f\u9891\u7387","text":"<ul> <li>\u65f6\u949f\u9891\u7387\uff1a\u53c8\u79f0\u65f6\u949f\u901f\u5ea6\uff0c\u662f cpu \u6bcf\u79d2\u6267\u884c\u65f6\u949f\u5468\u671f\u7684\u6570\u91cf\u3002\u6bd4\u5982 1GHz CPU \u4e3a 1000\uff0c000\uff0c000 \u6b21\u6bcf\u79d2\u300210 \u4ebf\u6b21/\u79d2</li> </ul>"},{"location":"Documents/G-System/CPU/CPU/#22","title":"2.2 \u65f6\u949f\u5468\u671f","text":"<ul> <li>\u65f6\u949f\u5468\u671f\uff1a\u53c8\u79f0\u632f\u8361\u5468\u671f\uff0c\u5b9a\u4e49\u4e3a\u65f6\u949f\u9891\u7387\u7684\u5012\u6570\u3002\u65f6\u949f\u5468\u671f\u662f\u8ba1\u7b97\u673a\u4e2d\u6700\u57fa\u672c\u7684\u3001\u6700\u5c0f\u7684\u65f6\u95f4\u5355\u4f4d\u3002\u5728\u4e00\u4e2a\u65f6\u949f\u5468\u671f\u5185\uff0cCPU \u4ec5\u5b8c\u6210\u4e00\u4e2a\u6700\u57fa\u672c\u7684\u52a8\u4f5c\u3002</li> </ul>"},{"location":"Documents/G-System/CPU/CPU/#23-cpu","title":"2.3 CPU \u5468\u671f","text":"<ul> <li>CPU \u5468\u671f\uff1a\u53c8\u79f0\u673a\u5668\u5468\u671f\uff0c\u5728\u8ba1\u7b97\u673a\u4e2d\uff0c\u4e3a\u4e86\u4fbf\u4e8e\u7ba1\u7406\uff0c\u5e38\u628a\u4e00\u6761\u6307\u4ee4\u7684\u6267\u884c\u8fc7\u7a0b\u5212\u5206\u4e3a\u82e5\u5e72\u4e2a\u9636\u6bb5\uff0c\u6bcf\u4e00\u9636\u6bb5\u5b8c\u6210\u4e00\u9879\u5de5\u4f5c\u3002</li> <li>\u4f8b\u5982\uff0c\u53d6\u6307\u4ee4\u3001\u5b58\u50a8\u5668\u8bfb\u3001\u5b58\u50a8\u5668\u5199\u7b49\uff0c\u8fd9\u6bcf\u4e00\u9879\u5de5\u4f5c\u79f0\u4e3a\u4e00\u4e2a\u57fa\u672c\u64cd\u4f5c\uff08\u6ce8\u610f\uff1a\u6bcf\u4e00\u4e2a\u57fa\u672c\u64cd\u4f5c\u90fd\u662f\u7531\u82e5\u5e72 CPU \u6700\u57fa\u672c\u7684\u52a8\u4f5c\u7ec4\u6210\uff09\u3002\u5b8c\u6210\u4e00\u4e2a\u57fa\u672c\u64cd\u4f5c\u6240\u9700\u8981\u7684\u65f6\u95f4\u79f0\u4e3a\u673a\u5668\u5468\u671f\u3002\u901a\u5e38\u7528\u5185\u5b58\u4e2d\u8bfb\u53d6\u4e00\u4e2a\u6307\u4ee4\u5b57\u7684\u6700\u77ed\u65f6\u95f4\u6765\u89c4\u5b9a CPU \u5468\u671f\u3002</li> </ul>"},{"location":"Documents/G-System/CPU/CPU/#24","title":"2.4 \u6307\u4ee4\u5468\u671f","text":"<ul> <li>\u6307\u4ee4\u5468\u671f\uff1a\u662f\u6307\u8ba1\u7b97\u673a\u4ece\u53d6\u6307\u5230\u6307\u4ee4\u6267\u884c\u5b8c\u6bd5\u7684\u65f6\u95f4</li> <li>\u8ba1\u7b97\u673a\u6267\u884c\u6307\u4ee4\u7684\u8fc7\u7a0b\u53ef\u4ee5\u5206\u4e3a\u4ee5\u4e0b\u4e09\u4e2a\u6b65\u9aa4\uff1a</li> <li>Fetch\uff08\u53d6\u6307\uff09\uff0c\u4e5f\u5c31\u662f\u4ece PC \u5bc4\u5b58\u5668\u91cc\u627e\u5230\u5bf9\u5e94\u7684\u6307\u4ee4\u5730\u5740\uff0c\u6839\u636e\u6307\u4ee4\u5730\u5740\u4ece\u5185\u5b58\u91cc\u628a\u5177\u4f53\u7684\u6307\u4ee4\uff0c\u52a0\u8f7d\u5230\u6307\u4ee4\u5bc4\u5b58\u5668\u4e2d\uff0c\u7136\u540e\u628a PC \u5bc4\u5b58\u5668\u81ea\u589e\uff0c\u597d\u5728\u672a\u6765\u6267\u884c\u4e0b\u4e00\u6761\u6307\u4ee4\u3002</li> <li>Decode\uff08\u8bd1\u7801\uff09\uff0c\u4e5f\u5c31\u662f\u6839\u636e\u6307\u4ee4\u5bc4\u5b58\u5668\u91cc\u9762\u7684\u6307\u4ee4\uff0c\u89e3\u6790\u6210\u8981\u8fdb\u884c\u4ec0\u4e48\u6837\u7684\u64cd\u4f5c\uff0c\u662f R\u3001I\u3001J \u4e2d\u7684\u54ea\u4e00\u79cd\u6307\u4ee4\uff0c\u5177\u4f53\u8981\u64cd\u4f5c\u54ea\u4e9b\u5bc4\u5b58\u5668\u3001\u6570\u636e\u6216\u8005\u5185\u5b58\u5730\u5740\u3002</li> <li>Execute\uff08\u6267\u884c\u6307\u4ee4\uff09\uff0c\u4e5f\u5c31\u662f\u5b9e\u9645\u8fd0\u884c\u5bf9\u5e94\u7684 R\u3001I\u3001J \u8fd9\u4e9b\u7279\u5b9a\u7684\u6307\u4ee4\uff0c\u8fdb\u884c\u7b97\u672f\u903b\u8f91\u64cd\u4f5c\u3001\u6570\u636e\u4f20\u8f93\u6216\u8005\u76f4\u63a5\u7684\u5730\u5740\u8df3\u8f6c\u3002</li> <li>\u5728\u53d6\u6307\u4ee4\u7684\u9636\u6bb5\uff0c\u6211\u4eec\u7684\u6307\u4ee4\u662f\u653e\u5728\u5b58\u50a8\u5668\uff08\u4e5f\u5c31\u662f\u5185\u5b58\uff09\u91cc\u7684\uff0c\u5b9e\u9645\u4e0a\uff0c\u901a\u8fc7\u00a0PC \u5bc4\u5b58\u5668\u548c\u6307\u4ee4\u5bc4\u5b58\u5668\u53d6\u51fa\u6307\u4ee4\u7684\u8fc7\u7a0b\uff0c\u662f\u7531\u63a7\u5236\u5668\uff08Control Unit\uff09\u64cd\u4f5c\u7684\u3002\u6307\u4ee4\u7684\u89e3\u7801\u8fc7\u7a0b\uff0c\u4e5f\u662f\u7531\u63a7\u5236\u5668\u8fdb\u884c\u7684\u3002\u4e00\u65e6\u5230\u4e86\u6267\u884c\u6307\u4ee4\u9636\u6bb5\uff0c\u65e0\u8bba\u662f\u8fdb\u884c\u7b97\u672f\u64cd\u4f5c\u3001\u903b\u8f91\u64cd\u4f5c\u7684 R \u578b\u6307\u4ee4\uff0c\u8fd8\u662f\u8fdb\u884c\u6570\u636e\u4f20\u8f93\u3001\u6761\u4ef6\u5206\u652f\u7684 I \u578b\u6307\u4ee4\uff0c\u90fd\u662f\u7531\u7b97\u672f\u903b\u8f91\u5355\u5143\uff08ALU\uff09\u64cd\u4f5c\u7684\uff0c\u4e5f\u5c31\u662f\u7531\u8fd0\u7b97\u5668\u5904\u7406\u7684\u3002\u4e0d\u8fc7\uff0c\u5982\u679c\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u65e0\u6761\u4ef6\u5730\u5740\u8df3\u8f6c\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u5728\u63a7\u5236\u5668\u91cc\u9762\u5b8c\u6210\uff0c\u4e0d\u9700\u8981\u7528\u5230\u8fd0\u7b97\u5668\u3002</li> <li></li> </ul>"},{"location":"Documents/G-System/CPU/CPU/#25","title":"2.5 \u5468\u671f\u4e4b\u95f4\u7684\u5173\u7cfb","text":"<ul> <li>\u6307\u4ee4\u5468\u671f\uff08Instruction Cycle\uff09\uff1a\u53d6\u51fa\u5e76\u6267\u884c\u4e00\u6761\u6307\u4ee4\u7684\u65f6\u95f4\u3002</li> <li>CPU \u5468\u671f\uff1a\u4e00\u6761\u6307\u4ee4\u6267\u884c\u8fc7\u7a0b\u88ab\u5212\u5206\u4e3a\u82e5\u5e72\u9636\u6bb5\uff0c\u6bcf\u4e00\u9636\u6bb5\u5b8c\u6210\u6240\u9700\u65f6\u95f4\u3002</li> <li>\u65f6\u949f\u5468\u671f\uff08Clock Cycle\uff09\uff1a\u53c8\u79f0\u9707\u8361\u5468\u671f\uff0c\u662f\u5904\u7406\u64cd\u4f5c\u7684\u6700\u57fa\u672c\u5355\u4f4d\u3002 </li> </ul>"},{"location":"Documents/G-System/CPU/CPU/#3-cpu","title":"3 CPU\u4e0a\u4e0b\u6587","text":"<ul> <li>CPU\u4e0a\u4e0b\u6587\u5207\u6362</li> <li>\u4e00\u6587\u8ba9\u4f60\u660e\u767dCPU\u4e0a\u4e0b\u6587\u5207\u6362</li> </ul> <pre><code>title: \u4ec0\u4e48\u65f6cpu\u4e0a\u4e0b\u6587\uff1f\nCPU \u4e0a\u4e0b\u6587\u662f**CPU \u5bc4\u5b58\u5668\u548c\u7a0b\u5e8f\u8ba1\u6570\u5668**\n</code></pre> <ul> <li>CPU \u4e0a\u4e0b\u6587\u5207\u6362\u6307\u7684\u662f\uff1a\u628a\u524d\u4e00\u4e2a\u4efb\u52a1\u7684 CPU \u4e0a\u4e0b\u6587\u4fdd\u5b58\u8d77\u6765\uff0c\u7136\u540e\u52a0\u8f7d\u65b0\u4efb\u52a1\u7684\u4e0a\u4e0b\u6587\u5230\u8fd9\u4e9b\u5bc4\u5b58\u5668\u548c\u7a0b\u5e8f\u8ba1\u6570\u5668\u4e0a\uff0c\u6700\u540e\u518d\u8df3\u8f6c\u5230\u7a0b\u5e8f\u8ba1\u6570\u5668\u6240\u6307\u7684\u65b0\u4f4d\u7f6e\uff0c\u8fd0\u884c\u65b0\u7684\u4efb\u52a1\u3002\u88ab\u4fdd\u5b58\u4e0b\u6765\u7684\u4e0a\u4e0b\u6587\u4f1a\u5b58\u50a8\u5728\u7cfb\u7edf\u5185\u5b58\u4e2d\uff0c\u7b49\u4efb\u52a1\u91cd\u65b0\u8c03\u5ea6\u6267\u884c\u65f6\u518d\u6b21\u52a0\u8f7d\u8fdb\u6765\u3002</li> </ul>"},{"location":"Documents/G-System/CPU/CPU/#31","title":"3.1 \u516d\u79cd\u5e38\u89c1\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u573a\u666f","text":"<ol> <li>\u51fd\u6570\u8c03\u7528</li> <li>\u4e2d\u65ad\u4e0e\u5f02\u5e38</li> <li>\u7cfb\u7edf\u8c03\u7528</li> <li>\u8fdb\u7a0b</li> <li>\u7ebf\u7a0b</li> <li>\u865a\u62df\u673a</li> </ol>"},{"location":"Documents/G-System/CPU/CPU/#32","title":"3.2 \u516d\u79cd\u4e0a\u4e0b\u6587\u5207\u6362\u573a\u666f\u7684\u5bf9\u6bd4","text":"<p>\u51fd\u6570\u8c03\u7528\u548c\u7cfb\u7edf\u8c03\u7528\u662f\u7528\u6237\u4e3b\u52a8\u53d1\u8d77\u7684\uff0c\u56e0\u6b64\u53ef\u4ee5\u901a\u8fc7ABI\u7ea6\u5b9a\u6765\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u4fdd\u5b58\u6062\u590d\u3002\u5176\u4ed6\u51e0\u79cd\u573a\u666f\u901a\u5e38\u90fd\u8981\u8fbe\u5230\u5bf9\u5e94\u7528\u7a0b\u5e8f\u900f\u660e\u7684\u6548\u679c\uff0c\u56e0\u6b64\u5207\u6362\u540e\u53ef\u80fd\u88ab\u4fee\u6539\u7684\u72b6\u6001\u90fd\u5e94\u8be5\u88ab\u4fdd\u5b58\u548c\u6062\u590d\u3002</p> \u573a\u666f \u4e0a\u4e0b\u6587\u5207\u6362\u65f6\u4fdd\u5b58\u548c\u6062\u590d\u7684\u5185\u5bb9 \u51fd\u6570\u8c03\u7528 \u90e8\u5206\u5bc4\u5b58\u5668\uff08\u5305\u62ec\u6808\u5e27\u76f8\u5173\u7684$sp\uff0c$fp\uff09\u3001\u8fd4\u56de\u5730\u5740 \u4e2d\u65ad\u548c\u5f02\u5e38 \uff08\u901a\u5e38\u60c5\u51b5\uff09\u5168\u90e8\u5b9a\u70b9\u5bc4\u5b58\u5668\u3001\u5f02\u5e38\u73b0\u573a\u4fe1\u606f\u3001\u5f02\u5e38\u76f8\u5173\u4fe1\u606f \u7cfb\u7edf\u8c03\u7528 \u90e8\u5206\u5b9a\u70b9\u5bc4\u5b58\u5668\uff08\u5305\u62ec\u6808\u5e27\u76f8\u5173\u5bc4\u5b58\u5668\uff09\u3001\u5f02\u5e38\u73b0\u573a\u4fe1\u606f \u7ebf\u7a0b \u5168\u90e8\u7528\u6237\u6001\u5bc4\u5b58\u5668\u3001TLS\u3001\u5f53\u524dPC\u7b49\u76f8\u5173\u4fe1\u606f \u8fdb\u7a0b \u5168\u90e8\u7528\u6237\u6001\u5bc4\u5b58\u5668\u3001\u9875\u8868\u57fa\u5740\u7b49\u63a7\u5236\u5bc4\u5b58\u5668\u3001\u5f53\u524dPC\u7b49\u76f8\u5173\u4fe1\u606f \u865a\u62df\u673a \u865a\u62dfCPU\u72b6\u6001(\u5bc4\u5b58\u5668\u3001\u5fc5\u8981\u7684\u7279\u6743\u8d44\u6e90\u7b49\uff09"},{"location":"Documents/G-System/CPU/CPU/#4-cpu","title":"4 CPU\u65f6\u95f4\u7247","text":"<pre><code>title: cpu\u65f6\u95f4\u7247\u7684\u4f5c\u7528\uff1f\n\u7531\u4e8e\u6709\u65f6\u95f4\u7247\u7684\u5b58\u5728\uff0c\u53ef\u4ee5\u8ba9\u6211\u4eec\u540c\u65f6\u6253\u5f00\u591a\u4e2a\u7a0b\u5e8f\u3002\u6bcf\u4e2a\u7a0b\u5e8f\u83b7\u53d6cpu\u8d44\u6e90\u8d85\u8fc7\u4e00\u4e2a\u65f6\u95f4\u7247\u540e\uff0c\u4f1a\u88ab\u7cfb\u7edf\u5265\u593a\uff0c\u7b49\u5f85\u4e0b\u4e00\u6b21\u65f6\u95f4\u7247\u673a\u4f1a\u3002\n</code></pre> <p>\u65f6\u95f4\u7247\uff1a\uff08timeslice\uff09\u53c8\u79f0\u4e3a\u201c\u91cf\u5b50\uff08quantum\uff09\u201d\u6216\u201c\u5904\u7406\u5668\u7247\uff08processor slice\uff09\u201d\u662f\u5206\u65f6\u64cd\u4f5c\u7cfb\u7edf\u5206\u914d\u7ed9\u6bcf\u4e2a\u6b63\u5728\u8fd0\u884c\u7684\u8fdb\u7a0b\u5fae\u89c2\u4e0a\u7684\u4e00\u6bb5CPU\u65f6\u95f4\uff08\u5728\u62a2\u5360\u5185\u6838\u4e2d\u662f\uff1a\u4ece\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c\u76f4\u5230\u88ab\u62a2\u5360\u7684\u65f6\u95f4\uff09\u3002\u65f6\u95f4\u7247\u901a\u5e38\u5f88\u77ed\uff08\u5728Linux\u4e0a\u4e3a5ms\uff0d800ms\uff09</p>"},{"location":"Documents/G-System/CPU/CPU/#41-cpu","title":"4.1 cpu \u65f6\u95f4\u6d88\u8017\u8868","text":"<ul> <li>cpu \u65f6\u95f4\u7247\u6d88\u8017\u8868|cpu\u6d88\u8017\u8868</li> <li>cpu\u65f6\u95f4\u7247\u7684\u5927\u5c0f\u901a\u5e38\u4e3a10~100ms\uff0c\u5728 Windows \u64cd\u4f5c\u7cfb\u7edf\u4e0a\uff0c\u4e00\u4e2a\u65f6\u95f4\u7247\u901a\u5e38\u5728\u5341\u51e0\u6beb\u79d2\uff08\u8bd1\u8005\u6ce8\uff1a\u9ed8\u8ba4 15.625ms\uff09</li> <li>\u8fdb\u7a0b\u65f6\u95f4\u7247\uff1a20ms</li> <li>\u8fdb\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\uff1a10ms  </li> <li>\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\u00a0\uff1a3.8\u03bcs,\u8fd9\u4e2a\u5206\u4e3a\u540c\u8fdb\u7a0b\u7ebf\u7a0b\u548c\u975e\u540c\u8fdb\u7a0b\u7ebf\u7a0b\u4ed6\u4eec\u65f6\u95f4\u4e0d\u4e00\u6837</li> <li>\u4e2d\u65ad\u4e0a\u4e0b\u6587\u5207\u6362\uff1a\u5f88\u77ed</li> <li>\u5b58\u50a8\u8017\u8d39\u65f6\u95f4</li> <li>L1\u7684\u5b58\u53d6\u901f\u5ea6\uff1a4\u4e2aCPU\u65f6\u949f\u5468\u671f\u5927\u69822ns  </li> <li>L2\u7684\u5b58\u53d6\u901f\u5ea6\uff1a11\u4e2aCPU\u65f6\u949f\u5468\u671f\u5927\u69825ns  </li> <li>L3\u7684\u5b58\u53d6\u901f\u5ea6\uff1a39\u4e2aCPU\u65f6\u949f\u5468\u671f\u5927\u698220ns  </li> <li>RAM\u5185\u5b58\u7684\u5b58\u53d6\u901f\u5ea6\uff1a107\u4e2aCPU\u65f6\u949f\u5468\u671f\u5927\u698253ns</li> <li>\u56fa\u6001\u786c\u76d8\u8bbf\u95ee10-100us</li> <li>\u673a\u68b0\u786c\u76d8\u8bbf\u95ee1-10ms</li> </ul>"},{"location":"Documents/G-System/CPU/CPU/#42-rr","title":"4.2 \u65f6\u95f4\u7247\u8f6e\u8f6c\uff08RR\uff09\u8c03\u5ea6\u7b97\u6cd5","text":"<ul> <li>\u65f6\u95f4\u7247\u8f6e\u8f6c\uff08RR\uff09\u8c03\u5ea6\u7b97\u6cd5 \u8be5\u7b97\u6cd5\u4e2d\uff0c\u5c06\u4e00\u4e2a\u8f83\u5c0f\u65f6\u95f4\u5355\u5143\u5b9a\u4e49\u4e3a\u65f6\u95f4\u91cf\u6216\u65f6\u95f4\u7247\u3002\u65f6\u95f4\u7247\u7684\u5927\u5c0f\u901a\u5e38\u4e3a 10~100ms\u3002\u5c31\u7eea\u961f\u5217\u4f5c\u4e3a\u5faa\u73af\u961f\u5217\u3002CPU \u8c03\u5ea6\u7a0b\u5e8f\u5faa\u73af\u6574\u4e2a\u5c31\u7eea\u961f\u5217\uff0c\u4e3a\u6bcf\u4e2a\u8fdb\u7a0b\u5206\u914d\u4e0d\u8d85\u8fc7\u4e00\u4e2a\u65f6\u95f4\u7247\u7684 CPU\u3002 RR\u8c03\u5ea6\u7b97\u6cd5\u662f\u62a2\u5360\u7684\u3002</li> </ul> <p>\u4e3a\u4e86\u5b9e\u73b0 RR \u8c03\u5ea6\uff0c\u6211\u4eec\u518d\u6b21\u5c06\u5c31\u7eea\u961f\u5217\u89c6\u4e3a\u8fdb\u7a0b\u7684 FIFO \u961f\u5217\u3002\u65b0\u8fdb\u7a0b\u6dfb\u52a0\u5230\u5c31\u7eea\u961f\u5217\u7684\u5c3e\u90e8\u3002CPU \u8c03\u5ea6\u7a0b\u5e8f\u4ece\u5c31\u7eea\u961f\u5217\u4e2d\u9009\u62e9\u7b2c\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u5c06\u5b9a\u65f6\u5668\u8bbe\u7f6e\u5728\u4e00\u4e2a\u65f6\u95f4\u7247\u540e\u4e2d\u65ad\uff0c\u6700\u540e\u5206\u6d3e\u8fd9\u4e2a\u8fdb\u7a0b\u3002  </p> <p>\u63a5\u4e0b\u6765\uff0c\u6709\u4e24\u79cd\u60c5\u51b5\u53ef\u80fd\u53d1\u751f\u3002 1. \u8fdb\u7a0b\u53ef\u80fd\u53ea\u9700\u5c11\u4e8e\u65f6\u95f4\u7247\u7684 CPU \u6267\u884c\u3002\u5bf9\u4e8e\u8fd9\u79cd\u60c5\u51b5\uff0c\u8fdb\u7a0b\u672c\u8eab\u4f1a\u81ea\u52a8\u91ca\u653e CPU\u3002\u8c03\u5ea6\u7a0b\u5e8f\u63a5\u7740\u5904\u7406\u5c31\u7eea\u961f\u5217\u7684\u4e0b\u4e00\u4e2a\u8fdb\u7a0b\u3002 2. \u5426\u5219\uff0c\u5982\u679c\u5f53\u524d\u8fd0\u884c\u8fdb\u7a0b\u7684 CPU \u6267\u884c\u5927\u4e8e\u4e00\u4e2a\u65f6\u95f4\u7247\uff0c\u90a3\u4e48\u5b9a\u65f6\u5668\u4f1a\u4e2d\u65ad\uff0c\u8fdb\u800c\u4e2d\u65ad\u64cd\u4f5c\u7cfb\u7edf\u3002\u7136\u540e\uff0c\u8fdb\u884c\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u518d\u5c06\u8fdb\u7a0b\u52a0\u5230\u5c31\u7eea\u961f\u5217\u7684\u5c3e\u90e8\uff0c\u63a5\u7740 CPU \u8c03\u5ea6\u7a0b\u5e8f\u4f1a\u9009\u62e9\u5c31\u7eea\u961f\u5217\u5185\u7684\u4e0b\u4e00\u4e2a\u8fdb\u7a0b\u3002</p>"},{"location":"Documents/G-System/CPU/CPU/#5","title":"5 \u4e2d\u65ad","text":"<p>CPU\u6536\u5230\u4e2d\u65ad\u4fe1\u53f7\u540e\uff0c\u4f1a\u6682\u505c\u5f53\u524dCPU\u7684\u6267\u884c\u8fdb\u7a0b\uff0c\u8f6c\u53bb\u6267\u884c\u67d0\u4e2a\u7279\u5b9a\u7684\u7a0b\u5e8f\u3002 - \u4e2d\u65ad\u6e90\u5373\u4e2d\u65ad\u7684\u6e90\u5934\uff0c\u6bd4\u5982\u7528\u6237\u6572\u51fb\u4e00\u4e0b\u952e\u76d8\uff0c\u5355\u51fb\u4e00\u4e0b\u9f20\u6807\uff0c\u6216\u8005DMA\u7684\u4e00\u6b21\u4f20\u8f93\u5b8c\u6210\u4e86\uff0c\u5bf9\u5e94\u7684\u63a7\u5236\u5668\u4f1a\u4ea7\u751f\u4e00\u4e2a\u4e2d\u65ad\u4fe1\u53f7\u3002 - \u4e2d\u65ad\u4fe1\u53f7\u53ef\u4ee5\u662f\u4e00\u6839\u4fe1\u53f7\u7ebf\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u6d88\u606f\u5305\u3002\u8fd9\u4e2a\u4e2d\u65ad\u4fe1\u606f\u4f1a\u4f20\u9001\u5230\u4e2d\u65ad\u63a7\u5236\u5668\u4e2d\u3002 - \u4e2d\u65ad\u63a7\u5236\u5668\u662f\u8d1f\u8d23\u4e2d\u65ad\u6c47\u96c6\u3001\u8bb0\u5f55\u548c\u8f6c\u53d1\u7684\u786c\u4ef6\u903b\u8f91\u3002\u4e2d\u65ad\u63a7\u5236\u5668\u4e00\u822c\u90fd\u5177\u6709\u53ef\u7f16\u7a0b\u529f\u80fd\uff0c\u56e0\u6b64\u88ab\u79f0\u4e3a\u53ef\u7f16\u7a0b\u4e2d\u65ad\u63a7\u5236\u5668\uff08Programmable Interrupt Controller\uff0c\u7b80\u79f0PIC\uff09\u3002</p>"},{"location":"Documents/G-System/CPU/CPU/#51","title":"5.1 \u4e2d\u65ad\u7684\u8fc7\u7a0b","text":"<ol> <li>\u4e2d\u65ad\u6e90\u53d1\u51fa\u4e2d\u65ad\u4fe1\u53f7\u5230\u4e2d\u65ad\u63a7\u5236\u5668\uff1b</li> <li>\u4e2d\u65ad\u63a7\u5236\u5668\u4ea7\u751f\u4e2d\u65ad\u8bf7\u6c42\u7ed9CPU\uff1b</li> <li>CPU\u53d1\u51fa\u4e2d\u65ad\u54cd\u5e94\uff0c\u5e76\u8bfb\u53d6\u4e2d\u65ad\u7c7b\u578b\u7801\uff1b</li> <li>CPU\u6839\u636e\u4e2d\u65ad\u7c7b\u578b\u7801\u6267\u884c\u5bf9\u5e94\u7684\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\uff1b</li> <li>CPU\u4ece\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\u8fd4\u56de\uff0c\u4e2d\u65ad\u7ed3\u675f\u3002</li> </ol>"},{"location":"Documents/G-System/CPU/CPU/#6","title":"6 \u540c\u6b65\u673a\u5236","text":"<p>\u591a\u4efb\u52a1\u662f\u64cd\u4f5c\u7cfb\u7edf\u6700\u4e3a\u5173\u952e\u7684\u7279\u6027\u4e4b\u4e00\uff0c\u73b0\u4ee3\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u53ef\u80fd\u540c\u65f6\u5b58\u5728\u591a\u4e2a\u8fdb\u7a0b\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u53c8\u53ef\u80fd\u5305\u542b\u591a\u4e2a\u540c\u65f6\u6267\u884c\u7684\u7ebf\u7a0b\u3002\u5728Linux\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u67d0\u4e2a\u7ebf\u7a0b\u6b63\u5728\u64cd\u4f5c\u7684\u6570\u636e\u5f88\u53ef\u80fd\u4e5f\u5728\u88ab\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u8bbf\u95ee\u3002 - \u5e76\u53d1\u8bbf\u95ee\u7684\u7ebf\u7a0b\u53ef\u80fd\u6709\u4ee5\u4e0b\u6765\u6e90\uff1a     1. \u53e6\u4e00\u4e2aCPU\u6838\u4e0a\u7684\u7ebf\u7a0b\u3002\u8fd9\u662f\u771f\u6b63\u7684\u591a\u5904\u7406\u5668\u7cfb\u7edf\u3002     2. \u5904\u4e8e\u4e2d\u65ad\u4e0a\u4e0b\u6587\u7684\u7ebf\u7a0b\u3002\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u6253\u65ad\u5f53\u524d\u7ebf\u7a0b\u7684\u6267\u884c\u3002     3. \u56e0\u8c03\u5ea6\u800c\u62a2\u5360\u7684\u53e6\u4e00\u7ebf\u7a0b\u3002\u4e2d\u65ad\u5904\u7406\u540e\u8c03\u5ea6\u800c\u6765\u7684\u5176\u4ed6\u5185\u6838\u7ebf\u7a0b\u3002 - \u540c\u6b65\u673a\u5236\u901a\u5e38\u5305\u62ec\u57fa\u4e8e\u4e92\u65a5\uff08Mutual Exclusive\uff09\u548c\u975e\u963b\u585e\uff08Non-Blocking\uff09\u4e24\u7c7b\u3002</p> <pre><code>title: \u57fa\u4e8e\u9501\u7684\u8d44\u6e90\u4fdd\u62a4\u548c\u7ebf\u7a0b\u540c\u6b65\u6709\u4ee5\u4e0b\u7f3a\u70b9\n1. \u82e5\u6301\u6709\u9501\u7684\u7ebf\u7a0b\u6b7b\u4ea1\u3001\u963b\u585e\u6216\u6b7b\u5faa\u73af\uff0c\u5219\u5176\u4ed6\u7b49\u5f85\u9501\u7684\u7ebf\u7a0b\u53ef\u80fd\u6c38\u8fdc\u7b49\u5f85\u4e0b\u53bb\u3002\n2. \u5373\u4f7f\u51b2\u7a81\u7684\u60c5\u51b5\u975e\u5e38\u5c11\uff0c\u9501\u673a\u5236\u4e5f\u6709\u83b7\u53d6\u9501\u548c\u91ca\u653e\u9501\u7684\u4ee3\u4ef7\u3002\n3. \u9501\u5bfc\u81f4\u7684\u9519\u8bef\u4e0e\u65f6\u673a\u6709\u5173\uff0c\u96be\u4ee5\u91cd\u73b0\u3002\n4. \u6301\u6709\u9501\u7684\u7ebf\u7a0b\u56e0\u65f6\u95f4\u7247\u4e2d\u65ad\u6216\u9875\u9519\u8bef\u800c\u88ab\u53d6\u6d88\u8c03\u5ea6\u65f6\uff0c\u5176\u4ed6\u7ebf\u7a0b\u9700\u8981\u7b49\u5f85\u3002\n</code></pre>"},{"location":"Documents/G-System/CPU/CPU/#61","title":"6.1 \u539f\u5b50\u64cd\u4f5c","text":"<ul> <li>\u539f\u5b50\u64cd\u4f5c\u662f\u5982\u4f55\u5b9e\u73b0\u7684\uff1f</li> <li>\u5904\u7406\u5668\u5982\u4f55\u5b9e\u73b0\u539f\u5b50\u64cd\u4f5c</li> </ul> <pre><code>title: \u4ec0\u4e48\u662f\u539f\u5b50\u64cd\u4f5c\uff1f\n\u539f\u5b50\uff08atom\uff09 \u672c\u610f\u662f\u201c\u4e0d\u80fd\u88ab\u8fdb\u4e00\u6b65\u5206\u5272\u7684\u6700\u5c0f\u7c92\u5b50\u201d\uff0c \u800c\u539f\u5b50\u64cd\u4f5c\uff08atomic operation\uff09\u610f\u4e3a\u201c\u4e0d\u53ef\u88ab\u4e2d\u65ad\u7684\u4e00\u4e2a\u6216\u4e00\u7cfb\u5217\u64cd\u4f5c\u201d\u3002 \u5bf9\u539f\u5b50\u64cd\u4f5c\u7684\u7b80\u5355\u63cf\u8ff0\u5c31\u662f\uff1a \u591a\u4e2a\u7ebf\u7a0b\u6267\u884c\u4e00\u4e2a\u64cd\u4f5c\u65f6\uff0c \u5176\u4e2d\u4efb\u4f55\u4e00\u4e2a\u7ebf\u7a0b\u8981\u4e48\u5b8c\u5168\u6267\u884c\u5b8c\u6b64\u64cd\u4f5c\uff0c \u8981\u4e48\u6ca1\u6709\u6267\u884c\u6b64\u64cd\u4f5c\u7684\u4efb\u4f55\u6b65\u9aa4\uff0c \u90a3\u4e48\u8fd9\u4e2a\u64cd\u4f5c\u5c31\u662f\u539f\u5b50\u7684\u3002 \u539f\u5b50\u64cd\u4f5c\u662f\u5176\u4ed6\u5185\u6838\u540c\u6b65\u65b9\u6cd5\u7684\u57fa\u77f3\n</code></pre> <ul> <li>\u5728\u5355\u5904\u7406\u5668\u7cfb\u7edf\uff08UniProcessor\uff09 \u4e2d\uff0c \u80fd\u591f\u5728\u5355\u6761\u6307\u4ee4\u4e2d\u5b8c\u6210\u7684\u64cd\u4f5c\u90fd\u53ef\u4ee5\u8ba4\u4e3a\u662f\u201c\u539f\u5b50\u64cd\u4f5c\u201d\uff0c \u56e0\u4e3a\u4e2d\u65ad\u53ea\u80fd\u53d1\u751f\u4e8e\u6307\u4ee4\u4e4b\u95f4\u3002</li> <li>\u5728\u591a\u6838CPU\u7684\u65f6\u4ee3\uff0c \u4f53\u7cfb\u4e2d\u8fd0\u884c\u7740\u591a\u4e2a\u72ec\u7acb\u7684CPU\uff0c \u5373\u4f7f\u662f\u53ef\u4ee5\u5728\u5355\u4e2a\u6307\u4ee4\u4e2d\u5b8c\u6210\u7684\u64cd\u4f5c\u4e5f\u53ef\u80fd\u4f1a\u88ab\u5e72\u6270\u3002 \u5178\u578b\u7684\u4f8b\u5b50\u5c31\u662fdecl\u6307\u4ee4\uff08\u9012\u51cf\u6307\u4ee4\uff09 \uff0c \u5b83\u7ec6\u5206\u4e3a\u4e09\u4e2a\u8fc7\u7a0b\uff1a \u201c\u8bfb-&gt;\u6539-&gt;\u5199\u201d\uff0c \u6d89\u53ca\u4e24\u6b21\u5185\u5b58\u64cd\u4f5c\u3002 CPU \u63d0\u4f9b\u4e09\u79cd\u72ec\u7acb\u7684\u539f\u5b50\u9501\u673a\u5236\uff1a \u539f\u5b50\u4fdd\u8bc1\u64cd\u4f5c\u3001\u52a0 LOCK \u6307\u4ee4\u524d\u7f00\u548c\u7f13\u5b58\u4e00\u81f4\u6027\u534f\u8bae\u3002</li> </ul>"},{"location":"Documents/G-System/CPU/CPU/#62","title":"6.2 \u5185\u5b58\u5c4f\u969c","text":"<ul> <li>\u4ec0\u4e48\u662f\u5185\u5b58\u5c4f\u969c</li> <li>\u4e3a\u4ec0\u4e48\u6211\u4eec\u9700\u8981\u5185\u5b58\u5c4f\u969c\uff1f</li> </ul>"},{"location":"Documents/G-System/CPU/CPU/#621","title":"6.2.1 \u4ec0\u4e48\u662f\u5185\u5b58\u5c4f\u969c\uff1f\uff0c\u4e3a\u4ec0\u4e48\u9700\u8981\u5185\u5b58\u5c4f\u969c\uff1f","text":"<p>\u9996\u5148\uff0c\u4e3a\u4e86\u6027\u80fd\u7f16\u8bd1\u5668\u548c\u5904\u7406\u5668\u90fd\u4f1a\u5bf9\u6307\u4ee4\u8fdb\u884c\u91cd\u6392\u5e8f\u3002 - \u4ec0\u4e48\u662f\u5185\u5b58\u5c4f\u969c\uff1a\u4e00\u6761\u6307\u4ee4\uff0c\u8be5\u6307\u4ee4\u53ef\u4ee5\u5bf9\u7f16\u8bd1\u5668\uff08\u8f6f\u4ef6\uff09\u548c\u5904\u7406\u5668\uff08\u786c\u4ef6\uff09\u7684\u6307\u4ee4\u91cd\u6392\u505a\u51fa\u4e00\u5b9a\u7684\u9650\u5236\uff0c\u6bd4\u5982\uff0c\u4e00\u6761\u5185\u5b58\u5c4f\u969c\u6307\u4ee4\u53ef\u4ee5\u7981\u6b62\u7f16\u8bd1\u5668\u548c\u5904\u7406\u5668\u5c06\u5176\u540e\u9762\u7684\u6307\u4ee4\u79fb\u5230\u5185\u5b58\u5c4f\u969c\u6307\u4ee4\u4e4b\u524d\u3002 - \u4e3a\u4ec0\u4e48\u9700\u8981\u5185\u5b58\u5c4f\u969c\uff1a\u7f16\u8bd1\u5668\u548c\u5904\u7406\u5668\u6307\u4ee4\u91cd\u6392\u53ea\u80fd\u4fdd\u8bc1\u5728\u5355\u7ebf\u7a0b\u6267\u884c\u4e0b\u903b\u8f91\u6b63\u786e\uff0c\u5728\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u8bfb\u5199\u591a\u4e2a\u53d8\u91cf\u7684\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u4e0d\u5bf9\u6307\u4ee4\u91cd\u6392\u4f5c\u51fa\u4e00\u5b9a\u9650\u5236\uff0c\u4ee3\u7801\u7684\u6267\u884c\u7ed3\u679c\u4f1a\u6839\u636e\u6307\u4ee4\u91cd\u6392\u540e\u7684\u987a\u5e8f\u4ea7\u751f\u4e0d\u540c\u7684\u7ed3\u679c\u3002</p>"},{"location":"Documents/G-System/CPU/DMA%E6%8E%A7%E5%88%B6%E5%99%A8/","title":"DMA\u63a7\u5236\u5668","text":"<p>\u73b0\u5728\u7684CPU\u90fd\u96c6\u6210\u4e86DMA\u63a7\u5236\u5668\u3002\u65e9\u671f\u6bd4\u5982inter cpu\u5c31\u6ca1\u6709\u96c6\u6210\u3002</p>"},{"location":"Documents/G-System/CPU/DMA%E6%8E%A7%E5%88%B6%E5%99%A8/#1-dma","title":"1 DMA\u8fc7\u7a0b","text":"<p>\u5982\u679c\u5728\u5b58\u50a8\u5668\u548cIO\u8bbe\u5907\u4e4b\u95f4\u5f00\u8f9f\u4e00\u6761\u6570\u636e\u901a\u9053\uff0c\u4e13\u95e8\u7528\u4e8e\u6570\u636e\u4f20\u8f93\uff0c\u5c31\u53ef\u4ee5\u5c06\u5904\u7406\u5668\u4ece\u6570\u636e\u642c\u8fd0\u4e2d\u89e3\u653e\u51fa\u6765\u3002\u8fd9\u79cd\u65b9\u5f0f\u5c31\u662fDMA\uff08Direct Memory Access\uff0c\u76f4\u63a5\u5b58\u50a8\u5668\u8bbf\u95ee\uff09\u65b9\u5f0f\u3002DMA\u65b9\u5f0f\u5728\u5b58\u50a8\u5668\u548c\u5916\u8bbe\u4e4b\u95f4\u5f00\u8f9f\u76f4\u63a5\u7684\u6570\u636e\u4f20\u9001\u901a\u9053\uff0c\u6570\u636e\u4f20\u9001\u7531\u4e13\u95e8\u7684\u786c\u4ef6\u6765\u63a7\u5236\u3002\u63a7\u5236DMA\u6570\u636e\u4f20\u9001\u7684\u786c\u4ef6\u88ab\u79f0\u4e3aDMA\u63a7\u5236\u5668\u3002 \u4f7f\u7528DMA\u8fdb\u884c\u4f20\u8f93\u7684\u4e00\u822c\u8fc7\u7a0b\u4e3a\uff1a 1. \u5904\u7406\u5668\u4e3aDMA\u8bf7\u6c42\u9884\u5148\u5206\u914d\u4e00\u6bb5\u5730\u5740\u7a7a\u95f4\u3002 2. \u5904\u7406\u5668\u8bbe\u7f6eDMA\u63a7\u5236\u5668\u53c2\u6570\u3002\u8fd9\u4e9b\u53c2\u6570\u5305\u62ec\u8bbe\u5907\u6807\u8bc6\u3001\u6570\u636e\u4f20\u9001\u7684\u65b9\u5411\u3001\u5185\u5b58\u4e2d\u7528\u4e8e\u6570\u636e\u4f20\u9001\u7684\u6e90\u5730\u5740\u6216\u76ee\u6807\u5730\u5740\u3001\u4f20\u8f93\u7684\u5b57\u8282\u6570\u91cf\u7b49\u3002 3. DMA\u63a7\u5236\u5668\u8fdb\u884c\u6570\u636e\u4f20\u8f93\u3002DMA\u63a7\u5236\u5668\u53d1\u8d77\u5bf9\u5185\u5b58\u548c\u8bbe\u5907\u7684\u8bfb\u5199\u64cd\u4f5c\uff0c\u63a7\u5236\u6570\u636e\u4f20\u8f93\u3002DMA\u4f20\u8f93\u76f8\u5f53\u4e8e\u7528IO\u8bbe\u5907\u76f4\u63a5\u8bfb\u5199\u5185\u5b58\u3002 4. DMA\u63a7\u5236\u5668\u5411\u5904\u7406\u5668\u53d1\u51fa\u4e00\u4e2a\u4e2d\u65ad\uff0c\u901a\u77e5\u5904\u7406\u5668\u6570\u636e\u4f20\u9001\u7684\u7ed3\u679c\uff08\u6210\u529f\u6216\u8005\u51fa\u9519\u4ee5\u53ca\u9519\u8bef\u4fe1\u606f\uff09\u3002 5. \u5904\u7406\u5668\u5b8c\u6210\u672c\u6b21DMA\u8bf7\u6c42\uff0c\u53ef\u4ee5\u5f00\u59cb\u65b0\u7684DMA\u8bf7\u6c42\u3002</p>"},{"location":"Documents/G-System/Windows/bat%E6%89%B9%E5%A4%84%E7%90%86%E6%8C%87%E4%BB%A4/","title":"bat\u6279\u5904\u7406\u6307\u4ee4","text":"<ul> <li>dir \u3000\u3000\u3000\u5217\u6587\u4ef6\u540d </li> <li>cd\u3000\u3000\u3000\u3000\u6539\u53d8\u5f53\u524d\u76ee\u5f55 </li> <li>ren \u3000\u3000\u3000\u6539\u53d8\u6587\u4ef6\u540d </li> <li>copy\u3000\u3000\u3000\u62f7\u8d1d\u6587\u4ef6 </li> <li>del \u3000\u3000\u3000\u5220\u9664\u6587\u4ef6 </li> <li>md\u3000\u3000\u3000\u3000\u5efa\u7acb\u5b50\u76ee\u5f55 </li> <li>rd\u3000\u3000\u3000\u3000\u5220\u9664\u76ee\u5f55 </li> <li>deltree\u3000 \u5220\u9664\u76ee\u5f55\u6811 </li> <li>format\u3000\u3000\u683c\u5f0f\u5316\u78c1\u76d8 </li> <li>edit\u3000\u3000\u3000\u6587\u672c\u7f16\u8f91 </li> <li>type\u3000\u3000\u3000\u663e\u793a\u6587\u4ef6\u5185\u5bb9 </li> <li>mem \u3000\u3000\u3000\u67e5\u770b\u5185\u5b58\u72b6\u51b5 </li> </ul> <p>\u4ee5\u4e0b\u662f\u65b0\u589e\u52a0\u7684\u547d\u4ee4  - help\u3000\u3000\u3000\u663e\u793a\u5e2e\u52a9\u63d0\u793a  - cls \u3000\u3000\u3000\u6e05\u5c4f  - move\u3000\u3000\u3000\u79fb\u52a8\u6587\u4ef6\uff0c\u6539\u76ee\u5f55\u540d  - more\u3000\u3000\u3000\u5206\u5c4f\u663e\u793a  - xcopy \u3000\u3000\u62f7\u8d1d\u76ee\u5f55\u548c\u6587\u4ef6 </p>"},{"location":"Documents/G-System/Windows/bat%E6%89%B9%E5%A4%84%E7%90%86%E6%8C%87%E4%BB%A4/#1","title":"1 \u4fee\u6539\u6267\u884c\u6279\u5904\u7406\u5de5\u4f5c\u8def\u5f84","text":"<ul> <li>\u95ee\u9898\u573a\u666f\uff1a\u5f53\u901a\u8fc7\u5916\u90e8\u7a0b\u5e8f\u8c03\u7528\uff08\u5982c++\uff09\u8c03\u7528bat\u65f6\uff0c\u6b64\u7a0b\u5e8fexe\u6240\u5728\u8def\u5f84\u4f1a\u6210\u4e3abat\u6267\u884c\u65f6\u5de5\u4f5c\u8def\u5f84\uff0c\u800c\u6211\u4eec\u9700\u8981\u7684bat\u6267\u884c\u65f6\u5de5\u4f5c\u8def\u5f84\u662fbat\u6240\u5728\u6587\u4ef6</li> <li>\u5904\u7406\u65b9\u6cd5\uff1a\u5728bat\u6587\u4ef6\u4e2d\u589e\u52a0\u57fa\u7840\u8def\u5f84\u8bbe\u7f6e\u4fe1\u606f</li> <li>\u539fbat\u6587\u4ef6</li> </ul> <pre><code>dir &gt; test.txt\n</code></pre> <ul> <li>\u4fee\u6539\u540ebat\u6587\u4ef6</li> </ul> <pre><code>set base_dir=%~dp0  \n%base_dir:~0,2%  pushd %base_dir%  \ndir &gt; test.txt\npopd  </code></pre>"},{"location":"Documents/G-System/Windows/windows%E5%BF%AB%E6%8D%B7%E9%94%AE/","title":"windows\u5feb\u6377\u952e","text":"\u5feb\u6377\u952e \u529f\u80fd Win\u952e + A \u6253\u5f00\u8bbe\u7f6e\u9762\u677f Win\u952e + B \u8df3\u8f6c\u7cfb\u7edf\u6258\u76d8 Win\u952e + C \u6253\u5f00Microsoft Teams Win\u952e + D \u663e\u793a\u684c\u9762 Win\u952e + E \u6253\u5f00\u6587\u4ef6\u8d44\u6e90\u7ba1\u7406\u5668 Win\u952e + F \u4e00\u952e\u63d0\u4ea4\u53cd\u9988 Win\u952e + G \u542f\u52a8Xbox Game Bar Win\u952e + H \u8bed\u97f3\u542c\u5199 Win\u952e + I \u6253\u5f00\u8bbe\u7f6e Win\u952e + K \u6295\u5c4f\u5230\u5176\u4ed6\u8bbe\u5907 Win\u952e + L \u9501\u5b9a\u5c4f\u5e55 Win\u952e + M \u7a97\u53e3\u6700\u5c0f\u5316 Win\u952e + N \u6253\u5f00\u901a\u77e5\u9762\u677f Win\u952e + P \u4fee\u6539\u6295\u5f71\u6a21\u5f0f Win\u952e + Q / S \u4e00\u952e\u641c\u7d22 Win\u952e + R \u8fd0\u884c Win\u952e + T \u67e5\u770b\u5df2\u6253\u5f00\u7a0b\u5e8f\u7f29\u7565\u56fe Win\u952e + V \u6253\u5f00\u4e91\u526a\u8d34\u677f Win\u952e + W \u547c\u51fa\u8d44\u8baf\u4e0e\u5174\u8da3\u680f Win\u952e + X \u6253\u5f00\u9ad8\u7ea7\u7528\u6237\u529f\u80fd Win\u952e + Z \u6253\u5f00\u7a97\u53e3\u5e03\u5c40 Win\u952e + \u7a7a\u683c \u5207\u6362\u8f93\u5165\u6cd5 Win\u952e + \u5149\u6807\u952e \u7a97\u53e3\u6392\u7248 Win\u952e + TAB \u865a\u62df\u684c\u9762\u5207\u6362 Win\u952e + Ctrl + D \u65b0\u5efa\u865a\u62df\u684c\u9762 Win\u952e + Ctrl + \u5de6 / \u53f3 \u5207\u6362\u865a\u62df\u684c\u9762 Win\u952e + Prtscn \u4e00\u952e\u622a\u5c4f Win\u952e + Shift + S \u4e13\u4e1a\u5c4f\u5e55 Win\u952e + Home \u6700\u5c0f\u5316\u975e\u6d3b\u52a8\u7a97\u53e3"},{"location":"Documents/G-System/Windows/winodws%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/","title":"winodws\u76f8\u5173\u95ee\u9898\u6c47\u603b","text":""},{"location":"Documents/G-System/Windows/winodws%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/#1-wsl","title":"1 wsl\u95ee\u9898","text":""},{"location":"Documents/G-System/Windows/winodws%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/#11-wsl","title":"1.1 \u542f\u52a8wsl\u663e\u793a \u201c\u53c2\u8003\u7684\u5bf9\u8c61\u7c7b\u578b\u4e0d\u652f\u6301\u5c1d\u8bd5\u7684\u64cd\u4f5c\u3002\u201d","text":"<ol> <li>\u89e3\u51b3\u529e\u6cd5\uff1a\u65b0\u5efa\u540e\u7f00reg\u7684\u6587\u4ef6\uff0c\u590d\u5236\u4ee5\u4e0b\u6587\u5b57\uff0c\u53cc\u51fb\u6267\u884creg\u6587\u4ef6</li> </ol> <pre><code>Windows Registry Editor Version 5.00\n\n[HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\WinSock2\\Parameters\\AppId_Catalog\\0408F7A3]\n\"AppFullPath\"=\"C:\\\\Windows\\\\System32\\\\wsl.exe\"\n\"PermittedLspCategories\"=dword:80000000\n</code></pre>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E5%AD%98%E5%82%A8%E7%AE%80%E4%BB%8B/","title":"\u5b58\u50a8\u7b80\u4ecb","text":""},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E5%AD%98%E5%82%A8%E7%AE%80%E4%BB%8B/#1","title":"1 \u5355\u4f4d\u6c47\u603b","text":"\u5341\u8fdb\u5236\u524d\u7f00 (SI) \u540d\u5b57 \u7f29\u5199 \u6b21\u65b9 \u5343\u5b57\u8282 kB $10^3$ \u5146\u5b57\u8282 MB $10^6$ \u5409\u5b57\u8282 GB $10^9$ \u592a\u5b57\u8282 TB $10^{12}$ \u62cd\u5b57\u8282 PB $10^{15}$ \u827e\u5b57\u8282 EB $10^{18}$ \u6cfd\u5b57\u8282 ZB $10^{21}$ \u5c27\u5b57\u8282 YB $10^{24}$ RB $10^{27}$ QB $10^{30}$ \u4e8c\u8fdb\u5236\u524d\u7f00 (IEC 60027-2) \u540d\u5b57 \u7f29\u5199 \u6b21\u65b9 kibibyte KiB $2^{10}$ mebibyte MiB $2^{20}$ gibibyte GiB $2^{30}$ tebibyte TiB $2^{40}$ pebibyte PiB $2^{50}$ exbibyte EiB $2^{60}$ zebibyte ZiB $2^{70}$ yobibyte YiB $2^{80}$"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E5%AD%98%E5%82%A8%E7%AE%80%E4%BB%8B/#2","title":"2 \u5b58\u50a8\u5668\u5c42\u6b21\u7ed3\u6784","text":""},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E5%AD%98%E5%82%A8%E7%AE%80%E4%BB%8B/#3-io","title":"3 IO \u6307\u6807","text":"<ul> <li>IOPS\uff1a\u6bcf\u79d2\u5b8c\u6210 IO \u6b21\u6570\uff1bIOPS\u6839\u636e\u6d4b\u8bd5\u503e\u5411\u6027\u7684\u4e0d\u540c\uff0c\u4e3b\u8981\u5305\u62ec4\u79cd\u7c7b\u578b\u7684IOPS\u6307\u6807:\u968f\u673a\u8bfbIOPS\u3001\u968f\u673a\u5199IOPS\u3001\u987a\u5e8f\u8bfbIOPS\u3001\u987a\u5e8f\u5199IOPS\u3002</li> <li>\u541e\u5410\u91cf\uff1a\u541e\u5410\u91cf\u662f\u78c1\u76d8\u5728\u5355\u4f4d\u65f6\u95f4\u5185\u80fd\u6210\u529f\u4f20\u9012\u7684\u5e73\u5747\u6570\u636e\u91cf\u3002\u541e\u5410\u91cf\u7684\u5355\u4f4d\u901a\u5e38\u8868\u2f70\u4e3aMB\u6bcf\u79d2\uff08MB/s\u6216MBps\uff09\u3002</li> <li>IO \u65f6\u5ef6 (latency)\uff1aIO\u65f6\u5ef6\u662f\u6307\u2f00\u6b21IO\u8bf7\u6c42\u53d1\u51fa\uff0c\u5230\u8be5IO\u8bf7\u6c42\u5b8c\u6210\u6240\u8017\u8d39\u7684\u65f6\u95f4\u3002</li> <li>\u961f\u5217\u6df1\u5ea6\uff1a\u6307\u80fd\u540c\u65f6\u5904\u7406 IO \u7684\u6b21\u6570</li> </ul>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E5%86%85%E5%AD%98/CPU%E5%AF%84%E5%AD%98%E5%99%A8/","title":"CPU\u5bc4\u5b58\u5668","text":"<ul> <li>\u4e00\u53e3\u6c14\u770b\u5b8c45\u4e2a\u5bc4\u5b58\u5668\uff0cCPU\u6838\u5fc3\u6280\u672f\u5927\u63ed\u79d8</li> </ul>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98/","title":"\u5185\u5b58","text":"<ul> <li>\u5b58\u50a8\u5668\u5c42\u6b21\u7ed3\u6784 </li> </ul>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98/#1","title":"1 \u5185\u5b58\u7c7b\u578b","text":"<ul> <li>RAM\uff08Random Access Memory\uff09 \uff1a \u968f\u673a\u8bbf\u95ee\u5b58\u50a8\u5668  </li> <li>SRAM\uff08Static RAM\uff09 \uff1a \u9759\u6001\u968f\u673a\u8bbf\u95ee\u5b58\u50a8\u5668  </li> <li>DRAM\uff08Dynamic RAM\uff09 \uff1a \u52a8\u6001\u968f\u673a\u8bbf\u95ee\u5b58\u50a8\u5668\u3002  </li> <li>SDRAM\uff08Synchronous DRAM\uff09 \uff1a \u540c\u6b65\u52a8\u6001\u968f\u673a\u8bbf\u95ee\u5b58\u50a8\u5668\u3002  </li> <li>DDR\uff08Double Data Rate SDRAM\uff09 \uff1a \u53cc\u6570\u636e\u901f\u7387SDRAM\u3002  </li> <li>DDR2\uff1a \u7b2c\u4e8c\u4ee3DDR\u3002  </li> <li>DDR3\uff1a \u7b2c\u4e09\u4ee3DDR\u3002  </li> <li>DDR4\uff1a \u7b2c\u56db\u4ee3DDR\u3002</li> </ul>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98/#11-sram","title":"1.1 SRAM","text":"<p>SRAM11\u5185\u90e8\u6709\u4e00\u5757\u82af\u7247\u7ed3\u6784\u7ef4\u6301\u4fe1\u606f\uff0c\u901a\u5e38\u975e\u5e38\u5feb\uff0c\u4f46\u662f\u6210\u672c\u76f8\u5bf9 DRAM \u5f88\u9ad8\uff0c\u5e94\u7528\u65f6\u5bb9 \u91cf\u4e0d\u4f1a\u5f88\u5927\uff0c \u56e0\u800c\u4e0d\u80fd\u4f5c\u7528\u7cfb\u7edf\u7684\u4e3b\u8981\u5185\u5b58\u3002 \u4e00\u822c\u5904\u7406\u5668\u5185\u90e8\u7684Cache\u5c31\u662f\u91c7\u7528SRAM\u3002  </p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98/#12-dram","title":"1.2 DRAM","text":"<p>DRAM\u901a\u5e38\u662f\u7cfb\u7edf\u7684\u4e3b\u8981\u5185\u5b58\uff0c \u52a8\u6001\u8868\u793a\u4fe1\u606f\u662f\u5b58\u50a8\u5728\u96c6\u6210\u7535\u8def\u7684\u7535\u5bb9\u5668\u5185\u7684\uff0c \u7531\u4e8e\u7535\u5bb9 \u5668\u4f1a\u81ea\u52a8\u653e\u7535\uff0c \u4e3a\u4e86\u907f\u514d\u6570\u636e\u4e22\u5931\uff0c \u9700\u8981\u5b9a\u671f\u5145\u7535\u3002 \u901a\u5e38\uff0c \u5185\u5b58\u63a7\u5236\u5668\u4f1a\u8d1f\u8d23\u5b9a\u671f\u5145\u7535\u7684 \u64cd\u4f5c\u3002 \u4e0d\u8fc7\u968f\u7740\u66f4\u597d\u6280\u672f\u7684\u63d0\u51fa\uff0c \u8be5\u6280\u672f\u5df2\u7ecf\u88ab\u6dd8\u6c70\u3002  </p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98/#13-sdram","title":"1.3 SDRAM","text":"<p>\u4e00\u822cDRAM\u90fd\u662f\u91c7\u7528\u5f02\u6b65\u65f6\u949f\u8fdb\u884c\u540c\u6b65\uff0c \u800cSDRAM\u5219\u662f\u91c7\u7528\u540c\u6b65\u65f6\u949f\u8fdb\u884c\u540c\u6b65\u3002 \u901a\u5e38\uff0c \u91c7\u7528SDRAM\u7ed3\u6784\u7684\u7cfb\u7edf\u4f1a\u4f7f\u5904\u7406\u5668\u548c\u5185\u5b58\u901a\u8fc7\u4e00\u4e2a\u76f8\u540c\u7684\u65f6\u949f\u9501\u5728\u4e00\u8d77\uff0c \u4ece\u800c\u4f7f\u5904\u7406\u5668 \u548c\u5185\u5b58\u80fd\u591f\u5171\u4eab\u4e00\u4e2a\u65f6\u949f\u5468\u671f\uff0c \u4ee5\u76f8\u540c\u7684\u901f\u5ea6\u540c\u6b65\u5de5\u4f5c\u3002 \u8be5\u65f6\u949f\u4f1a\u9a71\u52a8\u4e00\u4e2a\u5185\u90e8\u7684\u6709\u9650\u72b6 \u6001\u673a\uff0c \u80fd\u591f\u91c7\u7528\u6d41\u6c34\u7ebf\u7684\u65b9\u5f0f\u5904\u7406\u591a\u4e2a\u8bfb\u5199\u8bf7\u6c42\u3002 SDRAM\u91c7\u7528\u5206\u5e03\u5f0f\u67b6\u6784\uff0c \u5185\u542b\u591a\u4e2a\u5b58\u50a8\u5757\uff08Bank\uff09 \uff0c \u5728\u4e00\u4e2a\u65f6\u949f\u5468\u671f\u5185\uff0c \u5b83\u80fd\u591f\u72ec\u7acb\u5730 \u8bbf\u95ee\u6bcf\u4e2a\u5b58\u50a8\u5757\uff0c\u4ece\u800c\u53ef\u4ee5\u591a\u6b21\u8fdb\u884c\u8bfb\u5199\u64cd\u4f5c\uff0c\u589e\u52a0\u4e86\u5185\u5b58\u7cfb\u7edf\u7684\u541e\u5410\u7387\u3002  </p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98/#14-ddr","title":"1.4 DDR","text":"<p>SDRAM\u6280\u672f\u5e7f\u6cdb\u7528\u5728\u8ba1\u7b97\u673a\u884c\u4e1a\u4e2d\uff0c \u968f\u7740\u8be5\u6280\u672f\u7684\u63d0\u51fa\uff0c \u53c8\u51fa\u73b0\u4e86DDR\uff08\u4e5f\u79f0\u4e3a DDR1\uff09 \uff0c DDR2\uff0c DDR3\u3002 \u6700\u65b0\u7684DDR4\u6280\u672f\u6807\u51c6\u4e5f\u57282014\u5e74\u4e0b\u534a\u5e74\u53d1\u5e03</p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98/#2","title":"2 \u7269\u7406\u5185\u5b58","text":"<p>\u7269\u7406\u5185\u5b58\u5c31\u662f\u7cfb\u7edf\u786c\u4ef6\u63d0\u4f9b\u7684\u5185\u5b58\u5927\u5c0f\uff0c\u662f\u771f\u6b63\u7684\u5185\u5b58\uff0c\u4e00\u822c\u4f7f\u7528 DRAM \u4f5c\u4e3a\u5b58\u50a8\u4ecb\u8d28\u3002</p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98/#3","title":"3 \u865a\u62df\u5185\u5b58","text":"<p>\u4e3a\u4e86\u66f4\u52a0\u6709\u6548\u5730\u7ba1\u7406\u5185\u5b58\u5e76\u4e14\u5c11\u51fa\u9519\uff0c\u73b0\u4ee3\u7cfb\u7edf\u63d0\u4f9b\u4e86\u4e00\u79cd\u5bf9\u4e3b\u5b58\u7684\u62bd\u8c61\u6982\u5ff5\uff0c\u53eb\u505a\u865a\u62df\u5185\u5b58\uff08VM\uff09\u3002\u865a\u62df\u5185\u5b58\u662f\u786c\u4ef6\u5f02\u5e38\u3001\u786c\u4ef6\u5730\u5740\u7ffb\u8bd1\u3001\u4e3b\u5b58\u3001\u78c1\u76d8\u6587\u4ef6\u548c\u5185\u6838\u8f6f\u4ef6\u7684\u5b8c\u7f8e\u4ea4\u4e92\uff0c\u5b83\u4e3a\u6bcf\u4e2a\u8fdb\u7a0b\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5927\u7684\u3001\u4e00\u81f4\u7684\u548c\u79c1\u6709\u7684\u5730\u5740\u7a7a\u95f4\u3002 \u865a\u62df\u5185\u5b58\u63d0\u4f9b\u4e86\u4e09\u4e2a\u91cd\u8981\u7684\u80fd\u529b\uff1a  1. \u5b83\u5c06\u4e3b\u5b58\u770b\u6210\u662f\u4e00\u4e2a\u5b58\u50a8\u5728\u78c1\u76d8\u4e0a\u7684\u5730\u5740\u7a7a\u95f4\u7684\u9ad8\u901f\u7f13\u5b58\uff0c\u5728\u4e3b\u5b58\u4e2d\u53ea\u4fdd\u5b58\u6d3b\u52a8\u533a\u57df\uff0c\u5e76\u6839\u636e\u9700\u8981\u5728\u78c1\u76d8\u548c\u4e3b\u5b58\u4e4b\u95f4\u6765\u56de\u4f20\u9001\u6570\u636e\uff0c\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u5b83\u9ad8\u6548\u5730\u4f7f\u7528\u4e86\u4e3b\u5b58\u3002 2. \u5b83\u4e3a\u6bcf\u4e2a\u8fdb\u7a0b\u63d0\u4f9b\u4e86\u4e00\u81f4\u7684\u5730\u5740\u7a7a\u95f4\uff0c\u4ece\u800c\u7b80\u5316\u4e86\u5185\u5b58\u7ba1\u7406\u3002 3. \u5b83\u4fdd\u62a4\u4e86\u6bcf\u4e2a\u8fdb\u7a0b\u7684\u5730\u5740\u7a7a\u95f4\u4e0d\u88ab\u5176\u4ed6\u8fdb\u7a0b\u7834\u574f\u3002</p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98/#4-swap","title":"4 swap\u4ea4\u6362\u5206\u533a","text":"<p>swap\u5206\u533a\u662f\u4e00\u5757\u7279\u6b8a\u7684\u786c\u76d8\u7a7a\u95f4\uff0c\u5f53\u5b9e\u9645\u7269\u7406\u5185\u5b58\u4e0d\u591f\u7528\u65f6\uff0c\u5c06\u5185\u5b58\u4e2d\u957f\u65f6\u95f4\u4e0d\u4f7f\u7528\u7684\u6570\u636e\u5b58\u653e\u5230\u786c\u76d8\u4e2d\uff0c\u4ee5\u6b64\u8fbe\u5230\u4e3a\u5176\u5b83\u8fdb\u7a0b\u817e\u51fa\u5185\u5b58\u7a7a\u95f4\u7684\u4f5c\u7528\u3002</p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98/#5","title":"5 \u865a\u62df\u5bfb\u5740\u548c\u7269\u7406\u5bfb\u5740","text":"<ul> <li>\u7269\u7406\u5bfb\u5740\u8fc7\u7a0b\uff1acpu -&gt; \u7269\u7406\u5730\u5740 -&gt; \u4e3b\u5b58 -&gt; \u8fd4\u56de\u6570\u636e\u5230cpu(\u5b58\u5728\u5bc4\u5b58\u5668\u4e2d)</li> <li>\u865a\u62df\u5bfb\u5740\u8fc7\u7a0b\uff1acpu -&gt;\u865a\u62df\u5730\u5740 -&gt; MMU(\u5730\u5740\u7ffb\u8bd1) -&gt; \u7269\u7406\u5730\u5740 -&gt; \u4e3b\u5b58 -&gt; \u8fd4\u56de\u6570\u636e\u5230cpu(\u5b58\u5728\u5bc4\u5b58\u5668\u4e2d)  </li> </ul>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98/#6","title":"6 \u9875","text":"<p>VM\u7cfb\u7edf\u901a\u8fc7\u5c06\u865a\u62df\u5185\u5b58\u5206\u5272\u4e3a\u79f0\u4e3a\u865a\u62df\u9875\uff08Virtual Page\uff0cVP\uff09\u7684\u5927\u5c0f\u56fa\u5b9a\u7684\u5757\u6765\u5904\u7406\u8fd9\u4e2a\u95ee\u9898\u3002\u6bcf\u4e2a\u865a\u62df\u9875\u7684\u5927\u5c0f\u4e3aP\uff1d2^p\u5b57\u8282\u3002\u7c7b\u4f3c\u5730\uff0c\u7269\u7406\u5185\u5b58\u88ab\u5206\u5272\u4e3a\u7269\u7406\u9875\uff08Physical Page\uff0cPP\uff09\uff0c\u5927\u5c0f\u4e5f\u4e3aP\u5b57\u8282\uff08\u7269\u7406\u9875\u4e5f\u88ab\u79f0\u4e3a\u9875\u5e27\uff08page frame\uff09\uff09\u3002\u5728\u4efb\u610f\u65f6\u523b\uff0c\u865a\u62df\u9875\u9762\u7684\u96c6\u5408\u90fd\u5206\u4e3a\u4e09\u4e2a\u4e0d\u76f8\u4ea4\u7684\u5b50\u96c6\uff1a 1. \u672a\u5206\u914d\u7684\uff1a VM\u7cfb\u7edf\u8fd8\u672a\u5206\u914d\uff08\u6216\u8005\u521b\u5efa\uff09\u7684\u9875\uff0c\u662f\u6ca1\u6709\u88ab\u8fdb\u7a0b\u7533\u8bf7\u4f7f\u7528\u7684\uff0c\u4e5f\u5c31\u662f\u7a7a\u95f2\u7684\u865a\u62df\u5185\u5b58\u3002\u672a\u5206\u914d\u7684\u5757\u6ca1\u6709\u4efb\u4f55\u6570\u636e\u548c\u5b83\u4eec\u76f8\u5173\u8054\uff0c\u56e0\u6b64\u4e5f\u5c31\u4e0d\u5360\u7528\u4efb\u4f55\u78c1\u76d8\u7a7a\u95f4\u3002 2. \u7f13\u5b58\u7684\uff1a\u5f53\u524d\u5df2\u7f13\u5b58\u5728\u7269\u7406\u5185\u5b58\u4e2d\u7684\u5df2\u5206\u914d\u9875\u3002 3. \u672a\u7f13\u5b58\u7684\uff1a\u672a\u7f13\u5b58\u5728\u7269\u7406\u5185\u5b58\u4e2d\u7684\u5df2\u5206\u914d\u9875\u3002\uff08\u6bd4\u5982mmap\u6216brk\u5206\u914d\u540e\u5c31\u662f\u672a\u7f13\u5b58\u72b6\u6001\uff0c\u5f53\u4f7f\u7528\u8fd9\u5757\u5185\u5b58\u65f6\uff0c\u89e6\u53d1\u7f3a\u9875\u4e2d\u65ad\uff0c\u865a\u62df\u5730\u5740\u6620\u5c04\u5230\u4e3b\u5b58\u4e0a\u540e\uff0c\u5c31\u53d8\u6210\u7f13\u5b58\u7684\u72b6\u6001\u3002\u6216\u8005\u6b64\u90e8\u5206\u4ece\u4e3b\u5b58\u4e0a\u66ff\u6362\u5230\u4e86\u78c1\u76d8\uff09</p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98/#61","title":"6.1 \u9875\u8868","text":"<ul> <li>\u9875\u8868\u662f\u5b58\u5728\u5728\u7269\u7406\u5185\u5b58\u4e0a\u7684\u3002</li> <li>\u9875\u8868\u5c06\u865a\u62df\u9875\u6620\u5c04\u5230\u7269\u7406\u9875\u3002\u6bcf\u6b21\u5730\u5740\u7ffb\u8bd1\u786c\u4ef6\u5c06\u4e00\u4e2a\u865a\u62df\u5730\u5740\u8f6c\u6362\u4e3a\u7269\u7406\u5730\u5740\u65f6\uff0c\u90fd\u4f1a\u8bfb\u53d6\u9875\u8868\u3002\u64cd\u4f5c\u7cfb\u7edf\u8d1f\u8d23\u7ef4\u62a4\u9875\u8868\u7684\u5185\u5bb9\uff0c\u4ee5\u53ca\u5728\u78c1\u76d8\u4e0eDRAM\u4e4b\u95f4\u6765\u56de\u4f20\u9001\u9875\u3002</li> <li>\u901a\u8fc7\u5728\u9875\u8868\u9879\u8bbe\u7f6e\u6709\u6548\u4f4d\u6765\u6807\u8bb0\u865a\u62df\u9875\u662f\u7f13\u5b58\u5728\u7269\u7406\u5185\u5b58\u8fd8\u662f\u78c1\u76d8\u4e0a\u3002 </li> </ul>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98/#62","title":"6.2 \u9875\u547d\u4e2d\u548c\u7f3a\u9875\u4e2d\u65ad","text":"<ul> <li>\u9875\u547d\u4e2d\uff1a\u5f53\u8bbf\u95ee\u7684\u865a\u62df\u9875\u5bf9\u5e94\u7684\u7269\u7406\u9875\u5df2\u7ecf\u7f13\u5b58\u5728\u7269\u7406\u5185\u5b58\u4e2d\u65f6\uff0c\u6b64\u5c31\u53eb\u505a\u9875\u547d\u4e2d\u3002</li> <li>\u7f3a\u9875\u4e2d\u65ad\uff1a\u5f53CPU\u53d1\u51fa\u7684\u865a\u62df\u5730\u5740\u5bf9\u5e94\u7684\u9875\u9762\u4e0d\u5728\u7269\u7406\u5185\u5b58\uff0c\u5c31\u4f1a\u4ea7\u751f\u4e00\u4e2a\u7f3a\u9875\u4e2d\u65ad\u3002\u6b64\u65f6\u64cd\u4f5c\u7cfb\u7edf\u901a\u8fc7\u9875\u9762\u7f6e\u6362\u7b97\u6cd5\u5c06\u6b64\u90e8\u5206\u5185\u5bb9\u653e\u5165\u7269\u7406\u5185\u5b58\u4e2d\u3002\u5982\u679c\u7269\u7406\u5185\u5b58\u6ca1\u6709\u591a\u4f59\u7a7a\u95f4\uff0c\u5219\u5728\u539f\u7269\u7406\u5185\u5b58\u4e0a\u627e\u5230\u4e00\u4e2a\u727a\u7272\u9875\uff0c\u653e\u5165\u7269\u7406\u78c1\u76d8\u4e0a\uff0c\u518d\u5c06\u865a\u62df\u9875\u653e\u5165\u7269\u7406\u5185\u5b58\u4e2d\u3002</li> </ul>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98/#63","title":"6.3 \u5927\u9875\u4f18\u7f3a\u70b9","text":"<p>\u4f18\u70b9\uff1a\u00a01\uff09\u5927\u9875\u5185\u5b58TLB\u5c0f\u59d0\u5f88\u5c11\uff0c\u7f3a\u9875\u4e2d\u65ad\u4e5f\u5f88\u5c11\uff0c\u5bf9\u4e8e\u5185\u5b58\u7684\u8bbf\u95ee\u6027\u80fd\u66f4\u597d\uff0c\u5bf9\u4e8e\u5360\u7528\u5927\u91cf\u5185\u5b58\u7684\u7a0b\u5e8f\uff0c\u6027\u80fd\u63d0\u5347\u6bd4\u8f83\u660e\u663e\uff0c\u53ef\u4ee5\u63d0\u5347\u523050\uff05\u5de6\u53f3\u30022\uff09\u5927\u9875\u5185\u5b58\u7684\u5185\u5b58\u9875\u4e0d\u4f1a\u4ea4\u6362\u5230\u78c1\u76d8\u4e0a\u3002 \u7f3a\u70b9\uff1a\u00a01\uff09\u5fc5\u987b\u4f7f\u7528\u7279\u5b9a\u7684\u65b9\u5f0f\u4f7f\u7528\uff0c\u5e76\u91c7\u7528mmap\u6620\u5c04\u6216\u901a\u8fc7\u4e0a\u9762\u7684\u65b9\u5f0f\u6307\u5b9a\u30022\uff09\u7a0b\u5e8f\u4f7f\u7528\u5185\u5b58\u5c0f\uff0c\u5374\u7533\u8bf7\u4e86\u5927\u9875\u5185\u5b58\uff0c\u4f1a\u9020\u6210\u5185\u5b58\u6d6a\u8d39\uff0c\u56e0\u4e3a\u5185\u5b58\u5206\u914d\u6700\u5c0f\u5355\u4f4d\u662f\u9875\u3002</p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98/#7-sbrkbrkmmapmunmap","title":"7 \u7cfb\u7edf\u8c03\u7528\u4e0e\u5185\u5b58\u7ba1\u7406\uff08sbrk\u3001brk\u3001mmap\u3001munmap\uff09","text":"<ul> <li>\u5f53\u5206\u914d\u5185\u5b58\u5927\u4e8e128k\u65f6\uff0c\u7cfb\u7edf\u4f7f\u7528mmap\u5206\u914d\u5185\u5b58\uff0c\u5c0f\u4e8e128k\u65f6\u4f7f\u7528brk\u5206\u914d\u5185\u5b58</li> <li>brk\u5206\u914d\u5185\u5b58\u65f6\uff0c\u76f4\u63a5\u5728\u5806\u7a7a\u95f4\u9876\u90e8\u504f\u79fb\u5206\u914d\u7684\u5927\u5c0f\uff0c\u8fd4\u56de\u6307\u9488\u5730\u5740\u5373\u5b8c\u6210\u5206\u914d\u3002</li> <li>mmap\u662f\u5728\u5806\u548c\u6808\u4e2d\u95f4\u7684\u5185\u5b58\u6620\u5c04\u533a\u57df\u5206\u914d\u5185\u5b58\u3002</li> <li>\u7531\u4e8e\u53ea\u6709\u4e00\u4e2a\u5806\u9876\u6307\u9488_edata\u6807\u8bc6\uff0cbrk\u5206\u914d\u7684\u5185\u5b58free\u65f6\uff0c\u53ef\u80fd\u5e76\u6ca1\u6709\u88ab\u56de\u6536\uff0c\u53ea\u6709\u5f53\u5806\u9876\u6570\u636e\u88abfree\u65f6\uff0c\u624d\u80fd\u901a\u8fc7\u4e00\u5b9a_data\u6307\u9488\u8fbe\u5230\u56de\u6536\u5185\u5b58\u7684\u4f5c\u7528\u3002\u8fd9\u4e5f\u662f\u5185\u5b58\u788e\u7247\u4ea7\u751f\u7684\u539f\u56e0\u3002</li> <li>malloc \u901a\u8fc7 brk() \u65b9\u5f0f\u7533\u8bf7\u7684\u5185\u5b58\uff0cfree \u91ca\u653e\u5185\u5b58\u7684\u65f6\u5019\uff0c\u5e76\u4e0d\u4f1a\u628a\u5185\u5b58\u5f52\u8fd8\u7ed9\u64cd\u4f5c\u7cfb\u7edf\uff0c\u800c\u662f\u7f13\u5b58\u5728 malloc \u7684\u5185\u5b58\u6c60\u4e2d\uff0c\u5f85\u4e0b\u6b21\u4f7f\u7528\uff1b</li> <li>malloc \u901a\u8fc7 mmap() \u65b9\u5f0f\u7533\u8bf7\u7684\u5185\u5b58\uff0cfree \u91ca\u653e\u5185\u5b58\u7684\u65f6\u5019\uff0c\u4f1a\u628a\u5185\u5b58\u5f52\u8fd8\u7ed9\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5185\u5b58\u5f97\u5230\u771f\u6b63\u7684\u91ca\u653e\u3002</li> </ul> <p>  - \u53c2\u8003\u8d44\u6599</p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98/#8-mallocfree","title":"8 malloc\u4e4b\u540efree","text":""},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98/#81-mmap","title":"8.1 \u4e3a\u4ec0\u4e48\u4e0d\u5168\u90e8\u4f7f\u7528 mmap \u6765\u5206\u914d\u5185\u5b58\uff1f","text":"<ul> <li>\u56e0\u4e3a\u5411\u64cd\u4f5c\u7cfb\u7edf\u7533\u8bf7\u5185\u5b58\uff0c\u662f\u8981\u901a\u8fc7\u7cfb\u7edf\u8c03\u7528\u7684\uff0c\u6267\u884c\u7cfb\u7edf\u8c03\u7528\u662f\u8981\u8fdb\u5165\u5185\u6838\u6001\u7684\uff0c\u7136\u540e\u5728\u56de\u5230\u7528\u6237\u6001\uff0c\u8fd0\u884c\u6001\u7684\u5207\u6362\u4f1a\u8017\u8d39\u4e0d\u5c11\u65f6\u95f4\u3002</li> <li>\u6240\u4ee5\uff0c\u7533\u8bf7\u5185\u5b58\u7684\u64cd\u4f5c\u5e94\u8be5\u907f\u514d\u9891\u7e41\u7684\u7cfb\u7edf\u8c03\u7528\uff0c\u5982\u679c\u90fd\u7528 mmap \u6765\u5206\u914d\u5185\u5b58\uff0c\u7b49\u4e8e\u6bcf\u6b21\u90fd\u8981\u6267\u884c\u7cfb\u7edf\u8c03\u7528\u3002</li> <li>\u53e6\u5916\uff0c\u56e0\u4e3a mmap \u5206\u914d\u7684\u5185\u5b58\u6bcf\u6b21\u91ca\u653e\u7684\u65f6\u5019\uff0c\u90fd\u4f1a\u5f52\u8fd8\u7ed9\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4e8e\u662f\u6bcf\u6b21 mmap \u5206\u914d\u7684\u865a\u62df\u5730\u5740\u90fd\u662f\u7f3a\u9875\u72b6\u6001\u7684\uff0c\u7136\u540e\u5728\u7b2c\u4e00\u6b21\u8bbf\u95ee\u8be5\u865a\u62df\u5730\u5740\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u89e6\u53d1\u7f3a\u9875\u4e2d\u65ad\u3002</li> </ul>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98/#82-brk","title":"8.2 \u4e3a\u4ec0\u4e48\u4e0d\u5168\u90e8\u4f7f\u7528 brk \u6765\u5206\u914d\uff1f","text":"<ul> <li>\u9891\u7e41\u7684malloc free\u4f1a\u4ea7\u751f\u5185\u5b58\u788e\u7247\u3002</li> </ul>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98/#83-trim","title":"8.3 \u5185\u5b58trim","text":"<ul> <li>\u6709\u65f6\u5019\u6211\u4eecfree\u4e86\u5185\u5b58\uff0c\u4f46\u662f\u8fdb\u7a0b\u5360\u7528\u7684\u5185\u5b58\u5e76\u6ca1\u6709\u51cf\u5c11\uff0c\u8fd9\u662f\u56e0\u4e3a\u5f53\u6700\u9ad8\u5730\u5740\u7a7a\u95f4\u7684\u7a7a\u95f2\u5185\u5b58\u8d85\u8fc7128K\uff08\u53ef\u7531M_TRIM_THRESHOLD\u9009\u9879\u8c03\u8282\uff09\u65f6\uff0c\u6267\u884c\u5185\u5b58\u7d27\u7f29\u64cd\u4f5c\uff08malloc_trim\uff09</li> <li>\u5185\u5b58\u6cc4\u6f0f\u4e4bmalloc_trim</li> <li>malloc\u4e4b\u540e\u518d\u8fdb\u884cfree\uff0cfree\u7684\u5185\u5b58\u7a7a\u95f4\u4e00\u5b9a\u88abOS\u56de\u6536\u4e86\u5417\uff1f</li> </ul>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E7%AE%97%E6%B3%95/","title":"\u5185\u5b58\u7ba1\u7406\u7b97\u6cd5","text":"<pre><code>1. \u4f19\u4f34\u7b97\u6cd5\u4ee5\u9875\uff084k\uff09\u4e3a\u5355\u4f4d\u7ba1\u7406\u5185\u5b58\uff0c\u89e3\u51b3\u7684\u662f\u5916\u90e8\u5185\u5b58\u788e\u7247\u95ee\u9898\u3002\n2. slab\u7b97\u6cd5\u662f\u4e3a\u4e86\u89e3\u51b3\u5c0f\u5757\u5185\u5b58\u7533\u8bf7\u7684\u95ee\u9898\uff0c\u662f\u5bf9\u4f19\u4f34\u7b97\u6cd5\u7684\u4e00\u79cd\u8865\u5145\u3002\n</code></pre>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E7%AE%97%E6%B3%95/#1-buddy","title":"1 \u4f19\u4f34\uff08Buddy\uff09\u7b97\u6cd5","text":"<ul> <li>\u53c2\u8003</li> <li>\u6d45\u6790Buddy\u7b97\u6cd5</li> <li>\u89e3\u6790\uff1a\u5728Buddy\u7b97\u6cd5\u4e2d\uff0c\u4ee5\u9875\u4e3a\u5355\u4f4d\u7ba1\u7406\u5185\u5b58\uff0c\u628a\u5185\u5b58\u6309\u71672\u7684\u5e42\u6b21\u65b9\u5206\u7ec4\uff0c\u6bcf\u4e00\u7ec4\u5185\u5185\u5b58\u4ee5\u94fe\u8868\u65b9\u5f0f\u8fde\u63a5\uff0c\u6bcf\u4e00\u4e2a\u94fe\u8282\u70b9\u75312\u7684\u5e42\u6b21\u65b9\u4e2a\u8fde\u7eed\u9875\u7ec4\u6210\u3002\u6bd4\u5982\uff0c\u7b2c0\u7ec4\uff0c\u75311\u4e2a\u9875\u4f5c\u4e3a\u94fe\u8868\u8282\u70b9\uff1b\u7b2c1\u7ec4\uff0c\u75312\u4e2a\u9875\u4f5c\u4e3a\u94fe\u8868\u8282\u70b9\uff1b\u7b2c2\u7ec4\uff0c\u75314\u4e2a\u9875\u4f5c\u4e3a\u94fe\u8868\u8282\u70b9\uff1b\u7b2c10\u7ec4\uff0c\u75311024\u4e2a\u9875\u4f5c\u4e3a\u94fe\u8868\u8282\u70b9\u3002</li> <li>\u529f\u80fd\uff1a\u63d0\u9ad8\u5185\u5b58\u5229\u7528\u7387\u7684\u540c\u65f6\u51cf\u5c11\u5916\u90e8\u5185\u5b58\u788e\u7247</li> <li>\u4f19\u4f34\u5b9a\u4e49\uff1a</li> <li>\u4e24\u4e2a\u5757\u5177\u6709\u76f8\u540c\u5927\u5c0f</li> <li>\u7269\u7406\u5730\u5740\u662f\u8fde\u7eed\u7684\uff1b</li> <li>\u4f19\u4f34\u7b97\u6cd5\u539f\u7406\uff1a</li> <li>\u7533\u8bf7\u5185\u5b58\u8fc7\u7a0b\uff1a\u5f53\u8bf7\u6c42\u4e00\u4e2a\u4e00\u4e2a\u9875\uff084k\uff09\u5927\u5c0f\u7684\u5185\u5b58\u65f6\uff0c\u5148\u5411\u7ec40\u8bf7\u6c42\uff1b\u5982\u679c\u6ee1\u8db3\uff0c\u76f4\u63a5\u5206\u914d\uff1b\u5982\u679c\u7ec40\u65e0\u6cd5\u5206\u914d\uff0c\u5c31\u5411\u4e0a\u4e00\u5c42\u7ec41\u8bf7\u6c42\uff1b\u5982\u679c\u7ec41\u6ee1\u8db3\uff0c\u8fd4\u56de\u5206\u914d\u7684\u5185\u5b58\u7ed9\u8c03\u7528\u8005\uff0c\u4e14\u5c06\u5269\u4e0b\u7684\u4e00\u534a\u653e\u5165\u7ec40\u7684\u94fe\u8868\u4e2d\u3002</li> <li>\u91ca\u653e\u5185\u5b58\u8fc7\u7a0b\uff1a\u91ca\u653e\u65f6\u5148\u68c0\u67e5\u6240\u5728\u94fe\u8868\u4e2d\u8be5\u4f4d\u7f6e\u662f\u5426\u6709\u4ed6\u7684\u4f19\u4f34\uff1b\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u5219\u76f4\u63a5\u91ca\u653e\u76f4\u63a5\u5c06\u91ca\u653e\u7684\u5757\u63d2\u5165\u94fe\u8868\u5934\u3002\u5982\u679c\u4ed6\u6240\u5728\u94fe\u8868\u4e2d\u6709\u4f19\u4f34\u5b58\u5728\uff0c\u5219\u5c06\u5176\u4ece\u94fe\u8868\u6458\u4e0b\uff0c\u5408\u5e76\u6210\u4e00\u4e2a\u5927\u5757\uff0c\u7136\u540e\u7ee7\u7eed\u5411\u540e\u67e5\u627e\u5408\u5e76\u540e\u7684\u5757\u5728\u66f4\u5927\u4e00\u7ea7\u94fe\u8868\u4e2d\u662f\u5426\u6709\u4f19\u4f34\u7684\u5b58\u5728\uff0c\u76f4\u81f3\u4e0d\u80fd\u5408\u5e76\u6216\u8005\u5df2\u7ecf\u5408\u5e76\u81f3\u6700\u5927\u57572^10\u4e3a\u6b62</li> </ul>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E7%AE%97%E6%B3%95/#2-slab","title":"2 slab","text":""},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/CPU%20Cache/","title":"CPU Cache","text":""},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/CPU%20Cache/#1-l1l2l3","title":"1 L1\u3001L2\u3001L3 \u7f13\u5b58","text":"<pre><code>title: \u5bf9\u4e8e\u5404\u7ea7Cache\u7684\u8bbf\u95ee\u65f6\u95f4?\n\u5bf9\u4e8e\u5404\u7ea7Cache\u7684\u8bbf\u95ee\u65f6\u95f4\uff0c \u5728\u82f1\u7279\u5c14\u7684\u5904\u7406\u5668\u4e0a\u4e00\u76f4\u90fd\u4fdd\u6301\u7740\u975e\u5e38\u7a33\u5b9a\uff0c \u4e00\u7ea7Cache\u8bbf\u95ee\u662f4\u4e2a\u6307\u4ee4\u5468\u671f\uff0c \u4e8c\u7ea7Cache\u662f12\u4e2a\u6307\u4ee4\u5468\u671f\uff0c \u4e09\u7ea7Cache\u5219\u662f26~31\u4e2a\u6307\u4ee4\u5468\u671f\u3002 \u8fd9\u91cc\u6240\u8c13\u7684\u7a33\u5b9a\uff0c \u662f\u6307\u5728\u4e0d\u540c\u9891\u7387\u3001 \u4e0d\u540c\u578b\u53f7\u7684\u82f1\u7279\u5c14\u5904\u7406\u5668\u4e0a\uff0c \u5904\u7406\u5668\u8bbf\u95ee\u8fd9\u4e09\u7ea7Cache\u6240\u82b1\u8d39\u7684\u6307\u4ee4\u5468\u671f\u6570\u662f\u76f8\u540c\u7684\u3002\n</code></pre> <ul> <li>CPU\u7f13\u5b58(CPU Cache)\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u63d0\u9ad8\u8bbf\u95ee\u5185\u5b58(RAM)\u7684\u6548\u7387\uff0c\u8fd9\u867d\u7136\u5df2\u7ecf\u6d89\u53ca\u5230\u786c\u4ef6\u7684\u9886\u57df\uff0c\u4f46\u5b83\u4ecd\u7136\u4e0e\u6211\u4eec\u606f\u606f\u76f8\u5173\uff0c\u4e86\u89e3\u4e86\u5b83\u7684\u4e00\u4e9b\u539f\u7406\uff0c\u80fd\u8ba9\u6211\u4eec\u5199\u51fa\u66f4\u9ad8\u6548\u7684\u7a0b\u5e8f\uff0c\u53e6\u5916\u5728\u591a\u7ebf\u7a0b\u7a0b\u5e8f\u4e2d\uff0c\u4e00\u4e9b\u4e0d\u53ef\u601d\u8bae\u7684\u95ee\u9898\u4e5f\u4e0e\u7f13\u5b58\u6709\u5173\u3002</li> <li>\u73b0\u4ee3\u591a\u6838\u5904\u7406\u5668\uff0c\u4e00\u4e2aCPU\u7531\u591a\u4e2a\u6838\u7ec4\u6210\uff0c\u6bcf\u4e2a\u6838\u53c8\u53ef\u4ee5\u6709\u591a\u4e2a\u786c\u4ef6\u7ebf\u7a0b\uff0c\u6bd4\u5982\u6211\u4eec\u8bf44\u68388\u7ebf\u7a0b\uff0c\u5c31\u662f\u6307\u67094\u4e2a\u6838\uff0c\u6bcf\u4e2a\u68382\u4e2a\u7ebf\u7a0b\uff0c\u8fd9\u5728OS\u770b\u6765\u5c31\u50cf8\u4e2a\u5e76\u884c\u5904\u7406\u5668\u4e00\u6837\u3002</li> <li>CPU\u7f13\u5b58\u6709\u591a\u7ea7\u7f13\u5b58\uff0c\u6bd4\u5982L1, L2, L3\u7b49\uff1a<ul> <li>L1\u5bb9\u91cf\u6700\u5c0f\uff0c\u901f\u5ea6\u6700\u5feb\uff0c\u6bcf\u4e2a\u6838\u90fd\u6709L1\u7f13\u5b58\uff0cL1\u53c8\u4e13\u95e8\u9488\u5bf9\u6307\u4ee4\u548c\u6570\u636e\u5206\u6210L1d(\u6570\u636e\u7f13\u5b58),L1i(\u6307\u4ee4\u7f13\u5b58)\u3002\u4e00\u822c\u5904\u7406\u5668\u53ea\u9700\u89813~5\u4e2a\u6307\u4ee4\u5468\u671f\u5c31\u80fd\u8bbf\u95ee\u5230\u6570\u636e\u3002</li> <li>L2\u5bb9\u91cf\u6bd4L1\u5927\uff0c\u901f\u5ea6\u6bd4L1\u6162\uff0c\u6bcf\u4e2a\u6838\u90fd\u6709L2\u7f13\u5b58\u3002\u5904\u7406\u5668\u5927\u7ea6\u9700\u8981\u5341\u51e0\u4e2a\u5904\u7406\u5668\u5468\u671f\u624d\u80fd\u8bbf\u95ee\u5230\u6570\u636e\u3002</li> <li>L3\u5bb9\u91cf\u6700\u5927\uff0c\u901f\u5ea6\u6700\u6162\uff0c\u591a\u4e2a\u6838\u5171\u4eab\u4e00\u4e2aL3\u7f13\u5b58\u3002\u5904\u7406\u5668\u9700\u8981\u51e0\u5341\u4e2a\u5904\u7406\u5668\u5468\u671f\u624d\u80fd\u8bbf\u95ee\u5230\u6570\u636e\u3002\u5728\u591a\u6838\u5904\u7406\u5668\u5185\u90e8\uff0c \u4e09\u7ea7Cache\u7531\u6240\u6709\u7684\u6838\u5fc3\u6240\u5171\u6709\u3002 \u8fd9\u6837\u7684\u5171\u4eab\u65b9\u5f0f\uff0c \u5176\u5b9e\u4e5f\u5e26\u6765\u4e00\u4e2a\u95ee\u9898\uff0c \u6709\u7684\u5904\u7406\u5668\u53ef\u80fd\u4f1a\u6781\u5927\u5730\u5360\u7528\u4e09\u7ea7Cache\uff0c \u5bfc\u81f4\u5176\u4ed6\u5904\u7406\u5668\u53ea\u80fd\u5360\u7528\u6781\u5c0f\u7684\u5bb9\u91cf\uff0c \u4ece\u800c\u5bfc\u81f4Cache\u4e0d\u547d\u4e2d\uff0c \u6027\u80fd\u4e0b\u964d\u3002 \u56e0\u6b64\uff0c \u82f1\u7279\u5c14\u516c\u53f8\u63a8\u51fa\u4e86Intel \u00ae CAT\u6280\u672f\uff0c \u786e\u4fdd\u6709\u4e00\u4e2a\u516c\u5e73\uff0c \u6216\u8005\u8bf4\u8f6f\u4ef6\u53ef\u914d\u7f6e\u7684\u7b97\u6cd5\u6765\u63a7\u5236\u6bcf\u4e2a\u6838\u5fc3\u53ef\u4ee5\u7528\u5230\u7684Cache\u5927\u5c0f\u3002</li> </ul> </li> <li>\u6709\u4e9bCPU\u53ef\u80fd\u8fd8\u6709L4\u7f13\u5b58\uff0c\u4e0d\u8fc7\u4e0d\u5e38\u89c1\uff1b\u6b64\u5916\u8fd8\u6709\u5176\u4ed6\u7c7b\u578b\u7684\u7f13\u5b58\uff0c\u6bd4\u5982TLB(translation lookaside buffer)\uff0c\u7528\u4e8e\u7269\u7406\u5730\u5740\u548c\u865a\u62df\u5730\u5740\u8f6c\u8bd1\uff0c\u8fd9\u4e0d\u662f\u6211\u4eec\u5173\u5fc3\u7684\u7f13\u5b58\u3002</li> <li>\u4e0b\u56fe\u5c55\u793a\u4e86\u7f13\u5b58\u548cCPU\u7684\u5173\u7cfb\uff1a </li> </ul>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/CPU%20Cache/#2","title":"2 \u7f13\u5b58\u884c","text":"<ul> <li>\u7f13\u5b58\u884c (Cache Line) \u662f CPU Cache \u4e2d\u7684\u6700\u5c0f\u5355\u4f4d\uff0cCPU Cache \u7531\u82e5\u5e72\u7f13\u5b58\u884c\u7ec4\u6210\uff0c\u4e00\u4e2a\u7f13\u5b58\u884c\u7684\u5927\u5c0f\u901a\u5e38\u662f 64 \u5b57\u8282\uff08\u8fd9\u53d6\u51b3\u4e8e CPU\uff09\uff0c\u5e76\u4e14\u5b83\u6709\u6548\u5730\u5f15\u7528\u4e3b\u5185\u5b58\u4e2d\u7684\u4e00\u5757\u5730\u5740\u3002</li> <li>CPU\u4ece\u4e3b\u5b58\u4e2d\u52a0\u8f7d\u6570\u636e\u65f6\uff0c\u662f\u4ee5\u4e00\u4e2a\u7f13\u5b58\u884c\uff0864B\uff09\u4f5c\u4e3a\u5355\u4f4d\u7684\uff0c\u8fd9\u610f\u5473\u7740\u5373\u4f7f\u53ea\u52a0\u8f7d1B\u6570\u636e\uff0c\u4e5f\u4f1a\u5c06\u5185\u5b58\u5730\u5740\u4e2d\u5176\u540e\u8fde\u7eed63B\u6570\u636e\u52a0\u8f7d\u5230\u7f13\u5b58\u4e2d\u3002</li> </ul>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/CPU%20Cache/#21","title":"2.1 \u4f2a\u5171\u4eab\u95ee\u9898","text":"<ul> <li>\u5f15\u5165\u7f13\u5b58\u884c\uff0c\u6709\u5176\u4f18\u70b9\u4e5f\u6709\u5176\u7f3a\u70b9\uff0c\u7f3a\u70b9\u4e4b\u4e00\u5c31\u662f\u4f2a\u5171\u4eab\u95ee\u9898\u3002</li> </ul> <pre><code>title: \u4ec0\u4e48\u662f\u4f2a\u5171\u4eab\uff1f\n\u5f53\u4e0d\u540c\u7ebf\u7a0b\u64cd\u4f5c\u4e0d\u540c\u53d8\u91cf\uff08A\u7ebf\u7a0b\u4fee\u6539a\u53d8\u91cf\uff0cB\u7ebf\u7a0b\u4fee\u6539b\u53d8\u91cf\uff09\uff0c\u4e14\u6b64\u53d8\u91cf\u5728\u5185\u5b58\u5730\u5740\u4e0a\u5f88\u8fd1\uff08\u53ef\u4ee5\u5b58\u653e\u5728\u540c\u4e00\u4e2a\u7f13\u5b58\u884c\u5185\uff09\u65f6\uff0c\u5373\u4f7fA\u7ebf\u7a0b\u4fee\u6539\u4e86\u53d8\u91cfa\uff0c\u800c\u4e0d\u4fee\u6539\u53d8\u91cfb\uff0c\u7ebf\u7a0bB\u7684\u7f13\u5b58\u884c\u4e5f\u53d8\u810f\uff0c\u5bfc\u81f4B\u7ebf\u7a0b\u9700\u8981\u91cd\u65b0\u8bfb\u53d6b\u6570\u636e\u5230\u7f13\u5b58\u884c\u4e2d\u3002\n</code></pre> <pre><code>title: \u600e\u4e48\u907f\u514d\u4f2a\u5171\u4eab\u95ee\u9898\uff1f\n\u4ee5\u4e0a\u4f8b\u6765\u8bf4\u660e\u3002\u53ef\u4ee5\u5c06\u53d8\u91cfa\u3001b\u5730\u5740\u8ddd\u79bb\u63a7\u5236\u5728\u5927\u4e8e\u4e00\u4e2a\u7f13\u5b58\u884c\u5927\u5c0f\uff0864B\uff09\u3002\u901a\u5e38\u53ef\u4ee5\u624d\u6709\u586b\u5145\u8865\u4f4d\u5b57\u8282\uff0c\u6216\u8005\u5b57\u8282\u5bf9\u9f50\u65b9\u6cd5\u3002\n</code></pre>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/CPU%20Cache/#3-cpu","title":"3 \u67e5\u770bcpu\u4fe1\u606f","text":"<pre><code>$ getconf -a | grep CACHE\nLEVEL1_ICACHE_SIZE                 32768\nLEVEL1_ICACHE_ASSOC                8\nLEVEL1_ICACHE_LINESIZE             64\nLEVEL1_DCACHE_SIZE                 32768\nLEVEL1_DCACHE_ASSOC                8\nLEVEL1_DCACHE_LINESIZE             64\nLEVEL2_CACHE_SIZE                  262144\nLEVEL2_CACHE_ASSOC                 8\nLEVEL2_CACHE_LINESIZE              64\nLEVEL3_CACHE_SIZE                  31457280\nLEVEL3_CACHE_ASSOC                 20\nLEVEL3_CACHE_LINESIZE              64\nLEVEL4_CACHE_SIZE                  0\nLEVEL4_CACHE_ASSOC                 0\nLEVEL4_CACHE_LINESIZE              0\n</code></pre>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/CPU%20Cache/#4","title":"4 \u53c2\u8003\u8d44\u6599","text":"<ul> <li>CPU\u7f13\u5b58</li> <li>\u5e26\u4f60\u4e86\u89e3\u57fa\u4e8eLinux\u5904\u7406\u5668\u7f13\u5b58</li> <li>\u67e5\u770bL1/L2/L3 cache\u5927\u5c0f</li> </ul>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/CPU%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98/","title":"1 CPU\u9ad8\u901f\u7f13\u5b58","text":""},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/CPU%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98/#11-l1l2l3","title":"1.1 L1\u3001L2\u3001L3 \u7f13\u5b58","text":"<pre><code>title: \u5bf9\u4e8e\u5404\u7ea7Cache\u7684\u8bbf\u95ee\u65f6\u95f4?\n\u5bf9\u4e8e\u5404\u7ea7Cache\u7684\u8bbf\u95ee\u65f6\u95f4\uff0c \u5728\u82f1\u7279\u5c14\u7684\u5904\u7406\u5668\u4e0a\u4e00\u76f4\u90fd\u4fdd\u6301\u7740\u975e\u5e38\u7a33\u5b9a\uff0c \u4e00\u7ea7Cache\u8bbf\u95ee\u662f4\u4e2a\u6307\u4ee4\u5468\u671f\uff0c \u4e8c\u7ea7Cache\u662f12\u4e2a\u6307\u4ee4\u5468\u671f\uff0c \u4e09\u7ea7Cache\u5219\u662f26~31\u4e2a\u6307\u4ee4\u5468\u671f\u3002 \u8fd9\u91cc\u6240\u8c13\u7684\u7a33\u5b9a\uff0c \u662f\u6307\u5728\u4e0d\u540c\u9891\u7387\u3001 \u4e0d\u540c\u578b\u53f7\u7684\u82f1\u7279\u5c14\u5904\u7406\u5668\u4e0a\uff0c \u5904\u7406\u5668\u8bbf\u95ee\u8fd9\u4e09\u7ea7Cache\u6240\u82b1\u8d39\u7684\u6307\u4ee4\u5468\u671f\u6570\u662f\u76f8\u540c\u7684\u3002\n</code></pre> <ul> <li>CPU\u7f13\u5b58(CPU Cache)\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u63d0\u9ad8\u8bbf\u95ee\u5185\u5b58(RAM)\u7684\u6548\u7387\uff0c\u8fd9\u867d\u7136\u5df2\u7ecf\u6d89\u53ca\u5230\u786c\u4ef6\u7684\u9886\u57df\uff0c\u4f46\u5b83\u4ecd\u7136\u4e0e\u6211\u4eec\u606f\u606f\u76f8\u5173\uff0c\u4e86\u89e3\u4e86\u5b83\u7684\u4e00\u4e9b\u539f\u7406\uff0c\u80fd\u8ba9\u6211\u4eec\u5199\u51fa\u66f4\u9ad8\u6548\u7684\u7a0b\u5e8f\uff0c\u53e6\u5916\u5728\u591a\u7ebf\u7a0b\u7a0b\u5e8f\u4e2d\uff0c\u4e00\u4e9b\u4e0d\u53ef\u601d\u8bae\u7684\u95ee\u9898\u4e5f\u4e0e\u7f13\u5b58\u6709\u5173\u3002</li> <li>\u73b0\u4ee3\u591a\u6838\u5904\u7406\u5668\uff0c\u4e00\u4e2aCPU\u7531\u591a\u4e2a\u6838\u7ec4\u6210\uff0c\u6bcf\u4e2a\u6838\u53c8\u53ef\u4ee5\u6709\u591a\u4e2a\u786c\u4ef6\u7ebf\u7a0b\uff0c\u6bd4\u5982\u6211\u4eec\u8bf44\u68388\u7ebf\u7a0b\uff0c\u5c31\u662f\u6307\u67094\u4e2a\u6838\uff0c\u6bcf\u4e2a\u68382\u4e2a\u7ebf\u7a0b\uff0c\u8fd9\u5728OS\u770b\u6765\u5c31\u50cf8\u4e2a\u5e76\u884c\u5904\u7406\u5668\u4e00\u6837\u3002</li> <li>CPU\u7f13\u5b58\u6709\u591a\u7ea7\u7f13\u5b58\uff0c\u6bd4\u5982L1, L2, L3\u7b49\uff1a<ul> <li>L1\u5bb9\u91cf\u6700\u5c0f\uff0c\u901f\u5ea6\u6700\u5feb\uff0c\u6bcf\u4e2a\u6838\u90fd\u6709L1\u7f13\u5b58\uff0cL1\u53c8\u4e13\u95e8\u9488\u5bf9\u6307\u4ee4\u548c\u6570\u636e\u5206\u6210L1d(\u6570\u636e\u7f13\u5b58),L1i(\u6307\u4ee4\u7f13\u5b58)\u3002\u4e00\u822c\u5904\u7406\u5668\u53ea\u9700\u89813~5\u4e2a\u6307\u4ee4\u5468\u671f\u5c31\u80fd\u8bbf\u95ee\u5230\u6570\u636e\u3002</li> <li>L2\u5bb9\u91cf\u6bd4L1\u5927\uff0c\u901f\u5ea6\u6bd4L1\u6162\uff0c\u6bcf\u4e2a\u6838\u90fd\u6709L2\u7f13\u5b58\u3002\u5904\u7406\u5668\u5927\u7ea6\u9700\u8981\u5341\u51e0\u4e2a\u5904\u7406\u5668\u5468\u671f\u624d\u80fd\u8bbf\u95ee\u5230\u6570\u636e\u3002</li> <li>L3\u5bb9\u91cf\u6700\u5927\uff0c\u901f\u5ea6\u6700\u6162\uff0c\u591a\u4e2a\u6838\u5171\u4eab\u4e00\u4e2aL3\u7f13\u5b58\u3002\u5904\u7406\u5668\u9700\u8981\u51e0\u5341\u4e2a\u5904\u7406\u5668\u5468\u671f\u624d\u80fd\u8bbf\u95ee\u5230\u6570\u636e\u3002\u5728\u591a\u6838\u5904\u7406\u5668\u5185\u90e8\uff0c \u4e09\u7ea7Cache\u7531\u6240\u6709\u7684\u6838\u5fc3\u6240\u5171\u6709\u3002 \u8fd9\u6837\u7684\u5171\u4eab\u65b9\u5f0f\uff0c \u5176\u5b9e\u4e5f\u5e26\u6765\u4e00\u4e2a\u95ee\u9898\uff0c \u6709\u7684\u5904\u7406\u5668\u53ef\u80fd\u4f1a\u6781\u5927\u5730\u5360\u7528\u4e09\u7ea7Cache\uff0c \u5bfc\u81f4\u5176\u4ed6\u5904\u7406\u5668\u53ea\u80fd\u5360\u7528\u6781\u5c0f\u7684\u5bb9\u91cf\uff0c \u4ece\u800c\u5bfc\u81f4Cache\u4e0d\u547d\u4e2d\uff0c \u6027\u80fd\u4e0b\u964d\u3002 \u56e0\u6b64\uff0c \u82f1\u7279\u5c14\u516c\u53f8\u63a8\u51fa\u4e86Intel \u00ae CAT\u6280\u672f\uff0c \u786e\u4fdd\u6709\u4e00\u4e2a\u516c\u5e73\uff0c \u6216\u8005\u8bf4\u8f6f\u4ef6\u53ef\u914d\u7f6e\u7684\u7b97\u6cd5\u6765\u63a7\u5236\u6bcf\u4e2a\u6838\u5fc3\u53ef\u4ee5\u7528\u5230\u7684Cache\u5927\u5c0f\u3002</li> </ul> </li> <li>\u6709\u4e9bCPU\u53ef\u80fd\u8fd8\u6709L4\u7f13\u5b58\uff0c\u4e0d\u8fc7\u4e0d\u5e38\u89c1\uff1b\u6b64\u5916\u8fd8\u6709\u5176\u4ed6\u7c7b\u578b\u7684\u7f13\u5b58\uff0c\u6bd4\u5982TLB(translation lookaside buffer)\uff0c\u7528\u4e8e\u7269\u7406\u5730\u5740\u548c\u865a\u62df\u5730\u5740\u8f6c\u8bd1\uff0c\u8fd9\u4e0d\u662f\u6211\u4eec\u5173\u5fc3\u7684\u7f13\u5b58\u3002</li> <li>\u4e0b\u56fe\u5c55\u793a\u4e86\u7f13\u5b58\u548cCPU\u7684\u5173\u7cfb\uff1a </li> </ul>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/CPU%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98/#12","title":"1.2 \u7f13\u5b58\u884c","text":"<ul> <li>\u7f13\u5b58\u884c (Cache Line) \u662f CPU Cache \u4e2d\u7684\u6700\u5c0f\u5355\u4f4d\uff0cCPU Cache \u7531\u82e5\u5e72\u7f13\u5b58\u884c\u7ec4\u6210\uff0c\u4e00\u4e2a\u7f13\u5b58\u884c\u7684\u5927\u5c0f\u901a\u5e38\u662f 64 \u5b57\u8282\uff08\u8fd9\u53d6\u51b3\u4e8e CPU\uff09\uff0c\u5e76\u4e14\u5b83\u6709\u6548\u5730\u5f15\u7528\u4e3b\u5185\u5b58\u4e2d\u7684\u4e00\u5757\u5730\u5740\u3002</li> <li>CPU\u4ece\u4e3b\u5b58\u4e2d\u52a0\u8f7d\u6570\u636e\u65f6\uff0c\u662f\u4ee5\u4e00\u4e2a\u7f13\u5b58\u884c\uff0864B\uff09\u4f5c\u4e3a\u5355\u4f4d\u7684\uff0c\u8fd9\u610f\u5473\u7740\u5373\u4f7f\u53ea\u52a0\u8f7d1B\u6570\u636e\uff0c\u4e5f\u4f1a\u5c06\u5185\u5b58\u5730\u5740\u4e2d\u5176\u540e\u8fde\u7eed63B\u6570\u636e\u52a0\u8f7d\u5230\u7f13\u5b58\u4e2d\u3002</li> </ul>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/CPU%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98/#121","title":"1.2.1 \u4f2a\u5171\u4eab\u95ee\u9898","text":"<ul> <li>\u5f15\u5165\u7f13\u5b58\u884c\uff0c\u6709\u5176\u4f18\u70b9\u4e5f\u6709\u5176\u7f3a\u70b9\uff0c\u7f3a\u70b9\u4e4b\u4e00\u5c31\u662f\u4f2a\u5171\u4eab\u95ee\u9898\u3002</li> </ul> <pre><code>title: \u4ec0\u4e48\u662f\u4f2a\u5171\u4eab\uff1f\n\u5f53\u4e0d\u540c\u7ebf\u7a0b\u64cd\u4f5c\u4e0d\u540c\u53d8\u91cf\uff08A\u7ebf\u7a0b\u4fee\u6539a\u53d8\u91cf\uff0cB\u7ebf\u7a0b\u4fee\u6539b\u53d8\u91cf\uff09\uff0c\u4e14\u6b64\u53d8\u91cf\u5728\u5185\u5b58\u5730\u5740\u4e0a\u5f88\u8fd1\uff08\u53ef\u4ee5\u5b58\u653e\u5728\u540c\u4e00\u4e2a\u7f13\u5b58\u884c\u5185\uff09\u65f6\uff0c\u5373\u4f7fA\u7ebf\u7a0b\u4fee\u6539\u4e86\u53d8\u91cfa\uff0c\u800c\u4e0d\u4fee\u6539\u53d8\u91cfb\uff0c\u7ebf\u7a0bB\u7684\u7f13\u5b58\u884c\u4e5f\u53d8\u810f\uff0c\u5bfc\u81f4B\u7ebf\u7a0b\u9700\u8981\u91cd\u65b0\u8bfb\u53d6b\u6570\u636e\u5230\u7f13\u5b58\u884c\u4e2d\u3002\n</code></pre> <pre><code>title: \u600e\u4e48\u907f\u514d\u4f2a\u5171\u4eab\u95ee\u9898\uff1f\n\u4ee5\u4e0a\u4f8b\u6765\u8bf4\u660e\u3002\u53ef\u4ee5\u5c06\u53d8\u91cfa\u3001b\u5730\u5740\u8ddd\u79bb\u63a7\u5236\u5728\u5927\u4e8e\u4e00\u4e2a\u7f13\u5b58\u884c\u5927\u5c0f\uff0864B\uff09\u3002\u901a\u5e38\u53ef\u4ee5\u624d\u6709\u586b\u5145\u8865\u4f4d\u5b57\u8282\uff0c\u6216\u8005\u5b57\u8282\u5bf9\u9f50\u65b9\u6cd5\u3002\n</code></pre>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/CPU%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98/#13-cpu","title":"1.3 \u67e5\u770bcpu\u4fe1\u606f","text":"<pre><code>$ getconf -a | grep CACHE\nLEVEL1_ICACHE_SIZE                 32768\nLEVEL1_ICACHE_ASSOC                8\nLEVEL1_ICACHE_LINESIZE             64\nLEVEL1_DCACHE_SIZE                 32768\nLEVEL1_DCACHE_ASSOC                8\nLEVEL1_DCACHE_LINESIZE             64\nLEVEL2_CACHE_SIZE                  262144\nLEVEL2_CACHE_ASSOC                 8\nLEVEL2_CACHE_LINESIZE              64\nLEVEL3_CACHE_SIZE                  31457280\nLEVEL3_CACHE_ASSOC                 20\nLEVEL3_CACHE_LINESIZE              64\nLEVEL4_CACHE_SIZE                  0\nLEVEL4_CACHE_ASSOC                 0\nLEVEL4_CACHE_LINESIZE              0\n</code></pre>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/CPU%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98/#2","title":"2 \u53c2\u8003\u8d44\u6599","text":"<ul> <li>CPU\u7f13\u5b58</li> <li>\u5e26\u4f60\u4e86\u89e3\u57fa\u4e8eLinux\u5904\u7406\u5668\u7f13\u5b58</li> <li>\u67e5\u770bL1/L2/L3 cache\u5927\u5c0f</li> </ul>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/Cache/","title":"1 Cache","text":"<p>\u7f13\u5b58\u662f\u4e00\u79cd\u6bd4\u5185\u5b58\u66f4\u5feb\u7684\u5b58\u50a8\u8bbe\u5907\uff0c\u5b83\u7684\u51fa\u73b0\u5c31\u662f\u4e3a\u4e86\u89e3\u51b3\u8bfb\u5199\u5185\u5b58\u6570\u636e\u8017\u65f6\u957f\u7684\u95ee\u9898\uff08\u5904\u7406\u5668\u8981\u4ece\u5185\u5b58\u4e2d\u76f4\u63a5\u8bfb\u53d6\u6570\u636e\u90fd\u8981\u82b1\u5927\u6982\u51e0\u767e\u4e2a\u65f6\u949f\u5468\u671f\uff09\u3002\u4f46\u7f13\u5b58\u9020\u5047\u6602\u8d35\uff0c\u56e0\u6b64\u7f13\u5b58\u7684\u5bb9\u91cf\u4e00\u822c\u5f88\u5c0f\uff0c\u51e0\u5341 KB~\u51e0\u5341 MB \u4e4b\u95f4\u3002</p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/Cache/#11-cache","title":"1.1 Cache \u7684\u5199\u7b56\u7565","text":"<pre><code>WC\uff08write-combining\uff09 \u548cUC\uff08uncacheable\uff09 \u3002 \u8fd9\u4e24\u79cd\u7b56\u7565\u90fd\u662f\u9488\u5bf9\u7279\u6b8a\u7684\u5730\u5740\u7a7a\u95f4\u6765\u4f7f\u7528\u7684\u3002\n</code></pre> <ul> <li>\u76f4\u5199\uff08write-through\uff09\uff1a\u5c31\u662f\u6307\u5728\u5904\u7406\u5668\u5bf9 Cache \u5199\u5165\u7684\u540c\u65f6\uff0c\u5c06\u6570\u636e\u5199\u5165\u5230\u5185\u5b58\u4e2d\u3002</li> <li>\u56de\u5199\uff08write-back\uff09\uff1a\u5f53\u5904\u7406\u5668\u5728\u6539\u5199\u4e86\u67d0\u4e2a Cache line \u540e\uff0c\u5e76\u4e0d\u662f\u9a6c\u4e0a\u628a\u5176\u5199\u56de\u5185\u5b58\u3002</li> <li>WC\uff08write-combining\uff09\uff1a\u8fd9\u79cd\u7b56\u7565\u5c31\u662f\u5f53\u4e00\u4e2aCache line \u91cc\u7684\u6570\u636e\u4e00\u4e2a\u5b57\u4e00\u4e2a\u5b57\u5730\u90fd\u88ab\u6539\u5199\u5b8c\u4e86\u4e4b\u540e\uff0c \u624d\u5c06\u8be5Cache line\u5199\u56de\u5230\u5185\u5b58\u4e2d\u3002</li> <li>UC\uff08uncacheable\uff09\uff1a\u662f\u4e00\u90e8\u5206\u7279\u6b8a\u7684\u5185\u5b58\uff0c\u8fd9\u79cd\u5185\u5b58\u662f\u4e0d\u80fd\u7f13\u5b58\u5728Cache\u4e2d\u7684\u3002</li> </ul>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/Cache/#111-write-through","title":"1.1.1 \u76f4\u5199\uff08write-through\uff09","text":"<p>\u8fd9\u79cd\u7b56\u7565\u4fdd\u8bc1\u4e86\u5728\u4efb\u4f55\u65f6\u523b\uff0c\u5185\u5b58\u7684\u6570\u636e\u548c Cache \u4e2d\u7684\u6570\u636e\u90fd\u662f\u540c\u6b65\u7684\uff0c\u8fd9\u79cd\u65b9\u5f0f\u7b80\u5355\u3001 \u53ef\u9760\u3002 \u4f46\u7531\u4e8e\u5904\u7406\u5668\u6bcf\u6b21\u5bf9Cache\u66f4\u65b0\u65f6\u90fd\u8981\u5bf9\u5185\u5b58\u8fdb\u884c\u5199\u64cd\u4f5c\uff0c \u56e0\u6b64\u603b\u7ebf\u5de5\u4f5c\u7e41\u5fd9\uff0c \u5185\u5b58\u7684\u5e26\u5bbd\u88ab\u5927\u5927\u5360\u7528\uff0c \u56e0\u6b64\u8fd0\u884c\u901f\u5ea6\u4f1a\u53d7\u5230\u5f71\u54cd\u3002 \u5047\u8bbe\u4e00\u6bb5\u7a0b\u5e8f\u5728\u9891\u7e41\u5730\u4fee\u6539\u4e00\u4e2a\u5c40\u90e8\u53d8\u91cf\uff0c \u5c3d\u7ba1\u8fd9\u4e2a\u5c40\u90e8\u53d8\u91cf\u7684\u751f\u547d\u5468\u671f\u5f88\u77ed\uff0c \u800c\u4e14\u5176\u4ed6\u8fdb\u7a0b/\u7ebf\u7a0b\u4e5f\u7528\u4e0d\u5230\u5b83\uff0c CPU\u4f9d\u7136\u4f1a\u9891\u7e41\u5730\u5728Cache\u548c\u5185\u5b58\u4e4b\u95f4\u4ea4\u6362\u6570\u636e\uff0c \u9020\u6210\u4e0d\u5fc5\u8981\u7684\u5e26\u5bbd\u635f\u5931\u3002  </p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/Cache/#112-write-back","title":"1.1.2 \u56de\u5199\uff08write-back\uff09","text":"<p>\u56de\u5199\u76f8\u5bf9\u4e8e\u76f4\u5199\u800c\u8a00\u662f\u4e00\u79cd\u9ad8\u6548\u7684\u65b9\u6cd5\u3002\u76f4\u5199\u4e0d\u4ec5\u6d6a\u8d39\u65f6\u95f4\uff0c\u800c\u4e14\u6709\u65f6\u662f\u4e0d\u5fc5\u8981\u7684\uff0c\u6bd4\u5982\u4e0a\u6587\u63d0\u5230\u7684\u5c40\u90e8\u53d8\u91cf\u7684\u4f8b\u5b50\u3002\u56de\u5199\u7cfb\u7edf\u901a\u8fc7\u5c06 Cache line \u7684\u6807\u5fd7\u4f4d\u5b57\u6bb5\u6dfb\u52a0\u4e00\u4e2a Dirty \u6807\u5fd7\u4f4d\uff0c\u5f53\u5904\u7406\u5668\u5728\u6539\u5199\u4e86\u67d0\u4e2a Cache line \u540e\uff0c\u5e76\u4e0d\u662f\u9a6c\u4e0a\u628a\u5176\u5199\u56de\u5185\u5b58\uff0c\u800c\u662f\u5c06\u8be5 Cache line \u7684 Dirty \u6807\u5fd7\u8bbe\u7f6e\u4e3a 1\u3002\u5f53\u5904\u7406\u5668\u518d\u6b21\u4fee\u6539\u8be5 Cache line \u5e76\u4e14\u5199\u56de\u5230 Cache \u4e2d\uff0c\u67e5\u8868\u53d1\u73b0\u8be5 Dirty \u4f4d\u5df2\u7ecf\u4e3a 1\uff0c\u5219\u5148\u5c06 Cache line \u5185\u5bb9\u5199\u56de\u5230\u5185\u5b58\u4e2d\u76f8\u5e94\u7684\u4f4d\u7f6e\uff0c\u518d\u5c06\u65b0\u6570\u636e\u5199\u5230 Cache \u4e2d\u3002\u5176\u5b9e\uff0c\u56de\u5199\u7b56\u7565\u5728\u591a\u6838\u7cfb\u7edf\u4e2d\u4f1a\u5f15\u8d77Cache \u4e00\u81f4\u6027\u7684\u95ee\u9898\u3002\u8bbe\u60f3\u6709\u4e24\u4e2a\u5904\u7406\u5668\u6838\u5fc3\u90fd\u9700\u8981\u5bf9\u67d0\u4e2a\u5185\u5b58\u5757\u8fdb\u884c\u8bfb\u5199\uff0c\u5176\u4e2d\u4e00\u4e2a\u6838\u5fc3\u5df2\u7ecf\u4fee\u6539\u4e86\u8be5\u6570\u636e\u5757\uff0c\u5e76\u4e14\u5199\u56de\u5230 Cache \u4e2d\uff0c\u8bbe\u7f6e\u4e86 Dirty \u4f4d\uff1b\u8fd9\u65f6\u53e6\u5916\u4e00\u4e2a\u6838\u5fc3\u4e5f\u5b8c\u6210\u4e86\u8be5\u5185\u5b58\u5757\u7684\u4fee\u6539\uff0c\u5e76\u4e14\u51c6\u5907\u5199\u5165\u5230 Cache \u4e2d\uff0c\u8fd9\u65f6\u624d\u53d1\u73b0\u8be5 Cache line \u662f\u201c\u810f\u201d\u7684\u3002</p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/Cache/#113-wcwrite-combining","title":"1.1.3 WC\uff08write-combining\uff09","text":"<p>write-combining\u7b56\u7565\u662f\u9488\u5bf9\u4e8e\u5177\u4f53\u8bbe\u5907\u5185\u5b58\uff08\u5982\u663e\u5361\u7684RAM\uff09 \u7684\u4e00\u79cd\u4f18\u5316\u5904\u7406\u7b56\u7565\u3002 \u5bf9\u4e8e\u8fd9\u4e9b\u8bbe\u5907\u6765\u8bf4\uff0c \u6570\u636e\u4eceCache\u5230\u5185\u5b58\u8f6c\u79fb\u7684\u5f00\u9500\u6bd4\u76f4\u63a5\u8bbf\u95ee\u76f8\u5e94\u7684\u5185\u5b58\u7684\u5f00\u9500\u8fd8\u8981\u9ad8\u5f97\u591a\uff0c \u6240\u4ee5\u5e94\u8be5\u5c3d\u91cf\u907f\u514d\u8fc7\u591a\u7684\u6570\u636e\u8f6c\u79fb\u3002 \u8bd5\u60f3\uff0c \u5982\u679c\u4e00\u4e2aCache line\u91cc\u7684\u5b57\u88ab\u6539\u5199\u4e86\uff0c \u5904\u7406\u5668\u5c06\u5176\u5199\u56de\u5185\u5b58\uff0c \u7d27\u63a5\u7740\u53c8\u4e00\u4e2a\u5b57\u88ab\u6539\u5199\u4e86\uff0c \u5904\u7406\u5668\u53c8\u5c06\u8be5Cache line\u5199\u56de\u5185\u5b58\uff0c \u8fd9\u6837\u5c31\u663e\u5f97\u4f4e\u6548\uff0c \u7b26\u5408\u8fd9\u79cd\u60c5\u51b5\u7684\u4e00\u4e2a\u4f8b\u5b50\u5c31\u662f\u663e\u793a\u5c4f\u4e0a\u6c34\u5e73\u76f8\u8fde\u7684\u50cf\u7d20\u70b9\u6570\u636e\u3002 writecombinin\u7b56\u7565\u7684\u5f15\u5165\u5c31\u662f\u4e3a\u4e86\u89e3\u51b3\u8fd9\u79cd\u95ee\u9898\uff0c \u987e\u540d\u601d\u4e49\uff0c \u8fd9\u79cd\u7b56\u7565\u5c31\u662f\u5f53\u4e00\u4e2aCache line\u91cc\u7684\u6570\u636e\u4e00\u4e2a\u5b57\u4e00\u4e2a\u5b57\u5730\u90fd\u88ab\u6539\u5199\u5b8c\u4e86\u4e4b\u540e\uff0c\u624d\u5c06\u8be5 Cache line \u5199\u56de\u5230\u5185\u5b58\u4e2d\u3002  </p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/Cache/#114-ucuncacheable","title":"1.1.4 UC\uff08uncacheable\uff09","text":"<p>uncacheable \u5185\u5b58\u662f\u4e00\u90e8\u5206\u7279\u6b8a\u7684\u5185\u5b58\uff0c\u6bd4\u5982 PCI \u8bbe\u5907\u7684 I/O \u7a7a\u95f4\u901a\u8fc7 MMIO \u65b9\u5f0f\u88ab\u6620\u5c04\u6210\u5185\u5b58\u6765\u8bbf\u95ee\u3002\u8fd9\u79cd\u5185\u5b58\u662f\u4e0d\u80fd\u7f13\u5b58\u5728 Cache \u4e2d\u7684\uff0c\u56e0\u4e3a\u8bbe\u5907\u9a71\u52a8\u5728\u4fee\u6539\u8fd9\u79cd\u5185\u5b58\u65f6\uff0c\u603b\u662f\u671f\u671b\u8fd9\u79cd\u6539\u53d8\u80fd\u591f\u5c3d\u5feb\u901a\u8fc7\u603b\u7ebf\u5199\u56de\u5230\u8bbe\u5907\u5185\u90e8\uff0c\u4ece\u800c\u9a71\u52a8\u8bbe\u5907\u505a\u51fa\u76f8\u5e94\u7684\u52a8\u4f5c\u3002\u5982\u679c\u653e\u5728 Cache \u4e2d\uff0c\u786c\u4ef6\u5c31\u65e0\u6cd5\u6536\u5230\u6307\u4ee4\u3002</p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/Cache/#12-cache","title":"1.2 Cache \u9884\u53d6","text":"<p>\u6240\u8c13\u7684 Cache \u9884\u53d6\uff0c\u4e5f\u5c31\u662f\u9884\u6d4b\u6570\u636e\u5e76\u53d6\u5165\u5230 Cache \u4e2d\uff0c\u662f\u6839\u636e\u7a7a\u95f4\u5c40\u90e8\u6027\u548c\u65f6\u95f4\u5c40\u90e8\u6027\uff0c\u4ee5\u53ca\u5f53\u524d\u6267\u884c\u72b6\u6001\u3001\u5386\u53f2\u6267\u884c\u8fc7\u7a0b\u3001\u8f6f\u4ef6\u63d0\u793a\u7b49\u4fe1\u606f\uff0c\u7136\u540e\u4ee5\u4e00\u5b9a\u7684\u5408\u7406\u65b9\u6cd5\uff0c\u5728\u6570\u636e/\u6307\u4ee4\u88ab\u4f7f\u7528\u524d\u53d6\u5165 Cache\u3002\u8fd9\u6837\uff0c\u5f53\u6570\u636e/\u6307\u4ee4\u9700\u8981\u88ab\u4f7f\u7528\u65f6\uff0c\u5c31\u80fd\u5feb\u901f\u4ece Cache \u4e2d\u52a0\u8f7d\u5230\u5904\u7406\u5668\u5185\u90e8\u8fdb\u884c\u8fd0\u7b97\u548c\u6267\u884c\u3002 - \u65f6\u95f4\u5c40\u90e8\u6027\uff1a \u662f\u6307\u7a0b\u5e8f\u5373\u5c06\u7528\u5230\u7684\u6307\u4ee4/\u6570\u636e\u53ef\u80fd\u5c31\u662f\u76ee\u524d\u6b63\u5728\u4f7f\u7528\u7684\u6307\u4ee4/\u6570\u636e\u3002\u56e0\u6b64\uff0c \u5f53\u524d\u7528\u5230\u7684\u6307\u4ee4/\u6570\u636e\u5728\u4f7f\u7528\u5b8c\u6bd5\u4e4b\u540e\u53ef\u4ee5\u6682\u65f6\u5b58\u653e\u5728Cache\u4e2d\uff0c \u53ef\u4ee5\u5728\u5c06\u6765\u7684\u65f6\u5019\u518d\u88ab\u5904\u7406\u5668\u7528\u5230\u3002 \u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\u5c31\u662f\u4e00\u4e2a\u5faa\u73af\u8bed\u53e5\u7684\u6307\u4ee4\uff0c \u5f53\u5faa\u73af\u7ec8\u6b62\u7684\u6761\u4ef6\u6ee1\u8db3\u4e4b\u524d\uff0c\u5904\u7406\u5668\u9700\u8981\u53cd\u590d\u6267\u884c\u5faa\u73af\u8bed\u53e5\u4e2d\u7684\u6307\u4ee4\u3002 - \u7a7a\u95f4\u5c40\u90e8\u6027\uff1a\u662f\u6307\u7a0b\u5e8f\u5373\u5c06\u7528\u5230\u7684\u6307\u4ee4/\u6570\u636e\u53ef\u80fd\u4e0e\u76ee\u524d\u6b63\u5728\u4f7f\u7528\u7684\u6307\u4ee4/\u6570\u636e\u5728\u7a7a\u95f4\u4e0a\u76f8\u90bb\u6216\u8005\u76f8\u8fd1\u3002\u56e0\u6b64\uff0c\u5728\u5904\u7406\u5668\u5904\u7406\u5f53\u524d\u6307\u4ee4/\u6570\u636e\u65f6\uff0c\u53ef\u4ee5\u4ece\u5185\u5b58\u4e2d\u628a\u76f8\u90bb\u533a\u57df\u7684\u6307\u4ee4/\u6570\u636e\u8bfb\u53d6\u5230Cache\u4e2d\uff0c\u8fd9\u6837\uff0c\u5f53\u5904\u7406\u5668\u9700\u8981\u5904\u7406\u76f8\u90bb\u5185\u5b58\u533a\u57df\u7684\u6307\u4ee4/\u6570\u636e\u65f6\uff0c\u53ef\u4ee5\u76f4\u63a5\u4eceCache\u4e2d\u8bfb\u53d6\uff0c\u8282\u7701\u8bbf\u95ee\u5185\u5b58\u7684\u65f6\u95f4\u3002\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\u5c31\u662f\u4e00\u4e2a\u9700\u8981\u987a\u5e8f\u5904\u7406\u7684\u6570\u7ec4\u3002</p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/Cache/#13-cache","title":"1.3 Cache \u4e00\u81f4\u6027","text":"<pre><code>title: \u4ea7\u751f\u7f13\u5b58\u4e00\u81f4\u6027\u95ee\u9898\u7684\u539f\u56e0\uff1f\nCache\u4e00\u81f4\u6027\u95ee\u9898\u7684\u6839\u6e90\u662f\u56e0\u4e3a\u5b58\u5728*\u591a\u4e2a\u5904\u7406\u5668\u72ec\u5360\u7684Cache*\uff0c \u800c\u4e0d\u662f\u591a\u4e2a\u5904\u7406\u5668\u3002\u5982\u679c\u591a\u4e2a\u5904\u7406\u5668\u5171\u4eabCache\uff0c \u4e5f\u5c31\u662f\u8bf4\u53ea\u6709\u4e00\u7ea7Cache\uff0c \u6240\u6709\u5904\u7406\u5668\u90fd\u5171\u4eab\u5b83\uff0c \u5728\u6bcf\u4e2a\u6307\u4ee4\u5468\u671f\u5185\uff0c \u53ea\u6709\u4e00\u4e2a\u5904\u7406\u5668\u6838\u5fc3\u80fd\u591f\u901a\u8fc7\u8fd9\u4e2aCache\u505a\u5185\u5b58\u8bfb\u5199\u64cd\u4f5c\uff0c \u90a3\u4e48\u5c31\u4e0d\u4f1a\u5b58\u5728Cache\u4e00\u81f4\u6027\u95ee\u9898\n</code></pre>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/Cache/#131","title":"1.3.1 \u4e00\u81f4\u6027\u534f\u8bae","text":"<p>\u89e3\u51b3 Cache \u4e00\u81f4\u6027\u95ee\u9898\u7684\u673a\u5236\u6709\u4e24\u79cd\uff1a  - \u57fa\u4e8e\u76ee\u5f55\u7684\u534f\u8bae\uff08Directory-based protocol\uff09\uff1a\u7279\u70b9\uff08\u4e2d\u5fc3\u8282\u70b9\u7edf\u4e00\u7ba1\u7406\uff09 - \u603b\u7ebf\u7aa5\u63a2\u534f\u8bae\uff08Bus snooping protocol\uff09\uff1a\uff08\u91cd\u70b9\uff09\u7279\u70b9\uff08\u76d1\u542c\u901a\u77e5\u5e7f\u64ad\uff09 - Snarfing\u534f\u8bae</p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/Cache/#1311","title":"1.3.1.1 \u57fa\u4e8e\u76ee\u5f55\u7684\u534f\u8bae","text":"<p>\u57fa\u4e8e\u76ee\u5f55\u534f\u8bae\u7684\u7cfb\u7edf\u4e2d\uff0c\u9700\u8981\u7f13\u5b58\u5728 Cache \u7684\u5185\u5b58\u5757\u88ab\u7edf\u4e00\u5b58\u50a8\u5728\u4e00\u4e2a\u76ee\u5f55\u8868\u4e2d\uff0c\u76ee\u5f55\u8868\u7edf\u4e00\u7ba1\u7406\u6240\u6709\u7684\u6570\u636e\uff0c\u534f\u8c03\u4e00\u81f4\u6027\u95ee\u9898\u3002\u8be5\u76ee\u5f55\u8868\u7c7b\u4f3c\u4e8e\u4e00\u4e2a\u4ef2\u88c1\u8005\uff0c\u5f53\u5904\u7406\u5668\u9700\u8981\u628a\u4e00\u4e2a\u6570\u636e\u4ece\u5185\u5b58\u4e2d\u52a0\u8f7d\u5230\u81ea\u5df1\u72ec\u5360\u7684 Cache \u4e2d\u65f6\uff0c\u9700\u8981\u5411\u76ee\u5f55\u8868\u63d0\u51fa\u7533\u8bf7\uff1b\u5f53\u4e00\u4e2a\u5185\u5b58\u5757\u88ab\u67d0\u4e2a\u5904\u7406\u5668\u6539\u53d8\u4e4b\u540e\uff0c\u76ee\u5f55\u8868\u8d1f\u8d23\u6539\u53d8\u5176\u72b6\u6001\uff0c\u66f4\u65b0\u5176\u4ed6\u5904\u7406\u5668\u7684 Cache \u4e2d\u7684\u5907\u4efd\uff0c\u6216\u8005\u4f7f\u5176\u4ed6\u5904\u7406\u5668\u7684 Cache \u7684\u5907\u4efd\u65e0\u6548\u3002</p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/Cache/#1312","title":"1.3.1.2 \u603b\u7ebf\u7aa5\u63a2\u534f\u8bae","text":"<p>\u603b\u7ebf\u7aa5\u63a2\u534f\u8bae\u662f\u5728 1983 \u5e74\u88ab\u9996\u5148\u63d0\u51fa\u6765\uff0c\u8fd9\u4e2a\u534f\u8bae\u63d0\u51fa\u4e86\u4e00\u4e2a\u7aa5\u63a2\uff08snooping\uff09 \u7684\u52a8\u4f5c\uff0c\u5373\u5bf9\u4e8e\u88ab\u5904\u7406\u5668\u72ec\u5360\u7684 Cache \u4e2d\u7684\u7f13\u5b58\u7684\u5185\u5bb9\uff0c\u8be5\u5904\u7406\u5668\u8d1f\u8d23\u76d1\u542c\u603b\u7ebf\uff0c\u5982\u679c\u8be5\u5185\u5bb9\u88ab\u672c\u5904\u7406\u5668\u6539\u53d8\uff0c\u5219\u9700\u8981\u901a\u8fc7\u603b\u7ebf\u5e7f\u64ad\uff1b\u53cd\u4e4b\uff0c\u5982\u679c\u8be5\u5185\u5bb9\u72b6\u6001\u88ab\u5176\u4ed6\u5904\u7406\u5668\u6539\u53d8\uff0c\u672c\u5904\u7406\u5668\u7684 Cache \u4ece\u603b\u7ebf\u6536\u5230\u4e86\u901a\u77e5\uff0c\u5219\u9700\u8981\u76f8\u5e94\u6539\u53d8\u672c\u5730\u5907\u4efd\u7684\u72b6\u6001\u3002\u603b\u7ebf\u7aa5\u63a2\u534f\u8bae\u884d\u751f\u51fa\u8457\u540d\u7684 MESI \u534f\u8bae\uff0c\u6216\u8005\u79f0\u4e3a Illinois Protocol\u3002</p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/Cache/#132-mesi","title":"1.3.2 MESI \u534f\u8bae","text":"<p>MESI \u534f\u8bae\u662f Cache line \u56db\u79cd\u72b6\u6001\u7684\u9996\u5b57\u6bcd\u7684\u7f29\u5199\uff0cCache \u4e2d\u7f13\u5b58\u7684\u6bcf\u4e2a Cache Line \u90fd\u5fc5\u987b\u662f\u8fd9\u56db\u79cd\u72b6\u6001\u4e2d\u7684\u4e00\u79cd\u3002\u5206\u522b\u662f:  1. \u4fee\u6539\u6001\uff08Modified\uff09 2. \u72ec\u5360\u6001\uff08Exclusive\uff09 3. \u5171\u4eab\u6001\uff08Shared\uff09 4. \u5931\u6548\u6001\uff08Invalid\uff09</p> <ul> <li>\u540c\u4e00\u65f6\u523b 2 \u4e2a\u7f13\u5b58\u884c\u7f13\u5b58\u540c\u4e00\u5185\u5b58\u65f6\u7f13\u5b58\u72b6\u6001\u77e9\u9635\u56fe </li> <li>\u7f13\u5b58\u72b6\u6001\u8fc1\u79fb\u8868 </li> </ul>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/Cache/#1321","title":"1.3.2.1 \u4fee\u6539\u6001","text":"<p>\u5982\u679c\u8be5Cache Line\u5728\u591a\u4e2aCache\u4e2d\u90fd\u6709\u5907\u4efd\uff0c \u90a3\u4e48\u53ea\u6709\u4e00\u4e2a\u5907\u4efd\u80fd\u5904\u4e8e\u8fd9\u79cd\u72b6\u6001\uff0c \u5e76\u4e14\u201cdirty\u201d\u6807\u5fd7\u4f4d\u88ab\u7f6e\u4e0a\u3002 \u62e5\u6709\u4fee\u6539\u6001Cache Line\u7684Cache\u9700\u8981\u5728\u67d0\u4e2a\u5408\u9002\u7684\u65f6\u5019\u628a\u8be5Cache Line\u5199\u56de\u5230\u5185\u5b58\u4e2d\u3002 \u4f46\u662f\u5728\u5199\u56de\u4e4b\u524d\uff0c \u4efb\u4f55\u5904\u7406\u5668\u5bf9\u8be5Cache Line\u5728\u5185\u5b58\u4e2d\u76f8\u5bf9\u5e94\u7684\u5185\u5b58\u5757\u90fd\u4e0d\u80fd\u8fdb\u884c\u8bfb\u64cd\u4f5c\u3002 Cache Line\u88ab\u5199\u56de\u5230\u5185\u5b58\u4e2d\u4e4b\u540e\uff0c \u5176\u72b6\u6001\u5c31\u7531\u4fee\u6539\u6001\u53d8\u4e3a\u5171\u4eab\u6001\u3002  </p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/Cache/#1322","title":"1.3.2.2 \u72ec\u5360\u6001","text":"<p>\u548c\u4fee\u6539\u72b6\u6001\u4e00\u6837\uff0c\u5982\u679c\u8be5 Cache Line \u5728\u591a\u4e2a Cache \u4e2d\u90fd\u6709\u5907\u4efd\uff0c\u90a3\u4e48\u53ea\u6709\u4e00\u4e2a\u5907\u4efd\u80fd\u5904\u4e8e\u8fd9\u79cd\u72b6\u6001\uff0c \u4f46\u662f\u201cdirty\u201d\u6807\u5fd7\u4f4d\u6ca1\u6709\u7f6e\u4e0a\uff0c \u56e0\u4e3a\u5b83\u662f\u548c\u4e3b\u5185\u5b58\u5185\u5bb9\u4fdd\u6301\u4e00\u81f4\u7684\u4e00\u4efd\u62f7\u8d1d\u3002 \u5982\u679c\u4ea7\u751f\u4e00\u4e2a\u8bfb\u8bf7\u6c42\uff0c \u5b83\u5c31\u53ef\u4ee5\u5728\u4efb\u4f55\u65f6\u5019\u53d8\u6210\u5171\u4eab\u6001\u3002 \u76f8\u5e94\u5730\uff0c \u5982\u679c\u4ea7\u751f\u4e86\u4e00\u4e2a\u5199\u8bf7\u6c42\uff0c \u5b83\u5c31\u53ef\u4ee5\u5728\u4efb\u4f55\u65f6\u5019\u53d8\u6210\u4fee\u6539\u6001\u3002  </p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/Cache/#1323","title":"1.3.2.3 \u5171\u4eab\u6001","text":"<p>\u610f\u5473\u7740\u8be5 Cache Line \u53ef\u80fd\u5728\u591a\u4e2a Cache \u4e2d\u90fd\u6709\u5907\u4efd\uff0c\u5e76\u4e14\u662f\u76f8\u540c\u7684\u72b6\u6001\uff0c\u5b83\u662f\u548c\u5185\u5b58\u5185\u5bb9\u4fdd\u6301\u4e00\u81f4\u7684\u4e00\u4efd\u62f7\u8d1d\uff0c \u800c\u4e14\u53ef\u4ee5\u5728\u4efb\u4f55\u65f6\u5019\u90fd\u53d8\u6210\u5176\u4ed6\u4e09\u79cd\u72b6\u6001\u3002  </p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/Cache/#1324","title":"1.3.2.4 \u5931\u6548\u6001","text":"<p>\u8be5 Cache Line \u8981\u4e48\u5df2\u7ecf\u4e0d\u5728 Cache \u4e2d\uff0c\u8981\u4e48\u5b83\u7684\u5185\u5bb9\u5df2\u7ecf\u8fc7\u65f6\u3002\u4e00\u65e6\u67d0\u4e2a Cache Line \u88ab\u6807\u8bb0\u4e3a\u5931\u6548\uff0c\u90a3\u5b83\u5c31\u88ab\u5f53\u4f5c\u4ece\u6765\u6ca1\u88ab\u52a0\u8f7d\u5230 Cache \u4e2d\u3002</p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/Cache/#133-dpdk","title":"1.3.3 DPDK \u4fdd\u8bc1\u7f13\u5b58\u4e00\u81f4\u884c\u7684\u65b9\u6cd5","text":"<ul> <li>\u539f\u5219\uff1a\u907f\u514d\u591a\u4e2a\u6838\u8bbf\u95ee\u540c\u4e00\u4e2a\u5185\u5b58\u5730\u5740\u6216\u8005\u6570\u636e\u7ed3\u6784\uff0c\u6bcf\u4e2a\u6838\u5c3d\u91cf\u90fd\u907f\u514d\u4e0e\u5176\u4ed6\u6838\u5171\u4eab\u6570\u636e\uff0c\u4ece\u800c\u51cf\u5c11\u56e0\u4e3a\u9519\u8bef\u7684\u6570\u636e\u5171\u4eab\uff08cache line false sharing\uff09 \u5bfc\u81f4\u7684Cache\u4e00\u81f4\u6027\u7684\u5f00\u9500\u3002</li> <li>\u65b9\u5f0f 1\uff1a\u6570\u636e\u7ed3\u6784\u5b9a\u4e49\u65f6\uff0c\u5185\u5b58\u5bf9\u9f50\u7f13\u5b58\u884c\u5927\u5c0f\uff0864Byte\uff09\uff1b\u5bf9\u4e8e\u67d0\u4e9b\u6570\u636e\u7ed3\u6784\uff0c\u7ed9\u6bcf\u4e2a\u6838\u90fd\u5355\u72ec\u5b9a\u4e49\u4e00\u4efd\u3002</li> <li>\u65b9\u5f0f 2\uff1a\u5bf9\u7f51\u7edc\u7aef\u53e3\u7684\u8bbf\u95ee\u65f6\uff0c\u4e0d\u540c\u7684\u6838\u4f7f\u7528\u4e0d\u540c\u7f51\u5361\u7684\u53d1\u9001\u961f\u5217/\u63a5\u6536\u961f\u5217\uff08\u4e5f\u662f\u5185\u5b58\u4e2d\u7684\u4e00\u6bb5\u5185\u5b58\u7ed3\u6784\uff09\uff0c\u907f\u514d\u4e0d\u540c\u6838\u4f7f\u7528\u540c\u4e00\u4e2a\u53d1\u9001/\u63a5\u53d7\u961f\u5217\u3002</li> </ul>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/TLB%E7%BC%93%E5%AD%98/","title":"TLB \u7f13\u5b58","text":"<ul> <li>TLB\uff08Translation Look-aside Buffer\uff09\u4e5f\u5c31\u662f\u9875\u8868\uff0c\u9875\u8868\u4fdd\u5b58\u5728\u5185\u5b58\u4e2d\uff0c\u4f46\u8bbf\u95ee\u5185\u5b58\u5f00\u9500\u8f83\u5927\uff1b\u5373\u4f7f\u4e5f\u53ef\u4ee5\u4f7f\u7528 cpu \u4e09\u7ea7\u7f13\u5b58\u6765\u7f13\u5b58\u9875\u8868\uff0c\u4f46\u7531\u4e8e\u9875\u8868\u8bbf\u95ee\u9891\u7387\u5f88\u9ad8\uff0c\u5373\u4f7f\u7f13\u5b58\u4e0d\u547d\u4e2d\u7387\u53ea\u6709 1%\uff0c\u90a3\u4e48\u4e0d\u547d\u4e2d\u7684\u6982\u7387\u6bcf\u79d2\u4e5f\u6709\u51e0\u767e\u6b21\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u5904\u7406\u5668\u5728\u5355\u4f4d\u65f6\u95f4\u5185\u8bbf\u95ee\u5185\u5b58\uff08\u56e0\u4e3a Cache \u6ca1\u6709\u547d\u4e2d\uff0c\u53ea\u80fd\u8bbf\u95ee\u5185\u5b58\uff09 \u7684\u6b21\u6570\u589e\u591a\uff0c\u964d\u4f4e\u4e86\u7cfb\u7edf\u7684\u6027\u80fd\u3002</li> <li>\u56e0\u6b64 TLB Cache \uff08\u4e5f\u5c31\u662f\u5feb\u8868\uff09\u5c31\u4ea7\u751f\u4e86\uff0c\u4e13\u95e8\u7528\u4e8e\u7f13\u5b58\u5185\u5b58\u4e2d\u7684\u9875\u8868\u9879\u3002 TLB \u4e00\u822c\u90fd\u91c7\u7528 \u76f8\u8fde\u5b58\u50a8\u5668\u6216\u8005\u6309\u5185\u5bb9\u8bbf\u95ee\u5b58\u50a8\u5668\uff08CAM\uff0c Content Addressable Memory\uff09 \u3002\u76f8\u8fde\u5b58\u50a8\u5668\u4f7f\u7528\u865a\u62df\u5730\u5740\u8fdb\u884c\u641c\u7d22\uff0c\u76f4\u63a5\u8fd4\u56de\u5bf9\u5e94\u7684\u7269\u7406\u5730\u5740\uff0c\u76f8\u5bf9\u4e8e\u5185\u5b58\u4e2d\u7684\u591a\u7ea7\u9875\u8868\u9700\u8981\u591a\u6b21\u8bbf\u95ee\u624d\u80fd\u5f97\u5230\u6700\u7ec8\u7684\u7269\u7406\u5730\u5740\uff0c TLB \u67e5\u627e\u65e0\u7591\u5927\u5927\u51cf\u5c11\u4e86\u5904\u7406\u5668\u7684\u5f00\u9500\u3002</li> </ul>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/%E7%BC%93%E5%AD%98/","title":"\u7f13\u5b58","text":"<p>\u7f13\u5b58\u662f\u4e00\u79cd\u6bd4\u5185\u5b58\u66f4\u5feb\u7684\u5b58\u50a8\u8bbe\u5907\uff0c\u5b83\u7684\u51fa\u73b0\u5c31\u662f\u4e3a\u4e86\u89e3\u51b3\u8bfb\u5199\u5185\u5b58\u6570\u636e\u8017\u65f6\u957f\u7684\u95ee\u9898\uff08\u5904\u7406\u5668\u8981\u4ece\u5185\u5b58\u4e2d\u76f4\u63a5\u8bfb\u53d6\u6570\u636e\u90fd\u8981\u82b1\u5927\u6982\u51e0\u767e\u4e2a\u65f6\u949f\u5468\u671f\uff09\u3002\u4f46\u7f13\u5b58\u9020\u5047\u6602\u8d35\uff0c\u56e0\u6b64\u7f13\u5b58\u7684\u5bb9\u91cf\u4e00\u822c\u5f88\u5c0f\uff0c\u51e0\u5341 KB~\u51e0\u5341 MB \u4e4b\u95f4\u3002</p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/%E7%BC%93%E5%AD%98/#1-cache","title":"1 Cache \u7684\u5199\u7b56\u7565","text":"<pre><code>WC\uff08write-combining\uff09 \u548cUC\uff08uncacheable\uff09 \u3002 \u8fd9\u4e24\u79cd\u7b56\u7565\u90fd\u662f\u9488\u5bf9\u7279\u6b8a\u7684\u5730\u5740\u7a7a\u95f4\u6765\u4f7f\u7528\u7684\u3002\n</code></pre> <ul> <li>\u76f4\u5199\uff08write-through\uff09\uff1a\u5c31\u662f\u6307\u5728\u5904\u7406\u5668\u5bf9 Cache \u5199\u5165\u7684\u540c\u65f6\uff0c\u5c06\u6570\u636e\u5199\u5165\u5230\u5185\u5b58\u4e2d\u3002</li> <li>\u56de\u5199\uff08write-back\uff09\uff1a\u5f53\u5904\u7406\u5668\u5728\u6539\u5199\u4e86\u67d0\u4e2a Cache line \u540e\uff0c\u5e76\u4e0d\u662f\u9a6c\u4e0a\u628a\u5176\u5199\u56de\u5185\u5b58\u3002</li> <li>WC\uff08write-combining\uff09\uff1a\u8fd9\u79cd\u7b56\u7565\u5c31\u662f\u5f53\u4e00\u4e2aCache line \u91cc\u7684\u6570\u636e\u4e00\u4e2a\u5b57\u4e00\u4e2a\u5b57\u5730\u90fd\u88ab\u6539\u5199\u5b8c\u4e86\u4e4b\u540e\uff0c \u624d\u5c06\u8be5Cache line\u5199\u56de\u5230\u5185\u5b58\u4e2d\u3002</li> <li>UC\uff08uncacheable\uff09\uff1a\u662f\u4e00\u90e8\u5206\u7279\u6b8a\u7684\u5185\u5b58\uff0c\u8fd9\u79cd\u5185\u5b58\u662f\u4e0d\u80fd\u7f13\u5b58\u5728Cache\u4e2d\u7684\u3002</li> </ul>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/%E7%BC%93%E5%AD%98/#11-write-through","title":"1.1 \u76f4\u5199\uff08write-through\uff09","text":"<p>\u8fd9\u79cd\u7b56\u7565\u4fdd\u8bc1\u4e86\u5728\u4efb\u4f55\u65f6\u523b\uff0c\u5185\u5b58\u7684\u6570\u636e\u548c Cache \u4e2d\u7684\u6570\u636e\u90fd\u662f\u540c\u6b65\u7684\uff0c\u8fd9\u79cd\u65b9\u5f0f\u7b80\u5355\u3001 \u53ef\u9760\u3002 \u4f46\u7531\u4e8e\u5904\u7406\u5668\u6bcf\u6b21\u5bf9Cache\u66f4\u65b0\u65f6\u90fd\u8981\u5bf9\u5185\u5b58\u8fdb\u884c\u5199\u64cd\u4f5c\uff0c \u56e0\u6b64\u603b\u7ebf\u5de5\u4f5c\u7e41\u5fd9\uff0c \u5185\u5b58\u7684\u5e26\u5bbd\u88ab\u5927\u5927\u5360\u7528\uff0c \u56e0\u6b64\u8fd0\u884c\u901f\u5ea6\u4f1a\u53d7\u5230\u5f71\u54cd\u3002 \u5047\u8bbe\u4e00\u6bb5\u7a0b\u5e8f\u5728\u9891\u7e41\u5730\u4fee\u6539\u4e00\u4e2a\u5c40\u90e8\u53d8\u91cf\uff0c \u5c3d\u7ba1\u8fd9\u4e2a\u5c40\u90e8\u53d8\u91cf\u7684\u751f\u547d\u5468\u671f\u5f88\u77ed\uff0c \u800c\u4e14\u5176\u4ed6\u8fdb\u7a0b/\u7ebf\u7a0b\u4e5f\u7528\u4e0d\u5230\u5b83\uff0c CPU\u4f9d\u7136\u4f1a\u9891\u7e41\u5730\u5728Cache\u548c\u5185\u5b58\u4e4b\u95f4\u4ea4\u6362\u6570\u636e\uff0c \u9020\u6210\u4e0d\u5fc5\u8981\u7684\u5e26\u5bbd\u635f\u5931\u3002  </p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/%E7%BC%93%E5%AD%98/#12-write-back","title":"1.2 \u56de\u5199\uff08write-back\uff09","text":"<p>\u56de\u5199\u76f8\u5bf9\u4e8e\u76f4\u5199\u800c\u8a00\u662f\u4e00\u79cd\u9ad8\u6548\u7684\u65b9\u6cd5\u3002\u76f4\u5199\u4e0d\u4ec5\u6d6a\u8d39\u65f6\u95f4\uff0c\u800c\u4e14\u6709\u65f6\u662f\u4e0d\u5fc5\u8981\u7684\uff0c\u6bd4\u5982\u4e0a\u6587\u63d0\u5230\u7684\u5c40\u90e8\u53d8\u91cf\u7684\u4f8b\u5b50\u3002\u56de\u5199\u7cfb\u7edf\u901a\u8fc7\u5c06 Cache line \u7684\u6807\u5fd7\u4f4d\u5b57\u6bb5\u6dfb\u52a0\u4e00\u4e2a Dirty \u6807\u5fd7\u4f4d\uff0c\u5f53\u5904\u7406\u5668\u5728\u6539\u5199\u4e86\u67d0\u4e2a Cache line \u540e\uff0c\u5e76\u4e0d\u662f\u9a6c\u4e0a\u628a\u5176\u5199\u56de\u5185\u5b58\uff0c\u800c\u662f\u5c06\u8be5 Cache line \u7684 Dirty \u6807\u5fd7\u8bbe\u7f6e\u4e3a 1\u3002\u5f53\u5904\u7406\u5668\u518d\u6b21\u4fee\u6539\u8be5 Cache line \u5e76\u4e14\u5199\u56de\u5230 Cache \u4e2d\uff0c\u67e5\u8868\u53d1\u73b0\u8be5 Dirty \u4f4d\u5df2\u7ecf\u4e3a 1\uff0c\u5219\u5148\u5c06 Cache line \u5185\u5bb9\u5199\u56de\u5230\u5185\u5b58\u4e2d\u76f8\u5e94\u7684\u4f4d\u7f6e\uff0c\u518d\u5c06\u65b0\u6570\u636e\u5199\u5230 Cache \u4e2d\u3002\u5176\u5b9e\uff0c\u56de\u5199\u7b56\u7565\u5728\u591a\u6838\u7cfb\u7edf\u4e2d\u4f1a\u5f15\u8d77Cache \u4e00\u81f4\u6027\u7684\u95ee\u9898\u3002\u8bbe\u60f3\u6709\u4e24\u4e2a\u5904\u7406\u5668\u6838\u5fc3\u90fd\u9700\u8981\u5bf9\u67d0\u4e2a\u5185\u5b58\u5757\u8fdb\u884c\u8bfb\u5199\uff0c\u5176\u4e2d\u4e00\u4e2a\u6838\u5fc3\u5df2\u7ecf\u4fee\u6539\u4e86\u8be5\u6570\u636e\u5757\uff0c\u5e76\u4e14\u5199\u56de\u5230 Cache \u4e2d\uff0c\u8bbe\u7f6e\u4e86 Dirty \u4f4d\uff1b\u8fd9\u65f6\u53e6\u5916\u4e00\u4e2a\u6838\u5fc3\u4e5f\u5b8c\u6210\u4e86\u8be5\u5185\u5b58\u5757\u7684\u4fee\u6539\uff0c\u5e76\u4e14\u51c6\u5907\u5199\u5165\u5230 Cache \u4e2d\uff0c\u8fd9\u65f6\u624d\u53d1\u73b0\u8be5 Cache line \u662f\u201c\u810f\u201d\u7684\u3002</p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/%E7%BC%93%E5%AD%98/#13-wcwrite-combining","title":"1.3 WC\uff08write-combining\uff09","text":"<p>write-combining\u7b56\u7565\u662f\u9488\u5bf9\u4e8e\u5177\u4f53\u8bbe\u5907\u5185\u5b58\uff08\u5982\u663e\u5361\u7684RAM\uff09 \u7684\u4e00\u79cd\u4f18\u5316\u5904\u7406\u7b56\u7565\u3002 \u5bf9\u4e8e\u8fd9\u4e9b\u8bbe\u5907\u6765\u8bf4\uff0c \u6570\u636e\u4eceCache\u5230\u5185\u5b58\u8f6c\u79fb\u7684\u5f00\u9500\u6bd4\u76f4\u63a5\u8bbf\u95ee\u76f8\u5e94\u7684\u5185\u5b58\u7684\u5f00\u9500\u8fd8\u8981\u9ad8\u5f97\u591a\uff0c \u6240\u4ee5\u5e94\u8be5\u5c3d\u91cf\u907f\u514d\u8fc7\u591a\u7684\u6570\u636e\u8f6c\u79fb\u3002 \u8bd5\u60f3\uff0c \u5982\u679c\u4e00\u4e2aCache line\u91cc\u7684\u5b57\u88ab\u6539\u5199\u4e86\uff0c \u5904\u7406\u5668\u5c06\u5176\u5199\u56de\u5185\u5b58\uff0c \u7d27\u63a5\u7740\u53c8\u4e00\u4e2a\u5b57\u88ab\u6539\u5199\u4e86\uff0c \u5904\u7406\u5668\u53c8\u5c06\u8be5Cache line\u5199\u56de\u5185\u5b58\uff0c \u8fd9\u6837\u5c31\u663e\u5f97\u4f4e\u6548\uff0c \u7b26\u5408\u8fd9\u79cd\u60c5\u51b5\u7684\u4e00\u4e2a\u4f8b\u5b50\u5c31\u662f\u663e\u793a\u5c4f\u4e0a\u6c34\u5e73\u76f8\u8fde\u7684\u50cf\u7d20\u70b9\u6570\u636e\u3002 writecombinin\u7b56\u7565\u7684\u5f15\u5165\u5c31\u662f\u4e3a\u4e86\u89e3\u51b3\u8fd9\u79cd\u95ee\u9898\uff0c \u987e\u540d\u601d\u4e49\uff0c \u8fd9\u79cd\u7b56\u7565\u5c31\u662f\u5f53\u4e00\u4e2aCache line\u91cc\u7684\u6570\u636e\u4e00\u4e2a\u5b57\u4e00\u4e2a\u5b57\u5730\u90fd\u88ab\u6539\u5199\u5b8c\u4e86\u4e4b\u540e\uff0c\u624d\u5c06\u8be5 Cache line \u5199\u56de\u5230\u5185\u5b58\u4e2d\u3002  </p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/%E7%BC%93%E5%AD%98/#14-ucuncacheable","title":"1.4 UC\uff08uncacheable\uff09","text":"<p>uncacheable \u5185\u5b58\u662f\u4e00\u90e8\u5206\u7279\u6b8a\u7684\u5185\u5b58\uff0c\u6bd4\u5982 PCI \u8bbe\u5907\u7684 I/O \u7a7a\u95f4\u901a\u8fc7 MMIO \u65b9\u5f0f\u88ab\u6620\u5c04\u6210\u5185\u5b58\u6765\u8bbf\u95ee\u3002\u8fd9\u79cd\u5185\u5b58\u662f\u4e0d\u80fd\u7f13\u5b58\u5728 Cache \u4e2d\u7684\uff0c\u56e0\u4e3a\u8bbe\u5907\u9a71\u52a8\u5728\u4fee\u6539\u8fd9\u79cd\u5185\u5b58\u65f6\uff0c\u603b\u662f\u671f\u671b\u8fd9\u79cd\u6539\u53d8\u80fd\u591f\u5c3d\u5feb\u901a\u8fc7\u603b\u7ebf\u5199\u56de\u5230\u8bbe\u5907\u5185\u90e8\uff0c\u4ece\u800c\u9a71\u52a8\u8bbe\u5907\u505a\u51fa\u76f8\u5e94\u7684\u52a8\u4f5c\u3002\u5982\u679c\u653e\u5728 Cache \u4e2d\uff0c\u786c\u4ef6\u5c31\u65e0\u6cd5\u6536\u5230\u6307\u4ee4\u3002</p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/%E7%BC%93%E5%AD%98/#2-cache","title":"2 Cache \u9884\u53d6","text":"<p>\u6240\u8c13\u7684 Cache \u9884\u53d6\uff0c\u4e5f\u5c31\u662f\u9884\u6d4b\u6570\u636e\u5e76\u53d6\u5165\u5230 Cache \u4e2d\uff0c\u662f\u6839\u636e\u7a7a\u95f4\u5c40\u90e8\u6027\u548c\u65f6\u95f4\u5c40\u90e8\u6027\uff0c\u4ee5\u53ca\u5f53\u524d\u6267\u884c\u72b6\u6001\u3001\u5386\u53f2\u6267\u884c\u8fc7\u7a0b\u3001\u8f6f\u4ef6\u63d0\u793a\u7b49\u4fe1\u606f\uff0c\u7136\u540e\u4ee5\u4e00\u5b9a\u7684\u5408\u7406\u65b9\u6cd5\uff0c\u5728\u6570\u636e/\u6307\u4ee4\u88ab\u4f7f\u7528\u524d\u53d6\u5165 Cache\u3002\u8fd9\u6837\uff0c\u5f53\u6570\u636e/\u6307\u4ee4\u9700\u8981\u88ab\u4f7f\u7528\u65f6\uff0c\u5c31\u80fd\u5feb\u901f\u4ece Cache \u4e2d\u52a0\u8f7d\u5230\u5904\u7406\u5668\u5185\u90e8\u8fdb\u884c\u8fd0\u7b97\u548c\u6267\u884c\u3002 - \u65f6\u95f4\u5c40\u90e8\u6027\uff1a \u662f\u6307\u7a0b\u5e8f\u5373\u5c06\u7528\u5230\u7684\u6307\u4ee4/\u6570\u636e\u53ef\u80fd\u5c31\u662f\u76ee\u524d\u6b63\u5728\u4f7f\u7528\u7684\u6307\u4ee4/\u6570\u636e\u3002\u56e0\u6b64\uff0c \u5f53\u524d\u7528\u5230\u7684\u6307\u4ee4/\u6570\u636e\u5728\u4f7f\u7528\u5b8c\u6bd5\u4e4b\u540e\u53ef\u4ee5\u6682\u65f6\u5b58\u653e\u5728Cache\u4e2d\uff0c \u53ef\u4ee5\u5728\u5c06\u6765\u7684\u65f6\u5019\u518d\u88ab\u5904\u7406\u5668\u7528\u5230\u3002 \u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\u5c31\u662f\u4e00\u4e2a\u5faa\u73af\u8bed\u53e5\u7684\u6307\u4ee4\uff0c \u5f53\u5faa\u73af\u7ec8\u6b62\u7684\u6761\u4ef6\u6ee1\u8db3\u4e4b\u524d\uff0c\u5904\u7406\u5668\u9700\u8981\u53cd\u590d\u6267\u884c\u5faa\u73af\u8bed\u53e5\u4e2d\u7684\u6307\u4ee4\u3002 - \u7a7a\u95f4\u5c40\u90e8\u6027\uff1a\u662f\u6307\u7a0b\u5e8f\u5373\u5c06\u7528\u5230\u7684\u6307\u4ee4/\u6570\u636e\u53ef\u80fd\u4e0e\u76ee\u524d\u6b63\u5728\u4f7f\u7528\u7684\u6307\u4ee4/\u6570\u636e\u5728\u7a7a\u95f4\u4e0a\u76f8\u90bb\u6216\u8005\u76f8\u8fd1\u3002\u56e0\u6b64\uff0c\u5728\u5904\u7406\u5668\u5904\u7406\u5f53\u524d\u6307\u4ee4/\u6570\u636e\u65f6\uff0c\u53ef\u4ee5\u4ece\u5185\u5b58\u4e2d\u628a\u76f8\u90bb\u533a\u57df\u7684\u6307\u4ee4/\u6570\u636e\u8bfb\u53d6\u5230Cache\u4e2d\uff0c\u8fd9\u6837\uff0c\u5f53\u5904\u7406\u5668\u9700\u8981\u5904\u7406\u76f8\u90bb\u5185\u5b58\u533a\u57df\u7684\u6307\u4ee4/\u6570\u636e\u65f6\uff0c\u53ef\u4ee5\u76f4\u63a5\u4eceCache\u4e2d\u8bfb\u53d6\uff0c\u8282\u7701\u8bbf\u95ee\u5185\u5b58\u7684\u65f6\u95f4\u3002\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\u5c31\u662f\u4e00\u4e2a\u9700\u8981\u987a\u5e8f\u5904\u7406\u7684\u6570\u7ec4\u3002</p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/%E7%BC%93%E5%AD%98/#3-cache","title":"3 Cache \u4e00\u81f4\u6027","text":"<pre><code>title: \u4ea7\u751f\u7f13\u5b58\u4e00\u81f4\u6027\u95ee\u9898\u7684\u539f\u56e0\uff1f\nCache\u4e00\u81f4\u6027\u95ee\u9898\u7684\u6839\u6e90\u662f\u56e0\u4e3a\u5b58\u5728*\u591a\u4e2a\u5904\u7406\u5668\u72ec\u5360\u7684Cache*\uff0c \u800c\u4e0d\u662f\u591a\u4e2a\u5904\u7406\u5668\u3002\u5982\u679c\u591a\u4e2a\u5904\u7406\u5668\u5171\u4eabCache\uff0c \u4e5f\u5c31\u662f\u8bf4\u53ea\u6709\u4e00\u7ea7Cache\uff0c \u6240\u6709\u5904\u7406\u5668\u90fd\u5171\u4eab\u5b83\uff0c \u5728\u6bcf\u4e2a\u6307\u4ee4\u5468\u671f\u5185\uff0c \u53ea\u6709\u4e00\u4e2a\u5904\u7406\u5668\u6838\u5fc3\u80fd\u591f\u901a\u8fc7\u8fd9\u4e2aCache\u505a\u5185\u5b58\u8bfb\u5199\u64cd\u4f5c\uff0c \u90a3\u4e48\u5c31\u4e0d\u4f1a\u5b58\u5728Cache\u4e00\u81f4\u6027\u95ee\u9898\n</code></pre>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/%E7%BC%93%E5%AD%98/#31","title":"3.1 \u4e00\u81f4\u6027\u534f\u8bae","text":"<p>\u89e3\u51b3 Cache \u4e00\u81f4\u6027\u95ee\u9898\u7684\u673a\u5236\u6709\u4e24\u79cd\uff1a  - \u57fa\u4e8e\u76ee\u5f55\u7684\u534f\u8bae\uff08Directory-based protocol\uff09\uff1a\u7279\u70b9\uff08\u4e2d\u5fc3\u8282\u70b9\u7edf\u4e00\u7ba1\u7406\uff09 - \u603b\u7ebf\u7aa5\u63a2\u534f\u8bae\uff08Bus snooping protocol\uff09\uff1a\uff08\u91cd\u70b9\uff09\u7279\u70b9\uff08\u76d1\u542c\u901a\u77e5\u5e7f\u64ad\uff09 - Snarfing\u534f\u8bae</p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/%E7%BC%93%E5%AD%98/#311","title":"3.1.1 \u57fa\u4e8e\u76ee\u5f55\u7684\u534f\u8bae","text":"<p>\u57fa\u4e8e\u76ee\u5f55\u534f\u8bae\u7684\u7cfb\u7edf\u4e2d\uff0c\u9700\u8981\u7f13\u5b58\u5728 Cache \u7684\u5185\u5b58\u5757\u88ab\u7edf\u4e00\u5b58\u50a8\u5728\u4e00\u4e2a\u76ee\u5f55\u8868\u4e2d\uff0c\u76ee\u5f55\u8868\u7edf\u4e00\u7ba1\u7406\u6240\u6709\u7684\u6570\u636e\uff0c\u534f\u8c03\u4e00\u81f4\u6027\u95ee\u9898\u3002\u8be5\u76ee\u5f55\u8868\u7c7b\u4f3c\u4e8e\u4e00\u4e2a\u4ef2\u88c1\u8005\uff0c\u5f53\u5904\u7406\u5668\u9700\u8981\u628a\u4e00\u4e2a\u6570\u636e\u4ece\u5185\u5b58\u4e2d\u52a0\u8f7d\u5230\u81ea\u5df1\u72ec\u5360\u7684 Cache \u4e2d\u65f6\uff0c\u9700\u8981\u5411\u76ee\u5f55\u8868\u63d0\u51fa\u7533\u8bf7\uff1b\u5f53\u4e00\u4e2a\u5185\u5b58\u5757\u88ab\u67d0\u4e2a\u5904\u7406\u5668\u6539\u53d8\u4e4b\u540e\uff0c\u76ee\u5f55\u8868\u8d1f\u8d23\u6539\u53d8\u5176\u72b6\u6001\uff0c\u66f4\u65b0\u5176\u4ed6\u5904\u7406\u5668\u7684 Cache \u4e2d\u7684\u5907\u4efd\uff0c\u6216\u8005\u4f7f\u5176\u4ed6\u5904\u7406\u5668\u7684 Cache \u7684\u5907\u4efd\u65e0\u6548\u3002</p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/%E7%BC%93%E5%AD%98/#312","title":"3.1.2 \u603b\u7ebf\u7aa5\u63a2\u534f\u8bae","text":"<p>\u603b\u7ebf\u7aa5\u63a2\u534f\u8bae\u662f\u5728 1983 \u5e74\u88ab\u9996\u5148\u63d0\u51fa\u6765\uff0c\u8fd9\u4e2a\u534f\u8bae\u63d0\u51fa\u4e86\u4e00\u4e2a\u7aa5\u63a2\uff08snooping\uff09 \u7684\u52a8\u4f5c\uff0c\u5373\u5bf9\u4e8e\u88ab\u5904\u7406\u5668\u72ec\u5360\u7684 Cache \u4e2d\u7684\u7f13\u5b58\u7684\u5185\u5bb9\uff0c\u8be5\u5904\u7406\u5668\u8d1f\u8d23\u76d1\u542c\u603b\u7ebf\uff0c\u5982\u679c\u8be5\u5185\u5bb9\u88ab\u672c\u5904\u7406\u5668\u6539\u53d8\uff0c\u5219\u9700\u8981\u901a\u8fc7\u603b\u7ebf\u5e7f\u64ad\uff1b\u53cd\u4e4b\uff0c\u5982\u679c\u8be5\u5185\u5bb9\u72b6\u6001\u88ab\u5176\u4ed6\u5904\u7406\u5668\u6539\u53d8\uff0c\u672c\u5904\u7406\u5668\u7684 Cache \u4ece\u603b\u7ebf\u6536\u5230\u4e86\u901a\u77e5\uff0c\u5219\u9700\u8981\u76f8\u5e94\u6539\u53d8\u672c\u5730\u5907\u4efd\u7684\u72b6\u6001\u3002\u603b\u7ebf\u7aa5\u63a2\u534f\u8bae\u884d\u751f\u51fa\u8457\u540d\u7684 MESI \u534f\u8bae\uff0c\u6216\u8005\u79f0\u4e3a Illinois Protocol\u3002</p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/%E7%BC%93%E5%AD%98/#32-mesi","title":"3.2 MESI \u534f\u8bae","text":"<p>MESI \u534f\u8bae\u662f Cache line \u56db\u79cd\u72b6\u6001\u7684\u9996\u5b57\u6bcd\u7684\u7f29\u5199\uff0cCache \u4e2d\u7f13\u5b58\u7684\u6bcf\u4e2a Cache Line \u90fd\u5fc5\u987b\u662f\u8fd9\u56db\u79cd\u72b6\u6001\u4e2d\u7684\u4e00\u79cd\u3002\u5206\u522b\u662f:  1. \u4fee\u6539\u6001\uff08Modified\uff09 2. \u72ec\u5360\u6001\uff08Exclusive\uff09 3. \u5171\u4eab\u6001\uff08Shared\uff09 4. \u5931\u6548\u6001\uff08Invalid\uff09</p> <ul> <li>\u540c\u4e00\u65f6\u523b 2 \u4e2a\u7f13\u5b58\u884c\u7f13\u5b58\u540c\u4e00\u5185\u5b58\u65f6\u7f13\u5b58\u72b6\u6001\u77e9\u9635\u56fe </li> <li>\u7f13\u5b58\u72b6\u6001\u8fc1\u79fb\u8868 </li> </ul>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/%E7%BC%93%E5%AD%98/#321","title":"3.2.1 \u4fee\u6539\u6001","text":"<p>\u5982\u679c\u8be5Cache Line\u5728\u591a\u4e2aCache\u4e2d\u90fd\u6709\u5907\u4efd\uff0c \u90a3\u4e48\u53ea\u6709\u4e00\u4e2a\u5907\u4efd\u80fd\u5904\u4e8e\u8fd9\u79cd\u72b6\u6001\uff0c \u5e76\u4e14\u201cdirty\u201d\u6807\u5fd7\u4f4d\u88ab\u7f6e\u4e0a\u3002 \u62e5\u6709\u4fee\u6539\u6001Cache Line\u7684Cache\u9700\u8981\u5728\u67d0\u4e2a\u5408\u9002\u7684\u65f6\u5019\u628a\u8be5Cache Line\u5199\u56de\u5230\u5185\u5b58\u4e2d\u3002 \u4f46\u662f\u5728\u5199\u56de\u4e4b\u524d\uff0c \u4efb\u4f55\u5904\u7406\u5668\u5bf9\u8be5Cache Line\u5728\u5185\u5b58\u4e2d\u76f8\u5bf9\u5e94\u7684\u5185\u5b58\u5757\u90fd\u4e0d\u80fd\u8fdb\u884c\u8bfb\u64cd\u4f5c\u3002 Cache Line\u88ab\u5199\u56de\u5230\u5185\u5b58\u4e2d\u4e4b\u540e\uff0c \u5176\u72b6\u6001\u5c31\u7531\u4fee\u6539\u6001\u53d8\u4e3a\u5171\u4eab\u6001\u3002  </p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/%E7%BC%93%E5%AD%98/#322","title":"3.2.2 \u72ec\u5360\u6001","text":"<p>\u548c\u4fee\u6539\u72b6\u6001\u4e00\u6837\uff0c\u5982\u679c\u8be5 Cache Line \u5728\u591a\u4e2a Cache \u4e2d\u90fd\u6709\u5907\u4efd\uff0c\u90a3\u4e48\u53ea\u6709\u4e00\u4e2a\u5907\u4efd\u80fd\u5904\u4e8e\u8fd9\u79cd\u72b6\u6001\uff0c \u4f46\u662f\u201cdirty\u201d\u6807\u5fd7\u4f4d\u6ca1\u6709\u7f6e\u4e0a\uff0c \u56e0\u4e3a\u5b83\u662f\u548c\u4e3b\u5185\u5b58\u5185\u5bb9\u4fdd\u6301\u4e00\u81f4\u7684\u4e00\u4efd\u62f7\u8d1d\u3002 \u5982\u679c\u4ea7\u751f\u4e00\u4e2a\u8bfb\u8bf7\u6c42\uff0c \u5b83\u5c31\u53ef\u4ee5\u5728\u4efb\u4f55\u65f6\u5019\u53d8\u6210\u5171\u4eab\u6001\u3002 \u76f8\u5e94\u5730\uff0c \u5982\u679c\u4ea7\u751f\u4e86\u4e00\u4e2a\u5199\u8bf7\u6c42\uff0c \u5b83\u5c31\u53ef\u4ee5\u5728\u4efb\u4f55\u65f6\u5019\u53d8\u6210\u4fee\u6539\u6001\u3002  </p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/%E7%BC%93%E5%AD%98/#323","title":"3.2.3 \u5171\u4eab\u6001","text":"<p>\u610f\u5473\u7740\u8be5 Cache Line \u53ef\u80fd\u5728\u591a\u4e2a Cache \u4e2d\u90fd\u6709\u5907\u4efd\uff0c\u5e76\u4e14\u662f\u76f8\u540c\u7684\u72b6\u6001\uff0c\u5b83\u662f\u548c\u5185\u5b58\u5185\u5bb9\u4fdd\u6301\u4e00\u81f4\u7684\u4e00\u4efd\u62f7\u8d1d\uff0c \u800c\u4e14\u53ef\u4ee5\u5728\u4efb\u4f55\u65f6\u5019\u90fd\u53d8\u6210\u5176\u4ed6\u4e09\u79cd\u72b6\u6001\u3002  </p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/%E7%BC%93%E5%AD%98/#324","title":"3.2.4 \u5931\u6548\u6001","text":"<p>\u8be5 Cache Line \u8981\u4e48\u5df2\u7ecf\u4e0d\u5728 Cache \u4e2d\uff0c\u8981\u4e48\u5b83\u7684\u5185\u5bb9\u5df2\u7ecf\u8fc7\u65f6\u3002\u4e00\u65e6\u67d0\u4e2a Cache Line \u88ab\u6807\u8bb0\u4e3a\u5931\u6548\uff0c\u90a3\u5b83\u5c31\u88ab\u5f53\u4f5c\u4ece\u6765\u6ca1\u88ab\u52a0\u8f7d\u5230 Cache \u4e2d\u3002</p>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/%E7%BC%93%E5%AD%98/#33-dpdk","title":"3.3 DPDK \u4fdd\u8bc1\u7f13\u5b58\u4e00\u81f4\u884c\u7684\u65b9\u6cd5","text":"<ul> <li>\u539f\u5219\uff1a\u907f\u514d\u591a\u4e2a\u6838\u8bbf\u95ee\u540c\u4e00\u4e2a\u5185\u5b58\u5730\u5740\u6216\u8005\u6570\u636e\u7ed3\u6784\uff0c\u6bcf\u4e2a\u6838\u5c3d\u91cf\u90fd\u907f\u514d\u4e0e\u5176\u4ed6\u6838\u5171\u4eab\u6570\u636e\uff0c\u4ece\u800c\u51cf\u5c11\u56e0\u4e3a\u9519\u8bef\u7684\u6570\u636e\u5171\u4eab\uff08cache line false sharing\uff09 \u5bfc\u81f4\u7684Cache\u4e00\u81f4\u6027\u7684\u5f00\u9500\u3002</li> <li>\u65b9\u5f0f 1\uff1a\u6570\u636e\u7ed3\u6784\u5b9a\u4e49\u65f6\uff0c\u5185\u5b58\u5bf9\u9f50\u7f13\u5b58\u884c\u5927\u5c0f\uff0864Byte\uff09\uff1b\u5bf9\u4e8e\u67d0\u4e9b\u6570\u636e\u7ed3\u6784\uff0c\u7ed9\u6bcf\u4e2a\u6838\u90fd\u5355\u72ec\u5b9a\u4e49\u4e00\u4efd\u3002</li> <li>\u65b9\u5f0f 2\uff1a\u5bf9\u7f51\u7edc\u7aef\u53e3\u7684\u8bbf\u95ee\u65f6\uff0c\u4e0d\u540c\u7684\u6838\u4f7f\u7528\u4e0d\u540c\u7f51\u5361\u7684\u53d1\u9001\u961f\u5217/\u63a5\u6536\u961f\u5217\uff08\u4e5f\u662f\u5185\u5b58\u4e2d\u7684\u4e00\u6bb5\u5185\u5b58\u7ed3\u6784\uff09\uff0c\u907f\u514d\u4e0d\u540c\u6838\u4f7f\u7528\u540c\u4e00\u4e2a\u53d1\u9001/\u63a5\u53d7\u961f\u5217\u3002</li> </ul>"},{"location":"Documents/G-System/%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98/%E7%BC%93%E5%AD%98/#4","title":"4 \u7f13\u5b58\u6dd8\u6c70\u7b97\u6cd5","text":"<p>\u7f13\u5b58\u6dd8\u6c70\u7b56\u7565\u6709\u5f88\u591a\u79cd\u9009\u62e9\uff0c\u5e38\u89c1\u7684\u6709\uff1a - FIFO (First Input First Output) \u5148\u8fdb\u5148\u51fa - LRU (Least Recently Used) \u6700\u8fd1\u6700\u5c11\u4f7f\u7528 - LFU (Least Frequently Used) \u6700\u4e0d\u5e38\u7528</p>"},{"location":"Documents/G-System/%E6%80%BB%E7%BA%BF/%E6%80%BB%E7%BA%BF/","title":"\u603b\u7ebf","text":"<ul> <li>\u603b\u7ebf\u7684\u5206\u7c7b\u548c\u7cfb\u7edf\u603b\u7ebf\u7ed3\u6784</li> <li>\u8ba1\u7b97\u673a\u603b\u7ebf\u63a5\u53e3\u6280\u672f</li> </ul>"},{"location":"Documents/G-System/%E6%80%BB%E7%BA%BF/%E6%80%BB%E7%BA%BF/#1","title":"1 \u603b\u7ebf\u6982\u8ff0","text":"<p>\u603b\u7ebf\u7684\u672c\u8d28\u4f5c\u7528\u662f\u5b8c\u6210\u6570\u636e\u4ea4\u6362\u3002\u603b\u7ebf\u7528\u4e8e\u5c06\u4e24\u4e2a\u6216\u4e24\u4e2a\u4ee5\u4e0a\u7684\u90e8\u4ef6\u8fde\u63a5\u8d77\u6765\uff0c\u4f7f\u5f97\u5b83\u4eec\u4e4b\u95f4\u53ef\u4ee5\u8fdb\u884c\u6570\u636e\u4ea4\u6362\uff0c\u6216\u8005\u8bf4\u901a\u4fe1\u3002\u603b\u7ebf\u542b\u4e49\u5f88\u5e7f\uff0c\u5b83\u4e0d\u4ec5\u4ec5\u662f\u6307\u7528\u4e8e\u6570\u636e\u4ea4\u6362\u7684\u901a\u9053\uff0c\u6709\u65f6\u4e5f\u5305\u542b\u4e86\u8f6f\u4ef6\u786c\u4ef6\u67b6\u6784\u3002\u6bd4\u5982PCI\u603b\u7ebf\u3001USB\u603b\u7ebf\uff0c\u5b83\u4eec\u4e0d\u4ec5\u4ec5\u662f\u6307\u4e3b\u677f\u4e0a\u7684\u67d0\u4e2a\u63a5\u53e3\uff0c\u8fd8\u5305\u542b\u4e86\u4e0e\u4e4b\u76f8\u5bf9\u5e94\u7684\u6574\u5957\u786c\u4ef6\u6a21\u578b\u3001\u8f6f\u4ef6\u67b6\u6784\u3002</p>"},{"location":"Documents/G-System/%E6%80%BB%E7%BA%BF/%E6%80%BB%E7%BA%BF/#2","title":"2 \u603b\u7ebf\u5206\u7c7b","text":"<ol> <li>\u6309\u7167\u6570\u636e\u4f20\u9012\u7684\u65b9\u5411\uff0c\u603b\u7ebf\u53ef\u4ee5\u5206\u4e3a\u5355\u5411\u603b\u7ebf\u548c\u53cc\u5411\u603b\u7ebf</li> <li>\u6309\u7167\u603b\u7ebf\u4f7f\u7528\u7684\u4fe1\u53f7\u7c7b\u578b\uff0c\u603b\u7ebf\u53ef\u4ee5\u5206\u4e3a\u5e76\u884c\u603b\u7ebf\u548c\u4e32\u884c\u603b\u7ebf</li> <li>\u6309\u7167\u603b\u7ebf\u5728\u8ba1\u7b97\u673a\u7cfb\u7edf\u4e2d\u6240\u5904\u7684\u7269\u7406\u4f4d\u7f6e\uff0c\u603b\u7ebf\u53ef\u4ee5\u5206\u4e3a\u7247\u4e0a\u603b\u7ebf\u3001\u5185\u5b58\u603b\u7ebf\u3001\u7cfb\u7edf\u603b\u7ebf\u548c\u8bbe\u5907\u603b\u7ebf</li> </ol>"},{"location":"Documents/X-Other/ASCII%E3%80%81ANSI%E5%92%8CUNICODE%E8%A7%A3%E9%87%8A/","title":"ASCII\u3001ANSI\u548cUNICODE\u89e3\u91ca","text":""},{"location":"Documents/X-Other/ASCII%E3%80%81ANSI%E5%92%8CUNICODE%E8%A7%A3%E9%87%8A/#1-ascii","title":"1 ASCII\u7801","text":"<p>ASCII\u7801\u53607bit\u4e3a\uff0c\u80fd\u8868\u793a128\u4e2a\u5b57\u7b26\uff0c\u8303\u56f40x00~0x7F,\u4e3b\u8981\u7528\u6765\u8868\u793a\u82f1\u6587\u5b57\u6bcd\uff0c\u548c\u5e38\u7528\u7684\u5b57\u7b26\u3002</p>"},{"location":"Documents/X-Other/ASCII%E3%80%81ANSI%E5%92%8CUNICODE%E8%A7%A3%E9%87%8A/#2-ansi","title":"2 ANSI","text":"<p>ANSI\u662f\u5bf9ASCII\u7684\u6269\u5c55\uff0c\u53602\u4e2a\u5b57\u8282\uff0c\u80fd\u8868\u793a\u6700\u591a65535\u4e2a\u5b57\u7b26\uff0c0x00~0x7F\u8303\u56f4\u8868\u793a\u7684\u5b57\u7b26\u4e0eASCII\u76f8\u540c\uff0c0x80~0xFFFF\u8303\u56f4\u8868\u793a\u4e0d\u540c\u56fd\u5bb6\u6216\u5730\u533a\u7684\u5b57\u7b26\u3002ANSI\u662f\u4e00\u4e2a\u7f16\u7801\u96c6\uff0c\u5982\u6c49\u5b57\u7f16\u7801GBK\uff0c\u65e5\u8bed\u7f16\u7801Shift_JIS\u90fd\u662fANSI\u7f16\u7801\u3002 </p>"},{"location":"Documents/X-Other/ASCII%E3%80%81ANSI%E5%92%8CUNICODE%E8%A7%A3%E9%87%8A/#3-unicode","title":"3 Unicode\u5b57\u7b26\u96c6","text":"<p>Unicode\u662f\u4e00\u4e2a\u5b57\u7b26\u96c6\uff0c\u6700\u9ad8\u53603\u5b57\u8282\u5927\u5c0f\uff0c\u4f7f\u75280x0000~0x10FFFF\u8303\u56f4\u8868\u793a\u5168\u4e16\u754c\u6240\u6709\u5b57\u7b26\u3002UTF-8\u3001UTF-16\u3001UTF-32\u90fd\u662f\u7f16\u7801\u7684\u5b9e\u73b0\u65b9\u6848\u3002\u4e3a\u4e86\u5c06\u4e00\u4e2aWORD\u7684UTF-16\u7f16\u7801\u4e0e\u4e24\u4e2aWORD\u7684UTF-16\u7f16\u7801\u533a\u5206\u5f00\u6765\uff0cUnicode\u7f16\u7801\u7684\u8bbe\u8ba1\u8005\u5c060xD800-0xDFFF\u4fdd\u7559\u4e0b\u6765\uff0c\u5e76\u79f0\u4e3a\u4ee3\u7406\u533a\uff08Surrogate\uff09\u3002UCS-2\u4e0eUTF-16\u5728\u8868\u793a2\u4e2a\u5b57\u8282\u8303\u56f4\u5185\u5b57\u7b26\u65f6\u90fd\u8868\u793a\u540c\u4e00\u4e2a\u5b57\u7b26\uff0c\u4f46UTF-16\u53ef\u4ee5\u901a\u8fc7\u4f7f\u75284\u4e2a\u5b57\u8282\u8868\u793a\u66f4\u591a\u7684\u5b57\u7b26\u3002UCS-4\u4e0eUTF-32\u7684\u5173\u7cfb\u65f6\uff0cUCS-4\u80fd\u8868\u793a\u66f4\u591a\u7684\u5b57\u7b26\u57280x00~0x10FFFF\u8303\u56f4\u5185\uff0c\u8868\u793a\u540c\u4e00\u4e2a\u5b57\u7b26\u3002</p>"},{"location":"Documents/X-Other/%E4%BD%8D%E8%BF%90%E7%AE%97%E6%80%BB%E7%BB%93/","title":"\u4f4d\u8fd0\u7b97\u603b\u7ed3","text":"<ul> <li>\u6570N\u5de6\u79fbn\u4f4d\u7b49\u4ef7\u4e8e$N*2^n$</li> <li>\u6570N\u53f3\u79fbn\u4f4d\u7b49\u4ef7\u4e8e$\\frac{N}{2^n}$</li> </ul>"},{"location":"Documents/X-Other/%E4%BD%8D%E8%BF%90%E7%AE%97%E6%80%BB%E7%BB%93/#1","title":"1 \u5de6\u79fb","text":""},{"location":"Documents/X-Other/%E4%BD%8D%E8%BF%90%E7%AE%97%E6%80%BB%E7%BB%93/#11-1-bit","title":"1.1 1.&lt;&lt; \u5de6\u79fb \u53ef\u4ee5\u79fb\u52a8\u4efb\u4f55bit\u4f4d\uff0c\u5373\u4f7f\u8d85\u8fc7\u6570\u636e\u7c7b\u578b\u7684\u5927\u5c0f,\u4f8b\uff1a","text":"<pre><code>    char c=23;//(hex 17)\nint i=0; i=c&lt;&lt;8; //(i\u7684\u503c\u4e3a\uff1a0x00001700)\n</code></pre>"},{"location":"Documents/X-Other/%E5%A4%A7%E7%AB%AF%E5%B0%8F%E7%AB%AF/","title":"\u5927\u7aef\u5c0f\u7aef","text":"<p>\u8bb0\u5fc6\u8bc0\u7a8d\uff1a\u5927\u7aef\u5e8f\u4ece\u5de6\u5f80\u53f3\u8bfb\uff0c\u6570\u636e\u5c31\u50cf\u770b\u5230\u4e00\u6837 - \u5927\u7aef\uff1a\u4f4e\u4f4d\u6570\u636e\u5728\u5185\u5b58\u9ad8\u5730\u5740\u4e0a\uff0c\u59820x1234,0x34\u5c5e\u4e8e\u4f4e\u4f4d\u6570\u636e\uff0c\u5728\u5185\u5b58\u7684\u9ad8\u4f4d\u4e0a\u3002 - \u5c0f\u7aef\uff1a\u4f4e\u4f4d\u6570\u636e\u5728\u5185\u5b58\u4f4e\u5730\u5740\u4e0a\u3002 - \u4e00\u822c\u628a\u5730\u5740\u4ece\u5de6\u5f80\u53f3\u8bfb\u662f\u4f4e\u5730\u5740\u5230\u9ad8\u5730\u5740 \u5927\u7aef\u5e8f\u793a\u4f8b</p> <pre><code>\u5185\u5b58\u5730\u5740\uff1a0x0000 0x0001 0x0002 0x0003\n\u6570\u636e\u4f4d\uff1a   0x12   0x34   0x56   0x78\n</code></pre> <p>\u5c0f\u7aef\u5e8f\u793a\u4f8b \u5927\u7aef\u5e8f\u793a\u4f8b</p> <pre><code>\u5185\u5b58\u5730\u5740\uff1a0x0000 0x0001 0x0002 0x0003\n\u6570\u636e\u4f4d\uff1a   0x78   0x56   0x34   0x12\n</code></pre> <p>\u4ee3\u7801\u5b9e\u73b0\u5224\u65ad:\u5229\u7528\u8054\u5408\u4f53\u7279\u70b9</p> <pre><code>#include &lt;stdio.h&gt;\nint main()\n{\nunion {\nint n;\nchar ch;\n} data;\ndata.n = 1;\nif (data.ch == 1) {\nprintf(\"Little-endian\\n\");\n}\nelse {\nprintf(\"Big-endian\\n\");\n}\nreturn 0;\n}\n</code></pre>"},{"location":"Documents/X-Other/%E5%B9%B6%E8%A1%8C%E3%80%81%E5%B9%B6%E5%8F%91%E3%80%81%E5%90%8C%E6%AD%A5%E3%80%81%E5%BC%82%E6%AD%A5/","title":"\u5e76\u884c\u3001\u5e76\u53d1\u3001\u540c\u6b65\u3001\u5f02\u6b65","text":"<p>\u5e76\u53d1\u548c\u5e76\u884c\u662f\u5f02\u6b65\u5b9e\u73b0\u7684\u65b9\u5f0f\u3002</p>"},{"location":"Documents/X-Other/%E5%B9%B6%E8%A1%8C%E3%80%81%E5%B9%B6%E5%8F%91%E3%80%81%E5%90%8C%E6%AD%A5%E3%80%81%E5%BC%82%E6%AD%A5/#1","title":"1 \u5e76\u884c","text":"<p>\u5728\u540c\u4e00\u65f6\u95f4\u70b9\u53ef\u4ee5\u6709\u591a\u4e2a\u4efb\u52a1\u5728\u6267\u884c\u3002\u7406\u89e3\u6210\u5728\u591a\u8f66\u9053\u8f66\u8f86\u53ef\u4ee5\u5e76\u884c\u4e92\u4e0d\u5e72\u6270\u7684\u524d\u884c\u6216\u662f\u50cf\u591a\u6838\u7535\u8111\uff0ccpu\u7ed9\u6bcf\u4e00\u4e2a\u4efb\u52a1\u4e00\u4e2a\u6838\u5fc3\u53bb\u6267\u884c\u3002</p>"},{"location":"Documents/X-Other/%E5%B9%B6%E8%A1%8C%E3%80%81%E5%B9%B6%E5%8F%91%E3%80%81%E5%90%8C%E6%AD%A5%E3%80%81%E5%BC%82%E6%AD%A5/#2","title":"2 \u5e76\u53d1","text":"<p>\u5728\u4e00\u6bb5\u65f6\u95f4\u5185\uff0c\u53ef\u4ee5\u6709\u591a\u4e2a\u4efb\u52a1\u6267\u884c\u3002\u7406\u89e3\u6210\u5728\u5355\u6838\u7684\u7535\u8111\u4e0acpu\u53ea\u80fd\u7ed9\u6bcf\u4e00\u4e2a\u4efb\u52a1\u90fd\u5206\u914d\u4e00\u5b9a\u7684\u65f6\u95f4\u7247\u3002</p>"},{"location":"Documents/X-Other/%E5%B9%B6%E8%A1%8C%E3%80%81%E5%B9%B6%E5%8F%91%E3%80%81%E5%90%8C%E6%AD%A5%E3%80%81%E5%BC%82%E6%AD%A5/#3","title":"3 \u540c\u6b65","text":"<p>\u6309\u987a\u5e8f\u7684\u6267\u884c</p>"},{"location":"Documents/X-Other/%E5%B9%B6%E8%A1%8C%E3%80%81%E5%B9%B6%E5%8F%91%E3%80%81%E5%90%8C%E6%AD%A5%E3%80%81%E5%BC%82%E6%AD%A5/#4","title":"4 \u5f02\u6b65","text":"<p>\u6bcf\u4e00\u4e2a\u4efb\u52a1\u4e92\u4e0d\u5e72\u6270\u7684\u6267\u884c\uff0c\u65e0\u5148\u540e\u987a\u5e8f\u5173\u7cfb\uff0c\u5177\u4f53\u5b9e\u73b0\u53ef\u4ee5\u662f\u5e76\u53d1\u6216\u5e76\u884c\u7b56\u7565\u3002</p>"},{"location":"Documents/X-Other/%E6%88%91%E7%9A%84%E7%BD%91%E7%AB%99%E9%93%BE%E6%8E%A5/","title":"\u6211\u7684\u7f51\u7ad9\u94fe\u63a5","text":"<ul> <li>\u6211\u7684GitHub </li> <li>\u6211\u7684CSDN</li> <li>\u6211\u7684Gitee</li> </ul>"},{"location":"Documents/X-Other/%E6%B5%AE%E7%82%B9%E6%95%B0%E4%BA%8C%E8%BF%9B%E5%88%B6%E8%A1%A8%E7%A4%BA/","title":"\u6d6e\u70b9\u6570\u4e8c\u8fdb\u5236\u8868\u793a","text":"<p>\u4ee513.58\u4e3a\u4f8b 1. \u6574\u6570\u90e8\u5206\u96642\u53d6\u4f59\uff0c\u4f59\u6570\u7ed3\u6784\u53cd\u5411\u6392\u5217\u5373\u4e3a\u6574\u6570\u90e8\u5206\u7684\u4e8c\u8fdb\u5236\u503c 2. \u5c0f\u6570\u90e8\u5206\u4e582\uff0c\u5927\u4e8e1.0\u53d61\uff0c\u5426\u5219\u53d60\uff0c\u76f4\u5230\u6240\u6709\u5c0f\u6570\u4f4d\u4e3a0</p> \u6574\u6570\u4f4d \u4f59\u6570 13%2 1 6%2 0 3%2 1 1%2 1 \u5c0f\u6570\u4f4d \u6574\u6570 0.58*2 1 0.16*2 0 0.32*2 0 0.64*2 0 0.28 1 0.56 0 0.12 1 ... ... <ol> <li>\u4e8c\u8fdb\u5236\u8868\u793a\u4e3a1101.1000101...</li> <li>\u6807\u51c6\u5316\uff0c\u53f3\u79fb3\u4f4d\uff0c1.1011000101...*2^3</li> <li>\u7b26\u53f7\u4f4d0\uff081\u4f4d\uff09+\u6307\u657010000010\uff088\u4f4d\uff0c32\u4f4d\u7cbe\u5ea6127+\u53f3\u79fb\u76843\u7b49\u4e8e130\u7684\u4e8c\u8fdb\u5236\uff09+\u5c3e\u65701000101...\uff08\u517132-1-8=23\u4f4d\u6b65\u9aa43\u4e2d\u5c0f\u6570\u4f4d\u540e\u90e8\u5206\uff09</li> </ol>"},{"location":"Documents/X-Other/%E7%A4%BE%E5%8C%BA%E7%BD%91%E7%AB%99/","title":"\u793e\u533a\u7f51\u7ad9","text":"<ul> <li>https://www.modernescpp.com/index.php</li> <li>https://thispointer.com//</li> <li>https://iq.opengenus.org/</li> <li>https://www.geeksforgeeks.org/</li> <li>https://aticleworld.com/</li> <li>https://www.cprogramming.com/</li> <li>https://www.codeproject.com/</li> <li>https://sourceforge.net/</li> <li>http://www.planet-source-code.com/</li> <li>http://www.openrce.org/articles/</li> <li>https://www.gnu.org/</li> <li>https://hexo.io/</li> <li>https://www.researchgate.net/</li> <li>http://zh.highscore.de/cpp/boost/introduction.html</li> <li>https://docs.unrealengine.com/udk/Three/DevelopmentKitHomeCH.html</li> <li>https://www.freecoursesonline.me/?1</li> <li>https://onehack.us/- </li> <li>http://www.91ri.org/</li> <li>http://www.allitebooks.org/</li> <li>https://www.sciencedirect.com/</li> <li>https://www.aiosearch.com/</li> <li>http://prostylex.org/</li> <li>https://torrentgalaxy.to/</li> </ul>"},{"location":"Documents/X-Other/%E7%A8%8B%E5%BA%8F%E5%91%98%E6%8E%8C%E6%8F%A1%E7%9A%84%E5%B7%A5%E5%85%B7/","title":"\u7a0b\u5e8f\u5458\u638c\u63e1\u7684\u5de5\u5177","text":"<ol> <li>ppt</li> <li>excel</li> <li>docker</li> <li>git</li> <li>vscode</li> </ol>"},{"location":"Documents/X-Other/%E7%BC%96%E7%A8%8B%E6%9C%AF%E8%AF%AD/","title":"\u7f16\u7a0b\u672f\u8bed","text":"<ul> <li>ABI(application binary interface)(\u5e94\u7528\u7a0b\u5e8f\u4e8c\u8fdb\u5236\u63a5\u53e3)</li> <li>AOP(Aspect Oriented Programming)(\u9762\u5411\u5207\u9762\u7f16\u7a0b)</li> <li>BIOS (Basic Input/Output System)(\u57fa\u672c\u8f93\u5165\u8f93\u51fa\u7cfb\u7edf)\uff1a\u662f\u8ba1\u7b97\u673a\u7684\u5fae\u5904\u7406\u5668\u5728\u8ba1\u7b97\u673a\u7cfb\u7edf\u901a\u7535\u540e\u7528\u6765\u542f\u52a8\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u7a0b\u5e8f\u3002\u5b83\u8fd8\u7ba1\u7406\u8ba1\u7b97\u673a\u64cd\u4f5c\u7cfb\u7edf (OS) \u548c\u8fde\u63a5\u7684\u8bbe\u5907 (\u5982\u786c\u76d8\u3001\u89c6\u9891\u9002\u914d\u5668\u3001\u952e\u76d8\u3001\u9f20\u6807\u548c\u6253\u5370\u673a) \u4e4b\u95f4\u7684\u6570\u636e\u6d41\u3002</li> <li>Blob(Binary Large Object)(\u8fdb\u5236\u7c7b\u578b\u7684\u5927\u5bf9\u8c61)</li> <li>code hot path(\u4ee3\u7801\u70ed\u8def\u5f84)(\u6307\u7a0b\u5e8f\u4e2d\u9891\u7e41\u6267\u884c\u7684\u4ee3\u7801\u5757)</li> <li>CI/CD(Continuous integration/Continuous delivery)(\u6301\u7eed\u96c6\u6210,\u6301\u7eed\u4ea4\u4ed8)</li> <li>CRUD(create, read, update, delete)(\u589e\u5220\u6539\u67e5)</li> <li>DDD(Domain-driven design)(\u9886\u57df\u9a71\u52a8\u8bbe\u8ba1)</li> <li>ELF(Executable and Linking Format)\u662f\u4e00\u79cd\u5bf9\u8c61\u6587\u4ef6\u7684\u683c\u5f0f\uff0c\u7528\u4e8e\u5b9a\u4e49\u4e0d\u540c\u7c7b\u578b\u7684\u5bf9\u8c61\u6587\u4ef6(Object files)\u4e2d\u90fd\u653e\u4e86\u4ec0\u4e48\u4e1c\u897f\u3001\u4ee5\u53ca\u90fd\u4ee5\u4ec0\u4e48\u6837\u7684\u683c\u5f0f\u53bb\u653e\u8fd9\u4e9b\u4e1c\u897f</li> <li>GRUB\uff08GRand Unified Bootloader\u7b80\u79f0\u201cGRUB\u201d\uff09\u662f\u4e00\u4e2a\u6765\u81eaGNU\u9879\u76ee\u7684\u591a\u64cd\u4f5c\u7cfb\u7edf\u542f\u52a8\u7a0b\u5e8f\u3002GRUB\u662f\u591a\u542f\u52a8\u89c4\u8303\u7684\u5b9e\u73b0\uff0c\u5b83\u5141\u8bb8\u7528\u6237\u53ef\u4ee5\u5728\u8ba1\u7b97\u673a\u5185\u540c\u65f6\u62e5\u6709\u591a\u4e2a\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5e76\u5728\u8ba1\u7b97\u673a\u542f\u52a8\u65f6\u9009\u62e9\u5e0c\u671b\u8fd0\u884c\u7684\u64cd\u4f5c\u7cfb\u7edf\u3002GRUB\u53ef\u7528\u4e8e\u9009\u62e9\u64cd\u4f5c\u7cfb\u7edf\u5206\u533a\u4e0a\u7684\u4e0d\u540c\u5185\u6838\uff0c\u4e5f\u53ef\u7528\u4e8e\u5411\u8fd9\u4e9b\u5185\u6838\u4f20\u9012\u542f\u52a8\u53c2\u6570\u3002</li> <li>GNU (GNU's Not Unix)\uff1aGNU\u662f\u4e00\u4e2a\u81ea\u7531\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5176\u5185\u5bb9\u8f6f\u4ef6\u5b8c\u5168\u4ee5GPL\u65b9\u5f0f\u53d1\u5e03\u3002\u8fd9\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u662fGNU\u8ba1\u5212\u7684\u4e3b\u8981\u76ee\u6807\uff0c\u540d\u79f0\u6765\u81eaGNU's Not Unix!\u7684\u9012\u5f52\u7f29\u5199\uff0c\u56e0\u4e3aGNU\u7684\u8bbe\u8ba1\u7c7b\u4f3cUnix\uff0c\u4f46\u5b83\u4e0d\u5305\u542b\u5177\u8457\u4f5c\u6743\u7684Unix\u4ee3\u7801</li> <li>GNU \u8ba1\u5212\uff1a\u662f\u4e00\u4e2a\u81ea\u7531\u8f6f\u4ef6\u96c6\u4f53\u534f\u4f5c \u8ba1\u5212\u3002\uff08\u5f00\u6e90\u8f6f\u4ef6\uff09</li> <li>GPL\uff1aGNU\u901a\u7528\u516c\u5171\u8bb8\u53ef\u8bc1\uff08GNU General Public License\uff09</li> <li>IFS(internal field separator)(\u5185\u90e8\u5b57\u6bb5\u5206\u9694\u7b26)</li> <li>IOPS\uff08Input/Output Operations Per Second\uff09\u662f\u4e00\u4e2a\u7528\u4e8e\u8ba1\u7b97\u673a\u5b58\u50a8\u8bbe\u5907\uff08\u5982\u786c\u76d8\uff08HDD\uff09\u3001\u56fa\u6001\u786c\u76d8\uff08SSD\uff09\u6216\u5b58\u50a8\u533a\u57df\u7f51\u7edc\uff08SAN\uff09\uff09\u6027\u80fd\u6d4b\u8bd5\u7684\u91cf\u6d4b\u65b9\u5f0f\uff0c\u53ef\u4ee5\u89c6\u4e3a\u662f\u6bcf\u79d2\u7684\u8bfb\u5199\u6b21\u6570\u3002</li> <li>IPC(Inter Process Communication)(\u8fdb\u7a0b\u95f4\u901a\u4fe1)</li> <li>LLVM LLVM\u662f\u4e00\u5957\u7f16\u8bd1\u5668\u57fa\u7840\u8bbe\u65bd\u9879\u76ee\uff0c\u4e3a\u81ea\u7531\u8f6f\u4ef6\uff0c\u4ee5C++\u5199\u6210\uff0c\u5305\u542b\u4e00\u7cfb\u5217\u6a21\u5757\u5316\u7684\u7f16\u8bd1\u5668\u7ec4\u4ef6\u548c\u5de5\u5177\u94fe\uff0c\u7528\u6765\u5f00\u53d1\u7f16\u8bd1\u5668\u524d\u7aef\u548c\u540e\u7aef\u3002\u5b83\u662f\u4e3a\u4e86\u4efb\u610f\u4e00\u79cd\u7f16\u7a0b\u8bed\u8a00\u800c\u5199\u6210\u7684\u7a0b\u5e8f\uff0c\u5229\u7528\u865a\u62df\u6280\u672f\u521b\u9020\u51fa\u7f16\u8bd1\u65f6\u671f\u3001\u94fe\u63a5\u65f6\u671f\u3001\u8fd0\u884c\u65f6\u671f\u4ee5\u53ca\u201c\u95f2\u7f6e\u65f6\u671f\u201d\u7684\u4f18\u5316\u3002</li> <li>OCI(Open Container Initiative)\u662f\u4e00\u4e2a\u8f7b\u91cf\u7ea7\uff0c\u5f00\u653e\u7684\u6cbb\u7406\u7ed3\u6784\uff08\u9879\u76ee\uff09\uff0c\u5728 Linux \u57fa\u91d1\u4f1a\u7684\u652f\u6301\u4e0b\u6210\u7acb\uff0c\u81f4\u529b\u4e8e\u56f4\u7ed5\u5bb9\u5668\u683c\u5f0f\u548c\u8fd0\u884c\u65f6\u521b\u5efa\u5f00\u653e\u7684\u884c\u4e1a\u6807\u51c6</li> <li>OOP(Object Oriented Programming)(\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b)</li> <li>OSI(Open Systems Interconnection)(\u5f00\u653e\u7cfb\u7edf\u4e92\u8fde)</li> <li>POP(Procedure-Oriented Programming)(\u9762\u5411\u8fc7\u7a0b\u7f16\u7a0b)</li> <li>POSIX(Portable Operating System Interface)(\u53ef\u79fb\u690d\u64cd\u4f5c\u7cfb\u7edf\u63a5\u53e3)</li> <li>PWA(Progressive Web App)(\u6e10\u8fdb\u5f0fweb\u5e94\u7528)</li> <li>RAID(Redundant Array of Independent Disks)(\u72ec\u7acb\u786c\u76d8\u5197\u4f59\u9635\u5217,\u7b80\u79f0\u78c1\u76d8\u9635\u5217)</li> <li>RPC(Remote Procedure Call)(\u8fdc\u7a0b\u8fdb\u7a0b\u70b9\u8c03\u7528)</li> <li>SDK(Software Development Kit)(\u8f6f\u4ef6\u5f00\u53d1\u5de5\u5177\u5305)</li> <li>SFINAE(Substitution Failure Is Not An Error)(\u66ff\u6362\u5931\u8d25\u4e0d\u662f\u9519\u8bef)</li> <li>WBS(Work breakdown structure)\u5de5\u4f5c\u5206\u89e3\u7ed3\u6784</li> <li>\u7f51\u7edc\u5206\u533a\uff1a\u56e0\u4e3a\u4e00\u4e9b\u6545\u969c\uff0c\u4f7f\u5f97\u6709\u4e9b\u8282\u70b9\u4e4b\u95f4\u4e0d\u8fde\u901a\u4e86\uff0c\u6574\u4e2a\u7f51\u7edc\u5c31\u5206\u6210\u4e86\u51e0\u5757\u533a\u57df\u3002\u6570\u636e\u5c31\u6563\u5e03\u5728\u4e86\u8fd9\u4e9b\u4e0d\u8fde\u901a\u7684\u533a\u57df\u4e2d\u3002\u8fd9\u5c31\u53eb\u5206\u533a\u3002</li> <li>\u5b58\u50a8\uff1a\u53ea\u8981\u5b58\u6570\u636e\u7684\u90fd\u53ef\u4ee5\u53eb\u5b58\u50a8\uff0c\u5982\u6570\u636e\u5e93\uff0c\u6587\u4ef6\u7cfb\u7edf\u3001\u5bf9\u8c61\u5b58\u50a8\u3001\u5757\u5b58\u50a8</li> </ul>"},{"location":"Documents/X-Other/%E7%BC%96%E7%A8%8B%E6%9C%AF%E8%AF%AD/#1-magic-number","title":"1 \u4ec0\u4e48\u662f magic number","text":"<ul> <li>\u7f16\u7a0b\u4e2d\u7684\u300c\u9b54\u6570\u300d\uff08magic number\uff09\u662f\u4ec0\u4e48\u610f\u601d\uff1f\u5e73\u65f6\u6211\u4eec\u80fd\u63a5\u89e6\u5230\u54ea\u4e9b\u9b54\u6570\uff1f</li> <li> <p>wiki-Magic-number \u67d0\u4e9b\u5177\u6709\u7279\u5b9a\u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u559c\u6b22\u5728\u6587\u4ef6\u5f00\u5934\u5199\u51e0\u4e2a\u7279\u6b8a\u7684\u5b57\u7b26\u4ee5\u8868\u660e\u81ea\u5df1\u7684\u8eab\u4efd\uff0c\u4ee5\u4fbf\u9a8c\u660e\u6b63\u8eab\u3002\u4f8b\u5982\u5e38\u89c1\u7684\u51e0\u79cd\u56fe\u7247\u683c\u5f0f\u7684\u6587\u4ef6\uff1a</p> </li> <li> <p>JPEG (jpg)\uff0c\u6587\u4ef6\u5934\uff1aFFD8FF</p> </li> <li>PNG (png)\uff0c\u6587\u4ef6\u5934\uff1a89504E47</li> <li>GIF (gif)\uff0c\u6587\u4ef6\u5934\uff1a47494638</li> <li>Windows Bitmap (bmp)\uff0c\u6587\u4ef6\u5934\uff1a424D</li> </ul>"},{"location":"Documents/X-Other/%E8%91%97%E5%90%8D%E7%AB%AF%E5%8F%A3%E5%8F%B7/","title":"\u8457\u540d\u7aef\u53e3\u53f7","text":"\u7aef\u53e3\u53f7 \u540d\u79f0 \u6ce8\u91ca 21 ftp \u6587\u4ef6\u4f20\u8f93\u534f\u8bae\uff08FTP\uff09\u7aef\u53e3\uff1b\u6709\u65f6\u88ab\u6587\u4ef6\u670d\u52a1\u534f\u8bae\uff08FSP\uff09\u4f7f\u7528 22 ssh \u5b89\u5168 Shell\uff08SSH\uff09\u670d\u52a1 23 telnet \u901a\u8fc7\"TCP/IP\"\u7f51\u7edc\u8bbf\u95ee\u8fdc\u7a0b\u8ba1\u7b97\u673a\u548c\u7ec8\u7aef 25 smtp \u7b80\u5355\u90ae\u4ef6\u4f20\u8f93\u534f\u8bae\uff08SMTP\uff09 50 re-mail-ck \u8fdc\u7a0b\u90ae\u4ef6\u68c0\u67e5\u534f\u8bae 53 DNS \u57df\u540d\u670d\u52a1\uff08\u5982 BIND\uff09 80 http \u7528\u4e8e\u4e07\u7ef4\u7f51\uff08WWW\uff09\u670d\u52a1\u7684\u8d85\u6587\u672c\u4f20\u8f93\u534f\u8bae\uff08HTTP\uff09 443 HTTPS Hyper Text Transfer Protocol over SecureSocket Layer 3306 mysql \u5173\u7cfb\u578b\u6570\u636e\u5e93"},{"location":"Documents/X-Other/%E8%A3%85%E6%9C%BA%E5%BF%85%E8%A3%85%E8%BD%AF%E4%BB%B6/","title":"\u88c5\u673a\u5fc5\u88c5\u8f6f\u4ef6","text":""},{"location":"Documents/X-Other/%E8%A3%85%E6%9C%BA%E5%BF%85%E8%A3%85%E8%BD%AF%E4%BB%B6/#1","title":"1 \u57fa\u7840\u5de5\u5177","text":"<ol> <li>chrome</li> <li>Snipaste \uff08\u622a\u56fe\u5de5\u5177\uff09</li> <li>Potplayer \uff08\u89c6\u9891\u64ad\u653e\u5668\uff09</li> </ol>"},{"location":"Documents/X-Other/%E8%A3%85%E6%9C%BA%E5%BF%85%E8%A3%85%E8%BD%AF%E4%BB%B6/#2","title":"2 \u7f16\u7a0b\u7c7b","text":"<ol> <li>Windows Terminal</li> <li>Termius</li> <li>Git</li> <li>Vscode</li> <li>Notepad++</li> <li>VMware</li> </ol>"},{"location":"Documents/X-Other/%E8%A3%85%E6%9C%BA%E5%BF%85%E8%A3%85%E8%BD%AF%E4%BB%B6/#3","title":"3 \u5b58\u50a8\u7c7b","text":"<ol> <li>\u963f\u91cc\u4e91\u76d8</li> <li>picGo</li> </ol>"},{"location":"Documents/X-Other/%E8%A3%85%E6%9C%BA%E5%BF%85%E8%A3%85%E8%BD%AF%E4%BB%B6/#4","title":"4 \u529e\u516c","text":"<ol> <li>WPS</li> <li>Xmind \uff08\u601d\u7ef4\u5bfc\u56fe\u5de5\u5177\uff09</li> <li>visual paradigm \u793e\u533a\u7248 \uff08\u753b\u56fe\u5de5\u5177\uff09</li> <li>Typora \uff08markdown \u5de5\u5177\uff09</li> <li>Obsidian</li> <li>Foxmail</li> <li>\u798f\u6615\u9605\u8bfb\u5668</li> <li>NeatReader/NeatConverter</li> </ol>"},{"location":"Documents/X-Other/%E7%A0%B4%E8%A7%A3%E6%95%99%E7%A8%8B/Office%E5%8A%9E%E5%85%AC%E8%BD%AF%E4%BB%B6/","title":"Office\u529e\u516c\u8f6f\u4ef6","text":""},{"location":"Documents/X-Other/%E7%A0%B4%E8%A7%A3%E6%95%99%E7%A8%8B/Office%E5%8A%9E%E5%85%AC%E8%BD%AF%E4%BB%B6/#office-tool-plus","title":"\u4f7f\u7528Office Tool Plus\u5de5\u5177","text":"<ul> <li>\u5b98\u7f51</li> </ul>"},{"location":"Documents/X-Other/%E7%A0%B4%E8%A7%A3%E6%95%99%E7%A8%8B/Office%E5%8A%9E%E5%85%AC%E8%BD%AF%E4%BB%B6/#_1","title":"\u6fc0\u6d3b\u6b65\u9aa4","text":"<ol> <li>\u5b89\u88c5 Office \u6279\u91cf\u8bb8\u53ef\u8bc1 (Volume)\uff0c\u65e0\u8bba\u5982\u4f55\uff0c\u8fd9\u91cc\u4f60\u90fd\u8981\u9009\u6279\u91cf\u8bb8\u53ef\u8bc1\u3002</li> <li>\u8bbe\u7f6e\u4e00\u4e2a KMS \u4e3b\u673a\u5730\u5740\uff08\u53ef\u4ee5\u8bbe\u7f6e\u7aef\u53e3\u4e3a 1688\uff09\u5e76\u4fdd\u5b58\u8bbe\u7f6e\u3002(kms.03k.org)</li> <li>\u70b9\u51fb\u6fc0\u6d3b\u6309\u94ae\uff0c\u7b49\u5f85\u6fc0\u6d3b\u5b8c\u6210\u3002</li> </ol>"}]}